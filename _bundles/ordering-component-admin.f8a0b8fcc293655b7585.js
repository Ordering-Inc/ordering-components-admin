/*! For license information please see ordering-component-admin.f8a0b8fcc293655b7585.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("OrderingComponentsAdmin",["React","ReactDOM"],t):"object"==typeof exports?exports.OrderingComponentsAdmin=t(require("react"),require("react-dom")):e.OrderingComponentsAdmin=t(e.React,e.ReactDOM)}(window,(function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/_bundles/",n(n.s=68)}([function(e,t,n){e.exports=n(64)()},function(t,n){t.exports=e},function(e,t,n){e.exports=n(37)},function(e,t,n){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",o="second",a="minute",i="hour",u="day",s="week",c="month",l="quarter",f="year",p="date",d="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},b={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+m(r,2,"0")+":"+m(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(r,c),a=n-o<0,i=t.clone().add(r+(a?-1:1),c);return+(-(r+(n-o)/(a?o-i:i-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:f,w:s,d:u,D:p,h:i,m:a,s:o,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",O={};O[g]=v;var w=function(e){return e instanceof P},j=function(e,t,n){var r;if(!e)return g;if("string"==typeof e)O[e]&&(r=e),t&&(O[e]=t,r=e);else{var o=e.name;O[o]=e,r=o}return!n&&r&&(g=r),r||!n&&g},S=function(e,t){if(w(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new P(n)},E=b;E.l=j,E.i=w,E.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var P=function(){function v(e){this.$L=j(e.locale,null,!0),this.parse(e)}var m=v.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(y);if(r){var o=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return E},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(e,t){var n=S(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return S(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<S(e)},m.$g=function(e,t,n){return E.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,r=!!E.u(t)||t,l=E.p(e),d=function(e,t){var o=E.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?o:o.endOf(u)},y=function(e,t){return E.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},h=this.$W,v=this.$M,m=this.$D,b="set"+(this.$u?"UTC":"");switch(l){case f:return r?d(1,0):d(31,11);case c:return r?d(1,v):d(0,v+1);case s:var g=this.$locale().weekStart||0,O=(h<g?h+7:h)-g;return d(r?m-O:m+(6-O),v);case u:case p:return y(b+"Hours",0);case i:return y(b+"Minutes",1);case a:return y(b+"Seconds",2);case o:return y(b+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var n,s=E.p(e),l="set"+(this.$u?"UTC":""),d=(n={},n[u]=l+"Date",n[p]=l+"Date",n[c]=l+"Month",n[f]=l+"FullYear",n[i]=l+"Hours",n[a]=l+"Minutes",n[o]=l+"Seconds",n[r]=l+"Milliseconds",n)[s],y=s===u?this.$D+(t-this.$W):t;if(s===c||s===f){var h=this.clone().set(p,1);h.$d[d](y),h.init(),this.$d=h.set(p,Math.min(this.$D,h.daysInMonth())).$d}else d&&this.$d[d](y);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[E.p(e)]()},m.add=function(r,l){var p,d=this;r=Number(r);var y=E.p(l),h=function(e){var t=S(d);return E.w(t.date(t.date()+Math.round(e*r)),d)};if(y===c)return this.set(c,this.$M+r);if(y===f)return this.set(f,this.$y+r);if(y===u)return h(1);if(y===s)return h(7);var v=(p={},p[a]=t,p[i]=n,p[o]=e,p)[y]||1,m=this.$d.getTime()+r*v;return E.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=E.z(this),a=this.$H,i=this.$m,u=this.$M,s=n.weekdays,c=n.months,l=function(e,n,o,a){return e&&(e[n]||e(t,r))||o[n].substr(0,a)},f=function(e){return E.s(a%12||12,e,"0")},p=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},y={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:E.s(u+1,2,"0"),MMM:l(n.monthsShort,u,c,3),MMMM:l(c,u),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,s,2),ddd:l(n.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(a),HH:E.s(a,2,"0"),h:f(1),hh:f(2),a:p(a,i,!0),A:p(a,i,!1),m:String(i),mm:E.s(i,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:o};return r.replace(h,(function(e,t){return t||y[e]||o.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,p,d){var y,h=E.p(p),v=S(r),m=(v.utcOffset()-this.utcOffset())*t,b=this-v,g=E.m(this,v);return g=(y={},y[f]=g/12,y[c]=g,y[l]=g/3,y[s]=(b-m)/6048e5,y[u]=(b-m)/864e5,y[i]=b/n,y[a]=b/t,y[o]=b/e,y)[h]||b,d?g:E.a(g)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return O[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=j(e,t,!0);return r&&(n.$L=r),n},m.clone=function(){return E.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),C=P.prototype;return S.prototype=C,[["$ms",r],["$s",o],["$m",a],["$H",i],["$W",u],["$M",c],["$y",f],["$D",p]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,P,S),e.$i=!0),S},S.locale=j,S.isDayjs=w,S.unix=function(e){return S(1e3*e)},S.en=O[g],S.Ls=O,S.p={},S}()},function(e,t,n){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,o,a){var i=o.prototype;a.utc=function(e){return new o({date:e,utc:!0,args:arguments})},i.utc=function(t){var n=a(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},i.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=i.parse;i.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),u.call(this,e)};var s=i.init;i.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var c=i.utcOffset;i.utcOffset=function(r,o){var a=this.$utils().u;if(a(r))return this.$u?0:a(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&null===(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var o=(""+r[0]).match(n)||["-",0,0],a=o[0],i=60*+o[1]+ +o[2];return 0===i?0:"+"===a?i:-i}(r)))return this;var i=Math.abs(r)<=16?60*r:r,u=this;if(o)return u.$offset=i,u.$u=0===r,u;if(0!==r){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(u=this.local().add(i+s,e)).$offset=i,u.$x.$localOffset=s}else u=this.utc();return u};var l=i.format;i.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},i.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*e},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var f=i.toDate;i.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var p=i.diff;i.diff=function(e,t,n){if(e&&this.$u===e.$u)return p.call(this,e,t,n);var r=this.local(),o=a(e).local();return p.call(r,o,t,n)}}}()},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r,o=n(51),a=n(26),i=n(53),u=n(54),s=n(55);"undefined"!=typeof ArrayBuffer&&(r=n(56));var c="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=c||l;t.protocol=3;var p=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=o(p),y={type:"error",data:"parser error"},h=n(57);function v(e,t,n){for(var r=new Array(e.length),o=u(e.length,n),a=function(e,n,o){t(n,(function(t,n){r[e]=n,o(t,r)}))},i=0;i<e.length;i++)a(i,e[i],o)}t.encodePacket=function(e,n,r,o){"function"==typeof n&&(o=n,n=!1),"function"==typeof r&&(o=r,r=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=e.data,a=new Uint8Array(o),i=new Uint8Array(1+o.byteLength);i[0]=p[e.type];for(var u=0;u<a.length;u++)i[u+1]=a[u];return r(i.buffer)}(e,n,o);if(void 0!==h&&a instanceof h)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(f)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=new FileReader;return o.onload=function(){t.encodePacket({type:e.type,data:o.result},n,!0,r)},o.readAsArrayBuffer(e.data)}(e,n,r);var o=new Uint8Array(1);o[0]=p[e.type];var a=new h([o.buffer,e.data]);return r(a)}(e,n,o);if(a&&a.base64)return function(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}(e,o);var i=p[e.type];return void 0!==e.data&&(i+=r?s.encode(String(e.data),{strict:!1}):String(e.data)),o(""+i)},t.encodeBase64Packet=function(e,n){var r,o="b"+t.packets[e.type];if(void 0!==h&&e.data instanceof h){var a=new FileReader;return a.onload=function(){var e=a.result.split(",")[1];n(o+e)},a.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var i=new Uint8Array(e.data),u=new Array(i.length),s=0;s<i.length;s++)u[s]=i[s];r=String.fromCharCode.apply(null,u)}return o+=btoa(r),n(o)},t.decodePacket=function(e,n,r){if(void 0===e)return y;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function(e){try{e=s.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return y;var o=e.charAt(0);return Number(o)==o&&d[o]?e.length>1?{type:d[o],data:e.substring(1)}:{type:d[o]}:y}o=new Uint8Array(e)[0];var a=i(e,1);return h&&"blob"===n&&(a=new h([a])),{type:d[o],data:a}},t.decodeBase64Packet=function(e,t){var n=d[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=r.decode(e.substr(1));return"blob"===t&&h&&(o=new h([o])),{type:n,data:o}},t.encodePayload=function(e,n,r){"function"==typeof n&&(r=n,n=null);var o=a(e);if(n&&o)return h&&!f?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r);if(!e.length)return r("0:");v(e,(function(e,r){t.encodePacket(e,!!o&&n,!1,(function(e){r(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return r(t.join(""))}))},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);var o;if("function"==typeof n&&(r=n,n=null),""===e)return r(y,0,1);for(var a,i,u="",s=0,c=e.length;s<c;s++){var l=e.charAt(s);if(":"===l){if(""===u||u!=(a=Number(u)))return r(y,0,1);if(u!=(i=e.substr(s+1,a)).length)return r(y,0,1);if(i.length){if(o=t.decodePacket(i,n,!1),y.type===o.type&&y.data===o.data)return r(y,0,1);if(!1===r(o,s+a,c))return}s+=a,u=""}else u+=l}return""!==u?r(y,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));v(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var r=t.reduce((function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2}),0),o=new Uint8Array(r),a=0;return t.forEach((function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);n=r.buffer}o[a++]=t?0:1;var u=n.byteLength.toString();for(i=0;i<u.length;i++)o[a++]=parseInt(u[i]);o[a++]=255;for(r=new Uint8Array(n),i=0;i<r.length;i++)o[a++]=r[i]})),n(o.buffer)}))},t.encodePayloadAsBlob=function(e,n){v(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);e=r.buffer,t[0]=0}var a=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),i=new Uint8Array(a.length+1);for(o=0;o<a.length;o++)i[o]=parseInt(a[o]);if(i[a.length]=255,h){var u=new h([t.buffer,i.buffer,e]);n(null,u)}}))}),(function(e,t){return n(new h(t))}))},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var o=e,a=[];o.byteLength>0;){for(var u=new Uint8Array(o),s=0===u[0],c="",l=1;255!==u[l];l++){if(c.length>310)return r(y,0,1);c+=u[l]}o=i(o,2+c.length),c=parseInt(c);var f=i(o,0,c);if(s)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(e){var p=new Uint8Array(f);f="";for(l=0;l<p.length;l++)f+=String.fromCharCode(p[l])}a.push(f),o=i(o,c)}var d=a.length;a.forEach((function(e,o){r(t.decodePacket(e,n,!0),o,d)}))}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(39)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(13))},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(58)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(13))},function(e,n){e.exports=t},function(e,t,n){!function(e,t){"use strict";function n(e,t){return e(t={exports:{}},t.exports),t.exports}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function o(){}function a(){}a.resetWarningCache=o;var i=function(){function e(e,t,n,o,a,i){if(i!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n},u=n((function(e){e.exports=i()}));function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){return d(e)||y(e,t)||h(e,t)||m()}function d(e){if(Array.isArray(e))return e}function y(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}}function h(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var b=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},g=function(e){return null!==e&&"object"===s(e)},O=function(e){return g(e)&&"function"==typeof e.then},w=function(e){return g(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment},j="[object Object]",S=function e(t,n){if(!g(t)||!g(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var o=Object.prototype.toString.call(t)===j;if(o!==(Object.prototype.toString.call(n)===j))return!1;if(!o&&!r)return t===n;var a=Object.keys(t),i=Object.keys(n);if(a.length!==i.length)return!1;for(var u={},s=0;s<a.length;s+=1)u[a[s]]=!0;for(var c=0;c<i.length;c+=1)u[i[c]]=!0;var l=Object.keys(u);if(l.length!==a.length)return!1;var f=t,p=n,d=function(t){return e(f[t],p[t])};return l.every(d)},E=function(e,t,n){return g(e)?Object.keys(e).reduce((function(r,o){var a=!g(t)||!S(e[o],t[o]);return n.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),r):a?f(f({},r||{}),{},c({},o,e[o])):r}),null):null},P="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",C=function(e){if(null===e||w(e))return e;throw new Error(P)},I=function(e){if(O(e))return{tag:"async",stripePromise:Promise.resolve(e).then(C)};var t=C(e);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},x=t.createContext(null);x.displayName="ElementsContext";var A=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},T=function(e){var n=e.stripe,r=e.options,o=e.children,a=t.useRef(!1),i=t.useRef(!0),u=t.useMemo((function(){return I(n)}),[n]),s=p(t.useState((function(){return{stripe:null,elements:null}})),2),c=s[0],l=s[1],f=b(n);null!==f&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it."),a.current||("sync"===u.tag&&(a.current=!0,l({stripe:u.stripe,elements:u.stripe.elements(r)})),"async"===u.tag&&(a.current=!0,u.stripePromise.then((function(e){e&&i.current&&l({stripe:e,elements:e.elements(r)})}))));var d=b(r);return t.useEffect((function(){if(c.elements){var e=E(r,d,["clientSecret","fonts"]);e&&c.elements.update(e)}}),[r,d,c.elements]),t.useEffect((function(){return function(){i.current=!1}}),[]),t.useEffect((function(){var e=c.stripe;e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"1.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"1.7.0",url:"https://stripe.com/docs/stripe-js/react"}))}),[c.stripe]),t.createElement(x.Provider,{value:c},o)};T.propTypes={stripe:u.any,options:u.object};var _=function(e){var n=t.useContext(x);return A(n,e)},k=function(){return _("calls useElements()").elements},D=function(){return _("calls useStripe()").stripe},U=function(e){return(0,e.children)(_("mounts <ElementsConsumer>"))};U.propTypes={children:u.func.isRequired};var L=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),function(){n.current&&n.current.apply(n,arguments)}},B=function(){},F=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},R=function(e,n){var r="".concat(F(e),"Element"),o=n?function(e){_("mounts <".concat(r,">"));var n=e.id,o=e.className;return t.createElement("div",{id:n,className:o})}:function(n){var o=n.id,a=n.className,i=n.options,u=void 0===i?{}:i,s=n.onBlur,c=void 0===s?B:s,l=n.onFocus,f=void 0===l?B:l,p=n.onReady,d=void 0===p?B:p,y=n.onChange,h=void 0===y?B:y,v=n.onEscape,m=void 0===v?B:v,g=n.onClick,O=void 0===g?B:g,w=_("mounts <".concat(r,">")).elements,j=t.useRef(null),S=t.useRef(null),P=L(d),C=L(c),I=L(f),x=L(O),A=L(h),T=L(m);t.useLayoutEffect((function(){if(null==j.current&&w&&null!=S.current){var t=w.create(e,u);j.current=t,t.mount(S.current),t.on("ready",(function(){return P(t)})),t.on("change",A),t.on("blur",C),t.on("focus",I),t.on("escape",T),t.on("click",x)}}));var k=b(u);return t.useEffect((function(){if(j.current){var e=E(u,k,["paymentRequest"]);e&&j.current.update(e)}}),[u,k]),t.useLayoutEffect((function(){return function(){j.current&&j.current.destroy()}}),[]),t.createElement("div",{id:o,className:a,ref:S})};return o.propTypes={id:u.string,className:u.string,onChange:u.func,onBlur:u.func,onFocus:u.func,onReady:u.func,onClick:u.func,options:u.object},o.displayName=r,o.__elementType=e,o},M="undefined"==typeof window,N=R("auBankAccount",M),z=R("card",M),G=R("cardNumber",M),Y=R("cardExpiry",M),q=R("cardCvc",M),$=R("fpxBank",M),J=R("iban",M),V=R("idealBank",M),H=R("p24Bank",M),W=R("epsBank",M),K=R("payment",M),X=R("paymentRequestButton",M),Z=R("linkAuthentication",M),Q=R("shippingAddress",M),ee=R("affirmMessage",M),te=R("afterpayClearpayMessage",M);e.AffirmMessageElement=ee,e.AfterpayClearpayMessageElement=te,e.AuBankAccountElement=N,e.CardCvcElement=q,e.CardElement=z,e.CardExpiryElement=Y,e.CardNumberElement=G,e.Elements=T,e.ElementsConsumer=U,e.EpsBankElement=W,e.FpxBankElement=$,e.IbanElement=J,e.IdealBankElement=V,e.LinkAuthenticationElement=Z,e.P24BankElement=H,e.PaymentElement=K,e.PaymentRequestButtonElement=X,e.ShippingAddressElement=Q,e.useElements=k,e.useStripe=D,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1))},function(e,t){var n,r,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var s,c=[],l=!1,f=-1;function p(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=u(p);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new y(e,t)),1!==c.length||l||u(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n=1e3,r=60*n,o=60*r,a=24*o,i=365.25*a;function u(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*i;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*o;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?u(s=e,a,"day")||u(s,o,"hour")||u(s,r,"minute")||u(s,n,"second")||s+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var r=n(40)("socket.io-parser"),o=n(5),a=n(42),i=n(21),u=n(22);function s(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=s,t.Decoder=f;var c=t.ERROR+'"encode error"';function l(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var o=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===o)return c;n+=o}return r("encoded %j as %s",e,n),n}function f(){this.reconstructor=null}function p(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:t.ERROR,data:"parser error: "+e}}s.prototype.encode=function(e,n){(r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){function n(e){var n=a.deconstructPacket(e),r=l(n.packet),o=n.buffers;o.unshift(r),t(o)}a.removeBlobs(e,n)}(e,n):n([l(e)])},o(f.prototype),f.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,o={type:Number(e.charAt(0))};if(null==t.types[o.type])return d("unknown packet type "+o.type);if(t.BINARY_EVENT===o.type||t.BINARY_ACK===o.type){for(var a=n+1;"-"!==e.charAt(++n)&&n!=e.length;);var u=e.substring(a,n);if(u!=Number(u)||"-"!==e.charAt(n))throw new Error("Illegal attachments");o.attachments=Number(u)}if("/"===e.charAt(n+1)){for(a=n+1;++n;){if(","===(c=e.charAt(n)))break;if(n===e.length)break}o.nsp=e.substring(a,n)}else o.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(a=n+1;++n;){var c;if(null==(c=e.charAt(n))||Number(c)!=c){--n;break}if(n===e.length)break}o.id=Number(e.substring(a,n+1))}if(e.charAt(++n)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n));if(!(!1!==l&&(o.type===t.ERROR||i(l))))return d("invalid payload");o.data=l}return r("decoded %s as %j",e,o),o}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new p(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!u(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){"use strict";(function(e){var r=n(44),o=n(45),a=n(46);function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=p(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n),o=(e=u(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|d(t.length);return 0===(e=u(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?u(e,0):p(e,t);if("Buffer"===t.type&&a(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=u(e,t<0?0:0|d(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|d(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function y(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function h(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,o);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,o){var a,i=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,u/=2,s/=2,n/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var l=-1;for(a=n;a<u;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===s)return l*i}else-1!==l&&(a-=a-l),l=-1}else for(n+s>u&&(n=u-s),a=n;a>=0;a--){for(var f=!0,p=0;p<s;p++)if(c(e,a+p)!==c(t,p)){f=!1;break}if(f)return a}return-1}function g(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var i=0;i<r;++i){var u=parseInt(t.substr(2*i,2),16);if(isNaN(u))return i;e[n+i]=u}return i}function O(e,t,n,r){return Y(z(t,e.length-n),e,n,r)}function w(e,t,n,r){return Y(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function j(e,t,n,r){return w(e,t,n,r)}function S(e,t,n,r){return Y(G(t),e,n,r)}function E(e,t,n,r){return Y(function(e,t){for(var n,r,o,a=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(n=e.charCodeAt(i))>>8,o=n%256,a.push(o),a.push(r);return a}(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var a,i,u,s,c=e[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[o+1]))&&(s=(31&c)<<6|63&a)>127&&(l=s);break;case 3:a=e[o+1],i=e[o+2],128==(192&a)&&128==(192&i)&&(s=(15&c)<<12|(63&a)<<6|63&i)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:a=e[o+1],i=e[o+2],u=e[o+3],128==(192&a)&&128==(192&i)&&128==(192&u)&&(s=(15&c)<<18|(63&a)<<12|(63&i)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return c(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?u(e,t):void 0!==n?"string"==typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!s.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},s.byteLength=y,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):h.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,o){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0),u=Math.min(a,i),c=this.slice(r,o),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],i=l[f];break}return a<i?-1:i<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return O(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return j(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function x(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",a=t;a<n;++a)o+=N(e[a]);return o}function _(e,t,n){for(var r=e.slice(t,n),o="",a=0;a<r.length;a+=2)o+=String.fromCharCode(r[a]+256*r[a+1]);return o}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,o,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function B(e,t,n,r,o,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,a){return a||B(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,a){return a||B(e,0,n,8),o.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var o=t-e;n=new s(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},s.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=t,o=1,a=this[e+--r];r>0&&(o*=256);)a+=this[e+--r]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),o.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),o.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),o.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),o.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);D(this,e,t,n,o-1,-o)}var a=0,i=1,u=0;for(this[t]=255&e;++a<n&&(i*=256);)e<0&&0===u&&0!==this[t+a-1]&&(u=1),this[t+a]=(e/i>>0)-u&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);D(this,e,t,n,o-1,-o)}var a=n-1,i=1,u=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===u&&0!==this[t+a+1]&&(u=1),this[t+a]=(e/i>>0)-u&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,a=r-n;if(this===e&&n<t&&t<r)for(o=a-1;o>=0;--o)e[o+t]=this[o+n];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var i=s.isBuffer(e)?e:z(new s(e,r).toString()),u=i.length;for(a=0;a<n-t;++a)this[a+t]=i[a%u]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var r=e.length,o=null,a=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function G(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(43))},function(e,t,n){var r=n(49),o=n(18);e.exports=function(e){var t=e.xdomain,n=e.xscheme,a=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&a)return new XDomainRequest}catch(e){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,n){var r=n(6),o=n(5);function a(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=a,o(a.prototype),a.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},a.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},a.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},a.prototype.onPacket=function(e){this.emit("packet",e)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),a=e.indexOf("]");-1!=o&&-1!=a&&(e=e.substring(0,o)+e.substring(o,a).replace(/:/g,";")+e.substring(a,e.length));for(var i,u,s=n.exec(e||""),c={},l=14;l--;)c[r[l]]=s[l]||"";return-1!=o&&-1!=a&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,c.path),c.queryKey=(i=c.query,u={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(u[t]=n)})),u),c}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var n="function"==typeof t&&"function"==typeof t.isBuffer,r="function"==typeof ArrayBuffer}).call(this,n(16).Buffer)},function(e,t,n){var r=n(47),o=n(29),a=n(5),i=n(15),u=n(30),s=n(31),c=n(7)("socket.io-client:manager"),l=n(28),f=n(63),p=Object.prototype.hasOwnProperty;function d(e,t){if(!(this instanceof d))return new d(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||i;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=d,d.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},d.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},d.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},a(d.prototype),d.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},d.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},d.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(e,t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var a=u(n,"open",(function(){o.onopen(),e&&e()})),i=u(n,"error",(function(t){if(c("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else o.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;c("connect attempt will timeout after %d",s),0===s&&a.destroy();var l=setTimeout((function(){c("connect attempt timed out after %d",s),a.destroy(),n.close(),n.emit("error","timeout"),o.emitAll("connect_timeout",s)}),s);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(a),this.subs.push(i),this},d.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(u(e,"data",s(this,"ondata"))),this.subs.push(u(e,"ping",s(this,"onping"))),this.subs.push(u(e,"pong",s(this,"onpong"))),this.subs.push(u(e,"error",s(this,"onerror"))),this.subs.push(u(e,"close",s(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",s(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(e){this.decoder.add(e)},d.prototype.ondecoded=function(e){this.emit("packet",e)},d.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},d.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new o(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",a),n.on("connect",(function(){n.id=r.generateId(e)})),this.autoConnect&&a()}function a(){~l(r.connecting,n)||r.connecting.push(n)}return n},d.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},d.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},d.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},d.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var r=n(17),o=n(50),a=n(59),i=n(60);t.polling=function(e){var t=!1,n=!1,i=!1!==e.jsonp;if("undefined"!=typeof location){var u="https:"===location.protocol,s=location.port;s||(s=u?443:80),t=e.hostname!==location.hostname||s!==e.port,n=e.secure!==u}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new o(e);if(!i)throw new Error("JSONP disabled");return new a(e)},t.websocket=i},function(e,t,n){var r=n(19),o=n(8),a=n(6),i=n(9),u=n(27),s=n(10)("engine.io-client:polling");e.exports=l;var c=null!=new(n(17))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),r.call(this,e)}i(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t=this;function n(){s("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(s("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){s("pre-pause polling complete"),--r||n()}))),this.writable||(s("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){s("pre-pause writing complete"),--r||n()})))}else n()},l.prototype.poll=function(){s("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var t=this;s("polling got data %s",e);a.decodePayload(e,this.socket.binaryType,(function(e,n,r){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():s('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){s("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(s("transport open - closing"),t()):(s("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){var r=n(52),o=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),i="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);e.exports=function e(n){if(!n||"object"!=typeof n)return!1;if(r(n)){for(var o=0,u=n.length;o<u;o++)if(e(n[o]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||a&&n instanceof Blob||i&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&e(n[s]))return!0;return!1}}).call(this,n(16).Buffer)},function(e,t,n){"use strict";var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a={},i=0,u=0;function s(e){var t="";do{t=o[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function c(){var e=s(+new Date);return e!==r?(i=0,r=e):e+"."+s(i++)}for(;u<64;u++)a[o[u]]=u;c.encode=s,c.decode=function(e){var t=0;for(u=0;u<e.length;u++)t=64*t+a[e.charAt(u)];return t},e.exports=c},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(15),o=n(5),a=n(62),i=n(30),u=n(31),s=n(7)("socket.io-client:socket"),c=n(8),l=n(26);e.exports=d;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=o.prototype.emit;function d(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}o(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[i(e,"open",u(this,"onopen")),i(e,"packet",u(this,"onpacket")),i(e,"close",u(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},d.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(f.hasOwnProperty(e))return p.apply(this,arguments),this;var t=a(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(s("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){if(s("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?c.encode(this.query):this.query;s("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},d.prototype.onclose=function(e){s("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];s("emitting event %j",t),null!=e.id&&(s("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var o=a(arguments);s("sending ack %j",o),t.packet({type:l(o)?r.BINARY_ACK:r.ACK,id:e,data:o})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(s("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):s("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){s("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(s("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags.compress=e,this},d.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){var r=n(38),o=n(15),a=n(23),i=n(7)("socket.io-client");e.exports=t=s;var u=t.managers={};function s(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o=r(e),s=o.source,c=o.id,l=o.path,f=u[c]&&l in u[c].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||f?(i("ignoring socket cache for %s",s),n=a(s,t)):(u[c]||(i("new io instance for %s",s),u[c]=a(s,t)),n=u[c]),o.query&&!t.query&&(t.query=o.query),n.socket(o.path,t)}t.protocol=o.protocol,t.connect=s,t.Manager=n(23),t.Socket=n(29)},function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){e=e||{};var r=t.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(e,t,n,o){return r.fromToBase(e,t,n,o)}n.en.relativeTime=o,r.fromToBase=function(t,r,a,i,u){for(var s,c,l,f=a.$locale().relativeTime||o,p=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],d=p.length,y=0;y<d;y+=1){var h=p[y];h.d&&(s=i?n(t).diff(a,h.d,!0):a.diff(t,h.d,!0));var v=(e.rounding||Math.round)(Math.abs(s));if(l=s>0,v<=h.r||!h.r){v<=1&&y>0&&(h=p[y-1]);var m=f[h.l];u&&(v=u(""+v)),c="string"==typeof m?m.replace("%d",v):m(v,r,h.l,l);break}}if(r)return c;var b=l?f.future:f.past;return"function"==typeof b?b(c):b.replace("%s",c)},r.to=function(e,t){return a(e,t,this,!0)},r.from=function(e,t){return a(e,t,this)};var i=function(e){return e.$u?n.utc():n()};r.toNow=function(e){return this.to(i(this),e)},r.fromNow=function(e){return this.from(i(this),e)}}}()},function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){n.updateLocale=function(e,t){var r=n.Ls[e];if(r)return(t?Object.keys(t):[]).forEach((function(e){r[e]=t[e]})),r}}}()},function(e,t,n){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}()},function(e,t,n){"use strict";var r=n(66),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?i:u[e.$$typeof]||o}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=i;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,y=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(y){var o=d(n);o&&o!==y&&e(t,o,r)}var i=l(n);f&&(i=i.concat(f(n)));for(var u=s(t),h=s(n),v=0;v<i.length;++v){var m=i[v];if(!(a[m]||r&&r[m]||h&&h[m]||u&&u[m])){var b=p(n,m);try{c(t,m,b)}catch(e){}}}}return t}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(e,t,n){var r=f;return function(o,a){if(r===d)throw new Error("Generator is already running");if(r===y){if("throw"===o)throw a;return T()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var u=P(i,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?y:p,s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=y,n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",y="completed",h={};function v(){}function m(){}function b(){}var g={};s(g,a,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(A([])));w&&w!==n&&r.call(w,a)&&(g=w);var j=b.prototype=v.prototype=Object.create(g);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(o,a,i,u){var s=l(e[o],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,u)}))}u(s.arg)}var o;this._invoke=function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}}function P(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:T}}function T(){return{value:t,done:!0}}return m.prototype=b,s(j,"constructor",b),s(b,"constructor",m),m.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},e.awrap=function(e){return{__await:e}},S(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new E(c(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(j),s(j,u,"Generator"),s(j,a,(function(){return this})),s(j,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(20),o=n(7)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),n=r(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,a=o-(n||o);e.diff=a,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n})),t.formatArgs.call(e,i);var c=r.log||t.log||console.log.bind(console);c.apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(14),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(41)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(13))},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,a=o-(n||o);e.diff=a,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n})),t.formatArgs.call(e,i);var c=r.log||t.log||console.log.bind(console);c.apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(14),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(21),o=n(22),a=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===a.call(Blob),u="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===a.call(File);function s(e,t){if(!e)return e;if(o(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(r(e)){for(var a=new Array(e.length),i=0;i<e.length;i++)a[i]=s(e[i],t);return a}if("object"==typeof e&&!(e instanceof Date)){a={};for(var u in e)a[u]=s(e[u],t);return a}return e}function c(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(r(e))for(var n=0;n<e.length;n++)e[n]=c(e[n],t);else if("object"==typeof e)for(var o in e)e[o]=c(e[o],t);return e}t.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=s(n,t),r.attachments=t.length,{packet:r,buffers:t}},t.reconstructPacket=function(e,t){return e.data=c(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,a=e;!function e(s,c,l){if(!s)return s;if(i&&s instanceof Blob||u&&s instanceof File){n++;var f=new FileReader;f.onload=function(){l?l[c]=this.result:a=this.result,--n||t(a)},f.readAsArrayBuffer(s)}else if(r(s))for(var p=0;p<s.length;p++)e(s[p],p,s);else if("object"==typeof s&&!o(s))for(var d in s)e(s[d],d,s)}(a),n||t(a)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),i=r[0],u=r[1],s=new a(function(e,t,n){return 3*(t+n)/4-n}(0,i,u)),l=0,f=u>0?i-4:i;for(n=0;n<f;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===u&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,s[l++]=255&t);1===u&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,a=[],i=16383,u=0,s=n-o;u<s;u+=i)a.push(l(e,u,u+i>s?s:u+i));1===o?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=i.length;u<s;++u)r[u]=i[u],o[i.charCodeAt(u)]=u;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var o,a,i=[],u=t;u<n;u+=3)o=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),i.push(r[(a=o)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var a,i,u=8*o-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?o-1:0,p=n?-1:1,d=e[t+f];for(f+=p,a=d&(1<<-l)-1,d>>=-l,l+=u;l>0;a=256*a+e[t+f],f+=p,l-=8);for(i=a&(1<<-l)-1,a>>=-l,l+=r;l>0;i=256*i+e[t+f],f+=p,l-=8);if(0===a)a=1-c;else{if(a===s)return i?NaN:1/0*(d?-1:1);i+=Math.pow(2,r),a-=c}return(d?-1:1)*i*Math.pow(2,a-r)},t.write=function(e,t,n,r,o,a){var i,u,s,c=8*a-o-1,l=(1<<c)-1,f=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,y=r?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-i))<1&&(i--,s*=2),(t+=i+f>=1?p/s:p*Math.pow(2,1-f))*s>=2&&(i++,s/=2),i+f>=l?(u=0,i=l):i+f>=1?(u=(t*s-1)*Math.pow(2,o),i+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,o),i=0));o>=8;e[n+d]=255&u,d+=y,u/=256,o-=8);for(i=i<<o|u,c+=o;c>0;e[n+d]=255&i,d+=y,i/=256,c-=8);e[n+d-y]|=128*h}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(48),e.exports.parser=n(6)},function(e,t,n){var r=n(24),o=n(5),a=n(10)("engine.io-client:socket"),i=n(28),u=n(6),s=n(20),c=n(8);function l(e,t){if(!(this instanceof l))return new l(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=s(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=s(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=l,l.priorWebsocketSuccess=!1,o(l.prototype),l.protocol=u.protocol,l.Socket=l,l.Transport=n(19),l.transports=n(24),l.parser=n(6),l.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=u.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var e;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},l.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},l.prototype.probe=function(e){a('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function o(){if(r.onlyBinaryUpgrades){var o=!this.supportsBinary&&r.transport.supportsBinary;n=n||o}n||(a('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(a('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,a('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(a("changing transport and sending upgrade packet"),p(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{a('probe transport "%s" failed',e);var i=new Error("probe error");i.transport=t.name,r.emit("upgradeError",i)}})))}function i(){n||(n=!0,p(),t.close(),t=null)}function u(n){var o=new Error("probe error: "+n);o.transport=t.name,i(),a('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",o)}function s(){u("transport closed")}function c(){u("socket closed")}function f(e){t&&e.name!==t.name&&(a('"%s" works - aborting "%s"',e.name,t.name),i())}function p(){t.removeListener("open",o),t.removeListener("error",u),t.removeListener("close",s),r.removeListener("close",c),r.removeListener("upgrading",f)}l.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",u),t.once("close",s),this.once("close",c),this.once("upgrading",f),t.open()},l.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},l.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},l.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},l.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},l.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()}function t(){e.onClose("forced close"),a("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},l.prototype.onError=function(e){a("socket error %j",e),l.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},l.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~i(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){var r=n(17),o=n(25),a=n(5),i=n(9),u=n(10)("engine.io-client:polling-xhr"),s=n(18);function c(){}function l(e){if(o.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function f(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=l,e.exports.Request=f,i(l,o),l.prototype.supportsBinary=!0,l.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new f(e)},l.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),o=this;r.on("success",t),r.on("error",(function(e){o.onError("xhr post error",e)})),this.sendXhr=r},l.prototype.doPoll=function(){u("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},a(f.prototype),f.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),n=this;try{u("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},u("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},f.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},f.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},f.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},f.requestsCount=0,f.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",p);else if("function"==typeof addEventListener){addEventListener("onpagehide"in s?"pagehide":"unload",p,!1)}function p(){for(var e in f.requests)f.requests.hasOwnProperty(e)&&f.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),a=new Uint8Array(n-t),i=t,u=0;i<n;i++,u++)a[u]=o[i];return a.buffer}},function(e,t){function n(){}e.exports=function(e,t,r){var o=!1;return r=r||n,a.count=e,0===e?t():a;function a(e,n){if(a.count<=0)throw new Error("after called too many times");--a.count,e?(o=!0,t(e),t=r):0!==a.count||o||t(null,n)}}},function(e,t){var n,r,o,a=String.fromCharCode;function i(e){for(var t,n,r=[],o=0,a=e.length;o<a;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<a?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function u(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function s(e,t){return a(e>>t&63|128)}function c(e,t){if(0==(4294967168&e))return a(e);var n="";return 0==(4294965248&e)?n=a(e>>6&31|192):0==(4294901760&e)?(u(e,t)||(e=65533),n=a(e>>12&15|224),n+=s(e,6)):0==(4292870144&e)&&(n=a(e>>18&7|240),n+=s(e,12),n+=s(e,6)),n+=a(63&e|128)}function l(){if(o>=r)throw Error("Invalid byte index");var e=255&n[o];if(o++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(e){var t,a;if(o>r)throw Error("Invalid byte index");if(o==r)return!1;if(t=255&n[o],o++,0==(128&t))return t;if(192==(224&t)){if((a=(31&t)<<6|l())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&t)){if((a=(15&t)<<12|l()<<6|l())>=2048)return u(a,e)?a:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(a=(7&t)<<18|l()<<12|l()<<6|l())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=i(e),o=r.length,a=-1,u="";++a<o;)u+=c(r[a],n);return u},decode:function(e,t){var u=!1!==(t=t||{}).strict;n=i(e),r=n.length,o=0;for(var s,c=[];!1!==(s=f(u));)c.push(s);return function(e){for(var t,n=e.length,r=-1,o="";++r<n;)(t=e[r])>65535&&(o+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=a(t);return o}(c)}}},function(e,t){!function(e){"use strict";t.encode=function(t){var n,r=new Uint8Array(t),o=r.length,a="";for(n=0;n<o;n+=3)a+=e[r[n]>>2],a+=e[(3&r[n])<<4|r[n+1]>>4],a+=e[(15&r[n+1])<<2|r[n+2]>>6],a+=e[63&r[n+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a},t.decode=function(t){var n,r,o,a,i,u=.75*t.length,s=t.length,c=0;"="===t[t.length-1]&&(u--,"="===t[t.length-2]&&u--);var l=new ArrayBuffer(u),f=new Uint8Array(l);for(n=0;n<s;n+=4)r=e.indexOf(t[n]),o=e.indexOf(t[n+1]),a=e.indexOf(t[n+2]),i=e.indexOf(t[n+3]),f[c++]=r<<2|o>>4,f[c++]=(15&o)<<4|a>>2,f[c++]=(3&a)<<6|63&i;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=n&&n.prototype.append&&n.prototype.getBlob;function i(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function u(e,t){t=t||{};var r=new n;return i(e).forEach((function(e){r.append(e)})),t.type?r.getBlob(t.type):r.getBlob()}function s(e,t){return new Blob(i(e),t||{})}"undefined"!=typeof Blob&&(u.prototype=Blob.prototype,s.prototype=Blob.prototype),e.exports=r?o?Blob:s:a?u:void 0},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,a=o-(n||o);e.diff=a,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n})),t.formatArgs.call(e,i);var c=r.log||t.log||console.log.bind(console);c.apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(14),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(25),o=n(9),a=n(18);e.exports=l;var i,u=/\n/g,s=/\\n/g;function c(){}function l(e){r.call(this,e),this.query=this.query||{},i||(i=a.___eio=a.___eio||[]),this.index=i.length;var t=this;i.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=c)}),!1)}o(l,r),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},l.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,o=document.createElement("form"),a=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=i,o.method="POST",o.setAttribute("accept-charset","utf-8"),a.name="d",o.appendChild(a),document.body.appendChild(o),this.form=o,this.area=a}function c(){l(),t()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),e=e.replace(s,"\\\n"),this.area.value=e.replace(u,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&c()}:this.iframe.onload=c}},function(e,t,n){(function(t){var r,o,a=n(19),i=n(6),u=n(8),s=n(9),c=n(27),l=n(10)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{o=n(61)}catch(e){}var f=r||o;function p(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(f=o),a.call(this,e)}e.exports=p,s(p,a),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new f(e,t):new f(e):new f(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},p.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,o=0,a=r;o<a;o++)!function(e){i.encodePacket(e,n.supportsBinary,(function(o){if(!n.usingBrowserWebSocket){var a={};if(e.options&&(a.compress=e.options.compress),n.perMessageDeflate)("string"==typeof o?t.byteLength(o):o.length)<n.perMessageDeflate.threshold&&(a.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(o):n.ws.send(o,a)}catch(e){l("websocket closed before onclose event")}--r||u()}))}(e[o]);function u(){n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0)}},p.prototype.onClose=function(){a.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),(e=u.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},p.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===p.prototype.name)}}).call(this,n(16).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){"use strict";var r=n(65);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports=n(67)},function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,y=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,g=r?Symbol.for("react.fundamental"):60117,O=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function j(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case f:case p:case i:case s:case u:case y:return e;default:switch(e=e&&e.$$typeof){case l:case d:case m:case v:case c:return e;default:return t}}case a:return t}}}function S(e){return j(e)===p}t.AsyncMode=f,t.ConcurrentMode=p,t.ContextConsumer=l,t.ContextProvider=c,t.Element=o,t.ForwardRef=d,t.Fragment=i,t.Lazy=m,t.Memo=v,t.Portal=a,t.Profiler=s,t.StrictMode=u,t.Suspense=y,t.isAsyncMode=function(e){return S(e)||j(e)===f},t.isConcurrentMode=S,t.isContextConsumer=function(e){return j(e)===l},t.isContextProvider=function(e){return j(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return j(e)===d},t.isFragment=function(e){return j(e)===i},t.isLazy=function(e){return j(e)===m},t.isMemo=function(e){return j(e)===v},t.isPortal=function(e){return j(e)===a},t.isProfiler=function(e){return j(e)===s},t.isStrictMode=function(e){return j(e)===u},t.isSuspense=function(e){return j(e)===y},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===p||e===s||e===u||e===y||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===g||e.$$typeof===O||e.$$typeof===w||e.$$typeof===b)},t.typeOf=j},function(e,t,n){"use strict";n.r(t),n.d(t,"AddressDetails",(function(){return Tr})),n.d(t,"AddressFieldsSetting",(function(){return to})),n.d(t,"AddressForm",(function(){return wo})),n.d(t,"AddressList",(function(){return To})),n.d(t,"AdvancedReports",(function(){return Mo})),n.d(t,"AnalyticsBusinessFilter",(function(){return Wo})),n.d(t,"AnalyticsDriversFilter",(function(){return ia})),n.d(t,"AnalyticsStatusSubFilter",(function(){return ya})),n.d(t,"ApiKeysList",(function(){return Ca})),n.d(t,"BaseComponent",(function(){return Ia})),n.d(t,"CannyIdentification",(function(){return Ta})),n.d(t,"Settings",(function(){return Ya})),n.d(t,"BatchImageForm",(function(){return ei})),n.d(t,"BusinessAndProductList",(function(){return fi})),n.d(t,"BusinessAnalytics",(function(){return Oi})),n.d(t,"BusinessBasicInformation",(function(){return Ai})),n.d(t,"BusinessBrandBUSIDetail",(function(){return Ri})),n.d(t,"BusinessBrandGENDetail",(function(){return Ki})),n.d(t,"BusinessBrandListing",(function(){return au})),n.d(t,"BusinessController",(function(){return lu})),n.d(t,"BusinessDeliveryDetails",(function(){return gu})),n.d(t,"BusinessDeliveryZone",(function(){return Tu})),n.d(t,"BusinessDeliveryZoneShare",(function(){return Gu})),n.d(t,"BusinessDetails",(function(){return Qu})),n.d(t,"BusinessFormDetails",(function(){return ss})),n.d(t,"BusinessGallery",(function(){return ms})),n.d(t,"BusinessGprsPrinters",(function(){return Ps})),n.d(t,"BusinessInformation",(function(){return As})),n.d(t,"BusinessManagerBusinesses",(function(){return Ks})),n.d(t,"BusinessList",(function(){return Ms})),n.d(t,"BusinessMenu",(function(){return ac})),n.d(t,"BusinessMenuMetaFields",(function(){return Ic})),n.d(t,"BusinessMetaFields",(function(){return sl})),n.d(t,"BusinessProductsListing",(function(){return vc})),n.d(t,"BusinessPromotionForm",(function(){return Uf})),n.d(t,"BusinessPromotionList",(function(){return Yf})),n.d(t,"BusinessPromotionMetaFields",(function(){return ep})),n.d(t,"BusinessMenuOptions",(function(){return Mc})),n.d(t,"BusinessMenuShare",(function(){return Xc})),n.d(t,"BusinessPaymethods",(function(){return wl})),n.d(t,"BusinessPlace",(function(){return Tl})),n.d(t,"BusinessPlaceGroup",(function(){return Zl})),n.d(t,"BusinessPlaceGroupList",(function(){return zl})),n.d(t,"BusinessPickupDetails",(function(){return uf})),n.d(t,"BusinessProductsCategoyDetails",(function(){return gf})),n.d(t,"BusinessProductsCategories",(function(){return wf})),n.d(t,"BusinessProductsSearch",(function(){return Sf})),n.d(t,"BusinessReviews",(function(){return cp})),n.d(t,"BusinessReviewsList",(function(){return bp})),n.d(t,"BusinessSchedule",(function(){return Cp})),n.d(t,"BusinessSharedMenuProductDetails",(function(){return Fp})),n.d(t,"BusinessSharedMenuProducts",(function(){return Vp})),n.d(t,"BusinessSortControl",(function(){return Xp})),n.d(t,"BusinessSpreadSheet",(function(){return sd})),n.d(t,"BusinessTypeFilter",(function(){return vd})),n.d(t,"BusinessTypeDetail",(function(){return Id})),n.d(t,"BusinessWebhooks",(function(){return Rd})),n.d(t,"BusinessZoneGoogleMaps",(function(){return Jd})),n.d(t,"BusinessProductCreator",(function(){return ny})),n.d(t,"BusinessWalletsList",(function(){return fy})),n.d(t,"CampaignListing",(function(){return jy})),n.d(t,"CampaignDetail",(function(){return Uy})),n.d(t,"CampaignDetailContent",(function(){return Yy})),n.d(t,"CampaignSignUpOption",(function(){return th})),n.d(t,"CampaignAmountOption",(function(){return dh})),n.d(t,"Cart",(function(){return mh})),n.d(t,"Checkout",(function(){return Ch})),n.d(t,"CheckoutFieldsSetting",(function(){return Lh})),n.d(t,"CheckPassword",(function(){return Yh})),n.d(t,"CityList",(function(){return ev})),n.d(t,"CouponControl",(function(){return uv})),n.d(t,"DashboardBusinessList",(function(){return bv})),n.d(t,"DashboardOrdersList",(function(){return Av})),n.d(t,"DeliveryzoneList",(function(){return Fv})),n.d(t,"DragAndDrop",(function(){return Nv})),n.d(t,"DriversCompanyDetails",(function(){return Xv})),n.d(t,"DriverGroupSetting",(function(){return sm})),n.d(t,"UserReviewDetails",(function(){return vm})),n.d(t,"DriverTips",(function(){return Ob})),n.d(t,"DriversList",(function(){return _b})),n.d(t,"DriverAnalytics",(function(){return Nb})),n.d(t,"DriversCompaniesList",(function(){return Im})),n.d(t,"DriversGroupAutoassign",(function(){return Dm})),n.d(t,"DriversGroupDetails",(function(){return qm})),n.d(t,"DriversGroupOrders",(function(){return Xm})),n.d(t,"DriversGroupsList",(function(){return sb})),n.d(t,"DriversGroupLogs",(function(){return vb})),n.d(t,"EnterprisePromotionList",(function(){return Xb})),n.d(t,"EnterprisePromotionDetails",(function(){return cg})),n.d(t,"ExamineClick",(function(){return lg})),n.d(t,"ExportCSV",(function(){return bg})),n.d(t,"FacebookLoginButton",(function(){return Cg})),n.d(t,"ForgotPasswordForm",(function(){return Ug})),n.d(t,"GoogleAutocompleteInput",(function(){return qg})),n.d(t,"GoogleMaps",(function(){return Zg})),n.d(t,"GoogleMapsMap",(function(){return Qg})),n.d(t,"GpsButton",(function(){return oO})),n.d(t,"GoogleGpsButton",(function(){return aO})),n.d(t,"GoogleTagManager",(function(){return iO})),n.d(t,"Home",(function(){return mO})),n.d(t,"ImporterForm",(function(){return AO})),n.d(t,"ImporterJobForm",(function(){return FO})),n.d(t,"ImporterListing",(function(){return HO})),n.d(t,"InvoiceBusinessManager",(function(){return aw})),n.d(t,"InvoiceDriverManager",(function(){return hw})),n.d(t,"LanguageManager",(function(){return Ew})),n.d(t,"LanguageSelector",(function(){return _w})),n.d(t,"LanguageSetting",(function(){return Mw})),n.d(t,"LanguageTransSpread",(function(){return Ww})),n.d(t,"LanguageTransTable",(function(){return rj})),n.d(t,"LoginForm",(function(){return pj})),n.d(t,"LogisticInformation",(function(){return Oj})),n.d(t,"Logistics",(function(){return xj})),n.d(t,"LogoutAction",(function(){return Bj})),n.d(t,"PointsWalletBusinessDetail",(function(){return $j})),n.d(t,"MainSearch",(function(){return lS})),n.d(t,"MenuControl",(function(){return mS})),n.d(t,"MetaFields",(function(){return MS})),n.d(t,"MomentOption",(function(){return $S})),n.d(t,"MyOrders",(function(){return eE})),n.d(t,"MyOrdersList",(function(){return aE})),n.d(t,"OpenCartListing",(function(){return vE})),n.d(t,"OpenCartsDetail",(function(){return EE})),n.d(t,"OpenCartFilter",(function(){return DE})),n.d(t,"OrderList",(function(){return qE})),n.d(t,"OrderNotification",(function(){return VE})),n.d(t,"OrdersFilter",(function(){return nP})),n.d(t,"OrdersManage",(function(){return dP})),n.d(t,"OrdersOverview",(function(){return SP})),n.d(t,"OrderTypeControl",(function(){return IP})),n.d(t,"Messages",(function(){return xS})),n.d(t,"PaymentOptions",(function(){return LP})),n.d(t,"PaymentOptionSquare",(function(){return qP})),n.d(t,"PagesList",(function(){return QP})),n.d(t,"PageForm",(function(){return lC})),n.d(t,"PlaceList",(function(){return wC})),n.d(t,"PluginList",(function(){return kC})),n.d(t,"Popup",(function(){return FC})),n.d(t,"PointsWalletLevels",(function(){return HC})),n.d(t,"PointsWalletBusinessList",(function(){return nS})),n.d(t,"ProductComponent",(function(){return oI})),n.d(t,"ProductDetatils",(function(){return hI})),n.d(t,"ProductDetailsAdvanced",(function(){return yA})),n.d(t,"ProductExtraMetaFields",(function(){return CI})),n.d(t,"ProductExtraOptions",(function(){return ix})),n.d(t,"ProductExtraOptionDetails",(function(){return RI})),n.d(t,"ProductExtraOptionMetaFields",(function(){return WI})),n.d(t,"ProductExtraSubOptionMetaFields",(function(){return mx})),n.d(t,"ProductExtras",(function(){return xx})),n.d(t,"ProductForm",(function(){return Fx})),n.d(t,"ProductGallery",(function(){return Hx})),n.d(t,"ProductMetaFields",(function(){return aA})),n.d(t,"ProductShare",(function(){return CA})),n.d(t,"ProductTagDetails",(function(){return LA})),n.d(t,"ProductTagsList",(function(){return JA})),n.d(t,"ProductImages",(function(){return HA})),n.d(t,"ProductIngredient",(function(){return aT})),n.d(t,"ProductOption",(function(){return iT})),n.d(t,"ProductOptionSuboption",(function(){return fT})),n.d(t,"ProductReviews",(function(){return jA})),n.d(t,"ProductsList",(function(){return hT})),n.d(t,"ProductsListing",(function(){return ET})),n.d(t,"ProfessionalBusinessService",(function(){return LT})),n.d(t,"ProfessionalSchedule",(function(){return YT})),n.d(t,"ProfessionalServices",(function(){return e_})),n.d(t,"ReportsDriverFilter",(function(){return jL})),n.d(t,"QueryLogin",(function(){return s_})),n.d(t,"ReCaptcha",(function(){return E_})),n.d(t,"RewardsPrograms",(function(){return U_})),n.d(t,"RecoveryActionListing",(function(){return $_})),n.d(t,"RecoveryActionDetail",(function(){return tk})),n.d(t,"RecoveryNotificationList",(function(){return pk})),n.d(t,"SingleRecoveryNotification",(function(){return tD})),n.d(t,"SitesAuthSettings",(function(){return lD})),n.d(t,"SearchOptions",(function(){return vk})),n.d(t,"Schedule",(function(){return Pk})),n.d(t,"SignupForm",(function(){return Uk})),n.d(t,"SingleBusinessCard",(function(){return Lk})),n.d(t,"SingleLoyaltyLevel",(function(){return qk})),n.d(t,"SingleOrderCard",(function(){return $k})),n.d(t,"SingleProductCard",(function(){return Jk})),n.d(t,"SingleBusinessProduct",(function(){return JL})),n.d(t,"SingleBusinessCategory",(function(){return rB})),n.d(t,"UserFormDetails",(function(){return jD})),n.d(t,"UsersExportCSV",(function(){return TD})),n.d(t,"UpsellingPage",(function(){return RD})),n.d(t,"WrapperGoogleMaps",(function(){return Rg})),n.d(t,"OrderDetails",(function(){return VD})),n.d(t,"OrderReview",(function(){return tU})),n.d(t,"PaymentOptionCash",(function(){return NU})),n.d(t,"PaymentOptionPaypal",(function(){return JU})),n.d(t,"PaymentOptionStripe",(function(){return tL})),n.d(t,"PaymentOptionStripeDirect",(function(){return uL})),n.d(t,"PaymentOptionStripeRedirect",(function(){return pL})),n.d(t,"PhoneAutocomplete",(function(){return bU})),n.d(t,"BusinessesMap",(function(){return jU})),n.d(t,"StripeElementsForm",(function(){return LL})),n.d(t,"CardForm",(function(){return OB})),n.d(t,"StripeRedirectForm",(function(){return SB})),n.d(t,"SettingsList",(function(){return dB})),n.d(t,"CmsContent",(function(){return cU})),n.d(t,"FloatingButton",(function(){return PB})),n.d(t,"ResetPassword",(function(){return DB})),n.d(t,"ReportsBrandFilter",(function(){return YB})),n.d(t,"ReportsAppIdFilter",(function(){return QB})),n.d(t,"ReportsDriverGroupFilter",(function(){return cF})),n.d(t,"ReviewCustomer",(function(){return TL})),n.d(t,"SiteDetails",(function(){return OF})),n.d(t,"SitesList",(function(){return xF})),n.d(t,"Analytics",(function(){return _F})),n.d(t,"UsersList",(function(){return GF})),n.d(t,"UserTypeFilter",(function(){return rR})),n.d(t,"UserDetails",(function(){return pR})),n.d(t,"UserMetaFields",(function(){return QF})),n.d(t,"UserWallet",(function(){return wR})),n.d(t,"WebhookList",(function(){return kR})),n.d(t,"ConfigContext",(function(){return Qn})),n.d(t,"ConfigProvider",(function(){return er})),n.d(t,"useConfig",(function(){return tr})),n.d(t,"LanguageContext",(function(){return Un})),n.d(t,"LanguageProvider",(function(){return Ln})),n.d(t,"useLanguage",(function(){return Bn})),n.d(t,"OrderContext",(function(){return yr})),n.d(t,"OrderProvider",(function(){return hr})),n.d(t,"useOrder",(function(){return vr})),n.d(t,"BusinessContext",(function(){return AU})),n.d(t,"BusinessProvider",(function(){return TU})),n.d(t,"useBusiness",(function(){return _U})),n.d(t,"SessionContext",(function(){return pn})),n.d(t,"SessionProvider",(function(){return dn})),n.d(t,"useSession",(function(){return yn})),n.d(t,"WebsocketContext",(function(){return En})),n.d(t,"WebsocketProvider",(function(){return Pn})),n.d(t,"useWebsocket",(function(){return Cn})),n.d(t,"ApiContext",(function(){return tn})),n.d(t,"ApiProvider",(function(){return nn})),n.d(t,"useApi",(function(){return rn})),n.d(t,"OrderingContext",(function(){return FU})),n.d(t,"OrderingProvider",(function(){return RU})),n.d(t,"EventContext",(function(){return Mn})),n.d(t,"EventProvider",(function(){return Nn})),n.d(t,"useEvent",(function(){return zn})),n.d(t,"UtilsContext",(function(){return Sr})),n.d(t,"UtilsProviders",(function(){return Er})),n.d(t,"useUtils",(function(){return Pr})),n.d(t,"ValidationFieldsContext",(function(){return qr})),n.d(t,"ValidationFieldsProvider",(function(){return $r})),n.d(t,"useValidationFields",(function(){return Jr})),n.d(t,"CustomerContext",(function(){return co})),n.d(t,"CustomerProvider",(function(){return lo})),n.d(t,"useCustomer",(function(){return fo})),n.d(t,"ToastContext",(function(){return Ur})),n.d(t,"ToastProvider",(function(){return Lr})),n.d(t,"useToast",(function(){return Br})),n.d(t,"ToastType",(function(){return Dr}));var r,o=n(2),a=n.n(o),i=n(1),u=n.n(i),s=n(0),c=n.n(s),l=function(e){this.back_page=e.back_page,this.current_page=e.current_page,this.fisrt_page=e.fisrt_page,this.from=e.from,this.last_page=e.last_page,this.next_page=e.next_page,this.page_size=e.page_size,this.to=e.to,this.total=e.total,this.total_pages=e.total_pages},f=function(){function e(e,t,n){void 0===t&&(t={}),void 0===n&&(n=void 0),this.response=e,this.options=t,this.api=n}return Object.defineProperty(e.prototype,"content",{get:function(){var e=this;if(this.options.json){var t=this.response.data;if(200===this.response.status&&(t.pagination&&(t.pagination=new l(t.pagination)),this.options.CastClass))if(null===t.result)t.result=null;else if(Array.isArray(t.result))t.result=t.result.map((function(t){return new e.options.CastClass(t,e.api)}));else if("object"==typeof t)if("dictionary"===this.options.mode)for(var n in t.result)"object"==typeof t.result[n]&&(t.result[n]=new this.options.CastClass(t.result[n],this.api));else t.result=new this.options.CastClass(t.result,this.api);return t}return this.response.data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),e}(),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)},d=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},y=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},h=function(){function e(e,t,n){void 0===n&&(n=[]),this.hidden=["original","api","hidden"],this.original=p({},e),this.api=t,this.hidden=this.hidden.concat(n)}return e.prototype.setApi=function(e){this.api=e},e.prototype.getId=function(){},e.prototype.save=function(){return d(this,void 0,void 0,(function(){var e,t,n,r=this;return y(this,(function(o){switch(o.label){case 0:if(this.api.setModelId(this.getId()),!this.api)throw new Error("You must provide the `api` to use `save` function. Example: const newModel = new Model(model, api) or newModel.setApi(api)");return e={},Object.entries(this).forEach((function(t){var n=t[0],o=t[1];r.hidden.includes(n)||o===r.original[n]||(e[n]=o)})),Object.values(e).length>0?[4,this.api.save(e)]:[3,2];case 1:return(t=o.sent().content).error||(n={},Object.entries(t.result).forEach((function(e){var t=e[0],o=e[1];r.hidden.includes(t)||(n[t]=o)})),Object.assign(this,n),this.original=p({},this)),[2,t];case 2:return[2,{error:!1,result:this}]}}))}))},e}(),v=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return v(t,e),t.prototype.getId=function(){return this.id},t}(h),b=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},g=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},O=function(){function e(e){this.attributes=[],this.query={},this.ordering=e}return e.prototype.select=function(e){return this.attributes=e,this},e.prototype.where=function(e){return this.conditions=e,this},e.prototype.setMode=function(e){return this.mode=e,this},e.prototype.asDashboard=function(){return this.setMode("dashboard"),this},e.prototype.asDictionary=function(){return this.setMode("dictionary"),this},e.prototype.parameters=function(e){return this.query=Object.assign(this.query,e),this},e.prototype.makeRequest=function(e,t,n,r,o){return b(this,void 0,void 0,(function(){var a,i;return g(this,(function(u){switch(u.label){case 0:if(a=Object.assign({CastClass:r,json:!0,api:this},o),"GET"===e&&(a.attributes=this.attributes,a.conditions=this.conditions,a.mode=this.mode,a.query||(a.query={}),Object.assign(a.query,this.query),n))for(i in n)a.query[i]=n[i];switch(e){case"GET":return[3,1];case"POST":return[3,3];case"PUT":return[3,5];case"DELETE":return[3,7]}return[3,9];case 1:return[4,this.ordering.get(t,a)];case 2:case 4:case 6:case 8:return[2,u.sent()];case 3:return[4,this.ordering.post(t,n,a)];case 5:return[4,this.ordering.put(t,n,a)];case 7:return[4,this.ordering.delete(t,a)];case 9:throw Error("The `"+e+"` methos is not supported.")}}))}))},e}(),w=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},E=function(e){function t(t,n){var r=e.call(this,t)||this;return r.languageId=n,r}return w(t,e),t.prototype.setModelId=function(e){this.languageId=e},t.prototype.get=function(e){return void 0===e&&(e={}),j(this,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:if(this.languageId&&this.conditions)throw new Error("The `where` function is not compatible with languages(languageId). Example ordering.languages().where(contitions).get()");return t="/languages"+(this.languageId?"/"+this.languageId:""),[4,this.makeRequest("GET",t,void 0,m,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),j(this,void 0,void 0,(function(){var n,r,o,a,i;return S(this,(function(u){switch(u.label){case 0:return n="/languages"+(this.languageId?"/"+this.languageId:""),[4,this.makeRequest(this.languageId?"PUT":"POST",n,e,m,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.languageId||(this.languageId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),j(this,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:if(!this.languageId)throw new Error("`languageId` is require to delete. Example: ordering.languages(languageId).delete()");return t="/languages/"+this.languageId,[4,this.makeRequest("DELETE",t,void 0,m,e)];case 1:return[2,n.sent()]}}))}))},t}(O),P=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},I=function(){function e(e){this.ordering=e}return e.prototype.auth=function(e,t){return void 0===t&&(t={json:!0,system:!0}),P(this,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return[4,this.ordering.post("/system/auth",e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.getCode=function(e,t){return void 0===t&&(t={json:!0,system:!0}),P(this,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return[4,this.ordering.post("/system/code",e,t)];case 1:return[2,n.sent()]}}))}))},e}(),x=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(e){void 0===e&&(e={}),this.access_token=e.access_token,this.expires_in=e.expires_in,this.token_type=e.token_type},T=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["session","addresses"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),t.session&&(r.session=new A(t.session)),r}return x(t,e),t.prototype.isAdministrator=function(){return 0===this.level},t.prototype.isDriver=function(){return 4===this.level},t.prototype.isBusinessOwner=function(){return 2===this.level},t.prototype.isCustomer=function(){return 3===this.level},t.prototype.getAccessToken=function(){var e;return null===(e=this.session)||void 0===e?void 0:e.access_token},t.prototype.getId=function(){return this.id},t}(h),_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,[])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return _(t,e),t.prototype.getId=function(){return this.id},t}(h),D=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),U=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},L=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},B=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.userId=n,o.addressId=r,o}return D(t,e),t.prototype.setModelId=function(e){this.addressId=e},t.prototype.get=function(e){return void 0===e&&(e={}),U(this,void 0,void 0,(function(){var t;return L(this,(function(n){switch(n.label){case 0:if(!this.userId)throw new Error("You must provide the `userId` param. Example ordering.users(userId).addresses(addressId?).get()");if(this.addressId&&this.conditions)throw new Error("The `where` function is not compatible with users(userId).addresses(addressId). Example ordering.users(userId).addresses().where(contitions).get()");return t="/users/"+this.userId+"/addresses"+(this.addressId?"/"+this.addressId:""),[4,this.makeRequest("GET",t,void 0,k,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),U(this,void 0,void 0,(function(){var n,r,o,a,i;return L(this,(function(u){switch(u.label){case 0:if(!this.userId)throw new Error("You must provide the `userId` param. Example ordering.users(userId).addresses(addressId?).save(changes)");return n="/users/"+this.userId+"/addresses"+(this.addressId?"/"+this.addressId:""),[4,this.makeRequest(this.addressId?"PUT":"POST",n,e,k,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.addressId||(this.addressId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),U(this,void 0,void 0,(function(){var t;return L(this,(function(n){switch(n.label){case 0:if(!this.userId)throw new Error("`userId` is require to delete. Example: ordering.users(userId).addresses(addressId).delete()");if(!this.addressId)throw new Error("`addressId` is require to delete. Example: ordering.users(userId).addresses(addressId).delete()");return t="/users/"+this.userId+"/addresses/"+this.addressId,[4,this.makeRequest("DELETE",t,void 0,k,e)];case 1:return[2,n.sent()]}}))}))},t}(O),F=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["driver"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return F(t,e),t}(h),M=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},z=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},G=function(e){function t(t,n){var r=e.call(this,t)||this;return r.ordering=t,r.driver_id=n,r}return M(t,e),t.prototype.setModelId=function(e){this.driver_id=e},t.prototype.get=function(e){return void 0===e&&(e={}),N(this,void 0,void 0,(function(){var t;return z(this,(function(n){switch(n.label){case 0:if(!this.driver_id)throw new Error("You must provide the `dfriver_id` param. Example ordering.users(driver_id).driverLocations().get()");if(this.driver_id&&this.conditions)throw new Error("The `where` function is not compatible with users(driver_id). Example ordering.users(driver_id).where(contitions).driverLocations().get()");return t="/users"+(this.driver_id?"/"+this.driver_id:"/locations"),[4,this.makeRequest("GET",t,void 0,R,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return N(this,void 0,void 0,(function(){var n;return z(this,(function(r){switch(r.label){case 0:if(!this.driver_id)throw new Error("You must provide the `dfriver_id` param. Example ordering.users(driver_id).driverLocations().save(changes)");if(!e.location.lat||!e.location.lng)throw new Error("You must provide the `location` param. Example ordering.users(driver_id).driverLocations().save({ lat: 10, lng: 10})");return n="/users"+(this.driver_id?"/"+this.driver_id+"/locations":""),[4,this.makeRequest("POST",n,e,R,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.delete=function(e){throw new Error("Method not implemented.")},t}(O),Y=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),q=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},$=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},J=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t)||this;return r.userId=n,r}return Y(t,e),t.prototype.setModelId=function(e){this.userId=e},t.prototype.get=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t;return $(this,(function(n){switch(n.label){case 0:if(this.userId&&this.conditions)throw new Error("The `where` function is not compatible with users(userId). Example ordering.users().where(contitions).get()");return t="/users"+(this.userId?"/"+this.userId:""),[4,this.makeRequest("GET",t,void 0,T,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var n,r,o,a,i;return $(this,(function(u){switch(u.label){case 0:return n="/users"+(this.userId?"/"+this.userId:""),[4,this.makeRequest("POST",n,e,T,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.userId||(this.userId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t;return $(this,(function(n){switch(n.label){case 0:if(!this.userId)throw new Error("`userId` is require to delete. Example: ordering.users(userId).delete()");return t="/users/"+this.userId,[4,this.makeRequest("DELETE",t,void 0,T,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.auth=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var n,r,o,a;return $(this,(function(i){switch(i.label){case 0:return"/auth",[4,this.makeRequest("POST","/auth",e,T,t)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||(this.userId=a.id),[2,n]}}))}))},t.prototype.logout=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),q(this,void 0,void 0,(function(){return $(this,(function(n){switch(n.label){case 0:return"/auth/logout",[4,this.makeRequest("POST","/auth/logout",e,T,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.forgotPassword=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){return $(this,(function(n){switch(n.label){case 0:return"/users/forgot",[4,this.makeRequest("POST","/users/forgot",e,T,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.resetPassword=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){return $(this,(function(n){switch(n.label){case 0:return"/users/reset",[4,this.makeRequest("POST","/users/reset",e,T,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.authFacebook=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var n,r,o,a;return $(this,(function(i){switch(i.label){case 0:return"/auth/facebook",[4,this.makeRequest("POST","/auth/facebook",e,T,t)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||(this.userId=a.id),[2,n]}}))}))},t.prototype.authGoogle=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var n,r,o,a;return $(this,(function(i){switch(i.label){case 0:return"/auth/google",[4,this.makeRequest("POST","/auth/google",e,T,t)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||(this.userId=a.id),[2,n]}}))}))},t.prototype.alerts=function(){var e=this;if(!this.userId)throw new Error("`userId` is require get alerts. Example: ordering.users(userId).alerts().get()");return{get:function(t){return void 0===t&&(t={}),q(e,void 0,void 0,(function(){var e;return $(this,(function(n){switch(n.label){case 0:return e="/users/"+this.userId+"/alerts",[4,this.makeRequest("GET",e,void 0,void 0,t)];case 1:return[2,n.sent()]}}))}))}}},t.prototype.addresses=function(e){if(!this.userId)throw new Error("`userId` is require to use API addresses. Example: ordering.users(userId).addresses().get()");return new B(this.ordering,this.userId,e)},t.prototype.driverLocations=function(){if(!this.userId)throw new Error("`userId` is require to use API addresses. Example: ordering.users(userId).driverLocations().get()");return new G(this.ordering,this.userId)},t}(O),V=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return V(t,e),t.prototype.getId=function(){return this.id},t}(h),W=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},X=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Z=function(e){function t(t,n){var r=e.call(this,t)||this;return r.fieldId=n,r}return W(t,e),t.prototype.setModelId=function(e){this.fieldId=e},t.prototype.get=function(e){return void 0===e&&(e={}),K(this,void 0,void 0,(function(){var t;return X(this,(function(n){switch(n.label){case 0:if(this.fieldId&&this.conditions)throw new Error("The `where` function is not compatible with validationFields(fieldId). Example ordering.validationFields().where(contitions).get()");return t="/validationfields"+(this.fieldId?"/"+this.fieldId:""),[4,this.makeRequest("GET",t,void 0,H,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),K(this,void 0,void 0,(function(){var n,r,o,a,i;return X(this,(function(u){switch(u.label){case 0:return n="/validationfields"+(this.fieldId?"/"+this.fieldId:""),[4,this.makeRequest(this.fieldId?"PUT":"POST",n,e,H,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.fieldId||(this.fieldId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),K(this,void 0,void 0,(function(){var t;return X(this,(function(n){switch(n.label){case 0:if(!this.fieldId)throw new Error("`fieldId` is require to delete. Example: ordering.validationFields(fieldId).delete()");return t="/validationfields/"+this.fieldId,[4,this.makeRequest("DELETE",t,void 0,H,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.toType=function(e){return this.conditions=[{attribute:"validate",value:e}],this},t.prototype.toCheckout=function(){return this.toType("checkout")},t.prototype.toAddress=function(){return this.toType("address")},t}(O),Q=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ee=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["customer","business"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return Q(t,e),t.prototype.getId=function(){return this.id},Object.defineProperty(t.prototype,"subtotal",{get:function(){return this.products?this.products.reduce((function(e,t){var n=t.options.reduce((function(e,t){return e+t.suboptions.reduce((function(e,n){return e+(n.position&&"whole"!==n.position?n.half_price:n.price)*(t.allow_suboption_quantity&&n.quantity>1?n.quantity:1)}),0)}),0);return e+(t.price+n)*t.quantity}),0):0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deliveryFee",{get:function(){return this.delivery_type&&1!==this.delivery_type?0:this.delivery_zone_price},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serviceFee",{get:function(){return(this.subtotal-this.discount)*(this.service_fee/100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalTax",{get:function(){return this.subtotal*this.tax/(this.tax+100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDriverTip",{get:function(){return(this.subtotal-this.totalTax)*(this.driver_tip/100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this.subtotal+this.serviceFee+this.deliveryFee+this.totalDriverTip+(2===this.tax_type?this.totalTax:0)-this.discount},enumerable:!1,configurable:!0}),t}(h),te=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ne=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return te(t,e),t.prototype.getId=function(){return this.id},t}(h),re=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},ae=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},ie=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.orderId=n,o.messageId=r,o}return re(t,e),t.prototype.setModelId=function(e){this.messageId=e},t.prototype.get=function(e){return void 0===e&&(e={}),oe(this,void 0,void 0,(function(){var t;return ae(this,(function(n){switch(n.label){case 0:if(!this.orderId)throw new Error("You must provide the `orderId` param. Example ordering.orders(orderId).messages(messageId?).get()");if(this.messageId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(orderId).messages(messageId). Example ordering.orders(orderId).messages().where(contitions).get()");return t="/orders/"+this.orderId+"/messages"+(this.messageId?"/"+this.messageId:""),[4,this.makeRequest("GET",t,void 0,ne,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),oe(this,void 0,void 0,(function(){var n,r,o,a,i;return ae(this,(function(u){switch(u.label){case 0:if(!this.orderId)throw new Error("You must provide the `orderId` param. Example ordering.orders(orderId).messages(messageId?).save(changes)");if(!this.messageId)throw new Error("ordering.orders(orderId).messages(messageId).save(changes) is not implemented.");return n="/orders/"+this.orderId+"/messages"+(this.messageId?"/"+this.messageId:""),[4,this.makeRequest("POST",n,e,ne,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.messageId||(this.messageId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),oe(this,void 0,void 0,(function(){var t;return ae(this,(function(n){switch(n.label){case 0:if(!this.orderId)throw new Error("ordering.orders(orderId).messages(messageId).delete() is not implemented.");if(!this.messageId)throw new Error("ordering.orders(orderId).messages(messageId).delete() is not implemented.");return t="/orders/"+this.orderId+"/messages/"+this.messageId,[4,this.makeRequest("DELETE",t,void 0,ne,e)];case 1:return[2,n.sent()]}}))}))},t}(O),ue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},ce=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},le=function(e){function t(t,n){var r=e.call(this,t)||this;return r.orderId=n,r}return ue(t,e),t.prototype.setModelId=function(e){this.orderId=e},t.prototype.get=function(e){return void 0===e&&(e={}),se(this,void 0,void 0,(function(){var t;return ce(this,(function(n){switch(n.label){case 0:if(this.orderId&&this.conditions)throw new Error("The `where` function is not compatible with orders(orderId). Example ordering.orders().where(contitions).get()");return t="/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest("GET",t,void 0,ee,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),se(this,void 0,void 0,(function(){var n,r,o,a,i;return ce(this,(function(u){switch(u.label){case 0:return n="/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest(this.orderId?"PUT":"POST",n,e,ee,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.orderId||(this.orderId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),se(this,void 0,void 0,(function(){var t;return ce(this,(function(n){switch(n.label){case 0:if(!this.orderId)throw new Error("`orderId` is require to delete. Example: ordering.orders(orderId).delete()");return t="/orders/"+this.orderId,[4,this.makeRequest("DELETE",t,void 0,ee,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.summary=function(e){return void 0===e&&(e={}),se(this,void 0,void 0,(function(){return ce(this,(function(t){switch(t.label){case 0:if(this.orderId)throw new Error("`orderId` is NOT require to summary API. Example: ordering.orders().summary()");return"/orders/dashboard",[4,this.makeRequest("GET","/orders/dashboard",void 0,void 0,e)];case 1:return[2,t.sent()]}}))}))},t.prototype.messages=function(e){if(!this.orderId)throw new Error("`orderId` is require to use API messages. Example: ordering.orders(orderId).messages().get()");if("number"!=typeof this.orderId)throw new Error("`orderId` must be a number to use API messages. Example: ordering.orders(orderId).messages().get()");return new ie(this.ordering,this.orderId,e)},t.prototype.reorder=function(e){return void 0===e&&(e={}),se(this,void 0,void 0,(function(){var t;return ce(this,(function(n){switch(n.label){case 0:if(!this.orderId)throw new Error("`orderId` is require to delete. Example: ordering.orders(orderId).reorder()");return t="/orders/"+this.orderId+"/reorder",[4,this.makeRequest("POST",t,void 0,void 0,e)];case 1:return[2,n.sent()]}}))}))},t}(O),fe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pe=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["business"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return fe(t,e),t}(h),de=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ye=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},he=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},ve=function(e){function t(t,n){var r=e.call(this,t)||this;return r.orderId=n,r}return de(t,e),t.prototype.setModelId=function(e){this.orderId=e},t.prototype.get=function(e){return void 0===e&&(e={}),ye(this,void 0,void 0,(function(){var t;return he(this,(function(n){switch(n.label){case 0:if(this.orderId&&this.conditions)throw new Error("The `where` function is not compatible with controls(orderId). Example ordering.orders().where(contitions).get()");return t="/controls/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest("GET",t,void 0,pe,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){throw new Error("Method not implemented.")},t.prototype.delete=function(e){throw new Error("Method not implemented.")},t}(O),me=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),be=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,[])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return me(t,e),t.prototype.getId=function(){return this.id},t}(h),ge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oe=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return ge(t,e),t.prototype.getId=function(){return this.id},t}(h),we=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),je=function(e){function t(t,n){var r;void 0===t&&(t={}),void 0===n&&(n=null);var o=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];o[t]=n})),o.products=null===(r=o.products)||void 0===r?void 0:r.map((function(e){return new Oe(e)})),o}return we(t,e),t.prototype.getId=function(){return this.id},t}(h),Se=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ee=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Pe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ce=function(e){function t(t,n,r,o){void 0===o&&(o=null);var a=e.call(this,t)||this;return a.ordering=t,a.businessId=n,a.categoryId=r,a.productId=o,a}return Se(t,e),t.prototype.setModelId=function(e){this.productId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ee(this,void 0,void 0,(function(){var t;return Pe(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId).products(productId?).get()");if(this.productId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).categories(categoryId).products(productId). Example ordering.businesses(businessId).categories(categoryId).products().where(contitions).get()");return t="/business/"+this.businessId+"/categories/"+this.categoryId+"/products"+(this.productId?"/"+this.productId:""),[4,this.makeRequest("GET",t,void 0,Oe,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ee(this,void 0,void 0,(function(){var n,r,o,a,i;return Pe(this,(function(u){switch(u.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId).products(productId?).save(changes)");return n="/business/"+this.businessId+"/categories/"+this.categoryId+"/products"+(this.productId?"/"+this.productId:""),[4,this.makeRequest("POST",n,e,Oe,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.productId||(this.productId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ee(this,void 0,void 0,(function(){var t;return Pe(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");if(!this.categoryId)throw new Error("`categoryId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");if(!this.productId)throw new Error("`productId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");return t="/business/"+this.businessId+"/categories/"+this.categoryId+"/products/"+this.productId,[4,this.makeRequest("DELETE",t,void 0,Oe,e)];case 1:return[2,n.sent()]}}))}))},t}(O),Ie=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Ae=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Te=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.businessId=n,o.categoryId=r,o}return Ie(t,e),t.prototype.setModelId=function(e){this.categoryId=e},t.prototype.get=function(e){return void 0===e&&(e={}),xe(this,void 0,void 0,(function(){var t;return Ae(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId?).get()");if(this.categoryId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).categories(categoryId). Example ordering.businesses(businessId).categories().where(contitions).get()");return t="/business/"+this.businessId+"/categories"+(this.categoryId?"/"+this.categoryId:""),[4,this.makeRequest("GET",t,void 0,je,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),xe(this,void 0,void 0,(function(){var n,r,o,a,i;return Ae(this,(function(u){switch(u.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId?).save(changes)");return n="/business/"+this.businessId+"/categories"+(this.categoryId?"/"+this.categoryId:""),[4,this.makeRequest("POST",n,e,je,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.categoryId||(this.categoryId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),xe(this,void 0,void 0,(function(){var t;return Ae(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).delete()");if(!this.categoryId)throw new Error("`categoryId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).delete()");return t="/business/"+this.businessId+"/categories/"+this.categoryId,[4,this.makeRequest("DELETE",t,void 0,je,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.products=function(e){if(!this.categoryId)throw new Error("`categoryId` is require to use API products. Example: ordering.businesses(businessId).categories(categoryId).products().get()");return new Ce(this.ordering,this.businessId,this.categoryId,e)},t}(O),_e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(e){function t(t,n){var r;void 0===t&&(t={}),void 0===n&&(n=null);var o=e.call(this,t,n,["products"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];o[t]=n})),o.products=null===(r=o.products)||void 0===r?void 0:r.map((function(e){return new Oe(e)})),o}return _e(t,e),t.prototype.getId=function(){return this.id},t}(h),De=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ue=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Le=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Be=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.businessId=n,o.menuId=r,o}return De(t,e),t.prototype.setModelId=function(e){this.menuId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ue(this,void 0,void 0,(function(){var t;return Le(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).menus(menuId?).get()");if(this.menuId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).menus(menuId). Example ordering.businesses(businessId).menus().where(contitions).get()");return t="/business/"+this.businessId+"/menus"+(this.menuId?"/"+this.menuId:""),[4,this.makeRequest("GET",t,void 0,ke,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ue(this,void 0,void 0,(function(){var n,r,o,a,i;return Le(this,(function(u){switch(u.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).menus(menuId?).save(changes)");return n="/business/"+this.businessId+"/menus"+(this.menuId?"/"+this.menuId:""),[4,this.makeRequest(this.menuId?"PUT":"POST",n,e,ke,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.menuId||(this.menuId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ue(this,void 0,void 0,(function(){var t;return Le(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).menus(menuId).delete()");if(!this.menuId)throw new Error("`menuId` is require to delete. Example: ordering.businesses(businessId).menus(menuId).delete()");return t="/business/"+this.businessId+"/menus/"+this.menuId,[4,this.makeRequest("DELETE",t,void 0,ke,e)];case 1:return[2,n.sent()]}}))}))},t}(O),Fe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Re=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Me=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ne=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.businessId=n,o.productId=r,o}return Fe(t,e),t.prototype.setModelId=function(e){this.productId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Re(this,void 0,void 0,(function(){var t;return Me(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).products().get()");return t="/business/"+this.businessId+"/products",[4,this.makeRequest("GET",t,void 0,Oe,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){throw void 0===t&&(t={}),new Error("Method not implemented.")},t.prototype.delete=function(e){throw void 0===e&&(e={}),new Error("Method not implemented.")},t}(O),ze=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ge=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Ye=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},qe=function(e){function t(t,n){var r=e.call(this,t)||this;return r.businessId=n,r}return ze(t,e),t.prototype.setModelId=function(e){this.businessId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ge(this,void 0,void 0,(function(){var t,n,r,o,a;return Ye(this,(function(i){switch(i.label){case 0:if(this.businessId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId). Example ordering.businesses().where(contitions).get()");return t="/business"+(this.businessId?"/"+this.businessId:""),[4,this.makeRequest("GET",t,void 0,be,e)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||this.businessId||(this.businessId=a.id),[2,n]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ge(this,void 0,void 0,(function(){var n,r,o,a,i;return Ye(this,(function(u){switch(u.label){case 0:return n="/business"+(this.businessId?"/"+this.businessId:""),[4,this.makeRequest("POST",n,e,be,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.businessId||(this.businessId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ge(this,void 0,void 0,(function(){var t;return Ye(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).delete()");return t="/business/"+this.businessId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.validateCart=function(e,t){return void 0===t&&(t={}),Ge(this,void 0,void 0,(function(){var n;return Ye(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to validateCart. Example: ordering.businesses(businessId).validateCart(cart)");return n="/business/"+this.businessId+"/validate_cart",[4,this.makeRequest("GET",n,e,void 0,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.products=function(){if(!this.businessId)throw new Error("`businessId` is require to products. Example: ordering.businesses(businessId).products().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API menus. Example: ordering.businesses(businessId).products().get()");return new Ne(this.ordering,this.businessId)},t.prototype.categories=function(e){if(!this.businessId)throw new Error("`businessId` is require to use API categories. Example: ordering.businesses(businessId).categories().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API categories. Example: ordering.businesses(businessId).categories().get()");return new Te(this.ordering,this.businessId,e)},t.prototype.menus=function(e){if(!this.businessId)throw new Error("`businessId` is require to use API menus. Example: ordering.businesses(businessId).menus().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API menus. Example: ordering.businesses(businessId).menus().get()");return new Be(this.ordering,this.businessId,e)},t}(O),$e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Je=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["business"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return $e(t,e),t}(h),Ve=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),He=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},We=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ke=function(e){function t(t){return e.call(this,t)||this}return Ve(t,e),t.prototype.setModelId=function(e){this.driversGroupsId=e},t.prototype.get=function(e){return void 0===e&&(e={}),He(this,void 0,void 0,(function(){var t;return We(this,(function(n){switch(n.label){case 0:if(this.driversGroupsId&&this.conditions)throw new Error("The `where` function is not compatible with orders(driversGroupsId). Example ordering.orders().where(contitions).get()");return t="/drivergroups"+(this.driversGroupsId?"/"+this.driversGroupsId:""),[4,this.makeRequest("GET",t,void 0,Je,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){throw new Error("Method not implemented.")},t.prototype.delete=function(e){throw new Error("Method not implemented.")},t}(O),Xe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ze=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return Xe(t,e),t.prototype.getId=function(){return this.id},t}(h),Qe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},tt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},nt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.configId=n,r}return Qe(t,e),t.prototype.setModelId=function(e){this.configId=e},t.prototype.get=function(e){return void 0===e&&(e={}),et(this,void 0,void 0,(function(){var t;return tt(this,(function(n){switch(n.label){case 0:if(this.configId&&this.conditions)throw new Error("The `where` function is not compatible with configs(configId). Example ordering.configs().where(contitions).get()");return t="/configs"+(this.configId?"/"+this.configId:""),[4,this.makeRequest("GET",t,void 0,Ze,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),et(this,void 0,void 0,(function(){var n,r,o,a,i;return tt(this,(function(u){switch(u.label){case 0:return n="/configs"+(this.configId?"/"+this.configId:""),[4,this.makeRequest(this.configId?"PUT":"POST",n,e,Ze,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.configId||(this.configId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),et(this,void 0,void 0,(function(){var t;return tt(this,(function(n){switch(n.label){case 0:if(!this.configId)throw new Error("`configId` is require to delete. Example: ordering.configs(configId).delete()");return t="/configs/"+this.configId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t}(O),rt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ot=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return rt(t,e),t.prototype.getId=function(){return this.id},t}(h),at=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},ut=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},st=function(e){function t(t,n){var r=e.call(this,t)||this;return r.translationId=n,r}return at(t,e),t.prototype.setModelId=function(e){this.translationId=e},t.prototype.get=function(e){return void 0===e&&(e={}),it(this,void 0,void 0,(function(){var t;return ut(this,(function(n){switch(n.label){case 0:if(this.translationId&&this.conditions)throw new Error("The `where` function is not compatible with translations(translationId). Example ordering.translations().where(contitions).get()");return t="/translations"+(this.translationId?"/"+this.translationId:""),[4,this.makeRequest("GET",t,void 0,ot,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),it(this,void 0,void 0,(function(){var n,r,o,a,i;return ut(this,(function(u){switch(u.label){case 0:return n="/translations"+(this.translationId?"/"+this.translationId:""),[4,this.makeRequest(this.translationId?"PUT":"POST",n,e,ot,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.translationId||(this.translationId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),it(this,void 0,void 0,(function(){var t;return ut(this,(function(n){switch(n.label){case 0:if(!this.translationId)throw new Error("`translationId` is require to delete. Example: ordering.translations(translationId).delete()");return t="/translations/"+this.translationId,[4,this.makeRequest("DELETE",t,void 0,ot,e)];case 1:return[2,n.sent()]}}))}))},t}(O),ct=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lt=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["created_at","updated_at"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n,["updated_at","created_at"].includes(t)&&(r[t]=new Date(n))})),r}return ct(t,e),t.prototype.getId=function(){return this.id},t}(h),ft=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},dt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},yt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.pageId=n,r}return ft(t,e),t.prototype.setModelId=function(e){this.pageId=e},t.prototype.get=function(e){return void 0===e&&(e={}),pt(this,void 0,void 0,(function(){var t;return dt(this,(function(n){switch(n.label){case 0:if(this.pageId&&this.conditions)throw new Error("The `where` function is not compatible with pages(pageId). Example ordering.pages().where(contitions).get()");return t="/pages"+(this.pageId?"/"+this.pageId:""),[4,this.makeRequest("GET",t,void 0,lt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),pt(this,void 0,void 0,(function(){var n,r,o,a,i;return dt(this,(function(u){switch(u.label){case 0:return n="/pages"+(this.pageId?"/"+this.pageId:""),[4,this.makeRequest(this.pageId?"PUT":"POST",n,e,lt,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.pageId||(this.pageId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),pt(this,void 0,void 0,(function(){var t;return dt(this,(function(n){switch(n.label){case 0:if(!this.pageId)throw new Error("`pageId` is require to delete. Example: ordering.pages(pageId).delete()");return t="/pages/"+this.pageId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t}(O),ht=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vt=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return ht(t,e),t.prototype.getId=function(){return this.id},t}(h),mt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bt=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return mt(t,e),t.prototype.getId=function(){return this.id},t}(h),gt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ot=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},wt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},jt=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.countryId=n,o.cityId=r,o}return gt(t,e),t.prototype.setModelId=function(e){this.cityId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ot(this,void 0,void 0,(function(){var t;return wt(this,(function(n){switch(n.label){case 0:if(!this.countryId)throw new Error("You must provide the `countryId` param. Example ordering.countries(countryId).cities(cityId?).get()");if(this.cityId&&this.conditions)throw new Error("The `where` function is not compatible with countries(countryId).cities(cityId). Example ordering.countries(countryId).cities().where(contitions).get()");return t="/countries/"+this.countryId+"/cities"+(this.cityId?"/"+this.cityId:""),[4,this.makeRequest("GET",t,void 0,bt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ot(this,void 0,void 0,(function(){var n,r,o,a,i;return wt(this,(function(u){switch(u.label){case 0:if(!this.countryId)throw new Error("You must provide the `countryId` param. Example ordering.countries(countryId).cities(cityId?).save(changes)");return n="/countries/"+this.countryId+"/cities"+(this.cityId?"/"+this.cityId:""),[4,this.makeRequest(this.cityId?"PUT":"POST",n,e,bt,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.cityId||(this.cityId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ot(this,void 0,void 0,(function(){var t;return wt(this,(function(n){switch(n.label){case 0:if(!this.countryId)throw new Error("`countryId` is require to delete. Example: ordering.countries(countryId).cities(cityId).delete()");if(!this.cityId)throw new Error("`cityId` is require to delete. Example: ordering.countries(countryId).cities(cityId).delete()");return t="/countries/"+this.countryId+"/cities/"+this.cityId,[4,this.makeRequest("DELETE",t,void 0,void 0,e)];case 1:return[2,n.sent()]}}))}))},t}(O),St=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Et=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Pt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ct=function(e){function t(t,n){var r=e.call(this,t)||this;return r.countryId=n,r}return St(t,e),t.prototype.setModelId=function(e){this.countryId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Et(this,void 0,void 0,(function(){var t;return Pt(this,(function(n){switch(n.label){case 0:if(this.countryId&&this.conditions)throw new Error("The `where` function is not compatible with countries(countryId). Example ordering.countries().where(contitions).get()");return t="/countries"+(this.countryId?"/"+this.countryId:""),[4,this.makeRequest("GET",t,void 0,vt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Et(this,void 0,void 0,(function(){var n,r,o,a,i;return Pt(this,(function(u){switch(u.label){case 0:return n="/countries"+(this.countryId?"/"+this.countryId:""),[4,this.makeRequest(this.countryId?"PUT":"POST",n,e,vt,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.countryId||(this.countryId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Et(this,void 0,void 0,(function(){var t;return Pt(this,(function(n){switch(n.label){case 0:if(!this.countryId)throw new Error("`countryId` is require to delete. Example: ordering.countries(countryId).delete()");return t="/countries/"+this.countryId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.cities=function(e){if(!this.countryId)throw new Error("`countryId` is require to use API cities. Example: ordering.countries(countryId).cities().get()");return new jt(this.ordering,this.countryId,e)},t}(O),It=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xt=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return It(t,e),t.prototype.getId=function(){return this.id},t}(h),At=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},_t=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},kt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.orderOptionId=n,r}return At(t,e),t.prototype.setModelId=function(e){this.orderOptionId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Tt(this,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:if(this.orderOptionId)throw new Error("ordering.orderOptions(orderOptionId).get() is not implemented");if(this.orderOptionId&&this.conditions)throw new Error("The `where` function is not compatible with countries(orderOptionId). Example ordering.orderOptions().where(contitions).get()");return"/order_options",[4,this.makeRequest("GET","/order_options",void 0,xt,e)];case 1:return[2,t.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Tt(this,void 0,void 0,(function(){var n,r,o,a;return _t(this,(function(i){switch(i.label){case 0:return"/order_options",[4,this.makeRequest("PUT","/order_options",e,xt,t)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||this.orderOptionId||(this.orderOptionId=a.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Tt(this,void 0,void 0,(function(){var t;return _t(this,(function(n){switch(n.label){case 0:if(this.orderOptionId||!this.orderOptionId)throw new Error("ordering.orderOptions(orderOptionId).delete() is not implemented.");return t="/order_options/"+this.orderOptionId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t}(O),Dt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ut=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return Dt(t,e),t.prototype.getId=function(){return this.id},t}(h),Lt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Ft=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Rt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.cartId=n,r}return Lt(t,e),t.prototype.setModelId=function(e){this.cartId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Bt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){switch(n.label){case 0:if(this.cartId&&this.conditions)throw new Error("The `where` function is not compatible with carts(cartId). Example ordering.carts().where(contitions).get()");return t="/carts"+(this.cartId?"/"+this.cartId:""),[4,this.makeRequest("GET",t,void 0,Ut,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.getBusinesses=function(e){return void 0===e&&(e={}),Bt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){switch(n.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).getBusinesses(options).");return t="/carts/"+this.cartId+"/businesses",[4,this.makeRequest("GET",t,void 0,Ut,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.set=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){var n;return Ft(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirm(options).");return n="/carts/"+this.cartId,[4,this.makeRequest("PUT",n,e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){var e,t,n,r;return Ft(this,(function(o){switch(o.label){case 0:throw new Error("ordering.carts(cartId?).save() is not implemented.");case 1:return e=o.sent(),t=e.content,n=t.error,r=t.result,n||this.cartId||(this.cartId=r.id),[2,e]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(e){switch(e.label){case 0:throw new Error("ordering.carts(cartId).delete() is not implemented.");case 1:return[2,e.sent()]}}))}))},t.prototype.addProduct=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/add_product",[4,this.makeRequest("POST","/carts/add_product",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.removeProduct=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/remove_product",[4,this.makeRequest("POST","/carts/remove_product",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.updateProduct=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/update_product",[4,this.makeRequest("POST","/carts/update_product",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.applyCoupon=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/apply_coupon",[4,this.makeRequest("POST","/carts/apply_coupon",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.changeDriverTip=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/change_driver_tip",[4,this.makeRequest("POST","/carts/change_driver_tip",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.changePaymethod=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/change_paymethod",[4,this.makeRequest("POST","/carts/change_paymethod",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.place=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){var n;return Ft(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).place(data, options).");return n="/carts/"+this.cartId+"/place",[4,this.makeRequest("POST",n,e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.confirm=function(e){return void 0===e&&(e={}),Bt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){switch(n.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirm(options).");return t="/carts/"+this.cartId+"/confirm",[4,this.makeRequest("POST",t,{},Ut,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.confirmWithData=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){var n;return Ft(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirmWithData(data, options).");return n="/carts/"+this.cartId+"/confirm",[4,this.makeRequest("POST",n,e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t}(O),Mt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nt=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,[])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return Mt(t,e),t}(h),zt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Yt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},qt=function(e){function t(t,n,r,o){void 0===o&&(o=null);var a=e.call(this,t)||this;return a.ordering=t,a.businessId=n,a.userId=r,a.card_id=o,a}return zt(t,e),t.prototype.setModelId=function(e){this.businessId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){var t;return Yt(this,(function(n){switch(n.label){case 0:if(!this.businessId||!this.userId)throw new Error("You must provide the `businessId` and `userId` param. Example ordering.paymentCards(businessId,userId).get()");return t="/payments/stripe/cards?business_id="+this.businessId+"&user_id="+this.userId,[4,this.makeRequest("GET",t,void 0,Nt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Gt(this,void 0,void 0,(function(){return Yt(this,(function(e){switch(e.label){case 0:throw new Error("ordering.paymentCards(businessId,userId).save(card) is not implemented.");case 1:return[2,e.sent()]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){var t;return Yt(this,(function(n){switch(n.label){case 0:if(!this.card_id||!this.businessId||!this.userId)throw new Error("You must provide the `businessId`, `userId`, `cardId` param. Example ordering.paymentCards(businessId,userId,cardId).delete()");return t="/payments/stripe/cards?business_id="+this.businessId+"&user_id="+this.userId+"&card_id="+this.card_id,[4,this.makeRequest("DELETE",t,void 0,Nt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.getCredentials=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){return Yt(this,(function(t){switch(t.label){case 0:return"/payments/stripe/credentials",[4,this.makeRequest("GET","/payments/stripe/credentials",void 0,Nt,e)];case 1:return[2,t.sent()]}}))}))},t}(O),$t=function(){return $t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$t.apply(this,arguments)},Jt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Vt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ht=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Wt=function(){function e(e){var t=void 0===e?{}:e,n=t.url,r=void 0===n?"https://apiv4.ordering.co":n,o=t.version,a=void 0===o?"v400":o,i=t.project,u=void 0===i?"demo":i,s=t.language,c=void 0===s?"en":s,l=t.accessToken,f=void 0===l?null:l,p=t.apiKey,d=void 0===p?null:p,y=t.appId,h=void 0===y?null:y;this.url=r,this.version=a,this.project=u,this.language=c,this.accessToken=f,this.apiKey=d,this.appId=h}return Object.defineProperty(e.prototype,"root",{get:function(){return this.url+"/"+this.version+"/"+this.language+"/"+this.project},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"systemRoot",{get:function(){return this.url+"/"+this.version},enumerable:!1,configurable:!0}),e.prototype.setAccessToken=function(e){return this.accessToken=e,this},e.prototype.setApiKey=function(e){return this.apiKey=e,this},e.prototype.setAppId=function(e){return this.appId=e,this},e.prototype.setUrl=function(e){return this.url=e,this},e.prototype.setProject=function(e){return this.project=e,this},e.prototype.setVersion=function(e){return this.version=e,this},e.prototype.setLanguage=function(e){return this.language=e,this},e.prototype.users=function(e){return void 0===e&&(e=null),new J(this,e)},e.prototype.orders=function(e){return void 0===e&&(e=null),new le(this,e)},e.prototype.controls=function(e){return void 0===e&&(e=null),new ve(this,e)},e.prototype.driversgroups=function(){return new Ke(this)},e.prototype.configs=function(e){return void 0===e&&(e=null),new nt(this,e)},e.prototype.businesses=function(e){return new qe(this,e)},e.prototype.validationFields=function(e){return new Z(this,e)},e.prototype.languages=function(e){return new E(this,e)},e.prototype.translations=function(e){return new st(this,e)},e.prototype.pages=function(e){return new yt(this,e)},e.prototype.countries=function(e){return new Ct(this,e)},e.prototype.orderOptions=function(e){return new kt(this,e)},e.prototype.carts=function(e){return new Rt(this,e)},e.prototype.paymentCards=function(e,t,n){return new qt(this,e,t,n)},e.prototype.system=function(){return new I(this)},e.prototype.getRequestProps=function(e){var t,n=e.system?this.systemRoot:this.root,r=e.query,o=e.mode,a=e.conditions,i=e.headers,u=Ht(e,["query","mode","conditions","headers"]),s=r||{};if(s&&Object.keys(s).length>0)for(var c in s)s[c]="object"==typeof s[c]?JSON.stringify(s[c]):s[c];var l=(null===(t=null==s?void 0:s.params)||void 0===t?void 0:t.split(","))||[];(l=l.concat(e.attributes||[])).length>0&&(s.params=l.join(",")),a&&(s.where="object"==typeof a?JSON.stringify(a):a),o&&(s.mode=e.mode);var f={};return this.accessToken&&!this.apiKey&&(f.Authorization="Bearer "+this.accessToken),this.apiKey&&(f["X-Api-Key"]=this.apiKey),this.appId&&(f["X-APP-X"]=this.appId),[n,$t($t({},u),{params:s||{},headers:Object.assign(f,i||{})})]},e.prototype.makeRequest=function(e,t,n,r){return new Promise((function(o,a){var i=new window.XMLHttpRequest,u=Object.entries(r.params||{}).map((function(e){return e[0]+"="+e[1]})).join("&");i.open(e,t+(u?"?"+u:"")),Object.entries(r.headers||{}).forEach((function(e){i.setRequestHeader(e[0],e[1])})),r.cancelToken&&"object"==typeof r.cancelToken&&(r.cancelToken.cancel=function(){i.abort()}),i.onload=function(){if(this.status<500){var e=r.json?JSON.parse(this.response):this.response;o({request:this,data:e,status:this.status,statusText:this.statusText})}else a(new Error("Internal error"))},i.onerror=function(e){a(e)},r.json?(i.setRequestHeader("Content-Type","application/json"),i.send(n?JSON.stringify(n):null)):i.send()}))},e.prototype.get=function(e,t){return void 0===t&&(t={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var n,r,o,a;return Vt(this,(function(i){switch(i.label){case 0:return n=this.getRequestProps(t),r=n[0],o=n[1],[4,this.makeRequest("GET",r+e,null,o)];case 1:return a=i.sent(),[2,new f(a,t,t.api)]}}))}))},e.prototype.post=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var r,o,a,i,u;return Vt(this,(function(s){switch(s.label){case 0:if(r=this.getRequestProps(n),o=r[0],a=r[1],n.json)for(i in t)null!==t[i]&&"object"==typeof t[i]&&(t[i]=JSON.stringify(t[i]));return[4,this.makeRequest("POST",o+e,t,a)];case 1:return u=s.sent(),[2,new f(u,n,n.api)]}}))}))},e.prototype.put=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var r,o,a,i,u;return Vt(this,(function(s){switch(s.label){case 0:if(r=this.getRequestProps(n),o=r[0],a=r[1],n.json)for(i in t)null!==t[i]&&"object"==typeof t[i]&&(t[i]=JSON.stringify(t[i]));return[4,this.makeRequest("PUT",o+e,t,a)];case 1:return u=s.sent(),[2,new f(u,n,n.api)]}}))}))},e.prototype.delete=function(e,t){return void 0===t&&(t={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var n,r,o,a;return Vt(this,(function(i){switch(i.label){case 0:return n=this.getRequestProps(t),r=n[0],o=n[1],[4,this.makeRequest("DELETE",r+e,null,o)];case 1:return a=i.sent(),[2,new f(a,t,t.api)]}}))}))},e}();function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tn=Object(i.createContext)(),nn=function(e){var t=e.settings,n=e.children,r=Qt(Object(i.useState)(Object.assign(t.api,{project:t.project,appId:t.app_id})),2),o=r[0],a=r[1],s=Qt(Object(i.useState)(new Wt(o)),2),c=s[0],l=s[1],f=Qt(Object(i.useState)(t.api.language),2),p=f[0],d=f[1];Object(i.useEffect)((function(){a(Object.assign(t.api,{project:t.project,appId:t.app_id})),l(new Wt(Object.assign(t.api,{project:t.project,appId:t.app_id})))}),[t]),Object(i.useEffect)((function(){if(c.language!==p){var e=new Wt(Xt(Xt({},o),{},{language:p}));l(e)}}),[p]);var y={setLanguage:function(e){e!==p&&d(e)}};return u.a.createElement(tn.Provider,{value:[c,y]},n)},rn=function(){return Object(i.useContext)(tn)||[{}]};function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sn(a,r,o,i,u,"next",e)}function u(e){sn(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pn=Object(i.createContext)(),dn=function(e){var t=e.children,n=e.strategy,r=ln(rn(),1)[0],o=ln(Object(i.useState)({auth:null,token:null,user:null,loading:!0}),2),s=o[0],c=o[1],l=function(){var e=cn(a.a.mark((function e(){var t,n,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:if(t=e.sent,n=t.auth,o=t.token,i=t.user,!o){e.next=12;break}return u={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=10,fetch("".concat(r.root,"/order_options"),u);case 10:e.sent.ok||d();case 12:c(an(an({},s),{},{auth:n,token:o,user:i,loading:!1}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=cn(a.a.mark((function e(){var t,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getItem("token");case 2:return t=e.sent,e.next=5,n.getItem("token");case 5:return r=e.sent,e.next=8,n.getItem("project");case 8:return o=e.sent,e.next=11,n.getItem("user",!0);case 11:return i=e.sent,e.abrupt("return",{auth:t,token:r,project:o,user:i});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=cn(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setItem("token",t.token);case 2:return e.next=4,n.setItem("user",t.user,!0);case 4:return e.next=6,n.setItem("project",t.project);case 6:c(an(an({},s),{},{auth:!0,user:t.user,token:t.token,loading:!1})),window.Canny("identify",{appID:"5b05e5e2d3f6c47201694ad4",user:{email:t.user.email,name:t.user.name,id:t.user.id,avatarURL:null==t||null===(r=t.user)||void 0===r?void 0:r.photo,created:new Date(null==t?void 0:t.user.created_at).toISOString()}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=cn(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.removeItem("token");case 2:return e.next=4,n.removeItem("user");case 4:return e.next=6,n.removeItem("project");case 6:c(an(an({},s),{},{auth:!1,user:null,token:null,loading:!1}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=cn(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setItem("user",t,!0);case 2:c(an(an({},s),{},{user:t,loading:!1}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=cn(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:t=e.sent,n=t.token,r=t.project,o=t.user,n&&!s.token&&p({user:o,token:n,project:r}),!n&&s.token&&d();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=setInterval((function(){h()}),1e3);return function(){return clearInterval(e)}}),[s]),Object(i.useEffect)((function(){l(),function(e,t,n,r){function o(){if(!t.getElementById("canny-jssdk")){var e=t.getElementsByTagName(r)[0],n=t.createElement(r);n.type="text/javascript",n.async=!0,n.src="https://canny.io/sdk.js",e.parentNode.insertBefore(n,e)}}if("function"!=typeof e.Canny){var a=function e(){e.q.push(arguments)};a.q=[],e.Canny=a,"complete"===t.readyState?o():e.attachEvent?e.attachEvent("onload",o):e.addEventListener("load",o,!1)}}(window,document,0,"script")}),[]);var v={login:p,logout:d,changeUser:y};return u.a.createElement(pn.Provider,{value:[s,v]},t)},yn=function(){return Object(i.useContext)(pn)||[{},function(){}]},hn=n(32),vn=n.n(hn);function mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var bn=function(){function e(t){var n=t.url,r=t.project,o=t.accessToken;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=n,this.project=r,this.accessToken=o,this.queue=[]}var t,n,r;return t=e,n=[{key:"connect",value:function(){var e=this;this.socket=vn()(this.url,{extraHeaders:{Authorization:"Bearer ".concat(this.accessToken)},query:"token=".concat(this.accessToken,"&project=").concat(this.project),transports:["websocket"]}),this.socket.on("connect",(function(){for(var t;void 0!==(t=e.queue.shift());)"on"===t.action?e.on(t.event,t.func):"join"===t.action?e.join(t.room):"leave"===t.action?e.leave(t.room):"off"===t.action&&e.off(t.room)}))}},{key:"getId",value:function(){var e;return null===(e=this.socket)||void 0===e?void 0:e.id}},{key:"close",value:function(){var e;null!==(e=this.socket)&&void 0!==e&&e.connected&&this.socket.close()}},{key:"join",value:function(e){var t;return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.emit("join","".concat(this.project,"_").concat(e)):this.queue.push({action:"join",room:e}),this}},{key:"leave",value:function(e){var t;return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.emit("leave","".concat(this.project,"_").concat(e)):this.queue.push({action:"leave",room:e}),this}},{key:"on",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.on(e,n):this.queue.push({action:"on",event:e,func:n}),this}},{key:"off",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.off(e,n):this.queue.push({action:"off",event:e,func:n}),this}}],n&&mn(t.prototype,n),r&&mn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var En=Object(i.createContext)(),Pn=function(e){var t=e.settings,n=e.children,r=jn(yn(),1)[0],o=jn(Object(i.useState)(),2),a=o[0],s=o[1];return Object(i.useEffect)((function(){if(!r.loading){if(r.auth&&t.url&&t.project){var e=new bn(On(On({},t),{},{accessToken:r.token}));s(e)}r.auth||a&&a.close()}}),[r]),Object(i.useEffect)((function(){return a&&a.connect(),function(){a&&a.close()}}),[a]),u.a.createElement(En.Provider,{value:a},n)},Cn=function(){return Object(i.useContext)(En)||new bn({})};function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){An(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function _n(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Tn(a,r,o,i,u,"next",e)}function u(e){Tn(a,r,o,i,u,"throw",e)}i(void 0)}))}}function kn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Un=Object(i.createContext)(),Ln=function(e){var t,n=e.children,r=e.strategy,o=kn(Object(i.useState)({loading:!0,dictionary:{},languageList:[]}),2),s=o[0],c=o[1],l=function(){var e=_n(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getItem("language",!0);case 2:(t=e.sent)&&(c((function(e){return xn(xn({},e),{},{language:t})})),d.setLanguage(null==t?void 0:t.code));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=kn(rn(),2),p=f[0],d=f[1],y=function(){var e=_n(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,!s.loading&&c(xn(xn({},s),{},{loading:!0})),e.next=4,p.translations().asDictionary().get();case 4:t=e.sent,n=t.content,r=n.error,o=n.result,c((function(e){return xn(xn({},e),{},{loading:!1,dictionary:r?{}:o})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c((function(e){return xn(xn({},e),{},{loading:!1})}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=_n(a.a.mark((function e(t){var n,o,i,u,l,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.id!==(null===(n=s.language)||void 0===n?void 0:n.id)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,p.languages(t.id).save({default:!0});case 5:if(o=e.sent,i=o.content,u=i.error,l=i.result,u){e.next=16;break}return f={id:l.id,code:l.code,rtl:l.rtl},e.next=13,r.setItem("language",f,!0);case 13:y=s.languageList.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0})),c(xn(xn({},s),{},{language:f,languageList:y})),d.setLanguage(null==t?void 0:t.code);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),c(xn(xn({},s),{},{loading:!1}));case 21:location.reload();case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=_n(a.a.mark((function e(){var t,n,o,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(xn(xn({},s),{},{loading:!0})),e.next=4,p.languages().get();case 4:if(t=e.sent,n=t.content,o=n.error,i=n.result,o){e.next=15;break}return u=i.find((function(e){return e.default})),l={id:u.id,code:u.code,rtl:u.rtl},e.next=13,r.setItem("language",l,!0);case 13:d.setLanguage(null==l?void 0:l.code),c((function(e){return xn(xn({},e),{},{loading:!1,language:l,languageList:i})}));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),c(xn(xn({},s),{},{loading:!1}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e,t;null!=p&&p.project&&null!==(e=s.language)&&void 0!==e&&e.code&&(null===(t=s.language)||void 0===t?void 0:t.code)===p.language&&y()}),[null===(t=s.language)||void 0===t?void 0:t.code,null==p?void 0:p.project,p.language]),Object(i.useEffect)((function(){l(),null!=p&&p.project&&v()}),[null==p?void 0:p.language,null==p?void 0:p.project]);var m={setLanguage:h,updateLanguageListState:function(e){var t=s.languageList.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));c(xn(xn({},s),{},{languageList:t}))},refreshTranslations:y};return u.a.createElement(Un.Provider,{value:[s,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(null==s?void 0:s.dictionary)&&Object.keys(null==s?void 0:s.dictionary).length>0&&s.dictionary[e]||t||e},m]},n)},Bn=function(){return Object(i.useContext)(Un)||[{},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t||e},_n(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),_n(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))]};function Fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Rn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._events={}}var t,n,r;return t=e,n=[{key:"on",value:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)}},{key:"off",value:function(e,t){this._events[e]&&(this._events[e]=this._events[e].filter((function(e){return e!==t})))}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this._events[e]){var o=function(e){e.apply(void 0,n)};this._events[e].forEach(o)}}}],n&&Fn(t.prototype,n),r&&Fn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Mn=Object(i.createContext)(),Nn=function(e){var t=e.children,n=new Rn;return u.a.createElement(Mn.Provider,{value:[n]},t)},zn=function(){return Object(i.useContext)(Mn)||[new Rn]},Gn=n(3),Yn=n.n(Gn),qn=n(4),$n=n.n(qn);function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Kn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Wn(a,r,o,i,u,"next",e)}function u(e){Wn(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yn.a.extend($n.a);var Qn=Object(i.createContext)(),er=function(e){var t=e.children,n=Xn(Object(i.useState)({loading:!0,configs:{}}),2),r=n[0],o=n[1],s=Xn(Bn(),1)[0],c=Xn(rn(),1)[0],l=Xn(yn(),1)[0].token,f={max_days_preorder:{key:"max_days_preorder",value:6},meters_to_change_address:{key:"meters_to_change_address",value:500},default_order_type:{key:"default_order_type",value:"delivery"},order_types_allowed:{key:"order_types_allowed",value:"1|2|3|4|5"},google_autocomplete_selection_required:{key:"google_autocomplete_selection_required",value:"true"},google_maps_api_key:{key:"google_maps_api_key",value:"AIzaSyDX5giPfK-mtbLR72qxzevCYSUrbi832Sk"},country_autocomplete:{key:"country_autocomplete",value:"*"},track_id_google_analytics:{key:"track_id_google_analytics",value:"UA-51635411-4"}},p=function(){var e=Kn(a.a.mark((function e(){var t,n,i,u,s,p,d,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.loading&&o(Vn(Vn({},r),{},{loading:!0})),!l){e.next=8;break}return e.next=5,c.setAccessToken(l).configs().asDictionary().get();case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,c.configs().asDictionary().get();case 10:e.t0=e.sent;case 11:return i=e.t0,u=i.content,s=u.error,p=u.result,d=null,e.prev=16,e.next=19,fetch("https://ipapi.co/json/");case 19:return y=e.sent,e.next=22,y.json();case 22:d=e.sent,e.next=28;break;case 25:e.prev=25,e.t1=e.catch(16),d=null;case 28:h=Vn(Vn({},f),{},{default_country_code:{value:d&&(null===(t=d)||void 0===t?void 0:t.country_code)||"US",calling_number:d&&(null===(n=d)||void 0===n?void 0:n.country_calling_code)||"+1"}},p),o((function(e){return Vn(Vn({},e),{},{loading:!1,configs:s?{}:l?h:Vn(Vn({},e.configs),h)})})),e.next=35;break;case 32:e.prev=32,e.t2=e.catch(0),o(Vn(Vn({},r),{},{loading:!1}));case 35:case"end":return e.stop()}}),e,null,[[0,32],[16,25]])})));return function(){return e.apply(this,arguments)}}(),d={refreshConfigs:p};return Object(i.useEffect)((function(){null!=c&&c.project?s.loading||p():o({loading:!0,configs:{}})}),[s.loading,null==c?void 0:c.project,l]),u.a.createElement(Qn.Provider,{value:[r,d]},t)},tr=function(){return Object(i.useContext)(Qn)||[{},Kn(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))]},nr=["carts"],rr=["carts"],or=["carts"];function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function ir(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(n),!0).forEach((function(t){cr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function fr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){lr(a,r,o,i,u,"next",e)}function u(e){lr(a,r,o,i,u,"throw",e)}i(void 0)}))}}function pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yn.a.extend($n.a);var yr=Object(i.createContext)(),hr=function(e){var t,n,r=e.Alert,o=e.children,s=e.strategy,c=pr(Object(i.useState)({show:!1}),2),l=c[0],f=c[1],p=pr(Object(i.useState)({show:!1}),2),d=p[0],y=p[1],h=pr(rn(),1)[0],v=pr(Bn(),2),m=v[0],b=v[1],g=Cn(),O=pr(zn(),1)[0],w=pr(tr(),1)[0],j=pr(yn(),2),S=j[0],E=j[1].logout,P={delivery:1,pickup:2,eatin:3,curbside:4,drivethru:5},C=pr(Object(i.useState)({loading:!0,options:{type:P[null==w||null===(t=w.configs)||void 0===t||null===(n=t.default_order_type)||void 0===n?void 0:n.value],moment:null},carts:{},confirmAlert:l,alert:d}),2),I=C[0],x=C[1],A=function(){var e=fr(a.a.mark((function e(){var t,n,r,o,i,u,c,l,f,p,d,v,m,b,g,O,w,j,P,C,A,T,_;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I.loading||x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return r=e.sent,o=null==r?void 0:r.id,i={},o&&(i.query={user_id:o}),e.next=10,h.setAccessToken(S.token).orderOptions().get(i);case 10:return u=e.sent,c=null==u||null===(t=u.content)||void 0===t?void 0:t.error,l=null==u||null===(n=u.content)||void 0===n?void 0:n.result,c||(f=l.carts,p=ir(l,nr),I.carts={},f.forEach((function(e){I.carts["businessId:".concat(e.business_id)]=e})),I.options=sr(sr({},I.options),p)),c&&(y({show:!0,content:l}),401===(null==u?void 0:u.status)&&S.auth&&E()),e.next=17,s.getItem("options",!0);case 17:if(!(d=e.sent)){e.next=49;break}if(v={},!(Object.keys(d.address).length>0)){e.next=41;break}return b=[{attribute:"address",value:null==d||null===(m=d.address)||void 0===m?void 0:m.address}],g=o||S.user.id,e.next=25,h.setAccessToken(S.token).users(g).addresses().where(b).get();case 25:if(O=e.sent,w=O.content.result.find((function(e){var t,n,r;return d.address.internal_number=(null===(t=d.address)||void 0===t?void 0:t.internal_number)||null,d.address.zipcode=(null===(n=d.address)||void 0===n?void 0:n.zipcode)||null,d.address.address_notes=(null===(r=d.address)||void 0===r?void 0:r.address_notes)||null,e.location.lat===d.address.location.lat&&e.location.lng===d.address.location.lng&&e.internal_number===d.address.internal_number&&e.zipcode===d.address.zipcode&&e.address_notes===d.address.address_notes}))){e.next=38;break}return Object.keys(d.address).forEach((function(e){return null===d.address[e]&&delete d.address[e]})),e.next=31,h.setAccessToken(S.token).users(g).addresses().save(d.address);case 31:j=e.sent,P=j.content,C=P.error,A=P.result,C||(w=A),e.next=40;break;case 38:return e.next=40,h.setAccessToken(S.token).users(g).addresses(w.id).save({default:!0});case 40:w&&(v.address_id=w.id);case 41:return d.type&&(v.type=d.type),d.moment&&(v.moment=Yn.a.utc(d.moment,"YYYY-MM-DD HH:mm:ss").unix()),null!=d&&d.address_id&&(v.address_id=null==d?void 0:d.address_id),v&&Object.keys(v).length>0?U(v):x(sr(sr({},I),{},{loading:!1})),e.next=47,s.removeItem("options");case 47:e.next=50;break;case 49:x(sr(sr({},I),{},{loading:!1}));case 50:e.next=57;break;case 52:e.prev=52,e.t0=e.catch(0),_=null!==e.t0&&void 0!==e.t0&&null!==(T=e.t0.message)&&void 0!==T&&T.includes("Internal error")?"INTERNAL_ERROR":e.t0.message,y({show:!0,content:[_]}),x(sr(sr({},I),{},{loading:!1}));case 57:case"end":return e.stop()}}),e,null,[[0,52]])})));return function(){return e.apply(this,arguments)}}(),T=function(e){var t=[];return["address","address_notes","zipcode","location","internal_number"].forEach((function(n){var r,o,a,i,u;null!==(r=I.options)&&void 0!==r&&r.address&&null!==(o=I.options)&&void 0!==o&&o.address[n]?"location"===n?t.push(e[n].lat===(null===(a=I.options)||void 0===a?void 0:a.address[n].lat)&&e[n].lng===(null===(i=I.options)||void 0===i?void 0:i.address[n].lng)):t.push(e[n]===(null===(u=I.options)||void 0===u?void 0:u.address[n])):t.push(!e[n])})),t.every((function(e){return e}))},_=function(){var e=fr(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"!==ar(t)){e.next=9;break}return e.next=3,s.getItem("options",!0);case 3:return r=e.sent,o=sr(sr(sr({},I.options),r),{},{address:sr(sr({},null==r?void 0:r.address),t)}),e.next=7,s.setItem("options",o,!0);case 7:return x(sr(sr({},I),{},{options:o})),e.abrupt("return");case 9:if(!n||null==n||!n.address||T(null==n?void 0:n.address)){e.next=12;break}return U({address_id:null==n||null===(i=n.address)||void 0===i?void 0:i.id}),e.abrupt("return");case 12:if(!n||null==n||!n.isEdit){e.next=17;break}if(t===I.options.address_id){e.next=15;break}return e.abrupt("return");case 15:return U({address_id:t}),e.abrupt("return");case 17:U({address_id:t});case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=fr(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=sr(sr({},I.options),{},{type:t}),I.options.type!==t){e.next=3;break}return e.abrupt("return");case 3:if(S.auth){e.next=7;break}return e.next=6,s.setItem("options",n,!0);case 6:x(sr(sr({},I),{},{options:n}));case 7:U({type:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=fr(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t?t.getTime()/1e3:null,r=n?Yn.a.unix(n).utc().format("YYYY-MM-DD HH:mm:ss"):null,o=sr(sr({},I.options),{},{moment:r}),I.options.moment!==r){e.next=5;break}return e.abrupt("return");case 5:if(S.auth){e.next=9;break}return e.next=8,s.setItem("options",o,!0);case 8:x(sr(sr({},I),{},{options:o}));case 9:U({moment:n});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l,f,p,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S.auth){e.next=25;break}return e.next=3,s.getItem("user-customer",!0);case 3:return n=e.sent,r=null==n?void 0:n.id,o=sr(sr({},t),{},{user_id:r||S.user.id}),e.prev=6,x(sr(sr({},I),{},{loading:!0})),e.next=10,h.setAccessToken(S.token).orderOptions().save(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 10:return i=e.sent,u=i.content,c=u.error,l=u.result,c?y({show:!0,content:l}):(f=l.carts,p=ir(l,rr),I.carts={},f.forEach((function(e){I.carts["businessId:".concat(e.business_id)]=e})),I.options=sr(sr({},I.options),p)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 19:return e.prev=19,e.t0=e.catch(6),v=null!==e.t0&&void 0!==e.t0&&null!==(d=e.t0.message)&&void 0!==d&&d.includes("Internal error")?"INTERNAL_ERROR":e.t0.message,y({show:!0,content:[v]}),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o={product:t,user_id:r||S.user.id},e.next=9,h.setAccessToken(S.token).carts().addProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=e.sent,u=i.content,c=u.error,l=u.result,c?y({show:!0,content:l}):(I.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_product_added",t,l),O.emit("cart_updated",l),O.emit("product_added",t)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 18:return e.prev=18,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o={product:{id:t.id,code:t.code,business_id:t.business_id},user_id:r||S.user.id},e.next=9,h.setAccessToken(S.token).carts().removeProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=e.sent,u=i.content,c=u.error,l=u.result,c?y({show:!0,content:l}):(I.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_product_removed",t,l),O.emit("cart_updated",l)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 18:return e.prev=18,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o=JSON.stringify({uuid:t,user_id:r||S.user.id}),e.next=9,fetch("".concat(h.root,"/carts/clear"),{method:"POST",headers:{"Content-Type":"application/json","X-Socket-Id-X":null==g?void 0:g.getId(),Authorization:"Bearer ".concat(S.token)},body:o});case 9:return i=e.sent,e.next=12,i.json();case 12:return u=e.sent,c=u.error,l=u.result,c?y({show:!0,content:l}):I.carts["businessId:".concat(l.business_id)]=l,x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 20:return e.prev=20,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o={product:t,user_id:r||S.user.id},e.next=9,h.setAccessToken(S.token).carts().updateProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=e.sent,u=i.content,c=u.error,l=u.result,c?y({show:!0,content:l}):(I.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_product_updated",t,l),O.emit("cart_updated",l)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 18:return e.prev=18,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.business_id){e.next=2;break}throw new Error("`business_id` is required.");case 2:if(void 0!==t.coupon){e.next=4;break}throw new Error("`coupon` is required.");case 4:if((null===(n=I.carts["businessId:".concat(t.business_id)])||void 0===n?void 0:n.coupon)!==t.coupon){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,x(sr(sr({},I),{},{loading:!0})),e.next=10,s.getItem("user-customer",!0);case 10:return r=e.sent,o=null==r?void 0:r.id,i={business_id:t.business_id,coupon:t.coupon,user_id:o||S.user.id},e.next=15,h.setAccessToken(S.token).carts().applyCoupon(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 15:return u=e.sent,c=u.content,l=c.error,f=c.result,l?y({show:!0,content:f}):(I.carts["businessId:".concat(f.business_id)]=f,O.emit("cart_updated",f)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!l);case 24:return e.prev=24,e.t0=e.catch(6),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,null,[[6,24]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=fr(a.a.mark((function e(t,n){var r,o,i,u,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("`businessId` is required.");case 2:if(n||0===n){e.next=4;break}throw new Error("`driverTipRate` is required.");case 4:if(I.carts["businessId:".concat(t)]&&(null===(r=I.carts["businessId:".concat(t)])||void 0===r?void 0:r.driver_tip_rate)!==n){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,x(sr(sr({},I),{},{loading:!0})),e.next=10,s.getItem("user-customer",!0);case 10:return o=e.sent,i=null==o?void 0:o.id,u={business_id:t,driver_tip_rate:n,user_id:i||S.user.id},e.next=15,h.setAccessToken(S.token).carts().changeDriverTip(u,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 15:return c=e.sent,l=c.content,f=l.error,p=l.result,f?y({show:!0,content:p}):(I.carts["businessId:".concat(p.business_id)]=p,O.emit("cart_updated",p)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!f);case 24:return e.prev=24,e.t0=e.catch(6),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,null,[[6,24]])})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=fr(a.a.mark((function e(t,n){var r,o,i,u,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return r=e.sent,o=null==r?void 0:r.id,i=sr(sr({},n),{},{user_id:o||S.user.id}),e.next=9,h.setAccessToken(S.token).carts(t).place(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:if(u=e.sent,c=u.content,l=c.error,f=c.result,l){e.next=17;break}1!==f.status?(I.carts["businessId:".concat(f.business_id)]=f,O.emit("cart_updated",f)):(delete I.carts["businessId:".concat(f.business_id)],p={id:f.order.uuid,business:{name:f.business.name},total:f.total,tax_total:f.tax,delivery_zone_price:f.delivery_price},O.emit("order_placed",p)),e.next=20;break;case 17:return y({show:!0,content:f}),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return");case 20:return x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:l,result:f});case 24:return e.prev=24,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:!0,result:[e.t0.message]});case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=fr(a.a.mark((function e(t,n){var r,o,i,u,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return r=e.sent,o=null==r?void 0:r.id,i=sr(sr({},n),{},{user_id:o||S.user.id}),e.next=9,h.setAccessToken(S.token).carts(t).confirm(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return u=e.sent,c=u.content,l=c.error,f=c.result,p=c.cart,l?p&&(I.carts["businessId:".concat(p.business_id)]=p,O.emit("cart_updated",p)):1!==f.status?(I.carts["businessId:".concat(f.business_id)]=f,O.emit("cart_updated",f)):delete I.carts["businessId:".concat(f.business_id)],x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:l,result:f});case 19:return e.prev=19,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:!0,result:[e.t0.message]});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o={headers:{"X-Socket-Id-X":null==g?void 0:g.getId()},query:{user_id:r||S.user.id}},e.next=9,h.setAccessToken(S.token).orders(t).reorder(o);case 9:return i=e.sent,u=i.content,c=u.error,l=u.result,c?y({show:!0,content:l}):(I.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_added",l)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:c,result:l});case 18:return e.prev=18,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:!0,result:[e.t0.message]});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),q=pr(Object(i.useState)(null),2),$=q[0],J=q[1],V=function(){var e=fr(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getItem("options",!0);case 2:t=e.sent,J(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){S.loading||m.loading||S.auth&&A()}),[S.auth,S.loading,m.loading]),Object(i.useEffect)((function(){var e,t;S.loading||w.loading||(S.auth||(V(),x(sr(sr({},I),{},{loading:!1,options:{type:(null==$?void 0:$.type)||P[null==w||null===(e=w.configs)||void 0===e||null===(t=e.default_order_type)||void 0===t?void 0:t.value],moment:(null==$?void 0:$.moment)||null,address:(null==$?void 0:$.address)||{}}}))))}),[S.auth,S.loading,w]),Object(i.useEffect)((function(){var e=function(e){1===e.status?I.carts["businessId:".concat(e.business_id)]&&delete I.carts["businessId:".concat(e.business_id)]:I.carts["businessId:".concat(e.business_id)]=sr(sr({},I.carts["businessId:".concat(e.business_id)]),e),x(sr({},I))},t=function(e){var t=e.carts,n=ir(e,or),r={};t.forEach((function(e){r["businessId:".concat(e.business_id)]=e}));var o=sr(sr({},I),{},{options:sr(sr({},I.options),n),carts:sr(sr({},I.carts),r)});x(sr({},o))};return g.on("carts_update",e),g.on("order_options_update",t),function(){g.off("carts_update",e),g.off("order_options_update",t)}}),[I,g]),Object(i.useEffect)((function(){var e,t;if(S.auth&&!S.loading)return g.join("carts_".concat(null==S||null===(e=S.user)||void 0===e?void 0:e.id)),g.join("orderoptions_".concat(null==S||null===(t=S.user)||void 0===t?void 0:t.id)),function(){var e,t;g.leave("carts_".concat(null==S||null===(e=S.user)||void 0===e?void 0:e.id)),g.leave("orderoptions_".concat(null==S||null===(t=S.user)||void 0===t?void 0:t.id))}}),[g,S]);var H={refreshOrderOptions:A,changeAddress:_,changeType:k,changeMoment:D,addProduct:L,removeProduct:B,updateProduct:R,clearCart:F,applyCoupon:M,changeDriverTip:N,placeCart:z,confirmCart:G,reorder:Y,setAlert:y,setConfirm:f},W=JSON.parse(JSON.stringify(I));return u.a.createElement(yr.Provider,{value:[W,H]},r&&u.a.createElement(r,{open:d.show,title:b("ERROR","Error"),onAccept:function(){return y({show:!1})},onClose:function(){return y({show:!1})},content:d.content}),o)},vr=function(){var e=function(){console.warn("Must use OrderProvider to wrappe the app.")};return Object(i.useContext)(yr)||[{},{refreshOrderOptions:e,changeAddress:e,changeType:e,changeMoment:e,addProduct:e,removeProduct:e,updateProduct:e,clearCart:e,applyCoupon:e,placeCart:e,confirmCart:e,setAlert:e,setConfirm:e,changeDriverTip:e,reorder:e}]},mr=n(33),br=n.n(mr),gr=n(34),Or=n.n(gr);function wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yn.a.extend($n.a),Yn.a.extend(br.a),Yn.a.extend(Or.a);var Sr=Object(i.createContext)(),Er=function(e){var t=e.children,n=wr(Bn(),2),r=n[0],o=n[1],a=wr(tr(),1)[0],s=function(e){var t,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=parseFloat(e)||0;var i={decimal:(null==o?void 0:o.decimal)||(null===(t=a.configs.format_number_decimal_length)||void 0===t?void 0:t.value)||2,separator:(null==o?void 0:o.separator)||(null===(n=a.configs.format_number_decimal_separator)||void 0===n?void 0:n.value)||",",thousand:(null==o?void 0:o.thousand)||(null===(r=a.configs.format_number_thousand_separator)||void 0===r?void 0:r.value)||"."},u=e.toFixed(i.decimal);(u=u.toString()).indexOf(".")?u=u.replace(".",i.separator):u.indexOf(",")&&(u=u.replace(",",i.separator));var s=u.split(i.separator);return"space"===i.thousand&&(i.thousand=" "),s[0]=s[0].replace(/(.)(?=(\d{3})+$)/g,"$1"+i.thousand),u=s.join(i.separator)},c=function(e){return e>=1e9?"".concat((e/1e9).toFixed(1).replace(/\.0$/,"")).concat(o("G","G")):e>=1e6?"".concat((e/1e6).toFixed(1).replace(/\.0$/,"")).concat(o("M","M")):e>=1e3?"".concat((e/1e3).toFixed(1).replace(/\.0$/,"")).concat(o("K","K")):void 0},l={parsePrice:function(e){var t,n,r,o,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c={decimal:(null==u?void 0:u.decimal)||(null===(t=a.configs.format_number_decimal_length)||void 0===t?void 0:t.value)||2,separator:(null==u?void 0:u.separator)||(null===(n=a.configs.format_number_decimal_separator)||void 0===n?void 0:n.value)||",",thousand:(null==u?void 0:u.thousand)||(null===(r=a.configs.format_number_thousand_separator)||void 0===r?void 0:r.value)||".",currency:(null==u?void 0:u.currency)||(null===(o=a.configs.format_number_currency)||void 0===o?void 0:o.value)||"$",currencyPosition:(null==u?void 0:u.currencyPosition)||(null===(i=a.configs.currency_position)||void 0===i?void 0:i.value)||"left"},l=s(e,c);return l="left"===c.currencyPosition?c.currency+" "+l:l+" "+c.currency},parseNumber:s,parseDate:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(null==n?void 0:n.formatTime)||(null===(t=a.configs.format_time)||void 0===t?void 0:t.value)||"24",i={inputFormat:(null==n?void 0:n.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],outputFormat:(null==n?void 0:n.outputFormat)||("24"===r?"YYYY-MM-DD HH:mm":"YYYY-MM-DD hh:mm A"),utc:"boolean"!=typeof(null==n?void 0:n.utc)||(null==n?void 0:n.utc)};if(!Yn()(e,i.inputFormat).isValid())return o("INVALID_FORMAT","invalid format");var u=i.utc?Yn.a.utc(e,i.inputFormat).local():Yn()(e,i.inputFormat);return u.format(i.outputFormat)},parseTime:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"00:00";var r=(null==n?void 0:n.formatTime)||(null===(t=a.configs.format_time)||void 0===t?void 0:t.value)||"24",i={inputFormat:(null==n?void 0:n.inputFormat)||["HH:mm","hh:mm A","hh:mm"],outputFormat:(null==n?void 0:n.outputFormat)||("24"===r?"HH:mm":"hh:mm A"),utc:"boolean"!=typeof(null==n?void 0:n.utc)||(null==n?void 0:n.utc)};if(!Yn()(e,i.inputFormat).isValid())return o("INVALID_FORMAT","invalid format");var u=i.utc?Yn.a.utc(e,i.inputFormat).local():Yn()(e,i.inputFormat);return u.format(i.outputFormat)},parseDistance:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=parseFloat(e)||0;var i,u=(null==r?void 0:r.unit)||"KM";("1"===(null===(t=a.configs.distance_unit_km)||void 0===t?void 0:t.value)&&(u="KM"),null!==(n=a.configs.distance_unit)&&void 0!==n&&n.value)&&(u=null===(i=a.configs.distance_unit)||void 0===i?void 0:i.value);if("MI"===u.toUpperCase()){var l=1.621371*e;return l>=1e3?"".concat(c(l)," ").concat(o("MI","mi")):"".concat(s(l,r)," ").concat(o("MI","mi"))}return e>=1e3?"".concat(c(e)," ").concat(o("KM","km")):"".concat(s(e,r)," ").concat(o("KM","km"))},parseShortenDistance:c,getTimeAgo:function(e,t){if(!e)return"NN";var n={inputFormat:(null==t?void 0:t.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],utc:"boolean"!=typeof(null==t?void 0:t.utc)||(null==t?void 0:t.utc)};return Yn()(e,n.inputFormat).isValid()?(n.utc?Yn.a.utc(e,n.inputFormat).local():Yn()(e,n.inputFormat)).fromNow():o("INVALID_FORMAT","invalid format")},getTimeTo:function(e,t){if(!e)return"NN";var n={inputFormat:(null==t?void 0:t.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],utc:"boolean"!=typeof(null==t?void 0:t.utc)||(null==t?void 0:t.utc)};return Yn()(e,n.inputFormat).isValid()?(n.utc?Yn.a.utc(e,n.inputFormat).local():Yn()(e,n.inputFormat)).toNow():o("INVALID_FORMAT","invalid format")},optimizeImage:function(e,t,n){if(!e&&n)return n;if(t=t&&t.length>0?",".concat(t):"",null!=e&&-1!==e.indexOf("res.cloudinary.com")){var r=e.split("upload");e="".concat(r[0],"upload/f_auto,q_auto").concat(t).concat(r[1])}return e},getOrderState:function(e){switch(e){case 0:return o("PENDING","Pending");case 1:return o("COMPLETED_BY_ADMIN","Completed by admin");case 2:return o("REJECTED_BY_ADMIN","Rejected by admin");case 3:return o("ORDER_STATUS_IN_BUSINESS","Driver arrived to business");case 4:return o("PREPARATION_COMPLETED","Preparation Completed");case 5:return o("REJECTED_BY_BUSINESS","Rejected by business");case 6:return o("REJECTED_BY_DRIVER","Rejected by driver");case 7:return o("ACCEPTED_BY_BUSINESS","Accepted by business");case 8:return o("ACCEPTED_BY_DRIVER","Accepted by driver");case 9:return o("PICK_UP_COMPLETED_BY_DRIVER","Pick up completed by driver");case 10:return o("PICK_UP_FAILED_BY_DRIVER","Pick up Failed by driver");case 11:return o("DELIVERY_COMPLETED_BY_DRIVER","Delivery completed by driver");case 12:return o("DELIVERY_FAILED_BY_DRIVER","Delivery Failed by driver");case 13:return o("PREORDER","Preorder");case 14:return o("ORDER_NOT_READY","Order not ready");case 15:return o("ORDER_PICKEDUP_COMPLETED_BY_CUSTOMER","Pickup completed by customer");case 16:return o("ORDER_STATUS_CANCELLED_BY_CUSTOMER","Cancelled by customer");case 17:return o("ORDER_NOT_PICKEDUP_BY_CUSTOMER","Not picked by customer");case 18:return o("ORDER_DRIVER_ALMOST_ARRIVED_BUSINESS","Driver almost arrived to business");case 19:return o("ORDER_DRIVER_ALMOST_ARRIVED_CUSTOMER","Driver almost arrived to customer");case 20:return o("ORDER_CUSTOMER_ALMOST_ARRIVED_BUSINESS","Customer almost arrived to business");case 21:return o("ORDER_CUSTOMER_ARRIVED_BUSINESS","Customer arrived to business");case 22:return o("ORDER_LOOKING_FOR_DRIVER","Looking for driver");case 23:return o("ORDER_DRIVER_ON_WAY","Driver on way");default:return"N/A"}}};return Object(i.useEffect)((function(){var e;r.loading||(e={name:"auto",weekdays:[o("DAY7","Sunday"),o("DAY1","Monday"),o("DAY2","Tuesday"),o("DAY3","Wednesday"),o("DAY4","Thursday"),o("DAY5","Friday"),o("DAY6","Saturday")],months:[o("MONTH1","January"),o("MONTH2","February"),o("MONTH3","March"),o("MONTH4","April"),o("MONTH5","May"),o("MONTH6","June"),o("MONTH7","July"),o("MONTH8","August"),o("MONTH9","September"),o("MONTH10","October"),o("MONTH11","November"),o("MONTH12","December")],ordinal:function(e){return"".concat(e,"")},relativeTime:{future:o("RELATIVE_TIME_IN","in %s"),past:o("RELATIVE_TIME_AGO","%s ago"),s:o("RELATIVE_TIME_FEW_SECONDS ","a few seconds"),m:o("RELATIVE_TIME_MINUTES","a minute"),mm:o("RELATIVE_TIME_MINUTES","%d minutes"),h:o("RELATIVE_TIME_HOUR","an hour"),hh:o("RELATIVE_TIME_HOURS","%d hours"),d:o("RELATIVE_TIME_DAY","a day"),dd:o("RELATIVE_TIME_DAYS","%d days"),M:o("RELATIVE_TIME_MONTH","a month"),MM:o("RELATIVE_TIME_MONTHS","%d months"),y:o("RELATIVE_TIME_YEAR","a year"),yy:o("RELATIVE_TIME_YEARS","%d years")},meridiem:function(e,t,n){return e>12?o("PM","PM"):o("AM","AM")}},Yn.a.locale("auto",e),Yn.a.updateLocale("auto",e))}),[r]),u.a.createElement(Sr.Provider,{value:[l]},t)},Pr=function(){return Object(i.useContext)(Sr)||[{},function(){}]};function Cr(){return Cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cr.apply(this,arguments)}function Ir(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ar(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tr=function(e){var t,n=e.apiKey,r=e.UIComponent,o=e.mapConfigs,s=xr(vr(),1)[0],c=xr(Pr(),1)[0].optimizeImage,l=xr(tr(),1)[0].configs,f=n||(null==l||null===(t=l.google_maps_api_key)||void 0===t?void 0:t.value),p={},d=xr(Object(i.useState)(null),2),y=d[0],h=d[1],v=xr(Object(i.useState)(null),2),m=v[0],b=v[1],g=xr(rn(),1)[0],O=function(){var t,n=(t=a.a.mark((function t(){var n,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={},p.business=n,t.next=5,g.businesses(e.businessId).select(["location","logo"]).get({cancelToken:n});case 5:r=t.sent,o=r.content.result,b(o.logo),h(o.location),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){Ir(a,r,o,i,u,"next",e)}function u(e){Ir(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){return e.location&&e.businessLogo?(h(e.location),b(e.businessLogo)):O(),function(){p.business&&p.business.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Cr({},e,{googleMapsUrl:function(t){var n,r,a,i,u,l,p=e.orderLocation||(null==s||null===(n=s.options)||void 0===n||null===(r=n.address)||void 0===r?void 0:r.location);return 1===s.options.type?"https://maps.googleapis.com/maps/api/staticmap?size=".concat((null==o||null===(a=o.mapSize)||void 0===a?void 0:a.width)||500,"x").concat((null==o||null===(i=o.mapSize)||void 0===i?void 0:i.height)||190,"&center=").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&zoom=").concat((null==o?void 0:o.mapZoom)||15,"&scale=2&maptype=roadmap&markers=icon:%7Ccolor:red%7C").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&key=").concat(f):"https://maps.googleapis.com/maps/api/staticmap?size=".concat((null==o||null===(u=o.mapSize)||void 0===u?void 0:u.width)||500,"x").concat((null==o||null===(l=o.mapSize)||void 0===l?void 0:l.height)||190,"&scale=2&maptype=roadmap&markers=icon:%7Ccolor:red%7C").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&markers=icon:").concat(c(m,"w_60,h_60,r_max"),"%7Ccolor:white%7C").concat(null==t?void 0:t.lat,",").concat(null==t?void 0:t.lng,"&key=").concat(f)}(y)})))};function _r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Tr.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Tr.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Dr={Info:"INFO",Error:"ERROR",Success:"SUCCESS"},Ur=i.createContext(null),Lr=function(e){var t=e.children,n=_r(i.useState(null),2),r=n[0],o=n[1];return i.createElement(Ur.Provider,{value:[r,{showToast:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;o({type:e,message:t,duration:n})},hideToast:function(){o(null)}}]},t)};function Br(){return i.useContext(Ur)||[{},function(){}]}function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){Mr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Nr(a,r,o,i,u,"next",e)}function u(e){Nr(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qr=Object(i.createContext)(),$r=function(e){var t=e.children,n=Gr(rn(),1)[0],r=Gr(Object(i.useState)({loading:!0,fields:{}}),2),o=r[0],s=r[1],c=function(e,t){e.forEach((function(e){t["mobile_phone"===e.code?"cellphone":e.code]=e}))},l=function(){var e=zr(a.a.mark((function e(){var t,r,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.validationFields().get();case 3:t=e.sent,r=t.content,i=r.result,u=r.error,l={},f={},u||(c(i.filter((function(e){return"checkout"===e.validate})),l),c(i.filter((function(e){return"address"===e.validate})),f)),s({loading:!1,fields:{checkout:l,address:f}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),s(Rr(Rr({},o),{},{loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),f={loadValidationFields:l};return Object(i.useEffect)((function(){null!=n&&n.project&&l()}),[null==n?void 0:n.project]),u.a.createElement(qr.Provider,{value:[o,f]},t)},Jr=function(){return Object(i.useContext)(qr)||[{},zr(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))]};function Vr(){return Vr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vr.apply(this,arguments)}function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){Kr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Zr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xr(a,r,o,i,u,"next",e)}function u(e){Xr(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var to=function(e){var t=e.UIComponent,n=Qr(rn(),1)[0],r=Qr(Br(),2)[1].showToast,o=Qr(Bn(),2)[1],s=Qr(Jr(),2)[1].loadValidationFields,c=Qr(Object(i.useState)({fields:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=Qr(Object(i.useState)({loading:!1,error:null}),2),d=p[0],y=p[1],h=function(){var e=Zr(a.a.mark((function e(){var t,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Wr(Wr({},l),{},{loading:!0})),t=[{attribute:"validate",value:"address"}],e.next=5,n.validationFields().where(t).get();case 5:r=e.sent,o=r.content,i=o.result,o.error||(u=i.filter((function(e){return"city_dropdown_option"!==e.code&&"name"!==e.code&&"lastname"!==e.code&&"mobile_phone"!==e.code&&"email"!==e.code&&"middle_name"!==e.code&&"second_lastname"!==e.code})),f({fields:u,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(Wr(Wr({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Zr(a.a.mark((function e(t,i){var u,c,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(Dr.Info,o("LOADING","Loading")),y(Wr(Wr({},d),{},{loading:!0})),e.next=5,n.validationFields(t).save(i);case 5:u=e.sent,c=u.content,p=c.result,c.error?y({loading:!1,error:p}):(y({loading:!1,error:null}),r(Dr.Success,o("FIELD_SAVED","Field saved")),h=l.fields.filter((function(e){return e.id===t&&Object.assign(e,p),!0})),f(Wr(Wr({},l),{},{fields:h})),s&&s()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),y({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Vr({},e,{addressFieldsState:l,handleChangeFieldSetting:v})))};function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach((function(t){oo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ao(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function io(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ao(a,r,o,i,u,"next",e)}function u(e){ao(a,r,o,i,u,"throw",e)}i(void 0)}))}}function uo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return so(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return so(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}to.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},to.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var co=Object(i.createContext)(),lo=function(e){var t=e.children,n=e.strategy,r=uo(Object(i.useState)({loading:!1,user:null}),2),o=r[0],s=r[1],c=function(){var e=io(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getItem("user-customer",!0);case 2:(t=e.sent)&&s(ro(ro({},o),{},{user:t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=io(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!t){e.next=3;break}return e.next=3,n.setItem("user-customer",t,!0);case 3:s(ro(ro({},o),{},{user:t}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=io(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,n.removeItem("user-customer");case 3:s(ro(ro({},o),{},{user:null}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p={setUserCustomer:l,deleteUserCustomer:f};return Object(i.useEffect)((function(){c()}),[]),u.a.createElement(co.Provider,{value:[o,p]},t)},fo=function(){return Object(i.useContext)(co)||[{},function(){}]};function po(){return po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},po.apply(this,arguments)}function yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(n),!0).forEach((function(t){vo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){mo(a,r,o,i,u,"next",e)}function u(e){mo(a,r,o,i,u,"throw",e)}i(void 0)}))}}function go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wo=function(e){var t=e.UIComponent,n=e.addressId,r=e.address,o=e.useValidationFileds,s=e.onSaveAddress,c=go(rn(),1)[0],l=go(Jr(),1)[0],f=go(Object(i.useState)({loading:!1,error:null,address:r||{}}),2),p=f[0],d=f[1],y=go(Object(i.useState)({loading:!1,changes:{},error:null}),2),h=y[0],v=y[1],m=go(yn(),1)[0],b=m.user,g=m.token,O={},w=e.userId||(null==b?void 0:b.id),j=e.accessToken||g,S=go(fo(),2)[1].setUserCustomer,E=go(Object(i.useState)(!1),2),P=(E[0],E[1]),C=function(){var e=bo(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(ho(ho({},p),{},{loading:!0})),r={},O.address=r,e.next=6,c.users(t).addresses(n).get({accessToken:j,cancelToken:r});case 6:o=e.sent,i=o.content,d({loading:!1,error:i.error?i.result:null,address:i.error?{}:i.result}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&d({loading:!1,error:[e.t0.message],address:{}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){v(ho(ho({},h),{},{changes:ho(ho({},h.changes),e)}))},x=function(){var e=bo(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&S(n,!0),v(ho(ho({},h),{},{loading:!0})),e.prev=2,e.next=5,c.users(w).addresses(null===(r=p.address)||void 0===r?void 0:r.id).save(ho(ho({},t),h.changes),{accessToken:j});case 5:o=e.sent,i=o.content,v(ho(ho({},h),{},{loading:!1,error:i.error?i.result:null,changes:i.error?h.changes:{}})),i.error||(d(ho(ho({},p),{},{address:i.result})),s&&s(i.result)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),v(ho(ho({},h),{},{loading:!1,error:[e.t0.message],address:{}}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){d(ho(ho({},p),{},{address:r||{}}))}),[r]),Object(i.useEffect)((function(){n&&!r&&C(w,n)}),[]),Object(i.useEffect)((function(){return function(){O.address&&O.address.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,po({},e,{formState:h,showField:function(e){var t,n,r;return!o||!l.loading&&!(null!==(t=l.fields)&&void 0!==t&&t.address[e])||!l.loading&&(null===(n=l.fields)||void 0===n?void 0:n.address[e])&&(null===(r=l.fields)||void 0===r?void 0:r.address[e].enabled)},updateChanges:I,handleChangeInput:function(e){I(vo({},e.target.name,e.target.value))},isRequiredField:function(e){var t,n,r;return o&&!l.loading&&(null===(t=l.fields)||void 0===t?void 0:t.address[e])&&(null===(n=l.fields)||void 0===n?void 0:n.address[e].enabled)&&(null===(r=l.fields)||void 0===r?void 0:r.address[e].required)},saveAddress:x,addressState:p,setIsEdit:function(e){return P(e)}})))};function jo(){return jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jo.apply(this,arguments)}function So(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?So(Object(n),!0).forEach((function(t){Po(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):So(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Co(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Io(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Co(a,r,o,i,u,"next",e)}function u(e){Co(a,r,o,i,u,"throw",e)}i(void 0)}))}}function xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ao(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ao(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ao(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}wo.propTypes={UIComponent:c.a.elementType,isSelectedAfterAdd:c.a.bool,useValidationFileds:c.a.bool,address:c.a.object,userId:c.a.number,addressId:c.a.number,onSaveAddress:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wo.defaultProps={useValidationFileds:!1,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var To=function(e){var t=e.UIComponent,n=e.changeOrderAddressWithDefault,r=e.handleClickSetDefault,o=e.handleClickDelete,s=e.handleSuccessUpdate,c=e.userState,l=xo(rn(),1)[0],f=xo(yn(),1)[0],p=f.user,d=f.token,y=xo(fo(),2)[1].setUserCustomer,h=e.userId||(null==p?void 0:p.id),v=e.accessToken||d;if(!h)throw new Error("`userId` must provide from props or use SessionProviver to wrappe the app.");if(!v)throw new Error("`accessToken` must provide from props or use SessionProviver to wrappe the app.");var m=xo(Object(i.useState)({loading:!1,error:null,addresses:[]}),2),b=m[0],g=m[1],O=xo(Object(i.useState)({loading:!1,error:null}),2),w=O[0],j=O[1],S=xo(vr(),2)[1].changeAddress,E={},P=function(){var e=Io(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Eo(Eo({},b),{},{loading:!0})),t={},E.list=t,e.next=6,l.setAccessToken(v).users(h).addresses().get({cancelToken:t});case 6:n=e.sent,r=n.content,g({loading:!1,error:r.error?r.result:null,addresses:r.error?[]:r.result}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&g(Eo(Eo({},b),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){if(null==e||!e.addresses)return P(),function(){E.list&&E.list.cancel()};g(Eo(Eo({},b),{},{addresses:e.addresses}))}),[e.addresses]);var C=function(){var e=Io(a.a.mark((function e(t,o){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&y(o,!0),!r){e.next=3;break}return e.abrupt("return",r(t));case 3:return e.prev=3,j(Eo(Eo({},w),{},{loading:!0})),e.next=7,l.setAccessToken(v).users(h).addresses(t.id).save({default:!0});case 7:i=e.sent,u=i.content,j({loading:!1,error:u.error?u.result:null}),!u.error&&u.result.default&&(b.addresses.map((function(e){return e.default=e.id===t.id,e})),n&&S(u.result.id),g(Eo({},b))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),j(Eo(Eo({},w),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Io(a.a.mark((function e(t){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return",o(t));case 2:return e.prev=2,j(Eo(Eo({},w),{},{loading:!0})),e.next=6,l.users(h).addresses(t.id).delete({accessToken:v});case 6:n=e.sent,r=n.content,j({loading:!1,error:r.error?r.result:null}),r.error||(i=b.addresses.filter((function(e){return e.id!==t.id})),g(Eo(Eo({},b),{},{addresses:i})),s&&(u=Eo(Eo({},c.user),{},{addresses:i}),s(u))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),j(Eo(Eo({},w),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,jo({},e,{addressList:b,setAddressList:g,actionStatus:w,handleSetDefault:C,handleDelete:I})))};function _o(){return _o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_o.apply(this,arguments)}function ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(n),!0).forEach((function(t){Uo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Bo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Lo(a,r,o,i,u,"next",e)}function u(e){Lo(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Fo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ro(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ro(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}To.propTypes={UIComponent:c.a.elementType,handleClickAddress:c.a.func,handleClickSetDefault:c.a.func,handleClickDelete:c.a.func,userId:c.a.number,accessToken:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},To.defaultProps={changeOrderAddressWithDefault:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Mo=function(e){var t=e.UIComponent,n=e.endpoint,r=e.endpoint1,o=Fo(rn(),1)[0],s=Fo(yn(),1)[0],c=s.token,l=s.loading,f=Fo(Object(i.useState)({content:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=Fo(Object(i.useState)({content:[],loading:!1,error:null}),2),h=y[0],v=y[1],m=Fo(Object(i.useState)({from:"",to:"",businessIds:null,drivers_ids:null,franchises_id:null,driver_companies_ids:null,driver_groups_ids:null,delivery_types_ids:null,app_ids:null}),2),b=m[0],g=m[1],O=function(){var e=Bo(a.a.mark((function e(){var t,r,i,u,s,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(Do(Do({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},r="",""!==(null==b?void 0:b.from)&&""!==(null==b?void 0:b.to)&&(r="from=".concat(Yn()(null==b?void 0:b.from).format("YYYY-MM-DD")," 00:00:00&to=").concat(Yn()(null==b?void 0:b.to).format("YYYY-MM-DD")," 23:59:59")),null!=b&&b.businessIds&&(null==b?void 0:b.businessIds.length)>0&&(r="".concat(r,"&businesses_ids=").concat(JSON.stringify(null==b?void 0:b.businessIds))),null!=b&&b.drivers_ids&&(null==b?void 0:b.drivers_ids.length)>0&&(r="".concat(r,"&drivers_ids=").concat(JSON.stringify(null==b?void 0:b.drivers_ids))),null!=b&&b.franchises_id&&(null==b?void 0:b.franchises_id.length)>0&&(r="".concat(r,"&franchises_id=").concat(JSON.stringify(null==b?void 0:b.franchises_id))),null!=b&&b.driver_companies_ids&&(null==b?void 0:b.driver_companies_ids.length)>0&&(r="".concat(r,"&driver_companies_ids=").concat(JSON.stringify(null==b?void 0:b.driver_companies_ids))),null!=b&&b.driver_groups_ids&&(null==b?void 0:b.driver_groups_ids.length)>0&&(r="".concat(r,"&driver_groups_ids=").concat(JSON.stringify(null==b?void 0:b.driver_groups_ids))),null!=b&&b.delivery_types_ids&&(null==b?void 0:b.delivery_types_ids.length)>0&&(r="".concat(r,"&delivery_types_ids=").concat(JSON.stringify(null==b?void 0:b.delivery_types_ids))),null!=b&&b.app_ids&&(null==b?void 0:b.app_ids.length)>0&&(r="".concat(r,"&app_ids=").concat(JSON.stringify(null==b?void 0:b.app_ids))),i="".concat(o.root,"/reports/").concat(n,"?").concat(r),e.next=17,fetch(i,t);case 17:return u=e.sent,e.next=20,u.json();case 20:s=e.sent,f=s.error,y=s.result,d(Do(Do({},p),{},f?{loading:!1,error:y}:{loading:!1,content:y})),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(2),d(Do(Do({},p),{},{loading:!1,error:e.t0}));case 29:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Bo(a.a.mark((function e(){var t,n,i,u,s,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(Do(Do({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},n="",""!==(null==b?void 0:b.from)&&""!==(null==b?void 0:b.to)&&(n="from=".concat(Yn()(null==b?void 0:b.from).format("YYYY-MM-DD")," 00:00:00&to=").concat(Yn()(null==b?void 0:b.to).format("YYYY-MM-DD")," 23:59:59")),null!=b&&b.businessIds&&(null==b?void 0:b.businessIds.length)>0&&(n="".concat(n,"&businesses_ids=").concat(JSON.stringify(null==b?void 0:b.businessIds))),null!=b&&b.drivers_ids&&(null==b?void 0:b.drivers_ids.length)>0&&(n="".concat(n,"&drivers_ids=").concat(JSON.stringify(null==b?void 0:b.drivers_ids))),null!=b&&b.franchises_id&&(null==b?void 0:b.franchises_id.length)>0&&(n="".concat(n,"&franchises_id=").concat(JSON.stringify(null==b?void 0:b.franchises_id))),null!=b&&b.driver_companies_ids&&(null==b?void 0:b.driver_companies_ids.length)>0&&(n="".concat(n,"&driver_companies_ids=").concat(JSON.stringify(null==b?void 0:b.driver_companies_ids))),null!=b&&b.driver_groups_ids&&(null==b?void 0:b.driver_groups_ids.length)>0&&(n="".concat(n,"&driver_groups_ids=").concat(JSON.stringify(null==b?void 0:b.driver_groups_ids))),null!=b&&b.delivery_types_ids&&(null==b?void 0:b.delivery_types_ids.length)>0&&(n="".concat(n,"&delivery_types_ids=").concat(JSON.stringify(null==b?void 0:b.delivery_types_ids))),null!=b&&b.app_ids&&(null==b?void 0:b.app_ids.length)>0&&(n="".concat(n,"&app_ids=").concat(JSON.stringify(null==b?void 0:b.app_ids))),i="".concat(o.root,"/reports/").concat(r,"?").concat(n),e.next=17,fetch(i,t);case 17:return u=e.sent,e.next=20,u.json();case 20:s=e.sent,f=s.error,p=s.result,v(Do(Do({},h),{},f?{loading:!1,error:p}:{loading:!1,content:p})),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(2),v(Do(Do({},h),{},{loading:!1,error:e.t0}));case 29:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){O(),r&&w()}),[b]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_o({},e,{filterList:b,handleChangeFilterList:g,reportData:p,reportData1:h})))};function No(){return No=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},No.apply(this,arguments)}function zo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(n),!0).forEach((function(t){qo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $o(e){return function(e){if(Array.isArray(e))return Ho(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Vo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Vo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vo(e,t){if(e){if("string"==typeof e)return Ho(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ho(e,t):void 0}}function Ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Mo.propTypes={UIComponent:c.a.elementType,endpoint:c.a.string,endpoint1:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Mo.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Wo=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=e.isFranchise,l=e.isSearchByName,f=Jo(rn(),1)[0],p=Jo(Object(i.useState)({loading:!0,error:null,businesses:[],pagination:null}),2),d=p[0],y=p[1],h=Jo(Object(i.useState)(null),2),v=h[0],m=h[1],b=Jo(Object(i.useState)(!1),2),g=b[0],O=b[1],w=Jo(Object(i.useState)(null),2),j=w[0],S=w[1],E=new RegExp(/^[A-Za-z0-9\s]+$/g),P=function(){var e,t=(e=a.a.mark((function e(){var t,r,i,u,s,p,h,v,m,b,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Yo(Yo({},d),{},{loading:!0})),t=null,r=[],j&&(i=[],u=E.test(j),l&&i.push({attribute:"name",value:{condition:"ilike",value:u?encodeURI("%".concat(j,"%")):"%".concat(j,"%")}}),r.push({conector:"OR",conditions:i})),r.length&&(t={conditions:r,conector:"AND"}),s=t?f.businesses().asDashboard().select(o).where(t):f.businesses().asDashboard().select(o),e.next=9,s.get();case 9:p=e.sent,h=p.content,v=h.error,m=h.result,b=h.pagination,v?y(Yo(Yo({},d),{},{loading:!1,error:m})):(O=[],O=c&&(null==n||null===(g=n.franchises_id)||void 0===g?void 0:g.length)>0?m.filter((function(e){return null==n?void 0:n.franchises_id.includes(e.franchise_id)})):$o(m),y(Yo(Yo({},d),{},{loading:!1,businesses:O,pagination:b}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),y(Yo(Yo({},d),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){zo(a,r,o,i,u,"next",e)}function u(e){zo(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return P(),e.abort()}),[j]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==d||null===(e=d.businesses)||void 0===e?void 0:e.length)){var o=null===(t=d.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat($o(e),[t.id])}),[]),a=(null==n||null===(r=n.businessIds)||void 0===r?void 0:r.length)>0?null==n?void 0:n.businessIds.filter((function(e){return o.includes(e)})):o;m($o(a)),null!=n&&n.businessIds&&(null==a?void 0:a.length)!==(null==d?void 0:d.businesses.length)||O(!0)}}),[null==d?void 0:d.businesses]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,No({},e,{businessList:d,businessIds:v,handleChangeBusinessId:function(e){if(null==v?void 0:v.find((function(t){return t===e}))){var t=null==v?void 0:v.filter((function(t){return t!==e}));m(t),O(!1)}else{var n=v?$o(v):[];n.push(e),n.length===(null==d?void 0:d.businesses.length)&&O(!0),m(n)}},handleClickFilterButton:function(){var e=v?$o(v):null;r(Yo(Yo({},n),{},{businessIds:e})),s&&s()},isAllCheck:g,handleChangeAllCheck:function(){if(g)m(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Vo(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(d.businesses);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}m(t)}O(!g)},searchValue:j,onSearch:S})))};function Ko(){return Ko=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ko.apply(this,arguments)}function Xo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zo(Object(n),!0).forEach((function(t){ea(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ta(e){return function(e){if(Array.isArray(e))return aa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function na(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=oa(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||oa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oa(e,t){if(e){if("string"==typeof e)return aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aa(e,t):void 0}}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Wo.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Wo.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var ia=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=ra(rn(),1)[0],l=ra(Object(i.useState)({loading:!0,error:null,users:[],pagination:null}),2),f=l[0],p=l[1],d=ra(Object(i.useState)(null),2),y=d[0],h=d[1],v=ra(Object(i.useState)(null),2),m=v[0],b=v[1],g=ra(Object(i.useState)("all"),2),O=g[0],w=g[1],j=function(e){var t,n=!1,r=!1,o=na(y);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.id===e){var i,u=na(a.children);try{var s=function(){var e=i.value;(null==m?void 0:m.find((function(t){return t===e.id})))?n=!0:r=!0};for(u.s();!(i=u.n()).done;)s()}catch(e){u.e(e)}finally{u.f()}}}}catch(e){o.e(e)}finally{o.f()}var c="all";return n&&r?c="some":!n&&r&&(c="none"),c},S=function(e,t){var n,r=!1,o=na(null==f?void 0:f.users);try{for(o.s();!(n=o.n()).done;){var a,i=n.value,u=na(i.drivergroups);try{for(u.s();!(a=u.n()).done;){var s=a.value;i.id===e&&s.id===t&&(r=!0)}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}return r},E=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Qo(Qo({},f),{},{loading:!0})),t=[{attribute:"level",value:"4"}],e.next=5,c.users().asDashboard().select(o).where(t).get();case 5:n=e.sent,r=n.content,i=r.error,u=r.result,s=r.pagination,p(Qo(Qo({},f),{},i?{loading:!1,error:u}:{loading:!1,users:u,pagination:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),p(Qo(Qo({},f),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xo(a,r,o,i,u,"next",e)}function u(e){Xo(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return E(),e.abort()}),[]),Object(i.useEffect)((function(){(null==f?void 0:f.users.length)>0&&function(){var e,t=[],n=[],r=na(null==f?void 0:f.users);try{for(r.s();!(e=r.n()).done;){var o,a=e.value,i=na(null==a?void 0:a.drivergroups);try{var u=function(){var e=o.value;t.find((function(t){return t.id===e.id}))||t.push({id:e.id,name:e.name,isCollapse:!1,children:[]})};for(i.s();!(o=i.n()).done;)u()}catch(e){i.e(e)}finally{i.f()}n.push(a.id)}}catch(e){r.e(e)}finally{r.f()}var s=t.map((function(e){var t,n=ta(e.children),r=na(null==f?void 0:f.users);try{for(r.s();!(t=r.n()).done;){var o=t.value;S(o.id,e.id)&&n.push(o)}}catch(e){r.e(e)}finally{r.f()}return Qo(Qo({},e),{},{children:n})}));b(n),h(s)}()}),[f]),Object(i.useEffect)((function(){m&&null!=f&&f.users&&(m.length>0&&m.length===f.users.length&&w("all"),m.length>0&&m.length!==f.users.length&&w("some"),0===m.length&&w("none"))}),[m]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ko({},e,{usersList:f,groupList:y,userIds:m,isAllCheck:O,handleChangeCollapse:function(e){var t=null==y?void 0:y.map((function(t){return t.id===e?Qo(Qo({},t),{},{isCollapse:!t.isCollapse}):t}));h(t)},handleChangeUserId:function(e){if(null==m?void 0:m.find((function(t){return t===e}))){var t=null==m?void 0:m.filter((function(t){return t!==e}));b(t),w(!1)}else{var n=m?ta(m):[];n.push(e),n.length===(null==f?void 0:f.users.length)&&w(!0),b(n)}},isParentCheck:j,parentClick:function(e){var t,n=j(e),r=null==y?void 0:y.find((function(t){return t.id===e})),o=ta(m),a=na(null==r?void 0:r.children);try{var i=function(){var e=t.value,r=m.find((function(t){return t===e.id}));if(r&&"none"!==n){var a,i=null===(a=o)||void 0===a?void 0:a.filter((function(t){return t!==e.id}));o=ta(i)}r||"none"!==n||o.push(e.id)};for(a.s();!(t=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}b(o)},isIncluded:S,changeAllCheckStatus:function(e){if(e!==O)if(w(e),"all"===e){var t,n=[],r=na(null==f?void 0:f.users);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.push(o.id)}}catch(e){r.e(e)}finally{r.f()}b(n)}else b([])},handleClickFilterButton:function(){var e=m&&m.length>0?ta(m):null;r&&r(Qo(Qo({},n),{},{userIds:e})),s&&s()}})))};function ua(){return ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ua.apply(this,arguments)}function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function la(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return da(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return da(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ia.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ia.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var ya=function(e){var t=e.UIComponent,n=pa(yn(),1)[0],r=n.token,o=n.loading,s=pa(rn(),1)[0],c=pa(Object(i.useState)({loading:!1,ids:[],error:null}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,n,i,u,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(ca(ca({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n="".concat(s.root,"/reports/app_ids"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,c=u.error,p=u.result,f(ca(ca({},l),{},c?{loading:!0,error:p}:{loading:!1,ids:p})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),f(ca(ca({},l),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){fa(a,r,o,i,u,"next",e)}function u(e){fa(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ua({},e,{appIdList:l})))};function ha(){return ha=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ha.apply(this,arguments)}function va(e){return function(e){if(Array.isArray(e))return Pa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ea(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(n),!0).forEach((function(t){Oa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ja(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){wa(a,r,o,i,u,"next",e)}function u(e){wa(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Sa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ea(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ea(e,t){if(e){if("string"==typeof e)return Pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pa(e,t):void 0}}function Pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ya.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ya.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ca=function(e){var t=e.UIComponent,n=Sa(rn(),1)[0],r=Sa(yn(),1)[0],o=r.user,s=r.token,c=Sa(Br(),2)[1].showToast,l=Sa(Bn(),2)[1],f=Sa(Object(i.useState)({keys:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=Sa(Object(i.useState)({loading:!1,error:null}),2),h=y[0],v=y[1],m=function(){var e=ja(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(ba(ba({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(n.root,"/users/").concat(null==o?void 0:o.id,"/keys"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error||d(ba(ba({},p),{},{keys:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(ba(ba({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=ja(a.a.mark((function e(t){var r,i,u,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),v(ba(ba({},h),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=6,fetch("".concat(n.root,"/users/").concat(null==o?void 0:o.id,"/keys/").concat(t),r);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?v({loading:!1,error:u.result}):(v(ba(ba({},h),{},{loading:!1})),f=p.keys.filter((function(e){return e.id!==t})),d(ba(ba({},p),{},{keys:f})),c(Dr.Success,l("APIKEY_REMOVED","API key removed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=ja(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),v(ba(ba({},h),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=6,fetch("".concat(n.root,"/users/").concat(null==o?void 0:o.id,"/keys"),t);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?v({loading:!1,error:i.result}):(v(ba(ba({},h),{},{loading:!1})),u=[].concat(va(p.keys),[i.result]),d(ba(ba({},p),{},{keys:u})),c(Dr.Success,l("APIKEY_ADDED","API key added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0!==(null==o?void 0:o.level)&&2!==(null==o?void 0:o.level)||m()}),[o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ha({},e,{apiKeysList:p,actionState:h,handleDeleteApiKey:b,handleAddApiKey:g})))};Ca.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ca.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ia=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function xa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Aa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ia.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ia.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ta=function(e){var t=e.appId,n=e.children,r=xa(yn(),1)[0].user;return Object(i.useEffect)((function(){t&&(window.document.getElementById("canny-jssdk")||function(e,t,n,r){function o(){if(!t.getElementById("canny-jssdk")){var e=t.getElementsByTagName(r)[0],n=t.createElement(r);n.type="text/javascript",n.async=!0,n.src="https://canny.io/sdk.js",e.parentNode.insertBefore(n,e)}}if("function"!=typeof e.Canny){var a=function e(){e.q.push(arguments)};a.q=[],e.Canny=a,"complete"===t.readyState?o():e.attachEvent?e.attachEvent("onload",o):e.addEventListener("load",o,!1)}}(window,document,0,"script"))}),[t]),Object(i.useEffect)((function(){r&&window.Canny("identify",{appID:t,user:{email:r.email,name:r.name,id:r.id,avatarURL:null==r?void 0:r.photo,created:new Date(r.created_at).toISOString()}})}),[r,t]),u.a.createElement(u.a.Fragment,null,n)};function _a(){return _a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_a.apply(this,arguments)}function ka(e){return function(e){if(Array.isArray(e))return Na(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ma(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Da(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ua(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Da(a,r,o,i,u,"next",e)}function u(e){Da(a,r,o,i,u,"throw",e)}i(void 0)}))}}function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach((function(t){Fa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ma(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ma(e,t){if(e){if("string"==typeof e)return Na(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Na(e,t):void 0}}function Na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ta.propTypes={appId:c.a.string.isRequired},Ta.defaultProps={};var za=["cloudinary","tookan","order_messages","others","location"],Ga=["search_by_address","distance_unit_km","pickup","orders_metafields_strategy","order_validate","time_format","driver_close_distance","lazy_load_products_when_necessary"],Ya=function(e){var t=e.UIComponent,n=e.settingsType,r=Ra(yn(),1)[0],o=r.token,s=r.loading,c=Ra(rn(),1)[0],l=Ra(Object(i.useState)({categories:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=Ra(Object(i.useState)(!1),2),y=d[0],h=d[1],v=Ra(Object(i.useState)(null),2),m=v[0],b=v[1],g=function(){var e=Ua(a.a.mark((function e(){var t,r,i,u,l,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Ba(Ba({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},(r=[]).push({attribute:"key",value:n}),i="".concat(c.root,"/config_categories?where=").concat(JSON.stringify(r)),e.next=10,fetch(i,t);case 10:return u=e.sent,e.next=13,u.json();case 13:l=e.sent,d=l.error,y=l.result,!d&&y.length>0?b(y[0].id):p(Ba(Ba({},f),{},{loading:!1,error:y})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p(Ba(Ba({},f),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Ua(a.a.mark((function e(){var t,n,r,i,u,l,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Ba(Ba({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},(n=[]).push({attribute:"parent_category_id",value:parseInt(m)}),r="".concat(c.root,"/config_categories?orderBy=id&where=").concat(JSON.stringify(n)),e.next=10,fetch(r,t);case 10:return i=e.sent,e.next=13,i.json();case 13:u=e.sent,l=u.error,d=u.result,l?p(Ba(Ba({},f),{},{loading:!0,error:d})):(y=d.filter((function(e){return!za.includes(e.key)})).map((function(e){var t,n=null===(t=e.configs)||void 0===t?void 0:t.filter((function(e){return!Ga.includes(e.key)})).sort((function(e,t){return 1*e.rank>1*t.rank?1:-1}));return Ba(Ba({},e),{},{configs:ka(n)})})),p(Ba(Ba({},f),{},{loading:!1,categories:y}))),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p(Ba(Ba({},f),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){g()}),[]),Object(i.useEffect)((function(){m&&O(m)}),[m]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_a({},e,{isUpdateConfig:y,handChangeConfig:h,categoryList:f,handleUpdateCategoryList:function(e){p(Ba(Ba({},f),{},{categories:e})),h(!0)}})))};function qa(){return qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qa.apply(this,arguments)}function $a(e){return function(e){if(Array.isArray(e))return Qa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Za(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){Ha(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ka(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Wa(a,r,o,i,u,"next",e)}function u(e){Wa(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Xa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Za(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Za(e,t){if(e){if("string"==typeof e)return Qa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qa(e,t):void 0}}function Qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ya.propTypes={UIComponent:c.a.elementType,settingsType:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ya.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ei=function(e){var t=e.categorySelected,n=e.businessState,r=e.handleUpdateBusinessState,o=e.UIComponent,s=Xa(Bn(),2)[1],c=Xa(rn(),1)[0],l=Xa(yn(),1)[0].loading,f=Xa(Br(),2)[1].showToast,p=Xa(Object(i.useState)([]),2),d=p[0],y=p[1],h=n.business,v=Xa(Object(i.useState)({photos:[],loading:!1,result:{error:null},API:!1,endPoint:!1}),2),m=v[0],b=v[1],g=Xa(Object(i.useState)([]),2),O=g[0],w=g[1],j=function(){return b({photos:[],loading:!1,result:{error:null},API:!1})},S=function(){var e=Ka(a.a.mark((function e(t,n){var o,i,u,p,d,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(Dr.Info,s("LOADING","Loading")),b(Va(Va({},m),{},{loading:!0,API:!1})),e.next=7,c.businesses(parseInt(null==h?void 0:h.id)).categories(parseInt(null==t?void 0:t.category_id)).products(null==t?void 0:t.id).save(n);case 7:o=e.sent,i=o.content,u=i.error,p=i.result,u?b(Va(Va({},m),{},{loading:!1,result:{error:!0,result:p}})):(r&&((y=$a(null==h?void 0:h.categories)).forEach((function e(r){if(r.id===(null==t?void 0:t.category_id)){var o=r.products.map((function(e){return e.id===t.id?Va(Va({},e),n):e}));r.products=$a(o)}Array.isArray(null==r?void 0:r.subcategories)&&r.subcategories.forEach(e)})),r(Va(Va({},h),{},{categories:y}))),(v=null==m||null===(d=m.photos)||void 0===d?void 0:d.filter((function(e){return(null==e?void 0:e.name)!==(null==p?void 0:p.id)}))).length>0?b(Va(Va({},m),{},{photos:v,API:!0})):b({loading:!1,photos:[],result:{error:!1,result:"all product updated"},API:!1,endPoint:!0}),f(Dr.Success,s("PRODUCT_UPDATE","Products updated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),b(Va(Va({},m),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(e){return new Promise((function(t){var n=new FileReader,r=e.type,o=e.name,a=e.size;n.addEventListener("load",(function(){t({base64:n.result,name:parseInt(o.split(".")[0]),type:r,size:a})})),n.readAsDataURL(e)}))},P=function(){var e=Ka(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=0;r<t.length;r++)n.push(E(t[r]));return e.next=4,Promise.all(n);case 4:o=e.sent,w([].concat($a(O),$a(o)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){b(Va(Va({},m),{},{photos:O}))}),[O]);return Object(i.useEffect)((function(){t&&null!=t&&t.products&&(null==t?void 0:t.products.length)>0&&y(null==t?void 0:t.products)}),[t]),Object(i.useEffect)((function(){var e;if(null!=m&&m.API&&(null==m||null===(e=m.photos)||void 0===e?void 0:e.length)>0){var t=null==m?void 0:m.photos[0],n={images:null==t?void 0:t.base64},r=d.find((function(e){return(null==t?void 0:t.name)===(null==e?void 0:e.id)}));S(r,n)}null!=m&&m.API&&0===(null==m?void 0:m.photos.length)&&j()}),[null==m?void 0:m.API]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,qa({},e,{handleUploadImages:P,cleanFormState:j,updateProduct:function(){b(Va(Va({},m),{},{API:!0,loading:!0}))},formState:m,products:d})))};function ti(){return ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ti.apply(this,arguments)}function ni(e){return function(e){if(Array.isArray(e))return li(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ci(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(n),!0).forEach((function(t){ai(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ii(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ui(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ii(a,r,o,i,u,"next",e)}function u(e){ii(a,r,o,i,u,"throw",e)}i(void 0)}))}}function si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ci(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ci(e,t){if(e){if("string"==typeof e)return li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?li(e,t):void 0}}function li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ei.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ei.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},Yn.a.extend($n.a);var fi=function(e){var t,n,r,o,s,c=e.isSearchByName,l=e.isSearchByDescription,f=e.slug,p=e.categoryId,d=e.productId,y=e.isInitialRender,h=e.ordering,v=e.businessProps,m=e.UIComponent,b=si(vr(),1)[0],g=si(Bn(),2),O=g[0],w=g[1],j=si(Object(i.useState)({id:null,name:w("ALL","All")}),2),S=j[0],E=j[1],P=si(Object(i.useState)(null),2),C=P[0],I=P[1],x=si(Object(i.useState)(null),2),A=x[0],T=x[1],_=si(Object(i.useState)(null),2),k=_[0],D=_[1],U=si(Object(i.useState)({business:{},menus:null,loading:!0,error:null}),2),L=U[0],B=U[1],F=si(Object(i.useState)({}),2),R=F[0],M=F[1],N=si(Object(i.useState)(),2),z=N[0],G=N[1],Y=si(Object(i.useState)({}),2),q=Y[0],$=Y[1],J=si(Object(i.useState)({product:null,loading:!1,error:null}),2),V=J[0],H=J[1],W=si(Object(i.useState)(!1),2),K=W[0],X=W[1],Z={loading:!0,pagination:{currentPage:0,pageSize:20,totalItems:null,totalPages:0,nextPageItems:10},products:[]},Q=si(Object(i.useState)(Z),2),ee=Q[0],te=Q[1],ne=si(Object(i.useState)(null),2),re=ne[0],oe=ne[1],ae=function(e,t){return!C||(e&&e.toLowerCase().includes(C.toLowerCase())&&c||t&&t.toLowerCase().includes(C.toLowerCase())&&l)},ie=function(e){return!!e.featured&&(!C||(e.name&&e.name.toLowerCase().includes(C.toLowerCase())&&c||e.description&&e.description.toLowerCase().includes(C.toLowerCase())&&l))},ue=function(e,t){return"rank"===e?t.sort((function(e,t){return t.rank-e.rank})):"a-z"===e?t.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})):t},se=function(){var e=ui(a.a.mark((function e(t){var n,r,o,i,u,s,f,p,d,y,v,m,g,O,w,j,E,P,I,x,T,_,k,D,U,B,F,N,z,G,Y,J,V,H;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=L&&null!==(n=L.business)&&void 0!==n&&n.lazy_load_products_recommended){e.next=8;break}return s=!(null==L||null===(o=L.business)||void 0===o||null===(i=o.categories)||void 0===i||null===(u=i.find((function(e){return e})))||void 0===u||!u.products.filter((function(e){return e.featured})).length),X(s),f=oi(oi({},Z),{},{loading:!1}),"featured"!==(null==S?void 0:S.id)&&null!==(null==S?void 0:S.id)?(v=null==L||null===(p=L.business)||void 0===p||null===(d=p.categories)||void 0===d||null===(y=d.find((function(e){return(null==e?void 0:e.id)===(null==S?void 0:S.id)})))||void 0===y?void 0:y.products.filter((function(e){return ae(e.name,e.description)})),f.products=v||[]):"featured"===(null==S?void 0:S.id)?(O=null==L||null===(m=L.business)||void 0===m||null===(g=m.categories)||void 0===g?void 0:g.reduce((function(e,t){return[].concat(ni(e),ni(t.products))}),[]).filter((function(e){return ie(e)})),f.products=O||[]):(E=null==L||null===(w=L.business)||void 0===w||null===(j=w.categories)||void 0===j?void 0:j.reduce((function(e,t){return[].concat(ni(e),ni(t.products))}),[]).filter((function(e){return ae(e.name,e.description)})),f.products=E||[]),f.products=ue(A,f.products),te(oi({},f)),e.abrupt("return");case 8:if(P=C?"search":"featured"===(null==S?void 0:S.id)?"featured":null!=S&&S.id?"categoryId:".concat(null==S?void 0:S.id):"all",(I=R[P]||Z).products=ue(A,I.products),x=I.pagination,t||!(x.currentPage>0)||x.currentPage!==x.totalPages){e.next=15;break}return te(oi(oi({},I),{},{loading:!1})),e.abrupt("return");case 15:return te(oi(oi({},I),{},{loading:!0})),T={type:(null===(r=b.options)||void 0===r?void 0:r.type)||1,page:t?1:x.currentPage+1,page_size:x.pageSize},A&&(T.orderBy="a-z"===A?"name":A),_=null,k=[],C&&(c&&k.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}}),l&&k.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}})),_={conditions:k,conector:"OR"},"featured"===(null==S?void 0:S.id)&&(_={conditions:[{attribute:"featured",value:!0}]}),"featured"===(null==S?void 0:S.id)&&C&&(_={conditions:[{attribute:"featured",value:!0},{conditions:k,conector:"OR"}],conector:"AND"}),e.prev=24,B=null!=S&&S.id&&"featured"!==(null==S?void 0:S.id)?h.businesses(null===(D=L.business)||void 0===D?void 0:D.id).categories(null==S?void 0:S.id).products():h.businesses(null===(U=L.business)||void 0===U?void 0:U.id).products(),F={},q.products=F,$(oi({},q)),N=_.conditions.length>0?B.parameters(T).where(_):B.parameters(T),e.next=32,N.get({cancelToken:F});case 32:z=e.sent,G=z.content,Y=G.error,J=G.result,V=G.pagination,Y?oe(J):(H={pagination:oi(oi({},I.pagination),{},{currentPage:V.current_page,totalItems:V.total,totalPages:V.total_pages}),loading:!1,products:t?ni(J):[].concat(ni(I.products),ni(J))},R[P]=H,te(oi({},H)),M(oi({},R)),X(!!R.all.products.find((function(e){return e.featured})))),e.next=43;break;case 40:e.prev=40,e.t0=e.catch(24),oe([e.t0.message]);case 43:case"end":return e.stop()}}),e,null,[[24,40]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=ui(a.a.mark((function e(){var t,n,r,o,i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p&&d&&null!==(t=L.business)&&void 0!==t&&t.id)){e.next=17;break}return e.prev=1,H(oi(oi({},V),{},{loading:!0})),i={},q.product=i,u={type:(null===(n=b.options)||void 0===n?void 0:n.type)||1,moment:(null===(r=b.options)||void 0===r?void 0:r.moment)||null},e.next=8,h.businesses(null===(o=L.business)||void 0===o?void 0:o.id).categories(p).products(d).parameters(u).get({cancelToken:i});case 8:s=e.sent,c=s.content.result,l=Array.isArray(c)?null:c,H(oi(oi({},V),{},{product:l,loading:!1})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),H(oi(oi({},V),{},{loading:!1,error:[e.t0]}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){y&&ce()}),[JSON.stringify(null===(t=L.business)||void 0===t?void 0:t.id),y]);var le=function(){var e=ui(a.a.mark((function e(){var t,n,r,o,i,u,s,c,l,p,d,y,m,g,O,w,j,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(oi(oi({},L),{},{loading:!0})),y={},q.business=y,$(oi({},q)),m={type:(null===(t=b.options)||void 0===t?void 0:t.type)||1,location:null!==(n=b.options)&&void 0!==n&&null!==(r=n.address)&&void 0!==r&&r.location?"".concat(null===(o=b.options)||void 0===o||null===(i=o.address)||void 0===i||null===(u=i.location)||void 0===u?void 0:u.lat,",").concat(null===(s=b.options)||void 0===s||null===(c=s.address)||void 0===c||null===(l=c.location)||void 0===l?void 0:l.lng):null},null!==(p=b.options)&&void 0!==p&&p.moment&&(a=null===(d=b.options)||void 0===d?void 0:d.moment,P="YYYY-MM-DD HH:mm:ss",Yn()(a,P).format(P)===a)&&(O=Yn.a.utc(null===(g=b.options)||void 0===g?void 0:g.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),m.timestamp=O),k&&(m.menu_id=k),e.next=10,h.businesses(f).select(v).parameters(m).get({cancelToken:y});case 10:return w=e.sent,j=w.content.result,e.next=14,h.businesses(j.id).menus().get();case 14:S=e.sent,E=S.content.result,B(oi(oi({},L),{},{business:j,loading:!1,menus:E})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),B(oi(oi({},L),{},{loading:!1,error:[e.t0.message]}));case 22:case"end":return e.stop()}var a,P}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){L.loading||se(!0)}),[L]),Object(i.useEffect)((function(){se(!!C)}),[C]),Object(i.useEffect)((function(){se(!!C)}),[S.id]),Object(i.useEffect)((function(){se(!!C)}),[A]),Object(i.useEffect)((function(){se()}),[f]),Object(i.useEffect)((function(){b.loading||!z||O.loading||le()}),[z,O.loading,f,k]),Object(i.useEffect)((function(){var e,t,n,r;b.loading||G({type:null==b||null===(e=b.options)||void 0===e?void 0:e.type,moment:null==b||null===(t=b.options)||void 0===t?void 0:t.moment,location:null==b||null===(n=b.options)||void 0===n||null===(r=n.address)||void 0===r?void 0:r.location})}),[null==b||null===(n=b.options)||void 0===n?void 0:n.type,null==b||null===(r=b.options)||void 0===r?void 0:r.moment,JSON.stringify(null==b||null===(o=b.options)||void 0===o||null===(s=o.address)||void 0===s?void 0:s.location)]),Object(i.useEffect)((function(){var e=q.business;return function(){e&&e.cancel()}}),[q.business]),Object(i.useEffect)((function(){var e=q.products;return function(){e&&e.cancel()}}),[q.products]),u.a.createElement(u.a.Fragment,null,m&&u.a.createElement(m,ti({},e,{errors:re,categorySelected:S,searchValue:C,sortByValue:A,filterByMenus:k,categoryState:ee,businessState:L,productModal:V,featuredProducts:K,handleChangeCategory:function(e){(null==e?void 0:e.id)!==(null==S?void 0:S.id)&&E(e)},handleChangeSearch:function(e){I(e)},handleChangeSortBy:function(e){T(e)},handleChangeFilterByMenus:function(e){D(e)},getNextProducts:se,updateProductModal:function(e){return H(oi(oi({},V),{},{product:e}))}})))};function pi(){return pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pi.apply(this,arguments)}function di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?di(Object(n),!0).forEach((function(t){hi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vi(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mi(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){vi(a,r,o,i,u,"next",e)}function u(e){vi(a,r,o,i,u,"throw",e)}i(void 0)}))}}function bi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fi.propTypes={UIComponent:c.a.elementType},fi.defaultProps={};var Oi=function(e){var t=e.UIComponent,n=bi(yn(),1)[0],r=n.token,o=n.loading,s=bi(rn(),1)[0],c=bi(Object(i.useState)({lapse:"today",businessIds:null,app_id:"all",franchises_id:null}),2),l=c[0],f=c[1],p=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),d=p[0],y=p[1],h=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),v=h[0],m=h[1],b=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),g=b[0],O=b[1],w=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),j=w[0],S=w[1],E=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),P=E[0],C=E[1],I=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),x=I[0],A=I[1],T=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),_=T[0],k=T[1],D=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),U=D[0],L=D[1],B=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),F=B[0],R=B[1],M=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),N=M[0],z=M[1],G=function(e){var t,n="".concat(s.root,"/reports/").concat(e),r="lapse=".concat(null==l?void 0:l.lapse);return null!=l&&l.businessIds&&(null==l?void 0:l.businessIds.length)>0&&(r="".concat(r,"&businesses=").concat(null==l||null===(t=l.businessIds)||void 0===t?void 0:t.toString())),null!=l&&l.app_id&&"all"!==l.app_id&&(r="".concat(r,"&app_id=").concat(null==l?void 0:l.app_id)),null!=l&&l.franchises_id&&(null==l?void 0:l.franchises_id.length)>0&&(r="".concat(r,"&franchises_id=").concat(JSON.stringify(null==l?void 0:l.franchises_id))),"".concat(n,"?").concat(r)},Y=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(yi(yi({},d),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("orders"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,y(yi(yi({},d),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),y(yi(yi({},d),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,m(yi(yi({},v),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("sales"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,m(yi(yi({},v),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),m(yi(yi({},v),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(yi(yi({},g),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("top_selling"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,O(yi(yi({},g),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),O(yi(yi({},g),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,S(yi(yi({},j),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("top_categories"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,S(yi(yi({},j),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),S(yi(yi({},j),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,C(yi(yi({},P),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("orders_status"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,C(yi(yi({},P),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),C(yi(yi({},P),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,A(yi(yi({},x),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("users"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,A(yi(yi({},x),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),A(yi(yi({},x),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,k(yi(yi({},_),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("customer_satisfaction"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,k(yi(yi({},_),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),k(yi(yi({},_),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,L(yi(yi({},U),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("orders_accept_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,L(yi(yi({},U),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),L(yi(yi({},U),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,R(yi(yi({},F),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("arrived_pickup_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,R(yi(yi({},F),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),R(yi(yi({},F),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,z(yi(yi({},N),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("order_location"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,z(yi(yi({},N),{},s?{loading:!1,error:c}:{loading:!1,locations:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),z(yi(yi({},N),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){Y(),q(),$(),J(),V(),H(),W(),K(),X(),Z()}),[l]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,pi({},e,{filterList:l,ordersList:d,salesList:v,topProductList:g,topCategoryList:j,orderStatusList:P,registerUsersList:x,customerSatisfactionList:_,ordersAcceptSpendList:U,arrivedPickUpSpendList:F,orderLocationList:N,handleChangeFilterList:f})))};function wi(){return wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wi.apply(this,arguments)}function ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ji(Object(n),!0).forEach((function(t){Ei(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pi(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ci(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Pi(a,r,o,i,u,"next",e)}function u(e){Pi(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ii(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Oi.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Oi.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ai=function(e){var t=e.UIComponent,n=e.business,r=e.businessId,o=e.businessParams,s=Ii(rn(),1)[0],c=Ii(Object(i.useState)({business:{},loading:!1,error:null}),2),l=c[0],f=c[1],p={},d=function(){var e=Ci(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},p.business=n,e.next=4,s.businesses(t).select(o).parameters({location:"40.7539143,-73.9810162",type:1}).get({cancelToken:n});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Ci(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Si(Si({},l),{},{loading:!0})),e.next=4,d(r);case 4:t=e.sent,n=t.content.result,f(Si(Si({},l),{},{loading:!1,business:n})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),f(Si(Si({},l),{},{loading:!1,error:[e.t0]}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return n?f(Si(Si({},l),{},{business:n})):y(),function(){p.business&&p.business.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,wi({},e,{businessState:l})))};function Ti(){return Ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ti.apply(this,arguments)}function _i(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ki(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_i(a,r,o,i,u,"next",e)}function u(e){_i(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){Li(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Li(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ai.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessParams:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ai.defaultProps={businessParams:["header","logo","name","today","delivery_price","minimum","description","distance","delivery_time","pickup_time","reviews"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ri=function(e){var t=e.UIComponent,n=e.propsToFetch,r=e.isSearchByName,o=Bi(rn(),1)[0],s=Bi(Object(i.useState)(null),2),c=s[0],l=s[1],f=Bi(Br(),2)[1].showToast,p=Bi(Bn(),2)[1],d=Bi(Object(i.useState)({loading:!1,businesses:[],result:{error:null}}),2),y=d[0],h=d[1],v=new RegExp(/^[A-Za-z0-9\s]+$/g),m=function(){var e=ki(a.a.mark((function e(){var t,i,u,s,l,f,p,d,m,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Ui(Ui({},y),{},{loading:!0})),t=null,i=[],c&&(u=[],s=v.test(c),r&&u.push({attribute:"name",value:{condition:"ilike",value:s?encodeURI("%".concat(c,"%")):"%".concat(c,"%")}}),i.push({conector:"OR",conditions:u})),i.length&&(t={conditions:i,conector:"AND"}),l=t?o.businesses().asDashboard().select(n).where(t):o.businesses().asDashboard().select(n),e.next=9,l.get();case 9:f=e.sent,p=f.content,d=p.error,m=p.result,b=p.pagination,h(Ui(Ui({},y),{},d?{loading:!1,error:m}:{loading:!1,businesses:m,pagination:b})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),h(Ui(Ui({},y),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=ki(a.a.mark((function e(t,n){var r,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),e.next=4,o.businesses(parseInt(t)).save(n);case 4:r=e.sent,i=r.content,u=i.error,s=i.result,u||(c=null==y?void 0:y.businesses.map((function(e){return e.id===t?Ui(Ui({},e),{},{franchise_id:s.franchise_id}):e})),h((function(e){return Ui(Ui({},e),{},{businesses:c})})),f(Dr.Success,p("BUSINESS_UPDATED","Business updated"))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[c]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ti({},e,{searchValue:c,onSearch:l,businessList:y,handleChangeCheckBox:function(e,t,n){var r={franchise_id:n};e.target.checked||(r={franchise_id:null}),b(t,r)},handleSelectAllBusinesses:function(e,t){var n,r=[];e?(n={franchise_id:t},y.businesses.forEach((function(e){e.franchise_id!==t&&(b(e.id,n),e.franchise_id=t),r.push(e)}))):(n={franchise_id:null},y.businesses.forEach((function(e){null!==e.franchise_id&&(b(e.id,n),e.franchise_id=null),r.push(e)}))),h(Ui(Ui({},y),{},{businesses:r}))}})))};function Mi(){return Mi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mi.apply(this,arguments)}function Ni(e){return function(e){if(Array.isArray(e))return Wi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zi(e){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(e)}function Gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(n),!0).forEach((function(t){qi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $i(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ji(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$i(a,r,o,i,u,"next",e)}function u(e){$i(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Vi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Hi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hi(e,t){if(e){if("string"==typeof e)return Wi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wi(e,t):void 0}}function Wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ri.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ri.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var Ki=function(e){var t=e.UIComponent,n=e.brand,r=e.handleUpdateBrandList,o=e.brandListState,s=e.onSelectedBrand,c=Vi(rn(),1)[0],l=Vi(Bn(),2)[1],f=Vi(Br(),2)[1].showToast,p=Vi(yn(),1)[0].token,d=Vi(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),y=d[0],h=d[1],v=function(){var e=Ji(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?g():m();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Ji(a.a.mark((function e(){var t,n,i,u,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,h(Yi(Yi({},y),{},{loading:!0})),f(Dr.Info,l("LOADING","Loading")),void 0===(null==(n=Yi({},null==y?void 0:y.changes))?void 0:n.ribbon)||null!=n&&null!==(t=n.ribbon)&&void 0!==t&&t.enabled||delete n.ribbon,n)("object"===zi(n[i])&&null!==n[i]||Array.isArray(n[i]))&&(n[i]=JSON.stringify(n[i]));return u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(n)},e.next=9,fetch("".concat(c.root,"/franchises"),u);case 9:return d=e.sent,e.next=12,d.json();case 12:null!=(v=e.sent)&&v.error?h(Yi(Yi({},y),{},{changes:y.changes,result:v,loading:!1})):(h(Yi(Yi({},y),{},{changes:{},result:v,loading:!1})),r&&r([].concat(Ni(null==o?void 0:o.brands),[v.result])),s&&s(v.result),f(Dr.Success,l("BRAND_ADDED","Brand added"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),h(Yi(Yi({},y),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),b=function(e){if(h(Yi(Yi({},y),{},{changes:{},result:e,loading:!1})),r){var t=null==o?void 0:o.brands.map((function(t){return t.id===e.result.id?Yi(Yi({},t),e.result):t}));r(t)}},g=function(){var e=Ji(a.a.mark((function e(){var t,r,o,i,u,s,d,v,m,g,O,w,j,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in e.prev=0,h(Yi(Yi({},y),{},{loading:!0})),f(Dr.Info,l("LOADING","Loading")),t=Yi({},null==y?void 0:y.changes))("object"===zi(t[r])&&null!==t[r]||Array.isArray(t[r]))&&(t[r]=JSON.stringify(t[r]));return o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(t)},e.next=8,fetch("".concat(c.root,"/franchises/").concat(null==n?void 0:n.id),o);case 8:return i=e.sent,e.next=11,i.json();case 11:if(null!=(u=e.sent)&&u.error){e.next=29;break}if(void 0===(null===(s=y.changes)||void 0===s||null===(d=s.ribbon)||void 0===d?void 0:d.enabled)||null!==(v=y.changes)&&void 0!==v&&null!==(m=v.ribbon)&&void 0!==m&&m.enabled||null==u||null===(g=u.result)||void 0===g||null===(O=g.ribbon)||void 0===O||!O.enabled){e.next=25;break}return w={ribbon:JSON.stringify({enabled:!1})},j={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(w)},e.next=18,fetch("".concat(c.root,"/franchises/").concat(null==n?void 0:n.id),j);case 18:return S=e.sent,e.next=21,S.json();case 21:E=e.sent,b(E),e.next=26;break;case 25:b(u);case 26:f(Dr.Success,l("BRAND_UPDATED","Brand updated")),e.next=30;break;case 29:h(Yi(Yi({},y),{},{changes:y.changes,result:u,loading:!1}));case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(0),h(Yi(Yi({},y),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 35:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h(Yi(Yi({},y),{},{changes:{}}))}),[null==n?void 0:n.id]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Mi({},e,{brandFormState:y,handleUpdateClick:v,handleChangeInput:function(e){var t=qi({},e.target.name,e.target.value);h(Yi(Yi({},y),{},{changes:Yi(Yi({},y.changes),t)}))},handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){h(Yi(Yi({},y),{},{changes:Yi(Yi({},y.changes),{},qi({},t,n.result))}))},n.onerror=function(e){return console.log(e)}},handleChangeItem:function(e){var t=Yi(Yi({},null==y?void 0:y.changes),e);h(Yi(Yi({},y),{},{changes:t}))},handleChangeRibbon:function(e){var t,n,r=null!=y&&null!==(t=y.changes)&&void 0!==t&&t.ribbon?Yi(Yi({},null==y||null===(n=y.changes)||void 0===n?void 0:n.ribbon),e):Yi({},e),o=Yi(Yi({},null==y?void 0:y.changes),{},{ribbon:r});h(Yi(Yi({},y),{},{changes:o}))}})))};function Xi(){return Xi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xi.apply(this,arguments)}function Zi(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Qi(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Zi(a,r,o,i,u,"next",e)}function u(e){Zi(a,r,o,i,u,"throw",e)}i(void 0)}))}}function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(n),!0).forEach((function(t){nu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ru(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ou(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ou(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ou(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ki.propTypes={UIComponent:c.a.elementType,brand:c.a.object,brandListState:c.a.object,handleUpdateBrandList:c.a.func,onSelectedBrand:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ki.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var au=function(e){var t=e.UIComponent,n=ru(Bn(),2)[1],r=ru(Br(),2)[1].showToast,o=ru(Object(i.useState)(null),2),s=o[0],c=o[1],l=ru(yn(),1)[0],f=l.token,p=l.loading,d=ru(rn(),1)[0],y=ru(Object(i.useState)({loading:!1,brands:[],error:null}),2),h=y[0],v=y[1],m=ru(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),b=m[0],g=m[1],O=ru(Object(i.useState)(!1),2),w=O[0],j=O[1],S=function(e){v(tu(tu({},h),{},{brands:e}))},E=function(){var e=Qi(a.a.mark((function e(t){var o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(tu(tu({},b),{},{loading:!0})),r(Dr.Info,n("LOADING","Loading")),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(d.root,"/franchises/").concat(t),o);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(u=e.sent)&&u.error?g(tu(tu({},b),{},{result:u,loading:!1})):(g(tu(tu({},b),{},{changes:{},result:u,loading:!1})),S&&(s=null==h?void 0:h.brands.filter((function(e){return e.id!==t})),S(s)),r(Dr.Success,n("BRAND_DELETED","Brand deleted")),j(!1)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g(tu(tu({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Qi(a.a.mark((function e(t,o){var i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(tu(tu({},b),{},{loading:!0})),r(Dr.Info,n("LOADING","Loading")),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(o)},e.next=6,fetch("".concat(d.root,"/franchises/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:null!=(s=e.sent)&&s.error?g(tu(tu({},b),{},{result:s,loading:!1})):(g(tu(tu({},b),{},{changes:{},result:s,loading:!1})),S&&(c=null==h?void 0:h.brands.map((function(e){return e.id===s.result.id?tu(tu({},e),{},{name:s.result.name,logo:s.result.logo,enabled:s.result.enabled}):e})),S(c)),r(Dr.Success,n("BRAND_UPDATED","Brand updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g(tu(tu({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Qi(a.a.mark((function e(){var t,n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(tu(tu({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},n="".concat(d.root,"/franchises"),e.next=8,fetch(n,t);case 8:return r=e.sent,e.next=11,r.json();case 11:o=e.sent,i=o.error,u=o.result,v(tu(tu({},h),{},i?{loading:!1,error:u}:{loading:!1,brands:u})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),v(tu(tu({},h),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){C()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Xi({},e,{searchValue:s,onSearch:c,handleUpdateBrandList:S,brandListState:h,handleChangeState:function(e,t,n){var r=nu({},t,n);P(e,r)},brandFormState:b,handleDeleteBrand:E,openDetail:w,setOpenDetail:j})))};function iu(){return iu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iu.apply(this,arguments)}function uu(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function su(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}au.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},au.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var lu=function(e){var t,n,r=e.business,o=e.businessId,s=e.businessAttributes,c=e.onBusinessClick,l=e.handleCustomClick,f=e.UIComponent,p=su(rn(),1)[0],d=su(Object(i.useState)(r),2),y=d[0],h=d[1],v=su(Object(i.useState)(null),2),m=v[0],b=v[1],g=su(Object(i.useState)(!1),2),O=g[0],w=g[1],j=su(vr(),1)[0],S=su(Pr(),1)[0].parsePrice,E=function(){var e,t=(e=a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.businesses(o).select(s).get();case 2:t=e.sent,n=t.content.result,h(n);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){uu(a,r,o,i,u,"next",e)}function u(e){uu(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),P=function(e){var t=(null==e?void 0:e.hour)<10?"0".concat(null==e?void 0:e.hour):null==e?void 0:e.hour,n=(null==e?void 0:e.minute)<10?"0".concat(null==e?void 0:e.minute):null==e?void 0:e.minute;return e?"".concat(t,":").concat(n):"none"},C=P((null==y||null===(t=y.today)||void 0===t||null===(n=t.lapses[0])||void 0===n?void 0:n.close)||null);return Object(i.useEffect)((function(){var e=null==m?void 0:m.split(":")[0],t=null==m?void 0:m.split(":")[1],n=null==C?void 0:C.split(":")[0],r=null==C?void 0:C.split(":")[1];C&&w(e>n||e===n&&t>=r)}),[m]),Object(i.useEffect)((function(){var e=setInterval((function(){var e=(new Date).getHours(),t=(new Date).getMinutes();b("".concat(e,":").concat(t))}),1e3);return function(){return clearInterval(e)}}),[]),Object(i.useEffect)((function(){r?h(r):E()}),[]),u.a.createElement(u.a.Fragment,null,f&&u.a.createElement(f,iu({},e,{orderState:j,isBusinessClose:O,business:y,formatDate:P,formatNumber:function(e){return Math.round(100*e)/100},getBusinessOffer:function(e){if(!e||!e.length)return null;var t=null==e?void 0:e.reduce((function(e,t){return e.rate>t.rate?e:t}));return 1===(null==t?void 0:t.rate_type)?"".concat(null==t?void 0:t.rate,"%"):S(null==t?void 0:t.rate)},handleClick:l||c})))};function fu(){return fu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fu.apply(this,arguments)}function pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function du(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pu(Object(n),!0).forEach((function(t){yu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hu(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function vu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hu(a,r,o,i,u,"next",e)}function u(e){hu(a,r,o,i,u,"throw",e)}i(void 0)}))}}function mu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}lu.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessId:c.a.number,businessAttributes:c.a.arrayOf(c.a.string),onBusinessClick:c.a.func,handleCustomClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gu=function(e){var t=e.business,n=e.UIComponent,r=e.handleUpdateBusinessState,o=mu(rn(),1)[0],s=mu(yn(),1)[0],c=mu(Br(),2)[1].showToast,l=mu(Bn(),2)[1],f=mu(Object(i.useState)({loading:!1,error:null}),2),p=f[0],d=f[1],y=mu(Object(i.useState)({changes:{}}),2),h=y[0],v=y[1],m=mu(Object(i.useState)({changes:{},isCheckAll:!1,isDirty:!1}),2),b=m[0],g=m[1],O=function(){var e=vu(a.a.mark((function e(){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.businesses(t.id).save(h.changes,{accessToken:s.token});case 3:if(n=e.sent,r=n.content,i=r.error,u=r.result,i){e.next=11;break}return e.abrupt("return",u);case 11:throw{message:i};case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=vu(a.a.mark((function e(n,r){var i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},body:JSON.stringify({enabled:r})},e.next=4,fetch("".concat(o.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones/").concat(n),i);case 4:return u=e.sent,e.next=7,u.json();case 7:if((c=e.sent).error){e.next=12;break}return e.abrupt("return",c.result);case 12:throw{message:c.result};case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=vu(a.a.mark((function e(){var n,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c(Dr.Info,l("LOADING","Loading")),d({loading:!0,error:null}),!Object.keys(b.changes).length){e.next=15;break}n=a.a.mark((function e(n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=parseInt(n),(null==(i=null==t||null===(r=t.zones)||void 0===r?void 0:r.find((function(e){return e.id===o})))?void 0:i.enabled)===b.changes[n]){e.next=5;break}return e.next=5,w(o,b.changes[n]);case 5:case"end":return e.stop()}}),e)})),e.t0=a.a.keys(b.changes);case 6:if((e.t1=e.t0()).done){e.next=11;break}return o=e.t1.value,e.delegateYield(n(o),"t2",9);case 9:e.next=6;break;case 11:g(du(du({},b),{},{isDirty:!1})),i=t.zones.filter((function(e){return void 0!==b.changes[e.id]&&(e.enabled=b.changes[e.id]),!0})),u=du(du({},t),{},{zones:i}),r(u);case 15:if(!Object.keys(h.changes).length){e.next=21;break}return e.next=18,O();case 18:s=e.sent,v({changes:{}}),r(s);case 21:d({loading:!1,error:null}),c(Dr.Success,l("BUSINESS_UPDATED","Business updated")),e.next=28;break;case 25:e.prev=25,e.t3=e.catch(0),d({loading:!1,error:[e.t3.message]});case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=0;for(var t in b.changes)b.changes[t]&&(e+=1);g(du(du({},b),{},{isCheckAll:Object.keys(b.changes).length===e}))}),[b.changes]),Object(i.useEffect)((function(){var e,n=(null==t||null===(e=t.zones)||void 0===e?void 0:e.filter((function(e){return 3!==(null==e?void 0:e.type)})))||[],r={};n.forEach((function(e){r[e.id]=e.enabled})),g(du(du({},b),{},{changes:r}))}),[null==t?void 0:t.zones]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,fu({},e,{actionState:p,formState:h,zoneListState:b,handleChangeForm:function(e){v({changes:du(du({},h.changes),e)})},onDeliveryStateSave:j,handleChangeAllZoneState:function(e){var t=du({},b.changes);for(var n in t)t[n]=e;g(du(du({},b),{},{changes:t,isCheckAll:e,isDirty:!0}))},handleChangeZoneState:function(e,t){g(du(du({},b),{},{changes:du(du({},b.changes),{},yu({},e,t)),isDirty:!0}))}})))};function Ou(){return Ou=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ou.apply(this,arguments)}function wu(e){return function(e){if(Array.isArray(e))return Au(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Su(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ju(Object(n),!0).forEach((function(t){Eu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ju(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Eu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pu(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Cu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Pu(a,r,o,i,u,"next",e)}function u(e){Pu(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Iu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||xu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xu(e,t){if(e){if("string"==typeof e)return Au(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Au(e,t):void 0}}function Au(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gu.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Tu=function(e){var t=e.business,n=e.zone,r=e.UIComponent,o=e.handleSuccessUpdate,s=Iu(rn(),1)[0],c=Iu(yn(),1)[0].token,l=Iu(Br(),2)[1].showToast,f=Iu(Bn(),2)[1],p=Iu(Object(i.useState)({zone:n}),2),d=p[0],y=p[1],h=Iu(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=h[0],m=h[1],b=function(){var e=Cu(a.a.mark((function e(){var r,i,u,p,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Su({},v.changes),r=Su(Su({},r),{},{data:JSON.stringify(v.changes.data)}),l(Dr.Info,f("LOADING","Loading")),m(Su(Su({},v),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(r)},e.next=8,fetch("".concat(s.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones/").concat(n.id),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(p=e.sent).error?m(Su(Su({},v),{},{loading:!1,error:p.result})):(m(Su(Su({},v),{},{loading:!1,changes:{}})),d=t.zones.filter((function(e){return(null==e?void 0:e.id)===n.id&&Object.assign(n,p.result),!0})),y=Su(Su({},t),{},{zones:d}),o&&o(y),l(Dr.Success,f("DELIVERYZONE_SAVED","Delivery zone saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m(Su(Su({},v),{},{loading:!1,error:[e.t0.message]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var n=Cu(a.a.mark((function n(){var r,i,u,p,d,y,h;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=Su({},v.changes),i=Su(Su({},i),{},{data:JSON.stringify(v.changes.data),type:(null===(r=v.changes)||void 0===r?void 0:r.type)||2,enabled:!0,schedule:JSON.stringify([{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]}])}),l(Dr.Info,f("LOADING","Loading")),m(Su(Su({},v),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(i)},n.next=8,fetch("".concat(s.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones"),u);case 8:return p=n.sent,n.next=11,p.json();case 11:(d=n.sent).error?m(Su(Su({},v),{},{loading:!1,error:d.result})):(m(Su(Su({},v),{},{changes:{},loading:!1})),y=[].concat(wu(t.zones),[d.result]),h=Su(Su({},t),{},{zones:y}),o&&o(h),l(Dr.Success,f("DELIVERYZONE_ADDED","Delivery zone added")),e.onClose&&e.onClose()),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),m(Su(Su({},v),{},{error:n.t0.message,loading:!1}));case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(){return n.apply(this,arguments)}}(),O=function(){var r=Cu(a.a.mark((function r(){var i,u,p,d,y;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,l(Dr.Info,f("LOADING","Loading")),m(Su(Su({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},r.next=6,fetch("".concat(s.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones/").concat(n.id),i);case 6:return u=r.sent,r.next=9,u.json();case 9:(p=r.sent).error?m(Su(Su({},v),{},{loading:!1,error:p.result})):(d=t.zones.filter((function(e){return(null==e?void 0:e.id)!==n.id})),m(Su(Su({},v),{},{loading:!1})),y=Su(Su({},t),{},{zones:d}),o&&o(y),l(Dr.Success,f("DELIVERYZONE_DELETED","Business delivery zone deleted")),e.onClose&&e.onClose()),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),m(Su(Su({},v),{},{loading:!1,error:[r.t0.message]}));case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(){return r.apply(this,arguments)}}();return Object(i.useEffect)((function(){m({loading:!1,changes:{},error:null}),y({zone:n})}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Ou({},e,{zoneState:d,formState:v,handleChangeInput:function(e){m(Su(Su({},v),{},{changes:Su(Su({},v.changes),{},Eu({},e.target.name,e.target.value))}))},handleChangeFormState:function(e){m(Su(Su({},v),{},{changes:Su(Su({},v.changes),e)}))},handleDeleteBusinessDeliveryZone:O,handleUpdateBusinessDeliveryZone:b,handleAddBusinessDeliveryZone:g})))};function _u(){return _u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_u.apply(this,arguments)}function ku(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Nu(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Du(e){return function(e){if(Array.isArray(e))return zu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uu(Object(n),!0).forEach((function(t){Bu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fu(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ru(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Fu(a,r,o,i,u,"next",e)}function u(e){Fu(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Mu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Nu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nu(e,t){if(e){if("string"==typeof e)return zu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zu(e,t):void 0}}function zu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Tu.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Tu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Gu=function(e){var t=e.UIComponent,n=e.business,r=e.zone,o=e.businesses,s=e.busienssesPropsToFetch,c=e.handleUpdateBusinessDeliveryZone,l=Mu(rn(),1)[0],f=Mu(yn(),1)[0].token,p=Mu(Bn(),2)[1],d=Mu(Br(),2)[1].showToast,y=Mu(Object(i.useState)({businesses:[],loading:!1,error:null}),2),h=y[0],v=y[1],m=Mu(Object(i.useState)({loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=Mu(Object(i.useState)([]),2),w=O[0],j=O[1],S=function(){var e=Ru(a.a.mark((function e(){var t,r,o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Lu(Lu({},h),{},{loading:!0})),t=l.setAccessToken(f).businesses().select(s).asDashboard(),e.next=5,t.get();case 5:r=e.sent,o=r.content,i=o.error,u=o.result,i||(c=u.filter((function(e){return e.id!==n.id})),v(Lu(Lu({},h),{},{businesses:c,loading:!1}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v(Lu(Lu({},h),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Ru(a.a.mark((function e(){var t,o,i,u,s,y,v,m,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Lu(Lu({},b),{},{loading:!0})),t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/deliveryzones/").concat(r.id,"?jbusinesses=").concat(w),t);case 6:return o=e.sent,e.next=9,o.json();case 9:if(!e.sent.error){i=[],u=ku(w);try{for(y=function(){var e,t=s.value;i.push({id:t,name:null===(e=h.businesses.find((function(e){return e.id===t})))||void 0===e?void 0:e.name,pivot:{business_id:t,zone_id:r.id}})},u.s();!(s=u.n()).done;)y()}catch(e){u.e(e)}finally{u.f()}v=Lu(Lu({},r),{},{businesses:i}),m=n.zones.filter((function(e){return e.id===v.id&&Object.assign(e,v),!0})),O=Lu(Lu({},n),{},{zones:m}),c&&c(O),g({loading:!1,result:{error:!1}}),d(Dr.Success,p("BUSINESS_SAVED","Business saved"))}e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g({loading:!1,result:{error:!1}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?v(Lu(Lu({},h),{},{businesses:o,loading:!1})):S()}),[o]),Object(i.useEffect)((function(){if(null!=r&&r.businesses){var e,t=null===(e=r.businesses)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Du(e),[t.id])}),[]);j(t)}}),[r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_u({},e,{businessesState:h,actionState:b,selectedBusinessIds:w,handleSelectBusiness:function(e,t){if(t)j([].concat(Du(w),[e]));else{var n=w.filter((function(t){return t!==e}));j(n)}},handleSelectAllBusiness:function(e){if(e){var t,n=null===(t=h.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(Du(e),[t.id])}),[]);j(n)}else j([])},handleShareBusinesses:E})))};function Yu(){return Yu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yu.apply(this,arguments)}function qu(e){return function(e){if(Array.isArray(e))return Zu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $u(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ju(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$u(a,r,o,i,u,"next",e)}function u(e){$u(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Vu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vu(Object(n),!0).forEach((function(t){Wu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ku(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Xu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xu(e,t){if(e){if("string"==typeof e)return Zu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zu(e,t):void 0}}function Zu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Gu.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Gu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var Qu=function(e){var t=e.asDashboard,n=e.business,r=e.businessId,o=e.propsToFetch,s=e.UIComponent,c=e.handleSucessUpdateBusiness,l=e.handleSucessRemoveBusiness,f=e.handleSucessAddBusiness,p=Ku(rn(),1)[0],d=Ku(yn(),1)[0],y=Ku(Br(),2)[1].showToast,h=Ku(Bn(),2)[1],v=Ku(Object(i.useState)({business:null,loading:!0,error:null}),2),m=v[0],b=v[1],g=Ku(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=Ku(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),S=j[0],E=j[1],P=function(){var e=Ju(a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Hu(Hu({},m),{},{loading:!0})),n=t?p.setAccessToken(d.token).businesses(r).asDashboard():p.setAccessToken(d.token).businesses(r).select(o),e.next=5,n.get();case 5:i=e.sent,u=i.content.result,s=Array.isArray(u)?null:u,b(Hu(Hu({},m),{},{loading:!1,business:s})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),b(Hu(Hu({},m),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Ju(a.a.mark((function e(t){var n,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(Hu(Hu({},O),{},{loading:!0})),e.next=5,p.setAccessToken(d.token).businesses(r).save({enabled:t});case 5:n=e.sent,o=n.content,i=o.error,u=o.result,w(Hu(Hu({},O),{},{loading:!1,error:i?u:null})),i||(b(Hu(Hu({},m),{},{business:Hu(Hu({},m.business),u)})),y(Dr.Success,h("BUSINESS_UPDATED","Business updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Hu(Hu({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var t=Ju(a.a.mark((function t(){var n,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,h("LOADING","Loading")),w(Hu(Hu({},O),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},t.next=6,fetch("".concat(p.root,"/business/").concat(r),n);case 6:return o=t.sent,t.next=9,o.json();case 9:i=t.sent,w(Hu(Hu({},O),{},{loading:!1,error:i.error?i.result:null})),i.error||(y(Dr.Success,h("BUSINESS_DELETED","Business deleted")),l&&l(r),e.onClose&&e.onClose()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),w(Hu(Hu({},O),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var e=Ju(a.a.mark((function e(){var t,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(Hu(Hu({},O),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},e.next=6,fetch("".concat(p.root,"/business/").concat(r,"/duplicate"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:o=e.sent,w(Hu(Hu({},O),{},{loading:!1,error:o.error?o.result:null})),o.error||(f&&f(null==o?void 0:o.result),y(Dr.Success,h("BUSINESS_DUPLICATED","Business duplicated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),w(Hu(Hu({},O),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Ju(a.a.mark((function e(t){var n,o,i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(Hu(Hu({},O),{},{loading:!0})),e.next=5,p.setAccessToken(d.token).businesses(r).save({owners:t});case 5:n=e.sent,o=n.content,i=o.error,u=o.result,w(Hu(Hu({},O),{},{loading:!1,error:i?u:null})),i||(c=null==m||null===(s=m.business)||void 0===s?void 0:s.owners.filter((function(e){return t.includes(e.id)})),l=Hu(Hu({},null==m?void 0:m.business),{},{owners:c}),b(Hu(Hu({},m),{},{business:l})),y(Dr.Success,h("BUSINESS_OWNER_DELETED","Business owner deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Hu(Hu({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Ju(a.a.mark((function e(t,n){var o,i,u,s,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(Hu(Hu({},O),{},{loading:!0})),e.next=5,p.setAccessToken(d.token).businesses(r).save({owners:t});case 5:o=e.sent,i=o.content,u=i.error,s=i.result,w(Hu(Hu({},O),{},{loading:!1,error:u?s:null})),u||(l=[].concat(qu(null==m||null===(c=m.business)||void 0===c?void 0:c.owners),[n]),f=Hu(Hu({},null==m?void 0:m.business),{},{owners:l}),b(Hu(Hu({},m),{},{business:f})),y(Dr.Success,h("BUSINESS_OWNER_ADDED","Business owner added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Hu(Hu({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Ju(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(Hu(Hu({},S),{},{loading:!0})),y(Dr.Info,h("LOADING","Loading")),e.next=5,p.businesses(r).save(S.changes,{accessToken:d.token});case 5:t=e.sent,E(Hu(Hu({},S),{},{changes:t.content.error?S.changes:{},result:t.content,loading:!1})),t.content.error||(b(Hu(Hu({},m),{},{business:Hu(Hu({},m.business),t.content.result)})),y(Dr.Success,h("BUSINESS_UPDATED","Business updated"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),E(Hu(Hu({},S),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){null!=m&&m.business&&c&&c(null==m?void 0:m.business)}),[null==m?void 0:m.business]),Object(i.useEffect)((function(){n?b(Hu(Hu({},m),{},{loading:!1,business:n})):P()}),[r,n]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,Yu({},e,{businessState:m,formState:S,setFormState:E,cleanFormState:function(e){return E(Hu(Hu({},S),e))},handleChangeActiveBusiness:C,handleDuplicateBusiness:x,handleDeleteBusiness:I,handleDeleteBusinessOwner:A,handleAddBusinessOwner:T,handleUpdateBusinessClick:_,handleUpdateBusinessState:function(e){var t=Hu({},null==m?void 0:m.business);Object.assign(t,e),b(Hu(Hu({},m),{},{business:t}))},handleSuccessAddBusinessItem:function(e,t){var n=[].concat(qu(null==m?void 0:m.business[e]),[t]);b(Hu(Hu({},m),{},{business:Hu(Hu({},null==m?void 0:m.business),{},Wu({},e,n))}))},handleSuccessDeleteBusinessItem:function(e,t){var n=null==m?void 0:m.business[e].filter((function(e){return e.id!==t}));b(Hu(Hu({},m),{},{business:Hu(Hu({},null==m?void 0:m.business),{},Wu({},e,n))}))}})))};function es(){return es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},es.apply(this,arguments)}function ts(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ns(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ts(a,r,o,i,u,"next",e)}function u(e){ts(a,r,o,i,u,"throw",e)}i(void 0)}))}}function rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(n),!0).forEach((function(t){as(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function as(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function is(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return us(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return us(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function us(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Qu.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),businessId:c.a.oneOfType([c.a.number,c.a.string]),business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Qu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","address","alcohol","city","city_id","description","ribbon","delivery_price","distance","delivery_time","enabled","featured","food","gallery","groceries","header","laundry","logo","location","metafields","name","offers","open","owners","pickup_time","reviews","schedule","slug","types"]};var ss=function(e){var t,n,r=e.UIComponent,o=e.business,s=e.handleSuccessUpdate,c=e.handleSucessAddBusiness,l=e.handleUpdateBusinessState,f=is(rn(),1)[0],p=is(yn(),1)[0],d=is(tr(),1)[0].configs,y=is(Object(i.useState)({loading:!1,business:null,error:null}),2),h=y[0],v=y[1],m=is(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),b=m[0],g=m[1],O=is(Object(i.useState)(null),2),w=O[0],j=O[1],S=null,E=null==d||null===(t=d.google_maps_api_key)||void 0===t?void 0:t.value,P={minimum:0,delivery_price:0,tax:0,tax_type:1,service_fee:0,enabled:!0,owner_id:null==p||null===(n=p.user)||void 0===n?void 0:n.id,schedule:[{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]}]},C=function(e){v(os(os({},h),{},{business:os(os({},h.business),e.content.result)})),s&&s(e.content.result),l&&l(e.content.result)},I=function(){var e=ns(a.a.mark((function e(){var t,n,r,i,u,s,c,l,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(os(os({},b),{},{loading:!0})),t=os({},b.changes),e.next=5,f.businesses(null==o?void 0:o.id).save(t,{accessToken:p.token});case 5:if(n=e.sent,r=os({},b.changes),g(os(os({},b),{},{changes:n.content.error?b.changes:{},result:n.content,loading:!1})),n.content.error){e.next=18;break}if(void 0===(null==r||null===(i=r.ribbon)||void 0===i?void 0:i.enabled)||null!=r&&null!==(u=r.ribbon)&&void 0!==u&&u.enabled||null===(s=n.content)||void 0===s||null===(c=s.result)||void 0===c||null===(l=c.ribbon)||void 0===l||!l.enabled){e.next=17;break}return d={ribbon:{enabled:!1}},e.next=13,f.businesses(null==o?void 0:o.id).save(d,{accessToken:p.token});case 13:y=e.sent,C(y),e.next=18;break;case 17:C(n);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),g(os(os({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=ns(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(os(os({},b),{},{loading:!0})),t=os(os({},b.changes),P),e.next=5,f.businesses().save(t,{accessToken:p.token});case 5:n=e.sent,g(os(os({},b),{},{changes:n.content.error?b.changes:{},result:n.content,loading:!1})),n.content.error||(v(os(os({},h),{},{business:os(os({},h.business),n.content.result)})),c&&c(n.content.result)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g(os(os({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=ns(a.a.mark((function e(t,n){var r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Date,o=Math.floor(r.getTime()/1e3),i="https://maps.googleapis.com/maps/api/timezone/json?location=".concat(t,",").concat(n,"&timestamp=").concat(o,"&key=").concat(E),e.next=5,fetch(i,{method:"GET"});case 5:return u=e.sent,e.next=8,u.json();case 8:return s=e.sent,e.abrupt("return",null==s?void 0:s.timeZoneId);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=ns(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(null==t||null===(n=t.location)||void 0===n?void 0:n.lat,null==t||null===(r=t.location)||void 0===r?void 0:r.lng);case 2:o=e.sent,j({address:null==t?void 0:t.address,location:os(os({},null==t?void 0:t.location),{},{zipcode:null!=t&&t.zipcode?t.zipcode:-1,zoom:15}),timezone:o});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w&&g(os(os({},b),{},{changes:os(os({},null==b?void 0:b.changes),w)}))}),[w]),Object(i.useEffect)((function(){o&&v(os(os({},h),{},{business:o}))}),[o]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,es({},e,{cleanFormState:function(e){return g(os(os({},b),e))},formState:b,businessState:h,setFormState:g,handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=os(os({},n),{},as({},e.name,e.value))})):n=as({},e.target.name,e.target.value),g(os(os({},b),{},{changes:os(os({},b.changes),n)}))},handleButtonUpdateClick:I,handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){g(os(os({},b),{},{changes:os(os({},b.changes),{},as({},t,n.result))}))},n.onerror=function(e){return console.log(e)}},handleAddBusiness:x,handleChangeAddress:T,handleChangeCenter:function(e){var t;clearTimeout(S),S=setTimeout(ns(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,A(null==e?void 0:e.lat(),null==e?void 0:e.lng());case 2:t=n.sent,j({location:{lat:null==e?void 0:e.lat(),lng:null==e?void 0:e.lng(),zoom:15,zipcode:-1},timezone:t});case 4:case"end":return n.stop()}}),n)}))),200)},handleChangeSwtich:function(e,t){var n=os(os({},b.changes),{},as({},e,t));g(os(os({},b),{},{changes:n}))},handleChangeRibbon:function(e){var t,n,r=null!=b&&null!==(t=b.changes)&&void 0!==t&&t.ribbon?os(os({},null==b||null===(n=b.changes)||void 0===n?void 0:n.ribbon),e):os({},e),o=os(os({},null==b?void 0:b.changes),{},{ribbon:r});g(os(os({},b),{},{changes:o}))}})))};function cs(){return cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cs.apply(this,arguments)}function ls(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function fs(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ls(a,r,o,i,u,"next",e)}function u(e){ls(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ps(Object(n),!0).forEach((function(t){ys(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ys(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ss.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ss.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ms=function(e){var t=e.business,n=e.isVideoGallery,r=e.isImageGallery,o=e.UIComponent,s=e.handleSucessAddBusinessGallery,c=e.handleSucessDeleteBusinessGallery,l=hs(rn(),1)[0],f=hs(yn(),1)[0].token,p=hs(Br(),2)[1].showToast,d=hs(Bn(),2)[1],y=hs(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),h=y[0],v=y[1],m=hs(Object(i.useState)([]),2),b=m[0],g=m[1],O=hs(Object(i.useState)([]),2),w=O[0],j=O[1],S=function(){var e=fs(a.a.mark((function e(){var o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),v(ds(ds({},h),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(h.changes)},e.next=6,fetch("".concat(l.root,"/business/").concat(t.id,"/gallery"),o);case 6:return i=e.sent,e.next=9,i.json();case 9:u=e.sent,v(ds(ds({},h),{},{changes:u.error?h.changes:{},result:u,loading:!1})),u.error||(n&&p(Dr.Success,d("GALLERY_VIDEO_ADDED")),r&&p(Dr.Success,d("GALLERY_IMAGE_ADDED")),s&&s(u.result)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v(ds(ds({},h),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=fs(a.a.mark((function e(n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),v(ds(ds({},h),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(t.id,"/gallery/").concat(n,"?business_id=").concat(t.id),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,v(ds(ds({},h),{},{loading:!1})),i.error||(p(Dr.Success,d("GALLERY_ITEM_DELETED")),c&&c(n)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v(ds(ds({},h),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,n,r=null==t||null===(e=t.gallery)||void 0===e?void 0:e.filter((function(e){return e.file})),o=null==t||null===(n=t.gallery)||void 0===n?void 0:n.filter((function(e){return e.video}));g(r),j(o)}),[t]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,cs({},e,{businessSchedule:(null==t?void 0:t.schedule)||[],businessPhotos:b||[],businessVideos:w||[],formState:h,handlechangeImage:function(e){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){v(ds(ds({},h),{},{changes:ds(ds({},h.changes),{},{business_id:t.id,file:n.result,type:1})}))},n.onerror=function(e){return console.log(e)}},cleanFormState:function(e){return v(ds(ds({},h),e))},handleChangeBusinessVideo:function(e){v(ds(ds({},h),{},{changes:ds(ds({},h.changes),{},{business_id:null==t?void 0:t.id,type:2,video:e.target.value})}))},handleUpdateBusinessGallery:S,handleDeleteBusinessGallery:E})))};function bs(){return bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bs.apply(this,arguments)}function gs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(n),!0).forEach((function(t){ws(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ws(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function js(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ss(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Es(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Es(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Es(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ms.propTypes={UIComponent:c.a.elementType,business:c.a.object,optionToShow:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ms.defaultProps={business:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ps=function(e){var t=e.UIComponent,n=Ss(yn(),1)[0],r=n.token,o=n.loading,s=Ss(rn(),1)[0],c=Ss(Object(i.useState)({loading:!1,printers:[],error:null}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,n,i,u,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(Os(Os({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n="".concat(s.root,"/printers"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,c=u.error,p=u.result,f(Os(Os({},l),{},c?{loading:!1,error:p}:{loading:!1,printers:p})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),f(Os(Os({},l),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){js(a,r,o,i,u,"next",e)}function u(e){js(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,bs({},e,{printersListState:l})))};function Cs(){return Cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cs.apply(this,arguments)}function Is(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ps.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ps.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var As=function(e){var t=e.googleMapsControls,n=e.business,r=e.optionToShow,o=e.UIComponent,a=Is(Object(i.useState)(r),2),s=a[0],c=a[1],l=Is(Object(i.useState)([]),2),f=l[0],p=l[1],d=Is(Object(i.useState)([]),2),y=d[0],h=d[1],v=Is(Object(i.useState)({}),2),m=v[0],b=v[1];return Object(i.useEffect)((function(){var e,r,o=null==n||null===(e=n.gallery)||void 0===e?void 0:e.filter((function(e){return e.file})),a=null==n||null===(r=n.gallery)||void 0===r?void 0:r.filter((function(e){return e.video})),i={location:null==n?void 0:n.location,address:null==n?void 0:n.address,address_notes:null==n?void 0:n.address_notes,googleMapsControls:t};p(o),h(a),b(i)}),[n]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Cs({},e,{businessSchedule:(null==n?void 0:n.schedule)||[],businessPhotos:f||[],businessVideos:y||[],businessLocation:m||{},optionToShow:s,onChangeOption:function(e){c(e)}})))};function Ts(){return Ts=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ts.apply(this,arguments)}function _s(e){return function(e){if(Array.isArray(e))return Rs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ks(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ks(Object(n),!0).forEach((function(t){Us(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ks(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Us(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ls(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Fs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fs(e,t){if(e){if("string"==typeof e)return Rs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rs(e,t):void 0}}function Rs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}As.propTypes={UIComponent:c.a.elementType,business:c.a.object,optionToShow:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},As.defaultProps={business:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},Yn.a.extend($n.a);var Ms=function(e){var t=e.UIComponent,n=e.initialOrderType,r=e.initialFilterKey,o=e.initialFilterValue,s=e.isSortByReview,c=e.isSearchByName,l=e.isSearchByDescription,f=e.propsToFetch,p=e.onBusinessClick,d=Bs(Object(i.useState)({businesses:[],loading:!0,error:null}),2),y=d[0],h=d[1],v=Bs(Object(i.useState)({currentPage:0,pageSize:10,totalItems:null,totalPages:null}),2),m=v[0],b=v[1],g=Bs(Object(i.useState)(null),2),O=g[0],w=g[1],j=Bs(Object(i.useState)(""),2),S=j[0],E=j[1],P=Bs(Object(i.useState)(null),2),C=P[0],I=P[1],x=Bs(vr(),1)[0],A=Bs(rn(),1)[0],T=Bs(Object(i.useState)({}),2),_=T[0],k=T[1],D=new RegExp(/^[A-Za-z0-9\s]+$/g),U=function(){var e,t=(e=a.a.mark((function e(t){var r,o,i,u,p,d,v,g,w,j,E,P,I,T,U,L,B,F,R,M,N,z,G,Y,q,$,J,V;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Ds(Ds({},y),{},{loading:!0})),j={location:"".concat(null===(r=x.options)||void 0===r||null===(o=r.address)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.lat,",").concat(null===(u=x.options)||void 0===u||null===(p=u.address)||void 0===p||null===(d=p.location)||void 0===d?void 0:d.lng),type:n||(null===(v=x.options)||void 0===v?void 0:v.type)||1},s||(E={page:t?1:m.currentPage+1,page_size:m.pageSize},j=Ds(Ds({},j),E)),null!==(g=x.options)&&void 0!==g&&g.moment&&(a=null===(w=x.options)||void 0===w?void 0:w.moment,H="YYYY-MM-DD HH:mm:ss",Yn()(a,H).format(H)===a)&&(I=Yn.a.utc(null===(P=x.options)||void 0===P?void 0:P.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),j.timestamp=I),T=null,U=[],O&&U.push({attribute:O,value:!0}),C&&(1===(null===(L=x.options)||void 0===L?void 0:L.type)&&U.push({attribute:"delivery_time",value:{condition:"<=",value:C}}),2===(null===(B=x.options)||void 0===B?void 0:B.type)&&U.push({attribute:"pickup_time",value:{condition:"<=",value:C}})),S&&(F=[],R=D.test(S),c&&F.push({attribute:"name",value:{condition:"ilike",value:R?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),l&&F.push({attribute:"description",value:{condition:"ilike",value:R?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),U.push({conector:"OR",conditions:F})),U.length&&(T={conditions:U,conector:"AND"}),M={},_.businesses=M,k(Ds({},_)),N=T?A.businesses().select(f).parameters(j).where(T):A.businesses().select(f).parameters(j),e.next=17,N.get({cancelToken:M});case 17:z=e.sent,G=z.content,Y=G.result,q=G.pagination,s?($=Y.sort((function(e,t){return t.reviews.total-e.reviews.total})),y.businesses=$):y.businesses=t?Y:[].concat(_s(y.businesses),_s(Y)),h(Ds(Ds({},y),{},{loading:!1})),J=0,q.current_page!==q.total_pages&&(V=q.total-y.businesses.length,J=V<q.page_size?V:q.page_size),b(Ds(Ds({},m),{},{currentPage:q.current_page,totalPages:q.total_pages,totalItems:q.total,nextPageItems:J})),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&h(Ds(Ds({},y),{},{loading:!1,error:[e.t0.message]}));case 31:case"end":return e.stop()}var a,H}),e,null,[[0,28]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ls(a,r,o,i,u,"next",e)}function u(e){Ls(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=_.businesses;return function(){e&&e.cancel()}}),[_.businesses]),Object(i.useEffect)((function(){var e,t;!x.loading&&null!==(e=x.options)&&void 0!==e&&null!==(t=e.address)&&void 0!==t&&t.location&&U(!0)}),[JSON.stringify(x.options),O,S,C]),Object(i.useEffect)((function(){if(r||o)switch(r){case"category":L(o);break;case"timeLimit":F(o);break;case"search":B(o)}}),[r,o]);var L=function(e){e!==O&&(h(Ds(Ds({},y),{},{businesses:[],loading:!0})),w(e))},B=function(e){h(Ds(Ds({},y),{},!!e!=!!S?{businesses:[],loading:!0}:{loading:!1})),E(e)},F=function(e){h(Ds(Ds({},y),{},!!e!=!!C?{businesses:[],loading:!0}:{loading:!1})),I(e)};return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ts({},e,{businessesList:y,paginationProps:m,searchValue:S,timeLimitValue:C,businessTypeSelected:O,getBusinesses:U,handleChangeSearch:B,handleChangeTimeLimit:F,handleBusinessClick:function(e){p&&p(e)},handleChangeBusinessType:L})))};function Ns(){return Ns=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ns.apply(this,arguments)}function zs(e){return function(e){if(Array.isArray(e))return Ws(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gs(Object(n),!0).forEach((function(t){qs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $s(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Js(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$s(a,r,o,i,u,"next",e)}function u(e){$s(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Vs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Hs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hs(e,t){if(e){if("string"==typeof e)return Ws(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ws(e,t):void 0}}function Ws(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ms.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),onBusinessClick:c.a.func},Ms.defaultProps={propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var Ks=function(e){var t=e.UIComponent,n=e.userId,r=e.busienssesPropsToFetch,o=Vs(rn(),1)[0],s=Vs(yn(),1)[0].token,c=Vs(Bn(),2)[1],l=Vs(Br(),2)[1].showToast,f=Vs(Object(i.useState)({businesses:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=Vs(Object(i.useState)([]),2),h=y[0],v=y[1],m=Vs(Object(i.useState)({loading:!1,error:null}),2),b=m[0],g=m[1],O=function(){var e=Js(a.a.mark((function e(){var t,r,i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Ys(Ys({},b),{},{loading:!0})),t=o.setAccessToken(s).users(n).select(["businesses"]),e.next=5,t.get();case 5:r=e.sent,i=r.content,u=i.error,c=i.result,u?g({loading:!1,error:c}):(g({loading:!1,error:null}),f=null===(l=c.businesses)||void 0===l?void 0:l.reduce((function(e,t){return[].concat(zs(e),[t.id])}),[]),v(f)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Js(a.a.mark((function e(){var t,n,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Ys(Ys({},p),{},{loading:!0})),t=o.setAccessToken(s).businesses().select(r).asDashboard(),e.next=5,t.get();case 5:n=e.sent,i=n.content,u=i.error,c=i.result,u||d(Ys(Ys({},p),{},{businesses:c,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(Ys(Ys({},p),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Js(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),g({loading:!0,error:null}),e.next=5,o.setAccessToken(s).users(n).save({businesses:h});case 5:t=e.sent,r=t.content,i=r.error,u=r.result,i?g({loading:!1,error:u}):(g({loading:!1,error:null}),l(Dr.Success,c("BUSINESS_SAVED","Business saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){e.businesses?d(Ys(Ys({},p),{},{businesses:e.businesses,loading:!1})):w()}),[e.businesses]),Object(i.useEffect)((function(){O()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ns({},e,{actionState:b,businessesState:p,selectedBusinessIds:h,handleSelectBusiness:function(e,t){if(t)v([].concat(zs(h),[e]));else{var n=h.filter((function(t){return t!==e}));v(n)}},handleSelectAllBusiness:function(e){if(e){var t,n=null===(t=p.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(zs(e),[t.id])}),[]);v(n)}else v([])},handleUpdateBusinesses:j})))};function Xs(){return Xs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xs.apply(this,arguments)}function Zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(n),!0).forEach((function(t){ec(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ec(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tc(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function nc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){tc(a,r,o,i,u,"next",e)}function u(e){tc(a,r,o,i,u,"throw",e)}i(void 0)}))}}function rc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ks.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ks.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var ac=function(e){var t=e.business,n=e.UIComponent,r=e.handleSuccessBusinessMenu,o=rc(rn(),1)[0],s=rc(yn(),1)[0].token,c=rc(Bn(),2)[1],l=rc(Br(),2)[1].showToast,f=rc(Object(i.useState)({menus:[],menusShared:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=rc(Object(i.useState)(!1),2),h=y[0],v=y[1],m=rc(Object(i.useState)({sites:[],loading:!0,error:null}),2),b=m[0],g=m[1],O=function(){var e=nc(a.a.mark((function e(){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Qs(Qs({},p),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/business/").concat(t.id,"/menus"),n);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?d(Qs(Qs({},p),{},{loading:!1,error:i.result})):d(Qs(Qs({},p),{},{loading:!1,menus:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(Qs(Qs({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=nc(a.a.mark((function e(n,i){var u,f,y,v,m,b,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(Qs(Qs({},p),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({enabled:i})},f=h?"".concat(o.root,"/business/").concat(t.id,"/menus_shared/").concat(n):"".concat(o.root,"/business/").concat(t.id,"/menus/").concat(n),e.next=7,fetch(f,u);case 7:return y=e.sent,e.next=10,y.json();case 10:(v=e.sent).error?d(Qs(Qs({},p),{},{loading:!1,error:v.result})):(m={},h?(g=p.menusShared.filter((function(e){var t;e.id===n&&(e=Qs(Qs(Qs({},e),v.result),{},{id:null===(t=e)||void 0===t?void 0:t.id}));return!0})),d(Qs(Qs({},p),{},{loading:!1,menusShared:g})),m=Qs(Qs({},t),{},{menus_shared:g})):(b=p.menus.filter((function(e){return e.id===n&&Object.assign(e,v.result),!0})),d(Qs(Qs({},p),{},{loading:!1,menus:b})),m=Qs(Qs({},t),{},{menus:b})),r&&r(m),l(Dr.Success,c("MENU_SAVED","Products catalog saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(Qs(Qs({},p),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=nc(a.a.mark((function e(n){var i,u,f,y,v,m,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(Qs(Qs({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},u=h?"".concat(o.root,"/business/").concat(t.id,"/menus_shared/").concat(n):"".concat(o.root,"/business/").concat(t.id,"/menus/").concat(n),e.next=7,fetch(u,i);case 7:return f=e.sent,e.next=10,f.json();case 10:(y=e.sent).error?d(Qs(Qs({},p),{},{loading:!1,error:y.result})):(v={},h?(b=p.menusShared.filter((function(e){return e.id!==n})),d(Qs(Qs({},p),{},{loading:!1,menusShared:b})),v=Qs(Qs({},t),{},{menus_shared:b})):(m=p.menus.filter((function(e){return e.id!==n})),d(Qs(Qs({},p),{},{loading:!1,menus:m})),v=Qs(Qs({},t),{},{menus:m})),r&&r(v),l(Dr.Success,c("MENU_DELETED","Products catalog deleted"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(Qs(Qs({},p),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=nc(a.a.mark((function e(){var n,r,i,u,c,l,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=4,fetch("".concat(o.root,"/business/").concat(t.id,"/menus?params=sites"),n);case 4:return r=e.sent,e.next=7,r.json();case 7:if(i=e.sent,u=i.result,i.error){e.next=29;break}return c={},u.forEach((function(e){c=Qs(Qs({},c),{},ec({},e.id,{id:e.id,sites:e.sites}))})),e.prev=13,e.next=16,fetch("".concat(o.root,"/sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s),"x-app-x":null==o?void 0:o.appId}});case 16:return l=e.sent,e.next=19,l.json();case 19:f=e.sent,y=f.result,g(Qs(Qs({},b),{},{loading:!1,sites:y})),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(13),d(Qs(Qs({},p),{},{loading:!1,error:[e.t0.message]}));case 27:e.next=30;break;case 29:d(Qs(Qs({},p),{},{loading:!1,error:u}));case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),d(Qs(Qs({},p),{},{loading:!1,error:[e.t1.message]}));case 35:case"end":return e.stop()}}),e,null,[[0,32],[13,24]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){null!=t&&t.menus?d(Qs(Qs({},p),{},{menus:null==t?void 0:t.menus,menusShared:null==t?void 0:t.menus_shared})):O()}),[t]),Object(i.useEffect)((function(){S()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Xs({},e,{businessMenusState:p,isSelectedSharedMenus:h,sitesState:b,handleChangeBusinessMenuActiveState:w,handleDeleteBusinessMenu:j,setIsSelectedSharedMenus:v})))};function ic(){return ic=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ic.apply(this,arguments)}function uc(e){return function(e){if(Array.isArray(e))return hc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sc(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sc(a,r,o,i,u,"next",e)}function u(e){sc(a,r,o,i,u,"throw",e)}i(void 0)}))}}function lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lc(Object(n),!0).forEach((function(t){pc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||yc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yc(e,t){if(e){if("string"==typeof e)return hc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hc(e,t):void 0}}function hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ac.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ac.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var vc=function(e){var t,n=e.isSearchByName,r=e.isSearchByDescription,o=e.slug,s=e.categoryId,c=e.productId,l=e.isAllCategoryProducts,f=e.isInitialRender,p=e.ordering,d=e.UIComponent,y=dc(yn(),1)[0].token,h=dc(zn(),1)[0],v=dc(Object(i.useState)(null),2),m=v[0],b=v[1],g=dc(Object(i.useState)(null),2),O=g[0],w=g[1],j=dc(Object(i.useState)({business:{},menus:null,loading:!0,error:null}),2),S=j[0],E=j[1],P=dc(Object(i.useState)({}),2),C=P[0],I=P[1],x=dc(Object(i.useState)({}),2),A=x[0],T=x[1],_=dc(Object(i.useState)({product:null,loading:!1,error:null}),2),k=_[0],D=_[1],U=dc(Object(i.useState)({values:[]}),2),L=U[0],B=U[1],F=dc(Object(i.useState)(o),2),R=F[0],M=F[1],N=dc(Object(i.useState)(!1),2),z=N[0],G=N[1],Y=dc(Object(i.useState)({}),2),q=Y[0],$=Y[1],J=dc(Object(i.useState)({}),2),V=J[0],H=J[1],W=dc(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),K=W[0],X=W[1],Z=dc(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),Q=Z[0],ee=Z[1],te={loading:!0,pagination:{currentPage:0,pageSize:10,totalItems:null,totalPages:0,nextPageItems:10},products:[]},ne=dc(Object(i.useState)(te),2),re=ne[0],oe=ne[1],ae=dc(Object(i.useState)(null),2),ie=ae[0],ue=ae[1],se=dc(Object(i.useState)(!1),2),ce=se[0],le=se[1],fe=function(e,t){return!O||(e&&e.toLowerCase().includes(O.toLowerCase())&&n||t&&t.toLowerCase().includes(O.toLowerCase())&&r)},pe=function(){var e=cc(a.a.mark((function e(t,o,i){var u,s,c,l,f,d,y,h,v,b,g,w,j,E,P,x,_,k,D,U,L,B,F,R,M,N,G,Y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=S&&null!==(u=S.business)&&void 0!==u&&u.lazy_load_products_recommended){e.next=5;break}return s=fc(fc({},te),{},{loading:!1}),m?(uc(null==S||null===(c=S.business)||void 0===c?void 0:c.categories).forEach((function e(t){(null==t?void 0:t.id)===(null==m?void 0:m.id)&&(d=t),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),(y=null===(l=d)||void 0===l||null===(f=l.products)||void 0===f?void 0:f.filter((function(e){return fe(e.name,e.description)})))||(y=null==m||null===(h=m.products)||void 0===h?void 0:h.filter((function(e){return fe(e.name,e.description)}))),s.products=y||[]):(g=null==S||null===(v=S.business)||void 0===v||null===(b=v.categories)||void 0===b?void 0:b.reduce((function(e,t){return t.products?[].concat(uc(e),uc(t.products)):uc(e)}),[]).filter((function(e){return fe(e.name,e.description)})),s.products=g||[]),oe(fc({},s)),e.abrupt("return");case 5:return w=O?"search":"featured"===(null==m?void 0:m.id)?"featured":null!=m&&m.id?"categoryId:".concat(null==m?void 0:m.id):"all",j=C[w]||te,E=j.pagination,z||oe(fc(fc({},j),{},{loading:!0})),P={page:o||(t?1:E.currentPage+1),page_size:i||E.pageSize},null,_=[],O&&(n&&_.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}),r&&_.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}})),x={conditions:_,conector:"OR"},e.prev=14,U=null!=m&&m.id&&"featured"!==(null==m?void 0:m.id)?p.businesses(null===(k=S.business)||void 0===k?void 0:k.id).categories(null==m?void 0:m.id).products():p.businesses(null===(D=S.business)||void 0===D?void 0:D.id).products(),L={},A.products=L,T(fc({},A)),B=x.conditions.length>0?U.parameters(P).where(x):U.parameters(P),e.next=22,B.get({cancelToken:L});case 22:F=e.sent,R=F.content,M=R.error,N=R.result,G=R.pagination,M?ue(N):(Y={pagination:fc(fc({},j.pagination),{},{pageSize:0===G.page_size?j.pagination.pageSize:G.page_size,currentPage:G.current_page,totalItems:G.total,totalPages:G.total_pages}),loading:!1,products:t?uc(N):[].concat(uc(j.products),uc(N))},C[w]=Y,oe(fc({},Y)),I(fc({},C))),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(14),ue([e.t0.message]);case 33:case"end":return e.stop()}}),e,null,[[14,30]])})));return function(t,n,r){return e.apply(this,arguments)}}(),de=function(){var e=cc(a.a.mark((function e(){var t,n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s&&c&&null!==(t=S.business)&&void 0!==t&&t.id)){e.next=16;break}return e.prev=1,D(fc(fc({},k),{},{loading:!0})),r={},A.product=r,e.next=7,p.businesses(null===(n=S.business)||void 0===n?void 0:n.id).categories(s).products(c).get({cancelToken:r});case 7:o=e.sent,i=o.content.result,u=Array.isArray(i)?null:i,D(fc(fc({},k),{},{product:u,loading:!1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),D(fc(fc({},k),{},{loading:!1,error:[e.t0]}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=cc(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},X(fc(fc({},K),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/taxes"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(r=e.sent,o=r.error,i=r.result,o){e.next=14;break}return i.forEach((function(e){return t["id:".concat(null==e?void 0:e.id)]=e})),$(t),e.abrupt("return");case 14:X(fc(fc({},K),{},{result:{error:!0,result:t},loading:!1}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=cc(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},ee(fc(fc({},Q),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/fees"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(r=e.sent,o=r.error,i=r.result,o){e.next=14;break}return i.forEach((function(e){return t["id:".concat(null==e?void 0:e.id)]=e})),H(t),e.abrupt("return");case 14:ee(fc(fc({},Q),{},{result:{error:!0,result:t},loading:!1}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){f&&de()}),[JSON.stringify(null===(t=S.business)||void 0===t?void 0:t.id),f]),Object(i.useEffect)((function(){M(o)}),[o]);var ve=function(){var e=cc(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(fc(fc({},S),{},{loading:!0})),n={},A.business=n,T(fc({},A)),e.next=7,p.businesses(R).asDashboard().get();case 7:r=e.sent,null!=(o=r.content.result)&&o.categories&&0!==(null==o||null===(t=o.categories)||void 0===t?void 0:t.length)||le(!0),E(fc(fc({},S),{},{business:o,loading:!1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),E(fc(fc({},S),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),me=function(e){var t,n=e.tax,r=e.isRemove,o=(e.id,uc(null==S||null===(t=S.business)||void 0===t?void 0:t.categories));E(fc(fc({},S),{},{business:fc(fc({},S.business),{},{categories:function e(t,n){for(var o=0;o<(null==t?void 0:t.length);o++){for(var a,i=t[o],u=0;u<i.products.length;u++){var s,c,l=i.products[u];r&&(null===(s=l.tax)||void 0===s?void 0:s.id)===(null==n?void 0:n.id)?(l.tax=null,l.tax_id=null):l.tax&&(null===(c=l.tax)||void 0===c?void 0:c.id)===(null==n?void 0:n.id)&&(Object.assign(l.tax,n),l.tax_id=null==n?void 0:n.id)}(null===(a=i.subcategories)||void 0===a?void 0:a.length)>0&&(t.subcategories=e(t.subcategories,n))}return t}(o,n)})}))},be=function(e){var t,n=e.fee,r=e.isRemove,o=uc(null==S||null===(t=S.business)||void 0===t?void 0:t.categories);E(fc(fc({},S),{},{business:fc(fc({},S.business),{},{categories:function e(t,n){for(var o=0;o<(null==t?void 0:t.length);o++){for(var a,i=t[o],u=0;u<i.products.length;u++){var s,c,l=i.products[u];r&&(null===(s=l.fee)||void 0===s?void 0:s.id)===(null==n?void 0:n.id)?(l.fee=null,l.fee_id=null):l.fee&&(null===(c=l.fee)||void 0===c?void 0:c.id)===(null==n?void 0:n.id)&&(Object.assign(l.fee,n),l.fee_id=null==n?void 0:n.id)}(null===(a=i.subcategories)||void 0===a?void 0:a.length)>0&&(t.subcategories=e(t.subcategories,n))}return t}(o,n)})}))};return Object(i.useEffect)((function(){var e;if(!S.loading)if(S.loading||!m&&!l){if(null!=S&&null!==(e=S.business)&&void 0!==e&&e.categories){var t;b(null==S||null===(t=S.business)||void 0===t?void 0:t.categories[0])}}else pe(!0)}),[S]),Object(i.useEffect)((function(){null!==O&&pe(!!O)}),[O]),Object(i.useEffect)((function(){pe(!!O,1)}),[null==m?void 0:m.id]),Object(i.useEffect)((function(){R?ve():(E(fc(fc({},S),{},{loading:!1,business:{}})),I({}),oe(fc(fc({},te),{},{loading:!1})),b(null))}),[R]),Object(i.useEffect)((function(){var e;if(null!=S&&S.business)return(null===(e=Object.keys(null==S?void 0:S.business))||void 0===e?void 0:e.length)>0?(h.on("tax_changed",me),h.on("fee_changed",be),h.on("tax_deleted",me),h.on("fee_deleted",be),function(){h.off("tax_changed",me),h.off("fee_changed",be),h.off("tax_deleted",be),h.off("fee_deleted",be)}):void 0}),[null==S?void 0:S.business]),Object(i.useEffect)((function(){var e=A.business;return function(){e&&e.cancel&&e.cancel()}}),[A.business]),Object(i.useEffect)((function(){var e=A.products;return function(){e&&e.cancel&&e.cancel()}}),[A.products]),Object(i.useEffect)((function(){ye(),he()}),[]),u.a.createElement(u.a.Fragment,null,d&&u.a.createElement(d,ic({},e,{errors:ie,categorySelected:m,searchValue:O,categoryState:re,businessState:S,productModal:k,errorQuantityProducts:ce,handleChangeCategory:function(e,t){var n,r,o;null===e&&null===t&&b(null),(null==e||null===(n=e.target)||void 0===n?void 0:n.closest)&&((null==e||null===(r=e.target)||void 0===r?void 0:r.closest(".business_enable_control"))||e.target.closest(".business_actions"))||(null==t?void 0:t.id)===(null==m?void 0:m.id)||(G(!1),null!=t&&null!==(o=t.subcategories)&&void 0!==o&&o.length&&(null!=t&&t.parent_category_id||(L.values=[]),L.values.includes(null==t?void 0:t.id)?L.values=L.values.filter((function(e){return e!==(null==t?void 0:t.id)})):L.values.push(null==t?void 0:t.id),B(fc(fc({},L),{},{values:L.values}))),null===(null==t?void 0:t.id)&&B(fc(fc({},L),{},{values:[]})),b(t))},handleChangeSearch:function(e){w(e)},getPageProducts:pe,setCategorySelected:b,setBusinessState:E,handleUpdateBusinessState:function(e){G(!0);var t=fc({},null==S?void 0:S.business);Object.assign(t,e),m&&t.categories.forEach((function e(t){(null==t?void 0:t.id)===(null==m?void 0:m.id)&&b(t),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),E(fc(fc({},S),{},{business:t}))},updateProductModal:function(e){return D(fc(fc({},k),{},{product:e}))},openCategories:L.values,setOpenCategories:B,setBusinessSlug:M,handleUpdateCategoryState:function(e){oe(e)},setFormTaxState:X,formTaxState:K,taxes:q,setTaxes:$,fees:V,setFees:H})))};function mc(){return mc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mc.apply(this,arguments)}function bc(e){return function(e){if(Array.isArray(e))return Cc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gc(Object(n),!0).forEach((function(t){wc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jc(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Sc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jc(a,r,o,i,u,"next",e)}function u(e){jc(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ec(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Pc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pc(e,t){if(e){if("string"==typeof e)return Cc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cc(e,t):void 0}}function Cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vc.propTypes={UIComponent:c.a.elementType,isSearchByName:c.a.bool,isSearchByDescription:c.a.bool,slug:c.a.string,isInitialRender:c.a.bool},vc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ic=function(e){var t=e.businessId,n=e.menuId,r=e.metafields,o=e.UIComponent,s=Ec(rn(),1)[0],c=Ec(yn(),1)[0],l=Ec(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=Ec(Object(i.useState)({loading:!1,result:{error:!1}}),2),y=d[0],h=d[1],v=function(){var e=Sc(a.a.mark((function e(){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Oc(Oc({},f),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=5,fetch("".concat(s.root,"/business/").concat(t,"/menus/").concat(n,"/metafields"),r);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=i.result,p(Oc(Oc({},f),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),p(Oc(Oc({},f),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Sc(a.a.mark((function e(r){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Oc(Oc({},y),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=5,fetch("".concat(s.root,"/business/").concat(t,"/menus/").concat(n,"/metafields/").concat(r),o);case 5:e.sent.ok&&(i=f.metaFields.filter((function(e){return e.id!==r})),p(Oc(Oc({},f),{},{metaFields:i})),h({loading:!1,result:{error:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),h({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Sc(a.a.mark((function e(r){var o,i,u,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Oc(Oc({},y),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)},body:JSON.stringify(r)},e.next=5,fetch("".concat(s.root,"/business/").concat(t,"/menus/").concat(n,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,l=u.error,d=u.result,l?h({loading:!1,result:{error:!0,result:d}}):([],v=[].concat(bc(f.metaFields),[d]),p(Oc(Oc({},f),{},{metaFields:v})),h({loading:!1,result:{error:!1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),h({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?p(Oc(Oc({},f),{},{metaFields:r})):v()}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,mc({},e,{metaFieldsList:f,actionState:y,handleDeleteMetaField:m,handeAddMetaField:b})))};function xc(){return xc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xc.apply(this,arguments)}function Ac(e){return function(e){if(Array.isArray(e))return Rc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tc(e){return Tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tc(e)}function _c(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function kc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_c(a,r,o,i,u,"next",e)}function u(e){_c(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Dc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dc(Object(n),!0).forEach((function(t){Lc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Fc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fc(e,t){if(e){if("string"==typeof e)return Rc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rc(e,t):void 0}}function Rc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ic.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ic.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Mc=function(e){var t=e.business,n=e.menu,r=e.UIComponent,o=e.handleUpdateBusinessState,s=e.isSelectedSharedMenus,c=e.sitesState,l=Bc(rn(),1)[0],f=Bc(yn(),1)[0].token,p=Bc(Bn(),2)[1],d=Bc(Br(),2)[1].showToast,y=Bc(Object(i.useState)({loading:!1,error:null,menu:n||{}}),2),h=y[0],v=y[1],m=Bc(Object(i.useState)({loading:!1,changes:{},error:null}),2),b=m[0],g=m[1],O=Bc(Object(i.useState)({}),2),w=O[0],j=O[1],S=Bc(Object(i.useState)([]),2),E=S[0],P=S[1],C=Bc(Object(i.useState)([]),2),I=C[0],x=C[1],A=Bc(Object(i.useState)([]),2),T=A[0],_=A[1],k=function(){var e=kc(a.a.mark((function e(){var r,i,u,s,c,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Uc(Uc({},b),{},{loading:!0,result:{error:!1}})),r=Uc({},b.changes))("object"===Tc(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(r)},e.next=8,fetch("".concat(l.root,"/business/").concat(t.id,"/menus/").concat(null==n?void 0:n.id),u);case 8:return s=e.sent,e.next=11,s.json();case 11:c=e.sent,g(Uc(Uc({},b),{},{changes:c.error?b.changes:{},result:{error:c.error,result:c.result},loading:!1})),c.error||((y=Uc({},t)).menus.filter((function(e){e.id===c.result.id&&(Object.assign(e,c.result),void 0!==(null==r?void 0:r.products)&&(e.products=Ac(I)));return!0})),o&&o(y),d(Dr.Success,p("MENU_SAVED","Products catalog saved"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),g(Uc(Uc({},b),{},{loading:!1,result:{error:!0,result:e.t0.message}}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var n=kc(a.a.mark((function n(){var r,i,u,s,c,y,h,v,m,O;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Uc(Uc({},b),{},{loading:!0,result:{error:!1}})),null!=(r=Uc({},null==b?void 0:b.changes))&&r.products&&(r.products=JSON.stringify(null==r?void 0:r.products)),null!=r&&r.schedule)r.schedule=JSON.stringify(null==r?void 0:r.schedule);else{for(i=[],u=0;u<7;u++)i.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});r.schedule=JSON.stringify(i)}return s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(r)},n.next=9,fetch("".concat(l.root,"/business/").concat(t.id,"/menus"),s);case 9:return c=n.sent,n.next=12,c.json();case 12:y=n.sent,g(Uc(Uc({},b),{},{changes:y.error?b.changes:{},result:{error:y.error,result:y.result},loading:!1})),y.error||(h=Uc({},t),v=Uc(Uc({},y.result),{},{enabled:!0}),m=[],t.categories.forEach((function e(t){m=[].concat(Ac(m),Ac(t.products)),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),O=[],O=null!=r&&r.all_products?Ac(m):m.filter((function(e){return v.products.includes(e.id)})),v=Uc(Uc({},v),{},{products:O}),h.menus.push(v),o&&o(h),d(Dr.Success,p("MENU_ADDED","Products catalog added")),e.onClose()&&e.onClose()),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),g(Uc(Uc({},b),{},{loading:!1,result:{error:!0,result:n.t0.message}}));case 20:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(){return n.apply(this,arguments)}}(),U=function(){var r=kc(a.a.mark((function r(){var i,u,c,y,h,v,m;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Uc(Uc({},b),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},u=s?"".concat(l.root,"/business/").concat(t.id,"/menus_shared/").concat(n.id):"".concat(l.root,"/business/").concat(t.id,"/menus/").concat(n.id),r.next=7,fetch(u,i);case 7:return c=r.sent,r.next=10,c.json();case 10:(y=r.sent).error?g(Uc(Uc({},b),{},{loading:!1,error:y.result})):(g(Uc(Uc({},b),{},{loading:!1,error:null})),h=null,s?(v=t.menus_shared.filter((function(e){return e.id!==n.id})),h=Uc(Uc({},t),{},{menus_shared:v})):(m=t.menus.filter((function(e){return e.id!==n.id})),h=Uc(Uc({},t),{},{menus:m})),o&&o(h),d(Dr.Success,p("MENU_DELETED","Products catalog deleted")),e.onClose&&e.onClose()),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),g(Uc(Uc({},b),{},{loading:!1,error:r.t0}));case 17:case"end":return r.stop()}}),r,null,[[0,14]])})));return function(){return r.apply(this,arguments)}}();Object(i.useEffect)((function(){g(Uc(Uc({},b),{},{changes:Uc(Uc({},b.changes),{},{products:E})}))}),[E]),Object(i.useEffect)((function(){g(Uc(Uc({},b),{},{changes:{}})),v(Uc(Uc({},h),{},{menu:n||{}})),j({delivery:null==n?void 0:n.delivery,pickup:null==n?void 0:n.pickup,eatin:null==n?void 0:n.eatin,curbside:null==n?void 0:n.curbside,driver_thru:null==n?void 0:n.driver_thru});var e,t=[];Object.keys(n).length?(t=null===(e=n.products)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Ac(e),[t.id])}),[]),P(t),x(n.products)):(P([]),x([]),j({delivery:!0,pickup:!0,eatin:!1,curbside:!1,driver_thru:!1}),g(Uc(Uc({},b),{},{changes:{delivery:!0,pickup:!0}})));L(t)}),[n]);var L=function(e){if(null!=t&&t.categories.length){var n=[];_(n),function t(r){return(null==r?void 0:r.length)>0&&(null==r?void 0:r.forEach((function(r){var o,a,i=[],u=null===(o=r.products)||void 0===o?void 0:o.reduce((function(e,t){return[].concat(Ac(e),[t.id])}),[]);i=[].concat(Ac(i),Ac(u)),null!=r&&null!==(a=r.subcategories)&&void 0!==a&&a.length&&r.subcategories.forEach((function e(t){var n,r=null===(n=t.products)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(Ac(e),[t.id])}),[]);i=[].concat(Ac(i),Ac(r)),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),n.push({id:r.id,name:r.name,productIds:i,isChecked:0!==i.length&&i.every((function(t){return e.includes(t)}))}),t(r.subcategories)})))}(null==t?void 0:t.categories)}};return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,xc({},e,{businessMenuState:h,formState:b,selectedProductsIds:E,setSelectedProductsIds:P,selectedProducts:I,setSelectedProducts:x,handleChangeInput:function(e){var t=Lc({},e.target.name,e.target.value);g(Uc(Uc({},b),{},{changes:Uc(Uc({},b.changes),t)}))},handleCheckOrderType:function(e){g(Uc(Uc({},b),{},{changes:Uc(Uc({},b.changes),{},Lc({},e,!w[e]))})),j(Uc(Uc({},w),{},Lc({},e,!w[e])))},handleUpdateBusinessMenuOption:k,handleAddBusinessMenuOption:D,handleChangeScheduleState:function(e){g(Uc(Uc({},b),{},{changes:Uc(Uc({},b.changes),{},{schedule:e})}))},handleDeleteMenu:U,handleChangeMenuSite:function(e){var t,r=[].concat(Ac(null==n||null===(t=n.sites)||void 0===t?void 0:t.map((function(e){return e.id})).filter((function(e){var t;return!b.changes.sites||(null===(t=b.changes.sites)||void 0===t?void 0:t.includes(e))}))),Ac(b.changes.sites||[])),o=r.includes(e);g(Uc(Uc({},b),{},{changes:Uc(Uc({},b.changes),{},{sites:o?r.filter((function(t){return t!==e})):[].concat(Ac(r),[e])})}))},handleSelectAllChannels:function(){g(Uc(Uc({},b),{},{changes:Uc(Uc({},b.changes),{},{sites:null==c?void 0:c.sites.map((function(e){return e.id}))})}))},handleSelectNoneChannels:function(){g(Uc(Uc({},b),{},{changes:Uc(Uc({},b.changes),{},{sites:[]})}))},subCategoriesList:T})))};function Nc(){return Nc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nc.apply(this,arguments)}function zc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Wc(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Gc(e){return function(e){if(Array.isArray(e))return Kc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yc(Object(n),!0).forEach((function(t){$c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jc(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Vc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Jc(a,r,o,i,u,"next",e)}function u(e){Jc(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Hc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Wc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wc(e,t){if(e){if("string"==typeof e)return Kc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kc(e,t):void 0}}function Kc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Mc.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Mc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Xc=function(e){var t=e.UIComponent,n=e.business,r=e.menu,o=e.businesses,s=e.busienssesPropsToFetch,c=e.handleUpdateBusinessState,l=Hc(rn(),1)[0],f=Hc(yn(),1)[0].token,p=Hc(Bn(),2)[1],d=Hc(Br(),2)[1].showToast,y=Hc(Object(i.useState)({businesses:[],loading:!1,error:null}),2),h=y[0],v=y[1],m=Hc(Object(i.useState)({loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=Hc(Object(i.useState)([]),2),w=O[0],j=O[1],S=function(){var e=Vc(a.a.mark((function e(){var t,r,o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(qc(qc({},h),{},{loading:!0})),t=l.setAccessToken(f).businesses().select(s).asDashboard(),e.next=5,t.get();case 5:r=e.sent,o=r.content,i=o.error,u=o.result,i||(c=u.filter((function(e){return e.id!==n.id})),v(qc(qc({},h),{},{businesses:c,loading:!1}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v(qc(qc({},h),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Vc(a.a.mark((function e(){var t,o,i,u,s,f,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,p("LOADING","Loading")),g(qc(qc({},b),{},{loading:!0})),t={business_id:n.id,shared:w},e.next=6,l.businesses(n.id).menus(r.id).save(t);case 6:if(!e.sent.error){o=[],i=zc(w);try{for(s=function(){var e,t=u.value;o.push({id:t,name:null===(e=h.businesses.find((function(e){return e.id===t})))||void 0===e?void 0:e.name,pivot:{business_id:t,menu_id:r.id}})},i.s();!(u=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}f=qc(qc({},r),{},{businesses:o}),y=n.menus.filter((function(e){return e.id===f.id&&Object.assign(e,f),!0})),v=qc(qc({},n),{},{menus:y}),c&&c(v),g({loading:!1,result:{error:!1}}),d(Dr.Success,p("BUSINESS_SAVED","Business saved"))}e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g({loading:!1,result:{error:!1}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?v(qc(qc({},h),{},{businesses:o,loading:!1})):S()}),[o]),Object(i.useEffect)((function(){if(null!=r&&r.businesses){var e,t=null===(e=r.businesses)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Gc(e),[t.id])}),[]);j(t)}}),[r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Nc({},e,{businessesState:h,actionState:b,selectedBusinessIds:w,handleSelectBusiness:function(e,t){if(t)j([].concat(Gc(w),[e]));else{var n=w.filter((function(t){return t!==e}));j(n)}},handleSelectAllBusiness:function(e){if(e){var t,n=null===(t=h.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(Gc(e),[t.id])}),[]);j(n)}else j([])},handleShareBusinesses:E})))};function Zc(){return Zc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zc.apply(this,arguments)}function Qc(e){return function(e){if(Array.isArray(e))return ul(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||il(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach((function(t){nl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ol(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rl(a,r,o,i,u,"next",e)}function u(e){rl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function al(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||il(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function il(e,t){if(e){if("string"==typeof e)return ul(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ul(e,t):void 0}}function ul(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Xc.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var sl=function(e){var t=e.businessId,n=e.metafields,r=e.UIComponent,o=e.handleSuccessAddMetaFields,s=e.handleSuccessDeleteBusinessMetaFields,c=al(rn(),1)[0],l=al(yn(),1)[0],f=al(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=al(Object(i.useState)({loading:!1,result:{error:!1}}),2),h=y[0],v=y[1],m=function(){var e=ol(a.a.mark((function e(){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(tl(tl({},p),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},e.next=5,fetch("".concat(c.root,"/business/").concat(t,"/metafields"),n);case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,i=o.result,d(tl(tl({},p),{},{loading:!1,metaFields:i})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(tl(tl({},p),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=ol(a.a.mark((function e(n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(tl(tl({},h),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},e.next=5,fetch("".concat(c.root,"/business/").concat(t,"/metafields/").concat(n),r);case 5:e.sent.ok&&(o=p.metaFields.filter((function(e){return e.id!==n})),d(tl(tl({},p),{},{metaFields:o})),v({loading:!1,result:{error:!1}}),s&&s(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),v({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=ol(a.a.mark((function e(n){var r,i,u,s,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(tl(tl({},h),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)},body:JSON.stringify(n)},e.next=5,fetch("".concat(c.root,"/business/").concat(t,"/metafields"),r);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.error,f=u.result,s?v({loading:!1,result:{error:!0,result:f}}):([],y=[].concat(Qc(p.metaFields),[f]),d(tl(tl({},p),{},{metaFields:y})),v({loading:!1,result:{error:!1}}),o&&o(f)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){n?d(tl(tl({},p),{},{metaFields:n})):m()}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Zc({},e,{metaFieldsList:p,actionState:h,handleDeleteMetaField:b,handeAddMetaField:g})))};function cl(){return cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cl.apply(this,arguments)}function ll(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=bl(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function fl(e){return function(e){if(Array.isArray(e))return gl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function dl(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){pl(a,r,o,i,u,"next",e)}function u(e){pl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yl(Object(n),!0).forEach((function(t){vl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ml(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||bl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bl(e,t){if(e){if("string"==typeof e)return gl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gl(e,t):void 0}}function gl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}sl.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ol=["paypal_express","authorize"],wl=function(e){var t,n,r,o,s,c,l=e.business,f=e.UIComponent,p=e.defaultSandboxRequiredGateways,d=e.handleSuccessUpdate,y=ml(rn(),1)[0],h=ml(yn(),1)[0].token,v=ml(tr(),1)[0],m=ml(Br(),2)[1].showToast,b=ml(Bn(),2)[1],g=ml(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),O=g[0],w=g[1],j=ml(Object(i.useState)({sites:[],loading:!0,error:null}),2),S=j[0],E=j[1],P=ml(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),C=P[0],I=P[1],x=p||["paypal","stripe_direct","paypal_express","stripe_connect","stripe_redirect","carlos_payment","ivr"],A=ml(Object(i.useState)({loading:!1,result:{error:!1}}),2),T=A[0],_=A[1],k=ml(Object(i.useState)({}),2),D=k[0],U=k[1],L=ml(Object(i.useState)({}),2),B=L[0],F=L[1],R=ml(Object(i.useState)(!1),2),M=R[0],N=R[1],z="1"===(null==v||null===(t=v.configs)||void 0===t||null===(n=t.stripe_connect_sandbox)||void 0===n?void 0:n.value)?null==v||null===(r=v.configs)||void 0===r||null===(o=r.stripe_connect_client_id_sandbox)||void 0===o?void 0:o.value:null==v||null===(s=v.configs)||void 0===s||null===(c=s.stripe_connect_client_id)||void 0===c?void 0:c.value,G=function(){var e=dl(a.a.mark((function e(){var t,n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(y.root,"/business/").concat(l.id,"/paymethods?params=sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId}});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,r=n.result,e.prev=8,e.next=11,fetch("".concat(y.root,"/sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId}});case 11:return o=e.sent,e.next=14,o.json();case 14:i=e.sent,u=i.result,E(hl(hl({},S),{},{loading:!1,sites:u})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),E(hl(hl({},S),{},{loading:!1,sites:e.t0.message}));case 22:w(hl(hl({},C),{},{loading:!1,paymethods:r})),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(0),w(hl(hl({},C),{},{loading:!1,error:e.t1.message}));case 28:case"end":return e.stop()}}),e,null,[[0,25],[8,19]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=dl(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(y.root,"/paymethods?where=[{%22attribute%22:%22enabled%22,%22value%22:true}]"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r=n.result,I(hl(hl({},C),{},{loading:!1,paymethods:(o=r,o&&o.filter((function(e){return!Ol.includes(null==e?void 0:e.gateway)})))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),I(hl(hl({},C),{},{loading:!1,error:e.t0.message}));case 14:case"end":return e.stop()}var o}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=dl(a.a.mark((function e(t){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.paymethods.find((function(e){return e.id===t})),r={enabled:!0,paymethod_id:t,sandbox:x.includes(n.gateway)},e.prev=2,m(Dr.Info,b("LOADING","Loading")),_(hl(hl({},T),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId},body:JSON.stringify(r)},e.next=8,fetch("".concat(y.root,"/business/").concat(l.id,"/paymethods"),o);case 8:return i=e.sent,e.next=11,i.json();case 11:(u=e.sent).error||(w((function(e){return hl(hl({},e),{},{paymethods:[].concat(fl(e.paymethods),[hl(hl({},u.result),{},{paymethod:n})])})})),_({loading:!1,result:{error:!1}}),m(Dr.Success,b("PAYMETHOD_SAVED","Payment method saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),_({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=dl(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dr.Info,b("LOADING","Loading")),_(hl(hl({},T),{},{loading:!0})),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId},body:JSON.stringify(n)},e.next=6,fetch("".concat(y.root,"/business/").concat(l.id,"/paymethods/").concat(t),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,U(i.error?D:{}),i.error||(_(hl(hl({},T),{},{loading:!1})),w((function(e){return hl(hl({},e),{},{paymethods:e.paymethods.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0}))})})),m(Dr.Success,b("PAYMETHOD_SAVED","Payment method saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),_({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=dl(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dr.Info,b("LOADING","Loading")),_(hl(hl({},T),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId},body:JSON.stringify(D)},e.next=6,fetch("".concat(y.root,"/business/").concat(l.id),t);case 6:return n=e.sent,e.next=9,n.json();case 9:r=e.sent,U(r.error?D:{}),r.error||(_(hl(hl({},T),{},{loading:!1})),d&&d(r.result)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),_({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=dl(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.paymethods.find((function(e){return e.paymethod_id===t})).id,e.prev=1,m(Dr.Info,b("LOADING","Loading")),_(hl(hl({},T),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId}},e.next=7,fetch("".concat(y.root,"/business/").concat(l.id,"/paymethods/").concat(n),r);case 7:return o=e.sent,e.next=10,o.json();case 10:e.sent.error||(_(hl(hl({},T),{},{loading:!1})),i=O.paymethods.filter((function(e){return e.paymethod_id!==t})),w(hl(hl({},O),{},{paymethods:i})),m(Dr.Success,b("PAYMETHOD_DELETED","Payment method deleted")),N(!0)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),_({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){Y(),G()}),[]),u.a.createElement(u.a.Fragment,null,f&&u.a.createElement(f,cl({},e,{businessPaymethodsState:O,paymethodsList:C,handleClickPayment:function(e){var t=O.paymethods.find((function(t){return t.paymethod_id===e}));t?$(t.id,{enabled:!t.enabled}):q(e)},actionState:T,sitesState:S,handleDeleteBusinessPaymethodOption:V,changesState:D,handleChangeBusinessPaymentState:function(e){U(hl(hl({},D),e))},stripeConnectData:B,handleChangeStripeConnectData:function(e){F(hl(hl({},B),e))},cleanChangesState:function(e){return U(hl({},e))},handleChangeSandbox:function(){U(hl(hl({},D),{},{sandbox:!(null!=D&&D.sandbox)}))},handleChangeInput:function(e,t){U(hl(hl({},D),{},t?{data_sandbox:hl(hl({},null==D?void 0:D.data_sandbox),{},vl({},e.target.name,e.target.value))}:{data:hl(hl({},null==D?void 0:D.data),{},vl({},e.target.name,e.target.value))}))},handleSaveClick:function(e){var t,n,r,o,a=hl({},D);null!==(t=a)&&void 0!==t&&t.data&&(a=hl(hl({},a),{},{data:JSON.stringify(a.data)})),null!==(n=a)&&void 0!==n&&n.data_sandbox&&(a=hl(hl({},a),{},{data_sandbox:JSON.stringify(a.data_sandbox)})),null!==(r=a)&&void 0!==r&&r.allowed_order_types&&(a=hl(hl({},a),{},{allowed_order_types:a.allowed_order_types.length>0?JSON.stringify(a.allowed_order_types):null})),null!==(o=a)&&void 0!==o&&o.sites&&(a=hl(hl({},a),{},{sites:JSON.stringify(a.sites)})),$(e,a),J()},handleStripeConnect:function(){var e=window.open("https://connect.stripe.com/oauth/authorize?response_type=code&client_id=".concat(z,"&scope=read_write&state=").concat(h),"_blank","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,clearcache=yes"),t=setInterval((function(){e.closed?clearInterval(t):e.postMessage("data",y.url)}),200),n=null;window.addEventListener("message",(function(r){-1!==r.origin.indexOf(".ordering.co")&&(clearInterval(t),n&&clearTimeout(n),n=setTimeout((function(){if(e.postMessage("close",y.url),!r.data.error&&r.data.result){var t=r.data.result,n={sandbox:t.livemode,data:{token:t.access_token,publishable:t.stripe_publishable_key,user:t.stripe_user_id,refresh_token:t.refresh_token}};F(n)}else r.data.error&&_(hl(hl({},T),{},{loading:!1,error:r.data.error}))}),1e3))}))},handleChangeStripeInput:function(e){U(hl(hl({},D),{},vl({},e.target.name,e.target.value)))},handleStripeSave:function(e){var t,n,r={sandbox:null==B?void 0:B.sandbox,data:JSON.stringify(null==B?void 0:B.data),data_sandbox:JSON.stringify(null==B?void 0:B.data)};null!==(t=r)&&void 0!==t&&t.allowed_order_types&&(r=hl(hl({},r),{},{allowed_order_types:r.allowed_order_types.length>0?JSON.stringify(r.allowed_order_types):null})),null!==(n=r)&&void 0!==n&&n.sites&&(r=hl(hl({},r),{},{sites:JSON.stringify(r.sites)})),Object.keys(B).length&&$(e,r),J()},isSuccessDeleted:M,setIsSuccessDeleted:N,handleSelectAllPaymethods:function(){var e,t=ll(C.paymethods);try{var n=function(){var t=e.value,n=O.paymethods.find((function(e){return e.paymethod_id===t.id}));n?null!=n&&n.enabled||$(n.id,{enabled:!0}):q(t.id)};for(t.s();!(e=t.n()).done;)n()}catch(e){t.e(e)}finally{t.f()}},handleSelectNonePaymethods:function(){var e,t=ll(O.paymethods);try{for(t.s();!(e=t.n()).done;){var n=e.value;null!=n&&n.enabled&&$(n.id,{enabled:!1})}}catch(e){t.e(e)}finally{t.f()}},handleSuccessPaymethodUpdate:function(e){w(hl(hl({},O),{},{paymethods:e}))}})))};function jl(){return jl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jl.apply(this,arguments)}function Sl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function El(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Sl(a,r,o,i,u,"next",e)}function u(e){Sl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(n),!0).forEach((function(t){Il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Il(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Al(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Al(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Al(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}wl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Tl=function(e){var t=e.UIComponent,n=e.place,r=e.placeGroup,o=e.businessId,s=e.handleSuccessAddPlace,c=e.handleSuccessUpdatePlace,l=e.handleSuccessDeletePlace,f=e.handleUpdateSelectedPlace,p=xl(Bn(),2)[1],d=xl(rn(),1)[0],y=xl(yn(),1)[0].token,h=xl(Br(),2)[1].showToast,v=xl(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var t=El(a.a.mark((function t(){var n,i,u,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,p("LOADING","Loading")),b(Cl(Cl({},m),{},{loading:!0,error:null})),n=Cl(Cl({},null==m?void 0:m.changes),{},{place_group_id:null==r?void 0:r.id}),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(n)},t.next=7,fetch("".concat(d.root,"/business/").concat(o,"/places"),i);case 7:return u=t.sent,t.next=10,u.json();case 10:(c=t.sent).error?b(Cl(Cl({},m),{},{loading:!1,error:c.result})):(b(Cl(Cl({},m),{},{loading:!1,error:null})),s&&s(Cl(Cl({},c.result),{},{enabled:!0})),h(Dr.Success,p("OPTION_ADDED","Option added")),e.onClose&&e.onClose()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),b(Cl(Cl({},m),{},{loading:!1,error:t.t0.message}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var e=El(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,p("LOADING","Loading")),b(Cl(Cl({},m),{},{loading:!0,error:null})),t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=6,fetch("".concat(d.root,"/business/").concat(o,"/places/").concat(null==n?void 0:n.id),t);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?b(Cl(Cl({},m),{},{loading:!1,error:i.result})):(b(Cl(Cl({},m),{},{loading:!1,error:null,changes:{}})),f&&f(i.result),c&&c(i.result),h(Dr.Success,p("OPTION_SAVED","Option saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Cl(Cl({},m),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var t=El(a.a.mark((function t(){var r,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,p("LOADING","Loading")),b(Cl(Cl({},m),{},{loading:!0,error:null})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}},t.next=6,fetch("".concat(d.root,"/business/").concat(o,"/places/").concat(null==n?void 0:n.id),r);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?b(Cl(Cl({},m),{},{loading:!1,error:u.result})):(l&&l(null==n?void 0:n.id),h(Dr.Success,p("OPTION_DELETED","Option deleted")),b(Cl(Cl({},m),{},{loading:!1,error:null})),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(Cl(Cl({},m),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){b(Cl(Cl({},m),{},{changes:{}}))}),[null==n?void 0:n.id]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,jl({},e,{formState:m,handleChangeInput:function(e){var t=Cl(Cl({},null==m?void 0:m.changes),{},Il({},e.target.name,e.target.value));b(Cl(Cl({},m),{},{changes:t}))},handleAddPlace:g,handleUpdatePlace:O,handleDeletePlace:w})))};function _l(){return _l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_l.apply(this,arguments)}function kl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Dl(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){kl(a,r,o,i,u,"next",e)}function u(e){kl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ul(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ul(Object(n),!0).forEach((function(t){Bl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ul(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fl(e){return function(e){if(Array.isArray(e))return Nl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ml(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ml(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ml(e,t){if(e){if("string"==typeof e)return Nl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nl(e,t):void 0}}function Nl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Tl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Tl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var zl=function(e){var t=e.UIComponent,n=e.business,r=Rl(Bn(),2)[1],o=Rl(rn(),1)[0],s=Rl(yn(),1)[0].token,c=Rl(Br(),2)[1].showToast,l=Rl(Object(i.useState)({loading:!1,placeGroups:[],error:null}),2),f=l[0],p=l[1],d=Rl(Object(i.useState)({loading:!1,error:null}),2),y=d[0],h=d[1],v=function(){var e=Dl(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null==f||null===(n=f.placeGroups)||void 0===n?void 0:n.map((function(e){return(null==t?void 0:t.id)===(null==e?void 0:e.id)?Ll(Ll({},e),t):e})),p(Ll(Ll({},f),{},{placeGroups:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Dl(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Ll(Ll({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/place_groups"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?p(Ll(Ll({},f),{},{loading:!1,error:i.result})):p(Ll(Ll({},f),{},{loading:!1,placeGroups:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(Ll(Ll({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Dl(a.a.mark((function e(t,i,u){var l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,r("LOADING","Loading")),h(Ll(Ll({},y),{},{loading:!0})),l={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(i)},e.next=6,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/place_groups/").concat(t),l);case 6:return f=e.sent,e.next=9,f.json();case 9:(p=e.sent).error?h(Ll(Ll({},y),{},{loading:!1,error:p.result})):(h(Ll(Ll({},y),{},{loading:!1,error:null})),!u&&v(p.result),c(Dr.Success,r("PLACE_UPDATED","Place updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(Ll(Ll({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=!0;return f.placeGroups.forEach((function(t){t.enabled||(e=!1)})),e},O=function(){var e=Dl(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=g(),f.placeGroups.forEach((function(e){n.push(new Promise((function(t,n){t(b(e.id,{enabled:!r},!0))})))})),e.next=5,Promise.all(n);case 5:o=null==f||null===(t=f.placeGroups)||void 0===t?void 0:t.map((function(e){return Ll(Ll({},e),{},{enabled:!r})})),p(Ll(Ll({},f),{},{placeGroups:o}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){n&&m()}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_l({},e,{placeGroupList:f,handleSuccessAddPlaceGroup:function(e){var t=[].concat(Fl(f.placeGroups),[e]);p(Ll(Ll({},f),{},{placeGroups:t}))},handleSuccessUpdatePlaceGroup:v,handleSuccessDeletePlaceGroup:function(e){var t,n=null==f||null===(t=f.placeGroups)||void 0===t?void 0:t.filter((function(t){return t.id!==e}));p(Ll(Ll({},f),{},{placeGroups:n}))},handleChangeEnabled:b,handleMultiChangeEnabled:O,getMultiCheckStatus:g})))};function Gl(){return Gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gl.apply(this,arguments)}function Yl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ql(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Yl(a,r,o,i,u,"next",e)}function u(e){Yl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function $l(e){return function(e){if(Array.isArray(e))return Xl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jl(Object(n),!0).forEach((function(t){Hl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Kl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kl(e,t){if(e){if("string"==typeof e)return Xl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xl(e,t):void 0}}function Xl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}zl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},zl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Zl=function(e){var t=e.UIComponent,n=e.placeGroup,r=e.businessId,o=e.handleSuccessAddPlaceGroup,s=e.handleSuccessUpdatePlaceGroup,c=e.handleSuccessDeletePlaceGroup,l=e.handleUpdateSelectedPlaceGroup,f=Wl(Bn(),2)[1],p=Wl(rn(),1)[0],d=Wl(yn(),1)[0].token,y=Wl(Br(),2)[1].showToast,h=Wl(Object(i.useState)({loading:!1,places:[],error:null}),2),v=h[0],m=h[1],b=Wl(Object(i.useState)({loading:!1,changes:{},error:null}),2),g=b[0],O=b[1],w=Wl(Object(i.useState)({loading:!1,error:null}),2),j=w[0],S=w[1],E=function(){var e=ql(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null==v||null===(n=v.places)||void 0===n?void 0:n.map((function(e){return(null==t?void 0:t.id)===(null==e?void 0:e.id)?Vl(Vl({},e),t):e})),m(Vl(Vl({},v),{},{places:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=!0;return v.places.forEach((function(t){t.enabled||(e=!1)})),e},C=function(){var t=ql(a.a.mark((function t(){var n,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Vl(Vl({},g),{},{loading:!0,error:null})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(null==g?void 0:g.changes)},t.next=6,fetch("".concat(p.root,"/business/").concat(r,"/place_groups"),n);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?O(Vl(Vl({},g),{},{loading:!1,error:u.result})):(O(Vl(Vl({},g),{},{loading:!1,error:null})),o&&o(Vl(Vl({},u.result),{},{enabled:!0})),y(Dr.Success,f("PLACE_ADDED","Place added")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),O(Vl(Vl({},g),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),I=function(){var e=ql(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Vl(Vl({},g),{},{loading:!0,error:null})),t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(null==g?void 0:g.changes)},e.next=6,fetch("".concat(p.root,"/business/").concat(r,"/place_groups/").concat(null==n?void 0:n.id),t);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?O(Vl(Vl({},g),{},{loading:!1,error:i.result})):(O(Vl(Vl({},g),{},{loading:!1,error:null,changes:{}})),l&&l(i.result),s&&s(i.result),y(Dr.Success,f("PLACE_SAVED","Place saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O(Vl(Vl({},g),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var t=ql(a.a.mark((function t(){var o,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Vl(Vl({},g),{},{loading:!0,error:null})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},t.next=6,fetch("".concat(p.root,"/business/").concat(r,"/place_groups/").concat(null==n?void 0:n.id),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?O(Vl(Vl({},g),{},{loading:!1,error:u.result})):(c&&c(null==n?void 0:n.id),y(Dr.Success,f("PLACE_DELETED","Place deleted")),O(Vl(Vl({},g),{},{loading:!1,error:null})),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),O(Vl(Vl({},g),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var e=ql(a.a.mark((function e(){var t,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Vl(Vl({},v),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},e.next=5,fetch("".concat(p.root,"/business/").concat(r,"/places"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=null==i?void 0:i.result.filter((function(e){return e.place_group_id===(null==n?void 0:n.id)})),i.error?m(Vl(Vl({},v),{},{loading:!1,error:i.result})):m(Vl(Vl({},v),{},{loading:!1,places:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(Vl(Vl({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=ql(a.a.mark((function e(t,n,o){var i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,f("LOADING","Loading")),S(Vl(Vl({},j),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(n)},e.next=6,fetch("".concat(p.root,"/business/").concat(r,"/places/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error?S(Vl(Vl({},j),{},{loading:!1,error:s.result})):(S(Vl(Vl({},j),{},{loading:!1,error:null})),!o&&E(s.result),y(Dr.Success,f("OPTION_UPDATED","Option updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),S(Vl(Vl({},j),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),_=function(){var e=ql(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=P(),v.places.forEach((function(e){n.push(new Promise((function(t,n){t(T(e.id,{enabled:!r},!0))})))})),e.next=5,Promise.all(n);case 5:o=null==v||null===(t=v.places)||void 0===t?void 0:t.map((function(e){return Vl(Vl({},e),{},{enabled:!r})})),m(Vl(Vl({},v),{},{places:o}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){O(Vl(Vl({},g),{},{changes:{}})),n&&A()}),[null==n?void 0:n.id]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Gl({},e,{formState:g,placeList:v,handleChangeInput:function(e){var t=Vl(Vl({},null==g?void 0:g.changes),{},Hl({},e.target.name,e.target.value));O(Vl(Vl({},g),{},{changes:t}))},handleAddPlaceGroup:C,handleUpdatePlaceGroup:I,handleDeletePlaceGroup:x,handleSuccessAddPlace:function(e){var t=[].concat($l(v.places),[e]);m(Vl(Vl({},v),{},{places:t}))},handleSuccessUpdatePlace:E,handleSuccessDeletePlace:function(e){var t,n=null==v||null===(t=v.places)||void 0===t?void 0:t.filter((function(t){return t.id!==e}));m(Vl(Vl({},v),{},{places:n}))},handleChangePlaceEnabled:T,getMultiPlaceCheckStatus:P,handleMultiPlaceChangeEnabled:_})))};function Ql(){return Ql=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ql.apply(this,arguments)}function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ef(Object(n),!0).forEach((function(t){nf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ef(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rf(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function of(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return af(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return af(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function af(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Zl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var uf=function(e){var t=e.business,n=e.UIComponent,r=e.handleUpdateBusinessState,o=of(rn(),1)[0],s=of(yn(),1)[0],c=of(Br(),2)[1].showToast,l=of(Bn(),2)[1],f=of(Object(i.useState)({loading:!1,changes:{},error:null}),2),p=f[0],d=f[1],y=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(tf(tf({},p),{},{loading:!0})),c(Dr.Info,l("LOADING","Loading")),e.next=5,o.businesses(t.id).save(p.changes,{accessToken:s.token});case 5:n=e.sent,i=n.content,u=i.error,f=i.result,u?d(tf(tf({},p),{},{loading:!1,error:u})):(d(tf(tf({},p),{},{loading:!1,changes:{},error:null})),r(f),c(Dr.Success,l("BUSINESS_UPDATED","Business updated"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(tf(tf({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rf(a,r,o,i,u,"next",e)}function u(e){rf(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Ql({},e,{formState:p,handleChangeForm:function(e){d(tf(tf({},p),{},{changes:tf(tf({},p.changes),e)}))},handlePickupStateSave:y})))};function sf(){return sf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sf.apply(this,arguments)}function cf(e){return cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(e)}function lf(e){return function(e){if(Array.isArray(e))return bf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ff(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pf(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ff(a,r,o,i,u,"next",e)}function u(e){ff(a,r,o,i,u,"throw",e)}i(void 0)}))}}function df(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?df(Object(n),!0).forEach((function(t){hf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):df(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||mf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mf(e,t){if(e){if("string"==typeof e)return bf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bf(e,t):void 0}}function bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}uf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},uf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gf=function(e){var t=e.UIComponent,n=e.businessState,r=e.handleUpdateBusinessState,o=e.category,s=e.categoryId,c=e.onClose,l=e.categorySelected,f=e.setCategorySelected,p=vf(yn(),1)[0].loading,d=vf(rn(),1)[0],y=vf(Bn(),2)[1],h=vf(Br(),2)[1].showToast,v=vf(Object(i.useState)({loading:!1,changes:{enabled:!0,enabledParent:!1},result:{error:!1}}),2),m=v[0],b=v[1],g=vf(Object(i.useState)([]),2),O=g[0],w=g[1];Object(i.useEffect)((function(){b(yf(yf({},m),{},{changes:o||{}}))}),[o]);var j=function(){var e=pf(a.a.mark((function e(t){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=lf(n.business.categories)).forEach((function e(n,r,o){var a,i;(null==n?void 0:n.id)===(null==t?void 0:t.result.parent_category_id)&&(Array.isArray(null==n?void 0:n.subcategories)&&(n.subcategories.find((function(e){var n;return(null==e?void 0:e.id)===(null==t||null===(n=t.result)||void 0===n?void 0:n.id)}))||n.subcategories.push(null==t?void 0:t.result)));var u=["name","enabled","header","description","ribbon","image","slug","seo_image","seo_title","seo_description"];(null==n?void 0:n.id)===(null==t||null===(a=t.result)||void 0===a?void 0:a.id)&&n.parent_category_id===(null==t?void 0:t.result.parent_category_id)&&Object.keys(n).forEach((function(e){u.includes(e)&&void 0!==t.result[e]&&(n[e]=null==t?void 0:t.result[e])})),(null==n?void 0:n.id)===(null==t||null===(i=t.result)||void 0===i?void 0:i.id)&&n.parent_category_id!==(null==t?void 0:t.result.parent_category_id)&&o.splice(r,1),Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),o=yf(yf({},n.business),{},{categories:r}),e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=pf(a.a.mark((function e(){var t,i,u,c,l,v,g,O,w,S,P,C,I,x,A,T,_,k;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=47;break}if(t=(null==o?void 0:o.id)||s,!p){e.next=4;break}return e.abrupt("return");case 4:for(c in e.prev=4,h(Dr.Info,y("LOADING","Loading")),b(yf(yf({},m),{},{loading:!0})),u=yf({},m.changes))null===u[c]&&delete u[c];return e.next=11,d.businesses(null==n||null===(i=n.business)||void 0===i?void 0:i.id).categories(parseInt(t)).save(u);case 11:if(l=e.sent,(v=l.content).error){e.next=39;break}if(void 0===(null===(g=m.changes)||void 0===g||null===(O=g.ribbon)||void 0===O?void 0:O.enabled)||null!==(w=m.changes)&&void 0!==w&&null!==(S=w.ribbon)&&void 0!==S&&S.enabled||null==v||null===(P=v.result)||void 0===P||null===(C=P.ribbon)||void 0===C||!C.enabled){e.next=29;break}return x={ribbon:{enabled:!1}},e.next=18,d.businesses(null==n||null===(I=n.business)||void 0===I?void 0:I.id).categories(parseInt(t)).save(x);case 18:if(A=e.sent,T=A.content,b(yf(yf({},m),{},{changes:T.result,result:{error:!1,result:T.result},loading:!1})),f(T.result),!r){e.next=27;break}return e.next=25,j(T);case 25:_=e.sent,r(_);case 27:e.next=36;break;case 29:if(b(yf(yf({},m),{},{changes:v.result,result:{error:!1,result:v.result},loading:!1})),f(v.result),!r){e.next=36;break}return e.next=34,j(v);case 34:k=e.sent,r(k);case 36:h(Dr.Success,y("CATEOGORY_UPDATED","Category updated")),e.next=40;break;case 39:b(yf(yf({},m),{},{changes:m.changes,result:v,loading:!1}));case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(4),b(yf(yf({},m),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 45:e.next=48;break;case 47:E();case 48:case"end":return e.stop()}}),e,null,[[4,42]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=pf(a.a.mark((function e(){var t,o,i,u,s,l,f,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(Dr.Info,y("LOADING","Loading")),b(yf(yf({},m),{},{loading:!0})),void 0===(null==(i=yf({},null==m?void 0:m.changes))?void 0:i.ribbon)||null!=i&&null!==(t=i.ribbon)&&void 0!==t&&t.enabled||delete i.ribbon,e.next=9,d.businesses(parseInt(null==n||null===(o=n.business)||void 0===o?void 0:o.id)).categories().save(i);case 9:u=e.sent,(s=u.content).error?b(yf(yf({},m),{},{changes:m.changes,result:s,loading:!1})):((f=yf({},s.result)).parent_category_id=(null===(l=s.result)||void 0===l?void 0:l.parent_category_id)||null,b(yf(yf({},m),{},{category:{},result:{error:!1,result:f},loading:!1})),r&&(g=(null===(v=n.business)||void 0===v?void 0:v.categories)||[],null!=s&&s.result.parent_category_id?g.forEach((function e(t){(null==t?void 0:t.id)===(null==s?void 0:s.result.parent_category_id)&&t.subcategories.push(yf(yf({},f),{},{products:[],subcategories:[]})),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})):g.push(yf(yf({},f),{},{products:[],subcategories:[]})),r(yf(yf({},n.business),{},{categories:g}))),h(Dr.Success,y("CATEOGORY_CREATED","Category created")),c&&c()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),b(yf(yf({},m),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var t=pf(a.a.mark((function t(){var i,u,s,c,v,g;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,h(Dr.Info,y("LOADING","Loading")),b(yf(yf({},m),{},{loading:!0})),t.next=7,d.businesses(parseInt(null===(i=n.business)||void 0===i?void 0:i.id)).categories(parseInt(null==o?void 0:o.id)).delete();case 7:u=t.sent,s=u.content,c=s.error,v=s.result,c?b(yf(yf({},m),{},{loading:!1,result:{error:!0,result:v}})):(b(yf(yf({},m),{},{loading:!1,result:{error:!1,result:v}})),r&&((g=lf(n.business.categories)).forEach((function e(t,n,r){(null==t?void 0:t.id)===(null==o?void 0:o.id)&&r.splice(n,1),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),r(yf(yf({},n.business),{},{categories:g})),(null==o?void 0:o.id)===(null==l?void 0:l.id)&&f(g[0])),h(Dr.Success,y("CATEOGORY_DELETED","Category deleted")),e.onClose&&e.onClose(null==o?void 0:o.id)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),b(yf(yf({},m),{},{loading:!1,result:{error:!0,result:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(!n.loading&&l){var e=function e(t,n){var r,o={id:null==t?void 0:t.id,name:t.name};if(t&&"object"===cf(t))return(null==t?void 0:t.id)===n?[]:(((null==t?void 0:t.subcategories)||[]).some((function(t){return r=e(t,n)})),r&&[o].concat(lf(r)))};n.business.categories.forEach((function(t){var n=e(t,null==l?void 0:l.id);n&&w(n)}))}}),[null==n?void 0:n.loading,l]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,sf({},e,{isAddMode:!o,formState:m,setFormState:b,parentCategories:O,handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){b(yf(yf({},m),{},{changes:yf(yf({},m.changes),{},hf({},t,n.result))}))},n.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){var t=hf({},e.target.name,e.target.value);b(yf(yf({},m),{},{changes:yf(yf({},m.changes),t)}))},handleChangeCheckBox:function(e){var t=null;void 0!==e.enabled&&(t={enabled:e.enabled}),t=e.enabledParent?yf(yf({},t),{},{parent_category_id:null==l?void 0:l.id}):yf(yf({},t),{},{parent_category_id:null}),b(yf(yf({},m),{},{changes:yf(yf({},m.changes),t)}))},handleChangeItem:function(e){b(yf(yf({},m),{},{changes:yf(yf({},m.changes),e)}))},handleUpdateClick:S,handleDeleteCategory:P,handleChangeRibbon:function(e){var t,n,r=null!=m&&null!==(t=m.changes)&&void 0!==t&&t.ribbon?yf(yf({},null==m||null===(n=m.changes)||void 0===n?void 0:n.ribbon),e):yf({},e),o=yf(yf({},null==m?void 0:m.changes),{},{ribbon:r});b(yf(yf({},m),{},{changes:o}))}})))};function Of(){return Of=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Of.apply(this,arguments)}gf.propTypes={UIComponent:c.a.elementType,businessState:c.a.object,handleUpdateBusinessState:c.a.func,setIsAddProduct:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var wf=function(e){var t=e.categories,n=e.onClickCategory,r=e.UIComponent;return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Of({},e,{categories:t,handlerClickCategory:n})))};function jf(){return jf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jf.apply(this,arguments)}wf.propTypes={UIComponent:c.a.elementType,categories:c.a.arrayOf(c.a.object),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Sf=function(e){var t=e.onChangeSearch,n=e.UIComponent;return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,jf({},e,{handleChangeSearch:t})))};function Ef(){return Ef=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ef.apply(this,arguments)}function Pf(e){return function(e){if(Array.isArray(e))return Df(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||kf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cf(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function If(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Cf(a,r,o,i,u,"next",e)}function u(e){Cf(a,r,o,i,u,"throw",e)}i(void 0)}))}}function xf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Af(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xf(Object(n),!0).forEach((function(t){Tf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||kf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kf(e,t){if(e){if("string"==typeof e)return Df(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Df(e,t):void 0}}function Df(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Sf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Sf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Uf=function(e){var t,n=e.promotion,r=e.UIComponent,o=e.business,s=e.handleCloseAddForm,c=e.handleSuccessUpdate,l=_f(Bn(),2)[1],f=_f(rn(),1)[0],p=_f(yn(),1)[0].token,d=_f(Br(),2)[1].showToast,y=_f(tr(),1)[0].configs,h=null==y||null===(t=y.advanced_offers_module)||void 0===t?void 0:t.value,v=_f(Object(i.useState)({promotion:n,loading:!1,error:null}),2),m=v[0],b=v[1],g=_f(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),O=g[0],w=g[1],j=_f(Object(i.useState)(!1),2),S=j[0],E=j[1],P=function(){var e=If(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,l("LOADING","Loading")),w(Af(Af({},O),{},{result:{},loading:!0})),t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(null==O?void 0:O.changes)},e.next=6,fetch("".concat(f.root,"/business/").concat(o.id,"/offers/").concat(n.id),t);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?w(Af(Af({},O),{},{result:{error:!0,result:i.result},loading:!1})):(b(Af(Af({},m),{},{promotion:i.result})),w(Af(Af({},O),{},{loading:!1,changes:{}})),d(Dr.Success,l("PROMOTION_SAVED","Promotion saved")),c&&(u=o.offers.filter((function(e){return e.id===n.id&&Object.assign(e,i.result),!0})),c(Af(Af({},o),{},{offers:u})))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Af(Af({},O),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=If(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,l("LOADING","Loading")),w(Af(Af({},O),{},{result:{},loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(null==O?void 0:O.changes)},e.next=6,fetch("".concat(f.root,"/business/").concat(o.id,"/offers"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:(r=e.sent).error?w(Af(Af({},O),{},{result:{error:!0,result:r.result},loading:!1})):(d(Dr.Success,l("PROMOTION_ADDED","Promotion added")),s&&s(),c&&c(Af(Af({},o),{},{offers:[].concat(Pf(o.offers),[r.result])}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Af(Af({},O),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0===Object.keys(n).length?(E(!0),w(Af(Af({},O),{},h?{changes:{type:2,rate_type:2,rate:0,auto:!1,public:!0,condition_type:1,target:1,stackable:!1}}:{changes:{type:2,rate_type:2,rate:0}}))):(w(Af(Af({},O),{},{changes:{}})),E(!1)),b(Af(Af({},m),{},{promotion:n}))}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Ef({},e,{promotionState:m,formState:O,isAddMode:S,handleChangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){w(Af(Af({},O),{},{changes:Af(Af({},O.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){var t,n,r;"coupon"!==e.target.name||2!==(null==O||null===(t=O.changes)||void 0===t?void 0:t.type)&&(null!=O&&null!==(n=O.changes)&&void 0!==n&&n.type||2!==(null==m||null===(r=m.promotion)||void 0===r?void 0:r.type))?w(Af(Af({},O),{},{changes:Af(Af({},O.changes),{},Tf({},e.target.name,e.target.value))})):w(Af(Af({},O),{},{changes:Af(Af({},O.changes),{},{coupon:e.target.value.replace(/\s/g,"")})}))},handleChangeItem:function(e){w(Af(Af({},O),{},{changes:Af(Af({},O.changes),e)}))},handleUpdateClick:P,handleAddClick:C})))};function Lf(){return Lf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lf.apply(this,arguments)}function Bf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ff(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bf(Object(n),!0).forEach((function(t){Rf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mf(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Nf(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Mf(a,r,o,i,u,"next",e)}function u(e){Mf(a,r,o,i,u,"throw",e)}i(void 0)}))}}function zf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Uf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Uf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Yf=function(e){var t=e.business,n=e.businessId,r=e.promotions,o=e.UIComponent,s=e.handleSuccessUpdate,c=zf(Bn(),2)[1],l=zf(rn(),1)[0],f=zf(yn(),1)[0].token,p=zf(Br(),2)[1].showToast,d=zf(Object(i.useState)({promotions:[],loading:!1,error:null}),2),y=d[0],h=d[1],v=zf(Object(i.useState)({loading:!1,error:null}),2),m=v[0],b=v[1],g=zf(Object(i.useState)(!1),2),O=g[0],w=g[1],j=function(){var e=Nf(a.a.mark((function e(){var t,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Ff(Ff({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(l.root,"/business/").concat(n,"/offers"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(o=e.sent).error||h({promotions:o.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(Ff(Ff({},y),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Nf(a.a.mark((function e(r,o){var i,u,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,c("LOADING","Loading")),b(Ff(Ff({},m),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({enabled:r})},e.next=6,fetch("".concat(l.root,"/business/").concat(n,"/offers/").concat(o),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(d=e.sent).error||(v=y.promotions.filter((function(e){return e.id===o&&Object.assign(e,d.result),!0})),h(Ff(Ff({},y),{},{promotions:v})),p(Dr.Success,c("PROMOTION_SAVED","Promotion saved")),s&&s(Ff(Ff({},t),{},{offers:v}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Nf(a.a.mark((function e(r){var o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,c("LOADING","Loading")),b(Ff(Ff({},m),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(n,"/offers/").concat(r),o);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(u=y.promotions.filter((function(e){return e.id!==r})),h(Ff(Ff({},y),{},{promotions:u})),s&&s(Ff(Ff({},t),{},{offers:u})),p(Dr.Success,c("PROMOTION_DELETED","Promotion deleted")),w(!0)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?h(Ff(Ff({},y),{},{loading:!1,promotions:r})):j()}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Lf({},e,{promotionListState:y,handleChangePromotionActiveState:S,handleDeletePromotion:E,isSuccessDeleted:O,setIsSuccessDeleted:w})))};function qf(){return qf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qf.apply(this,arguments)}function $f(e){return function(e){if(Array.isArray(e))return Qf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Zf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jf(Object(n),!0).forEach((function(t){Hf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wf(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Kf(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Wf(a,r,o,i,u,"next",e)}function u(e){Wf(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Xf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Zf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zf(e,t){if(e){if("string"==typeof e)return Qf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qf(e,t):void 0}}function Qf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Yf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ep=function(e){var t=e.businessId,n=e.offerId,r=e.metafields,o=e.UIComponent,s=e.handleSuccessAddPromotionMetaFields,c=e.handleSuccessDeletePromotionMetaFields,l=Xf(rn(),1)[0],f=Xf(yn(),1)[0],p=Xf(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),d=p[0],y=p[1],h=Xf(Object(i.useState)({loading:!1,result:{error:!1}}),2),v=h[0],m=h[1],b=function(){var e=Kf(a.a.mark((function e(){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Vf(Vf({},d),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/offers/").concat(n,"/metafields"),r);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=i.result,y(Vf(Vf({},d),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(Vf(Vf({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Kf(a.a.mark((function e(r){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Vf(Vf({},v),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/offers/").concat(n,"/metafields/").concat(r),o);case 5:e.sent.ok&&(i=d.metaFields.filter((function(e){return e.id!==r})),y(Vf(Vf({},d),{},{metaFields:i})),m({loading:!1,result:{error:!1}}),c&&c(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Kf(a.a.mark((function e(r){var o,i,u,c,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Vf(Vf({},v),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(r)},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/offers/").concat(n,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,c=u.error,p=u.result,c?m({loading:!1,result:{error:!0,result:p}}):([],h=[].concat($f(d.metaFields),[p]),y(Vf(Vf({},d),{},{metaFields:h})),m({loading:!1,result:{error:!1}}),s&&s(p)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),m({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?y(Vf(Vf({},d),{},{metaFields:r})):b()}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,qf({},e,{metaFieldsList:d,actionState:v,handleDeleteMetaField:g,handeAddMetaField:O})))};function tp(){return tp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tp.apply(this,arguments)}function np(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function rp(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){np(a,r,o,i,u,"next",e)}function u(e){np(a,r,o,i,u,"throw",e)}i(void 0)}))}}function op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ap(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?op(Object(n),!0).forEach((function(t){ip(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):op(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ip(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function up(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ep.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ep.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cp=function(e){var t=e.businessId,n=e.reviews,r=e.UIComponent,o=up(rn(),1)[0],s=up(yn(),1)[0].token,c=up(Br(),2)[1].showToast,l=up(Bn(),2)[1],f={},p=up(Object(i.useState)({reviews:[],loading:!0,error:null}),2),d=p[0],y=p[1],h=up(Object(i.useState)(n),2),v=h[0],m=h[1],b=up(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(){var e=rp(a.a.mark((function e(){var n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={},f.reviews=r,e.next=5,o.businesses(t).select(["reviews"]).get({cancelToken:r});case 5:i=e.sent,u=i.content.result,(s=null==u||null===(n=u.reviews)||void 0===n?void 0:n.reviews).sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),m(s),y(ap(ap({},d),{},{loading:!1,reviews:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&y(ap(ap({},d),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=rp(a.a.mark((function e(n,r){var i,u,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),O(ap(ap({},g),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({enabled:r})},e.next=6,fetch("".concat(o.root,"/business/").concat(t,"/reviews/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(f=e.sent).error||(p=d.reviews.filter((function(e){return e.id===n&&Object.assign(e,f.result),!0})),y(ap(ap({},d),{},{reviews:p})),c(Dr.Success,l("REVIEW_UPDATED","Review updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return n?(n.length&&n.sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),y(ap(ap({},d),{},{loading:!1,reviews:n}))):w(),function(){f.reviews&&f.reviews.cancel()}}),[t]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,tp({},e,{reviewsList:d,actionState:g,handleClickOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="all"!==e?v.filter((function(t){return t.total>=e&&t.total<e+1})):v;y(ap(ap({},d),{},{loading:!1,reviews:t}))},handleChangeReviewEnabled:j})))};function lp(){return lp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lp.apply(this,arguments)}function fp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fp(Object(n),!0).forEach((function(t){dp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function hp(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){yp(a,r,o,i,u,"next",e)}function u(e){yp(a,r,o,i,u,"throw",e)}i(void 0)}))}}function vp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cp.propTypes={UIComponent:c.a.elementType,reviews:c.a.arrayOf(c.a.object),businessId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cp.defaultProps={reviews:[],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bp=function(e){var t=e.UIComponent,n=e.propsToFetch,r=vp(rn(),1)[0],o=vp(yn(),1)[0].token,s=vp(Br(),2)[1].showToast,c=vp(Bn(),2)[1],l=vp(Object(i.useState)({reviews:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=vp(Object(i.useState)({loading:!1,error:null}),2),y=d[0],h=d[1],v=function(){var e=hp(a.a.mark((function e(){var t,i,u,s,c,l,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(pp(pp({},f),{},{loading:!0})),e.next=4,r.setAccessToken(o).businesses().select(n).asDashboard().get();case 4:if(t=e.sent,i=t.content,u=i.error,s=i.result,!u){for(c=[],l=0;l<s.length;l++)for(d=0;d<s[l].reviews.reviews.length;d++)s[l].reviews.reviews[d].business_id=s[l].id,s[l].reviews.reviews[d].business_name=s[l].name,s[l].reviews.reviews[d].business_logo=s[l].logo,s[l].reviews.reviews[d].city_name=null===(y=s[l].city)||void 0===y?void 0:y.name,c.push(s[l].reviews.reviews[d]);c.length>0&&c.sort((function(e,t){return t.id-e.id})),p(pp(pp({},f),{},{loading:!1,reviews:c}))}e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p(pp(pp({},f),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=hp(a.a.mark((function e(t,n,i){var u,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),h(pp(pp({},y),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(i)},e.next=6,fetch("".concat(r.root,"/business/").concat(t,"/reviews/").concat(n),u);case 6:return l=e.sent,e.next=9,l.json();case 9:(d=e.sent).error||(v=f.reviews.filter((function(e){return e.id===n&&Object.assign(e,d.result),!0})),p(pp(pp({},f),{},{reviews:v})),s(Dr.Success,c("REVIEW_UPDATED","Review updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(){var e=hp(a.a.mark((function e(t,n){var i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),h(pp(pp({},y),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/business/").concat(t,"/reviews/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:e.sent.error||(l=f.reviews.filter((function(e){return e.id!==n})),p(pp(pp({},f),{},{reviews:l})),s(Dr.Success,c("REVIEW_REMOVED","Review removed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){v()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,lp({},e,{reviewsListState:f,actionState:y,handleUpdateReview:m,handleDeleteReview:b})))};function gp(){return gp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gp.apply(this,arguments)}function Op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Op(Object(n),!0).forEach((function(t){jp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Op(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ep(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bp.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bp.defaultProps={propsToFetch:["reviews","name","logo","city"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Cp=function(e){var t=e.business,n=e.UIComponent,r=e.handleSuccessUpdate,o=Ep(rn(),1)[0],s=Ep(yn(),1)[0],c=Ep(Br(),2)[1].showToast,l=Ep(Bn(),2)[1],f=Ep(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),p=f[0],d=f[1],y=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),d(wp(wp({},p),{},{loading:!0})),null!=(n=wp({},p.changes))&&n.schedule&&(n.schedule=JSON.stringify(null==n?void 0:n.schedule)),e.next=7,o.businesses(t.id).save(n,{accessToken:s.token});case 7:i=e.sent,u=i.content,f=u.error,y=u.result,f?d({changes:p.changes,result:{error:!1,result:y},loading:!1}):(d({loading:!1,changes:{},result:{error:!1}}),r&&r(y),c(Dr.Success,l("SCHEDULE_UPDATED","Schedule updated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(wp(wp({},p),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Sp(a,r,o,i,u,"next",e)}function u(e){Sp(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,gp({},e,{formState:p,handleChangeScheduleState:function(e){d(wp(wp({},p),{},{changes:{schedule:e}}))},handleUpdateSchedule:y})))};function Ip(){return Ip=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ip.apply(this,arguments)}function xp(e){return function(e){if(Array.isArray(e))return Bp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ap(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ap(Object(n),!0).forEach((function(t){_p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ap(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Dp(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){kp(a,r,o,i,u,"next",e)}function u(e){kp(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Up(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Lp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lp(e,t){if(e){if("string"==typeof e)return Bp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bp(e,t):void 0}}function Bp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Cp.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Cp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Fp=function(e){var t=e.menu,n=e.product,r=e.UIComponent,o=e.business,s=e.handleUpdateBusinessState,c=Up(rn(),1)[0],l=Up(yn(),1)[0].token,f=Up(Bn(),2)[1],p=Up(Br(),2)[1].showToast,d=Up(Object(i.useState)({loading:!1,error:null,product:n||{}}),2),y=d[0],h=d[1],v=Up(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=Up(Object(i.useState)(null),2),O=g[0],w=g[1],j=function(){var e=Dp(a.a.mark((function e(r){var i,u,d,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,f("LOADING","Loading")),b((function(e){return Tp(Tp({},e),{},{loading:!1})})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(r)},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/products/").concat(n.id),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(d=e.sent).error?b(Tp(Tp({},m),{},{loading:!1,error:d.resulut})):(h(Tp(Tp({},y),{},{product:Tp(Tp({},y.product),r)})),v=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n.id?Object.assign(e,r):e}));return e.products=xp(t),!0})),g=Tp(Tp({},o),{},{menus_shared:v}),s&&s(g),p(Dr.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Tp(Tp({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Dp(a.a.mark((function e(r,i){var u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,f("LOADING","Loading")),b(Tp(Tp({},m),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:i})},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/extras/").concat(r),u);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(Tp(Tp({},m),{},{loading:!1,error:v.resulut})):(g=y.product.extras.filter((function(e){return e.id===r&&(e.enabled=i),!0})),O=Tp(Tp({},y.product),{},{extras:g}),h(Tp(Tp({},y),{},{product:Tp(Tp({},y.product),O)})),w=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n.id?Object.assign(e,O):e}));return e.products=xp(t),!0})),j=Tp(Tp({},o),{},{menus_shared:w}),s&&s(j),p(Dr.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Tp(Tp({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Dp(a.a.mark((function e(r,i){var u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,f("LOADING","Loading")),b(Tp(Tp({},m),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:i})},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/options/").concat(r),u);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(Tp(Tp({},m),{},{loading:!1,error:v.resulut})):(g=y.product.extras.filter((function(e){var t=e.options.map((function(e){return e.id===r?Tp(Tp({},e),{},{enabled:i}):e}));return e.options=xp(t),!0})),O=Tp(Tp({},y.product),{},{extras:g}),h(Tp(Tp({},y),{},{product:Tp(Tp({},y.product),O)})),w=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n.id?Object.assign(e,O):e}));return e.products=xp(t),!0})),j=Tp(Tp({},o),{},{menus_shared:w}),s&&s(j),p(Dr.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Tp(Tp({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Dp(a.a.mark((function e(r,i){var u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,f("LOADING","Loading")),b((function(e){return Tp(Tp({},e),{},{loading:!1})})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:i})},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/suboptions/").concat(r),u);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(Tp(Tp({},m),{},{loading:!1,error:v.resulut})):(g=y.product.extras.filter((function(e){var t=e.options.filter((function(e){var t=e.suboptions.map((function(e){return e.id===r?Tp(Tp({},e),{},{enabled:i}):e}));return e.suboptions=xp(t),!0}));return e.options=xp(t),!0})),O=Tp(Tp({},y.product),{},{extras:g}),h(Tp(Tp({},y),{},{product:Tp(Tp({},y.product),O)})),w=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n.id?Object.assign(e,O):e}));return e.products=xp(t),!0})),j=Tp(Tp({},o),{},{menus_shared:w}),s&&s(j),p(Dr.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Tp(Tp({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){b(Tp(Tp({},m),{},{changes:{},error:null})),h(Tp(Tp({},y),{},{product:n||{}}))}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Ip({},e,{productState:y,formState:m,handleUpdateBusinessSharedMenuProduct:j,handleChangeInput:function(e){e.persist(),b((function(t){return Tp(Tp({},t),{},{changes:Tp(Tp({},m.changes),{},_p({},e.target.name,e.target.value))})})),clearTimeout(O),w(setTimeout((function(){j(_p({},e.target.name,e.target.value))}),750))},handleChangeItem:function(e){b((function(t){return Tp(Tp({},t),{},{changes:Tp(Tp({},m.changes),e)})})),j(e)},handleUpdateExtra:S,handleUpdateOption:E,handleUpdateSuboption:P})))};function Rp(){return Rp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rp.apply(this,arguments)}function Mp(e){return function(e){if(Array.isArray(e))return Jp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Np(Object(n),!0).forEach((function(t){Gp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Np(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function qp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||$p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $p(e,t){if(e){if("string"==typeof e)return Jp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jp(e,t):void 0}}function Jp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Fp.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Fp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Vp=function(e){var t=e.menu,n=e.UIComponent,r=e.business,o=e.handleUpdateBusinessState,s=qp(rn(),1)[0],c=qp(yn(),1)[0].token,l=qp(Bn(),2)[1],f=qp(Br(),2)[1].showToast,p=qp(Object(i.useState)({loading:!1,error:null,menu:t||{}}),2),d=p[0],y=p[1],h=qp(Object(i.useState)({loading:!1,error:null}),2),v=h[0],m=h[1],b=function(){var e,n=(e=a.a.mark((function e(n,i){var u,p,d,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,l("LOADING","Loading")),m(zp(zp({},v),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(i)},e.next=6,fetch("".concat(s.root,"/business/").concat(r.id,"/menus_shared/").concat(t.id,"/products/").concat(n),u);case 6:return p=e.sent,e.next=9,p.json();case 9:(d=e.sent).error?m({loading:!1,error:d.resulut}):(y=r.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n?zp(zp({},e),i):e}));return e.products=Mp(t),!0})),h=zp(zp({},r),{},{menus_shared:y}),o&&o(h),f(Dr.Success,l("PRODUCT_SAVED","Product saved")),m({loading:!1,error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Yp(a,r,o,i,u,"next",e)}function u(e){Yp(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){y(zp(zp({},d),{},{menu:t||{}}))}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Rp({},e,{menuState:d,actionState:v,handleUpdateBusinessSharedMenuProduct:b})))};function Hp(){return Hp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hp.apply(this,arguments)}function Wp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Vp.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Vp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Xp=function(e){var t=e.orderType,n=e.sortOptions,r=e.defaultSortOption,o=e.onChangeSortOption,a=e.UIComponent,s=Wp(Object(i.useState)(r),2),c=s[0],l=s[1],f=Wp(Object(i.useState)(n),2),p=f[0],d=f[1];return Object(i.useEffect)((function(){var e="delivery_time"===t?"Pickup time":"Delivery time";d(n.filter((function(t){return t!==e})))}),[t]),u.a.createElement(u.a.Fragment,null,a&&u.a.createElement(a,Hp({},e,{orderType:t,sortOptions:p,currentOptionSelected:c,onChangeSortOption:function(e){l(e),o&&o(e)}})))};function Zp(){return Zp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zp.apply(this,arguments)}function Qp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ed(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Qp(a,r,o,i,u,"next",e)}function u(e){Qp(a,r,o,i,u,"throw",e)}i(void 0)}))}}function td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?td(Object(n),!0).forEach((function(t){rd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function od(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=id(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function ad(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||id(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function id(e,t){if(e){if("string"==typeof e)return ud(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ud(e,t):void 0}}function ud(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Xp.propTypes={UIComponent:c.a.elementType,sortOptions:c.a.arrayOf(c.a.string),defaultSortOption:c.a.string,orderType:c.a.number,onChangeSortOption:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var sd=function(e){var t=e.UIComponent,n=e.categoryState,r=e.business,o=e.handleUpdateBusinessState,s=e.categoryId,c=e.categorySelected,l=ad(Bn(),2)[1],f=ad(rn(),1)[0],p=ad(Br(),2)[1].showToast,d=ad(yn(),1)[0],y=d.token,h=d.loading,v=ad(Pr(),1)[0].parsePrice,m=ad(Object(i.useState)({products:null,loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=ad(Object(i.useState)(!1),2),w=O[0],j=O[1],S=ad(Object(i.useState)(!1),2),E=S[0],P=S[1],C=ad(Object(i.useState)({row:-1,col:-1}),2),I=C[0],x=C[1],A="".concat(r.tax,"% ").concat(1===r.tax_type?l("INCLUDED_ON_PRICE","Included on price"):l("NOT_INCLUDED_ON_PRICE","Not included on price")),T="".concat(v(0)," + ").concat(r.service_fee,"%"),_=function(){var e=ed(a.a.mark((function e(t,n,r){var o,i,u,s,c,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Dr.Info,l("LOADING","Loading")),g(nd(nd({},b),{},{loading:!0})),o={method:n?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify({products:JSON.stringify(t)})},i="".concat(f.root,"/bulks/products"),e.next=9,fetch(i,o);case 9:return u=e.sent,e.next=12,u.json();case 12:s=e.sent,c=s.error,d=s.result,c?g(nd(nd({},b),{},{loading:!1,result:{error:!0,result:d}})):(g(nd(nd({},b),{},{loading:!1,result:{error:!1,result:n?l("PRODUCT_CREATED","Product created"):l("PRODUCT_UPDATE","Product updated")}})),p(Dr.Success,n?l("PRODUCT_CREATED","Product created"):l("PRODUCT_UPDATE","Product updated")),k()),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),g(nd(nd({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,n,r){return e.apply(this,arguments)}}(),k=function(){var e=ed(a.a.mark((function e(){var t,n,i,u,p,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=s||c.id,n={business_id:null==r?void 0:r.id,category_id:parseInt(t)},e.next=7,f.businesses(null==r?void 0:r.id).categories(parseInt(t)).products().parameters(n).get();case 7:i=e.sent,u=i.content,p=u.error,d=u.result,p?g(nd(nd({},b),{},{loading:!1,result:{error:!0,result:d}})):(o&&(y=null==r?void 0:r.categories.map((function(e){return parseInt(e.id)===parseInt(t)?nd(nd({},e),{},{products:d}):e})),o(nd(nd({},r),{},{categories:y}))),g(nd(nd({},b),{},{products:d.map((function(e){var t,n,o,a;return nd(nd({},e),{},{taxShow:null!=e&&e.tax?"".concat(null===(t=e.tax)||void 0===t?void 0:t.rate,"% ").concat(1===(null===(n=r.tax)||void 0===n?void 0:n.type)?l("INCLUDED_ON_PRICE","Included on price"):l("NOT_INCLUDED_ON_PRICE","Not included on price")):A,feeShow:null!=e&&e.fee?"".concat(v(null===(o=e.fee)||void 0===o?void 0:o.fixed)," + ").concat(null===(a=e.fee)||void 0===a?void 0:a.percentage,"%"):T})})),loading:!1,result:{error:!1,result:l("PRODUCT_SAVED","Product saved")}}))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),g(nd(nd({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=ed(a.a.mark((function e(t){var n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Dr.Info,l("LOADING","Loading")),g(nd(nd({},b),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify({products:JSON.stringify(t)})},r="".concat(f.root,"/bulks/products"),e.next=9,fetch(r,n);case 9:return o=e.sent,e.next=12,o.json();case 12:i=e.sent,u=i.error,s=i.result,u?g(nd(nd({},b),{},{loading:!1,result:{error:!0,result:s}})):(g(nd(nd({},b),{},{loading:!1,result:{error:!1,result:l("PRODUCT_DELETED","Product deleted")}})),p(Dr.Success,l("PRODUCT_DELETED","Product deleted")),k()),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),g(nd(nd({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t=[],o=od(n.products);try{for(o.s();!(e=o.n()).done;){var a,i,u,s,c=e.value,f=null!=c&&c.tax?"".concat(null===(a=c.tax)||void 0===a?void 0:a.rate,"% ").concat(1===(null===(i=r.tax)||void 0===i?void 0:i.type)?l("INCLUDED_ON_PRICE","Included on price"):l("NOT_INCLUDED_ON_PRICE","Not included on price")):A,p=c.fee?"".concat(v(null===(u=c.fee)||void 0===u?void 0:u.fixed)," + ").concat(null===(s=c.fee)||void 0===s?void 0:s.percentage,"%"):T,d=nd(nd({},c),{},{taxShow:f,feeShow:p});t.push(d)}}catch(e){o.e(e)}finally{o.f()}g(nd(nd({},b),{},{products:t}))}),[null==n?void 0:n.products]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Zp({},e,{handleItemChange:function(e,t,n){if(E)P(!1);else if("loadData"!==t){e=e||[];var o=[],a=[],i=[],u=[],f=s||(null==c?void 0:c.id);e.forEach((function(e){var t={name:!1,price:!1};if(e[2]!==e[3]){for(var s=!0,c=0;c<o.length;c++)if(o[c]===e[0]){s=!1;break}if(s){o.push(e[0]);var p=n.getSourceDataAtRow(e[0]);if(n.validateRows(o,(function(e){})),!p.name&&(p.price||p.quantity||p.description)&&(t.name=!0,g(nd(nd({},b),{},{result:{error:!0,result:[l("NAME_REQUIRED","Name Required")]}}))),p.price&&"number"!=typeof p.price){var d=parseFloat(p.price);d?p.price=d:(t.price=!0,g(nd(nd({},b),{},{result:{error:!0,result:[l("PRODUCT_PRICE_NUMBER")]}})))}if(p.quantity&&"number"!=typeof p.quantity&&"NA"!==p.quantity){var y=parseFloat(p.quantity);y?p.quantity=y:t.quantity=!0}if(p.id)if(p.name||p.price||p.description){if(!(t.price||t.name||t.quantity)){p.description||(p.description=null);var h={id:p.id,name:p.name,description:p.description?p.description:"",price:p.price?p.price:0,inventoried:(null==p?void 0:p.inventoried)||!1,category_id:f,business_id:null==r?void 0:r.id};void 0!==(null==p?void 0:p.offer_price)&&(h.offer_price=p.offer_price),void 0!==(null==p?void 0:p.cost_price)&&(h.cost_price=p.cost_price),(p.quantity&&"NA"!==p.quantity||0===p.quantity)&&(h.quantity=p.quantity),i.push(h)}}else p.row=e[0],a.push(p);else if(!(t.price||t.name||t.quantity)){var v={name:p.name,description:p.description?p.description:"",price:p.price?p.price:0,cost_price:(null==p?void 0:p.cost_price)||0,category_id:f,business_id:null==r?void 0:r.id};(p.quantity&&"NA"!==p.quantity||0===p.quantity)&&(v.quantity=p.quantity,v.inventoried=!0),u.push(v)}}}})),u.length>0&&_(u,!0,n),i.length>0&&_(i,!1,n),a.length>0&&(n.alter("remove_row",a[0].row,a.length),j(!0))}},spreadSheetState:b,handleRowRemove:function(e,t,n,r){if(r){var o,a=[],i=od(n);try{for(i.s();!(o=i.n()).done;){var u=o.value;a.push(null==r?void 0:r.getSourceDataAtRow(u).id)}}catch(e){i.e(e)}finally{i.f()}w&&j(!1),setTimeout((function(){D(a)}),1)}},handleAfterSectionEnd:function(e,t,n,r,o){I.row===e&&I.col===t||e!==n||t!==r||(I.row=e,I.col=t,x({row:e,col:t}),o.deselectCell(),o.selectCell(e,t))},handleoutsideClickDeselects:function(){return x({row:-1,col:-1}),!1}})))};function cd(){return cd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cd.apply(this,arguments)}function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ld(Object(n),!0).forEach((function(t){pd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dd(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function yd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}sd.propTypes={UIComponent:c.a.elementType,businessState:c.a.object,setBusinessState:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sd.defaultProps={};var vd=function(e){var t=e.businessTypes,n=e.onChangeBusinessType,r=e.defaultBusinessType,o=e.UIComponent,s=yd(rn(),1)[0],c=yd(Object(i.useState)(r),2),l=c[0],f=c[1],p=yd(Object(i.useState)({loading:!0,error:null,types:[],pagination:null}),2),d=p[0],y=p[1],h=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s.root,'/business_types?where=[{"attribute":"enabled","value":true}]'),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,r=n.error,o=n.result,i=n.pagination,r){e.next=14;break}return o.length>0&&o.unshift({id:null,enabled:!0,image:null,name:"All"}),y(fd(fd({},d),{},{loading:!1,types:o,pagination:i})),e.abrupt("return");case 14:y(fd(fd({},d),{},{loading:!1,error:o})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),y(fd(fd({},d),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){dd(a,r,o,i,u,"next",e)}function u(e){dd(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){t?y(fd(fd({},d),{},{loading:!1,types:t})):h()}),[t]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,cd({},e,{typesState:d,businessTypes:t,currentTypeSelected:l,handleChangeBusinessType:function(e){f(e),n(e)}})))};function md(){return md=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},md.apply(this,arguments)}function bd(e){return function(e){if(Array.isArray(e))return Cd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gd(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Od(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){gd(a,r,o,i,u,"next",e)}function u(e){gd(a,r,o,i,u,"throw",e)}i(void 0)}))}}function wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wd(Object(n),!0).forEach((function(t){Sd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ed(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Pd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pd(e,t){if(e){if("string"==typeof e)return Cd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cd(e,t):void 0}}function Cd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vd.propTypes={UIComponent:c.a.elementType,businessTypes:c.a.arrayOf(c.a.object),defaultBusinessType:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Id=function(e){var t,n=e.UIComponent,r=e.setBusinessTypes,o=e.businessTypes,s=Ed(rn(),1)[0],c=Ed(yn(),1)[0].token,l=Ed(Br(),2)[1].showToast,f=Ed(Bn(),2)[1],p=Ed(Object(i.useState)({businessType:null!==(t=e.businessType)&&void 0!==t?t:null}),2),d=p[0],y=p[1],h=Ed(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=h[0],m=h[1],b=function(){var e=Od(a.a.mark((function e(){var t,n,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),m(jd(jd({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(v.changes)},e.next=6,fetch("".concat(s.root,"/business_types/").concat(null==d||null===(t=d.businessType)||void 0===t?void 0:t.id),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?m(jd(jd({},v),{},{loading:!1,error:u.result})):(y({businessType:jd(jd({},d.businessType),u.result)}),m({loading:!1,changes:{},error:null}),r&&(p=o.map((function(e){var t;return e.id===(null==u||null===(t=u.result)||void 0===t?void 0:t.id)?jd(jd({},e),null==u?void 0:u.result):e})),r(p)),l(Dr.Success,f("CATEGORY_UPDATED","Category updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(jd(jd({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var t=Od(a.a.mark((function t(){var n,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dr.Info,f("LOADING","Loading")),m(jd(jd({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(v.changes)},t.next=6,fetch("".concat(s.root,"/business_types"),n);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?m(jd(jd({},v),{},{loading:!1,error:u.result})):(m({loading:!1,changes:{},error:null}),r&&r([].concat(bd(o),[u.result])),l(Dr.Success,f("CATEGORY_ADDED","Category added")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(jd(jd({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Od(a.a.mark((function t(){var n,i,u,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dr.Info,f("LOADING","Loading")),m(jd(jd({},v),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(s.root,"/business_types/").concat(d.businessType.id),n);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?m(jd(jd({},v),{},{loading:!1,error:u.result})):(m({loading:!1,changes:{},error:null}),r&&(p=o.filter((function(e){return e.id!==d.businessType.id})),r(p)),l(Dr.Success,f("CATEGORY_DELETED","Category deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(jd(jd({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var t;m({loading:!1,changes:{},error:null}),y({businessType:null!==(t=e.businessType)&&void 0!==t?t:null})}),[null==e?void 0:e.businessType]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,md({},e,{businessTypeState:d,typeFormState:v,handleChangeInput:function(e){m(jd(jd({},v),{},{changes:jd(jd({},v.changes),{},Sd({},e.target.name,e.target.value))}))},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){m(jd(jd({},v),{},{changes:jd(jd({},v.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleUpdateProductType:b,handleAddProductType:g,handleDeleteProductType:O,handleChangeItem:function(e,t){var n=jd(jd({},null==v?void 0:v.changes),{},Sd({},e,t));m(jd(jd({},v),{},{changes:n}))}})))};function xd(){return xd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xd.apply(this,arguments)}function Ad(e){return function(e){if(Array.isArray(e))return Fd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Td(Object(n),!0).forEach((function(t){kd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dd(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ud(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Dd(a,r,o,i,u,"next",e)}function u(e){Dd(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ld(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Bd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bd(e,t){if(e){if("string"==typeof e)return Fd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fd(e,t):void 0}}function Fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Id.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Id.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Rd=function(e){var t=e.UIComponent,n=e.business,r=e.handleSuccessUpdate,o=Ld(rn(),1)[0],s=Ld(yn(),1)[0].token,c=Ld(Bn(),2)[1],l=Ld(Br(),2)[1].showToast,f=Ld(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),p=f[0],d=f[1],y=function(){var e=Ud(a.a.mark((function e(){var t,i,u,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(_d(_d({},p),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(p.changes)},e.next=6,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/webhooks"),t);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(u=e.sent)&&u.error?d(_d(_d({},p),{},{changes:p.changes,result:u,loading:!1})):(d(_d(_d({},p),{},{changes:{},result:u,loading:!1})),(f=Ad(n.webhooks)).push(null==u?void 0:u.result),r&&r(_d(_d({},n),{},{webhooks:Ad(f)})),l(Dr.Success,c("WEBHOOK_ADDED","Webhook added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(_d(_d({},p),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Ud(a.a.mark((function e(t,i){var u,f,y,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(_d(_d({},p),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(t)},e.next=6,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/webhooks/").concat(i),u);case 6:return f=e.sent,e.next=9,f.json();case 9:null!=(y=e.sent)&&y.error?d(_d(_d({},p),{},{result:y,loading:!1})):(d(_d(_d({},p),{},{result:y,loading:!1})),v=null==n||null===(h=n.webhooks)||void 0===h?void 0:h.map((function(e){var t,n;return e.id===(null==y||null===(t=y.result)||void 0===t?void 0:t.id)?_d(_d({},e),{},{delay:null==y||null===(n=y.result)||void 0===n?void 0:n.delay}):e})),r&&r(_d(_d({},n),{},{webhooks:Ad(v)})),l(Dr.Success,c("WEBHOOK_UPDATED","Webhook updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(_d(_d({},p),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Ud(a.a.mark((function e(t){var i,u,f,y,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(_d(_d({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=6,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/webhooks/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:null!=(f=e.sent)&&f.error?d(_d(_d({},p),{},{result:f,loading:!1})):(d(_d(_d({},p),{},{loading:!1})),h=null==n||null===(y=n.webhooks)||void 0===y?void 0:y.filter((function(e){return e.id!==t})),v=_d(_d({},n),{},{webhooks:Ad(h)}),r&&r(v),l(Dr.Success,c("WEBHOOK_DELETED","Webhook deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(_d(_d({},p),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,xd({},e,{businessTypeFormState:p,handleChangeInput:function(e){var t=kd({},e.target.name,e.target.value);d(_d(_d({},p),{},{changes:_d(_d({},p.changes),t)}))},handleChangeSelect:function(e,t){d(_d(_d({},p),{},{changes:_d(_d({},p.changes),{},kd({},t,e))}))},hookFormState:p,handleUpdateAddClick:y,handleDeleteWebhook:v,handleChangeDelay:function(e,t){var n=_d(_d({},t),{},{delay:e});h(n,null==t?void 0:t.id)}})))};function Md(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=qd(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nd(Object(n),!0).forEach((function(t){Gd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||qd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qd(e,t){if(e){if("string"==typeof e)return $d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$d(e,t):void 0}}function $d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Rd.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleSuccessUpdate:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Rd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Jd=function(e){var t=e.apiKey,n=e.mapControls,r=e.clearState,o=e.location,a=e.type,s=e.data,c=e.fillStyle,l=e.infoContentString,f=e.handleData,p=e.setClearState,d=e.isAddMode,y=e.greenFillStyle,h=e.businessZones;t||console.warn("Prop `apiKey` is required to use Google Maps components.");var v=Object(i.useRef)(),m=Yd(Object(i.useState)(null),2),b=m[0],g=m[1],O=Yd(Object(i.useState)(null),2),w=O[0],j=O[1],S=Yd(Object(i.useState)(null),2),E=S[0],P=S[1],C=Yd(Object(i.useState)(null),2),I=C[0],x=C[1],A=Yd(Object(i.useState)(null),2),T=A[0],_=A[1],k=Yd(Object(i.useState)(null),2),D=k[0],U=k[1],L=o?{lat:null==o?void 0:o.lat,lng:null==o?void 0:o.lng}:null==n?void 0:n.defaultPosition,B=Yd(Object(i.useState)(!1),2),F=B[0],R=B[1],M=function(){f({center:{lat:E.getCenter().lat(),lng:E.getCenter().lng()},radio:E.getRadius()/1e3})},N=function(){f(zd(zd({},s),{},{radio:E.getRadius()/1e3}))},z=function(){var e,t=[],n=Md(I.getPath().getArray());try{for(n.s();!(e=n.n()).done;){var r=e.value,o={lat:r.lat(),lng:r.lng()};t.push(o)}}catch(e){n.e(e)}finally{n.f()}f(t)},G=function(e){p(!1),D.setMap(null),1===a?(P(e.overlay),T&&T.open(b)):x(e.overlay)};return Object(i.useEffect)((function(){F&&T&&(T.setContent(l),null!=s&&s.center&&T.setPosition(s.center))}),[T,l,s,F]),Object(i.useEffect)((function(){E&&(f({center:{lat:E.getCenter().lat(),lng:E.getCenter().lng()},radio:E.getRadius()/1e3}),window.google.maps.event.addListener(E,"center_changed",M),window.google.maps.event.addListener(E,"radius_changed",N))}),[E]),Object(i.useEffect)((function(){if(I){var e,t=[],n=Md(I.getPath().getArray());try{for(n.s();!(e=n.n()).done;){var r=e.value,o={lat:r.lat(),lng:r.lng()};t.push(o)}}catch(e){n.e(e)}finally{n.f()}f(t),window.google.maps.event.addListener(I,"mouseup",z)}}),[I]),Object(i.useEffect)((function(){D&&D.addListener("overlaycomplete",G)}),[D]),Object(i.useEffect)((function(){var e,t,n;if(null!==(e=window.google)&&void 0!==e&&e.maps&&(r&&(E&&(E.setMap(null),P(null),T&&T.close()),I&&(I.setMap(null),x(null)),D&&D.setMap(null),null!==(t=window.google.maps)&&void 0!==t&&null!==(n=t.drawing)&&void 0!==n&&n.DrawingManager))){var o=new window.google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:window.google.maps.ControlPosition.TOP_CENTER,drawingModes:1===a?[window.google.maps.drawing.OverlayType.CIRCLE]:[window.google.maps.drawing.OverlayType.POLYGON]},circleOptions:zd(zd({},c),{},{clickable:!1,draggable:!0}),polygonOptions:zd(zd({},c),{},{clickable:!1,draggable:!1})});U(o),o.setMap(b)}}),[r,a]),Object(i.useEffect)((function(){if(F&&b){var e=new window.google.maps.LatLngBounds;if(E&&(e.union(E.getBounds()),b.fitBounds(e)),I&&Array.isArray(s)){var t,n=Md(s);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.extend(r)}}catch(e){n.e(e)}finally{n.f()}b.fitBounds(e)}}}),[F,s,a,b,E,I]),Object(i.useEffect)((function(){F&&(L.lat=null==o?void 0:o.lat,L.lng=null==o?void 0:o.lng,L.lat&&L.lng&&(w&&w.setPosition(new window.google.maps.LatLng(null==L?void 0:L.lat,null==L?void 0:L.lng)),b&&b.panTo(new window.google.maps.LatLng(null==L?void 0:L.lat,null==L?void 0:L.lng))))}),[o]),Object(i.useEffect)((function(){if(F){var e,t,r,i,u=new window.google.maps.Map(v.current,{zoom:null!==(e=null==o?void 0:o.zoom)&&void 0!==e?e:n.defaultZoom,center:L,zoomControl:null==n?void 0:n.zoomControl,streetViewControl:null==n?void 0:n.streetViewControl,fullscreenControl:null==n?void 0:n.fullscreenControl,mapTypeControl:null==n?void 0:n.mapTypeControl,mapTypeId:null==n?void 0:n.mapTypeId,mapTypeControlOptions:zd({style:window.google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:window.google.maps.ControlPosition.TOP_LEFT},null==n?void 0:n.mapTypeControlOptions)});if(g(u),i=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==L?void 0:L.lat,null==L?void 0:L.lng),map:u,draggable:!(null==n||!n.isMarkerDraggable)}),j(i),s){var f=new window.google.maps.InfoWindow({content:l,position:s.center});if(_(f),1===a&&null!=s&&s.center){var p=new window.google.maps.Circle(zd(zd({},c),{},{draggable:!0,map:u,center:s.center,radius:1e3*s.radio}));P(p),f.open(u)}if(2===a&&Array.isArray(s)){var m=new window.google.maps.Polygon(zd(zd({},c),{},{draggable:!1,map:u,paths:s}));x(m)}}if(null!==(t=window.google.maps)&&void 0!==t&&null!==(r=t.drawing)&&void 0!==r&&r.DrawingManager){var b=new window.google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:window.google.maps.ControlPosition.TOP_CENTER,drawingModes:1===a?[window.google.maps.drawing.OverlayType.CIRCLE]:[window.google.maps.drawing.OverlayType.POLYGON]},circleOptions:zd(zd({},c),{},{clickable:!1,draggable:!0}),polygonOptions:zd(zd({},c),{},{clickable:!1,draggable:!1})});U(b),b.setMap(u)}if(d){var O,w=new window.google.maps.LatLngBounds,S=Md(h);try{for(S.s();!(O=S.n()).done;){var E=O.value;if(1===E.type){var C=new window.google.maps.Circle(zd(zd({},y),{},{editable:!1,center:null==E?void 0:E.data.center,radius:1e3*(null==E?void 0:E.data.radio)}));C.setMap(u),w.union(C.getBounds()),u.fitBounds(w)}if(2===(null==E?void 0:E.type)&&Array.isArray(null==E?void 0:E.data))if(new window.google.maps.Polygon(zd(zd({},y),{},{editable:!1,paths:null==E?void 0:E.data})).setMap(u),Array.isArray(null==E?void 0:E.data)){var I,A=Md(null==E?void 0:E.data);try{for(A.s();!(I=A.n()).done;){var T=I.value;w.extend(T)}}catch(e){A.e(e)}finally{A.f()}u.fitBounds(w)}}}catch(e){S.e(e)}finally{S.f()}}}}),[F]),Object(i.useEffect)((function(){if(t){var e=null;if(!window.document.getElementById("__googleMapsScriptId")){window.googleAsyncInit=function(){R(!0)};var n=window.document.createElement("script");return n.id="__googleMapsScriptId",n.async=!0,n.defer=!0,n.src="https://maps.googleapis.com/maps/api/js?key=".concat(t,"&libraries=places,geometry,visualization,drawing&callback=googleAsyncInit"),window.document.body.appendChild(n),function(){e&&clearInterval(e)}}"undefined"!=typeof google?R(!0):e=setInterval((function(){"undefined"!=typeof google&&(R(!0),clearInterval(e))}),100)}}),[t]),F&&u.a.createElement("div",{id:"map",ref:v,style:{width:"70%",height:"50%",position:"absolute"}})};function Vd(){return Vd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vd.apply(this,arguments)}function Hd(e){return function(e){if(Array.isArray(e))return ty(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ey(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wd(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kd(Object(n),!0).forEach((function(t){Zd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ey(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ey(e,t){if(e){if("string"==typeof e)return ty(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ty(e,t):void 0}}function ty(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Jd.propTypes={UIComponent:c.a.elementType,maxLimitLocation:c.a.number,handleChangeAddressMap:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Jd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},Jd.propTypes={apiKey:c.a.string.isRequired};var ny=function(e){var t=e.UIComponent,n=e.business,r=e.handleUpdateBusinessState,o=e.setIsAddProduct,s=e.categorySelected,c=e.handleParentProductAdd,l=Qd(yn(),1)[0].loading,f=Qd(rn(),1)[0],p=Qd(Br(),2)[1].showToast,d=Qd(Bn(),2)[1],y=Qd(Object(i.useState)({loading:!1,changes:{enabled:!0},result:{error:!1}}),2),h=y[0],v=y[1],m=function(){var e,t=(e=a.a.mark((function e(){var t,i,u,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Dr.Info,d("LOADING","Loading")),t=null===(null==s?void 0:s.id)&&"featured"===(null==s?void 0:s.id)?parseInt(null==n?void 0:n.categories[0]):parseInt(null==s?void 0:s.id),v(Xd(Xd({},h),{},{loading:!0})),e.next=8,f.businesses(parseInt(null==n?void 0:n.id)).categories(t).products().save(h.changes);case 8:i=e.sent,(u=i.content).error?v(Xd(Xd({},h),{},{changes:h.changes,result:u,loading:!1})):(v(Xd(Xd({},h),{},{changes:{},result:{error:!1,result:u.result},loading:!1})),r&&((y=Hd(null==n?void 0:n.categories)).forEach((function e(n){(null==n?void 0:n.id)===t&&n.products.push(u.result),Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),r(Xd(Xd({},n),{},{categories:y}))),o(!1),c&&c(!1),p(Dr.Success,d("PRODUCT_ADD","Product added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),v(Xd(Xd({},h),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Wd(a,r,o,i,u,"next",e)}function u(e){Wd(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Vd({},e,{formState:h,setFormState:v,handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){v(Xd(Xd({},h),{},{changes:Xd(Xd({},h.changes),{},{images:t.result})}))},t.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){var t=Zd({},e.target.name,e.target.value);v(Xd(Xd({},h),{},{changes:Xd(Xd({},h.changes),t)}))},handleUpdateClick:m,handleChangeCheckBox:function(e){var t={enabled:e};v(Xd(Xd({},h),{},{changes:Xd(Xd({},h.changes),t)}))},handleChangeItem:function(e){var t=Xd(Xd({},h.changes),e);v(Xd(Xd({},h),{},{changes:t}))}})))};function ry(){return ry=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ry.apply(this,arguments)}function oy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ay(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oy(Object(n),!0).forEach((function(t){iy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uy(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function sy(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){uy(a,r,o,i,u,"next",e)}function u(e){uy(a,r,o,i,u,"throw",e)}i(void 0)}))}}function cy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ly(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ly(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ly(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ny.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,setIsAddProduct:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ny.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fy=function(e){var t=e.UIComponent,n=e.business,r=e.handleSuccessUpdate,o=cy(rn(),1)[0],s=cy(yn(),1)[0].token,c=cy(Bn(),2)[1],l=cy(Br(),2)[1].showToast,f=cy(Object(i.useState)({wallets:(null==n?void 0:n.configs)||[],loading:!1,error:null}),2),p=f[0],d=f[1],y=cy(Object(i.useState)({loading:!0,created:!1,error:null}),2),h=y[0],v=y[1],m=cy(Object(i.useState)({loading:!1,error:null}),2),b=m[0],g=m[1],O=function(){var e=sy(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(ay(ay({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/business/").concat(n.id,"/configs"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?d(ay(ay({},p),{},{loading:!1,error:i.result})):d(ay(ay({},p),{},{loading:!1,wallets:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(ay(ay({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=sy(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(ay(ay({},h),{},{loading:!0})),e.next=4,fetch("".concat(o.root,"/loyalty_plans"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});case 4:return t=e.sent,e.next=7,t.json();case 7:(r=e.sent).error?v(ay(ay({},h),{},{loading:!1,error:r.result})):(i=r.result.find((function(e){return"credit_point"===e.type})))&&(u=i.businesses.find((function(e){return e.business_id===n.id})),v(ay(ay({},h),{},{loading:!1,created:!!u}))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),v(ay(ay({},h),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=sy(a.a.mark((function e(t,i){var u,f,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(ay(ay({},b),{},{loading:!0})),l(Dr.Info,c("LOADING","Loading")),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(i)},e.next=6,fetch("".concat(o.root,"/business/").concat(n.id,"/configs/").concat(t),u);case 6:return f=e.sent,e.next=9,f.json();case 9:(y=e.sent).error?g({loading:!1,error:y.result}):(g({loading:!1,error:null}),h=p.wallets.map((function(e){var t;return e.id===(null===(t=y.result)||void 0===t?void 0:t.id)?y.result:e})),d(ay(ay({},p),{},{wallets:h})),r&&r(ay(ay({},n),{},{configs:h})),l(Dr.Success,c("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w(),null!=n&&n.configs||O()}),[null==n?void 0:n.configs]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ry({},e,{loyaltyPlanState:h,walletsListState:p,actionState:b,handleUpdateWallet:j})))};function py(){return py=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},py.apply(this,arguments)}function dy(e){return function(e){if(Array.isArray(e))return wy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Oy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yy(Object(n),!0).forEach((function(t){vy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function my(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function by(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){my(a,r,o,i,u,"next",e)}function u(e){my(a,r,o,i,u,"throw",e)}i(void 0)}))}}function gy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Oy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oy(e,t){if(e){if("string"==typeof e)return wy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wy(e,t):void 0}}function wy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fy.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fy.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jy=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.isSearchByName,s=e.isSearchByContactType,c=gy(rn(),1)[0],l=gy(yn(),1)[0].token,f=gy(Br(),2)[1].showToast,p=gy(Bn(),2)[1],d=gy(Object(i.useState)(null),2),y=d[0],h=d[1],v=gy(Object(i.useState)({campaigns:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=gy(Object(i.useState)({clear:!1,changes:{}}),2),O=g[0],w=g[1],j=gy(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),S=j[0],E=j[1],P=function(){var e=by(a.a.mark((function e(t,n){var r,i,u,f,p,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(hy(hy({},m),{},{loading:!0})),r=null,i=[],y&&(u=[],o&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(y,"%"))}}),s&&u.push({attribute:"contact_type",value:{condition:"ilike",value:encodeURI("%".concat(y,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(r={conditions:i,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},p=r?"".concat(c.root,"/marketing_campaigns?page=").concat(t,"&page_size=").concat(n,"&where=").concat(JSON.stringify(r)):"".concat(c.root,"/marketing_campaigns?page=").concat(t,"&page_size=").concat(n),e.next=10,fetch(p,f);case 10:return d=e.sent,e.next=13,d.json();case 13:(h=e.sent).error?b(hy(hy({},m),{},{loading:!1,error:h.result})):(b({loading:!1,campaigns:h.result,error:null}),E(hy(hy({},S),{},{currentPage:h.pagination.current_page,totalPages:h.pagination.total_pages,totalItems:h.pagination.total,from:h.pagination.from,to:h.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),b(hy(hy({},m),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=by(a.a.mark((function e(t,n){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=5,fetch("".concat(c.root,"/marketing_campaigns/").concat(t),r);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||(I&&(u=null==m?void 0:m.campaigns.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0})),I(u)),f(Dr.Success,p("CAMPAIGN_SAVED","Campaign saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){b(hy(hy({},m),{},{campaigns:e}))};return Object(i.useEffect)((function(){m.loading||P(1,S.pageSize)}),[y]),Object(i.useEffect)((function(){(Object.keys(null==O?void 0:O.changes).length>0||O.clear)&&!m.loading&&P(1,S.pageSize)}),[O]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,py({},e,{searchValue:y,paginationProps:S,campaignList:m,getCampaignList:P,setFilterValues:w,setPaginationProps:E,handleChangeSearch:function(e){h(e)},handleUpdateCampaign:C,handleSuccessAddCampaign:function(e){var t=[].concat(dy(m.campaigns),[e]);E(hy(hy({},S),{},{to:(null==S?void 0:S.to)+1,total:(null==S?void 0:S.total)+1})),b(hy(hy({},m),{},{campaigns:t}))},handleSuccessUpdateCampaign:I,handleSuccessDeleteCampaign:function(e){var t=m.campaigns.filter((function(t){return t.id!==e}));E(hy(hy({},S),{},{total:(null==S?void 0:S.total)-1})),b(hy(hy({},m),{},{campaigns:t}))}})))};function Sy(){return Sy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sy.apply(this,arguments)}function Ey(e){return function(e){if(Array.isArray(e))return Dy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ky(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Py(e){return Py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(e)}function Cy(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Iy(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Cy(a,r,o,i,u,"next",e)}function u(e){Cy(a,r,o,i,u,"throw",e)}i(void 0)}))}}function xy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ay(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xy(Object(n),!0).forEach((function(t){Ty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ky(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ky(e,t){if(e){if("string"==typeof e)return Dy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dy(e,t):void 0}}function Dy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}jy.propTypes={UIComponent:c.a.elementType,isSearchByName:c.a.bool,isSearchByContactType:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jy.defaultProps={isSearchByName:!0,isSearchByContactType:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var Uy=function(e){var t,n=e.campaign,r=e.campaignList,o=e.UIComponent,s=e.handleSuccessUpdateCampaign,c=e.handleSuccessAddCampaign,l=e.handleSuccessDeleteCampaign,f=_y(Bn(),2)[1],p=_y(rn(),1)[0],d=_y(yn(),1)[0].token,y=_y(Br(),2)[1].showToast,h=_y(Object(i.useState)({campaign:n,loading:!1,error:null}),2),v=h[0],m=h[1],b=_y(Object(i.useState)({loading:!1,changes:{},error:null}),2),g=b[0],O=b[1],w=_y(Object(i.useState)(!1),2),j=w[0],S=w[1],E=_y(Object(i.useState)({loading:!1,audience:0,error:null}),2),P=E[0],C=E[1],I=function(){return O({loading:!1,changes:{}})},x=function(){var e=Iy(a.a.mark((function e(){var t,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in e.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Ay(Ay({},g),{},{loading:!0,error:null})),t=Ay({},null==g?void 0:g.changes))("object"===Py(t[o])&&null!==t[o]||Array.isArray(t[o]))&&(t[o]=JSON.stringify(t[o]));return null!=t&&t.conditions&&delete t.conditions,i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(t)},e.next=9,fetch("".concat(p.root,"/marketing_campaigns/").concat(n.id),i);case 9:return u=e.sent,e.next=12,u.json();case 12:(c=e.sent).error?O(Ay(Ay({},g),{},{loading:!1,error:c.result})):(m(Ay(Ay({},v),{},{campaign:c.result})),O(Ay(Ay({},g),{},{loading:!1,error:null,changes:{}})),s&&(l=null==r?void 0:r.campaigns.filter((function(e){return e.id===n.id&&Object.assign(e,c.result),!0})),s(l)),I(),y(Dr.Success,f("CAMPAIGN_SAVED","Campaign saved"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),O(Ay(Ay({},g),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var t=Iy(a.a.mark((function t(){var n,r,o,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r in t.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Ay(Ay({},g),{},{loading:!0,error:null})),n=Ay({},null==g?void 0:g.changes))("object"===Py(n[r])&&null!==n[r]||Array.isArray(n[r]))&&(n[r]=JSON.stringify(n[r]));return o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(n)},t.next=8,fetch("".concat(p.root,"/marketing_campaigns"),o);case 8:return i=t.sent,t.next=11,i.json();case 11:(u=t.sent).error?O(Ay(Ay({},g),{},{loading:!1,error:u.result})):(O(Ay(Ay({},g),{},{loading:!1,error:null})),c&&c(u.result),y(Dr.Success,f("CAMPAIGN_ADDED","Campaign added")),e.onClose&&e.onClose()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),O(Ay(Ay({},g),{},{loading:!1,error:t.t0.message}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=Iy(a.a.mark((function t(){var r,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Ay(Ay({},g),{},{loading:!0,error:null})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},t.next=6,fetch("".concat(p.root,"/marketing_campaigns/").concat(n.id),r);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?O(Ay(Ay({},g),{},{loading:!1,error:i.result})):(l&&l(n.id),y(Dr.Success,f("CAMPAIGN_DELETED","Campaign deleted")),O(Ay(Ay({},g),{},{loading:!1,error:null})),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),O(Ay(Ay({},g),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var e=Iy(a.a.mark((function e(t){var o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Ay(Ay({},g),{},{loading:!0,error:null})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},e.next=6,fetch("".concat(p.root,"/marketing_campaigns/").concat(n.id,"/conditions/").concat(t),o);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?O(Ay(Ay({},g),{},{loading:!1,error:u.result})):(y(Dr.Success,f("CONDITION_DELETED","Condition deleted")),O(Ay(Ay({},g),{},{loading:!1,error:null})),s&&(c=null==r?void 0:r.campaigns.map((function(e){if(e.id===n.id){var t=e.conditions.filter((function(e){return e.id!==u.result}));return Ay(Ay({},e),{},{conditions:t})}return e})),s(c))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O(Ay(Ay({},g),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Iy(a.a.mark((function e(t){var n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(Ay(Ay({},P),{},{loading:!0})),(n=Ey(t)).forEach((function(e){Object.keys(e).forEach((function(t){null===e[t]&&delete e[t]}))})),r={conditions:JSON.stringify(n)},o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(r)},e.next=8,fetch("".concat(p.root,"/marketing_campaigns/audience"),o);case 8:return i=e.sent,e.next=11,i.json();case 11:(u=e.sent).error?C(Ay(Ay({},P),{},{loading:!1,error:u.result})):C(Ay(Ay({},P),{},{loading:!1,error:null,audience:null==u||null===(s=u.result)||void 0===s?void 0:s.audience})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),C(Ay(Ay({},P),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0===Object.keys(n).length?(S(!0),O(Ay(Ay({},g),{},{changes:{enabled:!0,conditions:[],status:"pending"}})),k(null==n?void 0:n.conditions)):(S(!1),I()),m(Ay(Ay({},v),{},{campaign:n}))}),[n]),Object(i.useEffect)((function(){var e,t,n;if(j){var r,o=function(){var e=!1;return g.changes.conditions.forEach((function(t){var n=!0;Object.keys(t).forEach((function(e){"condition"!==e&&"date_condition"!==e||(n=!1)})),n&&(e=!0)})),e}();if(null!=g&&null!==(e=g.changes)&&void 0!==e&&e.conditions&&(null==g||null===(t=g.changes)||void 0===t||null===(n=t.conditions)||void 0===n?void 0:n.length)>0&&!o)k(null==g||null===(r=g.changes)||void 0===r?void 0:r.conditions)}}),[JSON.stringify(null==g||null===(t=g.changes)||void 0===t?void 0:t.conditions)]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Sy({},e,{isAddMode:j,audienceState:P,campaignState:v,formState:g,handleChangeItem:function(e,t){var n=Ay(Ay({},g.changes),{},Ty({},e,t));"scheduled_at"===e&&(n.status=t?"scheduled":"pending"),O(Ay(Ay({},g),{},{changes:n}))},handleChangeInput:function(e){O(Ay(Ay({},g),{},{changes:Ay(Ay({},g.changes),{},Ty({},e.target.name,e.target.value))}))},handleAddCampaign:A,handleDeleteCampaign:T,handleUpdateClick:x,handleRemoveKey:function(e){var t=Ay({},null==g?void 0:g.changes);delete t[e],O(Ay(Ay({},g),{},{changes:t}))},handleChangeContactData:function(e){var t,n,r=null!==(t=g.changes)&&void 0!==t&&t.contact_data?Ay(Ay({},null===(n=g.changes)||void 0===n?void 0:n.contact_data),{},Ty({},e.target.name,e.target.value)):Ty({},e.target.name,e.target.value);O(Ay(Ay({},g),{},{changes:Ay(Ay({},g.changes),{},{contact_data:r})}))},setCampaignState:m,handleDeleteCondition:_})))};function Ly(){return Ly=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ly.apply(this,arguments)}function By(e){return By="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(e)}function Fy(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ry(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function My(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ry(Object(n),!0).forEach((function(t){Ny(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ry(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ny(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Uy.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Uy.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Yy=function(e){var t=e.UIComponent,n=e.campaignState,r=e.isAddMode,o=e.formState,s=e.handleChangeItem,c=e.handleChangeContactData,l=e.handleSuccessUpdateCampaign,f=e.campaignList,p=zy(rn(),1)[0],d=zy(yn(),1)[0].token,y=zy(Br(),2)[1].showToast,h=zy(Bn(),2)[1],v=zy(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e,t=(e=a.a.mark((function e(){var t,r,o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in e.prev=0,y(Dr.Info,h("LOADING","Loading")),b(My(My({},m),{},{loading:!0,error:null})),r=My({},null==m?void 0:m.changes))("object"===By(r[o])&&null!==r[o]||Array.isArray(r[o]))&&(r[o]=JSON.stringify(r[o]));return i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(r)},e.next=8,fetch("".concat(p.root,"/marketing_campaigns/").concat(null==n||null===(t=n.campaign)||void 0===t?void 0:t.id),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(s=e.sent).error?b(My(My({},m),{},{loading:!1,error:s.result})):(b(My(My({},m),{},{loading:!1,error:null})),l&&(c=null==f?void 0:f.campaigns.filter((function(e){var t;return e.id===(null==n||null===(t=n.campaign)||void 0===t?void 0:t.id)&&Object.assign(e,s.result),!0})),l(c)),y(Dr.Success,h("CAMPAIGN_SAVED","Campaign saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(My(My({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Fy(a,r,o,i,u,"next",e)}function u(e){Fy(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t;r||null!=n&&n.campaign&&Object.keys(null==n?void 0:n.campaign).length>0&&b(My(My({},m),{},{changes:{contact_type:(null==n||null===(e=n.campaign)||void 0===e?void 0:e.contact_type)||"",contact_data:(null==n||null===(t=n.campaign)||void 0===t?void 0:t.contact_data)||{}}}))}),[null==n?void 0:n.campaign]),Object(i.useEffect)((function(){var e,t;r||null!=n&&n.campaign&&Object.keys(null==n?void 0:n.campaign).length>0&&b(My(My({},m),{},{changes:{contact_type:(null==n||null===(e=n.campaign)||void 0===e?void 0:e.contact_type)||"",contact_data:(null==n||null===(t=n.campaign)||void 0===t?void 0:t.contact_data)||{}}}))}),[null==n?void 0:n.campaign]),Object(i.useEffect)((function(){var e,t;r&&(null!=o&&o.changes&&Object.keys(null==o?void 0:o.changes).length>0&&b(My(My({},m),{},{changes:{contact_type:(null==o||null===(e=o.changes)||void 0===e?void 0:e.contact_type)||"",contact_data:(null==o||null===(t=o.changes)||void 0===t?void 0:t.contact_data)||{}}})))}),[null==o?void 0:o.changes]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ly({},e,{contactState:m,handleChangeType:function(e,t){var n=My(My({},null==m?void 0:m.changes),{},Ny({},e,t));b(My(My({},m),{},{changes:n})),r&&s&&s(e,t)},handleChangeData:function(e){var t,n=My(My({},null===(t=m.changes)||void 0===t?void 0:t.contact_data),{},Ny({},e.target.name,e.target.value));b(My(My({},m),{},{changes:My(My({},m.changes),{},{contact_data:n})})),r&&c&&c(e)},handleUpdateContact:g})))};function qy(){return qy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qy.apply(this,arguments)}function $y(e){return function(e){if(Array.isArray(e))return eh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jy(e){return Jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jy(e)}function Vy(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Hy(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Vy(a,r,o,i,u,"next",e)}function u(e){Vy(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Wy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ky(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wy(Object(n),!0).forEach((function(t){Xy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Qy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qy(e,t){if(e){if("string"==typeof e)return eh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eh(e,t):void 0}}function eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yy.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Yy.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var th=function(e){var t=e.campaignState,n=e.campaignList,r=e.UIComponent,o=e.handleSuccessUpdateCampaign,s=e.type,c=e.isAddMode,l=e.setCampaignState,f=e.formState,p=Zy(Bn(),2)[1],d=Zy(rn(),1)[0],y=Zy(yn(),1)[0].token,h=Zy(Br(),2)[1].showToast,v=Zy(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e=Hy(a.a.mark((function e(){var r,i,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,h(Dr.Info,p("LOADING","Loading")),b(Ky(Ky({},m),{},{loading:!0,error:null})),r=Ky({},null==m?void 0:m.changes))("object"===Jy(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/").concat(null==t?void 0:t.campaign.id,"/conditions/").concat(m.changes.id),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?b(Ky(Ky({},m),{},{loading:!1,error:c.result})):(b(Ky(Ky({},m),{},{loading:!1,error:null,changes:{}})),o&&(f=null==n?void 0:n.campaigns.map((function(e){if(e.id===(null==t?void 0:t.campaign.id)){var n=[];return e.conditions.find((function(e){return e.id===c.result.id}))&&(n=e.conditions.filter((function(e){return e.id!==c.result.id}))),n.push(c.result),l(Ky(Ky({},t),{},{campaign:Ky(Ky({},e),{},{conditions:n})})),Ky(Ky({},e),{},{conditions:n})}return e})),o(f)),h(Dr.Success,p("CONDITION_SAVED","Condition saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(Ky(Ky({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Hy(a.a.mark((function e(){var r,i,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,h(Dr.Info,p("LOADING","Loading")),b(Ky(Ky({},m),{},{loading:!0,error:null})),r=Ky({},null==m?void 0:m.changes))("object"===Jy(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/").concat(null==t?void 0:t.campaign.id,"/conditions"),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?b(Ky(Ky({},m),{},{loading:!1,error:c.result})):(b(Ky(Ky({},m),{},{loading:!1,error:null,changes:{}})),o&&(f=null==n?void 0:n.campaigns.map((function(e){if(e.id===(null==t?void 0:t.campaign.id)){var n=$y(e.conditions);return n.push(c.result),l(Ky(Ky({},t),{},{campaign:Ky(Ky({},e),{},{conditions:n})})),Ky(Ky({},e),{},{conditions:n})}return e})),o(f)),h(Dr.Success,p("CONDITION_SAVED","Condition saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(Ky(Ky({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(c){var e,n=null==f||null===(e=f.changes)||void 0===e?void 0:e.conditions.find((function(e){return e.type===s}));b(Ky(Ky({},m),{},{changes:Ky({},n)}))}else{var r,o=null==t||null===(r=t.campaign)||void 0===r?void 0:r.conditions.find((function(e){return e.type===s}));b(Ky(Ky({},m),{},{changes:Ky(Ky(Ky(Ky(Ky({},(null==o?void 0:o.id)&&{id:null==o?void 0:o.id}),(null==o?void 0:o.date_condition)&&{date_condition:null==o?void 0:o.date_condition}),(null==o?void 0:o.date)&&{date:null==o?void 0:o.date}),(null==o?void 0:o.max_date)&&{max_date:null==o?void 0:o.max_date}),{},{type:s})}))}}),[null==t?void 0:t.campaign]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,qy({},e,{ruleFormState:m,handleChangeValue:function(e,t){if("condition"!==e){var n=Ky(Ky({},m.changes),{},Xy({},e,parseInt(t)));b(Ky(Ky({},m),{},{changes:n}))}else{var r,o=Ky(Ky({},m.changes),{},(Xy(r={},e,t),Xy(r,"value",null),r));b(Ky(Ky({},m),{},{changes:o}))}},handleUpdateRule:g,handleAddRule:O,handleChangeDate:function(e,t){var n=Ky(Ky({},m.changes),{},{date:"".concat(e," 00:00:00"),max_date:"".concat(t," 00:00:00")});b(Ky(Ky({},m),{},{changes:n}))},handleChangeOption:function(e){var t=Ky(Ky({},m.changes),{},{date_condition:e,date:null});b(Ky(Ky({},m),{},{changes:t}))},handleChangeDateTime:function(e){var t=Ky(Ky({},m.changes),{},{date:e});null==t||delete t.max_date,b(Ky(Ky({},m),{},{changes:t}))}})))};function nh(){return nh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nh.apply(this,arguments)}function rh(e){return function(e){if(Array.isArray(e))return ph(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oh(e){return oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oh(e)}function ah(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ih(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ah(a,r,o,i,u,"next",e)}function u(e){ah(a,r,o,i,u,"throw",e)}i(void 0)}))}}function uh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uh(Object(n),!0).forEach((function(t){ch(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ch(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||fh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fh(e,t){if(e){if("string"==typeof e)return ph(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ph(e,t):void 0}}function ph(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}th.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},th.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dh=function(e){var t=e.campaignState,n=e.campaignList,r=e.UIComponent,o=e.handleSuccessUpdateCampaign,s=e.type,c=e.isAddMode,l=e.setCampaignState,f=e.formState,p=lh(Bn(),2)[1],d=lh(rn(),1)[0],y=lh(yn(),1)[0].token,h=lh(Br(),2)[1].showToast,v=lh(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e=ih(a.a.mark((function e(){var r,i,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,h(Dr.Info,p("LOADING","Loading")),b(sh(sh({},m),{},{loading:!0,error:null})),r=sh({},null==m?void 0:m.changes))("object"===oh(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/").concat(null==t?void 0:t.campaign.id,"/conditions/").concat(m.changes.id),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?b(sh(sh({},m),{},{loading:!1,error:c.result})):(b(sh(sh({},m),{},{loading:!1,error:null,changes:{}})),o&&(f=null==n?void 0:n.campaigns.map((function(e){if(e.id===(null==t?void 0:t.campaign.id)){var n=[];return e.conditions.find((function(e){return e.id===c.result.id}))&&(n=e.conditions.filter((function(e){return e.id!==c.result.id}))),n.push(c.result),l(sh(sh({},t),{},{campaign:sh(sh({},e),{},{conditions:n})})),sh(sh({},e),{},{conditions:n})}return e})),o(f)),h(Dr.Success,p("CONDITION_SAVED","Condition saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(sh(sh({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=ih(a.a.mark((function e(){var r,i,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,h(Dr.Info,p("LOADING","Loading")),b(sh(sh({},m),{},{loading:!0,error:null})),r=sh({},null==m?void 0:m.changes))("object"===oh(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/").concat(null==t?void 0:t.campaign.id,"/conditions"),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?b(sh(sh({},m),{},{loading:!1,error:c.result})):(b(sh(sh({},m),{},{loading:!1,error:null,changes:{}})),o&&(f=null==n?void 0:n.campaigns.map((function(e){if(e.id===(null==t?void 0:t.campaign.id)){var n=rh(e.conditions);return n.push(c.result),l(sh(sh({},t),{},{campaign:sh(sh({},e),{},{conditions:n})})),sh(sh({},e),{},{conditions:n})}return e})),o(f)),h(Dr.Success,p("CONDITION_SAVED","Condition saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(sh(sh({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(c){var e,n=null==f||null===(e=f.changes)||void 0===e?void 0:e.conditions.find((function(e){return e.type===s}));b(sh(sh({},m),{},{changes:sh({},n)}))}else{var r,o=null==t||null===(r=t.campaign)||void 0===r?void 0:r.conditions.find((function(e){return e.type===s}));b(sh(sh({},m),{},{changes:sh(sh(sh(sh({},(null==o?void 0:o.id)&&{id:null==o?void 0:o.id}),(null==o?void 0:o.condition)&&{condition:null==o?void 0:o.condition}),(null==o?void 0:o.value)&&{value:null==o?void 0:o.value}),{},{type:s})}))}}),[null==t?void 0:t.campaign]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,nh({},e,{ruleFormState:m,handleChangeValue:function(e,t){if("condition"!==e){var n=sh(sh({},m.changes),{},ch({},e,parseInt(t)));b(sh(sh({},m),{},{changes:n}))}else{var r,o=sh(sh({},m.changes),{},(ch(r={},e,t),ch(r,"value",null),r));b(sh(sh({},m),{},{changes:o}))}},handleUpdateRule:g,handleAddRule:O})))};function yh(){return yh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yh.apply(this,arguments)}function hh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}dh.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},dh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mh=function(e){var t,n=e.UIComponent,r=e.handleEditProduct,o=hh(vr(),2),a=o[0],i=o[1],s=i.updateProduct,c=i.removeProduct,l=i.clearCart,f=hh(tr(),1)[0],p=(null===(t=f.order)||void 0===t?void 0:t.quantity)||0,d=(f.configs.max_product_amount?parseInt(f.configs.max_product_amount):100)-p;return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,yh({},e,{carts:a.carts,orderState:a,clearCart:l,removeProduct:c,changeQuantity:function(e,t){0===t?c(e):s({id:e.id,business_id:e.business_id,code:e.code,quantity:t})},getProductMax:function(e){var t=e.inventoried?e.stock:d,n=e.quantity+t-e.balance;return n<e.quantity?e.quantity:n},offsetDisabled:function(e){return(e.inventoried?e.stock:d)-(e.balance-e.quantity)},handleEditProduct:r})))};function bh(){return bh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bh.apply(this,arguments)}function gh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gh(Object(n),!0).forEach((function(t){wh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jh(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Sh(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jh(a,r,o,i,u,"next",e)}function u(e){jh(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Eh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ph(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ph(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ph(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mh.propTypes={UIComponent:c.a.elementType,handleEditProduct:c.a.func,validationFieldsType:c.a.string};var Ch=function(e){var t=e.businessId,n=e.actionsBeforePlace,r=e.handleCustomClick,o=e.onPlaceOrderClick,s=e.UIComponent,c=Eh(rn(),1)[0],l=Eh(Object(i.useState)(!1),2),f=l[0],p=l[1],d=Eh(Object(i.useState)(null),2),y=d[0],h=d[1],v=Eh(vr(),2),m=v[0],b=v[1].placeCart,g=Eh(Object(i.useState)({business:null,loading:!0,error:null}),2),O=g[0],w=g[1],j=Eh(Object(i.useState)(null),2),S=j[0],E=j[1],P=m.carts["businessId:".concat(t)],C=function(){var e=Sh(a.a.mark((function e(){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=["id","name","email","cellphone","address","paymethods","logo","location"],e.next=4,c.businesses(t).select(n).get();case 4:r=e.sent,o=r.content.result,w(Oh(Oh({},O),{},{loading:!1,business:o})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),w(Oh(Oh({},O),{},{loading:!1,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Sh(a.a.mark((function e(){var t,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=S.data,["stripe","stripe_connect","stripe_direct"].includes(S.paymethod.gateway)&&(i={source_id:S.data.id}),u={paymethod_id:S.paymethodId,paymethod_data:S.data,offer_id:P.offer_id,amount:P.total},1===m.options.type&&(u=Oh(Oh({},u),{},{delivery_zone_id:P.delivery_zone_id})),!r){e.next=7;break}return r(u,S,P),e.abrupt("return");case 7:return u=Oh(Oh({},u),{},{paymethod_data:i}),p(!0),e.next=11,b(P.uuid,u);case 11:if(null==(s=e.sent)||!s.error){e.next=15;break}return h(null==s?void 0:s.result),e.abrupt("return");case 15:if(2!==(null==(c=null==s?void 0:s.result)||null===(t=c.paymethod_data)||void 0===t?void 0:t.status)||!n){e.next=19;break}return e.next=19,n(S,s.result);case 19:p(!1),o&&o(u,S,c);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){C()}),[t]),Object(i.useEffect)((function(){if(P&&1===P.status){var e={paymethod_id:S.paymethodId,paymethod_data:S.data,delivery_zone_id:P.delivery_zone_id,offer_id:P.offer_id,amount:P.total};o&&o(e,S,P)}}),[P]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,bh({},e,{cart:P,placing:f,errors:y,orderOptions:m.options,paymethodSelected:S,businessDetails:O,handlePaymethodChange:function(e){E(e)},handlerClickPlaceOrder:I})))};function Ih(){return Ih=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ih.apply(this,arguments)}function xh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ah(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xh(Object(n),!0).forEach((function(t){Th(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Th(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _h(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function kh(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_h(a,r,o,i,u,"next",e)}function u(e){_h(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Dh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Uh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ch.propTypes={UIComponent:c.a.elementType,handleCustomClick:c.a.func,onPlaceOrderClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ch.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Lh=function(e){var t=e.UIComponent,n=Dh(rn(),1)[0],r=Dh(yn(),1)[0].token,o=Dh(Br(),2)[1].showToast,s=Dh(Bn(),2)[1],c=Dh(Jr(),2)[1].loadValidationFields,l=["city_dropdown_option","address","zipcode","address_notes"],f=Dh(Object(i.useState)({fields:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=Dh(Object(i.useState)({loading:!1,error:null}),2),h=y[0],v=y[1],m=function(){var e=kh(a.a.mark((function e(){var t,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Ah(Ah({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/checkoutfields"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||(u=i.result.filter((function(e){return!l.includes(e.code)})),s=[],["name","middle_name","lastname","second_lastname","email","mobile_phone","city_dropdown_option","address","zipcode","address_notes","coupon","driver_tip"].forEach((function(e){var t=u.findIndex((function(t){return t.code===e}));if(-1!==t){var n=u[t];u.splice(t,1),s.push(n)}})),d({fields:s,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(Ah(Ah({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=kh(a.a.mark((function e(t,i){var u,l,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),v(Ah(Ah({},h),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(i)},e.next=6,fetch("".concat(n.root,"/checkoutfields/").concat(t),u);case 6:return l=e.sent,e.next=9,l.json();case 9:(f=e.sent).error?v({loading:!1,error:f.result}):(v({loading:!1,error:null}),o(Dr.Success,s("FIELD_SAVED","Field saved")),y=p.fields.filter((function(e){return e.id===t&&Object.assign(e,f.result),!0})),d(Ah(Ah({},p),{},{fields:y})),c&&c()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ih({},e,{checkoutFieldsState:p,handleChangeCheckoutFieldSetting:b})))};function Bh(){return Bh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bh.apply(this,arguments)}function Fh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fh(Object(n),!0).forEach((function(t){Mh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nh(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Lh.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Lh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Yh=function(e){var t=e.UIComponent,n=zh(rn(),1)[0],r=zh(yn(),1)[0].token,o=zh(Object(i.useState)(null),2),s=o[0],c=o[1],l=zh(Object(i.useState)({result:null,loading:!1,error:null}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Rh(Rh({},f),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({password:s})},e.next=5,fetch("".concat(n.root,"/users/check_password"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error?p(Rh(Rh({},f),{},{loading:!1,error:i.result})):p(Rh(Rh({},f),{},{loading:!1,result:i.result,error:null})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(Rh(Rh({},f),{},{loading:!1,error:e.t0}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Nh(a,r,o,i,u,"next",e)}function u(e){Nh(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Bh({},e,{checkPasswordStatus:f,handleChangePassword:function(e){c(e)},getCheckPassword:d})))};function qh(){return qh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qh.apply(this,arguments)}function $h(e){return function(e){if(Array.isArray(e))return Qh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Zh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jh(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Zh(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Vh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vh(Object(n),!0).forEach((function(t){Wh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kh(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Xh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Zh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zh(e,t){if(e){if("string"==typeof e)return Qh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qh(e,t):void 0}}function Qh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yh.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Yh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ev=function(e){var t=e.cities,n=e.propsToFetch,r=e.UIComponent,o=Xh(rn(),1)[0],s=Xh(Object(i.useState)({cities:[],loading:!0,error:null}),2),c=s[0],l=s[1],f=function(){var e,t=(e=a.a.mark((function e(){var t,r,i,u,s,f,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Hh(Hh({},c),{},{loading:!0})),e.next=4,o.countries().select(n).get();case 4:if(t=e.sent,r=t.content,i=r.error,u=r.result,s=[],!i){f=Jh(u);try{for(f.s();!(p=f.n()).done;)null!=(d=p.value)&&d.enabled&&(s=[].concat($h(s),$h(null==d?void 0:d.cities)))}catch(e){f.e(e)}finally{f.f()}l(Hh(Hh({},c),{},{loading:!1,cities:s}))}e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l(Hh(Hh({},c),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Kh(a,r,o,i,u,"next",e)}function u(e){Kh(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){t?l(Hh(Hh({},c),{},{loading:!1,cities:t})):f()}),[]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,qh({},e,{citiesList:c})))};function tv(){return tv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tv.apply(this,arguments)}function nv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nv(Object(n),!0).forEach((function(t){ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ov(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function av(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return iv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ev.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ev.defaultProps={propsToFetch:["id","name","enabled","cities"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var uv=function(e){var t,n=e.businessId,r=e.price,o=e.UIComponent,a=av(vr(),2),s=a[0],c=a[1].applyCoupon,l=av(Object(i.useState)({open:!1,content:null,error:!1}),2),f=l[0],p=l[1],d=av(Bn(),2)[1],y=(null==s?void 0:s.carts)&&n&&(null==s||null===(t=s.carts["businessId:".concat(n)])||void 0===t?void 0:t.coupon)||null,h=av(Object(i.useState)(null),2),v=h[0],m=h[1],b=function(){c({business_id:n,coupon:null})};return Object(i.useEffect)((function(){r<1&&(b(),p(rv(rv({},f),{},{open:!0,content:d("COUPON_TOTAL_ERROR","The total value of the cart with discount must be at least 1$"),error:!0})))}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,tv({},e,{couponDefault:y,couponInput:v,onChangeInputCoupon:function(e){return m(e)},handleButtonApplyClick:function(){c({business_id:n,coupon:v})},handleRemoveCouponClick:b,confirm:f,setConfirm:p})))};function sv(){return sv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sv.apply(this,arguments)}function cv(e){return function(e){if(Array.isArray(e))return mv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lv(Object(n),!0).forEach((function(t){pv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dv(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function yv(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){dv(a,r,o,i,u,"next",e)}function u(e){dv(a,r,o,i,u,"throw",e)}i(void 0)}))}}function hv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||vv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vv(e,t){if(e){if("string"==typeof e)return mv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mv(e,t):void 0}}function mv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}uv.propTypes={UIComponent:c.a.elementType,isDisabled:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},uv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bv=function(e){var t,n=e.asDashboard,r=e.UIComponent,o=e.paginationSettings,s=e.propsToFetch,c=e.initialPageSize,l=e.loadMorePageSize,f=e.isSearchByBusinessId,p=e.isSearchByBusinessName,d=e.isSearchByBusinessEmail,y=e.isSearchByBusinessPhone,h=e.noActiveStatusCondition,v=hv(rn(),1)[0],m=hv(yn(),1)[0],b=hv(Object(i.useState)({loading:!1,error:null,businesses:[]}),2),g=b[0],O=b[1],w=hv(Object(i.useState)({currentPage:"pages"===o.controlType&&o.initialPage&&o.initialPage>=1?o.initialPage-1:0,pageSize:null!==(t=o.pageSize)&&void 0!==t?t:10}),2),j=w[0],S=w[1],E=hv(Object(i.useState)(null),2),P=E[0],C=E[1],I=hv(Object(i.useState)(!0),2),x=I[0],A=I[1],T=hv(Object(i.useState)(null),2),_=T[0],k=T[1],D=function(){var e=yv(a.a.mark((function e(t,r){var o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],i=[],u={query:{page:r,page_size:t}},h||i.push({attribute:"enabled",value:x}),_&&i.push({attribute:"types",conditions:[{attribute:"id",value:_}]}),P&&(c=[],f&&c.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),p&&c.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),d&&c.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),y&&c.push({attribute:"phone",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),i.push({conector:"OR",conditions:c})),i.length&&(o={conditions:i,conector:"AND"}),l=n?v.setAccessToken(m.token).businesses().select(s).asDashboard().where(o):v.setAccessToken(m.token).businesses().select(s).where(o),e.next=10,l.get(u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=yv(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(fv(fv({},g),{},{loading:!0})),e.next=6,D(c||j.pageSize,1);case 6:t=e.sent,O({loading:!1,businesses:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||S({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?j.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),"Cancel"!==(null===e.t0||void 0===e.t0||null===(n=e.t0.constructor)||void 0===n?void 0:n.name)&&O(fv(fv({},g),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=yv(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(fv(fv({},g),{},{loading:!0})),e.prev=1,e.next=4,D(l,Math.ceil((null==j?void 0:j.to)/l)+1);case 4:t=e.sent,O({loading:!1,businesses:t.content.error?g.businesses:g.businesses.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||S({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?j.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&O(fv(fv({},g),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=yv(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(fv(fv({},g),{},{loading:!0})),e.prev=1,e.next=4,D(t,n);case 4:r=e.sent,O({loading:!1,businesses:r.content.error?g.businesses:r.content.result,error:r.content.error?r.content.result:null}),r.content.error||S({currentPage:r.content.pagination.current_page,pageSize:0===r.content.pagination.page_size?j.pageSize:r.content.pagination.page_size,totalPages:r.content.pagination.total_pages,total:r.content.pagination.total,from:r.content.pagination.from,to:r.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&O(fv(fv({},g),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),F=function(e){var t=g.businesses.filter((function(t){return t.id!==e}));S(fv(fv({},j),{},{to:(null==j?void 0:j.to)-1,total:(null==j?void 0:j.total)-1})),O(fv(fv({},g),{},{businesses:t}))},R=function(e){var t=[].concat(cv(g.businesses),[e]);S(fv(fv({},j),{},{to:(null==j?void 0:j.to)+1,total:(null==j?void 0:j.total)+1})),O(fv(fv({},g),{},{businesses:t}))};return Object(i.useEffect)((function(){g.loading||g.businesses.length>0||0!==(null==j?void 0:j.currentPage)&&0!==(null==j?void 0:j.total)&&(Math.ceil((null==j?void 0:j.total)/j.pageSize)>=(null==j?void 0:j.currentPage)?B(j.pageSize,j.currentPage):B(j.pageSize,j.currentPage-1))}),[g.businesses]),Object(i.useEffect)((function(){e.businesses?O(fv(fv({},g),{},{businesses:e.businesses})):U()}),[m,P,x,_]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,sv({},e,{businessList:g,pagination:j,searchValue:P,onSearch:C,selectedBusinessActiveState:x,loadMoreBusinesses:L,getPageBusinesses:B,handleChangeBusinessActiveState:function(){A(!x)},handleChangeBusinessType:function(e){e!==_&&(O(fv(fv({},g),{},{businesses:[],loading:!0})),k(e))},handleSucessRemoveBusiness:F,handleSucessAddBusiness:R,handleSucessUpdateBusiness:function(e){if(g.businesses.find((function(t){return t.id===e.id})))if(x===(null==e?void 0:e.enabled)){var t=g.businesses.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));O(fv(fv({},g),{},{businesses:t}))}else F(e.id);else x===(null==e?void 0:e.enabled)?R(e):F(e.id)}})))};function gv(){return gv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gv.apply(this,arguments)}function Ov(e){return function(e){if(Array.isArray(e))return xv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Iv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wv(Object(n),!0).forEach((function(t){Sv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ev(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Pv(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ev(a,r,o,i,u,"next",e)}function u(e){Ev(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Cv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Iv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Iv(e,t){if(e){if("string"==typeof e)return xv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xv(e,t):void 0}}function xv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bv.propTypes={UIComponent:c.a.elementType,isSearchByBusinessId:c.a.bool,isSearchByBusinessEmail:c.a.bool,isSearchByBusinessPhone:c.a.bool,propsToFetch:c.a.arrayOf(s.string)},bv.defaultProps={loadMorePageSize:10,propsToFetch:["id","alcohol","city","delivery_price","distance","delivery_time","ribbon","enabled","featured","food","groceries","header","laundry","logo","minimum","name","pickup_time","slug","reviews"],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var Av=function(e){var t,n=e.UIComponent,r=e.propsToFetch,o=e.orders,s=e.isOnlyDelivery,c=e.driverId,l=e.customerId,f=e.businessId,p=e.orderIds,d=e.deletedOrderId,y=e.orderStatus,h=e.orderBy,v=e.orderDirection,m=e.useDefualtSessionManager,b=e.paginationSettings,g=e.filterValues,O=e.searchValue,w=e.isSearchByOrderId,j=e.isSearchByCustomerEmail,S=e.isSearchByCustomerPhone,E=e.isSearchByBusinessName,P=e.orderIdForUnreadCountUpdate,C=e.timeStatus,I=Cv(rn(),1)[0],x=Cv(zn(),1)[0],A=Cv(Object(i.useState)({loading:!o,error:null,orders:[]}),2),T=A[0],_=A[1],k=Cv(Object(i.useState)({currentPage:"pages"===b.controlType&&b.initialPage&&b.initialPage>=1?b.initialPage-1:0,pageSize:null!==(t=b.pageSize)&&void 0!==t?t:10}),2),D=k[0],U=k[1],L=Cv(yn(),1)[0],B=Cn(),F=m?L.token:e.accessToken,R={},M=Cv(Object(i.useState)({loading:!1,error:null}),2),N=M[0],z=M[1],G=function(e,t){if("id"===e){if("desc"===v)return t.sort((function(e,t){return t.id-e.id}));if("asc"===v)return t.sort((function(e,t){return e.id-t.id}))}return"last_direct_message_at"===e?t.sort((function(e,t){return new Date(t.last_direct_message_at)-new Date(e.last_direct_message_at)})):t},Y=function(){var e=Pv(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,z(jv(jv({},N),{},{loading:!0})),n={},R.updateOrders=n,e.next=6,I.setAccessToken(F).orders(null==t?void 0:t.id).save({status:t.newStatus},{cancelToken:n});case 6:r=e.sent,o=r.content,z({loading:!1,error:o.error?o.result:null}),o.error||(i=T.orders.filter((function(e){return(null==e?void 0:e.id)!==(null==t?void 0:t.id)})),_(jv(jv({},T),{},{orders:i}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),z({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Pv(a.a.mark((function e(t,n){var o,i,u,d,m,b,P,x,A;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],i=[],u={query:{orderBy:("desc"===v?"-":"")+h,page:n,page_size:t}},p&&i.push({attribute:"id",value:p}),0===Object.keys(g).length?y&&i.push({attribute:"status",value:y}):g.statuses.length>0?(d=g.statuses.every((function(e){return-1!==y.indexOf(e)})),m=y.every((function(e){return-1!==g.statuses.indexOf(e)})),d&&i.push({attribute:"status",value:g.statuses}),m&&y&&i.push({attribute:"status",value:y})):y&&i.push({attribute:"status",value:y}),s&&i.push({attribute:"delivery_type",value:1}),c&&i.push({attribute:"driver_id",value:c}),l&&i.push({attribute:"customer_id",value:l}),f&&i.push({attribute:"business_id",value:f}),C&&i.push({attribute:"time_status",value:C}),O&&(b=[],w&&b.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}),j&&b.push({attribute:"customer",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}]}),S&&b.push({attribute:"customer",conditions:[{attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}]}),E&&b.push({attribute:"business",conditions:[{attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}]}),i.push({conector:"OR",conditions:b})),Object.keys(g).length&&(P=[],null!=g&&g.orderId&&P.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(null==g?void 0:g.orderId,"%"))}}),null!==g.deliveryFromDatetime&&P.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(g.deliveryFromDatetime)}}),null!==g.deliveryEndDatetime&&P.push({attribute:"delivery_datetime",value:{condition:"<=",value:g.deliveryEndDatetime}}),0!==g.businessIds.length&&P.push({attribute:"business_id",value:g.businessIds}),0!==g.driverIds.length&&P.push({attribute:"driver_id",value:g.driverIds}),0!==g.deliveryTypes.length&&P.push({attribute:"delivery_type",value:g.deliveryTypes}),0!==g.driverGroupIds.length&&P.push({attribute:"driver_id",value:g.driverGroupIds}),0!==g.paymethodIds.length&&P.push({attribute:"paymethod_id",value:g.paymethodIds}),P.length&&i.push({conector:"AND",conditions:P})),i.length&&(o={conditions:i,conector:"AND"}),x={},R.orders=x,u.cancelToken=x,A=r?I.setAccessToken(F).orders().asDashboard().select(r).where(o):I.setAccessToken(F).orders().asDashboard().where(o),e.next=19,A.get(u);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(e){var t=!0;return void 0!==g.businessIds&&g.businessIds.length>0&&(g.businessIds.includes(e.business_id)||(t=!1)),void 0!==g.driverIds&&g.driverIds.length>0&&(g.driverIds.includes(e.driver_id)||(t=!1)),void 0!==g.deliveryTypes&&g.deliveryTypes.length>0&&(g.deliveryTypes.includes(e.delivery_type)||(t=!1)),void 0!==g.paymethodIds&&g.paymethodIds.length>0&&(g.paymethodIds.includes(e.paymethod_id)||(t=!1)),void 0!==g.statuses&&g.statuses.length>0&&(g.statuses.includes(parseInt(e.status))||(t=!1)),t},J=function(){var e=Pv(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,_(jv(jv({},T),{},{loading:!0})),e.next=6,q(D.pageSize,1);case 6:t=e.sent,_({loading:!1,orders:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||U({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?D.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),"Cancel"!==e.t0.constructor.name&&_(jv(jv({},T),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Pv(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(jv(jv({},T),{},{loading:!0})),e.prev=1,e.next=4,q(D.pageSize,D.currentPage+1);case 4:t=e.sent,_({loading:!1,orders:t.content.error?T.orders:T.orders.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||U({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?D.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&_(jv(jv({},T),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Pv(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(jv(jv({},T),{},{loading:!0})),e.prev=1,e.next=4,q(t,n);case 4:r=e.sent,_({loading:!1,orders:r.content.error?T.orders:r.content.result,error:r.content.error?r.content.result:null}),r.content.error||U({currentPage:r.content.pagination.current_page,pageSize:0===r.content.pagination.page_size?D.pageSize:r.content.pagination.page_size,totalPages:r.content.pagination.total_pages,total:r.content.pagination.total,from:r.content.pagination.from,to:r.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&_(jv(jv({},T),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(null!==P&&0!==T.orders.length){var e=T.orders.filter((function(e){return(null==e?void 0:e.id)===P&&(e.unread_count=0,e.unread_general_count=0,e.unread_direct_count=0),!0}));_(jv(jv({},T),{},{orders:e}))}}),[P]),Object(i.useEffect)((function(){if(d){var e=T.orders.filter((function(e){return(null==e?void 0:e.id)!==d}));J(),_(jv(jv({},T),{},{orders:e}))}}),[d]),Object(i.useEffect)((function(){if(null==L||!L.loading){if(o)_(jv(jv({},T),{},{orders:o}));else{var e=!1,t=!1;if(Object.keys(g).length>0&&(e=g.statuses.every((function(e){return-1!==y.indexOf(e)})),t=y.every((function(e){return-1!==g.statuses.indexOf(e)})),!e&&!t))return void _({loading:!1,orders:[],error:null});J()}return function(){R.orders&&R.orders.cancel()}}}),[L,O,h,g,s,c,l,f,o,y,C]),Object(i.useEffect)((function(){if(!T.loading){var e=function(e){if(!s||1===(null==e?void 0:e.delivery_type)){var t=[];if(T.orders.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)}))){t=T.orders.filter((function(t){var n=!0;return(null==t?void 0:t.id)===(null==e?void 0:e.id)&&(delete e.total,delete e.subtotal,Object.assign(t,e),(n=(0===y.length||y.includes(parseInt(t.status)))&&$(e))||(D.total--,U(jv({},D)))),n}));var n=G(h,t);_(jv(jv({},T),{},{orders:n}))}else{if($(e))if(y.includes(parseInt(e.status))){t=[].concat(Ov(T.orders),[e]);var r=G(h,t);D.total++,U(jv({},D)),_(jv(jv({},T),{},{orders:r.slice(0,D.pageSize)}))}}}},t=function(e){if((!s||1===(null==e?void 0:e.delivery_type))&&!T.orders.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)}))){var t=[];if($(e)&&(y.includes(0)&&0===e.status||y.includes(13)&&13===e.status)){t=[e].concat(Ov(T.orders));var n=G(h,t);D.total++,U(jv({},D)),_(jv(jv({},T),{},{orders:n.slice(0,D.pageSize)}))}}},n=function(e){if(0!==T.orders.length&&T.orders.find((function(t){var n;return(null==t?void 0:t.id)===(null===(n=e.order)||void 0===n?void 0:n.id)}))){var t=T.orders.filter((function(t){var n;return(null==t?void 0:t.id)===(null===(n=e.order)||void 0===n?void 0:n.id)&&t.last_message_at!==e.created_at&&(1===e.type?(t.last_general_message_at=e.created_at,0!==e.author.level&&(t.unread_general_count=t.unread_general_count+1)):(t.last_direct_message_at=e.created_at,0!==e.author.level&&(t.unread_direct_count=t.unread_direct_count+1)),t.last_message_at=e.created_at,0!==e.author.level&&(t.unread_count=t.unread_count+1)),!0})),n=G(h,t);_(jv(jv({},T),{},{orders:n}))}};return T.loading||0!==T.orders.length||0!==(null==D?void 0:D.currentPage)&&0!==(null==D?void 0:D.total)&&(Math.ceil((null==D?void 0:D.total)/D.pageSize)>=(null==D?void 0:D.currentPage)?H(D.pageSize,D.currentPage):H(D.pageSize,D.currentPage-1)),B.on("update_order",e),B.on("orders_register",t),B.on("message",n),function(){B.off("update_order",e),B.off("orders_register",t),B.off("message",n)}}}),[T.orders,D,h,B]),Object(i.useEffect)((function(){var e=function(e){var t=T.orders.filter((function(t){return(null==t?void 0:t.id)===e.order_id&&(t.user_review=e),!0})),n=G(h,t);_(jv(jv({},T),{},{orders:n}))};return x.on("customer_reviewed",e),function(){x.off("customer_reviewed",e)}}),[T,h]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,gv({},e,{orderList:T,pagination:D,loadMoreOrders:V,getPageOrders:H,handleUpdateOrderStatus:Y})))};function Tv(){return Tv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tv.apply(this,arguments)}function _v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_v(Object(n),!0).forEach((function(t){Dv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uv(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Lv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Av.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),onOrderClick:c.a.func,useDefualtSessionManager:c.a.bool,orders:c.a.arrayOf(s.object),orderIds:c.a.arrayOf(s.number),orderIdForUnreadCountUpdate:c.a.number,orderStatus:c.a.arrayOf(s.number),orderBy:c.a.string,orderDirection:c.a.oneOf(["asc","desc"]),paginationSettings:c.a.exact({initialPage:c.a.number,pageSize:c.a.number,controlType:c.a.oneOf(["infinity","pages"])}),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Av.defaultProps={orderBy:"id",orderDirection:"desc",paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Fv=function(e){var t,n=e.UIComponent,r=e.propsToFetch,o=e.businessIds,s=e.paginationSettings,c=Lv(rn(),1)[0],l=Lv(yn(),1)[0].token,f=Lv(Object(i.useState)({zones:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=Lv(Object(i.useState)({currentPage:"pages"===s.controlType&&s.initialPage&&s.initialPage>=1?s.initialPage-1:0,pageSize:null!==(t=s.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),h=y[0],v=y[1],m=function(){var e,t=(e=a.a.mark((function e(t,n){var i,u,s,f,y,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(kv(kv({},p),{},{loading:!0})),i=null,u=[],o&&u.push({attribute:"business_id",value:o}),u.length&&(i={conditions:u,conector:"AND"}),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},f=i?"".concat(c.root,"/delivery_zones?page=").concat(t,"&page_size=").concat(n,"8&params=").concat(r.toString(),"&&where=").concat(JSON.stringify(i)):"".concat(c.root,"/delivery_zones?page=").concat(t,"&page_size=").concat(n,"8&params=").concat(r.toString()),e.next=10,fetch(f,s);case 10:return y=e.sent,e.next=13,y.json();case 13:(m=e.sent).error||(d({loading:!1,zones:m.result,error:null}),v(kv(kv({},h),{},{currentPage:m.pagination.current_page,totalPages:m.pagination.total_pages,totalItems:m.pagination.total,from:m.pagination.from,to:m.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),d(kv(kv({},p),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Uv(a,r,o,i,u,"next",e)}function u(e){Uv(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m(1,h.pageSize)}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Tv({},e,{deliveryzoneList:p,paginationProps:h,setPaginationProps:v,getDeliveryzones:m})))};function Rv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Fv.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Fv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},propsToFetch:["name","minimum","price","type","data","enabled","business_id"]};var Nv=function(e){var t=e.onDrop,n=e.children,r=e.className,o=e.style,a=Rv(Object(i.useState)(),2),s=a[0],c=a[1];return u.a.createElement("div",{onDrop:function(e){e.preventDefault(),e.stopPropagation(),t(e.dataTransfer)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),c("dragover")},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),c()},style:o,className:r+" "+s},n)};function zv(){return zv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zv.apply(this,arguments)}function Gv(e){return function(e){if(Array.isArray(e))return Kv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yv(Object(n),!0).forEach((function(t){$v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jv(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Vv(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Jv(a,r,o,i,u,"next",e)}function u(e){Jv(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Hv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Wv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wv(e,t){if(e){if("string"==typeof e)return Kv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kv(e,t):void 0}}function Kv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xv=function(e){var t=e.UIComponent,n=e.driversCompaniesState,r=e.setDriversCompaniesState,o=e.driversCompany,s=Hv(rn(),1)[0],c=Hv(yn(),1)[0].token,l=Hv(Br(),2)[1].showToast,f=Hv(Bn(),2)[1],p=Hv(Object(i.useState)({}),2),d=p[0],y=p[1],h=Hv(Object(i.useState)({loading:!1,error:null}),2),v=h[0],m=h[1],b=function(){var e=Vv(a.a.mark((function e(){var t,i,u,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),m(qv(qv({},v),{},{loading:!0})),null!=(t=qv({},d))&&t.schedule&&(t.schedule=JSON.stringify(null==t?void 0:t.schedule)),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(t)},e.next=8,fetch("".concat(s.root,"/driver_companies/").concat(null==o?void 0:o.id),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(p=e.sent).error?m(qv(qv({},v),{},{loading:!1,error:p.result})):(m(qv(qv({},v),{},{loading:!1})),h=n.companies.filter((function(e){return e.id===(null==o?void 0:o.id)&&Object.assign(e,p.result),!0})),r(qv(qv({},n),{},{companies:h})),l(Dr.Success,f("CHANGES_SAVED","Changes saved")),y({})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var t=Vv(a.a.mark((function t(){var o,i,u,p,h,b,g,O;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,l(Dr.Info,f("LOADING","Loading")),m(qv(qv({},v),{},{loading:!0})),o=[],i=0;i<7;i++)o.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});return u={enabled:!0,priority:"0",fixed_cost_per_km:0,fixed_cost_delivery:0,percentage_cost_per_order_subtotal:0},p=qv(qv(qv({},d),u),{},{schedule:null!=d&&d.schedule?JSON.stringify(null==d?void 0:d.schedule):JSON.stringify(o)}),h={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(p)},t.next=10,fetch("".concat(s.root,"/driver_companies"),h);case 10:return b=t.sent,t.next=13,b.json();case 13:(g=t.sent).error?m({loading:!1,error:g.result}):(m(qv(qv({},v),{},{loading:!1})),O=[].concat(Gv(n.companies),[g.result]),r(qv(qv({},n),{},{companies:O})),l(Dr.Success,f("DRIVER_COMPANY_ADDED","Driver company added")),y({}),e.onClose&&e.onClose()),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),m({loading:!1,error:[t.t0.message]});case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Vv(a.a.mark((function t(){var i,u,p,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dr.Info,f("LOADING","Loading")),m(qv(qv({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(s.root,"/driver_companies/").concat(o.id),i);case 6:return u=t.sent,t.next=9,u.json();case 9:(p=t.sent).error?m(qv(qv({},v),{},{loading:!1,error:p.result})):(m(qv(qv({},v),{},{loading:!1})),d=n.companies.filter((function(e){return e.id!==o.id})),r(qv(qv({},n),{},{companies:d})),l(Dr.Success,f("DRIVER_COMPANY_DELETED","Driver company deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,zv({},e,{cleanChagesState:function(){return y({})},changesState:d,actionState:v,cleanActionState:function(){return m(qv(qv({},v),{},{error:null}))},handleChangesState:function(e,t){y(qv(qv({},d),{},$v({},e,t)))},handleUpdateDriversCompany:b,handleAddDriversCompany:g,handleChangeScheduleState:function(e){y(qv(qv({},d),{},{schedule:e}))},handleDeleteDriversCompany:O})))};function Zv(){return Zv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zv.apply(this,arguments)}function Qv(e){return function(e){if(Array.isArray(e))return um(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||im(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?em(Object(n),!0).forEach((function(t){nm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):em(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rm(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function om(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rm(a,r,o,i,u,"next",e)}function u(e){rm(a,r,o,i,u,"throw",e)}i(void 0)}))}}function am(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||im(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function im(e,t){if(e){if("string"==typeof e)return um(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?um(e,t):void 0}}function um(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Xv.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var sm=function(e){var t=e.userId,n=e.UIComponent,r=am(rn(),1)[0],o=am(yn(),1)[0].token,s=am(Br(),2)[1].showToast,c=am(Bn(),2)[1],l=am(Object(i.useState)({groups:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=am(Object(i.useState)({loading:!1,error:null}),2),y=d[0],h=d[1],v=am(Object(i.useState)([]),2),m=v[0],b=v[1],g=function(){var e=om(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(tm(tm({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/drivergroups?params=name,drivers"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||p(tm(tm({},f),{},{groups:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(tm(tm({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=om(a.a.mark((function e(t,n){var i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),h(tm(tm({},y),{},{loading:!0,error:null})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)},e.next=6,fetch("".concat(r.root,"/drivergroups/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?h(tm(tm({},y),{},{loading:!1,error:l.result})):(h({error:null,loading:!1}),d=f.groups.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),p(tm(tm({},f),{},{groups:d})),s(Dr.Success,c("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;if(!f.loading){var n=null===(e=f.groups)||void 0===e?void 0:e.reduce((function(e,n){return n.drivers.find((function(e){return e.id===t}))?[].concat(Qv(e),[n.id]):Qv(e)}),[]);b(n)}}),[t,f]),Object(i.useEffect)((function(){g()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Zv({},e,{driversGroupsState:f,includedGroupIds:m,actionState:y,handleCheckboxClick:function(e){var n,r=null===(n=f.groups.find((function(t){return t.id===e})).drivers)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(Qv(e),[t.id])}),[]),o=[];r.includes(t)?(console.log(t,r),o=r.filter((function(e){return e!==t}))):(console.log("else"),o=[].concat(Qv(r),[t])),console.log(o);var a={drivers:JSON.stringify(o)};O(e,a)}})))};function cm(){return cm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cm.apply(this,arguments)}function lm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lm(Object(n),!0).forEach((function(t){pm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dm(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ym(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}sm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var vm=function(e){var t=e.userId,n=e.UIComponent,r=ym(rn(),1)[0],o=ym(yn(),1)[0].token,s=ym(Object(i.useState)({reviews:[],loading:!1,error:null}),2),c=s[0],l=s[1],f=function(){var e,n=(e=a.a.mark((function e(){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(fm(fm({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/users/").concat(t,"/user_reviews"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:(u=e.sent).error||l({reviews:u.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l(fm(fm({},c),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){dm(a,r,o,i,u,"next",e)}function u(e){dm(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){t&&f()}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,cm({},e,{userReviewState:c})))};function mm(){return mm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mm.apply(this,arguments)}function bm(e){return function(e){if(Array.isArray(e))return Cm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Om(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gm(Object(n),!0).forEach((function(t){wm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jm(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Sm(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jm(a,r,o,i,u,"next",e)}function u(e){jm(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Em(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Pm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pm(e,t){if(e){if("string"==typeof e)return Cm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cm(e,t):void 0}}function Cm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Im=function(e){var t=e.UIComponent,n=Em(rn(),1)[0],r=Em(yn(),1)[0].token,o=Em(Br(),2)[1].showToast,s=Em(Bn(),2)[1],c=Em(Object(i.useState)({companies:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=Em(Object(i.useState)({loading:!1,error:null}),2),d=p[0],y=p[1],h=Em(Object(i.useState)(!1),2),v=h[0],m=h[1],b=Em(Object(i.useState)([]),2),g=b[0],O=b[1],w=Em(Object(i.useState)(!1),2),j=w[0],S=w[1],E=function(){var e=Sm(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Om(Om({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/driver_companies"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||f(Om(Om({},l),{},{companies:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(Om(Om({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Sm(a.a.mark((function e(t,i){var u,c,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),y(Om(Om({},d),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(i)},e.next=6,fetch("".concat(n.root,"/driver_companies/").concat(t),u);case 6:return c=e.sent,e.next=9,c.json();case 9:(p=e.sent).error?y(Om(Om({},d),{},{loading:!1,error:p.result})):(y(Om(Om({},d),{},{loading:!1})),h=l.companies.filter((function(e){return e.id===t&&Object.assign(e,p.result),!0})),f(Om(Om({},l),{},{companies:h})),o(Dr.Success,s("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Sm(a.a.mark((function e(t){var i,u,c,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),y(Om(Om({},d),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=6,fetch("".concat(n.root,"/driver_companies/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(c=e.sent).error?(y(Om(Om({},d),{},{loading:!1,error:c.result})),S(!1)):(y(Om(Om({},d),{},{loading:!1})),p=l.companies.filter((function(e){return e.id!==t})),f(Om(Om({},l),{},{companies:p})),o(Dr.Success,s("DRIVER_COMPANY_DELETED","Driver company deleted")),j&&((h=bm(g)).shift(),0===h.length&&S(!1),O(h))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j&&0!==g.length&&C(g[0])}),[g,j]),Object(i.useEffect)((function(){E()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,mm({},e,{driversCompaniesState:l,setDriversCompaniesState:f,actionState:d,openDetails:v,setOpenDetails:m,handleUpdateDriversCompany:P,handleDeleteDriversCompany:C,handleSelectCompany:function(e){var t=[];t=g.includes(e)?g.filter((function(t){return t!==e})):[].concat(bm(g),[e]),O(t)},selectedCompanyList:g,handleAllSelectCompany:function(){var e,t=null===(e=l.companies)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(bm(e),[t.id])}),[]);g.length===t.length?O([]):O(t)},handleDeleteSelectedCompanies:function(){return S(!0)}})))};function xm(){return xm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xm.apply(this,arguments)}function Am(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return km(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return km(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function km(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Im.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Im.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Dm=function(e){var t=e.UIComponent,n=e.curDriversGroup,r=e.handleChangesState,o=_m(Object(i.useState)(0),2),a=o[0],s=o[1],c=_m(Object(i.useState)({}),2),l=c[0],f=c[1],p=function(e){return Math.floor((e-3600*Math.floor(e/3600))/60)},d=function(e){var t=e-3600*Math.floor(e/3600);return Math.floor(t-60*Math.floor(t/60))};return Object(i.useEffect)((function(){var e;if(n){e=1*n.autoassign_initial_radius==500&&1*n.autoassign_amount_drivers==1?1:1*n.autoassign_initial_radius==15e3&&1*n.autoassign_amount_drivers==1e3?2:1*n.autoassign_initial_radius==100&&1*n.autoassign_amount_drivers==1?3:1*n.autoassign_initial_radius==1e3&&1*n.autoassign_amount_drivers==2?4:1*n.autoassign_initial_radius==15e3&&1*n.autoassign_amount_drivers==1?5:6,s(e);var t,r={hour:(t=n.autoassign_autoreject_time,1*t/3600>1?Math.floor(1*t/3600):0),minute:p(n.autoassign_autoreject_time),second:d(n.autoassign_autoreject_time)};f(r)}}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,xm({},e,{autoAssign:a,autoRejectOrderGroup:l,onSelectAssign:function(e){s(e);var t={};1===e?(t.autoassign_initial_radius=500,t.autoassign_increment_radius=100,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=1):2===e?(t.autoassign_initial_radius=15e3,t.autoassign_increment_radius=15e3,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=1e3):3===e?(t.autoassign_initial_radius=100,t.autoassign_increment_radius=100,t.autoassign_max_radius=1500,t.autoassign_amount_drivers=1):4===e?(t.autoassign_initial_radius=1e3,t.autoassign_increment_radius=500,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=2):5===e?(t.autoassign_initial_radius=15e3,t.autoassign_increment_radius=15e3,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=1):6===e&&(t.autoassign_initial_radius="",t.autoassign_increment_radius="",t.autoassign_max_radius="",t.autoassign_amount_drivers=""),r({autoassign_initial_radius:t.autoassign_initial_radius,autoassign_increment_radius:t.autoassign_increment_radius,autoassign_max_radius:t.autoassign_max_radius,autoassign_amount_drivers:t.autoassign_amount_drivers})},onChangeSave:r,handleChangeInput:function(e){var t=e.target.value,n=""===t?0:parseInt(t);(""===n||/^[0-9\b]+$/.test(n))&&r(Tm({},e.target.name,n))},onChangeAutoRejectOrderGroup:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Am(Object(n),!0).forEach((function(t){Tm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Am(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l);if(""===e||/^[0-9\b]+$/.test(e)){var o=""===e?0:parseInt(e);n[t]=o,f(n);var a=3600*(null==n?void 0:n.hour)+60*(null==n?void 0:n.minute)+(null==n?void 0:n.second);r({autoassign_autoreject_time:a})}}})))};function Um(){return Um=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Um.apply(this,arguments)}function Lm(e){return function(e){if(Array.isArray(e))return Ym(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Gm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bm(Object(n),!0).forEach((function(t){Rm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mm(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Nm(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Mm(a,r,o,i,u,"next",e)}function u(e){Mm(a,r,o,i,u,"throw",e)}i(void 0)}))}}function zm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Gm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gm(e,t){if(e){if("string"==typeof e)return Ym(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ym(e,t):void 0}}function Ym(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Dm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Dm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qm=function(e){var t=e.UIComponent,n=e.driversGroupsState,r=e.setDriversGroupsState,o=e.curDriversGroup,s=e.driversManagers,c=e.businesses,l=e.paymethods,f=e.drivers,p=e.companies,d=zm(rn(),1)[0],y=zm(yn(),1)[0].token,h=zm(Br(),2)[1].showToast,v=zm(Bn(),2)[1],m=zm(Object(i.useState)({driversGroup:e.curDriversGroup,loading:!1}),2),b=m[0],g=m[1],O=zm(Object(i.useState)({loading:!1,error:null}),2),w=O[0],j=O[1],S=zm(Object(i.useState)({}),2),E=S[0],P=S[1],C=zm(Object(i.useState)([]),2),I=C[0],x=C[1],A=zm(Object(i.useState)([]),2),T=A[0],_=A[1],k=zm(Object(i.useState)([]),2),D=k[0],U=k[1],L=zm(Object(i.useState)([]),2),B=L[0],F=L[1],R=function(){var e=Nm(a.a.mark((function e(t){var i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,v("LOADING","Loading")),j(Fm(Fm({},w),{},{loading:!0,error:null})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(t)},e.next=6,fetch("".concat(d.root,"/drivergroups/").concat(o.id),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error?j(Fm(Fm({},w),{},{loading:!1,error:s.result})):(j({error:null,loading:!1}),c=n.groups.filter((function(e){return e.id===o.id&&Object.assign(e,s.result),!0})),r(Fm(Fm({},n),{},{groups:c})),h(Dr.Success,v("CHANGES_SAVED","Changes saved")),g(Fm(Fm({},b),{},{driversGroup:s.result})),P({})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),j({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var t=Nm(a.a.mark((function t(){var i,u,s,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,v("LOADING","Loading")),j(Fm(Fm({},w),{},{loading:!0,error:null})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}},t.next=6,fetch("".concat(d.root,"/drivergroups/").concat(o.id),i);case 6:return u=t.sent,t.next=9,u.json();case 9:(s=t.sent).error?j(Fm(Fm({},w),{},{loading:!1,error:s.result})):(j(Fm(Fm({},w),{},{loading:!1})),c=n.groups.filter((function(e){return e.id!==o.id})),r(Fm(Fm({},n),{},{groups:c})),h(Dr.Success,v("DRIVER_GROUP_DELETED","Driver group deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),j({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=Nm(a.a.mark((function t(){var o,i,u,c,l,f,p,m,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,v("LOADING","Loading")),j({loading:!0,error:null}),o={enabled:!0,autoassign_amount_drivers:1,autoassign_autoaccept_by_driver:!1,autoassign_autoreject_time:30,autoassign_increment_radius:100,autoassign_initial_radius:500,autoassign_max_in_accepted_by_business:5,autoassign_max_in_accepted_by_driver:5,autoassign_max_in_driver_in_business:5,autoassign_max_in_pending:5,autoassign_max_in_pickup_completed:5,autoassign_max_in_ready_for_pickup:5,autoassign_max_orders:5,autoassign_max_radius:1e3,orders_group_max_distance_between_delivery:200,orders_group_max_distance_between_pickup:200,orders_group_max_orders:1,orders_group_max_time_between:5,orders_group_max_time_between_delivery:600,orders_group_max_time_between_pickup:600,orders_group_start_in_status:"7",orders_group_use_maps_api:!1},i=Fm(Fm({},E),o),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(i)},t.next=8,fetch("".concat(d.root,"/drivergroups"),u);case 8:return c=t.sent,t.next=11,c.json();case 11:(l=t.sent).error?j({loading:!1,error:l.result}):(j({loading:!1,error:null}),p=Fm({},l.result),(null===(f=l.result)||void 0===f||!f.administrator)&&s.length>0&&(m=s.find((function(e){var t;return e.id===(null===(t=l.result)||void 0===t?void 0:t.administrator_id)})),p=Fm(Fm({},p),{},{administrator:m})),b=[].concat(Lm(n.groups),[p]),r(Fm(Fm({},n),{},{groups:b})),h(Dr.Success,v("DRIVER_GROUP_ADDED","Driver group added")),P({}),e.onClose&&e.onClose()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),j({loading:!1,error:[t.t0.message]});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(g(Fm(Fm({},b),{},{driversGroup:o})),o){var e,t,n,r=null==o||null===(e=o.business)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Lm(e),[t.id])}),[]);x(r),_((null==o?void 0:o.allowed_paymethods)||[]);var a=null==o||null===(t=o.drivers)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(Lm(e),[t.id])}),[]);U(a);var i=null==o||null===(n=o.driver_companies)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(Lm(e),[t.id])}),[]);F(i)}else P({type:0}),x([]),_([]),U([]),F([])}),[o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Um({},e,{driversGroupState:b,changesState:E,actionState:w,cleanChagesState:function(){return P({})},selectedBusinessIds:I,selectedPaymethodIds:T,selectedDriverIds:D,selectedDriversCompanyIds:B,handleChangesState:function(e){P(Fm(Fm({},E),e))},handleSelectBusiness:function(e,t){var n=Lm(I),r=[];r=t?[].concat(Lm(n),[e]):n.filter((function(t){return t!==e})),x(r),P(Fm(Fm({},E),{},{business:JSON.stringify(r)}))},handleSelectAllBusiness:function(e){var t=null==c?void 0:c.reduce((function(e,t){return[].concat(Lm(e),[t.id])}),[]),n=[];n=e?Lm(t):[],x(n),P(Fm(Fm({},E),{},{business:JSON.stringify(n)}))},handleSelectPaymethod:function(e,t){var n=Lm(T),r=[];r=t?[].concat(Lm(n),[e]):n.filter((function(t){return t!==e})),_(r),P(Fm(Fm({},E),{},{allowed_paymethods:JSON.stringify(r)}))},handleSelectDriver:function(e,t){var n=Lm(D),r=[];r=t?[].concat(Lm(n),[e]):n.filter((function(t){return t!==e})),U(r),P(Fm(Fm({},E),{},{drivers:JSON.stringify(r)}))},handleSelectDriversCompany:function(e,t){var n=Lm(B),r=[];r=t?[].concat(Lm(n),[e]):n.filter((function(t){return t!==e})),F(r),P(Fm(Fm({},E),{},{driver_companies:JSON.stringify(r)}))},handleSelectAllPaymethod:function(e){var t=null==l?void 0:l.reduce((function(e,t){return[].concat(Lm(e),[t.id])}),[]),n=[];n=e?Lm(t):[],_(n),P(Fm(Fm({},E),{},{allowed_paymethods:JSON.stringify(n)}))},handleSelectAllDriver:function(e){var t=null==f?void 0:f.reduce((function(e,t){return[].concat(Lm(e),[t.id])}),[]),n=[];n=e?Lm(t):[],U(n),P(Fm(Fm({},E),{},{drivers:JSON.stringify(n)}))},handleSelectAllDriversCompany:function(e){var t=null==p?void 0:p.reduce((function(e,t){return[].concat(Lm(e),[t.id])}),[]),n=[];n=e?Lm(t):[],F(n),P(Fm(Fm({},E),{},{driver_companies:JSON.stringify(n)}))},handleUpdateDriversGroup:R,handleDeleteDriversGroup:M,handleAddDriversGroup:N})))};function $m(){return $m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$m.apply(this,arguments)}function Jm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jm(Object(n),!0).forEach((function(t){Hm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Km(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Km(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Km(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}qm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Xm=function(e){var t=e.UIComponent,n=e.curDriversGroup,r=e.handleChangesState,o=Wm(Object(i.useState)({}),2),a=o[0],s=o[1],c=Wm(Object(i.useState)({}),2),l=c[0],f=c[1],p=Wm(Object(i.useState)({}),2),d=p[0],y=p[1],h=function(e){return 1*e/3600>1?Math.floor(1*e/3600):0},v=function(e){return Math.floor((e-3600*Math.floor(e/3600))/60)},m=function(e){var t=e-3600*Math.floor(e/3600);return Math.floor(t-60*Math.floor(t/60))};return Object(i.useEffect)((function(){if(n){var e={hour:h(null==n?void 0:n.orders_group_max_time_between),minute:v(null==n?void 0:n.orders_group_max_time_between),second:m(null==n?void 0:n.orders_group_max_time_between)};s(e);var t={hour:h(null==n?void 0:n.orders_group_max_time_between_pickup),minute:v(null==n?void 0:n.orders_group_max_time_between_pickup),second:m(null==n?void 0:n.orders_group_max_time_between_pickup)};f(t);var r={hour:h(null==n?void 0:n.orders_group_max_time_between_delivery),minute:v(null==n?void 0:n.orders_group_max_time_between_delivery),second:m(null==n?void 0:n.orders_group_max_time_between_delivery)};y(r)}}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,$m({},e,{maxTimeBetweenOrder:a,maxTimeBetweenBusiness:l,maxTimeBetweenDelivery:d,handleChangeMaxTimeBetweenOrder:function(e,t){if(""===e||/^[0-9\b]+$/.test(e)){var n=""===e?0:parseInt(e),o=Vm({},a);o[t]=n,s(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);r({orders_group_max_time_between:i})}},handleChangeMaxTimeBetweenBusiness:function(e,t){if(""===e||/^[0-9\b]+$/.test(e)){var n=""===e?0:parseInt(e),o=Vm({},a);o[t]=n,f(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);r({orders_group_max_time_between_pickup:i})}},handleChangeMaxTimeBetweenDelivery:function(e,t){if(""===e||/^[0-9\b]+$/.test(e)){var n=""===e?0:parseInt(e),o=Vm({},a);o[t]=n,y(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);r({orders_group_max_time_between_delivery:i})}},onChangeNumberInput:function(e,t){(""===t||/^[0-9\b]+$/.test(t))&&r(Hm({},e,t))}})))};function Zm(){return Zm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zm.apply(this,arguments)}function Qm(e){return function(e){if(Array.isArray(e))return ub(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ib(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eb(Object(n),!0).forEach((function(t){nb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rb(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ob(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rb(a,r,o,i,u,"next",e)}function u(e){rb(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ab(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ib(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ib(e,t){if(e){if("string"==typeof e)return ub(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ub(e,t):void 0}}function ub(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Xm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var sb=function(e){var t=e.UIComponent,n=e.isDriversMangersRequired,r=ab(rn(),1)[0],o=ab(yn(),1)[0].token,s=ab(Br(),2)[1].showToast,c=ab(Bn(),2)[1],l=ab(Object(i.useState)({groups:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=ab(Object(i.useState)({managers:[],loading:!1,error:null}),2),y=d[0],h=d[1],v=ab(Object(i.useState)({businesses:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=ab(Object(i.useState)({paymethods:[],loading:!1,error:null}),2),O=g[0],w=g[1],j=ab(Object(i.useState)({drivers:[],loading:!1,error:null}),2),S=j[0],E=j[1],P=ab(Object(i.useState)({companies:[],loading:!1,error:null}),2),C=P[0],I=P[1],x=ab(Object(i.useState)(!1),2),A=x[0],T=x[1],_=ab(Object(i.useState)({loading:!1,error:null}),2),k=_[0],D=_[1],U=ab(Object(i.useState)([]),2),L=U[0],B=U[1],F=function(){var e=ob(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(tb(tb({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/drivergroups"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||p(tb(tb({},f),{},{groups:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(tb(tb({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=ob(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(tb(tb({},y),{},{loading:!1})),e.next=4,r.setAccessToken(o).users().where([{attribute:"level",value:5}]).select(["name","email","photo"]).get();case 4:t=e.sent,n=t.content,i=n.error,u=n.result,i||h(tb(tb({},y),{},{loading:!1,managers:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),h(tb(tb({},y),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=ob(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(tb(tb({},m),{},{loading:!1})),e.next=4,r.setAccessToken(o).businesses().select(["name","logo"]).asDashboard().get();case 4:t=e.sent,n=t.content,i=n.error,u=n.result,i||b(tb(tb({},m),{},{loading:!1,businesses:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),b(tb(tb({},m),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=ob(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(tb(tb({},S),{},{loading:!1})),e.next=4,r.setAccessToken(o).users().where([{attribute:"level",value:4}]).select(["name","lastname","email","photo"]).get();case 4:t=e.sent,n=t.content,i=n.error,u=n.result,i||E(tb(tb({},S),{},{loading:!1,drivers:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),E(tb(tb({},S),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=ob(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(tb(tb({},O),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/paymethods?params=name&where={%22enabled%22:true}"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||w(tb(tb({},O),{},{paymethods:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w(tb(tb({},O),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=ob(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(tb(tb({},C),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/driver_companies?params=name"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||I(tb(tb({},C),{},{companies:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),I(tb(tb({},C),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=ob(a.a.mark((function e(t,n){var i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),D(tb(tb({},k),{},{loading:!0,error:null})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)},e.next=6,fetch("".concat(r.root,"/drivergroups/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?D(tb(tb({},k),{},{loading:!1,error:l.result})):(D({error:null,loading:!1}),d=f.groups.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),p(tb(tb({},f),{},{groups:d})),s(Dr.Success,c("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),D({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=ob(a.a.mark((function e(t){var n,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),D(tb(tb({},k),{},{loading:!0,error:null})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/drivergroups/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?(D(tb(tb({},k),{},{loading:!1,error:u.result})),T(!1)):(D(tb(tb({},k),{},{loading:!1})),l=f.groups.filter((function(e){return e.id!==t})),p(tb(tb({},f),{},{groups:l})),s(Dr.Success,c("DRIVER_GROUP_DELETED","Driver group deleted")),A&&((d=Qm(L)).shift(),0===d.length&&T(!1),B(d))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),D({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){A&&0!==L.length&&q(L[0])}),[L,A]),Object(i.useEffect)((function(){F(),n&&R(),N(),M(),z(),G()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Zm({},e,{driversGroupsState:f,setDriversGroupsState:p,driversManagersList:y,businessesList:m,paymethodsList:O,driversList:S,driversCompanyList:C,actionState:k,handleUpdateDriversGroup:Y,handleDeleteDriversGroup:q,handleDeleteSelectedGroups:function(){return T(!0)},selectedGroupList:L,handleSelectGroup:function(e){var t=[];t=L.includes(e)?L.filter((function(t){return t!==e})):[].concat(Qm(L),[e]),B(t)},handleAllSelectGroup:function(){var e,t=null===(e=f.groups)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Qm(e),[t.id])}),[]);L.length===t.length?B([]):B(t)}})))};function cb(){return cb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cb.apply(this,arguments)}function lb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lb(Object(n),!0).forEach((function(t){pb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function db(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function yb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}sb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var vb=function(e){var t,n=e.driversGroupId,r=e.UIComponent,o=e.paginationSettings,s=yb(rn(),1)[0],c=yb(yn(),1)[0],l=yb(Object(i.useState)({logs:[],loading:!0,error:null}),2),f=l[0],p=l[1],d=yb(Object(i.useState)({currentPage:"pages"===o.controlType&&o.initialPage&&o.initialPage>=1?o.initialPage-1:0,pageSize:null!==(t=o.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),y=d[0],h=d[1],v=function(){var e,t=(e=a.a.mark((function e(t,r){var o,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(fb(fb({},f),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=5,fetch("".concat(s.root,"/drivergroups/").concat(n,"/logs?orderBy=-id&page=").concat(t,"&page_size=").concat(r),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,l=u.pagination,d=u.result,p(fb(fb({},f),{},{loading:!1,logs:d})),h(fb(fb({},y),{},{currentPage:l.current_page,totalPages:l.total_pages,totalItems:l.total,from:l.from,to:l.to})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),p(fb(fb({},f),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){db(a,r,o,i,u,"next",e)}function u(e){db(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){v(1,null)}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,cb({},e,{logsList:f,paginationProps:y,getDriversGroupLogs:v})))};function mb(){return mb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mb.apply(this,arguments)}function bb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var Ob=function(e){var t=e.UIComponent,n=e.businessId,r=e.useOrderContext;if(r&&!n)throw new Error("`businessId` is required when `useOrderContext` is true.");var o=bb(vr(),2),a=o[0],s=o[1].changeDriverTip,c=bb(Object(i.useState)(0),2),l=c[0],f=c[1],p=bb(Object(i.useState)(0),2),d=p[0],y=p[1];return Object(i.useEffect)((function(){var e,t,r=(null===(e=a.carts["businessId:".concat(n)])||void 0===e?void 0:e.driver_tip_rate)||0,o=(null===(t=a.carts["businessId:".concat(n)])||void 0===t?void 0:t.driver_tip)||0;f(r),y(o)}),[a]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,mb({},e,{driverTipAmount:d,optionSelected:l,handlerChangeOption:function(t){t=parseInt(t),r?s(n,t):f(t),e.handlerChangeDriverOption&&e.handlerChangeDriverOption(t)}})))};function wb(){return wb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wb.apply(this,arguments)}function jb(e){return function(e){if(Array.isArray(e))return Tb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ab(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sb(Object(n),!0).forEach((function(t){Pb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cb(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ib(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Cb(a,r,o,i,u,"next",e)}function u(e){Cb(a,r,o,i,u,"throw",e)}i(void 0)}))}}function xb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ab(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ab(e,t){if(e){if("string"==typeof e)return Tb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tb(e,t):void 0}}function Tb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ob.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,useOrderContext:c.a.bool,driverTipsOptions:c.a.arrayOf(c.a.number),handlerChangeDriverOption:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ob.defaultProps={useOrderContext:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var _b=function(e){var t=e.drivers,n=e.UIComponent,r=e.propsToFetch,o=e.isSearchByName,s=e.isSearchByCellphone,c=e.asDashboard,l=xb(rn(),1)[0],f=xb(Br(),2)[1].showToast,p=xb(Bn(),2)[1],d={},y=xb(Object(i.useState)({loading:!0,error:null}),2),h=y[0],v=y[1],m=Cn(),b=xb(yn(),1)[0],g=xb(Object(i.useState)({drivers:[],loading:!0,error:null}),2),O=g[0],w=g[1],j=xb(Object(i.useState)([]),2),S=j[0],E=j[1],P=xb(Object(i.useState)([]),2),C=P[0],I=P[1],x=xb(Object(i.useState)(!0),2),A=x[0],T=x[1],_=xb(Object(i.useState)({busy:!0,notBusy:!0}),2),k=_[0],D=_[1],U=xb(Object(i.useState)(null),2),L=U[0],B=U[1],F=function(){var e=Ib(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),v(Eb(Eb({},h),{},{loading:!0})),n={},d.assignDriver=n,e.next=7,l.setAccessToken(b.token).orders(t.orderId).save({driver_id:t.driverId},{cancelToken:n});case 7:r=e.sent,o=r.content,v({loading:!1,error:o.error?o.result:null}),o.error||(t.driverId?f(Dr.Success,p("ORDER_DRIVER_ASSIGNED","Driver assigned to order")):f(Dr.Success,p("ORDER_DRIVER_REMOVED","Driver removed from the order"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(Eb(Eb({},h),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),R=function(e){var t,n;k.busy&&k.notBusy?(t=e.filter((function(e){return e.enabled&&e.available})),n=e.filter((function(e){return e.enabled&&!e.available}))):k.busy&&!k.notBusy?(t=e.filter((function(e){return e.enabled&&e.available&&e.busy})),n=e.filter((function(e){return e.enabled&&!e.available&&e.busy}))):!k.busy&&k.notBusy?(t=e.filter((function(e){return e.enabled&&e.available&&!e.busy})),n=e.filter((function(e){return e.enabled&&!e.available&&!e.busy}))):(t=[],n=[]),E(t),I(n)},M=function(){var e=Ib(a.a.mark((function e(){var t,n,i,u,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(Eb(Eb({},O),{},{loading:!0})),t={},d.drivers=t,n=null,(i=[]).push({attribute:"level",value:[4]}),L&&(u=[],o&&(u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(L,"%"))}}),u.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(L,"%"))}})),s&&u.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(L,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(n={conditions:i,conector:"AND"}),e.next=11,l.setAccessToken(b.token).users().select(r).where(n).get({cancelToken:t});case 11:c=e.sent,f=c.content.result,w(Eb(Eb({},O),{},{loading:!1,drivers:f})),R(f),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),w(Eb(Eb({},O),{},{loading:!1,error:e.t0.message}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){R(O.drivers)}),[k]),Object(i.useEffect)((function(){return t?(w(Eb(Eb({},O),{},{drivers:t,loading:!1})),R(t)):M(),function(){d.drivers&&d.drivers.cancel()}}),[t,L]),Object(i.useEffect)((function(){if(null==b||!b.loading){var e=function(e){var t=[];t=O.drivers.find((function(t){return t.id===e.id}))?O.drivers.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})):[].concat(jb(O.drivers),[e]),w(Eb(Eb({},O),{},{drivers:t}))},t=function(e){var t;t=O.drivers.filter((function(t){if(t.id===e.driver_id)if("string"==typeof e.location){var n=e.location.replaceAll("\\",""),r=JSON.parse(n);t.location=r}else t.location=e.location;return!0})),w(Eb(Eb({},O),{},{drivers:t}))};return m.on("drivers_update",e),m.on("tracking_driver",t),function(){m.off("drivers_update",e),m.off("tracking_driver",t)}}}),[m,null==b?void 0:b.loading,O.drivers]),Object(i.useEffect)((function(){null!=b&&b.user&&!t&&m.join("drivers")}),[m,null==b?void 0:b.user,c]),Object(i.useEffect)((function(){R(O.drivers)}),[O.drivers]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,wb({},e,{driversList:O,onlineDrivers:S,offlineDrivers:C,driverActionStatus:h,driversIsOnline:A,driversSubfilter:k,searchValue:L,handleChangeSearch:function(e){e!==L&&B(e)},handleChangeDriverIsOnline:function(e){T(e)},handleChangeDriversSubFilter:function(e){D(e)},handleAssignDriver:F})))};function kb(){return kb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kb.apply(this,arguments)}function Db(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ub(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Db(Object(n),!0).forEach((function(t){Lb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Db(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bb(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Fb(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Bb(a,r,o,i,u,"next",e)}function u(e){Bb(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Rb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}_b.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_b.defaultProps={propsToFetch:["id","name","lastname","assigned_orders_count","available","phone","cellphone","location","photo","qualification","last_order_assigned_at"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Nb=function(e){var t=e.UIComponent,n=Rb(yn(),1)[0],r=n.token,o=n.loading,s=Rb(rn(),1)[0],c=Rb(Object(i.useState)({lapse:"today",userIds:null,app_id:"all",driver_groups_ids:null,franchises_id:null,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),2),l=c[0],f=c[1],p=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),d=p[0],y=p[1],h=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),v=h[0],m=h[1],b=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),g=b[0],O=b[1],w=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),j=w[0],S=w[1],E=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),P=E[0],C=E[1],I=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),x=I[0],A=I[1],T=Rb(Object(i.useState)({loading:!1,data:{},error:null}),2),_=T[0],k=T[1],D=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),U=D[0],L=D[1],B=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),F=B[0],R=B[1],M=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),N=M[0],z=M[1],G=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),Y=G[0],q=G[1],$=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),J=$[0],V=$[1],H=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),W=H[0],K=H[1],X=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),Z=X[0],Q=X[1],ee=function(e){var t,n="".concat(s.root,"/reports/").concat(e),r="lapse=".concat(null==l?void 0:l.lapse,"&timezone=").concat(null==l?void 0:l.timeZone);return null!=l&&l.userIds&&(r="".concat(r,"&drivers=").concat(null==l||null===(t=l.userIds)||void 0===t?void 0:t.toString())),null!=l&&l.app_id&&"all"!==l.app_id&&(r="".concat(r,"&app_id=").concat(null==l?void 0:l.app_id)),null!=l&&l.driver_groups_ids&&(r="".concat(r,"&driver_groups_ids=").concat(JSON.stringify(null==l?void 0:l.driver_groups_ids))),null!=l&&l.franchises_id&&(r="".concat(r,"&franchises_id=").concat(JSON.stringify(null==l?void 0:l.franchises_id))),"".concat(n,"?").concat(r)},te=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Ub(Ub({},d),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("driver_orders_v2"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,y(Ub(Ub({},d),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),y(Ub(Ub({},d),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,m(Ub(Ub({},v),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("driver_sales_v2"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,m(Ub(Ub({},v),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),m(Ub(Ub({},v),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(Ub(Ub({},g),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_orders_status"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,O(Ub(Ub({},g),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),O(Ub(Ub({},g),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,S(Ub(Ub({},j),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_top_orders"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,S(Ub(Ub({},j),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),S(Ub(Ub({},j),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,L(Ub(Ub({},U),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("customer_satisfaction"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,L(Ub(Ub({},U),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),L(Ub(Ub({},U),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,V(Ub(Ub({},J),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_complete_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,V(Ub(Ub({},J),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),V(Ub(Ub({},J),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,C(Ub(Ub({},P),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_spend_times"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,C(Ub(Ub({},P),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),C(Ub(Ub({},P),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,A(Ub(Ub({},x),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_available_times"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,A(Ub(Ub({},x),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),A(Ub(Ub({},x),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,k(Ub(Ub({},_),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_busy_times"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,k(Ub(Ub({},_),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),k(Ub(Ub({},_),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,R(Ub(Ub({},F),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_accept_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,R(Ub(Ub({},F),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),R(Ub(Ub({},F),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,z(Ub(Ub({},N),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_arrived_pickup_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,z(Ub(Ub({},N),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),z(Ub(Ub({},N),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,q(Ub(Ub({},Y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_order_location"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,q(Ub(Ub({},Y),{},s?{loading:!0,error:c}:{loading:!1,locations:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),q(Ub(Ub({},Y),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,K(Ub(Ub({},W),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_pickup_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,K(Ub(Ub({},W),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),K(Ub(Ub({},W),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Fb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Q(Ub(Ub({},Z),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_delivery_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,Q(Ub(Ub({},Z),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),Q(Ub(Ub({},Z),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){te(),ne(),re(),oe(),ue(),se(),ce(),ae(),le(),ie(),fe(),de(),pe(),ye()}),[l]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,kb({},e,{filterList:l,ordersList:d,salesList:v,orderStatusList:g,topOrdersList:j,customerSatisfactionList:U,ordersAcceptSpendList:F,arrivedPickUpSpendList:N,orderLocationList:Y,spendTimesList:P,availableTimesList:x,busyTimesList:_,completeSpendList:J,pickUpSpendList:W,deliverySpendList:Z,handleChangeFilterList:f})))};function zb(){return zb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zb.apply(this,arguments)}function Gb(e){return function(e){if(Array.isArray(e))return Kb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yb(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jb(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Vb(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Jb(a,r,o,i,u,"next",e)}function u(e){Jb(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Hb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Wb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wb(e,t){if(e){if("string"==typeof e)return Kb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kb(e,t):void 0}}function Kb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Nb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Nb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Xb=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.propsToFetch,s=e.isSearchByPromotionName,c=e.isSearchByPromotionDescription,l=Hb(rn(),1)[0],f=Hb(yn(),1)[0].token,p=Hb(Bn(),2)[1],d=Hb(Br(),2)[1].showToast,y=Hb(Object(i.useState)({promotions:[],loading:!1,error:null}),2),h=y[0],v=y[1],m=Hb(Object(i.useState)({loading:!1,error:null}),2),b=m[0],g=m[1],O=Hb(Object(i.useState)(null),2),w=O[0],j=O[1],S=Hb(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),E=S[0],P=S[1],C=Hb(Object(i.useState)(null),2),I=C[0],x=C[1],A=Hb(Object(i.useState)({loading:!1,sites:[],error:null}),2),T=A[0],_=A[1],k=Hb(Object(i.useState)({loading:!1,paymethods:[],error:null}),2),D=k[0],U=k[1],L=Hb(Object(i.useState)({businesses:[],loading:!1,error:null}),2),B=L[0],F=L[1],R=function(){var e=Vb(a.a.mark((function e(t,n){var r,i,u,p,d,y,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(qb(qb({},h),{},{loading:!0})),r=null,i=[],w&&(u=[],s&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}),c&&u.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(r={conditions:i,conector:"AND"}),p={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},d=r?"".concat(l.root,"/offers?page=").concat(t,"&page_size=").concat(n,"&params=").concat(o.toString(),"&&where=").concat(JSON.stringify(r)):"".concat(l.root,"/offers?page=").concat(t,"&page_size=").concat(n,"&params=").concat(o.toString()),e.next=10,fetch(d,p);case 10:return y=e.sent,e.next=13,y.json();case 13:(m=e.sent).error?v(qb(qb({},h),{},{loading:!1,error:m.result})):(v({promotions:m.result,loading:!1,error:null}),P(qb(qb({},E),{},{currentPage:m.pagination.current_page,pageSize:0===m.pagination.page_size?E.pageSize:m.pagination.page_size,totalPages:m.pagination.total_pages,totalItems:m.pagination.total,from:m.pagination.from,to:m.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),v(qb(qb({},h),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Vb(a.a.mark((function e(t,n){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,p("LOADING","Loading")),g(qb(qb({},b),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({enabled:n})},e.next=6,fetch("".concat(l.root,"/offers/").concat(t),r);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error||(u=h.promotions.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0})),v(qb(qb({},h),{},{promotions:u})),d(Dr.Success,p("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Vb(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(qb(qb({},T),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(l.root,"/sites"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error||_({sites:r.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),_(qb(qb({},T),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Vb(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(qb(qb({},D),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(l.root,"/paymethods?where=").concat(JSON.stringify({enabled:!0})),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error||U({paymethods:r.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),U(qb(qb({},D),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Vb(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(qb(qb({},B),{},{loading:!1})),e.next=4,l.setAccessToken(f).businesses().select(["name","logo","slug"]).asDashboard().get();case 4:t=e.sent,n=t.content,r=n.error,o=n.result,r||F(qb(qb({},B),{},{loading:!1,businesses:o})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),F(qb(qb({},B),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h.loading||R(1,E.pageSize)}),[w]),Object(i.useEffect)((function(){N(),G(),z()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,zb({},e,{sitesState:T,businessesList:B,paymethodsState:D,promotionListState:h,paginationProps:E,setPaginationProps:P,searchValue:w,onSearch:j,getPromotions:R,dataSelected:I,handleDragStart:function(e,t){e.dataTransfer.setData("transferPromotionId",t.id);var n=document.createElement("div");n.classList.add("ghostDragging"),n.innerHTML=null==t?void 0:t.name,document.body.appendChild(n),e.dataTransfer.setDragImage(n,0,0)},handleAllowDrop:function(e,t){e.preventDefault(),x(t)},handleDrop:function(e,t){e.preventDefault();var n=parseInt(e.dataTransfer.getData("transferPromotionId")),r=h.promotions.find((function(e){return e.id===n})),o=null==r?void 0:r.rank,a=null==t?void 0:t.rank;null===o&&null===a&&(a=1)},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);x("")},handleEnablePromotion:M,handleSuccessUpdatePromotions:function(e){v(qb(qb({},h),{},{promotions:e}))},handleSuccessAddPromotion:function(e){var t=[].concat(Gb(h.promotions),[e]);P(qb(qb({},E),{},{to:(null==E?void 0:E.to)+1,total:(null==E?void 0:E.total)+1})),v(qb(qb({},h),{},{promotions:t}))},handleSuccessDeletePromotion:function(e){var t=h.promotions.filter((function(t){return t.id!==e}));P(qb(qb({},E),{},{total:(null==E?void 0:E.total)-1})),v(qb(qb({},h),{},{promotions:t}))}})))};function Zb(){return Zb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zb.apply(this,arguments)}function Qb(e){return Qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qb(e)}function eg(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function tg(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){eg(a,r,o,i,u,"next",e)}function u(e){eg(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ng(e){return function(e){if(Array.isArray(e))return sg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ug(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function og(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rg(Object(n),!0).forEach((function(t){ag(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ag(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ig(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ug(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ug(e,t){if(e){if("string"==typeof e)return sg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sg(e,t):void 0}}function sg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Xb.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},propsToFetch:["name","auto","enabled","end","description","image","label","order_priority","sites","stackable","start","target","type","limit_per_user","user_order_count","user_order_count_condition","valid_from_after_user_last_order_minutes","valid_until_after_user_last_order_minutes","users","delivery_zones","paymethods","order_types_allowed","max_discount","rank","rate_type","rate","public","coupon","businesses","condition_type","minimum","products","categories","schedule","limit","include_options"]};var cg=function(e){var t=e.promotion,n=e.promotionsList,r=e.businessesList,o=e.sitesState,s=e.UIComponent,c=e.handleSuccessUpdatePromotions,l=e.handleSuccessAddPromotion,f=e.handleSuccessDeletePromotion,p=ig(Bn(),2)[1],d=ig(rn(),1)[0],y=ig(yn(),1)[0].token,h=ig(Br(),2)[1].showToast,v=ig(Object(i.useState)({promotion:t,loading:!1,error:null}),2),m=v[0],b=v[1],g=ig(Object(i.useState)({loading:!1,changes:{}}),2),O=g[0],w=g[1],j=ig(Object(i.useState)({loading:!1,error:null}),2),S=j[0],E=j[1],P=ig(Object(i.useState)(!1),2),C=P[0],I=P[1],x=ig(Object(i.useState)([]),2),A=x[0],T=x[1],_=ig(Object(i.useState)([]),2),k=_[0],D=_[1],U=ig(Object(i.useState)({}),2),L=U[0],B=U[1],F=ig(Object(i.useState)({}),2),R=F[0],M=F[1],N=function(){return w({loading:!1,changes:{}})},z=function(){var e=tg(a.a.mark((function e(){var r,o,i,u,s,l,f,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u in e.prev=0,h(Dr.Info,p("LOADING","Loading")),E({loading:!0,error:null}),i=og({},null==O?void 0:O.changes))("object"===Qb(i[u])&&null!==i[u]||Array.isArray(i[u]))&&(i[u]=JSON.stringify(i[u]));return s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(i)},e.next=8,fetch("".concat(d.root,"/offers/").concat(null!==(r=t.id)&&void 0!==r?r:null===(o=m.promotion)||void 0===o?void 0:o.id),s);case 8:return l=e.sent,e.next=11,l.json();case 11:(f=e.sent).error?E({loading:!1,error:f.result}):(b(og(og({},m),{},{promotion:f.result})),E({loading:!1,error:null}),c&&(v=n.filter((function(e){return e.id===t.id&&Object.assign(e,f.result),!0})),c(v)),N(),h(Dr.Success,p("PROMOTION_SAVED","Promotion saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),E({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var t=tg(a.a.mark((function t(n){var r,o,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,p("LOADING","Loading")),E({loading:!0,error:null}),null!=(r=og({},null==O?void 0:O.changes))&&r.schedule&&(r.schedule=JSON.stringify(r.schedule)),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(r)},t.next=8,fetch("".concat(d.root,"/offers"),o);case 8:return i=t.sent,t.next=11,i.json();case 11:(u=t.sent).error?E({loading:!1,error:u.result}):(E({error:null,loading:!1}),b(og(og({},m),{},{promotion:u.result})),l&&l(u.result),h(Dr.Success,p("PROMOTION_ADDED","Promotion added")),I(!1),!n&&e.onClose&&e.onClose()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),E({loading:!1,error:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),Y=function(){var n=tg(a.a.mark((function n(){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(Dr.Info,p("LOADING","Loading")),E(og(og({},S),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}},n.next=6,fetch("".concat(d.root,"/offers/").concat(t.id),r);case 6:return o=n.sent,n.next=9,o.json();case 9:n.sent.error||(f&&f(t.id),h(Dr.Success,p("OFFER_DELETED","Offer deleted")),e.onClose&&e.onClose()),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),E({loading:!1,error:[n.t0.message]});case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(0===Object.keys(t).length)I(!0),w(og(og({},O),{},{changes:{enabled:!0,auto:!1,public:!0,condition_type:1,type:1,target:1,rate_type:1,stackable:!1,rate:5}})),T([]),D([]),B({}),M({});else{var e,n,r,o;I(!1),N();var a=null==t||null===(e=t.businesses)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(ng(e),[t.id])}),[]);T(a||[]);var i=null==t||null===(n=t.sites)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(ng(e),[t.id])}),[]);D(i||[]);var u=null==t||null===(r=t.products)||void 0===r?void 0:r.reduce((function(e,t){return[].concat(ng(e),[t.id])}),[]);B(u);var s=null==t||null===(o=t.categories)||void 0===o?void 0:o.reduce((function(e,t){return[].concat(ng(e),[t.id])}),[]);M(s)}b(og(og({},m),{},{promotion:t}))}),[t]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,Zb({},e,{isAddMode:C,promotionState:m,formState:O,actionState:S,selectedBusinessIds:A,selectedSitesIds:k,selectedProductsIds:L,setSelectedProductsIds:B,selectedCategoryIds:R,setSelectedCategoryIds:M,handleChangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){w(og(og({},O),{},{changes:og(og({},O.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){w(og(og({},O),{},{changes:og(og({},O.changes),{},ag({},e.target.name,e.target.value))}))},handleUpdateClick:z,handleAddPromotion:G,handleDeletePromotion:Y,handleChangeItem:function(e){w(og(og({},O),{},{changes:og(og({},O.changes),e)}))},handleRemoveKey:function(e){var t=og({},null==O?void 0:O.changes);delete t[e],w(og(og({},O),{},{changes:t}))},handleSelectSite:function(e,n){var r,o,a,i=[];null!==(r=O.changes)&&void 0!==r&&r.sites?i=ng(null===(o=O.changes)||void 0===o?void 0:o.sites):null!=t&&t.sites&&(i=null==t||null===(a=t.sites)||void 0===a?void 0:a.reduce((function(e,t){return[].concat(ng(e),[t.id])}),[]));e?i.push(n):i=i.filter((function(e){return e!==n})),D(i),w(og(og({},O),{},{changes:og(og({},O.changes),{},{sites:i})}))},handleSelectAllBusiness:function(e){var t,n=null==r||null===(t=r.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(ng(e),[t.id])}),[]),o=[];o=e?ng(n):[],T(o),w(og(og({},O),{},{changes:og(og({},O.changes),{},{businesses:o})}))},handleSelectBusiness:function(e,t){var n=ng(A),r=[];r=t?[].concat(ng(n),[e]):n.filter((function(t){return t!==e})),T(r),w(og(og({},O),{},{changes:og(og({},O.changes),{},{businesses:r})}))},handleSelectAllSites:function(e){var t,n=null===(t=o.sites)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(ng(e),[t.id])}),[]),r=[];r=e?ng(n):[],D(r),w(og(og({},O),{},{changes:og(og({},O.changes),{},{sites:r})}))}})))};cg.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var lg=function(e){var t=e.onFiles,n=e.childRef,r=e.childId,o=e.children,a=e.className,s=e.style,c=e.accept,l=e.disabled,f=Object(i.useRef)(null);return u.a.createElement("div",{draggable:!0,onClick:function(e){n||r||f.current.click()},style:s,className:a},u.a.createElement("input",{type:"file",id:r,style:{display:"none"},onChange:function(e){e.preventDefault(),e.stopPropagation(),t(e.target.files)},onClick:function(e){return e.stopPropagation()},ref:function(e){f.current=e,n&&n(e)},accept:c,disabled:l}),o)};function fg(){return fg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fg.apply(this,arguments)}function pg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pg(Object(n),!0).forEach((function(t){yg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hg(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function vg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bg=function(e){var t=e.UIComponent,n=e.filterValues,r=vg(rn(),1)[0],o=vg(yn(),1)[0],s=o.token,c=o.loading,l=vg(Object(i.useState)({loading:!1,error:null,result:null}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(t){var o,i,u,l,d,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(dg(dg({},f),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},i=[],t&&Object.keys(n).length&&(void 0!==n.statuses&&(n.statuses.length>0?i.push({attribute:"status",value:n.statuses}):i.push({attribute:"status",value:[0,1,2,3,4,5,6,7,8,9,10,11,12]})),void 0!==n.deliveryFromDatetime&&null!==n.deliveryFromDatetime&&i.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(n.deliveryFromDatetime)}}),void 0!==n.deliveryEndDatetime&&null!==n.deliveryEndDatetime&&i.push({attribute:"delivery_datetime",value:{condition:"<=",value:n.deliveryEndDatetime}}),void 0!==n.businessIds&&0!==n.businessIds.length&&i.push({attribute:"business_id",value:n.businessIds}),void 0!==n.driverIds&&0!==n.driverIds.length&&i.push({attribute:"driver_id",value:n.driverIds}),void 0!==n.deliveryTypes&&0!==n.deliveryTypes.length&&i.push({attribute:"delivery_type",value:n.deliveryTypes}),void 0!==n.paymethodIds&&0!==n.paymethodIds.length&&i.push({attribute:"paymethod_id",value:n.paymethodIds})),u=t?"".concat(r.root,"/orders.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(i)):"".concat(r.root,"/orders.csv?mode=dashboard&orderBy=id"),e.next=10,fetch(u,o);case 10:return l=e.sent,e.next=13,l.json();case 13:d=e.sent,y=d.error,h=d.result,p(dg(dg({},f),{},y?{loading:!0,error:h}:{loading:!1,result:h})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p(dg(dg({},f),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hg(a,r,o,i,u,"next",e)}function u(e){hg(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,fg({},e,{actionStatus:f,getCSV:d})))};function gg(){return gg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gg.apply(this,arguments)}function Og(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function wg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wg(Object(n),!0).forEach((function(t){Sg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bg.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Cg=function(e){var t=e.UIComponent,n=e.appId,r=e.debug,o=e.version,s=e.language,c=e.domain,l=e.handleButtonFacebookLoginClick,f=e.handleSuccessFacebookLogin,p=e.handleSuccessFacebookLogout,d=Eg(rn(),1)[0],y=Eg(Object(i.useState)({loading:!1,result:{error:!1}}),2),h=y[0],v=y[1],m=Eg(Object(i.useState)({ready:!1,logged:!1}),2),b=m[0],g=m[1],O=!1;Object(i.useEffect)((function(){if(!window.document.getElementById("facebook-jssdk")){window.fbAsyncInit=function(){window.FB.init({appId:n,cookie:!0,xfbml:!1,version:o,status:!0}),!O&&g(jg(jg({},b),{},{ready:!0})),window.FB.getLoginStatus((function(e){"connected"===e.status&&!O&&g(jg(jg({},b),{},{logged:!0}))}))};var e=window.document.createElement("script"),t=window.document.getElementsByTagName("script")[0];e.id="facebook-jssdk",e.async=!0,e.defer=!0,e.src="https://".concat(c,"/").concat(s,"/sdk").concat(r?"/debug":"",".js"),t.parentNode.insertBefore(e,t)}}),[]),Object(i.useEffect)((function(){return function(){O=!0}}),[]);var w=function(){var e,t=(e=a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=3;break}return l(t),e.abrupt("return");case 3:return e.prev=3,v(jg(jg({},h),{},{loading:!0})),e.next=7,d.users().authFacebook({access_token:null===(n=t.authResponse)||void 0===n?void 0:n.accessToken});case 7:r=e.sent,v({result:r.content,loading:!1}),r.content.error?j():f&&f(r.content.result),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),v({result:{error:!0,result:e.t0.message},loading:!1});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Og(a,r,o,i,u,"next",e)}function u(e){Og(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),j=function(e){window.FB&&(v(jg(jg({},h),{},{loading:!0})),window.FB.logout((function(e){v({loading:!1,result:{error:!1}}),g(jg(jg({},b),{},{logged:!1})),p&&p(e)})))};return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,gg({},e,{formState:h,facebookStatus:b,handleFacebookLogout:j,handleFacebookLogin:function(e){window.FB&&(v(jg(jg({},h),{},{loading:!0})),window.FB.login((function(e){"connected"===e.status?(v({loading:!1,result:{error:!1}}),g(jg(jg({},b),{},{logged:!0})),w(e)):v({loading:!1,result:{error:!0,result:"Error login with Facebook"}})})))}})))};function Ig(){return Ig=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ig.apply(this,arguments)}function xg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ag(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xg(Object(n),!0).forEach((function(t){Tg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _g(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function kg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Cg.propTypes={UIComponent:c.a.elementType,handleButtonForgotPassowrdClick:c.a.func,handleSuccessForgotPassoword:c.a.func,appId:c.a.string.isRequired,debug:c.a.bool,version:c.a.string,language:c.a.string,domain:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Cg.defaultProps={version:"v7.0",language:"en_US",domain:"connect.facebook.net",beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ug=function(e){var t=e.UIComponent,n=e.defaultEmail,r=e.handleButtonForgotPasswordClick,o=e.handleSuccessForgotPassword,s=kg(rn(),1)[0],c=kg(Bn(),2)[1],l=kg(tr(),1)[0].configs,f=kg(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],y=kg(Object(i.useState)({email:n||""}),2),h=y[0],v=y[1],m=kg(Object(i.useState)(null),2),b=m[0],g=m[1],O=kg(Object(i.useState)(!1),2),w=O[0],j=O[1],S=function(){var e,t=(e=a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=4;break}if(null!==b){e.next=4;break}return d({result:{error:!0,result:c("RECAPTCHA_VALIDATION_IS_REQUIRED","The captcha validation is required")},loading:!1}),e.abrupt("return");case 4:return e.prev=4,d(Ag(Ag({},p),{},{loading:!0})),n=t||h,e.next=9,s.users().forgotPassword(n);case 9:r=e.sent,d({result:r.content,loading:!1}),w&&(window.grecaptcha.reset(),g(null)),r.content.error||o&&o(h.email),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),d({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[4,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_g(a,r,o,i,u,"next",e)}function u(e){_g(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;j((null==s?void 0:s.project)&&l&&Object.keys(l).length>0&&"1"===(null==l||null===(e=l.security_recaptcha_auth)||void 0===e?void 0:e.value))}),[l,null==s?void 0:s.project]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ig({},e,{formState:p,formData:h,hanldeChangeInput:function(e){v(Ag(Ag({},h),{},Tg({},e.target.name,e.target.value)))},handleButtonForgotPasswordClick:r||S,isReCaptchaEnable:w,handleReCaptcha:g})))};function Lg(){return Lg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lg.apply(this,arguments)}function Bg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ug.propTypes={UIComponent:c.a.elementType,handleButtonForgotPasswordClick:c.a.func,handleSuccessForgotPassword:c.a.func,defaultEmail:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToSignup:c.a.string,linkToLogin:c.a.string,elementLinkToSignup:c.a.element,elementLinkToLogin:c.a.element},Ug.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Rg=function(e){return function(t){var n=t.apiKey;n||console.warn("Prop `apiKey` is required to use Google Maps components.");var r=Bg(Object(i.useState)(!1),2),o=r[0],a=r[1];return Object(i.useEffect)((function(){if(n){var e=null;if(!window.document.getElementById("google-maps-cluster")){var t=window.document.createElement("script");t.id="google-maps-cluster",t.async=!0,t.defer=!0,t.src="https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js",window.document.body.appendChild(t)}if(!window.document.getElementById("__googleMapsScriptId")||!window.document.getElementById("google-maps-cluster")){window.googleAsyncInit=function(){a(!0)};var r=window.document.createElement("script");return r.id="__googleMapsScriptId",r.async=!0,r.defer=!0,r.src="https://maps.googleapis.com/maps/api/js?key=".concat(n,"&libraries=places,geometry,visualization,drawing&callback=googleAsyncInit"),window.document.body.appendChild(r),function(){e&&clearInterval(e)}}"undefined"!=typeof google?a(!0):e=setInterval((function(){"undefined"!=typeof google&&(a(!0),clearInterval(e))}),100)}}),[n]),u.a.createElement(e,Lg({},t,{googleReady:o}))}};function Mg(){return Mg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mg.apply(this,arguments)}function Ng(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||zg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zg(e,t){if(e){if("string"==typeof e)return Gg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gg(e,t):void 0}}function Gg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Rg.propTypes={apiKey:c.a.string.isRequired},Rg.defaultProps={};var Yg=function(e){var t=e.googleReady,n=e.onChangeAddress,r=e.types,o=e.fields,a=e.countryCode,s=e.childRef,c=Object(i.useRef)(),l={};Object.entries(e).forEach((function(e){var t=Ng(e,2),n=t[0],r=t[1];-1===["googleReady","apiKey","onChangeAddress","setValue","childRef","countryCode","types","fields"].indexOf(n)&&(l[n]=r)}));var f={types:r,fields:o};return"*"!==a&&(f.componentRestrictions={country:a}),Object(i.useEffect)((function(){var e,r,o;if(t&&n&&null!==(e=window.google)&&void 0!==e&&null!==(r=e.maps)&&void 0!==r&&null!==(o=r.places)&&void 0!==o&&o.Autocomplete){var a=new window.google.maps.places.Autocomplete(c.current,f);a.addListener("place_changed",(function(){var e,t=a.getPlace(),r=null,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=zg(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(t.address_components);try{for(o.s();!(e=o.n()).done;){var i=e.value;if("postal_code"===i.types[0]){r=i.short_name;break}}}catch(e){o.e(e)}finally{o.f()}var u={address:t.formatted_address,location:{lat:t.geometry.location.lat(),lng:t.geometry.location.lng()},utc_offset:t.utc_offset_minutes,map_data:{library:"google",place_id:t.place_id}};r&&(u.zipcode=r),n(u)}))}}),[t]),Object(i.useEffect)((function(){var e=setInterval((function(){c.current.attributes.autocomplete&&"new-field"===c.current.attributes.autocomplete.value&&clearInterval(e),c.current.setAttribute("autocomplete","new-field")}),100);return function(){return clearInterval(e)}})),u.a.createElement("input",Mg({},l,{autoComplete:"new-field",disabled:!e.googleReady,ref:function(e){c.current=e,s&&s(e)}}))};Yg.propTypes={apiKey:c.a.string.isRequired,fields:c.a.arrayOf(s.string),types:c.a.arrayOf(s.string),countryCode:c.a.string,onChangeAddress:c.a.func},Yg.defaultProps={types:[],fields:["place_id","formatted_address","geometry","utc_offset_minutes","address_components"],countryCode:"*"};var qg=Rg(Yg);function $g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$g(Object(n),!0).forEach((function(t){Vg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hg(e){return function(e){if(Array.isArray(e))return Xg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Kg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kg(e,t){if(e){if("string"==typeof e)return Xg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xg(e,t):void 0}}function Xg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zg=function(e){var t=e.googleReady,n=e.locations,r=e.mapControls,o=e.setErrors,a=e.isSetInputs,s=e.fixedLocation,c=e.handleChangeAddressMap,l=e.maxLimitLocation,f=e.businessMap,p=e.onBusinessClick,d=e.isHeatMap,y=e.isHeat,h=e.markerIcon,v=e.isFitCenter,m=e.handleChangeCenter,b=e.data,g=e.fillStyle,O=Wg(Pr(),1)[0].optimizeImage,w=Wg(zn(),1)[0],j=Object(i.useRef)(),S=Wg(Object(i.useState)(null),2),E=S[0],P=S[1],C=Wg(Object(i.useState)(null),2),I=C[0],x=C[1],A=Wg(Object(i.useState)([]),2),T=A[0],_=A[1],k=Wg(Object(i.useState)(null),2),D=k[0],U=k[1],L=Wg(Object(i.useState)(null),2),B=L[0],F=L[1],R=Wg(Object(i.useState)(null),2),M=R[0],N=R[1],z=s||e.location,G={lat:null==z?void 0:z.lat,lng:null==z?void 0:z.lng},Y=function(e){for(var t=new window.google.maps.LatLngBounds,r=0,a=function(o){var a,i,u,s,c,l=null;(1===o||f)&&(l=O(null===(c=n[o])||void 0===c?void 0:c.icon,"r_max"));d&&h&&(l=h);var y=new window.google.maps.Marker({position:new window.google.maps.LatLng(null===(a=n[o])||void 0===a?void 0:a.lat,null===(i=n[o])||void 0===i?void 0:i.lng),map:e,title:null===(u=n[o])||void 0===u?void 0:u.slug,icon:null!==(s=n[o])&&void 0!==s&&s.icon?{url:l||n[o].icon,scaledSize:new window.google.maps.Size(45,45)}:d?{url:l,scaledSize:new window.google.maps.Size(40,40)}:null});f?$(E,y,y.getPosition())?(y.addListener("click",(function(){var e;return p(null===(e=n[o])||void 0===e?void 0:e.slug)})),t.extend(y.position),_((function(e){return[].concat(Hg(e),[y])})),r+=1):y.setMap(null):(t.extend(y.position),_((function(e){return[].concat(Hg(e),[y])})))},i=0;i<n.length;i++)a(i);0===r&&o&&o("ERROR_NOT_FOUND_BUSINESSES"),(null==e?void 0:e.fitBounds)&&e.fitBounds(t),U(t)},q=function(e){if(a){(new window.google.maps.Geocoder).geocode({latLng:e},(function(t){var n=null;if(t&&t.length>0){var r,a,i,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Kg(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(t[0].address_components);try{for(u.s();!(i=u.n()).done;){var s=i.value;if("postal_code"===s.types[0]){n=s.short_name;break}}}catch(e){u.e(e)}finally{u.f()}var l={address:t[0].formatted_address,location:{lat:null==e?void 0:e.lat(),lng:null==e?void 0:e.lng()},zipcode:n};c&&c(l),G.lat=null===(r=l.location)||void 0===r?void 0:r.lat,G.lng=null===(a=l.location)||void 0===a?void 0:a.lng}else I&&I.setPosition(G),o&&o("ERROR_NOT_FOUND_ADDRESS");null!=G&&G.lat&&null!=G&&G.lng&&E&&E.panTo(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng))}))}else{var t={lat:null==e?void 0:e.lat(),lng:null==e?void 0:e.lng()};c&&c({location:t}),G.lat=null==t?void 0:t.lat,G.lng=null==t?void 0:t.lng,t.lat&&t.lng&&E&&E.panTo(new window.google.maps.LatLng(null==t?void 0:t.lat,null==t?void 0:t.lng))}},$=function(e,t,n){var r=new window.google.maps.LatLng(null==n?void 0:n.lat(),null==n?void 0:n.lng()),a=new window.google.maps.LatLng(null==z?void 0:z.lat,null==z?void 0:z.lng),i=window.google.maps.geometry.spherical.computeDistanceBetween(r,a);if(f){return i<=2e4}l?i<=l?q(n):null!=G&&G.lat&&null!=G&&G.lng&&(t.setPosition(G),e.panTo(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng)),o&&o("ERROR_MAX_LIMIT_LOCATION")):q(n)};return Object(i.useEffect)((function(){t&&E&&I&&d&&M&&(B.setMap(B.getMap()?null:E),B.getMap()?M.clearMarkers():M.addMarkers(T))}),[y]),Object(i.useEffect)((function(){t&&E&&I&&v&&E.addListener("center_changed",(function(){var e=setTimeout((function(){I.setPosition(E.getCenter()),m&&m(E.getCenter())}),200);return function(){return clearTimeout(e)}}))}),[I]),Object(i.useEffect)((function(){if(t){var e,o=new window.google.maps.Map(j.current,{zoom:null!==(e=z.zoom)&&void 0!==e?e:r.defaultZoom,center:G,zoomControl:null==r?void 0:r.zoomControl,streetViewControl:null==r?void 0:r.streetViewControl,fullscreenControl:null==r?void 0:r.fullscreenControl,mapTypeControl:null==r?void 0:r.mapTypeControl,mapTypeId:null==r?void 0:r.mapTypeId,mapTypeControlOptions:Jg({style:window.google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:window.google.maps.ControlPosition.TOP_LEFT},null==r?void 0:r.mapTypeControlOptions)}),a=null;P(o),n?(f&&(a=new window.google.maps.Marker({position:new window.google.maps.LatLng(G.lat,G.lng),map:o}),x(a)),Y(o),a=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng),map:o,opacity:d?0:1}),x(a)):(a=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng),map:o,draggable:!(null==r||!r.isMarkerDraggable)}),x(a)),b&&b.forEach((function(e){var t;if(1===e.type&&null!=e&&null!==(t=e.data)&&void 0!==t&&t.center){var n=new window.google.maps.Circle(Jg(Jg({},g),{},{draggable:!1,map:o,center:e.data.center,radius:e.data.radio}));console.log(n)}if(2===e.type&&Array.isArray(e.data)){var r=new window.google.maps.Polygon(Jg(Jg({},g),{},{draggable:!1,map:o,paths:e.data}));console.log(r)}}))}}),[t]),Object(i.useEffect)((function(){if(!f&&t&&E&&I){if(window.google.maps.event.addListener(I,"dragend",(function(){$(E,I,I.getPosition())})),window.google.maps.event.addListener(I,"drag",(function(){w.emit("map_is_dragging",!0)})),null!=r&&r.isMarkerDraggable&&(window.google.maps.event.addListener(E,"drag",(function(){I.setPosition(E.getCenter()),w.emit("map_is_dragging",!0)})),window.google.maps.event.addListener(E,"dragend",(function(){I.setPosition(E.getCenter()),$(E,I,E.getCenter())}))),d&&!M&&window.google.maps.visualization){var e=new window.google.maps.visualization.HeatmapLayer({data:null==n?void 0:n.map((function(e){return new window.google.maps.LatLng(e.lat,e.lng)})),map:null,radius:17});if(F(e),window.MarkerClusterer){var o=new window.MarkerClusterer(E,T,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"});N(o)}}return function(){window.google.maps.event.clearListeners(I,"dragend"),window.google.maps.event.clearListeners(E,"drag"),window.google.maps.event.clearListeners(E,"dragend")}}}),[I,E,z]),Object(i.useEffect)((function(){t&&(f&&E&&Y(E),d&&(null==n?void 0:n.length)>0||(G.lat=null==z?void 0:z.lat,G.lng=null==z?void 0:z.lng,G.lat&&G.lng&&(I&&I.setPosition(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng)),E&&E.panTo(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng)))))}),[z]),Object(i.useEffect)((function(){if(!f){var e=setInterval((function(){if(t&&E){var e=n[0],r=new window.google.maps.LatLng(null==e?void 0:e.lat,null==e?void 0:e.lng);T[0]&&T[0].setPosition(r),T.forEach((function(e){return D.extend(e.position)})),E.fitBounds(D)}}),1e3);return function(){return clearInterval(e)}}}),[n]),t&&u.a.createElement("div",{id:"map",ref:j,style:{width:"70%",height:"50%",position:"absolute"}})};Zg.propTypes={UIComponent:c.a.elementType,maxLimitLocation:c.a.number,handleChangeAddressMap:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Qg=Rg(Zg);function eO(){return eO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eO.apply(this,arguments)}function tO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||nO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nO(e,t){if(e){if("string"==typeof e)return rO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rO(e,t):void 0}}function rO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Qg.propTypes={apiKey:c.a.string.isRequired,onAddress:c.a.func,onError:c.a.func};var oO=function(e){var t=e.UIComponent,n=e.googleReady,r=e.onData,o=e.onError,a=e.onAddress,s=tO(Bn(),2)[1],c=tO(Object(i.useState)(!1),2),l=c[0],f=c[1],p=void 0!==n;return navigator.geolocation&&u.a.createElement(t,eO({},e,{handleGPS:function(){p&&!n||l||(f(!0),navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};p&&a?(new window.google.maps.Geocoder).geocode({location:t},(function(e,n){f(!1);var r,i=null,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=nO(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(e[0].address_components);try{for(u.s();!(r=u.n()).done;){var c=r.value;if("postal_code"===c.types[0]){i=c.short_name;break}}}catch(e){u.e(e)}finally{u.f()}"OK"===n?a({address:e[0].formatted_address,location:t,utc_offset:(new Date).getTimezoneOffset(),zipcode:i,map_data:{library:"google",place_id:e[0].place_id}}):o&&o(s("ERROR_GPS_BUTTON","Error to get result with gps button"))})):(f(!1),r&&r({location:t,utc_offset:(new Date).getTimezoneOffset()}))}),(function(e){f(!1),o&&o(s("ERROR_GPS_BUTTON",e.message))}),{timeout:5e3,enableHighAccuracy:!0}))},isGoogleButton:p,googleReady:n,isLoading:l}))};oO.propTypes={onData:c.a.func,onError:c.a.func};var aO=Rg(oO);aO.propTypes={apiKey:c.a.string.isRequired,onAddress:c.a.func,onError:c.a.func};var iO=function(e){var t=e.children,n=e.tagId;return Object(i.useEffect)((function(){if(n){!function(e,t,n,r,o){e[r]=e[r]||[],e[r].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),u="dataLayer"!==r?"&l="+r:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+u,a.parentNode.insertBefore(i,a),window.document.head.appendChild(i)}(window,document,"script","dataLayer",n)}}),[n]),u.a.createElement(u.a.Fragment,null,t)};function uO(){return uO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uO.apply(this,arguments)}function sO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=hO(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function cO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function lO(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){cO(a,r,o,i,u,"next",e)}function u(e){cO(a,r,o,i,u,"throw",e)}i(void 0)}))}}function fO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fO(Object(n),!0).forEach((function(t){dO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||hO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hO(e,t){if(e){if("string"==typeof e)return vO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vO(e,t):void 0}}function vO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}iO.propTypes={tagId:c.a.string.isRequired},iO.defaultProps={tagId:"GTM-MHNGWVF"};var mO=function(e){var t=e.UIComponent,n=yO(yn(),1)[0],r=n.token,o=n.loading,s=yO(rn(),1)[0],c=[{id:1,name:"Create a store",addText:!1,description:"Go inside your Stores and Click Add New Store, fill up all the fields required and also add your banner and logo, if you dont have one right now, dont worry, you can add those later.",completed:!1},{id:2,name:"Fill up your business information",addText:!1,description:"The business information will show on your front-end website, such as; business name, logo, banner, business email, slug = the word after your domain, orderinwebsite.co/store, and business description.",completed:!1},{id:3,name:"Add your first category",addText:!1,description:"After youve clicked on the Add New Store and Filled up your business information youll get a blank screen, click on the Add Category button and add the name of your category.",completed:!1},{id:4,name:"Add your first product",addText:!1,description:"Now, click in the category youve just added and create a product, the products cannot be created if you dont have a category, add an image to that product, make it look good.",completed:!1},{id:5,name:"Create a business menu",addText:!1,description:"To create a menu click in the store, a sidebar setting bar will show, inside here youll find the tab Menu, click Add Menu now, add a name, the delivery types, schedule, and at the bottom youll find all the products you have available to put inside this menu.",completed:!1},{id:6,name:"Create a delivery zone",addText:!1,description:"Go back a little bit in your sidebar setting bar, click in Delivery Zones, name the delivery zones, put a minimum price of delivery, and the price is how much you are going to charge for delivery, click +, and add your delivery zone, by Polygon or Circle, create by clicking around the map your range of delivery.",completed:!1},{id:7,name:"Payment method",addText:!0,description:"Last but not least, add a Payment Method, youll have several payment gateways, the biggest ones, PayPal, Stripe, or any other payment you want. Thats it! Look for your store in your Front-end Website.",completed:!1}],l=yO(Object(i.useState)({loading:!1,orders:0,error:null}),2),f=l[0],p=l[1],d=yO(Object(i.useState)({loading:!1,sales:0,error:null}),2),y=d[0],h=d[1],v=yO(Object(i.useState)({loading:!1,sales:[],error:null}),2),m=v[0],b=v[1],g=yO(Object(i.useState)({loading:!1,data:[],error:null}),2),O=g[0],w=g[1],j=function(){var e=lO(a.a.mark((function e(){var t,n,i,u,c,l,d,y,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(pO(pO({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n="".concat(s.root,"/reports/orders?lapse=today"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:if(u=e.sent,c=u.error,l=u.result,c)p(pO(pO({},f),{},{loading:!0,error:l}));else{if(d=0,(null==l?void 0:l.length)>0){y=sO(l);try{for(y.s();!(h=y.n()).done;)v=h.value,d+=parseInt(v.orders)}catch(e){y.e(e)}finally{y.f()}}p(pO(pO({},f),{},{loading:!1,orders:d}))}e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),p(pO(pO({},f),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=lO(a.a.mark((function e(){var t,n,i,u,c,l,f,p,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(pO(pO({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n="".concat(s.root,"/reports/sales?lapse=today"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:if(u=e.sent,c=u.error,l=u.result,c)h(pO(pO({},y),{},{loading:!0,error:l}));else{if(f=0,(null==l?void 0:l.length)>0){p=sO(l);try{for(p.s();!(d=p.n()).done;)v=d.value,f+=v.sales}catch(e){p.e(e)}finally{p.f()}}h(pO(pO({},y),{},{loading:!1,sales:f}))}e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),h(pO(pO({},y),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=lO(a.a.mark((function e(){var t,n,i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,b(pO(pO({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=P(),i="".concat(s.root,"/reports/sales?lapse=").concat(n),e.next=9,fetch(i,t);case 9:return u=e.sent,e.next=12,u.json();case 12:c=e.sent,l=c.error,f=c.result,b(pO(pO({},m),{},l?{loading:!0,error:f}:{loading:!1,sales:f})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),b(pO(pO({},m),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=new Date,t=e.getDate(),n=t<10?"0".concat(t):t,r=e.getMonth()+1,o=r<10?"0".concat(r):r,a=e.getFullYear();return"".concat(a,"-").concat(o,"-01,").concat(a,"-").concat(o,"-").concat(n)};return Object(i.useEffect)((function(){j(),S(),E(),w(pO(pO({},O),{},{data:c}))}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,uO({},e,{ordersList:f,todaySalelsList:y,monthSalesList:m,taskList:O,getCurrentDateRange:P,handleUpdateTaskList:function(e){w(pO(pO({},O),{},{data:e}))}})))};function bO(){return bO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bO.apply(this,arguments)}function gO(e){return function(e){if(Array.isArray(e))return xO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||IO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function wO(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){OO(a,r,o,i,u,"next",e)}function u(e){OO(a,r,o,i,u,"throw",e)}i(void 0)}))}}function jO(e){return jO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jO(e)}function SO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SO(Object(n),!0).forEach((function(t){PO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||IO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IO(e,t){if(e){if("string"==typeof e)return xO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xO(e,t):void 0}}function xO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mO.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var AO=function(e){var t=e.UIComponent,n=e.handleSuccessAdd,r=e.handleSuccessUpdateImporter,o=e.selectedImporter,s=CO(rn(),1)[0],c=CO(yn(),1)[0],l=CO(Br(),2)[1].showToast,f=CO(Bn(),2)[1],p=CO(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),d=p[0],y=p[1],h=CO(Object(i.useState)({}),2),v=h[0],m=h[1],b=CO(Object(i.useState)({}),2),g=b[0],O=b[1],w=CO(Object(i.useState)({}),2),j=w[0],S=w[1],E=CO(Object(i.useState)(!1),2),P=E[0],C=E[1],I=CO(Object(i.useState)({}),2),x=I[0],A=I[1],T=function(){document.getElementById("importer-form")&&document.getElementById("importer-form").reset()},_=function(){document.getElementById("field-form")&&document.getElementById("field-form").reset()},k=function(){T(),_(),m({}),O({}),A({}),y(EO(EO({},d),{},{changes:{}}))},D=function(){var t=wO(a.a.mark((function t(){var r,o,i,u,p,h;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(Dr.Info,f("LOADING","Loading")),r=EO({},d.changes),t.prev=2,y(EO(EO({},d),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)},body:JSON.stringify(r)},t.next=7,fetch("".concat(s.root,"/importers"),o);case 7:return i=t.sent,t.next=10,i.json();case 10:u=t.sent,p=u.error,h=u.result,p?y(EO(EO({},d),{},{loading:!1,result:{error:!0,result:h}})):(l(Dr.Success,f("IMPORTER_SAVED","Importer saved")),k(),y({loading:!1,changes:{},result:{error:!1,result:h}}),n&&n(h),e.onClose&&e.onClose()),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),y(EO(EO({},d),{},{result:{error:!0,result:[t.t0.message]},loading:!1}));case 19:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=wO(a.a.mark((function t(){var n,i,u,p,h,v;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(Dr.Info,f("LOADING","Loading")),n=EO({},d.changes),t.prev=2,y(EO(EO({},d),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)},body:JSON.stringify(n)},t.next=7,fetch("".concat(s.root,"/importers/").concat(null==o?void 0:o.id),i);case 7:return u=t.sent,t.next=10,u.json();case 10:p=t.sent,h=p.error,v=p.result,h?y(EO(EO({},d),{},{loading:!1,result:{error:!0,result:v}})):(l(Dr.Success,f("IMPORTER_SAVED","Importer saved")),k(),y({loading:!1,changes:{},result:{error:!1,result:v}}),r&&r(v),e.onClos&&e.onClos()),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),y(EO(EO({},d),{},{result:{error:!0,result:[t.t0.message]},loading:!1}));case 19:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){0!==Object.keys(j).length&&m(EO(EO({},v),{},{metafields:j}))}),[j]),Object(i.useEffect)((function(){0!==Object.keys(g).length&&m(EO(EO({},v),{},{fields:g}))}),[g]),Object(i.useEffect)((function(){if(0!==Object.keys(v).length){var e=EO({},v);y(EO(EO({},d),{},{changes:EO(EO({},d.changes),{},{mapping:JSON.stringify(e)})}))}}),[v]);return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,bO({},e,{formState:d,mappingState:v,fieldList:g,metafieldList:j,editState:x,isEdit:P,handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=EO(EO({},n),{},PO({},e.name,e.value))})):n=PO({},e.target.name,e.target.value),y(EO(EO({},d),{},{changes:EO(EO({},d.changes),n)}))},handleChangeSelect:function(e,t){var n;n=PO({},e,t),y(EO(EO({},d),{},{changes:EO(EO({},d.changes),n)})),P||(m({}),T())},handleChangeMappingInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=EO(EO({},n),{},PO({},e.name,e.value))})):n=PO({},e.target.name,e.target.value),m(EO(EO({},v),n))},addNewField:function(e,t){var n=PO({},e,parseInt(t));O(EO(EO({},g),n)),_()},removeField:function(e){var t=EO({},g);delete t[e],O(t)},addNewMetaField:function(e,t){var n=PO({},e,parseInt(t));S(EO(EO({},j),n)),_()},removeMetaField:function(e){var t=EO({},j);delete t[e],S(t)},clearImorterForm:k,setIsEdit:C,handleCreateImporter:D,handleEditState:function(e){var t,n,r;"object"===jO(r=null==e||null===(t=e.mapping)||void 0===t?void 0:t.metafields)&&null!==r&&S(r);var o;"object"===jO(o=null==e||null===(n=e.mapping)||void 0===n?void 0:n.fields)&&null!==o&&O(o);var a;a=null==e?void 0:e.mapping,m(a),A(EO(EO({},x),{},{name:null==e?void 0:e.name,slug:null==e?void 0:e.slug,type:null==e?void 0:e.type,mapping:a,fields:o,metafields:r})),y(EO(EO({},d),{},{changes:EO(EO({},d.changes),{},{name:null==e?void 0:e.name,type:null==e?void 0:e.type})}))},editImporter:U,downloadCSV:function(){var e={business_id:10,external_business_id:120,name:"House mine",logo:'"https://res.cloudinary.com/ordering2/image/upload/f_auto,q_auto,h_100,c_limit/v1539095959/crya6ibldlsz4hjyo03e.jpg"',email:"test@ordering.co",slug:"test_slug",header:'"https://s3.amazonaws.com/ordering-images2/res/ordering/image/upload/bqvntsurh8opknu58z9f/1534196989.jpg"',about:"test about",address:'"5th Avenue, New York, NY, USA"',location:'"{""lat"":40.7552112,""lng"":-73.982322}"',timezone:"America/New_York",description:"test description",cellphone:"123123123123",phone:"123123",featured:1,enabled:1,front_layout:"food",seo_image:'"https://res.cloudinary.com/ordering2/image/upload/f_auto,q_auto,h_100,c_limit/v1539095959/crya6ibldlsz4hjyo03e.jpg"',seo_title:"seo title",seo_description:"seo description",category_id:10,external_category_id:120,external_parent_category_id:130,product_id:10,image:'"https://s3.amazonaws.com/ordering-images2/res/ordering/image/upload/wmpfkcedo4y2kwxcamve/1534167067.png"',rank:10,parent_category_id:20,external_product_id:100,price:10,images:'"https://s3.amazonaws.com/ordering-images2/res/ordering/image/upload/lx0zuprnuozhqmaa97jj/1534200630.jpg"',sku:"test_sku",inventoried:1,quantity:10,upselling:1,in_offer:1,offer_price:10,offer_rate:0,offer_rate_type:1,offer_include_options:1,tax_id:10,fee_id:10,estimated_person:'"test person"',barcode:'"0123456789"',barcode_alternative:'"0123"',seo_keywords:"test key",hide_special_instructions:1,maximum_per_order:2,minimum_per_order:1},t=EO({},v),n=EO({},t.fields);delete t.fields;var r=EO(EO({},t),n),o=Object.values(r),a=Math.max.apply(Math,gO(o)),i=Array(a+1).fill(""),u=Array(a+1).fill(""),s=Array(a+1).fill("");for(var c in r){var l=c.replaceAll("_"," ");i[r[c]]=l.charAt(0).toUpperCase()+l.slice(1),u[r[c]]=e[c]||" ";["busines_id","external_business_id","category_id","external_category_id","external_parent_category_id","product_id","rank","external_product_id"].includes(c)?s[r[c]]=e[c]+1:["slug","name","sku","seo_keywords"].includes(c)?s[r[c]]=e[c]+"_2":s[r[c]]=e[c]||" "}var f=[i,u,s].map((function(e){return e.join(",")})).join("\n"),p=document.createElement("a");p.download="example.csv";var d=new Blob(["\ufeff",f],{type:"text/csv"}),y=new FileReader;y.readAsDataURL(d),y.onload=function(){p.href=y.result,p.click()}}})))};function TO(){return TO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TO.apply(this,arguments)}function _O(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function kO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kO(Object(n),!0).forEach((function(t){UO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return BO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}AO.propTypes={handleSuccessUpdateImporter:c.a.func,UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},AO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var FO=function(e){var t=e.UIComponent,n=LO(rn(),1)[0],r=LO(yn(),1)[0],o=LO(Object(i.useState)({loading:!1,changes:{separator:",",enclosure:'"',escape:"/",start_line:2},result:{error:!1}}),2),s=o[0],c=o[1],l=LO(Object(i.useState)({fileName:null,fileType:null,csvFile:null,importOptions:{}}),2),f=l[0],p=l[1],d=LO(Br(),2)[1].showToast,y=LO(Bn(),2)[1],h=function(){var e,t=(e=a.a.mark((function e(t){var o,i,u,l,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(Dr.Info,y("LOADING","Loading")),(o=new FormData).append("file",null==f?void 0:f.csvFile),o.append("import_options",JSON.stringify(null==f?void 0:f.importOptions)),e.prev=4,c(DO(DO({},s),{},{loading:!0})),i={method:"POST",headers:{Authorization:"Bearer ".concat(r.token)},body:o},e.next=9,fetch("".concat(n.root,"/importers/").concat(t,"/jobs"),i);case 9:return u=e.sent,e.next=12,u.json();case 12:l=e.sent,p=l.error,h=l.result,p?c(DO(DO({},s),{},{loading:!1,result:{error:!0,result:h}})):(d(Dr.Success,y("IMPORTER_JOB_SAVED","Importer Job Created")),c({loading:!1,changes:{},result:{error:!1,result:h}})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),c(DO(DO({},s),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 21:case"end":return e.stop()}}),e,null,[[4,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_O(a,r,o,i,u,"next",e)}function u(e){_O(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,TO({},e,{formState:s,fileState:f,setFileState:p,handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=DO(DO({},n),{},UO({},e.name,e.value))})):n=UO({},e.target.name,e.target.value),p(DO(DO({},f),{},{importOptions:DO(DO({},f.importOptions),n)}))},handleUploadCsv:function(e){e&&p(DO(DO({},f),{},{fileName:e.name,fileType:e.type,csvFile:e}))},handleCreateImporterJob:h})))};function RO(){return RO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RO.apply(this,arguments)}function MO(e){return function(e){if(Array.isArray(e))return VO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||JO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NO(Object(n),!0).forEach((function(t){GO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function qO(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){YO(a,r,o,i,u,"next",e)}function u(e){YO(a,r,o,i,u,"throw",e)}i(void 0)}))}}function $O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||JO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JO(e,t){if(e){if("string"==typeof e)return VO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VO(e,t):void 0}}function VO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}FO.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},FO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var HO=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=$O(rn(),1)[0],s=$O(yn(),1)[0].token,c=$O(Object(i.useState)({loading:!1,error:null,importers:[]}),2),l=c[0],f=c[1],p=$O(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),d=p[0],y=p[1],h=$O(Object(i.useState)({}),2),v=h[0],m=h[1],b=$O(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(){var e=qO(a.a.mark((function e(t,n){var r,i,u,c,p,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f(zO(zO({},l),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},!t){e.next=9;break}return e.next=6,fetch("".concat(o.root,"/importers?page=").concat(t||d.currentPage,"&page_size=").concat(n||d.pageSize),r);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,fetch("".concat(o.root,"/importers"),r);case 11:e.t0=e.sent;case 12:return i=e.t0,e.next=15,i.json();case 15:u=e.sent,c=u.result,p=u.pagination,f(zO(zO({},l),{},{loading:!1,importers:c})),h=0,p.current_page!==p.total_pages&&(v=p.total-l.importers.length,h=v<p.page_size?v:p.page_size),y(zO(zO({},d),{},{currentPage:p.current_page,totalPages:p.total_pages,totalItems:p.total,from:p.from,to:p.to,nextPageItems:h})),m(zO({},p)),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(0),"Cancel"!==e.t1.constructor.name&&f(zO(zO({},l),{},{loading:!1,error:[e.t1.message]}));case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=qO(a.a.mark((function e(t){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(zO(zO({},g),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/importers/").concat(t),n);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error||(u=l.importers.filter((function(e){return e.id!==t})),m(zO(zO({},v),{},{totalPages:(null==v?void 0:v.totalPages)-1,totalItems:(null==v?void 0:v.totalItems)-1})),f(zO(zO({},l),{},{importers:u}))),O(zO(zO({},g),{},{loading:!1,error:i.error?i.result:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O(zO(zO({},g),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,RO({},e,{actionStatus:g,importerList:l,getImporters:w,paginationProps:d,paginationDetail:v,handleDeleteImporter:j,handleSuccessAddImporter:function(e){f(zO(zO({},l),{},{importers:[].concat(MO(l.importers),[e])})),m(zO(zO({},v),{},{total:null!=v&&v.total?(null==v?void 0:v.total)+1:1}))},handleSuccessUpdateImporter:function(e){var t=l.importers.map((function(t){return t.id===e.id?e:t}));f(zO(zO({},l),{},{importers:t}))}})))};function WO(){return WO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WO.apply(this,arguments)}function KO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function XO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ZO(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){XO(a,r,o,i,u,"next",e)}function u(e){XO(a,r,o,i,u,"throw",e)}i(void 0)}))}}function QO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ew(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QO(Object(n),!0).forEach((function(t){tw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||rw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rw(e,t){if(e){if("string"==typeof e)return ow(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ow(e,t):void 0}}function ow(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}HO.propTypes={UIComponent:c.a.elementType,slug:c.a.string,isInitialRender:c.a.bool},HO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var aw=function(e){var t,n=e.UIComponent,r=e.propsToFetch,o=nw(rn(),1)[0],s=nw(yn(),1)[0],c=s.token,l=s.loading,f=nw(tr(),1)[0].configs,p=nw(Bn(),2)[1],d=nw(Object(i.useState)({loading:!1,businesses:[],error:null}),2),y=d[0],h=d[1],v=nw(Object(i.useState)({loading:!1,data:[],error:null}),2),m=v[0],b=v[1],g=(null==f||null===(t=f.order_types_allowed)||void 0===t?void 0:t.value.split("|").map((function(e){return Number(e)})))||[],O=[{value:1,name:p("DELIVERY","Delivery"),enabled:!0},{value:2,name:p("PICKUP","Pickup"),enabled:!0},{value:3,name:p("EAT_IN","Eat in"),enabled:!0},{value:4,name:p("CURBSIDE","Curbside"),enabled:!0},{value:5,name:p("DRIVE_THRU","Drive thru"),enabled:!0}],w=nw(Object(i.useState)(O.filter((function(e){return null==g?void 0:g.includes(e.value)}))),2),j=w[0],S=w[1],E=nw(Object(i.useState)({loading:!1,invoice:null,error:null}),2),P=E[0],C=E[1],I=nw(Object(i.useState)({type:"charge",from:"",to:"",business:"",cancelled:!1,discounts:!1,notes:"",percentage_fee:0,fixed_fee:0,tax:0,misc_amount:0,misc_description:""}),2),x=I[0],A=I[1],T=function(){var e=ZO(a.a.mark((function e(){var t,n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(ew(ew({},y),{},{loading:!0})),e.next=4,o.businesses().asDashboard().select(r).get();case 4:t=e.sent,n=t.content,i=n.error,u=n.result,s=n.pagination,h(ew(ew({},y),{},i?{loading:!1,error:u}:{loading:!1,businesses:u,pagination:s})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(ew(ew({},y),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=ZO(a.a.mark((function e(){var t,n,r,i,u,s,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,b(ew(ew({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},n="".concat(o.root,"/paymethods"),e.next=8,fetch(n,t);case 8:return r=e.sent,e.next=11,r.json();case 11:i=e.sent,u=i.error,s=i.result,u?b(ew(ew({},m),{},{loading:!1,error:s})):(f=s.filter((function(e){return e.enabled})),b(ew(ew({},m),{},{loading:!1,data:f}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),b(ew(ew({},m),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=ZO(a.a.mark((function e(){var t,n,r,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(ew(ew({},P),{},{loading:!0})),t=[{attribute:"business_id",value:x.business}],x.from&&t.push({attribute:"delivery_datetime",value:{condition:">=",value:"".concat(x.from," 00:00:00")}}),x.to&&t.push({attribute:"delivery_datetime",value:{condition:"<=",value:"".concat(x.to," 23:59:59")}}),e.next=7,o.orders().asDashboard().where(t).get();case 7:n=e.sent,r=n.content,i=r.error,u=r.result,s=r.pagination,i?C(ew(ew({},P),{},{loading:!1,error:u})):(c=D(u),C(ew(ew({},P),{},{loading:!1,invoice:c,pagination:s}))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),C(ew(ew({},P),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t,n=[],r=KO(null==m?void 0:m.data);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.enabled&&n.push(o.id)}}catch(e){r.e(e)}finally{r.f()}var a=[];if(j){var i,u=KO(j);try{for(u.s();!(i=u.n()).done;){var s=i.value;s.enabled&&a.push(s.value)}}catch(e){u.e(e)}finally{u.f()}}var c=x.from.split("-");c=1===c.length?null:new Date(c[0],c[1]-1,c[2],0,0,0,0);var l=x.to.split("-");l=1===l.length?null:new Date(l[0],l[1]-1,l[2],0,0,0,0);var f=e.filter((function(e){var t=!0,r=e.delivery_datetime.split(" ");return r=new Date(r[0].split("-")[0],r[0].split("-")[1]-1,r[0].split("-")[2],0,0,0,0),(-1===n.indexOf(e.paymethod_id)||-1===a.indexOf(e.delivery_type)||-1===[0,1,7,8,9,11,15].indexOf(e.status)&&!x.cancelled)&&(t=!1),(c&&c>r||l&&l<r)&&(t=!1),t})),p={from:x.from,to:x.to,type:x.type,orders:f,percentage_fee:x.percentage_fee,fixed_fee:x.fixed_fee,tax:x.tax,misc_amount:("payout"!==x.type?1:-1)*x.misc_amount,misc_description:x.misc_description,inlcude_discounts:x.discounts,tax_products:"payout"!==x.type?0:null==f?void 0:f.reduce((function(e,t){return 1===t.tax_type?e:e+F(t)}),0),discounts:x.discounts?null==f?void 0:f.reduce((function(e,t){return e-R(t)}),0):0,orders_subtotal:null==f?void 0:f.reduce((function(e,t){return e+B(t)}),0),orders_total:null==f?void 0:f.reduce((function(e,t){return e+N(t)}),0),notes:x.notes.replace(/\n/g,"<br>")};p.percentage_fee_total=("payout"!==x.type?1:-1)*(p.orders_subtotal+p.discounts)*x.percentage_fee/100,p.fixed_fee_total=("payout"!==x.type?1:-1)*f.length*x.fixed_fee;var d=parseFloat(p.percentage_fee_total)+parseFloat(p.fixed_fee_total)+parseFloat(p.misc_amount)+parseFloat(p.discounts)+parseFloat(p.tax_products)+("payout"!==x.type?0:parseFloat(p.orders_subtotal));return p.subtotal=d,p.tax_total=("payout"!==x.type?1:-1)*d*parseFloat(x.tax)/100,p.total=d+p.tax_total,y.businesses.forEach((function(e){e.id===x.business&&(p.business=e)})),p},U=function(e,t){var n=1,r=t.price;return e.allow_suboptionQuantity&&t.quantity&&(n=t.quantity),e.with_half_option&&t.position&&"whole"!==t.position&&(r=t.half_price),r*n},L=function(e){var t=0;if(e.options)for(var n=0;n<e.options.length;n++){var r=e.options[n];if(r.suboptions)for(var o=0;o<r.suboptions.length;o++){var a=r.suboptions[o];t+=U(r,a)}}return(t+e.price)*e.quantity},B=function(e){if(e.summary){var t,n=!0;if(null!=f&&f.project_fix_order_summary)n="1"===(null==f||null===(t=f.project_fix_order_summary)||void 0===t?void 0:t.value);return 1!==e.tax_type||n?e.summary.subtotal:e.summary.subtotal+e.summary.tax}for(var r=0,o=0;o<e.products.length;o++)r+=L(e.products[o]);return M(r)},F=function(e){if(e.summary)return e.summary.tax;var t=2===e.tax_type?e.tax*(B(e)-e.discount)/100:0;return M(t)},R=function(e){return e.summary?e.summary.discount:M(e.discount)},M=function(e){var t,n=Math.pow(10,null==f||null===(t=f.format_number_decimal_length)||void 0===t?void 0:t.value);return Math.round(e*n)/n},N=function(e){if(e.summary)return e.summary.total;var t=B(e),n=F(e),r=z(e),o="2"===e.delivery_type?t+n+r-e.discount:t+n+e.delivery_zone_price+G(e)+r-e.discount;return M(o)},z=function(e){if(e.summary)return e.summary.service_fee;var t=(B(e)-e.discount)*e.service_fee/100;return M(t)},G=function(e){if(e.summary)return e.summary.driver_tip;var t=(B(e)-e.discount)*e.driver_tip/100;return M(t)};return Object(i.useEffect)((function(){T(),_()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,WO({},e,{businessList:y,invocing:x,payMethodsList:m,orderTypes:j,exportInvoiceList:P,handleChangeOrderTypes:S,handleChangeInvocing:A,handleChangePayMethods:function(e){b(ew(ew({},m),{},{data:e}))},getOrders:k,getSubtotal:B,getTotal:N})))};function iw(){return iw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iw.apply(this,arguments)}function uw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function sw(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){uw(a,r,o,i,u,"next",e)}function u(e){uw(a,r,o,i,u,"throw",e)}i(void 0)}))}}function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cw(Object(n),!0).forEach((function(t){fw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||dw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dw(e,t){if(e){if("string"==typeof e)return yw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yw(e,t):void 0}}function yw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}aw.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},aw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var hw=function(e){var t=e.UIComponent,n=e.propsToFetch,r=pw(rn(),1)[0],o=pw(yn(),1)[0],s=o.token,c=o.loading,l=pw(tr(),1)[0].configs,f=pw(Object(i.useState)({loading:!1,drivers:[],error:null}),2),p=f[0],d=f[1],y=pw(Object(i.useState)({loading:!1,data:[],error:null}),2),h=y[0],v=y[1],m=pw(Object(i.useState)({loading:!1,invoice:null,error:null}),2),b=m[0],g=m[1],O=pw(Object(i.useState)({from:"",to:"",driver:"",cancelled:!1,notes:"",percentage_fee:0,fixed_fee:0,percentage_delivery_price:0,percentage_driver_tip:0,tax:0,misc_amount:0,misc_description:""}),2),w=O[0],j=O[1],S=function(){var e=sw(a.a.mark((function e(){var t,o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(lw(lw({},p),{},{loading:!0})),t=[{attribute:"level",value:"4"}],e.next=5,r.users().asDashboard().select(n).where(t).get();case 5:o=e.sent,i=o.content,u=i.error,s=i.result,c=i.pagination,d(lw(lw({},p),{},u?{loading:!1,error:s}:{loading:!1,drivers:s,pagination:c})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(lw(lw({},p),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=sw(a.a.mark((function e(){var t,n,o,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(lw(lw({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},n="".concat(r.root,"/paymethods"),e.next=8,fetch(n,t);case 8:return o=e.sent,e.next=11,o.json();case 11:i=e.sent,u=i.error,l=i.result,u?v(lw(lw({},h),{},{loading:!1,error:l})):(f=l.filter((function(e){return e.enabled})),v(lw(lw({},h),{},{loading:!1,data:f}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),v(lw(lw({},h),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=sw(a.a.mark((function e(){var t,n,o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(lw(lw({},b),{},{loading:!0})),t=[{attribute:"driver_id",value:w.driver}],w.from&&t.push({attribute:"delivery_datetime",value:{condition:">=",value:"".concat(w.from," 00:00:00")}}),w.to&&t.push({attribute:"delivery_datetime",value:{condition:"<=",value:"".concat(w.to," 23:59:59")}}),e.next=7,r.orders().asDashboard().where(t).get();case 7:n=e.sent,o=n.content,i=o.error,u=o.result,s=o.pagination,i?g(lw(lw({},b),{},{loading:!1,error:u})):(c=C(u),g(lw(lw({},b),{},{loading:!1,invoice:c,pagination:s}))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),g(lw(lw({},b),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),C=function(e){var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=dw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(null==h?void 0:h.data);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.enabled&&n.push(o.id)}}catch(e){r.e(e)}finally{r.f()}var a=w.from.split("-");a=1===a.length?null:new Date(a[0],a[1]-1,a[2],0,0,0,0);var i=w.to.split("-");i=1===i.length?null:new Date(i[0],i[1]-1,i[2],0,0,0,0);var u=e.filter((function(e){var t=!0,r=e.delivery_datetime.split(" ");return r=new Date(r[0].split("-")[0],r[0].split("-")[1]-1,r[0].split("-")[2],0,0,0,0),(-1===n.indexOf(e.paymethod_id)||-1===[1,2,5,6,10,11,12].indexOf(e.status)||[2,5,6,10,12].indexOf(e.status)>-1&&!w.cancelled)&&(t=!1),(a&&a>r||i&&i<r)&&(t=!1),t})),s={from:w.from,to:w.to,orders:u,percentage_fee:w.percentage_fee,fixed_fee:w.fixed_fee,tax:w.tax,misc_amount:w.misc_amount,misc_description:w.misc_description,orders_subtotal:null==u?void 0:u.reduce((function(e,t){return e+A(t)}),0),orders_total:null==u?void 0:u.reduce((function(e,t){return e+k(t)}),0),discounts:null==u?void 0:u.reduce((function(e,t){return e-T(t)}),0),percentage_delivery_price:w.percentage_delivery_price,percentage_delivery_price_total:(null==u?void 0:u.reduce((function(e,t){return e+t.delivery_zone_price}),0))*w.percentage_delivery_price/100,percentage_driver_tip:w.percentage_driver_tip,percentage_driver_tip_total:(null==u?void 0:u.reduce((function(e,t){return e+U(t)}),0))*w.percentage_driver_tip/100,notes:w.notes.replace(/\n/g,"<br>")};s.percentage_fee_total=(s.orders_subtotal+s.discounts)*w.percentage_fee/100,s.fixed_fee_total=u.length*w.fixed_fee;var c=parseFloat(s.percentage_fee_total)+parseFloat(s.fixed_fee_total)+parseFloat(s.misc_amount)+parseFloat(s.percentage_delivery_price_total)+parseFloat(s.percentage_driver_tip_total);return s.subtotal=c,s.tax_total=c*parseFloat(w.tax)/100,s.total=c+s.tax_total,p.drivers.forEach((function(e){e.id===w.driver&&(s.driver=e)})),s},I=function(e,t){var n=1,r=t.price;return e.allow_suboptionQuantity&&t.quantity&&(n=t.quantity),e.with_half_option&&t.position&&"whole"!==t.position&&(r=t.half_price),r*n},x=function(e){var t=0;if(e.options)for(var n=0;n<e.options.length;n++){var r=e.options[n];if(r.suboptions)for(var o=0;o<r.suboptions.length;o++){var a=r.suboptions[o];t+=I(r,a)}}return(t+e.price)*e.quantity},A=function(e){if(e.summary){var t,n=!0;if(null!=l&&l.project_fix_order_summary)n="1"===(null==l||null===(t=l.project_fix_order_summary)||void 0===t?void 0:t.value);return 1!==e.tax_type||n?e.summary.subtotal:e.summary.subtotal+e.summary.tax}for(var r=0,o=0;o<e.products.length;o++)r+=x(e.products[o]);return _(r)},T=function(e){return e.summary?e.summary.discount:_(e.discount)},_=function(e){var t,n=Math.pow(10,null==l||null===(t=l.format_number_decimal_length)||void 0===t?void 0:t.value);return Math.round(e*n)/n},k=function(e){if(e.summary)return e.summary.total;var t=A(e),n=function(e){if(e.summary)return e.summary.tax;var t=2===e.tax_type?e.tax*(A(e)-e.discount)/100:0;return _(t)}(e),r=D(e),o="2"===e.delivery_type?t+n+r-e.discount:t+n+e.delivery_zone_price+U(e)+r-e.discount;return _(o)},D=function(e){if(e.summary)return e.summary.service_fee;var t=(A(e)-e.discount)*e.service_fee/100;return _(t)},U=function(e){if(e.summary)return e.summary.driver_tip;var t=(A(e)-e.discount)*e.driver_tip/100;return _(t)};return Object(i.useEffect)((function(){S(),E()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,iw({},e,{driverList:p,invocing:w,payMethodsList:h,exportInvoiceList:b,handleChangeInvocing:j,handleChangePayMethods:function(e){v(lw(lw({},h),{},{data:e}))},getOrders:P,getSubtotal:A,getTotal:k})))};function vw(){return vw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vw.apply(this,arguments)}function mw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bw(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){mw(a,r,o,i,u,"next",e)}function u(e){mw(a,r,o,i,u,"throw",e)}i(void 0)}))}}function gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ow(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gw(Object(n),!0).forEach((function(t){ww(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ww(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}hw.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var Ew=function(e){var t=e.UIComponent,n=jw(rn(),1)[0],r=jw(Bn(),2)[1],o=jw(yn(),1)[0].loading,s=jw(Br(),2)[1].showToast,c=jw(Object(i.useState)({loading:!1,translations:[],result:{error:null}}),2),l=c[0],f=c[1],p=jw(Object(i.useState)(null),2),d=p[0],y=p[1],h=jw(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),v=h[0],m=h[1],b=function(e){f(Ow(Ow({},l),{},{translations:e}))},g=function(){var e=bw(a.a.mark((function e(){var t,o,i,u,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Ow(Ow({},v),{},{loading:!0})),s(Dr.Info,r("LOADING","Loading")),u={key:null==v||null===(t=v.changes)||void 0===t?void 0:t.key,text:null==v||null===(o=v.changes)||void 0===o?void 0:o.text},e.next=6,n.translations(null==v||null===(i=v.changes)||void 0===i?void 0:i.id).save(u);case 6:c=e.sent,l=c.content,f=l.error,p=l.result,f?m(Ow(Ow({},v),{},{loading:!1,error:p})):(m(Ow(Ow({},v),{},{loading:!1,changes:{}})),s(Dr.Success,r("WEB_APP_LANG_SAVED","Language change saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(Ow(Ow({},v),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=bw(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(Ow(Ow({},l),{},{loading:!0})),e.next=6,n.translations().get();case 6:t=e.sent,r=t.content,i=r.error,u=r.result,f(Ow(Ow({},l),{},i?{loading:!1,error:u}:{loading:!1,translations:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),f(Ow(Ow({},l),{},{loading:!1,error:e.t0}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){O()}),[]),Object(i.useEffect)((function(){Object.keys(null==v?void 0:v.changes).length>0&&g()}),[null==v?void 0:v.changes]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,vw({},e,{translationList:l,handleUpdateTranslationList:b,textEditState:v.changes,searchValue:d,onSearch:y,handleChangeText:function(e,t,n){var r=null==l?void 0:l.translations.map((function(e){return e.key===t?Ow(Ow({},e),{},{text:n}):e}));d&&y(t),b&&b(r),m(Ow(Ow({},v),{},{changes:{id:e,key:t,text:n}}))},getTranslations:O})))};function Pw(){return Pw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pw.apply(this,arguments)}function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Iw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cw(Object(n),!0).forEach((function(t){xw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Aw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ew.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ew.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var _w=function(e){var t,n=e.currentLanguage,r=e.languages,o=e.UIComponent,a=Aw(Object(i.useState)({loading:!r,languages:r,error:null}),2),s=a[0],c=a[1],l=Aw(Bn(),3),f=l[0],p=l[2].setLanguage,d=Aw(Object(i.useState)(null),2),y=d[0],h=d[1],v={};return Object(i.useEffect)((function(){if(!f.loading){if((null==r?void 0:r.length)>0)c(Iw(Iw({},s),{},{loading:!1,languages:r}));else{var e=f.languageList.filter((function(e){return e.enabled}));c(Iw(Iw({},s),{},{loading:!1,languages:e}))}return function(){v.languages&&v.languages.cancel()}}}),[f]),Object(i.useEffect)((function(){var e;if(n){var t=r.find((function(e){return e.code===n}));p(t),h(t)}else if(null==f||null===(e=f.language)||void 0===e||!e.code||null==y||!y.code){var o,a,i=null!=f&&null!==(o=f.language)&&void 0!==o&&o.code?null==f?void 0:f.language:null==s||null===(a=s.languages)||void 0===a?void 0:a.find((function(e){return e.default}));i&&(p(i),h(i))}}),[r,s]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Pw({},e,{currentLanguage:e.handlerCustomChangeLanguage?null==y?void 0:y.code:null==f||null===(t=f.language)||void 0===t?void 0:t.code,languagesState:s,handleChangeLanguage:function(t){var n=s.languages.find((function(e){return e.code===t}));if(e.handlerCustomChangeLanguage)return e.handlerCustomChangeLanguage(n),void h(n);e.onChangeLanguage&&e.onChangeLanguage(n),p(n)}})))};function kw(){return kw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kw.apply(this,arguments)}function Dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dw(Object(n),!0).forEach((function(t){Lw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Fw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}_w.propTypes={UIComponent:c.a.elementType,currentLanguage:c.a.string,languages:c.a.arrayOf(c.a.object),onChangeLanguage:c.a.func,handlerCustomChangeLanguage:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_w.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Mw=function(e){var t=e.UIComponent,n=Fw(rn(),1)[0],r=Fw(Br(),2)[1].showToast,o=Fw(Bn(),3),s=o[0],c=o[1],l=o[2].updateLanguageListState,f=Fw(Object(i.useState)({fields:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=Fw(Object(i.useState)({loading:!1,error:null}),2),h=y[0],v=y[1],m=function(){var e,t=(e=a.a.mark((function e(t,o){var i,u,s,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(Dr.Info,c("LOADING","Loading")),v(Uw(Uw({},h),{},{loading:!0})),e.next=5,n.languages(t).save(o);case 5:i=e.sent,u=i.content,s=u.error,f=u.result,s?v({loading:!1,error:f}):(v({loading:!1,error:null}),r(Dr.Success,c("WEB_APP_LANG_SAVED","Language change saved")),y=p.fields.filter((function(e){return e.id===t&&Object.assign(e,f),!0})),d(Uw(Uw({},p),{},{fields:y})),l(f)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Bw(a,r,o,i,u,"next",e)}function u(e){Bw(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){s.loading||d(Uw(Uw({},p),{},{loading:!1,fields:s.languageList}))}),[s.languageList]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,kw({},e,{languageFiledsState:p,handleChangeFieldSetting:m})))};function Nw(){return Nw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nw.apply(this,arguments)}function zw(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Vw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Gw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yw(Object(n),!0).forEach((function(t){$w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Vw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vw(e,t){if(e){if("string"==typeof e)return Hw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hw(e,t):void 0}}function Hw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Mw.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Mw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ww=function(e){var t=e.UIComponent,n=e.translationList,r=e.handleUpdateTranslationList,o=e.getTranslations,s=Jw(rn(),1)[0],c=Jw(yn(),1)[0],l=c.token,f=c.loading,p=Jw(Bn(),2)[1],d=Jw(Br(),2)[1].showToast,y=Jw(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),h=y[0],v=y[1],m=Jw(Object(i.useState)({row:-1,col:-1}),2),b=m[0],g=m[1],O=Jw(Object(i.useState)(!1),2),w=O[0],j=O[1],S=function(){var e,t=(e=a.a.mark((function e(t,i,u){var c,y,m,b,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(qw(qw({},h),{},{loading:!0})),d(Dr.Info,p("LOADING","Loading")),c={method:i?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({translations:JSON.stringify(t)})},y="".concat(s.root,"/bulks/translations"),e.next=9,fetch(y,c);case 9:return m=e.sent,e.next=12,m.json();case 12:b=e.sent,g=b.error,O=b.result,g?v(qw(qw({},h),{},{loading:!1,result:{error:!0,result:O}})):(v(qw(qw({},h),{},{loading:!1,result:{error:!1,result:O}})),i?o():(w=null==n?void 0:n.translations.map((function(e){var n,r=zw(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.id===e.id)return qw(qw({},e),{},{key:o.key,text:o.text})}}catch(e){r.e(e)}finally{r.f()}return e})),r(w)),d(Dr.Success,i?p("WEB_APP_LANG_ADDED","Language item added"):p("WEB_APP_LANG_SAVED","Language change saved"))),e.next=22;break;case 18:if(e.prev=18,e.t0=e.catch(2),v(qw(qw({},h),{},{result:{error:!0,result:e.t0.message},loading:!1})),i)for(j=t.length-1;j>=0;j--)u.alter("remove_row",t[j].row);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Gw(a,r,o,i,u,"next",e)}function u(e){Gw(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Nw({},e,{creationFormState:h,handleItemChange:function(e,t,n){if(w)j(!1);else{e=e||[];for(var r=[],o=[],a=[],i=[],u=0;u<e.length;u++){var s={key:!1,text:!1};if(e[u][2]!==e[u][3]){for(var c=!0,l=0;l<r.length;l++)if(r[l]===e[u][0]){c=!1;break}if(c){r.push(e[u][0]);var f=n.getSourceDataAtRow(e[u][0]);if(n.validateRows(r,(function(e){})),f.key||(s.key=!0,-1===i.indexOf(p("KEY_REQUIRED"))&&i.push(p("KEY_REQUIRED"))),f.text||(s.text=!0,-1===i.indexOf(p("TEXT_REQUIRED"))&&i.push(p("TEXT_REQUIRED"))),f.id){if(s.text||s.text)continue;a.push(f)}else{if(s.key||s.text)continue;f.row=e[u][0],o.push(f)}}}}i.length>0&&v(qw(qw({},h),{},{result:{error:!0,result:i}})),a.length>0&&S(a,!1,n),o.length>0&&S(o,!0,n)}},handleAfterSectionEnd:function(e,t,n,r,o){b.row===e&&b.col===t||e!==n||t!==r||(g({row:e,col:t}),o.deselectCell(),o.selectCell(e,t))},handleoutsideClickDeselects:function(){return g({row:-1,col:-1}),!1}})))};function Kw(){return Kw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kw.apply(this,arguments)}function Xw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Zw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zw(Object(n),!0).forEach((function(t){ej(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ej(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ww.propTypes={UIComponent:c.a.elementType,translationList:c.a.object,handleUpdateTranslationList:c.a.func,getTranslations:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ww.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rj=function(e){var t=e.UIComponent,n=e.getTranslations,r=tj(rn(),1)[0],o=tj(Br(),2)[1].showToast,s=tj(Bn(),2)[1],c=tj(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Qw(Qw({},l),{},{loading:!0})),o(Dr.Info,s("LOADING","Loading")),e.next=5,r.translations().save(null==l?void 0:l.changes);case 5:t=e.sent,i=t.content,u=i.error,c=i.result,u?f(Qw(Qw({},l),{},{loading:!1,result:{error:!0,result:c}})):(f(Qw(Qw({},l),{},{loading:!1,changes:{},result:{error:!1,result:c}})),n&&n(),o(Dr.Success,s("WEB_APP_LANG_ADDED","Language item added"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(Qw(Qw({},l),{},{loading:!1,result:{error:!0,result:e.t0}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xw(a,r,o,i,u,"next",e)}function u(e){Xw(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Kw({},e,{creationFormState:l,handleChangeInput:function(e,t){f(Qw(Qw({},l),{},{changes:Qw(Qw({},null==l?void 0:l.changes),{},ej({},e,t.target.value))}))},handleUpdateClick:function(){p()}})))};function oj(){return oj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oj.apply(this,arguments)}function aj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ij(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aj(Object(n),!0).forEach((function(t){uj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cj(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sj(a,r,o,i,u,"next",e)}function u(e){sj(a,r,o,i,u,"throw",e)}i(void 0)}))}}function lj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}rj.propTypes={UIComponent:c.a.elementType,getTranslations:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var pj=function(e){var t=e.UIComponent,n=e.handleButtonLoginClick,r=e.handleSuccessLogin,o=e.useLoginByEmail,s=e.useLoginByCellphone,c=e.useDefualtSessionManager,l=e.urlToRedirect,f=e.allowedLevels,p=lj(rn(),1)[0],d=e.defaultLoginTab,y=lj(Object(i.useState)({loading:!1,result:{error:!1}}),2),h=y[0],v=y[1],m=lj(Object(i.useState)({email:"",cellphone:"",password:""}),2),b=m[0],g=m[1],O=lj(Object(i.useState)({loading:!1,result:{error:!1}}),2),w=O[0],j=O[1],S=lj(Object(i.useState)({loading:!1,result:{error:!1}}),2),E=S[0],P=S[1],C=lj(zn(),1)[0],I=lj(Bn(),2)[1],x=lj(tr(),1)[0].configs,A=lj(Object(i.useState)(null),2),T=A[0],_=A[1],k=lj(Object(i.useState)(!1),2),D=k[0],U=k[1];o||s?"email"===d&&!o&&s?d="cellphone":"cellphone"===d&&!s&&o&&(d="email"):d="none";var L=lj(Object(i.useState)(d||(s&&!o?"cellphone":"email")),2),B=L[0],F=L[1],R=lj(yn(),2)[1],M=R.login,N=R.logout,z=function(){var e=cj(a.a.mark((function e(t){var n,o,i,u,s,d,y,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,uj(n={},B,t&&t[B]||b[B]),uj(n,"password",t&&(null==t?void 0:t.password)||b.password),o=n,!D){e.next=9;break}if(null!==T){e.next=8;break}return v({result:{error:!0,result:I("RECAPTCHA_VALIDATION_IS_REQUIRED","The captcha validation is required")},loading:!1}),e.abrupt("return");case 8:o.verification_code=T;case 9:return v(ij(ij({},h),{},{loading:!0})),e.next=12,p.users().auth(o);case 12:if(i=e.sent,u=i.content,s=u.error,d=u.result,D&&(window.grecaptcha.reset(),_(null)),s){e.next=39;break}if(!c){e.next=36;break}if(!(f&&(null==f?void 0:f.length)>0)){e.next=35;break}if(y=d.level,m=d.session.access_token,f.includes(y)){e.next=35;break}return e.prev=22,e.next=25,p.setAccessToken(m).users().logout();case 25:g=e.sent,g.content.error||N(),v({result:{error:!0,result:["YOU_DO_NOT_HAVE_PERMISSION"]},loading:!1}),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(22),v({result:{error:!0,result:e.t0.message},loading:!1});case 34:return e.abrupt("return");case 35:M({user:d,token:d.session.access_token,project:null==p?void 0:p.project});case 36:C.emit("userLogin",d),r&&r(d),l&&(window.location.href="".concat(window.location.origin).concat(l));case 39:v({result:{error:s,result:d},loading:!1}),e.next=45;break;case 42:e.prev=42,e.t1=e.catch(0),v({result:{error:!0,result:e.t1.message},loading:!1});case 45:case"end":return e.stop()}}),e,null,[[0,42],[22,31]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=cj(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(ij(ij({},w),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/auth/sms/twilio/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cellphone:t.cellphone,country_phone_code:"+".concat(t.country_phone_code)})});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,j(ij(ij({},w),{},{loading:!1,result:r})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),j(ij(ij({},w),{},{loading:!1,result:{error:e.t0.message}}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=cj(a.a.mark((function e(t){var n,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(ij(ij({},E),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/auth/sms/twilio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return o=e.sent,e.next=7,o.json();case 7:null!=(i=e.sent)&&i.error||null==i||null===(n=i.result)||void 0===n||!n.id||(M({user:null==i?void 0:i.result,token:null==i||null===(u=i.result)||void 0===u||null===(s=u.session)||void 0===s?void 0:s.access_token,project:null==p?void 0:p.project}),r&&r(null==i?void 0:i.result)),P(ij(ij({},E),{},{loading:!1,result:i})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),P(ij(ij({},E),{},{loading:!1,result:{error:e.t0.message}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;U((null==p?void 0:p.project)&&x&&Object.keys(x).length>0&&"1"===(null==x||null===(e=x.security_recaptcha_auth)||void 0===e?void 0:e.value))}),[x,null==p?void 0:p.project]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,oj({},e,{formState:h,loginTab:B,credentials:b,verifyPhoneState:w,checkPhoneCodeState:E,setCheckPhoneCodeState:function(e){P(e||{loading:!1,result:{error:!1}})},handleChangeInput:function(e){g(ij(ij({},b),{},uj({},e.target.name,e.target.value)))},handleButtonLoginClick:n||z,handleChangeTab:function(e){F(e)},handleSendVerifyCode:G,handleCheckPhoneCode:Y,isReCaptchaEnable:D,handleReCaptcha:_})))};function dj(){return dj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dj.apply(this,arguments)}function yj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yj(Object(n),!0).forEach((function(t){vj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}pj.propTypes={UIComponent:c.a.elementType,handleButtonLoginClick:c.a.func,handleSuccessLogin:c.a.func,useDefualtSessionManager:c.a.bool,useLoginByEmail:c.a.bool,useLoginByCellphone:c.a.bool,defaultLoginTab:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToSignup:c.a.string,linkToForgetPassword:c.a.string,elementLinkToSignup:c.a.element,elementLinkToForgotPassword:c.a.element},pj.defaultProps={defaultLoginTab:"email",useLoginByEmail:!0,useDefualtSessionManager:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Oj=function(e){var t=e.orderId,n=e.UIComponent,r=bj(rn(),1)[0],o=bj(yn(),1)[0],s=bj(Object(i.useState)({data:[],loading:!0,error:null}),2),c=s[0],l=s[1],f=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(hj(hj({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/logistic/orders/").concat(t,"/information"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,i.ok?l({error:null,loading:!1,data:s}):l(hj(hj({},c),{},{loading:!1,error:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(hj(hj({},c),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){mj(a,r,o,i,u,"next",e)}function u(e){mj(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){f()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,dj({},e,{logisticInformation:c,getLogistics:f})))};function wj(){return wj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wj.apply(this,arguments)}function jj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jj(Object(n),!0).forEach((function(t){Ej(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ej(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Cj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ij(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ij(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ij(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Oj.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Oj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xj=function(e){var t=e.orderId,n=e.UIComponent,r=Cj(rn(),1)[0],o=Cj(yn(),1)[0],s=Cj(Bn(),2)[1],c=Cj(Pr(),1)[0],l=c.getOrderState,f=c.parseDistance,p=Cj(Object(i.useState)({logs:[],loading:!0,error:null}),2),d=p[0],y=p[1],h=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Sj(Sj({},d),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/orders/").concat(t,"/logs?order_id=").concat(t),n);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,y(Sj(Sj({},d),{},{loading:!1,logs:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(Sj(Sj({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Pj(a,r,o,i,u,"next",e)}function u(e){Pj(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){h()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,wj({},e,{logisticList:d,parseLog:function(e){var t=function(e,t){var n=s("LOG_"+e.toUpperCase());for(var r in t){var o=t[r];"distance"===r||"coverage"===r?o=f(t[r]):"with_orders"===r?(o=t[r].join(", "),r="orders"):"status"===r&&(o=l(t[r])),n=n.replace("_"+r+"_",o)}return n},n=e.data?e.data:{};return-1!==["logistic_driver_found","logistic_driver_found_group","logistic_driver_not_found","logistic_driver_not_found_group","logistic_driver_found_in_coverage","logistic_driver_found_in_coverage_group","logistic_driver_found_out_coverage","logistic_driver_found_out_coverage_group","logistic_driver_autoaccepted","logistic_driver_autoaccepted_group","logistic_request_autorejected","logistic_request_autorejected_group","logistic_assign_request_accepted","logistic_assign_request_accepted_group","logistic_assign_request_rejected","logistic_assign_request_rejected_group","logistic_manual_driver_assignment","logistic_manual_driver_unassignment","logistic_driver_autoassigned_group"].indexOf(e.event)||e.driver_id?(e.driver&&(n.driver=e.driver.name+(e.driver.lastname?e.driver.lastname:"")),t(e.event,n)):e.driver_company_id||e.external_driver_id?(e.driver_company&&(n.driver_company=e.driver_company.name),e.external_driver&&(n.external_driver=e.external_driver.name),t(e.event,n)):-1!==["logistic_started","logistic_finished","logistic_expired","logistic_resolved","logistic_reset","logistic_grouped","logistic_cancelled","logistic_not_grouped","logistic_order_queued","logistic_order_out_queued","logistic_driver_company_not_found"].indexOf(e.event)?t(e.event,n):s(e.event.toUpperCase())+"<br />"+JSON.stringify(e.data)}})))};function Aj(){return Aj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Aj.apply(this,arguments)}function Tj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tj(Object(n),!0).forEach((function(t){kj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Uj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xj.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Bj=function(e){var t,n=e.UIComponent,r=e.handleSuccessLogout,o=e.token,s=e.isNative,c=e.useDefualtSessionManager,l=Uj(rn(),1)[0],f=Uj(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],y=Uj(yn(),2),h=y[0],v=y[1].logout,m=Uj(tr(),1)[0].configs;Object(i.useEffect)((function(){var e;if(null!=m&&null!==(e=m.facebook_id)&&void 0!==e&&e.value&&!s){if(window.fbAsyncInit=function(){var e;window.FB.init({appId:null==m||null===(e=m.facebook_id)||void 0===e?void 0:e.value,cookie:!0,xfbml:!1,version:"v7.0",status:!0})},window.document.getElementById("facebook-jssdk"))return;var t=window.document.createElement("script"),n=window.document.getElementsByTagName("script")[0];t.id="facebook-jssdk",t.async=!0,t.defer=!0,t.src="https://connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(t,n)}}),[null==m||null===(t=m.facebook_id)||void 0===t?void 0:t.value]);var b=function(){var e,t=(e=a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(_j(_j({},p),{},{loading:!0})),t=o||h.token,e.next=5,l.setAccessToken(t).users().logout();case 5:n=e.sent,d({result:n.content,loading:!1}),n.content.error||(c&&v(),r&&r()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Dj(a,r,o,i,u,"next",e)}function u(e){Dj(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Aj({},e,{formState:p,handleLogoutClick:b})))};function Fj(){return Fj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fj.apply(this,arguments)}function Rj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Mj(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Rj(a,r,o,i,u,"next",e)}function u(e){Rj(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Nj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nj(Object(n),!0).forEach((function(t){Gj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Bj.propTypes={UIComponent:c.a.elementType,handleSuccessLogout:c.a.func,handleErrorLogout:c.a.func,token:c.a.string,useDefualtSessionManager:c.a.bool},Bj.defaultProps={useDefualtSessionManager:!0};var $j=function(e){var t=e.UIComponent,n=e.walletData,r=e.handleUpdateWalletBusiness,o=e.handleUpdateBusinessList,s=e.handleUpdatePointsWallet,c=e.isBusiness,l=e.selectedBusinessList,f=Yj(rn(),1)[0],p=Yj(yn(),1)[0].token,d=Yj(Br(),2)[1].showToast,y=Yj(Bn(),2)[1],h=Yj(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=h[0],m=h[1],b=function(){var e=Mj(a.a.mark((function e(t,i){var u,l,h,b,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),m(zj(zj({},v),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(i)},l=c?"".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.loyalty_plan_id,"/businesses/").concat(t):"".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.id),e.next=7,fetch(l,u);case 7:return h=e.sent,e.next=10,h.json();case 10:b=e.sent,g=b.error,O=b.result,g?m(zj(zj({},v),{},{loading:!1,error:O})):(d(Dr.Success,y("POINTS_WALLET_UPDATED","Points wallet updated")),m(zj(zj({},v),{},{loading:!1,error:null,changes:{}})),r&&r(O),o&&o(i),!c&&s&&s(O)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),m(zj(zj({},v),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Mj(a.a.mark((function e(t){var n,r,o,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),m(zj(zj({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(t)},r="".concat(f.root,"/loyalty_plans"),e.next=7,fetch(r,n);case 7:return o=e.sent,e.next=10,o.json();case 10:i=e.sent,u=i.error,l=i.result,u?m(zj(zj({},v),{},{loading:!1,error:l})):(d(Dr.Success,y("POINTS_WALLET_CREATED","Points wallet created")),m(zj(zj({},v),{},{loading:!1,error:null,changes:{}})),!c&&s&&s(l)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),m(zj(zj({},v),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m(zj(zj({},v),{},{changes:{}}))}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Fj({},e,{formState:v,setFormState:m,handleClickSubmit:function(){if(0!==Object.keys(null==v?void 0:v.changes).length)if(n)b(null==n?void 0:n.id,null==v?void 0:v.changes);else{var e=l.filter((function(e){return e.wallet_enabled})).map((function(e){return{id:e.id,redeems:(null==e?void 0:e.redeems)||!1,accumulates:(null==e?void 0:e.accumulates)||!1}})),t=zj({name:"Loyalty Point Plan",type:"credit_point",redemption_rate:null,accumulation_rate:null,businesses:JSON.stringify(e)},null==v?void 0:v.changes);g(t)}},handleChangeInput:function(e){var t=e.target.value;m(zj(zj({},v),{},{changes:zj(zj({},v.changes),{},Gj({},e.target.name,t))}))},handleChangeItem:function(e){m(zj(zj({},v),{},{changes:zj(zj({},v.changes),e)}))}})))};function Jj(){return Jj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jj.apply(this,arguments)}function Vj(e){return function(e){if(Array.isArray(e))return tS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Wj(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Hj(a,r,o,i,u,"next",e)}function u(e){Hj(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Kj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kj(Object(n),!0).forEach((function(t){Zj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||eS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eS(e,t){if(e){if("string"==typeof e)return tS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tS(e,t):void 0}}function tS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}$j.propTypes={UIComponent:c.a.elementType,walletData:c.a.object,handleUpdateWalletBusiness:c.a.func,handleUpdateBusinessList:c.a.func,handleUpdatePointsWallet:c.a.func,isBusiness:c.a.bool,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$j.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nS=function(e){var t=e.UIComponent,n=e.pointWallet,r=e.propsToFetch,o=e.handleUpdateWalletBusiness,s=e.handleAddWalletBusiness,c=e.handleDeleteWalletBusiness,l=e.setSelectedBusinessList,f=Qj(rn(),1)[0],p=Qj(yn(),1)[0].token,d=Qj(Br(),2)[1].showToast,y=Qj(Bn(),2)[1],h=Qj(Object(i.useState)({loading:!0,error:null,businesses:[],pagination:null}),2),v=h[0],m=h[1],b=Qj(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(e,t){var n=v.businesses.map((function(n){return n.id===e?Xj(Xj({},n),t):n}));m(Xj(Xj({},v),{},{businesses:n}))},j=function(e,t){var n=v.businesses.map((function(n){return n.id===e.business_id?Xj(Xj(Xj(Xj(Xj(Xj(Xj(Xj(Xj({},n),{},{wallet_enabled:t},!t&&{redeems:!1}),!t&&{accumulates:!1}),!t&&{redemption_rate:null}),!t&&{accumulation_rate:null}),!t&&{expire_after_minutes:null}),!t&&{maximum_accumulation:null}),!t&&{maximum_redemption_rate:null}),!t&&{maximum_redemption_type:null}):n}));m(Xj(Xj({},v),{},{businesses:n}))},S=function(){var e=Wj(a.a.mark((function e(t,r){var i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),O(Xj(Xj({},g),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(r)},e.next=6,fetch("".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.id,"/businesses/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:s=e.sent,c=s.error,l=s.result,c?O({loading:!1,error:l}):(d(Dr.Success,y("WALLET_BUSINESS_UPDATED","Wallet business updated")),O({loading:!1,error:null}),o&&o(l),w(t,r)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Wj(a.a.mark((function e(t){var r,o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),O(Xj(Xj({},g),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(t)},e.next=6,fetch("".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.id,"/businesses"),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,u=i.error,c=i.result,u?O({loading:!1,error:c}):(d(Dr.Success,y("WALLET_BUSINESS_ENABLED","Wallet business enabled")),O({loading:!1,error:null}),s&&s(c),j(c,!0)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Wj(a.a.mark((function e(t){var r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),O(Xj(Xj({},g),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=6,fetch("".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.id,"/businesses/").concat(t),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,u=i.error,s=i.result,u?O({loading:!1,error:s}):(d(Dr.Success,y("WALLET_BUSINESS_DISABLED","Wallet business disabled")),O({loading:!1,error:null}),c&&c(s),j(s,!1)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Wj(a.a.mark((function e(){var t,o,i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Xj(Xj({},v),{},{loading:!0})),t=f.businesses().asDashboard().select(r),e.next=5,t.get();case 5:o=e.sent,i=o.content,u=i.error,s=i.result,c=i.pagination,u?m(Xj(Xj({},v),{},{loading:!1,error:s})):([],l=s.map((function(e){var t=null==n?void 0:n.businesses.find((function(t){return t.business_id===e.id}));return t?Xj(Xj(Xj({},t),e),{},{wallet_enabled:!0}):Xj(Xj({},e),{},{redeems:!1,accumulates:!1,wallet_enabled:!1,loyalty_plan_id:null==n?void 0:n.id,redemption_rate:null,accumulation_rate:null,expire_after_minutes:null,maximum_accumulation:null,maximum_redemption_rate:null,maximum_redemption_type:null})})),m(Xj(Xj({},v),{},{loading:!1,businesses:l,pagination:c}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(Xj(Xj({},v),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return C(),e.abort()}),[]),Object(i.useEffect)((function(){l(Vj(null==v?void 0:v.businesses))}),[null==v?void 0:v.businesses]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Jj({},e,{businessList:v,handleCheckBox:function(e,t,r){var o=Zj({},t,r);n?S(e,o):w(e,o)},handleUpdateBusinessList:w,handleChangeSwitch:function(e,t){if(n)if(t){var r,o=null==v||null===(r=v.businesses)||void 0===r?void 0:r.find((function(t){return t.id===e}));if(o){var a={business_id:e,redeems:null==o?void 0:o.redeems,accumulates:null==o?void 0:o.accumulates,loyalty_plan_id:null==n?void 0:n.id};E(a)}}else P(e);else{var i=null==v?void 0:v.businesses.map((function(n){return e===n.id?Xj(Xj({},n),{},{wallet_enabled:t}):n}));m(Xj(Xj({},v),{},{businesses:i}))}}})))};function rS(){return rS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rS.apply(this,arguments)}function oS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oS(Object(n),!0).forEach((function(t){iS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uS(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function sS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nS.propTypes={UIComponent:c.a.elementType,pointWallet:c.a.object,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var lS=function(e){var t,n=e.searchByAddress,r=e.handlerFindBusiness,o=e.UIComponent,s=sS(rn(),1)[0],c=sS(vr(),1)[0],l=sS(Object(i.useState)({countries:[],cities:[],citiesOptions:[]}),2),f=l[0],p=l[1],d=sS(Object(i.useState)({cityId:null,dropdownOptionId:null,orderType:(null===(t=c.options)||void 0===t?void 0:t.type)||1}),2),y=d[0],h=d[1],v=sS(Object(i.useState)(!1),2),m=v[0],b=v[1],g=function(){var e,t=(e=a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.countries().get();case 3:n=e.sent,r=n.response,p(aS(aS({},f),{},{countries:null==r||null===(t=r.data)||void 0===t?void 0:t.result})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){uS(a,r,o,i,u,"next",e)}function u(e){uS(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){n||g()}),[]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,rS({},e,{orderState:c,allListValues:f,currentValues:y,isFormErrors:m,handleChangeValue:function(e){var t=e.name,n=e.value;switch(t){case"country":var r=null==f?void 0:f.countries.find((function(e){return Number(e.id)===Number(n)})),o=null==r?void 0:r.cities.filter((function(e){return e.options.length}));p(aS(aS({},f),{},{cities:o})),h(aS(aS({},y),{},{cityId:null}));break;case"cityId":var a=f.cities.find((function(e){return Number(e.id)===Number(n)}));p(aS(aS({},f),{},{citiesOptions:null==a?void 0:a.options})),h(aS(aS({},y),{},{cityId:n,dropdownOptionId:null}));break;case"dropdownOptionId":h(aS(aS({},y),{},{dropdownOptionId:n}))}},handleFindBusiness:function(){var e=!(f.citiesOptions.length>0)||!!y.dropdownOptionId,t=y.cityId&&e;t&&r(y),b(!t)}})))};function fS(){return fS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fS.apply(this,arguments)}function pS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pS(Object(n),!0).forEach((function(t){yS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}lS.propTypes={UIComponent:c.a.elementType,searchByAddress:c.a.bool,handlerFindBusiness:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mS=function(e){var t,n=e.maxPreoderDays,r=e.UIComponent,o=hS(Object(i.useState)(null),2),a=o[0],s=o[1],c=hS(Object(i.useState)(null),2),l=c[0],f=c[1],p=hS(Object(i.useState)(null),2),d=p[0],y=p[1],h=hS(Object(i.useState)(null),2),v=h[0],m=h[1],b=hS(Object(i.useState)([]),2)[1],g=(null==l||null===(t=l.schedule)||void 0===t?void 0:t.map((function(e,t){return!e.enabled&&t})))||[],O=function(){var e=n,t=Yn()().toDate(),r=[],o=g.every((function(e){return!1===e}));if(g.length&&!o)for(;e>0;){var a=t,i=Yn()(t).day();!1===g[i]&&(r.push(Yn()(a).toDate()),e--),t=Yn()(Yn()(t).add(1,"d")).toDate()}if(g.length&&o)for(var u=1;u<=n;u++)r.push(Yn()(Yn()(t).add(u,"d")).toDate());return r.unshift(Yn()().toDate()),r};return Object(i.useEffect)((function(){O()}),[g]),Object(i.useEffect)((function(){!function(){for(var e=[],t=Yn()().format("YYYY-MM-DD"),n=Yn()().day(30).format("YYYY-MM-DD"),r=Yn()(n,"YYYY-MM-DD HH:mm").diff(Yn()(t,"YYYY-MM-DD HH:mm"),"days"),o=0;o<=r;o++)e.push({key:"".concat(o),date:Yn()(t).add(o,"d").format("YYYY-MM-DD")});b(e)}()}),[]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,fS({},e,{futureDaysToShow:O,menuLapsesList:function(){for(var e=[],t=(null==a?void 0:a.lapses)||[],n=0;n<t.length;n++)for(var r,o,i,u,s,c,l,f,p="".concat(null===(r=t[n])||void 0===r||null===(o=r.open)||void 0===o?void 0:o.hour,":").concat(null===(i=t[n])||void 0===i||null===(u=i.open)||void 0===u?void 0:u.minute),d="".concat(null===(s=t[n])||void 0===s||null===(c=s.close)||void 0===c?void 0:c.hour,":").concat(null===(l=t[n])||void 0===l||null===(f=l.close)||void 0===f?void 0:f.minute),y=Yn()(d,"HH:mm").diff(Yn()(p,"HH:mm"),"hour",!0);y>0;){var h=p;e.push(Yn()(h,"HH:mm").toDate()),p=Yn()(h,"HH:mm").add(15,"minutes"),y-=.25}return e},disableDays:g,startDate:v,isDisabledDay:function(e){var t=Yn()(e,"YYYY-MM-DD").day();return g.every((function(e){return e!==t}))},scheduleSelected:a,menuSelected:null==l?void 0:l.id,handleMenuSelected:function(e){return s(function(e){var t;f(e);var n=Yn()().day();return{lapses:null==e||null===(t=e.schedule[n])||void 0===t?void 0:t.lapses,menuId:e.id}}(e))},handleDate:function(t){var n,r=Yn()(t,"YYYY-MM-DD").day(),o=null==l||null===(n=l.schedule[r])||void 0===n?void 0:n.lapses;s(dS(dS({},a),{},{lapses:o})),m(t),y(Yn()(t).format("YYYY-MM-DD HH:mm")),e.handlerSelectDate(Yn()(t).format("YYYY-MM-DD HH:mm"))},onSendMenuInfo:function(){(null==a?void 0:a.menuId)&&d&&e.handleMenuInfo({menuId:null==a?void 0:a.menuId,date:new Date(d)})},dateSelected:d})))};function bS(){return bS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bS.apply(this,arguments)}function gS(e){return function(e){if(Array.isArray(e))return IS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||CS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OS(Object(n),!0).forEach((function(t){jS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SS(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ES(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){SS(a,r,o,i,u,"next",e)}function u(e){SS(a,r,o,i,u,"throw",e)}i(void 0)}))}}function PS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||CS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CS(e,t){if(e){if("string"==typeof e)return IS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?IS(e,t):void 0}}function IS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mS.propTypes={UIComponent:c.a.elementType,maxPreoderDays:c.a.number,business:c.a.object,handleMenuInfo:c.a.func,handlerSelectDate:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xS=function(e){var t=e.UIComponent,n=e.orderId,r=e.customHandleSend,o=e.messages,s=e.setMessages,c=e.asDashboard,l=e.order,f=e.handleUpdateOrderForUnreadCount,p=PS(rn(),1)[0],d=PS(yn(),1)[0],y=d.user,h=d.token,v=e.accessToken||h,m=PS(Object(i.useState)({business:!0,administrator:!0,driver:!0,customer:!0}),2),b=m[0],g=m[1],O=PS(Object(i.useState)(""),2),w=O[0],j=O[1],S=PS(Object(i.useState)({loading:!0,error:null,messages:[]}),2),E=S[0],P=S[1],C=PS(Object(i.useState)({loading:!1,error:null}),2),I=C[0],x=C[1],A=PS(Object(i.useState)({loading:!0,error:null,messages:[]}),2),T=A[0],_=A[1],k=PS(Object(i.useState)(null),2),D=k[0],U=k[1],L=Cn(),B=function(){var e=ES(a.a.mark((function e(){var t,i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return",r(w));case 2:return e.prev=2,x({loading:!0,error:null}),t=[],b.customer&&t.push(3),b.administrator&&t.push(0),b.business&&t.push(2),b.driver&&t.push(4),i={comment:w,type:2,can_see:t.join(",")},D&&(i.type=3,i.file=D),e.next=13,fetch("".concat(p.root,"/orders/").concat(n,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)},body:JSON.stringify(i)});case 13:return u=e.sent,e.next=16,u.json();case 16:c=e.sent,l=c.error,f=c.result,l||(s&&o?s(wS(wS({},o),{},{messages:[].concat(gS(o.messages),[f])})):P(wS(wS({},E),{},{messages:[].concat(gS(E.messages),[f])}))),x({loading:!1,error:l?f:null}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),x({loading:!1,error:[e.t0.Messages]});case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=ES(a.a.mark((function e(){var t,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(wS(wS({},E),{},{loading:!0})),t=c?"".concat(p.root,"/orders/").concat(n,"/messages?mode=dashboard"):"".concat(p.root,"/orders/").concat(n,"/messages"),e.next=5,fetch(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}});case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,i=o.error,u=o.result,P(i?wS(wS({},E),{},{loading:!1,error:u}):{messages:u,loading:!1,error:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),P(wS(wS({},E),{},{loading:!1,error:[e.t0.Messages]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=ES(a.a.mark((function e(t){var r,i,u,c,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,_(wS(wS({},T),{},{loading:!0})),r="".concat(p.root,"/orders/").concat(n,"/messages/").concat(t,"/read?order_id=").concat(n,"&order_message_id=").concat(t),e.next=7,fetch(r,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}});case 7:return i=e.sent,e.next=10,i.json();case 10:u=e.sent,c=u.error,l=u.result,c?_(wS(wS({},T),{},{loading:!1,error:l})):(_({messages:l,loading:!1,error:null}),E.messages.length>0&&(d=E.messages.filter((function(e){return e.id===t&&(e.read=!0),!0})),P(wS(wS({},E),{},{messages:d}))),f&&f(null),f&&f(n)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),_(wS(wS({},T),{},{loading:!1,error:[e.t0.Messages]}));case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&s||F()}),[n]),Object(i.useEffect)((function(){if(!(E.loading||o&&s)){var e=function(e){var t;(null===(t=e.order)||void 0===t?void 0:t.id)===n&&(E.messages.find((function(t){return t.id===e.id}))||P(wS(wS({},E),{},{messages:[].concat(gS(E.messages),[e])})))};return L.on("message",e),function(){L.off("message",e)}}}),[E,L,null==l?void 0:l.status]),Object(i.useEffect)((function(){return c?L.join("messages_orders_".concat(n,"_").concat(null==y?void 0:y.level)):L.join("messages_orders_".concat(null==y?void 0:y.id)),function(){c?L.leave("messages_orders_".concat(n,"_").concat(null==y?void 0:y.level)):L.leave("messages_orders_".concat(null==y?void 0:y.id))}}),[L,n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,bS({},e,{messages:E,image:D,canRead:b,handleSend:B,message:w,handleReadMessages:R,setMessage:j,setCanRead:g,sendMessage:I,setImage:U})))};function AS(){return AS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AS.apply(this,arguments)}function TS(e){return function(e){if(Array.isArray(e))return RS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||FS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_S(Object(n),!0).forEach((function(t){DS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function US(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function LS(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){US(a,r,o,i,u,"next",e)}function u(e){US(a,r,o,i,u,"throw",e)}i(void 0)}))}}function BS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||FS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FS(e,t){if(e){if("string"==typeof e)return RS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RS(e,t):void 0}}function RS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xS.propTypes={UIComponent:c.a.elementType,handleClickSetDefault:c.a.func,customHandleSend:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var MS=function(e){var t=e.orderId,n=e.UIComponent,r=BS(rn(),1)[0],o=BS(yn(),1)[0],s=BS(Object(i.useState)({metaFields:[],loading:!0,error:null}),2),c=s[0],l=s[1],f=BS(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],y=function(){var e=LS(a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(kS(kS({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/orders/").concat(t,"/metafields"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,l(kS(kS({},c),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(kS(kS({},c),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=LS(a.a.mark((function e(n){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(kS(kS({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/orders/").concat(t,"/metafields/").concat(n),i);case 5:e.sent.ok&&(u=c.metaFields.filter((function(e){return e.id!==n})),l(kS(kS({},c),{},{metaFields:u})),d({loading:!1,result:{error:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=LS(a.a.mark((function e(n){var i,u,s,f,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(kS(kS({},p),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)},body:JSON.stringify(n)},e.next=5,fetch("".concat(r.root,"/orders/").concat(t,"/metafields"),i);case 5:return u=e.sent,e.next=8,u.json();case 8:s=e.sent,f=s.error,y=s.result,f?d({loading:!1,result:{error:!0,result:y}}):([],h=[].concat(TS(c.metaFields),[y]),l(kS(kS({},c),{},{metaFields:h})),d({loading:!1,result:{error:!1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,AS({},e,{metaFieldsList:c,actionState:p,handleDeleteMetaField:h,handeAddMetaField:v})))};MS.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},MS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var NS=n(35),zS=n.n(NS);function GS(){return GS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GS.apply(this,arguments)}function YS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yn.a.extend(zS.a),Yn.a.extend($n.a);var $S=function(e){var t,n,r=e.minDate,o=e.maxDate,a=e.currentDate,s=e.useOrderContext,c=e.onChangeMoment,l=e.UIComponent,f=YS(vr(),2),p=f[0],d=f[1].changeMoment,y=function(e){if(e)return Yn()(e,"YYYY-MM-DD HH:mm").isSameOrAfter(Yn()(),"day")?Yn()(e).format("YYYY-MM-DD HH:mm"):Yn()().format("YYYY-MM-DD HH:mm")},h=s?null===(t=p.options)||void 0===t?void 0:t.moment:a,v=YS(Object(i.useState)(h?Yn()(y(h)).format("YYYY-MM-DD HH:mm"):null),2),m=v[0],b=v[1],g=YS(Object(i.useState)(!m),2),O=g[0],w=g[1],j=YS(Object(i.useState)([]),2),S=j[0],E=j[1],P=YS(Object(i.useState)([]),2),C=P[0],I=P[1],x=YS(Object(i.useState)(Yn()(y(h)).format("YYYY-MM-DD")),2),A=x[0],T=x[1],_=YS(Object(i.useState)(null),2),k=_[0],D=_[1],U=function(){O||(w(!0),s&&d(null),c&&c(null))};Object(i.useEffect)((function(){var e;if(s)if(null!==(e=p.options)&&void 0!==e&&e.moment){var t,n=Yn.a.utc(y(null===(t=p.options)||void 0===t?void 0:t.moment)).local();b(n.format("YYYY-MM-DD HH:mm")),T(n.format("YYYY-MM-DD")),D(n.format("HH:mm")),O&&w(!1)}else A!==Yn()().format("YYYY-MM-DD")&&T(Yn()().format("YYYY-MM-DD")),null!==k&&D(null),null!==m&&b(null),!O&&w(!0);else null!==m&&b(null),!O&&w(!0)}),[null===(n=p.options)||void 0===n?void 0:n.moment]),Object(i.useEffect)((function(){if(m){var e=Yn()(m,"YYYY-MM-DD HH:mm"),t=Yn()(),n=e.diff(t,"seconds");if(!(n<=0)){var r=setTimeout((function(){U()}),1e3*n);return function(){clearTimeout(r)}}U()}}),[m]),Object(i.useEffect)((function(){O&&C[0]&&(T(C[0]),D(null))}),[O,C]);var L=function(){for(var e=[],t=A===Yn()().format("YYYY-MM-DD"),n=A===Yn()(o).format("YYYY-MM-DD"),r=new Date,a=0;a<24;a++)if(!(t&&a<(null==r?void 0:r.getHours())||n&&a>(null==o?void 0:o.getHours())))for(var i=0;i<59;i+=15)if(!(t&&a===(null==r?void 0:r.getHours())&&i<=r.getMinutes()||n&&a===(null==o?void 0:o.getHours())&&i>o.getMinutes())){var u=a<10?"0".concat(a):a,s=i<10?"0".concat(i):i,c=i+14<10?"0".concat(i+14):i+14,l="".concat(u,":").concat(s),f="".concat(u,":").concat(c);e.push({startTime:l,endTime:f})}E(e)},B=function(){for(var e,t,n,a=[],i=parseInt((e=y(o),n=null!=t?t:Yn()(),Yn()(e).diff(Yn()(n),"day")),y(r)),u=0;u<i+1;u++)a.push(Yn()(y(r)).add(u,"d").format("YYYY-MM-DD"));I(a)};return Object(i.useEffect)((function(){A&&L()}),[A]),Object(i.useEffect)((function(){var e=setInterval((function(){0===Yn()(A).diff(Yn()(a),"day")&&L()}),1e3);return function(){return clearInterval(e)}}),[A]),Object(i.useEffect)((function(){B()}),[o,r]),u.a.createElement(u.a.Fragment,null,l&&u.a.createElement(l,GS({},e,{isAsap:O,minDate:y(r),maxDate:y(o),dateSelected:A,timeSelected:k,handleChangeDate:function(e){e&&e!==A&&(T(e),D(null),w(!1))},handleChangeTime:function(e){if(e&&e!==k){var t=Yn()("".concat(A," ").concat(e),"YYYY-MM-DD HH:mm").toDate();D(e),w(!1),s&&d(t),c&&c(t)}},datesList:C,hoursList:S,handleAsap:U})))};function JS(){return JS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JS.apply(this,arguments)}function VS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VS(Object(n),!0).forEach((function(t){WS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KS(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function XS(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){KS(a,r,o,i,u,"next",e)}function u(e){KS(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ZS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return QS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}$S.propTypes={UIComponent:c.a.elementType,minDate:c.a.instanceOf(Date),maxDate:c.a.instanceOf(Date).isRequired,currentDate:c.a.instanceOf(Date),useOrderContext:c.a.bool,onChangeMoment:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$S.defaultProps={useOrderContext:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var eE=function(e){var t=e.UIComponent,n=ZS(rn(),1)[0],r={},o=ZS(yn(),1)[0].token,s=ZS(Object(i.useState)({loading:!0,orders:[],error:null}),2),c=s[0],l=s[1],f=ZS(Object(i.useState)({loading:!0,orders:[],error:null}),2),p=f[0],d=f[1],y=function(){var e=XS(a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},r.activeOrders=t,e.next=5,n.setAccessToken(o).orders().where([{attribute:"status",value:[0,3,4,7,8,9]}]).get({cancelToken:t});case 5:i=e.sent,u=i.content.result,l(HS(HS({},c),{},{loading:!1,orders:u})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),l(HS(HS({},c),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=XS(a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},r.previousOrders=t,e.next=5,n.setAccessToken(o).orders().where([{attribute:"status",value:[1,2,5,6,10,11,12]}]).get({cancelToken:t});case 5:i=e.sent,u=i.content.result,d(HS(HS({},p),{},{loading:!1,orders:u})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d(HS(HS({},p),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return h(),y(),function(){r.previousOrders&&r.previousOrders.cancel(),r.activeOrders&&r.activeOrders.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,JS({},e,{activeOrders:c,previousOrders:p})))};function tE(){return tE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tE.apply(this,arguments)}function nE(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function rE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var aE=function(e){var t=e.status,n=e.UIComponent,r=rE(rn(),1)[0],o=rE(yn(),1)[0].token,s=rE(Object(i.useState)([]),2),c=s[0],l=s[1],f={},p=function(){var e,n=(e=a.a.mark((function e(){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},f.orders=n,e.next=5,r.setAccessToken(o).orders().where([{attribute:"status",value:t}]).get({cancelToken:n});case 5:i=e.sent,u=i.content.result,l(u),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){nE(a,r,o,i,u,"next",e)}function u(e){nE(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){return p(),function(){f.orders&&f.orders.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,tE({},e,{orders:c})))};function iE(){return iE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iE.apply(this,arguments)}function uE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uE(Object(n),!0).forEach((function(t){cE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lE(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function fE(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){lE(a,r,o,i,u,"next",e)}function u(e){lE(a,r,o,i,u,"throw",e)}i(void 0)}))}}function pE(e){return function(e){if(Array.isArray(e))return hE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||yE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yE(e,t){if(e){if("string"==typeof e)return hE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hE(e,t):void 0}}function hE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}aE.propTypes={UIComponent:c.a.elementType,orderType:c.a.oneOf(["active","previous"]).isRequired,status:c.a.arrayOf(c.a.number).isRequired,orders:c.a.arrayOf(c.a.object),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},aE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var vE=function(e){var t,n=e.UIComponent,r=e.isSearchByCartId,o=e.isSearchByCityName,s=e.paginationSettings,c=dE(rn(),1)[0],l=dE(yn(),1)[0],f=l.user,p=l.token,d=l.loading,y={},h=dE(Object(i.useState)(null),2),v=h[0],m=h[1],b=dE(Object(i.useState)({}),2),g=b[0],O=b[1],w=dE(Object(i.useState)(!1),2),j=w[0],S=w[1],E=dE(Object(i.useState)({loading:!1,error:null}),2),P=E[0],C=E[1],I=dE(Object(i.useState)(null),2),x=I[0],A=I[1],T=dE(Object(i.useState)({loading:!1,carts:[],error:null}),2),_=T[0],k=T[1],D=dE(Object(i.useState)({currentPage:"pages"===s.controlType&&s.initialPage&&s.initialPage>=1?s.initialPage-1:0,pageSize:null!==(t=s.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),U=D[0],L=D[1],B=dE(Object(i.useState)({businesses:[],loading:!0,error:null}),2),F=B[0],R=B[1],M=dE(Object(i.useState)([]),2),N=M[0],z=M[1],G=dE(Object(i.useState)([]),2),Y=G[0],q=G[1],$=function(){var e=fE(a.a.mark((function e(t){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(sE(sE({},P),{},{loading:!0})),n={},y.deleteOrder=n,r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=7,fetch("".concat(c.root,"/carts/dashboard/").concat(t),r);case 7:return o=e.sent,e.next=10,o.json();case 10:(i=e.sent).error||(A(t),(u=pE(q)).shift(),0===u.length&&S(!1),q(u)),C({loading:!1,error:i.error?i.result:null}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),C({loading:!1,error:[e.t0.message]}),S(!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=fE(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(sE(sE({},P),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=5,fetch("".concat(c.root,"/controls/orders"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?C({loading:!1,error:null==r?void 0:r.result}):(z(r.result.cities),R(sE(sE({},F),{},{loading:!1,businesses:r.result.businesses}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),C({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=fE(a.a.mark((function e(t,n){var i,u,s,l,f,d,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(sE(sE({},_),{},{loading:!0})),i=null,u=[],v&&(s=[],r&&s.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(v,"%"))}}),o&&s.push({attribute:"city",conditions:[{attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(v,"%"))}}]}),u.push({conector:"OR",conditions:s})),Object.keys(g).length&&(l=[],null!=g&&g.cartId&&l.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(null==g?void 0:g.cartId,"%"))}}),null!==g.deliveryFromDatetime&&l.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(g.deliveryFromDatetime)}}),null!==g.deliveryEndDatetime&&l.push({attribute:"delivery_datetime",value:{condition:"<=",value:g.deliveryEndDatetime}}),0!==g.businessIds.length&&l.push({attribute:"business_id",value:g.businessIds}),0!==g.customerIds.length&&l.push({attribute:"user_id",value:g.customerIds}),0!==g.cityIds.length&&l.push({attribute:"city_id",value:g.cityIds}),l.length&&u.push({conector:"AND",conditions:l})),u.length&&(i={conditions:u,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},d=i?"".concat(c.root,"/carts/dashboard?orderBy=-id&page=").concat(n,"&page_size=").concat(t,"&where=").concat(JSON.stringify(i)):"".concat(c.root,"/carts/dashboard?orderBy=-id&page=").concat(n,"&page_size=").concat(t),e.next=11,fetch(d,f);case 11:return y=e.sent,e.next=14,y.json();case 14:(h=e.sent).error?k(sE(sE({},_),{},{loading:!1,error:h.result})):(k({loading:!1,carts:h.result,error:null}),L(sE(sE({},U),{},{currentPage:h.pagination.current_page,pageSize:0===h.pagination.page_size?U.pageSize:h.pagination.page_size,totalPages:h.pagination.total_pages,totalItems:h.pagination.total,from:h.pagination.from,to:h.pagination.to}))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),k(sE(sE({},_),{},{loading:!1,error:[e.t0.message]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j&&0!==q.length&&$(q[0])}),[q,j]),Object(i.useEffect)((function(){if(!d)return J(),function(){y.drivers&&y.drivers.cancel()}}),[f,d]),Object(i.useEffect)((function(){_.loading||V(U.pageSize,1)}),[v]),Object(i.useEffect)((function(){Object.keys(g).length>0&&!_.loading&&V(U.pageSize,1)}),[g]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,iE({},e,{searchValue:v,businessesList:F,citiesList:N,filterValues:g,selectedCartIds:Y,deletedCartId:x,startMulitOrderDelete:j,handleSelectedCartIds:function(e){var t=pE(Y);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),q(t)},handleRemoveSelectedCartId:function(e){var t=pE(Y);t=t.filter((function(t){return t!==e})),q(t)},handleChangeSearch:function(e){m(e)},handleChangeFilterValues:function(e){O(e)},handleDeleteMultiCarts:function(){S(!0)},setSelectedCartIds:q,getCartList:V,pagination:U,cartList:_})))};function mE(){return mE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mE.apply(this,arguments)}function bE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bE(Object(n),!0).forEach((function(t){OE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wE(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function jE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return SE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var EE=function(e){var t=e.cart,n=e.UIComponent,r=jE(yn(),1)[0].token,o=jE(rn(),1)[0],s=jE(Object(i.useState)({cart:null,loading:!1,error:null}),2),c=s[0],l=s[1],f=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,s,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(gE(gE({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},i="".concat(o.root,"/carts/").concat(null==t?void 0:t.uuid,"?user_id=").concat(null==t?void 0:t.user_id),e.next=6,fetch(i,n);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error?l(gE(gE({},c),{},{loading:!1,error:s.result})):(p=gE(gE({},s.result),{},{id:null==t?void 0:t.id,business:gE(gE({},s.result.business),null==t?void 0:t.business),user:gE(gE({},null==t?void 0:t.user),(null==t||null===(f=t.address)||void 0===f?void 0:f.address)&&{address:t.address.address}),updated_at:null==t?void 0:t.updated_at}),l({loading:!1,cart:p,error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(gE(gE({},c),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){wE(a,r,o,i,u,"next",e)}function u(e){wE(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){t&&f()}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,mE({},e,{cartState:c})))};function PE(){return PE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PE.apply(this,arguments)}function CE(e){return function(e){if(Array.isArray(e))return kE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IE(Object(n),!0).forEach((function(t){AE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function AE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||_E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _E(e,t){if(e){if("string"==typeof e)return kE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kE(e,t):void 0}}function kE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}EE.propTypes={UIComponent:c.a.elementType,cartId:c.a.oneOfType([c.a.number,c.a.string]),order:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},EE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var DE=function(e){var t=e.UIComponent,n=TE(Object(i.useState)({cartId:null,dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],cityIds:[],customerIds:[]}),2),r=n[0],o=n[1];return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,PE({},e,{filterValues:r,handleChangeCartId:function(e){var t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");o(xE(xE({},r),{},{cartId:t}))},handleChangeDateType:function(e){var t=Yn()();switch(e){case"default":o(xE(xE({},r),{},{dateType:"default",deliveryFromDatetime:null,deliveryEndDatetime:null}));break;case"today":var n=t.format("YYYY-MM-DD"),a=Yn()(n).format("YYYY-MM-DD HH:mm:ss");o(xE(xE({},r),{},{dateType:"today",deliveryFromDatetime:a}));break;case"yesterday":var i=t.subtract("1","day").format("YYYY-MM-DD"),u=Yn()(i).format("YYYY-MM-DD HH:mm:ss");o(xE(xE({},r),{},{dateType:"yesterday",deliveryFromDatetime:u}));break;case"last7":var s=t.subtract("7","day").format("YYYY-MM-DD"),c=Yn()(s).format("YYYY-MM-DD HH:mm:ss");o(xE(xE({},r),{},{dateType:"last7",deliveryFromDatetime:c}));break;case"last30":var l=t.subtract("30","day").format("YYYY-MM-DD"),f=Yn()(l).format("YYYY-MM-DD HH:mm:ss");o(xE(xE({},r),{},{dateType:"last30",deliveryFromDatetime:f}));break;case"term":o(xE(xE({},r),{},{dateType:"term",deliveryFromDatetime:null,deliveryEndDatetime:null}))}},handleChangeFromDate:function(e){var t;t=null!==e?Yn()(e).format("YYYY-MM-DD HH:mm:ss"):null,o(xE(xE({},r),{},{deliveryFromDatetime:t}))},handleChangeEndDate:function(e){var t;null!==e?t=Yn()(e).format("YYYY-MM-DD HH:mm:ss"):e=null,o(xE(xE({},r),{},{deliveryEndDatetime:t}))},handleChangeBusinesses:function(e){var t=CE(r.businessIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),o(xE(xE({},r),{},{businessIds:t}))},handleChangeCity:function(e){var t=CE(r.cityIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),o(xE(xE({},r),{},{cityIds:t}))},handleChangeCustomers:function(e){var t=CE(r.customerIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),o(xE(xE({},r),{},{customerIds:t}))},handleResetFilterValues:function(){o({cartId:null,dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],cityIds:[],customerIds:[]})},handleChangeDateRange:function(e,t,n){o(xE(xE({},r),{},{dateType:e,deliveryFromDatetime:t,deliveryEndDatetime:n}))}})))};function UE(){return UE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UE.apply(this,arguments)}function LE(e){return function(e){if(Array.isArray(e))return YE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||GE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BE(Object(n),!0).forEach((function(t){RE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ME(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function NE(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ME(a,r,o,i,u,"next",e)}function u(e){ME(a,r,o,i,u,"throw",e)}i(void 0)}))}}function zE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||GE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GE(e,t){if(e){if("string"==typeof e)return YE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YE(e,t):void 0}}function YE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}DE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},DE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qE=function(e){var t,n=e.UIComponent,r=e.propsToFetch,o=e.orders,s=e.orderIds,c=e.deletedOrderId,l=e.orderStatus,f=e.orderBy,p=e.orderDirection,d=e.useDefualtSessionManager,y=e.paginationSettings,h=e.asDashboard,v=e.filterValues,m=e.searchValue,b=e.isSearchByOrderId,g=e.isSearchByCustomerEmail,O=e.isSearchByCustomerPhone,w=e.orderIdForUnreadCountUpdate,j=zE(rn(),1)[0],S=zE(Object(i.useState)({loading:!o,error:null,orders:[]}),2),E=S[0],P=S[1],C=zE(Object(i.useState)({currentPage:"pages"===y.controlType&&y.initialPage&&y.initialPage>=1?y.initialPage-1:0,pageSize:null!==(t=y.pageSize)&&void 0!==t?t:10}),2),I=C[0],x=C[1],A=zE(yn(),1)[0],T=Cn(),_=d?A.token:e.accessToken,k={},D=zE(Object(i.useState)({loading:!1,error:null}),2),U=D[0],L=D[1],B=zE(Object(i.useState)(null),2),F=B[0],R=B[1],M=function(e,t){if("id"===e){if("desc"===p)return t.sort((function(e,t){return t.id-e.id}));if("asc"===p)return t.sort((function(e,t){return e.id-t.id}))}return"last_direct_message_at"===e?t.sort((function(e,t){return new Date(t.last_direct_message_at)-new Date(e.last_direct_message_at)})):t},N=function(){var e=NE(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(FE(FE({},U),{},{loading:!0})),n={},k.updateOrders=n,e.next=6,j.setAccessToken(_).orders(null==t?void 0:t.id).save({status:t.newStatus},{cancelToken:n});case 6:r=e.sent,o=r.content,L({loading:!1,error:o.error?o.result:null}),o.error||(i=E.orders.filter((function(e){return(null==e?void 0:e.id)!==(null==t?void 0:t.id)})),P(FE(FE({},E),{},{orders:i}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),L({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=NE(a.a.mark((function e(t){var n,o,i,u,c,d,w,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,o=[],i=[],n=h?{query:{orderBy:("desc"===p?"-":"")+f}}:{query:{orderBy:("desc"===p?"-":"")+f,page:t,page_size:y.pageSize}},s&&i.push({attribute:"id",value:s}),0===Object.keys(v).length?l&&i.push({attribute:"status",value:l}):v.statuses.length>0?(u=v.statuses.every((function(e){return-1!==l.indexOf(e)})),c=l.every((function(e){return-1!==v.statuses.indexOf(e)})),u&&i.push({attribute:"status",value:v.statuses}),c&&l&&i.push({attribute:"status",value:l})):l&&i.push({attribute:"status",value:l}),m&&(d=[],b&&d.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}),g&&d.push({attribute:"customer",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}]}),O&&d.push({attribute:"customer",conditions:[{attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}]}),i.push({conector:"OR",conditions:d})),Object.keys(v).length&&(w=[],null!==v.deliveryFromDatetime&&w.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(v.deliveryFromDatetime)}}),null!==v.deliveryEndDatetime&&w.push({attribute:"delivery_datetime",value:{condition:"<=",value:v.deliveryEndDatetime}}),0!==v.businessIds.length&&w.push({attribute:"business_id",value:v.businessIds}),0!==v.driverIds.length&&w.push({attribute:"driver_id",value:v.driverIds}),0!==v.deliveryTypes.length&&w.push({attribute:"delivery_type",value:v.deliveryTypes}),0!==v.paymethodIds.length&&w.push({attribute:"paymethod_id",value:v.paymethodIds}),w.length&&i.push({conector:"AND",conditions:w})),i.length&&(o={conditions:i,conector:"AND"}),S={},k.orders=S,n.cancelToken=S,E=r?h?j.setAccessToken(_).orders().asDashboard().select(r).where(o):j.setAccessToken(_).orders().select(r).where(o):h?j.setAccessToken(_).orders().asDashboard().where(o):j.setAccessToken(_).orders().where(o),e.next=15,E.get(n);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){var t=!0;return void 0!==v.businessIds&&v.businessIds.length>0&&(v.businessIds.includes(e.business_id)||(t=!1)),void 0!==v.driverIds&&v.driverIds.length>0&&(v.driverIds.includes(e.driver_id)||(t=!1)),void 0!==v.deliveryTypes&&v.deliveryTypes.length>0&&(v.deliveryTypes.includes(e.delivery_type)||(t=!1)),void 0!==v.paymethodIds&&v.paymethodIds.length>0&&(v.paymethodIds.includes(e.paymethod_id)||(t=!1)),void 0!==v.statuses&&v.statuses.length>0&&(v.statuses.includes(parseInt(e.status))||(t=!1)),t},Y=function(){var e=NE(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,P(FE(FE({},E),{},{loading:!0})),e.next=6,z(I.currentPage+1);case 6:t=e.sent,P({loading:!1,orders:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||x({currentPage:t.content.pagination.current_page,pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),"Cancel"!==e.t0.constructor.name&&P(FE(FE({},E),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){if(null!==w&&0!==E.orders.length){var e=E.orders.filter((function(e){return(null==e?void 0:e.id)===w&&(e.unread_count=0,e.unread_general_count=0,e.unread_direct_count=0),!0}));P(FE(FE({},E),{},{orders:e}))}}),[w]),Object(i.useEffect)((function(){if(!E.loading){var e=M(f,E.orders);P(FE(FE({},E),{},{orders:e}))}}),[f,E.orders]),Object(i.useEffect)((function(){if(null!==c){var e=E.orders.filter((function(e){return(null==e?void 0:e.id)!==c}));P(FE(FE({},E),{},{orders:e}))}}),[c]),Object(i.useEffect)((function(){null!==m&&Y()}),[m]),Object(i.useEffect)((function(){if(o)P(FE(FE({},E),{},{orders:o}));else{var e=!1,t=!1;if(Object.keys(v).length>0&&(e=v.statuses.every((function(e){return-1!==l.indexOf(e)})),t=l.every((function(e){return-1!==v.statuses.indexOf(e)})),!e&&!t))return void P({loading:!1,orders:[],error:null});Y()}return function(){k.orders&&k.orders.cancel()}}),[A,v,o]),Object(i.useEffect)((function(){if(!E.loading){var e=function(e){var t=[];if(E.orders.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)}))){t=E.orders.filter((function(t){var n=!0;return(null==t?void 0:t.id)===(null==e?void 0:e.id)&&(delete e.total,delete e.subtotal,Object.assign(t,e),(n=(0===l.length||l.includes(parseInt(t.status)))&&G(e))||(I.total--,x(FE({},I)))),n}));var n=M(f,t);P(FE(FE({},E),{},{orders:n}))}else{if(G(e))if(l.includes(parseInt(e.status))){t=[].concat(LE(E.orders),[e]);var r=M(f,t);I.total++,x(FE({},I)),P(FE(FE({},E),{},{orders:r}))}}},t=function(e){R(null==e?void 0:e.id);var t=FE(FE({},e),{},{status:0}),n=[];if(l.includes(0)&&G(e)){n=[t].concat(LE(E.orders));var r=M(f,n);I.total++,x(FE({},I)),P(FE(FE({},E),{},{orders:r}))}},n=function(e){if(0!==E.orders.length&&E.orders.find((function(t){var n;return(null==t?void 0:t.id)===(null===(n=e.order)||void 0===n?void 0:n.id)}))){var t=E.orders.filter((function(t){var n;return(null==t?void 0:t.id)===(null===(n=e.order)||void 0===n?void 0:n.id)&&t.last_message_at!==e.created_at&&(1===e.type?(t.last_general_message_at=e.created_at,0!==e.author.level&&(t.unread_general_count=t.unread_general_count+1)):(t.last_direct_message_at=e.created_at,0!==e.author.level&&(t.unread_direct_count=t.unread_direct_count+1)),t.last_message_at=e.created_at,0!==e.author.level&&(t.unread_count=t.unread_count+1)),!0})),n=M(f,t);P(FE(FE({},E),{},{orders:n}))}};return T.on("update_order",e),T.on("orders_register",t),T.on("message",n),function(){T.off("update_order",e),T.off("orders_register",t),T.off("message",n)}}}),[E.orders,I,f,T]),Object(i.useEffect)((function(){if(A.user){var e;if(h)T.join("messages_orders"),T.join("orders");else T.join("orders_".concat(null==A||null===(e=A.user)||void 0===e?void 0:e.id));return function(){var e;h?(T.leave("messages_orders"),T.leave("orders")):T.leave("orders_".concat(null==A||null===(e=A.user)||void 0===e?void 0:e.id))}}}),[T,A]);var q=function(){var e=NE(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(FE(FE({},E),{},{loading:!0})),e.prev=1,e.next=4,z(I.currentPage+1);case 4:t=e.sent,P({loading:!1,orders:t.content.error?E.orders:E.orders.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||x({currentPage:t.content.pagination.current_page,pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&P(FE(FE({},E),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=NE(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(FE(FE({},E),{},{loading:!0})),e.prev=1,e.next=4,z(t);case 4:n=e.sent,P({loading:!1,orders:n.content.error?[]:n.content.result,error:n.content.error?n.content.result:null}),n.content.error||x({currentPage:n.content.pagination.current_page,pageSize:n.content.pagination.page_size,totalPages:n.content.pagination.total_pages,total:n.content.pagination.total,from:n.content.pagination.from,to:n.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&P(FE(FE({},E),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,UE({},e,{orderList:E,pagination:I,registerOrderId:F,loadMoreOrders:q,goToPage:$,handleUpdateOrderStatus:N,handleResetNotification:function(){R(null)}})))};function $E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return JE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}qE.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),onOrderClick:c.a.func,useDefualtSessionManager:c.a.bool,orders:c.a.arrayOf(s.object),orderIds:c.a.arrayOf(s.number),orderIdForUnreadCountUpdate:c.a.number,orderStatus:c.a.arrayOf(s.number),orderBy:c.a.string,orderDirection:c.a.oneOf(["asc","desc"]),paginationSettings:c.a.exact({initialPage:c.a.number,pageSize:c.a.number,controlType:c.a.oneOf(["infinity","pages"])}),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qE.defaultProps={orderBy:"id",orderDirection:"desc",paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var VE=function(e){var t=e.UIComponent,n=Cn(),r=$E(yn(),1)[0],o=r.user,a=r.loading,s=$E(zn(),1)[0];return Object(i.useEffect)((function(){if(o){var e=function(e){s.emit("order_added",e)};return 0===o.level?n.join("orders"):n.join("orders_".concat(null==o?void 0:o.id)),n.on("orders_register",e),function(){n.off("orders_register",e)}}}),[n,a,o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function HE(){return HE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HE.apply(this,arguments)}function WE(e){return function(e){if(Array.isArray(e))return tP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KE(Object(n),!0).forEach((function(t){ZE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||eP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eP(e,t){if(e){if("string"==typeof e)return tP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tP(e,t):void 0}}function tP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}VE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},VE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nP=function(e){var t=e.UIComponent,n=e.driverGroupList,r=QE(Object(i.useState)({orderId:null,groupTypes:[],dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],driverIds:[],driverGroupIds:[],cityIds:[],statuses:[],deliveryTypes:[],paymethodIds:[]}),2),o=r[0],a=r[1];return Object(i.useEffect)((function(){var e=[];if(o.groupTypes.length>0){var t,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=eP(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(o.groupTypes);try{var i=function(){var r=t.value,o=n.groups.find((function(e){return e.id===r}));o&&(e=[].concat(WE(e),WE(null==o?void 0:o.drivers)))};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}var u=e.filter((function(e,t,n){return n.indexOf(e)===t}));a(XE(XE({},o),{},{driverGroupIds:u}))}),[o.groupTypes]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,HE({},e,{filterValues:o,handleChangeOrderId:function(e){var t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");a(XE(XE({},o),{},{orderId:t}))},handleChangeGroup:function(e){var t=WE(o.groupTypes);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(XE(XE({},o),{},{groupTypes:t}))},handleChangeDateType:function(e){var t=Yn()();switch(e){case"default":a(XE(XE({},o),{},{dateType:"default",deliveryFromDatetime:null,deliveryEndDatetime:null}));break;case"today":var n=t.format("YYYY-MM-DD"),r=Yn()(n).format("YYYY-MM-DD HH:mm:ss");a(XE(XE({},o),{},{dateType:"today",deliveryFromDatetime:r}));break;case"yesterday":var i=t.subtract("1","day").format("YYYY-MM-DD"),u=Yn()(i).format("YYYY-MM-DD HH:mm:ss");a(XE(XE({},o),{},{dateType:"yesterday",deliveryFromDatetime:u}));break;case"last7":var s=t.subtract("7","day").format("YYYY-MM-DD"),c=Yn()(s).format("YYYY-MM-DD HH:mm:ss");a(XE(XE({},o),{},{dateType:"last7",deliveryFromDatetime:c}));break;case"last30":var l=t.subtract("30","day").format("YYYY-MM-DD"),f=Yn()(l).format("YYYY-MM-DD HH:mm:ss");a(XE(XE({},o),{},{dateType:"last30",deliveryFromDatetime:f}));break;case"term":a(XE(XE({},o),{},{dateType:"term",deliveryFromDatetime:null,deliveryEndDatetime:null}))}},handleChangeFromDate:function(e){var t;t=null!==e?Yn()(e).format("YYYY-MM-DD HH:mm:ss"):null,a(XE(XE({},o),{},{deliveryFromDatetime:t}))},handleChangeEndDate:function(e){var t;null!==e?t=Yn()(e).format("YYYY-MM-DD HH:mm:ss"):e=null,a(XE(XE({},o),{},{deliveryEndDatetime:t}))},handleChangeBusinesses:function(e){var t=WE(o.businessIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(XE(XE({},o),{},{businessIds:t}))},handleChangeDriver:function(e){var t=WE(o.driverIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(XE(XE({},o),{},{driverIds:t}))},handleChangeCity:function(e){var t=WE(o.cityIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(XE(XE({},o),{},{cityIds:t}))},handleChangeOrderStatus:function(e){var t=WE(o.statuses);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(XE(XE({},o),{},{statuses:t}))},handleChangeDeliveryType:function(e){var t=WE(o.deliveryTypes);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(XE(XE({},o),{},{deliveryTypes:t}))},handleChangePaymethodType:function(e){var t=WE(o.paymethodIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(XE(XE({},o),{},{paymethodIds:t}))},handleResetFilterValues:function(){a({orderId:null,groupTypes:[],deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],driverIds:[],cityIds:[],statuses:[],deliveryTypes:[],paymethodIds:[]})}})))};function rP(){return rP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rP.apply(this,arguments)}function oP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oP(Object(n),!0).forEach((function(t){iP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function sP(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){uP(a,r,o,i,u,"next",e)}function u(e){uP(a,r,o,i,u,"throw",e)}i(void 0)}))}}function cP(e){return function(e){if(Array.isArray(e))return pP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||fP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fP(e,t){if(e){if("string"==typeof e)return pP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pP(e,t):void 0}}function pP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dP=function(e){var t=e.UIComponent,n=e.statusGroup,r=e.driversPropsToFetch,o=lP(rn(),1)[0],s=Cn(),c=lP(yn(),1)[0],l=c.user,f=c.token,p=c.loading,d={},y=lP(Object(i.useState)(null),2),h=y[0],v=y[1],m=lP(Object(i.useState)(n||"pending"),2),b=m[0],g=m[1],O=lP(Object(i.useState)({}),2),w=O[0],j=O[1],S=lP(Object(i.useState)(null),2),E=S[0],P=S[1],C=lP(Object(i.useState)(!1),2),I=C[0],x=C[1],A=lP(Object(i.useState)(!1),2),T=A[0],_=A[1],k=lP(Object(i.useState)({loading:!1,error:null}),2),D=k[0],U=k[1],L=lP(Object(i.useState)(null),2),B=L[0],F=L[1],R=lP(Object(i.useState)({groups:[],loading:!1,error:null}),2),M=R[0],N=R[1],z=lP(Object(i.useState)({drivers:[],loading:!0,error:null}),2),G=z[0],Y=z[1],q=lP(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),$=q[0],J=q[1],V=lP(Object(i.useState)({businesses:[],loading:!0,error:null}),2),H=V[0],W=V[1],K=lP(Object(i.useState)([]),2),X=K[0],Z=K[1],Q=lP(Object(i.useState)([]),2),ee=Q[0],te=Q[1],ne=lP(Object(i.useState)({pending:[0,13],inProgress:[7,8,4,9,3,14,18,19,20,21,22,23],completed:[1,11,15],cancelled:[2,5,6,10,12,16,17],all:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]}),2),re=ne[0],oe=ne[1],ae=function(){var e=sP(a.a.mark((function e(t){var n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(aP(aP({},D),{},{loading:!0})),n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({status:E})},e.next=5,fetch("".concat(o.root,"/orders/").concat(t),n);case 5:return r=e.sent,e.next=8,r.json();case 8:i=e.sent,u=i.result,parseInt(u.status)===E&&((s=cP(ee)).shift(),0===s.length&&x(!1),te(s)),U(aP(aP({},D),{},{loading:!1})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),U({loading:!1,error:[e.t0.message]}),x(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=sP(a.a.mark((function e(t){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(aP(aP({},D),{},{loading:!0})),n={},d.deleteOrder=n,e.next=6,o.setAccessToken(f).orders(t).delete({cancelToken:n});case 6:r=e.sent,(i=r.content).error||(F(t),(u=cP(ee)).shift(),0===u.length&&_(!1),te(u)),U({loading:!1,error:i.error?i.result:null}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),U({loading:!1,error:[e.t0.message]}),_(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=sP(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},d.drivers=t,e.next=5,o.setAccessToken(f).users().select(r).where([{attribute:"level",value:[4]}]).get({cancelToken:t});case 5:n=e.sent,i=n.content.result,Y(aP(aP({},G),{},{loading:!1,drivers:i})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Y(aP(aP({},G),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=sP(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(aP(aP({},D),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(o.root,"/controls/orders"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?U({loading:!1,error:null==r?void 0:r.result}):(Z(r.result.cities),N(aP(aP({},M),{},{loading:!1,groups:r.result.driver_groups})),J(aP(aP({},$),{},{loading:!1,paymethods:r.result.paymethods})),W(aP(aP({},H),{},{loading:!1,businesses:r.result.businesses}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),U({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(!p){var e=function(e){var t=[];t=G.drivers.find((function(t){return t.id===e.id}))?G.drivers.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})):[].concat(cP(G.drivers),[e]),Y(aP(aP({},G),{},{drivers:t}))},t=function(e){var t;t=G.drivers.filter((function(t){if(t.id===e.driver_id)if("string"==typeof e.location){var n=e.location.replaceAll("\\",""),r=JSON.parse(n);t.location=r}else t.location=e.location;return!0})),Y(aP(aP({},G),{},{drivers:t}))};return s.on("drivers_update",e),s.on("tracking_driver",t),function(){s.off("drivers_update",e),s.off("tracking_driver",t)}}}),[s,p,G.drivers]),Object(i.useEffect)((function(){l&&(s.join("drivers"),0===l.level?(s.join("orders"),s.join("messages_orders")):(s.join("orders_".concat(null==l?void 0:l.id)),s.join("messages_orders_".concat(null==l?void 0:l.id))))}),[s,p,l]),Object(i.useEffect)((function(){I&&0!==ee.length&&ae(ee[0])}),[ee,I]),Object(i.useEffect)((function(){T&&0!==ee.length&&ie(ee[0])}),[ee,T]),Object(i.useEffect)((function(){if(!p)return 0!==(null==l?void 0:l.level)&&2!==(null==l?void 0:l.level)&&5!==(null==l?void 0:l.level)||ue(),se(),function(){d.drivers&&d.drivers.cancel()}}),[l,p]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,rP({},e,{searchValue:h,driverGroupList:M,driversList:G,paymethodsList:$,businessesList:H,citiesList:X,ordersStatusGroup:b,filterValues:w,multiOrderUpdateStatus:E,selectedOrderIds:ee,deletedOrderId:B,startMulitOrderStatusChange:I,startMulitOrderDelete:T,selectedSubOrderStatus:re,handleSelectedSubOrderStatus:oe,handleSelectedOrderIds:function(e){var t=cP(ee);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),te(t)},handleRemoveSelectedOrderId:function(e){var t=cP(ee);t=t.filter((function(t){return t!==e})),te(t)},handleChangeSearch:function(e){v(e)},handleChangeFilterValues:function(e){j(e)},handleOrdersStatusGroupFilter:function(e){e!==b&&(g(e),te([]))},handleChangeMultiOrdersStatus:function(e){P(e),x(!0)},handleDeleteMultiOrders:function(){_(!0)},setSelectedOrderIds:te})))};function yP(){return yP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yP.apply(this,arguments)}function hP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hP(Object(n),!0).forEach((function(t){mP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function gP(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=wP(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function OP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||wP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wP(e,t){if(e){if("string"==typeof e)return jP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jP(e,t):void 0}}function jP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}dP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},dP.defaultProps={driversPropsToFetch:["id","name","lastname","assigned_orders_count","available","phone","cellphone","location","photo","qualification","last_order_assigned_at"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var SP=function(e){var t=e.UIComponent,n=OP(rn(),1)[0],r={},o=Cn(),s=OP(yn(),1)[0],c=s.token,l=s.loading,f=OP(Object(i.useState)({loading:!0,overview:{},error:null}),2),p=f[0],d=f[1],y=function(e){var t,n=0,r=0,o=0,a=0,i=0,u=gP(e);try{for(u.s();!(t=u.n()).done;){var s=t.value;n+=s.quantity,0===s.status&&(r+=s.quantity),3!==s.status&&4!==s.status&&7!==s.status&&8!==s.status&&9!==s.status||(o+=s.quantity),1!==s.status&&11!==s.status||(a+=s.quantity),2!==s.status&&5!==s.status&&6!==s.status&&10!==s.status&&12!==s.status||(i+=s.quantity)}}catch(e){u.e(e)}finally{u.f()}return{total:n,pending:r,inProgress:o,completed:a,cancelled:i}},h=function(){var e,t=(e=a.a.mark((function e(){var t,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(vP(vP({},p),{},{loading:!0})),t={},r.ordersOverview=t,e.next=6,n.setAccessToken(c).orders().summary({cancelToken:t});case 6:o=e.sent,i=o.content.result,u=y(i),d(vP(vP({},p),{},{overview:u,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(vP(vP({},p),{},{loading:!1,error:e.t0}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){bP(a,r,o,i,u,"next",e)}function u(e){bP(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),v=function(e){if(Array.isArray(e)){var t,n=gP(e);try{for(n.s();!(t=n.n()).done;){if("status"===t.value.attribute)return!0}}catch(e){n.e(e)}finally{n.f()}}else{if(null===e)return!1;if("status"===e.attribute)return!0}return!1};return Object(i.useEffect)((function(){if(!p.loading&&!l){var e=function(e){var t=e.history.filter((function(e){return v(e.data)}));if(0!==t.length){var n,r,o,a,i,u,s=t[t.length-1].data.filter((function(e){return v(e)}));n=s[0],r=[0],o=[3,4,7,8,9],a=[1,11],i=[2,5,6,10,12],u=vP({},p.overview),r.includes(n.old)?u.pending=u.pending-1:o.includes(n.old)?u.inProgress=u.inProgress-1:a.includes(n.old)?u.completed=u.completed-1:i.includes(n.old)&&(u.cancelled=u.cancelled-1),r.includes(n.new)?u.pending=u.pending+1:o.includes(n.new)?u.inProgress=u.inProgress+1:a.includes(n.new)?u.completed=u.completed+1:i.includes(n.new)&&(u.cancelled=u.cancelled+1),d(vP(vP({},p),{},{overview:u}))}},t=function(e){var t=vP({},p.overview);t.total+=1,t.pending+=1,d(vP(vP({},p),{},{overview:t}))};return o.join("orders"),o.on("update_order",e),o.on("orders_register",t),function(){o.leave("orders"),o.off("update_order",e),o.off("orders_register",t)}}}),[p.overview,o,l]),Object(i.useEffect)((function(){return h(),function(){r.ordersOverview&&r.ordersOverview.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,yP({},e,{ordersOverviewList:p})))};function EP(){return EP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EP.apply(this,arguments)}function PP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return CP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}SP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},SP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var IP=function(e){var t=e.UIComponent,n=PP(vr(),2),r=n[0],o=n[1].changeType,a=PP(Object(i.useState)(null),2),s=a[0],c=a[1];return Object(i.useEffect)((function(){c(r.options.type)}),[r.options.type]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,EP({},e,{typeSelected:s||r.options.type,handleChangeOrderType:e.handleChangeOrderType||function(e){c(e),o(e)}})))};function xP(){return xP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xP.apply(this,arguments)}function AP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function TP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TP(Object(n),!0).forEach((function(t){kP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return UP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}IP.propTypes={UIComponent:c.a.elementType,orderTypes:c.a.arrayOf(s.object),handleChangeOrderType:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},IP.defaultProps={orderTypes:[1,2,3,4,5],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var LP=function(e){var t,n=e.isLoading,r=e.paymethods,o=e.businessId,s=e.onPaymentChange,c=e.UIComponent,l=DP(rn(),1)[0],f=(null===(t=DP(vr(),1)[0].carts["businessId:".concat(o)])||void 0===t?void 0:t.total)||0,p=DP(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),d=p[0],y=p[1],h=DP(Object(i.useState)(null),2),v=h[0],m=h[1],b=DP(Object(i.useState)({}),2),g=b[0],O=b[1],w=function(e){return e&&e.filter((function(e){var t;return!["paypal_express","authorize"].includes(null==e||null===(t=e.paymethod)||void 0===t?void 0:t.gateway)})).map((function(e){return _P(_P({},null==e?void 0:e.paymethod),{},{sandbox:null==e?void 0:e.sandbox,credentials:null==e?void 0:e.data})}))},j=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.businesses(o).get();case 3:t=e.sent,n=t.content,r=n.error,i=n.result,r||(d.paymethods=w(i.paymethods)),y(_P(_P({},d),{},{error:r?i:null,loading:!1,paymethods:r?[]:w(i.paymethods)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),y(_P(_P({},d),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){AP(a,r,o,i,u,"next",e)}function u(e){AP(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),S=function(e){O(e),v?s&&s({paymethodId:v.id,gateway:v.gateway,paymethod:v,data:e}):s&&s(null)};return Object(i.useEffect)((function(){["card_delivery","cash","stripe_redirect"].includes(null==v?void 0:v.gateway)?s&&s({paymethodId:v.id,gateway:v.gateway,paymethod:v,data:{}}):null===v&&s&&s(null)}),[v]),Object(i.useEffect)((function(){n||(r?y(_P(_P({},d),{},{loading:!1,paymethods:w(r)})):o?j():y(_P(_P({},d),{},{loading:!1})))}),[n]),u.a.createElement(u.a.Fragment,null,c&&u.a.createElement(c,xP({},e,{orderTotal:f,paymethodsList:d,paymethodSelected:v,paymethodData:g,handlePaymethodClick:function(e){m(e),S({})},handlePaymethodDataChange:S})))};function BP(){return BP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BP.apply(this,arguments)}function FP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FP(Object(n),!0).forEach((function(t){MP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function MP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zP(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){NP(a,r,o,i,u,"next",e)}function u(e){NP(a,r,o,i,u,"throw",e)}i(void 0)}))}}function GP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return YP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}LP.propTypes={UIComponent:c.a.elementType,paymethods:c.a.array,businessId:c.a.number,onPaymentChange:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},LP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qP=function(e){var t=e.businessPaymethod,n=e.UIComponent,r=e.business,o=e.businessPaymethods,s=e.handleSuccessPaymethodUpdate,c=GP(Br(),2)[1].showToast,l=GP(Bn(),2)[1],f=GP(rn(),1)[0],p=GP(yn(),1)[0],d=p.user,y=p.token,h=GP(Object(i.useState)({url:null,loading:!0,error:null}),2),v=h[0],m=h[1],b=GP(Object(i.useState)({sandbox:null==t?void 0:t.sandbox,data:null==t?void 0:t.data,data_sandbox:null==t?void 0:t.data_sandbox}),2),g=b[0],O=b[1],w=GP(Object(i.useState)({loading:!1,error:null}),2),j=w[0],S=w[1],E=function(){var e=zP(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(RP(RP({},j),{},{loading:!1})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}},e.next=5,fetch("".concat(f.root,"/users/").concat(null==d?void 0:d.id,"/keys"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?S(RP(RP({},j),{},{loading:!1,error:r.result})):(i=null===(o=r.result[0])||void 0===o?void 0:o.key)?(P(i),S(RP(RP({},j),{},{loading:!1,error:null}))):S(RP(RP({},j),{},{loading:!1,error:l("NO_API_KEY_SQUARE","There is no Api Key for Square connection")})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),S(RP(RP({},j),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=zP(a.a.mark((function e(t){var n,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(RP(RP({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({business_id:null==r?void 0:r.id,project_name:null==f?void 0:f.project,api_key:t})},"https://plugins-live.ordering.co/square/oauth/oauth",e.next=6,fetch("https://plugins-live.ordering.co/square/oauth/oauth",n);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,u=i.status,s=i.result,"ok"===u?(m(RP(RP({},v),{},{loading:!1,url:null==s?void 0:s.data.url})),C(null==s?void 0:s.data.url)):m(RP(RP({},v),{},{loading:!1,error:s})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m(RP(RP({},v),{},{loading:!1,error:[e.t0.message]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=window.open(e,"_blank","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,clearcache=yes"),n=setInterval((function(){t.closed?clearInterval(n):t.postMessage("data",f.url)}),200),r=null;window.addEventListener("message",(function(e){-1!==e.origin.indexOf(".ordering.co")&&(clearInterval(n),r&&clearTimeout(r),r=setTimeout((function(){t.postMessage("close",f.url),e.data&&(O(e.data.paymethod_credentials),t.close())}),1e3))}))},I=function(){var e=zP(a.a.mark((function e(t){var n,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),S(RP(RP({},j),{},{loading:!0})),n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify({sandbox:null==g?void 0:g.sandbox,data:JSON.stringify(null==g?void 0:g.data),data_sandbox:JSON.stringify(null==g?void 0:g.data_sandbox)})},e.next=6,fetch("".concat(f.root,"/business/").concat(r.id,"/paymethods/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error||(p=o.map((function(e){return e.id===t&&Object.assign(e,u.result),e})),s&&s(p),c(Dr.Success,l("PAYMETHOD_SAVED","Payment method saved"))),S({loading:!1,error:u.error?u.result:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),S({error:[e.t0.message],loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,BP({},e,{squareUrlState:v,squareData:g,actionState:j,handleConnectSquare:E,handleSavePaymethod:I,handleChangeDataInput:function(e){O(RP(RP({},g),{},{data:RP(RP({},null==g?void 0:g.data),{},MP({},e.target.name,e.target.value))}))},handleChangeSanboxDataInput:function(e){O(RP(RP({},g),{},{data_sandbox:RP(RP({},null==g?void 0:g.data_sandbox),{},MP({},e.target.name,e.target.value))}))},handleChangeSandbox:function(e){O(RP(RP({},g),{},{sandbox:e}))}})))};function $P(){return $P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$P.apply(this,arguments)}function JP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JP(Object(n),!0).forEach((function(t){HP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function KP(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){WP(a,r,o,i,u,"next",e)}function u(e){WP(a,r,o,i,u,"throw",e)}i(void 0)}))}}function XP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ZP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}qP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var QP=function(e){var t=e.UIComponent,n=e.propsToFetch,r=XP(rn(),1)[0],o=XP(yn(),1)[0].token,s=XP(Br(),2)[1].showToast,c=XP(Bn(),2)[1],l=XP(Object(i.useState)({pages:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=XP(Object(i.useState)(null),2),y=d[0],h=d[1],v=XP(Object(i.useState)({changes:{},loading:!1,error:null}),2),m=v[0],b=v[1],g=XP(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=function(){var e=KP(a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(VP(VP({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/pages?params=").concat(n.toString()),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(u=e.sent).error||p({pages:u.result,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(VP(VP({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=KP(a.a.mark((function e(){var t,n,i,u,l,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,t=VP({},m.changes),n={},t)""!==t[i]&&(n=VP(VP({},n),{},HP({},i,t[i])));if(0!==Object.keys(n).length){e.next=6;break}return e.abrupt("return");case 6:return s(Dr.Info,c("LOADING","Loading")),b(VP(VP({},m),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=11,fetch("".concat(r.root,"/pages/").concat(y),u);case 11:return l=e.sent,e.next=14,l.json();case 14:(p=e.sent).error?b(VP(VP({},m),{},{result:{error:!0,result:p.result},loading:!1})):(d=f.pages.filter((function(e){var t,n,r,o;e.id===y&&(e.name=null!==(t=m.changes)&&void 0!==t&&t.name?null===(n=m.changes)||void 0===n?void 0:n.name:null==e?void 0:e.name,e.enabled=null!==(r=null===(o=m.changes)||void 0===o?void 0:o.enabled)&&void 0!==r?r:null==e?void 0:e.enabled);return e})),C(d),b(VP(VP({},m),{},{loading:!1,changes:{}})),s(Dr.Success,c("PAGE_SAVED","Page saved"))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),b(VP(VP({},m),{},{loading:!1,error:[e.t0.message]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=KP(a.a.mark((function e(t){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(VP(VP({},O),{},{loading:!0})),s(Dr.Info,c("LOADING","Loading")),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/pages/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(w(VP(VP({},O),{},{loading:!1})),u=f.pages.filter((function(e){return e.id!==t})),C(u),s(Dr.Success,c("PAGE_DELETED","Page Deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),P=null,C=function(e){p(VP(VP({},f),{},{pages:e}))};return Object(i.useEffect)((function(){m.loading||0===Object.keys(null==m?void 0:m.changes).length||S()}),[m]),Object(i.useEffect)((function(){j()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,$P({},e,{pagesListState:f,handleChangeState:function(e,t,n){h(e),"name"===t?(clearTimeout(P),P=setTimeout((function(){b(VP(VP({},m),{},{changes:HP({},t,n)}))}),1e3)):b(VP(VP({},m),{},{changes:HP({},t,n)}))},handleUpdatePageList:C,handleDeletePage:E})))};function eC(){return eC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eC.apply(this,arguments)}function tC(e){return function(e){if(Array.isArray(e))return cC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||sC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nC(Object(n),!0).forEach((function(t){oC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function iC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){aC(a,r,o,i,u,"next",e)}function u(e){aC(a,r,o,i,u,"throw",e)}i(void 0)}))}}function uC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||sC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sC(e,t){if(e){if("string"==typeof e)return cC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cC(e,t):void 0}}function cC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}QP.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},QP.defaultProps={propsToFetch:["name","enabled"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var lC=function(e){var t=e.UIComponent,n=e.pageId,r=e.pageList,o=e.handleSuccessUpdate,s=e.handleCancel,c=uC(rn(),1)[0],l=uC(yn(),1)[0].token,f=uC(Br(),2)[1].showToast,p=uC(Bn(),2)[1],d=uC(Object(i.useState)({page:{},loading:!1,error:null}),2),y=d[0],h=d[1],v=uC(Object(i.useState)({images:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=uC(Object(i.useState)({loading:!1,change:{},error:null}),2),O=g[0],w=g[1],j=uC(Object(i.useState)({loading:!1,error:null}),2),S=j[0],E=j[1],P=uC(Object(i.useState)({loading:!1,changes:{},error:null}),2),C=P[0],I=P[1],x=uC(Object(i.useState)(null),2),A=x[0],T=x[1],_=uC(Object(i.useState)(null),2),k=_[0],D=_[1],U=function(){var e=iC(a.a.mark((function e(){var t,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(rC(rC({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/pages/").concat(n),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(o=e.sent).error||h({page:o.result,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(rC(rC({},y),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=iC(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(rC(rC({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/files?where={%22type%22:1}"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error||b({images:r.result,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),b(rC(rC({},m),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=iC(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),w(rC(rC({},O),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(O.change)},e.next=6,fetch("".concat(c.root,"/files"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:(r=e.sent).error?w(rC(rC({},O),{},{loading:!1,error:r.result})):(w({loading:!1,change:{},error:null}),i=[].concat(tC(m.images),[r.result]),b(rC(rC({},m),{},{images:i})),f(Dr.Success,p("GALLERY_IMAGE_ADDED","Business gallery image added")),T(null==r||null===(o=r.result)||void 0===o?void 0:o.source)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(rC(rC({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=iC(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),E(rC(rC({},S),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=6,fetch("".concat(c.root,"/files/").concat(t),n);case 6:return r=e.sent,e.next=9,r.json();case 9:(o=e.sent).error?E({loading:!1,error:o.result}):(E({loading:!1,error:null}),i=m.images.filter((function(e){return e.id!==t})),b(rC(rC({},m),{},{images:i})),f(Dr.Success,p("FILE_DELETED","File deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),E({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=iC(a.a.mark((function e(){var t,i,u,s,d,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u in e.prev=0,t=rC({},C.changes),i={},t)""!==t[u]&&(i=rC(rC({},i),{},oC({},u,t[u])));if(0!==Object.keys(i).length){e.next=6;break}return e.abrupt("return");case 6:return f(Dr.Info,p("LOADING","Loading")),I(rC(rC({},C),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=11,fetch("".concat(c.root,"/pages/").concat(n),s);case 11:return d=e.sent,e.next=14,d.json();case 14:(y=e.sent).error?I({loading:!1,error:y.result}):(o&&(h=r.filter((function(e){var t,r,o,a;e.id===n&&(e.name=null!==(t=C.changes)&&void 0!==t&&t.name?null===(r=C.changes)||void 0===r?void 0:r.name:null==e?void 0:e.name,e.enabled=null!==(o=null===(a=C.changes)||void 0===a?void 0:a.enabled)&&void 0!==o?o:null==e?void 0:e.enabled);return e})),o(h)),I(rC(rC({},C),{},{changes:{},loading:!1,error:null})),f(Dr.Success,p("PAGE_SAVED","Page Saved"))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),I(rC(rC({},C),{},{loading:!1,error:[e.t0.message]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=iC(a.a.mark((function e(){var t,n,i,u,d,y,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u in e.prev=0,n=rC({},C.changes),i={},n)""!==n[u]&&(i=rC(rC({},i),{},oC({},u,n[u])));if(0!==Object.keys(i).length){e.next=6;break}return e.abrupt("return");case 6:return i.enabled=!0,null!==(t=i)&&void 0!==t&&t.body||(i.body="<p><br></p>"),f(Dr.Info,p("LOADING","Loading")),I(rC(rC({},C),{},{loading:!0})),d={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=13,fetch("".concat(c.root,"/pages"),d);case 13:return y=e.sent,e.next=16,y.json();case 16:(h=e.sent).error?I(rC(rC({},C),{},{loading:!1,error:h.result})):(o&&(v=[].concat(tC(r),[h.result]),o(v)),s&&s(),I(rC(rC({},C),{},{changes:{},loading:!1,error:null})),f(Dr.Success,p("PAGE_ADDED","Page Added"))),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),I(rC(rC({},C),{},{loading:!1,error:[e.t0.message]}));case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0!==Object.keys(O.change).length&&B()}),[O.change]),Object(i.useEffect)((function(){L(),n?(U(),D(!1)):D(!0)}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,eC({},e,{isAddMode:k,pageState:y,imageListState:m,insertImageState:O,formState:C,selectedImageUrl:A,setSelectedImageUrl:T,handleInsertImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){w(rC(rC({},O),{},{change:{source:t.result,type:1}}))},t.onerror=function(e){return console.log(e)}},handleDeleteImage:F,handleChangeFormState:function(e,t){I(rC(rC({},C),{},{changes:rC(rC({},C.changes),{},oC({},e,t))}))},handleSavePage:R,handleAddPage:M})))};function fC(){return fC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fC.apply(this,arguments)}function pC(e){return function(e){if(Array.isArray(e))return OC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dC(Object(n),!0).forEach((function(t){hC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){vC(a,r,o,i,u,"next",e)}function u(e){vC(a,r,o,i,u,"throw",e)}i(void 0)}))}}function bC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||gC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gC(e,t){if(e){if("string"==typeof e)return OC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OC(e,t):void 0}}function OC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}lC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lC.defaultProps={propsToFetch:["name","enabled"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var wC=function(e){var t=e.UIComponent,n=e.cityMangersPropsToFetch,r=bC(rn(),1)[0],o=bC(yn(),1)[0].token,s=bC(Br(),2)[1].showToast,c=bC(Bn(),2)[1],l=bC(Object(i.useState)({countries:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=bC(Object(i.useState)({options:[],loading:!1,error:null}),2),y=d[0],h=d[1],v=bC(Object(i.useState)({users:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=bC(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=bC(Object(i.useState)(null),2),S=j[0],E=j[1],P=bC(Object(i.useState)({}),2),C=P[0],I=P[1],x=bC(Object(i.useState)(!1),2),A=x[0],T=x[1],_=bC(Object(i.useState)([]),2),k=_[0],D=_[1],U=bC(Object(i.useState)(!1),2),L=U[0],B=U[1],F=bC(Object(i.useState)(null),2),R=F[0],M=F[1],N=bC(Object(i.useState)([]),2),z=N[0],G=N[1],Y=bC(Object(i.useState)(!1),2),q=Y[0],$=Y[1],J=function(){var e=mC(a.a.mark((function e(){var t,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(yC(yC({},f),{},{loading:!0})),e.next=4,r.countries().get();case 4:t=e.sent,n=t.content,o=n.error,i=n.result,p(yC(yC({},f),{},o?{loading:!1,error:i}:{loading:!1,countries:i})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p(yC(yC({},f),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=mC(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(yC(yC({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/dropdownoptions"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error?h(yC(yC({},y),{},{loading:!1,error:i.result})):h(yC(yC({},y),{},{loading:!1,options:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(yC(yC({},y),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=mC(a.a.mark((function e(t,n){var o,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(yC(yC({},O),{},{loading:!0})),e.next=5,r.countries(t).save(n);case 5:o=e.sent,i=o.content,u=i.error,l=i.result,u||(d=f.countries.filter((function(e){return e.id===t&&Object.assign(e,l),!0})),p(yC(yC({},f),{},{countries:d})),s(Dr.Success,c("COUNTRY_SAVED","Country saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=mC(a.a.mark((function e(t,n,o){var i,u,l,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(yC(yC({},O),{},{loading:!0})),e.next=5,r.countries(t).cities(n).save(o);case 5:i=e.sent,u=i.content,l=u.error,d=u.result,l?w(yC(yC({},O),{},{loading:!1,error:d})):(y=f.countries.map((function(e){if(e.id===t){var r=e.cities.filter((function(e){return e.id===n&&Object.assign(e,d),!0}));e.cities=r}return e})),p(yC(yC({},f),{},{countries:y})),s(Dr.Success,c("CITY_SAVED","City saved")),I({})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,r){return e.apply(this,arguments)}}(),K=function(){var e=mC(a.a.mark((function e(t,n){var o,i,u,l,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(yC(yC({},O),{},{loading:!0})),e.next=5,r.countries(t).cities(n).delete();case 5:o=e.sent,i=o.content,u=i.error,l=i.result,u?(w(yC(yC({},O),{},{loading:!1,error:l})),$(!1)):(d=f.countries.map((function(e){if(parseInt(e.id)===parseInt(t)){var r=e.cities.filter((function(e){return e.id!==n}));e.cities=r}return e})),p(yC(yC({},f),{},{countries:d})),s(Dr.Success,c("CITY_REMOVED","City removed")),q&&((y=pC(k)).shift(),0===y.length&&$(!1),D(y))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]}),$(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=mC(a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(yC(yC({},m),{},{loading:!0})),t={},e.next=5,r.setAccessToken(o).users().select(n).where([{attribute:"level",value:[1]}]).get({cancelToken:t});case 5:i=e.sent,u=i.content.result,b(yC(yC({},m),{},{loading:!1,users:u})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),b(yC(yC({},m),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=mC(a.a.mark((function e(){var t,n,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=C&&C.country_id){e.next=3;break}return w(yC(yC({},O),{},{error:c("SELECT_COUNTRY","Select a country")})),e.abrupt("return");case 3:return e.prev=3,s(Dr.Info,c("LOADING","Loading")),w(yC(yC({},O),{},{loading:!0})),C.enabled=!0,e.next=9,r.countries(null==C?void 0:C.country_id).cities().save(C);case 9:t=e.sent,n=t.content,o=n.error,i=n.result,o?w(yC(yC({},O),{},{loading:!1,error:i})):(u=f.countries.map((function(e){if(e.id===(null==C?void 0:C.country_id)){var t=[].concat(pC(e.cities),[i]);e.cities=t}return e})),p(yC(yC({},f),{},{countries:u})),s(Dr.Success,c("CITY_ADDED","City added")),I({}),T(!1)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),w({loading:!1,error:[e.t0.message]});case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=mC(a.a.mark((function e(t,n){var i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(yC(yC({},O),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)},e.next=6,fetch("".concat(r.root,"/dropdownoptions/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?w(yC(yC({},O),{},{loading:!1,error:l.result})):(w(yC(yC({},O),{},{loading:!1})),f=y.options.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),h(yC(yC({},y),{},{options:f})),s(Dr.Success,c("ZONE_SAVED","Zone saved")),I({})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){var e=mC(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=C&&C.name){e.next=3;break}return w(yC(yC({},O),{},{error:c("NAME_REQUIRED","The name is required.")})),e.abrupt("return");case 3:return e.prev=3,s(Dr.Info,c("LOADING","Loading")),w(yC(yC({},O),{},{loading:!0})),C.enabled=!0,t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(C)},e.next=10,fetch("".concat(r.root,"/dropdownoptions"),t);case 10:return n=e.sent,e.next=13,n.json();case 13:(i=e.sent).error?w(yC(yC({},O),{},{loading:!1,error:i.result})):(u=[].concat(pC(y.options),[i.result]),h(yC(yC({},y),{},{options:u})),s(Dr.Success,c("ZONE_ADDED","Zone added")),I({}),B(!1),w(yC(yC({},O),{},{loading:!1}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),w({loading:!1,error:[e.t0.message]});case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=mC(a.a.mark((function e(t){var n,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(yC(yC({},O),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/dropdownoptions/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?(w(yC(yC({},O),{},{loading:!1,error:u.result})),$(!1)):(l=y.options.filter((function(e){return e.id!==t})),h(yC(yC({},y),{},{options:l})),s(Dr.Success,c("ZONE_REMOVED","Zone removed")),q&&((f=pC(z)).shift(),0===f.length&&$(!1),G(f))),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]}),$(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;q&&0!==z.length&&te(null===(e=z[0])||void 0===e?void 0:e.id)}),[z,q]),Object(i.useEffect)((function(){var e,t;q&&0!==k.length&&K(null===(e=k[0])||void 0===e?void 0:e.country_id,null===(t=k[0])||void 0===t?void 0:t.id)}),[k,q]),Object(i.useEffect)((function(){I({})}),[S]),Object(i.useEffect)((function(){X(),J(),V()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,fC({},e,{countriesState:f,dropdownOptionsState:y,cityManagerList:m,actionState:O,handleChangeCountryName:H,handleUpdateCity:W,handleDeleteCity:K,selectedCity:S,setSelectedCity:E,openCity:A,setOpenCity:T,changesState:C,handleChangesState:function(e,t){I(yC(yC({},C),{},hC({},e,t)))},cleanChagesState:function(){return I({})},handleSaveCity:function(){W(null==S?void 0:S.country_id,null==S?void 0:S.id,C)},handleAddCity:Z,selectedCityList:k,handleCheckboxClick:function(e){if(k.find((function(t){return(null==t?void 0:t.id)===e.id}))){var t=k.filter((function(t){return t.id!==e.id}));D(t)}else D([].concat(pC(k),[e]))},handleAllCheckboxClick:function(){var e,t=null===(e=f.countries)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(pC(e),pC(null==t?void 0:t.cities))}),[]);t.length===k.length?D([]):D(t)},handleSeveralDeleteCities:function(){$(!0)},handleUpdateDropdown:Q,openZoneDropdown:L,setOpenZonedropdown:B,selectedZoneDropdown:R,setSelectedZoneDropdown:M,handleSaveZone:function(){Q(null==R?void 0:R.id,C)},handleAddZone:ee,handleDeleteZone:te,selectedZoneList:z,handleCheckboxZoneClick:function(e){if(z.find((function(t){return(null==t?void 0:t.id)===e.id}))){var t=z.filter((function(t){return t.id!==e.id}));G(t)}else G([].concat(pC(z),[e]))},handleAllCheckboxZoneClick:function(){var e=pC(y.options);e.length===z.length?G([]):G(e)},handleSeveralDeleteZones:function(){$(!0)}})))};function jC(){return jC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jC.apply(this,arguments)}function SC(e){return function(e){if(Array.isArray(e))return _C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||TC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EC(Object(n),!0).forEach((function(t){CC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){IC(a,r,o,i,u,"next",e)}function u(e){IC(a,r,o,i,u,"throw",e)}i(void 0)}))}}function AC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||TC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TC(e,t){if(e){if("string"==typeof e)return _C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_C(e,t):void 0}}function _C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}wC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wC.defaultProps={cityMangersPropsToFetch:["id","name","lastname"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var kC=function(e){var t=e.UIComponent,n=AC(rn(),1)[0],r=AC(yn(),1)[0].token,o=AC(Br(),2)[1].showToast,s=AC(Bn(),2)[1],c=AC(Object(i.useState)({plugins:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=AC(Object(i.useState)(!1),2),d=p[0],y=p[1],h=AC(Object(i.useState)(null),2),v=h[0],m=h[1],b=AC(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(){var e=xC(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(PC(PC({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/plugins"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||f(PC(PC({},l),{},{plugins:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(PC(PC({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=xC(a.a.mark((function e(){var t,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),O(PC(PC({},g),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({url:v})},e.next=6,fetch("".concat(n.root,"/plugins"),t);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?O({loading:!1,error:u.result}):(O(PC(PC({},g),{},{loading:!1})),c=[].concat(SC(l.plugins),[u.result]),f(PC(PC({},l),{},{plugins:c})),o(Dr.Success,s("PLUGIN_SAVED","Plugin saved")),y(!1),m(null)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=xC(a.a.mark((function e(t){var i,u,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),O(PC(PC({},g),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=6,fetch("".concat(n.root,"/plugins/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(c=e.sent).error?O({loading:!1,error:c.result}):(O(PC(PC({},g),{},{loading:!1})),p=l.plugins.filter((function(e){return e.id!==t})),f(PC(PC({},l),{},{plugins:p})),o(Dr.Success,s("PLUGIN_REMOVED","Plugin removed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=xC(a.a.mark((function e(t,i){var u,c,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),O(PC(PC({},g),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(i)},e.next=6,fetch("".concat(n.root,"/plugins/").concat(t),u);case 6:return c=e.sent,e.next=9,c.json();case 9:(p=e.sent).error?O({loading:!1,error:p.result}):(O(PC(PC({},g),{},{loading:!1})),d=l.plugins.filter((function(e){return e.id===t&&Object.assign(e,p.result),!0})),f(PC(PC({},l),{},{plugins:d})),o(Dr.Success,s("PLUGIN_SAVED","Plugin saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,jC({},e,{pluginListState:l,isAddMode:d,setIsAddMode:y,setNewUrl:m,actionState:g,handleAddNewPlugin:j,handleDeletePlugin:S,handleUpdatePlugin:E})))};kC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},kC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var DC=n(11),UC=n.n(DC);function LC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return BC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var FC=function(e){var t=e.UIComponent,n=e.open,r=e.backdropClassName,o=e.closeOnBackdrop,a=e.onClose,s=Object(i.useRef)(null),c=LC(Object(i.useState)(),2),l=c[0],f=c[1],p=LC(Object(i.useState)(),2),d=p[0],y=p[1],h=LC(Object(i.useState)(!1),2),v=h[0],m=h[1],b=function(){var e=document.querySelectorAll(".popup-component");if(!n&&e.length>1&&e.length>1&&e[e.length-1].focus(),v){var t=window.document.getElementById("app-modals");t&&t.remove(),window.document.body.style.overflow=d}};Object(i.useEffect)((function(){if(n){var e=window.document.getElementById("app-modals");e?f(e):((e=window.document.createElement("div")).id="app-modals",e.className="popup-component-backdrop popup-backdrop"+(r?" ".concat(r):""),document.body.append(e),f(e),m(!0),y(window.document.body.style.overflow)),s.current&&s.current.focus()}return b}),[n,v,d]);return u.a.createElement(u.a.Fragment,null,n&&l&&UC.a.createPortal(u.a.createElement("div",{className:"popup-component",style:{position:"fixed",top:0,left:0,bottom:0,right:0,zIndex:2001,outline:"none"},onClick:function(e){o&&e.target.classList.contains("popup-component")&&a&&a()},onKeyDown:function(e){27===e.keyCode&&e.target.classList.contains("popup-component")&&a&&a()},tabIndex:-1,autoFocus:!0,ref:s},t&&u.a.createElement(t,e)),l))};function RC(){return RC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RC.apply(this,arguments)}function MC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function NC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){MC(a,r,o,i,u,"next",e)}function u(e){MC(a,r,o,i,u,"throw",e)}i(void 0)}))}}function zC(e){return function(e){if(Array.isArray(e))return VC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||JC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GC(Object(n),!0).forEach((function(t){qC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||JC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JC(e,t){if(e){if("string"==typeof e)return VC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VC(e,t):void 0}}function VC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}FC.propTypes={UIComponent:c.a.elementType,open:c.a.bool,closeOnBackdrop:c.a.bool,closeWithKeyboard:c.a.bool,title:c.a.string,content:c.a.oneOfType([c.a.string,c.a.arrayOf(s.string),c.a.elementType,c.a.element]),onAccept:c.a.func,onCancel:c.a.func,onClose:c.a.func},FC.defaultProps={open:!1,closeOnBackdrop:!0,closeWithKeyboard:!0};var HC=function(e){var t=e.UIComponent,n=$C(rn(),1)[0],r=$C(yn(),1)[0].token,o=$C(Br(),2)[1].showToast,s=$C(Bn(),2)[1],c=$C(Object(i.useState)({loading:!1,levels:[],error:null}),2),l=c[0],f=c[1],p=$C(Object(i.useState)({loading:!1,changes:{},error:null}),2),d=p[0],y=p[1],h=function(){var e=NC(a.a.mark((function e(){var t,i,u,c,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),y(YC(YC({},d),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(d.changes)},i="".concat(n.root,"/loyalty_levels"),e.next=7,fetch(i,t);case 7:return u=e.sent,e.next=10,u.json();case 10:c=e.sent,p=c.error,h=c.result,p?y(YC(YC({},d),{},{loading:!1,error:h})):(o(Dr.Success,s("LEVEL_ADDED","Level added")),y(YC(YC({},d),{},{loading:!1,error:null,changes:{}})),a=h,v=void 0,(v=zC(l.levels)).push(a),f(YC(YC({},l),{},{levels:v}))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),y(YC(YC({},d),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}var a,v}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=NC(a.a.mark((function e(){var t,o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(YC(YC({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},o="".concat(n.root,"/loyalty_levels"),e.next=6,fetch(o,t);case 6:return i=e.sent,e.next=9,i.json();case 9:u=e.sent,s=u.error,c=u.result,f(YC(YC({},l),{},s?{loading:!1,error:c}:{loading:!1,error:null,levels:c})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),f(YC(YC({},l),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){v()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,RC({},e,{levelList:l,formState:d,handleChangeItem:function(e){var t=YC(YC({},null==d?void 0:d.changes),e);y(YC(YC({},d),{},{changes:t}))},handleChangeInput:function(e){var t=YC(YC({},null==d?void 0:d.changes),{},qC({},e.target.name,e.target.value));y(YC(YC({},d),{},{changes:t}))},handleUpdateAddClick:h,handleUpdateLevelList:function(e){var t=null==l?void 0:l.levels.map((function(t){return t.id===e.id?e:t}));f(YC(YC({},l),{},{levels:t}))},handleDeleteLevelList:function(e){var t,n=null==l||null===(t=l.levels)||void 0===t?void 0:t.filter((function(t){return t.id!==e.id}));f(YC(YC({},l),{},{levels:n}))}})))};HC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},HC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var WC="change_ingredients",KC="change_options",XC=Object(i.createContext)(),ZC=function(){return Object(i.useContext)(XC)||[{},function(){}]};function QC(){return QC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QC.apply(this,arguments)}function eI(e){return function(e){if(Array.isArray(e))return rI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||nI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nI(e,t){if(e){if("string"==typeof e)return rI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rI(e,t):void 0}}function rI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var oI=function(e){var t=e.product,n=e.UIComponent,r=tI(ZC(),2),o=r[0].ingredients,a=r[1],s=tI(ZC(),2),c=s[0].options,l=s[1],f=tI(Object(i.useState)(1),2),p=f[0],d=f[1],y=tI(Object(i.useState)(t.price),2),h=y[0],v=y[1],m=tI(Object(i.useState)(""),2),b=m[0],g=m[1],O=function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n].suboptions,o=0;o<r.length;o++)if(r[o].id==t)return r[o].isChecked;return!1};Object(i.useEffect)((function(){!function(){for(var e=t.ingredients,n=0;n<e.length;n++)e[n].isChecked=!0;a({type:WC,ingredients:e})}(),function(){for(var e=[],n=t.extras,r=0;r<n.length;r++)e.push.apply(e,eI(n[r].options));for(var o=0;o<e.length;o++){var a=e[o];if(a.isDisplay=!0,a.conditioned){var i=a.respect_to;void 0!==i&&""!==i&&"null"!=i||(a.isDisplay=!1),O(e,i)||(a.isDisplay=!1)}for(var u=a.suboptions,s=0;s<u.length;s++)u[s].isChecked=!1}l({type:KC,options:e})}()}),[]);var w=function(e,n){for(var r=0,o=0;o<n.length;o++)if(0!=n[o].isDisplay)for(var a=n[o].suboptions,i=0;i<a.length;i++)a[i].isChecked&&(r+=parseFloat(a[i].price));var u=(parseFloat(t.price)+r)*e;v(u)};return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,QC({},e,{onShare:function(){e.onShare&&e.onShare(t)},onClose:function(){e.onClose&&e.onClose()},productName:t.name,productLogo:t.images,productCount:p,productPrice:h,ingredients:o,options:c,note:b,onChangedIngredient:function(e){o[e].isChecked=!o[e].isChecked,a({type:WC,ingredients:o})},onChangedOption:function(e,t,n){if(n){for(var r=0;r<c[e].suboptions.length;r++)c[e].suboptions[r].isChecked=!1;c[e].suboptions[t].isChecked=!0}else c[e].suboptions[t].isChecked=!c[e].suboptions[t].isChecked;for(var o=0;o<c.length;o++){var a=c[o];if(a.isDisplay=!0,a.conditioned){var i=a.respect_to;void 0!==i&&""!==i&&"null"!=i||(a.isDisplay=!1),O(c,i)||(a.isDisplay=!1)}}w(p,c),l({type:KC,options:c})},onChangedNote:function(e){g(e.target.value)},onClickedButtonPlus:function(){d(p+1),w(p+1,c)},onClickedButtonMinus:function(){p>1&&(d(p-1),w(p-1,c))},onClickedButtonAdd:function(){e.onClickedButtonAdd&&(t.ingredients=o,t.options=c,t.note=b,t.quantity=p,e.onAdd(t))}})))};function aI(){return aI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aI.apply(this,arguments)}function iI(e){return function(e){if(Array.isArray(e))return yI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function sI(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){uI(a,r,o,i,u,"next",e)}function u(e){uI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function cI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cI(Object(n),!0).forEach((function(t){fI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||dI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dI(e,t){if(e){if("string"==typeof e)return yI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yI(e,t):void 0}}function yI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}oI.propTypes={UIComponent:c.a.elementType,onShare:c.a.func,onClose:c.a.func,productName:c.a.string,productLogo:c.a.string,productCount:c.a.number,productPrice:c.a.number,ingredients:c.a.array,options:c.a.array,note:c.a.array,onChangedIngredient:c.a.func,onChangedOption:c.a.func,onChangedNote:c.a.func,onClickedButtonPlus:c.a.func,onClickedButtonMinues:c.a.func,onClickedButtonAdd:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},oI.defaultProps={productName:""};var hI=function(e){var t=e.business,n=e.UIComponent,r=e.productId,o=e.categoryId,s=e.handleUpdateBusinessState,c=pI(rn(),1)[0],l=pI(yn(),1)[0],f=pI(Br(),2)[1].showToast,p=pI(Bn(),2)[1],d=pI(Object(i.useState)({loading:!1,product:null,error:null}),2),y=d[0],h=d[1],v=pI(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),m=v[0],b=v[1],g=pI(Object(i.useState)({ingredients:{},options:{}}),2),O=g[0],w=g[1],j=function(){var e=sI(a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(lI(lI({},y),{},{loading:!0})),e.next=4,c.businesses(t.id).categories(o).products(r).get();case 4:n=e.sent,i=n.content,u=i.error,s=i.result,h(u?lI(lI({},y),{},{loading:!1,error:s}):{loading:!1,product:s,error:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),h(lI(lI({},y),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=sI(a.a.mark((function e(n){var r,o,i,u,s,d,h,v,g,O,w,j,S,E,P,I;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),b(lI(lI({},m),{},{loading:!0})),i=lI({},n||m.changes),u=lI({},n||m.changes),e.next=7,c.businesses(null==t?void 0:t.id).categories(null==y||null===(r=y.product)||void 0===r?void 0:r.category_id).products(null==y||null===(o=y.product)||void 0===o?void 0:o.id).save(i,{accessToken:l.token});case 7:if(s=e.sent,d=s.content,h=d.error,v=d.result,b(lI(lI({},m),{},{changes:h?m.changes:{},result:{error:h,result:v},loading:!1})),h){e.next=24;break}if(void 0===(null==u||null===(g=u.ribbon)||void 0===g?void 0:g.enabled)||null!=u&&null!==(O=u.ribbon)&&void 0!==O&&O.enabled||null==v||null===(w=v.ribbon)||void 0===w||!w.enabled){e.next=22;break}return E={ribbon:{enabled:!1}},e.next=17,c.businesses(null==t?void 0:t.id).categories(null==y||null===(j=y.product)||void 0===j?void 0:j.category_id).products(null==y||null===(S=y.product)||void 0===S?void 0:S.id).save(E,{accessToken:l.token});case 17:P=e.sent,I=P.content,C(null==I?void 0:I.result),e.next=23;break;case 22:C(v);case 23:f(Dr.Success,p("PRODUCT_SAVED","Product saved"));case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),b(lI(lI({},m),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var n=sI(a.a.mark((function n(){var r,o,i,u,l,d,h;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(Dr.Info,p("LOADING","Loading")),b(lI(lI({},m),{},{loading:!0})),n.next=5,c.businesses(parseInt(null==t?void 0:t.id)).categories(parseInt(null===(r=y.product)||void 0===r?void 0:r.category_id)).products(null===(o=y.product)||void 0===o?void 0:o.id).delete();case 5:i=n.sent,u=i.content,l=u.error,d=u.result,l?b(lI(lI({},m),{},{loading:!1,result:{error:!0,result:d}})):(b(lI(lI({},m),{},{loading:!1,result:{error:!1,result:d}})),s&&((h=iI(null==t?void 0:t.categories)).forEach((function e(t){var n;if(t.id===(null===(n=y.product)||void 0===n?void 0:n.category_id)){var r=t.products.filter((function(e){return e.id!==y.product.id}));t.products=iI(r)}Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),s(lI(lI({},t),{},{categories:h}))),f(Dr.Success,p("PRODUCT_DELETED","Product deleted")),e.onClose&&e.onClose()),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),b(lI(lI({},m),{},{loading:!1,result:{error:!0,result:n.t0}}));case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(){return n.apply(this,arguments)}}(),P=function(t){for(var n,r=0,o=0;o<(null===(a=e.product)||void 0===a||null===(i=a.extras)||void 0===i?void 0:i.length);o++)for(var a,i,u,s=null===(u=e.product)||void 0===u?void 0:u.extras[o],c=0;c<(null===(l=s.options)||void 0===l?void 0:l.length);c++)for(var l,f=s.options[c],p=0;p<(null===(d=f.suboptions)||void 0===d?void 0:d.length);p++){var d,y,h,v=f.suboptions[p];if(null!==(y=t.options["id:".concat(f.id)])&&void 0!==y&&null!==(h=y.suboptions["id:".concat(v.id)])&&void 0!==h&&h.selected){var m=t.options["id:".concat(f.id)].suboptions["id:".concat(v.id)],b=f.allow_suboption_quantity?m.quantity:1;r+=(f.with_half_option&&v.half_price&&"whole"!==m.position?v.half_price:v.price)*b}}return(null===(n=e.product)||void 0===n?void 0:n.price)+r},C=function(e){if(h(lI(lI({},y),{},{product:lI(lI({},y.product),e)})),s){var n=iI(null==t?void 0:t.categories);n.forEach((function t(n){var r;if(n.id===(null===(r=y.product)||void 0===r?void 0:r.category_id)){var o=n.products.map((function(t){return t.id===y.product.id?lI(lI({},t),e):t}));n.products=iI(o)}Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(t)}));var r=lI(lI({},t),{},{categories:n});s(r)}};return Object(i.useEffect)((function(){e.product?(h(lI(lI({},y),{},{product:e.product})),function(t){var n,r,o,a,i={};for(var u in t.ingredients){var s=t.ingredients[u];i["id:".concat(s.id)]={selected:!0}}var c=lI(lI({},e.productCart),{},{id:t.id,price:t.price,name:t.name,businessId:e.businessId,categoryId:t.category_id,inventoried:t.inventoried,stock:t.quantity,ingredients:(null===(n=e.productCart)||void 0===n?void 0:n.ingredients)||i,options:(null===(r=e.productCart)||void 0===r?void 0:r.options)||{},comment:(null===(o=e.productCart)||void 0===o?void 0:o.comment)||null,quantity:(null===(a=e.productCart)||void 0===a?void 0:a.quantity)||1});c.unitTotal=P(c),c.total=c.unitTotal*c.quantity,w(c)}(e.product)):r&&o&&j()}),[e.product]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,aI({},e,{productState:y,productCart:O,formState:m,cleanFormState:function(e){return b(lI(lI({},m),e))},handleChangeRibbon:function(e){var t,n,r=null!=m&&null!==(t=m.changes)&&void 0!==t&&t.ribbon?lI(lI({},null==m||null===(n=m.changes)||void 0===n?void 0:n.ribbon),e):lI({},e),o=lI(lI({},null==m?void 0:m.changes),{},{ribbon:r});b(lI(lI({},m),{},{changes:o}))},handleChangeProductActiveState:function(){var e,t={enabled:!(null!=y&&null!==(e=y.product)&&void 0!==e&&e.enabled)};S(t)},handleChangeInput:function(e){b(lI(lI({},m),{},{changes:lI(lI({},m.changes),{},fI({},e.target.name,e.target.value))}))},handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){b(lI(lI({},m),{},{changes:lI(lI({},m.changes),{},fI({},t?"seo_image":"images",n.result))}))},n.onerror=function(e){return console.log(e)}},handleUpdateClick:S,handleDeleteProduct:E,showProductOption:function(e){var t=!0;if(e.respect_to&&(t=!1,O.options)){var n=O.options;for(var r in n){var o;if(null!==(o=n[r].suboptions["id:".concat(e.respect_to)])&&void 0!==o&&o.selected){t=!0;break}}}return t},handleChangeFormState:function(e){b(lI(lI({},m),{},{changes:lI(lI({},m.changes),e)}))},handleSuccessUpdate:C})))};function vI(){return vI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vI.apply(this,arguments)}function mI(e){return function(e){if(Array.isArray(e))return PI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||EI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bI(Object(n),!0).forEach((function(t){OI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function jI(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){wI(a,r,o,i,u,"next",e)}function u(e){wI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function SI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||EI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EI(e,t){if(e){if("string"==typeof e)return PI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PI(e,t):void 0}}function PI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}hI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var CI=function(e){var t=e.businessId,n=e.extraId,r=e.metafields,o=e.UIComponent,s=e.handleSuccessAddMetaFields,c=e.handleSuccessDeleteBusinessMetaFields,l=SI(rn(),1)[0],f=SI(yn(),1)[0],p=SI(Br(),2)[1].showToast,d=SI(Bn(),2)[1],y=SI(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),h=y[0],v=y[1],m=SI(Object(i.useState)({loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=function(){var e=jI(a.a.mark((function e(){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(gI(gI({},h),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/extras/").concat(n,"/metafields"),r);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=i.result,v(gI(gI({},h),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(gI(gI({},h),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=jI(a.a.mark((function e(r){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),g(gI(gI({},b),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=6,fetch("".concat(l.root,"/business/").concat(t,"/extras/").concat(n,"/metafields/").concat(r),o);case 6:e.sent.ok&&(i=h.metaFields.filter((function(e){return e.id!==r})),v(gI(gI({},h),{},{metaFields:i})),g({loading:!1,result:{error:!1}}),c&&c(r),p(Dr.Success,d("METAFIELD_DELETED","Metafield deleted"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=jI(a.a.mark((function e(r){var o,i,u,c,y,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),g(gI(gI({},b),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(r)},e.next=6,fetch("".concat(l.root,"/business/").concat(t,"/extras/").concat(n,"/metafields"),o);case 6:return i=e.sent,e.next=9,i.json();case 9:u=e.sent,c=u.error,y=u.result,c?g({loading:!1,result:{error:!0,result:y}}):([],m=[].concat(mI(h.metaFields),[y]),v(gI(gI({},h),{},{metaFields:m})),g({loading:!1,result:{error:!1}}),s&&s(y),p(Dr.Success,d("METAFIELD_ADDED","Metafield added"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),g({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?v(gI(gI({},h),{},{metaFields:r})):O()}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,vI({},e,{metaFieldsList:h,actionState:b,handleDeleteMetaField:w,handeAddMetaField:j})))};function II(){return II=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},II.apply(this,arguments)}function xI(e){return function(e){if(Array.isArray(e))return FI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||BI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function TI(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){AI(a,r,o,i,u,"next",e)}function u(e){AI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function _I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=BI(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function kI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kI(Object(n),!0).forEach((function(t){UI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||BI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BI(e,t){if(e){if("string"==typeof e)return FI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FI(e,t):void 0}}function FI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}CI.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},CI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var RI=function(e){var t=e.UIComponent,n=e.business,r=e.extra,o=e.option,s=e.handleUpdateBusinessState,c=e.handleSucccessDeleteOption,l=LI(rn(),1)[0],f=LI(yn(),1)[0].token,p=LI(Br(),2)[1].showToast,d=LI(Bn(),2)[1],y=LI(Object(i.useState)({option:o,loading:!1,error:null}),2),h=y[0],v=y[1],m=LI(Object(i.useState)({changes:{},result:{}}),2),b=m[0],g=m[1],O=LI(Object(i.useState)(null),2),w=O[0],j=O[1],S=LI(Object(i.useState)({changes:{},loading:!1,error:null}),2),E=S[0],P=S[1],C=LI(Object(i.useState)([]),2),I=C[0],x=C[1],A=LI(Object(i.useState)([]),2),T=A[0],_=A[1],k=LI(Object(i.useState)(null),2),D=k[0],U=k[1],L=LI(Object(i.useState)(r),2),B=L[0],F=L[1],R=LI(Object(i.useState)(null),2),M=R[0],N=R[1],z=function(e){if(s){var t=n.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})),r=DI(DI({},n),{},{extras:t}),o=r.categories.map((function(t){var n=t.products.map((function(t){var n=t.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));return DI(DI({},t),{},{extras:n})}));return DI(DI({},t),{},{products:n})})),a=DI(DI({},r),{},{categories:o});s(a)}},G=function(e){var t,n=[],r=_I(e.options.filter((function(e){return e.id!==o.id})));try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push({value:a.id,content:a.name})}}catch(e){r.e(e)}finally{r.f()}x(n)},Y=function(e,t){var n,r=[],o=_I(e.options.find((function(e){return e.id===t})).suboptions);try{for(o.s();!(n=o.n()).done;){var a=n.value;r.push({value:a.id,content:a.name})}}catch(e){o.e(e)}finally{o.f()}_(r)},q=function(e){var t,n=_I(null==B?void 0:B.options);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(null!=r&&r.suboptions){var o,a=_I(r.suboptions);try{for(a.s();!(o=a.n()).done;){var i=o.value;i.id===e&&(U(r.id),N(i.id))}}catch(e){a.e(e)}finally{a.f()}}}}catch(e){n.e(e)}finally{n.f()}},$=function(){var e=TI(a.a.mark((function e(t){var i,u,s,c,y,m,O,j,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in e.prev=0,i=t||DI({},b.changes),u={},i)""!==i[s]&&(u=DI(DI({},u),{},UI({},s,i[s])));if(0!==Object.keys(u).length){e.next=6;break}return e.abrupt("return");case 6:return p(Dr.Info,d("LOADING","Loading")),v(DI(DI({},h),{},{loading:!0})),c={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(u)},e.next=11,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id,"/suboptions/").concat((null==t?void 0:t.id)||w),c);case 11:return y=e.sent,e.next=14,y.json();case 14:if(m=e.sent,g({changes:m.error?b:{},result:null==m?void 0:m.result}),m.error){e.next=26;break}return O=h.option.suboptions.filter((function(e){return e.id===m.result.id&&Object.assign(e,m.result),!0})),j=DI(DI({},h.option),{},{suboptions:O}),v(DI(DI({},h),{},{option:j,loading:!1})),S=r.options.filter((function(e){return e.id===j.id&&Object.assign(e,j),!0})),E=DI(DI({},r),{},{options:S}),F(E),z(E),p(Dr.Success,d("CHOICE_SAVED","Choice saved")),e.abrupt("return",!0);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),v(DI(DI({},h),{},{loading:!1,error:e.t0.message}));case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=TI(a.a.mark((function e(){var t,i,u,s,c,y,m,O,w,j,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in e.prev=0,i=DI({},b.changes),u={},i)""!==i[s]&&(u=DI(DI({},u),{},UI({},s,i[s])));if(null!==(t=u)&&void 0!==t&&t.price||(u.price=0),0!==Object.keys(u).length){e.next=7;break}return e.abrupt("return");case 7:return p(Dr.Info,d("LOADING","Loading")),u.enabled=!0,v(DI(DI({},h),{},{loading:!0})),c={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(u)},e.next=13,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id,"/suboptions"),c);case 13:return y=e.sent,e.next=16,y.json();case 16:m=e.sent,g({changes:m.error?b:{},result:null==m?void 0:m.result}),m.error||((O=xI(h.option.suboptions)).push(DI(DI({},m.result),{},{preselected:!1})),w=DI(DI({},h.option),{},{suboptions:O}),v(DI(DI({},h),{},{option:w,loading:!1})),j=r.options.filter((function(e){return e.id===w.id&&Object.assign(e,w),!0})),S=DI(DI({},r),{},{options:j}),F(S),z(S),p(Dr.Success,d("CHOICE_ADDED","Choice added"))),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),v(DI(DI({},h),{},{loading:!1,error:e.t0.message}));case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=TI(a.a.mark((function e(t){var i,u,s,c,y,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),v(DI(DI({},h),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id,"/suboptions/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:e.sent.error||(s=h.option.suboptions.filter((function(e){return e.id!==t})),c=DI(DI({},h.option),{},{suboptions:s}),v(DI(DI({},h),{},{option:c,loading:!1})),y=r.options.filter((function(e){return e.id===c.id&&Object.assign(e,c),!0})),m=DI(DI({},r),{},{options:y}),F(m),z(m),p(Dr.Success,d("CHOICE_DELETED","Choice deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(DI(DI({},h),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=TI(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=UI({},t,n),P(DI(DI({},E),{},{changes:r})),W(r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=TI(a.a.mark((function e(t){var i,u,s,c,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),P(DI(DI({},E),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(t)},e.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error||(P({changes:s.error?E.changes:{},loading:!1}),v(DI(DI({},h),{},{option:DI(DI({},h.option),s.result)})),c=r.options.filter((function(e){return e.id===s.result.id&&Object.assign(e,s.result),!0})),y=DI(DI({},r),{},{options:c}),F(y),z(y),p(Dr.Success,d("OPTION_SAVED","Option saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),P(DI(DI({},E),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var t=TI(a.a.mark((function t(){var i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(Dr.Info,d("LOADING","Loading")),v(DI(DI({},h),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},t.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id),i);case 6:return u=t.sent,t.next=9,u.json();case 9:t.sent.error||(c&&c(o.id),p(Dr.Success,d("OPTION_DELETED","Option deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v(DI(DI({},h),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(D){G(B),Y(B,D);var e=B.options.find((function(e){return e.id===o.id}));q(null==e?void 0:e.respect_to)}}),[B,D]),Object(i.useEffect)((function(){v(DI(DI({},h),{},{option:o})),G(r),q(null==o?void 0:o.respect_to)}),[o,r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,II({},e,{optionState:h,changesState:b,editSubOptionId:w,settingChangeState:E,handleChangeInput:function(e,t){t===w?g({result:{},changes:DI(DI({},b.changes),{},UI({},e.target.name,e.target.value))}):(j(t),g({result:{},changes:UI({},e.target.name,e.target.value)}))},handleChangeSubOptionImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),t===w?n.onload=function(){g({result:{},changes:DI(DI({},b.changes),{},{image:n.result})})}:(j(t),n.onload=function(){g({result:{},changes:{image:n.result}})}),n.onerror=function(e){return console.log(e)}},handleChangeSubOptionEnable:function(e,t){t===w?g({result:{},changes:DI(DI({},b.changes),{},{enabled:e})}):(j(t),g({result:{},changes:{enabled:e}}))},handleDeteteSubOption:V,handleOptionSetting:H,conditionalOptions:I,conditionalSubOptions:T,conditionalOptionId:D,conditionalSubOptionId:M,handleChangeConditionalOption:function(e){U(e),Y(B,e)},handleChangeConditionalSubOption:function(e){W({respect_to:e})},handleAddOption:J,handleDeteteOption:K,handleChangeDefaultSuboption:function(e){var t,n,r,o,a,i,u,s=null==h||null===(t=h.option)||void 0===t||null===(n=t.suboptions)||void 0===n||null===(r=n.find((function(t){return t.id===e})))||void 0===r?void 0:r.preselected,c=null==h||null===(o=h.option)||void 0===o||null===(a=o.suboptions)||void 0===a||null===(i=a.filter((function(e){return null==e?void 0:e.preselected})))||void 0===i?void 0:i.length;s?$({id:e,preselected:!1}):(null==h||null===(u=h.option)||void 0===u?void 0:u.max)>c?$({id:e,preselected:!0}):p(Dr.Error,d("MAX_PRESELECTED_OPTIONS_ERROR","Maximum number of options exceeded"),4e3)},handleUpdateSubOption:$,handleChangeItem:function(e,t){void 0!==t&&w===t&&j(t),g({result:{},changes:DI(DI({},b.changes),e)})},handleUpdateOption:W})))};function MI(){return MI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MI.apply(this,arguments)}function NI(e){return function(e){if(Array.isArray(e))return HI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||VI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zI(Object(n),!0).forEach((function(t){YI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function $I(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){qI(a,r,o,i,u,"next",e)}function u(e){qI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function JI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||VI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VI(e,t){if(e){if("string"==typeof e)return HI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HI(e,t):void 0}}function HI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}RI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},RI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var WI=function(e){var t=e.businessId,n=e.extraId,r=e.optionId,o=e.metafields,s=e.UIComponent,c=e.handleSuccessAddMetaFields,l=e.handleSuccessDeleteBusinessMetaFields,f=JI(rn(),1)[0],p=JI(yn(),1)[0],d=JI(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),y=d[0],h=d[1],v=JI(Object(i.useState)({loading:!1,result:{error:!1}}),2),m=v[0],b=v[1],g=function(){var e=$I(a.a.mark((function e(){var o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(GI(GI({},y),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,h(GI(GI({},y),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(GI(GI({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=$I(a.a.mark((function e(o){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(GI(GI({},m),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/metafields/").concat(o),i);case 5:e.sent.ok&&(u=y.metaFields.filter((function(e){return e.id!==o})),h(GI(GI({},y),{},{metaFields:u})),b({loading:!1,result:{error:!1}}),l&&l(o)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),b({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=$I(a.a.mark((function e(o){var i,u,s,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(GI(GI({},m),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)},body:JSON.stringify(o)},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/metafields"),i);case 5:return u=e.sent,e.next=8,u.json();case 8:s=e.sent,l=s.error,d=s.result,l?b({loading:!1,result:{error:!0,result:d}}):([],v=[].concat(NI(y.metaFields),[d]),h(GI(GI({},y),{},{metaFields:v})),b({loading:!1,result:{error:!1}}),c&&c(d)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),b({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?h(GI(GI({},y),{},{metaFields:o})):g()}),[o]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,MI({},e,{metaFieldsList:y,actionState:m,handleDeleteMetaField:O,handeAddMetaField:w})))};function KI(){return KI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KI.apply(this,arguments)}function XI(e){return function(e){if(Array.isArray(e))return ax(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ox(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function QI(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ZI(a,r,o,i,u,"next",e)}function u(e){ZI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ex(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ex(Object(n),!0).forEach((function(t){nx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ex(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ox(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ox(e,t){if(e){if("string"==typeof e)return ax(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ax(e,t):void 0}}function ax(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}WI.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},WI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ix=function(e){var t=e.UIComponent,n=e.business,r=e.extra,o=e.handleUpdateBusinessState,s=rx(rn(),1)[0],c=rx(yn(),1)[0].token,l=rx(Br(),2)[1].showToast,f=rx(Bn(),2)[1],p=rx(Object(i.useState)({extra:r,loading:!1,error:null}),2),d=p[0],y=p[1],h=rx(Object(i.useState)({changes:{},result:{}}),2),v=h[0],m=h[1],b=rx(Object(i.useState)(null),2),g=b[0],O=b[1],w=rx(Object(i.useState)({conditioned:!1,enabled:!0,name:"",min:1,max:1}),2),j=w[0],S=w[1],E=rx(Object(i.useState)(null),2),P=E[0],C=E[1],I=rx(Object(i.useState)({}),2),x=I[0],A=I[1],T=function(e){return m(tx({},e))},_=function(e,t){T(tx(tx({},v),{},{changes:{}})),C(e),A(tx(tx({},x),{},nx({},t,!0)))},k=function(e){if(o){var t=n.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})),r=tx(tx({},n),{},{extras:t}),a=r.categories.map((function(t){var n=t.products.map((function(t){var n=t.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));return tx(tx({},t),{},{extras:n})}));return tx(tx({},t),{},{products:n})})),i=tx(tx({},r),{},{categories:a});o(i)}},D=function(){var e=QI(a.a.mark((function e(){var t,o,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),y(tx(tx({},d),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(null==v?void 0:v.changes)},e.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(g),t);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error||(m({changes:i.error?v.changes:{},result:i.result}),u=d.extra.options.filter((function(e){return e.id===i.result.id&&Object.assign(e,i.result),!0})),p=tx(tx({},d.extra),{},{options:u}),y(tx(tx({},d),{},{loading:!1,extra:p})),k(p),l(Dr.Success,f("OPTION_SAVED","Option saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(tx(tx({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=QI(a.a.mark((function e(){var t,o,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),y(tx(tx({},d),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(j)},e.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options"),t);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error||(S({conditioned:!1,enabled:!0,name:"",min:1,max:1}),u=d.extra.options?[].concat(XI(d.extra.options),[tx(tx({},i.result),{},{suboptions:[]})]):[tx(tx({},i.result),{},{suboptions:[]})],p=tx(tx({},d.extra),{},{options:u}),y(tx(tx({},d),{},{loading:!1,extra:p})),k(p),l(Dr.Success,f("OPTION_ADDED","Option added")),_(tx(tx({},i.result),{},{suboptions:[]}),"edit")),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(tx(tx({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=QI(a.a.mark((function e(t){var o,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),y(tx(tx({},d),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},e.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(t),o);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(u=d.extra.options.filter((function(e){return e.id!==t})),p=tx(tx({},d.extra),{},{options:u}),y(tx(tx({},d),{},{loading:!1,extra:p})),k(p),l(Dr.Success,f("OPTION_DELETED","Option deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(tx(tx({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var t=QI(a.a.mark((function t(){var i,u,p,h,v,m;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dr.Info,f("LOADING","Loading")),y(tx(tx({},d),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id),i);case 6:return u=t.sent,t.next=9,u.json();case 9:t.sent.error||(p=n.extras.filter((function(e){return e.id!==r.id})),o&&(h=tx(tx({},n),{},{extras:p}),v=h.categories.map((function(e){var t=e.products.map((function(e){var t=e.extras.filter((function(e){return e.id!==r.id}));return tx(tx({},e),{},{extras:t})}));return tx(tx({},e),{},{products:t})})),m=tx(tx({},h),{},{categories:v}),o(m)),l(Dr.Success,f("EXTRA_DELETED","Extra deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),y(tx(tx({},d),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m({changes:{},result:{}}),y(tx(tx({},d),{},{extra:r}))}),[r]),Object(i.useEffect)((function(){S({conditioned:!1,enabled:!0,name:"",min:1,max:1})}),[null==r?void 0:r.id]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,KI({},e,{changesState:v,cleanChangesState:T,handleChangeItem:function(e,t){void 0!==t&&O(t),m({result:{},changes:tx(tx({},v.changes),e)})},extraState:d,editOptionId:g,addChangesState:j,handleChangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),t===g?n.onload=function(){m({result:{},changes:tx(tx({},v.changes),{},{image:n.result})})}:(O(t),n.onload=function(){m({result:{},changes:{image:n.result}})}),n.onerror=function(e){return console.log(e)}},handleChangeInput:function(e,t){t===g?m({result:{},changes:tx(tx({},v.changes),{},nx({},e.target.name,e.target.value))}):(O(t),m({result:{},changes:nx({},e.target.name,e.target.value)}))},handleChangeOptionEnable:function(e,t){t===g?m({result:{},changes:tx(tx({},v.changes),{},{enabled:e})}):(O(t),m({result:{},changes:{enabled:e}}))},handleAddOption:U,handleChangeAddOption:function(e){S(tx(tx({},j),{},nx({},e.target.name,e.target.value)))},handleChangeAddOptionEnable:function(e){S(tx(tx({},j),{},{enabled:e}))},handleDeteteOption:L,handleDeleteExtra:B,handleSucccessDeleteOption:function(e){var t=d.extra.options.filter((function(t){return t.id!==e})),n=tx(tx({},d.extra),{},{options:t});y(tx(tx({},d),{},{loading:!1,extra:n})),k(n)},handleUpdateOption:D,curOption:P,openModal:x,setCurOption:C,setOpenModal:A,handleOpenModal:_})))};function ux(){return ux=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ux.apply(this,arguments)}function sx(e){return function(e){if(Array.isArray(e))return vx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||hx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cx(Object(n),!0).forEach((function(t){fx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function px(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function dx(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){px(a,r,o,i,u,"next",e)}function u(e){px(a,r,o,i,u,"throw",e)}i(void 0)}))}}function yx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||hx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hx(e,t){if(e){if("string"==typeof e)return vx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vx(e,t):void 0}}function vx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ix.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ix.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mx=function(e){var t=e.businessId,n=e.extraId,r=e.optionId,o=e.subOptionId,s=e.metafields,c=e.UIComponent,l=e.handleSuccessAddMetaFields,f=e.handleSuccessDeleteBusinessMetaFields,p=yx(rn(),1)[0],d=yx(yn(),1)[0],y=yx(Br(),2)[1].showToast,h=yx(Bn(),2)[1],v=yx(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=yx(Object(i.useState)({loading:!1,result:{error:!1}}),2),O=g[0],w=g[1],j=function(){var e=dx(a.a.mark((function e(){var i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(lx(lx({},m),{},{loading:!0})),i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},e.next=5,fetch("".concat(p.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/suboptions/").concat(o,"/metafields"),i);case 5:return u=e.sent,e.next=8,u.json();case 8:s=e.sent,c=s.result,b(lx(lx({},m),{},{loading:!1,metaFields:c})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(lx(lx({},m),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=dx(a.a.mark((function e(i){var u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(lx(lx({},O),{},{loading:!0})),u={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},e.next=6,fetch("".concat(p.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/suboptions/").concat(o,"/metafields/").concat(i),u);case 6:e.sent.ok&&(y(Dr.Success,h("METAFIELD_DELETED","Metafield deleted")),s=m.metaFields.filter((function(e){return e.id!==i})),b(lx(lx({},m),{},{metaFields:s})),w({loading:!1,result:{error:!1}}),f&&f(i)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),w({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=dx(a.a.mark((function e(i){var u,s,c,f,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(lx(lx({},O),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)},body:JSON.stringify(i)},e.next=6,fetch("".concat(p.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/suboptions/").concat(o,"/metafields"),u);case 6:return s=e.sent,e.next=9,s.json();case 9:c=e.sent,f=c.error,v=c.result,f?w({loading:!1,result:{error:!0,result:v}}):(y(Dr.Success,h("METAFIELD_ADDED","Metafield added")),[],g=[].concat(sx(m.metaFields),[v]),b(lx(lx({},m),{},{metaFields:g})),w({loading:!1,result:{error:!1}}),l&&l(v)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),w({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){s?b(lx(lx({},m),{},{metaFields:s})):j()}),[s]),u.a.createElement(u.a.Fragment,null,c&&u.a.createElement(c,ux({},e,{metaFieldsList:m,actionState:O,handleDeleteMetaField:S,handeAddMetaField:E})))};function bx(){return bx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bx.apply(this,arguments)}function gx(e){return function(e){if(Array.isArray(e))return Ix(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ox(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ox(Object(n),!0).forEach((function(t){jx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ox(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sx(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ex(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Sx(a,r,o,i,u,"next",e)}function u(e){Sx(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Px(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Cx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cx(e,t){if(e){if("string"==typeof e)return Ix(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ix(e,t):void 0}}function Ix(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mx.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mx.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xx=function(e){var t=e.business,n=e.UIComponent,r=e.product,o=e.handleSuccessUpdate,s=e.handleUpdateBusinessState,c=Px(rn(),1)[0],l=Px(yn(),1)[0].token,f=Px(Br(),2)[1].showToast,p=Px(Bn(),2)[1],d=Px(Object(i.useState)({product:r,loading:!1,error:null}),2),y=d[0],h=d[1],v=Px(Object(i.useState)({extras:null==t?void 0:t.extras,loading:!1,error:null}),2),m=v[0],b=v[1],g=Px(Object(i.useState)({}),2),O=g[0],w=g[1],j=Px(Object(i.useState)(!1),2),S=j[0],E=j[1],P=Px(Object(i.useState)(null),2),C=P[0],I=P[1],x=Px(Object(i.useState)(!1),2),A=x[0],T=x[1],_=function(){var e=Ex(a.a.mark((function e(n){var i,u,s,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={business_id:null==t?void 0:t.id,category_id:null==r?void 0:r.category_id,product_id:null==r?void 0:r.id,extras:JSON.stringify(n)},f(Dr.Info,p("LOADING","Loading")),h(wx(wx({},y),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=7,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==r?void 0:r.category_id,"/products/").concat(r.id),u);case 7:return s=e.sent,e.next=10,s.json();case 10:e.sent.error||(d=null==m?void 0:m.extras.filter((function(e){return n.includes(e.id)})),v=wx(wx({},y.product),{},{extras:d}),h(wx(wx({},y),{},{loading:!1,product:v})),o&&o(v),f(Dr.Success,p("EXTRA_SAVED","Extra saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),h(wx(wx({},y),{},{loading:!1,error:e.t0.message}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Ex(a.a.mark((function e(n,i){var u,s,d,v,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),b(wx(wx({},m),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/extras/").concat(n),u);case 6:return s=e.sent,e.next=9,s.json();case 9:(d=e.sent).error||(v=m.extras.filter((function(e){return e.id===d.result.id&&Object.assign(e,d.result),!0})),b(wx(wx({},m),{},{loading:!1,extras:v})),g=y.product.extras.filter((function(e){return e.id===d.result.id&&Object.assign(e,d.result),!0})),O=wx(wx({},r),{},{extras:g}),h(wx(wx({},y),{},{product:O})),o&&o(O),f(Dr.Success,p("EXTRA_SAVED","Extra saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(wx(wx({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Ex(a.a.mark((function e(n){var i,u,s,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),b(wx(wx({},m),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/extras/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:e.sent.error||(s=m.extras.filter((function(e){return e.id!==n})),b(wx(wx({},m),{},{loading:!1,extras:s})),d=y.product.extras.filter((function(e){return e.id!==n})),v=wx(wx({},r),{},{extras:d}),h(wx(wx({},y),{},{product:v})),o&&o(v),f(Dr.Success,p("EXTRA_DELETED","Extra deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(wx(wx({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Ex(a.a.mark((function e(){var n,r,o,i,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(O).length){e.next=3;break}return E(!1),e.abrupt("return");case 3:return e.prev=3,n=wx({business_id:null==t?void 0:t.id},O),f(Dr.Info,p("LOADING","Loading")),b(wx(wx({},m),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=10,fetch("".concat(c.root,"/business/").concat(t.id,"/extras"),r);case 10:return o=e.sent,e.next=13,o.json();case 13:(i=e.sent).error||(w({}),E(!1),u=[].concat(gx(m.extras),[i.result]),b(wx(wx({},m),{},{loading:!1,extras:u})),s&&(d=wx(wx({},t),{},{extras:u}),s(d)),f(Dr.Success,p("EXTRA_ADDED","Extra added"))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),b(wx(wx({},m),{},{loading:!1,error:e.t0.message}));case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Ex(a.a.mark((function e(n,i){var u,s,d,v,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(wx(wx({},m),{},{loading:!0})),f(Dr.Info,p("LOADING","Loading")),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/extras/").concat(n),u);case 6:return s=e.sent,e.next=9,s.json();case 9:(d=e.sent).error||(v=m.extras.filter((function(e){return e.id===d.result.id&&Object.assign(e,d.result),!0})),b(wx(wx({},m),{},{loading:!1,extras:v})),g=y.product.extras.filter((function(e){return e.id===d.result.id&&Object.assign(e,d.result),!0})),O=wx(wx({},r),{},{extras:g}),h(wx(wx({},y),{},{product:O})),o&&o(O),f(Dr.Success,p("EXTRA_SAVED","Extra saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(wx(wx({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h(wx(wx({},y),{},{product:r}))}),[r]),Object(i.useEffect)((function(){b(wx(wx({},m),{},{extras:null==t?void 0:t.extras}))}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,bx({},e,{changesState:O,isAddMode:S,productState:y,extrasState:m,handleChangeExtraInput:function(e,t){var n={name:e.target.value};k(t,n)},handleDeteteExtra:D,handleOpenAddForm:function(){return E(!0)},handleAddExtra:U,handleChangeAddExtraInput:function(e){w({name:e.target.value})},handleProductExtraState:_,dragoverExtaId:C,isExtrasBottom:A,handleDragStart:function(e,t){e.dataTransfer.setData("transferExtraId",t.id);var n=document.createElement("div");n.classList.add("ghostDragging"),n.innerHTML=t.name,document.body.appendChild(n),e.dataTransfer.setDragImage(n,0,0),T(!1)},hanldeDragOver:function(e,t,n){if(e.preventDefault(),e.target.closest(".draggable-extra"))if(n){var r=window.scrollY+e.target.getBoundingClientRect().top+e.target.offsetHeight/2;e.clientY>r?(T(!0),I(null)):(T(!1),I(t.id))}else I(t.id)},handleDrop:function(e,t){e.preventDefault();var n,r=parseInt(e.dataTransfer.getData("transferExtraId"));t.id!==r&&(n=A?(null==t?void 0:t.rank)+1:null==t?void 0:t.rank,T(!1),L(r,{rank:n}))},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);I(null)}})))};function Ax(){return Ax=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ax.apply(this,arguments)}function Tx(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function _x(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Tx(a,r,o,i,u,"next",e)}function u(e){Tx(a,r,o,i,u,"throw",e)}i(void 0)}))}}function kx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kx(Object(n),!0).forEach((function(t){Ux(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ux(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xx.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xx.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Fx=function(e){var t,n,r,o,s,c,l,f=e.UIComponent,p=e.useOrderContext,d=e.onSave,y={},h=Lx(rn(),1)[0],v=Lx(Object(i.useState)({product:e.product,loading:!1,error:null}),2),m=v[0],b=v[1],g=Lx(Object(i.useState)({ingredients:{},options:{}}),2),O=g[0],w=g[1],j=Lx(Object(i.useState)({}),2),S=j[0],E=j[1],P=Lx(Object(i.useState)(null),2),C=P[0],I=P[1],x=void 0!==(null===(t=e.productCart)||void 0===t?void 0:t.code),A=Lx(vr(),2),T=A[0],_=A[1],k=_.addProduct,D=_.updateProduct,U=x?e.productCart.quantity:0,L=T.carts["businessId:".concat(e.businessId)],B=m.product&&(null==L||null===(n=L.products)||void 0===n?void 0:n.find((function(e){return e.id===m.product.id}))),F=((null==B?void 0:B.quantity)||0)-U,R=((null==L||null===(r=L.products)||void 0===r?void 0:r.reduce((function(e,t){return e+(m.product&&t.id===m.product.id?t.quantity:0)}),0))||0)-U,M=Lx(tr(),1)[0],N=(M.configs.max_product_amount?parseInt(M.configs.max_product_amount):100)-F,z=(null!==(o=m.product)&&void 0!==o&&o.inventoried?null===(s=m.product)||void 0===s?void 0:s.quantity:void 0)-R,G=(null===(c=m.product)||void 0===c?void 0:c.inventoried)&&0===(null===(l=m.product)||void 0===l?void 0:l.quantity);z=isNaN(z)?N:z;var Y=Math.min(N,z),q=function(e){for(var t,n=0,r=0;r<(null===(o=m.product)||void 0===o?void 0:o.extras.length);r++)for(var o,a,i=null===(a=m.product)||void 0===a?void 0:a.extras[r],u=0;u<i.options.length;u++)for(var s=i.options[u],c=0;c<s.suboptions.length;c++){var l,f,p=s.suboptions[c];if(null!==(l=e.options["id:".concat(s.id)])&&void 0!==l&&null!==(f=l.suboptions["id:".concat(p.id)])&&void 0!==f&&f.selected){var d=e.options["id:".concat(s.id)].suboptions["id:".concat(p.id)],y=s.allow_suboption_quantity?d.quantity:1;n+=(s.with_half_option&&p.half_price&&"whole"!==d.position?p.half_price:p.price)*y}}return(null===(t=m.product)||void 0===t?void 0:t.price)+n},$=function(){var t=_x(a.a.mark((function t(){var n,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,b(Dx(Dx({},m),{},{loading:!0})),n={},y.product=n,t.next=6,h.businesses(e.businessId).categories(e.categoryId).products(e.productId).get({cancelToken:n});case 6:r=t.sent,o=r.content.result,b(Dx(Dx({},m),{},{loading:!1,product:o})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),b(Dx(Dx({},m),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),J=function e(t,n){m.product.extras.forEach((function(r){r.options.forEach((function(r){if(r.respect_to===n){var o,a=null===(o=t.options["id:".concat(r.id)])||void 0===o?void 0:o.suboptions;a&&Object.keys(a).map((function(n){return e(t,parseInt(n.split(":")[1]))})),t.options["id:".concat(r.id)]&&(t.options["id:".concat(r.id)].suboptions={})}}))}))},V=function(e,t,n){var r=JSON.parse(JSON.stringify(O));if(r.options||(r.options={}),r.options["id:".concat(n.id)]||(r.options["id:".concat(n.id)]={id:n.id,name:n.name,suboptions:{}}),e.selected){if(n.min===n.max&&1===n.min){var o=r.options["id:".concat(n.id)].suboptions;o&&Object.keys(o).map((function(e){return J(r,parseInt(e.split(":")[1]))})),r.options["id:".concat(n.id)]&&(r.options["id:".concat(n.id)].suboptions={})}r.options["id:".concat(n.id)].suboptions["id:".concat(t.id)]=e}else delete r.options["id:".concat(n.id)].suboptions["id:".concat(t.id)],J(r,t.id);var a,i=Object.keys(r.options["id:".concat(n.id)].suboptions).length;n.limit_suboptions_by_max&&(i=null===(a=Object.values(r.options["id:".concat(n.id)].suboptions))||void 0===a?void 0:a.reduce((function(e,t){return e+t.quantity}),0));i<=n.max&&(r.options["id:".concat(n.id)].balance=i,r.unitTotal=q(r),r.total=r.unitTotal*r.quantity,w(r))},H=function(){var e={};return m.product?(m.product.extras.forEach((function(t){t.options.map((function(t){var n,r=null===(n=O.options["id:".concat(t.id)])||void 0===n?void 0:n.suboptions,o=r?Object.keys(r).length:0,a=!1;if(t.respect_to&&O.options){var i=O.options;for(var u in i){var s;if(null!==(s=i[u].suboptions["id:".concat(t.respect_to)])&&void 0!==s&&s.selected){a=!0;break}}}(!t.respect_to||a)&&(t.min>o||t.max<o)&&(e["id:".concat(t.id)]=!0)}))})),E(e),e):e},W=function(){var t=_x(a.a.mark((function t(){var n,r,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=H(),0!==Object.keys(n).length){t.next=15;break}if(r=!0,!p){t.next=14;break}if(r=!1,null!==(o=e.productCart)&&void 0!==o&&o.code){t.next=11;break}return t.next=8,k(O);case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,D(O);case 13:r=t.sent;case 14:r&&d(O,!(null!==(i=e.productCart)&&void 0!==i&&i.code));case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m.product&&function(t){var n,r,o,a,i={};for(var u in t.ingredients){var s=t.ingredients[u];i["id:".concat(s.id)]={selected:!0}}var c=Dx(Dx({},e.productCart),{},{id:t.id,price:t.price,name:t.name,businessId:e.businessId,categoryId:t.category_id,inventoried:t.inventoried,stock:t.quantity,ingredients:(null===(n=e.productCart)||void 0===n?void 0:n.ingredients)||i,options:(null===(r=e.productCart)||void 0===r?void 0:r.options)||{},comment:(null===(o=e.productCart)||void 0===o?void 0:o.comment)||null,quantity:(null===(a=e.productCart)||void 0===a?void 0:a.quantity)||1});c.unitTotal=q(c),c.total=c.unitTotal*c.quantity,w(c)}(m.product)}),[m.product,e.productCart]),Object(i.useEffect)((function(){H()}),[O]),Object(i.useEffect)((function(){if(null!=m&&m.product&&Object.keys(null==m?void 0:m.product).length){var e=m.product.extras.map((function(e){return e.options.find((function(e){return 1===e.min&&1===e.max&&1===e.suboptions.length}))}))[0];if(!e)return;var t=e.suboptions[0],n=e.with_half_option&&t.half_price&&"whole"!==(null==t?void 0:t.position)?t.half_price:t.price,r={id:t.id,name:t.name,position:t.position||"whole",price:n,quantity:1,selected:!0,total:n};I({state:r,suboption:t,option:e})}}),[m.product]),Object(i.useEffect)((function(){if(C){var e=C.state,t=C.suboption,n=C.option;V(e,t,n)}}),[C]),Object(i.useEffect)((function(){if(!(e.product||e.businessId&&e.categoryId&&e.productId))throw new Error("`businessId` && `categoryId` && `productId` are required if `product` was not provided.");return!e.product&&e.businessId&&e.categoryId&&e.productId&&$(),function(){y.product&&y.product.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,f&&u.a.createElement(f,Ax({},e,{productObject:m,productCart:O,errors:S,editMode:x,isSoldOut:G,maxProductQuantity:Y,increment:function(){Y<=0||O.quantity>=Y||(O.quantity++,O.unitTotal=q(O),O.total=O.unitTotal*O.quantity,w(Dx({},O)))},decrement:function(){0!==O.quantity&&(O.quantity--,O.unitTotal=q(O),O.total=O.unitTotal*O.quantity,w(Dx({},O)))},handleSave:W,showOption:function(e){var t=!0;if(e.respect_to&&(t=!1,O.options)){var n=O.options;for(var r in n){var o;if(null!==(o=n[r].suboptions["id:".concat(e.respect_to)])&&void 0!==o&&o.selected){t=!0;break}}}return t},handleChangeIngredientState:function(e,t){O.ingredients["id:".concat(t.id)]=e,w(Dx(Dx({},O),{},{ingredients:O.ingredients}))},handleChangeSuboptionState:V,handleChangeCommentState:function(e){var t=e.target.value;O.comment=t,w(Dx(Dx({},O),{},{comment:O.comment}))}})))};function Rx(){return Rx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rx.apply(this,arguments)}function Mx(e){return function(e){if(Array.isArray(e))return Vx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Jx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nx(Object(n),!0).forEach((function(t){Gx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yx(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function qx(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Yx(a,r,o,i,u,"next",e)}function u(e){Yx(a,r,o,i,u,"throw",e)}i(void 0)}))}}function $x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Jx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jx(e,t){if(e){if("string"==typeof e)return Vx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vx(e,t):void 0}}function Vx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Fx.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,categoryId:c.a.number,productId:c.a.number,product:c.a.object,productCart:c.a.object,useOrderContext:c.a.bool,onSave:c.a.func},Fx.defaultProps={productCart:{},useOrderContext:!0,balance:0};var Hx=function(e){var t=e.UIComponent,n=e.business,r=e.categoryId,o=e.product,s=e.handleSuccessUpdate,c=$x(rn(),1)[0],l=$x(yn(),1)[0].token,f=$x(Br(),2)[1].showToast,p=$x(Bn(),2)[1],d=$x(Object(i.useState)({loading:!1,gallery:[],photos:[],videos:[],error:null}),2),y=d[0],h=d[1],v=$x(Object(i.useState)({changes:{},itemId:null,loading:!1,error:null}),2),m=v[0],b=v[1],g=function(){var e=qx(a.a.mark((function e(){var t,i,u,s,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(zx(zx({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/business/").concat(n.id,"/categories/").concat(r,"/products/").concat(o.id,"/gallery"),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(u=e.sent).error?h(zx(zx({},y),{},{loading:!1,error:u.result})):(s=u.result.filter((function(e){return 1===e.type})),f=u.result.filter((function(e){return 2===e.type})),h(zx(zx({},y),{},{loading:!1,gallery:u.result,photos:s,videos:f}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(zx(zx({},y),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=qx(a.a.mark((function e(t){var i,u,d,v,g,O,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(zx(zx({},m),{},{loading:!0})),f(Dr.Info,p("LOADING","Loading")),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(t)},e.next=6,fetch("".concat(c.root,"/business/").concat(n.id,"/categories/").concat(r,"/products/").concat(o.id,"/gallery"),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(d=e.sent).error?b(zx(zx({},m),{},{loading:!1,error:d.result})):(b(zx(zx({},m),{},{loading:!1,changes:{}})),f(Dr.Success,p("PRODUCT_GALLERY_ITEM_ADDED","Product gallery item added")),O=[].concat(Mx(y.gallery),[d.result]),1===(null===(v=d.result)||void 0===v?void 0:v.type)&&h(zx(zx({},y),{},{gallery:O,photos:[].concat(Mx(y.photos),[d.result])})),2===(null===(g=d.result)||void 0===g?void 0:g.type)&&h(zx(zx({},y),{},{gallery:O,videos:[].concat(Mx(y.videos),[d.result])})),w=zx(zx({},o),{},{gallery:O}),s&&s(w)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(zx(zx({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=qx(a.a.mark((function e(){var t,i,u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(zx(zx({},m),{},{loading:!0})),f(Dr.Info,p("LOADING","Loading")),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=6,fetch("".concat(c.root,"/business/").concat(n.id,"/categories/").concat(r,"/products/").concat(o.id,"/gallery/").concat(null==m?void 0:m.itemId),t);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?b(zx(zx({},m),{},{loading:!1,error:u.result})):(b(zx(zx({},m),{},{loading:!1,changes:{}})),g=y.gallery.filter((function(e){return e.id===u.result.id&&Object.assign(e,u.result),!0})),1===(null===(d=u.result)||void 0===d?void 0:d.type)&&(O=y.photos.filter((function(e){return e.id===u.result.id&&Object.assign(e,u.result),!0})),h(zx(zx({},h),{},{gallery:g,photos:O}))),2===(null===(v=u.result)||void 0===v?void 0:v.type)&&(w=y.videos.filter((function(e){return e.id===u.result.id&&Object.assign(e,u.result),!0})),h(zx(zx({},h),{},{gallery:g,videos:w}))),j=zx(zx({},o),{},{gallery:g}),s&&s(j),f(Dr.Success,p("PRODUCT_GALLERY_ITEM_SAVED","Product gallery item saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(zx(zx({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=qx(a.a.mark((function e(t,i){var u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(zx(zx({},m),{},{loading:!0})),f(Dr.Info,p("LOADING","Loading")),u={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=6,fetch("".concat(c.root,"/business/").concat(n.id,"/categories/").concat(r,"/products/").concat(o.id,"/gallery/").concat(t),u);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(zx(zx({},m),{},{loading:!1,error:v.result})):(b(zx(zx({},m),{},{loading:!1,changes:{}})),g=null==y?void 0:y.gallery.filter((function(e){return e.id!==t})),1===i&&(O=null==y?void 0:y.photos.filter((function(e){return e.id!==t})),h(zx(zx({},y),{},{gallery:g,photos:O}))),2===i&&(w=null==y?void 0:y.videos.filter((function(e){return e.id!==t})),h(zx(zx({},y),{},{gallery:g,videos:w}))),j=zx(zx({},o),{},{gallery:g}),s&&s(j),f(Dr.Success,p("PRODUCT_GALLERY_ITEM_DELETED","Product gallery item deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(zx(zx({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),S=null,E=function(e,t){b(zx(zx({},m),{},{changes:zx(zx({},m.changes),{},Gx({},e.target.name,e.target.value)),itemId:t}))};return Object(i.useEffect)((function(){0!==Object.keys(null==m?void 0:m.changes).length&&null!=m&&m.itemId&&w()}),[null==m?void 0:m.changes]),Object(i.useEffect)((function(){if(null!=o&&o.gallery){var e=null==o?void 0:o.gallery.filter((function(e){return 1===e.type})),t=null==o?void 0:o.gallery.filter((function(e){return 2===e.type}));h(zx(zx({},y),{},{loading:!1,gallery:o.gallery,photos:e,videos:t}))}else g()}),[o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Rx({},e,{productGalleryState:y,changesState:m,handleChangeItem:function(e,t){b(zx(zx({},m),{},{changes:zx(zx({},null==m?void 0:m.changes),e)},t&&{itemId:t}))},handleChangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){b(zx(zx({},m),{},{changes:zx(zx({},null==m?void 0:m.changes),{},{file:n.result}),itemId:t}))},n.onerror=function(e){return console.log(e)}},handleChangeInput:function(e,t){t?(e.persist(),clearTimeout(S),S=setTimeout((function(){E(e,t)}),1e3)):E(e,t)},handleAddGalleryProduct:function(e){var t=zx(zx({},m.changes),{},{type:e});O(t)},handleDeteteProductGalleryItem:j})))};function Wx(){return Wx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wx.apply(this,arguments)}function Kx(e){return function(e){if(Array.isArray(e))return oA(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rA(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xx(Object(n),!0).forEach((function(t){Qx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function tA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){eA(a,r,o,i,u,"next",e)}function u(e){eA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function nA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||rA(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rA(e,t){if(e){if("string"==typeof e)return oA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oA(e,t):void 0}}function oA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Hx.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Hx.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var aA=function(e){var t=e.businessId,n=e.categoryId,r=e.productId,o=e.metafields,s=e.UIComponent,c=e.handleSuccessAddMetaFields,l=e.handleSuccessDeleteBusinessMetaFields,f=nA(rn(),1)[0],p=nA(yn(),1)[0],d=nA(Br(),2)[1].showToast,y=nA(Bn(),2)[1],h=nA(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),v=h[0],m=h[1],b=nA(Object(i.useState)({loading:!1,result:{error:!1}}),2),g=b[0],O=b[1],w=function(){var e=tA(a.a.mark((function e(){var o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Zx(Zx({},v),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/categories/").concat(n,"/products/").concat(r,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,m(Zx(Zx({},v),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(Zx(Zx({},v),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=tA(a.a.mark((function e(o){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),O(Zx(Zx({},g),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=6,fetch("".concat(f.root,"/business/").concat(t,"/categories/").concat(n,"/products/").concat(r,"/metafields/").concat(o),i);case 6:e.sent.ok&&(u=v.metaFields.filter((function(e){return e.id!==o})),m(Zx(Zx({},v),{},{metaFields:u})),O({loading:!1,result:{error:!1}}),l&&l(o),d(Dr.Success,y("METAFIELD_DELETED","Metafield deleted"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),O({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=tA(a.a.mark((function e(o){var i,u,s,l,h,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),O(Zx(Zx({},g),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)},body:JSON.stringify(o)},e.next=6,fetch("".concat(f.root,"/business/").concat(t,"/categories/").concat(n,"/products/").concat(r,"/metafields"),i);case 6:return u=e.sent,e.next=9,u.json();case 9:s=e.sent,l=s.error,h=s.result,l?O({loading:!1,result:{error:!0,result:h}}):([],b=[].concat(Kx(v.metaFields),[h]),m(Zx(Zx({},v),{},{metaFields:b})),O({loading:!1,result:{error:!1}}),c&&c(h),d(Dr.Success,y("METAFIELD_ADDED","Metafield added"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?m(Zx(Zx({},v),{},{metaFields:o})):w()}),[o]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,Wx({},e,{metaFieldsList:v,actionState:g,handleDeleteMetaField:j,handeAddMetaField:S})))};function iA(){return iA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iA.apply(this,arguments)}function uA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uA(Object(n),!0).forEach((function(t){cA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function fA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){lA(a,r,o,i,u,"next",e)}function u(e){lA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function pA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}aA.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},aA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var yA=function(e){var t=e.business,n=e.UIComponent,r=e.product,o=e.handleSuccessUpdate,s=e.setFormTaxState,c=e.formTaxState,l=e.taxes,f=e.setTaxes,p=e.fees,d=e.setFees,y=pA(rn(),1)[0],h=pA(yn(),1)[0],v=pA(zn(),1)[0],m=pA(Br(),2)[1].showToast,b=pA(Bn(),2)[1],g=pA(Object(i.useState)(r),2),O=g[0],w=g[1],j=pA(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),S=j[0],E=j[1],P=pA(Object(i.useState)({}),2),C=P[0],I=P[1],x=pA(Object(i.useState)({action:null,payload:null}),2),A=x[0],T=x[1],_=pA(Object(i.useState)({open:!1,content:[]}),2),k=_[0],D=_[1],U=function(){var e=fA(a.a.mark((function e(n){var r,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dr.Info,b("LOADING","Loading")),E(sA(sA({},S),{},{loading:!0})),r=sA({},n||S.changes),e.next=6,y.businesses(null==t?void 0:t.id).categories(null==O?void 0:O.category_id).products(null==O?void 0:O.id).save(r,{accessToken:h.token});case 6:i=e.sent,u=i.content,s=u.error,c=u.result,s?E(sA(sA({},S),{},{result:{error:!0,result:c},loading:!1})):(w(sA(sA({},O),c)),E(sA(sA({},S),{},{loading:!1,changes:{}})),o&&o(c),m(Dr.Success,b("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),E(sA(sA({},S),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=fA(a.a.mark((function e(t,n){var r,o,i,u,s,c,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(Dr.Info,b("LOADING","Loading")),!t){e.next=13;break}return e.next=4,fetch("".concat(y.root,"/").concat(n,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h.auth)},body:JSON.stringify(sA({},C))});case 4:return i=e.sent,e.next=7,i.json();case 7:u=e.sent,s=u.result,o=s,"taxes"===n?(f(sA(sA({},l),{},cA({},"id:".concat(s.id),{name:s.name,description:s.description,id:s.id,rate:s.rate,type:s.type}))),v.emit("tax_changed",{tax:{name:s.name,description:s.description,id:s.id,rate:s.rate,type:s.type}}),m(Dr.Success,b("PRODUCT_TAX_SAVED","Product tax saved"))):(d(sA(sA({},p),{},cA({},"id:".concat(s.id),{name:s.name,description:s.description,id:s.id,fixed:s.fixed,percentage:s.percentage}))),v.emit("fee_changed",{fee:{name:s.name,description:s.description,id:s.id,fixed:s.fixed,percentage:s.percentage}}),m(Dr.Success,b("PRODUCT_FEE_SAVED","Product fee saved"))),e.next=21;break;case 13:return e.next=15,fetch("".concat(y.root,"/").concat(n),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h.auth)},body:JSON.stringify(C)});case 15:return c=e.sent,e.next=18,c.json();case 18:g=e.sent,O=g.result,"taxes"===n?(f(sA(sA({},l),{},cA({},"id:".concat(O.id),{name:O.name,description:O.description,id:O.id,rate:O.rate,type:O.type}))),m(Dr.Success,b("PRODUCT_TAX_SAVED","Product tax saved"))):(d(sA(sA({},p),{},cA({},"id:".concat(O.id),{name:O.name,description:O.description,id:O.id,fixed:O.fixed,percentage:O.percentage}))),m(Dr.Success,b("PRODUCT_FEE_SAVED","Product fee saved")));case 21:if(null===(r=o)||void 0===r||!r.error){e.next=23;break}return e.abrupt("return");case 23:T({action:null,payload:null});case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=fA(a.a.mark((function e(t,n){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(sA(sA({},c),{},{loading:!0})),m(Dr.Info,b("LOADING","Loading")),!t){e.next=11;break}return e.next=5,fetch("".concat(y.root,"/").concat(n,"/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h.auth)}});case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,o.error||("taxes"===n?(i=l,v.emit("tax_deleted",{tax:i["id:".concat(t)],isRemove:!0}),delete i["id:".concat(t)],f(i),m(Dr.Success,b("PRODUCT_TAX_DELETED","Product tax deleted"))):(u=p,v.emit("fee_deleted",{tax:u["id:".concat(t)],isRemove:!0}),delete u["id:".concat(t)],d(u),m(Dr.Success,b("PRODUCT_FEE_DELETED","Product fee deleted"))));case 11:s(sA(sA({},c),{},{loading:!1}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w(r)}),[r]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,iA({},e,{productState:O,taxes:l,fees:p,formTaxState:c,taxToEdit:A,alertState:k,setAlertState:D,formState:S,handleClickProperty:function(e,t){E(sA(sA({},S),{},{changes:sA(sA({},S.changes),{},cA({},e,t))}))},handleChangeTax:function(e,t){I(sA(sA({},C),{},cA({},e,t)))},setTaxToEdit:T,handleSaveTax:L,handleDeleteTax:B,handleUpdateClick:U})))};function hA(){return hA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hA.apply(this,arguments)}function vA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vA(Object(n),!0).forEach((function(t){bA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function OA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}yA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},yA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jA=function(e){var t=e.UIComponent,n=e.businessId,r=e.productId,o=OA(rn(),1)[0],s=OA(yn(),1)[0].token,c=OA(Object(i.useState)({reviews:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(mA(mA({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/business/").concat(n,"/product_reviews/").concat(r,"/reviews"),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(u=e.sent).error?f(mA(mA({},l),{},{loading:!1,error:u.error})):f(mA(mA({},l),{},{loading:!1,reviews:u.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(mA(mA({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){gA(a,r,o,i,u,"next",e)}function u(e){gA(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,hA({},e,{productReviewList:l})))};function SA(){return SA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SA.apply(this,arguments)}function EA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return PA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}jA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var CA=function(e){var t=e.UIComponent,n=e.slug,r=e.categoryId,o=e.productId,a=e.defaultUrl,s=EA(Object(i.useState)(!1),2),c=s[0],l=s[1],f=a||"".concat(window.location.origin,"/store/").concat(n,"?category=").concat(r,"&product=").concat(o);Object(i.useEffect)((function(){var e;window.document.getElementById("addthis_widget")||((e=document.createElement("script")).type="text/javascript",e.src="https://static.addtoany.com/menu/page.js",e.async=!0,e.defer=!0,e.id="addthis_widget",document.body.appendChild(e))}),[]);return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,SA({},e,{updateShowValue:function(e){l(e),e&&window.a2a&&window.a2a.init()},showShareButton:c,urlToShare:f})))};function IA(){return IA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IA.apply(this,arguments)}function xA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function AA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){xA(a,r,o,i,u,"next",e)}function u(e){xA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function TA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TA(Object(n),!0).forEach((function(t){kA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return UA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}CA.propTypes={UIComponent:c.a.elementType,slug:c.a.string,categoryId:c.a.number,productId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element)},CA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var LA=function(e){var t,n=e.UIComponent,r=e.handleSuccessUpdate,o=e.handleSuccessDelete,s=e.handleSuccessAdd,c=DA(rn(),1)[0],l=DA(yn(),1)[0].token,f=DA(Br(),2)[1].showToast,p=DA(Bn(),2)[1],d=DA(Object(i.useState)({tag:null!==(t=e.tag)&&void 0!==t?t:null}),2),y=d[0],h=d[1],v=DA(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e=AA(a.a.mark((function e(){var t,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),b(_A(_A({},m),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(m.changes)},e.next=6,fetch("".concat(c.root,"/tags/").concat(y.tag.id),t);case 6:return n=e.sent,e.next=9,n.json();case 9:(o=e.sent).error?b(_A(_A({},m),{},{loading:!1,error:o.result})):(h({tag:_A(_A({},y.tag),o.result)}),b({loading:!1,changes:{},error:null}),r&&r(o.result),f(Dr.Success,p("PRODUCT_TAG_SAVED","Product tag saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(_A(_A({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var t=AA(a.a.mark((function t(){var n,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Dr.Info,p("LOADING","Loading")),b(_A(_A({},m),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(m.changes)},t.next=6,fetch("".concat(c.root,"/tags"),n);case 6:return r=t.sent,t.next=9,r.json();case 9:(o=t.sent).error?b(_A(_A({},m),{},{loading:!1,error:o.result})):(b({loading:!1,changes:{},error:null}),s&&s(o.result),f(Dr.Success,p("PRODUCT_TAG_ADDED","Product tag added")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(_A(_A({},m),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=AA(a.a.mark((function t(){var n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Dr.Info,p("LOADING","Loading")),b(_A(_A({},m),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},t.next=6,fetch("".concat(c.root,"/tags/").concat(y.tag.id),n);case 6:return r=t.sent,t.next=9,r.json();case 9:(i=t.sent).error?b(_A(_A({},m),{},{loading:!1,error:i.result})):(b({loading:!1,changes:{},error:null}),o&&o(y.tag.id),f(Dr.Success,p("PRODUCT_TAG_DELETED","Product tag deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(_A(_A({},m),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var t;b({loading:!1,changes:{},error:null}),h({tag:null!==(t=e.tag)&&void 0!==t?t:null})}),[e.tag]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,IA({},e,{tagState:y,formState:m,handleChangeInput:function(e){b(_A(_A({},m),{},{changes:_A(_A({},m.changes),{},kA({},e.target.name,e.target.value))}))},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){b(_A(_A({},m),{},{changes:_A(_A({},m.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleUpdateProductTag:g,handleAddProductTag:O,handleDeleteProductTag:w,handleChangeItem:function(e){var t=_A(_A({},null==m?void 0:m.changes),e);b(_A(_A({},m),{},{changes:t}))}})))};function BA(){return BA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BA.apply(this,arguments)}function FA(e){return function(e){if(Array.isArray(e))return $A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qA(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RA(Object(n),!0).forEach((function(t){NA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function GA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){zA(a,r,o,i,u,"next",e)}function u(e){zA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function YA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||qA(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qA(e,t){if(e){if("string"==typeof e)return $A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$A(e,t):void 0}}function $A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}LA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},LA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var JA=function(e){var t=e.tags,n=e.businessId,r=e.product,o=e.UIComponent,s=e.handleSuccessProductUpdate,c=YA(rn(),1)[0],l=YA(yn(),1)[0].token,f=YA(Br(),2)[1].showToast,p=YA(Bn(),2)[1],d=YA(Object(i.useState)({loading:!1,tags:[],error:null}),2),y=d[0],h=d[1],v=YA(Object(i.useState)([]),2),m=v[0],b=v[1],g=YA(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=YA(Object(i.useState)(null),2),S=j[0],E=j[1],P=function(){var e=GA(a.a.mark((function e(){var t,n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(MA(MA({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},n=null,r=[],S&&r.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(S,"%"))}}),r.length&&(n={conditions:r,conector:"AND"}),o=n?"".concat(c.root,"/tags?where=").concat(JSON.stringify(n)):"".concat(c.root,"/tags"),e.next=10,fetch(o,t);case 10:return i=e.sent,e.next=13,i.json();case 13:(u=e.sent).error?h(MA(MA({},y),{},{loading:!1,error:u.result})):h(MA(MA({},y),{},{loading:!1,tags:u.result})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),h(MA(MA({},y),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=GA(a.a.mark((function e(t){var o,i,u,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),w({loading:!0,error:null}),o={tags:JSON.stringify(t)},e.next=6,c.businesses(n).categories(r.category_id).products(r.id).save(o,{accessToken:l});case 6:i=e.sent,u=i.content,d=u.error,y=u.result,d?w({loading:!1,error:y}):(w({loading:!1,error:null}),s&&s(y),f(Dr.Success,p("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=null==t?void 0:t.reduce((function(e,t){return[].concat(FA(e),[t.id])}),[]);b(e)}),[t]),Object(i.useEffect)((function(){P()}),[S]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,BA({},e,{tagsState:y,searchValue:S,onSearch:E,selectedTagIds:m,actionState:O,handleSuccessUpdate:function(e){var t=y.tags.map((function(t){return t.id===e.id?MA(MA({},t),e):t}));h(MA(MA({},y),{},{tags:t}))},handleSuccessDelete:function(e){var t=y.tags.filter((function(t){return t.id!==e}));h(MA(MA({},y),{},{tags:t}))},handleSuccessAdd:function(e){h(MA(MA({},y),{},{tags:[].concat(FA(y.tags),[e])}))},handleChangeProductTag:function(e,t){var n=[];n=e?[].concat(FA(m),[t]):m.filter((function(e){return e!==parseInt(t)})),b(n),C(n)},handleSelectNoneTags:function(){b([]),C([])},handleSelectAllTags:function(){var e,t=null===(e=y.tags)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(FA(e),[t.id])}),[]);b(t),C(t)}})))};function VA(){return VA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VA.apply(this,arguments)}JA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},JA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var HA=function(e){var t=e.hero,n=e.gallery,r=e.UIComponent;return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,VA({},e,{hero:t,gallery:n})))};function WA(){return WA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WA.apply(this,arguments)}function KA(e){return function(e){if(Array.isArray(e))return oT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ZA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){XA(a,r,o,i,u,"next",e)}function u(e){XA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function QA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QA(Object(n),!0).forEach((function(t){tT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||rT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rT(e,t){if(e){if("string"==typeof e)return oT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oT(e,t):void 0}}function oT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}HA.propTypes={UIComponent:c.a.elementType,hero:c.a.string,gallery:c.a.arrayOf(c.a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},HA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var aT=function(e){var t=e.business,n=e.product,r=e.ingredient,o=e.UIComponent,s=e.handleSuccessUpdate,c=nT(rn(),1)[0],l=nT(yn(),1)[0].token,f=nT(Br(),2)[1].showToast,p=nT(Bn(),2)[1],d=nT(Object(i.useState)({ingredient:r,loading:!1,error:null}),2),y=d[0],h=d[1],v=nT(Object(i.useState)({}),2),m=v[0],b=v[1],g=nT(Object(i.useState)(!1),2),O=g[0],w=g[1],j=function(){var r=ZA(a.a.mark((function r(){var o,i,u,d,v,g;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=eT(eT({},o={business_id:null==t?void 0:t.id,category_id:null==n?void 0:n.category_id,product_id:null==n?void 0:n.id}),m),f(Dr.Info,p("LOADING","Loading")),h(eT(eT({},y),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(o)},r.next=8,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==n?void 0:n.category_id,"/products/").concat(n.id,"/ingredients"),i);case 8:return u=r.sent,r.next=11,u.json();case 11:(d=r.sent).error||(b({}),h(eT(eT({},y),{},{loading:!1,ingredient:d.result})),v=n.ingredients?[].concat(KA(n.ingredients),[d.result]):[d.result],g=eT(eT({},n),{},{ingredients:v}),s&&s(g),f(Dr.Success,p("INGREDIENT_SAVED","Ingredient saved")),e.onClose&&e.onClose()),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),h(eT(eT({},y),{},{loading:!1,error:r.t0.message}));case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(){return r.apply(this,arguments)}}(),S=function(){var e=ZA(a.a.mark((function e(){var o,i,u,d,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=eT(eT({},o={business_id:null==t?void 0:t.id,category_id:null==n?void 0:n.category_id,product_id:null==n?void 0:n.id}),m),f(Dr.Info,p("LOADING","Loading")),h(eT(eT({},y),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(o)},e.next=8,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==n?void 0:n.category_id,"/products/").concat(n.id,"/ingredients/").concat(r.id),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(d=e.sent).error||(b({}),h(eT(eT({},y),{},{loading:!1,ingredient:d.result})),v=n.ingredients.filter((function(e){return e.id===r.id&&Object.assign(e,d.result),!0})),g=eT(eT({},n),{},{ingredients:v}),s&&s(g),f(Dr.Success,p("INGREDIENT_SAVED","Ingredient saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),h(eT(eT({},y),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var o=ZA(a.a.mark((function o(){var i,u,d,v,m;return a.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,f(Dr.Info,p("LOADING","Loading")),h(eT(eT({},y),{},{loading:!1})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},o.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==n?void 0:n.category_id,"/products/").concat(n.id,"/ingredients/").concat(r.id),i);case 6:return u=o.sent,o.next=9,u.json();case 9:(d=o.sent).error||(h(eT(eT({},y),{},{loading:!1,ingredient:d.result})),v=n.ingredients.filter((function(e){return e.id!==r.id})),m=eT(eT({},n),{},{ingredients:v}),s&&s(m),f(Dr.Success,p("INGREDIENT_DELETED","Ingredient deleted")),e.onClose&&e.onClose()),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0),h(eT(eT({},y),{},{loading:!1,error:o.t0.message}));case 16:case"end":return o.stop()}}),o,null,[[0,13]])})));return function(){return o.apply(this,arguments)}}();return Object(i.useEffect)((function(){b({}),h(eT(eT({},y),{},{ingredient:r})),w(!r)}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,WA({},e,{ingredientState:y,changesState:m,isAddMode:O,handleChangeInput:function(e){b(eT(eT({},m),{},tT({},e.target.name,e.target.value)))},handleDeleteIngredient:E,handleAddIngredient:j,handleUpdateIngredient:S})))};aT.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},aT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var iT=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function uT(){return uT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uT.apply(this,arguments)}function sT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sT(Object(n),!0).forEach((function(t){lT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}iT.propTypes={UIComponent:c.a.elementType,option:c.a.object.isRequired,error:c.a.bool},iT.defaultProps={error:!1};var fT=function(e){var t=e.UIComponent,n=e.balance,r=e.option,o=e.suboption,a=e.onChange,i=e.state.selected||e.state.quantity>0,s=0;i&&e.state.quantity&&e.state.quantity>0?s=e.state.quantity:i&&(s=1);var c=e.state.position||"whole",l=r.with_half_option&&o.half_price&&"whole"!==c?o.half_price:o.price,f={id:o.id,name:o.name,price:l,selected:i,quantity:s,position:c,total:l*s},p=function(e){a&&a(e,o,r)};return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,uT({},e,{state:f,increment:function(){r.limit_suboptions_by_max&&n===r.max||(r.limit_suboptions_by_max||f.quantity!==o.max)&&p(cT(cT({},f),{},{selected:0===f.quantity||f.selected,quantity:f.quantity+1,total:f.price*(f.quantity+1)}))},decrement:function(){0!==f.quantity&&p(cT(cT({},f),{},{selected:1!==f.quantity&&f.selected,quantity:f.quantity-1,total:f.price*(f.quantity-1)}))},changePosition:function(e){var t=r.with_half_option&&o.half_price&&"whole"!==e?o.half_price:o.price;p(cT(cT({},f),{},{position:e,price:t,total:t*f.quantity}))},toggleSelect:function(){!f.selected&&r.limit_suboptions_by_max&&n===r.max||p(cT(cT({},f),{},{quantity:f.selected?0:1,selected:!f.selected}))}})))};function pT(){return pT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pT.apply(this,arguments)}function dT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fT.propTypes={UIComponent:c.a.elementType,balance:c.a.number.isRequired,option:c.a.object.isRequired,suboption:c.a.object.isRequired,state:c.a.shape({selected:c.a.bool,quantity:c.a.number,position:c.a.string}).isRequired,onChange:c.a.func},fT.defaultProps={state:{},balance:0};var hT=function(e){var t=e.categories,n=e.UIComponent,r=dT(Object(i.useState)(t),2),o=r[0],a=r[1];return Object(i.useEffect)((function(){a(t.filter((function(e){return e.id})))}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,pT({},e,{categories:o})))};function vT(){return vT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vT.apply(this,arguments)}function mT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mT(Object(n),!0).forEach((function(t){gT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OT(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function wT(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){OT(a,r,o,i,u,"next",e)}function u(e){OT(a,r,o,i,u,"throw",e)}i(void 0)}))}}function jT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ST(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ST(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ST(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}hT.propTypes={UIComponent:c.a.elementType,productsList:c.a.object,categories:c.a.arrayOf(c.a.object),isAllCategory:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ET=function(e){var t=e.isSearchByName,n=e.isSearchByDescription,r=e.businessId,o=e.UIComponent,s=jT(rn(),1)[0],c=jT(vr(),1)[0],l=jT(Object(i.useState)(null),2),f=l[0],p=l[1],d=jT(Object(i.useState)(null),2),y=d[0],h=d[1],v=jT(Object(i.useState)({products:[],loading:!0,error:!1}),2),m=v[0],b=v[1],g=jT(Object(i.useState)([]),2),O=g[0],w=g[1],j=function(){var e=wT(a.a.mark((function e(){var o,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(bT(bT({},m),{},{loading:!0})),e.next=4,s.businesses(r).products().parameters({type:(null===(o=c.options)||void 0===o?void 0:o.type)||1}).get();case 4:i=e.sent,u=i.content.result,l=f||y?u.filter((function(e){return o=e.name,a=e.description,(!f||o.toLowerCase().includes(f.toLowerCase())&&t||a.toLowerCase().includes(f.toLowerCase())&&n)&&(r=e.category_id,!y||Number(r)===Number(y));var r,o,a})):u,b(bT(bT({},m),{},{loading:!1,products:l})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),b(bT(bT({},m),{},{loading:!1,error:e.t0}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=wT(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.businesses(r).categories().get();case 2:t=e.sent,n=t.content.result,w(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j()}),[f,y]),Object(i.useEffect)((function(){S()}),[]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,vT({},e,{categoryValue:!!y,categories:O,productsList:m,handlerClickCategory:function(e){return h(e)},handlerChangeSearch:function(e){return p(e)}})))};function PT(){return PT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PT.apply(this,arguments)}function CT(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function IT(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){CT(a,r,o,i,u,"next",e)}function u(e){CT(a,r,o,i,u,"throw",e)}i(void 0)}))}}function xT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xT(Object(n),!0).forEach((function(t){TT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function TT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _T(e){return function(e){if(Array.isArray(e))return UT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||DT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||DT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DT(e,t){if(e){if("string"==typeof e)return UT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?UT(e,t):void 0}}function UT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ET.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,isSearchByName:c.a.bool,isSearchByDescription:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ET.defaultProps={isSearchByName:!0,isSearchByDescription:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var LT=function(e){var t=e.UIComponent,n=e.propsToFetch,r=e.isSearchByName,o=e.user,s=kT(rn(),1)[0],c=kT(yn(),1)[0].token,l=kT(Object(i.useState)(null),2),f=l[0],p=l[1],d=kT(Object(i.useState)({loading:!1,businesses:[],result:{error:null}}),2),y=d[0],h=d[1],v=kT(Object(i.useState)({loading:!1,services:[],result:{error:null}}),2),m=v[0],b=v[1],g=kT(Object(i.useState)(),2),O=g[0],w=g[1],j=new RegExp(/^[A-Za-z0-9\s]+$/g),S=function(){var e=IT(a.a.mark((function e(){var t,o,i,u,c,l,p,d,v,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(AT(AT({},y),{},{loading:!0})),t=null,o=[],f&&(i=[],u=j.test(f),r&&i.push({attribute:"name",value:{condition:"ilike",value:u?encodeURI("%".concat(f,"%")):"%".concat(f,"%")}}),o.push({conector:"OR",conditions:i})),o.length&&(t={conditions:o,conector:"AND"}),c=t?s.businesses().asDashboard().select(n).where(t):s.businesses().asDashboard().select(n),e.next=9,c.get();case 9:l=e.sent,p=l.content,d=p.error,v=p.result,m=p.pagination,h(AT(AT({},y),{},d?{loading:!1,error:v}:{loading:!1,businesses:v,pagination:m})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),h(AT(AT({},y),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=IT(a.a.mark((function e(){var t,n,r,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(AT(AT({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},n="".concat(s.root,"/users/").concat(null==o?void 0:o.id,"/products"),e.next=6,fetch(n,t);case 6:return r=e.sent,e.next=9,r.json();case 9:i=e.sent,u=i.error,l=i.result,f=i.pagination,b(AT(AT({},m),{},u?{loading:!1,error:l}:{loading:!1,services:l,pagination:f})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),b(AT(AT({},m),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){E()}),[null==o?void 0:o.id]),Object(i.useEffect)((function(){S()}),[f]),Object(i.useEffect)((function(){var e,t;if(void 0===O&&(null==y||null===(e=y.businesses)||void 0===e?void 0:e.length)>0&&(null==m||null===(t=m.services)||void 0===t?void 0:t.length)>0){var n=[];y.businesses.forEach((function(e){null!=m&&m.services.reduce((function(e,t){return[].concat(_T(e),[t.business_id])}),[]).includes(e.id)&&n.push(e.id)})),w(n)}}),[null==y?void 0:y.businesses,null==m?void 0:m.services,O]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,PT({},e,{searchValue:f,businessIds:O,onSearch:p,businessList:y,userServiceList:m,handleChangeCheckBox:function(e){var t=[];t=null!=O&&O.includes(e)?O.filter((function(t){return t!==e})):O?[].concat(_T(O),[e]):[e],w(t)},handleUpdateBusinessIds:function(e){w(e)},handleUpdateServices:function(e){b(AT(AT({},m),{},{services:e}))}})))};function BT(){return BT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BT.apply(this,arguments)}function FT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FT(Object(n),!0).forEach((function(t){MT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function MT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NT(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return GT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}LT.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},LT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var YT=function(e){var t=e.UIComponent,n=e.user,r=e.handleSuccessUpdate,o=zT(rn(),1)[0],s=zT(Br(),2)[1].showToast,c=zT(Bn(),2)[1],l=zT(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(t){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(RT(RT({},f),{},{loading:!0})),s(Dr.Info,c("LOADING","Loading")),t&&(f.changes=RT(RT({},f.changes),t)),e.next=6,o.users(null==n?void 0:n.id).save(f.changes);case 6:i=e.sent,p(RT(RT({},f),{},{changes:i.content.error?f.changes:{},result:i.content,loading:!1})),i.content.error||(s(Dr.Success,c("SCHEDULE_UPDATED","Schedule updated")),r&&r(i.content.result)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p(RT(RT({},f),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){NT(a,r,o,i,u,"next",e)}function u(e){NT(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,BT({},e,{formState:f,handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=RT(RT({},n),{},MT({},e.name,e.value))})):n=MT({},e.target.name,e.target.value),p(RT(RT({},f),{},{changes:RT(RT({},f.changes),n)}))},handleChangeItem:function(e){var t=RT(RT({},f.changes),e);p(RT(RT({},f),{},{changes:t}))},handleRemoveKey:function(e){var t=RT({},null==f?void 0:f.changes);delete t[e],p(RT(RT({},f),{},{changes:t}))},handleUpdateClick:d})))};function qT(){return qT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qT.apply(this,arguments)}function $T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$T(Object(n),!0).forEach((function(t){VT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HT(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function WT(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){HT(a,r,o,i,u,"next",e)}function u(e){HT(a,r,o,i,u,"throw",e)}i(void 0)}))}}function KT(e){return function(e){if(Array.isArray(e))return QT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ZT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ZT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZT(e,t){if(e){if("string"==typeof e)return QT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QT(e,t):void 0}}function QT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}YT.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},YT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var e_=function(e){var t=e.UIComponent,n=e.businessId,r=e.services,o=e.userId,s=e.handleUpdateServices,c=e.propsToFetch,l=XT(rn(),1)[0],f=XT(Bn(),2)[1],p=XT(Br(),2)[1].showToast,d=XT(yn(),1)[0].token,y=XT(Object(i.useState)([]),2),h=y[0],v=y[1],m=XT(Object(i.useState)([]),2),b=m[0],g=m[1],O=XT(Object(i.useState)([]),2),w=O[0],j=O[1],S=XT(Object(i.useState)({loading:!1,result:{error:!1}}),2),E=S[0],P=S[1],C=XT(Object(i.useState)({loading:!0,business:{},error:null}),2),I=C[0],x=C[1],A=function(){var e=WT(a.a.mark((function e(){var t,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(JT(JT({},I),{},{loading:!0})),e.next=4,l.businesses(n).asDashboard().select(c).get();case 4:t=e.sent,r=t.content,o=r.result,i=r.error,x(JT(JT({},I),{},i?{error:o,loading:!1}:{business:o,loading:!1,error:null})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),x(JT(JT({},I),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=WT(a.a.mark((function e(t){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(JT(JT({},E),{},{loading:!0})),p(Dr.Info,f("LOADING","Loading")),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(t)},e.next=6,fetch("".concat(l.root,"/users/").concat(o,"/products"),n);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(u=e.sent)&&u.error?P(JT(JT({},E),{},{result:u,loading:!1})):(P(JT(JT({},E),{},{result:{error:!1},loading:!1})),s&&s([].concat(KT(r),[u.result])),p(Dr.Success,f("SERVICE_ADDED","Service added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),P(JT(JT({},E),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=WT(a.a.mark((function e(t){var n,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(JT(JT({},E),{},{loading:!0})),p(Dr.Info,f("LOADING","Loading")),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},e.next=6,fetch("".concat(l.root,"/users/").concat(o,"/products/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(u=e.sent)&&u.error?P(JT(JT({},E),{},{result:u,loading:!1})):(P(JT(JT({},E),{},{result:{error:!1},loading:!1})),s&&(c=r.filter((function(e){return e.id!==t})),s(c)),p(Dr.Success,f("SERVICE_DELETED","Service deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),P(JT(JT({},E),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=[];if((null==r?void 0:r.length)>0){e=r.reduce((function(e,t){return[].concat(KT(e),[t.product_id])}),[]),g(e);var t=r.reduce((function(e,t){return[].concat(KT(e),[t.product])}),[]);j(t)}else g([]),j([]);!function(e){var t,n;if(null!=I&&null!==(t=I.business)&&void 0!==t&&null!==(n=t.categories)&&void 0!==n&&n.length){var r,o=[];v(o),function t(n){return(null==n?void 0:n.length)>0&&(null==n?void 0:n.forEach((function(n){var r,a,i=[],u=null===(r=n.products)||void 0===r?void 0:r.reduce((function(e,t){return[].concat(KT(e),[t.id])}),[]);i=[].concat(KT(i),KT(u)),null!=n&&null!==(a=n.subcategories)&&void 0!==a&&a.length&&n.subcategories.forEach((function e(t){var n,r=null===(n=t.products)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(KT(e),[t.id])}),[]);i=[].concat(KT(i),KT(r)),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),o.push({id:n.id,name:n.name,productIds:i,isChecked:0!==i.length&&i.every((function(t){return e.includes(t)}))}),t(n.subcategories)})))}(null==I||null===(r=I.business)||void 0===r?void 0:r.categories)}}(e)}),[r,null==I?void 0:I.business]),Object(i.useEffect)((function(){A()}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,qT({},e,{selectedProducts:w,subCategoriesList:h,selectedProductsIds:b,setSelectedProducts:j,setSelectedProductsIds:g,handleCreateService:function(e){T({product_id:e,business_id:n,user_id:o})},handleDeleteService:function(e){var t=r.find((function(t){return t.product_id===e}));_(t.id)},businessState:I,actionState:E})))};function t_(){return t_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t_.apply(this,arguments)}function n_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?n_(Object(n),!0).forEach((function(t){o_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a_(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function i_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},e_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var s_=function(e){var t=e.UIComponent,n=e.token,r=e.allowedLevels,o=i_(rn(),1)[0],s=i_(yn(),2)[1].login,c=i_(zn(),1)[0],l=i_(Object(i.useState)({loading:!0,user:{},error:null}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(){var t,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(r_(r_({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},e.next=5,fetch("".concat(o.root,"/users/me"),t);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,c=u.error,l=u.result,c?(p(r_(r_({},f),{},{loading:!1,error:l})),y()):r.includes(l.level)?s({user:l,token:n,project:null==o?void 0:o.project}):y(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),p(r_(r_({},f),{},{loading:!1,error:[e.t0.message]})),y();case 18:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){a_(a,r,o,i,u,"next",e)}function u(e){a_(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),y=function(){c.emit("go_to_page",{page:"login"})};return Object(i.useEffect)((function(){null!=o&&o.project&&d()}),[null==o?void 0:o.project]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,t_({},e,{userState:f})))};function c_(){return c_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c_.apply(this,arguments)}function l_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}s_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},s_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var f_=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).handleExpired=t.handleExpired.bind(l_(t)),t.handleErrored=t.handleErrored.bind(l_(t)),t.handleChange=t.handleChange.bind(l_(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(l_(t)),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getValue=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this.props.grecaptcha.getResponse(this._widgetId):null},o.getWidgetId=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this._widgetId:null},o.execute=function(){var e=this.props.grecaptcha;if(e&&void 0!==this._widgetId)return e.execute(this._widgetId);this._executeRequested=!0},o.executeAsync=function(){var e=this;return new Promise((function(t,n){e.executionResolve=t,e.executionReject=n,e.execute()}))},o.reset=function(){this.props.grecaptcha&&void 0!==this._widgetId&&this.props.grecaptcha.reset(this._widgetId)},o.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},o.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},o.handleChange=function(e){this.props.onChange&&this.props.onChange(e),this.executionResolve&&(this.executionResolve(e),delete this.executionReject,delete this.executionResolve)},o.explicitRender=function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&void 0===this._widgetId){var e=document.createElement("div");this._widgetId=this.props.grecaptcha.render(e,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(e)}this._executeRequested&&this.props.grecaptcha&&void 0!==this._widgetId&&(this._executeRequested=!1,this.execute())},o.componentDidMount=function(){this.explicitRender()},o.componentDidUpdate=function(){this.explicitRender()},o.componentWillUnmount=function(){void 0!==this._widgetId&&(this.delayOfCaptchaIframeRemoving(),this.reset())},o.delayOfCaptchaIframeRemoving=function(){var e=document.createElement("div");for(document.body.appendChild(e),e.style.display="none";this.captcha.firstChild;)e.appendChild(this.captcha.firstChild);setTimeout((function(){document.body.removeChild(e)}),5e3)},o.handleRecaptchaRef=function(e){this.captcha=e},o.render=function(){var e=this.props,t=(e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl,function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"]));return u.a.createElement("div",c_({},t,{ref:this.handleRecaptchaRef}))},r}(u.a.Component);f_.displayName="ReCAPTCHA",f_.propTypes={sitekey:c.a.string.isRequired,onChange:c.a.func,grecaptcha:c.a.object,theme:c.a.oneOf(["dark","light"]),type:c.a.oneOf(["image","audio"]),tabindex:c.a.number,onExpired:c.a.func,onErrored:c.a.func,size:c.a.oneOf(["compact","normal","invisible"]),stoken:c.a.string,hl:c.a.string,badge:c.a.oneOf(["bottomright","bottomleft","inline"])},f_.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var p_=n(36),d_=n.n(p_);function y_(){return y_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y_.apply(this,arguments)}var h_={},v_=0;var m_="onloadcallback";var b_,g_,O_=(b_=function(){return"https://"+(("undefined"!=typeof window&&window.recaptchaOptions||{}).useRecaptchaNet?"recaptcha.net":"www.google.com")+"/recaptcha/api.js?onload="+m_+"&render=explicit"},g_=(g_={callbackName:m_,globalName:"grecaptcha"})||{},function(e){var t=e.displayName||e.name||"Component",n=function(t){var n,r;function o(e,n){var r;return(r=t.call(this,e,n)||this).state={},r.__scriptURL="",r}r=t,(n=o).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var a=o.prototype;return a.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+v_++),this.__scriptLoaderID},a.setupScriptURL=function(){return this.__scriptURL="function"==typeof b_?b_():b_,this.__scriptURL},a.asyncScriptLoaderHandleLoad=function(e){var t=this;this.setState(e,(function(){return t.props.asyncScriptOnLoad&&t.props.asyncScriptOnLoad(t.state)}))},a.asyncScriptLoaderTriggerOnScriptLoaded=function(){var e=h_[this.__scriptURL];if(!e||!e.loaded)throw new Error("Script is not loaded.");for(var t in e.observers)e.observers[t](e);delete window[g_.callbackName]},a.componentDidMount=function(){var e=this,t=this.setupScriptURL(),n=this.asyncScriptLoaderGetScriptLoaderID(),r=g_,o=r.globalName,a=r.callbackName,i=r.scriptId;if(o&&void 0!==window[o]&&(h_[t]={loaded:!0,observers:{}}),h_[t]){var u=h_[t];return u&&(u.loaded||u.errored)?void this.asyncScriptLoaderHandleLoad(u):void(u.observers[n]=function(t){return e.asyncScriptLoaderHandleLoad(t)})}var s={};s[n]=function(t){return e.asyncScriptLoaderHandleLoad(t)},h_[t]={loaded:!1,observers:s};var c=document.createElement("script");for(var l in c.src=t,c.async=!0,g_.attributes)c.setAttribute(l,g_.attributes[l]);i&&(c.id=i);var f=function(e){if(h_[t]){var n=h_[t].observers;for(var r in n)e(n[r])&&delete n[r]}};a&&"undefined"!=typeof window&&(window[a]=function(){return e.asyncScriptLoaderTriggerOnScriptLoaded()}),c.onload=function(){var e=h_[t];e&&(e.loaded=!0,f((function(t){return!a&&(t(e),!0)})))},c.onerror=function(){var e=h_[t];e&&(e.errored=!0,f((function(t){return t(e),!0})))},document.body.appendChild(c)},a.componentWillUnmount=function(){var e=this.__scriptURL;if(!0===g_.removeOnUnmount)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n+=1)t[n].src.indexOf(e)>-1&&t[n].parentNode&&t[n].parentNode.removeChild(t[n]);var r=h_[e];r&&(delete r.observers[this.asyncScriptLoaderGetScriptLoaderID()],!0===g_.removeOnUnmount&&delete h_[e])},a.render=function(){var t=g_.globalName,n=this.props,r=(n.asyncScriptOnLoad,n.forwardedRef),o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(n,["asyncScriptOnLoad","forwardedRef"]);return t&&"undefined"!=typeof window&&(o[t]=void 0!==window[t]?window[t]:void 0),o.ref=r,Object(i.createElement)(e,o)},o}(i.Component),r=Object(i.forwardRef)((function(e,t){return Object(i.createElement)(n,y_({},e,{forwardedRef:t}))}));return r.displayName="AsyncScriptLoader("+t+")",r.propTypes={asyncScriptOnLoad:c.a.func},d_()(r,e)})(f_),w_=O_;function j_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E_=function(e){var t=e.handleReCaptcha,n=j_(tr(),1)[0].configs,r=j_(Object(i.useState)(null),2),o=r[0],a=r[1];return Object(i.useEffect)((function(){var e;n&&Object.keys(n).length>0&&null!=n&&null!==(e=n.security_recaptcha_site_key)&&void 0!==e&&e.value?a(null==n?void 0:n.security_recaptcha_site_key.value):(a(null),console.log("ReCaptcha component: the config doesn't have recaptcha site key"))}),[n]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(w_,{key:o,sitekey:o,onChange:function(e){t(e)},onErrored:function(e){return console.log(e)}}))};function P_(){return P_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P_.apply(this,arguments)}function C_(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function I_(e){return function(e){if(Array.isArray(e))return D_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x_(Object(n),!0).forEach((function(t){T_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function __(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||k_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k_(e,t){if(e){if("string"==typeof e)return D_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D_(e,t):void 0}}function D_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}E_.propTypes={handleReCaptcha:c.a.func};var U_=function(e){var t=e.UIComponent,n=__(rn(),1)[0],r=__(yn(),1)[0],o=r.token,s=r.loading,c=__(Object(i.useState)({loading:!0,error:null,loyaltyPlans:[],pagination:null}),2),l=c[0],f=c[1],p=__(Object(i.useState)(null),2),d=p[0],y=p[1],h=function(){var e,t=(e=a.a.mark((function e(){var t,r,i,u,c,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(A_(A_({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},r="".concat(n.root,"/loyalty_plans"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,c=u.error,p=u.result,d=u.pagination,f(A_(A_({},l),{},c?{loading:!1,error:p}:{loading:!1,loyaltyPlans:p,pagination:d})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),f(A_(A_({},l),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){C_(a,r,o,i,u,"next",e)}function u(e){C_(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){h()}),[]),Object(i.useEffect)((function(){var e;if(0!==(null==l||null===(e=l.loyaltyPlans)||void 0===e?void 0:e.length)){var t=null==l?void 0:l.loyaltyPlans.find((function(e){return"credit_point"===e.type}));t&&y(A_({},t))}}),[null==l?void 0:l.loyaltyPlans]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,P_({},e,{loyaltyPlanList:l,pointWallet:d,handleUpdateWalletBusiness:function(e){var t=null==d?void 0:d.businesses.map((function(t){return t.id===e.id?A_(A_({},t),e):t}));y(A_(A_({},d),{},{businesses:t}))},handleUpdatePointsWallet:function(e){y(A_({},e))},handleAddWalletBusiness:function(e){var t=[].concat(I_(null==d?void 0:d.businesses),[e]);y(A_(A_({},d),{},{businesses:t}))},handleDeleteWalletBusiness:function(e){var t,n=null==d||null===(t=d.businesses)||void 0===t?void 0:t.filter((function(t){return t.id!==e.id}));y(A_(A_({},d),{},{businesses:n}))}})))};function L_(){return L_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L_.apply(this,arguments)}function B_(e){return function(e){if(Array.isArray(e))return q_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F_(Object(n),!0).forEach((function(t){M_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N_(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function z_(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){N_(a,r,o,i,u,"next",e)}function u(e){N_(a,r,o,i,u,"throw",e)}i(void 0)}))}}function G_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Y_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y_(e,t){if(e){if("string"==typeof e)return q_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q_(e,t):void 0}}function q_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}U_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},U_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $_=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.isSearchByName,s=e.isSearchByDescription,c=G_(rn(),1)[0],l=G_(yn(),1)[0].token,f=G_(Br(),2)[1].showToast,p=G_(Bn(),2)[1],d=G_(Object(i.useState)(null),2),y=d[0],h=d[1],v=G_(Object(i.useState)({actions:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=G_(Object(i.useState)({clear:!1,changes:{}}),2),O=g[0],w=g[1],j=G_(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),S=j[0],E=j[1],P=function(){var e=z_(a.a.mark((function e(t,n){var r,i,u,f,p,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(R_(R_({},m),{},{loading:!0})),r=null,i=[],y&&(u=[],o&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(y,"%"))}}),s&&u.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(y,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(r={conditions:i,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},p=r?"".concat(c.root,"/event_rules?page=").concat(t,"&page_size=").concat(n,"&where=").concat(JSON.stringify(r)):"".concat(c.root,"/event_rules?page=").concat(t,"&page_size=").concat(n),e.next=10,fetch(p,f);case 10:return d=e.sent,e.next=13,d.json();case 13:(h=e.sent).error?b(R_(R_({},m),{},{loading:!1,error:h.result})):(b({loading:!1,actions:h.result,error:null}),E(R_(R_({},S),{},{currentPage:h.pagination.current_page,totalPages:h.pagination.total_pages,totalItems:h.pagination.total,from:h.pagination.from,to:h.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),b(R_(R_({},m),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=z_(a.a.mark((function e(t,n){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=5,fetch("".concat(c.root,"/event_rules/").concat(t),r);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error?b(R_(R_({},m),{},{error:i.result})):(I&&(u=null==m?void 0:m.actions.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0})),I(u)),f(Dr.Success,p("RECOVERY_ACTION_SAVED","Recovery action saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),b(R_(R_({},m),{},{error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){b(R_(R_({},m),{},{actions:e}))};return Object(i.useEffect)((function(){m.loading||P(1,S.pageSize)}),[y]),Object(i.useEffect)((function(){(Object.keys(null==O?void 0:O.changes).length>0||O.clear)&&!m.loading&&P(1,S.pageSize)}),[O]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,L_({},e,{searchValue:y,paginationProps:S,recoveryActionList:m,getRecoveryList:P,setFilterValues:w,setPaginationProps:E,handleChangeSearch:function(e){h(e)},handleUpdateAction:C,handleSuccessAddRecoveryAction:function(e){var t=[].concat(B_(m.actions),[e]);E(R_(R_({},S),{},{to:(null==S?void 0:S.to)+1,total:(null==S?void 0:S.total)+1})),b(R_(R_({},m),{},{actions:t}))},handleSuccessUpdateRecoveryAction:I,handleSuccessDeleteRecoveryAction:function(e){var t=m.actions.filter((function(t){return t.id!==e}));E(R_(R_({},S),{},{total:(null==S?void 0:S.total)-1})),b(R_(R_({},m),{},{actions:t}))}})))};function J_(){return J_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J_.apply(this,arguments)}function V_(e){return V_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V_(e)}function H_(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function W_(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){H_(a,r,o,i,u,"next",e)}function u(e){H_(a,r,o,i,u,"throw",e)}i(void 0)}))}}function K_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K_(Object(n),!0).forEach((function(t){Z_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ek(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ek(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ek(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}$_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var tk=function(e){var t=e.action,n=e.recoveryActionList,r=e.UIComponent,o=e.handleSuccessUpdateRecoveryAction,s=e.handleSuccessAddRecoveryAction,c=e.handleSuccessDeleteRecoveryAction,l=Q_(Bn(),2)[1],f=Q_(rn(),1)[0],p=Q_(yn(),1)[0].token,d=Q_(Br(),2)[1].showToast,y=Q_(Object(i.useState)({action:t,loading:!1,error:null}),2),h=y[0],v=y[1],m=Q_(Object(i.useState)({loading:!1,changes:{}}),2),b=m[0],g=m[1],O=Q_(Object(i.useState)({loading:!1,error:null}),2),w=O[0],j=O[1],S=Q_(Object(i.useState)(!1),2),E=S[0],P=S[1],C=function(){return g({loading:!1,changes:{}})},I=function(){var e=W_(a.a.mark((function e(){var r,i,u,s,c,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,d(Dr.Info,l("LOADING","Loading")),j({loading:!0,error:null}),r=X_({},null==b?void 0:b.changes))("object"===V_(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(r)},e.next=8,fetch("".concat(f.root,"/event_rules/").concat(t.id),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?j({loading:!1,error:c.result}):(v(X_(X_({},h),{},{action:c.result})),j({loading:!1,error:null}),o&&(y=null==n?void 0:n.actions.filter((function(e){return e.id===t.id&&Object.assign(e,c.result),!0})),o(y)),C(),d(Dr.Success,l("RECOVERY_ACTION_SAVED","Recovery action saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),j({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var t=W_(a.a.mark((function t(){var n,r,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(Dr.Info,l("LOADING","Loading")),j({loading:!0,error:null}),n=X_({},null==b?void 0:b.changes),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(n)},t.next=7,fetch("".concat(f.root,"/event_rules"),r);case 7:return o=t.sent,t.next=10,o.json();case 10:(i=t.sent).error?j({loading:!1,error:i.result}):(j({error:null,loading:!1}),s&&s(i.result),d(Dr.Success,l("RECOVERY_ACTION_ADDED","Recovery action added")),e.onClose&&e.onClose()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),j({loading:!1,error:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var n=W_(a.a.mark((function n(){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d(Dr.Info,l("LOADING","Loading")),j(X_(X_({},w),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},n.next=6,fetch("".concat(f.root,"/event_rules/").concat(t.id),r);case 6:return o=n.sent,n.next=9,o.json();case 9:n.sent.error||(c&&c(t.id),d(Dr.Success,l("RECOVERY_ACTION_DELETED","Recovery action deleted")),e.onClose&&e.onClose()),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),j({loading:!1,error:[n.t0.message]});case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){0===Object.keys(t).length?(P(!0),g(X_(X_({},b),{},{changes:{enabled:!0,launch_type:"times",name:"",type:"abandoned_cart"}}))):(P(!1),C()),v(X_(X_({},h),{},{action:t}))}),[t]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,J_({},e,{isAddMode:E,recoveryActionState:h,formState:b,actionState:w,handleChangeItem:function(e){g(X_(X_({},b),{},{changes:X_(X_({},b.changes),e)}))},handleChangeInput:function(e){g(X_(X_({},b),{},{changes:X_(X_({},b.changes),{},Z_({},e.target.name,e.target.value))}))},handleAddRecoveryAction:x,handleDeleteRecoveryAction:A,handleUpdateClick:I,handleRemoveKey:function(e){var t=X_({},null==b?void 0:b.changes);delete t[e],g(X_(X_({},b),{},{changes:t}))}})))};function nk(){return nk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nk.apply(this,arguments)}function rk(e){return function(e){if(Array.isArray(e))return fk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ok(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ak(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ok(Object(n),!0).forEach((function(t){ik(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ok(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ik(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uk(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function sk(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){uk(a,r,o,i,u,"next",e)}function u(e){uk(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ck(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||lk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lk(e,t){if(e){if("string"==typeof e)return fk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fk(e,t):void 0}}function fk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}tk.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},tk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var pk=function(e){var t=e.action,n=e.UIComponent,r=ck(rn(),1)[0],o=ck(Bn(),2)[1],s=ck(Br(),2)[1].showToast,c=ck(yn(),1)[0].token,l=ck(Object(i.useState)({loading:!1,notifications:[],error:null}),2),f=l[0],p=l[1],d=ck(Object(i.useState)({loading:!1,error:null}),2),y=d[0],h=d[1],v=function(){var e=sk(a.a.mark((function e(){var n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(ak(ak({},f),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},e.next=5,fetch("".concat(r.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels"),n);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error?p(ak(ak({},f),{},{loading:!1,error:i.result})):p({loading:!1,notifications:i.result,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(ak(ak({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),m=function(e){var t=f.notifications.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));p(ak(ak({},f),{},{notifications:t}))},b=function(){var e=sk(a.a.mark((function e(n,i){var u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,o("LOADING","Loading")),h(ak(ak({},y),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(i)},e.next=6,fetch("".concat(r.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels/").concat(n),u);case 6:return l=e.sent,e.next=9,l.json();case 9:(f=e.sent).error?h({loading:!1,error:f.result}):(h({loading:!1,error:null}),m&&m(f.result),s(Dr.Success,o("NOTIFICATION_SAVED","Notification saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h({loading:!1,error:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){v()}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,nk({},e,{actionState:y,notificationListState:f,handleAddNotifications:function(e){var t=[].concat(rk(f.notifications),[e]);p(ak(ak({},f),{},{notifications:t}))},handleUpdateNotifications:m,handleDeleteNotifications:function(e){var t=f.notifications.filter((function(t){return t.id!==e.id}));p(ak(ak({},f),{},{notifications:t}))},handleUpdateClick:b})))};function dk(){return dk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dk.apply(this,arguments)}function yk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}pk.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},pk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var vk=function(e){var t=e.UIComponent,n=yk(Object(i.useState)(null),2),r=n[0],o=n[1],a=yk(vr(null),1)[0];return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,dk({},e,{orderState:a,optionSelected:r,handleClickOption:function(e){o(e===r?null:e)}})))};function mk(){return mk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mk.apply(this,arguments)}function bk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bk(Object(n),!0).forEach((function(t){Ok(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ok(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wk(e){return function(e){if(Array.isArray(e))return Ek(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Sk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Sk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sk(e,t){if(e){if("string"==typeof e)return Ek(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ek(e,t):void 0}}function Ek(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vk.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Pk=function(e){var t=e.UIComponent,n=e.scheduleList,r=e.handleChangeScheduleState,o=jk(Object(i.useState)([]),2),a=o[0],s=o[1],c=jk(Object(i.useState)(!1),2),l=c[0],f=c[1],p=jk(Object(i.useState)(!1),2),d=p[0],y=p[1],h=jk(Object(i.useState)({open:{hour:0,minute:0},close:{hour:23,minute:59}}),2),v=h[0],m=h[1],b=jk(Object(i.useState)({}),2),g=b[0],O=b[1],w=jk(Object(i.useState)([]),2),j=w[0],S=w[1],E=function(e){return 60*e.hour+e.minute},P=function(e,t,n){for(var r=60*t.open.hour+t.open.minute,o=60*t.close.hour+t.close.minute,a=0;a<e.length;a++)if(a!==n){var i=60*e[a].open.hour+15*parseInt(e[a].open.minute/15),u=60*e[a].close.hour+15*parseInt(e[a].close.minute/15);if(r<i&&o>u)return!0;if(r<i&&o>i)return!0;if(r>i&&o<u)return!0;if(r<u&&o>u)return!0;if(o===u||r===i)return!0}return!1};return Object(i.useEffect)((function(){0!==a.length&&r(wk(a))}),[a]),Object(i.useEffect)((function(){if(n)s(wk(n));else{for(var e=[],t=0;t<7;t++)e.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});s(e)}}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,mk({},e,{scheduleState:a,isConflict:l,setIsConflict:f,isTimeChangeError:d,addScheduleTime:v,openAddSchedule:g,setIsTimeChangeError:y,handleEnabledSchedule:function(e,t){var n=wk(a);n[e].enabled=t,s(n)},handleChangeScheduleTime:function(e,t,n,r){var o,i=wk(a),u=wk(i[t].lapses),c=parseInt(e.split(":")[0]),l=parseInt(e.split(":")[1]),p=!1;(r?(p=E({hour:c,minute:l})>=E(u[n].close))?y(!0):o={open:{hour:c,minute:l},close:u[n].close}:(p=E(u[n].open)>=E({hour:c,minute:l}))?y(!0):o={open:u[n].open,close:{hour:c,minute:l}},p)||(P(u,o,n)?f(!0):(i[t].lapses[n]=o,i[t].lapses.sort((function(e,t){return E(e.open)-E(t.open)})),s(i)))},handleDeleteSchedule:function(e,t){var n=wk(a);n[e].lapses.splice(t,1),s(n)},handleOpenAddSchedule:function(e){m({open:{hour:0,minute:0},close:{hour:23,minute:59}}),O(Ok({},e,!0))},handleChangeAddScheduleTime:function(e,t){var n=parseInt(e.split(":")[0]),r=parseInt(e.split(":")[1]);t?E({hour:n,minute:r})>=E(v.close)?y(!0):m(gk(gk({},v),{},{open:{hour:n,minute:r}})):E(v.open)>=E({hour:n,minute:r})?y(!0):m(gk(gk({},v),{},{close:{hour:n,minute:r}}))},handleAddSchedule:function(e){var t=wk(a),n=wk(t[e].lapses);P(n,v,null)?f(!0):(t[e].lapses.push(v),t[e].lapses.sort((function(e,t){return E(e.open)-E(t.open)})),s(t),O(Ok({},e,!1)))},selectedCopyDays:j,cleanSelectedCopyDays:function(){return S([])},handleSelectCopyTimes:function(e){var t=j.includes(e)?j.filter((function(t){return t!==e})):[].concat(wk(j),[e]);S(t)},handleApplyScheduleCopyTimes:function(e){var t=a.map((function(t,n){if(j.includes(n)){var r=wk(a[e].lapses);return{enabled:a[e].enabled,lapses:r}}return t}));s(t)}})))};function Ck(){return Ck=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ck.apply(this,arguments)}function Ik(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ik(Object(n),!0).forEach((function(t){Ak(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ik(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ak(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tk(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function _k(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Tk(a,r,o,i,u,"next",e)}function u(e){Tk(a,r,o,i,u,"throw",e)}i(void 0)}))}}function kk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Pk.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Pk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Uk=function(e){var t=e.UIComponent,n=e.useChekoutFileds,r=e.handleButtonSignupClick,o=e.handleSuccessSignup,s=e.externalPhoneNumber,c={},l=kk(rn(),1)[0],f=kk(yn(),2)[1].login,p=kk(Jr(),1)[0],d=kk(Object(i.useState)({loading:!1,result:{error:!1}}),2),y=d[0],h=d[1],v=kk(Object(i.useState)({email:"",cellphone:s||"",password:""}),2),m=v[0],b=v[1],g=kk(Object(i.useState)({loading:!1,result:{error:!1}}),2),O=g[0],w=g[1],j=kk(Object(i.useState)({loading:!1,result:{error:!1}}),2),S=j[0],E=j[1],P=function(){var e=_k(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(xk(xk({},y),{},{loading:!0})),n={},c.signup=n,r=t||m,e.next=7,l.users().save(r,{cancelToken:n});case 7:i=e.sent,h({result:i.content,loading:!1}),i.content.error||o&&o(i.content.result),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&h({result:{error:!0,result:e.t0.message},loading:!1});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=_k(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(xk(xk({},O),{},{loading:!0})),e.next=4,fetch("".concat(l.root,"/auth/sms/twilio/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xk(xk({},t),{},{cellphone:t.cellphone,country_phone_code:"+".concat(t.country_phone_code)}))});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,w(xk(xk({},O),{},{loading:!1,result:r})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),w(xk(xk({},O),{},{loading:!1,result:{error:e.t0.message}}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=_k(a.a.mark((function e(t){var n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(xk(xk({},S),{},{loading:!0})),e.next=4,fetch("".concat(l.root,"/auth/sms/twilio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return r=e.sent,e.next=7,r.json();case 7:null!=(i=e.sent)&&i.error||null==i||null===(n=i.result)||void 0===n||!n.id||(f({user:null==i?void 0:i.result,token:null==i||null===(u=i.result)||void 0===u||null===(s=u.session)||void 0===s?void 0:s.access_token}),o&&o(null==i?void 0:i.result)),E(xk(xk({},S),{},{loading:!1,result:i})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),E(xk(xk({},S),{},{loading:!1,result:{error:e.t0.message}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){c.signup&&c.signup.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ck({},e,{formState:y,validationFields:p,signupData:m,showField:function(e){var t,r,o;return!n||!p.loading&&!(null!==(t=p.fields)&&void 0!==t&&t.checkout[e])||!p.loading&&(null===(r=p.fields)||void 0===r?void 0:r.checkout[e])&&(null===(o=p.fields)||void 0===o?void 0:o.checkout[e].enabled)},isRequiredField:function(e){var t,r,o;return"password"===e||n&&!p.loading&&(null===(t=p.fields)||void 0===t?void 0:t.checkout[e])&&(null===(r=p.fields)||void 0===r?void 0:r.checkout[e].enabled)&&(null===(o=p.fields)||void 0===o?void 0:o.checkout[e].required)},verifyPhoneState:O,checkPhoneCodeState:S,setCheckPhoneCodeState:function(e){E(e||{loading:!1,result:{error:!1}})},handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=xk(xk({},n),{},Ak({},e.name,e.value))})):n=Ak({},e.target.name,e.target.value),b(xk(xk({},m),n))},handleButtonSignupClick:r||P,handleSendVerifyCode:C,handleCheckPhoneCode:I})))};Uk.propTypes={UIComponent:c.a.elementType,handleButtonSignupClick:c.a.func,handleSuccessSignup:c.a.func,handleContinueAsGuest:c.a.func,useChekoutFileds:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToLogin:c.a.string,elementLinkToLogin:c.a.element},Uk.defaultProps={useChekoutFileds:!1,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Lk=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function Bk(){return Bk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bk.apply(this,arguments)}function Fk(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Rk(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Fk(a,r,o,i,u,"next",e)}function u(e){Fk(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Mk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mk(Object(n),!0).forEach((function(t){zk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Lk.propTypes={UIComponent:c.a.elementType,name:c.a.string,minimun:c.a.number,delivery_price:c.a.number,description:c.a.string,distance:c.a.number,delivery_time:c.a.string,pickup_time:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Lk.defaultProps={id:0,name:"",minimun:0,delivery_price:0,description:"",distance:0,delivery_time:""};var qk=function(e){var t=e.UIComponent,n=e.handleDeleteLevelList,r=e.handleUpdateLevelList,o=Gk(rn(),1)[0],s=Gk(yn(),1)[0].token,c=Gk(Br(),2)[1].showToast,l=Gk(Bn(),2)[1],f=Gk(Object(i.useState)({loading:!1,error:null,changes:{}}),2),p=f[0],d=f[1],y=function(){var e=Rk(a.a.mark((function e(t){var r,i,u,f,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),d(Nk(Nk({},p),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},i="".concat(o.root,"/loyalty_levels/").concat(t),e.next=7,fetch(i,r);case 7:return u=e.sent,e.next=10,u.json();case 10:f=e.sent,y=f.error,h=f.result,y?d(Nk(Nk({},p),{},{loading:!1,error:h})):(c(Dr.Success,l("LEVEL_DELETED","Level deleted")),d(Nk(Nk({},p),{},{loading:!1,error:null,changes:{}})),n(h)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),d(Nk(Nk({},p),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Rk(a.a.mark((function e(t,n){var i,u,f,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),d(Nk(Nk({},p),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(t)},e.next=6,fetch("".concat(o.root,"/loyalty_levels/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:f=e.sent,y=f.error,h=f.result,y?d(Nk(Nk({},p),{},{loading:!1,error:h})):(d({changes:{},loading:!1,error:null}),r(h),c(Dr.Success,l("LEVEL_UPDATED","Level updated"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),d(Nk(Nk({},p),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Bk({},e,{formState:p,handleUpdateDeleteClick:y,handleUpdateLevel:function(e,t){var n,r,o=t===(null==p||null===(n=p.changes)||void 0===n?void 0:n.id)?Nk(Nk({},null==p?void 0:p.changes),{},zk({},e.target.name,e.target.value)):(zk(r={},e.target.name,e.target.value),zk(r,"id",t),r);d(Nk(Nk({},p),{},{changes:o}))},handleUpdateBtnClick:function(){var e;h(null==p?void 0:p.changes,null==p||null===(e=p.changes)||void 0===e?void 0:e.id)},handleChangeLevel:function(e,t){var n,r=t===(null==p||null===(n=p.changes)||void 0===n?void 0:n.id)?Nk(Nk({},null==p?void 0:p.changes),e):Nk(Nk({},e),{},{id:t});d(Nk(Nk({},p),{},{changes:r}))}})))};qk.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $k=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};$k.propTypes={UIComponent:c.a.elementType,order:c.a.object.isRequired,orderType:c.a.string.isRequired,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$k.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Jk=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function Vk(){return Vk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vk.apply(this,arguments)}function Hk(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Wk(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Hk(a,r,o,i,u,"next",e)}function u(e){Hk(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Kk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kk(Object(n),!0).forEach((function(t){Zk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return eD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Jk.propTypes={UIComponent:c.a.elementType,isSoldOut:c.a.bool,images:c.a.string,name:c.a.string,description:c.a.string,price:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Jk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var tD=function(e){var t=e.action,n=e.UIComponent,r=e.handleAddNotifications,o=e.handleUpdateNotifications,s=e.handleDeleteNotifications,c=e.onClose,l=Qk(Bn(),2)[1],f=Qk(rn(),1)[0],p=Qk(yn(),1)[0].token,d=Qk(Object(i.useState)({loading:!1,changes:{},error:null}),2),y=d[0],h=d[1],v=Qk(Br(),2)[1].showToast,m=function(){h(Xk(Xk({},y),{},{changes:{}}))},b=function(){var e=Wk(a.a.mark((function e(){var n,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Dr.Info,l("LOADING","Loading")),h(Xk(Xk({},y),{},{loading:!0})),n=Xk(Xk({},null==y?void 0:y.changes),{},{enabled:!0}),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(n)},e.next=7,fetch("".concat(f.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels"),o);case 7:return i=e.sent,e.next=10,i.json();case 10:(u=e.sent).error?h(Xk(Xk({},y),{},{loading:!1,error:u.result})):(h(Xk(Xk({},y),{},{changes:{},loading:!1,error:null})),r(u.result),v(Dr.Success,l("NOTIFICATION_ADDED","Notification added")),c&&c()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),h(Xk(Xk({},y),{},{loading:!1,error:e.t0.message}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Wk(a.a.mark((function e(n,r){var i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Dr.Info,l("LOADING","Loading")),h(Xk(Xk({},y),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(r)},e.next=6,fetch("".concat(f.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error?h(Xk(Xk({},y),{},{loading:!1,error:s.result})):(h(Xk(Xk({},y),{},{changes:{},loading:!1,error:null})),o&&o(s.result),m(),v(Dr.Success,l("NOTIFICATION_SAVED","Notification saved")),c&&c()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(Xk(Xk({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Wk(a.a.mark((function e(n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Dr.Info,l("LOADING","Loading")),h(Xk(Xk({},y),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=6,fetch("".concat(f.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels/").concat(n),r);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?h(Xk(Xk({},y),{},{loading:!1,error:i.result})):(h(Xk(Xk({},y),{},{changes:{},loading:!1,error:null})),s&&s(i.result),m(),v(Dr.Success,l("NOTIFICATION_DELETED","Notification deleted")),c&&c()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(Xk(Xk({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Vk({},e,{formState:y,cleanFormState:m,handleChangeInput:function(e){h(Xk(Xk({},y),{},{changes:Xk(Xk({},y.changes),{},Zk({},e.target.name,e.target.value))}))},handleChangeSelect:function(e,t){h(Xk(Xk({},y),{},{changes:Xk(Xk({},y.changes),{},Zk({},e,t))}))},handleUpdateClick:g,handleDeleteClick:O,handleClickAddBtn:b})))};function nD(){return nD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nD.apply(this,arguments)}function rD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rD(Object(n),!0).forEach((function(t){aD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function uD(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){iD(a,r,o,i,u,"next",e)}function u(e){iD(a,r,o,i,u,"throw",e)}i(void 0)}))}}function sD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}tD.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},tD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var lD=function(e){var t=e.UIComponent,n=sD(rn(),1)[0],r=sD(yn(),1)[0].token,o=sD(Bn(),2)[1],s=sD(Br(),2)[1].showToast,c=sD(Object(i.useState)({loading:!0,sites:[],error:null}),2),l=c[0],f=c[1],p=sD(Object(i.useState)({loading:!1,configs:[],error:null}),2),d=p[0],y=p[1],h=sD(Object(i.useState)({loading:!1,error:null}),2),v=h[0],m=h[1],b=function(){var e=uD(a.a.mark((function e(){var t,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=4,fetch("".concat(n.root,"/sites"),t);case 4:return o=e.sent,e.next=7,o.json();case 7:i=e.sent,u=i.error,s=i.result,f(u?oD(oD({},l),{},{loading:!1,error:s}):{loading:!1,sites:s,error:null}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),f(oD(oD({},l),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=uD(a.a.mark((function e(t){var o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(oD(oD({},d),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/sites/").concat(t,"/configs"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.error,c=u.result,y(s?oD(oD({},d),{},{error:c}):{loading:!1,configs:c,error:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),y(oD(oD({},d),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=uD(a.a.mark((function e(t,i,u){var c,l,f,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,o("LOADING","Loading")),m(oD(oD({},v),{},{loading:!0})),c={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({value:t})},e.next=6,fetch("".concat(n.root,"/sites/").concat(i,"/configs/").concat(u),c);case 6:return l=e.sent,e.next=9,l.json();case 9:f=e.sent,p=f.error,d=f.result,p?m({loading:!1,error:d}):(m({loading:!1,error:null}),s(Dr.Success,o("SETTINGS_UPDATE","Settings updated"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){b()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,nD({},e,{sitesState:l,siteConfigsState:d,actionState:v,handleGetSiteConfigs:g,handleChangeConfig:O})))};lD.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fD=["photo"];function pD(e){return pD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pD(e)}function dD(){return dD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dD.apply(this,arguments)}function yD(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function hD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function vD(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hD(a,r,o,i,u,"next",e)}function u(e){hD(a,r,o,i,u,"throw",e)}i(void 0)}))}}function mD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mD(Object(n),!0).forEach((function(t){gD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jD=function(e){var t=e.UIComponent,n=e.useSessionUser,r=e.refreshSessionUser,o=e.useDefualtSessionManager,s=e.userId,c=e.user,l=e.useValidationFields,f=e.handleButtonUpdateClick,p=e.handleSuccessUpdate,d=e.handleSuccessAdd,y=e.isProfessional,h=OD(rn(),1)[0],v=OD(yn(),2),m=v[0],b=v[1].changeUser,g=OD(Jr(),1)[0],O=OD(Object(i.useState)(!1),2),w=O[0],j=O[1],S=OD(Object(i.useState)({loading:!1,result:{error:!1}}),2),E=S[0],P=S[1],C=OD(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),I=C[0],x=C[1],A={},T=o?m.token:e.accessToken;Object(i.useEffect)((function(){if(c){if(!(s||n&&r)||m.loading||e.userData)P({loading:!1,result:{error:!1,result:n&&!r?m.user:c}});else{P(bD(bD({},E),{},{loading:!0}));var t={};A.user=t,h.setAccessToken(T).users(n&&r?m.user.id:s).get({cancelToken:t}).then((function(e){P({loading:!1,result:e.content}),e.content.result&&b(bD(bD({},m.user),e.content.result))})).catch((function(e){"Cancel"!==e.constructor.name&&P({loading:!1,result:{error:!0,result:e.message}})}))}return function(){A.user&&A.user.cancel()}}}),[m.loading,c]);var _=function(){var e=vD(a.a.mark((function e(t,r,o){var i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return",f(E.result.result,I.changes));case 2:if(e.prev=2,x(bD(bD({},I),{},{loading:!0})),t&&(I.changes=bD(bD({},I.changes),t)),!r){e.next=13;break}return e.next=8,h.users((null==c?void 0:c.id)||E.result.result.id).save({photo:o||I.changes.photo},{accessToken:T});case 8:i=e.sent,u=I.changes,u.photo,s=yD(u,fD),x(bD(bD({},I),{},{changes:i.content.error?I.changes:s,result:i.content,loading:!1})),e.next=17;break;case 13:return e.next=15,h.users((null==c?void 0:c.id)||E.result.result.id).save(I.changes,{accessToken:T});case 15:i=e.sent,x(bD(bD({},I),{},{changes:i.content.error?I.changes:{},result:i.content,loading:!1}));case 17:i.content.error||(P(bD(bD({},E),{},{result:bD(bD({},E.result),i.content)})),n&&b(bD(bD({},m.user),i.content.result)),p&&p(i.content.result)),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),x(bD(bD({},I),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t,n,r){return e.apply(this,arguments)}}(),k=function(){var t=vD(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,x(bD(bD({},I),{},{loading:!0})),n=bD({},null==I?void 0:I.changes),y&&Object.assign(n,{level:8}),t.next=6,h.users().save(n,{accessToken:T});case 6:r=t.sent,x(bD(bD({},I),{},{changes:r.content.error?I.changes:{},result:r.content,loading:!1})),r.content.error||(P(bD(bD({},E),{},{result:bD(bD({},E.result),r.content)})),d&&d(r.content.result),e.onClose&&e.onClose()),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),x(bD(bD({},I),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,dD({},e,{isEdit:w,cleanFormState:function(e){return x(bD(bD({},I),e))},formState:I,userState:E,validationFields:g,showField:function(e){var t,n,r;return!l||!g.loading&&!(null!==(t=g.fields)&&void 0!==t&&t.checkout[e])||!g.loading&&(null===(n=g.fields)||void 0===n?void 0:n.checkout[e])&&(null===(r=g.fields)||void 0===r?void 0:r.checkout[e].enabled)},setFormState:x,handleChangeSwtich:function(e,t){var n=gD({},e,t);x(bD(bD({},I),{},{changes:bD(bD({},I.changes),n)}))},isRequiredField:function(e){var t,n,r;return l&&!g.loading&&(null===(t=g.fields)||void 0===t?void 0:t.checkout[e])&&(null===(n=g.fields)||void 0===n?void 0:n.checkout[e].enabled)&&(null===(r=g.fields)||void 0===r?void 0:r.checkout[e].required)},handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=bD(bD({},n),{},gD({},e.name,e.value))})):n=gD({},e.target.name,e.target.value),x(bD(bD({},I),{},{changes:bD(bD({},I.changes),n)}))},handleButtonUpdateClick:_,handleButtonAddClick:k,handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){x(bD(bD({},I),{},{changes:bD(bD({},I.changes),{},{photo:t.result})}))},t.onerror=function(e){return console.log(e)}},toggleIsEdit:function(){return j(!w)},handleChangeUserType:function(e){var t={level:e};x(bD(bD({},I),{},{changes:bD(bD({},I.changes),t)}))}})))};function SD(){return SD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SD.apply(this,arguments)}function ED(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ED(Object(n),!0).forEach((function(t){CD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ED(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ID(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return AD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}jD.propTypes={UIComponent:c.a.elementType,refreshSessionUser:c.a.bool,handleButtonUpdateClick:c.a.func,handleSuccessUpdate:c.a.func,useValidationFields:c.a.bool,validationFieldsType:c.a.string,useDefualtSessionManager:c.a.bool,accessToken:function(e,t){return void 0!==e[t]&&"string"!=typeof e[t]?new Error("Invalid prop `".concat(t,"` of type `").concat(pD(e[t]),"` supplied to `UserFormDetails`, expected `object`.")):void 0!==e[t]||e.useDefualtSessionManager?void 0:new Error("Invalid prop `".concat(t,"` is required when `useDefualtSessionManager` is false."))},beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToLogin:c.a.string,elementLinkToLogin:c.a.element},jD.defaultProps={useValidationFields:!1,validationFieldsType:"checkout",useDefualtSessionManager:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var TD=function(e){var t=e.defaultUserTypesSelected,n=e.disabledActiveStateCondition,r=e.UIComponent,o=e.userTypesSelected,s=e.selectedUserActiveState,c=e.searchValue,l=e.isSearchByUserId,f=e.isSearchByUserEmail,p=e.isSearchByUserPhone,d=e.isSearchByUserName,y=xD(rn(),1)[0],h=xD(yn(),1)[0],v=h.token,m=h.loading,b=xD(Object(i.useState)({loading:!1,error:null,result:null}),2),g=b[0],O=b[1],w=function(){var e,r=(e=a.a.mark((function e(r){var i,u,h,b,w,j,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(PD(PD({},g),{},{loading:!0})),i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}},u=[],Array.isArray(t)&&u.push({attribute:"level",value:t}),h=[],r&&(o.length>0&&h.push({attribute:"level",value:o}),n||h.push({attribute:"enabled",value:s}),c&&(b=[],l&&b.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),f&&b.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),p&&b.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),d&&(b.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),b.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}})),h.push({conector:"OR",conditions:b}))),w=r?"".concat(y.root,"/users.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(h)):u.length>0?"".concat(y.root,"/users.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(u)):"".concat(y.root,"/users.csv?mode=dashboard&orderBy=id"),e.next=12,fetch(w,i);case 12:return j=e.sent,S=(new Date).getTime(),e.next=16,j.blob().then((function(e){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="users_".concat(S,".csv"),n.click()}));case 16:O(PD(PD({},g),{},{loading:!1})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),O(PD(PD({},g),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ID(a,r,o,i,u,"next",e)}function u(e){ID(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,SD({},e,{actionStatus:g,getCSV:w})))};function _D(){return _D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_D.apply(this,arguments)}function kD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function DD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DD(Object(n),!0).forEach((function(t){LD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function LD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return FD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}TD.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},TD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var RD=function(e){var t=e.UIComponent,n=e.businessId,r=e.products,o=e.cartProducts,s=e.onSave,c=BD(Object(i.useState)({products:[],loading:!0,error:!1}),2),l=c[0],f=c[1],p=BD(Object(i.useState)([]),2),d=p[0],y=p[1],h=BD(rn(),1)[0],v=BD(vr(),1)[0];Object(i.useEffect)((function(){null!=r&&r.length||n?null!=r&&r.length?b(r):m():f(UD(UD({},l),{},{error:!0,message:"BusinessId is required when products is not defined"}))}),[]),Object(i.useEffect)((function(){l.loading||b(d)}),[v.loading]);var m=function(){var e,t=(e=a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.businesses(n).products().where([{attribute:"upselling",value:!0}]).parameters({type:1}).get();case 3:t=e.sent,r=t.content.result,y(r),b(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),f(UD(UD({},l),{},{loading:!1,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){kD(a,r,o,i,u,"next",e)}function u(e){kD(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),b=function(e){var t=e.filter((function(e){return e.upselling})),n=o.filter((function(e){return t.find((function(t){return t.id===e.id}))}));n.length?f(UD(UD({},l),{},{loading:!1,products:t.filter((function(e){return!e.inventoried&&!n.find((function(t){return t.id===e.id}))}))})):f(UD(UD({},l),{},{loading:!1,products:t}))};return u.a.createElement(t,_D({},e,{upsellingProducts:l,handleFormProduct:function(e){s(e)}}))};function MD(){return MD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MD.apply(this,arguments)}function ND(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ND(Object(n),!0).forEach((function(t){GD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ND(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function qD(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){YD(a,r,o,i,u,"next",e)}function u(e){YD(a,r,o,i,u,"throw",e)}i(void 0)}))}}function $D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return JD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}RD.propTypes={UIComponent:c.a.elementType,upsellingProducts:c.a.array,businessId:c.a.number};var VD=function(e){var t=e.orderId,n=e.propsToFetch,r=e.asDashboard,o=e.hashKey,s=e.userCustomerId,c=e.UIComponent,l=$D(yn(),1)[0],f=l.user,p=l.token,d=l.loading,y=$D(rn(),1)[0],h=$D(zn(),1)[0],v=$D(Bn(),2)[1],m=$D(Br(),2)[1].showToast,b=$D(Object(i.useState)({order:null,loading:!e.order,error:null}),2),g=b[0],O=b[1],w=$D(Object(i.useState)({status:null,loading:!1,error:null}),2),j=w[0],S=w[1],E=$D(Object(i.useState)({loading:!1,error:null}),2),P=E[0],C=E[1],I=$D(Object(i.useState)({loading:!0,error:null,messages:[]}),2),x=I[0],A=I[1],T=$D(Object(i.useState)(!1),2),_=T[0],k=T[1],D=Cn(),U=e.accessToken||p,L=function(){var e=qD(a.a.mark((function e(){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(zD(zD({},x),{},{loading:!0})),n="".concat(y.root,"/orders/").concat(t,"/messages?mode=dashboard"),e.next=5,fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(U)}});case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,i=o.error,u=o.result,A(i?zD(zD({},x),{},{loading:!1,error:u}):{messages:u,loading:!1,error:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),A(zD(zD({},x),{},{loading:!1,error:[e.t0.Messages]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=qD(a.a.mark((function e(n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(zD(zD({},j),{},{loading:!0})),e.next=4,fetch("".concat(y.root,"/orders/").concat(t,"/messages"),{method:"post",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({can_see:"0,2,3",comment:"I am on the parking number: ".concat(n),order_id:t,type:2})});case 4:r=e.sent,o=r.status,S(zD(zD({},j),{},{loading:!1,status:o})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),S(zD(zD({},j),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=qD(a.a.mark((function e(){var i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},o&&(i.headers={"X-uuid-access-X":o}),s&&(i.query={mode:"dashboard"}),e.prev=3,O(zD(zD({},g),{},{loading:!0})),u=n?r?y.setAccessToken(p).orders(t).asDashboard().select(n):y.setAccessToken(p).orders(t).select(n):r?y.setAccessToken(p).orders(t).asDashboard():y.setAccessToken(p).orders(t),e.next=8,u.get();case 8:c=e.sent,l=c.content.result,f=Array.isArray(l)?null:l,O(zD(zD({},g),{},{loading:!1,order:f})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),O(zD(zD({},g),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=qD(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(zD(zD({},P),{},{loading:!0})),e.next=4,fetch("".concat(y.root,"/orders/").concat(null==t?void 0:t.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({status:t.newStatus})});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,C({loading:!1,error:r.error?r.result:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),C(zD(zD({},P),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=qD(a.a.mark((function e(){var n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null==x||null===(n=x.messages[(null==x||null===(r=x.messages)||void 0===r?void 0:r.length)-1])||void 0===n?void 0:n.id,e.prev=1,e.next=4,fetch("".concat(y.root,"/orders/").concat(t,"/messages/").concat(o,"/read"),{method:"GET",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"}});case 4:return i=e.sent,e.next=7,i.json();case 7:u=e.sent,s=u.result,k(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=qD(a.a.mark((function e(){var t,n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dr.Info,v("LOADING","Loading")),C(zD(zD({},P),{},{loading:!0})),i={method:"POST",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({order_id:null===(t=g.order)||void 0===t?void 0:t.id,business_id:null===(n=g.order)||void 0===n?void 0:n.business_id,gateway:null===(r=g.order)||void 0===r||null===(o=r.paymethod)||void 0===o?void 0:o.gateway})},e.next=6,fetch("".concat(y.root,"/payments/stripe/refund"),i);case 6:return u=e.sent,e.next=9,u.json();case 9:s=e.sent,C({loading:!1,error:s.error?s.result:null}),s.error||(O(zD(zD({},g),{},{order:zD(zD({},g.order),{},{refund_data:s.result})})),m(Dr.Success,v("ORDER_REFUNDED","Order refunded"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),C(zD(zD({},P),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){e.order?O(zD(zD({},g),{},{order:e.order})):F()}),[t]),Object(i.useEffect)((function(){if(!g.loading&&!d){var e=function(e){var t;(null==e?void 0:e.id)===(null==g||null===(t=g.order)||void 0===t?void 0:t.id)&&(delete e.total,delete e.subtotal,O(zD(zD({},g),{},{order:Object.assign(g.order,e)})))};return r||D.join("orders_".concat(f.id)),D.on("update_order",e),function(){r||D.leave("orders_".concat(f.id)),D.off("update_order",e)}}}),[g.order,D,d]),Object(i.useEffect)((function(){var e=function(e){O(zD(zD({},g),{},{order:zD(zD({},g.order),{},{user_review:e})}))};return h.on("customer_reviewed",e),function(){h.off("customer_reviewed",e)}}),[g]),Object(i.useEffect)((function(){L()}),[t]),u.a.createElement(u.a.Fragment,null,c&&u.a.createElement(c,MD({},e,{order:g,messageErrors:j,actionStatus:P,formatPrice:function(e){return e&&"$ ".concat(e.toFixed(2))},handlerSubmit:function(e){var t=e.spot;B(t)},handleUpdateOrderStatus:R,messages:x,setMessages:A,messagesReadList:_,readMessages:M,handleRefundOrder:N})))};function HD(){return HD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HD.apply(this,arguments)}function WD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WD(Object(n),!0).forEach((function(t){XD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function QD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return eU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}VD.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),orderId:c.a.oneOfType([c.a.number,c.a.string]),order:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},VD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var tU=function(e){var t=e.UIComponent,n=e.order,r=e.onSaveReview,o=QD(rn(),1)[0],s=QD(yn(),1)[0],c=QD(Object(i.useState)({quality:0,punctiality:0,service:0,packaging:0,comments:""}),2),l=c[0],f=c[1],p=QD(Object(i.useState)({loading:!1,result:{error:!1}}),2),d=p[0],y=p[1],h=function(){var e,t=(e=a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(KD(KD({},d),{},{loading:!0})),e.prev=1,i={order_id:null==n?void 0:n.id,quality:l.quality,delivery:l.punctiality,service:l.service,package:l.packaging,comment:l.comments,user_id:null==s||null===(t=s.user)||void 0===t?void 0:t.id,business_id:n.business_id},e.next=5,fetch("".concat(o.root,"/business/").concat(n.business_id,"/reviews"),{method:"POST",headers:{Authorization:"Bearer ".concat(s.token),"Content-Type":"application/json"},body:JSON.stringify(i)});case 5:u=e.sent,r&&r(u.content),y({loading:!1,result:u.content}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),y({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ZD(a,r,o,i,u,"next",e)}function u(e){ZD(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,HD({},e,{stars:l,order:n,formState:d,handleSendReview:h,handleChangeInput:function(e){f(KD(KD({},l),{},{comments:e.target.value}))},handleChangeRating:function(e){f(KD(KD({},l),{},XD({},e.target.name,parseInt(e.target.value))))}})))};function nU(){return nU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nU.apply(this,arguments)}function rU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rU(Object(n),!0).forEach((function(t){aU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function uU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}tU.propTypes={UIComponent:c.a.elementType,order:c.a.object,onSaveReview:c.a.func,handleSendReview:c.a.func},tU.defaultProps={order:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cU=function(e){var t=e.UIComponent,n=e.pageSlug,r=e.onNotFound,o=uU(Object(i.useState)({body:null,loading:!1,error:null}),2),s=o[0],c=o[1],l=uU(rn(),1)[0],f={},p=function(){var e,t=(e=a.a.mark((function e(t){var o,i,u,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(oU(oU({},s),{},{loading:!0})),e.prev=1,o={},f.page=o,e.next=6,l.pages(t).get({cancelToken:o});case 6:i=e.sent,u=i.content,p=u.error,d=u.result,c(oU(oU({},s),{},{loading:!1})),p?(c(oU(oU({},s),{},{error:d})),r&&r(n)):c(oU(oU({},s),{},{body:d.body})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&c(oU(oU({},s),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){iU(a,r,o,i,u,"next",e)}function u(e){iU(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){return p(n),function(){f.page&&f.page.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,nU({},e,{cmsState:s})))};function lU(){return lU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lU.apply(this,arguments)}function fU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fU(Object(n),!0).forEach((function(t){dU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function hU(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){yU(a,r,o,i,u,"next",e)}function u(e){yU(a,r,o,i,u,"throw",e)}i(void 0)}))}}function vU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cU.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bU=function(e){var t=e.UIComponent,n=vU(Bn(),2)[1],r=vU(rn(),1)[0],o=vU(yn(),1)[0].token,s=vU(Object(i.useState)(""),2),c=s[0],l=s[1],f=vU(Object(i.useState)({customer:!1,signup:!1}),2),p=f[0],d=f[1],y=vU(Object(i.useState)({loading:!1,result:{error:!1}}),2),h=y[0],v=y[1],m=vU(Object(i.useState)({users:[],loading:!0,error:null}),2),b=m[0],g=m[1],O=function(){var e=hU(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.filter((function(e){return(null==e?void 0:e.cellphone)===n})))[0]?(v({loading:!1,result:r[0]}),d(pU(pU({},p),{},{customer:!0}))):v({loading:!1,result:{error:!1}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=hU(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(pU(pU({},b),{},{loading:!0})),e.prev=1,e.next=4,r.setAccessToken(o).users().get();case 4:t=e.sent,n=t.content.result,g(pU(pU({},b),{},{users:n,loading:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),g(pU(pU({},b),{},{loading:!1,error:e.t0.message}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){!function(e,t){var r;function o(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),r>=e.length&&(r=0),r<0&&(r=e.length-1),e[r].classList.add("autocomplete-active")}function a(t){for(var n=document.getElementsByClassName("autocomplete-items"),r=0;r<n.length;r++)t!==n[r]&&t!==e&&n[r].parentNode.removeChild(n[r])}e.addEventListener("input",(function(o){var i,u,s=this.value;if(a(),!s)return!1;r=-1;var c=document.createElement("DIV");for((c=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),c.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(c),u=0;u<(null==t?void 0:t.length);u++){var f,y,h;if((null===(f=t[u])||void 0===f||null===(y=f.cellphone)||void 0===y||null===(h=y.substr(0,null==s?void 0:s.length))||void 0===h?void 0:h.toUpperCase())===(null==s?void 0:s.toUpperCase())){var v,m,w=null===(v=t[u])||void 0===v?void 0:v.cellphone;(i=document.createElement("DIV")).innerHTML="<strong>"+(null==w?void 0:w.substr(0,null==s?void 0:s.length))+"</strong>",i.innerHTML+=null==w?void 0:w.substr(null==s?void 0:s.length),i.innerHTML+=" ("+(null===(m=t[u])||void 0===m?void 0:m.name)+")",i.innerHTML+="<input type='hidden' value='"+w+"'>",i.addEventListener("click",(function(n){e.value=this.getElementsByTagName("input")[0].value,l(this.getElementsByTagName("input")[0].value),O(t,this.getElementsByTagName("input")[0].value),a()})),c.appendChild(i)}}(i=document.createElement("DIV")).innerHTML="<strong>"+n("CREATE_CUSTOMER","Create new customer")+"</strong>",i.innerHTML+="<input type='hidden' value='"+n("CREATE_CUSTOMER","Create new customer")+"'>",i.addEventListener("click",(function(e){10===o.target.value.length?d(pU(pU({},p),{},{signup:!0})):g(pU(pU({},b),{},{error:n("ERROR_MIN_CHARACTERS_PHONE","The Phone / Mobile must be 10 characters")})),a()})),c.appendChild(i)})),e.addEventListener("keydown",(function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40===e.keyCode?(r++,o(t)):38===e.keyCode?(r--,o(t)):13===e.keyCode&&(e.preventDefault(),r>-1&&t&&t[r].click())})),document.addEventListener("click",(function(e){a(e.target)}))}(document.getElementById("phone-input"),b.users)}),[b.users]),Object(i.useEffect)((function(){w()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,lU({},e,{phone:c,customerState:h,customersPhones:b,setCustomersPhones:g,onChangeNumber:function(e){var t,n,r;l(null!==(t=e.target)&&void 0!==t&&null!==(n=t.validity)&&void 0!==n&&n.valid?null===(r=e.target)||void 0===r?void 0:r.value:c)},openModal:p,setOpenModal:d,setCustomerState:v})))};function gU(){return gU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gU.apply(this,arguments)}function OU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bU.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jU=function(e){var t=e.UIComponent,n=e.businessList,r=e.userLocation,o=e.setErrors,a=OU(zn(),1)[0],s=OU(Object(i.useState)([]),2),c=s[0],l=s[1];return Object(i.useEffect)((function(){l(n.map((function(e){return{lat:e.location.lat,lng:e.location.lng,icon:e.logo,slug:e.slug}})))}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,gU({},e,{businessLocations:c,userLocation:r,onBusinessClick:function(e){a.emit("go_to_page",{page:"business",params:{store:e}})},setErrors:o})))};function SU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SU(Object(n),!0).forEach((function(t){PU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function IU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}jU.propTypes={UIComponent:c.a.elementType,businessList:c.a.array.isRequired,userLocation:c.a.object,setErrors:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jU.defaultProps={businessList:[],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var AU=Object(i.createContext)(),TU=function(e){var t=e.children,n=IU(Object(i.useState)({business:{}}),2),r=n[0],o=n[1],s=function(){var e,t=(e=a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(EU(EU({},r),{},{business:t}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){CU(a,r,o,i,u,"next",e)}function u(e){CU(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),c=JSON.parse(JSON.stringify(r)),l={setBusiness:s};return u.a.createElement(AU.Provider,{value:[c,l]},t)},_U=function(){return Object(i.useContext)(AU)||[{},function(){}]};function kU(e){return kU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kU(e)}function DU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function UU(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){DU(a,r,o,i,u,"next",e)}function u(e){DU(a,r,o,i,u,"throw",e)}i(void 0)}))}}function LU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var BU=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,i,u;return t=e,n=[{key:"getItem",value:(u=UU(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.getItem(t);case 2:if(r=e.sent,!n||"object"===kU(r)){e.next=5;break}return e.abrupt("return",JSON.parse(r));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})},{key:"setItem",value:(i=UU(a.a.mark((function e(t,n,r){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r?JSON.stringify(n):n,e.next=3,window.localStorage.setItem(t,o);case 3:case"end":return e.stop()}}),e)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"removeItem",value:(o=UU(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.removeItem(t);case 2:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})}],n&&LU(t.prototype,n),r&&LU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),FU=Object(i.createContext)(),RU=function(e){var t=e.Alert,n=e.settings,r=e.children,o=new BU;return u.a.createElement(FU.Provider,null,u.a.createElement(Nn,null,u.a.createElement(nn,{settings:n},u.a.createElement(Ln,{strategy:o},u.a.createElement(dn,{strategy:o},u.a.createElement(er,null,u.a.createElement(Er,null,u.a.createElement(Lr,null,u.a.createElement($r,null,u.a.createElement(Pn,{settings:Object.assign(n.socket,{project:n.project})},u.a.createElement(hr,{strategy:o,Alert:t},u.a.createElement(TU,null,r))))))))))))};function MU(){return MU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MU.apply(this,arguments)}var NU=function(e){var t=e.UIComponent,n=e.orderTotal;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,MU({},e,{total:n})))};function zU(){return zU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zU.apply(this,arguments)}function GU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function YU(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){GU(a,r,o,i,u,"next",e)}function u(e){GU(a,r,o,i,u,"throw",e)}i(void 0)}))}}function qU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}NU.propTypes={UIComponent:c.a.elementType,useOrderContext:c.a.bool,businessId:c.a.number,orderTotal:c.a.number,handlerSubmit:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},NU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var JU=function(e){var t,n,r,o=e.body,s=e.clientId,c=e.btnStyle,l=e.UIComponent,f=e.handlerChangePaypal,p=qU(vr(),2)[1],d=p.confirmCart,y=p.placeCart,h=qU(Object(i.useState)(!1),2),v=h[0],m=h[1];Object(i.useEffect)((function(){var e;if(s){if(null===(e=window)||void 0===e||!e.paypal){var t=document.createElement("script");return t.type="text/javascript",t.src="https://www.paypal.com/sdk/js?client-id=".concat(s),t.async=!0,t.onload=function(){m(!0)},t.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(t),function(){t.onload=null}}m(!0)}}),[s]);var b=function(){var e=YU(a.a.mark((function e(t,n){var r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={paymethod_id:o.paymethod_id,amount:o.amount,delivery_zone_id:o.delivery_zone_id},e.next=3,y(o.cartUuid,r);case 3:if(i=e.sent,u=i.error,s=i.result,!u){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",s.pay_reference);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=YU(a.a.mark((function e(t,n){var r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(o.cartUuid);case 2:if(r=e.sent,i=r.error,u=r.result,!i){e.next=7;break}return e.abrupt("return",null);case 7:return f&&f(u.order.uuid),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=YU(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(o.cartUuid);case 2:return n=e.sent,r=n.result,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=null===(t=window)||void 0===t||null===(n=t.paypal)||void 0===n||null===(r=n.Buttons)||void 0===r?void 0:r.driver("react",{React:u.a,ReactDOM:UC.a});return l&&u.a.createElement(l,zU({},e,{isSdkReady:v,PaypalButton:w,paypalButtonProps:{createOrder:b,onApprove:g,onError:O,onCancel:O,style:c}}))};function VU(){return VU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VU.apply(this,arguments)}function HU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HU(Object(n),!0).forEach((function(t){KU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ZU(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){XU(a,r,o,i,u,"next",e)}function u(e){XU(a,r,o,i,u,"throw",e)}i(void 0)}))}}function QU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return eL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}JU.propTypes={UIComponent:c.a.elementType,body:c.a.object.isRequired,clientId:c.a.string.isRequired,handlerChangePaypal:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},JU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var tL=function(e){var t=e.businessId,n=e.UIComponent,r=QU(yn(),1)[0],o=r.token,s=r.user,c=QU(rn(),1)[0],l=QU(Object(i.useState)({cards:[],loading:!0,error:null}),2),f=l[0],p=l[1],d=QU(Object(i.useState)(e.publicKey),2),y=d[0],h=d[1],v=QU(Object(i.useState)(null),2),m=v[0],b=v[1],g=QU(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j={},S=function(){var e=ZU(a.a.mark((function e(){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(WU(WU({},f),{},{loading:!0})),e.prev=1,n={},j.paymentCards=n,e.next=6,c.setAccessToken(o).paymentCards(t,s.id).get({cancelToken:n});case 6:r=e.sent,i=r.content.result,(u=null==i?void 0:i.find((function(e){return e.default})))&&b({id:u.id,type:"card",card:{brand:u.brand,last4:u.last4}}),p(WU(WU({},f),{},{loading:!1,cards:i})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),p(WU(WU({},f),{},{loading:!1,error:e.t0}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=ZU(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.paymentCards(-1,s.id,t.id).delete();case 3:n=e.sent,n.content.error||(f.cards=f.cards.filter((function(e){return e.id!==t.id})),p(WU({},f))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=ZU(a.a.mark((function e(n){var r,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(WU(WU({},O),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({business_id:t,user_id:s.id,card_id:n.id})},i="".concat(c.root,"/payments/stripe/cards/default"),e.next=6,fetch(i,r);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?w({loading:!1,error:l.result}):(b({id:n.id,type:"card",card:{brand:n.brand,last4:n.last4}}),w({loading:!1,error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=ZU(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.setAccessToken(o).paymentCards().getCredentials();case 3:t=e.sent,n=t.content.result,h(n.publishable),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),I=function(e){b({id:e.id,type:"card",card:{brand:e.brand,last4:e.last4}})};return Object(i.useEffect)((function(){return o&&(S(),e.publicKey||C()),function(){j.paymentCards&&j.paymentCards.cancel()}}),[o]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,VU({},e,{cardSelected:m,cardsList:f,handleCardClick:I,publicKey:y,handleNewCard:function(e){f.cards.push(e),p(WU({},f)),I(e)},deleteCard:E,setDefaultCard:P,defaultCardSetActionStatus:O})))};function nL(){return nL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nL.apply(this,arguments)}function rL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function oL(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rL(a,r,o,i,u,"next",e)}function u(e){rL(a,r,o,i,u,"throw",e)}i(void 0)}))}}function aL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return iL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}tL.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,userId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},tL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var uL=function(e){var t=e.UIComponent,n=aL(rn(),1)[0],r=aL(yn(),1)[0].token,o=aL(Object(i.useState)(null),2),s=o[0],c=o[1],l=aL(Object(i.useState)(null),2),f=l[0],p=l[1],d=function(){var e=oL(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.root,"/payments/stripe/credentials"),{headers:{Authorization:"Bearer ".concat(r)}});case 2:return t=e.sent,e.next=5,t.json();case 5:o=e.sent,i=o.result.publishable,c(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=oL(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.root,"/payments/stripe/requirements?type=add_card"),{headers:{Authorization:"Bearer ".concat(r)}});case 2:return t=e.sent,e.next=5,t.json();case 5:o=e.sent,i=o.result,p(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r&&(d(),y())}),[r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,nL({},e,{stripeKey:s,clientSecret:f})))};function sL(){return sL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sL.apply(this,arguments)}function cL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function lL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}uL.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},uL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var pL=function(e){var t,n=e.paymentMethods,r=e.UIComponent,o=lL(yn(),1)[0].token,s=lL(rn(),1)[0],c=lL(Object(i.useState)(null),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s.root,"/payments/stripe/credentials"),{headers:{Authorization:"Bearer ".concat(o)}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r=n.result.publishable,f(r);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){cL(a,r,o,i,u,"next",e)}function u(e){cL(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[]),u.a.createElement(u.a.Fragment,null,r&&l&&u.a.createElement(r,sL({},e,{stripePK:l,modalName:(t="",n.map((function(e,r){r===n.length-1?t+="".concat(e.name):t+="".concat(e.name,", ")})),t)})))};function dL(){return dL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dL.apply(this,arguments)}function yL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function hL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hL(Object(n),!0).forEach((function(t){mL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bL(e){return function(e){if(Array.isArray(e))return wL(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||OL(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||OL(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OL(e,t){if(e){if("string"==typeof e)return wL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wL(e,t):void 0}}function wL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}pL.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,currency:c.a.string.isRequired,paymentMethods:c.a.arrayOf(c.a.object).isRequired,handlerStripeSource:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},pL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jL=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=e.isSearchByName,l=e.isSearchByLastName,f=e.availableDriverIds,p=gL(rn(),1)[0],d=gL(Object(i.useState)({loading:!0,error:null,drivers:[],pagination:null}),2),y=d[0],h=d[1],v=gL(Object(i.useState)(null),2),m=v[0],b=v[1],g=gL(Object(i.useState)(!1),2),O=g[0],w=g[1],j=gL(Object(i.useState)(null),2),S=j[0],E=j[1],P=new RegExp(/^[A-Za-z0-9\s]+$/g),C=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s,d,v,m,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(vL(vL({},y),{},{loading:!0})),t=null,n=[{attribute:"level",value:"4"}],(null==f?void 0:f.length)>0&&n.push({attribute:"id",value:f}),S&&(r=[],i=P.test(S),c&&r.push({attribute:"name",value:{condition:"ilike",value:i?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),l&&r.push({attribute:"lastname",value:{condition:"ilike",value:i?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),n.push({conector:"OR",conditions:r})),n.length&&(t={conditions:n,conector:"AND"}),u=t?p.users().asDashboard().select(o).where(t):p.users().asDashboard().select(o),e.next=10,u.get();case 10:s=e.sent,d=s.content,v=d.error,m=d.result,b=d.pagination,h(vL(vL({},y),{},v?{loading:!1,error:m}:{loading:!1,drivers:m,pagination:b})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),h(vL(vL({},y),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){yL(a,r,o,i,u,"next",e)}function u(e){yL(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return C(),e.abort()}),[S]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==y||null===(e=y.drivers)||void 0===e?void 0:e.length)){var o=null==y||null===(t=y.drivers)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(bL(e),[t.id])}),[]),a=(null==n||null===(r=n.drivers_ids)||void 0===r?void 0:r.length)>0?null==n?void 0:n.drivers_ids.filter((function(e){return o.includes(e)})):o;b(bL(a)),null!=n&&n.drivers_ids&&(null==a?void 0:a.length)!==(null==y?void 0:y.drivers.length)||w(!0)}}),[null==y?void 0:y.drivers]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,dL({},e,{driverList:y,driverIds:m,searchValue:S,onSearch:E,handleChangeDriverId:function(e){if(null==m?void 0:m.find((function(t){return t===e}))){var t=null==m?void 0:m.filter((function(t){return t!==e}));b(t),w(!1)}else{var n=m?bL(m):[];n.push(e),n.length===(null==y?void 0:y.drivers.length)&&w(!0),b(n)}},handleClickFilterButton:function(){var e=m?bL(m):null;r(vL(vL({},n),{},{drivers_ids:e})),s&&s()},isAllCheck:O,handleChangeAllCheck:function(){if(O)b(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=OL(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(y.drivers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}b(t)}w(!O)}})))};function SL(){return SL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SL.apply(this,arguments)}function EL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EL(Object(n),!0).forEach((function(t){CL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return AL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}jL.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname","birthdate","drivergroups"]};var TL=function(e){var t=e.UIComponent,n=e.order,r=xL(rn(),1)[0],o=xL(yn(),1)[0],s=xL(Bn(),2)[1],c=xL(Br(),2)[1].showToast,l=xL(zn(),1)[0],f=xL(Object(i.useState)({qualification:0,comment:"",order_id:null==n?void 0:n.id,user_id:null==n?void 0:n.customer_id}),2),p=f[0],d=f[1],y=xL(Object(i.useState)({loading:!1,error:null}),2),h=y[0],v=y[1],m=function(){var t,i=(t=a.a.mark((function t(){var i,u,f;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v({loading:!0,error:null}),t.prev=1,t.next=4,fetch("".concat(r.root,"/users/").concat(null==n?void 0:n.customer_id,"/user_reviews"),{method:"POST",headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"},body:JSON.stringify(p)});case 4:return i=t.sent,t.next=7,i.json();case 7:u=t.sent,f=u.result,u.error?v({loading:!1,error:f}):(v(PL(PL({},p),{},{loading:!1})),c(Dr.Success,s("CUSTOMER_REVIEW_SUCCESS_CONTENT","Thank you, Customer review successfully submitted!")),l.emit("customer_reviewed",f),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),v({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[1,13]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){IL(a,r,o,i,u,"next",e)}function u(e){IL(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return i.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,SL({},e,{reviewState:p,setReviewState:d,actionState:h,handleChangeQualification:function(e){e&&d(PL(PL({},p),{},{qualification:e}))},handleSendCustomerReview:m})))};function _L(){return _L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_L.apply(this,arguments)}function kL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function DL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return UL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}TL.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},TL.defaultProps={order:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var LL=function(e){var t=e.UIComponent,n=e.toSave,r=DL(rn(),1)[0],o=DL(yn(),1)[0].token,s=DL(Object(i.useState)(),2),c=s[0],l=s[1],f=function(){var e,t=(e=a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r.root,"/payments/stripe/requirements?type=add_card"),{headers:{Authorization:"Bearer ".concat(o)}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,i=n.result,l(i);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){kL(a,r,o,i,u,"next",e)}function u(e){kL(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&n&&f()}),[o]),u.a.createElement(t,_L({},e,{requirements:c}))};function BL(){return BL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BL.apply(this,arguments)}function FL(e){return function(e){if(Array.isArray(e))return $L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qL(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ML(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){RL(a,r,o,i,u,"next",e)}function u(e){RL(a,r,o,i,u,"throw",e)}i(void 0)}))}}function NL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NL(Object(n),!0).forEach((function(t){GL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||qL(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qL(e,t){if(e){if("string"==typeof e)return $L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$L(e,t):void 0}}function $L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}LL.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,toSave:c.a.bool,publicKey:c.a.string,clientSecret:c.a.string,handleSource:c.a.func};var JL=function(e){var t=e.UIComponent,n=e.business,r=e.category,o=e.product,s=e.handleUpdateBusinessState,c=e.businessState,l=e.setDataSelected,f=YL(yn(),1)[0].loading,p=YL(rn(),1)[0],d=YL(Bn(),2)[1],y=YL(Br(),2)[1].showToast,h=YL(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),v=h[0],m=h[1],b=YL(Object(i.useState)(!1),2),g=b[0],O=b[1],w=YL(Object(i.useState)(!1),2),j=w[0],S=w[1],E=function(){var e=ML(a.a.mark((function e(t){var r,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dr.Info,d("LOADING","Loading")),m(zL(zL({},v),{},{loading:!0})),e.next=7,p.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(null==o?void 0:o.category_id)).products(null==o?void 0:o.id).save(t);case 7:r=e.sent,i=r.content,u=i.error,c=i.result,u?m(zL(zL({},v),{},{loading:!1,result:{error:!0,result:c}})):(m(zL(zL({},v),{},{loading:!1,result:{error:!1,result:c}})),s&&((l=FL(null==n?void 0:n.categories)).forEach((function e(n){if(n.id===(null==o?void 0:o.category_id)){var r=n.products.map((function(e){return e.id===o.id?zL(zL({},e),t):e}));n.products=FL(r)}Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),s(zL(zL({},n),{},{categories:l}))),y(Dr.Success,d("PRODUCT_UPDATED","Product updated")),O(!1)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),m(zL(zL({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=ML(a.a.mark((function e(){var t,r,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dr.Info,d("LOADING","Loading")),m(zL(zL({},v),{},{loading:!0})),e.next=7,p.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(null==o?void 0:o.category_id)).products(null==o?void 0:o.id).delete();case 7:t=e.sent,r=t.content,i=r.error,u=r.result,i?m(zL(zL({},v),{},{loading:!1,result:{error:!0,result:u}})):(m(zL(zL({},v),{},{loading:!1,result:{error:!1,result:u}})),s&&((c=FL(null==n?void 0:n.categories)).forEach((function e(t){if(t.id===(null==o?void 0:o.category_id)){var n=t.products.filter((function(e){return e.id!==o.id}));t.products=FL(n)}Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),s(zL(zL({},n),{},{categories:c}))),y(Dr.Success,d("PRODUCT_DELETED","Product deleted"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),m(zL(zL({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=ML(a.a.mark((function e(t,r){var i,u,c,l,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dr.Info,d("LOADING","Loading")),e.next=6,p.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(null==o?void 0:o.category_id)).products(t).save(r);case 6:i=e.sent,u=i.content,c=u.error,l=u.result,c?m(zL(zL({},v),{},{loading:!1,result:{error:!0,result:l}})):(s&&((h=FL(null==n?void 0:n.categories)).forEach((function e(n){if(n.id===(null==o?void 0:o.category_id)){var r=n.products.map((function(e){return e.id===t?zL(zL({},e),{},{rank:null==l?void 0:l.rank}):e}));n.products=FL(r)}Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),s(zL(zL({},n),{},{categories:h}))),y(Dr.Success,d("PRODUCT_UPDATED","Product updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),m(zL(zL({},v),{},{loading:!1,result:{error:!0,result:[e.t0.message]}}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&m(zL(zL({},v),{},{changes:zL({},o)}))}),[o,c]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,BL({},e,{handleChangeProductActive:function(e){E({enabled:e})},handleUpdateClick:function(){var e,t,n,r,o,a,i={images:null==v||null===(e=v.changes)||void 0===e?void 0:e.images,name:null==v||null===(t=v.changes)||void 0===t?void 0:t.name,description:null==v||null===(n=v.changes)||void 0===n?void 0:n.description,price:null==v||null===(r=v.changes)||void 0===r?void 0:r.price,fee_fixed:null==v||null===(o=v.changes)||void 0===o?void 0:o.fee_fixed,fee_percentage:null==v||null===(a=v.changes)||void 0===a?void 0:a.fee_percentage};for(var u in i)null===i[u]&&delete i[u];E(i)},deleteProduct:P,productFormState:v,handleChangeInput:function(e){m(zL(zL({},v),{},{changes:zL(zL({},v.changes),{},GL({},e.target.name,e.target.value))})),O(!0)},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){m(zL(zL({},v),{},{changes:zL(zL({},v.changes),{},{images:t.result})}))},t.onerror=function(e){return console.log(e)},O(!0)},isEditMode:g,handleDragStart:function(e,t){e.dataTransfer.setData("transferProductId",t);var n=document.createElement("div");n.classList.add("ghostDragging"),n.innerHTML=null==o?void 0:o.name,document.body.appendChild(n),e.dataTransfer.setDragImage(n,0,0),S(!1)},handleDragOver:function(e,t){e.preventDefault();var n=e.target.closest(".draggable-product");if(n)if(t){var r=window.scrollY+e.target.getBoundingClientRect().top+e.target.offsetHeight/2;e.clientY>r?(S(!0),l("")):(S(!1),l(n.dataset.index))}else l(n.dataset.index)},handleDrop:function(e){e.preventDefault();var t,n=parseInt(e.dataTransfer.getData("transferProductId"));if(j){var a=r.products.sort((function(e,t){return e.rank-t.rank})),i=a.length,u=a.findIndex((function(e){return e.id===o.id}));t=u===i-1?a[u].rank+1:a[u+1].rank}else t=null==o?void 0:o.rank;S(!1),C(n,{rank:t})},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);l("")},isProductsBottom:j})))};function VL(){return VL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VL.apply(this,arguments)}function HL(e){return function(e){if(Array.isArray(e))return nB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tB(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function KL(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){WL(a,r,o,i,u,"next",e)}function u(e){WL(a,r,o,i,u,"throw",e)}i(void 0)}))}}function XL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XL(Object(n),!0).forEach((function(t){QL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function QL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||tB(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tB(e,t){if(e){if("string"==typeof e)return nB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nB(e,t):void 0}}function nB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}JL.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,product:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},JL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rB=function(e){var t=e.UIComponent,n=e.handleUpdateBusinessState,r=e.business,o=e.category,s=e.categorySelected,c=e.setCategorySelected,l=e.setDataSelected,f=eB(yn(),1)[0].loading,p=eB(rn(),1)[0],d=eB(Bn(),2)[1],y=eB(Br(),2)[1].showToast,h=eB(Object(i.useState)({changes:{},loading:!1,result:{error:!1}}),2),v=h[0],m=h[1],b=eB(Object(i.useState)(!1),2),g=b[0],O=b[1],w=eB(Object(i.useState)(!1),2),j=w[0],S=w[1],E=function(){var e=KL(a.a.mark((function e(t,o){var i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dr.Info,d("LOADING","Loading")),e.next=6,p.businesses(parseInt(null==r?void 0:r.id)).categories(t).save(o);case 6:i=e.sent,(u=i.content).error||((s=HL(null==r?void 0:r.categories)).forEach((function e(n){n.id===t&&(n.rank=u.result.rank),Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),n(ZL(ZL({},r),{},{categories:s})),y(Dr.Success,d("CATEOGORY_UPDATED","Category updated"))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),m(ZL(ZL({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=KL(a.a.mark((function e(t){var i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dr.Info,d("LOADING","Loading")),m(ZL(ZL({},v),{},{loading:!0})),e.next=7,p.businesses(parseInt(null==r?void 0:r.id)).categories(parseInt(o.id)).save(t);case 7:i=e.sent,u=i.content,s=u.error,c=u.result,s?m(ZL(ZL({},v),{},{loading:!1,result:{error:!0,result:c}})):(m(ZL(ZL({},v),{},{loading:!1,result:{error:!1,result:c}})),O(!1),n&&((l=HL(r.categories)).forEach((function e(t){t.id===c.id&&(t.name=null==c?void 0:c.name,t.enabled=null==c?void 0:c.enabled,t.image=null==c?void 0:c.image),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),n(ZL(ZL({},r),{},{categories:l}))),y(Dr.Success,d("CATEOGORY_UPDATED","Category updated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),m(ZL(ZL({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var t=KL(a.a.mark((function t(){var i,u,l,h,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,y(Dr.Info,d("LOADING","Loading")),m(ZL(ZL({},v),{},{loading:!0})),t.next=7,p.businesses(parseInt(null==r?void 0:r.id)).categories(parseInt(o.id)).delete();case 7:i=t.sent,u=i.content,l=u.error,h=u.result,l?m(ZL(ZL({},v),{},{loading:!1,result:{error:!0,result:h}})):(m(ZL(ZL({},v),{},{loading:!1,result:{error:!1,result:h}})),n&&((b=HL(r.categories)).forEach((function e(t,n,r){t.id===o.id&&r.splice(n,1),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),n(ZL(ZL({},r),{},{categories:b})),o.id===s.id&&c(b[0])),y(Dr.Success,d("CATEOGORY_DELETED","Category deleted")),e.onClose&&e.onClose(o.id)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),m(ZL(ZL({},v),{},{loading:!1,result:{error:!0,result:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m(ZL(ZL({},v),{},o?{changes:ZL({},o)}:{changes:{}}))}),[o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,VL({},e,{handelChangeCategoryActive:function(e){P({enabled:e})},categoryFormState:v,isCategoriesBottom:j,handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){m(ZL(ZL({},v),{},{changes:ZL(ZL({},v.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)},O(!0)},handleUpdateClick:function(){var e,t,n={name:null==v||null===(e=v.changes)||void 0===e?void 0:e.name,image:null==v||null===(t=v.changes)||void 0===t?void 0:t.image};for(var r in n)null===n[r]&&delete n[r];P(n)},deleteCategory:C,handleInputChange:function(e){m(ZL(ZL({},v),{},{changes:ZL(ZL({},v.changes),{},QL({},e.target.name,e.target.value))})),O(!0)},isEditMode:g,handleDragStart:function(e){e.dataTransfer.setData("transferCategoryId",null==o?void 0:o.id);var t=document.createElement("div");t.classList.add("ghostDragging"),t.innerHTML=o.name,document.body.appendChild(t),e.dataTransfer.setDragImage(t,0,0),S(!1)},handleDragOver:function(e,t){e.preventDefault();var n=e.target.closest(".draggable-category");if(n)if(t){var r=window.scrollY+e.target.getBoundingClientRect().top+e.target.offsetHeight/2;e.clientY>r?(S(!0),l("")):(S(!1),l(n.dataset.index))}else l(n.dataset.index)},handleDrop:function(e){e.preventDefault();var t,n=parseInt(e.dataTransfer.getData("transferCategoryId"));t=j?(null==o?void 0:o.rank)+1:null==o?void 0:o.rank,S(!1),E(n,{rank:t})},handleDragEnd:function(){l("");for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0])}})))};function oB(){return oB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oB.apply(this,arguments)}function aB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function iB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iB(Object(n),!0).forEach((function(t){sB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cB(e){return function(e){if(Array.isArray(e))return pB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fB(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||fB(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fB(e,t){if(e){if("string"==typeof e)return pB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pB(e,t):void 0}}function pB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}rB.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,category:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dB=function(e){var t=e.UIComponent,n=e.category,r=e.handleUpdateCategoryList,o=e.categoryList,s=e.staticConfigs,c=e.handleChangeStaic,l=lB(Object(i.useState)(null),2),f=l[0],p=l[1],d=lB(yn(),1)[0].loading,y=lB(rn(),1)[0],h=lB(Br(),2)[1].showToast,v=lB(Bn(),2)[1],m=lB(tr(),2)[1].refreshConfigs,b=lB(Object(i.useState)({changes:null,loading:!1,result:{error:null},API:!1,finalResult:[]}),2),g=b[0],O=b[1],w=function(e,t){var n,r=[],o=null==g||null===(n=g.changes)||void 0===n?void 0:n.find((function(e){return e.id===t}));if(o)r=null==g?void 0:g.changes.map((function(n){return n.id===t?uB(uB({},n),{},{value:e}):n}));else{null!=g&&g.changes&&(r=cB(null==g?void 0:g.changes));var a=f.find((function(e){return e.id===t}));r.push(uB(uB({},a),{},{value:e}))}var i=f.map((function(n){return n.id===t?uB(uB({},n),{},{value:e}):n}));O(uB(uB({},g),{},{changes:r})),p(i)},j=function(e){return"["+e+"]"},S=function(){var e,t=(e=a.a.mark((function e(t,i){var u,s,l,f,p,b,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(Dr.Info,v("LOADING","Loading")),O(uB(uB({},g),{},{loading:!0,API:!1})),e.next=7,y.configs(t).save(i);case 7:u=e.sent,s=u.content,l=s.error,f=s.result,l?O(uB(uB({},g),{},{loading:!1,result:{error:!0,result:f},API:!1})):(p=null!=g&&g.changes?null==g?void 0:g.changes.filter((function(e){return e.id!==f.id})):[],b=null==g?void 0:g.finalResult.map((function(e){return e.id===f.id?uB(uB({},e),{},{value:null==f?void 0:f.value}):e})),p.length>0?O({loading:!1,changes:p,result:{error:!1,result:f},API:!0,finalResult:b}):(O({loading:!1,changes:null,result:{error:!1,result:"ok"},API:!1,finalResult:b}),h(Dr.Success,v("SETTINGS_UPDATE","Settings updated")),r&&(w=null==o?void 0:o.categories.map((function(e){return e.id===n.id?uB(uB({},e),{},{configs:b}):e})),r(w)),c&&c(cB(b)),m&&m())),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),O(uB(uB({},g),{},{loading:!1,result:{error:!0,result:e.t0},API:!1}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){aB(a,r,o,i,u,"next",e)}function u(e){aB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if((null==n?void 0:n.configs.length)>0){var e=cB(null==n?void 0:n.configs);p(e),O(uB(uB({},g),{},{finalResult:e}))}}),[null==n?void 0:n.configs]),Object(i.useEffect)((function(){s&&(p(cB(s)),O(uB(uB({},g),{},{finalResult:cB(s)})))}),[s]),Object(i.useEffect)((function(){var e;if(null!=g&&g.API&&(null==g||null===(e=g.changes)||void 0===e?void 0:e.length)>0){var t={key:null==g?void 0:g.changes[0].key,value:null==g?void 0:g.changes[0].value};S(null==g?void 0:g.changes[0].id,t)}}),[null==g?void 0:g.API]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,oB({},e,{settingsState:g,configs:f,handleInputChange:w,handleCheckBoxChange:function(e,t,n){var r,o=parseInt(e.target.getAttribute("data-id"));if(t){var a=""===n?[]:n.split("|"),i=a.indexOf(e.target.name);-1===i&&e.target.checked&&a.push(e.target.name),!e.target.checked&&i>=0&&a.splice(i,1),r=a.join("|")}else{var u=cB(JSON.parse(n)),s=u.indexOf(parseInt(e.target.name));-1===s&&e.target.checked&&u.push(parseInt(e.target.name)),!e.target.checked&&s>=0&&u.splice(s,1),r=JSON.stringify(u)}w(r,o)},handleClickUpdate:function(){var e;if(null!=g&&g.changes&&0!==(null==g||null===(e=g.changes)||void 0===e?void 0:e.length)){var t=null==g?void 0:g.changes.map((function(e){return"driver_tip_options"===e.key?uB(uB({},e),{},{value:j(null==e?void 0:e.value)}):e}));O(uB(uB({},g),{},{changes:cB(t),API:!0}))}},formState:g,handleChangeFormState:O,saveConfig:S})))};dB.propTypes={UIComponent:c.a.elementType,category:c.a.object,staticConfigs:c.a.arrayOf(s.object),categoryList:c.a.object,handleUpdateCategoryList:c.a.func,handleChangeStaic:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},dB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var yB=n(12);function hB(){return hB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hB.apply(this,arguments)}function vB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mB(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){vB(a,r,o,i,u,"next",e)}function u(e){vB(a,r,o,i,u,"throw",e)}i(void 0)}))}}function bB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gB(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var OB=function(e){var t=e.UIComponent,n=e.requirements,r=e.toSave,o=e.handleSource,s=e.onNewCard,c=bB(yn(),1)[0].user,l=bB(rn(),1)[0],f=Object(yB.useStripe)(),p=Object(yB.useElements)(),d=bB(Object(i.useState)(null),2),y=d[0],h=d[1],v=bB(Object(i.useState)(!1),2),m=v[0],b=v[1],g=function(){var e=mB(a.a.mark((function e(t,n,r){var o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(l.root,"/payments/stripe/cards"),{method:"POST",headers:{Authorization:"Bearer ".concat(null==n||null===(o=n.session)||void 0===o?void 0:o.access_token),"Content-Type":"application/json"},body:JSON.stringify({business_id:r,gateway:"stripe",token_id:t,user_id:null==n?void 0:n.id})});case 2:return i=e.sent,e.next=5,i.json();case 5:u=e.sent,s&&s(u.result);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),O=function(){var t=mB(a.a.mark((function t(i){var u,s,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b(!0),i.preventDefault(),u=null==p?void 0:p.getElement(yB.CardElement),n){t.next=10;break}return t.next=6,f.createPaymentMethod({type:"card",card:u,billing_details:{name:"".concat(c.name," ").concat(c.lastname),email:c.email,address:c.address}});case 6:(s=t.sent).error?(b(!1),h(s.error.message)):(b(!1),h(null),o&&o({id:null==s?void 0:s.paymentMethod.id,type:"card",card:{brand:null==s?void 0:s.paymentMethod.card.brand,last4:null==s?void 0:s.paymentMethod.card.last4}})),t.next=14;break;case 10:return t.next=12,f.confirmCardSetup(n,{payment_method:{card:u,billing_details:{name:"".concat(c.name," ").concat(c.lastname),email:c.email,address:c.address}}});case 12:(l=t.sent).error?(b(!1),h(l.error.message)):(b(!1),h(null),r&&g(l.setupIntent.payment_method,c,e.businessId));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return u.a.createElement(t,hB({},e,{handleSubmit:O,error:y,loading:m,handleChange:function(e){e.error?h(e.error.message):h(null)}}))};function wB(){return wB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wB.apply(this,arguments)}function jB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}OB.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,clientSecret:c.a.string,autosave:c.a.bool,handlerToken:c.a.func},OB.defaultProps={autosave:!0};var SB=function(e){var t=e.UIComponent,n=e.handleStripeRedirect,r=function(){var e,t=(e=a.a.mark((function e(t){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.type,o=t.name,i=t.email,n&&n({type:r,owner:{name:o,email:i}});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jB(a,r,o,i,u,"next",e)}function u(e){jB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,wB({},e,{handleSubmitPaymentMethod:r})))};function EB(){return EB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EB.apply(this,arguments)}SB.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},SB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var PB=function(e){var t=e.handleClick,n=e.btnText,r=e.btnValue,o=e.UIComponent;return u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,EB({},e,{handleButtonClick:t,btnText:n,btnValue:r})))};function CB(){return CB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CB.apply(this,arguments)}function IB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IB(Object(n),!0).forEach((function(t){AB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function AB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function _B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kB(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}PB.propTypes={UIComponent:c.a.elementType,btnText:c.a.string.isRequired,btnValue:c.a.number,handleClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},PB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var DB=function(e){var t=e.UIComponent,n=e.code,r=e.random,o=e.handleSuccessResetPassword,s=_B(Object(i.useState)({loading:!1,result:{error:!1}}),2),c=s[0],l=s[1],f=_B(Object(i.useState)({code:n,random:r,password:""}),2),p=f[0],d=f[1],y=_B(rn(),1)[0],h=function(){var e,t=(e=a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(xB(xB({},c),{},{loading:!0})),e.next=4,y.users().resetPassword(p);case 4:t=e.sent,n=t.response,r=n.data,l({result:r,loading:!1}),r.error||o&&o(r.result),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&l({result:{error:!0,result:e.t0.message},loading:!1});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){TB(a,r,o,i,u,"next",e)}function u(e){TB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,CB({},e,{handleResetPassword:h,handleChangeInput:function(e){d(xB(xB({},p),{},AB({},e.target.name,e.target.value)))},resetPasswordData:p,formState:c})))};function UB(){return UB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UB.apply(this,arguments)}function LB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function BB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BB(Object(n),!0).forEach((function(t){RB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function RB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MB(e){return function(e){if(Array.isArray(e))return GB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zB(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||zB(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zB(e,t){if(e){if("string"==typeof e)return GB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GB(e,t):void 0}}function GB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}DB.propTypes={UIComponent:c.a.elementType,code:c.a.string,random:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},DB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var YB=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=NB(rn(),1)[0],l=NB(Object(i.useState)({loading:!0,error:null,brands:[],pagination:null}),2),f=l[0],p=l[1],d=NB(Object(i.useState)(null),2),y=d[0],h=d[1],v=NB(Object(i.useState)(!1),2),m=v[0],b=v[1],g=NB(yn(),1)[0],O=g.token,w=g.loading,j=g.user,S=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s,l,d,y,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,p(FB(FB({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O)}},n=[],0===(null==j?void 0:j.level)){e.next=11;break}return e.next=9,c.setAccessToken(O).businesses().select(["franchise_id"]).asDashboard().get();case 9:(r=e.sent).content.error||(n=null===(i=r.content.result)||void 0===i?void 0:i.reduce((function(e,t){return[].concat(MB(e),[t.franchise_id])}),[]).filter((function(e){return e})));case 11:return u="".concat(c.root,"/franchises?params=").concat(o),e.next=14,fetch(u,t);case 14:return s=e.sent,e.next=17,s.json();case 17:l=e.sent,d=l.error,y=l.result,h=l.pagination,d?p(FB(FB({},f),{},{loading:!1,error:y})):(v=0===(null==j?void 0:j.level)?null==y?void 0:y.filter((function(e){return e.enabled})):null==y?void 0:y.filter((function(e){return e.enabled&&n.includes(e.id)})),p(FB(FB({},f),{},{loading:!1,brands:v,pagination:h}))),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),p(FB(FB({},f),{},{loading:!1,error:e.t0}));case 27:case"end":return e.stop()}}),e,null,[[2,24]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){LB(a,r,o,i,u,"next",e)}function u(e){LB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return S(),e.abort()}),[]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==f||null===(e=f.brands)||void 0===e?void 0:e.length)){var o=null===(t=f.brands)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(MB(e),[t.id])}),[]);h(MB((null==n?void 0:n.franchises_id)||o)),null!=n&&n.franchises_id&&(null==n||null===(r=n.franchises_id)||void 0===r?void 0:r.length)!==(null==f?void 0:f.brands.length)||b(!0)}}),[null==f?void 0:f.brands]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,UB({},e,{brandList:f,brandIds:y,handleChangeBrandId:function(e){if(null==y?void 0:y.find((function(t){return t===e}))){var t=null==y?void 0:y.filter((function(t){return t!==e}));h(t),b(!1)}else{var n=y?MB(y):[];n.push(e),n.length===(null==f?void 0:f.brands.length)&&b(!0),h(n)}},handleClickFilterButton:function(){var e=y?MB(y):null;r(FB(FB({},n),{},{franchises_id:e})),s&&s()},isAllCheck:m,handleChangeAllCheck:function(){if(m)h(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=zB(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(f.brands);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}h(t)}b(!m)}})))};function qB(){return qB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qB.apply(this,arguments)}function $B(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function JB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JB(Object(n),!0).forEach((function(t){HB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WB(e){return function(e){if(Array.isArray(e))return ZB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||XB(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||XB(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XB(e,t){if(e){if("string"==typeof e)return ZB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ZB(e,t):void 0}}function ZB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}YB.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},YB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","logo","description","header","enabled","created_at","updated_at"]};var QB=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=KB(rn(),1)[0],l=KB(Object(i.useState)({loading:!0,error:null,appIds:[],pagination:null}),2),f=l[0],p=l[1],d=KB(Object(i.useState)(null),2),y=d[0],h=d[1],v=KB(Object(i.useState)(!1),2),m=v[0],b=v[1],g=KB(yn(),1)[0],O=g.token,w=g.loading,j=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(VB(VB({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O)}},n="".concat(c.root,"/sites?params=").concat(o),e.next=8,fetch(n,t);case 8:return r=e.sent,e.next=11,r.json();case 11:i=e.sent,u=i.error,s=i.result,l=i.pagination,p(VB(VB({},f),{},u?{loading:!1,error:s}:{loading:!1,appIds:s,pagination:l})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),p(VB(VB({},f),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$B(a,r,o,i,u,"next",e)}function u(e){$B(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return j(),e.abort()}),[]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==f||null===(e=f.appIds)||void 0===e?void 0:e.length)){var o=null===(t=f.appIds)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(WB(e),[t.id])}),[]);h(WB((null==n?void 0:n.app_ids)||o)),null!=n&&n.app_ids&&(null==n||null===(r=n.app_ids)||void 0===r?void 0:r.length)!==(null==f?void 0:f.appIds.length)||b(!0)}}),[null==f?void 0:f.appIds]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,qB({},e,{appIdList:f,appIds:y,handleChangeAppId:function(e){if(null==y?void 0:y.find((function(t){return t===e}))){var t=null==y?void 0:y.filter((function(t){return t!==e}));h(t),b(!1)}else{var n=y?WB(y):[];n.push(e),n.length===(null==f?void 0:f.appIds.length)&&b(!0),h(n)}},handleClickFilterButton:function(){var e=y?WB(y):null;r(VB(VB({},n),{},{app_ids:e})),s&&s()},isAllCheck:m,handleChangeAllCheck:function(){if(m)h(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=XB(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(f.appIds);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}h(t)}b(!m)}})))};function eF(){return eF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eF.apply(this,arguments)}function tF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function nF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nF(Object(n),!0).forEach((function(t){oF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aF(e){return function(e){if(Array.isArray(e))return sF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||uF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||uF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uF(e,t){if(e){if("string"==typeof e)return sF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sF(e,t):void 0}}function sF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}QB.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},QB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","logo","description","header","enabled","created_at","updated_at"]};var cF=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=e.setAvailableDriverIds,l=iF(rn(),1)[0],f=iF(Object(i.useState)({loading:!0,error:null,driverGroups:[],pagination:null}),2),p=f[0],d=f[1],y=iF(Object(i.useState)(null),2),h=y[0],v=y[1],m=iF(Object(i.useState)(!1),2),b=m[0],g=m[1],O=iF(yn(),1)[0],w=O.token,j=O.loading,S=iF(Object(i.useState)(null),2),E=S[0],P=S[1],C=new RegExp(/^[A-Za-z0-9\s]+$/g),I=function(e){if(e){var t=[];p.driverGroups.forEach((function(n){e.includes(n.id)&&n.drivers.forEach((function(e){t.push(e.id)}))}));var n=t.filter((function(e,t,n){return n.indexOf(e)===t}));c(n)}else c(null)},x=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s,c,f,y,h,v,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(rF(rF({},p),{},{loading:!0})),t=null,n=[],E&&(r=[],i=C.test(E),r.push({attribute:"name",value:{condition:"ilike",value:i?encodeURI("%".concat(E,"%")):"%".concat(E,"%")}}),n.push({conector:"AND",conditions:r})),n.length&&(t={conditions:n,conector:"AND"}),u={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}},s=t?"".concat(l.root,"/drivergroups?params=").concat(o,"&where=").concat(JSON.stringify(n[0])):"".concat(l.root,"/drivergroups?params=").concat(o),e.next=12,fetch(s,u);case 12:return c=e.sent,e.next=15,c.json();case 15:f=e.sent,y=f.error,h=f.result,v=f.pagination,y?d(rF(rF({},p),{},{loading:!1,error:h})):(m=null==h?void 0:h.filter((function(e){return e.enabled})),d(rF(rF({},p),{},{loading:!1,driverGroups:m,pagination:v}))),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),d(rF(rF({},p),{},{loading:!1,error:e.t0}));case 25:case"end":return e.stop()}}),e,null,[[2,22]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){tF(a,r,o,i,u,"next",e)}function u(e){tF(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return x(),e.abort()}),[]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==p||null===(e=p.driverGroups)||void 0===e?void 0:e.length)){var o=null==p||null===(t=p.driverGroups)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(aF(e),[t.id])}),[]);v(aF((null==n?void 0:n.driver_groups_ids)||o)),null!=n&&n.driver_groups_ids&&(null==n||null===(r=n.driver_groups_ids)||void 0===r?void 0:r.length)!==(null==p?void 0:p.driverGroups.length)||g(!0)}}),[null==p?void 0:p.driverGroups]),Object(i.useEffect)((function(){var e=new AbortController;return x(),e.abort()}),[E]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,eF({},e,{driverGroupList:p,driverGroupIds:h,handleChangeDriverGroupId:function(e){if(null==h?void 0:h.find((function(t){return t===e}))){var t=null==h?void 0:h.filter((function(t){return t!==e}));v(t),g(!1)}else{var n=h?aF(h):[];n.push(e),n.length===(null==p?void 0:p.driverGroups.length)&&g(!0),v(n)}},handleClickFilterButton:function(){var e=h?aF(h):null;r(rF(rF({},n),{},{driver_groups_ids:e})),s&&s(),c&&I(e)},isAllCheck:b,handleChangeAllCheck:function(){if(b)v(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=uF(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(p.driverGroups);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}v(t)}g(!b)},searchValue:E,onSearch:P})))};function lF(){return lF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lF.apply(this,arguments)}function fF(e){return function(e){if(Array.isArray(e))return gF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function dF(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){pF(a,r,o,i,u,"next",e)}function u(e){pF(a,r,o,i,u,"throw",e)}i(void 0)}))}}function yF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yF(Object(n),!0).forEach((function(t){vF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||bF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bF(e,t){if(e){if("string"==typeof e)return gF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gF(e,t):void 0}}function gF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cF.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","enabled","drivers"]};var OF=function(e){var t=e.site,n=e.sitesList,r=e.UIComponent,o=e.handleSuccessUpdateSites,s=mF(Bn(),2)[1],c=mF(rn(),1)[0],l=mF(yn(),1)[0].token,f=mF(Br(),2)[1].showToast,p=mF(Object(i.useState)({site:t||{},loading:!1,error:null}),2),d=p[0],y=p[1],h=mF(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=h[0],m=h[1],b=mF(Object(i.useState)(!1),2),g=b[0],O=b[1],w=function(){return m({loading:!1,changes:{},error:null})},j=function(){var e=dF(a.a.mark((function e(){var r,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,s("LOADING","Loading")),m(hF(hF({},v),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(v.changes)},e.next=6,fetch("".concat(c.root,"/sites/").concat(t.id),r);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?m(hF(hF({},v),{},{loading:!1,error:u.result})):(y(hF(hF({},d),{},{site:u.result})),w(),o&&(p=n.filter((function(e){return e.id===t.id&&Object.assign(e,u.result),!0})),o(p)),f(Dr.Success,s("SITE_SAVED","Site saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(hF(hF({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var r=dF(a.a.mark((function r(){var i,u,p,d;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,f(Dr.Info,s("LOADING","Loading")),m(hF(hF({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},r.next=6,fetch("".concat(c.root,"/sites/").concat(t.id),i);case 6:return u=r.sent,r.next=9,u.json();case 9:(p=r.sent).error?m(hF(hF({},v),{},{loading:!1,error:p.result})):(o&&(d=n.filter((function(e){return e.id!==t.id})),o(d)),f(Dr.Success,s("SITE_DELETED","Site deleted")),e.onClose&&e.onClose()),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),m(hF(hF({},v),{},{loading:!1,error:[r.t0.message]}));case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(){return r.apply(this,arguments)}}(),E=function(){var t=dF(a.a.mark((function t(){var r,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Dr.Info,s("LOADING","Loading")),m(hF(hF({},v),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(v.changes)},t.next=6,fetch("".concat(c.root,"/sites"),r);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?m(hF(hF({},v),{},{loading:!1,error:u.result})):(w(),f(Dr.Success,s("SITE_ADDED","Site added")),o&&o([].concat(fF(n),[u.result])),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(hF(hF({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){t?(O(!1),w(),y(hF(hF({},d),{},{site:t}))):(O(!0),y(hF(hF({},d),{},{site:{}})))}),[t]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,lF({},e,{siteState:d,formState:v,isAddMode:g,handleChangeInput:function(e){m(hF(hF({},v),{},{changes:hF(hF({},v.changes),{},vF({},e.target.name,e.target.value))}))},handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){m(hF(hF({},v),{},{changes:hF(hF({},v.changes),{},vF({},t,n.result))}))},n.onerror=function(e){return console.log(e)}},handleUpdateSite:j,handleDeleteSite:S,handleAddSite:E})))};function wF(){return wF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wF.apply(this,arguments)}function jF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jF(Object(n),!0).forEach((function(t){EF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function CF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return IF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IF(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}OF.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},OF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xF=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.isSearchByName,s=e.isSearchByDescription,c=CF(rn(),1)[0],l=CF(yn(),1)[0].token,f=CF(Object(i.useState)({loading:!1,sites:[],error:null}),2),p=f[0],d=f[1],y=CF(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),h=y[0],v=y[1],m=CF(Object(i.useState)(null),2),b=m[0],g=m[1],O=function(){var e,t=(e=a.a.mark((function e(t,n){var r,i,u,f,y,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(SF(SF({},p),{},{loading:!0})),r=null,i=[],b&&(u=[],o&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}),s&&u.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(r={conditions:i,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},y=r?"".concat(c.root,"/sites?page=").concat(t,"&page_size=").concat(n,"&&where=").concat(JSON.stringify(r)):"".concat(c.root,"/sites?page=").concat(t,"&page_size=").concat(n),e.next=10,fetch(y,f);case 10:return m=e.sent,e.next=13,m.json();case 13:(g=e.sent).error?d(SF(SF({},p),{},{loading:!1,error:g.result})):(d({loading:!1,sites:g.result,error:null}),v(SF(SF({},h),{},{currentPage:g.pagination.current_page,totalPages:g.pagination.total_pages,totalItems:g.pagination.total,from:g.pagination.from,to:g.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),d(SF(SF({},p),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){PF(a,r,o,i,u,"next",e)}function u(e){PF(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p.loading||O(1,h.pageSize)}),[b]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,wF({},e,{paginationProps:h,setPaginationProps:v,sitesListState:p,searchValue:b,onSearch:g,getSites:O,handleSuccessUpdateSites:function(e){d(SF(SF({},p),{},{sites:e}))}})))};function AF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return TF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TF(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xF.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var _F=function(e){var t=e.trackId,n=e.children,r=AF(zn(),1)[0],o=AF(Object(i.useState)(!1),2),a=o[0],s=o[1];Object(i.useEffect)((function(){if(t){if(!window.document.getElementById("google-analytics-sdk")){var e=window.document.createElement("script");return e.id="google-analytics-sdk",e.async=!0,e.defer=!0,e.src="https://www.google-analytics.com/analytics.js",e.onload=function(){s(!0),window.ga("create",t),window.ga("require","ec"),window.ga("set","page",window.location.pathname),window.ga("send","pageview")},window.document.body.appendChild(e),function(){e.onload=null}}"undefined"!=typeof ga&&s(!0)}}),[t]);var c=function(e){window.ga("set","page",null==e?void 0:e.page),window.ga("send","pageview")},l=function(e){window.ga("ec:addProduct",{id:e.id,name:e.name,category:e.category_id,price:e.price}),window.ga("ec:setAction","click"),window.ga("send","event","UI","click","add to cart")},f=function(e){window.ga("ec:addProduct",{id:e.id,name:e.name,category:e.category_id,price:e.price,quantity:e.quantity}),window.ga("ec:setAction","add"),window.ga("send","event","UI","click","add to cart")},p=function(e){window.ga("set","userId",e.id)},d=function(e){var t;window.ga("ec:setAction","purchase",{id:null==e?void 0:e.id,affiliation:null===(t=e.business)||void 0===t?void 0:t.name,revenue:e.total,tax:e.tax_total,shipping:e.delivery_zone_price})};return Object(i.useEffect)((function(){return console.log("Analytic Ready"),a&&window.ga&&(r.on("change_view",c),r.on("userLogin",p),r.on("product_clicked",l),r.on("product_added",f),r.on("order_placed",d)),function(){a&&window.ga&&(r.off("change_view",c),r.off("userLogin",p),r.off("product_clicked",l),r.off("product_added",f),r.off("order_placed",d))}}),[a]),u.a.createElement(u.a.Fragment,null,n)};function kF(){return kF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kF.apply(this,arguments)}function DF(e){return function(e){if(Array.isArray(e))return zF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||NF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UF(Object(n),!0).forEach((function(t){BF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function RF(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){FF(a,r,o,i,u,"next",e)}function u(e){FF(a,r,o,i,u,"throw",e)}i(void 0)}))}}function MF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||NF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NF(e,t){if(e){if("string"==typeof e)return zF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zF(e,t):void 0}}function zF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}_F.propTypes={trackId:c.a.string.isRequired},_F.defaultProps={};var GF=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.propsToFetch,s=e.isSearchByUserId,c=e.isSearchByUserEmail,l=e.isSearchByUserPhone,f=e.isSearchByUserName,p=e.isBusinessOwners,d=e.defaultUserTypesSelected,y=e.disabledActiveStateCondition,h=e.isDriver,v=MF(rn(),1)[0],m=MF(yn(),1)[0],b=MF(Br(),2)[1].showToast,g=MF(Bn(),2)[1],O=MF(Object(i.useState)({users:[],loading:!1,error:null}),2),w=O[0],j=O[1],S=MF(Object(i.useState)({clear:!1,changes:{}}),2),E=S[0],P=S[1],C=MF(Object(i.useState)(null),2),I=C[0],x=C[1],A=MF(Object(i.useState)(!1),2),T=A[0],_=A[1],k=MF(Object(i.useState)(d),2),D=k[0],U=k[1],L=MF(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),B=L[0],F=L[1],R=MF(Object(i.useState)({}),2),M=R[0],N=R[1],z=MF(Object(i.useState)(!0),2),G=z[0],Y=z[1],q=MF(Object(i.useState)({loading:!1,error:null}),2),$=q[0],J=q[1],V=MF(Object(i.useState)([]),2),H=V[0],W=V[1],K=MF(Object(i.useState)({loading:!1,error:null}),2),X=K[0],Z=K[1],Q=function(){var e=RF(a.a.mark((function e(t,n){var r,i,u,d,h,b,g,O,S,P,C,x,A,_,k,U,L;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(LF(LF({},w),{},{loading:!0})),r={},i={page:t,page_size:n||B.pageSize},p||(r=LF({},i)),u=null,d=[],y||d.push({attribute:"enabled",value:G}),T&&((h=[]).push({attribute:"email_verified",value:!0}),h.push({attribute:"phone_verified",value:!0}),d.push({conector:"OR",conditions:h})),D.length>0&&d.push({attribute:"level",value:D}),I&&(b=[],s&&b.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(I,"%"))}}),c&&b.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(I,"%"))}}),l&&b.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(I,"%"))}}),f&&(b.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(I,"%"))}}),b.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(I,"%"))}})),d.push({conector:"OR",conditions:b})),Object.keys(E.changes).length&&(S=[],null!=E&&null!==(g=E.changes)&&void 0!==g&&g.name&&null!==(null==E||null===(O=E.changes)||void 0===O?void 0:O.name)&&S.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(null==E||null===(P=E.changes)||void 0===P?void 0:P.name,"%"))}}),E.changes.lastname&&null!==E.changes.lastname&&S.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(E.changes.lastname,"%"))}}),E.changes.email&&null!==E.changes.email&&S.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(E.changes.email,"%"))}}),void 0!==E.changes.email_verified&&S.push({attribute:"email_verified",value:E.changes.email_verified}),E.changes.phone&&null!==E.changes.phone&&S.push({attribute:"phone",value:{condition:"ilike",value:encodeURI("%".concat(E.changes.phone,"%"))}}),void 0!==E.changes.phone_verified&&S.push({attribute:"phone_verified",value:E.changes.phone_verified}),E.changes.id&&parseInt(E.changes.id)>0&&S.push({attribute:"id",value:parseInt(E.changes.id)}),S.length&&d.push({conector:"AND",conditions:S})),d.length&&(u={conditions:d,conector:"AND"}),C=u?v.setAccessToken(m.token).users().select(o).parameters(r).where(u):v.setAccessToken(m.token).users().select(o).parameters(r),e.next=16,C.get();case 16:x=e.sent,A=x.content,_=A.result,k=A.pagination,w.users=_,j(LF(LF({},w),{},{loading:!1})),U=0,k.current_page!==k.total_pages&&(L=k.total-w.users.length,U=L<k.page_size?L:k.page_size),F(LF(LF({},B),{},{currentPage:k.current_page,pageSize:0===k.page_size?B.pageSize:k.page_size,totalPages:k.total_pages,totalItems:k.total,from:k.from,to:k.to,nextPageItems:U})),N(LF({},k)),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&j(LF(LF({},w),{},{loading:!1,error:[e.t0.message]}));case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){var e=RF(a.a.mark((function e(t){var n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Dr.Info,g("LOADING","Loading")),J(LF(LF({},$),{},{loading:!0})),{}.updateOrder=n={},e.next=8,v.setAccessToken(m.token).users(t.id).save({level:t.level},{cancelToken:n});case 8:r=e.sent,o=r.content,i=o.error,u=o.result,J(LF(LF({},$),{},{loading:!1,error:i?u:null})),i||(s=[],s=D.includes(t.level)?w.users.filter((function(e){return e.id===t.id&&(e.level=t.level),!0})):w.users.filter((function(e){return e.id!==u.id})),j(LF(LF({},w),{},{users:s})),b(Dr.Success,g("UPDATED","Updated"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),J(LF(LF({},$),{},{loading:!1,error:[e.t0.message]}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=RF(a.a.mark((function e(t){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Dr.Info,g("LOADING","Loading")),J(LF(LF({},$),{},{loading:!0})),e.next=5,v.setAccessToken(m.token).users(t.id).save({enabled:t.enabled});case 5:n=e.sent,r=n.content,o=r.error,i=r.result,J(LF(LF({},$),{},{loading:!1,error:o?i:null})),o||(h?re(i):y||(u=w.users.filter((function(e){var n=!0;return e.id===t.id&&t.enabled===!G&&(n=!1),n})),j(LF(LF({},w),{},{users:u}))),b(Dr.Success,g("UPDATED","Updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),J(LF(LF({},$),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=RF(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,J(LF(LF({},$),{},{loading:!0})),e.next=4,v.setAccessToken(m.token).users(t).delete();case 4:n=e.sent,(r=n.content).error||(o=w.users.filter((function(e){return e.id!==t})),j(LF(LF({},w),{},{users:o})),X.loading&&((i=DF(H)).shift(),0===i.length&&Z(LF(LF({},X),{},{loading:!1})),W(i)),N(LF(LF({},M),{},{total:(null==M?void 0:M.total)-1}))),J(LF(LF({},$),{},{loading:!1,error:r.error?r.result:null})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),J(LF(LF({},$),{},{loading:!1,error:[e.t0.message]})),X.loading&&Z(LF(LF({},X),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),re=function(e){var t=w.users.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));j(LF(LF({},w),{},{users:t}))};return Object(i.useEffect)((function(){X.loading&&0!==H.length&&ne(H[0])}),[H,X]),Object(i.useEffect)((function(){w.loading||Q(1,null)}),[D,G,I,T]),Object(i.useEffect)((function(){(Object.keys(null==E?void 0:E.changes).length>0||E.clear)&&!w.loading&&Q(1,null)}),[E]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,kF({},e,{actionStatus:$,usersList:w,filterValues:E,setFilterValues:P,userTypesSelected:D,handleSelectedUserTypes:function(e){U(e)},paginationProps:B,getUsers:Q,searchValue:I,onSearch:x,paginationDetail:M,selectedUserActiveState:G,isVerified:T,setIsVerified:_,handleChangeUserActiveState:function(){Y(!G)},handleChangeUserType:ee,handleChangeActiveUser:te,handleDeleteUser:ne,selectedUsers:H,handleSelectedUsers:function(e){var t;t=H.includes(e)?H.filter((function(t){return t!==e})):[].concat(DF(H),[e]),W(t)},deleteUsersActionState:X,handleDeleteSeveralUsers:function(){Z(LF(LF({},X),{},{loading:!0}))},handleSuccessUpdate:re,handleSuccessAddUser:function(e){D.includes(null==e?void 0:e.level)&&(j(LF(LF({},w),{},{users:[].concat(DF(w.users),[e])})),N(LF(LF({},M),{},{total:null!=M&&M.total?(null==M?void 0:M.total)+1:1})))},handleSuccessDeleteUser:function(e){D.includes(null==e?void 0:e.level)&&(j(LF(LF({},w),{},{users:w.users.filter((function(t){return t.id!==e.id}))})),N(LF(LF({},M),{},{total:(null==M?void 0:M.total)-1})))},handleSuccessAddressesUpdate:function(e,t){var n=w.users.filter((function(n){return n.id===e&&(n.addresses=DF(t)),!0}));j(LF(LF({},w),{},{users:n}))}})))};function YF(){return YF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YF.apply(this,arguments)}function qF(e){return function(e){if(Array.isArray(e))return ZF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||XF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$F(Object(n),!0).forEach((function(t){VF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function WF(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){HF(a,r,o,i,u,"next",e)}function u(e){HF(a,r,o,i,u,"throw",e)}i(void 0)}))}}function KF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||XF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XF(e,t){if(e){if("string"==typeof e)return ZF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ZF(e,t):void 0}}function ZF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}GF.propTypes={UIComponent:c.a.elementType,isSearchByUserId:c.a.bool,isSearchByUserEmail:c.a.bool,isSearchByUserPhone:c.a.bool,propsToFetch:c.a.arrayOf(s.string)},GF.defaultProps={propsToFetch:["name","lastname","email","phone","photo","cellphone","schedule","country_phone_code","city_id","city","address","addresses","max_days_in_future","address_notes","driver_zone_restriction","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname","birthdate","drivergroups"],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},defaultUserTypesSelected:[0,1,2,3]};var QF=function(e){var t=e.userId,n=e.UIComponent,r=KF(rn(),1)[0],o=KF(yn(),1)[0],s=KF(Object(i.useState)({metaFields:[],loading:!0,error:null}),2),c=s[0],l=s[1],f=KF(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],y=function(){var e=WF(a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(JF(JF({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/users/").concat(t,"/metafields"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,l(JF(JF({},c),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(JF(JF({},c),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=WF(a.a.mark((function e(n){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(JF(JF({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/users/").concat(t,"/metafields/").concat(n),i);case 5:e.sent.ok&&(u=c.metaFields.filter((function(e){return e.id!==n})),l(JF(JF({},c),{},{metaFields:u})),d({loading:!1,result:{error:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=WF(a.a.mark((function e(n){var i,u,s,f,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(JF(JF({},p),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)},body:JSON.stringify(n)},e.next=5,fetch("".concat(r.root,"/users/").concat(t,"/metafields"),i);case 5:return u=e.sent,e.next=8,u.json();case 8:s=e.sent,f=s.error,y=s.result,f?d({loading:!1,result:{error:!0,result:y}}):([],h=[].concat(qF(c.metaFields),[y]),l(JF(JF({},c),{},{metaFields:h})),d({loading:!1,result:{error:!1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y()}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,YF({},e,{metaFieldsList:c,actionState:p,handleDeleteMetaField:h,handeAddMetaField:v})))};function eR(){return eR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eR.apply(this,arguments)}function tR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}QF.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},QF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rR=function(e){var t=e.userTypes,n=e.onChangeUserType,r=e.defaultUserTypes,o=e.UIComponent,a=tR(Object(i.useState)(r),2),s=a[0],c=a[1];return u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,eR({},e,{userTypes:t,currentTypesSelected:s,handleChangeUserType:function(e){c(e),n(e)}})))};function oR(){return oR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oR.apply(this,arguments)}function aR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aR(Object(n),!0).forEach((function(t){uR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sR(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cR(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sR(a,r,o,i,u,"next",e)}function u(e){sR(a,r,o,i,u,"throw",e)}i(void 0)}))}}function lR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}rR.propTypes={UIComponent:c.a.elementType,userTypes:c.a.arrayOf(c.a.object),defaultUserTypes:c.a.arrayOf(c.a.number),onChangeUserType:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rR.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var pR=function(e){var t=e.userId,n=e.propsToFetch,r=e.UIComponent,o=e.handleSuccessUpdate,s=e.handleSuccessDeleteUser,c=lR(rn(),1)[0],l=lR(yn(),1)[0],f=lR(Br(),2)[1].showToast,p=lR(Bn(),2)[1],d=lR(Object(i.useState)({user:null,loading:!1,error:null}),2),y=d[0],h=d[1],v=lR(Object(i.useState)({loading:!1,error:null}),2),m=v[0],b=v[1],g=function(){var e=cR(a.a.mark((function e(){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(iR(iR({},y),{},{loading:!0})),r=c.setAccessToken(l.token).users(t).select(n),e.next=5,r.get();case 5:o=e.sent,i=o.content.result,u=Array.isArray(i)?null:i,h(iR(iR({},y),{},{loading:!1,user:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),h(iR(iR({},y),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var n=cR(a.a.mark((function n(){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(Dr.Info,p("LOADING","Loading")),b({loading:!0,error:null}),n.next=5,c.setAccessToken(l.token).users(t).delete();case 5:r=n.sent,o=r.content,b({loading:!1,error:o.error?o.result:null}),o.error||(f(Dr.Success,p("USER_DELETED","User deleted")),s&&s(y.user),e.onClose&&e.onClose()),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),b({loading:!1,error:[n.t0.message]});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(){return n.apply(this,arguments)}}();Object(i.useEffect)((function(){e.user?h(iR(iR({},y),{},{user:e.user})):g()}),[t]);return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,oR({},e,{userState:y,actionStatus:m,handleDeleteUser:O,handleSuccessUserUpdate:function(e){h(iR(iR({},y),{},{user:Object.assign(y.user,e)})),o&&o(e)}})))};function dR(){return dR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dR.apply(this,arguments)}function yR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yR(Object(n),!0).forEach((function(t){vR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mR(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bR(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){mR(a,r,o,i,u,"next",e)}function u(e){mR(a,r,o,i,u,"throw",e)}i(void 0)}))}}function gR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return OR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}pR.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),userId:c.a.oneOfType([c.a.number,c.a.string]),user:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},pR.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","driver_zone_restriction","dropdown_option_id","dropdown_option","location","loyalty_level","zipcode","level","enabled","middle_name","second_lastname","phone_verified","email_verified","schedule","max_days_in_future"]};var wR=function(e){var t,n,r=e.UIComponent,o=e.userId,s=e.walletType,c=gR(rn(),1)[0],l=gR(yn(),1)[0].token,f=gR(Br(),2)[1].showToast,p=gR(Bn(),2)[1],d=gR(Object(i.useState)({loading:!1,wallet:{},error:null}),2),y=d[0],h=d[1],v=gR(Object(i.useState)({loading:!1,events:[],error:null}),2),m=v[0],b=v[1],g=gR(Object(i.useState)({loading:!1,users:[],error:null}),2),O=g[0],w=g[1],j=gR(Object(i.useState)({}),2),S=j[0],E=j[1],P=gR(Object(i.useState)({}),2),C=P[0],I=P[1],x=gR(Object(i.useState)({loading:!1,error:null}),2),A=x[0],T=x[1],_=function(){var e=bR(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(hR(hR({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/users/").concat(o,"/wallets"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?h(hR(hR({},y),{},{loading:!1,error:r.result})):h({loading:!1,wallet:r.result.find((function(e){return e.type===s}))||{},error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(hR(hR({},y),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=bR(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(hR(hR({},m),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/users/").concat(o,"/wallets/").concat(t,"/events?orderBy=-id"),n);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?b(hR(hR({},m),{},{loading:!1,error:i.result})):b({loading:!1,events:i.result,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),b(hR(hR({},m),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=bR(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(hR({loading:!0},O)),e.next=4,c.setAccessToken(l).users().select(["name","lastname"]).get();case 4:t=e.sent,n=t.content,r=n.result,o=n.error,w(o?hR(hR({},O),{},{loading:!1,error:r}):{loading:!1,users:r,error:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),w(hR(hR({},O),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=bR(a.a.mark((function e(){var t,n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T({loading:!0,error:null}),f(Dr.Info,p("LOADING","Loading")),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(S)},e.next=6,fetch("".concat(c.root,"/users/").concat(o,"/wallets/").concat(null===(t=y.wallet)||void 0===t?void 0:t.id,"/events"),n);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?T({loading:!1,error:i.result}):(h(hR(hR({},y),{},{wallet:hR(hR({},y.wallet),{},{balance:(null===(u=y.wallet)||void 0===u?void 0:u.balance)+i.result.amount})})),E({}),T({loading:!1,error:null}),f(Dr.Success,p("WALLET_MONEY_ADDED","Wallet money added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),T({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=bR(a.a.mark((function e(){var t,n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T({loading:!0,error:null}),f(Dr.Info,p("LOADING","Loading")),(n=hR({},C)).amount="-"+C.amount,r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=8,fetch("".concat(c.root,"/users/").concat(o,"/wallets/").concat(null===(t=y.wallet)||void 0===t?void 0:t.id,"/events"),r);case 8:return i=e.sent,e.next=11,i.json();case 11:(u=e.sent).error?T({loading:!1,error:u.result}):(h(hR(hR({},y),{},{wallet:hR(hR({},y.wallet),{},{balance:(null===(s=y.wallet)||void 0===s?void 0:s.balance)+u.result.amount})})),T({loading:!1,error:null}),I({}),f(Dr.Success,p("WALLET_MONEY_REDUCED","Wallet money reduced"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),T({loading:!1,error:[e.t0.message]});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;null!==(e=y.wallet)&&void 0!==e&&e.id&&k(y.wallet.id)}),[null===(t=y.wallet)||void 0===t?void 0:t.id,null===(n=y.wallet)||void 0===n?void 0:n.balance]),Object(i.useEffect)((function(){_()}),[o]),Object(i.useEffect)((function(){D()}),[]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,dR({},e,{walletState:y,walletEventsState:m,addWalletState:S,reduceWalletState:C,actionState:A,handleChangeInput:function(e,t){t?E(hR(hR({},S),{},vR({},e.target.name,e.target.value))):I(hR(hR({},C),{},vR({},e.target.name,e.target.value)))},handleAddWalletMoney:U,handleReduceWalletMoney:L,parseEvent:function(e){var t="",n="",r=O.users.find((function(t){return t.id===e.author_id}));if(n=r?"".concat(null==r?void 0:r.name," ").concat(null==r?void 0:r.lastname):"".concat(e.author_id),"manual"===e.event_type)switch(e.event){case"movement":t=-1===Math.sign(e.amount)?p("TRANSACTION_REDUCE_MONEY","<strong>_user_</strong> reduce money").replace("_user_","".concat(n)):p("TRANSACTION_ADD_MONEY","<strong>_user_</strong> add money").replace("_user_","".concat(n));break;case"locked":t=p("TRANSACTION_LOCKED","<strong>_user_</strong> locked").replace("_user_","".concat(n));break;case"unlocked":t=p("TRANSACTION_UNLOCKED","<strong>_user_</strong> unlocked").replace("_user_","".concat(n));break;default:t=e.event}return"refund"===e.event_type&&(t=p("REFUND_MONEY","Refund money")),"payment"===e.event_type&&(t=p("PAID_MONEY","Paid money")),t}})))};function jR(){return jR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jR.apply(this,arguments)}function SR(e){return function(e){if(Array.isArray(e))return _R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||TR(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ER(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ER(Object(n),!0).forEach((function(t){CR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IR(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xR(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){IR(a,r,o,i,u,"next",e)}function u(e){IR(a,r,o,i,u,"throw",e)}i(void 0)}))}}function AR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||TR(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TR(e,t){if(e){if("string"==typeof e)return _R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_R(e,t):void 0}}function _R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}wR.propTypes={UIComponent:c.a.elementType,userId:c.a.oneOfType([c.a.number,c.a.string]),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wR.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var kR=function(e){var t=e.UIComponent,n=AR(rn(),1)[0],r=AR(yn(),1)[0].token,o=AR(Br(),2)[1].showToast,s=AR(Bn(),2)[1],c=AR(Object(i.useState)({webhooks:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=AR(Object(i.useState)(!1),2),d=p[0],y=p[1],h=AR(Object(i.useState)({loading:!1,error:null}),2),v=h[0],m=h[1],b=AR(Object(i.useState)({delay:"0"}),2),g=b[0],O=b[1],w=function(){var e=xR(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(PR(PR({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/webhooks"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||f(PR(PR({},l),{},{webhooks:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(PR(PR({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=xR(a.a.mark((function e(){var t,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),m(PR(PR({},v),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(g)},e.next=6,fetch("".concat(n.root,"/webhooks"),t);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?m({loading:!1,error:u.result}):(m(PR(PR({},v),{},{loading:!1})),c=[].concat(SR(l.webhooks),[u.result]),f(PR(PR({},l),{},{webhooks:c})),o(Dr.Success,s("WEBHOOK_ADDED","Webhook added")),y(!1),O({delay:"0"})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=xR(a.a.mark((function e(t){var i,u,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),m(PR(PR({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=6,fetch("".concat(n.root,"/webhooks/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(c=e.sent).error?m({loading:!1,error:c.result}):(m(PR(PR({},v),{},{loading:!1})),p=l.webhooks.filter((function(e){return e.id!==t})),f(PR(PR({},l),{},{webhooks:p})),o(Dr.Success,s("WEBHOOK_REMOVED","Webhook removed")),y(!1),O({delay:"0"})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,jR({},e,{webhookListState:l,isAddMode:d,setIsAddMode:y,handleAddNewWebhook:j,changesState:g,actionState:v,handleChangeAddState:function(e,t){O(PR(PR({},g),{},CR({},e,t)))},handleDeleteWebhook:S})))};kR.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},kR.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]}}])}));