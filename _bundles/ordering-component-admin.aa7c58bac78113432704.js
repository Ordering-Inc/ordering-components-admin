/*! For license information please see ordering-component-admin.aa7c58bac78113432704.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("OrderingComponentsAdmin",["React","ReactDOM"],t):"object"==typeof exports?exports.OrderingComponentsAdmin=t(require("react"),require("react-dom")):e.OrderingComponentsAdmin=t(e.React,e.ReactDOM)}(window,(function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/_bundles/",n(n.s=68)}([function(e,t,n){e.exports=n(64)()},function(t,n){t.exports=e},function(e,t,n){e.exports=n(37)},function(e,t,n){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",o="second",a="minute",i="hour",u="day",s="week",c="month",l="quarter",f="year",p="date",d="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},b={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+m(r,2,"0")+":"+m(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(r,c),a=n-o<0,i=t.clone().add(r+(a?-1:1),c);return+(-(r+(n-o)/(a?o-i:i-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:f,w:s,d:u,D:p,h:i,m:a,s:o,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",O={};O[g]=v;var w=function(e){return e instanceof P},j=function(e,t,n){var r;if(!e)return g;if("string"==typeof e)O[e]&&(r=e),t&&(O[e]=t,r=e);else{var o=e.name;O[o]=e,r=o}return!n&&r&&(g=r),r||!n&&g},S=function(e,t){if(w(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new P(n)},E=b;E.l=j,E.i=w,E.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var P=function(){function v(e){this.$L=j(e.locale,null,!0),this.parse(e)}var m=v.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var o=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return E},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(e,t){var n=S(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return S(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<S(e)},m.$g=function(e,t,n){return E.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,r=!!E.u(t)||t,l=E.p(e),d=function(e,t){var o=E.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?o:o.endOf(u)},h=function(e,t){return E.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},y=this.$W,v=this.$M,m=this.$D,b="set"+(this.$u?"UTC":"");switch(l){case f:return r?d(1,0):d(31,11);case c:return r?d(1,v):d(0,v+1);case s:var g=this.$locale().weekStart||0,O=(y<g?y+7:y)-g;return d(r?m-O:m+(6-O),v);case u:case p:return h(b+"Hours",0);case i:return h(b+"Minutes",1);case a:return h(b+"Seconds",2);case o:return h(b+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var n,s=E.p(e),l="set"+(this.$u?"UTC":""),d=(n={},n[u]=l+"Date",n[p]=l+"Date",n[c]=l+"Month",n[f]=l+"FullYear",n[i]=l+"Hours",n[a]=l+"Minutes",n[o]=l+"Seconds",n[r]=l+"Milliseconds",n)[s],h=s===u?this.$D+(t-this.$W):t;if(s===c||s===f){var y=this.clone().set(p,1);y.$d[d](h),y.init(),this.$d=y.set(p,Math.min(this.$D,y.daysInMonth())).$d}else d&&this.$d[d](h);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[E.p(e)]()},m.add=function(r,l){var p,d=this;r=Number(r);var h=E.p(l),y=function(e){var t=S(d);return E.w(t.date(t.date()+Math.round(e*r)),d)};if(h===c)return this.set(c,this.$M+r);if(h===f)return this.set(f,this.$y+r);if(h===u)return y(1);if(h===s)return y(7);var v=(p={},p[a]=t,p[i]=n,p[o]=e,p)[h]||1,m=this.$d.getTime()+r*v;return E.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=E.z(this),a=this.$H,i=this.$m,u=this.$M,s=n.weekdays,c=n.months,l=function(e,n,o,a){return e&&(e[n]||e(t,r))||o[n].substr(0,a)},f=function(e){return E.s(a%12||12,e,"0")},p=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:E.s(u+1,2,"0"),MMM:l(n.monthsShort,u,c,3),MMMM:l(c,u),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,s,2),ddd:l(n.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(a),HH:E.s(a,2,"0"),h:f(1),hh:f(2),a:p(a,i,!0),A:p(a,i,!1),m:String(i),mm:E.s(i,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:o};return r.replace(y,(function(e,t){return t||h[e]||o.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,p,d){var h,y=E.p(p),v=S(r),m=(v.utcOffset()-this.utcOffset())*t,b=this-v,g=E.m(this,v);return g=(h={},h[f]=g/12,h[c]=g,h[l]=g/3,h[s]=(b-m)/6048e5,h[u]=(b-m)/864e5,h[i]=b/n,h[a]=b/t,h[o]=b/e,h)[y]||b,d?g:E.a(g)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return O[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=j(e,t,!0);return r&&(n.$L=r),n},m.clone=function(){return E.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),C=P.prototype;return S.prototype=C,[["$ms",r],["$s",o],["$m",a],["$H",i],["$W",u],["$M",c],["$y",f],["$D",p]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,P,S),e.$i=!0),S},S.locale=j,S.isDayjs=w,S.unix=function(e){return S(1e3*e)},S.en=O[g],S.Ls=O,S.p={},S}()},function(e,t,n){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,o,a){var i=o.prototype;a.utc=function(e){return new o({date:e,utc:!0,args:arguments})},i.utc=function(t){var n=a(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},i.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=i.parse;i.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),u.call(this,e)};var s=i.init;i.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var c=i.utcOffset;i.utcOffset=function(r,o){var a=this.$utils().u;if(a(r))return this.$u?0:a(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&null===(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var o=(""+r[0]).match(n)||["-",0,0],a=o[0],i=60*+o[1]+ +o[2];return 0===i?0:"+"===a?i:-i}(r)))return this;var i=Math.abs(r)<=16?60*r:r,u=this;if(o)return u.$offset=i,u.$u=0===r,u;if(0!==r){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(u=this.local().add(i+s,e)).$offset=i,u.$x.$localOffset=s}else u=this.utc();return u};var l=i.format;i.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},i.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*e},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var f=i.toDate;i.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var p=i.diff;i.diff=function(e,t,n){if(e&&this.$u===e.$u)return p.call(this,e,t,n);var r=this.local(),o=a(e).local();return p.call(r,o,t,n)}}}()},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r,o=n(51),a=n(26),i=n(53),u=n(54),s=n(55);"undefined"!=typeof ArrayBuffer&&(r=n(56));var c="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=c||l;t.protocol=3;var p=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=o(p),h={type:"error",data:"parser error"},y=n(57);function v(e,t,n){for(var r=new Array(e.length),o=u(e.length,n),a=function(e,n,o){t(n,(function(t,n){r[e]=n,o(t,r)}))},i=0;i<e.length;i++)a(i,e[i],o)}t.encodePacket=function(e,n,r,o){"function"==typeof n&&(o=n,n=!1),"function"==typeof r&&(o=r,r=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=e.data,a=new Uint8Array(o),i=new Uint8Array(1+o.byteLength);i[0]=p[e.type];for(var u=0;u<a.length;u++)i[u+1]=a[u];return r(i.buffer)}(e,n,o);if(void 0!==y&&a instanceof y)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(f)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=new FileReader;return o.onload=function(){t.encodePacket({type:e.type,data:o.result},n,!0,r)},o.readAsArrayBuffer(e.data)}(e,n,r);var o=new Uint8Array(1);o[0]=p[e.type];var a=new y([o.buffer,e.data]);return r(a)}(e,n,o);if(a&&a.base64)return function(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}(e,o);var i=p[e.type];return void 0!==e.data&&(i+=r?s.encode(String(e.data),{strict:!1}):String(e.data)),o(""+i)},t.encodeBase64Packet=function(e,n){var r,o="b"+t.packets[e.type];if(void 0!==y&&e.data instanceof y){var a=new FileReader;return a.onload=function(){var e=a.result.split(",")[1];n(o+e)},a.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var i=new Uint8Array(e.data),u=new Array(i.length),s=0;s<i.length;s++)u[s]=i[s];r=String.fromCharCode.apply(null,u)}return o+=btoa(r),n(o)},t.decodePacket=function(e,n,r){if(void 0===e)return h;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function(e){try{e=s.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return h;var o=e.charAt(0);return Number(o)==o&&d[o]?e.length>1?{type:d[o],data:e.substring(1)}:{type:d[o]}:h}o=new Uint8Array(e)[0];var a=i(e,1);return y&&"blob"===n&&(a=new y([a])),{type:d[o],data:a}},t.decodeBase64Packet=function(e,t){var n=d[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=r.decode(e.substr(1));return"blob"===t&&y&&(o=new y([o])),{type:n,data:o}},t.encodePayload=function(e,n,r){"function"==typeof n&&(r=n,n=null);var o=a(e);if(n&&o)return y&&!f?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r);if(!e.length)return r("0:");v(e,(function(e,r){t.encodePacket(e,!!o&&n,!1,(function(e){r(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return r(t.join(""))}))},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);var o;if("function"==typeof n&&(r=n,n=null),""===e)return r(h,0,1);for(var a,i,u="",s=0,c=e.length;s<c;s++){var l=e.charAt(s);if(":"===l){if(""===u||u!=(a=Number(u)))return r(h,0,1);if(u!=(i=e.substr(s+1,a)).length)return r(h,0,1);if(i.length){if(o=t.decodePacket(i,n,!1),h.type===o.type&&h.data===o.data)return r(h,0,1);if(!1===r(o,s+a,c))return}s+=a,u=""}else u+=l}return""!==u?r(h,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));v(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var r=t.reduce((function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2}),0),o=new Uint8Array(r),a=0;return t.forEach((function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);n=r.buffer}o[a++]=t?0:1;var u=n.byteLength.toString();for(i=0;i<u.length;i++)o[a++]=parseInt(u[i]);o[a++]=255;for(r=new Uint8Array(n),i=0;i<r.length;i++)o[a++]=r[i]})),n(o.buffer)}))},t.encodePayloadAsBlob=function(e,n){v(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);e=r.buffer,t[0]=0}var a=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),i=new Uint8Array(a.length+1);for(o=0;o<a.length;o++)i[o]=parseInt(a[o]);if(i[a.length]=255,y){var u=new y([t.buffer,i.buffer,e]);n(null,u)}}))}),(function(e,t){return n(new y(t))}))},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var o=e,a=[];o.byteLength>0;){for(var u=new Uint8Array(o),s=0===u[0],c="",l=1;255!==u[l];l++){if(c.length>310)return r(h,0,1);c+=u[l]}o=i(o,2+c.length),c=parseInt(c);var f=i(o,0,c);if(s)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(e){var p=new Uint8Array(f);f="";for(l=0;l<p.length;l++)f+=String.fromCharCode(p[l])}a.push(f),o=i(o,c)}var d=a.length;a.forEach((function(e,o){r(t.decodePacket(e,n,!0),o,d)}))}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(39)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(13))},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(58)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(13))},function(e,n){e.exports=t},function(e,t,n){!function(e,t){"use strict";function n(e,t){return e(t={exports:{}},t.exports),t.exports}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function o(){}function a(){}a.resetWarningCache=o;var i=function(){function e(e,t,n,o,a,i){if(i!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n},u=n((function(e){e.exports=i()}));function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){return d(e)||h(e,t)||y(e,t)||m()}function d(e){if(Array.isArray(e))return e}function h(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var b=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},g=function(e){return null!==e&&"object"===s(e)},O=function(e){return g(e)&&"function"==typeof e.then},w=function(e){return g(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment},j="[object Object]",S=function e(t,n){if(!g(t)||!g(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var o=Object.prototype.toString.call(t)===j;if(o!==(Object.prototype.toString.call(n)===j))return!1;if(!o&&!r)return t===n;var a=Object.keys(t),i=Object.keys(n);if(a.length!==i.length)return!1;for(var u={},s=0;s<a.length;s+=1)u[a[s]]=!0;for(var c=0;c<i.length;c+=1)u[i[c]]=!0;var l=Object.keys(u);if(l.length!==a.length)return!1;var f=t,p=n,d=function(t){return e(f[t],p[t])};return l.every(d)},E=function(e,t,n){return g(e)?Object.keys(e).reduce((function(r,o){var a=!g(t)||!S(e[o],t[o]);return n.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),r):a?f(f({},r||{}),{},c({},o,e[o])):r}),null):null},P="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",C=function(e){if(null===e||w(e))return e;throw new Error(P)},I=function(e){if(O(e))return{tag:"async",stripePromise:Promise.resolve(e).then(C)};var t=C(e);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},x=t.createContext(null);x.displayName="ElementsContext";var A=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},T=function(e){var n=e.stripe,r=e.options,o=e.children,a=t.useRef(!1),i=t.useRef(!0),u=t.useMemo((function(){return I(n)}),[n]),s=p(t.useState((function(){return{stripe:null,elements:null}})),2),c=s[0],l=s[1],f=b(n);null!==f&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it."),a.current||("sync"===u.tag&&(a.current=!0,l({stripe:u.stripe,elements:u.stripe.elements(r)})),"async"===u.tag&&(a.current=!0,u.stripePromise.then((function(e){e&&i.current&&l({stripe:e,elements:e.elements(r)})}))));var d=b(r);return t.useEffect((function(){if(c.elements){var e=E(r,d,["clientSecret","fonts"]);e&&c.elements.update(e)}}),[r,d,c.elements]),t.useEffect((function(){return function(){i.current=!1}}),[]),t.useEffect((function(){var e=c.stripe;e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"1.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"1.7.0",url:"https://stripe.com/docs/stripe-js/react"}))}),[c.stripe]),t.createElement(x.Provider,{value:c},o)};T.propTypes={stripe:u.any,options:u.object};var _=function(e){var n=t.useContext(x);return A(n,e)},k=function(){return _("calls useElements()").elements},D=function(){return _("calls useStripe()").stripe},U=function(e){return(0,e.children)(_("mounts <ElementsConsumer>"))};U.propTypes={children:u.func.isRequired};var L=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),function(){n.current&&n.current.apply(n,arguments)}},B=function(){},F=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},N=function(e,n){var r="".concat(F(e),"Element"),o=n?function(e){_("mounts <".concat(r,">"));var n=e.id,o=e.className;return t.createElement("div",{id:n,className:o})}:function(n){var o=n.id,a=n.className,i=n.options,u=void 0===i?{}:i,s=n.onBlur,c=void 0===s?B:s,l=n.onFocus,f=void 0===l?B:l,p=n.onReady,d=void 0===p?B:p,h=n.onChange,y=void 0===h?B:h,v=n.onEscape,m=void 0===v?B:v,g=n.onClick,O=void 0===g?B:g,w=_("mounts <".concat(r,">")).elements,j=t.useRef(null),S=t.useRef(null),P=L(d),C=L(c),I=L(f),x=L(O),A=L(y),T=L(m);t.useLayoutEffect((function(){if(null==j.current&&w&&null!=S.current){var t=w.create(e,u);j.current=t,t.mount(S.current),t.on("ready",(function(){return P(t)})),t.on("change",A),t.on("blur",C),t.on("focus",I),t.on("escape",T),t.on("click",x)}}));var k=b(u);return t.useEffect((function(){if(j.current){var e=E(u,k,["paymentRequest"]);e&&j.current.update(e)}}),[u,k]),t.useLayoutEffect((function(){return function(){j.current&&j.current.destroy()}}),[]),t.createElement("div",{id:o,className:a,ref:S})};return o.propTypes={id:u.string,className:u.string,onChange:u.func,onBlur:u.func,onFocus:u.func,onReady:u.func,onClick:u.func,options:u.object},o.displayName=r,o.__elementType=e,o},R="undefined"==typeof window,M=N("auBankAccount",R),z=N("card",R),G=N("cardNumber",R),Y=N("cardExpiry",R),q=N("cardCvc",R),$=N("fpxBank",R),J=N("iban",R),V=N("idealBank",R),H=N("p24Bank",R),W=N("epsBank",R),K=N("payment",R),X=N("paymentRequestButton",R),Z=N("linkAuthentication",R),Q=N("shippingAddress",R),ee=N("affirmMessage",R),te=N("afterpayClearpayMessage",R);e.AffirmMessageElement=ee,e.AfterpayClearpayMessageElement=te,e.AuBankAccountElement=M,e.CardCvcElement=q,e.CardElement=z,e.CardExpiryElement=Y,e.CardNumberElement=G,e.Elements=T,e.ElementsConsumer=U,e.EpsBankElement=W,e.FpxBankElement=$,e.IbanElement=J,e.IdealBankElement=V,e.LinkAuthenticationElement=Z,e.P24BankElement=H,e.PaymentElement=K,e.PaymentRequestButtonElement=X,e.ShippingAddressElement=Q,e.useElements=k,e.useStripe=D,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1))},function(e,t){var n,r,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var s,c=[],l=!1,f=-1;function p(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=u(p);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n=1e3,r=60*n,o=60*r,a=24*o,i=365.25*a;function u(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*i;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*o;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?u(s=e,a,"day")||u(s,o,"hour")||u(s,r,"minute")||u(s,n,"second")||s+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var r=n(40)("socket.io-parser"),o=n(5),a=n(42),i=n(21),u=n(22);function s(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=s,t.Decoder=f;var c=t.ERROR+'"encode error"';function l(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var o=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===o)return c;n+=o}return r("encoded %j as %s",e,n),n}function f(){this.reconstructor=null}function p(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:t.ERROR,data:"parser error: "+e}}s.prototype.encode=function(e,n){(r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){function n(e){var n=a.deconstructPacket(e),r=l(n.packet),o=n.buffers;o.unshift(r),t(o)}a.removeBlobs(e,n)}(e,n):n([l(e)])},o(f.prototype),f.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,o={type:Number(e.charAt(0))};if(null==t.types[o.type])return d("unknown packet type "+o.type);if(t.BINARY_EVENT===o.type||t.BINARY_ACK===o.type){for(var a=n+1;"-"!==e.charAt(++n)&&n!=e.length;);var u=e.substring(a,n);if(u!=Number(u)||"-"!==e.charAt(n))throw new Error("Illegal attachments");o.attachments=Number(u)}if("/"===e.charAt(n+1)){for(a=n+1;++n;){if(","===(c=e.charAt(n)))break;if(n===e.length)break}o.nsp=e.substring(a,n)}else o.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(a=n+1;++n;){var c;if(null==(c=e.charAt(n))||Number(c)!=c){--n;break}if(n===e.length)break}o.id=Number(e.substring(a,n+1))}if(e.charAt(++n)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n));if(!(!1!==l&&(o.type===t.ERROR||i(l))))return d("invalid payload");o.data=l}return r("decoded %s as %j",e,o),o}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new p(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!u(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){"use strict";(function(e){var r=n(44),o=n(45),a=n(46);function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=p(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),o=(e=u(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|d(t.length);return 0===(e=u(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?u(e,0):p(e,t);if("Buffer"===t.type&&a(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=u(e,t<0?0:0|d(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|d(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function h(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,o);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,o){var a,i=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,u/=2,s/=2,n/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var l=-1;for(a=n;a<u;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===s)return l*i}else-1!==l&&(a-=a-l),l=-1}else for(n+s>u&&(n=u-s),a=n;a>=0;a--){for(var f=!0,p=0;p<s;p++)if(c(e,a+p)!==c(t,p)){f=!1;break}if(f)return a}return-1}function g(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var i=0;i<r;++i){var u=parseInt(t.substr(2*i,2),16);if(isNaN(u))return i;e[n+i]=u}return i}function O(e,t,n,r){return Y(z(t,e.length-n),e,n,r)}function w(e,t,n,r){return Y(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function j(e,t,n,r){return w(e,t,n,r)}function S(e,t,n,r){return Y(G(t),e,n,r)}function E(e,t,n,r){return Y(function(e,t){for(var n,r,o,a=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(n=e.charCodeAt(i))>>8,o=n%256,a.push(o),a.push(r);return a}(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var a,i,u,s,c=e[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[o+1]))&&(s=(31&c)<<6|63&a)>127&&(l=s);break;case 3:a=e[o+1],i=e[o+2],128==(192&a)&&128==(192&i)&&(s=(15&c)<<12|(63&a)<<6|63&i)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:a=e[o+1],i=e[o+2],u=e[o+3],128==(192&a)&&128==(192&i)&&128==(192&u)&&(s=(15&c)<<18|(63&a)<<12|(63&i)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return c(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?u(e,t):void 0!==n?"string"==typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!s.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},s.byteLength=h,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):y.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,o){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0),u=Math.min(a,i),c=this.slice(r,o),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],i=l[f];break}return a<i?-1:i<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return O(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return j(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function x(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",a=t;a<n;++a)o+=M(e[a]);return o}function _(e,t,n){for(var r=e.slice(t,n),o="",a=0;a<r.length;a+=2)o+=String.fromCharCode(r[a]+256*r[a+1]);return o}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,o,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function B(e,t,n,r,o,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,a){return a||B(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,a){return a||B(e,0,n,8),o.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var o=t-e;n=new s(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},s.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=t,o=1,a=this[e+--r];r>0&&(o*=256);)a+=this[e+--r]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),o.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),o.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),o.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),o.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);D(this,e,t,n,o-1,-o)}var a=0,i=1,u=0;for(this[t]=255&e;++a<n&&(i*=256);)e<0&&0===u&&0!==this[t+a-1]&&(u=1),this[t+a]=(e/i>>0)-u&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);D(this,e,t,n,o-1,-o)}var a=n-1,i=1,u=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===u&&0!==this[t+a+1]&&(u=1),this[t+a]=(e/i>>0)-u&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,a=r-n;if(this===e&&n<t&&t<r)for(o=a-1;o>=0;--o)e[o+t]=this[o+n];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var i=s.isBuffer(e)?e:z(new s(e,r).toString()),u=i.length;for(a=0;a<n-t;++a)this[a+t]=i[a%u]}return this};var R=/[^+\/0-9A-Za-z-_]/g;function M(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var r=e.length,o=null,a=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function G(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(43))},function(e,t,n){var r=n(49),o=n(18);e.exports=function(e){var t=e.xdomain,n=e.xscheme,a=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&a)return new XDomainRequest}catch(e){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,n){var r=n(6),o=n(5);function a(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=a,o(a.prototype),a.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},a.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},a.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},a.prototype.onPacket=function(e){this.emit("packet",e)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),a=e.indexOf("]");-1!=o&&-1!=a&&(e=e.substring(0,o)+e.substring(o,a).replace(/:/g,";")+e.substring(a,e.length));for(var i,u,s=n.exec(e||""),c={},l=14;l--;)c[r[l]]=s[l]||"";return-1!=o&&-1!=a&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,c.path),c.queryKey=(i=c.query,u={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(u[t]=n)})),u),c}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var n="function"==typeof t&&"function"==typeof t.isBuffer,r="function"==typeof ArrayBuffer}).call(this,n(16).Buffer)},function(e,t,n){var r=n(47),o=n(29),a=n(5),i=n(15),u=n(30),s=n(31),c=n(7)("socket.io-client:manager"),l=n(28),f=n(63),p=Object.prototype.hasOwnProperty;function d(e,t){if(!(this instanceof d))return new d(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||i;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=d,d.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},d.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},d.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},a(d.prototype),d.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},d.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},d.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(e,t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var a=u(n,"open",(function(){o.onopen(),e&&e()})),i=u(n,"error",(function(t){if(c("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else o.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;c("connect attempt will timeout after %d",s),0===s&&a.destroy();var l=setTimeout((function(){c("connect attempt timed out after %d",s),a.destroy(),n.close(),n.emit("error","timeout"),o.emitAll("connect_timeout",s)}),s);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(a),this.subs.push(i),this},d.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(u(e,"data",s(this,"ondata"))),this.subs.push(u(e,"ping",s(this,"onping"))),this.subs.push(u(e,"pong",s(this,"onpong"))),this.subs.push(u(e,"error",s(this,"onerror"))),this.subs.push(u(e,"close",s(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",s(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(e){this.decoder.add(e)},d.prototype.ondecoded=function(e){this.emit("packet",e)},d.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},d.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new o(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",a),n.on("connect",(function(){n.id=r.generateId(e)})),this.autoConnect&&a()}function a(){~l(r.connecting,n)||r.connecting.push(n)}return n},d.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},d.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},d.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},d.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var r=n(17),o=n(50),a=n(59),i=n(60);t.polling=function(e){var t=!1,n=!1,i=!1!==e.jsonp;if("undefined"!=typeof location){var u="https:"===location.protocol,s=location.port;s||(s=u?443:80),t=e.hostname!==location.hostname||s!==e.port,n=e.secure!==u}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new o(e);if(!i)throw new Error("JSONP disabled");return new a(e)},t.websocket=i},function(e,t,n){var r=n(19),o=n(8),a=n(6),i=n(9),u=n(27),s=n(10)("engine.io-client:polling");e.exports=l;var c=null!=new(n(17))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),r.call(this,e)}i(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t=this;function n(){s("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(s("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){s("pre-pause polling complete"),--r||n()}))),this.writable||(s("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){s("pre-pause writing complete"),--r||n()})))}else n()},l.prototype.poll=function(){s("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var t=this;s("polling got data %s",e);a.decodePayload(e,this.socket.binaryType,(function(e,n,r){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():s('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){s("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(s("transport open - closing"),t()):(s("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){var r=n(52),o=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),i="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);e.exports=function e(n){if(!n||"object"!=typeof n)return!1;if(r(n)){for(var o=0,u=n.length;o<u;o++)if(e(n[o]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||a&&n instanceof Blob||i&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&e(n[s]))return!0;return!1}}).call(this,n(16).Buffer)},function(e,t,n){"use strict";var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a={},i=0,u=0;function s(e){var t="";do{t=o[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function c(){var e=s(+new Date);return e!==r?(i=0,r=e):e+"."+s(i++)}for(;u<64;u++)a[o[u]]=u;c.encode=s,c.decode=function(e){var t=0;for(u=0;u<e.length;u++)t=64*t+a[e.charAt(u)];return t},e.exports=c},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(15),o=n(5),a=n(62),i=n(30),u=n(31),s=n(7)("socket.io-client:socket"),c=n(8),l=n(26);e.exports=d;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=o.prototype.emit;function d(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}o(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[i(e,"open",u(this,"onopen")),i(e,"packet",u(this,"onpacket")),i(e,"close",u(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},d.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(f.hasOwnProperty(e))return p.apply(this,arguments),this;var t=a(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(s("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){if(s("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?c.encode(this.query):this.query;s("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},d.prototype.onclose=function(e){s("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];s("emitting event %j",t),null!=e.id&&(s("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var o=a(arguments);s("sending ack %j",o),t.packet({type:l(o)?r.BINARY_ACK:r.ACK,id:e,data:o})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(s("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):s("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){s("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(s("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags.compress=e,this},d.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){var r=n(38),o=n(15),a=n(23),i=n(7)("socket.io-client");e.exports=t=s;var u=t.managers={};function s(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o=r(e),s=o.source,c=o.id,l=o.path,f=u[c]&&l in u[c].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||f?(i("ignoring socket cache for %s",s),n=a(s,t)):(u[c]||(i("new io instance for %s",s),u[c]=a(s,t)),n=u[c]),o.query&&!t.query&&(t.query=o.query),n.socket(o.path,t)}t.protocol=o.protocol,t.connect=s,t.Manager=n(23),t.Socket=n(29)},function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){e=e||{};var r=t.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(e,t,n,o){return r.fromToBase(e,t,n,o)}n.en.relativeTime=o,r.fromToBase=function(t,r,a,i,u){for(var s,c,l,f=a.$locale().relativeTime||o,p=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],d=p.length,h=0;h<d;h+=1){var y=p[h];y.d&&(s=i?n(t).diff(a,y.d,!0):a.diff(t,y.d,!0));var v=(e.rounding||Math.round)(Math.abs(s));if(l=s>0,v<=y.r||!y.r){v<=1&&h>0&&(y=p[h-1]);var m=f[y.l];u&&(v=u(""+v)),c="string"==typeof m?m.replace("%d",v):m(v,r,y.l,l);break}}if(r)return c;var b=l?f.future:f.past;return"function"==typeof b?b(c):b.replace("%s",c)},r.to=function(e,t){return a(e,t,this,!0)},r.from=function(e,t){return a(e,t,this)};var i=function(e){return e.$u?n.utc():n()};r.toNow=function(e){return this.to(i(this),e)},r.fromNow=function(e){return this.from(i(this),e)}}}()},function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){n.updateLocale=function(e,t){var r=n.Ls[e];if(r)return(t?Object.keys(t):[]).forEach((function(e){r[e]=t[e]})),r}}}()},function(e,t,n){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}()},function(e,t,n){"use strict";var r=n(66),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?i:u[e.$$typeof]||o}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=i;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var o=d(n);o&&o!==h&&e(t,o,r)}var i=l(n);f&&(i=i.concat(f(n)));for(var u=s(t),y=s(n),v=0;v<i.length;++v){var m=i[v];if(!(a[m]||r&&r[m]||y&&y[m]||u&&u[m])){var b=p(n,m);try{c(t,m,b)}catch(e){}}}}return t}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(e,t,n){var r=f;return function(o,a){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw a;return T()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var u=P(i,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?h:p,s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=h,n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",h="completed",y={};function v(){}function m(){}function b(){}var g={};s(g,a,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(A([])));w&&w!==n&&r.call(w,a)&&(g=w);var j=b.prototype=v.prototype=Object.create(g);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(o,a,i,u){var s=l(e[o],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,u)}))}u(s.arg)}var o;this._invoke=function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}}function P(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:T}}function T(){return{value:t,done:!0}}return m.prototype=b,s(j,"constructor",b),s(b,"constructor",m),m.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},e.awrap=function(e){return{__await:e}},S(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new E(c(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(j),s(j,u,"Generator"),s(j,a,(function(){return this})),s(j,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(20),o=n(7)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),n=r(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,a=o-(n||o);e.diff=a,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n})),t.formatArgs.call(e,i);var c=r.log||t.log||console.log.bind(console);c.apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(14),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(41)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(13))},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,a=o-(n||o);e.diff=a,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n})),t.formatArgs.call(e,i);var c=r.log||t.log||console.log.bind(console);c.apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(14),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(21),o=n(22),a=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===a.call(Blob),u="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===a.call(File);function s(e,t){if(!e)return e;if(o(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(r(e)){for(var a=new Array(e.length),i=0;i<e.length;i++)a[i]=s(e[i],t);return a}if("object"==typeof e&&!(e instanceof Date)){a={};for(var u in e)a[u]=s(e[u],t);return a}return e}function c(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(r(e))for(var n=0;n<e.length;n++)e[n]=c(e[n],t);else if("object"==typeof e)for(var o in e)e[o]=c(e[o],t);return e}t.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=s(n,t),r.attachments=t.length,{packet:r,buffers:t}},t.reconstructPacket=function(e,t){return e.data=c(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,a=e;!function e(s,c,l){if(!s)return s;if(i&&s instanceof Blob||u&&s instanceof File){n++;var f=new FileReader;f.onload=function(){l?l[c]=this.result:a=this.result,--n||t(a)},f.readAsArrayBuffer(s)}else if(r(s))for(var p=0;p<s.length;p++)e(s[p],p,s);else if("object"==typeof s&&!o(s))for(var d in s)e(s[d],d,s)}(a),n||t(a)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),i=r[0],u=r[1],s=new a(function(e,t,n){return 3*(t+n)/4-n}(0,i,u)),l=0,f=u>0?i-4:i;for(n=0;n<f;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===u&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,s[l++]=255&t);1===u&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,a=[],i=16383,u=0,s=n-o;u<s;u+=i)a.push(l(e,u,u+i>s?s:u+i));1===o?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=i.length;u<s;++u)r[u]=i[u],o[i.charCodeAt(u)]=u;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var o,a,i=[],u=t;u<n;u+=3)o=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),i.push(r[(a=o)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var a,i,u=8*o-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?o-1:0,p=n?-1:1,d=e[t+f];for(f+=p,a=d&(1<<-l)-1,d>>=-l,l+=u;l>0;a=256*a+e[t+f],f+=p,l-=8);for(i=a&(1<<-l)-1,a>>=-l,l+=r;l>0;i=256*i+e[t+f],f+=p,l-=8);if(0===a)a=1-c;else{if(a===s)return i?NaN:1/0*(d?-1:1);i+=Math.pow(2,r),a-=c}return(d?-1:1)*i*Math.pow(2,a-r)},t.write=function(e,t,n,r,o,a){var i,u,s,c=8*a-o-1,l=(1<<c)-1,f=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,h=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-i))<1&&(i--,s*=2),(t+=i+f>=1?p/s:p*Math.pow(2,1-f))*s>=2&&(i++,s/=2),i+f>=l?(u=0,i=l):i+f>=1?(u=(t*s-1)*Math.pow(2,o),i+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,o),i=0));o>=8;e[n+d]=255&u,d+=h,u/=256,o-=8);for(i=i<<o|u,c+=o;c>0;e[n+d]=255&i,d+=h,i/=256,c-=8);e[n+d-h]|=128*y}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(48),e.exports.parser=n(6)},function(e,t,n){var r=n(24),o=n(5),a=n(10)("engine.io-client:socket"),i=n(28),u=n(6),s=n(20),c=n(8);function l(e,t){if(!(this instanceof l))return new l(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=s(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=s(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=l,l.priorWebsocketSuccess=!1,o(l.prototype),l.protocol=u.protocol,l.Socket=l,l.Transport=n(19),l.transports=n(24),l.parser=n(6),l.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=u.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var e;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},l.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},l.prototype.probe=function(e){a('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function o(){if(r.onlyBinaryUpgrades){var o=!this.supportsBinary&&r.transport.supportsBinary;n=n||o}n||(a('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(a('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,a('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(a("changing transport and sending upgrade packet"),p(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{a('probe transport "%s" failed',e);var i=new Error("probe error");i.transport=t.name,r.emit("upgradeError",i)}})))}function i(){n||(n=!0,p(),t.close(),t=null)}function u(n){var o=new Error("probe error: "+n);o.transport=t.name,i(),a('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",o)}function s(){u("transport closed")}function c(){u("socket closed")}function f(e){t&&e.name!==t.name&&(a('"%s" works - aborting "%s"',e.name,t.name),i())}function p(){t.removeListener("open",o),t.removeListener("error",u),t.removeListener("close",s),r.removeListener("close",c),r.removeListener("upgrading",f)}l.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",u),t.once("close",s),this.once("close",c),this.once("upgrading",f),t.open()},l.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},l.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},l.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},l.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},l.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()}function t(){e.onClose("forced close"),a("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},l.prototype.onError=function(e){a("socket error %j",e),l.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},l.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~i(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){var r=n(17),o=n(25),a=n(5),i=n(9),u=n(10)("engine.io-client:polling-xhr"),s=n(18);function c(){}function l(e){if(o.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function f(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=l,e.exports.Request=f,i(l,o),l.prototype.supportsBinary=!0,l.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new f(e)},l.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),o=this;r.on("success",t),r.on("error",(function(e){o.onError("xhr post error",e)})),this.sendXhr=r},l.prototype.doPoll=function(){u("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},a(f.prototype),f.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),n=this;try{u("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},u("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},f.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},f.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},f.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},f.requestsCount=0,f.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",p);else if("function"==typeof addEventListener){addEventListener("onpagehide"in s?"pagehide":"unload",p,!1)}function p(){for(var e in f.requests)f.requests.hasOwnProperty(e)&&f.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),a=new Uint8Array(n-t),i=t,u=0;i<n;i++,u++)a[u]=o[i];return a.buffer}},function(e,t){function n(){}e.exports=function(e,t,r){var o=!1;return r=r||n,a.count=e,0===e?t():a;function a(e,n){if(a.count<=0)throw new Error("after called too many times");--a.count,e?(o=!0,t(e),t=r):0!==a.count||o||t(null,n)}}},function(e,t){var n,r,o,a=String.fromCharCode;function i(e){for(var t,n,r=[],o=0,a=e.length;o<a;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<a?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function u(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function s(e,t){return a(e>>t&63|128)}function c(e,t){if(0==(4294967168&e))return a(e);var n="";return 0==(4294965248&e)?n=a(e>>6&31|192):0==(4294901760&e)?(u(e,t)||(e=65533),n=a(e>>12&15|224),n+=s(e,6)):0==(4292870144&e)&&(n=a(e>>18&7|240),n+=s(e,12),n+=s(e,6)),n+=a(63&e|128)}function l(){if(o>=r)throw Error("Invalid byte index");var e=255&n[o];if(o++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(e){var t,a;if(o>r)throw Error("Invalid byte index");if(o==r)return!1;if(t=255&n[o],o++,0==(128&t))return t;if(192==(224&t)){if((a=(31&t)<<6|l())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&t)){if((a=(15&t)<<12|l()<<6|l())>=2048)return u(a,e)?a:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(a=(7&t)<<18|l()<<12|l()<<6|l())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=i(e),o=r.length,a=-1,u="";++a<o;)u+=c(r[a],n);return u},decode:function(e,t){var u=!1!==(t=t||{}).strict;n=i(e),r=n.length,o=0;for(var s,c=[];!1!==(s=f(u));)c.push(s);return function(e){for(var t,n=e.length,r=-1,o="";++r<n;)(t=e[r])>65535&&(o+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=a(t);return o}(c)}}},function(e,t){!function(e){"use strict";t.encode=function(t){var n,r=new Uint8Array(t),o=r.length,a="";for(n=0;n<o;n+=3)a+=e[r[n]>>2],a+=e[(3&r[n])<<4|r[n+1]>>4],a+=e[(15&r[n+1])<<2|r[n+2]>>6],a+=e[63&r[n+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a},t.decode=function(t){var n,r,o,a,i,u=.75*t.length,s=t.length,c=0;"="===t[t.length-1]&&(u--,"="===t[t.length-2]&&u--);var l=new ArrayBuffer(u),f=new Uint8Array(l);for(n=0;n<s;n+=4)r=e.indexOf(t[n]),o=e.indexOf(t[n+1]),a=e.indexOf(t[n+2]),i=e.indexOf(t[n+3]),f[c++]=r<<2|o>>4,f[c++]=(15&o)<<4|a>>2,f[c++]=(3&a)<<6|63&i;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=n&&n.prototype.append&&n.prototype.getBlob;function i(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function u(e,t){t=t||{};var r=new n;return i(e).forEach((function(e){r.append(e)})),t.type?r.getBlob(t.type):r.getBlob()}function s(e,t){return new Blob(i(e),t||{})}"undefined"!=typeof Blob&&(u.prototype=Blob.prototype,s.prototype=Blob.prototype),e.exports=r?o?Blob:s:a?u:void 0},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,a=o-(n||o);e.diff=a,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n})),t.formatArgs.call(e,i);var c=r.log||t.log||console.log.bind(console);c.apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(14),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(25),o=n(9),a=n(18);e.exports=l;var i,u=/\n/g,s=/\\n/g;function c(){}function l(e){r.call(this,e),this.query=this.query||{},i||(i=a.___eio=a.___eio||[]),this.index=i.length;var t=this;i.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=c)}),!1)}o(l,r),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},l.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,o=document.createElement("form"),a=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=i,o.method="POST",o.setAttribute("accept-charset","utf-8"),a.name="d",o.appendChild(a),document.body.appendChild(o),this.form=o,this.area=a}function c(){l(),t()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),e=e.replace(s,"\\\n"),this.area.value=e.replace(u,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&c()}:this.iframe.onload=c}},function(e,t,n){(function(t){var r,o,a=n(19),i=n(6),u=n(8),s=n(9),c=n(27),l=n(10)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{o=n(61)}catch(e){}var f=r||o;function p(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(f=o),a.call(this,e)}e.exports=p,s(p,a),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new f(e,t):new f(e):new f(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},p.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,o=0,a=r;o<a;o++)!function(e){i.encodePacket(e,n.supportsBinary,(function(o){if(!n.usingBrowserWebSocket){var a={};if(e.options&&(a.compress=e.options.compress),n.perMessageDeflate)("string"==typeof o?t.byteLength(o):o.length)<n.perMessageDeflate.threshold&&(a.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(o):n.ws.send(o,a)}catch(e){l("websocket closed before onclose event")}--r||u()}))}(e[o]);function u(){n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0)}},p.prototype.onClose=function(){a.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),(e=u.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},p.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===p.prototype.name)}}).call(this,n(16).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){"use strict";var r=n(65);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports=n(67)},function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,y=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,g=r?Symbol.for("react.fundamental"):60117,O=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function j(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case f:case p:case i:case s:case u:case h:return e;default:switch(e=e&&e.$$typeof){case l:case d:case m:case v:case c:return e;default:return t}}case a:return t}}}function S(e){return j(e)===p}t.AsyncMode=f,t.ConcurrentMode=p,t.ContextConsumer=l,t.ContextProvider=c,t.Element=o,t.ForwardRef=d,t.Fragment=i,t.Lazy=m,t.Memo=v,t.Portal=a,t.Profiler=s,t.StrictMode=u,t.Suspense=h,t.isAsyncMode=function(e){return S(e)||j(e)===f},t.isConcurrentMode=S,t.isContextConsumer=function(e){return j(e)===l},t.isContextProvider=function(e){return j(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return j(e)===d},t.isFragment=function(e){return j(e)===i},t.isLazy=function(e){return j(e)===m},t.isMemo=function(e){return j(e)===v},t.isPortal=function(e){return j(e)===a},t.isProfiler=function(e){return j(e)===s},t.isStrictMode=function(e){return j(e)===u},t.isSuspense=function(e){return j(e)===h},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===p||e===s||e===u||e===h||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===g||e.$$typeof===O||e.$$typeof===w||e.$$typeof===b)},t.typeOf=j},function(e,t,n){"use strict";n.r(t),n.d(t,"AddressDetails",(function(){return Tr})),n.d(t,"AddressFieldsSetting",(function(){return to})),n.d(t,"AddressForm",(function(){return wo})),n.d(t,"AddressList",(function(){return To})),n.d(t,"AdvancedReports",(function(){return Ro})),n.d(t,"AnalyticsBusinessFilter",(function(){return Wo})),n.d(t,"AnalyticsDriversFilter",(function(){return ia})),n.d(t,"AnalyticsStatusSubFilter",(function(){return ha})),n.d(t,"ApiKeysList",(function(){return Ca})),n.d(t,"Appointments",(function(){return Ua})),n.d(t,"BaseComponent",(function(){return La})),n.d(t,"CannyIdentification",(function(){return Na})),n.d(t,"Settings",(function(){return Xa})),n.d(t,"BatchImageForm",(function(){return si})),n.d(t,"BusinessAndProductList",(function(){return gi})),n.d(t,"BusinessAnalytics",(function(){return xi})),n.d(t,"BusinessBasicInformation",(function(){return Fi})),n.d(t,"BusinessBrandBUSIDetail",(function(){return Ji})),n.d(t,"BusinessBrandGENDetail",(function(){return ou})),n.d(t,"BusinessBrandListing",(function(){return du})),n.d(t,"BusinessController",(function(){return bu})),n.d(t,"BusinessDeliveryDetails",(function(){return Iu})),n.d(t,"BusinessDeliveryZone",(function(){return Ru})),n.d(t,"BusinessDeliveryZoneShare",(function(){return Xu})),n.d(t,"BusinessDetails",(function(){return ss})),n.d(t,"BusinessFormDetails",(function(){return ms})),n.d(t,"BusinessGallery",(function(){return Cs})),n.d(t,"BusinessGprsPrinters",(function(){return Us})),n.d(t,"BusinessInformation",(function(){return Ns})),n.d(t,"BusinessManagerBusinesses",(function(){return ac})),n.d(t,"BusinessList",(function(){return Hs})),n.d(t,"BusinessMenu",(function(){return hc})),n.d(t,"BusinessMenuMetaFields",(function(){return Bc})),n.d(t,"BusinessMetaFields",(function(){return ml})),n.d(t,"BusinessProductsListing",(function(){return Pc})),n.d(t,"BusinessPromotionForm",(function(){return Yf})),n.d(t,"BusinessPromotionList",(function(){return Zf})),n.d(t,"BusinessPromotionMetaFields",(function(){return cp})),n.d(t,"BusinessMenuOptions",(function(){return Hc})),n.d(t,"BusinessMenuShare",(function(){return il})),n.d(t,"BusinessPaymethods",(function(){return Tl})),n.d(t,"BusinessPlace",(function(){return Rl})),n.d(t,"BusinessPlaceGroup",(function(){return sf})),n.d(t,"BusinessPlaceGroupList",(function(){return Kl})),n.d(t,"BusinessPickupDetails",(function(){return vf})),n.d(t,"BusinessProductsCategoyDetails",(function(){return xf})),n.d(t,"BusinessProductsCategories",(function(){return Tf})),n.d(t,"BusinessProductsSearch",(function(){return kf})),n.d(t,"BusinessReviews",(function(){return bp})),n.d(t,"BusinessReviewsList",(function(){return Ip})),n.d(t,"BusinessSchedule",(function(){return Lp})),n.d(t,"BusinessSharedMenuProductDetails",(function(){return Jp})),n.d(t,"BusinessSharedMenuProducts",(function(){return nd})),n.d(t,"BusinessSortControl",(function(){return id})),n.d(t,"BusinessSpreadSheet",(function(){return md})),n.d(t,"BusinessTypeFilter",(function(){return Pd})),n.d(t,"BusinessTypeDetail",(function(){return Bd})),n.d(t,"BusinessWebhooks",(function(){return Vd})),n.d(t,"BusinessZoneGoogleMaps",(function(){return th})),n.d(t,"BusinessProductCreator",(function(){return fh})),n.d(t,"BusinessWalletsList",(function(){return Oh})),n.d(t,"CampaignListing",(function(){return _h})),n.d(t,"CampaignDetail",(function(){return Yh})),n.d(t,"CampaignDetailContent",(function(){return Zh})),n.d(t,"CampaignSignUpOption",(function(){return ly})),n.d(t,"CampaignAmountOption",(function(){return jy})),n.d(t,"Cart",(function(){return Cy})),n.d(t,"Checkout",(function(){return Ly})),n.d(t,"CheckoutFieldsSetting",(function(){return qy})),n.d(t,"CheckPassword",(function(){return Zy})),n.d(t,"CityList",(function(){return cv})),n.d(t,"CouponControl",(function(){return vv})),n.d(t,"DashboardBusinessList",(function(){return Iv})),n.d(t,"DashboardOrdersList",(function(){return Nv})),n.d(t,"DeliveryzoneList",(function(){return Jv})),n.d(t,"DragAndDrop",(function(){return Wv})),n.d(t,"DriversCompanyDetails",(function(){return im})),n.d(t,"DriverGroupSetting",(function(){return mm})),n.d(t,"UserReviewDetails",(function(){return Pm})),n.d(t,"DriverTips",(function(){return Ab})),n.d(t,"DriversList",(function(){return Mb})),n.d(t,"DriverAnalytics",(function(){return Wb})),n.d(t,"DriversCompaniesList",(function(){return Bm})),n.d(t,"DriversGroupAutoassign",(function(){return Gm})),n.d(t,"DriversGroupDetails",(function(){return Qm})),n.d(t,"DriversGroupOrders",(function(){return ib})),n.d(t,"DriversGroupsList",(function(){return mb})),n.d(t,"DriversGroupLogs",(function(){return Pb})),n.d(t,"EnterprisePromotionList",(function(){return ig})),n.d(t,"EnterprisePromotionDetails",(function(){return bg})),n.d(t,"ExamineClick",(function(){return gg})),n.d(t,"ExportCSV",(function(){return Ig})),n.d(t,"FacebookLoginButton",(function(){return Lg})),n.d(t,"ForgotPasswordForm",(function(){return Yg})),n.d(t,"GoogleAutocompleteInput",(function(){return Qg})),n.d(t,"GoogleMaps",(function(){return uO})),n.d(t,"GoogleMapsMap",(function(){return sO})),n.d(t,"GpsButton",(function(){return dO})),n.d(t,"GoogleGpsButton",(function(){return hO})),n.d(t,"GoogleTagManager",(function(){return yO})),n.d(t,"Home",(function(){return CO})),n.d(t,"ImporterForm",(function(){return NO})),n.d(t,"ImporterJobForm",(function(){return JO})),n.d(t,"ImporterListing",(function(){return rw})),n.d(t,"InvoiceBusinessManager",(function(){return hw})),n.d(t,"InvoiceDriverManager",(function(){return Ew})),n.d(t,"LanguageManager",(function(){return Dw})),n.d(t,"LanguageSelector",(function(){return Mw})),n.d(t,"LanguageSetting",(function(){return Hw})),n.d(t,"LanguageTransSpread",(function(){return oj})),n.d(t,"LanguageTransTable",(function(){return pj})),n.d(t,"LoginForm",(function(){return wj})),n.d(t,"LogisticInformation",(function(){return Aj})),n.d(t,"Logistics",(function(){return Fj})),n.d(t,"LogoutAction",(function(){return $j})),n.d(t,"PointsWalletBusinessDetail",(function(){return eS})),n.d(t,"MainSearch",(function(){return gS})),n.d(t,"MenuControl",(function(){return CS})),n.d(t,"MetaFields",(function(){return HS})),n.d(t,"MomentOption",(function(){return eE})),n.d(t,"MyOrders",(function(){return cE})),n.d(t,"MyOrdersList",(function(){return hE})),n.d(t,"OpenCartListing",(function(){return PE})),n.d(t,"OpenCartsDetail",(function(){return DE})),n.d(t,"OpenCartFilter",(function(){return GE})),n.d(t,"OrderList",(function(){return QE})),n.d(t,"OrderNotification",(function(){return nP})),n.d(t,"OrdersFilter",(function(){return fP})),n.d(t,"OrdersManage",(function(){return jP})),n.d(t,"OrdersOverview",(function(){return kP})),n.d(t,"OrderTypeControl",(function(){return BP})),n.d(t,"Messages",(function(){return FS})),n.d(t,"PaymentOptions",(function(){return qP})),n.d(t,"PaymentOptionSquare",(function(){return QP})),n.d(t,"PagesList",(function(){return sC})),n.d(t,"PageForm",(function(){return gC})),n.d(t,"PlaceList",(function(){return TC})),n.d(t,"PluginList",(function(){return zC})),n.d(t,"Popup",(function(){return JC})),n.d(t,"PointsWalletLevels",(function(){return nI})),n.d(t,"PointsWalletBusinessList",(function(){return fS})),n.d(t,"ProductComponent",(function(){return pI})),n.d(t,"ProductDetatils",(function(){return SI})),n.d(t,"ProductDetailsAdvanced",(function(){return jA})),n.d(t,"ProductExtraMetaFields",(function(){return UI})),n.d(t,"ProductExtraOptions",(function(){return hx})),n.d(t,"ProductExtraOptionDetails",(function(){return JI})),n.d(t,"ProductExtraOptionMetaFields",(function(){return rx})),n.d(t,"ProductExtraSubOptionMetaFields",(function(){return Px})),n.d(t,"ProductExtras",(function(){return Bx})),n.d(t,"ProductForm",(function(){return $x})),n.d(t,"ProductGallery",(function(){return nA})),n.d(t,"ProductMetaFields",(function(){return dA})),n.d(t,"ProductShare",(function(){return UA})),n.d(t,"ProductTagDetails",(function(){return YA})),n.d(t,"ProductTagsList",(function(){return eT})),n.d(t,"ProductImages",(function(){return nT})),n.d(t,"ProductIngredient",(function(){return dT})),n.d(t,"ProductOption",(function(){return hT})),n.d(t,"ProductOptionSuboption",(function(){return gT})),n.d(t,"ProductReviews",(function(){return TA})),n.d(t,"ProductsList",(function(){return ST})),n.d(t,"ProductsListing",(function(){return kT})),n.d(t,"ProfessionalBusinessService",(function(){return YT})),n.d(t,"ProfessionalSchedule",(function(){return XT})),n.d(t,"ProfessionalServices",(function(){return s_})),n.d(t,"ReportsDriverFilter",(function(){return TL})),n.d(t,"QueryLogin",(function(){return v_})),n.d(t,"ReCaptcha",(function(){return k_})),n.d(t,"RewardsPrograms",(function(){return G_})),n.d(t,"RecoveryActionListing",(function(){return Q_})),n.d(t,"RecoveryActionDetail",(function(){return ck})),n.d(t,"RecoveryNotificationList",(function(){return Ok})),n.d(t,"SingleRecoveryNotification",(function(){return cD})),n.d(t,"SitesAuthSettings",(function(){return bD})),n.d(t,"SearchOptions",(function(){return Ek})),n.d(t,"Schedule",(function(){return Dk})),n.d(t,"SignupForm",(function(){return Gk})),n.d(t,"SingleBusinessCard",(function(){return Yk})),n.d(t,"LoyaltyLevelDetail",(function(){return Zk})),n.d(t,"SingleOrderCard",(function(){return Qk})),n.d(t,"SingleProductCard",(function(){return eD})),n.d(t,"SingleBusinessProduct",(function(){return eB})),n.d(t,"SingleBusinessCategory",(function(){return fB})),n.d(t,"UserFormDetails",(function(){return TD})),n.d(t,"UsersExportCSV",(function(){return ND})),n.d(t,"UpsellingPage",(function(){return JD})),n.d(t,"WrapperGoogleMaps",(function(){return Vg})),n.d(t,"OrderDetails",(function(){return tU})),n.d(t,"OrderReview",(function(){return cU})),n.d(t,"PaymentOptionCash",(function(){return HU})),n.d(t,"PaymentOptionPaypal",(function(){return eL})),n.d(t,"PaymentOptionStripe",(function(){return cL})),n.d(t,"PaymentOptionStripeDirect",(function(){return yL})),n.d(t,"PaymentOptionStripeRedirect",(function(){return OL})),n.d(t,"PhoneAutocomplete",(function(){return CU})),n.d(t,"BusinessesMap",(function(){return TU})),n.d(t,"StripeElementsForm",(function(){return YL})),n.d(t,"CardForm",(function(){return xB})),n.d(t,"StripeRedirectForm",(function(){return _B})),n.d(t,"SettingsList",(function(){return wB})),n.d(t,"CmsContent",(function(){return mU})),n.d(t,"FloatingButton",(function(){return DB})),n.d(t,"ResetPassword",(function(){return zB})),n.d(t,"ReportsBrandFilter",(function(){return XB})),n.d(t,"ReportsAppIdFilter",(function(){return uF})),n.d(t,"ReportsDriverGroupFilter",(function(){return mF})),n.d(t,"ReviewCustomer",(function(){return NL})),n.d(t,"SiteDetails",(function(){return xF})),n.d(t,"SitesList",(function(){return BF})),n.d(t,"Analytics",(function(){return RF})),n.d(t,"UsersList",(function(){return KF})),n.d(t,"UserTypeFilter",(function(){return fN})),n.d(t,"UserDetails",(function(){return ON})),n.d(t,"UserMetaFields",(function(){return uN})),n.d(t,"UserWallet",(function(){return AN})),n.d(t,"WebhookList",(function(){return MN})),n.d(t,"ConfigContext",(function(){return Qn})),n.d(t,"ConfigProvider",(function(){return er})),n.d(t,"useConfig",(function(){return tr})),n.d(t,"LanguageContext",(function(){return Un})),n.d(t,"LanguageProvider",(function(){return Ln})),n.d(t,"useLanguage",(function(){return Bn})),n.d(t,"OrderContext",(function(){return hr})),n.d(t,"OrderProvider",(function(){return yr})),n.d(t,"useOrder",(function(){return vr})),n.d(t,"BusinessContext",(function(){return FU})),n.d(t,"BusinessProvider",(function(){return NU})),n.d(t,"useBusiness",(function(){return RU})),n.d(t,"SessionContext",(function(){return pn})),n.d(t,"SessionProvider",(function(){return dn})),n.d(t,"useSession",(function(){return hn})),n.d(t,"WebsocketContext",(function(){return En})),n.d(t,"WebsocketProvider",(function(){return Pn})),n.d(t,"useWebsocket",(function(){return Cn})),n.d(t,"ApiContext",(function(){return tn})),n.d(t,"ApiProvider",(function(){return nn})),n.d(t,"useApi",(function(){return rn})),n.d(t,"OrderingContext",(function(){return $U})),n.d(t,"OrderingProvider",(function(){return JU})),n.d(t,"EventContext",(function(){return Rn})),n.d(t,"EventProvider",(function(){return Mn})),n.d(t,"useEvent",(function(){return zn})),n.d(t,"UtilsContext",(function(){return Sr})),n.d(t,"UtilsProviders",(function(){return Er})),n.d(t,"useUtils",(function(){return Pr})),n.d(t,"ValidationFieldsContext",(function(){return qr})),n.d(t,"ValidationFieldsProvider",(function(){return $r})),n.d(t,"useValidationFields",(function(){return Jr})),n.d(t,"CustomerContext",(function(){return co})),n.d(t,"CustomerProvider",(function(){return lo})),n.d(t,"useCustomer",(function(){return fo})),n.d(t,"ToastContext",(function(){return Ur})),n.d(t,"ToastProvider",(function(){return Lr})),n.d(t,"useToast",(function(){return Br})),n.d(t,"ToastType",(function(){return Dr}));var r,o=n(2),a=n.n(o),i=n(1),u=n.n(i),s=n(0),c=n.n(s),l=function(e){this.back_page=e.back_page,this.current_page=e.current_page,this.fisrt_page=e.fisrt_page,this.from=e.from,this.last_page=e.last_page,this.next_page=e.next_page,this.page_size=e.page_size,this.to=e.to,this.total=e.total,this.total_pages=e.total_pages},f=function(){function e(e,t,n){void 0===t&&(t={}),void 0===n&&(n=void 0),this.response=e,this.options=t,this.api=n}return Object.defineProperty(e.prototype,"content",{get:function(){var e=this;if(this.options.json){var t=this.response.data;if(200===this.response.status&&(t.pagination&&(t.pagination=new l(t.pagination)),this.options.CastClass))if(null===t.result)t.result=null;else if(Array.isArray(t.result))t.result=t.result.map((function(t){return new e.options.CastClass(t,e.api)}));else if("object"==typeof t)if("dictionary"===this.options.mode)for(var n in t.result)"object"==typeof t.result[n]&&(t.result[n]=new this.options.CastClass(t.result[n],this.api));else t.result=new this.options.CastClass(t.result,this.api);return t}return this.response.data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),e}(),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)},d=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},h=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},y=function(){function e(e,t,n){void 0===n&&(n=[]),this.hidden=["original","api","hidden"],this.original=p({},e),this.api=t,this.hidden=this.hidden.concat(n)}return e.prototype.setApi=function(e){this.api=e},e.prototype.getId=function(){},e.prototype.save=function(){return d(this,void 0,void 0,(function(){var e,t,n,r=this;return h(this,(function(o){switch(o.label){case 0:if(this.api.setModelId(this.getId()),!this.api)throw new Error("You must provide the `api` to use `save` function. Example: const newModel = new Model(model, api) or newModel.setApi(api)");return e={},Object.entries(this).forEach((function(t){var n=t[0],o=t[1];r.hidden.includes(n)||o===r.original[n]||(e[n]=o)})),Object.values(e).length>0?[4,this.api.save(e)]:[3,2];case 1:return(t=o.sent().content).error||(n={},Object.entries(t.result).forEach((function(e){var t=e[0],o=e[1];r.hidden.includes(t)||(n[t]=o)})),Object.assign(this,n),this.original=p({},this)),[2,t];case 2:return[2,{error:!1,result:this}]}}))}))},e}(),v=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return v(t,e),t.prototype.getId=function(){return this.id},t}(y),b=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},g=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},O=function(){function e(e){this.attributes=[],this.query={},this.ordering=e}return e.prototype.select=function(e){return this.attributes=e,this},e.prototype.where=function(e){return this.conditions=e,this},e.prototype.setMode=function(e){return this.mode=e,this},e.prototype.asDashboard=function(){return this.setMode("dashboard"),this},e.prototype.asDictionary=function(){return this.setMode("dictionary"),this},e.prototype.parameters=function(e){return this.query=Object.assign(this.query,e),this},e.prototype.makeRequest=function(e,t,n,r,o){return b(this,void 0,void 0,(function(){var a,i;return g(this,(function(u){switch(u.label){case 0:if(a=Object.assign({CastClass:r,json:!0,api:this},o),"GET"===e&&(a.attributes=this.attributes,a.conditions=this.conditions,a.mode=this.mode,a.query||(a.query={}),Object.assign(a.query,this.query),n))for(i in n)a.query[i]=n[i];switch(e){case"GET":return[3,1];case"POST":return[3,3];case"PUT":return[3,5];case"DELETE":return[3,7]}return[3,9];case 1:return[4,this.ordering.get(t,a)];case 2:case 4:case 6:case 8:return[2,u.sent()];case 3:return[4,this.ordering.post(t,n,a)];case 5:return[4,this.ordering.put(t,n,a)];case 7:return[4,this.ordering.delete(t,a)];case 9:throw Error("The `"+e+"` methos is not supported.")}}))}))},e}(),w=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},E=function(e){function t(t,n){var r=e.call(this,t)||this;return r.languageId=n,r}return w(t,e),t.prototype.setModelId=function(e){this.languageId=e},t.prototype.get=function(e){return void 0===e&&(e={}),j(this,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:if(this.languageId&&this.conditions)throw new Error("The `where` function is not compatible with languages(languageId). Example ordering.languages().where(contitions).get()");return t="/languages"+(this.languageId?"/"+this.languageId:""),[4,this.makeRequest("GET",t,void 0,m,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),j(this,void 0,void 0,(function(){var n,r,o,a,i;return S(this,(function(u){switch(u.label){case 0:return n="/languages"+(this.languageId?"/"+this.languageId:""),[4,this.makeRequest(this.languageId?"PUT":"POST",n,e,m,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.languageId||(this.languageId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),j(this,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:if(!this.languageId)throw new Error("`languageId` is require to delete. Example: ordering.languages(languageId).delete()");return t="/languages/"+this.languageId,[4,this.makeRequest("DELETE",t,void 0,m,e)];case 1:return[2,n.sent()]}}))}))},t}(O),P=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},I=function(){function e(e){this.ordering=e}return e.prototype.auth=function(e,t){return void 0===t&&(t={json:!0,system:!0}),P(this,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return[4,this.ordering.post("/system/auth",e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.getCode=function(e,t){return void 0===t&&(t={json:!0,system:!0}),P(this,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return[4,this.ordering.post("/system/code",e,t)];case 1:return[2,n.sent()]}}))}))},e}(),x=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(e){void 0===e&&(e={}),this.access_token=e.access_token,this.expires_in=e.expires_in,this.token_type=e.token_type},T=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["session","addresses"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),t.session&&(r.session=new A(t.session)),r}return x(t,e),t.prototype.isAdministrator=function(){return 0===this.level},t.prototype.isDriver=function(){return 4===this.level},t.prototype.isBusinessOwner=function(){return 2===this.level},t.prototype.isCustomer=function(){return 3===this.level},t.prototype.getAccessToken=function(){var e;return null===(e=this.session)||void 0===e?void 0:e.access_token},t.prototype.getId=function(){return this.id},t}(y),_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,[])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return _(t,e),t.prototype.getId=function(){return this.id},t}(y),D=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),U=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},L=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},B=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.userId=n,o.addressId=r,o}return D(t,e),t.prototype.setModelId=function(e){this.addressId=e},t.prototype.get=function(e){return void 0===e&&(e={}),U(this,void 0,void 0,(function(){var t;return L(this,(function(n){switch(n.label){case 0:if(!this.userId)throw new Error("You must provide the `userId` param. Example ordering.users(userId).addresses(addressId?).get()");if(this.addressId&&this.conditions)throw new Error("The `where` function is not compatible with users(userId).addresses(addressId). Example ordering.users(userId).addresses().where(contitions).get()");return t="/users/"+this.userId+"/addresses"+(this.addressId?"/"+this.addressId:""),[4,this.makeRequest("GET",t,void 0,k,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),U(this,void 0,void 0,(function(){var n,r,o,a,i;return L(this,(function(u){switch(u.label){case 0:if(!this.userId)throw new Error("You must provide the `userId` param. Example ordering.users(userId).addresses(addressId?).save(changes)");return n="/users/"+this.userId+"/addresses"+(this.addressId?"/"+this.addressId:""),[4,this.makeRequest(this.addressId?"PUT":"POST",n,e,k,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.addressId||(this.addressId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),U(this,void 0,void 0,(function(){var t;return L(this,(function(n){switch(n.label){case 0:if(!this.userId)throw new Error("`userId` is require to delete. Example: ordering.users(userId).addresses(addressId).delete()");if(!this.addressId)throw new Error("`addressId` is require to delete. Example: ordering.users(userId).addresses(addressId).delete()");return t="/users/"+this.userId+"/addresses/"+this.addressId,[4,this.makeRequest("DELETE",t,void 0,k,e)];case 1:return[2,n.sent()]}}))}))},t}(O),F=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["driver"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return F(t,e),t}(y),R=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),M=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},z=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},G=function(e){function t(t,n){var r=e.call(this,t)||this;return r.ordering=t,r.driver_id=n,r}return R(t,e),t.prototype.setModelId=function(e){this.driver_id=e},t.prototype.get=function(e){return void 0===e&&(e={}),M(this,void 0,void 0,(function(){var t;return z(this,(function(n){switch(n.label){case 0:if(!this.driver_id)throw new Error("You must provide the `dfriver_id` param. Example ordering.users(driver_id).driverLocations().get()");if(this.driver_id&&this.conditions)throw new Error("The `where` function is not compatible with users(driver_id). Example ordering.users(driver_id).where(contitions).driverLocations().get()");return t="/users"+(this.driver_id?"/"+this.driver_id:"/locations"),[4,this.makeRequest("GET",t,void 0,N,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return M(this,void 0,void 0,(function(){var n;return z(this,(function(r){switch(r.label){case 0:if(!this.driver_id)throw new Error("You must provide the `dfriver_id` param. Example ordering.users(driver_id).driverLocations().save(changes)");if(!e.location.lat||!e.location.lng)throw new Error("You must provide the `location` param. Example ordering.users(driver_id).driverLocations().save({ lat: 10, lng: 10})");return n="/users"+(this.driver_id?"/"+this.driver_id+"/locations":""),[4,this.makeRequest("POST",n,e,N,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.delete=function(e){throw new Error("Method not implemented.")},t}(O),Y=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),q=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},$=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},J=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t)||this;return r.userId=n,r}return Y(t,e),t.prototype.setModelId=function(e){this.userId=e},t.prototype.get=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t;return $(this,(function(n){switch(n.label){case 0:if(this.userId&&this.conditions)throw new Error("The `where` function is not compatible with users(userId). Example ordering.users().where(contitions).get()");return t="/users"+(this.userId?"/"+this.userId:""),[4,this.makeRequest("GET",t,void 0,T,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var n,r,o,a,i;return $(this,(function(u){switch(u.label){case 0:return n="/users"+(this.userId?"/"+this.userId:""),[4,this.makeRequest("POST",n,e,T,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.userId||(this.userId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t;return $(this,(function(n){switch(n.label){case 0:if(!this.userId)throw new Error("`userId` is require to delete. Example: ordering.users(userId).delete()");return t="/users/"+this.userId,[4,this.makeRequest("DELETE",t,void 0,T,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.auth=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var n,r,o,a;return $(this,(function(i){switch(i.label){case 0:return"/auth",[4,this.makeRequest("POST","/auth",e,T,t)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||(this.userId=a.id),[2,n]}}))}))},t.prototype.logout=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),q(this,void 0,void 0,(function(){return $(this,(function(n){switch(n.label){case 0:return"/auth/logout",[4,this.makeRequest("POST","/auth/logout",e,T,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.forgotPassword=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){return $(this,(function(n){switch(n.label){case 0:return"/users/forgot",[4,this.makeRequest("POST","/users/forgot",e,T,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.resetPassword=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){return $(this,(function(n){switch(n.label){case 0:return"/users/reset",[4,this.makeRequest("POST","/users/reset",e,T,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.authFacebook=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var n,r,o,a;return $(this,(function(i){switch(i.label){case 0:return"/auth/facebook",[4,this.makeRequest("POST","/auth/facebook",e,T,t)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||(this.userId=a.id),[2,n]}}))}))},t.prototype.authGoogle=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var n,r,o,a;return $(this,(function(i){switch(i.label){case 0:return"/auth/google",[4,this.makeRequest("POST","/auth/google",e,T,t)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||(this.userId=a.id),[2,n]}}))}))},t.prototype.alerts=function(){var e=this;if(!this.userId)throw new Error("`userId` is require get alerts. Example: ordering.users(userId).alerts().get()");return{get:function(t){return void 0===t&&(t={}),q(e,void 0,void 0,(function(){var e;return $(this,(function(n){switch(n.label){case 0:return e="/users/"+this.userId+"/alerts",[4,this.makeRequest("GET",e,void 0,void 0,t)];case 1:return[2,n.sent()]}}))}))}}},t.prototype.addresses=function(e){if(!this.userId)throw new Error("`userId` is require to use API addresses. Example: ordering.users(userId).addresses().get()");return new B(this.ordering,this.userId,e)},t.prototype.driverLocations=function(){if(!this.userId)throw new Error("`userId` is require to use API addresses. Example: ordering.users(userId).driverLocations().get()");return new G(this.ordering,this.userId)},t}(O),V=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return V(t,e),t.prototype.getId=function(){return this.id},t}(y),W=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},X=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Z=function(e){function t(t,n){var r=e.call(this,t)||this;return r.fieldId=n,r}return W(t,e),t.prototype.setModelId=function(e){this.fieldId=e},t.prototype.get=function(e){return void 0===e&&(e={}),K(this,void 0,void 0,(function(){var t;return X(this,(function(n){switch(n.label){case 0:if(this.fieldId&&this.conditions)throw new Error("The `where` function is not compatible with validationFields(fieldId). Example ordering.validationFields().where(contitions).get()");return t="/validationfields"+(this.fieldId?"/"+this.fieldId:""),[4,this.makeRequest("GET",t,void 0,H,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),K(this,void 0,void 0,(function(){var n,r,o,a,i;return X(this,(function(u){switch(u.label){case 0:return n="/validationfields"+(this.fieldId?"/"+this.fieldId:""),[4,this.makeRequest(this.fieldId?"PUT":"POST",n,e,H,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.fieldId||(this.fieldId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),K(this,void 0,void 0,(function(){var t;return X(this,(function(n){switch(n.label){case 0:if(!this.fieldId)throw new Error("`fieldId` is require to delete. Example: ordering.validationFields(fieldId).delete()");return t="/validationfields/"+this.fieldId,[4,this.makeRequest("DELETE",t,void 0,H,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.toType=function(e){return this.conditions=[{attribute:"validate",value:e}],this},t.prototype.toCheckout=function(){return this.toType("checkout")},t.prototype.toAddress=function(){return this.toType("address")},t}(O),Q=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ee=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["customer","business"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return Q(t,e),t.prototype.getId=function(){return this.id},Object.defineProperty(t.prototype,"subtotal",{get:function(){return this.products?this.products.reduce((function(e,t){var n=t.options.reduce((function(e,t){return e+t.suboptions.reduce((function(e,n){return e+(n.position&&"whole"!==n.position?n.half_price:n.price)*(t.allow_suboption_quantity&&n.quantity>1?n.quantity:1)}),0)}),0);return e+(t.price+n)*t.quantity}),0):0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deliveryFee",{get:function(){return this.delivery_type&&1!==this.delivery_type?0:this.delivery_zone_price},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serviceFee",{get:function(){return(this.subtotal-this.discount)*(this.service_fee/100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalTax",{get:function(){return this.subtotal*this.tax/(this.tax+100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDriverTip",{get:function(){return(this.subtotal-this.totalTax)*(this.driver_tip/100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this.subtotal+this.serviceFee+this.deliveryFee+this.totalDriverTip+(2===this.tax_type?this.totalTax:0)-this.discount},enumerable:!1,configurable:!0}),t}(y),te=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ne=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return te(t,e),t.prototype.getId=function(){return this.id},t}(y),re=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},ae=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},ie=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.orderId=n,o.messageId=r,o}return re(t,e),t.prototype.setModelId=function(e){this.messageId=e},t.prototype.get=function(e){return void 0===e&&(e={}),oe(this,void 0,void 0,(function(){var t;return ae(this,(function(n){switch(n.label){case 0:if(!this.orderId)throw new Error("You must provide the `orderId` param. Example ordering.orders(orderId).messages(messageId?).get()");if(this.messageId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(orderId).messages(messageId). Example ordering.orders(orderId).messages().where(contitions).get()");return t="/orders/"+this.orderId+"/messages"+(this.messageId?"/"+this.messageId:""),[4,this.makeRequest("GET",t,void 0,ne,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),oe(this,void 0,void 0,(function(){var n,r,o,a,i;return ae(this,(function(u){switch(u.label){case 0:if(!this.orderId)throw new Error("You must provide the `orderId` param. Example ordering.orders(orderId).messages(messageId?).save(changes)");if(!this.messageId)throw new Error("ordering.orders(orderId).messages(messageId).save(changes) is not implemented.");return n="/orders/"+this.orderId+"/messages"+(this.messageId?"/"+this.messageId:""),[4,this.makeRequest("POST",n,e,ne,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.messageId||(this.messageId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),oe(this,void 0,void 0,(function(){var t;return ae(this,(function(n){switch(n.label){case 0:if(!this.orderId)throw new Error("ordering.orders(orderId).messages(messageId).delete() is not implemented.");if(!this.messageId)throw new Error("ordering.orders(orderId).messages(messageId).delete() is not implemented.");return t="/orders/"+this.orderId+"/messages/"+this.messageId,[4,this.makeRequest("DELETE",t,void 0,ne,e)];case 1:return[2,n.sent()]}}))}))},t}(O),ue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},ce=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},le=function(e){function t(t,n){var r=e.call(this,t)||this;return r.orderId=n,r}return ue(t,e),t.prototype.setModelId=function(e){this.orderId=e},t.prototype.get=function(e){return void 0===e&&(e={}),se(this,void 0,void 0,(function(){var t;return ce(this,(function(n){switch(n.label){case 0:if(this.orderId&&this.conditions)throw new Error("The `where` function is not compatible with orders(orderId). Example ordering.orders().where(contitions).get()");return t="/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest("GET",t,void 0,ee,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),se(this,void 0,void 0,(function(){var n,r,o,a,i;return ce(this,(function(u){switch(u.label){case 0:return n="/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest(this.orderId?"PUT":"POST",n,e,ee,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.orderId||(this.orderId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),se(this,void 0,void 0,(function(){var t;return ce(this,(function(n){switch(n.label){case 0:if(!this.orderId)throw new Error("`orderId` is require to delete. Example: ordering.orders(orderId).delete()");return t="/orders/"+this.orderId,[4,this.makeRequest("DELETE",t,void 0,ee,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.summary=function(e){return void 0===e&&(e={}),se(this,void 0,void 0,(function(){return ce(this,(function(t){switch(t.label){case 0:if(this.orderId)throw new Error("`orderId` is NOT require to summary API. Example: ordering.orders().summary()");return"/orders/dashboard",[4,this.makeRequest("GET","/orders/dashboard",void 0,void 0,e)];case 1:return[2,t.sent()]}}))}))},t.prototype.messages=function(e){if(!this.orderId)throw new Error("`orderId` is require to use API messages. Example: ordering.orders(orderId).messages().get()");if("number"!=typeof this.orderId)throw new Error("`orderId` must be a number to use API messages. Example: ordering.orders(orderId).messages().get()");return new ie(this.ordering,this.orderId,e)},t.prototype.reorder=function(e){return void 0===e&&(e={}),se(this,void 0,void 0,(function(){var t;return ce(this,(function(n){switch(n.label){case 0:if(!this.orderId)throw new Error("`orderId` is require to delete. Example: ordering.orders(orderId).reorder()");return t="/orders/"+this.orderId+"/reorder",[4,this.makeRequest("POST",t,void 0,void 0,e)];case 1:return[2,n.sent()]}}))}))},t}(O),fe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pe=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["business"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return fe(t,e),t}(y),de=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),he=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},ye=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},ve=function(e){function t(t,n){var r=e.call(this,t)||this;return r.orderId=n,r}return de(t,e),t.prototype.setModelId=function(e){this.orderId=e},t.prototype.get=function(e){return void 0===e&&(e={}),he(this,void 0,void 0,(function(){var t;return ye(this,(function(n){switch(n.label){case 0:if(this.orderId&&this.conditions)throw new Error("The `where` function is not compatible with controls(orderId). Example ordering.orders().where(contitions).get()");return t="/controls/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest("GET",t,void 0,pe,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){throw new Error("Method not implemented.")},t.prototype.delete=function(e){throw new Error("Method not implemented.")},t}(O),me=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),be=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,[])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return me(t,e),t.prototype.getId=function(){return this.id},t}(y),ge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oe=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return ge(t,e),t.prototype.getId=function(){return this.id},t}(y),we=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),je=function(e){function t(t,n){var r;void 0===t&&(t={}),void 0===n&&(n=null);var o=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];o[t]=n})),o.products=null===(r=o.products)||void 0===r?void 0:r.map((function(e){return new Oe(e)})),o}return we(t,e),t.prototype.getId=function(){return this.id},t}(y),Se=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ee=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Pe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ce=function(e){function t(t,n,r,o){void 0===o&&(o=null);var a=e.call(this,t)||this;return a.ordering=t,a.businessId=n,a.categoryId=r,a.productId=o,a}return Se(t,e),t.prototype.setModelId=function(e){this.productId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ee(this,void 0,void 0,(function(){var t;return Pe(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId).products(productId?).get()");if(this.productId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).categories(categoryId).products(productId). Example ordering.businesses(businessId).categories(categoryId).products().where(contitions).get()");return t="/business/"+this.businessId+"/categories/"+this.categoryId+"/products"+(this.productId?"/"+this.productId:""),[4,this.makeRequest("GET",t,void 0,Oe,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ee(this,void 0,void 0,(function(){var n,r,o,a,i;return Pe(this,(function(u){switch(u.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId).products(productId?).save(changes)");return n="/business/"+this.businessId+"/categories/"+this.categoryId+"/products"+(this.productId?"/"+this.productId:""),[4,this.makeRequest("POST",n,e,Oe,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.productId||(this.productId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ee(this,void 0,void 0,(function(){var t;return Pe(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");if(!this.categoryId)throw new Error("`categoryId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");if(!this.productId)throw new Error("`productId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");return t="/business/"+this.businessId+"/categories/"+this.categoryId+"/products/"+this.productId,[4,this.makeRequest("DELETE",t,void 0,Oe,e)];case 1:return[2,n.sent()]}}))}))},t}(O),Ie=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Ae=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Te=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.businessId=n,o.categoryId=r,o}return Ie(t,e),t.prototype.setModelId=function(e){this.categoryId=e},t.prototype.get=function(e){return void 0===e&&(e={}),xe(this,void 0,void 0,(function(){var t;return Ae(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId?).get()");if(this.categoryId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).categories(categoryId). Example ordering.businesses(businessId).categories().where(contitions).get()");return t="/business/"+this.businessId+"/categories"+(this.categoryId?"/"+this.categoryId:""),[4,this.makeRequest("GET",t,void 0,je,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),xe(this,void 0,void 0,(function(){var n,r,o,a,i;return Ae(this,(function(u){switch(u.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId?).save(changes)");return n="/business/"+this.businessId+"/categories"+(this.categoryId?"/"+this.categoryId:""),[4,this.makeRequest("POST",n,e,je,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.categoryId||(this.categoryId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),xe(this,void 0,void 0,(function(){var t;return Ae(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).delete()");if(!this.categoryId)throw new Error("`categoryId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).delete()");return t="/business/"+this.businessId+"/categories/"+this.categoryId,[4,this.makeRequest("DELETE",t,void 0,je,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.products=function(e){if(!this.categoryId)throw new Error("`categoryId` is require to use API products. Example: ordering.businesses(businessId).categories(categoryId).products().get()");return new Ce(this.ordering,this.businessId,this.categoryId,e)},t}(O),_e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(e){function t(t,n){var r;void 0===t&&(t={}),void 0===n&&(n=null);var o=e.call(this,t,n,["products"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];o[t]=n})),o.products=null===(r=o.products)||void 0===r?void 0:r.map((function(e){return new Oe(e)})),o}return _e(t,e),t.prototype.getId=function(){return this.id},t}(y),De=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ue=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Le=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Be=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.businessId=n,o.menuId=r,o}return De(t,e),t.prototype.setModelId=function(e){this.menuId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ue(this,void 0,void 0,(function(){var t;return Le(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).menus(menuId?).get()");if(this.menuId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).menus(menuId). Example ordering.businesses(businessId).menus().where(contitions).get()");return t="/business/"+this.businessId+"/menus"+(this.menuId?"/"+this.menuId:""),[4,this.makeRequest("GET",t,void 0,ke,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ue(this,void 0,void 0,(function(){var n,r,o,a,i;return Le(this,(function(u){switch(u.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).menus(menuId?).save(changes)");return n="/business/"+this.businessId+"/menus"+(this.menuId?"/"+this.menuId:""),[4,this.makeRequest(this.menuId?"PUT":"POST",n,e,ke,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.menuId||(this.menuId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ue(this,void 0,void 0,(function(){var t;return Le(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).menus(menuId).delete()");if(!this.menuId)throw new Error("`menuId` is require to delete. Example: ordering.businesses(businessId).menus(menuId).delete()");return t="/business/"+this.businessId+"/menus/"+this.menuId,[4,this.makeRequest("DELETE",t,void 0,ke,e)];case 1:return[2,n.sent()]}}))}))},t}(O),Fe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ne=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Re=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Me=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.businessId=n,o.productId=r,o}return Fe(t,e),t.prototype.setModelId=function(e){this.productId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ne(this,void 0,void 0,(function(){var t;return Re(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).products().get()");return t="/business/"+this.businessId+"/products",[4,this.makeRequest("GET",t,void 0,Oe,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){throw void 0===t&&(t={}),new Error("Method not implemented.")},t.prototype.delete=function(e){throw void 0===e&&(e={}),new Error("Method not implemented.")},t}(O),ze=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ge=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Ye=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},qe=function(e){function t(t,n){var r=e.call(this,t)||this;return r.businessId=n,r}return ze(t,e),t.prototype.setModelId=function(e){this.businessId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ge(this,void 0,void 0,(function(){var t,n,r,o,a;return Ye(this,(function(i){switch(i.label){case 0:if(this.businessId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId). Example ordering.businesses().where(contitions).get()");return t="/business"+(this.businessId?"/"+this.businessId:""),[4,this.makeRequest("GET",t,void 0,be,e)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||this.businessId||(this.businessId=a.id),[2,n]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ge(this,void 0,void 0,(function(){var n,r,o,a,i;return Ye(this,(function(u){switch(u.label){case 0:return n="/business"+(this.businessId?"/"+this.businessId:""),[4,this.makeRequest("POST",n,e,be,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.businessId||(this.businessId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ge(this,void 0,void 0,(function(){var t;return Ye(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).delete()");return t="/business/"+this.businessId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.validateCart=function(e,t){return void 0===t&&(t={}),Ge(this,void 0,void 0,(function(){var n;return Ye(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to validateCart. Example: ordering.businesses(businessId).validateCart(cart)");return n="/business/"+this.businessId+"/validate_cart",[4,this.makeRequest("GET",n,e,void 0,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.products=function(){if(!this.businessId)throw new Error("`businessId` is require to products. Example: ordering.businesses(businessId).products().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API menus. Example: ordering.businesses(businessId).products().get()");return new Me(this.ordering,this.businessId)},t.prototype.categories=function(e){if(!this.businessId)throw new Error("`businessId` is require to use API categories. Example: ordering.businesses(businessId).categories().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API categories. Example: ordering.businesses(businessId).categories().get()");return new Te(this.ordering,this.businessId,e)},t.prototype.menus=function(e){if(!this.businessId)throw new Error("`businessId` is require to use API menus. Example: ordering.businesses(businessId).menus().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API menus. Example: ordering.businesses(businessId).menus().get()");return new Be(this.ordering,this.businessId,e)},t}(O),$e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Je=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["business"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return $e(t,e),t}(y),Ve=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),He=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},We=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ke=function(e){function t(t){return e.call(this,t)||this}return Ve(t,e),t.prototype.setModelId=function(e){this.driversGroupsId=e},t.prototype.get=function(e){return void 0===e&&(e={}),He(this,void 0,void 0,(function(){var t;return We(this,(function(n){switch(n.label){case 0:if(this.driversGroupsId&&this.conditions)throw new Error("The `where` function is not compatible with orders(driversGroupsId). Example ordering.orders().where(contitions).get()");return t="/drivergroups"+(this.driversGroupsId?"/"+this.driversGroupsId:""),[4,this.makeRequest("GET",t,void 0,Je,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){throw new Error("Method not implemented.")},t.prototype.delete=function(e){throw new Error("Method not implemented.")},t}(O),Xe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ze=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return Xe(t,e),t.prototype.getId=function(){return this.id},t}(y),Qe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},tt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},nt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.configId=n,r}return Qe(t,e),t.prototype.setModelId=function(e){this.configId=e},t.prototype.get=function(e){return void 0===e&&(e={}),et(this,void 0,void 0,(function(){var t;return tt(this,(function(n){switch(n.label){case 0:if(this.configId&&this.conditions)throw new Error("The `where` function is not compatible with configs(configId). Example ordering.configs().where(contitions).get()");return t="/configs"+(this.configId?"/"+this.configId:""),[4,this.makeRequest("GET",t,void 0,Ze,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),et(this,void 0,void 0,(function(){var n,r,o,a,i;return tt(this,(function(u){switch(u.label){case 0:return n="/configs"+(this.configId?"/"+this.configId:""),[4,this.makeRequest(this.configId?"PUT":"POST",n,e,Ze,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.configId||(this.configId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),et(this,void 0,void 0,(function(){var t;return tt(this,(function(n){switch(n.label){case 0:if(!this.configId)throw new Error("`configId` is require to delete. Example: ordering.configs(configId).delete()");return t="/configs/"+this.configId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t}(O),rt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ot=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return rt(t,e),t.prototype.getId=function(){return this.id},t}(y),at=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},ut=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},st=function(e){function t(t,n){var r=e.call(this,t)||this;return r.translationId=n,r}return at(t,e),t.prototype.setModelId=function(e){this.translationId=e},t.prototype.get=function(e){return void 0===e&&(e={}),it(this,void 0,void 0,(function(){var t;return ut(this,(function(n){switch(n.label){case 0:if(this.translationId&&this.conditions)throw new Error("The `where` function is not compatible with translations(translationId). Example ordering.translations().where(contitions).get()");return t="/translations"+(this.translationId?"/"+this.translationId:""),[4,this.makeRequest("GET",t,void 0,ot,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),it(this,void 0,void 0,(function(){var n,r,o,a,i;return ut(this,(function(u){switch(u.label){case 0:return n="/translations"+(this.translationId?"/"+this.translationId:""),[4,this.makeRequest(this.translationId?"PUT":"POST",n,e,ot,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.translationId||(this.translationId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),it(this,void 0,void 0,(function(){var t;return ut(this,(function(n){switch(n.label){case 0:if(!this.translationId)throw new Error("`translationId` is require to delete. Example: ordering.translations(translationId).delete()");return t="/translations/"+this.translationId,[4,this.makeRequest("DELETE",t,void 0,ot,e)];case 1:return[2,n.sent()]}}))}))},t}(O),ct=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lt=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["created_at","updated_at"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n,["updated_at","created_at"].includes(t)&&(r[t]=new Date(n))})),r}return ct(t,e),t.prototype.getId=function(){return this.id},t}(y),ft=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},dt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},ht=function(e){function t(t,n){var r=e.call(this,t)||this;return r.pageId=n,r}return ft(t,e),t.prototype.setModelId=function(e){this.pageId=e},t.prototype.get=function(e){return void 0===e&&(e={}),pt(this,void 0,void 0,(function(){var t;return dt(this,(function(n){switch(n.label){case 0:if(this.pageId&&this.conditions)throw new Error("The `where` function is not compatible with pages(pageId). Example ordering.pages().where(contitions).get()");return t="/pages"+(this.pageId?"/"+this.pageId:""),[4,this.makeRequest("GET",t,void 0,lt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),pt(this,void 0,void 0,(function(){var n,r,o,a,i;return dt(this,(function(u){switch(u.label){case 0:return n="/pages"+(this.pageId?"/"+this.pageId:""),[4,this.makeRequest(this.pageId?"PUT":"POST",n,e,lt,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.pageId||(this.pageId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),pt(this,void 0,void 0,(function(){var t;return dt(this,(function(n){switch(n.label){case 0:if(!this.pageId)throw new Error("`pageId` is require to delete. Example: ordering.pages(pageId).delete()");return t="/pages/"+this.pageId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t}(O),yt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vt=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return yt(t,e),t.prototype.getId=function(){return this.id},t}(y),mt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bt=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return mt(t,e),t.prototype.getId=function(){return this.id},t}(y),gt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ot=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},wt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},jt=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.countryId=n,o.cityId=r,o}return gt(t,e),t.prototype.setModelId=function(e){this.cityId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ot(this,void 0,void 0,(function(){var t;return wt(this,(function(n){switch(n.label){case 0:if(!this.countryId)throw new Error("You must provide the `countryId` param. Example ordering.countries(countryId).cities(cityId?).get()");if(this.cityId&&this.conditions)throw new Error("The `where` function is not compatible with countries(countryId).cities(cityId). Example ordering.countries(countryId).cities().where(contitions).get()");return t="/countries/"+this.countryId+"/cities"+(this.cityId?"/"+this.cityId:""),[4,this.makeRequest("GET",t,void 0,bt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ot(this,void 0,void 0,(function(){var n,r,o,a,i;return wt(this,(function(u){switch(u.label){case 0:if(!this.countryId)throw new Error("You must provide the `countryId` param. Example ordering.countries(countryId).cities(cityId?).save(changes)");return n="/countries/"+this.countryId+"/cities"+(this.cityId?"/"+this.cityId:""),[4,this.makeRequest(this.cityId?"PUT":"POST",n,e,bt,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.cityId||(this.cityId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ot(this,void 0,void 0,(function(){var t;return wt(this,(function(n){switch(n.label){case 0:if(!this.countryId)throw new Error("`countryId` is require to delete. Example: ordering.countries(countryId).cities(cityId).delete()");if(!this.cityId)throw new Error("`cityId` is require to delete. Example: ordering.countries(countryId).cities(cityId).delete()");return t="/countries/"+this.countryId+"/cities/"+this.cityId,[4,this.makeRequest("DELETE",t,void 0,void 0,e)];case 1:return[2,n.sent()]}}))}))},t}(O),St=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Et=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Pt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ct=function(e){function t(t,n){var r=e.call(this,t)||this;return r.countryId=n,r}return St(t,e),t.prototype.setModelId=function(e){this.countryId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Et(this,void 0,void 0,(function(){var t;return Pt(this,(function(n){switch(n.label){case 0:if(this.countryId&&this.conditions)throw new Error("The `where` function is not compatible with countries(countryId). Example ordering.countries().where(contitions).get()");return t="/countries"+(this.countryId?"/"+this.countryId:""),[4,this.makeRequest("GET",t,void 0,vt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Et(this,void 0,void 0,(function(){var n,r,o,a,i;return Pt(this,(function(u){switch(u.label){case 0:return n="/countries"+(this.countryId?"/"+this.countryId:""),[4,this.makeRequest(this.countryId?"PUT":"POST",n,e,vt,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.countryId||(this.countryId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Et(this,void 0,void 0,(function(){var t;return Pt(this,(function(n){switch(n.label){case 0:if(!this.countryId)throw new Error("`countryId` is require to delete. Example: ordering.countries(countryId).delete()");return t="/countries/"+this.countryId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.cities=function(e){if(!this.countryId)throw new Error("`countryId` is require to use API cities. Example: ordering.countries(countryId).cities().get()");return new jt(this.ordering,this.countryId,e)},t}(O),It=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xt=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return It(t,e),t.prototype.getId=function(){return this.id},t}(y),At=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},_t=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},kt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.orderOptionId=n,r}return At(t,e),t.prototype.setModelId=function(e){this.orderOptionId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Tt(this,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:if(this.orderOptionId)throw new Error("ordering.orderOptions(orderOptionId).get() is not implemented");if(this.orderOptionId&&this.conditions)throw new Error("The `where` function is not compatible with countries(orderOptionId). Example ordering.orderOptions().where(contitions).get()");return"/order_options",[4,this.makeRequest("GET","/order_options",void 0,xt,e)];case 1:return[2,t.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Tt(this,void 0,void 0,(function(){var n,r,o,a;return _t(this,(function(i){switch(i.label){case 0:return"/order_options",[4,this.makeRequest("PUT","/order_options",e,xt,t)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||this.orderOptionId||(this.orderOptionId=a.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Tt(this,void 0,void 0,(function(){var t;return _t(this,(function(n){switch(n.label){case 0:if(this.orderOptionId||!this.orderOptionId)throw new Error("ordering.orderOptions(orderOptionId).delete() is not implemented.");return t="/order_options/"+this.orderOptionId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t}(O),Dt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ut=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return Dt(t,e),t.prototype.getId=function(){return this.id},t}(y),Lt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Ft=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Nt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.cartId=n,r}return Lt(t,e),t.prototype.setModelId=function(e){this.cartId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Bt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){switch(n.label){case 0:if(this.cartId&&this.conditions)throw new Error("The `where` function is not compatible with carts(cartId). Example ordering.carts().where(contitions).get()");return t="/carts"+(this.cartId?"/"+this.cartId:""),[4,this.makeRequest("GET",t,void 0,Ut,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.getBusinesses=function(e){return void 0===e&&(e={}),Bt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){switch(n.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).getBusinesses(options).");return t="/carts/"+this.cartId+"/businesses",[4,this.makeRequest("GET",t,void 0,Ut,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.set=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){var n;return Ft(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirm(options).");return n="/carts/"+this.cartId,[4,this.makeRequest("PUT",n,e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){var e,t,n,r;return Ft(this,(function(o){switch(o.label){case 0:throw new Error("ordering.carts(cartId?).save() is not implemented.");case 1:return e=o.sent(),t=e.content,n=t.error,r=t.result,n||this.cartId||(this.cartId=r.id),[2,e]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(e){switch(e.label){case 0:throw new Error("ordering.carts(cartId).delete() is not implemented.");case 1:return[2,e.sent()]}}))}))},t.prototype.addProduct=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/add_product",[4,this.makeRequest("POST","/carts/add_product",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.removeProduct=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/remove_product",[4,this.makeRequest("POST","/carts/remove_product",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.updateProduct=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/update_product",[4,this.makeRequest("POST","/carts/update_product",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.applyCoupon=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/apply_coupon",[4,this.makeRequest("POST","/carts/apply_coupon",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.changeDriverTip=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/change_driver_tip",[4,this.makeRequest("POST","/carts/change_driver_tip",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.changePaymethod=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/change_paymethod",[4,this.makeRequest("POST","/carts/change_paymethod",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.place=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){var n;return Ft(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).place(data, options).");return n="/carts/"+this.cartId+"/place",[4,this.makeRequest("POST",n,e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.confirm=function(e){return void 0===e&&(e={}),Bt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){switch(n.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirm(options).");return t="/carts/"+this.cartId+"/confirm",[4,this.makeRequest("POST",t,{},Ut,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.confirmWithData=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){var n;return Ft(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirmWithData(data, options).");return n="/carts/"+this.cartId+"/confirm",[4,this.makeRequest("POST",n,e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t}(O),Rt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mt=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,[])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return Rt(t,e),t}(y),zt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Yt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},qt=function(e){function t(t,n,r,o){void 0===o&&(o=null);var a=e.call(this,t)||this;return a.ordering=t,a.businessId=n,a.userId=r,a.card_id=o,a}return zt(t,e),t.prototype.setModelId=function(e){this.businessId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){var t;return Yt(this,(function(n){switch(n.label){case 0:if(!this.businessId||!this.userId)throw new Error("You must provide the `businessId` and `userId` param. Example ordering.paymentCards(businessId,userId).get()");return t="/payments/stripe/cards?business_id="+this.businessId+"&user_id="+this.userId,[4,this.makeRequest("GET",t,void 0,Mt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Gt(this,void 0,void 0,(function(){return Yt(this,(function(e){switch(e.label){case 0:throw new Error("ordering.paymentCards(businessId,userId).save(card) is not implemented.");case 1:return[2,e.sent()]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){var t;return Yt(this,(function(n){switch(n.label){case 0:if(!this.card_id||!this.businessId||!this.userId)throw new Error("You must provide the `businessId`, `userId`, `cardId` param. Example ordering.paymentCards(businessId,userId,cardId).delete()");return t="/payments/stripe/cards?business_id="+this.businessId+"&user_id="+this.userId+"&card_id="+this.card_id,[4,this.makeRequest("DELETE",t,void 0,Mt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.getCredentials=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){return Yt(this,(function(t){switch(t.label){case 0:return"/payments/stripe/credentials",[4,this.makeRequest("GET","/payments/stripe/credentials",void 0,Mt,e)];case 1:return[2,t.sent()]}}))}))},t}(O),$t=function(){return $t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$t.apply(this,arguments)},Jt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Vt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ht=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Wt=function(){function e(e){var t=void 0===e?{}:e,n=t.url,r=void 0===n?"https://apiv4.ordering.co":n,o=t.version,a=void 0===o?"v400":o,i=t.project,u=void 0===i?"demo":i,s=t.language,c=void 0===s?"en":s,l=t.accessToken,f=void 0===l?null:l,p=t.apiKey,d=void 0===p?null:p,h=t.appId,y=void 0===h?null:h;this.url=r,this.version=a,this.project=u,this.language=c,this.accessToken=f,this.apiKey=d,this.appId=y}return Object.defineProperty(e.prototype,"root",{get:function(){return this.url+"/"+this.version+"/"+this.language+"/"+this.project},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"systemRoot",{get:function(){return this.url+"/"+this.version},enumerable:!1,configurable:!0}),e.prototype.setAccessToken=function(e){return this.accessToken=e,this},e.prototype.setApiKey=function(e){return this.apiKey=e,this},e.prototype.setAppId=function(e){return this.appId=e,this},e.prototype.setUrl=function(e){return this.url=e,this},e.prototype.setProject=function(e){return this.project=e,this},e.prototype.setVersion=function(e){return this.version=e,this},e.prototype.setLanguage=function(e){return this.language=e,this},e.prototype.users=function(e){return void 0===e&&(e=null),new J(this,e)},e.prototype.orders=function(e){return void 0===e&&(e=null),new le(this,e)},e.prototype.controls=function(e){return void 0===e&&(e=null),new ve(this,e)},e.prototype.driversgroups=function(){return new Ke(this)},e.prototype.configs=function(e){return void 0===e&&(e=null),new nt(this,e)},e.prototype.businesses=function(e){return new qe(this,e)},e.prototype.validationFields=function(e){return new Z(this,e)},e.prototype.languages=function(e){return new E(this,e)},e.prototype.translations=function(e){return new st(this,e)},e.prototype.pages=function(e){return new ht(this,e)},e.prototype.countries=function(e){return new Ct(this,e)},e.prototype.orderOptions=function(e){return new kt(this,e)},e.prototype.carts=function(e){return new Nt(this,e)},e.prototype.paymentCards=function(e,t,n){return new qt(this,e,t,n)},e.prototype.system=function(){return new I(this)},e.prototype.getRequestProps=function(e){var t,n=e.system?this.systemRoot:this.root,r=e.query,o=e.mode,a=e.conditions,i=e.headers,u=Ht(e,["query","mode","conditions","headers"]),s=r||{};if(s&&Object.keys(s).length>0)for(var c in s)s[c]="object"==typeof s[c]?JSON.stringify(s[c]):s[c];var l=(null===(t=null==s?void 0:s.params)||void 0===t?void 0:t.split(","))||[];(l=l.concat(e.attributes||[])).length>0&&(s.params=l.join(",")),a&&(s.where="object"==typeof a?JSON.stringify(a):a),o&&(s.mode=e.mode);var f={};return this.accessToken&&!this.apiKey&&(f.Authorization="Bearer "+this.accessToken),this.apiKey&&(f["X-Api-Key"]=this.apiKey),this.appId&&(f["X-APP-X"]=this.appId),[n,$t($t({},u),{params:s||{},headers:Object.assign(f,i||{})})]},e.prototype.makeRequest=function(e,t,n,r){return new Promise((function(o,a){var i=new window.XMLHttpRequest,u=Object.entries(r.params||{}).map((function(e){return e[0]+"="+e[1]})).join("&");i.open(e,t+(u?"?"+u:"")),Object.entries(r.headers||{}).forEach((function(e){i.setRequestHeader(e[0],e[1])})),r.cancelToken&&"object"==typeof r.cancelToken&&(r.cancelToken.cancel=function(){i.abort()}),i.onload=function(){if(this.status<500){var e=r.json?JSON.parse(this.response):this.response;o({request:this,data:e,status:this.status,statusText:this.statusText})}else a(new Error("Internal error"))},i.onerror=function(e){a(e)},r.json?(i.setRequestHeader("Content-Type","application/json"),i.send(n?JSON.stringify(n):null)):i.send()}))},e.prototype.get=function(e,t){return void 0===t&&(t={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var n,r,o,a;return Vt(this,(function(i){switch(i.label){case 0:return n=this.getRequestProps(t),r=n[0],o=n[1],[4,this.makeRequest("GET",r+e,null,o)];case 1:return a=i.sent(),[2,new f(a,t,t.api)]}}))}))},e.prototype.post=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var r,o,a,i,u;return Vt(this,(function(s){switch(s.label){case 0:if(r=this.getRequestProps(n),o=r[0],a=r[1],n.json)for(i in t)null!==t[i]&&"object"==typeof t[i]&&(t[i]=JSON.stringify(t[i]));return[4,this.makeRequest("POST",o+e,t,a)];case 1:return u=s.sent(),[2,new f(u,n,n.api)]}}))}))},e.prototype.put=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var r,o,a,i,u;return Vt(this,(function(s){switch(s.label){case 0:if(r=this.getRequestProps(n),o=r[0],a=r[1],n.json)for(i in t)null!==t[i]&&"object"==typeof t[i]&&(t[i]=JSON.stringify(t[i]));return[4,this.makeRequest("PUT",o+e,t,a)];case 1:return u=s.sent(),[2,new f(u,n,n.api)]}}))}))},e.prototype.delete=function(e,t){return void 0===t&&(t={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var n,r,o,a;return Vt(this,(function(i){switch(i.label){case 0:return n=this.getRequestProps(t),r=n[0],o=n[1],[4,this.makeRequest("DELETE",r+e,null,o)];case 1:return a=i.sent(),[2,new f(a,t,t.api)]}}))}))},e}();function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tn=Object(i.createContext)(),nn=function(e){var t=e.settings,n=e.children,r=Qt(Object(i.useState)(Object.assign(t.api,{project:t.project,appId:t.app_id})),2),o=r[0],a=r[1],s=Qt(Object(i.useState)(new Wt(o)),2),c=s[0],l=s[1],f=Qt(Object(i.useState)(t.api.language),2),p=f[0],d=f[1];Object(i.useEffect)((function(){a(Object.assign(t.api,{project:t.project,appId:t.app_id})),l(new Wt(Object.assign(t.api,{project:t.project,appId:t.app_id})))}),[t]),Object(i.useEffect)((function(){if(c.language!==p){var e=new Wt(Xt(Xt({},o),{},{language:p}));l(e)}}),[p]);var h={setLanguage:function(e){e!==p&&d(e)}};return u.a.createElement(tn.Provider,{value:[c,h]},n)},rn=function(){return Object(i.useContext)(tn)||[{}]};function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sn(a,r,o,i,u,"next",e)}function u(e){sn(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pn=Object(i.createContext)(),dn=function(e){var t=e.children,n=e.strategy,r=ln(rn(),1)[0],o=ln(Object(i.useState)({auth:null,token:null,user:null,loading:!0}),2),s=o[0],c=o[1],l=function(){var e=cn(a.a.mark((function e(){var t,n,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:if(t=e.sent,n=t.auth,o=t.token,i=t.user,!o){e.next=12;break}return u={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=10,fetch("".concat(r.root,"/order_options"),u);case 10:e.sent.ok||d();case 12:c(an(an({},s),{},{auth:n,token:o,user:i,loading:!1}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=cn(a.a.mark((function e(){var t,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getItem("token");case 2:return t=e.sent,e.next=5,n.getItem("token");case 5:return r=e.sent,e.next=8,n.getItem("project");case 8:return o=e.sent,e.next=11,n.getItem("user",!0);case 11:return i=e.sent,e.abrupt("return",{auth:t,token:r,project:o,user:i});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=cn(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setItem("token",t.token);case 2:return e.next=4,n.setItem("user",t.user,!0);case 4:return e.next=6,n.setItem("project",t.project);case 6:c(an(an({},s),{},{auth:!0,user:t.user,token:t.token,loading:!1}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=cn(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.removeItem("token");case 2:return e.next=4,n.removeItem("user");case 4:return e.next=6,n.removeItem("project");case 6:c(an(an({},s),{},{auth:!1,user:null,token:null,loading:!1}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=cn(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setItem("user",t,!0);case 2:c(an(an({},s),{},{user:t,loading:!1}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=cn(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:t=e.sent,n=t.token,r=t.project,o=t.user,n&&!s.token&&p({user:o,token:n,project:r}),!n&&s.token&&d();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=setInterval((function(){y()}),1e3);return function(){return clearInterval(e)}}),[s]),Object(i.useEffect)((function(){l()}),[]);var v={login:p,logout:d,changeUser:h};return u.a.createElement(pn.Provider,{value:[s,v]},t)},hn=function(){return Object(i.useContext)(pn)||[{},function(){}]},yn=n(32),vn=n.n(yn);function mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var bn=function(){function e(t){var n=t.url,r=t.project,o=t.accessToken;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=n,this.project=r,this.accessToken=o,this.queue=[]}var t,n,r;return t=e,n=[{key:"connect",value:function(){var e=this;this.socket=vn()(this.url,{extraHeaders:{Authorization:"Bearer ".concat(this.accessToken)},query:"token=".concat(this.accessToken,"&project=").concat(this.project),transports:["websocket"]}),this.socket.on("connect",(function(){for(var t;void 0!==(t=e.queue.shift());)"on"===t.action?e.on(t.event,t.func):"join"===t.action?e.join(t.room):"leave"===t.action?e.leave(t.room):"off"===t.action&&e.off(t.room)}))}},{key:"getId",value:function(){var e;return null===(e=this.socket)||void 0===e?void 0:e.id}},{key:"close",value:function(){var e;null!==(e=this.socket)&&void 0!==e&&e.connected&&this.socket.close()}},{key:"join",value:function(e){var t;return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.emit("join","".concat(this.project,"_").concat(e)):this.queue.push({action:"join",room:e}),this}},{key:"leave",value:function(e){var t;return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.emit("leave","".concat(this.project,"_").concat(e)):this.queue.push({action:"leave",room:e}),this}},{key:"on",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.on(e,n):this.queue.push({action:"on",event:e,func:n}),this}},{key:"off",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.off(e,n):this.queue.push({action:"off",event:e,func:n}),this}}],n&&mn(t.prototype,n),r&&mn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var En=Object(i.createContext)(),Pn=function(e){var t=e.settings,n=e.children,r=jn(hn(),1)[0],o=jn(Object(i.useState)(),2),a=o[0],s=o[1];return Object(i.useEffect)((function(){if(!r.loading){if(r.auth&&t.url&&t.project){var e=new bn(On(On({},t),{},{accessToken:r.token}));s(e)}r.auth||a&&a.close()}}),[r]),Object(i.useEffect)((function(){return a&&a.connect(),function(){a&&a.close()}}),[a]),u.a.createElement(En.Provider,{value:a},n)},Cn=function(){return Object(i.useContext)(En)||new bn({})};function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){An(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function _n(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Tn(a,r,o,i,u,"next",e)}function u(e){Tn(a,r,o,i,u,"throw",e)}i(void 0)}))}}function kn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Un=Object(i.createContext)(),Ln=function(e){var t,n=e.children,r=e.strategy,o=kn(Object(i.useState)({loading:!0,dictionary:{},languageList:[]}),2),s=o[0],c=o[1],l=function(){var e=_n(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getItem("language",!0);case 2:(t=e.sent)&&(c((function(e){return xn(xn({},e),{},{language:t})})),d.setLanguage(null==t?void 0:t.code));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=kn(rn(),2),p=f[0],d=f[1],h=function(){var e=_n(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,!s.loading&&c(xn(xn({},s),{},{loading:!0})),e.next=4,p.translations().asDictionary().get();case 4:t=e.sent,n=t.content,r=n.error,o=n.result,c((function(e){return xn(xn({},e),{},{loading:!1,dictionary:r?{}:o})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c((function(e){return xn(xn({},e),{},{loading:!1})}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=_n(a.a.mark((function e(t){var n,o,i,u,l,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.id!==(null===(n=s.language)||void 0===n?void 0:n.id)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,p.languages(t.id).save({default:!0});case 5:if(o=e.sent,i=o.content,u=i.error,l=i.result,u){e.next=16;break}return f={id:l.id,code:l.code,rtl:l.rtl},e.next=13,r.setItem("language",f,!0);case 13:h=s.languageList.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0})),c(xn(xn({},s),{},{language:f,languageList:h})),d.setLanguage(null==t?void 0:t.code);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),c(xn(xn({},s),{},{loading:!1}));case 21:location.reload();case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=_n(a.a.mark((function e(){var t,n,o,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(xn(xn({},s),{},{loading:!0})),e.next=4,p.languages().get();case 4:if(t=e.sent,n=t.content,o=n.error,i=n.result,o){e.next=15;break}return u=i.find((function(e){return e.default})),l={id:u.id,code:u.code,rtl:u.rtl},e.next=13,r.setItem("language",l,!0);case 13:d.setLanguage(null==l?void 0:l.code),c((function(e){return xn(xn({},e),{},{loading:!1,language:l,languageList:i})}));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),c(xn(xn({},s),{},{loading:!1}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e,t;null!=p&&p.project&&null!==(e=s.language)&&void 0!==e&&e.code&&(null===(t=s.language)||void 0===t?void 0:t.code)===p.language&&h()}),[null===(t=s.language)||void 0===t?void 0:t.code,null==p?void 0:p.project,p.language]),Object(i.useEffect)((function(){l(),null!=p&&p.project&&v()}),[null==p?void 0:p.language,null==p?void 0:p.project]);var m={setLanguage:y,updateLanguageListState:function(e){var t=s.languageList.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));c(xn(xn({},s),{},{languageList:t}))},refreshTranslations:h};return u.a.createElement(Un.Provider,{value:[s,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(null==s?void 0:s.dictionary)&&Object.keys(null==s?void 0:s.dictionary).length>0&&s.dictionary[e]||t||e},m]},n)},Bn=function(){return Object(i.useContext)(Un)||[{},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t||e},_n(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),_n(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))]};function Fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Nn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._events={}}var t,n,r;return t=e,n=[{key:"on",value:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)}},{key:"off",value:function(e,t){this._events[e]&&(this._events[e]=this._events[e].filter((function(e){return e!==t})))}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this._events[e]){var o=function(e){e.apply(void 0,n)};this._events[e].forEach(o)}}}],n&&Fn(t.prototype,n),r&&Fn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Rn=Object(i.createContext)(),Mn=function(e){var t=e.children,n=new Nn;return u.a.createElement(Rn.Provider,{value:[n]},t)},zn=function(){return Object(i.useContext)(Rn)||[new Nn]},Gn=n(3),Yn=n.n(Gn),qn=n(4),$n=n.n(qn);function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Kn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Wn(a,r,o,i,u,"next",e)}function u(e){Wn(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yn.a.extend($n.a);var Qn=Object(i.createContext)(),er=function(e){var t=e.children,n=Xn(Object(i.useState)({loading:!0,configs:{}}),2),r=n[0],o=n[1],s=Xn(Bn(),1)[0],c=Xn(rn(),1)[0],l=Xn(hn(),1)[0].token,f={max_days_preorder:{key:"max_days_preorder",value:6},meters_to_change_address:{key:"meters_to_change_address",value:500},default_order_type:{key:"default_order_type",value:"delivery"},order_types_allowed:{key:"order_types_allowed",value:"1|2|3|4|5"},google_autocomplete_selection_required:{key:"google_autocomplete_selection_required",value:"true"},google_maps_api_key:{key:"google_maps_api_key",value:""},country_autocomplete:{key:"country_autocomplete",value:"*"},track_id_google_analytics:{key:"track_id_google_analytics",value:"UA-51635411-4"}},p=function(){var e=Kn(a.a.mark((function e(){var t,n,i,u,s,p,d,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.loading&&o(Vn(Vn({},r),{},{loading:!0})),!l){e.next=8;break}return e.next=5,c.setAccessToken(l).configs().asDictionary().get();case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,c.configs().asDictionary().get();case 10:e.t0=e.sent;case 11:return i=e.t0,u=i.content,s=u.error,p=u.result,d=null,e.prev=16,e.next=19,fetch("https://ipapi.co/json/");case 19:return h=e.sent,e.next=22,h.json();case 22:d=e.sent,e.next=28;break;case 25:e.prev=25,e.t1=e.catch(16),d=null;case 28:y=Vn(Vn({},f),{},{default_country_code:{value:d&&(null===(t=d)||void 0===t?void 0:t.country_code)||"US",calling_number:d&&(null===(n=d)||void 0===n?void 0:n.country_calling_code)||"+1"}},p),o((function(e){return Vn(Vn({},e),{},{loading:!1,configs:s?{}:l?y:Vn(Vn({},e.configs),y)})})),e.next=35;break;case 32:e.prev=32,e.t2=e.catch(0),o(Vn(Vn({},r),{},{loading:!1}));case 35:case"end":return e.stop()}}),e,null,[[0,32],[16,25]])})));return function(){return e.apply(this,arguments)}}(),d={refreshConfigs:p};return Object(i.useEffect)((function(){null!=c&&c.project?s.loading||p():o({loading:!0,configs:{}})}),[s.loading,null==c?void 0:c.project,l]),u.a.createElement(Qn.Provider,{value:[r,d]},t)},tr=function(){return Object(i.useContext)(Qn)||[{},Kn(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))]},nr=["carts"],rr=["carts"],or=["carts"];function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function ir(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(n),!0).forEach((function(t){cr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function fr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){lr(a,r,o,i,u,"next",e)}function u(e){lr(a,r,o,i,u,"throw",e)}i(void 0)}))}}function pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yn.a.extend($n.a);var hr=Object(i.createContext)(),yr=function(e){var t,n,r=e.Alert,o=e.children,s=e.strategy,c=pr(Object(i.useState)({show:!1}),2),l=c[0],f=c[1],p=pr(Object(i.useState)({show:!1}),2),d=p[0],h=p[1],y=pr(rn(),1)[0],v=pr(Bn(),2),m=v[0],b=v[1],g=Cn(),O=pr(zn(),1)[0],w=pr(tr(),1)[0],j=pr(hn(),2),S=j[0],E=j[1].logout,P={delivery:1,pickup:2,eatin:3,curbside:4,drivethru:5},C=pr(Object(i.useState)({loading:!0,options:{type:P[null==w||null===(t=w.configs)||void 0===t||null===(n=t.default_order_type)||void 0===n?void 0:n.value],moment:null},carts:{},confirmAlert:l,alert:d}),2),I=C[0],x=C[1],A=function(){var e=fr(a.a.mark((function e(){var t,n,r,o,i,u,c,l,f,p,d,v,m,b,g,O,w,j,P,C,A,T,_;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I.loading||x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return r=e.sent,o=null==r?void 0:r.id,i={},o&&(i.query={user_id:o}),e.next=10,y.setAccessToken(S.token).orderOptions().get(i);case 10:return u=e.sent,c=null==u||null===(t=u.content)||void 0===t?void 0:t.error,l=null==u||null===(n=u.content)||void 0===n?void 0:n.result,c||(f=l.carts,p=ir(l,nr),I.carts={},f.forEach((function(e){I.carts["businessId:".concat(e.business_id)]=e})),I.options=sr(sr({},I.options),p)),c&&(h({show:!0,content:l}),401===(null==u?void 0:u.status)&&S.auth&&E()),e.next=17,s.getItem("options",!0);case 17:if(!(d=e.sent)){e.next=49;break}if(v={},!(Object.keys(d.address).length>0)){e.next=41;break}return b=[{attribute:"address",value:null==d||null===(m=d.address)||void 0===m?void 0:m.address}],g=o||S.user.id,e.next=25,y.setAccessToken(S.token).users(g).addresses().where(b).get();case 25:if(O=e.sent,w=O.content.result.find((function(e){var t,n,r;return d.address.internal_number=(null===(t=d.address)||void 0===t?void 0:t.internal_number)||null,d.address.zipcode=(null===(n=d.address)||void 0===n?void 0:n.zipcode)||null,d.address.address_notes=(null===(r=d.address)||void 0===r?void 0:r.address_notes)||null,e.location.lat===d.address.location.lat&&e.location.lng===d.address.location.lng&&e.internal_number===d.address.internal_number&&e.zipcode===d.address.zipcode&&e.address_notes===d.address.address_notes}))){e.next=38;break}return Object.keys(d.address).forEach((function(e){return null===d.address[e]&&delete d.address[e]})),e.next=31,y.setAccessToken(S.token).users(g).addresses().save(d.address);case 31:j=e.sent,P=j.content,C=P.error,A=P.result,C||(w=A),e.next=40;break;case 38:return e.next=40,y.setAccessToken(S.token).users(g).addresses(w.id).save({default:!0});case 40:w&&(v.address_id=w.id);case 41:return d.type&&(v.type=d.type),d.moment&&(v.moment=Yn.a.utc(d.moment,"YYYY-MM-DD HH:mm:ss").unix()),null!=d&&d.address_id&&(v.address_id=null==d?void 0:d.address_id),v&&Object.keys(v).length>0?U(v):x(sr(sr({},I),{},{loading:!1})),e.next=47,s.removeItem("options");case 47:e.next=50;break;case 49:x(sr(sr({},I),{},{loading:!1}));case 50:e.next=57;break;case 52:e.prev=52,e.t0=e.catch(0),_=null!==e.t0&&void 0!==e.t0&&null!==(T=e.t0.message)&&void 0!==T&&T.includes("Internal error")?"INTERNAL_ERROR":e.t0.message,h({show:!0,content:[_]}),x(sr(sr({},I),{},{loading:!1}));case 57:case"end":return e.stop()}}),e,null,[[0,52]])})));return function(){return e.apply(this,arguments)}}(),T=function(e){var t=[];return["address","address_notes","zipcode","location","internal_number"].forEach((function(n){var r,o,a,i,u;null!==(r=I.options)&&void 0!==r&&r.address&&null!==(o=I.options)&&void 0!==o&&o.address[n]?"location"===n?t.push(e[n].lat===(null===(a=I.options)||void 0===a?void 0:a.address[n].lat)&&e[n].lng===(null===(i=I.options)||void 0===i?void 0:i.address[n].lng)):t.push(e[n]===(null===(u=I.options)||void 0===u?void 0:u.address[n])):t.push(!e[n])})),t.every((function(e){return e}))},_=function(){var e=fr(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"!==ar(t)){e.next=9;break}return e.next=3,s.getItem("options",!0);case 3:return r=e.sent,o=sr(sr(sr({},I.options),r),{},{address:sr(sr({},null==r?void 0:r.address),t)}),e.next=7,s.setItem("options",o,!0);case 7:return x(sr(sr({},I),{},{options:o})),e.abrupt("return");case 9:if(!n||null==n||!n.address||T(null==n?void 0:n.address)){e.next=12;break}return U({address_id:null==n||null===(i=n.address)||void 0===i?void 0:i.id}),e.abrupt("return");case 12:if(!n||null==n||!n.isEdit){e.next=17;break}if(t===I.options.address_id){e.next=15;break}return e.abrupt("return");case 15:return U({address_id:t}),e.abrupt("return");case 17:U({address_id:t});case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=fr(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=sr(sr({},I.options),{},{type:t}),I.options.type!==t){e.next=3;break}return e.abrupt("return");case 3:if(S.auth){e.next=7;break}return e.next=6,s.setItem("options",n,!0);case 6:x(sr(sr({},I),{},{options:n}));case 7:U({type:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=fr(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t?t.getTime()/1e3:null,r=n?Yn.a.unix(n).utc().format("YYYY-MM-DD HH:mm:ss"):null,o=sr(sr({},I.options),{},{moment:r}),I.options.moment!==r){e.next=5;break}return e.abrupt("return");case 5:if(S.auth){e.next=9;break}return e.next=8,s.setItem("options",o,!0);case 8:x(sr(sr({},I),{},{options:o}));case 9:U({moment:n});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l,f,p,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S.auth){e.next=25;break}return e.next=3,s.getItem("user-customer",!0);case 3:return n=e.sent,r=null==n?void 0:n.id,o=sr(sr({},t),{},{user_id:r||S.user.id}),e.prev=6,x(sr(sr({},I),{},{loading:!0})),e.next=10,y.setAccessToken(S.token).orderOptions().save(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 10:return i=e.sent,u=i.content,c=u.error,l=u.result,c?h({show:!0,content:l}):(f=l.carts,p=ir(l,rr),I.carts={},f.forEach((function(e){I.carts["businessId:".concat(e.business_id)]=e})),I.options=sr(sr({},I.options),p)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 19:return e.prev=19,e.t0=e.catch(6),v=null!==e.t0&&void 0!==e.t0&&null!==(d=e.t0.message)&&void 0!==d&&d.includes("Internal error")?"INTERNAL_ERROR":e.t0.message,h({show:!0,content:[v]}),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o={product:t,user_id:r||S.user.id},e.next=9,y.setAccessToken(S.token).carts().addProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=e.sent,u=i.content,c=u.error,l=u.result,c?h({show:!0,content:l}):(I.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_product_added",t,l),O.emit("cart_updated",l),O.emit("product_added",t)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 18:return e.prev=18,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o={product:{id:t.id,code:t.code,business_id:t.business_id},user_id:r||S.user.id},e.next=9,y.setAccessToken(S.token).carts().removeProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=e.sent,u=i.content,c=u.error,l=u.result,c?h({show:!0,content:l}):(I.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_product_removed",t,l),O.emit("cart_updated",l)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 18:return e.prev=18,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o=JSON.stringify({uuid:t,user_id:r||S.user.id}),e.next=9,fetch("".concat(y.root,"/carts/clear"),{method:"POST",headers:{"Content-Type":"application/json","X-Socket-Id-X":null==g?void 0:g.getId(),Authorization:"Bearer ".concat(S.token)},body:o});case 9:return i=e.sent,e.next=12,i.json();case 12:return u=e.sent,c=u.error,l=u.result,c?h({show:!0,content:l}):I.carts["businessId:".concat(l.business_id)]=l,x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 20:return e.prev=20,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o={product:t,user_id:r||S.user.id},e.next=9,y.setAccessToken(S.token).carts().updateProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=e.sent,u=i.content,c=u.error,l=u.result,c?h({show:!0,content:l}):(I.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_product_updated",t,l),O.emit("cart_updated",l)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 18:return e.prev=18,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.business_id){e.next=2;break}throw new Error("`business_id` is required.");case 2:if(void 0!==t.coupon){e.next=4;break}throw new Error("`coupon` is required.");case 4:if((null===(n=I.carts["businessId:".concat(t.business_id)])||void 0===n?void 0:n.coupon)!==t.coupon){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,x(sr(sr({},I),{},{loading:!0})),e.next=10,s.getItem("user-customer",!0);case 10:return r=e.sent,o=null==r?void 0:r.id,i={business_id:t.business_id,coupon:t.coupon,user_id:o||S.user.id},e.next=15,y.setAccessToken(S.token).carts().applyCoupon(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 15:return u=e.sent,c=u.content,l=c.error,f=c.result,l?h({show:!0,content:f}):(I.carts["businessId:".concat(f.business_id)]=f,O.emit("cart_updated",f)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!l);case 24:return e.prev=24,e.t0=e.catch(6),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,null,[[6,24]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=fr(a.a.mark((function e(t,n){var r,o,i,u,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("`businessId` is required.");case 2:if(n||0===n){e.next=4;break}throw new Error("`driverTipRate` is required.");case 4:if(I.carts["businessId:".concat(t)]&&(null===(r=I.carts["businessId:".concat(t)])||void 0===r?void 0:r.driver_tip_rate)!==n){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,x(sr(sr({},I),{},{loading:!0})),e.next=10,s.getItem("user-customer",!0);case 10:return o=e.sent,i=null==o?void 0:o.id,u={business_id:t,driver_tip_rate:n,user_id:i||S.user.id},e.next=15,y.setAccessToken(S.token).carts().changeDriverTip(u,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 15:return c=e.sent,l=c.content,f=l.error,p=l.result,f?h({show:!0,content:p}):(I.carts["businessId:".concat(p.business_id)]=p,O.emit("cart_updated",p)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!f);case 24:return e.prev=24,e.t0=e.catch(6),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,null,[[6,24]])})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=fr(a.a.mark((function e(t,n){var r,o,i,u,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return r=e.sent,o=null==r?void 0:r.id,i=sr(sr({},n),{},{user_id:o||S.user.id}),e.next=9,y.setAccessToken(S.token).carts(t).place(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:if(u=e.sent,c=u.content,l=c.error,f=c.result,l){e.next=17;break}1!==f.status?(I.carts["businessId:".concat(f.business_id)]=f,O.emit("cart_updated",f)):(delete I.carts["businessId:".concat(f.business_id)],p={id:f.order.uuid,business:{name:f.business.name},total:f.total,tax_total:f.tax,delivery_zone_price:f.delivery_price},O.emit("order_placed",p)),e.next=20;break;case 17:return h({show:!0,content:f}),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return");case 20:return x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:l,result:f});case 24:return e.prev=24,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:!0,result:[e.t0.message]});case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=fr(a.a.mark((function e(t,n){var r,o,i,u,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return r=e.sent,o=null==r?void 0:r.id,i=sr(sr({},n),{},{user_id:o||S.user.id}),e.next=9,y.setAccessToken(S.token).carts(t).confirm(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return u=e.sent,c=u.content,l=c.error,f=c.result,p=c.cart,l?p&&(I.carts["businessId:".concat(p.business_id)]=p,O.emit("cart_updated",p)):1!==f.status?(I.carts["businessId:".concat(f.business_id)]=f,O.emit("cart_updated",f)):delete I.carts["businessId:".concat(f.business_id)],x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:l,result:f});case 19:return e.prev=19,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:!0,result:[e.t0.message]});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o={headers:{"X-Socket-Id-X":null==g?void 0:g.getId()},query:{user_id:r||S.user.id}},e.next=9,y.setAccessToken(S.token).orders(t).reorder(o);case 9:return i=e.sent,u=i.content,c=u.error,l=u.result,c?h({show:!0,content:l}):(I.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_added",l)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:c,result:l});case 18:return e.prev=18,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:!0,result:[e.t0.message]});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),q=pr(Object(i.useState)(null),2),$=q[0],J=q[1],V=function(){var e=fr(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getItem("options",!0);case 2:t=e.sent,J(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){S.loading||m.loading||S.auth&&A()}),[S.auth,S.loading,m.loading]),Object(i.useEffect)((function(){var e,t;S.loading||w.loading||(S.auth||(V(),x(sr(sr({},I),{},{loading:!1,options:{type:(null==$?void 0:$.type)||P[null==w||null===(e=w.configs)||void 0===e||null===(t=e.default_order_type)||void 0===t?void 0:t.value],moment:(null==$?void 0:$.moment)||null,address:(null==$?void 0:$.address)||{}}}))))}),[S.auth,S.loading,w]),Object(i.useEffect)((function(){var e=function(e){1===e.status?I.carts["businessId:".concat(e.business_id)]&&delete I.carts["businessId:".concat(e.business_id)]:I.carts["businessId:".concat(e.business_id)]=sr(sr({},I.carts["businessId:".concat(e.business_id)]),e),x(sr({},I))},t=function(e){var t=e.carts,n=ir(e,or),r={};t.forEach((function(e){r["businessId:".concat(e.business_id)]=e}));var o=sr(sr({},I),{},{options:sr(sr({},I.options),n),carts:sr(sr({},I.carts),r)});x(sr({},o))};return g.on("carts_update",e),g.on("order_options_update",t),function(){g.off("carts_update",e),g.off("order_options_update",t)}}),[I,g]),Object(i.useEffect)((function(){var e,t;if(S.auth&&!S.loading)return g.join("carts_".concat(null==S||null===(e=S.user)||void 0===e?void 0:e.id)),g.join("orderoptions_".concat(null==S||null===(t=S.user)||void 0===t?void 0:t.id)),function(){var e,t;g.leave("carts_".concat(null==S||null===(e=S.user)||void 0===e?void 0:e.id)),g.leave("orderoptions_".concat(null==S||null===(t=S.user)||void 0===t?void 0:t.id))}}),[g,S]);var H={refreshOrderOptions:A,changeAddress:_,changeType:k,changeMoment:D,addProduct:L,removeProduct:B,updateProduct:N,clearCart:F,applyCoupon:R,changeDriverTip:M,placeCart:z,confirmCart:G,reorder:Y,setAlert:h,setConfirm:f},W=JSON.parse(JSON.stringify(I));return u.a.createElement(hr.Provider,{value:[W,H]},r&&u.a.createElement(r,{open:d.show,title:b("ERROR","Error"),onAccept:function(){return h({show:!1})},onClose:function(){return h({show:!1})},content:d.content}),o)},vr=function(){var e=function(){console.warn("Must use OrderProvider to wrappe the app.")};return Object(i.useContext)(hr)||[{},{refreshOrderOptions:e,changeAddress:e,changeType:e,changeMoment:e,addProduct:e,removeProduct:e,updateProduct:e,clearCart:e,applyCoupon:e,placeCart:e,confirmCart:e,setAlert:e,setConfirm:e,changeDriverTip:e,reorder:e}]},mr=n(33),br=n.n(mr),gr=n(34),Or=n.n(gr);function wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yn.a.extend($n.a),Yn.a.extend(br.a),Yn.a.extend(Or.a);var Sr=Object(i.createContext)(),Er=function(e){var t=e.children,n=wr(Bn(),2),r=n[0],o=n[1],a=wr(tr(),1)[0],s=function(e){var t,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=parseFloat(e)||0;var i={decimal:(null==o?void 0:o.decimal)||(null===(t=a.configs.format_number_decimal_length)||void 0===t?void 0:t.value)||2,separator:(null==o?void 0:o.separator)||(null===(n=a.configs.format_number_decimal_separator)||void 0===n?void 0:n.value)||",",thousand:(null==o?void 0:o.thousand)||(null===(r=a.configs.format_number_thousand_separator)||void 0===r?void 0:r.value)||"."},u=e.toFixed(i.decimal);(u=u.toString()).indexOf(".")?u=u.replace(".",i.separator):u.indexOf(",")&&(u=u.replace(",",i.separator));var s=u.split(i.separator);return"space"===i.thousand&&(i.thousand=" "),s[0]=s[0].replace(/(.)(?=(\d{3})+$)/g,"$1"+i.thousand),u=s.join(i.separator)},c=function(e){return e>=1e9?"".concat((e/1e9).toFixed(1).replace(/\.0$/,"")).concat(o("G","G")):e>=1e6?"".concat((e/1e6).toFixed(1).replace(/\.0$/,"")).concat(o("M","M")):e>=1e3?"".concat((e/1e3).toFixed(1).replace(/\.0$/,"")).concat(o("K","K")):void 0},l={parsePrice:function(e){var t,n,r,o,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c={decimal:(null==u?void 0:u.decimal)||(null===(t=a.configs.format_number_decimal_length)||void 0===t?void 0:t.value)||2,separator:(null==u?void 0:u.separator)||(null===(n=a.configs.format_number_decimal_separator)||void 0===n?void 0:n.value)||",",thousand:(null==u?void 0:u.thousand)||(null===(r=a.configs.format_number_thousand_separator)||void 0===r?void 0:r.value)||".",currency:(null==u?void 0:u.currency)||(null===(o=a.configs.format_number_currency)||void 0===o?void 0:o.value)||"$",currencyPosition:(null==u?void 0:u.currencyPosition)||(null===(i=a.configs.currency_position)||void 0===i?void 0:i.value)||"left"},l=s(e,c);return l="left"===c.currencyPosition?c.currency+" "+l:l+" "+c.currency},parseNumber:s,parseDate:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(null==n?void 0:n.formatTime)||(null===(t=a.configs.format_time)||void 0===t?void 0:t.value)||"24",i={inputFormat:(null==n?void 0:n.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],outputFormat:(null==n?void 0:n.outputFormat)||("24"===r?"YYYY-MM-DD HH:mm":"YYYY-MM-DD hh:mm A"),utc:"boolean"!=typeof(null==n?void 0:n.utc)||(null==n?void 0:n.utc)};if(!Yn()(e,i.inputFormat).isValid())return o("INVALID_FORMAT","invalid format");var u=i.utc?Yn.a.utc(e,i.inputFormat).local():Yn()(e,i.inputFormat);return u.format(i.outputFormat)},parseTime:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"00:00";var r=(null==n?void 0:n.formatTime)||(null===(t=a.configs.format_time)||void 0===t?void 0:t.value)||"24",i={inputFormat:(null==n?void 0:n.inputFormat)||["HH:mm","hh:mm A","hh:mm"],outputFormat:(null==n?void 0:n.outputFormat)||("24"===r?"HH:mm":"hh:mm A"),utc:"boolean"!=typeof(null==n?void 0:n.utc)||(null==n?void 0:n.utc)};if(!Yn()(e,i.inputFormat).isValid())return o("INVALID_FORMAT","invalid format");var u=i.utc?Yn.a.utc(e,i.inputFormat).local():Yn()(e,i.inputFormat);return u.format(i.outputFormat)},parseDistance:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=parseFloat(e)||0;var i,u=(null==r?void 0:r.unit)||"KM";("1"===(null===(t=a.configs.distance_unit_km)||void 0===t?void 0:t.value)&&(u="KM"),null!==(n=a.configs.distance_unit)&&void 0!==n&&n.value)&&(u=null===(i=a.configs.distance_unit)||void 0===i?void 0:i.value);if("MI"===u.toUpperCase()){var l=1.621371*e;return l>=1e3?"".concat(c(l)," ").concat(o("MI","mi")):"".concat(s(l,r)," ").concat(o("MI","mi"))}return e>=1e3?"".concat(c(e)," ").concat(o("KM","km")):"".concat(s(e,r)," ").concat(o("KM","km"))},parseShortenDistance:c,getTimeAgo:function(e,t){if(!e)return"NN";var n={inputFormat:(null==t?void 0:t.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],utc:"boolean"!=typeof(null==t?void 0:t.utc)||(null==t?void 0:t.utc)};return Yn()(e,n.inputFormat).isValid()?(n.utc?Yn.a.utc(e,n.inputFormat).local():Yn()(e,n.inputFormat)).fromNow():o("INVALID_FORMAT","invalid format")},getTimeTo:function(e,t){if(!e)return"NN";var n={inputFormat:(null==t?void 0:t.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],utc:"boolean"!=typeof(null==t?void 0:t.utc)||(null==t?void 0:t.utc)};return Yn()(e,n.inputFormat).isValid()?(n.utc?Yn.a.utc(e,n.inputFormat).local():Yn()(e,n.inputFormat)).toNow():o("INVALID_FORMAT","invalid format")},optimizeImage:function(e,t,n){if(!e&&n)return n;if(t=t&&t.length>0?",".concat(t):"",null!=e&&-1!==e.indexOf("res.cloudinary.com")){var r=e.split("upload");e="".concat(r[0],"upload/f_auto,q_auto").concat(t).concat(r[1])}return e},getOrderState:function(e){switch(e){case 0:return o("PENDING","Pending");case 1:return o("COMPLETED_BY_ADMIN","Completed by admin");case 2:return o("REJECTED_BY_ADMIN","Rejected by admin");case 3:return o("ORDER_STATUS_IN_BUSINESS","Driver arrived to business");case 4:return o("PREPARATION_COMPLETED","Preparation Completed");case 5:return o("REJECTED_BY_BUSINESS","Rejected by business");case 6:return o("REJECTED_BY_DRIVER","Rejected by driver");case 7:return o("ACCEPTED_BY_BUSINESS","Accepted by business");case 8:return o("ACCEPTED_BY_DRIVER","Accepted by driver");case 9:return o("PICK_UP_COMPLETED_BY_DRIVER","Pick up completed by driver");case 10:return o("PICK_UP_FAILED_BY_DRIVER","Pick up Failed by driver");case 11:return o("DELIVERY_COMPLETED_BY_DRIVER","Delivery completed by driver");case 12:return o("DELIVERY_FAILED_BY_DRIVER","Delivery Failed by driver");case 13:return o("PREORDER","Preorder");case 14:return o("ORDER_NOT_READY","Order not ready");case 15:return o("ORDER_PICKEDUP_COMPLETED_BY_CUSTOMER","Pickup completed by customer");case 16:return o("ORDER_STATUS_CANCELLED_BY_CUSTOMER","Cancelled by customer");case 17:return o("ORDER_NOT_PICKEDUP_BY_CUSTOMER","Not picked by customer");case 18:return o("ORDER_DRIVER_ALMOST_ARRIVED_BUSINESS","Driver almost arrived to business");case 19:return o("ORDER_DRIVER_ALMOST_ARRIVED_CUSTOMER","Driver almost arrived to customer");case 20:return o("ORDER_CUSTOMER_ALMOST_ARRIVED_BUSINESS","Customer almost arrived to business");case 21:return o("ORDER_CUSTOMER_ARRIVED_BUSINESS","Customer arrived to business");case 22:return o("ORDER_LOOKING_FOR_DRIVER","Looking for driver");case 23:return o("ORDER_DRIVER_ON_WAY","Driver on way");default:return"N/A"}}};return Object(i.useEffect)((function(){var e;r.loading||(e={name:"auto",weekdays:[o("DAY7","Sunday"),o("DAY1","Monday"),o("DAY2","Tuesday"),o("DAY3","Wednesday"),o("DAY4","Thursday"),o("DAY5","Friday"),o("DAY6","Saturday")],months:[o("MONTH1","January"),o("MONTH2","February"),o("MONTH3","March"),o("MONTH4","April"),o("MONTH5","May"),o("MONTH6","June"),o("MONTH7","July"),o("MONTH8","August"),o("MONTH9","September"),o("MONTH10","October"),o("MONTH11","November"),o("MONTH12","December")],ordinal:function(e){return"".concat(e,"")},relativeTime:{future:o("RELATIVE_TIME_IN","in %s"),past:o("RELATIVE_TIME_AGO","%s ago"),s:o("RELATIVE_TIME_FEW_SECONDS ","a few seconds"),m:o("RELATIVE_TIME_MINUTES","a minute"),mm:o("RELATIVE_TIME_MINUTES","%d minutes"),h:o("RELATIVE_TIME_HOUR","an hour"),hh:o("RELATIVE_TIME_HOURS","%d hours"),d:o("RELATIVE_TIME_DAY","a day"),dd:o("RELATIVE_TIME_DAYS","%d days"),M:o("RELATIVE_TIME_MONTH","a month"),MM:o("RELATIVE_TIME_MONTHS","%d months"),y:o("RELATIVE_TIME_YEAR","a year"),yy:o("RELATIVE_TIME_YEARS","%d years")},meridiem:function(e,t,n){return e>12?o("PM","PM"):o("AM","AM")}},Yn.a.locale("auto",e),Yn.a.updateLocale("auto",e))}),[r]),u.a.createElement(Sr.Provider,{value:[l]},t)},Pr=function(){return Object(i.useContext)(Sr)||[{},function(){}]};function Cr(){return Cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cr.apply(this,arguments)}function Ir(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ar(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tr=function(e){var t,n=e.apiKey,r=e.UIComponent,o=e.mapConfigs,s=xr(vr(),1)[0],c=xr(Pr(),1)[0].optimizeImage,l=xr(tr(),1)[0].configs,f=n||(null==l||null===(t=l.google_maps_api_key)||void 0===t?void 0:t.value),p={},d=xr(Object(i.useState)(null),2),h=d[0],y=d[1],v=xr(Object(i.useState)(null),2),m=v[0],b=v[1],g=xr(rn(),1)[0],O=function(){var t,n=(t=a.a.mark((function t(){var n,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={},p.business=n,t.next=5,g.businesses(e.businessId).select(["location","logo"]).get({cancelToken:n});case 5:r=t.sent,o=r.content.result,b(o.logo),y(o.location),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){Ir(a,r,o,i,u,"next",e)}function u(e){Ir(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){return e.location&&e.businessLogo?(y(e.location),b(e.businessLogo)):O(),function(){p.business&&p.business.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Cr({},e,{googleMapsUrl:function(t){var n,r,a,i,u,l,p=e.orderLocation||(null==s||null===(n=s.options)||void 0===n||null===(r=n.address)||void 0===r?void 0:r.location);return 1===s.options.type?"https://maps.googleapis.com/maps/api/staticmap?size=".concat((null==o||null===(a=o.mapSize)||void 0===a?void 0:a.width)||500,"x").concat((null==o||null===(i=o.mapSize)||void 0===i?void 0:i.height)||190,"&center=").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&zoom=").concat((null==o?void 0:o.mapZoom)||15,"&scale=2&maptype=roadmap&markers=icon:%7Ccolor:red%7C").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&key=").concat(f):"https://maps.googleapis.com/maps/api/staticmap?size=".concat((null==o||null===(u=o.mapSize)||void 0===u?void 0:u.width)||500,"x").concat((null==o||null===(l=o.mapSize)||void 0===l?void 0:l.height)||190,"&scale=2&maptype=roadmap&markers=icon:%7Ccolor:red%7C").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&markers=icon:").concat(c(m,"w_60,h_60,r_max"),"%7Ccolor:white%7C").concat(null==t?void 0:t.lat,",").concat(null==t?void 0:t.lng,"&key=").concat(f)}(h)})))};function _r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Tr.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Tr.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Dr={Info:"INFO",Error:"ERROR",Success:"SUCCESS"},Ur=i.createContext(null),Lr=function(e){var t=e.children,n=_r(i.useState(null),2),r=n[0],o=n[1];return i.createElement(Ur.Provider,{value:[r,{showToast:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;o({type:e,message:t,duration:n})},hideToast:function(){o(null)}}]},t)};function Br(){return i.useContext(Ur)||[{},function(){}]}function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){Rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Mr(a,r,o,i,u,"next",e)}function u(e){Mr(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qr=Object(i.createContext)(),$r=function(e){var t=e.children,n=Gr(rn(),1)[0],r=Gr(Object(i.useState)({loading:!0,fields:{}}),2),o=r[0],s=r[1],c=function(e,t){e.forEach((function(e){t["mobile_phone"===e.code?"cellphone":e.code]=e}))},l=function(){var e=zr(a.a.mark((function e(){var t,r,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.validationFields().get();case 3:t=e.sent,r=t.content,i=r.result,u=r.error,l={},f={},u||(c(i.filter((function(e){return"checkout"===e.validate})),l),c(i.filter((function(e){return"address"===e.validate})),f)),s({loading:!1,fields:{checkout:l,address:f}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),s(Nr(Nr({},o),{},{loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),f={loadValidationFields:l};return Object(i.useEffect)((function(){null!=n&&n.project&&l()}),[null==n?void 0:n.project]),u.a.createElement(qr.Provider,{value:[o,f]},t)},Jr=function(){return Object(i.useContext)(qr)||[{},zr(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))]};function Vr(){return Vr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vr.apply(this,arguments)}function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){Kr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Zr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xr(a,r,o,i,u,"next",e)}function u(e){Xr(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var to=function(e){var t=e.UIComponent,n=Qr(rn(),1)[0],r=Qr(Br(),2)[1].showToast,o=Qr(Bn(),2)[1],s=Qr(Jr(),2)[1].loadValidationFields,c=Qr(Object(i.useState)({fields:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=Qr(Object(i.useState)({loading:!1,error:null}),2),d=p[0],h=p[1],y=function(){var e=Zr(a.a.mark((function e(){var t,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Wr(Wr({},l),{},{loading:!0})),t=[{attribute:"validate",value:"address"}],e.next=5,n.validationFields().where(t).get();case 5:r=e.sent,o=r.content,i=o.result,o.error||(u=i.filter((function(e){return"city_dropdown_option"!==e.code&&"name"!==e.code&&"lastname"!==e.code&&"mobile_phone"!==e.code&&"email"!==e.code&&"middle_name"!==e.code&&"second_lastname"!==e.code})),f({fields:u,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(Wr(Wr({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Zr(a.a.mark((function e(t,i){var u,c,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(Dr.Info,o("LOADING","Loading")),h(Wr(Wr({},d),{},{loading:!0})),e.next=5,n.validationFields(t).save(i);case 5:u=e.sent,c=u.content,p=c.result,c.error?h({loading:!1,error:p}):(h({loading:!1,error:null}),r(Dr.Success,o("FIELD_SAVED","Field saved")),y=l.fields.filter((function(e){return e.id===t&&Object.assign(e,p),!0})),f(Wr(Wr({},l),{},{fields:y})),s&&s()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Vr({},e,{addressFieldsState:l,handleChangeFieldSetting:v})))};function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach((function(t){oo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ao(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function io(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ao(a,r,o,i,u,"next",e)}function u(e){ao(a,r,o,i,u,"throw",e)}i(void 0)}))}}function uo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return so(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return so(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}to.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},to.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var co=Object(i.createContext)(),lo=function(e){var t=e.children,n=e.strategy,r=uo(Object(i.useState)({loading:!1,user:null}),2),o=r[0],s=r[1],c=function(){var e=io(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getItem("user-customer",!0);case 2:(t=e.sent)&&s(ro(ro({},o),{},{user:t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=io(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!t){e.next=3;break}return e.next=3,n.setItem("user-customer",t,!0);case 3:s(ro(ro({},o),{},{user:t}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=io(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,n.removeItem("user-customer");case 3:s(ro(ro({},o),{},{user:null}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p={setUserCustomer:l,deleteUserCustomer:f};return Object(i.useEffect)((function(){c()}),[]),u.a.createElement(co.Provider,{value:[o,p]},t)},fo=function(){return Object(i.useContext)(co)||[{},function(){}]};function po(){return po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},po.apply(this,arguments)}function ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(n),!0).forEach((function(t){vo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){mo(a,r,o,i,u,"next",e)}function u(e){mo(a,r,o,i,u,"throw",e)}i(void 0)}))}}function go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wo=function(e){var t=e.UIComponent,n=e.addressId,r=e.address,o=e.useValidationFileds,s=e.onSaveAddress,c=go(rn(),1)[0],l=go(Jr(),1)[0],f=go(Object(i.useState)({loading:!1,error:null,address:r||{}}),2),p=f[0],d=f[1],h=go(Object(i.useState)({loading:!1,changes:{},error:null}),2),y=h[0],v=h[1],m=go(hn(),1)[0],b=m.user,g=m.token,O={},w=e.userId||(null==b?void 0:b.id),j=e.accessToken||g,S=go(fo(),2)[1].setUserCustomer,E=go(Object(i.useState)(!1),2),P=(E[0],E[1]),C=function(){var e=bo(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(yo(yo({},p),{},{loading:!0})),r={},O.address=r,e.next=6,c.users(t).addresses(n).get({accessToken:j,cancelToken:r});case 6:o=e.sent,i=o.content,d({loading:!1,error:i.error?i.result:null,address:i.error?{}:i.result}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&d({loading:!1,error:[e.t0.message],address:{}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){v(yo(yo({},y),{},{changes:yo(yo({},y.changes),e)}))},x=function(){var e=bo(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&S(n,!0),v(yo(yo({},y),{},{loading:!0})),e.prev=2,e.next=5,c.users(w).addresses(null===(r=p.address)||void 0===r?void 0:r.id).save(yo(yo({},t),y.changes),{accessToken:j});case 5:o=e.sent,i=o.content,v(yo(yo({},y),{},{loading:!1,error:i.error?i.result:null,changes:i.error?y.changes:{}})),i.error||(d(yo(yo({},p),{},{address:i.result})),s&&s(i.result)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),v(yo(yo({},y),{},{loading:!1,error:[e.t0.message],address:{}}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){d(yo(yo({},p),{},{address:r||{}}))}),[r]),Object(i.useEffect)((function(){n&&!r&&C(w,n)}),[]),Object(i.useEffect)((function(){return function(){O.address&&O.address.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,po({},e,{formState:y,showField:function(e){var t,n,r;return!o||!l.loading&&!(null!==(t=l.fields)&&void 0!==t&&t.address[e])||!l.loading&&(null===(n=l.fields)||void 0===n?void 0:n.address[e])&&(null===(r=l.fields)||void 0===r?void 0:r.address[e].enabled)},updateChanges:I,handleChangeInput:function(e){I(vo({},e.target.name,e.target.value))},isRequiredField:function(e){var t,n,r;return o&&!l.loading&&(null===(t=l.fields)||void 0===t?void 0:t.address[e])&&(null===(n=l.fields)||void 0===n?void 0:n.address[e].enabled)&&(null===(r=l.fields)||void 0===r?void 0:r.address[e].required)},saveAddress:x,addressState:p,setIsEdit:function(e){return P(e)}})))};function jo(){return jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jo.apply(this,arguments)}function So(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?So(Object(n),!0).forEach((function(t){Po(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):So(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Co(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Io(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Co(a,r,o,i,u,"next",e)}function u(e){Co(a,r,o,i,u,"throw",e)}i(void 0)}))}}function xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ao(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ao(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ao(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}wo.propTypes={UIComponent:c.a.elementType,isSelectedAfterAdd:c.a.bool,useValidationFileds:c.a.bool,address:c.a.object,userId:c.a.number,addressId:c.a.number,onSaveAddress:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wo.defaultProps={useValidationFileds:!1,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var To=function(e){var t=e.UIComponent,n=e.changeOrderAddressWithDefault,r=e.handleClickSetDefault,o=e.handleClickDelete,s=e.handleSuccessUpdate,c=e.userState,l=xo(rn(),1)[0],f=xo(hn(),1)[0],p=f.user,d=f.token,h=xo(fo(),2)[1].setUserCustomer,y=e.userId||(null==p?void 0:p.id),v=e.accessToken||d;if(!y)throw new Error("`userId` must provide from props or use SessionProviver to wrappe the app.");if(!v)throw new Error("`accessToken` must provide from props or use SessionProviver to wrappe the app.");var m=xo(Object(i.useState)({loading:!1,error:null,addresses:[]}),2),b=m[0],g=m[1],O=xo(Object(i.useState)({loading:!1,error:null}),2),w=O[0],j=O[1],S=xo(vr(),2)[1].changeAddress,E={},P=function(){var e=Io(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Eo(Eo({},b),{},{loading:!0})),t={},E.list=t,e.next=6,l.setAccessToken(v).users(y).addresses().get({cancelToken:t});case 6:n=e.sent,r=n.content,g({loading:!1,error:r.error?r.result:null,addresses:r.error?[]:r.result}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&g(Eo(Eo({},b),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){if(null==e||!e.addresses)return P(),function(){E.list&&E.list.cancel()};g(Eo(Eo({},b),{},{addresses:e.addresses}))}),[e.addresses]);var C=function(){var e=Io(a.a.mark((function e(t,o){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&h(o,!0),!r){e.next=3;break}return e.abrupt("return",r(t));case 3:return e.prev=3,j(Eo(Eo({},w),{},{loading:!0})),e.next=7,l.setAccessToken(v).users(y).addresses(t.id).save({default:!0});case 7:i=e.sent,u=i.content,j({loading:!1,error:u.error?u.result:null}),!u.error&&u.result.default&&(b.addresses.map((function(e){return e.default=e.id===t.id,e})),n&&S(u.result.id),g(Eo({},b))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),j(Eo(Eo({},w),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Io(a.a.mark((function e(t){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return",o(t));case 2:return e.prev=2,j(Eo(Eo({},w),{},{loading:!0})),e.next=6,l.users(y).addresses(t.id).delete({accessToken:v});case 6:n=e.sent,r=n.content,j({loading:!1,error:r.error?r.result:null}),r.error||(i=b.addresses.filter((function(e){return e.id!==t.id})),g(Eo(Eo({},b),{},{addresses:i})),s&&(u=Eo(Eo({},c.user),{},{addresses:i}),s(u))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),j(Eo(Eo({},w),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,jo({},e,{addressList:b,setAddressList:g,actionStatus:w,handleSetDefault:C,handleDelete:I})))};function _o(){return _o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_o.apply(this,arguments)}function ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(n),!0).forEach((function(t){Uo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Bo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Lo(a,r,o,i,u,"next",e)}function u(e){Lo(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Fo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return No(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return No(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function No(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}To.propTypes={UIComponent:c.a.elementType,handleClickAddress:c.a.func,handleClickSetDefault:c.a.func,handleClickDelete:c.a.func,userId:c.a.number,accessToken:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},To.defaultProps={changeOrderAddressWithDefault:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ro=function(e){var t=e.UIComponent,n=e.endpoint,r=e.endpoint1,o=Fo(rn(),1)[0],s=Fo(hn(),1)[0],c=s.token,l=s.loading,f=Fo(Object(i.useState)({content:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=Fo(Object(i.useState)({content:[],loading:!1,error:null}),2),y=h[0],v=h[1],m=Fo(Object(i.useState)({from:"",to:"",businessIds:null,drivers_ids:null,franchises_id:null,driver_companies_ids:null,driver_groups_ids:null,delivery_types_ids:null,app_ids:null}),2),b=m[0],g=m[1],O=function(){var e=Bo(a.a.mark((function e(){var t,r,i,u,s,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(Do(Do({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},r="",""!==(null==b?void 0:b.from)&&""!==(null==b?void 0:b.to)&&(r="from=".concat(Yn()(null==b?void 0:b.from).format("YYYY-MM-DD")," 00:00:00&to=").concat(Yn()(null==b?void 0:b.to).format("YYYY-MM-DD")," 23:59:59")),null!=b&&b.businessIds&&(null==b?void 0:b.businessIds.length)>0&&(r="".concat(r,"&businesses_ids=").concat(JSON.stringify(null==b?void 0:b.businessIds))),null!=b&&b.drivers_ids&&(null==b?void 0:b.drivers_ids.length)>0&&(r="".concat(r,"&drivers_ids=").concat(JSON.stringify(null==b?void 0:b.drivers_ids))),null!=b&&b.franchises_id&&(null==b?void 0:b.franchises_id.length)>0&&(r="".concat(r,"&franchises_id=").concat(JSON.stringify(null==b?void 0:b.franchises_id))),null!=b&&b.driver_companies_ids&&(null==b?void 0:b.driver_companies_ids.length)>0&&(r="".concat(r,"&driver_companies_ids=").concat(JSON.stringify(null==b?void 0:b.driver_companies_ids))),null!=b&&b.driver_groups_ids&&(null==b?void 0:b.driver_groups_ids.length)>0&&(r="".concat(r,"&driver_groups_ids=").concat(JSON.stringify(null==b?void 0:b.driver_groups_ids))),null!=b&&b.delivery_types_ids&&(null==b?void 0:b.delivery_types_ids.length)>0&&(r="".concat(r,"&delivery_types_ids=").concat(JSON.stringify(null==b?void 0:b.delivery_types_ids))),null!=b&&b.app_ids&&(null==b?void 0:b.app_ids.length)>0&&(r="".concat(r,"&app_ids=").concat(JSON.stringify(null==b?void 0:b.app_ids))),i="".concat(o.root,"/reports/").concat(n,"?").concat(r),e.next=17,fetch(i,t);case 17:return u=e.sent,e.next=20,u.json();case 20:s=e.sent,f=s.error,h=s.result,d(Do(Do({},p),{},f?{loading:!1,error:h}:{loading:!1,content:h})),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(2),d(Do(Do({},p),{},{loading:!1,error:e.t0}));case 29:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Bo(a.a.mark((function e(){var t,n,i,u,s,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(Do(Do({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},n="",""!==(null==b?void 0:b.from)&&""!==(null==b?void 0:b.to)&&(n="from=".concat(Yn()(null==b?void 0:b.from).format("YYYY-MM-DD")," 00:00:00&to=").concat(Yn()(null==b?void 0:b.to).format("YYYY-MM-DD")," 23:59:59")),null!=b&&b.businessIds&&(null==b?void 0:b.businessIds.length)>0&&(n="".concat(n,"&businesses_ids=").concat(JSON.stringify(null==b?void 0:b.businessIds))),null!=b&&b.drivers_ids&&(null==b?void 0:b.drivers_ids.length)>0&&(n="".concat(n,"&drivers_ids=").concat(JSON.stringify(null==b?void 0:b.drivers_ids))),null!=b&&b.franchises_id&&(null==b?void 0:b.franchises_id.length)>0&&(n="".concat(n,"&franchises_id=").concat(JSON.stringify(null==b?void 0:b.franchises_id))),null!=b&&b.driver_companies_ids&&(null==b?void 0:b.driver_companies_ids.length)>0&&(n="".concat(n,"&driver_companies_ids=").concat(JSON.stringify(null==b?void 0:b.driver_companies_ids))),null!=b&&b.driver_groups_ids&&(null==b?void 0:b.driver_groups_ids.length)>0&&(n="".concat(n,"&driver_groups_ids=").concat(JSON.stringify(null==b?void 0:b.driver_groups_ids))),null!=b&&b.delivery_types_ids&&(null==b?void 0:b.delivery_types_ids.length)>0&&(n="".concat(n,"&delivery_types_ids=").concat(JSON.stringify(null==b?void 0:b.delivery_types_ids))),null!=b&&b.app_ids&&(null==b?void 0:b.app_ids.length)>0&&(n="".concat(n,"&app_ids=").concat(JSON.stringify(null==b?void 0:b.app_ids))),i="".concat(o.root,"/reports/").concat(r,"?").concat(n),e.next=17,fetch(i,t);case 17:return u=e.sent,e.next=20,u.json();case 20:s=e.sent,f=s.error,p=s.result,v(Do(Do({},y),{},f?{loading:!1,error:p}:{loading:!1,content:p})),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(2),v(Do(Do({},y),{},{loading:!1,error:e.t0}));case 29:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){O(),r&&w()}),[b]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_o({},e,{filterList:b,handleChangeFilterList:g,reportData:p,reportData1:y})))};function Mo(){return Mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mo.apply(this,arguments)}function zo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(n),!0).forEach((function(t){qo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $o(e){return function(e){if(Array.isArray(e))return Ho(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Vo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Vo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vo(e,t){if(e){if("string"==typeof e)return Ho(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ho(e,t):void 0}}function Ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ro.propTypes={UIComponent:c.a.elementType,endpoint:c.a.string,endpoint1:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ro.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Wo=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=e.isFranchise,l=e.isSearchByName,f=Jo(rn(),1)[0],p=Jo(Object(i.useState)({loading:!0,error:null,businesses:[],pagination:null}),2),d=p[0],h=p[1],y=Jo(Object(i.useState)(null),2),v=y[0],m=y[1],b=Jo(Object(i.useState)(!1),2),g=b[0],O=b[1],w=Jo(Object(i.useState)(null),2),j=w[0],S=w[1],E=new RegExp(/^[A-Za-z0-9\s]+$/g),P=function(){var e,t=(e=a.a.mark((function e(){var t,r,i,u,s,p,y,v,m,b,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Yo(Yo({},d),{},{loading:!0})),t=null,r=[],j&&(i=[],u=E.test(j),l&&i.push({attribute:"name",value:{condition:"ilike",value:u?encodeURI("%".concat(j,"%")):"%".concat(j,"%")}}),r.push({conector:"OR",conditions:i})),r.length&&(t={conditions:r,conector:"AND"}),s=t?f.businesses().asDashboard().select(o).where(t):f.businesses().asDashboard().select(o),e.next=9,s.get();case 9:p=e.sent,y=p.content,v=y.error,m=y.result,b=y.pagination,v?h(Yo(Yo({},d),{},{loading:!1,error:m})):(O=[],O=c&&(null==n||null===(g=n.franchises_id)||void 0===g?void 0:g.length)>0?m.filter((function(e){return null==n?void 0:n.franchises_id.includes(e.franchise_id)})):$o(m),h(Yo(Yo({},d),{},{loading:!1,businesses:O,pagination:b}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),h(Yo(Yo({},d),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){zo(a,r,o,i,u,"next",e)}function u(e){zo(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return P(),e.abort()}),[j]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==d||null===(e=d.businesses)||void 0===e?void 0:e.length)){var o=null===(t=d.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat($o(e),[t.id])}),[]),a=(null==n||null===(r=n.businessIds)||void 0===r?void 0:r.length)>0?null==n?void 0:n.businessIds.filter((function(e){return o.includes(e)})):o;m($o(a)),null!=n&&n.businessIds&&(null==a?void 0:a.length)!==(null==d?void 0:d.businesses.length)||O(!0)}}),[null==d?void 0:d.businesses]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Mo({},e,{businessList:d,businessIds:v,handleChangeBusinessId:function(e){if(null==v?void 0:v.find((function(t){return t===e}))){var t=null==v?void 0:v.filter((function(t){return t!==e}));m(t),O(!1)}else{var n=v?$o(v):[];n.push(e),n.length===(null==d?void 0:d.businesses.length)&&O(!0),m(n)}},handleClickFilterButton:function(){var e=v?$o(v):null;r(Yo(Yo({},n),{},{businessIds:e})),s&&s()},isAllCheck:g,handleChangeAllCheck:function(){if(g)m(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Vo(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(d.businesses);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}m(t)}O(!g)},searchValue:j,onSearch:S})))};function Ko(){return Ko=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ko.apply(this,arguments)}function Xo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zo(Object(n),!0).forEach((function(t){ea(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ta(e){return function(e){if(Array.isArray(e))return aa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function na(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=oa(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||oa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oa(e,t){if(e){if("string"==typeof e)return aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aa(e,t):void 0}}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Wo.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Wo.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var ia=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=ra(rn(),1)[0],l=ra(Object(i.useState)({loading:!0,error:null,users:[],pagination:null}),2),f=l[0],p=l[1],d=ra(Object(i.useState)(null),2),h=d[0],y=d[1],v=ra(Object(i.useState)(null),2),m=v[0],b=v[1],g=ra(Object(i.useState)("all"),2),O=g[0],w=g[1],j=function(e){var t,n=!1,r=!1,o=na(h);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.id===e){var i,u=na(a.children);try{var s=function(){var e=i.value;(null==m?void 0:m.find((function(t){return t===e.id})))?n=!0:r=!0};for(u.s();!(i=u.n()).done;)s()}catch(e){u.e(e)}finally{u.f()}}}}catch(e){o.e(e)}finally{o.f()}var c="all";return n&&r?c="some":!n&&r&&(c="none"),c},S=function(e,t){var n,r=!1,o=na(null==f?void 0:f.users);try{for(o.s();!(n=o.n()).done;){var a,i=n.value,u=na(i.drivergroups);try{for(u.s();!(a=u.n()).done;){var s=a.value;i.id===e&&s.id===t&&(r=!0)}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}return r},E=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Qo(Qo({},f),{},{loading:!0})),t=[{attribute:"level",value:"4"}],e.next=5,c.users().asDashboard().select(o).where(t).get();case 5:n=e.sent,r=n.content,i=r.error,u=r.result,s=r.pagination,p(Qo(Qo({},f),{},i?{loading:!1,error:u}:{loading:!1,users:u,pagination:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),p(Qo(Qo({},f),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xo(a,r,o,i,u,"next",e)}function u(e){Xo(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return E(),e.abort()}),[]),Object(i.useEffect)((function(){(null==f?void 0:f.users.length)>0&&function(){var e,t=[],n=[],r=na(null==f?void 0:f.users);try{for(r.s();!(e=r.n()).done;){var o,a=e.value,i=na(null==a?void 0:a.drivergroups);try{var u=function(){var e=o.value;t.find((function(t){return t.id===e.id}))||t.push({id:e.id,name:e.name,isCollapse:!1,children:[]})};for(i.s();!(o=i.n()).done;)u()}catch(e){i.e(e)}finally{i.f()}n.push(a.id)}}catch(e){r.e(e)}finally{r.f()}var s=t.map((function(e){var t,n=ta(e.children),r=na(null==f?void 0:f.users);try{for(r.s();!(t=r.n()).done;){var o=t.value;S(o.id,e.id)&&n.push(o)}}catch(e){r.e(e)}finally{r.f()}return Qo(Qo({},e),{},{children:n})}));b(n),y(s)}()}),[f]),Object(i.useEffect)((function(){m&&null!=f&&f.users&&(m.length>0&&m.length===f.users.length&&w("all"),m.length>0&&m.length!==f.users.length&&w("some"),0===m.length&&w("none"))}),[m]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ko({},e,{usersList:f,groupList:h,userIds:m,isAllCheck:O,handleChangeCollapse:function(e){var t=null==h?void 0:h.map((function(t){return t.id===e?Qo(Qo({},t),{},{isCollapse:!t.isCollapse}):t}));y(t)},handleChangeUserId:function(e){if(null==m?void 0:m.find((function(t){return t===e}))){var t=null==m?void 0:m.filter((function(t){return t!==e}));b(t),w(!1)}else{var n=m?ta(m):[];n.push(e),n.length===(null==f?void 0:f.users.length)&&w(!0),b(n)}},isParentCheck:j,parentClick:function(e){var t,n=j(e),r=null==h?void 0:h.find((function(t){return t.id===e})),o=ta(m),a=na(null==r?void 0:r.children);try{var i=function(){var e=t.value,r=m.find((function(t){return t===e.id}));if(r&&"none"!==n){var a,i=null===(a=o)||void 0===a?void 0:a.filter((function(t){return t!==e.id}));o=ta(i)}r||"none"!==n||o.push(e.id)};for(a.s();!(t=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}b(o)},isIncluded:S,changeAllCheckStatus:function(e){if(e!==O)if(w(e),"all"===e){var t,n=[],r=na(null==f?void 0:f.users);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.push(o.id)}}catch(e){r.e(e)}finally{r.f()}b(n)}else b([])},handleClickFilterButton:function(){var e=m&&m.length>0?ta(m):null;r&&r(Qo(Qo({},n),{},{userIds:e})),s&&s()}})))};function ua(){return ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ua.apply(this,arguments)}function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function la(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return da(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return da(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ia.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ia.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var ha=function(e){var t=e.UIComponent,n=pa(hn(),1)[0],r=n.token,o=n.loading,s=pa(rn(),1)[0],c=pa(Object(i.useState)({loading:!1,ids:[],error:null}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,n,i,u,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(ca(ca({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n="".concat(s.root,"/reports/app_ids"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,c=u.error,p=u.result,f(ca(ca({},l),{},c?{loading:!0,error:p}:{loading:!1,ids:p})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),f(ca(ca({},l),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){fa(a,r,o,i,u,"next",e)}function u(e){fa(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ua({},e,{appIdList:l})))};function ya(){return ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ya.apply(this,arguments)}function va(e){return function(e){if(Array.isArray(e))return Pa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ea(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(n),!0).forEach((function(t){Oa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ja(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){wa(a,r,o,i,u,"next",e)}function u(e){wa(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Sa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ea(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ea(e,t){if(e){if("string"==typeof e)return Pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pa(e,t):void 0}}function Pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ha.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ha.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ca=function(e){var t=e.UIComponent,n=Sa(rn(),1)[0],r=Sa(hn(),1)[0],o=r.user,s=r.token,c=Sa(Br(),2)[1].showToast,l=Sa(Bn(),2)[1],f=Sa(Object(i.useState)({keys:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=Sa(Object(i.useState)({loading:!1,error:null}),2),y=h[0],v=h[1],m=function(){var e=ja(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(ba(ba({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(n.root,"/users/").concat(null==o?void 0:o.id,"/keys"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error||d(ba(ba({},p),{},{keys:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(ba(ba({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=ja(a.a.mark((function e(t){var r,i,u,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),v(ba(ba({},y),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=6,fetch("".concat(n.root,"/users/").concat(null==o?void 0:o.id,"/keys/").concat(t),r);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?v({loading:!1,error:u.result}):(v(ba(ba({},y),{},{loading:!1})),f=p.keys.filter((function(e){return e.id!==t})),d(ba(ba({},p),{},{keys:f})),c(Dr.Success,l("APIKEY_REMOVED","API key removed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=ja(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),v(ba(ba({},y),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=6,fetch("".concat(n.root,"/users/").concat(null==o?void 0:o.id,"/keys"),t);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?v({loading:!1,error:i.result}):(v(ba(ba({},y),{},{loading:!1})),u=[].concat(va(p.keys),[i.result]),d(ba(ba({},p),{},{keys:u})),c(Dr.Success,l("APIKEY_ADDED","API key added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0!==(null==o?void 0:o.level)&&2!==(null==o?void 0:o.level)||m()}),[o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ya({},e,{apiKeysList:p,actionState:y,handleDeleteApiKey:b,handleAddApiKey:g})))};function Ia(){return Ia=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ia.apply(this,arguments)}function xa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xa(Object(n),!0).forEach((function(t){Ta(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _a(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ka(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Da(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Da(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ca.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ca.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ua=function(e){var t=e.UIComponent,n=ka(rn(),1)[0],r=ka(hn(),1)[0].token,o=ka(Object(i.useState)(null),2),s=o[0],c=o[1],l=ka(Object(i.useState)({loading:!1,result:[],error:null}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(){var t,o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Aa(Aa({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/business/").concat(s.id,"/calendar_events"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=i.result,c=i.error,p({loading:!1,result:c?[]:u,error:c?u:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),p(Aa(Aa({},f),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_a(a,r,o,i,u,"next",e)}function u(e){_a(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){s&&d()}),[s]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ia({},e,{selectedBusiness:s,setSelectedBusiness:c,businessCalendarEvents:f})))};Ua.propTypes={UIComponent:c.a.elementType};var La=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function Ba(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}La.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},La.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Na=function(e){var t=e.appId,n=e.children,r=Ba(hn(),1)[0].user;return Object(i.useEffect)((function(){t&&function(e,t,n,r){function o(){if(!t.getElementById("canny-jssdk")){var e=t.getElementsByTagName(r)[0],n=t.createElement(r);n.type="text/javascript",n.async=!0,n.src="https://canny.io/sdk.js",e.parentNode.insertBefore(n,e)}}if("function"!=typeof e.Canny){var a=function e(){e.q.push(arguments)};a.q=[],e.Canny=a,"complete"===t.readyState?o():e.attachEvent?e.attachEvent("onload",o):e.addEventListener("load",o,!1)}}(window,document,0,"script")}),[t]),Object(i.useEffect)((function(){r&&t&&window.Canny("identify",{appID:t,user:{email:r.email,name:r.name,id:r.id,avatarURL:null==r?void 0:r.photo}})}),[r,t]),u.a.createElement(u.a.Fragment,null,n)};function Ra(){return Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ra.apply(this,arguments)}function Ma(e){return function(e){if(Array.isArray(e))return Ha(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Va(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function za(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ga(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){za(a,r,o,i,u,"next",e)}function u(e){za(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ya(Object(n),!0).forEach((function(t){$a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ja(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Va(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Va(e,t){if(e){if("string"==typeof e)return Ha(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ha(e,t):void 0}}function Ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Na.propTypes={appId:c.a.string.isRequired},Na.defaultProps={};var Wa=["cloudinary","tookan","order_messages","others","location"],Ka=["search_by_address","distance_unit_km","pickup","orders_metafields_strategy","order_validate","time_format","driver_close_distance","lazy_load_products_when_necessary","advanced_business_search_enabled"],Xa=function(e){var t=e.UIComponent,n=e.settingsType,r=Ja(hn(),1)[0],o=r.token,s=r.loading,c=Ja(rn(),1)[0],l=Ja(Object(i.useState)({categories:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=Ja(Object(i.useState)(!1),2),h=d[0],y=d[1],v=Ja(Object(i.useState)(null),2),m=v[0],b=v[1],g=function(){var e=Ga(a.a.mark((function e(){var t,r,i,u,l,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(qa(qa({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},(r=[]).push({attribute:"key",value:n}),i="".concat(c.root,"/config_categories?where=").concat(JSON.stringify(r)),e.next=10,fetch(i,t);case 10:return u=e.sent,e.next=13,u.json();case 13:l=e.sent,d=l.error,h=l.result,!d&&h.length>0?b(h[0].id):p(qa(qa({},f),{},{loading:!1,error:h})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p(qa(qa({},f),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Ga(a.a.mark((function e(){var t,n,r,i,u,l,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(qa(qa({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},(n=[]).push({attribute:"parent_category_id",value:parseInt(m)}),r="".concat(c.root,"/config_categories?orderBy=id&where=").concat(JSON.stringify(n)),e.next=10,fetch(r,t);case 10:return i=e.sent,e.next=13,i.json();case 13:u=e.sent,l=u.error,d=u.result,l?p(qa(qa({},f),{},{loading:!0,error:d})):(h=d.filter((function(e){return!Wa.includes(e.key)})).map((function(e){var t,n=null===(t=e.configs)||void 0===t?void 0:t.filter((function(e){return!Ka.includes(e.key)})).sort((function(e,t){return 1*e.rank>1*t.rank?1:-1}));return qa(qa({},e),{},{configs:Ma(n)})})),p(qa(qa({},f),{},{loading:!1,categories:h}))),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p(qa(qa({},f),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){g()}),[]),Object(i.useEffect)((function(){m&&O(m)}),[m]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ra({},e,{isUpdateConfig:h,handChangeConfig:y,categoryList:f,handleUpdateCategoryList:function(e){p(qa(qa({},f),{},{categories:e})),y(!0)}})))};function Za(){return Za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Za.apply(this,arguments)}function Qa(e){return function(e){if(Array.isArray(e))return ui(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ii(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(n),!0).forEach((function(t){ni(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ni(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ri(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function oi(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ri(a,r,o,i,u,"next",e)}function u(e){ri(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ai(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ii(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(e,t){if(e){if("string"==typeof e)return ui(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ui(e,t):void 0}}function ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Xa.propTypes={UIComponent:c.a.elementType,settingsType:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xa.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var si=function(e){var t=e.categorySelected,n=e.businessState,r=e.handleUpdateBusinessState,o=e.UIComponent,s=ai(Bn(),2)[1],c=ai(rn(),1)[0],l=ai(hn(),1)[0].loading,f=ai(Br(),2)[1].showToast,p=ai(Object(i.useState)([]),2),d=p[0],h=p[1],y=n.business,v=ai(Object(i.useState)({photos:[],loading:!1,result:{error:null},API:!1,endPoint:!1}),2),m=v[0],b=v[1],g=ai(Object(i.useState)([]),2),O=g[0],w=g[1],j=function(){return b({photos:[],loading:!1,result:{error:null},API:!1})},S=function(){var e=oi(a.a.mark((function e(t,n){var o,i,u,p,d,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(Dr.Info,s("LOADING","Loading")),b(ti(ti({},m),{},{loading:!0,API:!1})),e.next=7,c.businesses(parseInt(null==y?void 0:y.id)).categories(parseInt(null==t?void 0:t.category_id)).products(null==t?void 0:t.id).save(n);case 7:o=e.sent,i=o.content,u=i.error,p=i.result,u?b(ti(ti({},m),{},{loading:!1,result:{error:!0,result:p}})):(r&&((h=Qa(null==y?void 0:y.categories)).forEach((function e(r){if(r.id===(null==t?void 0:t.category_id)){var o=r.products.map((function(e){return e.id===t.id?ti(ti({},e),n):e}));r.products=Qa(o)}Array.isArray(null==r?void 0:r.subcategories)&&r.subcategories.forEach(e)})),r(ti(ti({},y),{},{categories:h}))),(v=null==m||null===(d=m.photos)||void 0===d?void 0:d.filter((function(e){return(null==e?void 0:e.name)!==(null==p?void 0:p.id)}))).length>0?b(ti(ti({},m),{},{photos:v,API:!0})):b({loading:!1,photos:[],result:{error:!1,result:"all product updated"},API:!1,endPoint:!0}),f(Dr.Success,s("PRODUCT_UPDATE","Products updated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),b(ti(ti({},m),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(e){return new Promise((function(t){var n=new FileReader,r=e.type,o=e.name,a=e.size;n.addEventListener("load",(function(){t({base64:n.result,name:parseInt(o.split(".")[0]),type:r,size:a})})),n.readAsDataURL(e)}))},P=function(){var e=oi(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=0;r<t.length;r++)n.push(E(t[r]));return e.next=4,Promise.all(n);case 4:o=e.sent,w([].concat(Qa(O),Qa(o)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){b(ti(ti({},m),{},{photos:O}))}),[O]);return Object(i.useEffect)((function(){t&&null!=t&&t.products&&(null==t?void 0:t.products.length)>0&&h(null==t?void 0:t.products)}),[t]),Object(i.useEffect)((function(){var e;if(null!=m&&m.API&&(null==m||null===(e=m.photos)||void 0===e?void 0:e.length)>0){var t=null==m?void 0:m.photos[0],n={images:null==t?void 0:t.base64},r=d.find((function(e){return(null==t?void 0:t.name)===(null==e?void 0:e.id)}));S(r,n)}null!=m&&m.API&&0===(null==m?void 0:m.photos.length)&&j()}),[null==m?void 0:m.API]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Za({},e,{handleUploadImages:P,cleanFormState:j,updateProduct:function(){b(ti(ti({},m),{},{API:!0,loading:!0}))},formState:m,products:d})))};function ci(){return ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ci.apply(this,arguments)}function li(e){return function(e){if(Array.isArray(e))return bi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(n),!0).forEach((function(t){di(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function di(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hi(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function yi(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hi(a,r,o,i,u,"next",e)}function u(e){hi(a,r,o,i,u,"throw",e)}i(void 0)}))}}function vi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||mi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mi(e,t){if(e){if("string"==typeof e)return bi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bi(e,t):void 0}}function bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}si.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},si.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},Yn.a.extend($n.a);var gi=function(e){var t,n,r,o,s,c=e.isSearchByName,l=e.isSearchByDescription,f=e.slug,p=e.categoryId,d=e.productId,h=e.isInitialRender,y=e.ordering,v=e.businessProps,m=e.UIComponent,b=vi(vr(),1)[0],g=vi(Bn(),2),O=g[0],w=g[1],j=vi(Object(i.useState)({id:null,name:w("ALL","All")}),2),S=j[0],E=j[1],P=vi(Object(i.useState)(null),2),C=P[0],I=P[1],x=vi(Object(i.useState)(null),2),A=x[0],T=x[1],_=vi(Object(i.useState)(null),2),k=_[0],D=_[1],U=vi(Object(i.useState)({business:{},menus:null,loading:!0,error:null}),2),L=U[0],B=U[1],F=vi(Object(i.useState)({}),2),N=F[0],R=F[1],M=vi(Object(i.useState)(),2),z=M[0],G=M[1],Y=vi(Object(i.useState)({}),2),q=Y[0],$=Y[1],J=vi(Object(i.useState)({product:null,loading:!1,error:null}),2),V=J[0],H=J[1],W=vi(Object(i.useState)(!1),2),K=W[0],X=W[1],Z={loading:!0,pagination:{currentPage:0,pageSize:20,totalItems:null,totalPages:0,nextPageItems:10},products:[]},Q=vi(Object(i.useState)(Z),2),ee=Q[0],te=Q[1],ne=vi(Object(i.useState)(null),2),re=ne[0],oe=ne[1],ae=function(e,t){return!C||(e&&e.toLowerCase().includes(C.toLowerCase())&&c||t&&t.toLowerCase().includes(C.toLowerCase())&&l)},ie=function(e){return!!e.featured&&(!C||(e.name&&e.name.toLowerCase().includes(C.toLowerCase())&&c||e.description&&e.description.toLowerCase().includes(C.toLowerCase())&&l))},ue=function(e,t){return"rank"===e?t.sort((function(e,t){return t.rank-e.rank})):"a-z"===e?t.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})):t},se=function(){var e=yi(a.a.mark((function e(t){var n,r,o,i,u,s,f,p,d,h,v,m,g,O,w,j,E,P,I,x,T,_,k,D,U,B,F,M,z,G,Y,J,V,H;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=L&&null!==(n=L.business)&&void 0!==n&&n.lazy_load_products_recommended){e.next=8;break}return s=!(null==L||null===(o=L.business)||void 0===o||null===(i=o.categories)||void 0===i||null===(u=i.find((function(e){return e})))||void 0===u||!u.products.filter((function(e){return e.featured})).length),X(s),f=pi(pi({},Z),{},{loading:!1}),"featured"!==(null==S?void 0:S.id)&&null!==(null==S?void 0:S.id)?(v=null==L||null===(p=L.business)||void 0===p||null===(d=p.categories)||void 0===d||null===(h=d.find((function(e){return(null==e?void 0:e.id)===(null==S?void 0:S.id)})))||void 0===h?void 0:h.products.filter((function(e){return ae(e.name,e.description)})),f.products=v||[]):"featured"===(null==S?void 0:S.id)?(O=null==L||null===(m=L.business)||void 0===m||null===(g=m.categories)||void 0===g?void 0:g.reduce((function(e,t){return[].concat(li(e),li(t.products))}),[]).filter((function(e){return ie(e)})),f.products=O||[]):(E=null==L||null===(w=L.business)||void 0===w||null===(j=w.categories)||void 0===j?void 0:j.reduce((function(e,t){return[].concat(li(e),li(t.products))}),[]).filter((function(e){return ae(e.name,e.description)})),f.products=E||[]),f.products=ue(A,f.products),te(pi({},f)),e.abrupt("return");case 8:if(P=C?"search":"featured"===(null==S?void 0:S.id)?"featured":null!=S&&S.id?"categoryId:".concat(null==S?void 0:S.id):"all",(I=N[P]||Z).products=ue(A,I.products),x=I.pagination,t||!(x.currentPage>0)||x.currentPage!==x.totalPages){e.next=15;break}return te(pi(pi({},I),{},{loading:!1})),e.abrupt("return");case 15:return te(pi(pi({},I),{},{loading:!0})),T={type:(null===(r=b.options)||void 0===r?void 0:r.type)||1,page:t?1:x.currentPage+1,page_size:x.pageSize},A&&(T.orderBy="a-z"===A?"name":A),_=null,k=[],C&&(c&&k.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}}),l&&k.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}})),_={conditions:k,conector:"OR"},"featured"===(null==S?void 0:S.id)&&(_={conditions:[{attribute:"featured",value:!0}]}),"featured"===(null==S?void 0:S.id)&&C&&(_={conditions:[{attribute:"featured",value:!0},{conditions:k,conector:"OR"}],conector:"AND"}),e.prev=24,B=null!=S&&S.id&&"featured"!==(null==S?void 0:S.id)?y.businesses(null===(D=L.business)||void 0===D?void 0:D.id).categories(null==S?void 0:S.id).products():y.businesses(null===(U=L.business)||void 0===U?void 0:U.id).products(),F={},q.products=F,$(pi({},q)),M=_.conditions.length>0?B.parameters(T).where(_):B.parameters(T),e.next=32,M.get({cancelToken:F});case 32:z=e.sent,G=z.content,Y=G.error,J=G.result,V=G.pagination,Y?oe(J):(H={pagination:pi(pi({},I.pagination),{},{currentPage:V.current_page,totalItems:V.total,totalPages:V.total_pages}),loading:!1,products:t?li(J):[].concat(li(I.products),li(J))},N[P]=H,te(pi({},H)),R(pi({},N)),X(!!N.all.products.find((function(e){return e.featured})))),e.next=43;break;case 40:e.prev=40,e.t0=e.catch(24),oe([e.t0.message]);case 43:case"end":return e.stop()}}),e,null,[[24,40]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=yi(a.a.mark((function e(){var t,n,r,o,i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p&&d&&null!==(t=L.business)&&void 0!==t&&t.id)){e.next=17;break}return e.prev=1,H(pi(pi({},V),{},{loading:!0})),i={},q.product=i,u={type:(null===(n=b.options)||void 0===n?void 0:n.type)||1,moment:(null===(r=b.options)||void 0===r?void 0:r.moment)||null},e.next=8,y.businesses(null===(o=L.business)||void 0===o?void 0:o.id).categories(p).products(d).parameters(u).get({cancelToken:i});case 8:s=e.sent,c=s.content.result,l=Array.isArray(c)?null:c,H(pi(pi({},V),{},{product:l,loading:!1})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),H(pi(pi({},V),{},{loading:!1,error:[e.t0]}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){h&&ce()}),[JSON.stringify(null===(t=L.business)||void 0===t?void 0:t.id),h]);var le=function(){var e=yi(a.a.mark((function e(){var t,n,r,o,i,u,s,c,l,p,d,h,m,g,O,w,j,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(pi(pi({},L),{},{loading:!0})),h={},q.business=h,$(pi({},q)),m={type:(null===(t=b.options)||void 0===t?void 0:t.type)||1,location:null!==(n=b.options)&&void 0!==n&&null!==(r=n.address)&&void 0!==r&&r.location?"".concat(null===(o=b.options)||void 0===o||null===(i=o.address)||void 0===i||null===(u=i.location)||void 0===u?void 0:u.lat,",").concat(null===(s=b.options)||void 0===s||null===(c=s.address)||void 0===c||null===(l=c.location)||void 0===l?void 0:l.lng):null},null!==(p=b.options)&&void 0!==p&&p.moment&&(a=null===(d=b.options)||void 0===d?void 0:d.moment,P="YYYY-MM-DD HH:mm:ss",Yn()(a,P).format(P)===a)&&(O=Yn.a.utc(null===(g=b.options)||void 0===g?void 0:g.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),m.timestamp=O),k&&(m.menu_id=k),e.next=10,y.businesses(f).select(v).parameters(m).get({cancelToken:h});case 10:return w=e.sent,j=w.content.result,e.next=14,y.businesses(j.id).menus().get();case 14:S=e.sent,E=S.content.result,B(pi(pi({},L),{},{business:j,loading:!1,menus:E})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),B(pi(pi({},L),{},{loading:!1,error:[e.t0.message]}));case 22:case"end":return e.stop()}var a,P}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){L.loading||se(!0)}),[L]),Object(i.useEffect)((function(){se(!!C)}),[C]),Object(i.useEffect)((function(){se(!!C)}),[S.id]),Object(i.useEffect)((function(){se(!!C)}),[A]),Object(i.useEffect)((function(){se()}),[f]),Object(i.useEffect)((function(){b.loading||!z||O.loading||le()}),[z,O.loading,f,k]),Object(i.useEffect)((function(){var e,t,n,r;b.loading||G({type:null==b||null===(e=b.options)||void 0===e?void 0:e.type,moment:null==b||null===(t=b.options)||void 0===t?void 0:t.moment,location:null==b||null===(n=b.options)||void 0===n||null===(r=n.address)||void 0===r?void 0:r.location})}),[null==b||null===(n=b.options)||void 0===n?void 0:n.type,null==b||null===(r=b.options)||void 0===r?void 0:r.moment,JSON.stringify(null==b||null===(o=b.options)||void 0===o||null===(s=o.address)||void 0===s?void 0:s.location)]),Object(i.useEffect)((function(){var e=q.business;return function(){e&&e.cancel()}}),[q.business]),Object(i.useEffect)((function(){var e=q.products;return function(){e&&e.cancel()}}),[q.products]),u.a.createElement(u.a.Fragment,null,m&&u.a.createElement(m,ci({},e,{errors:re,categorySelected:S,searchValue:C,sortByValue:A,filterByMenus:k,categoryState:ee,businessState:L,productModal:V,featuredProducts:K,handleChangeCategory:function(e){(null==e?void 0:e.id)!==(null==S?void 0:S.id)&&E(e)},handleChangeSearch:function(e){I(e)},handleChangeSortBy:function(e){T(e)},handleChangeFilterByMenus:function(e){D(e)},getNextProducts:se,updateProductModal:function(e){return H(pi(pi({},V),{},{product:e}))}})))};function Oi(){return Oi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oi.apply(this,arguments)}function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){Si(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ei(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Pi(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ei(a,r,o,i,u,"next",e)}function u(e){Ei(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ci(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ii(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ii(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gi.propTypes={UIComponent:c.a.elementType},gi.defaultProps={};var xi=function(e){var t=e.UIComponent,n=Ci(hn(),1)[0],r=n.token,o=n.loading,s=Ci(rn(),1)[0],c=Ci(Object(i.useState)({lapse:"today",businessIds:null,app_id:"all",franchises_id:null}),2),l=c[0],f=c[1],p=Ci(Object(i.useState)({loading:!1,data:[],error:null}),2),d=p[0],h=p[1],y=Ci(Object(i.useState)({loading:!1,data:[],error:null}),2),v=y[0],m=y[1],b=Ci(Object(i.useState)({loading:!1,data:[],error:null}),2),g=b[0],O=b[1],w=Ci(Object(i.useState)({loading:!1,data:[],error:null}),2),j=w[0],S=w[1],E=Ci(Object(i.useState)({loading:!1,data:[],error:null}),2),P=E[0],C=E[1],I=Ci(Object(i.useState)({loading:!1,data:[],error:null}),2),x=I[0],A=I[1],T=Ci(Object(i.useState)({loading:!1,data:[],error:null}),2),_=T[0],k=T[1],D=Ci(Object(i.useState)({loading:!1,data:[],error:null}),2),U=D[0],L=D[1],B=Ci(Object(i.useState)({loading:!1,data:[],error:null}),2),F=B[0],N=B[1],R=Ci(Object(i.useState)({loading:!1,data:[],error:null}),2),M=R[0],z=R[1],G=function(e){var t,n="".concat(s.root,"/reports/").concat(e),r="lapse=".concat(null==l?void 0:l.lapse);return null!=l&&l.businessIds&&(null==l?void 0:l.businessIds.length)>0&&(r="".concat(r,"&businesses=").concat(null==l||null===(t=l.businessIds)||void 0===t?void 0:t.toString())),null!=l&&l.app_id&&"all"!==l.app_id&&(r="".concat(r,"&app_id=").concat(null==l?void 0:l.app_id)),null!=l&&l.franchises_id&&(null==l?void 0:l.franchises_id.length)>0&&(r="".concat(r,"&franchises_id=").concat(JSON.stringify(null==l?void 0:l.franchises_id))),"".concat(n,"?").concat(r)},Y=function(){var e=Pi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(ji(ji({},d),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("orders"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,h(ji(ji({},d),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),h(ji(ji({},d),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Pi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,m(ji(ji({},v),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("sales"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,m(ji(ji({},v),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),m(ji(ji({},v),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Pi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(ji(ji({},g),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("top_selling"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,O(ji(ji({},g),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),O(ji(ji({},g),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Pi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,S(ji(ji({},j),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("top_categories"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,S(ji(ji({},j),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),S(ji(ji({},j),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Pi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,C(ji(ji({},P),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("orders_status"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,C(ji(ji({},P),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),C(ji(ji({},P),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Pi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,A(ji(ji({},x),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("users"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,A(ji(ji({},x),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),A(ji(ji({},x),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Pi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,k(ji(ji({},_),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("customer_satisfaction"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,k(ji(ji({},_),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),k(ji(ji({},_),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Pi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,L(ji(ji({},U),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("orders_accept_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,L(ji(ji({},U),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),L(ji(ji({},U),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Pi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,N(ji(ji({},F),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("arrived_pickup_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,N(ji(ji({},F),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),N(ji(ji({},F),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Pi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,z(ji(ji({},M),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("order_location"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,z(ji(ji({},M),{},s?{loading:!1,error:c}:{loading:!1,locations:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),z(ji(ji({},M),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){Y(),q(),$(),J(),V(),H(),W(),K(),X(),Z()}),[l]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Oi({},e,{filterList:l,ordersList:d,salesList:v,topProductList:g,topCategoryList:j,orderStatusList:P,registerUsersList:x,customerSatisfactionList:_,ordersAcceptSpendList:U,arrivedPickUpSpendList:F,orderLocationList:M,handleChangeFilterList:f})))};function Ai(){return Ai=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ai.apply(this,arguments)}function Ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(n),!0).forEach((function(t){ki(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ki(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Di(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ui(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Di(a,r,o,i,u,"next",e)}function u(e){Di(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Li(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xi.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xi.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Fi=function(e){var t=e.UIComponent,n=e.business,r=e.businessId,o=e.businessParams,s=Li(rn(),1)[0],c=Li(Object(i.useState)({business:{},loading:!1,error:null}),2),l=c[0],f=c[1],p={},d=function(){var e=Ui(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},p.business=n,e.next=4,s.businesses(t).select(o).parameters({location:"40.7539143,-73.9810162",type:1}).get({cancelToken:n});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Ui(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(_i(_i({},l),{},{loading:!0})),e.next=4,d(r);case 4:t=e.sent,n=t.content.result,f(_i(_i({},l),{},{loading:!1,business:n})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),f(_i(_i({},l),{},{loading:!1,error:[e.t0]}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return n?f(_i(_i({},l),{},{business:n})):h(),function(){p.business&&p.business.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ai({},e,{businessState:l})))};function Ni(){return Ni=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ni.apply(this,arguments)}function Ri(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Mi(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ri(a,r,o,i,u,"next",e)}function u(e){Ri(a,r,o,i,u,"throw",e)}i(void 0)}))}}function zi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zi(Object(n),!0).forEach((function(t){Yi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Fi.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessParams:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Fi.defaultProps={businessParams:["header","logo","name","today","delivery_price","minimum","description","distance","delivery_time","pickup_time","reviews"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ji=function(e){var t=e.UIComponent,n=e.propsToFetch,r=e.isSearchByName,o=qi(rn(),1)[0],s=qi(Object(i.useState)(null),2),c=s[0],l=s[1],f=qi(Br(),2)[1].showToast,p=qi(Bn(),2)[1],d=qi(Object(i.useState)({loading:!1,businesses:[],result:{error:null}}),2),h=d[0],y=d[1],v=new RegExp(/^[A-Za-z0-9\s]+$/g),m=function(){var e=Mi(a.a.mark((function e(){var t,i,u,s,l,f,p,d,m,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Gi(Gi({},h),{},{loading:!0})),t=null,i=[],c&&(u=[],s=v.test(c),r&&u.push({attribute:"name",value:{condition:"ilike",value:s?encodeURI("%".concat(c,"%")):"%".concat(c,"%")}}),i.push({conector:"OR",conditions:u})),i.length&&(t={conditions:i,conector:"AND"}),l=t?o.businesses().asDashboard().select(n).where(t):o.businesses().asDashboard().select(n),e.next=9,l.get();case 9:f=e.sent,p=f.content,d=p.error,m=p.result,b=p.pagination,y(Gi(Gi({},h),{},d?{loading:!1,error:m}:{loading:!1,businesses:m,pagination:b})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),y(Gi(Gi({},h),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Mi(a.a.mark((function e(t,n){var r,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),e.next=4,o.businesses(parseInt(t)).save(n);case 4:r=e.sent,i=r.content,u=i.error,s=i.result,u||(c=null==h?void 0:h.businesses.map((function(e){return e.id===t?Gi(Gi({},e),{},{franchise_id:s.franchise_id}):e})),y((function(e){return Gi(Gi({},e),{},{businesses:c})})),f(Dr.Success,p("BUSINESS_UPDATED","Business updated"))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[c]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ni({},e,{searchValue:c,onSearch:l,businessList:h,handleChangeCheckBox:function(e,t,n){var r={franchise_id:n};e.target.checked||(r={franchise_id:null}),b(t,r)},handleSelectAllBusinesses:function(e,t){var n,r=[];e?(n={franchise_id:t},h.businesses.forEach((function(e){e.franchise_id!==t&&(b(e.id,n),e.franchise_id=t),r.push(e)}))):(n={franchise_id:null},h.businesses.forEach((function(e){null!==e.franchise_id&&(b(e.id,n),e.franchise_id=null),r.push(e)}))),y(Gi(Gi({},h),{},{businesses:r}))}})))};function Vi(){return Vi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vi.apply(this,arguments)}function Hi(e){return function(e){if(Array.isArray(e))return ru(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wi(e){return Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wi(e)}function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){Zi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qi(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function eu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Qi(a,r,o,i,u,"next",e)}function u(e){Qi(a,r,o,i,u,"throw",e)}i(void 0)}))}}function tu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||nu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nu(e,t){if(e){if("string"==typeof e)return ru(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ru(e,t):void 0}}function ru(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ji.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ji.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var ou=function(e){var t=e.UIComponent,n=e.brand,r=e.handleUpdateBrandList,o=e.brandListState,s=e.onSelectedBrand,c=tu(rn(),1)[0],l=tu(Bn(),2)[1],f=tu(Br(),2)[1].showToast,p=tu(hn(),1)[0].token,d=tu(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),h=d[0],y=d[1],v=function(){var e=eu(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?g():m();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=eu(a.a.mark((function e(){var t,n,i,u,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,y(Xi(Xi({},h),{},{loading:!0})),f(Dr.Info,l("LOADING","Loading")),void 0===(null==(n=Xi({},null==h?void 0:h.changes))?void 0:n.ribbon)||null!=n&&null!==(t=n.ribbon)&&void 0!==t&&t.enabled||delete n.ribbon,n)("object"===Wi(n[i])&&null!==n[i]||Array.isArray(n[i]))&&(n[i]=JSON.stringify(n[i]));return u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(n)},e.next=9,fetch("".concat(c.root,"/franchises"),u);case 9:return d=e.sent,e.next=12,d.json();case 12:null!=(v=e.sent)&&v.error?y(Xi(Xi({},h),{},{changes:h.changes,result:v,loading:!1})):(y(Xi(Xi({},h),{},{changes:{},result:v,loading:!1})),r&&r([].concat(Hi(null==o?void 0:o.brands),[v.result])),s&&s(v.result),f(Dr.Success,l("BRAND_ADDED","Brand added"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),y(Xi(Xi({},h),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),b=function(e){if(y(Xi(Xi({},h),{},{changes:{},result:e,loading:!1})),r){var t=null==o?void 0:o.brands.map((function(t){return t.id===e.result.id?Xi(Xi({},t),e.result):t}));r(t)}},g=function(){var e=eu(a.a.mark((function e(){var t,r,o,i,u,s,d,v,m,g,O,w,j,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in e.prev=0,y(Xi(Xi({},h),{},{loading:!0})),f(Dr.Info,l("LOADING","Loading")),t=Xi({},null==h?void 0:h.changes))("object"===Wi(t[r])&&null!==t[r]||Array.isArray(t[r]))&&(t[r]=JSON.stringify(t[r]));return o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(t)},e.next=8,fetch("".concat(c.root,"/franchises/").concat(null==n?void 0:n.id),o);case 8:return i=e.sent,e.next=11,i.json();case 11:if(null!=(u=e.sent)&&u.error){e.next=29;break}if(void 0===(null===(s=h.changes)||void 0===s||null===(d=s.ribbon)||void 0===d?void 0:d.enabled)||null!==(v=h.changes)&&void 0!==v&&null!==(m=v.ribbon)&&void 0!==m&&m.enabled||null==u||null===(g=u.result)||void 0===g||null===(O=g.ribbon)||void 0===O||!O.enabled){e.next=25;break}return w={ribbon:JSON.stringify({enabled:!1})},j={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(w)},e.next=18,fetch("".concat(c.root,"/franchises/").concat(null==n?void 0:n.id),j);case 18:return S=e.sent,e.next=21,S.json();case 21:E=e.sent,b(E),e.next=26;break;case 25:b(u);case 26:f(Dr.Success,l("BRAND_UPDATED","Brand updated")),e.next=30;break;case 29:y(Xi(Xi({},h),{},{changes:h.changes,result:u,loading:!1}));case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(0),y(Xi(Xi({},h),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 35:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y(Xi(Xi({},h),{},{changes:{}}))}),[null==n?void 0:n.id]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Vi({},e,{brandFormState:h,handleUpdateClick:v,handleChangeInput:function(e){var t=Zi({},e.target.name,e.target.value);y(Xi(Xi({},h),{},{changes:Xi(Xi({},h.changes),t)}))},handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){y(Xi(Xi({},h),{},{changes:Xi(Xi({},h.changes),{},Zi({},t,n.result))}))},n.onerror=function(e){return console.log(e)}},handleChangeItem:function(e){var t=Xi(Xi({},null==h?void 0:h.changes),e);y(Xi(Xi({},h),{},{changes:t}))},handleChangeRibbon:function(e){var t,n,r=null!=h&&null!==(t=h.changes)&&void 0!==t&&t.ribbon?Xi(Xi({},null==h||null===(n=h.changes)||void 0===n?void 0:n.ribbon),e):Xi({},e),o=Xi(Xi({},null==h?void 0:h.changes),{},{ribbon:r});y(Xi(Xi({},h),{},{changes:o}))}})))};function au(){return au=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},au.apply(this,arguments)}function iu(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function uu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){iu(a,r,o,i,u,"next",e)}function u(e){iu(a,r,o,i,u,"throw",e)}i(void 0)}))}}function su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?su(Object(n),!0).forEach((function(t){lu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ou.propTypes={UIComponent:c.a.elementType,brand:c.a.object,brandListState:c.a.object,handleUpdateBrandList:c.a.func,onSelectedBrand:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ou.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var du=function(e){var t=e.UIComponent,n=fu(Bn(),2)[1],r=fu(Br(),2)[1].showToast,o=fu(Object(i.useState)(null),2),s=o[0],c=o[1],l=fu(hn(),1)[0],f=l.token,p=l.loading,d=fu(rn(),1)[0],h=fu(Object(i.useState)({loading:!1,brands:[],error:null}),2),y=h[0],v=h[1],m=fu(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),b=m[0],g=m[1],O=fu(Object(i.useState)(!1),2),w=O[0],j=O[1],S=function(e){v(cu(cu({},y),{},{brands:e}))},E=function(){var e=uu(a.a.mark((function e(t){var o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(cu(cu({},b),{},{loading:!0})),r(Dr.Info,n("LOADING","Loading")),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(d.root,"/franchises/").concat(t),o);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(u=e.sent)&&u.error?g(cu(cu({},b),{},{result:u,loading:!1})):(g(cu(cu({},b),{},{changes:{},result:u,loading:!1})),S&&(s=null==y?void 0:y.brands.filter((function(e){return e.id!==t})),S(s)),r(Dr.Success,n("BRAND_DELETED","Brand deleted")),j(!1)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g(cu(cu({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=uu(a.a.mark((function e(t,o){var i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(cu(cu({},b),{},{loading:!0})),r(Dr.Info,n("LOADING","Loading")),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(o)},e.next=6,fetch("".concat(d.root,"/franchises/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:null!=(s=e.sent)&&s.error?g(cu(cu({},b),{},{result:s,loading:!1})):(g(cu(cu({},b),{},{changes:{},result:s,loading:!1})),S&&(c=null==y?void 0:y.brands.map((function(e){return e.id===s.result.id?cu(cu({},e),{},{name:s.result.name,logo:s.result.logo,enabled:s.result.enabled}):e})),S(c)),r(Dr.Success,n("BRAND_UPDATED","Brand updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g(cu(cu({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=uu(a.a.mark((function e(){var t,n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(cu(cu({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},n="".concat(d.root,"/franchises"),e.next=8,fetch(n,t);case 8:return r=e.sent,e.next=11,r.json();case 11:o=e.sent,i=o.error,u=o.result,v(cu(cu({},y),{},i?{loading:!1,error:u}:{loading:!1,brands:u})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),v(cu(cu({},y),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){C()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,au({},e,{searchValue:s,onSearch:c,handleUpdateBrandList:S,brandListState:y,handleChangeState:function(e,t,n){var r=lu({},t,n);P(e,r)},brandFormState:b,handleDeleteBrand:E,openDetail:w,setOpenDetail:j})))};function hu(){return hu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hu.apply(this,arguments)}function yu(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function vu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}du.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},du.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bu=function(e){var t,n,r=e.business,o=e.businessId,s=e.businessAttributes,c=e.onBusinessClick,l=e.handleCustomClick,f=e.UIComponent,p=vu(rn(),1)[0],d=vu(Object(i.useState)(r),2),h=d[0],y=d[1],v=vu(Object(i.useState)(null),2),m=v[0],b=v[1],g=vu(Object(i.useState)(!1),2),O=g[0],w=g[1],j=vu(vr(),1)[0],S=vu(Pr(),1)[0].parsePrice,E=function(){var e,t=(e=a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.businesses(o).select(s).get();case 2:t=e.sent,n=t.content.result,y(n);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){yu(a,r,o,i,u,"next",e)}function u(e){yu(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),P=function(e){var t=(null==e?void 0:e.hour)<10?"0".concat(null==e?void 0:e.hour):null==e?void 0:e.hour,n=(null==e?void 0:e.minute)<10?"0".concat(null==e?void 0:e.minute):null==e?void 0:e.minute;return e?"".concat(t,":").concat(n):"none"},C=P((null==h||null===(t=h.today)||void 0===t||null===(n=t.lapses[0])||void 0===n?void 0:n.close)||null);return Object(i.useEffect)((function(){var e=null==m?void 0:m.split(":")[0],t=null==m?void 0:m.split(":")[1],n=null==C?void 0:C.split(":")[0],r=null==C?void 0:C.split(":")[1];C&&w(e>n||e===n&&t>=r)}),[m]),Object(i.useEffect)((function(){var e=setInterval((function(){var e=(new Date).getHours(),t=(new Date).getMinutes();b("".concat(e,":").concat(t))}),1e3);return function(){return clearInterval(e)}}),[]),Object(i.useEffect)((function(){r?y(r):E()}),[]),u.a.createElement(u.a.Fragment,null,f&&u.a.createElement(f,hu({},e,{orderState:j,isBusinessClose:O,business:h,formatDate:P,formatNumber:function(e){return Math.round(100*e)/100},getBusinessOffer:function(e){if(!e||!e.length)return null;var t=null==e?void 0:e.reduce((function(e,t){return e.rate>t.rate?e:t}));return 1===(null==t?void 0:t.rate_type)?"".concat(null==t?void 0:t.rate,"%"):S(null==t?void 0:t.rate)},handleClick:l||c})))};function gu(){return gu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gu.apply(this,arguments)}function Ou(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ou(Object(n),!0).forEach((function(t){ju(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ou(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ju(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Su(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Eu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Su(a,r,o,i,u,"next",e)}function u(e){Su(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Pu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bu.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessId:c.a.number,businessAttributes:c.a.arrayOf(c.a.string),onBusinessClick:c.a.func,handleCustomClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Iu=function(e){var t=e.business,n=e.UIComponent,r=e.handleUpdateBusinessState,o=Pu(rn(),1)[0],s=Pu(hn(),1)[0],c=Pu(Br(),2)[1].showToast,l=Pu(Bn(),2)[1],f=Pu(Object(i.useState)({loading:!1,error:null}),2),p=f[0],d=f[1],h=Pu(Object(i.useState)({changes:{}}),2),y=h[0],v=h[1],m=Pu(Object(i.useState)({changes:{},isCheckAll:!1,isDirty:!1}),2),b=m[0],g=m[1],O=function(){var e=Eu(a.a.mark((function e(){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.businesses(t.id).save(y.changes,{accessToken:s.token});case 3:if(n=e.sent,r=n.content,i=r.error,u=r.result,i){e.next=11;break}return e.abrupt("return",u);case 11:throw{message:i};case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Eu(a.a.mark((function e(n,r){var i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},body:JSON.stringify({enabled:r})},e.next=4,fetch("".concat(o.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones/").concat(n),i);case 4:return u=e.sent,e.next=7,u.json();case 7:if((c=e.sent).error){e.next=12;break}return e.abrupt("return",c.result);case 12:throw{message:c.result};case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Eu(a.a.mark((function e(){var n,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c(Dr.Info,l("LOADING","Loading")),d({loading:!0,error:null}),!Object.keys(b.changes).length){e.next=15;break}n=a.a.mark((function e(n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=parseInt(n),(null==(i=null==t||null===(r=t.zones)||void 0===r?void 0:r.find((function(e){return e.id===o})))?void 0:i.enabled)===b.changes[n]){e.next=5;break}return e.next=5,w(o,b.changes[n]);case 5:case"end":return e.stop()}}),e)})),e.t0=a.a.keys(b.changes);case 6:if((e.t1=e.t0()).done){e.next=11;break}return o=e.t1.value,e.delegateYield(n(o),"t2",9);case 9:e.next=6;break;case 11:g(wu(wu({},b),{},{isDirty:!1})),i=t.zones.filter((function(e){return void 0!==b.changes[e.id]&&(e.enabled=b.changes[e.id]),!0})),u=wu(wu({},t),{},{zones:i}),r(u);case 15:if(!Object.keys(y.changes).length){e.next=21;break}return e.next=18,O();case 18:s=e.sent,v({changes:{}}),r(s);case 21:d({loading:!1,error:null}),c(Dr.Success,l("BUSINESS_UPDATED","Business updated")),e.next=28;break;case 25:e.prev=25,e.t3=e.catch(0),d({loading:!1,error:[e.t3.message]});case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=0;for(var t in b.changes)b.changes[t]&&(e+=1);g(wu(wu({},b),{},{isCheckAll:Object.keys(b.changes).length===e}))}),[b.changes]),Object(i.useEffect)((function(){var e,n=(null==t||null===(e=t.zones)||void 0===e?void 0:e.filter((function(e){return 3!==(null==e?void 0:e.type)})))||[],r={};n.forEach((function(e){r[e.id]=e.enabled})),g(wu(wu({},b),{},{changes:r}))}),[null==t?void 0:t.zones]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,gu({},e,{actionState:p,formState:y,zoneListState:b,handleChangeForm:function(e){v({changes:wu(wu({},y.changes),e)})},onDeliveryStateSave:j,handleChangeAllZoneState:function(e){var t=wu({},b.changes);for(var n in t)t[n]=e;g(wu(wu({},b),{},{changes:t,isCheckAll:e,isDirty:!0}))},handleChangeZoneState:function(e,t){g(wu(wu({},b),{},{changes:wu(wu({},b.changes),{},ju({},e,t)),isDirty:!0}))}})))};function xu(){return xu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xu.apply(this,arguments)}function Au(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Fu(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Tu(e){return function(e){if(Array.isArray(e))return Nu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ku(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_u(Object(n),!0).forEach((function(t){Du(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Du(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uu(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Lu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Uu(a,r,o,i,u,"next",e)}function u(e){Uu(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Bu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Fu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fu(e,t){if(e){if("string"==typeof e)return Nu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nu(e,t):void 0}}function Nu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Iu.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Iu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ru=function(e){var t=e.business,n=e.zone,r=e.UIComponent,o=e.handleSuccessUpdate,s=Bu(rn(),1)[0],c=Bu(hn(),1)[0].token,l=Bu(Br(),2)[1].showToast,f=Bu(Bn(),2)[1],p=Bu(Object(i.useState)({zone:n}),2),d=p[0],h=p[1],y=Bu(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=y[0],m=y[1],b=Bu(Object(i.useState)(null),2),g=b[0],O=b[1],w=function(){var e=Lu(a.a.mark((function e(){var r,i,u,p,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=ku({},v.changes),r=ku(ku({},r),{},{data:JSON.stringify(v.changes.data)}),l(Dr.Info,f("LOADING","Loading")),m(ku(ku({},v),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(r)},e.next=8,fetch("".concat(s.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones/").concat(n.id),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(p=e.sent).error?m(ku(ku({},v),{},{loading:!1,error:p.result})):(m(ku(ku({},v),{},{loading:!1,changes:{}})),d=t.zones.filter((function(e){return(null==e?void 0:e.id)===n.id&&Object.assign(n,p.result),!0})),h=ku(ku({},t),{},{zones:d}),o&&o(h),l(Dr.Success,f("DELIVERYZONE_SAVED","Delivery zone saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m(ku(ku({},v),{},{loading:!1,error:[e.t0.message]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var n=Lu(a.a.mark((function n(){var r,i,u,p,d,h,y;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=ku({},v.changes),i=ku(ku({},i),{},{data:JSON.stringify(v.changes.data),type:(null===(r=v.changes)||void 0===r?void 0:r.type)||2,enabled:!0,schedule:JSON.stringify([{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]}])}),l(Dr.Info,f("LOADING","Loading")),m(ku(ku({},v),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(i)},n.next=8,fetch("".concat(s.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones"),u);case 8:return p=n.sent,n.next=11,p.json();case 11:(d=n.sent).error?m(ku(ku({},v),{},{loading:!1,error:d.result})):(m(ku(ku({},v),{},{changes:{},loading:!1})),h=[].concat(Tu(t.zones),[d.result]),y=ku(ku({},t),{},{zones:h}),o&&o(y),l(Dr.Success,f("DELIVERYZONE_ADDED","Delivery zone added")),e.onClose&&e.onClose()),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),m(ku(ku({},v),{},{error:n.t0.message,loading:!1}));case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(){return n.apply(this,arguments)}}(),S=function(){var r=Lu(a.a.mark((function r(){var i,u,p,d,h;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,l(Dr.Info,f("LOADING","Loading")),m(ku(ku({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},r.next=6,fetch("".concat(s.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones/").concat(n.id),i);case 6:return u=r.sent,r.next=9,u.json();case 9:(p=r.sent).error?m(ku(ku({},v),{},{loading:!1,error:p.result})):(d=t.zones.filter((function(e){return(null==e?void 0:e.id)!==n.id})),m(ku(ku({},v),{},{loading:!1})),h=ku(ku({},t),{},{zones:d}),o&&o(h),l(Dr.Success,f("DELIVERYZONE_DELETED","Business delivery zone deleted")),e.onClose&&e.onClose()),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),m(ku(ku({},v),{},{loading:!1,error:[r.t0.message]}));case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(){return r.apply(this,arguments)}}(),E=function(e){var t=(new DOMParser).parseFromString(e,"text/xml"),n=[],r="";if("kml"===t.documentElement.nodeName){var o,a=Au(t.getElementsByTagName("Placemark"));try{for(a.s();!(o=a.n()).done;){var i=o.value;r=i.getElementsByTagName("name")[0].childNodes[0].nodeValue.trim();var u,s=Au(i.getElementsByTagName("Polygon"));try{for(s.s();!(u=s.n()).done;){var c,l=u.value.getElementsByTagName("coordinates")[0].childNodes[0].nodeValue.trim(),p=(l=l.replace(/\n/g," ").replace(/\s+/g," ")).split(" "),d=[],h=Au(p);try{for(h.s();!(c=h.n()).done;){var y=c.value.split(",");d.push({lat:+y[1],lng:+y[0]})}}catch(e){h.e(e)}finally{h.f()}n.push(d)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){a.e(e)}finally{a.f()}}else m(ku(ku({},v),{},{error:f("INVALID_KML_FILE","Invalid KML file")}));1===n.length?(m(ku(ku({},v),{},{changes:ku(ku({},v.changes),{},{type:2,name:r,data:n[0]})})),O(n[0])):m(ku(ku({},v),{},{error:f("INVALID_KML_FILE","Invalid KML file")}))};return Object(i.useEffect)((function(){m({loading:!1,changes:{},error:null}),h({zone:n})}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,xu({},e,{zoneState:d,formState:v,kmlData:g,handleChangeInput:function(e){m(ku(ku({},v),{},{changes:ku(ku({},v.changes),{},Du({},e.target.name,e.target.value))}))},handleChangeFormState:function(e){m(ku(ku({},v),{},{changes:ku(ku({},v.changes),e)}))},handleDeleteBusinessDeliveryZone:S,handleUpdateBusinessDeliveryZone:w,handleAddBusinessDeliveryZone:j,handleUploadKmlFiles:function(e){if(1===e.length){var t=new window.FileReader;t.readAsText(e[0]),t.onload=function(){E(t.result)},t.onerror=function(e){return console.log(e)}}}})))};function Mu(){return Mu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mu.apply(this,arguments)}function zu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Wu(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Gu(e){return function(e){if(Array.isArray(e))return Ku(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yu(Object(n),!0).forEach((function(t){$u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ju(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Vu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ju(a,r,o,i,u,"next",e)}function u(e){Ju(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Hu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Wu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wu(e,t){if(e){if("string"==typeof e)return Ku(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ku(e,t):void 0}}function Ku(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ru.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ru.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Xu=function(e){var t=e.UIComponent,n=e.business,r=e.zone,o=e.businesses,s=e.busienssesPropsToFetch,c=e.handleUpdateBusinessDeliveryZone,l=Hu(rn(),1)[0],f=Hu(hn(),1)[0].token,p=Hu(Bn(),2)[1],d=Hu(Br(),2)[1].showToast,h=Hu(Object(i.useState)({businesses:[],loading:!1,error:null}),2),y=h[0],v=h[1],m=Hu(Object(i.useState)({loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=Hu(Object(i.useState)([]),2),w=O[0],j=O[1],S=function(){var e=Vu(a.a.mark((function e(){var t,r,o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(qu(qu({},y),{},{loading:!0})),t=l.setAccessToken(f).businesses().select(s).asDashboard(),e.next=5,t.get();case 5:r=e.sent,o=r.content,i=o.error,u=o.result,i||(c=u.filter((function(e){return e.id!==n.id})),v(qu(qu({},y),{},{businesses:c,loading:!1}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v(qu(qu({},y),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Vu(a.a.mark((function e(){var t,o,i,u,s,h,v,m,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,p("LOADING","Loading")),g(qu(qu({},b),{},{loading:!0})),t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/deliveryzones/").concat(r.id,"?jbusinesses=").concat(w),t);case 6:return o=e.sent,e.next=9,o.json();case 9:if(!e.sent.error){i=[],u=zu(w);try{for(h=function(){var e,t=s.value;i.push({id:t,name:null===(e=y.businesses.find((function(e){return e.id===t})))||void 0===e?void 0:e.name,pivot:{business_id:t,zone_id:r.id}})},u.s();!(s=u.n()).done;)h()}catch(e){u.e(e)}finally{u.f()}v=qu(qu({},r),{},{businesses:i}),m=n.zones.filter((function(e){return e.id===v.id&&Object.assign(e,v),!0})),O=qu(qu({},n),{},{zones:m}),c&&c(O),g({loading:!1,result:{error:!1}}),d(Dr.Success,p("BUSINESS_SAVED","Business saved"))}e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g({loading:!1,result:{error:!1}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?v(qu(qu({},y),{},{businesses:o,loading:!1})):S()}),[o]),Object(i.useEffect)((function(){if(null!=r&&r.businesses){var e,t=null===(e=r.businesses)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Gu(e),[t.id])}),[]);j(t)}}),[r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Mu({},e,{businessesState:y,actionState:b,selectedBusinessIds:w,handleSelectBusiness:function(e,t){if(t)j([].concat(Gu(w),[e]));else{var n=w.filter((function(t){return t!==e}));j(n)}},handleSelectAllBusiness:function(e){if(e){var t,n=null===(t=y.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(Gu(e),[t.id])}),[]);j(n)}else j([])},handleShareBusinesses:E})))};function Zu(){return Zu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zu.apply(this,arguments)}function Qu(e){return function(e){if(Array.isArray(e))return us(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||is(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ts(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){es(a,r,o,i,u,"next",e)}function u(e){es(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(n),!0).forEach((function(t){os(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function os(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function as(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||is(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function is(e,t){if(e){if("string"==typeof e)return us(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?us(e,t):void 0}}function us(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Xu.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var ss=function(e){var t=e.asDashboard,n=e.business,r=e.businessId,o=e.propsToFetch,s=e.UIComponent,c=e.handleSucessUpdateBusiness,l=e.handleSucessRemoveBusiness,f=e.handleSucessAddBusiness,p=as(rn(),1)[0],d=as(hn(),1)[0],h=as(Br(),2)[1].showToast,y=as(Bn(),2)[1],v=as(Object(i.useState)({business:null,loading:!0,error:null}),2),m=v[0],b=v[1],g=as(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=as(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),S=j[0],E=j[1],P=function(){var e=ts(a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(rs(rs({},m),{},{loading:!0})),n=t?p.setAccessToken(d.token).businesses(r).asDashboard():p.setAccessToken(d.token).businesses(r).select(o),e.next=5,n.get();case 5:i=e.sent,u=i.content.result,s=Array.isArray(u)?null:u,b(rs(rs({},m),{},{loading:!1,business:s})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),b(rs(rs({},m),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=ts(a.a.mark((function e(t){var n,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,y("LOADING","Loading")),w(rs(rs({},O),{},{loading:!0})),e.next=5,p.setAccessToken(d.token).businesses(r).save({enabled:t});case 5:n=e.sent,o=n.content,i=o.error,u=o.result,w(rs(rs({},O),{},{loading:!1,error:i?u:null})),i||(b(rs(rs({},m),{},{business:rs(rs({},m.business),u)})),h(Dr.Success,y("BUSINESS_UPDATED","Business updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(rs(rs({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var t=ts(a.a.mark((function t(){var n,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,y("LOADING","Loading")),w(rs(rs({},O),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},t.next=6,fetch("".concat(p.root,"/business/").concat(r),n);case 6:return o=t.sent,t.next=9,o.json();case 9:i=t.sent,w(rs(rs({},O),{},{loading:!1,error:i.error?i.result:null})),i.error||(h(Dr.Success,y("BUSINESS_DELETED","Business deleted")),l&&l(r),e.onClose&&e.onClose()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),w(rs(rs({},O),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var e=ts(a.a.mark((function e(){var t,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,y("LOADING","Loading")),w(rs(rs({},O),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},e.next=6,fetch("".concat(p.root,"/business/").concat(r,"/duplicate"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:o=e.sent,w(rs(rs({},O),{},{loading:!1,error:o.error?o.result:null})),o.error||(f&&f(null==o?void 0:o.result),h(Dr.Success,y("BUSINESS_DUPLICATED","Business duplicated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),w(rs(rs({},O),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=ts(a.a.mark((function e(t){var n,o,i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,y("LOADING","Loading")),w(rs(rs({},O),{},{loading:!0})),e.next=5,p.setAccessToken(d.token).businesses(r).save({owners:t});case 5:n=e.sent,o=n.content,i=o.error,u=o.result,w(rs(rs({},O),{},{loading:!1,error:i?u:null})),i||(c=null==m||null===(s=m.business)||void 0===s?void 0:s.owners.filter((function(e){return t.includes(e.id)})),l=rs(rs({},null==m?void 0:m.business),{},{owners:c}),b(rs(rs({},m),{},{business:l})),h(Dr.Success,y("BUSINESS_OWNER_DELETED","Business owner deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(rs(rs({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=ts(a.a.mark((function e(t,n){var o,i,u,s,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,y("LOADING","Loading")),w(rs(rs({},O),{},{loading:!0})),e.next=5,p.setAccessToken(d.token).businesses(r).save({owners:t});case 5:o=e.sent,i=o.content,u=i.error,s=i.result,w(rs(rs({},O),{},{loading:!1,error:u?s:null})),u||(l=[].concat(Qu(null==m||null===(c=m.business)||void 0===c?void 0:c.owners),[n]),f=rs(rs({},null==m?void 0:m.business),{},{owners:l}),b(rs(rs({},m),{},{business:f})),h(Dr.Success,y("BUSINESS_OWNER_ADDED","Business owner added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(rs(rs({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=ts(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(rs(rs({},S),{},{loading:!0})),h(Dr.Info,y("LOADING","Loading")),e.next=5,p.businesses(r).save(S.changes,{accessToken:d.token});case 5:t=e.sent,E(rs(rs({},S),{},{changes:t.content.error?S.changes:{},result:t.content,loading:!1})),t.content.error||(b(rs(rs({},m),{},{business:rs(rs({},m.business),t.content.result)})),h(Dr.Success,y("BUSINESS_UPDATED","Business updated"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),E(rs(rs({},S),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){null!=m&&m.business&&c&&c(null==m?void 0:m.business)}),[null==m?void 0:m.business]),Object(i.useEffect)((function(){n?b(rs(rs({},m),{},{loading:!1,business:n})):P()}),[r,n]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,Zu({},e,{businessState:m,formState:S,setFormState:E,cleanFormState:function(e){return E(rs(rs({},S),e))},handleChangeActiveBusiness:C,handleDuplicateBusiness:x,handleDeleteBusiness:I,handleDeleteBusinessOwner:A,handleAddBusinessOwner:T,handleUpdateBusinessClick:_,handleUpdateBusinessState:function(e){var t=rs({},null==m?void 0:m.business);Object.assign(t,e),b(rs(rs({},m),{},{business:t}))},handleSuccessAddBusinessItem:function(e,t){var n=[].concat(Qu(null==m?void 0:m.business[e]),[t]);b(rs(rs({},m),{},{business:rs(rs({},null==m?void 0:m.business),{},os({},e,n))}))},handleSuccessDeleteBusinessItem:function(e,t){var n=null==m?void 0:m.business[e].filter((function(e){return e.id!==t}));b(rs(rs({},m),{},{business:rs(rs({},null==m?void 0:m.business),{},os({},e,n))}))}})))};function cs(){return cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cs.apply(this,arguments)}function ls(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function fs(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ls(a,r,o,i,u,"next",e)}function u(e){ls(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ps(Object(n),!0).forEach((function(t){hs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ys(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ss.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),businessId:c.a.oneOfType([c.a.number,c.a.string]),business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ss.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","address","alcohol","city","city_id","description","ribbon","delivery_price","distance","delivery_time","enabled","featured","food","gallery","groceries","header","laundry","logo","location","metafields","name","offers","open","owners","pickup_time","reviews","schedule","slug","types"]};var ms=function(e){var t,n,r=e.UIComponent,o=e.business,s=e.handleSuccessUpdate,c=e.handleSucessAddBusiness,l=e.handleUpdateBusinessState,f=ys(rn(),1)[0],p=ys(hn(),1)[0],d=ys(tr(),1)[0].configs,h=ys(Br(),2)[1].showToast,y=ys(Bn(),2)[1],v=ys(Object(i.useState)({loading:!1,business:null,error:null}),2),m=v[0],b=v[1],g=ys(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),O=g[0],w=g[1],j=ys(Object(i.useState)(null),2),S=j[0],E=j[1],P=null,C=null==d||null===(t=d.google_maps_api_key)||void 0===t?void 0:t.value,I={minimum:0,delivery_price:0,tax:0,tax_type:1,service_fee:0,enabled:!0,owner_id:null==p||null===(n=p.user)||void 0===n?void 0:n.id,schedule:[{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]}]},x=function(e){b(ds(ds({},m),{},{business:ds(ds({},m.business),e.content.result)})),s&&s(e.content.result),l&&l(e.content.result)},A=function(){var e=fs(a.a.mark((function e(){var t,n,r,i,u,s,c,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,y("LOADING","Loading")),w(ds(ds({},O),{},{loading:!0})),t=ds({},O.changes),e.next=6,f.businesses(null==o?void 0:o.id).save(t,{accessToken:p.token});case 6:if(n=e.sent,r=ds({},O.changes),w(ds(ds({},O),{},{changes:n.content.error?O.changes:{},result:n.content,loading:!1})),n.content.error){e.next=20;break}if(void 0===(null==r||null===(i=r.ribbon)||void 0===i?void 0:i.enabled)||null!=r&&null!==(u=r.ribbon)&&void 0!==u&&u.enabled||null===(s=n.content)||void 0===s||null===(c=s.result)||void 0===c||null===(l=c.ribbon)||void 0===l||!l.enabled){e.next=18;break}return d={ribbon:{enabled:!1}},e.next=14,f.businesses(null==o?void 0:o.id).save(d,{accessToken:p.token});case 14:v=e.sent,x(v),e.next=19;break;case 18:x(n);case 19:h(Dr.Success,y("BUSINESS_UPDATED","Business updated"));case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),w(ds(ds({},O),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=fs(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(ds(ds({},O),{},{loading:!0})),t=ds(ds({},O.changes),I),e.next=5,f.businesses().save(t,{accessToken:p.token});case 5:n=e.sent,w(ds(ds({},O),{},{changes:n.content.error?O.changes:{},result:n.content,loading:!1})),n.content.error||(b(ds(ds({},m),{},{business:ds(ds({},m.business),n.content.result)})),c&&c(n.content.result)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),w(ds(ds({},O),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=fs(a.a.mark((function e(t,n){var r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Date,o=Math.floor(r.getTime()/1e3),i="https://maps.googleapis.com/maps/api/timezone/json?location=".concat(t,",").concat(n,"&timestamp=").concat(o,"&key=").concat(C),e.next=5,fetch(i,{method:"GET"});case 5:return u=e.sent,e.next=8,u.json();case 8:return s=e.sent,e.abrupt("return",null==s?void 0:s.timeZoneId);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=fs(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(null==t||null===(n=t.location)||void 0===n?void 0:n.lat,null==t||null===(r=t.location)||void 0===r?void 0:r.lng);case 2:o=e.sent,E({address:null==t?void 0:t.address,location:ds(ds({},null==t?void 0:t.location),{},{zipcode:null!=t&&t.zipcode?t.zipcode:-1,zoom:15}),timezone:o});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){S&&w(ds(ds({},O),{},{changes:ds(ds({},null==O?void 0:O.changes),S)}))}),[S]),Object(i.useEffect)((function(){o&&b(ds(ds({},m),{},{business:o}))}),[o]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,cs({},e,{cleanFormState:function(e){return w(ds(ds({},O),e))},formState:O,businessState:m,setFormState:w,handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=ds(ds({},n),{},hs({},e.name,e.value))})):n=hs({},e.target.name,e.target.value),w(ds(ds({},O),{},{changes:ds(ds({},O.changes),n)}))},handleButtonUpdateClick:A,handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){w(ds(ds({},O),{},{changes:ds(ds({},O.changes),{},hs({},t,n.result))}))},n.onerror=function(e){return console.log(e)}},handleAddBusiness:T,handleChangeAddress:k,handleChangeCenter:function(e){var t;clearTimeout(P),P=setTimeout(fs(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_(null==e?void 0:e.lat(),null==e?void 0:e.lng());case 2:t=n.sent,E({location:{lat:null==e?void 0:e.lat(),lng:null==e?void 0:e.lng(),zoom:15,zipcode:-1},timezone:t});case 4:case"end":return n.stop()}}),n)}))),200)},handleChangeSwtich:function(e,t){var n=ds(ds({},O.changes),{},hs({},e,t));w(ds(ds({},O),{},{changes:n}))},handleChangeRibbon:function(e){var t,n,r=null!=O&&null!==(t=O.changes)&&void 0!==t&&t.ribbon?ds(ds({},null==O||null===(n=O.changes)||void 0===n?void 0:n.ribbon),e):ds({},e),o=ds(ds({},null==O?void 0:O.changes),{},{ribbon:r});w(ds(ds({},O),{},{changes:o}))}})))};function bs(){return bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bs.apply(this,arguments)}function gs(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Os(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){gs(a,r,o,i,u,"next",e)}function u(e){gs(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(n),!0).forEach((function(t){Ss(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ss(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Es(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ps(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ps(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ms.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ms.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Cs=function(e){var t=e.business,n=e.isVideoGallery,r=e.isImageGallery,o=e.UIComponent,s=e.handleSucessAddBusinessGallery,c=e.handleSucessDeleteBusinessGallery,l=Es(rn(),1)[0],f=Es(hn(),1)[0].token,p=Es(Br(),2)[1].showToast,d=Es(Bn(),2)[1],h=Es(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),y=h[0],v=h[1],m=Es(Object(i.useState)([]),2),b=m[0],g=m[1],O=Es(Object(i.useState)([]),2),w=O[0],j=O[1],S=function(){var e=Os(a.a.mark((function e(){var o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),v(js(js({},y),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(y.changes)},e.next=6,fetch("".concat(l.root,"/business/").concat(t.id,"/gallery"),o);case 6:return i=e.sent,e.next=9,i.json();case 9:u=e.sent,v(js(js({},y),{},{changes:u.error?y.changes:{},result:u,loading:!1})),u.error||(n&&p(Dr.Success,d("GALLERY_VIDEO_ADDED")),r&&p(Dr.Success,d("GALLERY_IMAGE_ADDED")),s&&s(u.result)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v(js(js({},y),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Os(a.a.mark((function e(n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),v(js(js({},y),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(t.id,"/gallery/").concat(n,"?business_id=").concat(t.id),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,v(js(js({},y),{},{loading:!1})),i.error||(p(Dr.Success,d("GALLERY_ITEM_DELETED")),c&&c(n)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v(js(js({},y),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,n,r=null==t||null===(e=t.gallery)||void 0===e?void 0:e.filter((function(e){return e.file})),o=null==t||null===(n=t.gallery)||void 0===n?void 0:n.filter((function(e){return e.video}));g(r),j(o)}),[t]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,bs({},e,{businessSchedule:(null==t?void 0:t.schedule)||[],businessPhotos:b||[],businessVideos:w||[],formState:y,handlechangeImage:function(e){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){v(js(js({},y),{},{changes:js(js({},y.changes),{},{business_id:t.id,file:n.result,type:1})}))},n.onerror=function(e){return console.log(e)}},cleanFormState:function(e){return v(js(js({},y),e))},handleChangeBusinessVideo:function(e){v(js(js({},y),{},{changes:js(js({},y.changes),{},{business_id:null==t?void 0:t.id,type:2,video:e.target.value})}))},handleUpdateBusinessGallery:S,handleDeleteBusinessGallery:E})))};function Is(){return Is=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Is.apply(this,arguments)}function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function As(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach((function(t){Ts(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ts(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _s(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ks(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ds(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ds(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ds(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Cs.propTypes={UIComponent:c.a.elementType,business:c.a.object,optionToShow:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Cs.defaultProps={business:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Us=function(e){var t=e.UIComponent,n=ks(hn(),1)[0],r=n.token,o=n.loading,s=ks(rn(),1)[0],c=ks(Object(i.useState)({loading:!1,printers:[],error:null}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,n,i,u,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(As(As({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n="".concat(s.root,"/printers"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,c=u.error,p=u.result,f(As(As({},l),{},c?{loading:!1,error:p}:{loading:!1,printers:p})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),f(As(As({},l),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_s(a,r,o,i,u,"next",e)}function u(e){_s(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Is({},e,{printersListState:l})))};function Ls(){return Ls=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ls.apply(this,arguments)}function Bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Us.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Us.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ns=function(e){var t=e.googleMapsControls,n=e.business,r=e.optionToShow,o=e.UIComponent,a=Bs(Object(i.useState)(r),2),s=a[0],c=a[1],l=Bs(Object(i.useState)([]),2),f=l[0],p=l[1],d=Bs(Object(i.useState)([]),2),h=d[0],y=d[1],v=Bs(Object(i.useState)({}),2),m=v[0],b=v[1];return Object(i.useEffect)((function(){var e,r,o=null==n||null===(e=n.gallery)||void 0===e?void 0:e.filter((function(e){return e.file})),a=null==n||null===(r=n.gallery)||void 0===r?void 0:r.filter((function(e){return e.video})),i={location:null==n?void 0:n.location,address:null==n?void 0:n.address,address_notes:null==n?void 0:n.address_notes,googleMapsControls:t};p(o),y(a),b(i)}),[n]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Ls({},e,{businessSchedule:(null==n?void 0:n.schedule)||[],businessPhotos:f||[],businessVideos:h||[],businessLocation:m||{},optionToShow:s,onChangeOption:function(e){c(e)}})))};function Rs(){return Rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rs.apply(this,arguments)}function Ms(e){return function(e){if(Array.isArray(e))return Vs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Js(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(n),!0).forEach((function(t){Ys(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ys(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qs(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function $s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Js(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Js(e,t){if(e){if("string"==typeof e)return Vs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vs(e,t):void 0}}function Vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ns.propTypes={UIComponent:c.a.elementType,business:c.a.object,optionToShow:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ns.defaultProps={business:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},Yn.a.extend($n.a);var Hs=function(e){var t=e.UIComponent,n=e.initialOrderType,r=e.initialFilterKey,o=e.initialFilterValue,s=e.isSortByReview,c=e.isSearchByName,l=e.isSearchByDescription,f=e.propsToFetch,p=e.onBusinessClick,d=$s(Object(i.useState)({businesses:[],loading:!0,error:null}),2),h=d[0],y=d[1],v=$s(Object(i.useState)({currentPage:0,pageSize:10,totalItems:null,totalPages:null}),2),m=v[0],b=v[1],g=$s(Object(i.useState)(null),2),O=g[0],w=g[1],j=$s(Object(i.useState)(""),2),S=j[0],E=j[1],P=$s(Object(i.useState)(null),2),C=P[0],I=P[1],x=$s(vr(),1)[0],A=$s(rn(),1)[0],T=$s(Object(i.useState)({}),2),_=T[0],k=T[1],D=new RegExp(/^[A-Za-z0-9\s]+$/g),U=function(){var e,t=(e=a.a.mark((function e(t){var r,o,i,u,p,d,v,g,w,j,E,P,I,T,U,L,B,F,N,R,M,z,G,Y,q,$,J,V;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Gs(Gs({},h),{},{loading:!0})),j={location:"".concat(null===(r=x.options)||void 0===r||null===(o=r.address)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.lat,",").concat(null===(u=x.options)||void 0===u||null===(p=u.address)||void 0===p||null===(d=p.location)||void 0===d?void 0:d.lng),type:n||(null===(v=x.options)||void 0===v?void 0:v.type)||1},s||(E={page:t?1:m.currentPage+1,page_size:m.pageSize},j=Gs(Gs({},j),E)),null!==(g=x.options)&&void 0!==g&&g.moment&&(a=null===(w=x.options)||void 0===w?void 0:w.moment,H="YYYY-MM-DD HH:mm:ss",Yn()(a,H).format(H)===a)&&(I=Yn.a.utc(null===(P=x.options)||void 0===P?void 0:P.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),j.timestamp=I),T=null,U=[],O&&U.push({attribute:O,value:!0}),C&&(1===(null===(L=x.options)||void 0===L?void 0:L.type)&&U.push({attribute:"delivery_time",value:{condition:"<=",value:C}}),2===(null===(B=x.options)||void 0===B?void 0:B.type)&&U.push({attribute:"pickup_time",value:{condition:"<=",value:C}})),S&&(F=[],N=D.test(S),c&&F.push({attribute:"name",value:{condition:"ilike",value:N?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),l&&F.push({attribute:"description",value:{condition:"ilike",value:N?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),U.push({conector:"OR",conditions:F})),U.length&&(T={conditions:U,conector:"AND"}),R={},_.businesses=R,k(Gs({},_)),M=T?A.businesses().select(f).parameters(j).where(T):A.businesses().select(f).parameters(j),e.next=17,M.get({cancelToken:R});case 17:z=e.sent,G=z.content,Y=G.result,q=G.pagination,s?($=Y.sort((function(e,t){return t.reviews.total-e.reviews.total})),h.businesses=$):h.businesses=t?Y:[].concat(Ms(h.businesses),Ms(Y)),y(Gs(Gs({},h),{},{loading:!1})),J=0,q.current_page!==q.total_pages&&(V=q.total-h.businesses.length,J=V<q.page_size?V:q.page_size),b(Gs(Gs({},m),{},{currentPage:q.current_page,totalPages:q.total_pages,totalItems:q.total,nextPageItems:J})),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&y(Gs(Gs({},h),{},{loading:!1,error:[e.t0.message]}));case 31:case"end":return e.stop()}var a,H}),e,null,[[0,28]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){qs(a,r,o,i,u,"next",e)}function u(e){qs(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=_.businesses;return function(){e&&e.cancel()}}),[_.businesses]),Object(i.useEffect)((function(){var e,t;!x.loading&&null!==(e=x.options)&&void 0!==e&&null!==(t=e.address)&&void 0!==t&&t.location&&U(!0)}),[JSON.stringify(x.options),O,S,C]),Object(i.useEffect)((function(){if(r||o)switch(r){case"category":L(o);break;case"timeLimit":F(o);break;case"search":B(o)}}),[r,o]);var L=function(e){e!==O&&(y(Gs(Gs({},h),{},{businesses:[],loading:!0})),w(e))},B=function(e){y(Gs(Gs({},h),{},!!e!=!!S?{businesses:[],loading:!0}:{loading:!1})),E(e)},F=function(e){y(Gs(Gs({},h),{},!!e!=!!C?{businesses:[],loading:!0}:{loading:!1})),I(e)};return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Rs({},e,{businessesList:h,paginationProps:m,searchValue:S,timeLimitValue:C,businessTypeSelected:O,getBusinesses:U,handleChangeSearch:B,handleChangeTimeLimit:F,handleBusinessClick:function(e){p&&p(e)},handleChangeBusinessType:L})))};function Ws(){return Ws=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ws.apply(this,arguments)}function Ks(e){return function(e){if(Array.isArray(e))return oc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xs(Object(n),!0).forEach((function(t){Qs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ec(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function tc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ec(a,r,o,i,u,"next",e)}function u(e){ec(a,r,o,i,u,"throw",e)}i(void 0)}))}}function nc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||rc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rc(e,t){if(e){if("string"==typeof e)return oc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oc(e,t):void 0}}function oc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Hs.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),onBusinessClick:c.a.func},Hs.defaultProps={propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var ac=function(e){var t=e.UIComponent,n=e.userId,r=e.busienssesPropsToFetch,o=nc(rn(),1)[0],s=nc(hn(),1)[0].token,c=nc(Bn(),2)[1],l=nc(Br(),2)[1].showToast,f=nc(Object(i.useState)({businesses:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=nc(Object(i.useState)([]),2),y=h[0],v=h[1],m=nc(Object(i.useState)({loading:!1,error:null}),2),b=m[0],g=m[1],O=function(){var e=tc(a.a.mark((function e(){var t,r,i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Zs(Zs({},b),{},{loading:!0})),t=o.setAccessToken(s).users(n).select(["businesses"]),e.next=5,t.get();case 5:r=e.sent,i=r.content,u=i.error,c=i.result,u?g({loading:!1,error:c}):(g({loading:!1,error:null}),f=null===(l=c.businesses)||void 0===l?void 0:l.reduce((function(e,t){return[].concat(Ks(e),[t.id])}),[]),v(f)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=tc(a.a.mark((function e(){var t,n,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Zs(Zs({},p),{},{loading:!0})),t=o.setAccessToken(s).businesses().select(r).asDashboard(),e.next=5,t.get();case 5:n=e.sent,i=n.content,u=i.error,c=i.result,u||d(Zs(Zs({},p),{},{businesses:c,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(Zs(Zs({},p),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=tc(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),g({loading:!0,error:null}),e.next=5,o.setAccessToken(s).users(n).save({businesses:y});case 5:t=e.sent,r=t.content,i=r.error,u=r.result,i?g({loading:!1,error:u}):(g({loading:!1,error:null}),l(Dr.Success,c("BUSINESS_SAVED","Business saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){e.businesses?d(Zs(Zs({},p),{},{businesses:e.businesses,loading:!1})):w()}),[e.businesses]),Object(i.useEffect)((function(){O()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ws({},e,{actionState:b,businessesState:p,selectedBusinessIds:y,handleSelectBusiness:function(e,t){if(t)v([].concat(Ks(y),[e]));else{var n=y.filter((function(t){return t!==e}));v(n)}},handleSelectAllBusiness:function(e){if(e){var t,n=null===(t=p.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(Ks(e),[t.id])}),[]);v(n)}else v([])},handleUpdateBusinesses:j})))};function ic(){return ic=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ic.apply(this,arguments)}function uc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uc(Object(n),!0).forEach((function(t){cc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lc(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function fc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){lc(a,r,o,i,u,"next",e)}function u(e){lc(a,r,o,i,u,"throw",e)}i(void 0)}))}}function pc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ac.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ac.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var hc=function(e){var t=e.business,n=e.UIComponent,r=e.handleSuccessBusinessMenu,o=pc(rn(),1)[0],s=pc(hn(),1)[0].token,c=pc(Bn(),2)[1],l=pc(Br(),2)[1].showToast,f=pc(Object(i.useState)({menus:[],menusShared:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=pc(Object(i.useState)(!1),2),y=h[0],v=h[1],m=pc(Object(i.useState)({sites:[],loading:!0,error:null}),2),b=m[0],g=m[1],O=function(){var e=fc(a.a.mark((function e(){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(sc(sc({},p),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/business/").concat(t.id,"/menus"),n);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?d(sc(sc({},p),{},{loading:!1,error:i.result})):d(sc(sc({},p),{},{loading:!1,menus:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(sc(sc({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=fc(a.a.mark((function e(n,i){var u,f,h,v,m,b,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(sc(sc({},p),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({enabled:i})},f=y?"".concat(o.root,"/business/").concat(t.id,"/menus_shared/").concat(n):"".concat(o.root,"/business/").concat(t.id,"/menus/").concat(n),e.next=7,fetch(f,u);case 7:return h=e.sent,e.next=10,h.json();case 10:(v=e.sent).error?d(sc(sc({},p),{},{loading:!1,error:v.result})):(m={},y?(g=p.menusShared.filter((function(e){var t;e.id===n&&(e=sc(sc(sc({},e),v.result),{},{id:null===(t=e)||void 0===t?void 0:t.id}));return!0})),d(sc(sc({},p),{},{loading:!1,menusShared:g})),m=sc(sc({},t),{},{menus_shared:g})):(b=p.menus.filter((function(e){return e.id===n&&Object.assign(e,v.result),!0})),d(sc(sc({},p),{},{loading:!1,menus:b})),m=sc(sc({},t),{},{menus:b})),r&&r(m),l(Dr.Success,c("MENU_SAVED","Products catalog saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(sc(sc({},p),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=fc(a.a.mark((function e(n){var i,u,f,h,v,m,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(sc(sc({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},u=y?"".concat(o.root,"/business/").concat(t.id,"/menus_shared/").concat(n):"".concat(o.root,"/business/").concat(t.id,"/menus/").concat(n),e.next=7,fetch(u,i);case 7:return f=e.sent,e.next=10,f.json();case 10:(h=e.sent).error?d(sc(sc({},p),{},{loading:!1,error:h.result})):(v={},y?(b=p.menusShared.filter((function(e){return e.id!==n})),d(sc(sc({},p),{},{loading:!1,menusShared:b})),v=sc(sc({},t),{},{menus_shared:b})):(m=p.menus.filter((function(e){return e.id!==n})),d(sc(sc({},p),{},{loading:!1,menus:m})),v=sc(sc({},t),{},{menus:m})),r&&r(v),l(Dr.Success,c("MENU_DELETED","Products catalog deleted"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(sc(sc({},p),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=fc(a.a.mark((function e(){var n,r,i,u,c,l,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=4,fetch("".concat(o.root,"/business/").concat(t.id,"/menus?params=sites"),n);case 4:return r=e.sent,e.next=7,r.json();case 7:if(i=e.sent,u=i.result,i.error){e.next=29;break}return c={},u.forEach((function(e){c=sc(sc({},c),{},cc({},e.id,{id:e.id,sites:e.sites}))})),e.prev=13,e.next=16,fetch("".concat(o.root,"/sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s),"x-app-x":null==o?void 0:o.appId}});case 16:return l=e.sent,e.next=19,l.json();case 19:f=e.sent,h=f.result,g(sc(sc({},b),{},{loading:!1,sites:h})),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(13),d(sc(sc({},p),{},{loading:!1,error:[e.t0.message]}));case 27:e.next=30;break;case 29:d(sc(sc({},p),{},{loading:!1,error:u}));case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),d(sc(sc({},p),{},{loading:!1,error:[e.t1.message]}));case 35:case"end":return e.stop()}}),e,null,[[0,32],[13,24]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){null!=t&&t.menus?d(sc(sc({},p),{},{menus:null==t?void 0:t.menus,menusShared:null==t?void 0:t.menus_shared})):O()}),[t]),Object(i.useEffect)((function(){S()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,ic({},e,{businessMenusState:p,isSelectedSharedMenus:y,sitesState:b,handleChangeBusinessMenuActiveState:w,handleDeleteBusinessMenu:j,setIsSelectedSharedMenus:v})))};function yc(){return yc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yc.apply(this,arguments)}function vc(e){return function(e){if(Array.isArray(e))return Ec(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Sc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mc(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){mc(a,r,o,i,u,"next",e)}function u(e){mc(a,r,o,i,u,"throw",e)}i(void 0)}))}}function gc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gc(Object(n),!0).forEach((function(t){wc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Sc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sc(e,t){if(e){if("string"==typeof e)return Ec(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ec(e,t):void 0}}function Ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}hc.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Pc=function(e){var t,n=e.isSearchByName,r=e.isSearchByDescription,o=e.slug,s=e.categoryId,c=e.productId,l=e.isAllCategoryProducts,f=e.isInitialRender,p=e.ordering,d=e.UIComponent,h=jc(hn(),1)[0].token,y=jc(zn(),1)[0],v=jc(Object(i.useState)(null),2),m=v[0],b=v[1],g=jc(Object(i.useState)(null),2),O=g[0],w=g[1],j=jc(Object(i.useState)({business:{},menus:null,loading:!0,error:null}),2),S=j[0],E=j[1],P=jc(Object(i.useState)({}),2),C=P[0],I=P[1],x=jc(Object(i.useState)({}),2),A=x[0],T=x[1],_=jc(Object(i.useState)({product:null,loading:!1,error:null}),2),k=_[0],D=_[1],U=jc(Object(i.useState)({values:[]}),2),L=U[0],B=U[1],F=jc(Object(i.useState)(o),2),N=F[0],R=F[1],M=jc(Object(i.useState)(!1),2),z=M[0],G=M[1],Y=jc(Object(i.useState)({}),2),q=Y[0],$=Y[1],J=jc(Object(i.useState)({}),2),V=J[0],H=J[1],W=jc(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),K=W[0],X=W[1],Z=jc(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),Q=Z[0],ee=Z[1],te={loading:!0,pagination:{currentPage:0,pageSize:10,totalItems:null,totalPages:0,nextPageItems:10},products:[]},ne=jc(Object(i.useState)(te),2),re=ne[0],oe=ne[1],ae=jc(Object(i.useState)(null),2),ie=ae[0],ue=ae[1],se=jc(Object(i.useState)(!1),2),ce=se[0],le=se[1],fe=function(e,t){return!O||(e&&e.toLowerCase().includes(O.toLowerCase())&&n||t&&t.toLowerCase().includes(O.toLowerCase())&&r)},pe=function(){var e=bc(a.a.mark((function e(t,o,i){var u,s,c,l,f,d,h,y,v,b,g,w,j,E,P,x,_,k,D,U,L,B,F,N,R,M,G,Y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=S&&null!==(u=S.business)&&void 0!==u&&u.lazy_load_products_recommended){e.next=5;break}return s=Oc(Oc({},te),{},{loading:!1}),m?(vc(null==S||null===(c=S.business)||void 0===c?void 0:c.categories).forEach((function e(t){(null==t?void 0:t.id)===(null==m?void 0:m.id)&&(d=t),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),(h=null===(l=d)||void 0===l||null===(f=l.products)||void 0===f?void 0:f.filter((function(e){return fe(e.name,e.description)})))||(h=null==m||null===(y=m.products)||void 0===y?void 0:y.filter((function(e){return fe(e.name,e.description)}))),s.products=h||[]):(g=null==S||null===(v=S.business)||void 0===v||null===(b=v.categories)||void 0===b?void 0:b.reduce((function(e,t){return t.products?[].concat(vc(e),vc(t.products)):vc(e)}),[]).filter((function(e){return fe(e.name,e.description)})),s.products=g||[]),oe(Oc({},s)),e.abrupt("return");case 5:return w=O?"search":"featured"===(null==m?void 0:m.id)?"featured":null!=m&&m.id?"categoryId:".concat(null==m?void 0:m.id):"all",j=C[w]||te,E=j.pagination,z||oe(Oc(Oc({},j),{},{loading:!0})),P={page:o||(t?1:E.currentPage+1),page_size:i||E.pageSize},null,_=[],O&&(n&&_.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}),r&&_.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}})),x={conditions:_,conector:"OR"},e.prev=14,U=null!=m&&m.id&&"featured"!==(null==m?void 0:m.id)?p.businesses(null===(k=S.business)||void 0===k?void 0:k.id).categories(null==m?void 0:m.id).products():p.businesses(null===(D=S.business)||void 0===D?void 0:D.id).products(),L={},A.products=L,T(Oc({},A)),B=x.conditions.length>0?U.parameters(P).where(x):U.parameters(P),e.next=22,B.get({cancelToken:L});case 22:F=e.sent,N=F.content,R=N.error,M=N.result,G=N.pagination,R?ue(M):(Y={pagination:Oc(Oc({},j.pagination),{},{pageSize:0===G.page_size?j.pagination.pageSize:G.page_size,currentPage:G.current_page,totalItems:G.total,totalPages:G.total_pages}),loading:!1,products:t?vc(M):[].concat(vc(j.products),vc(M))},C[w]=Y,oe(Oc({},Y)),I(Oc({},C))),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(14),ue([e.t0.message]);case 33:case"end":return e.stop()}}),e,null,[[14,30]])})));return function(t,n,r){return e.apply(this,arguments)}}(),de=function(){var e=bc(a.a.mark((function e(){var t,n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s&&c&&null!==(t=S.business)&&void 0!==t&&t.id)){e.next=16;break}return e.prev=1,D(Oc(Oc({},k),{},{loading:!0})),r={},A.product=r,e.next=7,p.businesses(null===(n=S.business)||void 0===n?void 0:n.id).categories(s).products(c).get({cancelToken:r});case 7:o=e.sent,i=o.content.result,u=Array.isArray(i)?null:i,D(Oc(Oc({},k),{},{product:u,loading:!1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),D(Oc(Oc({},k),{},{loading:!1,error:[e.t0]}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=bc(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},X(Oc(Oc({},K),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/taxes"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(r=e.sent,o=r.error,i=r.result,o){e.next=14;break}return i.forEach((function(e){return t["id:".concat(null==e?void 0:e.id)]=e})),$(t),e.abrupt("return");case 14:X(Oc(Oc({},K),{},{result:{error:!0,result:t},loading:!1}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=bc(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},ee(Oc(Oc({},Q),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/fees"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(r=e.sent,o=r.error,i=r.result,o){e.next=14;break}return i.forEach((function(e){return t["id:".concat(null==e?void 0:e.id)]=e})),H(t),e.abrupt("return");case 14:ee(Oc(Oc({},Q),{},{result:{error:!0,result:t},loading:!1}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){f&&de()}),[JSON.stringify(null===(t=S.business)||void 0===t?void 0:t.id),f]),Object(i.useEffect)((function(){R(o)}),[o]);var ve=function(){var e=bc(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(Oc(Oc({},S),{},{loading:!0})),n={},A.business=n,T(Oc({},A)),e.next=7,p.businesses(N).asDashboard().get();case 7:r=e.sent,null!=(o=r.content.result)&&o.categories&&0!==(null==o||null===(t=o.categories)||void 0===t?void 0:t.length)||le(!0),E(Oc(Oc({},S),{},{business:o,loading:!1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),E(Oc(Oc({},S),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),me=function(e){var t,n=e.tax,r=e.isRemove,o=(e.id,vc(null==S||null===(t=S.business)||void 0===t?void 0:t.categories));E(Oc(Oc({},S),{},{business:Oc(Oc({},S.business),{},{categories:function e(t,n){for(var o=0;o<(null==t?void 0:t.length);o++){for(var a,i=t[o],u=0;u<i.products.length;u++){var s,c,l=i.products[u];r&&(null===(s=l.tax)||void 0===s?void 0:s.id)===(null==n?void 0:n.id)?(l.tax=null,l.tax_id=null):l.tax&&(null===(c=l.tax)||void 0===c?void 0:c.id)===(null==n?void 0:n.id)&&(Object.assign(l.tax,n),l.tax_id=null==n?void 0:n.id)}(null===(a=i.subcategories)||void 0===a?void 0:a.length)>0&&(t.subcategories=e(t.subcategories,n))}return t}(o,n)})}))},be=function(e){var t,n=e.fee,r=e.isRemove,o=vc(null==S||null===(t=S.business)||void 0===t?void 0:t.categories);E(Oc(Oc({},S),{},{business:Oc(Oc({},S.business),{},{categories:function e(t,n){for(var o=0;o<(null==t?void 0:t.length);o++){for(var a,i=t[o],u=0;u<i.products.length;u++){var s,c,l=i.products[u];r&&(null===(s=l.fee)||void 0===s?void 0:s.id)===(null==n?void 0:n.id)?(l.fee=null,l.fee_id=null):l.fee&&(null===(c=l.fee)||void 0===c?void 0:c.id)===(null==n?void 0:n.id)&&(Object.assign(l.fee,n),l.fee_id=null==n?void 0:n.id)}(null===(a=i.subcategories)||void 0===a?void 0:a.length)>0&&(t.subcategories=e(t.subcategories,n))}return t}(o,n)})}))};return Object(i.useEffect)((function(){var e;if(!S.loading)if(S.loading||!m&&!l){if(null!=S&&null!==(e=S.business)&&void 0!==e&&e.categories){var t;b(null==S||null===(t=S.business)||void 0===t?void 0:t.categories[0])}}else pe(!0)}),[S]),Object(i.useEffect)((function(){null!==O&&pe(!!O)}),[O]),Object(i.useEffect)((function(){pe(!!O,1)}),[null==m?void 0:m.id]),Object(i.useEffect)((function(){N?ve():(E(Oc(Oc({},S),{},{loading:!1,business:{}})),I({}),oe(Oc(Oc({},te),{},{loading:!1})),b(null))}),[N]),Object(i.useEffect)((function(){var e;if(null!=S&&S.business)return(null===(e=Object.keys(null==S?void 0:S.business))||void 0===e?void 0:e.length)>0?(y.on("tax_changed",me),y.on("fee_changed",be),y.on("tax_deleted",me),y.on("fee_deleted",be),function(){y.off("tax_changed",me),y.off("fee_changed",be),y.off("tax_deleted",be),y.off("fee_deleted",be)}):void 0}),[null==S?void 0:S.business]),Object(i.useEffect)((function(){var e=A.business;return function(){e&&e.cancel&&e.cancel()}}),[A.business]),Object(i.useEffect)((function(){var e=A.products;return function(){e&&e.cancel&&e.cancel()}}),[A.products]),Object(i.useEffect)((function(){he(),ye()}),[]),u.a.createElement(u.a.Fragment,null,d&&u.a.createElement(d,yc({},e,{errors:ie,categorySelected:m,searchValue:O,categoryState:re,businessState:S,productModal:k,errorQuantityProducts:ce,handleChangeCategory:function(e,t){var n,r,o;null===e&&null===t&&b(null),(null==e||null===(n=e.target)||void 0===n?void 0:n.closest)&&((null==e||null===(r=e.target)||void 0===r?void 0:r.closest(".business_enable_control"))||e.target.closest(".business_actions"))||(null==t?void 0:t.id)===(null==m?void 0:m.id)||(G(!1),null!=t&&null!==(o=t.subcategories)&&void 0!==o&&o.length&&(null!=t&&t.parent_category_id||(L.values=[]),L.values.includes(null==t?void 0:t.id)?L.values=L.values.filter((function(e){return e!==(null==t?void 0:t.id)})):L.values.push(null==t?void 0:t.id),B(Oc(Oc({},L),{},{values:L.values}))),null===(null==t?void 0:t.id)&&B(Oc(Oc({},L),{},{values:[]})),b(t))},handleChangeSearch:function(e){w(e)},getPageProducts:pe,setCategorySelected:b,setBusinessState:E,handleUpdateBusinessState:function(e){G(!0);var t=Oc({},null==S?void 0:S.business);Object.assign(t,e),m&&t.categories.forEach((function e(t){(null==t?void 0:t.id)===(null==m?void 0:m.id)&&b(t),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),E(Oc(Oc({},S),{},{business:t}))},updateProductModal:function(e){return D(Oc(Oc({},k),{},{product:e}))},openCategories:L.values,setOpenCategories:B,setBusinessSlug:R,handleUpdateCategoryState:function(e){oe(e)},setFormTaxState:X,formTaxState:K,taxes:q,setTaxes:$,fees:V,setFees:H})))};function Cc(){return Cc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cc.apply(this,arguments)}function Ic(e){return function(e){if(Array.isArray(e))return Lc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Uc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ac(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xc(Object(n),!0).forEach((function(t){Tc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _c(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function kc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_c(a,r,o,i,u,"next",e)}function u(e){_c(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Dc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Uc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uc(e,t){if(e){if("string"==typeof e)return Lc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lc(e,t):void 0}}function Lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Pc.propTypes={UIComponent:c.a.elementType,isSearchByName:c.a.bool,isSearchByDescription:c.a.bool,slug:c.a.string,isInitialRender:c.a.bool},Pc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Bc=function(e){var t=e.businessId,n=e.menuId,r=e.metafields,o=e.UIComponent,s=Dc(rn(),1)[0],c=Dc(hn(),1)[0],l=Dc(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=Dc(Object(i.useState)({loading:!1,result:{error:!1}}),2),h=d[0],y=d[1],v=function(){var e=kc(a.a.mark((function e(){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Ac(Ac({},f),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=5,fetch("".concat(s.root,"/business/").concat(t,"/menus/").concat(n,"/metafields"),r);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=i.result,p(Ac(Ac({},f),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),p(Ac(Ac({},f),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=kc(a.a.mark((function e(r){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Ac(Ac({},h),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=5,fetch("".concat(s.root,"/business/").concat(t,"/menus/").concat(n,"/metafields/").concat(r),o);case 5:e.sent.ok&&(i=f.metaFields.filter((function(e){return e.id!==r})),p(Ac(Ac({},f),{},{metaFields:i})),y({loading:!1,result:{error:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),y({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=kc(a.a.mark((function e(r){var o,i,u,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Ac(Ac({},h),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)},body:JSON.stringify(r)},e.next=5,fetch("".concat(s.root,"/business/").concat(t,"/menus/").concat(n,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,l=u.error,d=u.result,l?y({loading:!1,result:{error:!0,result:d}}):([],v=[].concat(Ic(f.metaFields),[d]),p(Ac(Ac({},f),{},{metaFields:v})),y({loading:!1,result:{error:!1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),y({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?p(Ac(Ac({},f),{},{metaFields:r})):v()}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Cc({},e,{metaFieldsList:f,actionState:h,handleDeleteMetaField:m,handeAddMetaField:b})))};function Fc(){return Fc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fc.apply(this,arguments)}function Nc(e){return function(e){if(Array.isArray(e))return Vc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Jc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rc(e){return Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(e)}function Mc(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Mc(a,r,o,i,u,"next",e)}function u(e){Mc(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Gc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gc(Object(n),!0).forEach((function(t){qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Jc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jc(e,t){if(e){if("string"==typeof e)return Vc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vc(e,t):void 0}}function Vc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Bc.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Bc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Hc=function(e){var t=e.business,n=e.menu,r=e.UIComponent,o=e.handleUpdateBusinessState,s=e.isSelectedSharedMenus,c=e.sitesState,l=$c(rn(),1)[0],f=$c(hn(),1)[0].token,p=$c(Bn(),2)[1],d=$c(Br(),2)[1].showToast,h=$c(Object(i.useState)({loading:!1,error:null,menu:n||{}}),2),y=h[0],v=h[1],m=$c(Object(i.useState)({loading:!1,changes:{},error:null}),2),b=m[0],g=m[1],O=$c(Object(i.useState)({}),2),w=O[0],j=O[1],S=$c(Object(i.useState)([]),2),E=S[0],P=S[1],C=$c(Object(i.useState)([]),2),I=C[0],x=C[1],A=$c(Object(i.useState)([]),2),T=A[0],_=A[1],k=function(){var e=zc(a.a.mark((function e(){var r,i,u,s,c,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Yc(Yc({},b),{},{loading:!0,result:{error:!1}})),r=Yc({},b.changes))("object"===Rc(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(r)},e.next=8,fetch("".concat(l.root,"/business/").concat(t.id,"/menus/").concat(null==n?void 0:n.id),u);case 8:return s=e.sent,e.next=11,s.json();case 11:c=e.sent,g(Yc(Yc({},b),{},{changes:c.error?b.changes:{},result:{error:c.error,result:c.result},loading:!1})),c.error||((h=Yc({},t)).menus.filter((function(e){e.id===c.result.id&&(Object.assign(e,c.result),void 0!==(null==r?void 0:r.products)&&(e.products=Nc(I)));return!0})),o&&o(h),d(Dr.Success,p("MENU_SAVED","Products catalog saved"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),g(Yc(Yc({},b),{},{loading:!1,result:{error:!0,result:e.t0.message}}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var n=zc(a.a.mark((function n(){var r,i,u,s,c,h,y,v,m,O;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Yc(Yc({},b),{},{loading:!0,result:{error:!1}})),null!=(r=Yc({},null==b?void 0:b.changes))&&r.products&&(r.products=JSON.stringify(null==r?void 0:r.products)),null!=r&&r.schedule)r.schedule=JSON.stringify(null==r?void 0:r.schedule);else{for(i=[],u=0;u<7;u++)i.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});r.schedule=JSON.stringify(i)}return s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(r)},n.next=9,fetch("".concat(l.root,"/business/").concat(t.id,"/menus"),s);case 9:return c=n.sent,n.next=12,c.json();case 12:h=n.sent,g(Yc(Yc({},b),{},{changes:h.error?b.changes:{},result:{error:h.error,result:h.result},loading:!1})),h.error||(y=Yc({},t),v=Yc(Yc({},h.result),{},{enabled:!0}),m=[],t.categories.forEach((function e(t){m=[].concat(Nc(m),Nc(t.products)),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),O=[],O=null!=r&&r.all_products?Nc(m):m.filter((function(e){return v.products.includes(e.id)})),v=Yc(Yc({},v),{},{products:O}),y.menus.push(v),o&&o(y),d(Dr.Success,p("MENU_ADDED","Products catalog added")),e.onClose()&&e.onClose()),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),g(Yc(Yc({},b),{},{loading:!1,result:{error:!0,result:n.t0.message}}));case 20:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(){return n.apply(this,arguments)}}(),U=function(){var r=zc(a.a.mark((function r(){var i,u,c,h,y,v,m;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Yc(Yc({},b),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},u=s?"".concat(l.root,"/business/").concat(t.id,"/menus_shared/").concat(n.id):"".concat(l.root,"/business/").concat(t.id,"/menus/").concat(n.id),r.next=7,fetch(u,i);case 7:return c=r.sent,r.next=10,c.json();case 10:(h=r.sent).error?g(Yc(Yc({},b),{},{loading:!1,error:h.result})):(g(Yc(Yc({},b),{},{loading:!1,error:null})),y=null,s?(v=t.menus_shared.filter((function(e){return e.id!==n.id})),y=Yc(Yc({},t),{},{menus_shared:v})):(m=t.menus.filter((function(e){return e.id!==n.id})),y=Yc(Yc({},t),{},{menus:m})),o&&o(y),d(Dr.Success,p("MENU_DELETED","Products catalog deleted")),e.onClose&&e.onClose()),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),g(Yc(Yc({},b),{},{loading:!1,error:r.t0}));case 17:case"end":return r.stop()}}),r,null,[[0,14]])})));return function(){return r.apply(this,arguments)}}();Object(i.useEffect)((function(){g(Yc(Yc({},b),{},{changes:Yc(Yc({},b.changes),{},{products:E})}))}),[E]),Object(i.useEffect)((function(){g(Yc(Yc({},b),{},{changes:{}})),v(Yc(Yc({},y),{},{menu:n||{}})),j({delivery:null==n?void 0:n.delivery,pickup:null==n?void 0:n.pickup,eatin:null==n?void 0:n.eatin,curbside:null==n?void 0:n.curbside,driver_thru:null==n?void 0:n.driver_thru});var e,t=[];Object.keys(n).length?(t=null===(e=n.products)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Nc(e),[t.id])}),[]),P(t),x(n.products)):(P([]),x([]),j({delivery:!0,pickup:!0,eatin:!1,curbside:!1,driver_thru:!1}),g(Yc(Yc({},b),{},{changes:{delivery:!0,pickup:!0}})));L(t)}),[n]);var L=function(e){if(null!=t&&t.categories.length){var n=[];_(n),function t(r){return(null==r?void 0:r.length)>0&&(null==r?void 0:r.forEach((function(r){var o,a,i=[],u=null===(o=r.products)||void 0===o?void 0:o.reduce((function(e,t){return[].concat(Nc(e),[t.id])}),[]);i=[].concat(Nc(i),Nc(u)),null!=r&&null!==(a=r.subcategories)&&void 0!==a&&a.length&&r.subcategories.forEach((function e(t){var n,r=null===(n=t.products)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(Nc(e),[t.id])}),[]);i=[].concat(Nc(i),Nc(r)),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),n.push({id:r.id,name:r.name,productIds:i,isChecked:0!==i.length&&i.every((function(t){return e.includes(t)}))}),t(r.subcategories)})))}(null==t?void 0:t.categories)}};return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Fc({},e,{businessMenuState:y,formState:b,selectedProductsIds:E,setSelectedProductsIds:P,selectedProducts:I,setSelectedProducts:x,handleChangeInput:function(e){var t=qc({},e.target.name,e.target.value);g(Yc(Yc({},b),{},{changes:Yc(Yc({},b.changes),t)}))},handleCheckOrderType:function(e){g(Yc(Yc({},b),{},{changes:Yc(Yc({},b.changes),{},qc({},e,!w[e]))})),j(Yc(Yc({},w),{},qc({},e,!w[e])))},handleUpdateBusinessMenuOption:k,handleAddBusinessMenuOption:D,handleChangeScheduleState:function(e){g(Yc(Yc({},b),{},{changes:Yc(Yc({},b.changes),{},{schedule:e})}))},handleDeleteMenu:U,handleChangeMenuSite:function(e){var t,r=[].concat(Nc(null==n||null===(t=n.sites)||void 0===t?void 0:t.map((function(e){return e.id})).filter((function(e){var t;return!b.changes.sites||(null===(t=b.changes.sites)||void 0===t?void 0:t.includes(e))}))),Nc(b.changes.sites||[])),o=r.includes(e);g(Yc(Yc({},b),{},{changes:Yc(Yc({},b.changes),{},{sites:o?r.filter((function(t){return t!==e})):[].concat(Nc(r),[e])})}))},handleSelectAllChannels:function(){g(Yc(Yc({},b),{},{changes:Yc(Yc({},b.changes),{},{sites:null==c?void 0:c.sites.map((function(e){return e.id}))})}))},handleSelectNoneChannels:function(){g(Yc(Yc({},b),{},{changes:Yc(Yc({},b.changes),{},{sites:[]})}))},subCategoriesList:T})))};function Wc(){return Wc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wc.apply(this,arguments)}function Kc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ol(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Xc(e){return function(e){if(Array.isArray(e))return al(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ol(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zc(Object(n),!0).forEach((function(t){el(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function el(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function nl(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){tl(a,r,o,i,u,"next",e)}function u(e){tl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function rl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ol(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ol(e,t){if(e){if("string"==typeof e)return al(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?al(e,t):void 0}}function al(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Hc.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Hc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var il=function(e){var t=e.UIComponent,n=e.business,r=e.menu,o=e.businesses,s=e.busienssesPropsToFetch,c=e.handleUpdateBusinessState,l=rl(rn(),1)[0],f=rl(hn(),1)[0].token,p=rl(Bn(),2)[1],d=rl(Br(),2)[1].showToast,h=rl(Object(i.useState)({businesses:[],loading:!1,error:null}),2),y=h[0],v=h[1],m=rl(Object(i.useState)({loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=rl(Object(i.useState)([]),2),w=O[0],j=O[1],S=function(){var e=nl(a.a.mark((function e(){var t,r,o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Qc(Qc({},y),{},{loading:!0})),t=l.setAccessToken(f).businesses().select(s).asDashboard(),e.next=5,t.get();case 5:r=e.sent,o=r.content,i=o.error,u=o.result,i||(c=u.filter((function(e){return e.id!==n.id})),v(Qc(Qc({},y),{},{businesses:c,loading:!1}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v(Qc(Qc({},y),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=nl(a.a.mark((function e(){var t,o,i,u,s,f,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Qc(Qc({},b),{},{loading:!0})),t={business_id:n.id,shared:w},e.next=6,l.businesses(n.id).menus(r.id).save(t);case 6:if(!e.sent.error){o=[],i=Kc(w);try{for(s=function(){var e,t=u.value;o.push({id:t,name:null===(e=y.businesses.find((function(e){return e.id===t})))||void 0===e?void 0:e.name,pivot:{business_id:t,menu_id:r.id}})},i.s();!(u=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}f=Qc(Qc({},r),{},{businesses:o}),h=n.menus.filter((function(e){return e.id===f.id&&Object.assign(e,f),!0})),v=Qc(Qc({},n),{},{menus:h}),c&&c(v),g({loading:!1,result:{error:!1}}),d(Dr.Success,p("BUSINESS_SAVED","Business saved"))}e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g({loading:!1,result:{error:!1}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?v(Qc(Qc({},y),{},{businesses:o,loading:!1})):S()}),[o]),Object(i.useEffect)((function(){if(null!=r&&r.businesses){var e,t=null===(e=r.businesses)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Xc(e),[t.id])}),[]);j(t)}}),[r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Wc({},e,{businessesState:y,actionState:b,selectedBusinessIds:w,handleSelectBusiness:function(e,t){if(t)j([].concat(Xc(w),[e]));else{var n=w.filter((function(t){return t!==e}));j(n)}},handleSelectAllBusiness:function(e){if(e){var t,n=null===(t=y.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(Xc(e),[t.id])}),[]);j(n)}else j([])},handleShareBusinesses:E})))};function ul(){return ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ul.apply(this,arguments)}function sl(e){return function(e){if(Array.isArray(e))return vl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cl(Object(n),!0).forEach((function(t){fl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function dl(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){pl(a,r,o,i,u,"next",e)}function u(e){pl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function hl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||yl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yl(e,t){if(e){if("string"==typeof e)return vl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vl(e,t):void 0}}function vl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}il.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},il.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var ml=function(e){var t=e.businessId,n=e.metafields,r=e.UIComponent,o=e.handleSuccessAddMetaFields,s=e.handleSuccessDeleteBusinessMetaFields,c=hl(rn(),1)[0],l=hl(hn(),1)[0],f=hl(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=hl(Object(i.useState)({loading:!1,result:{error:!1}}),2),y=h[0],v=h[1],m=function(){var e=dl(a.a.mark((function e(){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(ll(ll({},p),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},e.next=5,fetch("".concat(c.root,"/business/").concat(t,"/metafields"),n);case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,i=o.result,d(ll(ll({},p),{},{loading:!1,metaFields:i})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(ll(ll({},p),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=dl(a.a.mark((function e(n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(ll(ll({},y),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},e.next=5,fetch("".concat(c.root,"/business/").concat(t,"/metafields/").concat(n),r);case 5:e.sent.ok&&(o=p.metaFields.filter((function(e){return e.id!==n})),d(ll(ll({},p),{},{metaFields:o})),v({loading:!1,result:{error:!1}}),s&&s(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),v({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=dl(a.a.mark((function e(n){var r,i,u,s,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(ll(ll({},y),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)},body:JSON.stringify(n)},e.next=5,fetch("".concat(c.root,"/business/").concat(t,"/metafields"),r);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.error,f=u.result,s?v({loading:!1,result:{error:!0,result:f}}):([],h=[].concat(sl(p.metaFields),[f]),d(ll(ll({},p),{},{metaFields:h})),v({loading:!1,result:{error:!1}}),o&&o(f)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){n?d(ll(ll({},p),{},{metaFields:n})):m()}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,ul({},e,{metaFieldsList:p,actionState:y,handleDeleteMetaField:b,handeAddMetaField:g})))};function bl(){return bl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bl.apply(this,arguments)}function gl(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Il(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Ol(e){return function(e){if(Array.isArray(e))return xl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Il(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function jl(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){wl(a,r,o,i,u,"next",e)}function u(e){wl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function El(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sl(Object(n),!0).forEach((function(t){Pl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Il(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Il(e,t){if(e){if("string"==typeof e)return xl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xl(e,t):void 0}}function xl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ml.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ml.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Al=["paypal_express","authorize"],Tl=function(e){var t,n,r,o,s,c,l=e.business,f=e.UIComponent,p=e.defaultSandboxRequiredGateways,d=e.handleSuccessUpdate,h=Cl(rn(),1)[0],y=Cl(hn(),1)[0].token,v=Cl(tr(),1)[0],m=Cl(Br(),2)[1].showToast,b=Cl(Bn(),2)[1],g=Cl(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),O=g[0],w=g[1],j=Cl(Object(i.useState)({sites:[],loading:!0,error:null}),2),S=j[0],E=j[1],P=Cl(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),C=P[0],I=P[1],x=p||["paypal","stripe_direct","paypal_express","stripe_connect","stripe_redirect","carlos_payment","ivr"],A=Cl(Object(i.useState)({loading:!1,result:{error:!1}}),2),T=A[0],_=A[1],k=Cl(Object(i.useState)({}),2),D=k[0],U=k[1],L=Cl(Object(i.useState)({}),2),B=L[0],F=L[1],N=Cl(Object(i.useState)(!1),2),R=N[0],M=N[1],z="1"===(null==v||null===(t=v.configs)||void 0===t||null===(n=t.stripe_connect_sandbox)||void 0===n?void 0:n.value)?null==v||null===(r=v.configs)||void 0===r||null===(o=r.stripe_connect_client_id_sandbox)||void 0===o?void 0:o.value:null==v||null===(s=v.configs)||void 0===s||null===(c=s.stripe_connect_client_id)||void 0===c?void 0:c.value,G=function(){var e=jl(a.a.mark((function e(){var t,n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h.root,"/business/").concat(l.id,"/paymethods?params=sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId}});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,r=n.result,e.prev=8,e.next=11,fetch("".concat(h.root,"/sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId}});case 11:return o=e.sent,e.next=14,o.json();case 14:i=e.sent,u=i.result,E(El(El({},S),{},{loading:!1,sites:u})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),E(El(El({},S),{},{loading:!1,sites:e.t0.message}));case 22:w(El(El({},C),{},{loading:!1,paymethods:r})),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(0),w(El(El({},C),{},{loading:!1,error:e.t1.message}));case 28:case"end":return e.stop()}}),e,null,[[0,25],[8,19]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=jl(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h.root,"/paymethods?where=[{%22attribute%22:%22enabled%22,%22value%22:true}]"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r=n.result,I(El(El({},C),{},{loading:!1,paymethods:(o=r,o&&o.filter((function(e){return!Al.includes(null==e?void 0:e.gateway)})))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),I(El(El({},C),{},{loading:!1,error:e.t0.message}));case 14:case"end":return e.stop()}var o}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=jl(a.a.mark((function e(t){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.paymethods.find((function(e){return e.id===t})),r={enabled:!0,paymethod_id:t,sandbox:x.includes(n.gateway)},e.prev=2,m(Dr.Info,b("LOADING","Loading")),_(El(El({},T),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId},body:JSON.stringify(r)},e.next=8,fetch("".concat(h.root,"/business/").concat(l.id,"/paymethods"),o);case 8:return i=e.sent,e.next=11,i.json();case 11:(u=e.sent).error||(w((function(e){return El(El({},e),{},{paymethods:[].concat(Ol(e.paymethods),[El(El({},u.result),{},{paymethod:n})])})})),_({loading:!1,result:{error:!1}}),m(Dr.Success,b("PAYMETHOD_SAVED","Payment method saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),_({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=jl(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dr.Info,b("LOADING","Loading")),_(El(El({},T),{},{loading:!0})),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId},body:JSON.stringify(n)},e.next=6,fetch("".concat(h.root,"/business/").concat(l.id,"/paymethods/").concat(t),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,U(i.error?D:{}),i.error||(_(El(El({},T),{},{loading:!1})),w((function(e){return El(El({},e),{},{paymethods:e.paymethods.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0}))})})),m(Dr.Success,b("PAYMETHOD_SAVED","Payment method saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),_({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=jl(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dr.Info,b("LOADING","Loading")),_(El(El({},T),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId},body:JSON.stringify(D)},e.next=6,fetch("".concat(h.root,"/business/").concat(l.id),t);case 6:return n=e.sent,e.next=9,n.json();case 9:r=e.sent,U(r.error?D:{}),r.error||(_(El(El({},T),{},{loading:!1})),d&&d(r.result)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),_({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=jl(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.paymethods.find((function(e){return e.paymethod_id===t})).id,e.prev=1,m(Dr.Info,b("LOADING","Loading")),_(El(El({},T),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId}},e.next=7,fetch("".concat(h.root,"/business/").concat(l.id,"/paymethods/").concat(n),r);case 7:return o=e.sent,e.next=10,o.json();case 10:e.sent.error||(_(El(El({},T),{},{loading:!1})),i=O.paymethods.filter((function(e){return e.paymethod_id!==t})),w(El(El({},O),{},{paymethods:i})),m(Dr.Success,b("PAYMETHOD_DELETED","Payment method deleted")),M(!0)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),_({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){Y(),G()}),[]),u.a.createElement(u.a.Fragment,null,f&&u.a.createElement(f,bl({},e,{businessPaymethodsState:O,paymethodsList:C,handleClickPayment:function(e){var t=O.paymethods.find((function(t){return t.paymethod_id===e}));t?$(t.id,{enabled:!t.enabled}):q(e)},actionState:T,sitesState:S,handleDeleteBusinessPaymethodOption:V,changesState:D,handleChangeBusinessPaymentState:function(e){U(El(El({},D),e))},stripeConnectData:B,handleChangeStripeConnectData:function(e){F(El(El({},B),e))},cleanChangesState:function(e){return U(El({},e))},handleChangeSandbox:function(){U(El(El({},D),{},{sandbox:!(null!=D&&D.sandbox)}))},handleChangeInput:function(e,t){U(El(El({},D),{},t?{data_sandbox:El(El({},null==D?void 0:D.data_sandbox),{},Pl({},e.target.name,e.target.value))}:{data:El(El({},null==D?void 0:D.data),{},Pl({},e.target.name,e.target.value))}))},handleSaveClick:function(e){var t,n,r,o,a=El({},D);null!==(t=a)&&void 0!==t&&t.data&&(a=El(El({},a),{},{data:JSON.stringify(a.data)})),null!==(n=a)&&void 0!==n&&n.data_sandbox&&(a=El(El({},a),{},{data_sandbox:JSON.stringify(a.data_sandbox)})),null!==(r=a)&&void 0!==r&&r.allowed_order_types&&(a=El(El({},a),{},{allowed_order_types:a.allowed_order_types.length>0?JSON.stringify(a.allowed_order_types):null})),null!==(o=a)&&void 0!==o&&o.sites&&(a=El(El({},a),{},{sites:JSON.stringify(a.sites)})),$(e,a),J()},handleStripeConnect:function(){var e=window.open("https://connect.stripe.com/oauth/authorize?response_type=code&client_id=".concat(z,"&scope=read_write&state=").concat(y),"_blank","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,clearcache=yes"),t=setInterval((function(){e.closed?clearInterval(t):e.postMessage("data",h.url)}),200),n=null;window.addEventListener("message",(function(r){-1!==r.origin.indexOf(".ordering.co")&&(clearInterval(t),n&&clearTimeout(n),n=setTimeout((function(){if(e.postMessage("close",h.url),!r.data.error&&r.data.result){var t=r.data.result,n={sandbox:t.livemode,data:{token:t.access_token,publishable:t.stripe_publishable_key,user:t.stripe_user_id,refresh_token:t.refresh_token}};F(n)}else r.data.error&&_(El(El({},T),{},{loading:!1,error:r.data.error}))}),1e3))}))},handleChangeStripeInput:function(e){U(El(El({},D),{},Pl({},e.target.name,e.target.value)))},handleStripeSave:function(e){var t,n,r={sandbox:null==B?void 0:B.sandbox,data:JSON.stringify(null==B?void 0:B.data),data_sandbox:JSON.stringify(null==B?void 0:B.data)};null!==(t=r)&&void 0!==t&&t.allowed_order_types&&(r=El(El({},r),{},{allowed_order_types:r.allowed_order_types.length>0?JSON.stringify(r.allowed_order_types):null})),null!==(n=r)&&void 0!==n&&n.sites&&(r=El(El({},r),{},{sites:JSON.stringify(r.sites)})),Object.keys(B).length&&$(e,r),J()},isSuccessDeleted:R,setIsSuccessDeleted:M,handleSelectAllPaymethods:function(){var e,t=gl(C.paymethods);try{var n=function(){var t=e.value,n=O.paymethods.find((function(e){return e.paymethod_id===t.id}));n?null!=n&&n.enabled||$(n.id,{enabled:!0}):q(t.id)};for(t.s();!(e=t.n()).done;)n()}catch(e){t.e(e)}finally{t.f()}},handleSelectNonePaymethods:function(){var e,t=gl(O.paymethods);try{for(t.s();!(e=t.n()).done;){var n=e.value;null!=n&&n.enabled&&$(n.id,{enabled:!1})}}catch(e){t.e(e)}finally{t.f()}},handleSuccessPaymethodUpdate:function(e){w(El(El({},O),{},{paymethods:e}))}})))};function _l(){return _l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_l.apply(this,arguments)}function kl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Dl(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){kl(a,r,o,i,u,"next",e)}function u(e){kl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ul(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ul(Object(n),!0).forEach((function(t){Bl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ul(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Tl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Tl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Rl=function(e){var t=e.UIComponent,n=e.place,r=e.placeGroup,o=e.businessId,s=e.handleSuccessAddPlace,c=e.handleSuccessUpdatePlace,l=e.handleSuccessDeletePlace,f=e.handleUpdateSelectedPlace,p=Fl(Bn(),2)[1],d=Fl(rn(),1)[0],h=Fl(hn(),1)[0].token,y=Fl(Br(),2)[1].showToast,v=Fl(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var t=Dl(a.a.mark((function t(){var n,i,u,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,p("LOADING","Loading")),b(Ll(Ll({},m),{},{loading:!0,error:null})),n=Ll(Ll({},null==m?void 0:m.changes),{},{place_group_id:null==r?void 0:r.id}),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(n)},t.next=7,fetch("".concat(d.root,"/business/").concat(o,"/places"),i);case 7:return u=t.sent,t.next=10,u.json();case 10:(c=t.sent).error?b(Ll(Ll({},m),{},{loading:!1,error:c.result})):(b(Ll(Ll({},m),{},{loading:!1,error:null})),s&&s(Ll(Ll({},c.result),{},{enabled:!0})),y(Dr.Success,p("OPTION_ADDED","Option added")),e.onClose&&e.onClose()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),b(Ll(Ll({},m),{},{loading:!1,error:t.t0.message}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var e=Dl(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,p("LOADING","Loading")),b(Ll(Ll({},m),{},{loading:!0,error:null})),t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=6,fetch("".concat(d.root,"/business/").concat(o,"/places/").concat(null==n?void 0:n.id),t);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?b(Ll(Ll({},m),{},{loading:!1,error:i.result})):(b(Ll(Ll({},m),{},{loading:!1,error:null,changes:{}})),f&&f(i.result),c&&c(i.result),y(Dr.Success,p("OPTION_SAVED","Option saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Ll(Ll({},m),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var t=Dl(a.a.mark((function t(){var r,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,p("LOADING","Loading")),b(Ll(Ll({},m),{},{loading:!0,error:null})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},t.next=6,fetch("".concat(d.root,"/business/").concat(o,"/places/").concat(null==n?void 0:n.id),r);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?b(Ll(Ll({},m),{},{loading:!1,error:u.result})):(l&&l(null==n?void 0:n.id),y(Dr.Success,p("OPTION_DELETED","Option deleted")),b(Ll(Ll({},m),{},{loading:!1,error:null})),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(Ll(Ll({},m),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){b(Ll(Ll({},m),{},{changes:{}}))}),[null==n?void 0:n.id]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_l({},e,{formState:m,handleChangeInput:function(e){var t=Ll(Ll({},null==m?void 0:m.changes),{},Bl({},e.target.name,e.target.value));b(Ll(Ll({},m),{},{changes:t}))},handleAddPlace:g,handleUpdatePlace:O,handleDeletePlace:w})))};function Ml(){return Ml=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ml.apply(this,arguments)}function zl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Gl(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){zl(a,r,o,i,u,"next",e)}function u(e){zl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ql(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yl(Object(n),!0).forEach((function(t){$l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jl(e){return function(e){if(Array.isArray(e))return Wl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Hl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hl(e,t){if(e){if("string"==typeof e)return Wl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wl(e,t):void 0}}function Wl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Rl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Rl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Kl=function(e){var t=e.UIComponent,n=e.business,r=Vl(Bn(),2)[1],o=Vl(rn(),1)[0],s=Vl(hn(),1)[0].token,c=Vl(Br(),2)[1].showToast,l=Vl(Object(i.useState)({loading:!1,placeGroups:[],error:null}),2),f=l[0],p=l[1],d=Vl(Object(i.useState)({loading:!1,error:null}),2),h=d[0],y=d[1],v=function(){var e=Gl(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null==f||null===(n=f.placeGroups)||void 0===n?void 0:n.map((function(e){return(null==t?void 0:t.id)===(null==e?void 0:e.id)?ql(ql({},e),t):e})),p(ql(ql({},f),{},{placeGroups:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Gl(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(ql(ql({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/place_groups"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?p(ql(ql({},f),{},{loading:!1,error:i.result})):p(ql(ql({},f),{},{loading:!1,placeGroups:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(ql(ql({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Gl(a.a.mark((function e(t,i,u){var l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,r("LOADING","Loading")),y(ql(ql({},h),{},{loading:!0})),l={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(i)},e.next=6,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/place_groups/").concat(t),l);case 6:return f=e.sent,e.next=9,f.json();case 9:(p=e.sent).error?y(ql(ql({},h),{},{loading:!1,error:p.result})):(y(ql(ql({},h),{},{loading:!1,error:null})),!u&&v(p.result),c(Dr.Success,r("PLACE_UPDATED","Place updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(ql(ql({},h),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=!0;return f.placeGroups.forEach((function(t){t.enabled||(e=!1)})),e},O=function(){var e=Gl(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=g(),f.placeGroups.forEach((function(e){n.push(new Promise((function(t,n){t(b(e.id,{enabled:!r},!0))})))})),e.next=5,Promise.all(n);case 5:o=null==f||null===(t=f.placeGroups)||void 0===t?void 0:t.map((function(e){return ql(ql({},e),{},{enabled:!r})})),p(ql(ql({},f),{},{placeGroups:o}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){n&&m()}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ml({},e,{placeGroupList:f,handleSuccessAddPlaceGroup:function(e){var t=[].concat(Jl(f.placeGroups),[e]);p(ql(ql({},f),{},{placeGroups:t}))},handleSuccessUpdatePlaceGroup:v,handleSuccessDeletePlaceGroup:function(e){var t,n=null==f||null===(t=f.placeGroups)||void 0===t?void 0:t.filter((function(t){return t.id!==e}));p(ql(ql({},f),{},{placeGroups:n}))},handleChangeEnabled:b,handleMultiChangeEnabled:O,getMultiCheckStatus:g})))};function Xl(){return Xl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xl.apply(this,arguments)}function Zl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ql(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Zl(a,r,o,i,u,"next",e)}function u(e){Zl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ef(e){return function(e){if(Array.isArray(e))return uf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||af(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tf(Object(n),!0).forEach((function(t){rf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function of(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||af(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function af(e,t){if(e){if("string"==typeof e)return uf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uf(e,t):void 0}}function uf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Kl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Kl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var sf=function(e){var t=e.UIComponent,n=e.placeGroup,r=e.businessId,o=e.handleSuccessAddPlaceGroup,s=e.handleSuccessUpdatePlaceGroup,c=e.handleSuccessDeletePlaceGroup,l=e.handleUpdateSelectedPlaceGroup,f=of(Bn(),2)[1],p=of(rn(),1)[0],d=of(hn(),1)[0].token,h=of(Br(),2)[1].showToast,y=of(Object(i.useState)({loading:!1,places:[],error:null}),2),v=y[0],m=y[1],b=of(Object(i.useState)({loading:!1,changes:{},error:null}),2),g=b[0],O=b[1],w=of(Object(i.useState)({loading:!1,error:null}),2),j=w[0],S=w[1],E=function(){var e=Ql(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null==v||null===(n=v.places)||void 0===n?void 0:n.map((function(e){return(null==t?void 0:t.id)===(null==e?void 0:e.id)?nf(nf({},e),t):e})),m(nf(nf({},v),{},{places:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=!0;return v.places.forEach((function(t){t.enabled||(e=!1)})),e},C=function(){var t=Ql(a.a.mark((function t(){var n,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,f("LOADING","Loading")),O(nf(nf({},g),{},{loading:!0,error:null})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(null==g?void 0:g.changes)},t.next=6,fetch("".concat(p.root,"/business/").concat(r,"/place_groups"),n);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?O(nf(nf({},g),{},{loading:!1,error:u.result})):(O(nf(nf({},g),{},{loading:!1,error:null})),o&&o(nf(nf({},u.result),{},{enabled:!0})),h(Dr.Success,f("PLACE_ADDED","Place added")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),O(nf(nf({},g),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),I=function(){var e=Ql(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,f("LOADING","Loading")),O(nf(nf({},g),{},{loading:!0,error:null})),t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(null==g?void 0:g.changes)},e.next=6,fetch("".concat(p.root,"/business/").concat(r,"/place_groups/").concat(null==n?void 0:n.id),t);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?O(nf(nf({},g),{},{loading:!1,error:i.result})):(O(nf(nf({},g),{},{loading:!1,error:null,changes:{}})),l&&l(i.result),s&&s(i.result),h(Dr.Success,f("PLACE_SAVED","Place saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O(nf(nf({},g),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var t=Ql(a.a.mark((function t(){var o,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,f("LOADING","Loading")),O(nf(nf({},g),{},{loading:!0,error:null})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},t.next=6,fetch("".concat(p.root,"/business/").concat(r,"/place_groups/").concat(null==n?void 0:n.id),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?O(nf(nf({},g),{},{loading:!1,error:u.result})):(c&&c(null==n?void 0:n.id),h(Dr.Success,f("PLACE_DELETED","Place deleted")),O(nf(nf({},g),{},{loading:!1,error:null})),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),O(nf(nf({},g),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var e=Ql(a.a.mark((function e(){var t,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(nf(nf({},v),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},e.next=5,fetch("".concat(p.root,"/business/").concat(r,"/places"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=null==i?void 0:i.result.filter((function(e){return e.place_group_id===(null==n?void 0:n.id)})),i.error?m(nf(nf({},v),{},{loading:!1,error:i.result})):m(nf(nf({},v),{},{loading:!1,places:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(nf(nf({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Ql(a.a.mark((function e(t,n,o){var i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,f("LOADING","Loading")),S(nf(nf({},j),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(n)},e.next=6,fetch("".concat(p.root,"/business/").concat(r,"/places/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error?S(nf(nf({},j),{},{loading:!1,error:s.result})):(S(nf(nf({},j),{},{loading:!1,error:null})),!o&&E(s.result),h(Dr.Success,f("OPTION_UPDATED","Option updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),S(nf(nf({},j),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),_=function(){var e=Ql(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=P(),v.places.forEach((function(e){n.push(new Promise((function(t,n){t(T(e.id,{enabled:!r},!0))})))})),e.next=5,Promise.all(n);case 5:o=null==v||null===(t=v.places)||void 0===t?void 0:t.map((function(e){return nf(nf({},e),{},{enabled:!r})})),m(nf(nf({},v),{},{places:o}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){O(nf(nf({},g),{},{changes:{}})),n&&A()}),[null==n?void 0:n.id]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Xl({},e,{formState:g,placeList:v,handleChangeInput:function(e){var t=nf(nf({},null==g?void 0:g.changes),{},rf({},e.target.name,e.target.value));O(nf(nf({},g),{},{changes:t}))},handleAddPlaceGroup:C,handleUpdatePlaceGroup:I,handleDeletePlaceGroup:x,handleSuccessAddPlace:function(e){var t=[].concat(ef(v.places),[e]);m(nf(nf({},v),{},{places:t}))},handleSuccessUpdatePlace:E,handleSuccessDeletePlace:function(e){var t,n=null==v||null===(t=v.places)||void 0===t?void 0:t.filter((function(t){return t.id!==e}));m(nf(nf({},v),{},{places:n}))},handleChangePlaceEnabled:T,getMultiPlaceCheckStatus:P,handleMultiPlaceChangeEnabled:_})))};function cf(){return cf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cf.apply(this,arguments)}function lf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ff(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lf(Object(n),!0).forEach((function(t){pf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function df(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function hf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}sf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var vf=function(e){var t=e.business,n=e.UIComponent,r=e.handleUpdateBusinessState,o=hf(rn(),1)[0],s=hf(hn(),1)[0],c=hf(Br(),2)[1].showToast,l=hf(Bn(),2)[1],f=hf(Object(i.useState)({loading:!1,changes:{},error:null}),2),p=f[0],d=f[1],h=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(ff(ff({},p),{},{loading:!0})),c(Dr.Info,l("LOADING","Loading")),e.next=5,o.businesses(t.id).save(p.changes,{accessToken:s.token});case 5:n=e.sent,i=n.content,u=i.error,f=i.result,u?d(ff(ff({},p),{},{loading:!1,error:u})):(d(ff(ff({},p),{},{loading:!1,changes:{},error:null})),r(f),c(Dr.Success,l("BUSINESS_UPDATED","Business updated"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(ff(ff({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){df(a,r,o,i,u,"next",e)}function u(e){df(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,cf({},e,{formState:p,handleChangeForm:function(e){d(ff(ff({},p),{},{changes:ff(ff({},p.changes),e)}))},handlePickupStateSave:h})))};function mf(){return mf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mf.apply(this,arguments)}function bf(e){return bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(e)}function gf(e){return function(e){if(Array.isArray(e))return If(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Of(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function wf(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Of(a,r,o,i,u,"next",e)}function u(e){Of(a,r,o,i,u,"throw",e)}i(void 0)}))}}function jf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jf(Object(n),!0).forEach((function(t){Ef(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ef(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Cf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cf(e,t){if(e){if("string"==typeof e)return If(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?If(e,t):void 0}}function If(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xf=function(e){var t=e.UIComponent,n=e.businessState,r=e.handleUpdateBusinessState,o=e.category,s=e.categoryId,c=e.onClose,l=e.categorySelected,f=e.setCategorySelected,p=Pf(hn(),1)[0].loading,d=Pf(rn(),1)[0],h=Pf(Bn(),2)[1],y=Pf(Br(),2)[1].showToast,v=Pf(Object(i.useState)({loading:!1,changes:{enabled:!0,enabledParent:!1},result:{error:!1}}),2),m=v[0],b=v[1],g=Pf(Object(i.useState)([]),2),O=g[0],w=g[1];Object(i.useEffect)((function(){b(Sf(Sf({},m),{},{changes:o||{}}))}),[o]);var j=function(){var e=wf(a.a.mark((function e(t){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=gf(n.business.categories)).forEach((function e(n,r,o){var a,i;(null==n?void 0:n.id)===(null==t?void 0:t.result.parent_category_id)&&(Array.isArray(null==n?void 0:n.subcategories)&&(n.subcategories.find((function(e){var n;return(null==e?void 0:e.id)===(null==t||null===(n=t.result)||void 0===n?void 0:n.id)}))||n.subcategories.push(null==t?void 0:t.result)));var u=["name","enabled","header","description","ribbon","image","slug","seo_image","seo_title","seo_description"];(null==n?void 0:n.id)===(null==t||null===(a=t.result)||void 0===a?void 0:a.id)&&n.parent_category_id===(null==t?void 0:t.result.parent_category_id)&&Object.keys(n).forEach((function(e){u.includes(e)&&void 0!==t.result[e]&&(n[e]=null==t?void 0:t.result[e])})),(null==n?void 0:n.id)===(null==t||null===(i=t.result)||void 0===i?void 0:i.id)&&n.parent_category_id!==(null==t?void 0:t.result.parent_category_id)&&o.splice(r,1),Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),o=Sf(Sf({},n.business),{},{categories:r}),e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=wf(a.a.mark((function e(){var t,i,u,c,l,v,g,O,w,S,P,C,I,x,A,T,_,k;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=47;break}if(t=(null==o?void 0:o.id)||s,!p){e.next=4;break}return e.abrupt("return");case 4:for(c in e.prev=4,y(Dr.Info,h("LOADING","Loading")),b(Sf(Sf({},m),{},{loading:!0})),u=Sf({},m.changes))null===u[c]&&delete u[c];return e.next=11,d.businesses(null==n||null===(i=n.business)||void 0===i?void 0:i.id).categories(parseInt(t)).save(u);case 11:if(l=e.sent,(v=l.content).error){e.next=39;break}if(void 0===(null===(g=m.changes)||void 0===g||null===(O=g.ribbon)||void 0===O?void 0:O.enabled)||null!==(w=m.changes)&&void 0!==w&&null!==(S=w.ribbon)&&void 0!==S&&S.enabled||null==v||null===(P=v.result)||void 0===P||null===(C=P.ribbon)||void 0===C||!C.enabled){e.next=29;break}return x={ribbon:{enabled:!1}},e.next=18,d.businesses(null==n||null===(I=n.business)||void 0===I?void 0:I.id).categories(parseInt(t)).save(x);case 18:if(A=e.sent,T=A.content,b(Sf(Sf({},m),{},{changes:T.result,result:{error:!1,result:T.result},loading:!1})),f(T.result),!r){e.next=27;break}return e.next=25,j(T);case 25:_=e.sent,r(_);case 27:e.next=36;break;case 29:if(b(Sf(Sf({},m),{},{changes:v.result,result:{error:!1,result:v.result},loading:!1})),f(v.result),!r){e.next=36;break}return e.next=34,j(v);case 34:k=e.sent,r(k);case 36:y(Dr.Success,h("CATEOGORY_UPDATED","Category updated")),e.next=40;break;case 39:b(Sf(Sf({},m),{},{changes:m.changes,result:v,loading:!1}));case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(4),b(Sf(Sf({},m),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 45:e.next=48;break;case 47:E();case 48:case"end":return e.stop()}}),e,null,[[4,42]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=wf(a.a.mark((function e(){var t,o,i,u,s,l,f,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dr.Info,h("LOADING","Loading")),b(Sf(Sf({},m),{},{loading:!0})),void 0===(null==(i=Sf({},null==m?void 0:m.changes))?void 0:i.ribbon)||null!=i&&null!==(t=i.ribbon)&&void 0!==t&&t.enabled||delete i.ribbon,e.next=9,d.businesses(parseInt(null==n||null===(o=n.business)||void 0===o?void 0:o.id)).categories().save(i);case 9:u=e.sent,(s=u.content).error?b(Sf(Sf({},m),{},{changes:m.changes,result:s,loading:!1})):((f=Sf({},s.result)).parent_category_id=(null===(l=s.result)||void 0===l?void 0:l.parent_category_id)||null,b(Sf(Sf({},m),{},{category:{},result:{error:!1,result:f},loading:!1})),r&&(g=(null===(v=n.business)||void 0===v?void 0:v.categories)||[],null!=s&&s.result.parent_category_id?g.forEach((function e(t){(null==t?void 0:t.id)===(null==s?void 0:s.result.parent_category_id)&&t.subcategories.push(Sf(Sf({},f),{},{products:[],subcategories:[]})),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})):g.push(Sf(Sf({},f),{},{products:[],subcategories:[]})),r(Sf(Sf({},n.business),{},{categories:g}))),y(Dr.Success,h("CATEOGORY_CREATED","Category created")),c&&c()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),b(Sf(Sf({},m),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var t=wf(a.a.mark((function t(){var i,u,s,c,v,g;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,y(Dr.Info,h("LOADING","Loading")),b(Sf(Sf({},m),{},{loading:!0})),t.next=7,d.businesses(parseInt(null===(i=n.business)||void 0===i?void 0:i.id)).categories(parseInt(null==o?void 0:o.id)).delete();case 7:u=t.sent,s=u.content,c=s.error,v=s.result,c?b(Sf(Sf({},m),{},{loading:!1,result:{error:!0,result:v}})):(b(Sf(Sf({},m),{},{loading:!1,result:{error:!1,result:v}})),r&&((g=gf(n.business.categories)).forEach((function e(t,n,r){(null==t?void 0:t.id)===(null==o?void 0:o.id)&&r.splice(n,1),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),r(Sf(Sf({},n.business),{},{categories:g})),(null==o?void 0:o.id)===(null==l?void 0:l.id)&&f(g[0])),y(Dr.Success,h("CATEOGORY_DELETED","Category deleted")),e.onClose&&e.onClose(null==o?void 0:o.id)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),b(Sf(Sf({},m),{},{loading:!1,result:{error:!0,result:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(!n.loading&&l){var e=function e(t,n){var r,o={id:null==t?void 0:t.id,name:t.name};if(t&&"object"===bf(t))return(null==t?void 0:t.id)===n?[]:(((null==t?void 0:t.subcategories)||[]).some((function(t){return r=e(t,n)})),r&&[o].concat(gf(r)))};n.business.categories.forEach((function(t){var n=e(t,null==l?void 0:l.id);n&&w(n)}))}}),[null==n?void 0:n.loading,l]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,mf({},e,{isAddMode:!o,formState:m,setFormState:b,parentCategories:O,handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){b(Sf(Sf({},m),{},{changes:Sf(Sf({},m.changes),{},Ef({},t,n.result))}))},n.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){var t=Ef({},e.target.name,e.target.value);b(Sf(Sf({},m),{},{changes:Sf(Sf({},m.changes),t)}))},handleChangeCheckBox:function(e){var t=null;void 0!==e.enabled&&(t={enabled:e.enabled}),t=e.enabledParent?Sf(Sf({},t),{},{parent_category_id:null==l?void 0:l.id}):Sf(Sf({},t),{},{parent_category_id:null}),b(Sf(Sf({},m),{},{changes:Sf(Sf({},m.changes),t)}))},handleChangeItem:function(e){b(Sf(Sf({},m),{},{changes:Sf(Sf({},m.changes),e)}))},handleUpdateClick:S,handleDeleteCategory:P,handleChangeRibbon:function(e){var t,n,r=null!=m&&null!==(t=m.changes)&&void 0!==t&&t.ribbon?Sf(Sf({},null==m||null===(n=m.changes)||void 0===n?void 0:n.ribbon),e):Sf({},e),o=Sf(Sf({},null==m?void 0:m.changes),{},{ribbon:r});b(Sf(Sf({},m),{},{changes:o}))}})))};function Af(){return Af=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Af.apply(this,arguments)}xf.propTypes={UIComponent:c.a.elementType,businessState:c.a.object,handleUpdateBusinessState:c.a.func,setIsAddProduct:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Tf=function(e){var t=e.categories,n=e.onClickCategory,r=e.UIComponent;return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Af({},e,{categories:t,handlerClickCategory:n})))};function _f(){return _f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_f.apply(this,arguments)}Tf.propTypes={UIComponent:c.a.elementType,categories:c.a.arrayOf(c.a.object),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Tf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var kf=function(e){var t=e.onChangeSearch,n=e.UIComponent;return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,_f({},e,{handleChangeSearch:t})))};function Df(){return Df=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Df.apply(this,arguments)}function Uf(e){return function(e){if(Array.isArray(e))return Gf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lf(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Bf(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Lf(a,r,o,i,u,"next",e)}function u(e){Lf(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ff(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ff(Object(n),!0).forEach((function(t){Rf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ff(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||zf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zf(e,t){if(e){if("string"==typeof e)return Gf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gf(e,t):void 0}}function Gf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}kf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},kf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Yf=function(e){var t,n=e.promotion,r=e.UIComponent,o=e.business,s=e.handleCloseAddForm,c=e.handleSuccessUpdate,l=Mf(Bn(),2)[1],f=Mf(rn(),1)[0],p=Mf(hn(),1)[0].token,d=Mf(Br(),2)[1].showToast,h=Mf(tr(),1)[0].configs,y=null==h||null===(t=h.advanced_offers_module)||void 0===t?void 0:t.value,v=Mf(Object(i.useState)({promotion:n,loading:!1,error:null}),2),m=v[0],b=v[1],g=Mf(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),O=g[0],w=g[1],j=Mf(Object(i.useState)(!1),2),S=j[0],E=j[1],P=function(){var e=Bf(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,l("LOADING","Loading")),w(Nf(Nf({},O),{},{result:{},loading:!0})),t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(null==O?void 0:O.changes)},e.next=6,fetch("".concat(f.root,"/business/").concat(o.id,"/offers/").concat(n.id),t);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?w(Nf(Nf({},O),{},{result:{error:!0,result:i.result},loading:!1})):(b(Nf(Nf({},m),{},{promotion:i.result})),w(Nf(Nf({},O),{},{loading:!1,changes:{}})),d(Dr.Success,l("PROMOTION_SAVED","Promotion saved")),c&&(u=o.offers.filter((function(e){return e.id===n.id&&Object.assign(e,i.result),!0})),c(Nf(Nf({},o),{},{offers:u})))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Nf(Nf({},O),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Bf(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,l("LOADING","Loading")),w(Nf(Nf({},O),{},{result:{},loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(null==O?void 0:O.changes)},e.next=6,fetch("".concat(f.root,"/business/").concat(o.id,"/offers"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:(r=e.sent).error?w(Nf(Nf({},O),{},{result:{error:!0,result:r.result},loading:!1})):(d(Dr.Success,l("PROMOTION_ADDED","Promotion added")),s&&s(),c&&c(Nf(Nf({},o),{},{offers:[].concat(Uf(o.offers),[r.result])}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Nf(Nf({},O),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0===Object.keys(n).length?(E(!0),w(Nf(Nf({},O),{},y?{changes:{type:2,rate_type:2,rate:0,auto:!1,public:!0,condition_type:1,target:1,stackable:!1}}:{changes:{type:2,rate_type:2,rate:0}}))):(w(Nf(Nf({},O),{},{changes:{}})),E(!1)),b(Nf(Nf({},m),{},{promotion:n}))}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Df({},e,{promotionState:m,formState:O,isAddMode:S,handleChangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){w(Nf(Nf({},O),{},{changes:Nf(Nf({},O.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){var t,n,r;"coupon"!==e.target.name||2!==(null==O||null===(t=O.changes)||void 0===t?void 0:t.type)&&(null!=O&&null!==(n=O.changes)&&void 0!==n&&n.type||2!==(null==m||null===(r=m.promotion)||void 0===r?void 0:r.type))?w(Nf(Nf({},O),{},{changes:Nf(Nf({},O.changes),{},Rf({},e.target.name,e.target.value))})):w(Nf(Nf({},O),{},{changes:Nf(Nf({},O.changes),{},{coupon:e.target.value.replace(/\s/g,"")})}))},handleChangeItem:function(e){w(Nf(Nf({},O),{},{changes:Nf(Nf({},O.changes),e)}))},handleUpdateClick:P,handleAddClick:C})))};function qf(){return qf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qf.apply(this,arguments)}function $f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$f(Object(n),!0).forEach((function(t){Vf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hf(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Wf(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Hf(a,r,o,i,u,"next",e)}function u(e){Hf(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Kf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Yf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Zf=function(e){var t=e.business,n=e.businessId,r=e.promotions,o=e.UIComponent,s=e.handleSuccessUpdate,c=Kf(Bn(),2)[1],l=Kf(rn(),1)[0],f=Kf(hn(),1)[0].token,p=Kf(Br(),2)[1].showToast,d=Kf(Object(i.useState)({promotions:[],loading:!1,error:null}),2),h=d[0],y=d[1],v=Kf(Object(i.useState)({loading:!1,error:null}),2),m=v[0],b=v[1],g=Kf(Object(i.useState)(!1),2),O=g[0],w=g[1],j=function(){var e=Wf(a.a.mark((function e(){var t,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Jf(Jf({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(l.root,"/business/").concat(n,"/offers"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(o=e.sent).error||y({promotions:o.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),y(Jf(Jf({},h),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Wf(a.a.mark((function e(r,o){var i,u,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,c("LOADING","Loading")),b(Jf(Jf({},m),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({enabled:r})},e.next=6,fetch("".concat(l.root,"/business/").concat(n,"/offers/").concat(o),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(d=e.sent).error||(v=h.promotions.filter((function(e){return e.id===o&&Object.assign(e,d.result),!0})),y(Jf(Jf({},h),{},{promotions:v})),p(Dr.Success,c("PROMOTION_SAVED","Promotion saved")),s&&s(Jf(Jf({},t),{},{offers:v}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Wf(a.a.mark((function e(r){var o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,c("LOADING","Loading")),b(Jf(Jf({},m),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(n,"/offers/").concat(r),o);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(u=h.promotions.filter((function(e){return e.id!==r})),y(Jf(Jf({},h),{},{promotions:u})),s&&s(Jf(Jf({},t),{},{offers:u})),p(Dr.Success,c("PROMOTION_DELETED","Promotion deleted")),w(!0)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?y(Jf(Jf({},h),{},{loading:!1,promotions:r})):j()}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,qf({},e,{promotionListState:h,handleChangePromotionActiveState:S,handleDeletePromotion:E,isSuccessDeleted:O,setIsSuccessDeleted:w})))};function Qf(){return Qf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qf.apply(this,arguments)}function ep(e){return function(e){if(Array.isArray(e))return sp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||up(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function np(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tp(Object(n),!0).forEach((function(t){rp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function op(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ap(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){op(a,r,o,i,u,"next",e)}function u(e){op(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ip(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||up(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function up(e,t){if(e){if("string"==typeof e)return sp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sp(e,t):void 0}}function sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Zf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cp=function(e){var t=e.businessId,n=e.offerId,r=e.metafields,o=e.UIComponent,s=e.handleSuccessAddPromotionMetaFields,c=e.handleSuccessDeletePromotionMetaFields,l=ip(rn(),1)[0],f=ip(hn(),1)[0],p=ip(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),d=p[0],h=p[1],y=ip(Object(i.useState)({loading:!1,result:{error:!1}}),2),v=y[0],m=y[1],b=function(){var e=ap(a.a.mark((function e(){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(np(np({},d),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/offers/").concat(n,"/metafields"),r);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=i.result,h(np(np({},d),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(np(np({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=ap(a.a.mark((function e(r){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(np(np({},v),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/offers/").concat(n,"/metafields/").concat(r),o);case 5:e.sent.ok&&(i=d.metaFields.filter((function(e){return e.id!==r})),h(np(np({},d),{},{metaFields:i})),m({loading:!1,result:{error:!1}}),c&&c(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=ap(a.a.mark((function e(r){var o,i,u,c,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(np(np({},v),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(r)},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/offers/").concat(n,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,c=u.error,p=u.result,c?m({loading:!1,result:{error:!0,result:p}}):([],y=[].concat(ep(d.metaFields),[p]),h(np(np({},d),{},{metaFields:y})),m({loading:!1,result:{error:!1}}),s&&s(p)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),m({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?h(np(np({},d),{},{metaFields:r})):b()}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Qf({},e,{metaFieldsList:d,actionState:v,handleDeleteMetaField:g,handeAddMetaField:O})))};function lp(){return lp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lp.apply(this,arguments)}function fp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pp(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){fp(a,r,o,i,u,"next",e)}function u(e){fp(a,r,o,i,u,"throw",e)}i(void 0)}))}}function dp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dp(Object(n),!0).forEach((function(t){yp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cp.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bp=function(e){var t=e.businessId,n=e.reviews,r=e.UIComponent,o=vp(rn(),1)[0],s=vp(hn(),1)[0].token,c=vp(Br(),2)[1].showToast,l=vp(Bn(),2)[1],f={},p=vp(Object(i.useState)({reviews:[],loading:!0,error:null}),2),d=p[0],h=p[1],y=vp(Object(i.useState)(n),2),v=y[0],m=y[1],b=vp(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(){var e=pp(a.a.mark((function e(){var n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={},f.reviews=r,e.next=5,o.businesses(t).select(["reviews"]).get({cancelToken:r});case 5:i=e.sent,u=i.content.result,(s=null==u||null===(n=u.reviews)||void 0===n?void 0:n.reviews).sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),m(s),h(hp(hp({},d),{},{loading:!1,reviews:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&h(hp(hp({},d),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=pp(a.a.mark((function e(n,r){var i,u,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),O(hp(hp({},g),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({enabled:r})},e.next=6,fetch("".concat(o.root,"/business/").concat(t,"/reviews/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(f=e.sent).error||(p=d.reviews.filter((function(e){return e.id===n&&Object.assign(e,f.result),!0})),h(hp(hp({},d),{},{reviews:p})),c(Dr.Success,l("REVIEW_UPDATED","Review updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return n?(n.length&&n.sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),h(hp(hp({},d),{},{loading:!1,reviews:n}))):w(),function(){f.reviews&&f.reviews.cancel()}}),[t]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,lp({},e,{reviewsList:d,actionState:g,handleClickOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="all"!==e?v.filter((function(t){return t.total>=e&&t.total<e+1})):v;h(hp(hp({},d),{},{loading:!1,reviews:t}))},handleChangeReviewEnabled:j})))};function gp(){return gp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gp.apply(this,arguments)}function Op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Op(Object(n),!0).forEach((function(t){jp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Op(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ep(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Sp(a,r,o,i,u,"next",e)}function u(e){Sp(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Pp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bp.propTypes={UIComponent:c.a.elementType,reviews:c.a.arrayOf(c.a.object),businessId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bp.defaultProps={reviews:[],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ip=function(e){var t=e.UIComponent,n=e.propsToFetch,r=Pp(rn(),1)[0],o=Pp(hn(),1)[0].token,s=Pp(Br(),2)[1].showToast,c=Pp(Bn(),2)[1],l=Pp(Object(i.useState)({reviews:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=Pp(Object(i.useState)({loading:!1,error:null}),2),h=d[0],y=d[1],v=function(){var e=Ep(a.a.mark((function e(){var t,i,u,s,c,l,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(wp(wp({},f),{},{loading:!0})),e.next=4,r.setAccessToken(o).businesses().select(n).asDashboard().get();case 4:if(t=e.sent,i=t.content,u=i.error,s=i.result,!u){for(c=[],l=0;l<s.length;l++)for(d=0;d<s[l].reviews.reviews.length;d++)s[l].reviews.reviews[d].business_id=s[l].id,s[l].reviews.reviews[d].business_name=s[l].name,s[l].reviews.reviews[d].business_logo=s[l].logo,s[l].reviews.reviews[d].city_name=null===(h=s[l].city)||void 0===h?void 0:h.name,c.push(s[l].reviews.reviews[d]);c.length>0&&c.sort((function(e,t){return t.id-e.id})),p(wp(wp({},f),{},{loading:!1,reviews:c}))}e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p(wp(wp({},f),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Ep(a.a.mark((function e(t,n,i){var u,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),y(wp(wp({},h),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(i)},e.next=6,fetch("".concat(r.root,"/business/").concat(t,"/reviews/").concat(n),u);case 6:return l=e.sent,e.next=9,l.json();case 9:(d=e.sent).error||(v=f.reviews.filter((function(e){return e.id===n&&Object.assign(e,d.result),!0})),p(wp(wp({},f),{},{reviews:v})),s(Dr.Success,c("REVIEW_UPDATED","Review updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(){var e=Ep(a.a.mark((function e(t,n){var i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),y(wp(wp({},h),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/business/").concat(t,"/reviews/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:e.sent.error||(l=f.reviews.filter((function(e){return e.id!==n})),p(wp(wp({},f),{},{reviews:l})),s(Dr.Success,c("REVIEW_REMOVED","Review removed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){v()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,gp({},e,{reviewsListState:f,actionState:h,handleUpdateReview:m,handleDeleteReview:b})))};function xp(){return xp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xp.apply(this,arguments)}function Ap(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ap(Object(n),!0).forEach((function(t){_p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ap(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Dp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Up(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Up(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Up(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ip.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ip.defaultProps={propsToFetch:["reviews","name","logo","city"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Lp=function(e){var t=e.business,n=e.UIComponent,r=e.handleSuccessUpdate,o=Dp(rn(),1)[0],s=Dp(hn(),1)[0],c=Dp(Br(),2)[1].showToast,l=Dp(Bn(),2)[1],f=Dp(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),p=f[0],d=f[1],h=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),d(Tp(Tp({},p),{},{loading:!0})),null!=(n=Tp({},p.changes))&&n.schedule&&(n.schedule=JSON.stringify(null==n?void 0:n.schedule)),e.next=7,o.businesses(t.id).save(n,{accessToken:s.token});case 7:i=e.sent,u=i.content,f=u.error,h=u.result,f?d({changes:p.changes,result:{error:!1,result:h},loading:!1}):(d({loading:!1,changes:{},result:{error:!1}}),r&&r(h),c(Dr.Success,l("SCHEDULE_UPDATED","Schedule updated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(Tp(Tp({},p),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){kp(a,r,o,i,u,"next",e)}function u(e){kp(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,xp({},e,{formState:p,handleChangeScheduleState:function(e){d(Tp(Tp({},p),{},{changes:{schedule:e}}))},handleUpdateSchedule:h})))};function Bp(){return Bp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bp.apply(this,arguments)}function Fp(e){return function(e){if(Array.isArray(e))return $p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Np(Object(n),!0).forEach((function(t){Mp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Np(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Gp(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){zp(a,r,o,i,u,"next",e)}function u(e){zp(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Yp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||qp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qp(e,t){if(e){if("string"==typeof e)return $p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$p(e,t):void 0}}function $p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Lp.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Lp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Jp=function(e){var t=e.menu,n=e.product,r=e.UIComponent,o=e.business,s=e.handleUpdateBusinessState,c=Yp(rn(),1)[0],l=Yp(hn(),1)[0].token,f=Yp(Bn(),2)[1],p=Yp(Br(),2)[1].showToast,d=Yp(Object(i.useState)({loading:!1,error:null,product:n||{}}),2),h=d[0],y=d[1],v=Yp(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=Yp(Object(i.useState)(null),2),O=g[0],w=g[1],j=function(){var e=Gp(a.a.mark((function e(r){var i,u,d,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,f("LOADING","Loading")),b((function(e){return Rp(Rp({},e),{},{loading:!1})})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(r)},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/products/").concat(n.id),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(d=e.sent).error?b(Rp(Rp({},m),{},{loading:!1,error:d.resulut})):(y(Rp(Rp({},h),{},{product:Rp(Rp({},h.product),r)})),v=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n.id?Object.assign(e,r):e}));return e.products=Fp(t),!0})),g=Rp(Rp({},o),{},{menus_shared:v}),s&&s(g),p(Dr.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Rp(Rp({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Gp(a.a.mark((function e(r,i){var u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,f("LOADING","Loading")),b(Rp(Rp({},m),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:i})},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/extras/").concat(r),u);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(Rp(Rp({},m),{},{loading:!1,error:v.resulut})):(g=h.product.extras.filter((function(e){return e.id===r&&(e.enabled=i),!0})),O=Rp(Rp({},h.product),{},{extras:g}),y(Rp(Rp({},h),{},{product:Rp(Rp({},h.product),O)})),w=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n.id?Object.assign(e,O):e}));return e.products=Fp(t),!0})),j=Rp(Rp({},o),{},{menus_shared:w}),s&&s(j),p(Dr.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Rp(Rp({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Gp(a.a.mark((function e(r,i){var u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,f("LOADING","Loading")),b(Rp(Rp({},m),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:i})},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/options/").concat(r),u);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(Rp(Rp({},m),{},{loading:!1,error:v.resulut})):(g=h.product.extras.filter((function(e){var t=e.options.map((function(e){return e.id===r?Rp(Rp({},e),{},{enabled:i}):e}));return e.options=Fp(t),!0})),O=Rp(Rp({},h.product),{},{extras:g}),y(Rp(Rp({},h),{},{product:Rp(Rp({},h.product),O)})),w=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n.id?Object.assign(e,O):e}));return e.products=Fp(t),!0})),j=Rp(Rp({},o),{},{menus_shared:w}),s&&s(j),p(Dr.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Rp(Rp({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Gp(a.a.mark((function e(r,i){var u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,f("LOADING","Loading")),b((function(e){return Rp(Rp({},e),{},{loading:!1})})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:i})},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/suboptions/").concat(r),u);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(Rp(Rp({},m),{},{loading:!1,error:v.resulut})):(g=h.product.extras.filter((function(e){var t=e.options.filter((function(e){var t=e.suboptions.map((function(e){return e.id===r?Rp(Rp({},e),{},{enabled:i}):e}));return e.suboptions=Fp(t),!0}));return e.options=Fp(t),!0})),O=Rp(Rp({},h.product),{},{extras:g}),y(Rp(Rp({},h),{},{product:Rp(Rp({},h.product),O)})),w=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n.id?Object.assign(e,O):e}));return e.products=Fp(t),!0})),j=Rp(Rp({},o),{},{menus_shared:w}),s&&s(j),p(Dr.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Rp(Rp({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){b(Rp(Rp({},m),{},{changes:{},error:null})),y(Rp(Rp({},h),{},{product:n||{}}))}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Bp({},e,{productState:h,formState:m,handleUpdateBusinessSharedMenuProduct:j,handleChangeInput:function(e){e.persist(),b((function(t){return Rp(Rp({},t),{},{changes:Rp(Rp({},m.changes),{},Mp({},e.target.name,e.target.value))})})),clearTimeout(O),w(setTimeout((function(){j(Mp({},e.target.name,e.target.value))}),750))},handleChangeItem:function(e){b((function(t){return Rp(Rp({},t),{},{changes:Rp(Rp({},m.changes),e)})})),j(e)},handleUpdateExtra:S,handleUpdateOption:E,handleUpdateSuboption:P})))};function Vp(){return Vp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vp.apply(this,arguments)}function Hp(e){return function(e){if(Array.isArray(e))return td(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ed(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wp(Object(n),!0).forEach((function(t){Xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Qp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ed(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ed(e,t){if(e){if("string"==typeof e)return td(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?td(e,t):void 0}}function td(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Jp.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Jp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nd=function(e){var t=e.menu,n=e.UIComponent,r=e.business,o=e.handleUpdateBusinessState,s=Qp(rn(),1)[0],c=Qp(hn(),1)[0].token,l=Qp(Bn(),2)[1],f=Qp(Br(),2)[1].showToast,p=Qp(Object(i.useState)({loading:!1,error:null,menu:t||{}}),2),d=p[0],h=p[1],y=Qp(Object(i.useState)({loading:!1,error:null}),2),v=y[0],m=y[1],b=function(){var e,n=(e=a.a.mark((function e(n,i){var u,p,d,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,l("LOADING","Loading")),m(Kp(Kp({},v),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(i)},e.next=6,fetch("".concat(s.root,"/business/").concat(r.id,"/menus_shared/").concat(t.id,"/products/").concat(n),u);case 6:return p=e.sent,e.next=9,p.json();case 9:(d=e.sent).error?m({loading:!1,error:d.resulut}):(h=r.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n?Kp(Kp({},e),i):e}));return e.products=Hp(t),!0})),y=Kp(Kp({},r),{},{menus_shared:h}),o&&o(y),f(Dr.Success,l("PRODUCT_SAVED","Product saved")),m({loading:!1,error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Zp(a,r,o,i,u,"next",e)}function u(e){Zp(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){h(Kp(Kp({},d),{},{menu:t||{}}))}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Vp({},e,{menuState:d,actionState:v,handleUpdateBusinessSharedMenuProduct:b})))};function rd(){return rd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rd.apply(this,arguments)}function od(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ad(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ad(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ad(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nd.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var id=function(e){var t=e.orderType,n=e.sortOptions,r=e.defaultSortOption,o=e.onChangeSortOption,a=e.UIComponent,s=od(Object(i.useState)(r),2),c=s[0],l=s[1],f=od(Object(i.useState)(n),2),p=f[0],d=f[1];return Object(i.useEffect)((function(){var e="delivery_time"===t?"Pickup time":"Delivery time";d(n.filter((function(t){return t!==e})))}),[t]),u.a.createElement(u.a.Fragment,null,a&&u.a.createElement(a,rd({},e,{orderType:t,sortOptions:p,currentOptionSelected:c,onChangeSortOption:function(e){l(e),o&&o(e)}})))};function ud(){return ud=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ud.apply(this,arguments)}function sd(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cd(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sd(a,r,o,i,u,"next",e)}function u(e){sd(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ld(Object(n),!0).forEach((function(t){pd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=yd(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function hd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||yd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yd(e,t){if(e){if("string"==typeof e)return vd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vd(e,t):void 0}}function vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}id.propTypes={UIComponent:c.a.elementType,sortOptions:c.a.arrayOf(c.a.string),defaultSortOption:c.a.string,orderType:c.a.number,onChangeSortOption:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},id.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var md=function(e){var t=e.UIComponent,n=e.categoryState,r=e.business,o=e.handleUpdateBusinessState,s=e.categoryId,c=e.categorySelected,l=hd(Bn(),2)[1],f=hd(rn(),1)[0],p=hd(Br(),2)[1].showToast,d=hd(hn(),1)[0],h=d.token,y=d.loading,v=hd(Pr(),1)[0].parsePrice,m=hd(Object(i.useState)({products:null,loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=hd(Object(i.useState)(!1),2),w=O[0],j=O[1],S=hd(Object(i.useState)(!1),2),E=S[0],P=S[1],C=hd(Object(i.useState)({row:-1,col:-1}),2),I=C[0],x=C[1],A="".concat(r.tax,"% ").concat(1===r.tax_type?l("INCLUDED_ON_PRICE","Included on price"):l("NOT_INCLUDED_ON_PRICE","Not included on price")),T="".concat(v(0)," + ").concat(r.service_fee,"%"),_=function(){var e=cd(a.a.mark((function e(t,n,r){var o,i,u,s,c,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Dr.Info,l("LOADING","Loading")),g(fd(fd({},b),{},{loading:!0})),o={method:n?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify({products:JSON.stringify(t)})},i="".concat(f.root,"/bulks/products"),e.next=9,fetch(i,o);case 9:return u=e.sent,e.next=12,u.json();case 12:s=e.sent,c=s.error,d=s.result,c?g(fd(fd({},b),{},{loading:!1,result:{error:!0,result:d}})):(g(fd(fd({},b),{},{loading:!1,result:{error:!1,result:n?l("PRODUCT_CREATED","Product created"):l("PRODUCT_UPDATE","Product updated")}})),p(Dr.Success,n?l("PRODUCT_CREATED","Product created"):l("PRODUCT_UPDATE","Product updated")),k()),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),g(fd(fd({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,n,r){return e.apply(this,arguments)}}(),k=function(){var e=cd(a.a.mark((function e(){var t,n,i,u,p,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=s||c.id,n={business_id:null==r?void 0:r.id,category_id:parseInt(t)},e.next=7,f.businesses(null==r?void 0:r.id).categories(parseInt(t)).products().parameters(n).get();case 7:i=e.sent,u=i.content,p=u.error,d=u.result,p?g(fd(fd({},b),{},{loading:!1,result:{error:!0,result:d}})):(o&&(h=null==r?void 0:r.categories.map((function(e){return parseInt(e.id)===parseInt(t)?fd(fd({},e),{},{products:d}):e})),o(fd(fd({},r),{},{categories:h}))),g(fd(fd({},b),{},{products:d.map((function(e){var t,n,o,a;return fd(fd({},e),{},{taxShow:null!=e&&e.tax?"".concat(null===(t=e.tax)||void 0===t?void 0:t.rate,"% ").concat(1===(null===(n=r.tax)||void 0===n?void 0:n.type)?l("INCLUDED_ON_PRICE","Included on price"):l("NOT_INCLUDED_ON_PRICE","Not included on price")):A,feeShow:null!=e&&e.fee?"".concat(v(null===(o=e.fee)||void 0===o?void 0:o.fixed)," + ").concat(null===(a=e.fee)||void 0===a?void 0:a.percentage,"%"):T})})),loading:!1,result:{error:!1,result:l("PRODUCT_SAVED","Product saved")}}))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),g(fd(fd({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=cd(a.a.mark((function e(t){var n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Dr.Info,l("LOADING","Loading")),g(fd(fd({},b),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify({products:JSON.stringify(t)})},r="".concat(f.root,"/bulks/products"),e.next=9,fetch(r,n);case 9:return o=e.sent,e.next=12,o.json();case 12:i=e.sent,u=i.error,s=i.result,u?g(fd(fd({},b),{},{loading:!1,result:{error:!0,result:s}})):(g(fd(fd({},b),{},{loading:!1,result:{error:!1,result:l("PRODUCT_DELETED","Product deleted")}})),p(Dr.Success,l("PRODUCT_DELETED","Product deleted")),k()),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),g(fd(fd({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t=[],o=dd(n.products);try{for(o.s();!(e=o.n()).done;){var a,i,u,s,c=e.value,f=null!=c&&c.tax?"".concat(null===(a=c.tax)||void 0===a?void 0:a.rate,"% ").concat(1===(null===(i=r.tax)||void 0===i?void 0:i.type)?l("INCLUDED_ON_PRICE","Included on price"):l("NOT_INCLUDED_ON_PRICE","Not included on price")):A,p=c.fee?"".concat(v(null===(u=c.fee)||void 0===u?void 0:u.fixed)," + ").concat(null===(s=c.fee)||void 0===s?void 0:s.percentage,"%"):T,d=fd(fd({},c),{},{taxShow:f,feeShow:p});t.push(d)}}catch(e){o.e(e)}finally{o.f()}g(fd(fd({},b),{},{products:t}))}),[null==n?void 0:n.products]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ud({},e,{handleItemChange:function(e,t,n){if(E)P(!1);else if("loadData"!==t){e=e||[];var o=[],a=[],i=[],u=[],f=s||(null==c?void 0:c.id);e.forEach((function(e){var t={name:!1,price:!1};if(e[2]!==e[3]){for(var s=!0,c=0;c<o.length;c++)if(o[c]===e[0]){s=!1;break}if(s){o.push(e[0]);var p=n.getSourceDataAtRow(e[0]);if(n.validateRows(o,(function(e){})),!p.name&&(p.price||p.quantity||p.description)&&(t.name=!0,g(fd(fd({},b),{},{result:{error:!0,result:[l("NAME_REQUIRED","Name Required")]}}))),p.price&&"number"!=typeof p.price){var d=parseFloat(p.price);d?p.price=d:(t.price=!0,g(fd(fd({},b),{},{result:{error:!0,result:[l("PRODUCT_PRICE_NUMBER")]}})))}if(p.quantity&&"number"!=typeof p.quantity&&"NA"!==p.quantity){var h=parseFloat(p.quantity);h?p.quantity=h:t.quantity=!0}if(p.id)if(p.name||p.price||p.description){if(!(t.price||t.name||t.quantity)){p.description||(p.description=null);var y={id:p.id,name:p.name,description:p.description?p.description:"",price:p.price?p.price:0,inventoried:(null==p?void 0:p.inventoried)||!1,category_id:f,business_id:null==r?void 0:r.id};void 0!==(null==p?void 0:p.offer_price)&&(y.offer_price=p.offer_price),void 0!==(null==p?void 0:p.cost_price)&&(y.cost_price=p.cost_price),(p.quantity&&"NA"!==p.quantity||0===p.quantity)&&(y.quantity=p.quantity),i.push(y)}}else p.row=e[0],a.push(p);else if(!(t.price||t.name||t.quantity)){var v={name:p.name,description:p.description?p.description:"",price:p.price?p.price:0,cost_price:(null==p?void 0:p.cost_price)||0,category_id:f,business_id:null==r?void 0:r.id};(p.quantity&&"NA"!==p.quantity||0===p.quantity)&&(v.quantity=p.quantity,v.inventoried=!0),u.push(v)}}}})),u.length>0&&_(u,!0,n),i.length>0&&_(i,!1,n),a.length>0&&(n.alter("remove_row",a[0].row,a.length),j(!0))}},spreadSheetState:b,handleRowRemove:function(e,t,n,r){if(r){var o,a=[],i=dd(n);try{for(i.s();!(o=i.n()).done;){var u=o.value;a.push(null==r?void 0:r.getSourceDataAtRow(u).id)}}catch(e){i.e(e)}finally{i.f()}w&&j(!1),setTimeout((function(){D(a)}),1)}},handleAfterSectionEnd:function(e,t,n,r,o){I.row===e&&I.col===t||e!==n||t!==r||(I.row=e,I.col=t,x({row:e,col:t}),o.deselectCell(),o.selectCell(e,t))},handleoutsideClickDeselects:function(){return x({row:-1,col:-1}),!1}})))};function bd(){return bd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bd.apply(this,arguments)}function gd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Od(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gd(Object(n),!0).forEach((function(t){wd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jd(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Sd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ed(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ed(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}md.propTypes={UIComponent:c.a.elementType,businessState:c.a.object,setBusinessState:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},md.defaultProps={};var Pd=function(e){var t=e.businessTypes,n=e.onChangeBusinessType,r=e.defaultBusinessType,o=e.UIComponent,s=Sd(rn(),1)[0],c=Sd(Object(i.useState)(r),2),l=c[0],f=c[1],p=Sd(Object(i.useState)({loading:!0,error:null,types:[],pagination:null}),2),d=p[0],h=p[1],y=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s.root,'/business_types?where=[{"attribute":"enabled","value":true}]'),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,r=n.error,o=n.result,i=n.pagination,r){e.next=14;break}return o.length>0&&o.unshift({id:null,enabled:!0,image:null,name:"All"}),h(Od(Od({},d),{},{loading:!1,types:o,pagination:i})),e.abrupt("return");case 14:h(Od(Od({},d),{},{loading:!1,error:o})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),h(Od(Od({},d),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jd(a,r,o,i,u,"next",e)}function u(e){jd(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){t?h(Od(Od({},d),{},{loading:!1,types:t})):y()}),[t]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,bd({},e,{typesState:d,businessTypes:t,currentTypeSelected:l,handleChangeBusinessType:function(e){f(e),n(e)}})))};function Cd(){return Cd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cd.apply(this,arguments)}function Id(e){return function(e){if(Array.isArray(e))return Ld(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ud(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xd(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ad(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){xd(a,r,o,i,u,"next",e)}function u(e){xd(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Td(Object(n),!0).forEach((function(t){kd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ud(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ud(e,t){if(e){if("string"==typeof e)return Ld(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ld(e,t):void 0}}function Ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Pd.propTypes={UIComponent:c.a.elementType,businessTypes:c.a.arrayOf(c.a.object),defaultBusinessType:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Pd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Bd=function(e){var t,n=e.UIComponent,r=e.setBusinessTypes,o=e.businessTypes,s=Dd(rn(),1)[0],c=Dd(hn(),1)[0].token,l=Dd(Br(),2)[1].showToast,f=Dd(Bn(),2)[1],p=Dd(Object(i.useState)({businessType:null!==(t=e.businessType)&&void 0!==t?t:null}),2),d=p[0],h=p[1],y=Dd(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=y[0],m=y[1],b=function(){var e=Ad(a.a.mark((function e(){var t,n,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),m(_d(_d({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(v.changes)},e.next=6,fetch("".concat(s.root,"/business_types/").concat(null==d||null===(t=d.businessType)||void 0===t?void 0:t.id),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?m(_d(_d({},v),{},{loading:!1,error:u.result})):(h({businessType:_d(_d({},d.businessType),u.result)}),m({loading:!1,changes:{},error:null}),r&&(p=o.map((function(e){var t;return e.id===(null==u||null===(t=u.result)||void 0===t?void 0:t.id)?_d(_d({},e),null==u?void 0:u.result):e})),r(p)),l(Dr.Success,f("CATEGORY_UPDATED","Category updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(_d(_d({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var t=Ad(a.a.mark((function t(){var n,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dr.Info,f("LOADING","Loading")),m(_d(_d({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(v.changes)},t.next=6,fetch("".concat(s.root,"/business_types"),n);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?m(_d(_d({},v),{},{loading:!1,error:u.result})):(m({loading:!1,changes:{},error:null}),r&&r([].concat(Id(o),[u.result])),l(Dr.Success,f("CATEGORY_ADDED","Category added")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(_d(_d({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Ad(a.a.mark((function t(){var n,i,u,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dr.Info,f("LOADING","Loading")),m(_d(_d({},v),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(s.root,"/business_types/").concat(d.businessType.id),n);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?m(_d(_d({},v),{},{loading:!1,error:u.result})):(m({loading:!1,changes:{},error:null}),r&&(p=o.filter((function(e){return e.id!==d.businessType.id})),r(p)),l(Dr.Success,f("CATEGORY_DELETED","Category deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(_d(_d({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var t;m({loading:!1,changes:{},error:null}),h({businessType:null!==(t=e.businessType)&&void 0!==t?t:null})}),[null==e?void 0:e.businessType]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Cd({},e,{businessTypeState:d,typeFormState:v,handleChangeInput:function(e){m(_d(_d({},v),{},{changes:_d(_d({},v.changes),{},kd({},e.target.name,e.target.value))}))},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){m(_d(_d({},v),{},{changes:_d(_d({},v.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleUpdateProductType:b,handleAddProductType:g,handleDeleteProductType:O,handleChangeItem:function(e,t){var n=_d(_d({},null==v?void 0:v.changes),{},kd({},e,t));m(_d(_d({},v),{},{changes:n}))}})))};function Fd(){return Fd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fd.apply(this,arguments)}function Nd(e){return function(e){if(Array.isArray(e))return Jd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rd(Object(n),!0).forEach((function(t){zd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gd(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Yd(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Gd(a,r,o,i,u,"next",e)}function u(e){Gd(a,r,o,i,u,"throw",e)}i(void 0)}))}}function qd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||$d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $d(e,t){if(e){if("string"==typeof e)return Jd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jd(e,t):void 0}}function Jd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Bd.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Bd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Vd=function(e){var t=e.UIComponent,n=e.business,r=e.handleSuccessUpdate,o=qd(rn(),1)[0],s=qd(hn(),1)[0].token,c=qd(Bn(),2)[1],l=qd(Br(),2)[1].showToast,f=qd(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),p=f[0],d=f[1],h=function(){var e=Yd(a.a.mark((function e(){var t,i,u,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(Md(Md({},p),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(p.changes)},e.next=6,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/webhooks"),t);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(u=e.sent)&&u.error?d(Md(Md({},p),{},{changes:p.changes,result:u,loading:!1})):(d(Md(Md({},p),{},{changes:{},result:u,loading:!1})),(f=Nd(n.webhooks)).push(null==u?void 0:u.result),r&&r(Md(Md({},n),{},{webhooks:Nd(f)})),l(Dr.Success,c("WEBHOOK_ADDED","Webhook added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(Md(Md({},p),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Yd(a.a.mark((function e(t,i){var u,f,h,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(Md(Md({},p),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(t)},e.next=6,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/webhooks/").concat(i),u);case 6:return f=e.sent,e.next=9,f.json();case 9:null!=(h=e.sent)&&h.error?d(Md(Md({},p),{},{result:h,loading:!1})):(d(Md(Md({},p),{},{result:h,loading:!1})),v=null==n||null===(y=n.webhooks)||void 0===y?void 0:y.map((function(e){var t,n;return e.id===(null==h||null===(t=h.result)||void 0===t?void 0:t.id)?Md(Md({},e),{},{delay:null==h||null===(n=h.result)||void 0===n?void 0:n.delay}):e})),r&&r(Md(Md({},n),{},{webhooks:Nd(v)})),l(Dr.Success,c("WEBHOOK_UPDATED","Webhook updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(Md(Md({},p),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Yd(a.a.mark((function e(t){var i,u,f,h,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(Md(Md({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=6,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/webhooks/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:null!=(f=e.sent)&&f.error?d(Md(Md({},p),{},{result:f,loading:!1})):(d(Md(Md({},p),{},{loading:!1})),y=null==n||null===(h=n.webhooks)||void 0===h?void 0:h.filter((function(e){return e.id!==t})),v=Md(Md({},n),{},{webhooks:Nd(y)}),r&&r(v),l(Dr.Success,c("WEBHOOK_DELETED","Webhook deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(Md(Md({},p),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Fd({},e,{businessTypeFormState:p,handleChangeInput:function(e){var t=zd({},e.target.name,e.target.value);d(Md(Md({},p),{},{changes:Md(Md({},p.changes),t)}))},handleChangeSelect:function(e,t){d(Md(Md({},p),{},{changes:Md(Md({},p.changes),{},zd({},t,e))}))},hookFormState:p,handleUpdateAddClick:h,handleDeleteWebhook:v,handleChangeDelay:function(e,t){var n=Md(Md({},t),{},{delay:e});y(n,null==t?void 0:t.id)}})))};function Hd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Qd(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wd(Object(n),!0).forEach((function(t){Xd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Qd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qd(e,t){if(e){if("string"==typeof e)return eh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eh(e,t):void 0}}function eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Vd.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleSuccessUpdate:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Vd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var th=function(e){var t=e.apiKey,n=e.mapControls,r=e.clearState,o=e.location,a=e.type,s=e.data,c=e.fillStyle,l=e.infoContentString,f=e.handleData,p=e.setClearState,d=e.isAddMode,h=e.greenFillStyle,y=e.businessZones,v=e.kmlData;t||console.warn("Prop `apiKey` is required to use Google Maps components.");var m=Object(i.useRef)(),b=Zd(Object(i.useState)(null),2),g=b[0],O=b[1],w=Zd(Object(i.useState)(null),2),j=w[0],S=w[1],E=Zd(Object(i.useState)(null),2),P=E[0],C=E[1],I=Zd(Object(i.useState)(null),2),x=I[0],A=I[1],T=Zd(Object(i.useState)(null),2),_=T[0],k=T[1],D=Zd(Object(i.useState)(null),2),U=D[0],L=D[1],B=o?{lat:null==o?void 0:o.lat,lng:null==o?void 0:o.lng}:null==n?void 0:n.defaultPosition,F=Zd(Object(i.useState)(!1),2),N=F[0],R=F[1],M=function(){f({center:{lat:P.getCenter().lat(),lng:P.getCenter().lng()},radio:P.getRadius()/1e3})},z=function(){f(Kd(Kd({},s),{},{radio:P.getRadius()/1e3}))},G=function(){var e,t=[],n=Hd(x.getPath().getArray());try{for(n.s();!(e=n.n()).done;){var r=e.value,o={lat:r.lat(),lng:r.lng()};t.push(o)}}catch(e){n.e(e)}finally{n.f()}f(t)},Y=function(e){p(!1),U.setMap(null),1===a?(C(e.overlay),_&&_.open(g)):A(e.overlay)};return Object(i.useEffect)((function(){N&&_&&(_.setContent(l),null!=s&&s.center&&_.setPosition(s.center))}),[_,l,s,N]),Object(i.useEffect)((function(){P&&(f({center:{lat:P.getCenter().lat(),lng:P.getCenter().lng()},radio:P.getRadius()/1e3}),window.google.maps.event.addListener(P,"center_changed",M),window.google.maps.event.addListener(P,"radius_changed",z))}),[P]),Object(i.useEffect)((function(){if(x){var e,t=[],n=Hd(x.getPath().getArray());try{for(n.s();!(e=n.n()).done;){var r=e.value,o={lat:r.lat(),lng:r.lng()};t.push(o)}}catch(e){n.e(e)}finally{n.f()}f(t),window.google.maps.event.addListener(x,"mouseup",G)}}),[x]),Object(i.useEffect)((function(){U&&U.addListener("overlaycomplete",Y)}),[U]),Object(i.useEffect)((function(){var e,t,n;if(null!==(e=window.google)&&void 0!==e&&e.maps&&(r&&(P&&(P.setMap(null),C(null),_&&_.close()),x&&(x.setMap(null),A(null)),U&&U.setMap(null),null!==(t=window.google.maps)&&void 0!==t&&null!==(n=t.drawing)&&void 0!==n&&n.DrawingManager))){var o=new window.google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:window.google.maps.ControlPosition.TOP_CENTER,drawingModes:1===a?[window.google.maps.drawing.OverlayType.CIRCLE]:[window.google.maps.drawing.OverlayType.POLYGON]},circleOptions:Kd(Kd({},c),{},{clickable:!1,draggable:!0}),polygonOptions:Kd(Kd({},c),{},{clickable:!1,draggable:!1})});L(o),o.setMap(g)}}),[r,a]),Object(i.useEffect)((function(){if(N&&g){var e=new window.google.maps.LatLngBounds;if(P&&(e.union(P.getBounds()),g.fitBounds(e)),x&&Array.isArray(s)){var t,n=Hd(s);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.extend(r)}}catch(e){n.e(e)}finally{n.f()}g.fitBounds(e)}}}),[N,s,a,g,P,x]),Object(i.useEffect)((function(){N&&(B.lat=null==o?void 0:o.lat,B.lng=null==o?void 0:o.lng,B.lat&&B.lng&&(j&&j.setPosition(new window.google.maps.LatLng(null==B?void 0:B.lat,null==B?void 0:B.lng)),g&&g.panTo(new window.google.maps.LatLng(null==B?void 0:B.lat,null==B?void 0:B.lng))))}),[o]),Object(i.useEffect)((function(){if(g&&Array.isArray(v)&&d){var e=new window.google.maps.Polygon(Kd(Kd({},c),{},{draggable:!1,map:g,paths:v}));e.setMap(g);var t,n=new window.google.maps.LatLngBounds,r=Hd(v);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.extend(o)}}catch(e){r.e(e)}finally{r.f()}g.fitBounds(n),A(e)}}),[d,v,g]),Object(i.useEffect)((function(){if(N){var e,t,r,i,u=new window.google.maps.Map(m.current,{zoom:null!==(e=null==o?void 0:o.zoom)&&void 0!==e?e:n.defaultZoom,center:B,zoomControl:null==n?void 0:n.zoomControl,streetViewControl:null==n?void 0:n.streetViewControl,fullscreenControl:null==n?void 0:n.fullscreenControl,mapTypeControl:null==n?void 0:n.mapTypeControl,mapTypeId:null==n?void 0:n.mapTypeId,mapTypeControlOptions:Kd({style:window.google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:window.google.maps.ControlPosition.TOP_LEFT},null==n?void 0:n.mapTypeControlOptions)});if(O(u),i=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==B?void 0:B.lat,null==B?void 0:B.lng),map:u,draggable:!(null==n||!n.isMarkerDraggable)}),S(i),s){var f=new window.google.maps.InfoWindow({content:l,position:s.center});if(k(f),1===a&&null!=s&&s.center){var p=new window.google.maps.Circle(Kd(Kd({},c),{},{draggable:!0,map:u,center:s.center,radius:1e3*s.radio}));C(p),f.open(u)}if(2===a&&Array.isArray(s)){var v=new window.google.maps.Polygon(Kd(Kd({},c),{},{draggable:!1,map:u,paths:s}));A(v)}}if(null!==(t=window.google.maps)&&void 0!==t&&null!==(r=t.drawing)&&void 0!==r&&r.DrawingManager){var b=new window.google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:window.google.maps.ControlPosition.TOP_CENTER,drawingModes:1===a?[window.google.maps.drawing.OverlayType.CIRCLE]:[window.google.maps.drawing.OverlayType.POLYGON]},circleOptions:Kd(Kd({},c),{},{clickable:!1,draggable:!0}),polygonOptions:Kd(Kd({},c),{},{clickable:!1,draggable:!1})});L(b),b.setMap(u)}if(d){var g,w=new window.google.maps.LatLngBounds,j=Hd(y);try{for(j.s();!(g=j.n()).done;){var E=g.value;if(1===E.type){var P=new window.google.maps.Circle(Kd(Kd({},h),{},{editable:!1,center:null==E?void 0:E.data.center,radius:1e3*(null==E?void 0:E.data.radio)}));P.setMap(u),w.union(P.getBounds()),u.fitBounds(w)}if(2===(null==E?void 0:E.type)&&Array.isArray(null==E?void 0:E.data))if(new window.google.maps.Polygon(Kd(Kd({},h),{},{editable:!1,paths:null==E?void 0:E.data})).setMap(u),Array.isArray(null==E?void 0:E.data)){var I,x=Hd(null==E?void 0:E.data);try{for(x.s();!(I=x.n()).done;){var T=I.value;w.extend(T)}}catch(e){x.e(e)}finally{x.f()}u.fitBounds(w)}}}catch(e){j.e(e)}finally{j.f()}}}}),[N]),Object(i.useEffect)((function(){if(t){var e=null;if(!window.document.getElementById("__googleMapsScriptId")){window.googleAsyncInit=function(){R(!0)};var n=window.document.createElement("script");return n.id="__googleMapsScriptId",n.async=!0,n.defer=!0,n.src="https://maps.googleapis.com/maps/api/js?key=".concat(t,"&libraries=places,geometry,visualization,drawing&callback=googleAsyncInit"),window.document.body.appendChild(n),function(){e&&clearInterval(e)}}"undefined"!=typeof google?R(!0):e=setInterval((function(){"undefined"!=typeof google&&(R(!0),clearInterval(e))}),100)}}),[t]),N&&u.a.createElement("div",{id:"map",ref:m,style:{width:"70%",height:"50%",position:"absolute"}})};function nh(){return nh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nh.apply(this,arguments)}function rh(e){return function(e){if(Array.isArray(e))return lh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ch(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oh(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ah(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ih(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ah(Object(n),!0).forEach((function(t){uh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ah(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ch(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ch(e,t){if(e){if("string"==typeof e)return lh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lh(e,t):void 0}}function lh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}th.propTypes={UIComponent:c.a.elementType,maxLimitLocation:c.a.number,handleChangeAddressMap:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},th.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},th.propTypes={apiKey:c.a.string.isRequired};var fh=function(e){var t=e.UIComponent,n=e.business,r=e.handleUpdateBusinessState,o=e.setIsAddProduct,s=e.categorySelected,c=e.handleParentProductAdd,l=sh(hn(),1)[0].loading,f=sh(rn(),1)[0],p=sh(Br(),2)[1].showToast,d=sh(Bn(),2)[1],h=sh(Object(i.useState)({loading:!1,changes:{enabled:!0},result:{error:!1}}),2),y=h[0],v=h[1],m=function(){var e,t=(e=a.a.mark((function e(){var t,i,u,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Dr.Info,d("LOADING","Loading")),t=null===(null==s?void 0:s.id)&&"featured"===(null==s?void 0:s.id)?parseInt(null==n?void 0:n.categories[0]):parseInt(null==s?void 0:s.id),v(ih(ih({},y),{},{loading:!0})),e.next=8,f.businesses(parseInt(null==n?void 0:n.id)).categories(t).products().save(y.changes);case 8:i=e.sent,(u=i.content).error?v(ih(ih({},y),{},{changes:y.changes,result:u,loading:!1})):(v(ih(ih({},y),{},{changes:{},result:{error:!1,result:u.result},loading:!1})),r&&((h=rh(null==n?void 0:n.categories)).forEach((function e(n){(null==n?void 0:n.id)===t&&n.products.push(u.result),Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),r(ih(ih({},n),{},{categories:h}))),o(!1),c&&c(!1),p(Dr.Success,d("PRODUCT_ADD","Product added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),v(ih(ih({},y),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){oh(a,r,o,i,u,"next",e)}function u(e){oh(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,nh({},e,{formState:y,setFormState:v,handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){v(ih(ih({},y),{},{changes:ih(ih({},y.changes),{},{images:t.result})}))},t.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){var t=uh({},e.target.name,e.target.value);v(ih(ih({},y),{},{changes:ih(ih({},y.changes),t)}))},handleUpdateClick:m,handleChangeCheckBox:function(e){var t={enabled:e};v(ih(ih({},y),{},{changes:ih(ih({},y.changes),t)}))},handleChangeItem:function(e){var t=ih(ih({},y.changes),e);v(ih(ih({},y),{},{changes:t}))}})))};function ph(){return ph=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ph.apply(this,arguments)}function dh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dh(Object(n),!0).forEach((function(t){yh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vh(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mh(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){vh(a,r,o,i,u,"next",e)}function u(e){vh(a,r,o,i,u,"throw",e)}i(void 0)}))}}function bh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fh.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,setIsAddProduct:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Oh=function(e){var t=e.UIComponent,n=e.business,r=e.handleSuccessUpdate,o=bh(rn(),1)[0],s=bh(hn(),1)[0].token,c=bh(Bn(),2)[1],l=bh(Br(),2)[1].showToast,f=bh(Object(i.useState)({wallets:(null==n?void 0:n.configs)||[],loading:!1,error:null}),2),p=f[0],d=f[1],h=bh(Object(i.useState)({loading:!0,created:!1,error:null}),2),y=h[0],v=h[1],m=bh(Object(i.useState)({loading:!1,error:null}),2),b=m[0],g=m[1],O=function(){var e=mh(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(hh(hh({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/business/").concat(n.id,"/configs"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?d(hh(hh({},p),{},{loading:!1,error:i.result})):d(hh(hh({},p),{},{loading:!1,wallets:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(hh(hh({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=mh(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(hh(hh({},y),{},{loading:!0})),e.next=4,fetch("".concat(o.root,"/loyalty_plans"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});case 4:return t=e.sent,e.next=7,t.json();case 7:(r=e.sent).error?v(hh(hh({},y),{},{loading:!1,error:r.result})):(i=r.result.find((function(e){return"credit_point"===e.type})))&&(u=i.businesses.find((function(e){return e.business_id===n.id})),v(hh(hh({},y),{},{loading:!1,created:!!u}))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),v(hh(hh({},y),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=mh(a.a.mark((function e(t,i){var u,f,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(hh(hh({},b),{},{loading:!0})),l(Dr.Info,c("LOADING","Loading")),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(i)},e.next=6,fetch("".concat(o.root,"/business/").concat(n.id,"/configs/").concat(t),u);case 6:return f=e.sent,e.next=9,f.json();case 9:(h=e.sent).error?g({loading:!1,error:h.result}):(g({loading:!1,error:null}),y=p.wallets.map((function(e){var t;return e.id===(null===(t=h.result)||void 0===t?void 0:t.id)?h.result:e})),d(hh(hh({},p),{},{wallets:y})),r&&r(hh(hh({},n),{},{configs:y})),l(Dr.Success,c("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w(),null!=n&&n.configs||O()}),[null==n?void 0:n.configs]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ph({},e,{loyaltyPlanState:y,walletsListState:p,actionState:b,handleUpdateWallet:j})))};function wh(){return wh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wh.apply(this,arguments)}function jh(e){return function(e){if(Array.isArray(e))return Th(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ah(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sh(Object(n),!0).forEach((function(t){Ph(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ph(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ch(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ih(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ch(a,r,o,i,u,"next",e)}function u(e){Ch(a,r,o,i,u,"throw",e)}i(void 0)}))}}function xh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ah(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ah(e,t){if(e){if("string"==typeof e)return Th(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Th(e,t):void 0}}function Th(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Oh.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Oh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var _h=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.isSearchByName,s=e.isSearchByContactType,c=xh(rn(),1)[0],l=xh(hn(),1)[0].token,f=xh(Br(),2)[1].showToast,p=xh(Bn(),2)[1],d=xh(Object(i.useState)(null),2),h=d[0],y=d[1],v=xh(Object(i.useState)({campaigns:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=xh(Object(i.useState)({clear:!1,changes:{}}),2),O=g[0],w=g[1],j=xh(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),S=j[0],E=j[1],P=function(){var e=Ih(a.a.mark((function e(t,n){var r,i,u,f,p,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Eh(Eh({},m),{},{loading:!0})),r=null,i=[],h&&(u=[],o&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(h,"%"))}}),s&&u.push({attribute:"contact_type",value:{condition:"ilike",value:encodeURI("%".concat(h,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(r={conditions:i,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},p=r?"".concat(c.root,"/marketing_campaigns?page=").concat(t,"&page_size=").concat(n,"&where=").concat(JSON.stringify(r)):"".concat(c.root,"/marketing_campaigns?page=").concat(t,"&page_size=").concat(n),e.next=10,fetch(p,f);case 10:return d=e.sent,e.next=13,d.json();case 13:(y=e.sent).error?b(Eh(Eh({},m),{},{loading:!1,error:y.result})):(b({loading:!1,campaigns:y.result,error:null}),E(Eh(Eh({},S),{},{currentPage:y.pagination.current_page,totalPages:y.pagination.total_pages,totalItems:y.pagination.total,from:y.pagination.from,to:y.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),b(Eh(Eh({},m),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Ih(a.a.mark((function e(t,n){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=5,fetch("".concat(c.root,"/marketing_campaigns/").concat(t),r);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||(I&&(u=null==m?void 0:m.campaigns.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0})),I(u)),f(Dr.Success,p("CAMPAIGN_SAVED","Campaign saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){b(Eh(Eh({},m),{},{campaigns:e}))};return Object(i.useEffect)((function(){m.loading||P(1,S.pageSize)}),[h]),Object(i.useEffect)((function(){(Object.keys(null==O?void 0:O.changes).length>0||O.clear)&&!m.loading&&P(1,S.pageSize)}),[O]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,wh({},e,{searchValue:h,paginationProps:S,campaignList:m,getCampaignList:P,setFilterValues:w,setPaginationProps:E,handleChangeSearch:function(e){y(e)},handleUpdateCampaign:C,handleSuccessAddCampaign:function(e){var t=[].concat(jh(m.campaigns),[e]);E(Eh(Eh({},S),{},{to:(null==S?void 0:S.to)+1,total:(null==S?void 0:S.total)+1})),b(Eh(Eh({},m),{},{campaigns:t}))},handleSuccessUpdateCampaign:I,handleSuccessDeleteCampaign:function(e){var t=m.campaigns.filter((function(t){return t.id!==e}));E(Eh(Eh({},S),{},{total:(null==S?void 0:S.total)-1})),b(Eh(Eh({},m),{},{campaigns:t}))}})))};function kh(){return kh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kh.apply(this,arguments)}function Dh(e){return function(e){if(Array.isArray(e))return Gh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uh(e){return Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(e)}function Lh(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Bh(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Lh(a,r,o,i,u,"next",e)}function u(e){Lh(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Fh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fh(Object(n),!0).forEach((function(t){Rh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||zh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zh(e,t){if(e){if("string"==typeof e)return Gh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gh(e,t):void 0}}function Gh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}_h.propTypes={UIComponent:c.a.elementType,isSearchByName:c.a.bool,isSearchByContactType:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_h.defaultProps={isSearchByName:!0,isSearchByContactType:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var Yh=function(e){var t,n,r=e.campaign,o=e.campaignList,s=e.UIComponent,c=e.handleSuccessUpdateCampaign,l=e.handleSuccessAddCampaign,f=e.handleSuccessDeleteCampaign,p=Mh(Bn(),2)[1],d=Mh(rn(),1)[0],h=Mh(hn(),1)[0].token,y=Mh(Br(),2)[1].showToast,v=Mh(Object(i.useState)({campaign:r,loading:!1,error:null}),2),m=v[0],b=v[1],g=Mh(Object(i.useState)({loading:!1,changes:{},error:null}),2),O=g[0],w=g[1],j=Mh(Object(i.useState)(!1),2),S=j[0],E=j[1],P=Mh(Object(i.useState)({loading:!1,audience:0,error:null}),2),C=P[0],I=P[1],x=function(){return w({loading:!1,changes:{}})},A=function(){var e=Bh(a.a.mark((function e(){var t,n,i,u,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in e.prev=0,y(Dr.Info,p("LOADING","Loading")),w(Nh(Nh({},O),{},{loading:!0,error:null})),t=Nh({},null==O?void 0:O.changes))("object"===Uh(t[n])&&null!==t[n]||Array.isArray(t[n]))&&(t[n]=JSON.stringify(t[n]));return null!=t&&t.conditions&&delete t.conditions,i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(t)},e.next=9,fetch("".concat(d.root,"/marketing_campaigns/").concat(r.id),i);case 9:return u=e.sent,e.next=12,u.json();case 12:(s=e.sent).error?w(Nh(Nh({},O),{},{loading:!1,error:s.result})):(b(Nh(Nh({},m),{},{campaign:s.result})),w(Nh(Nh({},O),{},{loading:!1,error:null,changes:{}})),c&&(l=null==o?void 0:o.campaigns.filter((function(e){return e.id===r.id&&Object.assign(e,s.result),!0})),c(l)),x(),y(Dr.Success,p("CAMPAIGN_SAVED","Campaign saved"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),w(Nh(Nh({},O),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var t=Bh(a.a.mark((function t(){var n,r,o,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r in t.prev=0,y(Dr.Info,p("LOADING","Loading")),w(Nh(Nh({},O),{},{loading:!0,error:null})),n=Nh({},null==O?void 0:O.changes))("object"===Uh(n[r])&&null!==n[r]||Array.isArray(n[r]))&&(n[r]=JSON.stringify(n[r]));return o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(n)},t.next=8,fetch("".concat(d.root,"/marketing_campaigns"),o);case 8:return i=t.sent,t.next=11,i.json();case 11:(u=t.sent).error?w(Nh(Nh({},O),{},{loading:!1,error:u.result})):(w(Nh(Nh({},O),{},{loading:!1,error:null})),l&&l(u.result),y(Dr.Success,p("CAMPAIGN_ADDED","Campaign added")),e.onClose&&e.onClose()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),w(Nh(Nh({},O),{},{loading:!1,error:t.t0.message}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var t=Bh(a.a.mark((function t(){var n,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,p("LOADING","Loading")),w(Nh(Nh({},O),{},{loading:!0,error:null})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},t.next=6,fetch("".concat(d.root,"/marketing_campaigns/").concat(r.id),n);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?w(Nh(Nh({},O),{},{loading:!1,error:i.result})):(f&&f(r.id),y(Dr.Success,p("CAMPAIGN_DELETED","Campaign deleted")),w(Nh(Nh({},O),{},{loading:!1,error:null})),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w(Nh(Nh({},O),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),k=function(){var e=Bh(a.a.mark((function e(t){var n,i,u,s,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,p("LOADING","Loading")),w(Nh(Nh({},O),{},{loading:!0,error:null})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},e.next=6,fetch("".concat(d.root,"/marketing_campaigns/").concat(r.id,"/conditions/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?w(Nh(Nh({},O),{},{loading:!1,error:u.result})):(y(Dr.Success,p("CONDITION_DELETED","Condition deleted")),w(Nh(Nh({},O),{},{loading:!1,error:null})),c&&(l=null==o?void 0:o.campaigns.map((function(e){if(e.id===r.id){var t=e.conditions.filter((function(e){return e.id!==u.result.id}));return Nh(Nh({},e),{},{conditions:t})}return e})),c(l)),f=null==m||null===(s=m.campaign)||void 0===s?void 0:s.conditions.filter((function(e){var t;return e.type!==(null==u||null===(t=u.result)||void 0===t?void 0:t.type)})),b(Nh(Nh({},m),{},{campaign:Nh(Nh({},null==m?void 0:m.campaign),{},{conditions:f})}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Nh(Nh({},O),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Bh(a.a.mark((function e(t){var n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(Nh(Nh({},C),{},{loading:!0})),(n=Dh(t)).forEach((function(e){Object.keys(e).forEach((function(t){null===e[t]&&delete e[t]}))})),r={conditions:JSON.stringify(n)},o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/audience"),o);case 8:return i=e.sent,e.next=11,i.json();case 11:(u=e.sent).error?I(Nh(Nh({},C),{},{loading:!1,error:u.result})):I(Nh(Nh({},C),{},{loading:!1,error:null,audience:null==u||null===(s=u.result)||void 0===s?void 0:s.audience})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),I(Nh(Nh({},C),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0===Object.keys(r).length?(E(!0),w(Nh(Nh({},O),{},{changes:{enabled:!0,conditions:[],status:"pending"}}))):(E(!1),x()),b(Nh(Nh({},m),{},{campaign:r}))}),[r]),Object(i.useEffect)((function(){var e;D(null==m||null===(e=m.campaign)||void 0===e?void 0:e.conditions)}),[JSON.stringify(null==m||null===(t=m.campaign)||void 0===t?void 0:t.conditions)]),Object(i.useEffect)((function(){var e,t,n,r;S&&null!=O&&null!==(e=O.changes)&&void 0!==e&&e.conditions&&((null==O||null===(t=O.changes)||void 0===t||null===(n=t.conditions)||void 0===n?void 0:n.length)>0?D(null==O||null===(r=O.changes)||void 0===r?void 0:r.conditions):I(Nh(Nh({},C),{},{audience:0})))}),[JSON.stringify(null==O||null===(n=O.changes)||void 0===n?void 0:n.conditions)]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,kh({},e,{isAddMode:S,audienceState:C,campaignState:m,formState:O,handleChangeItem:function(e,t){var n=Nh(Nh({},O.changes),{},Rh({},e,t));"scheduled_at"===e&&(n.status=t?"scheduled":"pending"),w(Nh(Nh({},O),{},{changes:n}))},handleChangeInput:function(e){w(Nh(Nh({},O),{},{changes:Nh(Nh({},O.changes),{},Rh({},e.target.name,e.target.value))}))},handleAddCampaign:T,handleDeleteCampaign:_,handleUpdateClick:A,handleRemoveKey:function(e){var t=Nh({},null==O?void 0:O.changes);delete t[e],w(Nh(Nh({},O),{},{changes:t}))},handleChangeContactData:function(e){var t,n,r=null!==(t=O.changes)&&void 0!==t&&t.contact_data?Nh(Nh({},null===(n=O.changes)||void 0===n?void 0:n.contact_data),{},Rh({},e.target.name,e.target.value)):Rh({},e.target.name,e.target.value);w(Nh(Nh({},O),{},{changes:Nh(Nh({},O.changes),{},{contact_data:r})}))},setCampaignState:b,handleDeleteCondition:k})))};function qh(){return qh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qh.apply(this,arguments)}function $h(e){return $h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$h(e)}function Jh(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Vh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vh(Object(n),!0).forEach((function(t){Wh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yh.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Yh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Zh=function(e){var t=e.UIComponent,n=e.campaignState,r=e.isAddMode,o=e.formState,s=e.handleChangeItem,c=e.handleChangeContactData,l=e.handleSuccessUpdateCampaign,f=e.campaignList,p=Kh(rn(),1)[0],d=Kh(hn(),1)[0].token,h=Kh(Br(),2)[1].showToast,y=Kh(Bn(),2)[1],v=Kh(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e,t=(e=a.a.mark((function e(){var t,r,o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in e.prev=0,h(Dr.Info,y("LOADING","Loading")),b(Hh(Hh({},m),{},{loading:!0,error:null})),r=Hh({},null==m?void 0:m.changes))("object"===$h(r[o])&&null!==r[o]||Array.isArray(r[o]))&&(r[o]=JSON.stringify(r[o]));return i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(r)},e.next=8,fetch("".concat(p.root,"/marketing_campaigns/").concat(null==n||null===(t=n.campaign)||void 0===t?void 0:t.id),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(s=e.sent).error?b(Hh(Hh({},m),{},{loading:!1,error:s.result})):(b(Hh(Hh({},m),{},{loading:!1,error:null})),l&&(c=null==f?void 0:f.campaigns.filter((function(e){var t;return e.id===(null==n||null===(t=n.campaign)||void 0===t?void 0:t.id)&&Object.assign(e,s.result),!0})),l(c)),h(Dr.Success,y("CAMPAIGN_SAVED","Campaign saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(Hh(Hh({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Jh(a,r,o,i,u,"next",e)}function u(e){Jh(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t;r||null!=n&&n.campaign&&Object.keys(null==n?void 0:n.campaign).length>0&&b(Hh(Hh({},m),{},{changes:{contact_type:(null==n||null===(e=n.campaign)||void 0===e?void 0:e.contact_type)||"",contact_data:(null==n||null===(t=n.campaign)||void 0===t?void 0:t.contact_data)||{}}}))}),[null==n?void 0:n.campaign]),Object(i.useEffect)((function(){var e,t;r||null!=n&&n.campaign&&Object.keys(null==n?void 0:n.campaign).length>0&&b(Hh(Hh({},m),{},{changes:{contact_type:(null==n||null===(e=n.campaign)||void 0===e?void 0:e.contact_type)||"",contact_data:(null==n||null===(t=n.campaign)||void 0===t?void 0:t.contact_data)||{}}}))}),[null==n?void 0:n.campaign]),Object(i.useEffect)((function(){var e,t;r&&(null!=o&&o.changes&&Object.keys(null==o?void 0:o.changes).length>0&&b(Hh(Hh({},m),{},{changes:{contact_type:(null==o||null===(e=o.changes)||void 0===e?void 0:e.contact_type)||"",contact_data:(null==o||null===(t=o.changes)||void 0===t?void 0:t.contact_data)||{}}})))}),[null==o?void 0:o.changes]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,qh({},e,{contactState:m,handleChangeType:function(e,t){var n=Hh(Hh({},null==m?void 0:m.changes),{},Wh({},e,t));b(Hh(Hh({},m),{},{changes:n})),r&&s&&s(e,t)},handleChangeData:function(e){var t,n=Hh(Hh({},null===(t=m.changes)||void 0===t?void 0:t.contact_data),{},Wh({},e.target.name,e.target.value));b(Hh(Hh({},m),{},{changes:Hh(Hh({},m.changes),{},{contact_data:n})})),r&&c&&c(e)},handleUpdateContact:g})))};function Qh(){return Qh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qh.apply(this,arguments)}function ey(e){return function(e){if(Array.isArray(e))return cy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||sy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ty(e){return ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ty(e)}function ny(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ry(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ny(a,r,o,i,u,"next",e)}function u(e){ny(a,r,o,i,u,"throw",e)}i(void 0)}))}}function oy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ay(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oy(Object(n),!0).forEach((function(t){iy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||sy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sy(e,t){if(e){if("string"==typeof e)return cy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cy(e,t):void 0}}function cy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Zh.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ly=function(e){var t=e.campaignState,n=e.campaignList,r=e.UIComponent,o=e.handleSuccessUpdateCampaign,s=e.type,c=e.isAddMode,l=e.setCampaignState,f=e.formState,p=uy(Bn(),2)[1],d=uy(rn(),1)[0],h=uy(hn(),1)[0].token,y=uy(Br(),2)[1].showToast,v=uy(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e=ry(a.a.mark((function e(){var r,i,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,y(Dr.Info,p("LOADING","Loading")),b(ay(ay({},m),{},{loading:!0,error:null})),r=ay({},null==m?void 0:m.changes))("object"===ty(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/").concat(null==t?void 0:t.campaign.id,"/conditions/").concat(m.changes.id),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?b(ay(ay({},m),{},{loading:!1,error:c.result})):(b(ay(ay({},m),{},{loading:!1,error:null,changes:{}})),o&&(f=null==n?void 0:n.campaigns.map((function(e){if(e.id===(null==t?void 0:t.campaign.id)){var n=[];return e.conditions.find((function(e){return e.id===c.result.id}))&&(n=e.conditions.filter((function(e){return e.id!==c.result.id}))),n.push(c.result),l(ay(ay({},t),{},{campaign:ay(ay({},e),{},{conditions:n})})),ay(ay({},e),{},{conditions:n})}return e})),o(f)),y(Dr.Success,p("CONDITION_SAVED","Condition saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(ay(ay({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=ry(a.a.mark((function e(){var r,i,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,y(Dr.Info,p("LOADING","Loading")),b(ay(ay({},m),{},{loading:!0,error:null})),r=ay({},null==m?void 0:m.changes))("object"===ty(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/").concat(null==t?void 0:t.campaign.id,"/conditions"),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?b(ay(ay({},m),{},{loading:!1,error:c.result})):(b(ay(ay({},m),{},{loading:!1,error:null,changes:{}})),o&&(f=null==n?void 0:n.campaigns.map((function(e){if(e.id===(null==t?void 0:t.campaign.id)){var n=ey(e.conditions);return n.push(c.result),l(ay(ay({},t),{},{campaign:ay(ay({},e),{},{conditions:n})})),ay(ay({},e),{},{conditions:n})}return e})),o(f)),y(Dr.Success,p("CONDITION_SAVED","Condition saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(ay(ay({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(c){var e,n=null==f||null===(e=f.changes)||void 0===e?void 0:e.conditions.find((function(e){return e.type===s}));b(ay(ay({},m),{},{changes:ay({},n)}))}else{var r,o=null==t||null===(r=t.campaign)||void 0===r?void 0:r.conditions.find((function(e){return e.type===s}));b(ay(ay({},m),{},{changes:ay(ay(ay(ay(ay({},(null==o?void 0:o.id)&&{id:null==o?void 0:o.id}),(null==o?void 0:o.date_condition)&&{date_condition:null==o?void 0:o.date_condition}),(null==o?void 0:o.date)&&{date:null==o?void 0:o.date}),(null==o?void 0:o.max_date)&&{max_date:null==o?void 0:o.max_date}),{},{type:s})}))}}),[null==t?void 0:t.campaign]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Qh({},e,{ruleFormState:m,handleChangeValue:function(e,t){if("condition"!==e){var n=ay(ay({},m.changes),{},iy({},e,parseInt(t)));b(ay(ay({},m),{},{changes:n}))}else{var r,o=ay(ay({},m.changes),{},(iy(r={},e,t),iy(r,"value",null),r));b(ay(ay({},m),{},{changes:o}))}},handleUpdateRule:g,handleAddRule:O,handleChangeDate:function(e,t){var n=ay(ay({},m.changes),{},{date:"".concat(e," 00:00:00"),max_date:"".concat(t," 00:00:00")});b(ay(ay({},m),{},{changes:n}))},handleChangeOption:function(e){var t=ay(ay({},m.changes),{},{date_condition:e,date:null});b(ay(ay({},m),{},{changes:t}))},handleChangeDateTime:function(e){var t=ay(ay({},m.changes),{},{date:e,max_date:null});b(ay(ay({},m),{},{changes:t}))}})))};function fy(){return fy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fy.apply(this,arguments)}function py(e){return function(e){if(Array.isArray(e))return wy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Oy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dy(e){return dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dy(e)}function hy(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function yy(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hy(a,r,o,i,u,"next",e)}function u(e){hy(a,r,o,i,u,"throw",e)}i(void 0)}))}}function vy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function my(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vy(Object(n),!0).forEach((function(t){by(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function by(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Oy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oy(e,t){if(e){if("string"==typeof e)return wy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wy(e,t):void 0}}function wy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ly.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ly.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jy=function(e){var t=e.campaignState,n=e.campaignList,r=e.UIComponent,o=e.handleSuccessUpdateCampaign,s=e.type,c=e.isAddMode,l=e.setCampaignState,f=e.formState,p=gy(Bn(),2)[1],d=gy(rn(),1)[0],h=gy(hn(),1)[0].token,y=gy(Br(),2)[1].showToast,v=gy(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e=yy(a.a.mark((function e(){var r,i,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,y(Dr.Info,p("LOADING","Loading")),b(my(my({},m),{},{loading:!0,error:null})),r=my({},null==m?void 0:m.changes))("object"===dy(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/").concat(null==t?void 0:t.campaign.id,"/conditions/").concat(m.changes.id),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?b(my(my({},m),{},{loading:!1,error:c.result})):(b(my(my({},m),{},{loading:!1,error:null,changes:{}})),o&&(f=null==n?void 0:n.campaigns.map((function(e){if(e.id===(null==t?void 0:t.campaign.id)){var n=[];return e.conditions.find((function(e){return e.id===c.result.id}))&&(n=e.conditions.filter((function(e){return e.id!==c.result.id}))),n.push(c.result),l(my(my({},t),{},{campaign:my(my({},e),{},{conditions:n})})),my(my({},e),{},{conditions:n})}return e})),o(f)),y(Dr.Success,p("CONDITION_SAVED","Condition saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(my(my({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=yy(a.a.mark((function e(){var r,i,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,y(Dr.Info,p("LOADING","Loading")),b(my(my({},m),{},{loading:!0,error:null})),r=my({},null==m?void 0:m.changes))("object"===dy(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/").concat(null==t?void 0:t.campaign.id,"/conditions"),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?b(my(my({},m),{},{loading:!1,error:c.result})):(b(my(my({},m),{},{loading:!1,error:null,changes:{}})),o&&(f=null==n?void 0:n.campaigns.map((function(e){if(e.id===(null==t?void 0:t.campaign.id)){var n=py(e.conditions);return n.push(c.result),l(my(my({},t),{},{campaign:my(my({},e),{},{conditions:n})})),my(my({},e),{},{conditions:n})}return e})),o(f)),y(Dr.Success,p("CONDITION_SAVED","Condition saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(my(my({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(c){var e,n=null==f||null===(e=f.changes)||void 0===e?void 0:e.conditions.find((function(e){return e.type===s}));b(my(my({},m),{},{changes:my({},n)}))}else{var r,o=null==t||null===(r=t.campaign)||void 0===r?void 0:r.conditions.find((function(e){return e.type===s}));b(my(my({},m),{},{changes:my(my(my(my({},(null==o?void 0:o.id)&&{id:null==o?void 0:o.id}),(null==o?void 0:o.condition)&&{condition:null==o?void 0:o.condition}),(null==o?void 0:o.value)&&{value:null==o?void 0:o.value}),{},{type:s})}))}}),[null==t?void 0:t.campaign]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,fy({},e,{ruleFormState:m,handleChangeValue:function(e,t){if("condition"!==e){var n=my(my({},m.changes),{},by({},e,parseInt(t)));b(my(my({},m),{},{changes:n}))}else{var r,o=my(my({},m.changes),{},(by(r={},e,t),by(r,"value",null),r));b(my(my({},m),{},{changes:o}))}},handleUpdateRule:g,handleAddRule:O})))};function Sy(){return Sy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sy.apply(this,arguments)}function Ey(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Py(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Py(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Py(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}jy.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jy.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Cy=function(e){var t,n=e.UIComponent,r=e.handleEditProduct,o=Ey(vr(),2),a=o[0],i=o[1],s=i.updateProduct,c=i.removeProduct,l=i.clearCart,f=Ey(tr(),1)[0],p=(null===(t=f.order)||void 0===t?void 0:t.quantity)||0,d=(f.configs.max_product_amount?parseInt(f.configs.max_product_amount):100)-p;return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Sy({},e,{carts:a.carts,orderState:a,clearCart:l,removeProduct:c,changeQuantity:function(e,t){0===t?c(e):s({id:e.id,business_id:e.business_id,code:e.code,quantity:t})},getProductMax:function(e){var t=e.inventoried?e.stock:d,n=e.quantity+t-e.balance;return n<e.quantity?e.quantity:n},offsetDisabled:function(e){return(e.inventoried?e.stock:d)-(e.balance-e.quantity)},handleEditProduct:r})))};function Iy(){return Iy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iy.apply(this,arguments)}function xy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ay(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xy(Object(n),!0).forEach((function(t){Ty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _y(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ky(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_y(a,r,o,i,u,"next",e)}function u(e){_y(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Dy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Uy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Cy.propTypes={UIComponent:c.a.elementType,handleEditProduct:c.a.func,validationFieldsType:c.a.string};var Ly=function(e){var t=e.businessId,n=e.actionsBeforePlace,r=e.handleCustomClick,o=e.onPlaceOrderClick,s=e.UIComponent,c=Dy(rn(),1)[0],l=Dy(Object(i.useState)(!1),2),f=l[0],p=l[1],d=Dy(Object(i.useState)(null),2),h=d[0],y=d[1],v=Dy(vr(),2),m=v[0],b=v[1].placeCart,g=Dy(Object(i.useState)({business:null,loading:!0,error:null}),2),O=g[0],w=g[1],j=Dy(Object(i.useState)(null),2),S=j[0],E=j[1],P=m.carts["businessId:".concat(t)],C=function(){var e=ky(a.a.mark((function e(){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=["id","name","email","cellphone","address","paymethods","logo","location"],e.next=4,c.businesses(t).select(n).get();case 4:r=e.sent,o=r.content.result,w(Ay(Ay({},O),{},{loading:!1,business:o})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),w(Ay(Ay({},O),{},{loading:!1,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=ky(a.a.mark((function e(){var t,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=S.data,["stripe","stripe_connect","stripe_direct"].includes(S.paymethod.gateway)&&(i={source_id:S.data.id}),u={paymethod_id:S.paymethodId,paymethod_data:S.data,offer_id:P.offer_id,amount:P.total},1===m.options.type&&(u=Ay(Ay({},u),{},{delivery_zone_id:P.delivery_zone_id})),!r){e.next=7;break}return r(u,S,P),e.abrupt("return");case 7:return u=Ay(Ay({},u),{},{paymethod_data:i}),p(!0),e.next=11,b(P.uuid,u);case 11:if(null==(s=e.sent)||!s.error){e.next=15;break}return y(null==s?void 0:s.result),e.abrupt("return");case 15:if(2!==(null==(c=null==s?void 0:s.result)||null===(t=c.paymethod_data)||void 0===t?void 0:t.status)||!n){e.next=19;break}return e.next=19,n(S,s.result);case 19:p(!1),o&&o(u,S,c);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){C()}),[t]),Object(i.useEffect)((function(){if(P&&1===P.status){var e={paymethod_id:S.paymethodId,paymethod_data:S.data,delivery_zone_id:P.delivery_zone_id,offer_id:P.offer_id,amount:P.total};o&&o(e,S,P)}}),[P]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,Iy({},e,{cart:P,placing:f,errors:h,orderOptions:m.options,paymethodSelected:S,businessDetails:O,handlePaymethodChange:function(e){E(e)},handlerClickPlaceOrder:I})))};function By(){return By=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},By.apply(this,arguments)}function Fy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ny(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fy(Object(n),!0).forEach((function(t){Ry(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ry(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function My(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zy(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){My(a,r,o,i,u,"next",e)}function u(e){My(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Gy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ly.propTypes={UIComponent:c.a.elementType,handleCustomClick:c.a.func,onPlaceOrderClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ly.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qy=function(e){var t=e.UIComponent,n=Gy(rn(),1)[0],r=Gy(hn(),1)[0].token,o=Gy(Br(),2)[1].showToast,s=Gy(Bn(),2)[1],c=Gy(Jr(),2)[1].loadValidationFields,l=["city_dropdown_option","address","zipcode","address_notes"],f=Gy(Object(i.useState)({fields:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=Gy(Object(i.useState)({loading:!1,error:null}),2),y=h[0],v=h[1],m=function(){var e=zy(a.a.mark((function e(){var t,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Ny(Ny({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/checkoutfields"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||(u=i.result.filter((function(e){return!l.includes(e.code)})),s=[],["name","middle_name","lastname","second_lastname","email","mobile_phone","city_dropdown_option","address","zipcode","address_notes","coupon","driver_tip"].forEach((function(e){var t=u.findIndex((function(t){return t.code===e}));if(-1!==t){var n=u[t];u.splice(t,1),s.push(n)}})),d({fields:s,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(Ny(Ny({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=zy(a.a.mark((function e(t,i){var u,l,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),v(Ny(Ny({},y),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(i)},e.next=6,fetch("".concat(n.root,"/checkoutfields/").concat(t),u);case 6:return l=e.sent,e.next=9,l.json();case 9:(f=e.sent).error?v({loading:!1,error:f.result}):(v({loading:!1,error:null}),o(Dr.Success,s("FIELD_SAVED","Field saved")),h=p.fields.filter((function(e){return e.id===t&&Object.assign(e,f.result),!0})),d(Ny(Ny({},p),{},{fields:h})),c&&c()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,By({},e,{checkoutFieldsState:p,handleChangeCheckoutFieldSetting:b})))};function $y(){return $y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$y.apply(this,arguments)}function Jy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jy(Object(n),!0).forEach((function(t){Hy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wy(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ky(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}qy.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qy.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Zy=function(e){var t=e.UIComponent,n=Ky(rn(),1)[0],r=Ky(hn(),1)[0].token,o=Ky(Object(i.useState)(null),2),s=o[0],c=o[1],l=Ky(Object(i.useState)({result:null,loading:!1,error:null}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Vy(Vy({},f),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({password:s})},e.next=5,fetch("".concat(n.root,"/users/check_password"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error?p(Vy(Vy({},f),{},{loading:!1,error:i.result})):p(Vy(Vy({},f),{},{loading:!1,result:i.result,error:null})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(Vy(Vy({},f),{},{loading:!1,error:e.t0}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Wy(a,r,o,i,u,"next",e)}function u(e){Wy(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,$y({},e,{checkPasswordStatus:f,handleChangePassword:function(e){c(e)},getCheckPassword:d})))};function Qy(){return Qy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qy.apply(this,arguments)}function ev(e){return function(e){if(Array.isArray(e))return sv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||uv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tv(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=uv(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function nv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nv(Object(n),!0).forEach((function(t){ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ov(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function av(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function iv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||uv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uv(e,t){if(e){if("string"==typeof e)return sv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sv(e,t):void 0}}function sv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Zy.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zy.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cv=function(e){var t=e.cities,n=e.propsToFetch,r=e.UIComponent,o=iv(rn(),1)[0],s=iv(Object(i.useState)({cities:[],loading:!0,error:null}),2),c=s[0],l=s[1],f=function(){var e,t=(e=a.a.mark((function e(){var t,r,i,u,s,f,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(rv(rv({},c),{},{loading:!0})),e.next=4,o.countries().select(n).get();case 4:if(t=e.sent,r=t.content,i=r.error,u=r.result,s=[],!i){f=tv(u);try{for(f.s();!(p=f.n()).done;)null!=(d=p.value)&&d.enabled&&(s=[].concat(ev(s),ev(null==d?void 0:d.cities)))}catch(e){f.e(e)}finally{f.f()}l(rv(rv({},c),{},{loading:!1,cities:s}))}e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l(rv(rv({},c),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){av(a,r,o,i,u,"next",e)}function u(e){av(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){t?l(rv(rv({},c),{},{loading:!1,cities:t})):f()}),[]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Qy({},e,{citiesList:c})))};function lv(){return lv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lv.apply(this,arguments)}function fv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fv(Object(n),!0).forEach((function(t){dv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cv.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cv.defaultProps={propsToFetch:["id","name","enabled","cities"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var vv=function(e){var t,n=e.businessId,r=e.price,o=e.UIComponent,a=hv(vr(),2),s=a[0],c=a[1].applyCoupon,l=hv(Object(i.useState)({open:!1,content:null,error:!1}),2),f=l[0],p=l[1],d=hv(Bn(),2)[1],h=(null==s?void 0:s.carts)&&n&&(null==s||null===(t=s.carts["businessId:".concat(n)])||void 0===t?void 0:t.coupon)||null,y=hv(Object(i.useState)(null),2),v=y[0],m=y[1],b=function(){c({business_id:n,coupon:null})};return Object(i.useEffect)((function(){r<1&&(b(),p(pv(pv({},f),{},{open:!0,content:d("COUPON_TOTAL_ERROR","The total value of the cart with discount must be at least 1$"),error:!0})))}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,lv({},e,{couponDefault:h,couponInput:v,onChangeInputCoupon:function(e){return m(e)},handleButtonApplyClick:function(){c({business_id:n,coupon:v})},handleRemoveCouponClick:b,confirm:f,setConfirm:p})))};function mv(){return mv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mv.apply(this,arguments)}function bv(e){return function(e){if(Array.isArray(e))return Cv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ov(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gv(Object(n),!0).forEach((function(t){wv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jv(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Sv(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jv(a,r,o,i,u,"next",e)}function u(e){jv(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ev(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Pv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pv(e,t){if(e){if("string"==typeof e)return Cv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cv(e,t):void 0}}function Cv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vv.propTypes={UIComponent:c.a.elementType,isDisabled:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Iv=function(e){var t,n=e.asDashboard,r=e.UIComponent,o=e.paginationSettings,s=e.propsToFetch,c=e.initialPageSize,l=e.loadMorePageSize,f=e.isSearchByBusinessId,p=e.isSearchByBusinessName,d=e.isSearchByBusinessEmail,h=e.isSearchByBusinessPhone,y=e.noActiveStatusCondition,v=Ev(rn(),1)[0],m=Ev(hn(),1)[0],b=Ev(Object(i.useState)({loading:!1,error:null,businesses:[]}),2),g=b[0],O=b[1],w=Ev(Object(i.useState)({currentPage:"pages"===o.controlType&&o.initialPage&&o.initialPage>=1?o.initialPage-1:0,pageSize:null!==(t=o.pageSize)&&void 0!==t?t:10}),2),j=w[0],S=w[1],E=Ev(Object(i.useState)(null),2),P=E[0],C=E[1],I=Ev(Object(i.useState)(!0),2),x=I[0],A=I[1],T=Ev(Object(i.useState)(null),2),_=T[0],k=T[1],D=function(){var e=Sv(a.a.mark((function e(t,r){var o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],i=[],u={query:{page:r,page_size:t}},y||i.push({attribute:"enabled",value:x}),_&&i.push({attribute:"types",conditions:[{attribute:"id",value:_}]}),P&&(c=[],f&&c.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),p&&c.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),d&&c.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),h&&c.push({attribute:"phone",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),i.push({conector:"OR",conditions:c})),i.length&&(o={conditions:i,conector:"AND"}),l=n?v.setAccessToken(m.token).businesses().select(s).asDashboard().where(o):v.setAccessToken(m.token).businesses().select(s).where(o),e.next=10,l.get(u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=Sv(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(Ov(Ov({},g),{},{loading:!0})),e.next=6,D(c||j.pageSize,1);case 6:t=e.sent,O({loading:!1,businesses:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||S({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?j.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),"Cancel"!==(null===e.t0||void 0===e.t0||null===(n=e.t0.constructor)||void 0===n?void 0:n.name)&&O(Ov(Ov({},g),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Sv(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(Ov(Ov({},g),{},{loading:!0})),e.prev=1,e.next=4,D(l,Math.ceil((null==j?void 0:j.to)/l)+1);case 4:t=e.sent,O({loading:!1,businesses:t.content.error?g.businesses:g.businesses.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||S({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?j.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&O(Ov(Ov({},g),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Sv(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(Ov(Ov({},g),{},{loading:!0})),e.prev=1,e.next=4,D(t,n);case 4:r=e.sent,O({loading:!1,businesses:r.content.error?g.businesses:r.content.result,error:r.content.error?r.content.result:null}),r.content.error||S({currentPage:r.content.pagination.current_page,pageSize:0===r.content.pagination.page_size?j.pageSize:r.content.pagination.page_size,totalPages:r.content.pagination.total_pages,total:r.content.pagination.total,from:r.content.pagination.from,to:r.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&O(Ov(Ov({},g),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),F=function(e){var t=g.businesses.filter((function(t){return t.id!==e}));S(Ov(Ov({},j),{},{to:(null==j?void 0:j.to)-1,total:(null==j?void 0:j.total)-1})),O(Ov(Ov({},g),{},{businesses:t}))},N=function(e){var t=[].concat(bv(g.businesses),[e]);S(Ov(Ov({},j),{},{to:(null==j?void 0:j.to)+1,total:(null==j?void 0:j.total)+1})),O(Ov(Ov({},g),{},{businesses:t}))};return Object(i.useEffect)((function(){g.loading||g.businesses.length>0||0!==(null==j?void 0:j.currentPage)&&0!==(null==j?void 0:j.total)&&(Math.ceil((null==j?void 0:j.total)/j.pageSize)>=(null==j?void 0:j.currentPage)?B(j.pageSize,j.currentPage):B(j.pageSize,j.currentPage-1))}),[g.businesses]),Object(i.useEffect)((function(){e.businesses?O(Ov(Ov({},g),{},{businesses:e.businesses})):U()}),[m,P,x,_]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,mv({},e,{businessList:g,pagination:j,searchValue:P,onSearch:C,selectedBusinessActiveState:x,loadMoreBusinesses:L,getPageBusinesses:B,handleChangeBusinessActiveState:function(){A(!x)},handleChangeBusinessType:function(e){e!==_&&(O(Ov(Ov({},g),{},{businesses:[],loading:!0})),k(e))},handleSucessRemoveBusiness:F,handleSucessAddBusiness:N,handleSucessUpdateBusiness:function(e){if(g.businesses.find((function(t){return t.id===e.id})))if(x===(null==e?void 0:e.enabled)){var t=g.businesses.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));O(Ov(Ov({},g),{},{businesses:t}))}else F(e.id);else x===(null==e?void 0:e.enabled)?N(e):F(e.id)}})))};function xv(){return xv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xv.apply(this,arguments)}function Av(e){return function(e){if(Array.isArray(e))return Fv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tv(Object(n),!0).forEach((function(t){kv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dv(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Uv(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Dv(a,r,o,i,u,"next",e)}function u(e){Dv(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Lv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Bv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bv(e,t){if(e){if("string"==typeof e)return Fv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fv(e,t):void 0}}function Fv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Iv.propTypes={UIComponent:c.a.elementType,isSearchByBusinessId:c.a.bool,isSearchByBusinessEmail:c.a.bool,isSearchByBusinessPhone:c.a.bool,propsToFetch:c.a.arrayOf(s.string)},Iv.defaultProps={loadMorePageSize:10,propsToFetch:["id","alcohol","city","delivery_price","distance","delivery_time","ribbon","enabled","featured","food","groceries","header","laundry","logo","minimum","name","pickup_time","slug","reviews"],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var Nv=function(e){var t,n=e.UIComponent,r=e.propsToFetch,o=e.orders,s=e.isOnlyDelivery,c=e.driverId,l=e.customerId,f=e.businessId,p=e.orderIds,d=e.deletedOrderId,h=e.orderStatus,y=e.orderBy,v=e.orderDirection,m=e.useDefualtSessionManager,b=e.paginationSettings,g=e.filterValues,O=e.searchValue,w=e.isSearchByOrderId,j=e.isSearchByCustomerEmail,S=e.isSearchByCustomerPhone,E=e.isSearchByBusinessName,P=e.orderIdForUnreadCountUpdate,C=e.timeStatus,I=Lv(rn(),1)[0],x=Lv(zn(),1)[0],A=Lv(Object(i.useState)({loading:!o,error:null,orders:[]}),2),T=A[0],_=A[1],k=Lv(Object(i.useState)({currentPage:"pages"===b.controlType&&b.initialPage&&b.initialPage>=1?b.initialPage-1:0,pageSize:null!==(t=b.pageSize)&&void 0!==t?t:10}),2),D=k[0],U=k[1],L=Lv(hn(),1)[0],B=Cn(),F=m?L.token:e.accessToken,N={},R=Lv(Object(i.useState)({loading:!1,error:null}),2),M=R[0],z=R[1],G=function(e,t){if("id"===e){if("desc"===v)return t.sort((function(e,t){return t.id-e.id}));if("asc"===v)return t.sort((function(e,t){return e.id-t.id}))}return"last_direct_message_at"===e?t.sort((function(e,t){return new Date(t.last_direct_message_at)-new Date(e.last_direct_message_at)})):t},Y=function(){var e=Uv(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,z(_v(_v({},M),{},{loading:!0})),n={},N.updateOrders=n,e.next=6,I.setAccessToken(F).orders(null==t?void 0:t.id).save({status:t.newStatus},{cancelToken:n});case 6:r=e.sent,o=r.content,z({loading:!1,error:o.error?o.result:null}),o.error||(i=T.orders.filter((function(e){return(null==e?void 0:e.id)!==(null==t?void 0:t.id)})),_(_v(_v({},T),{},{orders:i}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),z({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Uv(a.a.mark((function e(t,n){var o,i,u,d,m,b,P,x;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],i=[],u={query:{orderBy:("desc"===v?"-":"")+y,page:n,page_size:t}},p&&i.push({attribute:"id",value:p}),0===Object.keys(g).length?h&&i.push({attribute:"status",value:h}):g.statuses.length>0?(d=g.statuses.filter((function(e){return h.includes(e)})),i.push({attribute:"status",value:d})):h&&i.push({attribute:"status",value:h}),s&&i.push({attribute:"delivery_type",value:1}),c&&i.push({attribute:"driver_id",value:c}),l&&i.push({attribute:"customer_id",value:l}),f&&i.push({attribute:"business_id",value:f}),C&&i.push({attribute:"time_status",value:C}),O&&(m=[],w&&m.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}),j&&m.push({attribute:"customer",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}]}),S&&m.push({attribute:"customer",conditions:[{attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}]}),E&&m.push({attribute:"business",conditions:[{attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}]}),i.push({conector:"OR",conditions:m})),Object.keys(g).length&&(b=[],null!=g&&g.orderId&&b.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(null==g?void 0:g.orderId,"%"))}}),null!==g.deliveryFromDatetime&&b.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(g.deliveryFromDatetime)}}),null!==g.deliveryEndDatetime&&b.push({attribute:"delivery_datetime",value:{condition:"<=",value:g.deliveryEndDatetime}}),0!==g.businessIds.length&&b.push({attribute:"business_id",value:g.businessIds}),0!==g.driverIds.length&&b.push({attribute:"driver_id",value:g.driverIds}),0!==g.deliveryTypes.length&&b.push({attribute:"delivery_type",value:g.deliveryTypes}),0!==g.driverGroupIds.length&&b.push({attribute:"driver_id",value:g.driverGroupIds}),0!==g.paymethodIds.length&&b.push({attribute:"paymethod_id",value:g.paymethodIds}),b.length&&i.push({conector:"AND",conditions:b})),i.length&&(o={conditions:i,conector:"AND"}),P={},N.orders=P,u.cancelToken=P,x=r?I.setAccessToken(F).orders().asDashboard().select(r).where(o):I.setAccessToken(F).orders().asDashboard().where(o),e.next=19,x.get(u);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(e){var t=!0;return void 0!==g.businessIds&&g.businessIds.length>0&&(g.businessIds.includes(e.business_id)||(t=!1)),void 0!==g.driverIds&&g.driverIds.length>0&&(g.driverIds.includes(e.driver_id)||(t=!1)),void 0!==g.deliveryTypes&&g.deliveryTypes.length>0&&(g.deliveryTypes.includes(e.delivery_type)||(t=!1)),void 0!==g.paymethodIds&&g.paymethodIds.length>0&&(g.paymethodIds.includes(e.paymethod_id)||(t=!1)),void 0!==g.statuses&&g.statuses.length>0&&(g.statuses.includes(parseInt(e.status))||(t=!1)),t},J=function(){var e=Uv(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,_(_v(_v({},T),{},{loading:!0})),e.next=6,q(D.pageSize,1);case 6:t=e.sent,_({loading:!1,orders:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||U({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?D.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),"Cancel"!==e.t0.constructor.name&&_(_v(_v({},T),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Uv(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(_v(_v({},T),{},{loading:!0})),e.prev=1,e.next=4,q(D.pageSize,D.currentPage+1);case 4:t=e.sent,_({loading:!1,orders:t.content.error?T.orders:T.orders.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||U({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?D.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&_(_v(_v({},T),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Uv(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(_v(_v({},T),{},{loading:!0})),e.prev=1,e.next=4,q(t,n);case 4:r=e.sent,_({loading:!1,orders:r.content.error?T.orders:r.content.result,error:r.content.error?r.content.result:null}),r.content.error||U({currentPage:r.content.pagination.current_page,pageSize:0===r.content.pagination.page_size?D.pageSize:r.content.pagination.page_size,totalPages:r.content.pagination.total_pages,total:r.content.pagination.total,from:r.content.pagination.from,to:r.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&_(_v(_v({},T),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(null!==P&&0!==T.orders.length){var e=T.orders.filter((function(e){return(null==e?void 0:e.id)===P&&(e.unread_count=0,e.unread_general_count=0,e.unread_direct_count=0),!0}));_(_v(_v({},T),{},{orders:e}))}}),[P]),Object(i.useEffect)((function(){if(d){var e=T.orders.filter((function(e){return(null==e?void 0:e.id)!==d}));J(),_(_v(_v({},T),{},{orders:e}))}}),[d]),Object(i.useEffect)((function(){if(null==L||!L.loading)return o?_(_v(_v({},T),{},{orders:o})):J(),function(){N.orders&&N.orders.cancel()}}),[L,O,y,g,s,c,l,f,o,h,C]),Object(i.useEffect)((function(){if(!T.loading){var e=function(e){if(!s||1===(null==e?void 0:e.delivery_type)){var t=[];if(T.orders.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)}))){t=T.orders.filter((function(t){var n=!0;return(null==t?void 0:t.id)===(null==e?void 0:e.id)&&(delete e.total,delete e.subtotal,Object.assign(t,e),(n=(0===h.length||h.includes(parseInt(t.status)))&&$(e))||(D.total--,U(_v({},D)))),n}));var n=G(y,t);_(_v(_v({},T),{},{orders:n}))}else{if($(e))if(h.includes(parseInt(e.status))){t=[].concat(Av(T.orders),[e]);var r=G(y,t);D.total++,U(_v({},D)),_(_v(_v({},T),{},{orders:r.slice(0,D.pageSize)}))}}}},t=function(e){if((!s||1===(null==e?void 0:e.delivery_type))&&!T.orders.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)}))){var t=[];if($(e)&&(h.includes(0)&&0===e.status||h.includes(13)&&13===e.status)){t=[e].concat(Av(T.orders));var n=G(y,t);D.total++,U(_v({},D)),_(_v(_v({},T),{},{orders:n.slice(0,D.pageSize)}))}}},n=function(e){if(0!==T.orders.length&&T.orders.find((function(t){var n;return(null==t?void 0:t.id)===(null===(n=e.order)||void 0===n?void 0:n.id)}))){var t=T.orders.filter((function(t){var n;return(null==t?void 0:t.id)===(null===(n=e.order)||void 0===n?void 0:n.id)&&t.last_message_at!==e.created_at&&(1===e.type?(t.last_general_message_at=e.created_at,0!==e.author.level&&(t.unread_general_count=t.unread_general_count+1)):(t.last_direct_message_at=e.created_at,0!==e.author.level&&(t.unread_direct_count=t.unread_direct_count+1)),t.last_message_at=e.created_at,0!==e.author.level&&(t.unread_count=t.unread_count+1)),!0})),n=G(y,t);_(_v(_v({},T),{},{orders:n}))}};return T.loading||0!==T.orders.length||0!==(null==D?void 0:D.currentPage)&&0!==(null==D?void 0:D.total)&&(Math.ceil((null==D?void 0:D.total)/D.pageSize)>=(null==D?void 0:D.currentPage)?H(D.pageSize,D.currentPage):H(D.pageSize,D.currentPage-1)),B.on("update_order",e),B.on("orders_register",t),B.on("message",n),function(){B.off("update_order",e),B.off("orders_register",t),B.off("message",n)}}}),[T.orders,D,y,B]),Object(i.useEffect)((function(){var e=function(e){var t=T.orders.filter((function(t){return(null==t?void 0:t.id)===e.order_id&&(t.user_review=e),!0})),n=G(y,t);_(_v(_v({},T),{},{orders:n}))};return x.on("customer_reviewed",e),function(){x.off("customer_reviewed",e)}}),[T,y]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,xv({},e,{orderList:T,pagination:D,loadMoreOrders:V,getPageOrders:H,handleUpdateOrderStatus:Y})))};function Rv(){return Rv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rv.apply(this,arguments)}function Mv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mv(Object(n),!0).forEach((function(t){Gv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yv(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function qv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Nv.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),onOrderClick:c.a.func,useDefualtSessionManager:c.a.bool,orders:c.a.arrayOf(s.object),orderIds:c.a.arrayOf(s.number),orderIdForUnreadCountUpdate:c.a.number,orderStatus:c.a.arrayOf(s.number),orderBy:c.a.string,orderDirection:c.a.oneOf(["asc","desc"]),paginationSettings:c.a.exact({initialPage:c.a.number,pageSize:c.a.number,controlType:c.a.oneOf(["infinity","pages"])}),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Nv.defaultProps={orderBy:"id",orderDirection:"desc",paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Jv=function(e){var t,n=e.UIComponent,r=e.propsToFetch,o=e.businessIds,s=e.paginationSettings,c=qv(rn(),1)[0],l=qv(hn(),1)[0].token,f=qv(Object(i.useState)({zones:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=qv(Object(i.useState)({currentPage:"pages"===s.controlType&&s.initialPage&&s.initialPage>=1?s.initialPage-1:0,pageSize:null!==(t=s.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),y=h[0],v=h[1],m=function(){var e,t=(e=a.a.mark((function e(t,n){var i,u,s,f,h,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(zv(zv({},p),{},{loading:!0})),i=null,u=[],o&&u.push({attribute:"business_id",value:o}),u.length&&(i={conditions:u,conector:"AND"}),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},f=i?"".concat(c.root,"/delivery_zones?page=").concat(t,"&page_size=").concat(n,"8&params=").concat(r.toString(),"&&where=").concat(JSON.stringify(i)):"".concat(c.root,"/delivery_zones?page=").concat(t,"&page_size=").concat(n,"8&params=").concat(r.toString()),e.next=10,fetch(f,s);case 10:return h=e.sent,e.next=13,h.json();case 13:(m=e.sent).error||(d({loading:!1,zones:m.result,error:null}),v(zv(zv({},y),{},{currentPage:m.pagination.current_page,totalPages:m.pagination.total_pages,totalItems:m.pagination.total,from:m.pagination.from,to:m.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),d(zv(zv({},p),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Yv(a,r,o,i,u,"next",e)}function u(e){Yv(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m(1,y.pageSize)}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Rv({},e,{deliveryzoneList:p,paginationProps:y,setPaginationProps:v,getDeliveryzones:m})))};function Vv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Jv.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Jv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},propsToFetch:["name","minimum","price","type","data","enabled","business_id"]};var Wv=function(e){var t=e.onDrop,n=e.children,r=e.className,o=e.style,a=Vv(Object(i.useState)(),2),s=a[0],c=a[1];return u.a.createElement("div",{onDrop:function(e){e.preventDefault(),e.stopPropagation(),t(e.dataTransfer)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),c("dragover")},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),c()},style:o,className:r+" "+s},n)};function Kv(){return Kv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kv.apply(this,arguments)}function Xv(e){return function(e){if(Array.isArray(e))return am(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||om(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zv(Object(n),!0).forEach((function(t){em(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function em(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tm(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function nm(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){tm(a,r,o,i,u,"next",e)}function u(e){tm(a,r,o,i,u,"throw",e)}i(void 0)}))}}function rm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||om(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function om(e,t){if(e){if("string"==typeof e)return am(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?am(e,t):void 0}}function am(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var im=function(e){var t=e.UIComponent,n=e.driversCompaniesState,r=e.setDriversCompaniesState,o=e.driversCompany,s=rm(rn(),1)[0],c=rm(hn(),1)[0].token,l=rm(Br(),2)[1].showToast,f=rm(Bn(),2)[1],p=rm(Object(i.useState)({}),2),d=p[0],h=p[1],y=rm(Object(i.useState)({loading:!1,error:null}),2),v=y[0],m=y[1],b=function(){var e=nm(a.a.mark((function e(){var t,i,u,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),m(Qv(Qv({},v),{},{loading:!0})),null!=(t=Qv({},d))&&t.schedule&&(t.schedule=JSON.stringify(null==t?void 0:t.schedule)),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(t)},e.next=8,fetch("".concat(s.root,"/driver_companies/").concat(null==o?void 0:o.id),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(p=e.sent).error?m(Qv(Qv({},v),{},{loading:!1,error:p.result})):(m(Qv(Qv({},v),{},{loading:!1})),y=n.companies.filter((function(e){return e.id===(null==o?void 0:o.id)&&Object.assign(e,p.result),!0})),r(Qv(Qv({},n),{},{companies:y})),l(Dr.Success,f("CHANGES_SAVED","Changes saved")),h({})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var t=nm(a.a.mark((function t(){var o,i,u,p,y,b,g,O;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,l(Dr.Info,f("LOADING","Loading")),m(Qv(Qv({},v),{},{loading:!0})),o=[],i=0;i<7;i++)o.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});return u={enabled:!0,priority:"0",fixed_cost_per_km:0,fixed_cost_delivery:0,percentage_cost_per_order_subtotal:0},p=Qv(Qv(Qv({},d),u),{},{schedule:null!=d&&d.schedule?JSON.stringify(null==d?void 0:d.schedule):JSON.stringify(o)}),y={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(p)},t.next=10,fetch("".concat(s.root,"/driver_companies"),y);case 10:return b=t.sent,t.next=13,b.json();case 13:(g=t.sent).error?m({loading:!1,error:g.result}):(m(Qv(Qv({},v),{},{loading:!1})),O=[].concat(Xv(n.companies),[g.result]),r(Qv(Qv({},n),{},{companies:O})),l(Dr.Success,f("DRIVER_COMPANY_ADDED","Driver company added")),h({}),e.onClose&&e.onClose()),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),m({loading:!1,error:[t.t0.message]});case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=nm(a.a.mark((function t(){var i,u,p,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dr.Info,f("LOADING","Loading")),m(Qv(Qv({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(s.root,"/driver_companies/").concat(o.id),i);case 6:return u=t.sent,t.next=9,u.json();case 9:(p=t.sent).error?m(Qv(Qv({},v),{},{loading:!1,error:p.result})):(m(Qv(Qv({},v),{},{loading:!1})),d=n.companies.filter((function(e){return e.id!==o.id})),r(Qv(Qv({},n),{},{companies:d})),l(Dr.Success,f("DRIVER_COMPANY_DELETED","Driver company deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Kv({},e,{cleanChagesState:function(){return h({})},changesState:d,actionState:v,cleanActionState:function(){return m(Qv(Qv({},v),{},{error:null}))},handleChangesState:function(e,t){h(Qv(Qv({},d),{},em({},e,t)))},handleUpdateDriversCompany:b,handleAddDriversCompany:g,handleChangeScheduleState:function(e){h(Qv(Qv({},d),{},{schedule:e}))},handleDeleteDriversCompany:O})))};function um(){return um=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},um.apply(this,arguments)}function sm(e){return function(e){if(Array.isArray(e))return vm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ym(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cm(Object(n),!0).forEach((function(t){fm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pm(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function dm(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){pm(a,r,o,i,u,"next",e)}function u(e){pm(a,r,o,i,u,"throw",e)}i(void 0)}))}}function hm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ym(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ym(e,t){if(e){if("string"==typeof e)return vm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vm(e,t):void 0}}function vm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}im.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},im.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mm=function(e){var t=e.userId,n=e.UIComponent,r=hm(rn(),1)[0],o=hm(hn(),1)[0].token,s=hm(Br(),2)[1].showToast,c=hm(Bn(),2)[1],l=hm(Object(i.useState)({groups:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=hm(Object(i.useState)({loading:!1,error:null}),2),h=d[0],y=d[1],v=hm(Object(i.useState)([]),2),m=v[0],b=v[1],g=function(){var e=dm(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(lm(lm({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/drivergroups?params=name,drivers"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||p(lm(lm({},f),{},{groups:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(lm(lm({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=dm(a.a.mark((function e(t,n){var i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),y(lm(lm({},h),{},{loading:!0,error:null})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)},e.next=6,fetch("".concat(r.root,"/drivergroups/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?y(lm(lm({},h),{},{loading:!1,error:l.result})):(y({error:null,loading:!1}),d=f.groups.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),p(lm(lm({},f),{},{groups:d})),s(Dr.Success,c("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;if(!f.loading){var n=null===(e=f.groups)||void 0===e?void 0:e.reduce((function(e,n){return n.drivers.find((function(e){return e.id===t}))?[].concat(sm(e),[n.id]):sm(e)}),[]);b(n)}}),[t,f]),Object(i.useEffect)((function(){g()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,um({},e,{driversGroupsState:f,includedGroupIds:m,actionState:h,handleCheckboxClick:function(e){var n,r=null===(n=f.groups.find((function(t){return t.id===e})).drivers)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(sm(e),[t.id])}),[]),o=[];r.includes(t)?(console.log(t,r),o=r.filter((function(e){return e!==t}))):(console.log("else"),o=[].concat(sm(r),[t])),console.log(o);var a={drivers:JSON.stringify(o)};O(e,a)}})))};function bm(){return bm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bm.apply(this,arguments)}function gm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Om(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gm(Object(n),!0).forEach((function(t){wm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jm(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Sm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Em(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Em(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Em(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Pm=function(e){var t=e.userId,n=e.UIComponent,r=Sm(rn(),1)[0],o=Sm(hn(),1)[0].token,s=Sm(Object(i.useState)({reviews:[],loading:!1,error:null}),2),c=s[0],l=s[1],f=function(){var e,n=(e=a.a.mark((function e(){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Om(Om({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/users/").concat(t,"/user_reviews"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:(u=e.sent).error||l({reviews:u.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l(Om(Om({},c),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jm(a,r,o,i,u,"next",e)}function u(e){jm(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){t&&f()}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,bm({},e,{userReviewState:c})))};function Cm(){return Cm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cm.apply(this,arguments)}function Im(e){return function(e){if(Array.isArray(e))return Lm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Um(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Am(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xm(Object(n),!0).forEach((function(t){Tm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _m(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function km(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_m(a,r,o,i,u,"next",e)}function u(e){_m(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Dm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Um(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Um(e,t){if(e){if("string"==typeof e)return Lm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lm(e,t):void 0}}function Lm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Pm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Pm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Bm=function(e){var t=e.UIComponent,n=Dm(rn(),1)[0],r=Dm(hn(),1)[0].token,o=Dm(Br(),2)[1].showToast,s=Dm(Bn(),2)[1],c=Dm(Object(i.useState)({companies:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=Dm(Object(i.useState)({loading:!1,error:null}),2),d=p[0],h=p[1],y=Dm(Object(i.useState)(!1),2),v=y[0],m=y[1],b=Dm(Object(i.useState)([]),2),g=b[0],O=b[1],w=Dm(Object(i.useState)(!1),2),j=w[0],S=w[1],E=function(){var e=km(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Am(Am({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/driver_companies"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||f(Am(Am({},l),{},{companies:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(Am(Am({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=km(a.a.mark((function e(t,i){var u,c,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),h(Am(Am({},d),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(i)},e.next=6,fetch("".concat(n.root,"/driver_companies/").concat(t),u);case 6:return c=e.sent,e.next=9,c.json();case 9:(p=e.sent).error?h(Am(Am({},d),{},{loading:!1,error:p.result})):(h(Am(Am({},d),{},{loading:!1})),y=l.companies.filter((function(e){return e.id===t&&Object.assign(e,p.result),!0})),f(Am(Am({},l),{},{companies:y})),o(Dr.Success,s("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=km(a.a.mark((function e(t){var i,u,c,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),h(Am(Am({},d),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=6,fetch("".concat(n.root,"/driver_companies/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(c=e.sent).error?(h(Am(Am({},d),{},{loading:!1,error:c.result})),S(!1)):(h(Am(Am({},d),{},{loading:!1})),p=l.companies.filter((function(e){return e.id!==t})),f(Am(Am({},l),{},{companies:p})),o(Dr.Success,s("DRIVER_COMPANY_DELETED","Driver company deleted")),j&&((y=Im(g)).shift(),0===y.length&&S(!1),O(y))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j&&0!==g.length&&C(g[0])}),[g,j]),Object(i.useEffect)((function(){E()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Cm({},e,{driversCompaniesState:l,setDriversCompaniesState:f,actionState:d,openDetails:v,setOpenDetails:m,handleUpdateDriversCompany:P,handleDeleteDriversCompany:C,handleSelectCompany:function(e){var t=[];t=g.includes(e)?g.filter((function(t){return t!==e})):[].concat(Im(g),[e]),O(t)},selectedCompanyList:g,handleAllSelectCompany:function(){var e,t=null===(e=l.companies)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Im(e),[t.id])}),[]);g.length===t.length?O([]):O(t)},handleDeleteSelectedCompanies:function(){return S(!0)}})))};function Fm(){return Fm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fm.apply(this,arguments)}function Nm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Bm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Bm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Gm=function(e){var t=e.UIComponent,n=e.curDriversGroup,r=e.handleChangesState,o=Mm(Object(i.useState)(0),2),a=o[0],s=o[1],c=Mm(Object(i.useState)({}),2),l=c[0],f=c[1],p=function(e){return Math.floor((e-3600*Math.floor(e/3600))/60)},d=function(e){var t=e-3600*Math.floor(e/3600);return Math.floor(t-60*Math.floor(t/60))};return Object(i.useEffect)((function(){var e;if(n){e=1*n.autoassign_initial_radius==500&&1*n.autoassign_amount_drivers==1?1:1*n.autoassign_initial_radius==15e3&&1*n.autoassign_amount_drivers==1e3?2:1*n.autoassign_initial_radius==100&&1*n.autoassign_amount_drivers==1?3:1*n.autoassign_initial_radius==1e3&&1*n.autoassign_amount_drivers==2?4:1*n.autoassign_initial_radius==15e3&&1*n.autoassign_amount_drivers==1?5:6,s(e);var t,r={hour:(t=n.autoassign_autoreject_time,1*t/3600>1?Math.floor(1*t/3600):0),minute:p(n.autoassign_autoreject_time),second:d(n.autoassign_autoreject_time)};f(r)}}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Fm({},e,{autoAssign:a,autoRejectOrderGroup:l,onSelectAssign:function(e){s(e);var t={};1===e?(t.autoassign_initial_radius=500,t.autoassign_increment_radius=100,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=1):2===e?(t.autoassign_initial_radius=15e3,t.autoassign_increment_radius=15e3,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=1e3):3===e?(t.autoassign_initial_radius=100,t.autoassign_increment_radius=100,t.autoassign_max_radius=1500,t.autoassign_amount_drivers=1):4===e?(t.autoassign_initial_radius=1e3,t.autoassign_increment_radius=500,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=2):5===e?(t.autoassign_initial_radius=15e3,t.autoassign_increment_radius=15e3,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=1):6===e&&(t.autoassign_initial_radius="",t.autoassign_increment_radius="",t.autoassign_max_radius="",t.autoassign_amount_drivers=""),r({autoassign_initial_radius:t.autoassign_initial_radius,autoassign_increment_radius:t.autoassign_increment_radius,autoassign_max_radius:t.autoassign_max_radius,autoassign_amount_drivers:t.autoassign_amount_drivers})},onChangeSave:r,handleChangeInput:function(e){var t=e.target.value,n=""===t?0:parseInt(t);(""===n||/^[0-9\b]+$/.test(n))&&r(Rm({},e.target.name,n))},onChangeAutoRejectOrderGroup:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nm(Object(n),!0).forEach((function(t){Rm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l);if(""===e||/^[0-9\b]+$/.test(e)){var o=""===e?0:parseInt(e);n[t]=o,f(n);var a=3600*(null==n?void 0:n.hour)+60*(null==n?void 0:n.minute)+(null==n?void 0:n.second);r({autoassign_autoreject_time:a})}}})))};function Ym(){return Ym=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ym.apply(this,arguments)}function qm(e){return function(e){if(Array.isArray(e))return Zm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$m(Object(n),!0).forEach((function(t){Vm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hm(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Wm(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Hm(a,r,o,i,u,"next",e)}function u(e){Hm(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Km(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Xm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xm(e,t){if(e){if("string"==typeof e)return Zm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zm(e,t):void 0}}function Zm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Gm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Gm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Qm=function(e){var t=e.UIComponent,n=e.driversGroupsState,r=e.setDriversGroupsState,o=e.curDriversGroup,s=e.driversManagers,c=e.businesses,l=e.paymethods,f=e.drivers,p=e.companies,d=Km(rn(),1)[0],h=Km(hn(),1)[0].token,y=Km(Br(),2)[1].showToast,v=Km(Bn(),2)[1],m=Km(Object(i.useState)({driversGroup:e.curDriversGroup,loading:!1}),2),b=m[0],g=m[1],O=Km(Object(i.useState)({loading:!1,error:null}),2),w=O[0],j=O[1],S=Km(Object(i.useState)({}),2),E=S[0],P=S[1],C=Km(Object(i.useState)([]),2),I=C[0],x=C[1],A=Km(Object(i.useState)([]),2),T=A[0],_=A[1],k=Km(Object(i.useState)([]),2),D=k[0],U=k[1],L=Km(Object(i.useState)([]),2),B=L[0],F=L[1],N=function(){var e=Wm(a.a.mark((function e(t){var i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,v("LOADING","Loading")),j(Jm(Jm({},w),{},{loading:!0,error:null})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(t)},e.next=6,fetch("".concat(d.root,"/drivergroups/").concat(o.id),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error?j(Jm(Jm({},w),{},{loading:!1,error:s.result})):(j({error:null,loading:!1}),c=n.groups.filter((function(e){return e.id===o.id&&Object.assign(e,s.result),!0})),r(Jm(Jm({},n),{},{groups:c})),y(Dr.Success,v("CHANGES_SAVED","Changes saved")),g(Jm(Jm({},b),{},{driversGroup:s.result})),P({})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),j({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var t=Wm(a.a.mark((function t(){var i,u,s,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,v("LOADING","Loading")),j(Jm(Jm({},w),{},{loading:!0,error:null})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},t.next=6,fetch("".concat(d.root,"/drivergroups/").concat(o.id),i);case 6:return u=t.sent,t.next=9,u.json();case 9:(s=t.sent).error?j(Jm(Jm({},w),{},{loading:!1,error:s.result})):(j(Jm(Jm({},w),{},{loading:!1})),c=n.groups.filter((function(e){return e.id!==o.id})),r(Jm(Jm({},n),{},{groups:c})),y(Dr.Success,v("DRIVER_GROUP_DELETED","Driver group deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),j({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=Wm(a.a.mark((function t(){var o,i,u,c,l,f,p,m,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,v("LOADING","Loading")),j({loading:!0,error:null}),o={enabled:!0,autoassign_amount_drivers:1,autoassign_autoaccept_by_driver:!1,autoassign_autoreject_time:30,autoassign_increment_radius:100,autoassign_initial_radius:500,autoassign_max_in_accepted_by_business:5,autoassign_max_in_accepted_by_driver:5,autoassign_max_in_driver_in_business:5,autoassign_max_in_pending:5,autoassign_max_in_pickup_completed:5,autoassign_max_in_ready_for_pickup:5,autoassign_max_orders:5,autoassign_max_radius:1e3,orders_group_max_distance_between_delivery:200,orders_group_max_distance_between_pickup:200,orders_group_max_orders:1,orders_group_max_time_between:5,orders_group_max_time_between_delivery:600,orders_group_max_time_between_pickup:600,orders_group_start_in_status:"7",orders_group_use_maps_api:!1},i=Jm(Jm({},E),o),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(i)},t.next=8,fetch("".concat(d.root,"/drivergroups"),u);case 8:return c=t.sent,t.next=11,c.json();case 11:(l=t.sent).error?j({loading:!1,error:l.result}):(j({loading:!1,error:null}),p=Jm({},l.result),(null===(f=l.result)||void 0===f||!f.administrator)&&s.length>0&&(m=s.find((function(e){var t;return e.id===(null===(t=l.result)||void 0===t?void 0:t.administrator_id)})),p=Jm(Jm({},p),{},{administrator:m})),b=[].concat(qm(n.groups),[p]),r(Jm(Jm({},n),{},{groups:b})),y(Dr.Success,v("DRIVER_GROUP_ADDED","Driver group added")),P({}),e.onClose&&e.onClose()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),j({loading:!1,error:[t.t0.message]});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(g(Jm(Jm({},b),{},{driversGroup:o})),o){var e,t,n,r=null==o||null===(e=o.business)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(qm(e),[t.id])}),[]);x(r),_((null==o?void 0:o.allowed_paymethods)||[]);var a=null==o||null===(t=o.drivers)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(qm(e),[t.id])}),[]);U(a);var i=null==o||null===(n=o.driver_companies)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(qm(e),[t.id])}),[]);F(i)}else P({type:0}),x([]),_([]),U([]),F([])}),[o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ym({},e,{driversGroupState:b,changesState:E,actionState:w,cleanChagesState:function(){return P({})},selectedBusinessIds:I,selectedPaymethodIds:T,selectedDriverIds:D,selectedDriversCompanyIds:B,handleChangesState:function(e){P(Jm(Jm({},E),e))},handleSelectBusiness:function(e,t){var n=qm(I),r=[];r=t?[].concat(qm(n),[e]):n.filter((function(t){return t!==e})),x(r),P(Jm(Jm({},E),{},{business:JSON.stringify(r)}))},handleSelectAllBusiness:function(e){var t=null==c?void 0:c.reduce((function(e,t){return[].concat(qm(e),[t.id])}),[]),n=[];n=e?qm(t):[],x(n),P(Jm(Jm({},E),{},{business:JSON.stringify(n)}))},handleSelectPaymethod:function(e,t){var n=qm(T),r=[];r=t?[].concat(qm(n),[e]):n.filter((function(t){return t!==e})),_(r),P(Jm(Jm({},E),{},{allowed_paymethods:JSON.stringify(r)}))},handleSelectDriver:function(e,t){var n=qm(D),r=[];r=t?[].concat(qm(n),[e]):n.filter((function(t){return t!==e})),U(r),P(Jm(Jm({},E),{},{drivers:JSON.stringify(r)}))},handleSelectDriversCompany:function(e,t){var n=qm(B),r=[];r=t?[].concat(qm(n),[e]):n.filter((function(t){return t!==e})),F(r),P(Jm(Jm({},E),{},{driver_companies:JSON.stringify(r)}))},handleSelectAllPaymethod:function(e){var t=null==l?void 0:l.reduce((function(e,t){return[].concat(qm(e),[t.id])}),[]),n=[];n=e?qm(t):[],_(n),P(Jm(Jm({},E),{},{allowed_paymethods:JSON.stringify(n)}))},handleSelectAllDriver:function(e){var t=null==f?void 0:f.reduce((function(e,t){return[].concat(qm(e),[t.id])}),[]),n=[];n=e?qm(t):[],U(n),P(Jm(Jm({},E),{},{drivers:JSON.stringify(n)}))},handleSelectAllDriversCompany:function(e){var t=null==p?void 0:p.reduce((function(e,t){return[].concat(qm(e),[t.id])}),[]),n=[];n=e?qm(t):[],F(n),P(Jm(Jm({},E),{},{driver_companies:JSON.stringify(n)}))},handleUpdateDriversGroup:N,handleDeleteDriversGroup:R,handleAddDriversGroup:M})))};function eb(){return eb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eb.apply(this,arguments)}function tb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tb(Object(n),!0).forEach((function(t){rb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ob(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ab(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ab(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Qm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Qm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ib=function(e){var t=e.UIComponent,n=e.curDriversGroup,r=e.handleChangesState,o=ob(Object(i.useState)({}),2),a=o[0],s=o[1],c=ob(Object(i.useState)({}),2),l=c[0],f=c[1],p=ob(Object(i.useState)({}),2),d=p[0],h=p[1],y=function(e){return 1*e/3600>1?Math.floor(1*e/3600):0},v=function(e){return Math.floor((e-3600*Math.floor(e/3600))/60)},m=function(e){var t=e-3600*Math.floor(e/3600);return Math.floor(t-60*Math.floor(t/60))};return Object(i.useEffect)((function(){if(n){var e={hour:y(null==n?void 0:n.orders_group_max_time_between),minute:v(null==n?void 0:n.orders_group_max_time_between),second:m(null==n?void 0:n.orders_group_max_time_between)};s(e);var t={hour:y(null==n?void 0:n.orders_group_max_time_between_pickup),minute:v(null==n?void 0:n.orders_group_max_time_between_pickup),second:m(null==n?void 0:n.orders_group_max_time_between_pickup)};f(t);var r={hour:y(null==n?void 0:n.orders_group_max_time_between_delivery),minute:v(null==n?void 0:n.orders_group_max_time_between_delivery),second:m(null==n?void 0:n.orders_group_max_time_between_delivery)};h(r)}}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,eb({},e,{maxTimeBetweenOrder:a,maxTimeBetweenBusiness:l,maxTimeBetweenDelivery:d,handleChangeMaxTimeBetweenOrder:function(e,t){if(""===e||/^[0-9\b]+$/.test(e)){var n=""===e?0:parseInt(e),o=nb({},a);o[t]=n,s(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);r({orders_group_max_time_between:i})}},handleChangeMaxTimeBetweenBusiness:function(e,t){if(""===e||/^[0-9\b]+$/.test(e)){var n=""===e?0:parseInt(e),o=nb({},a);o[t]=n,f(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);r({orders_group_max_time_between_pickup:i})}},handleChangeMaxTimeBetweenDelivery:function(e,t){if(""===e||/^[0-9\b]+$/.test(e)){var n=""===e?0:parseInt(e),o=nb({},a);o[t]=n,h(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);r({orders_group_max_time_between_delivery:i})}},onChangeNumberInput:function(e,t){(""===t||/^[0-9\b]+$/.test(t))&&r(rb({},e,t))}})))};function ub(){return ub=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ub.apply(this,arguments)}function sb(e){return function(e){if(Array.isArray(e))return vb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cb(Object(n),!0).forEach((function(t){fb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pb(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function db(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){pb(a,r,o,i,u,"next",e)}function u(e){pb(a,r,o,i,u,"throw",e)}i(void 0)}))}}function hb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||yb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yb(e,t){if(e){if("string"==typeof e)return vb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vb(e,t):void 0}}function vb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ib.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ib.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mb=function(e){var t=e.UIComponent,n=e.isDriversMangersRequired,r=hb(rn(),1)[0],o=hb(hn(),1)[0].token,s=hb(Br(),2)[1].showToast,c=hb(Bn(),2)[1],l=hb(Object(i.useState)({groups:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=hb(Object(i.useState)({managers:[],loading:!1,error:null}),2),h=d[0],y=d[1],v=hb(Object(i.useState)({businesses:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=hb(Object(i.useState)({paymethods:[],loading:!1,error:null}),2),O=g[0],w=g[1],j=hb(Object(i.useState)({drivers:[],loading:!1,error:null}),2),S=j[0],E=j[1],P=hb(Object(i.useState)({companies:[],loading:!1,error:null}),2),C=P[0],I=P[1],x=hb(Object(i.useState)(!1),2),A=x[0],T=x[1],_=hb(Object(i.useState)({loading:!1,error:null}),2),k=_[0],D=_[1],U=hb(Object(i.useState)([]),2),L=U[0],B=U[1],F=function(){var e=db(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(lb(lb({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/drivergroups"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||p(lb(lb({},f),{},{groups:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(lb(lb({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=db(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(lb(lb({},h),{},{loading:!1})),e.next=4,r.setAccessToken(o).users().where([{attribute:"level",value:5}]).select(["name","email","photo"]).get();case 4:t=e.sent,n=t.content,i=n.error,u=n.result,i||y(lb(lb({},h),{},{loading:!1,managers:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),y(lb(lb({},h),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=db(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(lb(lb({},m),{},{loading:!1})),e.next=4,r.setAccessToken(o).businesses().select(["name","logo"]).asDashboard().get();case 4:t=e.sent,n=t.content,i=n.error,u=n.result,i||b(lb(lb({},m),{},{loading:!1,businesses:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),b(lb(lb({},m),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=db(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(lb(lb({},S),{},{loading:!1})),e.next=4,r.setAccessToken(o).users().where([{attribute:"level",value:4}]).select(["name","lastname","email","photo"]).get();case 4:t=e.sent,n=t.content,i=n.error,u=n.result,i||E(lb(lb({},S),{},{loading:!1,drivers:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),E(lb(lb({},S),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=db(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(lb(lb({},O),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/paymethods?params=name&where={%22enabled%22:true}"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||w(lb(lb({},O),{},{paymethods:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w(lb(lb({},O),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=db(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(lb(lb({},C),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/driver_companies?params=name"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||I(lb(lb({},C),{},{companies:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),I(lb(lb({},C),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=db(a.a.mark((function e(t,n){var i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),D(lb(lb({},k),{},{loading:!0,error:null})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)},e.next=6,fetch("".concat(r.root,"/drivergroups/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?D(lb(lb({},k),{},{loading:!1,error:l.result})):(D({error:null,loading:!1}),d=f.groups.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),p(lb(lb({},f),{},{groups:d})),s(Dr.Success,c("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),D({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=db(a.a.mark((function e(t){var n,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),D(lb(lb({},k),{},{loading:!0,error:null})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/drivergroups/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?(D(lb(lb({},k),{},{loading:!1,error:u.result})),T(!1)):(D(lb(lb({},k),{},{loading:!1})),l=f.groups.filter((function(e){return e.id!==t})),p(lb(lb({},f),{},{groups:l})),s(Dr.Success,c("DRIVER_GROUP_DELETED","Driver group deleted")),A&&((d=sb(L)).shift(),0===d.length&&T(!1),B(d))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),D({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){A&&0!==L.length&&q(L[0])}),[L,A]),Object(i.useEffect)((function(){F(),n&&N(),M(),R(),z(),G()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ub({},e,{driversGroupsState:f,setDriversGroupsState:p,driversManagersList:h,businessesList:m,paymethodsList:O,driversList:S,driversCompanyList:C,actionState:k,handleUpdateDriversGroup:Y,handleDeleteDriversGroup:q,handleDeleteSelectedGroups:function(){return T(!0)},selectedGroupList:L,handleSelectGroup:function(e){var t=[];t=L.includes(e)?L.filter((function(t){return t!==e})):[].concat(sb(L),[e]),B(t)},handleAllSelectGroup:function(){var e,t=null===(e=f.groups)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(sb(e),[t.id])}),[]);L.length===t.length?B([]):B(t)}})))};function bb(){return bb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bb.apply(this,arguments)}function gb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ob(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gb(Object(n),!0).forEach((function(t){wb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jb(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Sb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Eb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Pb=function(e){var t,n=e.driversGroupId,r=e.UIComponent,o=e.paginationSettings,s=Sb(rn(),1)[0],c=Sb(hn(),1)[0],l=Sb(Object(i.useState)({logs:[],loading:!0,error:null}),2),f=l[0],p=l[1],d=Sb(Object(i.useState)({currentPage:"pages"===o.controlType&&o.initialPage&&o.initialPage>=1?o.initialPage-1:0,pageSize:null!==(t=o.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),h=d[0],y=d[1],v=function(){var e,t=(e=a.a.mark((function e(t,r){var o,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Ob(Ob({},f),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=5,fetch("".concat(s.root,"/drivergroups/").concat(n,"/logs?orderBy=-id&page=").concat(t,"&page_size=").concat(r),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,l=u.pagination,d=u.result,p(Ob(Ob({},f),{},{loading:!1,logs:d})),y(Ob(Ob({},h),{},{currentPage:l.current_page,totalPages:l.total_pages,totalItems:l.total,from:l.from,to:l.to})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),p(Ob(Ob({},f),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jb(a,r,o,i,u,"next",e)}function u(e){jb(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){v(1,null)}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,bb({},e,{logsList:f,paginationProps:h,getDriversGroupLogs:v})))};function Cb(){return Cb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cb.apply(this,arguments)}function Ib(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Pb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Pb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var Ab=function(e){var t=e.UIComponent,n=e.businessId,r=e.useOrderContext;if(r&&!n)throw new Error("`businessId` is required when `useOrderContext` is true.");var o=Ib(vr(),2),a=o[0],s=o[1].changeDriverTip,c=Ib(Object(i.useState)(0),2),l=c[0],f=c[1],p=Ib(Object(i.useState)(0),2),d=p[0],h=p[1];return Object(i.useEffect)((function(){var e,t,r=(null===(e=a.carts["businessId:".concat(n)])||void 0===e?void 0:e.driver_tip_rate)||0,o=(null===(t=a.carts["businessId:".concat(n)])||void 0===t?void 0:t.driver_tip)||0;f(r),h(o)}),[a]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Cb({},e,{driverTipAmount:d,optionSelected:l,handlerChangeOption:function(t){t=parseInt(t),r?s(n,t):f(t),e.handlerChangeDriverOption&&e.handlerChangeDriverOption(t)}})))};function Tb(){return Tb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tb.apply(this,arguments)}function _b(e){return function(e){if(Array.isArray(e))return Rb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Db(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kb(Object(n),!0).forEach((function(t){Ub(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ub(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lb(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Bb(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Lb(a,r,o,i,u,"next",e)}function u(e){Lb(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Fb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Nb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nb(e,t){if(e){if("string"==typeof e)return Rb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rb(e,t):void 0}}function Rb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ab.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,useOrderContext:c.a.bool,driverTipsOptions:c.a.arrayOf(c.a.number),handlerChangeDriverOption:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ab.defaultProps={useOrderContext:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Mb=function(e){var t=e.drivers,n=e.UIComponent,r=e.propsToFetch,o=e.isSearchByName,s=e.isSearchByCellphone,c=e.asDashboard,l=e.isOrderDrivers,f=e.orderId,p=Fb(rn(),1)[0],d=Fb(Br(),2)[1].showToast,h=Fb(Bn(),2)[1],y={},v=Fb(Object(i.useState)({loading:!0,error:null}),2),m=v[0],b=v[1],g=Cn(),O=Fb(hn(),1)[0],w=Fb(Object(i.useState)({drivers:[],loading:!0,error:null}),2),j=w[0],S=w[1],E=Fb(Object(i.useState)([]),2),P=E[0],C=E[1],I=Fb(Object(i.useState)([]),2),x=I[0],A=I[1],T=Fb(Object(i.useState)(!0),2),_=T[0],k=T[1],D=Fb(Object(i.useState)({busy:!0,notBusy:!0}),2),U=D[0],L=D[1],B=Fb(Object(i.useState)(null),2),F=B[0],N=B[1],R=function(){var e=Bb(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,h("LOADING","Loading")),b(Db(Db({},m),{},{loading:!0})),n={},y.assignDriver=n,e.next=7,p.setAccessToken(O.token).orders(t.orderId).save({driver_id:t.driverId},{cancelToken:n});case 7:r=e.sent,o=r.content,b({loading:!1,error:o.error?o.result:null}),o.error||(t.driverId?d(Dr.Success,h("ORDER_DRIVER_ASSIGNED","Driver assigned to order")):d(Dr.Success,h("ORDER_DRIVER_REMOVED","Driver removed from the order"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Db(Db({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),M=function(e){var t,n;U.busy&&U.notBusy?(t=e.filter((function(e){return e.enabled&&e.available})),n=e.filter((function(e){return e.enabled&&!e.available}))):U.busy&&!U.notBusy?(t=e.filter((function(e){return e.enabled&&e.available&&e.busy})),n=e.filter((function(e){return e.enabled&&!e.available&&e.busy}))):!U.busy&&U.notBusy?(t=e.filter((function(e){return e.enabled&&e.available&&!e.busy})),n=e.filter((function(e){return e.enabled&&!e.available&&!e.busy}))):(t=[],n=[]),C(t),A(n)},z=function(){var e=Bb(a.a.mark((function e(){var t,n,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(Db(Db({},j),{},{loading:!0})),t={},y.drivers=t,n=null,(i=[]).push({attribute:"level",value:[4]}),F&&(u=[],o&&(u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(F,"%"))}}),u.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(F,"%"))}})),s&&u.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(F,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(n={conditions:i,conector:"AND"}),e.next=11,p.setAccessToken(O.token).users().select(r).where(n).get({cancelToken:t});case 11:c=e.sent,l=c.content.result,S(Db(Db({},j),{},{loading:!1,drivers:l})),M(l),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),S(Db(Db({},j),{},{loading:!1,error:e.t0.message}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Bb(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(Db(Db({},j),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O.token)}},e.next=5,fetch("".concat(p.root,"/controls/orders/").concat(f),t);case 5:return n=e.sent,e.next=8,n.json();case 8:r=e.sent,o=r.error,i=r.result,S({loading:!1,drivers:o?[]:null==i?void 0:i.drivers,error:o?i:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),S(Db(Db({},j),{},{loading:!1,error:e.t0.message}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){M(j.drivers)}),[U]),Object(i.useEffect)((function(){return t?(S(Db(Db({},j),{},{drivers:t,loading:!1})),M(t)):l?G():z(),function(){y.drivers&&y.drivers.cancel()}}),[t,F]),Object(i.useEffect)((function(){if(null==O||!O.loading){var e=function(e){var t=[];t=j.drivers.find((function(t){return t.id===e.id}))?j.drivers.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})):[].concat(_b(j.drivers),[e]),S(Db(Db({},j),{},{drivers:t}))},t=function(e){var t;t=j.drivers.filter((function(t){if(t.id===e.driver_id)if("string"==typeof e.location){var n=e.location.replaceAll("\\",""),r=JSON.parse(n);t.location=r}else t.location=e.location;return!0})),S(Db(Db({},j),{},{drivers:t}))};return g.on("drivers_update",e),g.on("tracking_driver",t),function(){g.off("drivers_update",e),g.off("tracking_driver",t)}}}),[g,null==O?void 0:O.loading,j.drivers]),Object(i.useEffect)((function(){null!=O&&O.user&&!t&&g.join("drivers")}),[g,null==O?void 0:O.user,c]),Object(i.useEffect)((function(){M(j.drivers)}),[j.drivers]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Tb({},e,{driversList:j,onlineDrivers:P,offlineDrivers:x,driverActionStatus:m,driversIsOnline:_,driversSubfilter:U,searchValue:F,handleChangeSearch:function(e){e!==F&&N(e)},handleChangeDriverIsOnline:function(e){k(e)},handleChangeDriversSubFilter:function(e){L(e)},handleAssignDriver:R})))};function zb(){return zb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zb.apply(this,arguments)}function Gb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gb(Object(n),!0).forEach((function(t){qb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $b(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Jb(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$b(a,r,o,i,u,"next",e)}function u(e){$b(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Vb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Mb.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Mb.defaultProps={propsToFetch:["id","name","lastname","assigned_orders_count","available","phone","cellphone","location","photo","qualification","last_order_assigned_at"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Wb=function(e){var t=e.UIComponent,n=Vb(hn(),1)[0],r=n.token,o=n.loading,s=Vb(rn(),1)[0],c=Vb(Object(i.useState)({lapse:"today",userIds:null,app_id:"all",driver_groups_ids:null,franchises_id:null,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),2),l=c[0],f=c[1],p=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),d=p[0],h=p[1],y=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),v=y[0],m=y[1],b=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),g=b[0],O=b[1],w=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),j=w[0],S=w[1],E=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),P=E[0],C=E[1],I=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),x=I[0],A=I[1],T=Vb(Object(i.useState)({loading:!1,data:{},error:null}),2),_=T[0],k=T[1],D=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),U=D[0],L=D[1],B=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),F=B[0],N=B[1],R=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),M=R[0],z=R[1],G=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),Y=G[0],q=G[1],$=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),J=$[0],V=$[1],H=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),W=H[0],K=H[1],X=Vb(Object(i.useState)({loading:!1,data:[],error:null}),2),Z=X[0],Q=X[1],ee=function(e){var t,n="".concat(s.root,"/reports/").concat(e),r="lapse=".concat(null==l?void 0:l.lapse,"&timezone=").concat(null==l?void 0:l.timeZone);return null!=l&&l.userIds&&(r="".concat(r,"&drivers=").concat(null==l||null===(t=l.userIds)||void 0===t?void 0:t.toString())),null!=l&&l.app_id&&"all"!==l.app_id&&(r="".concat(r,"&app_id=").concat(null==l?void 0:l.app_id)),null!=l&&l.driver_groups_ids&&(r="".concat(r,"&driver_groups_ids=").concat(JSON.stringify(null==l?void 0:l.driver_groups_ids))),null!=l&&l.franchises_id&&(r="".concat(r,"&franchises_id=").concat(JSON.stringify(null==l?void 0:l.franchises_id))),"".concat(n,"?").concat(r)},te=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(Yb(Yb({},d),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("driver_orders_v2"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,h(Yb(Yb({},d),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),h(Yb(Yb({},d),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,m(Yb(Yb({},v),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("driver_sales_v2"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,m(Yb(Yb({},v),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),m(Yb(Yb({},v),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(Yb(Yb({},g),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_orders_status"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,O(Yb(Yb({},g),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),O(Yb(Yb({},g),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,S(Yb(Yb({},j),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_top_orders"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,S(Yb(Yb({},j),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),S(Yb(Yb({},j),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,L(Yb(Yb({},U),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("customer_satisfaction"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,L(Yb(Yb({},U),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),L(Yb(Yb({},U),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,V(Yb(Yb({},J),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_complete_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,V(Yb(Yb({},J),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),V(Yb(Yb({},J),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,C(Yb(Yb({},P),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_spend_times"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,C(Yb(Yb({},P),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),C(Yb(Yb({},P),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,A(Yb(Yb({},x),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_available_times"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,A(Yb(Yb({},x),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),A(Yb(Yb({},x),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,k(Yb(Yb({},_),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_busy_times"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,k(Yb(Yb({},_),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),k(Yb(Yb({},_),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,N(Yb(Yb({},F),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_accept_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,N(Yb(Yb({},F),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),N(Yb(Yb({},F),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,z(Yb(Yb({},M),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_arrived_pickup_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,z(Yb(Yb({},M),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),z(Yb(Yb({},M),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,q(Yb(Yb({},Y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_order_location"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,q(Yb(Yb({},Y),{},s?{loading:!0,error:c}:{loading:!1,locations:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),q(Yb(Yb({},Y),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,K(Yb(Yb({},W),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_pickup_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,K(Yb(Yb({},W),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),K(Yb(Yb({},W),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Jb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Q(Yb(Yb({},Z),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_delivery_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,Q(Yb(Yb({},Z),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),Q(Yb(Yb({},Z),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){te(),ne(),re(),oe(),ue(),se(),ce(),ae(),le(),ie(),fe(),de(),pe(),he()}),[l]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,zb({},e,{filterList:l,ordersList:d,salesList:v,orderStatusList:g,topOrdersList:j,customerSatisfactionList:U,ordersAcceptSpendList:F,arrivedPickUpSpendList:M,orderLocationList:Y,spendTimesList:P,availableTimesList:x,busyTimesList:_,completeSpendList:J,pickUpSpendList:W,deliverySpendList:Z,handleChangeFilterList:f})))};function Kb(){return Kb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kb.apply(this,arguments)}function Xb(e){return function(e){if(Array.isArray(e))return ag(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||og(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zb(Object(n),!0).forEach((function(t){eg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tg(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ng(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){tg(a,r,o,i,u,"next",e)}function u(e){tg(a,r,o,i,u,"throw",e)}i(void 0)}))}}function rg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||og(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function og(e,t){if(e){if("string"==typeof e)return ag(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ag(e,t):void 0}}function ag(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Wb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Wb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ig=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.propsToFetch,s=e.isSearchByPromotionName,c=e.isSearchByPromotionDescription,l=rg(rn(),1)[0],f=rg(hn(),1)[0].token,p=rg(Bn(),2)[1],d=rg(Br(),2)[1].showToast,h=rg(Object(i.useState)({promotions:[],loading:!1,error:null}),2),y=h[0],v=h[1],m=rg(Object(i.useState)({loading:!1,error:null}),2),b=m[0],g=m[1],O=rg(Object(i.useState)(null),2),w=O[0],j=O[1],S=rg(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),E=S[0],P=S[1],C=rg(Object(i.useState)(null),2),I=C[0],x=C[1],A=rg(Object(i.useState)({loading:!1,sites:[],error:null}),2),T=A[0],_=A[1],k=rg(Object(i.useState)({loading:!1,paymethods:[],error:null}),2),D=k[0],U=k[1],L=rg(Object(i.useState)({businesses:[],loading:!1,error:null}),2),B=L[0],F=L[1],N=function(){var e=ng(a.a.mark((function e(t,n){var r,i,u,p,d,h,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Qb(Qb({},y),{},{loading:!0})),r=null,i=[],w&&(u=[],s&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}),c&&u.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(r={conditions:i,conector:"AND"}),p={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},d=r?"".concat(l.root,"/offers?page=").concat(t,"&page_size=").concat(n,"&params=").concat(o.toString(),"&&where=").concat(JSON.stringify(r)):"".concat(l.root,"/offers?page=").concat(t,"&page_size=").concat(n,"&params=").concat(o.toString()),e.next=10,fetch(d,p);case 10:return h=e.sent,e.next=13,h.json();case 13:(m=e.sent).error?v(Qb(Qb({},y),{},{loading:!1,error:m.result})):(v({promotions:m.result,loading:!1,error:null}),P(Qb(Qb({},E),{},{currentPage:m.pagination.current_page,pageSize:0===m.pagination.page_size?E.pageSize:m.pagination.page_size,totalPages:m.pagination.total_pages,totalItems:m.pagination.total,from:m.pagination.from,to:m.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),v(Qb(Qb({},y),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=ng(a.a.mark((function e(t,n){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Qb(Qb({},b),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({enabled:n})},e.next=6,fetch("".concat(l.root,"/offers/").concat(t),r);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error||(u=y.promotions.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0})),v(Qb(Qb({},y),{},{promotions:u})),d(Dr.Success,p("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=ng(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(Qb(Qb({},T),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(l.root,"/sites"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error||_({sites:r.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),_(Qb(Qb({},T),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=ng(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(Qb(Qb({},D),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(l.root,"/paymethods?where=").concat(JSON.stringify({enabled:!0})),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error||U({paymethods:r.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),U(Qb(Qb({},D),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=ng(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(Qb(Qb({},B),{},{loading:!1})),e.next=4,l.setAccessToken(f).businesses().select(["name","logo","slug"]).asDashboard().get();case 4:t=e.sent,n=t.content,r=n.error,o=n.result,r||F(Qb(Qb({},B),{},{loading:!1,businesses:o})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),F(Qb(Qb({},B),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y.loading||N(1,E.pageSize)}),[w]),Object(i.useEffect)((function(){M(),G(),z()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Kb({},e,{sitesState:T,businessesList:B,paymethodsState:D,promotionListState:y,paginationProps:E,setPaginationProps:P,searchValue:w,onSearch:j,getPromotions:N,dataSelected:I,handleDragStart:function(e,t){e.dataTransfer.setData("transferPromotionId",t.id);var n=document.createElement("div");n.classList.add("ghostDragging"),n.innerHTML=null==t?void 0:t.name,document.body.appendChild(n),e.dataTransfer.setDragImage(n,0,0)},handleAllowDrop:function(e,t){e.preventDefault(),x(t)},handleDrop:function(e,t){e.preventDefault();var n=parseInt(e.dataTransfer.getData("transferPromotionId")),r=y.promotions.find((function(e){return e.id===n})),o=null==r?void 0:r.rank,a=null==t?void 0:t.rank;null===o&&null===a&&(a=1)},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);x("")},handleEnablePromotion:R,handleSuccessUpdatePromotions:function(e){v(Qb(Qb({},y),{},{promotions:e}))},handleSuccessAddPromotion:function(e){var t=[].concat(Xb(y.promotions),[e]);P(Qb(Qb({},E),{},{to:(null==E?void 0:E.to)+1,total:(null==E?void 0:E.total)+1})),v(Qb(Qb({},y),{},{promotions:t}))},handleSuccessDeletePromotion:function(e){var t=y.promotions.filter((function(t){return t.id!==e}));P(Qb(Qb({},E),{},{total:(null==E?void 0:E.total)-1})),v(Qb(Qb({},y),{},{promotions:t}))}})))};function ug(){return ug=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ug.apply(this,arguments)}function sg(e){return sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(e)}function cg(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function lg(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){cg(a,r,o,i,u,"next",e)}function u(e){cg(a,r,o,i,u,"throw",e)}i(void 0)}))}}function fg(e){return function(e){if(Array.isArray(e))return mg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pg(Object(n),!0).forEach((function(t){hg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||vg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vg(e,t){if(e){if("string"==typeof e)return mg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mg(e,t):void 0}}function mg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ig.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ig.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},propsToFetch:["name","auto","enabled","end","description","image","label","order_priority","sites","stackable","start","target","type","limit_per_user","user_order_count","user_order_count_condition","valid_from_after_user_last_order_minutes","valid_until_after_user_last_order_minutes","users","delivery_zones","paymethods","order_types_allowed","max_discount","rank","rate_type","rate","public","coupon","businesses","condition_type","minimum","products","categories","schedule","limit","include_options"]};var bg=function(e){var t=e.promotion,n=e.promotionsList,r=e.businessesList,o=e.sitesState,s=e.UIComponent,c=e.handleSuccessUpdatePromotions,l=e.handleSuccessAddPromotion,f=e.handleSuccessDeletePromotion,p=yg(Bn(),2)[1],d=yg(rn(),1)[0],h=yg(hn(),1)[0].token,y=yg(Br(),2)[1].showToast,v=yg(Object(i.useState)({promotion:t,loading:!1,error:null}),2),m=v[0],b=v[1],g=yg(Object(i.useState)({loading:!1,changes:{}}),2),O=g[0],w=g[1],j=yg(Object(i.useState)({loading:!1,error:null}),2),S=j[0],E=j[1],P=yg(Object(i.useState)(!1),2),C=P[0],I=P[1],x=yg(Object(i.useState)([]),2),A=x[0],T=x[1],_=yg(Object(i.useState)([]),2),k=_[0],D=_[1],U=yg(Object(i.useState)({}),2),L=U[0],B=U[1],F=yg(Object(i.useState)({}),2),N=F[0],R=F[1],M=function(){return w({loading:!1,changes:{}})},z=function(){var e=lg(a.a.mark((function e(){var r,o,i,u,s,l,f,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u in e.prev=0,y(Dr.Info,p("LOADING","Loading")),E({loading:!0,error:null}),i=dg({},null==O?void 0:O.changes))("object"===sg(i[u])&&null!==i[u]||Array.isArray(i[u]))&&(i[u]=JSON.stringify(i[u]));return s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(i)},e.next=8,fetch("".concat(d.root,"/offers/").concat(null!==(r=t.id)&&void 0!==r?r:null===(o=m.promotion)||void 0===o?void 0:o.id),s);case 8:return l=e.sent,e.next=11,l.json();case 11:(f=e.sent).error?E({loading:!1,error:f.result}):(b(dg(dg({},m),{},{promotion:f.result})),E({loading:!1,error:null}),c&&(v=n.filter((function(e){return e.id===t.id&&Object.assign(e,f.result),!0})),c(v)),M(),y(Dr.Success,p("PROMOTION_SAVED","Promotion saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),E({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var t=lg(a.a.mark((function t(n){var r,o,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,p("LOADING","Loading")),E({loading:!0,error:null}),null!=(r=dg({},null==O?void 0:O.changes))&&r.schedule&&(r.schedule=JSON.stringify(r.schedule)),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(r)},t.next=8,fetch("".concat(d.root,"/offers"),o);case 8:return i=t.sent,t.next=11,i.json();case 11:(u=t.sent).error?E({loading:!1,error:u.result}):(E({error:null,loading:!1}),b(dg(dg({},m),{},{promotion:u.result})),l&&l(u.result),y(Dr.Success,p("PROMOTION_ADDED","Promotion added")),I(!1),!n&&e.onClose&&e.onClose()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),E({loading:!1,error:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),Y=function(){var n=lg(a.a.mark((function n(){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,y(Dr.Info,p("LOADING","Loading")),E(dg(dg({},S),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},n.next=6,fetch("".concat(d.root,"/offers/").concat(t.id),r);case 6:return o=n.sent,n.next=9,o.json();case 9:n.sent.error||(f&&f(t.id),y(Dr.Success,p("OFFER_DELETED","Offer deleted")),e.onClose&&e.onClose()),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),E({loading:!1,error:[n.t0.message]});case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(0===Object.keys(t).length)I(!0),w(dg(dg({},O),{},{changes:{enabled:!0,auto:!1,public:!0,condition_type:1,type:1,target:1,rate_type:1,stackable:!1,rate:5}})),T([]),D([]),B({}),R({});else{var e,n,r,o;I(!1),M();var a=null==t||null===(e=t.businesses)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(fg(e),[t.id])}),[]);T(a||[]);var i=null==t||null===(n=t.sites)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(fg(e),[t.id])}),[]);D(i||[]);var u=null==t||null===(r=t.products)||void 0===r?void 0:r.reduce((function(e,t){return[].concat(fg(e),[t.id])}),[]);B(u);var s=null==t||null===(o=t.categories)||void 0===o?void 0:o.reduce((function(e,t){return[].concat(fg(e),[t.id])}),[]);R(s)}b(dg(dg({},m),{},{promotion:t}))}),[t]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,ug({},e,{isAddMode:C,promotionState:m,formState:O,actionState:S,selectedBusinessIds:A,selectedSitesIds:k,selectedProductsIds:L,setSelectedProductsIds:B,selectedCategoryIds:N,setSelectedCategoryIds:R,handleChangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){w(dg(dg({},O),{},{changes:dg(dg({},O.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){w(dg(dg({},O),{},{changes:dg(dg({},O.changes),{},hg({},e.target.name,e.target.value))}))},handleUpdateClick:z,handleAddPromotion:G,handleDeletePromotion:Y,handleChangeItem:function(e){w(dg(dg({},O),{},{changes:dg(dg({},O.changes),e)}))},handleRemoveKey:function(e){var t=dg({},null==O?void 0:O.changes);delete t[e],w(dg(dg({},O),{},{changes:t}))},handleSelectSite:function(e,n){var r,o,a,i=[];null!==(r=O.changes)&&void 0!==r&&r.sites?i=fg(null===(o=O.changes)||void 0===o?void 0:o.sites):null!=t&&t.sites&&(i=null==t||null===(a=t.sites)||void 0===a?void 0:a.reduce((function(e,t){return[].concat(fg(e),[t.id])}),[]));e?i.push(n):i=i.filter((function(e){return e!==n})),D(i),w(dg(dg({},O),{},{changes:dg(dg({},O.changes),{},{sites:i})}))},handleSelectAllBusiness:function(e){var t,n=null==r||null===(t=r.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(fg(e),[t.id])}),[]),o=[];o=e?fg(n):[],T(o),w(dg(dg({},O),{},{changes:dg(dg({},O.changes),{},{businesses:o})}))},handleSelectBusiness:function(e,t){var n=fg(A),r=[];r=t?[].concat(fg(n),[e]):n.filter((function(t){return t!==e})),T(r),w(dg(dg({},O),{},{changes:dg(dg({},O.changes),{},{businesses:r})}))},handleSelectAllSites:function(e){var t,n=null===(t=o.sites)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(fg(e),[t.id])}),[]),r=[];r=e?fg(n):[],D(r),w(dg(dg({},O),{},{changes:dg(dg({},O.changes),{},{sites:r})}))}})))};bg.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gg=function(e){var t=e.onFiles,n=e.childRef,r=e.childId,o=e.children,a=e.className,s=e.style,c=e.accept,l=e.disabled,f=Object(i.useRef)(null);return u.a.createElement("div",{draggable:!0,onClick:function(e){n||r||f.current.click()},style:s,className:a},u.a.createElement("input",{type:"file",id:r,style:{display:"none"},onChange:function(e){e.preventDefault(),e.stopPropagation(),t(e.target.files)},onClick:function(e){return e.stopPropagation()},ref:function(e){f.current=e,n&&n(e)},accept:c,disabled:l}),o)};function Og(){return Og=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Og.apply(this,arguments)}function wg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wg(Object(n),!0).forEach((function(t){Sg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eg(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Pg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ig=function(e){var t=e.UIComponent,n=e.filterValues,r=Pg(rn(),1)[0],o=Pg(hn(),1)[0],s=o.token,c=o.loading,l=Pg(Object(i.useState)({loading:!1,error:null,result:null}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(t){var o,i,u,l,d,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(jg(jg({},f),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},i=[],t&&Object.keys(n).length&&(void 0!==n.statuses&&(n.statuses.length>0?i.push({attribute:"status",value:n.statuses}):i.push({attribute:"status",value:[0,1,2,3,4,5,6,7,8,9,10,11,12]})),void 0!==n.deliveryFromDatetime&&null!==n.deliveryFromDatetime&&i.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(n.deliveryFromDatetime)}}),void 0!==n.deliveryEndDatetime&&null!==n.deliveryEndDatetime&&i.push({attribute:"delivery_datetime",value:{condition:"<=",value:n.deliveryEndDatetime}}),void 0!==n.businessIds&&0!==n.businessIds.length&&i.push({attribute:"business_id",value:n.businessIds}),void 0!==n.driverIds&&0!==n.driverIds.length&&i.push({attribute:"driver_id",value:n.driverIds}),void 0!==n.deliveryTypes&&0!==n.deliveryTypes.length&&i.push({attribute:"delivery_type",value:n.deliveryTypes}),void 0!==n.paymethodIds&&0!==n.paymethodIds.length&&i.push({attribute:"paymethod_id",value:n.paymethodIds})),u=t?"".concat(r.root,"/orders.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(i)):"".concat(r.root,"/orders.csv?mode=dashboard&orderBy=id"),e.next=10,fetch(u,o);case 10:return l=e.sent,e.next=13,l.json();case 13:d=e.sent,h=d.error,y=d.result,p(jg(jg({},f),{},h?{loading:!0,error:y}:{loading:!1,result:y})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p(jg(jg({},f),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Eg(a,r,o,i,u,"next",e)}function u(e){Eg(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Og({},e,{actionStatus:f,getCSV:d})))};function xg(){return xg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xg.apply(this,arguments)}function Ag(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Tg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tg(Object(n),!0).forEach((function(t){kg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ug(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ug(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ug(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ig.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ig.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Lg=function(e){var t=e.UIComponent,n=e.appId,r=e.debug,o=e.version,s=e.language,c=e.domain,l=e.handleButtonFacebookLoginClick,f=e.handleSuccessFacebookLogin,p=e.handleSuccessFacebookLogout,d=Dg(rn(),1)[0],h=Dg(Object(i.useState)({loading:!1,result:{error:!1}}),2),y=h[0],v=h[1],m=Dg(Object(i.useState)({ready:!1,logged:!1}),2),b=m[0],g=m[1],O=!1;Object(i.useEffect)((function(){if(!window.document.getElementById("facebook-jssdk")){window.fbAsyncInit=function(){window.FB.init({appId:n,cookie:!0,xfbml:!1,version:o,status:!0}),!O&&g(_g(_g({},b),{},{ready:!0})),window.FB.getLoginStatus((function(e){"connected"===e.status&&!O&&g(_g(_g({},b),{},{logged:!0}))}))};var e=window.document.createElement("script"),t=window.document.getElementsByTagName("script")[0];e.id="facebook-jssdk",e.async=!0,e.defer=!0,e.src="https://".concat(c,"/").concat(s,"/sdk").concat(r?"/debug":"",".js"),t.parentNode.insertBefore(e,t)}}),[]),Object(i.useEffect)((function(){return function(){O=!0}}),[]);var w=function(){var e,t=(e=a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=3;break}return l(t),e.abrupt("return");case 3:return e.prev=3,v(_g(_g({},y),{},{loading:!0})),e.next=7,d.users().authFacebook({access_token:null===(n=t.authResponse)||void 0===n?void 0:n.accessToken});case 7:r=e.sent,v({result:r.content,loading:!1}),r.content.error?j():f&&f(r.content.result),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),v({result:{error:!0,result:e.t0.message},loading:!1});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ag(a,r,o,i,u,"next",e)}function u(e){Ag(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),j=function(e){window.FB&&(v(_g(_g({},y),{},{loading:!0})),window.FB.logout((function(e){v({loading:!1,result:{error:!1}}),g(_g(_g({},b),{},{logged:!1})),p&&p(e)})))};return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,xg({},e,{formState:y,facebookStatus:b,handleFacebookLogout:j,handleFacebookLogin:function(e){window.FB&&(v(_g(_g({},y),{},{loading:!0})),window.FB.login((function(e){"connected"===e.status?(v({loading:!1,result:{error:!1}}),g(_g(_g({},b),{},{logged:!0})),w(e)):v({loading:!1,result:{error:!0,result:"Error login with Facebook"}})})))}})))};function Bg(){return Bg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bg.apply(this,arguments)}function Fg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ng(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fg(Object(n),!0).forEach((function(t){Rg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mg(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Lg.propTypes={UIComponent:c.a.elementType,handleButtonForgotPassowrdClick:c.a.func,handleSuccessForgotPassoword:c.a.func,appId:c.a.string.isRequired,debug:c.a.bool,version:c.a.string,language:c.a.string,domain:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Lg.defaultProps={version:"v7.0",language:"en_US",domain:"connect.facebook.net",beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Yg=function(e){var t=e.UIComponent,n=e.defaultEmail,r=e.handleButtonForgotPasswordClick,o=e.handleSuccessForgotPassword,s=zg(rn(),1)[0],c=zg(Bn(),2)[1],l=zg(tr(),1)[0].configs,f=zg(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],h=zg(Object(i.useState)({email:n||""}),2),y=h[0],v=h[1],m=zg(Object(i.useState)(null),2),b=m[0],g=m[1],O=zg(Object(i.useState)(!1),2),w=O[0],j=O[1],S=function(){var e,t=(e=a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=4;break}if(null!==b){e.next=4;break}return d({result:{error:!0,result:c("RECAPTCHA_VALIDATION_IS_REQUIRED","The captcha validation is required")},loading:!1}),e.abrupt("return");case 4:return e.prev=4,d(Ng(Ng({},p),{},{loading:!0})),n=t||y,e.next=9,s.users().forgotPassword(n);case 9:r=e.sent,d({result:r.content,loading:!1}),w&&(window.grecaptcha.reset(),g(null)),r.content.error||o&&o(y.email),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),d({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[4,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Mg(a,r,o,i,u,"next",e)}function u(e){Mg(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;j((null==s?void 0:s.project)&&l&&Object.keys(l).length>0&&"1"===(null==l||null===(e=l.security_recaptcha_auth)||void 0===e?void 0:e.value))}),[l,null==s?void 0:s.project]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Bg({},e,{formState:p,formData:y,hanldeChangeInput:function(e){v(Ng(Ng({},y),{},Rg({},e.target.name,e.target.value)))},handleButtonForgotPasswordClick:r||S,isReCaptchaEnable:w,handleReCaptcha:g})))};function qg(){return qg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qg.apply(this,arguments)}function $g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yg.propTypes={UIComponent:c.a.elementType,handleButtonForgotPasswordClick:c.a.func,handleSuccessForgotPassword:c.a.func,defaultEmail:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToSignup:c.a.string,linkToLogin:c.a.string,elementLinkToSignup:c.a.element,elementLinkToLogin:c.a.element},Yg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Vg=function(e){return function(t){var n=t.apiKey;n||console.warn("Prop `apiKey` is required to use Google Maps components.");var r=$g(Object(i.useState)(!1),2),o=r[0],a=r[1];return Object(i.useEffect)((function(){if(n){var e=null;if(!window.document.getElementById("google-maps-cluster")){var t=window.document.createElement("script");t.id="google-maps-cluster",t.async=!0,t.defer=!0,t.src="https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js",window.document.body.appendChild(t)}if(!window.document.getElementById("__googleMapsScriptId")||!window.document.getElementById("google-maps-cluster")){window.googleAsyncInit=function(){a(!0)};var r=window.document.createElement("script");return r.id="__googleMapsScriptId",r.async=!0,r.defer=!0,r.src="https://maps.googleapis.com/maps/api/js?key=".concat(n,"&libraries=places,geometry,visualization,drawing&callback=googleAsyncInit"),window.document.body.appendChild(r),function(){e&&clearInterval(e)}}"undefined"!=typeof google?a(!0):e=setInterval((function(){"undefined"!=typeof google&&(a(!0),clearInterval(e))}),100)}}),[n]),u.a.createElement(e,qg({},t,{googleReady:o}))}};function Hg(){return Hg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hg.apply(this,arguments)}function Wg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Kg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kg(e,t){if(e){if("string"==typeof e)return Xg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xg(e,t):void 0}}function Xg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Vg.propTypes={apiKey:c.a.string.isRequired},Vg.defaultProps={};var Zg=function(e){var t=e.googleReady,n=e.onChangeAddress,r=e.types,o=e.fields,a=e.countryCode,s=e.childRef,c=Object(i.useRef)(),l={};Object.entries(e).forEach((function(e){var t=Wg(e,2),n=t[0],r=t[1];-1===["googleReady","apiKey","onChangeAddress","setValue","childRef","countryCode","types","fields"].indexOf(n)&&(l[n]=r)}));var f={types:r,fields:o};return"*"!==a&&(f.componentRestrictions={country:a}),Object(i.useEffect)((function(){var e,r,o;if(t&&n&&null!==(e=window.google)&&void 0!==e&&null!==(r=e.maps)&&void 0!==r&&null!==(o=r.places)&&void 0!==o&&o.Autocomplete){var a=new window.google.maps.places.Autocomplete(c.current,f);a.addListener("place_changed",(function(){var e,t=a.getPlace(),r=null,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Kg(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(t.address_components);try{for(o.s();!(e=o.n()).done;){var i=e.value;if("postal_code"===i.types[0]){r=i.short_name;break}}}catch(e){o.e(e)}finally{o.f()}var u={address:t.formatted_address,location:{lat:t.geometry.location.lat(),lng:t.geometry.location.lng()},utc_offset:t.utc_offset_minutes,map_data:{library:"google",place_id:t.place_id}};r&&(u.zipcode=r),n(u)}))}}),[t]),Object(i.useEffect)((function(){var e=setInterval((function(){c.current.attributes.autocomplete&&"new-field"===c.current.attributes.autocomplete.value&&clearInterval(e),c.current.setAttribute("autocomplete","new-field")}),100);return function(){return clearInterval(e)}})),u.a.createElement("input",Hg({},l,{autoComplete:"new-field",disabled:!e.googleReady,ref:function(e){c.current=e,s&&s(e)}}))};Zg.propTypes={apiKey:c.a.string.isRequired,fields:c.a.arrayOf(s.string),types:c.a.arrayOf(s.string),countryCode:c.a.string,onChangeAddress:c.a.func},Zg.defaultProps={types:[],fields:["place_id","formatted_address","geometry","utc_offset_minutes","address_components"],countryCode:"*"};var Qg=Vg(Zg);function eO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(n),!0).forEach((function(t){nO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rO(e){return function(e){if(Array.isArray(e))return iO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||aO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||aO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aO(e,t){if(e){if("string"==typeof e)return iO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iO(e,t):void 0}}function iO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uO=function(e){var t=e.googleReady,n=e.locations,r=e.mapControls,o=e.setErrors,a=e.isSetInputs,s=e.fixedLocation,c=e.handleChangeAddressMap,l=e.maxLimitLocation,f=e.businessMap,p=e.onBusinessClick,d=e.isHeatMap,h=e.isHeat,y=e.markerIcon,v=e.isFitCenter,m=e.handleChangeCenter,b=e.data,g=e.fillStyle,O=oO(Pr(),1)[0].optimizeImage,w=oO(zn(),1)[0],j=Object(i.useRef)(),S=oO(Object(i.useState)(null),2),E=S[0],P=S[1],C=oO(Object(i.useState)(null),2),I=C[0],x=C[1],A=oO(Object(i.useState)([]),2),T=A[0],_=A[1],k=oO(Object(i.useState)(null),2),D=k[0],U=k[1],L=oO(Object(i.useState)(null),2),B=L[0],F=L[1],N=oO(Object(i.useState)(null),2),R=N[0],M=N[1],z=s||e.location,G={lat:null==z?void 0:z.lat,lng:null==z?void 0:z.lng},Y=function(e){for(var t=new window.google.maps.LatLngBounds,r=0,a=function(o){var a,i,u,s,c,l=null;(1===o||f)&&(l=O(null===(c=n[o])||void 0===c?void 0:c.icon,"r_max"));d&&y&&(l=y);var h=new window.google.maps.Marker({position:new window.google.maps.LatLng(null===(a=n[o])||void 0===a?void 0:a.lat,null===(i=n[o])||void 0===i?void 0:i.lng),map:e,title:null===(u=n[o])||void 0===u?void 0:u.slug,icon:null!==(s=n[o])&&void 0!==s&&s.icon?{url:l||n[o].icon,scaledSize:new window.google.maps.Size(45,45)}:d?{url:l,scaledSize:new window.google.maps.Size(40,40)}:null});f?$(E,h,h.getPosition())?(h.addListener("click",(function(){var e;return p(null===(e=n[o])||void 0===e?void 0:e.slug)})),t.extend(h.position),_((function(e){return[].concat(rO(e),[h])})),r+=1):h.setMap(null):(t.extend(h.position),_((function(e){return[].concat(rO(e),[h])})))},i=0;i<n.length;i++)a(i);0===r&&o&&o("ERROR_NOT_FOUND_BUSINESSES"),(null==e?void 0:e.fitBounds)&&e.fitBounds(t),U(t)},q=function(e){if(a){(new window.google.maps.Geocoder).geocode({latLng:e},(function(t){var n=null;if(t&&t.length>0){var r,a,i,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=aO(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(t[0].address_components);try{for(u.s();!(i=u.n()).done;){var s=i.value;if("postal_code"===s.types[0]){n=s.short_name;break}}}catch(e){u.e(e)}finally{u.f()}var l={address:t[0].formatted_address,location:{lat:null==e?void 0:e.lat(),lng:null==e?void 0:e.lng()},zipcode:n};c&&c(l),G.lat=null===(r=l.location)||void 0===r?void 0:r.lat,G.lng=null===(a=l.location)||void 0===a?void 0:a.lng}else I&&I.setPosition(G),o&&o("ERROR_NOT_FOUND_ADDRESS");null!=G&&G.lat&&null!=G&&G.lng&&E&&E.panTo(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng))}))}else{var t={lat:null==e?void 0:e.lat(),lng:null==e?void 0:e.lng()};c&&c({location:t}),G.lat=null==t?void 0:t.lat,G.lng=null==t?void 0:t.lng,t.lat&&t.lng&&E&&E.panTo(new window.google.maps.LatLng(null==t?void 0:t.lat,null==t?void 0:t.lng))}},$=function(e,t,n){var r=new window.google.maps.LatLng(null==n?void 0:n.lat(),null==n?void 0:n.lng()),a=new window.google.maps.LatLng(null==z?void 0:z.lat,null==z?void 0:z.lng),i=window.google.maps.geometry.spherical.computeDistanceBetween(r,a);if(f){return i<=2e4}l?i<=l?q(n):null!=G&&G.lat&&null!=G&&G.lng&&(t.setPosition(G),e.panTo(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng)),o&&o("ERROR_MAX_LIMIT_LOCATION")):q(n)};return Object(i.useEffect)((function(){t&&E&&I&&d&&R&&(B.setMap(B.getMap()?null:E),B.getMap()?R.clearMarkers():R.addMarkers(T))}),[h]),Object(i.useEffect)((function(){t&&E&&I&&v&&E.addListener("center_changed",(function(){var e=setTimeout((function(){I.setPosition(E.getCenter()),m&&m(E.getCenter())}),200);return function(){return clearTimeout(e)}}))}),[I]),Object(i.useEffect)((function(){if(t){var e,o=new window.google.maps.Map(j.current,{zoom:null!==(e=z.zoom)&&void 0!==e?e:r.defaultZoom,center:G,zoomControl:null==r?void 0:r.zoomControl,streetViewControl:null==r?void 0:r.streetViewControl,fullscreenControl:null==r?void 0:r.fullscreenControl,mapTypeControl:null==r?void 0:r.mapTypeControl,mapTypeId:null==r?void 0:r.mapTypeId,mapTypeControlOptions:tO({style:window.google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:window.google.maps.ControlPosition.TOP_LEFT},null==r?void 0:r.mapTypeControlOptions)}),a=null;P(o),n?(f&&(a=new window.google.maps.Marker({position:new window.google.maps.LatLng(G.lat,G.lng),map:o}),x(a)),Y(o),a=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng),map:o,opacity:d?0:1}),x(a)):(a=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng),map:o,draggable:!(null==r||!r.isMarkerDraggable)}),x(a)),b&&b.forEach((function(e){var t;if(1===e.type&&null!=e&&null!==(t=e.data)&&void 0!==t&&t.center){var n=new window.google.maps.Circle(tO(tO({},g),{},{draggable:!1,map:o,center:e.data.center,radius:e.data.radio}));console.log(n)}if(2===e.type&&Array.isArray(e.data)){var r=new window.google.maps.Polygon(tO(tO({},g),{},{draggable:!1,map:o,paths:e.data}));console.log(r)}}))}}),[t]),Object(i.useEffect)((function(){if(!f&&t&&E&&I){if(window.google.maps.event.addListener(I,"dragend",(function(){$(E,I,I.getPosition())})),window.google.maps.event.addListener(I,"drag",(function(){w.emit("map_is_dragging",!0)})),null!=r&&r.isMarkerDraggable&&(window.google.maps.event.addListener(E,"drag",(function(){I.setPosition(E.getCenter()),w.emit("map_is_dragging",!0)})),window.google.maps.event.addListener(E,"dragend",(function(){I.setPosition(E.getCenter()),$(E,I,E.getCenter())}))),d&&!R&&window.google.maps.visualization){var e=new window.google.maps.visualization.HeatmapLayer({data:null==n?void 0:n.map((function(e){return new window.google.maps.LatLng(e.lat,e.lng)})),map:null,radius:17});if(F(e),window.MarkerClusterer){var o=new window.MarkerClusterer(E,T,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"});M(o)}}return function(){window.google.maps.event.clearListeners(I,"dragend"),window.google.maps.event.clearListeners(E,"drag"),window.google.maps.event.clearListeners(E,"dragend")}}}),[I,E,z]),Object(i.useEffect)((function(){t&&(f&&E&&Y(E),d&&(null==n?void 0:n.length)>0||(G.lat=null==z?void 0:z.lat,G.lng=null==z?void 0:z.lng,G.lat&&G.lng&&(I&&I.setPosition(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng)),E&&E.panTo(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng)))))}),[z]),Object(i.useEffect)((function(){if(!f){var e=setInterval((function(){if(t&&E){var e=n[0],r=new window.google.maps.LatLng(null==e?void 0:e.lat,null==e?void 0:e.lng);T[0]&&T[0].setPosition(r),T.forEach((function(e){return D.extend(e.position)})),E.fitBounds(D)}}),1e3);return function(){return clearInterval(e)}}}),[n]),t&&u.a.createElement("div",{id:"map",ref:j,style:{width:"70%",height:"50%",position:"absolute"}})};uO.propTypes={UIComponent:c.a.elementType,maxLimitLocation:c.a.number,handleChangeAddressMap:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},uO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var sO=Vg(uO);function cO(){return cO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cO.apply(this,arguments)}function lO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||fO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fO(e,t){if(e){if("string"==typeof e)return pO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pO(e,t):void 0}}function pO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}sO.propTypes={apiKey:c.a.string.isRequired,onAddress:c.a.func,onError:c.a.func};var dO=function(e){var t=e.UIComponent,n=e.googleReady,r=e.onData,o=e.onError,a=e.onAddress,s=lO(Bn(),2)[1],c=lO(Object(i.useState)(!1),2),l=c[0],f=c[1],p=void 0!==n;return navigator.geolocation&&u.a.createElement(t,cO({},e,{handleGPS:function(){p&&!n||l||(f(!0),navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};p&&a?(new window.google.maps.Geocoder).geocode({location:t},(function(e,n){f(!1);var r,i=null,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=fO(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(e[0].address_components);try{for(u.s();!(r=u.n()).done;){var c=r.value;if("postal_code"===c.types[0]){i=c.short_name;break}}}catch(e){u.e(e)}finally{u.f()}"OK"===n?a({address:e[0].formatted_address,location:t,utc_offset:(new Date).getTimezoneOffset(),zipcode:i,map_data:{library:"google",place_id:e[0].place_id}}):o&&o(s("ERROR_GPS_BUTTON","Error to get result with gps button"))})):(f(!1),r&&r({location:t,utc_offset:(new Date).getTimezoneOffset()}))}),(function(e){f(!1),o&&o(s("ERROR_GPS_BUTTON",e.message))}),{timeout:5e3,enableHighAccuracy:!0}))},isGoogleButton:p,googleReady:n,isLoading:l}))};dO.propTypes={onData:c.a.func,onError:c.a.func};var hO=Vg(dO);hO.propTypes={apiKey:c.a.string.isRequired,onAddress:c.a.func,onError:c.a.func};var yO=function(e){var t=e.children,n=e.tagId;return Object(i.useEffect)((function(){if(n){!function(e,t,n,r,o){e[r]=e[r]||[],e[r].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),u="dataLayer"!==r?"&l="+r:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+u,a.parentNode.insertBefore(i,a),window.document.head.appendChild(i)}(window,document,"script","dataLayer",n)}}),[n]),u.a.createElement(u.a.Fragment,null,t)};function vO(){return vO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vO.apply(this,arguments)}function mO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=EO(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function bO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function gO(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){bO(a,r,o,i,u,"next",e)}function u(e){bO(a,r,o,i,u,"throw",e)}i(void 0)}))}}function OO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OO(Object(n),!0).forEach((function(t){jO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||EO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EO(e,t){if(e){if("string"==typeof e)return PO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PO(e,t):void 0}}function PO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}yO.propTypes={tagId:c.a.string.isRequired},yO.defaultProps={tagId:"GTM-MHNGWVF"};var CO=function(e){var t=e.UIComponent,n=SO(hn(),1)[0],r=n.token,o=n.loading,s=SO(rn(),1)[0],c=[{id:1,name:"Create a store",addText:!1,description:"Go inside your Stores and Click Add New Store, fill up all the fields required and also add your banner and logo, if you dont have one right now, dont worry, you can add those later.",completed:!1},{id:2,name:"Fill up your business information",addText:!1,description:"The business information will show on your front-end website, such as; business name, logo, banner, business email, slug = the word after your domain, orderinwebsite.co/store, and business description.",completed:!1},{id:3,name:"Add your first category",addText:!1,description:"After youve clicked on the Add New Store and Filled up your business information youll get a blank screen, click on the Add Category button and add the name of your category.",completed:!1},{id:4,name:"Add your first product",addText:!1,description:"Now, click in the category youve just added and create a product, the products cannot be created if you dont have a category, add an image to that product, make it look good.",completed:!1},{id:5,name:"Create a business menu",addText:!1,description:"To create a menu click in the store, a sidebar setting bar will show, inside here youll find the tab Menu, click Add Menu now, add a name, the delivery types, schedule, and at the bottom youll find all the products you have available to put inside this menu.",completed:!1},{id:6,name:"Create a delivery zone",addText:!1,description:"Go back a little bit in your sidebar setting bar, click in Delivery Zones, name the delivery zones, put a minimum price of delivery, and the price is how much you are going to charge for delivery, click +, and add your delivery zone, by Polygon or Circle, create by clicking around the map your range of delivery.",completed:!1},{id:7,name:"Payment method",addText:!0,description:"Last but not least, add a Payment Method, youll have several payment gateways, the biggest ones, PayPal, Stripe, or any other payment you want. Thats it! Look for your store in your Front-end Website.",completed:!1}],l=SO(Object(i.useState)({loading:!1,orders:0,error:null}),2),f=l[0],p=l[1],d=SO(Object(i.useState)({loading:!1,sales:0,error:null}),2),h=d[0],y=d[1],v=SO(Object(i.useState)({loading:!1,sales:[],error:null}),2),m=v[0],b=v[1],g=SO(Object(i.useState)({loading:!1,data:[],error:null}),2),O=g[0],w=g[1],j=function(){var e=gO(a.a.mark((function e(){var t,n,i,u,c,l,d,h,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(wO(wO({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n="".concat(s.root,"/reports/orders?lapse=today"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:if(u=e.sent,c=u.error,l=u.result,c)p(wO(wO({},f),{},{loading:!0,error:l}));else{if(d=0,(null==l?void 0:l.length)>0){h=mO(l);try{for(h.s();!(y=h.n()).done;)v=y.value,d+=parseInt(v.orders)}catch(e){h.e(e)}finally{h.f()}}p(wO(wO({},f),{},{loading:!1,orders:d}))}e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),p(wO(wO({},f),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=gO(a.a.mark((function e(){var t,n,i,u,c,l,f,p,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(wO(wO({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n="".concat(s.root,"/reports/sales?lapse=today"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:if(u=e.sent,c=u.error,l=u.result,c)y(wO(wO({},h),{},{loading:!0,error:l}));else{if(f=0,(null==l?void 0:l.length)>0){p=mO(l);try{for(p.s();!(d=p.n()).done;)v=d.value,f+=v.sales}catch(e){p.e(e)}finally{p.f()}}y(wO(wO({},h),{},{loading:!1,sales:f}))}e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),y(wO(wO({},h),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=gO(a.a.mark((function e(){var t,n,i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,b(wO(wO({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=P(),i="".concat(s.root,"/reports/sales?lapse=").concat(n),e.next=9,fetch(i,t);case 9:return u=e.sent,e.next=12,u.json();case 12:c=e.sent,l=c.error,f=c.result,b(wO(wO({},m),{},l?{loading:!0,error:f}:{loading:!1,sales:f})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),b(wO(wO({},m),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=new Date,t=e.getDate(),n=t<10?"0".concat(t):t,r=e.getMonth()+1,o=r<10?"0".concat(r):r,a=e.getFullYear();return"".concat(a,"-").concat(o,"-01,").concat(a,"-").concat(o,"-").concat(n)};return Object(i.useEffect)((function(){j(),S(),E(),w(wO(wO({},O),{},{data:c}))}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,vO({},e,{ordersList:f,todaySalelsList:h,monthSalesList:m,taskList:O,getCurrentDateRange:P,handleUpdateTaskList:function(e){w(wO(wO({},O),{},{data:e}))}})))};function IO(){return IO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IO.apply(this,arguments)}function xO(e){return function(e){if(Array.isArray(e))return FO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||BO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function TO(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){AO(a,r,o,i,u,"next",e)}function u(e){AO(a,r,o,i,u,"throw",e)}i(void 0)}))}}function _O(e){return _O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_O(e)}function kO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kO(Object(n),!0).forEach((function(t){UO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||BO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BO(e,t){if(e){if("string"==typeof e)return FO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FO(e,t):void 0}}function FO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}CO.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},CO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var NO=function(e){var t=e.UIComponent,n=e.handleSuccessAdd,r=e.handleSuccessUpdateImporter,o=e.selectedImporter,s=e.handleCustomEditImporter,c=e.handleCustomAddImporter,l=LO(rn(),1)[0],f=LO(hn(),1)[0],p=LO(Br(),2)[1].showToast,d=LO(Bn(),2)[1],h=LO(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),y=h[0],v=h[1],m=LO(Object(i.useState)({}),2),b=m[0],g=m[1],O=LO(Object(i.useState)({}),2),w=O[0],j=O[1],S=LO(Object(i.useState)({}),2),E=S[0],P=S[1],C=LO(Object(i.useState)(!1),2),I=C[0],x=C[1],A=LO(Object(i.useState)({}),2),T=A[0],_=A[1],k=function(){document.getElementById("importer-form")&&document.getElementById("importer-form").reset()},D=function(){document.getElementById("field-form")&&document.getElementById("field-form").reset()},U=function(){k(),D(),g({}),j({}),_({}),v(DO(DO({},y),{},{changes:{}}))},L=function(){var t=TO(a.a.mark((function t(r){var o,i,u,s,h,m;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=3;break}return c(y.changes),t.abrupt("return");case 3:return p(Dr.Info,d("LOADING","Loading")),o=DO({},r||y.changes),t.prev=5,v(DO(DO({},y),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(o)},t.next=10,fetch("".concat(l.root,"/importers"),i);case 10:return u=t.sent,t.next=13,u.json();case 13:s=t.sent,h=s.error,m=s.result,h?v(DO(DO({},y),{},{loading:!1,result:{error:!0,result:m}})):(p(Dr.Success,d("IMPORTER_SAVED","Importer saved")),U(),v({loading:!1,changes:{},result:{error:!1,result:m}}),n&&n(m),e.onClose&&e.onClose()),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(5),v(DO(DO({},y),{},{result:{error:!0,result:[t.t0.message]},loading:!1}));case 22:case"end":return t.stop()}}),t,null,[[5,19]])})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=TO(a.a.mark((function t(n){var i,u,c,h,m,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=3;break}return s(y.changes),t.abrupt("return");case 3:return p(Dr.Info,d("LOADING","Loading")),i=DO({},n||y.changes),t.prev=5,v(DO(DO({},y),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(i)},t.next=10,fetch("".concat(l.root,"/importers/").concat(null==o?void 0:o.id),u);case 10:return c=t.sent,t.next=13,c.json();case 13:h=t.sent,m=h.error,b=h.result,m?v(DO(DO({},y),{},{loading:!1,result:{error:!0,result:b}})):(p(Dr.Success,d("IMPORTER_SAVED","Importer saved")),U(),v({loading:!1,changes:{},result:{error:!1,result:b}}),r&&r(b),e.onClos&&e.onClos()),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(5),v(DO(DO({},y),{},{result:{error:!0,result:[t.t0.message]},loading:!1}));case 22:case"end":return t.stop()}}),t,null,[[5,19]])})));return function(e){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){0!==Object.keys(E).length&&g(DO(DO({},b),{},{metafields:E}))}),[E]),Object(i.useEffect)((function(){0!==Object.keys(w).length&&g(DO(DO({},b),{},{fields:w}))}),[w]),Object(i.useEffect)((function(){if(0!==Object.keys(b).length){var e=DO({},b);v(DO(DO({},y),{},{changes:DO(DO({},y.changes),{},{mapping:JSON.stringify(e)})}))}}),[b]);return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,IO({},e,{formState:y,mappingState:b,fieldList:w,metafieldList:E,editState:T,isEdit:I,handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=DO(DO({},n),{},UO({},e.name,e.value))})):n=UO({},e.target.name,e.target.value),v(DO(DO({},y),{},{changes:DO(DO({},y.changes),n)}))},handleChangeSelect:function(e,t){var n;n=UO({},e,t),v(DO(DO({},y),{},{changes:DO(DO({},y.changes),n)})),I||(g({}),k())},handleChangeMappingInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=DO(DO({},n),{},UO({},e.name,e.value))})):n=UO({},e.target.name,e.target.value),g(DO(DO({},b),n))},addNewField:function(e,t){var n=UO({},e,parseInt(t));j(DO(DO({},w),n)),D()},removeField:function(e){var t=DO({},w);delete t[e],j(t)},addNewMetaField:function(e,t){var n=UO({},e,parseInt(t));P(DO(DO({},E),n)),D()},removeMetaField:function(e){var t=DO({},E);delete t[e],P(t)},clearImorterForm:U,setIsEdit:x,handleCreateImporter:L,handleEditState:function(e){var t,n,r;"object"===_O(r=null==e||null===(t=e.mapping)||void 0===t?void 0:t.metafields)&&null!==r&&P(r);var o;"object"===_O(o=null==e||null===(n=e.mapping)||void 0===n?void 0:n.fields)&&null!==o&&j(o);var a;a=null==e?void 0:e.mapping,g(a),_(DO(DO({},T),{},{name:null==e?void 0:e.name,slug:null==e?void 0:e.slug,type:null==e?void 0:e.type,mapping:a,fields:o,metafields:r})),v(DO(DO({},y),{},{changes:DO(DO({},y.changes),{},{name:null==e?void 0:e.name,type:null==e?void 0:e.type})}))},editImporter:B,downloadCSV:function(){var e={business_id:10,external_business_id:120,name:"House mine",logo:'"https://res.cloudinary.com/ordering2/image/upload/f_auto,q_auto,h_100,c_limit/v1539095959/crya6ibldlsz4hjyo03e.jpg"',email:"test@ordering.co",slug:"test_slug",header:'"https://s3.amazonaws.com/ordering-images2/res/ordering/image/upload/bqvntsurh8opknu58z9f/1534196989.jpg"',about:"test about",address:'"5th Avenue, New York, NY, USA"',location:'"{""lat"":40.7552112,""lng"":-73.982322}"',timezone:"America/New_York",description:"test description",cellphone:"123123123123",phone:"123123",featured:1,enabled:1,front_layout:"food",seo_image:'"https://res.cloudinary.com/ordering2/image/upload/f_auto,q_auto,h_100,c_limit/v1539095959/crya6ibldlsz4hjyo03e.jpg"',seo_title:"seo title",seo_description:"seo description",category_id:10,external_category_id:120,external_parent_category_id:130,product_id:10,image:'"https://s3.amazonaws.com/ordering-images2/res/ordering/image/upload/wmpfkcedo4y2kwxcamve/1534167067.png"',rank:10,parent_category_id:20,external_product_id:100,price:10,images:'"https://s3.amazonaws.com/ordering-images2/res/ordering/image/upload/lx0zuprnuozhqmaa97jj/1534200630.jpg"',sku:"test_sku",inventoried:1,quantity:10,upselling:1,in_offer:1,offer_price:10,offer_rate:0,offer_rate_type:1,offer_include_options:1,tax_id:10,fee_id:10,estimated_person:'"test person"',barcode:'"0123456789"',barcode_alternative:'"0123"',seo_keywords:"test key",hide_special_instructions:1,maximum_per_order:2,minimum_per_order:1,extra_id:10,external_extra_id:100,extra_option_id:10,external_extra_option_id:100,extra_option_suboption_id:10,external_extra_option_suboption_id:100,min:1,max:1},t=["busines_id","external_business_id","category_id","external_category_id","external_parent_category_id","product_id","rank","external_product_id","extra_id","external_extra_id","extra_option_id","external_extra_option_id","extra_option_suboption_id","external_extra_option_suboption_id"],n=["slug","name","sku","seo_keywords"],r={};if("sync_multiple"===(null==o?void 0:o.type))o.mapping.forEach((function(e){var t=DO({},e),n=DO({},t.fields),o=t.type.replace("sync_","").replaceAll("_"," "),a={};for(var i in n)a[o+" "+i]=n[i];delete t.fields,delete t.metafields,delete t.type;var u=DO(DO({},t),a);r=DO(DO({},r),u)}));else{var a=DO({},b),i=DO({},a.fields);delete a.fields,delete a.metafields,r=DO(DO({},a),i)}var u=Object.values(r),s=Math.max.apply(Math,xO(u)),c=Array(s+1).fill(""),l=Array(s+1).fill(""),f=Array(s+1).fill("");for(var p in r){var d=p.replaceAll("_"," ");c[r[p]]=d.charAt(0).toUpperCase()+d.slice(1),"sync_multiple"!==(null==o?void 0:o.type)&&(l[r[p]]=e[p]||" ",t.includes(p)?f[r[p]]=e[p]+1:n.includes(p)?f[r[p]]=e[p]+"_2":f[r[p]]=e[p]||" ")}"sync_multiple"===(null==o?void 0:o.type)&&o.mapping.forEach((function(r){var o=DO({},r),a=DO({},o.fields);for(var i in delete o.fields,delete o.type,o)l[o[i]]=e[i]||" ",t.includes(i)?f[o[i]]=e[i]+1:n.includes(i)?f[o[i]]=e[i]+"_2":f[o[i]]=e[i]||" ";for(var u in a)l[a[u]]=e[u]||" ",t.includes(u)?f[a[u]]=e[u]+1:n.includes(u)?f[a[u]]=e[u]+"_2":f[a[u]]=e[u]||" "}));var h=[c,l,f].map((function(e){return e.join(",")})).join("\n"),y=document.createElement("a");y.download=(null==T?void 0:T.type)+".csv";var v=new Blob(["\ufeff",h],{type:"text/csv"}),m=new FileReader;m.readAsDataURL(v),m.onload=function(){y.href=m.result,y.click()}},handleUpdateMultipleMapping:function(e){_(DO(DO({},T),{},{mapping:e})),v(DO(DO({},y),{},{changes:DO(DO({},y.changes),{},{mapping:JSON.stringify(e)})}))}})))};function RO(){return RO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RO.apply(this,arguments)}function MO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zO(Object(n),!0).forEach((function(t){YO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}NO.propTypes={handleSuccessUpdateImporter:c.a.func,UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},NO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var JO=function(e){var t=e.UIComponent,n=qO(rn(),1)[0],r=qO(hn(),1)[0],o=qO(Object(i.useState)({loading:!1,changes:{separator:",",enclosure:'"',escape:"/",start_line:2},result:{error:!1}}),2),s=o[0],c=o[1],l=qO(Object(i.useState)({fileName:null,fileType:null,csvFile:null,importOptions:{separator:",",enclosure:'"',escape:"/",start_line:2}}),2),f=l[0],p=l[1],d=qO(Br(),2)[1].showToast,h=qO(Bn(),2)[1],y=function(){var e,t=(e=a.a.mark((function e(t){var o,i,u,l,p,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(Dr.Info,h("LOADING","Loading")),(o=new FormData).append("file",null==f?void 0:f.csvFile),i=GO({},null==f?void 0:f.importOptions),Object.keys(i).forEach((function(e){i[e]||delete i[e]})),o.append("import_options",JSON.stringify(i)),e.prev=6,c(GO(GO({},s),{},{loading:!0})),u={method:"POST",headers:{Authorization:"Bearer ".concat(r.token)},body:o},e.next=11,fetch("".concat(n.root,"/importers/").concat(t,"/jobs"),u);case 11:return l=e.sent,e.next=14,l.json();case 14:p=e.sent,y=p.error,v=p.result,y?c(GO(GO({},s),{},{loading:!1,result:{error:!0,result:v}})):(d(Dr.Success,h("IMPORTER_JOB_SAVED","Importer Job Created")),c({loading:!1,changes:{},result:{error:!1,result:v}})),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),c(GO(GO({},s),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 23:case"end":return e.stop()}}),e,null,[[6,20]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){MO(a,r,o,i,u,"next",e)}function u(e){MO(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,RO({},e,{formState:s,fileState:f,setFileState:p,handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=GO(GO({},n),{},YO({},e.name,e.value))})):n=YO({},e.target.name,e.target.value),p(GO(GO({},f),{},{importOptions:GO(GO({},f.importOptions),n)}))},handleUploadCsv:function(e){e&&p(GO(GO({},f),{},{fileName:e.name,fileType:e.type,csvFile:e}))},handleCreateImporterJob:y})))};function VO(){return VO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VO.apply(this,arguments)}function HO(e){return function(e){if(Array.isArray(e))return nw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WO(Object(n),!0).forEach((function(t){XO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function QO(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ZO(a,r,o,i,u,"next",e)}function u(e){ZO(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ew(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||tw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tw(e,t){if(e){if("string"==typeof e)return nw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nw(e,t):void 0}}function nw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}JO.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},JO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rw=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=ew(rn(),1)[0],s=ew(hn(),1)[0].token,c=ew(Object(i.useState)({loading:!1,error:null,importers:[]}),2),l=c[0],f=c[1],p=ew(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),d=p[0],h=p[1],y=ew(Object(i.useState)({}),2),v=y[0],m=y[1],b=ew(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(){var e=QO(a.a.mark((function e(t,n){var r,i,u,c,p,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f(KO(KO({},l),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},!t){e.next=9;break}return e.next=6,fetch("".concat(o.root,"/importers?page=").concat(t||d.currentPage,"&page_size=").concat(n||d.pageSize),r);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,fetch("".concat(o.root,"/importers"),r);case 11:e.t0=e.sent;case 12:return i=e.t0,e.next=15,i.json();case 15:u=e.sent,c=u.result,p=u.pagination,f(KO(KO({},l),{},{loading:!1,importers:c})),y=0,p.current_page!==p.total_pages&&(v=p.total-l.importers.length,y=v<p.page_size?v:p.page_size),h(KO(KO({},d),{},{currentPage:p.current_page,totalPages:p.total_pages,totalItems:p.total,from:p.from,to:p.to,nextPageItems:y})),m(KO({},p)),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(0),"Cancel"!==e.t1.constructor.name&&f(KO(KO({},l),{},{loading:!1,error:[e.t1.message]}));case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=QO(a.a.mark((function e(t){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(KO(KO({},g),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/importers/").concat(t),n);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error||(u=l.importers.filter((function(e){return e.id!==t})),m(KO(KO({},v),{},{totalPages:(null==v?void 0:v.totalPages)-1,totalItems:(null==v?void 0:v.totalItems)-1})),f(KO(KO({},l),{},{importers:u}))),O(KO(KO({},g),{},{loading:!1,error:i.error?i.result:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O(KO(KO({},g),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,VO({},e,{actionStatus:g,importerList:l,getImporters:w,paginationProps:d,paginationDetail:v,handleDeleteImporter:j,handleSuccessAddImporter:function(e){f(KO(KO({},l),{},{importers:[].concat(HO(l.importers),[e])})),m(KO(KO({},v),{},{total:null!=v&&v.total?(null==v?void 0:v.total)+1:1}))},handleSuccessUpdateImporter:function(e){var t=l.importers.map((function(t){return t.id===e.id?e:t}));f(KO(KO({},l),{},{importers:t}))}})))};function ow(){return ow=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ow.apply(this,arguments)}function aw(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=pw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function iw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function uw(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){iw(a,r,o,i,u,"next",e)}function u(e){iw(a,r,o,i,u,"throw",e)}i(void 0)}))}}function sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sw(Object(n),!0).forEach((function(t){lw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||pw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pw(e,t){if(e){if("string"==typeof e)return dw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dw(e,t):void 0}}function dw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}rw.propTypes={UIComponent:c.a.elementType,slug:c.a.string,isInitialRender:c.a.bool},rw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var hw=function(e){var t,n=e.UIComponent,r=e.propsToFetch,o=fw(rn(),1)[0],s=fw(hn(),1)[0],c=s.token,l=s.loading,f=fw(tr(),1)[0].configs,p=fw(Bn(),2)[1],d=fw(Object(i.useState)({loading:!1,businesses:[],error:null}),2),h=d[0],y=d[1],v=fw(Object(i.useState)({loading:!1,data:[],error:null}),2),m=v[0],b=v[1],g=(null==f||null===(t=f.order_types_allowed)||void 0===t?void 0:t.value.split("|").map((function(e){return Number(e)})))||[],O=[{value:1,name:p("DELIVERY","Delivery"),enabled:!0},{value:2,name:p("PICKUP","Pickup"),enabled:!0},{value:3,name:p("EAT_IN","Eat in"),enabled:!0},{value:4,name:p("CURBSIDE","Curbside"),enabled:!0},{value:5,name:p("DRIVE_THRU","Drive thru"),enabled:!0}],w=fw(Object(i.useState)(O.filter((function(e){return null==g?void 0:g.includes(e.value)}))),2),j=w[0],S=w[1],E=fw(Object(i.useState)({loading:!1,invoice:null,error:null}),2),P=E[0],C=E[1],I=fw(Object(i.useState)({type:"charge",from:"",to:"",business:"",cancelled:!1,discounts:!1,notes:"",percentage_fee:0,fixed_fee:0,tax:0,misc_amount:0,misc_description:""}),2),x=I[0],A=I[1],T=function(){var e=uw(a.a.mark((function e(){var t,n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(cw(cw({},h),{},{loading:!0})),e.next=4,o.businesses().asDashboard().select(r).get();case 4:t=e.sent,n=t.content,i=n.error,u=n.result,s=n.pagination,y(cw(cw({},h),{},i?{loading:!1,error:u}:{loading:!1,businesses:u,pagination:s})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),y(cw(cw({},h),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=uw(a.a.mark((function e(){var t,n,r,i,u,s,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,b(cw(cw({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},n="".concat(o.root,"/paymethods"),e.next=8,fetch(n,t);case 8:return r=e.sent,e.next=11,r.json();case 11:i=e.sent,u=i.error,s=i.result,u?b(cw(cw({},m),{},{loading:!1,error:s})):(f=s.filter((function(e){return e.enabled})),b(cw(cw({},m),{},{loading:!1,data:f}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),b(cw(cw({},m),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=uw(a.a.mark((function e(){var t,n,r,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(cw(cw({},P),{},{loading:!0})),t=[{attribute:"business_id",value:x.business}],x.from&&t.push({attribute:"delivery_datetime",value:{condition:">=",value:"".concat(x.from," 00:00:00")}}),x.to&&t.push({attribute:"delivery_datetime",value:{condition:"<=",value:"".concat(x.to," 23:59:59")}}),e.next=7,o.orders().asDashboard().where(t).get();case 7:n=e.sent,r=n.content,i=r.error,u=r.result,s=r.pagination,i?C(cw(cw({},P),{},{loading:!1,error:u})):(c=D(u),C(cw(cw({},P),{},{loading:!1,invoice:c,pagination:s}))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),C(cw(cw({},P),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t,n=[],r=aw(null==m?void 0:m.data);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.enabled&&n.push(o.id)}}catch(e){r.e(e)}finally{r.f()}var a=[];if(j){var i,u=aw(j);try{for(u.s();!(i=u.n()).done;){var s=i.value;s.enabled&&a.push(s.value)}}catch(e){u.e(e)}finally{u.f()}}var c=x.from.split("-");c=1===c.length?null:new Date(c[0],c[1]-1,c[2],0,0,0,0);var l=x.to.split("-");l=1===l.length?null:new Date(l[0],l[1]-1,l[2],0,0,0,0);var f=e.filter((function(e){var t=!0,r=e.delivery_datetime.split(" ");return r=new Date(r[0].split("-")[0],r[0].split("-")[1]-1,r[0].split("-")[2],0,0,0,0),(-1===n.indexOf(e.paymethod_id)||-1===a.indexOf(e.delivery_type)||-1===[0,1,7,8,9,11,15].indexOf(e.status)&&!x.cancelled)&&(t=!1),(c&&c>r||l&&l<r)&&(t=!1),t})),p={from:x.from,to:x.to,type:x.type,orders:f,percentage_fee:x.percentage_fee,fixed_fee:x.fixed_fee,tax:x.tax,misc_amount:("payout"!==x.type?1:-1)*x.misc_amount,misc_description:x.misc_description,inlcude_discounts:x.discounts,tax_products:"payout"!==x.type?0:null==f?void 0:f.reduce((function(e,t){return 1===t.tax_type?e:e+F(t)}),0),discounts:x.discounts?null==f?void 0:f.reduce((function(e,t){return e-N(t)}),0):0,orders_subtotal:null==f?void 0:f.reduce((function(e,t){return e+B(t)}),0),orders_total:null==f?void 0:f.reduce((function(e,t){return e+M(t)}),0),notes:x.notes.replace(/\n/g,"<br>")};p.percentage_fee_total=("payout"!==x.type?1:-1)*(p.orders_subtotal+p.discounts)*x.percentage_fee/100,p.fixed_fee_total=("payout"!==x.type?1:-1)*f.length*x.fixed_fee;var d=parseFloat(p.percentage_fee_total)+parseFloat(p.fixed_fee_total)+parseFloat(p.misc_amount)+parseFloat(p.discounts)+parseFloat(p.tax_products)+("payout"!==x.type?0:parseFloat(p.orders_subtotal));return p.subtotal=d,p.tax_total=("payout"!==x.type?1:-1)*d*parseFloat(x.tax)/100,p.total=d+p.tax_total,h.businesses.forEach((function(e){e.id===x.business&&(p.business=e)})),p},U=function(e,t){var n=1,r=t.price;return e.allow_suboptionQuantity&&t.quantity&&(n=t.quantity),e.with_half_option&&t.position&&"whole"!==t.position&&(r=t.half_price),r*n},L=function(e){var t=0;if(e.options)for(var n=0;n<e.options.length;n++){var r=e.options[n];if(r.suboptions)for(var o=0;o<r.suboptions.length;o++){var a=r.suboptions[o];t+=U(r,a)}}return(t+e.price)*e.quantity},B=function(e){if(e.summary){var t,n=!0;if(null!=f&&f.project_fix_order_summary)n="1"===(null==f||null===(t=f.project_fix_order_summary)||void 0===t?void 0:t.value);return 1!==e.tax_type||n?e.summary.subtotal:e.summary.subtotal+e.summary.tax}for(var r=0,o=0;o<e.products.length;o++)r+=L(e.products[o]);return R(r)},F=function(e){if(e.summary)return e.summary.tax;var t=2===e.tax_type?e.tax*(B(e)-e.discount)/100:0;return R(t)},N=function(e){return e.summary?e.summary.discount:R(e.discount)},R=function(e){var t,n=Math.pow(10,null==f||null===(t=f.format_number_decimal_length)||void 0===t?void 0:t.value);return Math.round(e*n)/n},M=function(e){if(e.summary)return e.summary.total;var t=B(e),n=F(e),r=z(e),o="2"===e.delivery_type?t+n+r-e.discount:t+n+e.delivery_zone_price+G(e)+r-e.discount;return R(o)},z=function(e){if(e.summary)return e.summary.service_fee;var t=(B(e)-e.discount)*e.service_fee/100;return R(t)},G=function(e){if(e.summary)return e.summary.driver_tip;var t=(B(e)-e.discount)*e.driver_tip/100;return R(t)};return Object(i.useEffect)((function(){T(),_()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,ow({},e,{businessList:h,invocing:x,payMethodsList:m,orderTypes:j,exportInvoiceList:P,handleChangeOrderTypes:S,handleChangeInvocing:A,handleChangePayMethods:function(e){b(cw(cw({},m),{},{data:e}))},getOrders:k,getSubtotal:B,getTotal:M})))};function yw(){return yw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yw.apply(this,arguments)}function vw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mw(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){vw(a,r,o,i,u,"next",e)}function u(e){vw(a,r,o,i,u,"throw",e)}i(void 0)}))}}function bw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bw(Object(n),!0).forEach((function(t){Ow(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ow(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ww(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||jw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jw(e,t){if(e){if("string"==typeof e)return Sw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sw(e,t):void 0}}function Sw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}hw.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var Ew=function(e){var t=e.UIComponent,n=e.propsToFetch,r=ww(rn(),1)[0],o=ww(hn(),1)[0],s=o.token,c=o.loading,l=ww(tr(),1)[0].configs,f=ww(Object(i.useState)({loading:!1,drivers:[],error:null}),2),p=f[0],d=f[1],h=ww(Object(i.useState)({loading:!1,data:[],error:null}),2),y=h[0],v=h[1],m=ww(Object(i.useState)({loading:!1,invoice:null,error:null}),2),b=m[0],g=m[1],O=ww(Object(i.useState)({from:"",to:"",driver:"",cancelled:!1,notes:"",percentage_fee:0,fixed_fee:0,percentage_delivery_price:0,percentage_driver_tip:0,tax:0,misc_amount:0,misc_description:""}),2),w=O[0],j=O[1],S=function(){var e=mw(a.a.mark((function e(){var t,o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(gw(gw({},p),{},{loading:!0})),t=[{attribute:"level",value:"4"}],e.next=5,r.users().asDashboard().select(n).where(t).get();case 5:o=e.sent,i=o.content,u=i.error,s=i.result,c=i.pagination,d(gw(gw({},p),{},u?{loading:!1,error:s}:{loading:!1,drivers:s,pagination:c})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(gw(gw({},p),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=mw(a.a.mark((function e(){var t,n,o,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(gw(gw({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},n="".concat(r.root,"/paymethods"),e.next=8,fetch(n,t);case 8:return o=e.sent,e.next=11,o.json();case 11:i=e.sent,u=i.error,l=i.result,u?v(gw(gw({},y),{},{loading:!1,error:l})):(f=l.filter((function(e){return e.enabled})),v(gw(gw({},y),{},{loading:!1,data:f}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),v(gw(gw({},y),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=mw(a.a.mark((function e(){var t,n,o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(gw(gw({},b),{},{loading:!0})),t=[{attribute:"driver_id",value:w.driver}],w.from&&t.push({attribute:"delivery_datetime",value:{condition:">=",value:"".concat(w.from," 00:00:00")}}),w.to&&t.push({attribute:"delivery_datetime",value:{condition:"<=",value:"".concat(w.to," 23:59:59")}}),e.next=7,r.orders().asDashboard().where(t).get();case 7:n=e.sent,o=n.content,i=o.error,u=o.result,s=o.pagination,i?g(gw(gw({},b),{},{loading:!1,error:u})):(c=C(u),g(gw(gw({},b),{},{loading:!1,invoice:c,pagination:s}))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),g(gw(gw({},b),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),C=function(e){var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=jw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(null==y?void 0:y.data);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.enabled&&n.push(o.id)}}catch(e){r.e(e)}finally{r.f()}var a=w.from.split("-");a=1===a.length?null:new Date(a[0],a[1]-1,a[2],0,0,0,0);var i=w.to.split("-");i=1===i.length?null:new Date(i[0],i[1]-1,i[2],0,0,0,0);var u=e.filter((function(e){var t=!0,r=e.delivery_datetime.split(" ");return r=new Date(r[0].split("-")[0],r[0].split("-")[1]-1,r[0].split("-")[2],0,0,0,0),(-1===n.indexOf(e.paymethod_id)||-1===[1,2,5,6,10,11,12].indexOf(e.status)||[2,5,6,10,12].indexOf(e.status)>-1&&!w.cancelled)&&(t=!1),(a&&a>r||i&&i<r)&&(t=!1),t})),s={from:w.from,to:w.to,orders:u,percentage_fee:w.percentage_fee,fixed_fee:w.fixed_fee,tax:w.tax,misc_amount:w.misc_amount,misc_description:w.misc_description,orders_subtotal:null==u?void 0:u.reduce((function(e,t){return e+A(t)}),0),orders_total:null==u?void 0:u.reduce((function(e,t){return e+k(t)}),0),discounts:null==u?void 0:u.reduce((function(e,t){return e-T(t)}),0),percentage_delivery_price:w.percentage_delivery_price,percentage_delivery_price_total:(null==u?void 0:u.reduce((function(e,t){return e+t.delivery_zone_price}),0))*w.percentage_delivery_price/100,percentage_driver_tip:w.percentage_driver_tip,percentage_driver_tip_total:(null==u?void 0:u.reduce((function(e,t){return e+U(t)}),0))*w.percentage_driver_tip/100,notes:w.notes.replace(/\n/g,"<br>")};s.percentage_fee_total=(s.orders_subtotal+s.discounts)*w.percentage_fee/100,s.fixed_fee_total=u.length*w.fixed_fee;var c=parseFloat(s.percentage_fee_total)+parseFloat(s.fixed_fee_total)+parseFloat(s.misc_amount)+parseFloat(s.percentage_delivery_price_total)+parseFloat(s.percentage_driver_tip_total);return s.subtotal=c,s.tax_total=c*parseFloat(w.tax)/100,s.total=c+s.tax_total,p.drivers.forEach((function(e){e.id===w.driver&&(s.driver=e)})),s},I=function(e,t){var n=1,r=t.price;return e.allow_suboptionQuantity&&t.quantity&&(n=t.quantity),e.with_half_option&&t.position&&"whole"!==t.position&&(r=t.half_price),r*n},x=function(e){var t=0;if(e.options)for(var n=0;n<e.options.length;n++){var r=e.options[n];if(r.suboptions)for(var o=0;o<r.suboptions.length;o++){var a=r.suboptions[o];t+=I(r,a)}}return(t+e.price)*e.quantity},A=function(e){if(e.summary){var t,n=!0;if(null!=l&&l.project_fix_order_summary)n="1"===(null==l||null===(t=l.project_fix_order_summary)||void 0===t?void 0:t.value);return 1!==e.tax_type||n?e.summary.subtotal:e.summary.subtotal+e.summary.tax}for(var r=0,o=0;o<e.products.length;o++)r+=x(e.products[o]);return _(r)},T=function(e){return e.summary?e.summary.discount:_(e.discount)},_=function(e){var t,n=Math.pow(10,null==l||null===(t=l.format_number_decimal_length)||void 0===t?void 0:t.value);return Math.round(e*n)/n},k=function(e){if(e.summary)return e.summary.total;var t=A(e),n=function(e){if(e.summary)return e.summary.tax;var t=2===e.tax_type?e.tax*(A(e)-e.discount)/100:0;return _(t)}(e),r=D(e),o="2"===e.delivery_type?t+n+r-e.discount:t+n+e.delivery_zone_price+U(e)+r-e.discount;return _(o)},D=function(e){if(e.summary)return e.summary.service_fee;var t=(A(e)-e.discount)*e.service_fee/100;return _(t)},U=function(e){if(e.summary)return e.summary.driver_tip;var t=(A(e)-e.discount)*e.driver_tip/100;return _(t)};return Object(i.useEffect)((function(){S(),E()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,yw({},e,{driverList:p,invocing:w,payMethodsList:y,exportInvoiceList:b,handleChangeInvocing:j,handleChangePayMethods:function(e){v(gw(gw({},y),{},{data:e}))},getOrders:P,getSubtotal:A,getTotal:k})))};function Pw(){return Pw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pw.apply(this,arguments)}function Cw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Iw(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Cw(a,r,o,i,u,"next",e)}function u(e){Cw(a,r,o,i,u,"throw",e)}i(void 0)}))}}function xw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xw(Object(n),!0).forEach((function(t){Tw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ew.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ew.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var Dw=function(e){var t=e.UIComponent,n=_w(rn(),1)[0],r=_w(Bn(),2)[1],o=_w(hn(),1)[0].loading,s=_w(Br(),2)[1].showToast,c=_w(Object(i.useState)({loading:!1,translations:[],result:{error:null}}),2),l=c[0],f=c[1],p=_w(Object(i.useState)(null),2),d=p[0],h=p[1],y=_w(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),v=y[0],m=y[1],b=function(e){f(Aw(Aw({},l),{},{translations:e}))},g=function(){var e=Iw(a.a.mark((function e(){var t,o,i,u,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Aw(Aw({},v),{},{loading:!0})),s(Dr.Info,r("LOADING","Loading")),u={key:null==v||null===(t=v.changes)||void 0===t?void 0:t.key,text:null==v||null===(o=v.changes)||void 0===o?void 0:o.text},e.next=6,n.translations(null==v||null===(i=v.changes)||void 0===i?void 0:i.id).save(u);case 6:c=e.sent,l=c.content,f=l.error,p=l.result,f?m(Aw(Aw({},v),{},{loading:!1,error:p})):(m(Aw(Aw({},v),{},{loading:!1,changes:{}})),s(Dr.Success,r("WEB_APP_LANG_SAVED","Language change saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(Aw(Aw({},v),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Iw(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(Aw(Aw({},l),{},{loading:!0})),e.next=6,n.translations().get();case 6:t=e.sent,r=t.content,i=r.error,u=r.result,f(Aw(Aw({},l),{},i?{loading:!1,error:u}:{loading:!1,translations:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),f(Aw(Aw({},l),{},{loading:!1,error:e.t0}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){O()}),[]),Object(i.useEffect)((function(){Object.keys(null==v?void 0:v.changes).length>0&&g()}),[null==v?void 0:v.changes]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Pw({},e,{translationList:l,handleUpdateTranslationList:b,textEditState:v.changes,searchValue:d,onSearch:h,handleChangeText:function(e,t,n){var r=null==l?void 0:l.translations.map((function(e){return e.key===t?Aw(Aw({},e),{},{text:n}):e}));d&&h(t),b&&b(r),m(Aw(Aw({},v),{},{changes:{id:e,key:t,text:n}}))},getTranslations:O})))};function Uw(){return Uw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uw.apply(this,arguments)}function Lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lw(Object(n),!0).forEach((function(t){Fw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Dw.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Dw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Mw=function(e){var t,n=e.currentLanguage,r=e.languages,o=e.UIComponent,a=Nw(Object(i.useState)({loading:!r,languages:r,error:null}),2),s=a[0],c=a[1],l=Nw(Bn(),3),f=l[0],p=l[2].setLanguage,d=Nw(Object(i.useState)(null),2),h=d[0],y=d[1],v={};return Object(i.useEffect)((function(){if(!f.loading){if((null==r?void 0:r.length)>0)c(Bw(Bw({},s),{},{loading:!1,languages:r}));else{var e=f.languageList.filter((function(e){return e.enabled}));c(Bw(Bw({},s),{},{loading:!1,languages:e}))}return function(){v.languages&&v.languages.cancel()}}}),[f]),Object(i.useEffect)((function(){var e;if(n){var t=r.find((function(e){return e.code===n}));p(t),y(t)}else if(null==f||null===(e=f.language)||void 0===e||!e.code||null==h||!h.code){var o,a,i=null!=f&&null!==(o=f.language)&&void 0!==o&&o.code?null==f?void 0:f.language:null==s||null===(a=s.languages)||void 0===a?void 0:a.find((function(e){return e.default}));i&&(p(i),y(i))}}),[r,s]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Uw({},e,{currentLanguage:e.handlerCustomChangeLanguage?null==h?void 0:h.code:null==f||null===(t=f.language)||void 0===t?void 0:t.code,languagesState:s,handleChangeLanguage:function(t){var n=s.languages.find((function(e){return e.code===t}));if(e.handlerCustomChangeLanguage)return e.handlerCustomChangeLanguage(n),void y(n);e.onChangeLanguage&&e.onChangeLanguage(n),p(n)}})))};function zw(){return zw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zw.apply(this,arguments)}function Gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gw(Object(n),!0).forEach((function(t){qw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $w(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Jw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Mw.propTypes={UIComponent:c.a.elementType,currentLanguage:c.a.string,languages:c.a.arrayOf(c.a.object),onChangeLanguage:c.a.func,handlerCustomChangeLanguage:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Mw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Hw=function(e){var t=e.UIComponent,n=Jw(rn(),1)[0],r=Jw(Br(),2)[1].showToast,o=Jw(Bn(),3),s=o[0],c=o[1],l=o[2].updateLanguageListState,f=Jw(Object(i.useState)({fields:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=Jw(Object(i.useState)({loading:!1,error:null}),2),y=h[0],v=h[1],m=function(){var e,t=(e=a.a.mark((function e(t,o){var i,u,s,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(Dr.Info,c("LOADING","Loading")),v(Yw(Yw({},y),{},{loading:!0})),e.next=5,n.languages(t).save(o);case 5:i=e.sent,u=i.content,s=u.error,f=u.result,s?v({loading:!1,error:f}):(v({loading:!1,error:null}),r(Dr.Success,c("WEB_APP_LANG_SAVED","Language change saved")),h=p.fields.filter((function(e){return e.id===t&&Object.assign(e,f),!0})),d(Yw(Yw({},p),{},{fields:h})),l(f)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$w(a,r,o,i,u,"next",e)}function u(e){$w(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){s.loading||d(Yw(Yw({},p),{},{loading:!1,fields:s.languageList}))}),[s.languageList]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,zw({},e,{languageFiledsState:p,handleChangeFieldSetting:m})))};function Ww(){return Ww=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ww.apply(this,arguments)}function Kw(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=nj(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Xw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Zw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zw(Object(n),!0).forEach((function(t){ej(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ej(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||nj(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nj(e,t){if(e){if("string"==typeof e)return rj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rj(e,t):void 0}}function rj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Hw.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Hw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var oj=function(e){var t=e.UIComponent,n=e.translationList,r=e.handleUpdateTranslationList,o=e.getTranslations,s=tj(rn(),1)[0],c=tj(hn(),1)[0],l=c.token,f=c.loading,p=tj(Bn(),2)[1],d=tj(Br(),2)[1].showToast,h=tj(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),y=h[0],v=h[1],m=tj(Object(i.useState)({row:-1,col:-1}),2),b=m[0],g=m[1],O=tj(Object(i.useState)(!1),2),w=O[0],j=O[1],S=function(){var e,t=(e=a.a.mark((function e(t,i,u){var c,h,m,b,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(Qw(Qw({},y),{},{loading:!0})),d(Dr.Info,p("LOADING","Loading")),c={method:i?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({translations:JSON.stringify(t)})},h="".concat(s.root,"/bulks/translations"),e.next=9,fetch(h,c);case 9:return m=e.sent,e.next=12,m.json();case 12:b=e.sent,g=b.error,O=b.result,g?v(Qw(Qw({},y),{},{loading:!1,result:{error:!0,result:O}})):(v(Qw(Qw({},y),{},{loading:!1,result:{error:!1,result:O}})),i?o():(w=null==n?void 0:n.translations.map((function(e){var n,r=Kw(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.id===e.id)return Qw(Qw({},e),{},{key:o.key,text:o.text})}}catch(e){r.e(e)}finally{r.f()}return e})),r(w)),d(Dr.Success,i?p("WEB_APP_LANG_ADDED","Language item added"):p("WEB_APP_LANG_SAVED","Language change saved"))),e.next=22;break;case 18:if(e.prev=18,e.t0=e.catch(2),v(Qw(Qw({},y),{},{result:{error:!0,result:e.t0.message},loading:!1})),i)for(j=t.length-1;j>=0;j--)u.alter("remove_row",t[j].row);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xw(a,r,o,i,u,"next",e)}function u(e){Xw(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ww({},e,{creationFormState:y,handleItemChange:function(e,t,n){if(w)j(!1);else{e=e||[];for(var r=[],o=[],a=[],i=[],u=0;u<e.length;u++){var s={key:!1,text:!1};if(e[u][2]!==e[u][3]){for(var c=!0,l=0;l<r.length;l++)if(r[l]===e[u][0]){c=!1;break}if(c){r.push(e[u][0]);var f=n.getSourceDataAtRow(e[u][0]);if(n.validateRows(r,(function(e){})),f.key||(s.key=!0,-1===i.indexOf(p("KEY_REQUIRED"))&&i.push(p("KEY_REQUIRED"))),f.text||(s.text=!0,-1===i.indexOf(p("TEXT_REQUIRED"))&&i.push(p("TEXT_REQUIRED"))),f.id){if(s.text||s.text)continue;a.push(f)}else{if(s.key||s.text)continue;f.row=e[u][0],o.push(f)}}}}i.length>0&&v(Qw(Qw({},y),{},{result:{error:!0,result:i}})),a.length>0&&S(a,!1,n),o.length>0&&S(o,!0,n)}},handleAfterSectionEnd:function(e,t,n,r,o){b.row===e&&b.col===t||e!==n||t!==r||(g({row:e,col:t}),o.deselectCell(),o.selectCell(e,t))},handleoutsideClickDeselects:function(){return g({row:-1,col:-1}),!1}})))};function aj(){return aj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aj.apply(this,arguments)}function ij(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function uj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uj(Object(n),!0).forEach((function(t){cj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}oj.propTypes={UIComponent:c.a.elementType,translationList:c.a.object,handleUpdateTranslationList:c.a.func,getTranslations:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},oj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var pj=function(e){var t=e.UIComponent,n=e.getTranslations,r=lj(rn(),1)[0],o=lj(Br(),2)[1].showToast,s=lj(Bn(),2)[1],c=lj(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(sj(sj({},l),{},{loading:!0})),o(Dr.Info,s("LOADING","Loading")),e.next=5,r.translations().save(null==l?void 0:l.changes);case 5:t=e.sent,i=t.content,u=i.error,c=i.result,u?f(sj(sj({},l),{},{loading:!1,result:{error:!0,result:c}})):(f(sj(sj({},l),{},{loading:!1,changes:{},result:{error:!1,result:c}})),n&&n(),o(Dr.Success,s("WEB_APP_LANG_ADDED","Language item added"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(sj(sj({},l),{},{loading:!1,result:{error:!0,result:e.t0}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ij(a,r,o,i,u,"next",e)}function u(e){ij(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,aj({},e,{creationFormState:l,handleChangeInput:function(e,t){f(sj(sj({},l),{},{changes:sj(sj({},null==l?void 0:l.changes),{},cj({},e,t.target.value))}))},handleUpdateClick:function(){p()}})))};function dj(){return dj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dj.apply(this,arguments)}function hj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hj(Object(n),!0).forEach((function(t){vj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bj(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){mj(a,r,o,i,u,"next",e)}function u(e){mj(a,r,o,i,u,"throw",e)}i(void 0)}))}}function gj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}pj.propTypes={UIComponent:c.a.elementType,getTranslations:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},pj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var wj=function(e){var t=e.UIComponent,n=e.handleButtonLoginClick,r=e.handleSuccessLogin,o=e.useLoginByEmail,s=e.useLoginByCellphone,c=e.useDefualtSessionManager,l=e.urlToRedirect,f=e.allowedLevels,p=gj(rn(),1)[0],d=e.defaultLoginTab,h=gj(Object(i.useState)({loading:!1,result:{error:!1}}),2),y=h[0],v=h[1],m=gj(Object(i.useState)({email:"",cellphone:"",password:""}),2),b=m[0],g=m[1],O=gj(Object(i.useState)({loading:!1,result:{error:!1}}),2),w=O[0],j=O[1],S=gj(Object(i.useState)({loading:!1,result:{error:!1}}),2),E=S[0],P=S[1],C=gj(zn(),1)[0],I=gj(Bn(),2)[1],x=gj(tr(),1)[0].configs,A=gj(Object(i.useState)(null),2),T=A[0],_=A[1],k=gj(Object(i.useState)(!1),2),D=k[0],U=k[1];o||s?"email"===d&&!o&&s?d="cellphone":"cellphone"===d&&!s&&o&&(d="email"):d="none";var L=gj(Object(i.useState)(d||(s&&!o?"cellphone":"email")),2),B=L[0],F=L[1],N=gj(hn(),2)[1],R=N.login,M=N.logout,z=function(){var e=bj(a.a.mark((function e(t){var n,o,i,u,s,d,h,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,vj(n={},B,t&&t[B]||b[B]),vj(n,"password",t&&(null==t?void 0:t.password)||b.password),o=n,!D){e.next=9;break}if(null!==T){e.next=8;break}return v({result:{error:!0,result:I("RECAPTCHA_VALIDATION_IS_REQUIRED","The captcha validation is required")},loading:!1}),e.abrupt("return");case 8:o.verification_code=T;case 9:return v(yj(yj({},y),{},{loading:!0})),e.next=12,p.users().auth(o);case 12:if(i=e.sent,u=i.content,s=u.error,d=u.result,D&&(window.grecaptcha.reset(),_(null)),s){e.next=39;break}if(!c){e.next=36;break}if(!(f&&(null==f?void 0:f.length)>0)){e.next=35;break}if(h=d.level,m=d.session.access_token,f.includes(h)){e.next=35;break}return e.prev=22,e.next=25,p.setAccessToken(m).users().logout();case 25:g=e.sent,g.content.error||M(),v({result:{error:!0,result:["YOU_DO_NOT_HAVE_PERMISSION"]},loading:!1}),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(22),v({result:{error:!0,result:e.t0.message},loading:!1});case 34:return e.abrupt("return");case 35:R({user:d,token:d.session.access_token,project:null==p?void 0:p.project});case 36:C.emit("userLogin",d),r&&r(d),l&&(window.location.href="".concat(window.location.origin).concat(l));case 39:v({result:{error:s,result:d},loading:!1}),e.next=45;break;case 42:e.prev=42,e.t1=e.catch(0),v({result:{error:!0,result:e.t1.message},loading:!1});case 45:case"end":return e.stop()}}),e,null,[[0,42],[22,31]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=bj(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(yj(yj({},w),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/auth/sms/twilio/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cellphone:t.cellphone,country_phone_code:"+".concat(t.country_phone_code)})});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,j(yj(yj({},w),{},{loading:!1,result:r})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),j(yj(yj({},w),{},{loading:!1,result:{error:e.t0.message}}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=bj(a.a.mark((function e(t){var n,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(yj(yj({},E),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/auth/sms/twilio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return o=e.sent,e.next=7,o.json();case 7:null!=(i=e.sent)&&i.error||null==i||null===(n=i.result)||void 0===n||!n.id||(R({user:null==i?void 0:i.result,token:null==i||null===(u=i.result)||void 0===u||null===(s=u.session)||void 0===s?void 0:s.access_token,project:null==p?void 0:p.project}),r&&r(null==i?void 0:i.result)),P(yj(yj({},E),{},{loading:!1,result:i})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),P(yj(yj({},E),{},{loading:!1,result:{error:e.t0.message}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;U((null==p?void 0:p.project)&&x&&Object.keys(x).length>0&&"1"===(null==x||null===(e=x.security_recaptcha_auth)||void 0===e?void 0:e.value))}),[x,null==p?void 0:p.project]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,dj({},e,{formState:y,loginTab:B,credentials:b,verifyPhoneState:w,checkPhoneCodeState:E,setCheckPhoneCodeState:function(e){P(e||{loading:!1,result:{error:!1}})},handleChangeInput:function(e){g(yj(yj({},b),{},vj({},e.target.name,e.target.value)))},handleButtonLoginClick:n||z,handleChangeTab:function(e){F(e)},handleSendVerifyCode:G,handleCheckPhoneCode:Y,isReCaptchaEnable:D,handleReCaptcha:_})))};function jj(){return jj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jj.apply(this,arguments)}function Sj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ej(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sj(Object(n),!0).forEach((function(t){Pj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ij(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}wj.propTypes={UIComponent:c.a.elementType,handleButtonLoginClick:c.a.func,handleSuccessLogin:c.a.func,useDefualtSessionManager:c.a.bool,useLoginByEmail:c.a.bool,useLoginByCellphone:c.a.bool,defaultLoginTab:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToSignup:c.a.string,linkToForgetPassword:c.a.string,elementLinkToSignup:c.a.element,elementLinkToForgotPassword:c.a.element},wj.defaultProps={defaultLoginTab:"email",useLoginByEmail:!0,useDefualtSessionManager:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Aj=function(e){var t=e.orderId,n=e.UIComponent,r=Ij(rn(),1)[0],o=Ij(hn(),1)[0],s=Ij(Object(i.useState)({data:[],loading:!0,error:null}),2),c=s[0],l=s[1],f=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Ej(Ej({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/logistic/orders/").concat(t,"/information"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,i.ok?l({error:null,loading:!1,data:s}):l(Ej(Ej({},c),{},{loading:!1,error:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(Ej(Ej({},c),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Cj(a,r,o,i,u,"next",e)}function u(e){Cj(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){f()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,jj({},e,{logisticInformation:c,getLogistics:f})))};function Tj(){return Tj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tj.apply(this,arguments)}function _j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_j(Object(n),!0).forEach((function(t){Dj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Lj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Aj.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Aj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Fj=function(e){var t=e.orderId,n=e.UIComponent,r=Lj(rn(),1)[0],o=Lj(hn(),1)[0],s=Lj(Bn(),2)[1],c=Lj(Pr(),1)[0],l=c.getOrderState,f=c.parseDistance,p=Lj(Object(i.useState)({logs:[],loading:!0,error:null}),2),d=p[0],h=p[1],y=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(kj(kj({},d),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/orders/").concat(t,"/logs?order_id=").concat(t),n);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,h(kj(kj({},d),{},{loading:!1,logs:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(kj(kj({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Uj(a,r,o,i,u,"next",e)}function u(e){Uj(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){y()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Tj({},e,{logisticList:d,parseLog:function(e){var t=function(e,t){var n=s("LOG_"+e.toUpperCase());for(var r in t){var o=t[r];"distance"===r||"coverage"===r?o=f(t[r]):"with_orders"===r?(o=t[r].join(", "),r="orders"):"status"===r&&(o=l(t[r])),n=n.replace("_"+r+"_",o)}return n},n=e.data?e.data:{};return-1!==["logistic_driver_found","logistic_driver_found_group","logistic_driver_not_found","logistic_driver_not_found_group","logistic_driver_found_in_coverage","logistic_driver_found_in_coverage_group","logistic_driver_found_out_coverage","logistic_driver_found_out_coverage_group","logistic_driver_autoaccepted","logistic_driver_autoaccepted_group","logistic_request_autorejected","logistic_request_autorejected_group","logistic_assign_request_accepted","logistic_assign_request_accepted_group","logistic_assign_request_rejected","logistic_assign_request_rejected_group","logistic_manual_driver_assignment","logistic_manual_driver_unassignment","logistic_driver_autoassigned_group"].indexOf(e.event)||e.driver_id?(e.driver&&(n.driver=e.driver.name+(e.driver.lastname?e.driver.lastname:"")),t(e.event,n)):e.driver_company_id||e.external_driver_id?(e.driver_company&&(n.driver_company=e.driver_company.name),e.external_driver&&(n.external_driver=e.external_driver.name),t(e.event,n)):-1!==["logistic_started","logistic_finished","logistic_expired","logistic_resolved","logistic_reset","logistic_grouped","logistic_cancelled","logistic_not_grouped","logistic_order_queued","logistic_order_out_queued","logistic_driver_company_not_found"].indexOf(e.event)?t(e.event,n):s(e.event.toUpperCase())+"<br />"+JSON.stringify(e.data)}})))};function Nj(){return Nj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nj.apply(this,arguments)}function Rj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rj(Object(n),!0).forEach((function(t){zj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Yj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Fj.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Fj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $j=function(e){var t,n=e.UIComponent,r=e.handleSuccessLogout,o=e.token,s=e.isNative,c=e.useDefualtSessionManager,l=Yj(rn(),1)[0],f=Yj(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],h=Yj(hn(),2),y=h[0],v=h[1].logout,m=Yj(tr(),1)[0].configs;Object(i.useEffect)((function(){var e;if(null!=m&&null!==(e=m.facebook_id)&&void 0!==e&&e.value&&!s){if(window.fbAsyncInit=function(){var e;window.FB.init({appId:null==m||null===(e=m.facebook_id)||void 0===e?void 0:e.value,cookie:!0,xfbml:!1,version:"v7.0",status:!0})},window.document.getElementById("facebook-jssdk"))return;var t=window.document.createElement("script"),n=window.document.getElementsByTagName("script")[0];t.id="facebook-jssdk",t.async=!0,t.defer=!0,t.src="https://connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(t,n)}}),[null==m||null===(t=m.facebook_id)||void 0===t?void 0:t.value]);var b=function(){var e,t=(e=a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Mj(Mj({},p),{},{loading:!0})),t=o||y.token,e.next=5,l.setAccessToken(t).users().logout();case 5:n=e.sent,d({result:n.content,loading:!1}),n.content.error||(c&&v(),r&&r()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Gj(a,r,o,i,u,"next",e)}function u(e){Gj(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Nj({},e,{formState:p,handleLogoutClick:b})))};function Jj(){return Jj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jj.apply(this,arguments)}function Vj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Hj(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Vj(a,r,o,i,u,"next",e)}function u(e){Vj(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Wj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wj(Object(n),!0).forEach((function(t){Xj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}$j.propTypes={UIComponent:c.a.elementType,handleSuccessLogout:c.a.func,handleErrorLogout:c.a.func,token:c.a.string,useDefualtSessionManager:c.a.bool},$j.defaultProps={useDefualtSessionManager:!0};var eS=function(e){var t=e.UIComponent,n=e.walletData,r=e.handleUpdateWalletBusiness,o=e.handleUpdateBusinessList,s=e.handleUpdatePointsWallet,c=e.isBusiness,l=e.selectedBusinessList,f=Zj(rn(),1)[0],p=Zj(hn(),1)[0].token,d=Zj(Br(),2)[1].showToast,h=Zj(Bn(),2)[1],y=Zj(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=y[0],m=y[1],b=function(){var e=Hj(a.a.mark((function e(t,i){var u,l,y,b,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,h("LOADING","Loading")),m(Kj(Kj({},v),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(i)},l=c?"".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.loyalty_plan_id,"/businesses/").concat(t):"".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.id),e.next=7,fetch(l,u);case 7:return y=e.sent,e.next=10,y.json();case 10:b=e.sent,g=b.error,O=b.result,g?m(Kj(Kj({},v),{},{loading:!1,error:O})):(d(Dr.Success,h("POINTS_WALLET_UPDATED","Points wallet updated")),m(Kj(Kj({},v),{},{loading:!1,error:null,changes:{}})),r&&r(O),o&&o(i),!c&&s&&s(O)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),m(Kj(Kj({},v),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Hj(a.a.mark((function e(t){var n,r,o,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,h("LOADING","Loading")),m(Kj(Kj({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(t)},r="".concat(f.root,"/loyalty_plans"),e.next=7,fetch(r,n);case 7:return o=e.sent,e.next=10,o.json();case 10:i=e.sent,u=i.error,l=i.result,u?m(Kj(Kj({},v),{},{loading:!1,error:l})):(d(Dr.Success,h("POINTS_WALLET_CREATED","Points wallet created")),m(Kj(Kj({},v),{},{loading:!1,error:null,changes:{}})),!c&&s&&s(l)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),m(Kj(Kj({},v),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m(Kj(Kj({},v),{},{changes:{}}))}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Jj({},e,{formState:v,setFormState:m,handleClickSubmit:function(){if(0!==Object.keys(null==v?void 0:v.changes).length)if(n)b(null==n?void 0:n.id,null==v?void 0:v.changes);else{var e=l.filter((function(e){return e.wallet_enabled})).map((function(e){return{id:e.id,redeems:(null==e?void 0:e.redeems)||!1,accumulates:(null==e?void 0:e.accumulates)||!1}})),t=Kj({name:"Loyalty Point Plan",type:"credit_point",redemption_rate:null,accumulation_rate:null,businesses:JSON.stringify(e)},null==v?void 0:v.changes);g(t)}},handleChangeInput:function(e){var t=e.target.value;m(Kj(Kj({},v),{},{changes:Kj(Kj({},v.changes),{},Xj({},e.target.name,t))}))},handleChangeItem:function(e){m(Kj(Kj({},v),{},{changes:Kj(Kj({},v.changes),e)}))}})))};function tS(){return tS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tS.apply(this,arguments)}function nS(e){return function(e){if(Array.isArray(e))return lS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rS(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function oS(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rS(a,r,o,i,u,"next",e)}function u(e){rS(a,r,o,i,u,"throw",e)}i(void 0)}))}}function aS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aS(Object(n),!0).forEach((function(t){uS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||cS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cS(e,t){if(e){if("string"==typeof e)return lS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lS(e,t):void 0}}function lS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eS.propTypes={UIComponent:c.a.elementType,walletData:c.a.object,handleUpdateWalletBusiness:c.a.func,handleUpdateBusinessList:c.a.func,handleUpdatePointsWallet:c.a.func,isBusiness:c.a.bool,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fS=function(e){var t=e.UIComponent,n=e.pointWallet,r=e.propsToFetch,o=e.handleUpdateWalletBusiness,s=e.handleAddWalletBusiness,c=e.handleDeleteWalletBusiness,l=e.setSelectedBusinessList,f=sS(rn(),1)[0],p=sS(hn(),1)[0].token,d=sS(Br(),2)[1].showToast,h=sS(Bn(),2)[1],y=sS(Object(i.useState)({loading:!0,error:null,businesses:[],pagination:null}),2),v=y[0],m=y[1],b=sS(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(e,t){var n=v.businesses.map((function(n){return n.id===e?iS(iS({},n),t):n}));m(iS(iS({},v),{},{businesses:n}))},j=function(e,t){var n=v.businesses.map((function(n){return n.id===e.business_id?iS(iS(iS(iS(iS(iS(iS(iS(iS({},n),{},{wallet_enabled:t},!t&&{redeems:!1}),!t&&{accumulates:!1}),!t&&{redemption_rate:null}),!t&&{accumulation_rate:null}),!t&&{expire_after_minutes:null}),!t&&{maximum_accumulation:null}),!t&&{maximum_redemption_rate:null}),!t&&{maximum_redemption_type:null}):n}));m(iS(iS({},v),{},{businesses:n}))},S=function(){var e=oS(a.a.mark((function e(t,r){var i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,h("LOADING","Loading")),O(iS(iS({},g),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(r)},e.next=6,fetch("".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.id,"/businesses/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:s=e.sent,c=s.error,l=s.result,c?O({loading:!1,error:l}):(d(Dr.Success,h("WALLET_BUSINESS_UPDATED","Wallet business updated")),O({loading:!1,error:null}),o&&o(l),w(t,r)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=oS(a.a.mark((function e(t){var r,o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,h("LOADING","Loading")),O(iS(iS({},g),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(t)},e.next=6,fetch("".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.id,"/businesses"),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,u=i.error,c=i.result,u?O({loading:!1,error:c}):(d(Dr.Success,h("WALLET_BUSINESS_ENABLED","Wallet business enabled")),O({loading:!1,error:null}),s&&s(c),j(c,!0)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=oS(a.a.mark((function e(t){var r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,h("LOADING","Loading")),O(iS(iS({},g),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=6,fetch("".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.id,"/businesses/").concat(t),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,u=i.error,s=i.result,u?O({loading:!1,error:s}):(d(Dr.Success,h("WALLET_BUSINESS_DISABLED","Wallet business disabled")),O({loading:!1,error:null}),c&&c(s),j(s,!1)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=oS(a.a.mark((function e(){var t,o,i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(iS(iS({},v),{},{loading:!0})),t=f.businesses().asDashboard().select(r),e.next=5,t.get();case 5:o=e.sent,i=o.content,u=i.error,s=i.result,c=i.pagination,u?m(iS(iS({},v),{},{loading:!1,error:s})):([],l=s.map((function(e){var t=null==n?void 0:n.businesses.find((function(t){return t.business_id===e.id}));return t?iS(iS(iS({},t),e),{},{wallet_enabled:!0}):iS(iS({},e),{},{redeems:!1,accumulates:!1,wallet_enabled:!1,loyalty_plan_id:null==n?void 0:n.id,redemption_rate:null,accumulation_rate:null,expire_after_minutes:null,maximum_accumulation:null,maximum_redemption_rate:null,maximum_redemption_type:null})})),m(iS(iS({},v),{},{loading:!1,businesses:l,pagination:c}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(iS(iS({},v),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return C(),e.abort()}),[]),Object(i.useEffect)((function(){l(nS(null==v?void 0:v.businesses))}),[null==v?void 0:v.businesses]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,tS({},e,{businessList:v,handleCheckBox:function(e,t,r){var o=uS({},t,r);n?S(e,o):w(e,o)},handleUpdateBusinessList:w,handleChangeSwitch:function(e,t){if(n)if(t){var r,o=null==v||null===(r=v.businesses)||void 0===r?void 0:r.find((function(t){return t.id===e}));if(o){var a={business_id:e,redeems:null==o?void 0:o.redeems,accumulates:null==o?void 0:o.accumulates,loyalty_plan_id:null==n?void 0:n.id};E(a)}}else P(e);else{var i=null==v?void 0:v.businesses.map((function(n){return e===n.id?iS(iS({},n),{},{wallet_enabled:t}):n}));m(iS(iS({},v),{},{businesses:i}))}}})))};function pS(){return pS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pS.apply(this,arguments)}function dS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dS(Object(n),!0).forEach((function(t){yS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vS(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fS.propTypes={UIComponent:c.a.elementType,pointWallet:c.a.object,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var gS=function(e){var t,n=e.searchByAddress,r=e.handlerFindBusiness,o=e.UIComponent,s=mS(rn(),1)[0],c=mS(vr(),1)[0],l=mS(Object(i.useState)({countries:[],cities:[],citiesOptions:[]}),2),f=l[0],p=l[1],d=mS(Object(i.useState)({cityId:null,dropdownOptionId:null,orderType:(null===(t=c.options)||void 0===t?void 0:t.type)||1}),2),h=d[0],y=d[1],v=mS(Object(i.useState)(!1),2),m=v[0],b=v[1],g=function(){var e,t=(e=a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.countries().get();case 3:n=e.sent,r=n.response,p(hS(hS({},f),{},{countries:null==r||null===(t=r.data)||void 0===t?void 0:t.result})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){vS(a,r,o,i,u,"next",e)}function u(e){vS(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){n||g()}),[]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,pS({},e,{orderState:c,allListValues:f,currentValues:h,isFormErrors:m,handleChangeValue:function(e){var t=e.name,n=e.value;switch(t){case"country":var r=null==f?void 0:f.countries.find((function(e){return Number(e.id)===Number(n)})),o=null==r?void 0:r.cities.filter((function(e){return e.options.length}));p(hS(hS({},f),{},{cities:o})),y(hS(hS({},h),{},{cityId:null}));break;case"cityId":var a=f.cities.find((function(e){return Number(e.id)===Number(n)}));p(hS(hS({},f),{},{citiesOptions:null==a?void 0:a.options})),y(hS(hS({},h),{},{cityId:n,dropdownOptionId:null}));break;case"dropdownOptionId":y(hS(hS({},h),{},{dropdownOptionId:n}))}},handleFindBusiness:function(){var e=!(f.citiesOptions.length>0)||!!h.dropdownOptionId,t=h.cityId&&e;t&&r(h),b(!t)}})))};function OS(){return OS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OS.apply(this,arguments)}function wS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wS(Object(n),!0).forEach((function(t){SS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function SS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ES(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return PS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gS.propTypes={UIComponent:c.a.elementType,searchByAddress:c.a.bool,handlerFindBusiness:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var CS=function(e){var t,n=e.maxPreoderDays,r=e.UIComponent,o=ES(Object(i.useState)(null),2),a=o[0],s=o[1],c=ES(Object(i.useState)(null),2),l=c[0],f=c[1],p=ES(Object(i.useState)(null),2),d=p[0],h=p[1],y=ES(Object(i.useState)(null),2),v=y[0],m=y[1],b=ES(Object(i.useState)([]),2)[1],g=(null==l||null===(t=l.schedule)||void 0===t?void 0:t.map((function(e,t){return!e.enabled&&t})))||[],O=function(){var e=n,t=Yn()().toDate(),r=[],o=g.every((function(e){return!1===e}));if(g.length&&!o)for(;e>0;){var a=t,i=Yn()(t).day();!1===g[i]&&(r.push(Yn()(a).toDate()),e--),t=Yn()(Yn()(t).add(1,"d")).toDate()}if(g.length&&o)for(var u=1;u<=n;u++)r.push(Yn()(Yn()(t).add(u,"d")).toDate());return r.unshift(Yn()().toDate()),r};return Object(i.useEffect)((function(){O()}),[g]),Object(i.useEffect)((function(){!function(){for(var e=[],t=Yn()().format("YYYY-MM-DD"),n=Yn()().day(30).format("YYYY-MM-DD"),r=Yn()(n,"YYYY-MM-DD HH:mm").diff(Yn()(t,"YYYY-MM-DD HH:mm"),"days"),o=0;o<=r;o++)e.push({key:"".concat(o),date:Yn()(t).add(o,"d").format("YYYY-MM-DD")});b(e)}()}),[]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,OS({},e,{futureDaysToShow:O,menuLapsesList:function(){for(var e=[],t=(null==a?void 0:a.lapses)||[],n=0;n<t.length;n++)for(var r,o,i,u,s,c,l,f,p="".concat(null===(r=t[n])||void 0===r||null===(o=r.open)||void 0===o?void 0:o.hour,":").concat(null===(i=t[n])||void 0===i||null===(u=i.open)||void 0===u?void 0:u.minute),d="".concat(null===(s=t[n])||void 0===s||null===(c=s.close)||void 0===c?void 0:c.hour,":").concat(null===(l=t[n])||void 0===l||null===(f=l.close)||void 0===f?void 0:f.minute),h=Yn()(d,"HH:mm").diff(Yn()(p,"HH:mm"),"hour",!0);h>0;){var y=p;e.push(Yn()(y,"HH:mm").toDate()),p=Yn()(y,"HH:mm").add(15,"minutes"),h-=.25}return e},disableDays:g,startDate:v,isDisabledDay:function(e){var t=Yn()(e,"YYYY-MM-DD").day();return g.every((function(e){return e!==t}))},scheduleSelected:a,menuSelected:null==l?void 0:l.id,handleMenuSelected:function(e){return s(function(e){var t;f(e);var n=Yn()().day();return{lapses:null==e||null===(t=e.schedule[n])||void 0===t?void 0:t.lapses,menuId:e.id}}(e))},handleDate:function(t){var n,r=Yn()(t,"YYYY-MM-DD").day(),o=null==l||null===(n=l.schedule[r])||void 0===n?void 0:n.lapses;s(jS(jS({},a),{},{lapses:o})),m(t),h(Yn()(t).format("YYYY-MM-DD HH:mm")),e.handlerSelectDate(Yn()(t).format("YYYY-MM-DD HH:mm"))},onSendMenuInfo:function(){(null==a?void 0:a.menuId)&&d&&e.handleMenuInfo({menuId:null==a?void 0:a.menuId,date:new Date(d)})},dateSelected:d})))};function IS(){return IS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IS.apply(this,arguments)}function xS(e){return function(e){if(Array.isArray(e))return BS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||LS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AS(Object(n),!0).forEach((function(t){_S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kS(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function DS(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){kS(a,r,o,i,u,"next",e)}function u(e){kS(a,r,o,i,u,"throw",e)}i(void 0)}))}}function US(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||LS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LS(e,t){if(e){if("string"==typeof e)return BS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BS(e,t):void 0}}function BS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}CS.propTypes={UIComponent:c.a.elementType,maxPreoderDays:c.a.number,business:c.a.object,handleMenuInfo:c.a.func,handlerSelectDate:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},CS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var FS=function(e){var t=e.UIComponent,n=e.orderId,r=e.customHandleSend,o=e.messages,s=e.setMessages,c=e.asDashboard,l=e.order,f=e.handleUpdateOrderForUnreadCount,p=US(rn(),1)[0],d=US(hn(),1)[0],h=d.user,y=d.token,v=e.accessToken||y,m=US(Object(i.useState)({business:!0,administrator:!0,driver:!0,customer:!0}),2),b=m[0],g=m[1],O=US(Object(i.useState)(""),2),w=O[0],j=O[1],S=US(Object(i.useState)({loading:!0,error:null,messages:[]}),2),E=S[0],P=S[1],C=US(Object(i.useState)({loading:!1,error:null}),2),I=C[0],x=C[1],A=US(Object(i.useState)({loading:!0,error:null,messages:[]}),2),T=A[0],_=A[1],k=US(Object(i.useState)(null),2),D=k[0],U=k[1],L=Cn(),B=function(){var e=DS(a.a.mark((function e(){var t,i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return",r(w));case 2:return e.prev=2,x({loading:!0,error:null}),t=[],b.customer&&t.push(3),b.administrator&&t.push(0),b.business&&t.push(2),b.driver&&t.push(4),i={comment:w,type:2,can_see:t.join(",")},D&&(i.type=3,i.file=D),e.next=13,fetch("".concat(p.root,"/orders/").concat(n,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)},body:JSON.stringify(i)});case 13:return u=e.sent,e.next=16,u.json();case 16:c=e.sent,l=c.error,f=c.result,l||(s&&o?s(TS(TS({},o),{},{messages:[].concat(xS(o.messages),[f])})):P(TS(TS({},E),{},{messages:[].concat(xS(E.messages),[f])}))),x({loading:!1,error:l?f:null}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),x({loading:!1,error:[e.t0.Messages]});case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=DS(a.a.mark((function e(){var t,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(TS(TS({},E),{},{loading:!0})),t=c?"".concat(p.root,"/orders/").concat(n,"/messages?mode=dashboard"):"".concat(p.root,"/orders/").concat(n,"/messages"),e.next=5,fetch(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}});case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,i=o.error,u=o.result,P(i?TS(TS({},E),{},{loading:!1,error:u}):{messages:u,loading:!1,error:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),P(TS(TS({},E),{},{loading:!1,error:[e.t0.Messages]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=DS(a.a.mark((function e(t){var r,i,u,c,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,_(TS(TS({},T),{},{loading:!0})),r="".concat(p.root,"/orders/").concat(n,"/messages/").concat(t,"/read?order_id=").concat(n,"&order_message_id=").concat(t),e.next=7,fetch(r,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}});case 7:return i=e.sent,e.next=10,i.json();case 10:u=e.sent,c=u.error,l=u.result,c?_(TS(TS({},T),{},{loading:!1,error:l})):(_({messages:l,loading:!1,error:null}),E.messages.length>0&&(d=E.messages.filter((function(e){return e.id===t&&(e.read=!0),!0})),P(TS(TS({},E),{},{messages:d}))),f&&f(null),f&&f(n)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),_(TS(TS({},T),{},{loading:!1,error:[e.t0.Messages]}));case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&s||F()}),[n]),Object(i.useEffect)((function(){if(!(E.loading||o&&s)){var e=function(e){var t;(null===(t=e.order)||void 0===t?void 0:t.id)===n&&(E.messages.find((function(t){return t.id===e.id}))||P(TS(TS({},E),{},{messages:[].concat(xS(E.messages),[e])})))};return L.on("message",e),function(){L.off("message",e)}}}),[E,L,null==l?void 0:l.status]),Object(i.useEffect)((function(){return c?L.join("messages_orders_".concat(n,"_").concat(null==h?void 0:h.level)):L.join("messages_orders_".concat(null==h?void 0:h.id)),function(){c?L.leave("messages_orders_".concat(n,"_").concat(null==h?void 0:h.level)):L.leave("messages_orders_".concat(null==h?void 0:h.id))}}),[L,n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,IS({},e,{messages:E,image:D,canRead:b,handleSend:B,message:w,handleReadMessages:N,setMessage:j,setCanRead:g,sendMessage:I,setImage:U})))};function NS(){return NS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NS.apply(this,arguments)}function RS(e){return function(e){if(Array.isArray(e))return VS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||JS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MS(Object(n),!0).forEach((function(t){GS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YS(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function qS(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){YS(a,r,o,i,u,"next",e)}function u(e){YS(a,r,o,i,u,"throw",e)}i(void 0)}))}}function $S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||JS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JS(e,t){if(e){if("string"==typeof e)return VS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VS(e,t):void 0}}function VS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}FS.propTypes={UIComponent:c.a.elementType,handleClickSetDefault:c.a.func,customHandleSend:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},FS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var HS=function(e){var t=e.orderId,n=e.UIComponent,r=$S(rn(),1)[0],o=$S(hn(),1)[0],s=$S(Object(i.useState)({metaFields:[],loading:!0,error:null}),2),c=s[0],l=s[1],f=$S(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],h=function(){var e=qS(a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(zS(zS({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/orders/").concat(t,"/metafields"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,l(zS(zS({},c),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(zS(zS({},c),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=qS(a.a.mark((function e(n){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(zS(zS({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/orders/").concat(t,"/metafields/").concat(n),i);case 5:e.sent.ok&&(u=c.metaFields.filter((function(e){return e.id!==n})),l(zS(zS({},c),{},{metaFields:u})),d({loading:!1,result:{error:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=qS(a.a.mark((function e(n){var i,u,s,f,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(zS(zS({},p),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)},body:JSON.stringify(n)},e.next=5,fetch("".concat(r.root,"/orders/").concat(t,"/metafields"),i);case 5:return u=e.sent,e.next=8,u.json();case 8:s=e.sent,f=s.error,h=s.result,f?d({loading:!1,result:{error:!0,result:h}}):([],y=[].concat(RS(c.metaFields),[h]),l(zS(zS({},c),{},{metaFields:y})),d({loading:!1,result:{error:!1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,NS({},e,{metaFieldsList:c,actionState:p,handleDeleteMetaField:y,handeAddMetaField:v})))};HS.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},HS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var WS=n(35),KS=n.n(WS);function XS(){return XS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XS.apply(this,arguments)}function ZS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return QS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yn.a.extend(KS.a),Yn.a.extend($n.a);var eE=function(e){var t,n,r=e.minDate,o=e.maxDate,a=e.currentDate,s=e.useOrderContext,c=e.onChangeMoment,l=e.UIComponent,f=ZS(vr(),2),p=f[0],d=f[1].changeMoment,h=function(e){if(e)return Yn()(e,"YYYY-MM-DD HH:mm").isSameOrAfter(Yn()(),"day")?Yn()(e).format("YYYY-MM-DD HH:mm"):Yn()().format("YYYY-MM-DD HH:mm")},y=s?null===(t=p.options)||void 0===t?void 0:t.moment:a,v=ZS(Object(i.useState)(y?Yn()(h(y)).format("YYYY-MM-DD HH:mm"):null),2),m=v[0],b=v[1],g=ZS(Object(i.useState)(!m),2),O=g[0],w=g[1],j=ZS(Object(i.useState)([]),2),S=j[0],E=j[1],P=ZS(Object(i.useState)([]),2),C=P[0],I=P[1],x=ZS(Object(i.useState)(Yn()(h(y)).format("YYYY-MM-DD")),2),A=x[0],T=x[1],_=ZS(Object(i.useState)(null),2),k=_[0],D=_[1],U=function(){O||(w(!0),s&&d(null),c&&c(null))};Object(i.useEffect)((function(){var e;if(s)if(null!==(e=p.options)&&void 0!==e&&e.moment){var t,n=Yn.a.utc(h(null===(t=p.options)||void 0===t?void 0:t.moment)).local();b(n.format("YYYY-MM-DD HH:mm")),T(n.format("YYYY-MM-DD")),D(n.format("HH:mm")),O&&w(!1)}else A!==Yn()().format("YYYY-MM-DD")&&T(Yn()().format("YYYY-MM-DD")),null!==k&&D(null),null!==m&&b(null),!O&&w(!0);else null!==m&&b(null),!O&&w(!0)}),[null===(n=p.options)||void 0===n?void 0:n.moment]),Object(i.useEffect)((function(){if(m){var e=Yn()(m,"YYYY-MM-DD HH:mm"),t=Yn()(),n=e.diff(t,"seconds");if(!(n<=0)){var r=setTimeout((function(){U()}),1e3*n);return function(){clearTimeout(r)}}U()}}),[m]),Object(i.useEffect)((function(){O&&C[0]&&(T(C[0]),D(null))}),[O,C]);var L=function(){for(var e=[],t=A===Yn()().format("YYYY-MM-DD"),n=A===Yn()(o).format("YYYY-MM-DD"),r=new Date,a=0;a<24;a++)if(!(t&&a<(null==r?void 0:r.getHours())||n&&a>(null==o?void 0:o.getHours())))for(var i=0;i<59;i+=15)if(!(t&&a===(null==r?void 0:r.getHours())&&i<=r.getMinutes()||n&&a===(null==o?void 0:o.getHours())&&i>o.getMinutes())){var u=a<10?"0".concat(a):a,s=i<10?"0".concat(i):i,c=i+14<10?"0".concat(i+14):i+14,l="".concat(u,":").concat(s),f="".concat(u,":").concat(c);e.push({startTime:l,endTime:f})}E(e)},B=function(){for(var e,t,n,a=[],i=parseInt((e=h(o),n=null!=t?t:Yn()(),Yn()(e).diff(Yn()(n),"day")),h(r)),u=0;u<i+1;u++)a.push(Yn()(h(r)).add(u,"d").format("YYYY-MM-DD"));I(a)};return Object(i.useEffect)((function(){A&&L()}),[A]),Object(i.useEffect)((function(){var e=setInterval((function(){0===Yn()(A).diff(Yn()(a),"day")&&L()}),1e3);return function(){return clearInterval(e)}}),[A]),Object(i.useEffect)((function(){B()}),[o,r]),u.a.createElement(u.a.Fragment,null,l&&u.a.createElement(l,XS({},e,{isAsap:O,minDate:h(r),maxDate:h(o),dateSelected:A,timeSelected:k,handleChangeDate:function(e){e&&e!==A&&(T(e),D(null),w(!1))},handleChangeTime:function(e){if(e&&e!==k){var t=Yn()("".concat(A," ").concat(e),"YYYY-MM-DD HH:mm").toDate();D(e),w(!1),s&&d(t),c&&c(t)}},datesList:C,hoursList:S,handleAsap:U})))};function tE(){return tE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tE.apply(this,arguments)}function nE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nE(Object(n),!0).forEach((function(t){oE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aE(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function iE(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){aE(a,r,o,i,u,"next",e)}function u(e){aE(a,r,o,i,u,"throw",e)}i(void 0)}))}}function uE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eE.propTypes={UIComponent:c.a.elementType,minDate:c.a.instanceOf(Date),maxDate:c.a.instanceOf(Date).isRequired,currentDate:c.a.instanceOf(Date),useOrderContext:c.a.bool,onChangeMoment:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eE.defaultProps={useOrderContext:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cE=function(e){var t=e.UIComponent,n=uE(rn(),1)[0],r={},o=uE(hn(),1)[0].token,s=uE(Object(i.useState)({loading:!0,orders:[],error:null}),2),c=s[0],l=s[1],f=uE(Object(i.useState)({loading:!0,orders:[],error:null}),2),p=f[0],d=f[1],h=function(){var e=iE(a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},r.activeOrders=t,e.next=5,n.setAccessToken(o).orders().where([{attribute:"status",value:[0,3,4,7,8,9]}]).get({cancelToken:t});case 5:i=e.sent,u=i.content.result,l(rE(rE({},c),{},{loading:!1,orders:u})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),l(rE(rE({},c),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=iE(a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},r.previousOrders=t,e.next=5,n.setAccessToken(o).orders().where([{attribute:"status",value:[1,2,5,6,10,11,12]}]).get({cancelToken:t});case 5:i=e.sent,u=i.content.result,d(rE(rE({},p),{},{loading:!1,orders:u})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d(rE(rE({},p),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return y(),h(),function(){r.previousOrders&&r.previousOrders.cancel(),r.activeOrders&&r.activeOrders.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,tE({},e,{activeOrders:c,previousOrders:p})))};function lE(){return lE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lE.apply(this,arguments)}function fE(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var hE=function(e){var t=e.status,n=e.UIComponent,r=pE(rn(),1)[0],o=pE(hn(),1)[0].token,s=pE(Object(i.useState)([]),2),c=s[0],l=s[1],f={},p=function(){var e,n=(e=a.a.mark((function e(){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},f.orders=n,e.next=5,r.setAccessToken(o).orders().where([{attribute:"status",value:t}]).get({cancelToken:n});case 5:i=e.sent,u=i.content.result,l(u),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){fE(a,r,o,i,u,"next",e)}function u(e){fE(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){return p(),function(){f.orders&&f.orders.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,lE({},e,{orders:c})))};function yE(){return yE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yE.apply(this,arguments)}function vE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vE(Object(n),!0).forEach((function(t){bE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gE(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function OE(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){gE(a,r,o,i,u,"next",e)}function u(e){gE(a,r,o,i,u,"throw",e)}i(void 0)}))}}function wE(e){return function(e){if(Array.isArray(e))return EE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||SE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||SE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SE(e,t){if(e){if("string"==typeof e)return EE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?EE(e,t):void 0}}function EE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}hE.propTypes={UIComponent:c.a.elementType,orderType:c.a.oneOf(["active","previous"]).isRequired,status:c.a.arrayOf(c.a.number).isRequired,orders:c.a.arrayOf(c.a.object),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var PE=function(e){var t,n=e.UIComponent,r=e.isSearchByCartId,o=e.isSearchByCityName,s=e.paginationSettings,c=jE(rn(),1)[0],l=jE(hn(),1)[0],f=l.user,p=l.token,d=l.loading,h={},y=jE(Object(i.useState)(null),2),v=y[0],m=y[1],b=jE(Object(i.useState)({}),2),g=b[0],O=b[1],w=jE(Object(i.useState)(!1),2),j=w[0],S=w[1],E=jE(Object(i.useState)({loading:!1,error:null}),2),P=E[0],C=E[1],I=jE(Object(i.useState)(null),2),x=I[0],A=I[1],T=jE(Object(i.useState)({loading:!1,carts:[],error:null}),2),_=T[0],k=T[1],D=jE(Object(i.useState)({currentPage:"pages"===s.controlType&&s.initialPage&&s.initialPage>=1?s.initialPage-1:0,pageSize:null!==(t=s.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),U=D[0],L=D[1],B=jE(Object(i.useState)({businesses:[],loading:!0,error:null}),2),F=B[0],N=B[1],R=jE(Object(i.useState)([]),2),M=R[0],z=R[1],G=jE(Object(i.useState)([]),2),Y=G[0],q=G[1],$=function(){var e=OE(a.a.mark((function e(t){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(mE(mE({},P),{},{loading:!0})),n={},h.deleteOrder=n,r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=7,fetch("".concat(c.root,"/carts/dashboard/").concat(t),r);case 7:return o=e.sent,e.next=10,o.json();case 10:(i=e.sent).error||(A(t),(u=wE(q)).shift(),0===u.length&&S(!1),q(u)),C({loading:!1,error:i.error?i.result:null}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),C({loading:!1,error:[e.t0.message]}),S(!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=OE(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(mE(mE({},P),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=5,fetch("".concat(c.root,"/controls/orders"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?C({loading:!1,error:null==r?void 0:r.result}):(z(r.result.cities),N(mE(mE({},F),{},{loading:!1,businesses:r.result.businesses}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),C({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=OE(a.a.mark((function e(t,n){var i,u,s,l,f,d,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(mE(mE({},_),{},{loading:!0})),i=null,u=[],v&&(s=[],r&&s.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(v,"%"))}}),o&&s.push({attribute:"city",conditions:[{attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(v,"%"))}}]}),u.push({conector:"OR",conditions:s})),Object.keys(g).length&&(l=[],null!=g&&g.cartId&&l.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(null==g?void 0:g.cartId,"%"))}}),null!==g.deliveryFromDatetime&&l.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(g.deliveryFromDatetime)}}),null!==g.deliveryEndDatetime&&l.push({attribute:"delivery_datetime",value:{condition:"<=",value:g.deliveryEndDatetime}}),0!==g.businessIds.length&&l.push({attribute:"business_id",value:g.businessIds}),0!==g.customerIds.length&&l.push({attribute:"user_id",value:g.customerIds}),0!==g.cityIds.length&&l.push({attribute:"city_id",value:g.cityIds}),l.length&&u.push({conector:"AND",conditions:l})),u.length&&(i={conditions:u,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},d=i?"".concat(c.root,"/carts/dashboard?orderBy=-id&page=").concat(n,"&page_size=").concat(t,"&where=").concat(JSON.stringify(i)):"".concat(c.root,"/carts/dashboard?orderBy=-id&page=").concat(n,"&page_size=").concat(t),e.next=11,fetch(d,f);case 11:return h=e.sent,e.next=14,h.json();case 14:(y=e.sent).error?k(mE(mE({},_),{},{loading:!1,error:y.result})):(k({loading:!1,carts:y.result,error:null}),L(mE(mE({},U),{},{currentPage:y.pagination.current_page,pageSize:0===y.pagination.page_size?U.pageSize:y.pagination.page_size,totalPages:y.pagination.total_pages,totalItems:y.pagination.total,from:y.pagination.from,to:y.pagination.to}))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),k(mE(mE({},_),{},{loading:!1,error:[e.t0.message]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j&&0!==q.length&&$(q[0])}),[q,j]),Object(i.useEffect)((function(){if(!d)return J(),function(){h.drivers&&h.drivers.cancel()}}),[f,d]),Object(i.useEffect)((function(){_.loading||V(U.pageSize,1)}),[v]),Object(i.useEffect)((function(){Object.keys(g).length>0&&!_.loading&&V(U.pageSize,1)}),[g]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,yE({},e,{searchValue:v,businessesList:F,citiesList:M,filterValues:g,selectedCartIds:Y,deletedCartId:x,startMulitOrderDelete:j,handleSelectedCartIds:function(e){var t=wE(Y);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),q(t)},handleRemoveSelectedCartId:function(e){var t=wE(Y);t=t.filter((function(t){return t!==e})),q(t)},handleChangeSearch:function(e){m(e)},handleChangeFilterValues:function(e){O(e)},handleDeleteMultiCarts:function(){S(!0)},setSelectedCartIds:q,getCartList:V,pagination:U,cartList:_})))};function CE(){return CE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CE.apply(this,arguments)}function IE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IE(Object(n),!0).forEach((function(t){AE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function AE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TE(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function _E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}PE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},PE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var DE=function(e){var t=e.cart,n=e.UIComponent,r=_E(hn(),1)[0].token,o=_E(rn(),1)[0],s=_E(Object(i.useState)({cart:null,loading:!1,error:null}),2),c=s[0],l=s[1],f=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,s,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(xE(xE({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},i="".concat(o.root,"/carts/").concat(null==t?void 0:t.uuid,"?user_id=").concat(null==t?void 0:t.user_id),e.next=6,fetch(i,n);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error?l(xE(xE({},c),{},{loading:!1,error:s.result})):(p=xE(xE({},s.result),{},{id:null==t?void 0:t.id,business:xE(xE({},s.result.business),null==t?void 0:t.business),user:xE(xE({},null==t?void 0:t.user),(null==t||null===(f=t.address)||void 0===f?void 0:f.address)&&{address:t.address.address}),updated_at:null==t?void 0:t.updated_at}),l({loading:!1,cart:p,error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(xE(xE({},c),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){TE(a,r,o,i,u,"next",e)}function u(e){TE(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){t&&f()}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,CE({},e,{cartState:c})))};function UE(){return UE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UE.apply(this,arguments)}function LE(e){return function(e){if(Array.isArray(e))return zE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ME(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BE(Object(n),!0).forEach((function(t){NE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ME(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ME(e,t){if(e){if("string"==typeof e)return zE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zE(e,t):void 0}}function zE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}DE.propTypes={UIComponent:c.a.elementType,cartId:c.a.oneOfType([c.a.number,c.a.string]),order:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},DE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var GE=function(e){var t=e.UIComponent,n=RE(Object(i.useState)({cartId:null,dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],cityIds:[],customerIds:[]}),2),r=n[0],o=n[1];return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,UE({},e,{filterValues:r,handleChangeCartId:function(e){var t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");o(FE(FE({},r),{},{cartId:t}))},handleChangeDateType:function(e){var t=Yn()();switch(e){case"default":o(FE(FE({},r),{},{dateType:"default",deliveryFromDatetime:null,deliveryEndDatetime:null}));break;case"today":var n=t.format("YYYY-MM-DD"),a=Yn()(n).format("YYYY-MM-DD HH:mm:ss");o(FE(FE({},r),{},{dateType:"today",deliveryFromDatetime:a}));break;case"yesterday":var i=t.subtract("1","day").format("YYYY-MM-DD"),u=Yn()(i).format("YYYY-MM-DD HH:mm:ss");o(FE(FE({},r),{},{dateType:"yesterday",deliveryFromDatetime:u}));break;case"last7":var s=t.subtract("7","day").format("YYYY-MM-DD"),c=Yn()(s).format("YYYY-MM-DD HH:mm:ss");o(FE(FE({},r),{},{dateType:"last7",deliveryFromDatetime:c}));break;case"last30":var l=t.subtract("30","day").format("YYYY-MM-DD"),f=Yn()(l).format("YYYY-MM-DD HH:mm:ss");o(FE(FE({},r),{},{dateType:"last30",deliveryFromDatetime:f}));break;case"term":o(FE(FE({},r),{},{dateType:"term",deliveryFromDatetime:null,deliveryEndDatetime:null}))}},handleChangeFromDate:function(e){var t;t=null!==e?Yn()(e).format("YYYY-MM-DD HH:mm:ss"):null,o(FE(FE({},r),{},{deliveryFromDatetime:t}))},handleChangeEndDate:function(e){var t;null!==e?t=Yn()(e).format("YYYY-MM-DD HH:mm:ss"):e=null,o(FE(FE({},r),{},{deliveryEndDatetime:t}))},handleChangeBusinesses:function(e){var t=LE(r.businessIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),o(FE(FE({},r),{},{businessIds:t}))},handleChangeCity:function(e){var t=LE(r.cityIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),o(FE(FE({},r),{},{cityIds:t}))},handleChangeCustomers:function(e){var t=LE(r.customerIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),o(FE(FE({},r),{},{customerIds:t}))},handleResetFilterValues:function(){o({cartId:null,dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],cityIds:[],customerIds:[]})},handleChangeDateRange:function(e,t,n){o(FE(FE({},r),{},{dateType:e,deliveryFromDatetime:t,deliveryEndDatetime:n}))}})))};function YE(){return YE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YE.apply(this,arguments)}function qE(e){return function(e){if(Array.isArray(e))return ZE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||XE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$E(Object(n),!0).forEach((function(t){VE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HE(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function WE(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){HE(a,r,o,i,u,"next",e)}function u(e){HE(a,r,o,i,u,"throw",e)}i(void 0)}))}}function KE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||XE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XE(e,t){if(e){if("string"==typeof e)return ZE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ZE(e,t):void 0}}function ZE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}GE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},GE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var QE=function(e){var t,n=e.UIComponent,r=e.propsToFetch,o=e.orders,s=e.orderIds,c=e.deletedOrderId,l=e.orderStatus,f=e.orderBy,p=e.orderDirection,d=e.useDefualtSessionManager,h=e.paginationSettings,y=e.asDashboard,v=e.filterValues,m=e.searchValue,b=e.isSearchByOrderId,g=e.isSearchByCustomerEmail,O=e.isSearchByCustomerPhone,w=e.orderIdForUnreadCountUpdate,j=KE(rn(),1)[0],S=KE(Object(i.useState)({loading:!o,error:null,orders:[]}),2),E=S[0],P=S[1],C=KE(Object(i.useState)({currentPage:"pages"===h.controlType&&h.initialPage&&h.initialPage>=1?h.initialPage-1:0,pageSize:null!==(t=h.pageSize)&&void 0!==t?t:10}),2),I=C[0],x=C[1],A=KE(hn(),1)[0],T=Cn(),_=d?A.token:e.accessToken,k={},D=KE(Object(i.useState)({loading:!1,error:null}),2),U=D[0],L=D[1],B=KE(Object(i.useState)(null),2),F=B[0],N=B[1],R=function(e,t){if("id"===e){if("desc"===p)return t.sort((function(e,t){return t.id-e.id}));if("asc"===p)return t.sort((function(e,t){return e.id-t.id}))}return"last_direct_message_at"===e?t.sort((function(e,t){return new Date(t.last_direct_message_at)-new Date(e.last_direct_message_at)})):t},M=function(){var e=WE(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(JE(JE({},U),{},{loading:!0})),n={},k.updateOrders=n,e.next=6,j.setAccessToken(_).orders(null==t?void 0:t.id).save({status:t.newStatus},{cancelToken:n});case 6:r=e.sent,o=r.content,L({loading:!1,error:o.error?o.result:null}),o.error||(i=E.orders.filter((function(e){return(null==e?void 0:e.id)!==(null==t?void 0:t.id)})),P(JE(JE({},E),{},{orders:i}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),L({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=WE(a.a.mark((function e(t){var n,o,i,u,c,d,w,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,o=[],i=[],n=y?{query:{orderBy:("desc"===p?"-":"")+f}}:{query:{orderBy:("desc"===p?"-":"")+f,page:t,page_size:h.pageSize}},s&&i.push({attribute:"id",value:s}),0===Object.keys(v).length?l&&i.push({attribute:"status",value:l}):v.statuses.length>0?(u=v.statuses.every((function(e){return-1!==l.indexOf(e)})),c=l.every((function(e){return-1!==v.statuses.indexOf(e)})),u&&i.push({attribute:"status",value:v.statuses}),c&&l&&i.push({attribute:"status",value:l})):l&&i.push({attribute:"status",value:l}),m&&(d=[],b&&d.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}),g&&d.push({attribute:"customer",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}]}),O&&d.push({attribute:"customer",conditions:[{attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}]}),i.push({conector:"OR",conditions:d})),Object.keys(v).length&&(w=[],null!==v.deliveryFromDatetime&&w.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(v.deliveryFromDatetime)}}),null!==v.deliveryEndDatetime&&w.push({attribute:"delivery_datetime",value:{condition:"<=",value:v.deliveryEndDatetime}}),0!==v.businessIds.length&&w.push({attribute:"business_id",value:v.businessIds}),0!==v.driverIds.length&&w.push({attribute:"driver_id",value:v.driverIds}),0!==v.deliveryTypes.length&&w.push({attribute:"delivery_type",value:v.deliveryTypes}),0!==v.paymethodIds.length&&w.push({attribute:"paymethod_id",value:v.paymethodIds}),w.length&&i.push({conector:"AND",conditions:w})),i.length&&(o={conditions:i,conector:"AND"}),S={},k.orders=S,n.cancelToken=S,E=r?y?j.setAccessToken(_).orders().asDashboard().select(r).where(o):j.setAccessToken(_).orders().select(r).where(o):y?j.setAccessToken(_).orders().asDashboard().where(o):j.setAccessToken(_).orders().where(o),e.next=15,E.get(n);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){var t=!0;return void 0!==v.businessIds&&v.businessIds.length>0&&(v.businessIds.includes(e.business_id)||(t=!1)),void 0!==v.driverIds&&v.driverIds.length>0&&(v.driverIds.includes(e.driver_id)||(t=!1)),void 0!==v.deliveryTypes&&v.deliveryTypes.length>0&&(v.deliveryTypes.includes(e.delivery_type)||(t=!1)),void 0!==v.paymethodIds&&v.paymethodIds.length>0&&(v.paymethodIds.includes(e.paymethod_id)||(t=!1)),void 0!==v.statuses&&v.statuses.length>0&&(v.statuses.includes(parseInt(e.status))||(t=!1)),t},Y=function(){var e=WE(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,P(JE(JE({},E),{},{loading:!0})),e.next=6,z(I.currentPage+1);case 6:t=e.sent,P({loading:!1,orders:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||x({currentPage:t.content.pagination.current_page,pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),"Cancel"!==e.t0.constructor.name&&P(JE(JE({},E),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){if(null!==w&&0!==E.orders.length){var e=E.orders.filter((function(e){return(null==e?void 0:e.id)===w&&(e.unread_count=0,e.unread_general_count=0,e.unread_direct_count=0),!0}));P(JE(JE({},E),{},{orders:e}))}}),[w]),Object(i.useEffect)((function(){if(!E.loading){var e=R(f,E.orders);P(JE(JE({},E),{},{orders:e}))}}),[f,E.orders]),Object(i.useEffect)((function(){if(null!==c){var e=E.orders.filter((function(e){return(null==e?void 0:e.id)!==c}));P(JE(JE({},E),{},{orders:e}))}}),[c]),Object(i.useEffect)((function(){null!==m&&Y()}),[m]),Object(i.useEffect)((function(){if(o)P(JE(JE({},E),{},{orders:o}));else{var e=!1,t=!1;if(Object.keys(v).length>0&&(e=v.statuses.every((function(e){return-1!==l.indexOf(e)})),t=l.every((function(e){return-1!==v.statuses.indexOf(e)})),!e&&!t))return void P({loading:!1,orders:[],error:null});Y()}return function(){k.orders&&k.orders.cancel()}}),[A,v,o]),Object(i.useEffect)((function(){if(!E.loading){var e=function(e){var t=[];if(E.orders.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)}))){t=E.orders.filter((function(t){var n=!0;return(null==t?void 0:t.id)===(null==e?void 0:e.id)&&(delete e.total,delete e.subtotal,Object.assign(t,e),(n=(0===l.length||l.includes(parseInt(t.status)))&&G(e))||(I.total--,x(JE({},I)))),n}));var n=R(f,t);P(JE(JE({},E),{},{orders:n}))}else{if(G(e))if(l.includes(parseInt(e.status))){t=[].concat(qE(E.orders),[e]);var r=R(f,t);I.total++,x(JE({},I)),P(JE(JE({},E),{},{orders:r}))}}},t=function(e){N(null==e?void 0:e.id);var t=JE(JE({},e),{},{status:0}),n=[];if(l.includes(0)&&G(e)){n=[t].concat(qE(E.orders));var r=R(f,n);I.total++,x(JE({},I)),P(JE(JE({},E),{},{orders:r}))}},n=function(e){if(0!==E.orders.length&&E.orders.find((function(t){var n;return(null==t?void 0:t.id)===(null===(n=e.order)||void 0===n?void 0:n.id)}))){var t=E.orders.filter((function(t){var n;return(null==t?void 0:t.id)===(null===(n=e.order)||void 0===n?void 0:n.id)&&t.last_message_at!==e.created_at&&(1===e.type?(t.last_general_message_at=e.created_at,0!==e.author.level&&(t.unread_general_count=t.unread_general_count+1)):(t.last_direct_message_at=e.created_at,0!==e.author.level&&(t.unread_direct_count=t.unread_direct_count+1)),t.last_message_at=e.created_at,0!==e.author.level&&(t.unread_count=t.unread_count+1)),!0})),n=R(f,t);P(JE(JE({},E),{},{orders:n}))}};return T.on("update_order",e),T.on("orders_register",t),T.on("message",n),function(){T.off("update_order",e),T.off("orders_register",t),T.off("message",n)}}}),[E.orders,I,f,T]),Object(i.useEffect)((function(){if(A.user){var e;if(y)T.join("messages_orders"),T.join("orders");else T.join("orders_".concat(null==A||null===(e=A.user)||void 0===e?void 0:e.id));return function(){var e;y?(T.leave("messages_orders"),T.leave("orders")):T.leave("orders_".concat(null==A||null===(e=A.user)||void 0===e?void 0:e.id))}}}),[T,A]);var q=function(){var e=WE(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(JE(JE({},E),{},{loading:!0})),e.prev=1,e.next=4,z(I.currentPage+1);case 4:t=e.sent,P({loading:!1,orders:t.content.error?E.orders:E.orders.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||x({currentPage:t.content.pagination.current_page,pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&P(JE(JE({},E),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=WE(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(JE(JE({},E),{},{loading:!0})),e.prev=1,e.next=4,z(t);case 4:n=e.sent,P({loading:!1,orders:n.content.error?[]:n.content.result,error:n.content.error?n.content.result:null}),n.content.error||x({currentPage:n.content.pagination.current_page,pageSize:n.content.pagination.page_size,totalPages:n.content.pagination.total_pages,total:n.content.pagination.total,from:n.content.pagination.from,to:n.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&P(JE(JE({},E),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,YE({},e,{orderList:E,pagination:I,registerOrderId:F,loadMoreOrders:q,goToPage:$,handleUpdateOrderStatus:M,handleResetNotification:function(){N(null)}})))};function eP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}QE.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),onOrderClick:c.a.func,useDefualtSessionManager:c.a.bool,orders:c.a.arrayOf(s.object),orderIds:c.a.arrayOf(s.number),orderIdForUnreadCountUpdate:c.a.number,orderStatus:c.a.arrayOf(s.number),orderBy:c.a.string,orderDirection:c.a.oneOf(["asc","desc"]),paginationSettings:c.a.exact({initialPage:c.a.number,pageSize:c.a.number,controlType:c.a.oneOf(["infinity","pages"])}),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},QE.defaultProps={orderBy:"id",orderDirection:"desc",paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nP=function(e){var t=e.UIComponent,n=Cn(),r=eP(hn(),1)[0],o=r.user,a=r.loading,s=eP(zn(),1)[0];return Object(i.useEffect)((function(){if(o){var e=function(e){s.emit("order_added",e)};return 0===o.level?n.join("orders"):n.join("orders_".concat(null==o?void 0:o.id)),n.on("orders_register",e),function(){n.off("orders_register",e)}}}),[n,a,o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function rP(){return rP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rP.apply(this,arguments)}function oP(e){return function(e){if(Array.isArray(e))return lP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aP(Object(n),!0).forEach((function(t){uP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||cP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cP(e,t){if(e){if("string"==typeof e)return lP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lP(e,t):void 0}}function lP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fP=function(e){var t=e.UIComponent,n=e.driverGroupList,r=sP(Object(i.useState)({orderId:null,groupTypes:[],dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],driverIds:[],driverGroupIds:[],cityIds:[],statuses:[],deliveryTypes:[],paymethodIds:[]}),2),o=r[0],a=r[1];return Object(i.useEffect)((function(){var e=[];if(o.groupTypes.length>0){var t,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=cP(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(o.groupTypes);try{var i=function(){var r=t.value,o=n.groups.find((function(e){return e.id===r}));o&&(e=[].concat(oP(e),oP(null==o?void 0:o.drivers)))};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}var u=e.filter((function(e,t,n){return n.indexOf(e)===t}));a(iP(iP({},o),{},{driverGroupIds:u}))}),[o.groupTypes]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,rP({},e,{filterValues:o,handleChangeOrderId:function(e){var t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");a(iP(iP({},o),{},{orderId:t}))},handleChangeGroup:function(e){var t=oP(o.groupTypes);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(iP(iP({},o),{},{groupTypes:t}))},handleChangeDateType:function(e){var t=Yn()();switch(e){case"default":a(iP(iP({},o),{},{dateType:"default",deliveryFromDatetime:null,deliveryEndDatetime:null}));break;case"today":var n=t.format("YYYY-MM-DD"),r=Yn()(n).format("YYYY-MM-DD HH:mm:ss");a(iP(iP({},o),{},{dateType:"today",deliveryFromDatetime:r}));break;case"yesterday":var i=t.subtract("1","day").format("YYYY-MM-DD"),u=Yn()(i).format("YYYY-MM-DD HH:mm:ss");a(iP(iP({},o),{},{dateType:"yesterday",deliveryFromDatetime:u}));break;case"last7":var s=t.subtract("7","day").format("YYYY-MM-DD"),c=Yn()(s).format("YYYY-MM-DD HH:mm:ss");a(iP(iP({},o),{},{dateType:"last7",deliveryFromDatetime:c}));break;case"last30":var l=t.subtract("30","day").format("YYYY-MM-DD"),f=Yn()(l).format("YYYY-MM-DD HH:mm:ss");a(iP(iP({},o),{},{dateType:"last30",deliveryFromDatetime:f}));break;case"term":a(iP(iP({},o),{},{dateType:"term",deliveryFromDatetime:null,deliveryEndDatetime:null}))}},handleChangeFromDate:function(e){var t;t=null!==e?Yn()(e).format("YYYY-MM-DD HH:mm:ss"):null,a(iP(iP({},o),{},{deliveryFromDatetime:t}))},handleChangeEndDate:function(e){var t;null!==e?t=Yn()(e).format("YYYY-MM-DD HH:mm:ss"):e=null,a(iP(iP({},o),{},{deliveryEndDatetime:t}))},handleChangeBusinesses:function(e){var t=oP(o.businessIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(iP(iP({},o),{},{businessIds:t}))},handleChangeDriver:function(e){var t=oP(o.driverIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(iP(iP({},o),{},{driverIds:t}))},handleChangeCity:function(e){var t=oP(o.cityIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(iP(iP({},o),{},{cityIds:t}))},handleChangeOrderStatus:function(e){var t=oP(o.statuses);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(iP(iP({},o),{},{statuses:t}))},handleChangeDeliveryType:function(e){var t=oP(o.deliveryTypes);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(iP(iP({},o),{},{deliveryTypes:t}))},handleChangePaymethodType:function(e){var t=oP(o.paymethodIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(iP(iP({},o),{},{paymethodIds:t}))},handleResetFilterValues:function(){a({orderId:null,groupTypes:[],deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],driverIds:[],cityIds:[],statuses:[],deliveryTypes:[],paymethodIds:[]})}})))};function pP(){return pP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pP.apply(this,arguments)}function dP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dP(Object(n),!0).forEach((function(t){yP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mP(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){vP(a,r,o,i,u,"next",e)}function u(e){vP(a,r,o,i,u,"throw",e)}i(void 0)}))}}function bP(e){return function(e){if(Array.isArray(e))return wP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||OP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||OP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OP(e,t){if(e){if("string"==typeof e)return wP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wP(e,t):void 0}}function wP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jP=function(e){var t=e.UIComponent,n=e.statusGroup,r=e.driversPropsToFetch,o=e.driverId,s=e.customerId,c=e.businessId,l=gP(rn(),1)[0],f=Cn(),p=gP(hn(),1)[0],d=p.user,h=p.token,y=p.loading,v={},m={pending:[0,13],inProgress:[7,8,4,9,3,14,18,19,20,21,22,23],completed:[1,11,15],cancelled:[2,5,6,10,12,16,17]},b=gP(Object(i.useState)(null),2),g=b[0],O=b[1],w=gP(Object(i.useState)(n||"pending"),2),j=w[0],S=w[1],E=gP(Object(i.useState)({}),2),P=E[0],C=E[1],I=gP(Object(i.useState)(null),2),x=I[0],A=I[1],T=gP(Object(i.useState)(!1),2),_=T[0],k=T[1],D=gP(Object(i.useState)(!1),2),U=D[0],L=D[1],B=gP(Object(i.useState)({loading:!1,error:null}),2),F=B[0],N=B[1],R=gP(Object(i.useState)(null),2),M=R[0],z=R[1],G=gP(Object(i.useState)({result:null,loading:!1,error:!1}),2),Y=G[0],q=G[1],$=gP(Object(i.useState)({groups:[],loading:!1,error:null}),2),J=$[0],V=$[1],H=gP(Object(i.useState)({drivers:[],loading:!0,error:null}),2),W=H[0],K=H[1],X=gP(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),Z=X[0],Q=X[1],ee=gP(Object(i.useState)({businesses:[],loading:!0,error:null}),2),te=ee[0],ne=ee[1],re=gP(Object(i.useState)([]),2),oe=re[0],ae=re[1],ie=gP(Object(i.useState)([]),2),ue=ie[0],se=ie[1],ce=gP(Object(i.useState)({pending:m.pending,inProgress:m.inProgress,completed:m.completed,cancelled:m.cancelled,all:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]}),2),le=ce[0],fe=ce[1],pe=function(){var e=mP(a.a.mark((function e(t){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(hP(hP({},F),{},{loading:!0})),n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify({status:x})},e.next=5,fetch("".concat(l.root,"/orders/").concat(t),n);case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,i=o.result,parseInt(i.status)===x&&((u=bP(ue)).shift(),0===u.length&&k(!1),se(u)),N(hP(hP({},F),{},{loading:!1})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),N({loading:!1,error:[e.t0.message]}),k(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=mP(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(hP(hP({},F),{},{loading:!0})),n={},v.deleteOrder=n,e.next=6,l.setAccessToken(h).orders(t).delete({cancelToken:n});case 6:r=e.sent,(o=r.content).error||(z(t),(i=bP(ue)).shift(),0===i.length&&L(!1),se(i)),N({loading:!1,error:o.error?o.result:null}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),N({loading:!1,error:[e.t0.message]}),L(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=mP(a.a.mark((function e(){var t,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},v.drivers=t,e.next=5,l.setAccessToken(h).users().select(r).where([{attribute:"level",value:[4]}]).get({cancelToken:t});case 5:n=e.sent,o=n.content.result,K(hP(hP({},W),{},{loading:!1,drivers:o})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),K(hP(hP({},W),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=mP(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(hP(hP({},F),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},e.next=5,fetch("".concat(l.root,"/controls/orders"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?N({loading:!1,error:null==r?void 0:r.result}):(ae(r.result.cities),V(hP(hP({},J),{},{loading:!1,groups:r.result.driver_groups})),Q(hP(hP({},Z),{},{loading:!1,paymethods:r.result.paymethods})),ne(hP(hP({},te),{},{loading:!1,businesses:r.result.businesses})),N(hP(hP({},F),{},{loading:!1}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),N({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){if(!y){var e=function(e){var t=[];t=W.drivers.find((function(t){return t.id===e.id}))?W.drivers.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})):[].concat(bP(W.drivers),[e]),K(hP(hP({},W),{},{drivers:t}))},t=function(e){var t;t=W.drivers.filter((function(t){if(t.id===e.driver_id)if("string"==typeof e.location){var n=e.location.replaceAll("\\",""),r=JSON.parse(n);t.location=r}else t.location=e.location;return!0})),K(hP(hP({},W),{},{drivers:t}))};return f.on("drivers_update",e),f.on("tracking_driver",t),function(){f.off("drivers_update",e),f.off("tracking_driver",t)}}}),[f,y,W.drivers]);var ve=function(){var e=mP(a.a.mark((function e(){var t,n,r,i,u,f,p,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],Object.keys(P).length>0&&(r=[],(null==P?void 0:P.statuses.length)>0&&r.push({attribute:"status",value:null==P?void 0:P.statuses}),null!=P&&P.orderId&&r.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(null==P?void 0:P.orderId,"%"))}}),null!==(null==P?void 0:P.deliveryFromDatetime)&&r.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(null==P?void 0:P.deliveryFromDatetime)}}),null!==(null==P?void 0:P.deliveryEndDatetime)&&r.push({attribute:"delivery_datetime",value:{condition:"<=",value:null==P?void 0:P.deliveryEndDatetime}}),0!==(null==P?void 0:P.businessIds.length)&&r.push({attribute:"business_id",value:null==P?void 0:P.businessIds}),(null==P?void 0:P.driverIds.length)>0&&r.push({attribute:"driver_id",value:null==P?void 0:P.driverIds}),0!==(null==P?void 0:P.deliveryTypes.length)&&r.push({attribute:"delivery_type",value:null==P?void 0:P.deliveryTypes}),0!==(null==P?void 0:P.driverGroupIds.length)&&r.push({attribute:"driver_id",value:null==P?void 0:P.driverGroupIds}),0!==(null==P?void 0:P.paymethodIds.length)&&r.push({attribute:"paymethod_id",value:null==P?void 0:P.paymethodIds}),r.length&&n.push({conector:"AND",conditions:r})),i=[],o&&i.push({attribute:"driver_id",value:o}),s&&i.push({attribute:"customer_id",value:s}),c&&i.push({attribute:"business_id",value:c}),i.length&&n.push({conector:"AND",conditions:i}),g&&((u=[]).push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(g,"%"))}}),u.push({attribute:"customer",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(g,"%"))}}]}),u.push({attribute:"customer",conditions:[{attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(g,"%"))}}]}),u.push({attribute:"business",conditions:[{attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(g,"%"))}}]}),n.push({conector:"OR",conditions:u})),n.length&&(t={conditions:n,conector:"AND"}),e.prev=10,q(hP(hP({},Y),{},{loading:!0})),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},e.next=15,fetch("".concat(l.root,"/orders/dashboard?where=").concat(JSON.stringify(t)),f);case 15:return p=e.sent,e.next=18,p.json();case 18:null!=(d=e.sent)&&d.error?q(hP(hP({},Y),{},{loading:!1,error:!0})):(y=Object.keys(m).reduce((function(e,t,n){var r,o=null==d?void 0:d.result.filter((function(e){return m[t].indexOf(null==e?void 0:e.status)>=0}));if(1===n){var a,i,u,s=null==d?void 0:d.result.filter((function(t){return m[e].indexOf(null==t?void 0:t.status)>=0}));return yP(u={},e,s.length>1?s.reduce((function(e,t){return Number((null==e?void 0:e.quantity)||e||0)+Number(null==t?void 0:t.quantity)})):(null===(a=s[0])||void 0===a?void 0:a.quantity)||0),yP(u,t,o.length>1?o.reduce((function(e,t){return Number((null==e?void 0:e.quantity)||e||0)+Number(null==t?void 0:t.quantity)})):(null===(i=o[0])||void 0===i?void 0:i.quantity)||0),u}return hP(hP({},e),{},yP({},t,o.length>1?o.reduce((function(e,t){return Number((null==e?void 0:e.quantity)||e||0)+Number(null==t?void 0:t.quantity)})):(null===(r=o[0])||void 0===r?void 0:r.quantity)||0))})),q(hP(hP({},Y),{},{loading:!1,error:!1,result:y}))),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(10),q(hP(hP({},Y),{},{loading:!1,error:[e.t0.message]}));case 25:case"end":return e.stop()}}),e,null,[[10,22]])})));return function(){return e.apply(this,arguments)}}(),me=function(){ve()};return Object(i.useEffect)((function(){return f.on("update_order",me),f.on("orders_register",me),function(){f.off("update_order",me),f.off("orders_register",me)}}),[f,P,g,Y]),Object(i.useEffect)((function(){d&&(f.join("drivers"),0===d.level?(f.join("orders"),f.join("messages_orders")):(f.join("orders_".concat(null==d?void 0:d.id)),f.join("messages_orders_".concat(null==d?void 0:d.id))))}),[f,y,d]),Object(i.useEffect)((function(){_&&0!==ue.length&&pe(ue[0])}),[ue,_]),Object(i.useEffect)((function(){U&&0!==ue.length&&de(ue[0])}),[ue,U]),Object(i.useEffect)((function(){if(!y)return 0!==(null==d?void 0:d.level)&&2!==(null==d?void 0:d.level)&&5!==(null==d?void 0:d.level)||he(),ye(),function(){v.drivers&&v.drivers.cancel()}}),[d,y]),Object(i.useEffect)((function(){null!=F&&F.error||null!=F&&F.loading||ve()}),[F,P,g,o,s,c]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,pP({},e,{searchValue:g,driverGroupList:J,driversList:W,paymethodsList:Z,businessesList:te,citiesList:oe,ordersStatusGroup:j,filterValues:P,multiOrderUpdateStatus:x,selectedOrderIds:ue,deletedOrderId:M,startMulitOrderStatusChange:_,startMulitOrderDelete:U,selectedSubOrderStatus:le,handleSelectedSubOrderStatus:fe,handleSelectedOrderIds:function(e){var t=bP(ue);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),se(t)},handleRemoveSelectedOrderId:function(e){var t=bP(ue);t=t.filter((function(t){return t!==e})),se(t)},handleChangeSearch:function(e){O(e)},handleChangeFilterValues:function(e){C(e)},handleOrdersStatusGroupFilter:function(e){e!==j&&(S(e),se([]))},handleChangeMultiOrdersStatus:function(e){A(e),k(!0)},handleDeleteMultiOrders:function(){L(!0)},setSelectedOrderIds:se,numberOfOrdersByStatus:Y})))};function SP(){return SP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SP.apply(this,arguments)}function EP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EP(Object(n),!0).forEach((function(t){CP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xP(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=TP(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function AP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||TP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TP(e,t){if(e){if("string"==typeof e)return _P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_P(e,t):void 0}}function _P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}jP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jP.defaultProps={driversPropsToFetch:["id","name","lastname","assigned_orders_count","available","phone","cellphone","location","photo","qualification","last_order_assigned_at"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var kP=function(e){var t=e.UIComponent,n=AP(rn(),1)[0],r={},o=Cn(),s=AP(hn(),1)[0],c=s.token,l=s.loading,f=AP(Object(i.useState)({loading:!0,overview:{},error:null}),2),p=f[0],d=f[1],h=function(e){var t,n=0,r=0,o=0,a=0,i=0,u=xP(e);try{for(u.s();!(t=u.n()).done;){var s=t.value;n+=s.quantity,0===s.status&&(r+=s.quantity),3!==s.status&&4!==s.status&&7!==s.status&&8!==s.status&&9!==s.status||(o+=s.quantity),1!==s.status&&11!==s.status||(a+=s.quantity),2!==s.status&&5!==s.status&&6!==s.status&&10!==s.status&&12!==s.status||(i+=s.quantity)}}catch(e){u.e(e)}finally{u.f()}return{total:n,pending:r,inProgress:o,completed:a,cancelled:i}},y=function(){var e,t=(e=a.a.mark((function e(){var t,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(PP(PP({},p),{},{loading:!0})),t={},r.ordersOverview=t,e.next=6,n.setAccessToken(c).orders().summary({cancelToken:t});case 6:o=e.sent,i=o.content.result,u=h(i),d(PP(PP({},p),{},{overview:u,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(PP(PP({},p),{},{loading:!1,error:e.t0}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){IP(a,r,o,i,u,"next",e)}function u(e){IP(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),v=function(e){if(Array.isArray(e)){var t,n=xP(e);try{for(n.s();!(t=n.n()).done;){if("status"===t.value.attribute)return!0}}catch(e){n.e(e)}finally{n.f()}}else{if(null===e)return!1;if("status"===e.attribute)return!0}return!1};return Object(i.useEffect)((function(){if(!p.loading&&!l){var e=function(e){var t=e.history.filter((function(e){return v(e.data)}));if(0!==t.length){var n,r,o,a,i,u,s=t[t.length-1].data.filter((function(e){return v(e)}));n=s[0],r=[0],o=[3,4,7,8,9],a=[1,11],i=[2,5,6,10,12],u=PP({},p.overview),r.includes(n.old)?u.pending=u.pending-1:o.includes(n.old)?u.inProgress=u.inProgress-1:a.includes(n.old)?u.completed=u.completed-1:i.includes(n.old)&&(u.cancelled=u.cancelled-1),r.includes(n.new)?u.pending=u.pending+1:o.includes(n.new)?u.inProgress=u.inProgress+1:a.includes(n.new)?u.completed=u.completed+1:i.includes(n.new)&&(u.cancelled=u.cancelled+1),d(PP(PP({},p),{},{overview:u}))}},t=function(e){var t=PP({},p.overview);t.total+=1,t.pending+=1,d(PP(PP({},p),{},{overview:t}))};return o.join("orders"),o.on("update_order",e),o.on("orders_register",t),function(){o.leave("orders"),o.off("update_order",e),o.off("orders_register",t)}}}),[p.overview,o,l]),Object(i.useEffect)((function(){return y(),function(){r.ordersOverview&&r.ordersOverview.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,SP({},e,{ordersOverviewList:p})))};function DP(){return DP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DP.apply(this,arguments)}function UP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}kP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},kP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var BP=function(e){var t=e.UIComponent,n=UP(vr(),2),r=n[0],o=n[1].changeType,a=UP(Object(i.useState)(null),2),s=a[0],c=a[1];return Object(i.useEffect)((function(){c(r.options.type)}),[r.options.type]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,DP({},e,{typeSelected:s||r.options.type,handleChangeOrderType:e.handleChangeOrderType||function(e){c(e),o(e)}})))};function FP(){return FP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FP.apply(this,arguments)}function NP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function RP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RP(Object(n),!0).forEach((function(t){zP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return YP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}BP.propTypes={UIComponent:c.a.elementType,orderTypes:c.a.arrayOf(s.object),handleChangeOrderType:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},BP.defaultProps={orderTypes:[1,2,3,4,5],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qP=function(e){var t,n=e.isLoading,r=e.paymethods,o=e.businessId,s=e.onPaymentChange,c=e.UIComponent,l=GP(rn(),1)[0],f=(null===(t=GP(vr(),1)[0].carts["businessId:".concat(o)])||void 0===t?void 0:t.total)||0,p=GP(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),d=p[0],h=p[1],y=GP(Object(i.useState)(null),2),v=y[0],m=y[1],b=GP(Object(i.useState)({}),2),g=b[0],O=b[1],w=function(e){return e&&e.filter((function(e){var t;return!["paypal_express","authorize"].includes(null==e||null===(t=e.paymethod)||void 0===t?void 0:t.gateway)})).map((function(e){return MP(MP({},null==e?void 0:e.paymethod),{},{sandbox:null==e?void 0:e.sandbox,credentials:null==e?void 0:e.data})}))},j=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.businesses(o).get();case 3:t=e.sent,n=t.content,r=n.error,i=n.result,r||(d.paymethods=w(i.paymethods)),h(MP(MP({},d),{},{error:r?i:null,loading:!1,paymethods:r?[]:w(i.paymethods)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),h(MP(MP({},d),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){NP(a,r,o,i,u,"next",e)}function u(e){NP(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),S=function(e){O(e),v?s&&s({paymethodId:v.id,gateway:v.gateway,paymethod:v,data:e}):s&&s(null)};return Object(i.useEffect)((function(){["card_delivery","cash","stripe_redirect"].includes(null==v?void 0:v.gateway)?s&&s({paymethodId:v.id,gateway:v.gateway,paymethod:v,data:{}}):null===v&&s&&s(null)}),[v]),Object(i.useEffect)((function(){n||(r?h(MP(MP({},d),{},{loading:!1,paymethods:w(r)})):o?j():h(MP(MP({},d),{},{loading:!1})))}),[n]),u.a.createElement(u.a.Fragment,null,c&&u.a.createElement(c,FP({},e,{orderTotal:f,paymethodsList:d,paymethodSelected:v,paymethodData:g,handlePaymethodClick:function(e){m(e),S({})},handlePaymethodDataChange:S})))};function $P(){return $P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$P.apply(this,arguments)}function JP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JP(Object(n),!0).forEach((function(t){HP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function KP(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){WP(a,r,o,i,u,"next",e)}function u(e){WP(a,r,o,i,u,"throw",e)}i(void 0)}))}}function XP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ZP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}qP.propTypes={UIComponent:c.a.elementType,paymethods:c.a.array,businessId:c.a.number,onPaymentChange:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var QP=function(e){var t=e.businessPaymethod,n=e.UIComponent,r=e.business,o=e.businessPaymethods,s=e.handleSuccessPaymethodUpdate,c=XP(Br(),2)[1].showToast,l=XP(Bn(),2)[1],f=XP(rn(),1)[0],p=XP(hn(),1)[0],d=p.user,h=p.token,y=XP(Object(i.useState)({url:null,loading:!0,error:null}),2),v=y[0],m=y[1],b=XP(Object(i.useState)({sandbox:null==t?void 0:t.sandbox,data:null==t?void 0:t.data,data_sandbox:null==t?void 0:t.data_sandbox}),2),g=b[0],O=b[1],w=XP(Object(i.useState)({loading:!1,error:null}),2),j=w[0],S=w[1],E=function(){var e=KP(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(VP(VP({},j),{},{loading:!1})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},e.next=5,fetch("".concat(f.root,"/users/").concat(null==d?void 0:d.id,"/keys"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?S(VP(VP({},j),{},{loading:!1,error:r.result})):(i=null===(o=r.result[0])||void 0===o?void 0:o.key)?(P(i),S(VP(VP({},j),{},{loading:!1,error:null}))):S(VP(VP({},j),{},{loading:!1,error:l("NO_API_KEY_SQUARE","There is no Api Key for Square connection")})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),S(VP(VP({},j),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=KP(a.a.mark((function e(t){var n,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(VP(VP({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({business_id:null==r?void 0:r.id,project_name:null==f?void 0:f.project,api_key:t})},"https://plugins-live.ordering.co/square/oauth/oauth",e.next=6,fetch("https://plugins-live.ordering.co/square/oauth/oauth",n);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,u=i.status,s=i.result,"ok"===u?(m(VP(VP({},v),{},{loading:!1,url:null==s?void 0:s.data.url})),C(null==s?void 0:s.data.url)):m(VP(VP({},v),{},{loading:!1,error:s})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m(VP(VP({},v),{},{loading:!1,error:[e.t0.message]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=window.open(e,"_blank","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,clearcache=yes"),n=setInterval((function(){t.closed?clearInterval(n):t.postMessage("data",f.url)}),200),r=null;window.addEventListener("message",(function(e){-1!==e.origin.indexOf(".ordering.co")&&(clearInterval(n),r&&clearTimeout(r),r=setTimeout((function(){t.postMessage("close",f.url),e.data&&(O(e.data.paymethod_credentials),t.close())}),1e3))}))},I=function(){var e=KP(a.a.mark((function e(t){var n,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),S(VP(VP({},j),{},{loading:!0})),n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify({sandbox:null==g?void 0:g.sandbox,data:JSON.stringify(null==g?void 0:g.data),data_sandbox:JSON.stringify(null==g?void 0:g.data_sandbox)})},e.next=6,fetch("".concat(f.root,"/business/").concat(r.id,"/paymethods/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error||(p=o.map((function(e){return e.id===t&&Object.assign(e,u.result),e})),s&&s(p),c(Dr.Success,l("PAYMETHOD_SAVED","Payment method saved"))),S({loading:!1,error:u.error?u.result:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),S({error:[e.t0.message],loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,$P({},e,{squareUrlState:v,squareData:g,actionState:j,handleConnectSquare:E,handleSavePaymethod:I,handleChangeDataInput:function(e){O(VP(VP({},g),{},{data:VP(VP({},null==g?void 0:g.data),{},HP({},e.target.name,e.target.value))}))},handleChangeSanboxDataInput:function(e){O(VP(VP({},g),{},{data_sandbox:VP(VP({},null==g?void 0:g.data_sandbox),{},HP({},e.target.name,e.target.value))}))},handleChangeSandbox:function(e){O(VP(VP({},g),{},{sandbox:e}))}})))};function eC(){return eC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eC.apply(this,arguments)}function tC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tC(Object(n),!0).forEach((function(t){rC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function aC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){oC(a,r,o,i,u,"next",e)}function u(e){oC(a,r,o,i,u,"throw",e)}i(void 0)}))}}function iC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}QP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},QP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var sC=function(e){var t=e.UIComponent,n=e.propsToFetch,r=iC(rn(),1)[0],o=iC(hn(),1)[0].token,s=iC(Br(),2)[1].showToast,c=iC(Bn(),2)[1],l=iC(Object(i.useState)({pages:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=iC(Object(i.useState)(null),2),h=d[0],y=d[1],v=iC(Object(i.useState)({changes:{},loading:!1,error:null}),2),m=v[0],b=v[1],g=iC(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=function(){var e=aC(a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(nC(nC({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/pages?params=").concat(n.toString()),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(u=e.sent).error||p({pages:u.result,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(nC(nC({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=aC(a.a.mark((function e(){var t,n,i,u,l,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,t=nC({},m.changes),n={},t)""!==t[i]&&(n=nC(nC({},n),{},rC({},i,t[i])));if(0!==Object.keys(n).length){e.next=6;break}return e.abrupt("return");case 6:return s(Dr.Info,c("LOADING","Loading")),b(nC(nC({},m),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=11,fetch("".concat(r.root,"/pages/").concat(h),u);case 11:return l=e.sent,e.next=14,l.json();case 14:(p=e.sent).error?b(nC(nC({},m),{},{result:{error:!0,result:p.result},loading:!1})):(d=f.pages.filter((function(e){var t,n,r,o;e.id===h&&(e.name=null!==(t=m.changes)&&void 0!==t&&t.name?null===(n=m.changes)||void 0===n?void 0:n.name:null==e?void 0:e.name,e.enabled=null!==(r=null===(o=m.changes)||void 0===o?void 0:o.enabled)&&void 0!==r?r:null==e?void 0:e.enabled);return e})),C(d),b(nC(nC({},m),{},{loading:!1,changes:{}})),s(Dr.Success,c("PAGE_SAVED","Page saved"))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),b(nC(nC({},m),{},{loading:!1,error:[e.t0.message]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=aC(a.a.mark((function e(t){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(nC(nC({},O),{},{loading:!0})),s(Dr.Info,c("LOADING","Loading")),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/pages/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(w(nC(nC({},O),{},{loading:!1})),u=f.pages.filter((function(e){return e.id!==t})),C(u),s(Dr.Success,c("PAGE_DELETED","Page Deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),P=null,C=function(e){p(nC(nC({},f),{},{pages:e}))};return Object(i.useEffect)((function(){m.loading||0===Object.keys(null==m?void 0:m.changes).length||S()}),[m]),Object(i.useEffect)((function(){j()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,eC({},e,{pagesListState:f,handleChangeState:function(e,t,n){y(e),"name"===t?(clearTimeout(P),P=setTimeout((function(){b(nC(nC({},m),{},{changes:rC({},t,n)}))}),1e3)):b(nC(nC({},m),{},{changes:rC({},t,n)}))},handleUpdatePageList:C,handleDeletePage:E})))};function cC(){return cC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cC.apply(this,arguments)}function lC(e){return function(e){if(Array.isArray(e))return bC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fC(Object(n),!0).forEach((function(t){dC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function yC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hC(a,r,o,i,u,"next",e)}function u(e){hC(a,r,o,i,u,"throw",e)}i(void 0)}))}}function vC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||mC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mC(e,t){if(e){if("string"==typeof e)return bC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bC(e,t):void 0}}function bC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}sC.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sC.defaultProps={propsToFetch:["name","enabled"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gC=function(e){var t=e.UIComponent,n=e.pageId,r=e.pageList,o=e.handleSuccessUpdate,s=e.handleCancel,c=vC(rn(),1)[0],l=vC(hn(),1)[0].token,f=vC(Br(),2)[1].showToast,p=vC(Bn(),2)[1],d=vC(Object(i.useState)({page:{},loading:!1,error:null}),2),h=d[0],y=d[1],v=vC(Object(i.useState)({images:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=vC(Object(i.useState)({loading:!1,change:{},error:null}),2),O=g[0],w=g[1],j=vC(Object(i.useState)({loading:!1,error:null}),2),S=j[0],E=j[1],P=vC(Object(i.useState)({loading:!1,changes:{},error:null}),2),C=P[0],I=P[1],x=vC(Object(i.useState)(null),2),A=x[0],T=x[1],_=vC(Object(i.useState)(null),2),k=_[0],D=_[1],U=function(){var e=yC(a.a.mark((function e(){var t,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(pC(pC({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/pages/").concat(n),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(o=e.sent).error||y({page:o.result,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),y(pC(pC({},h),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=yC(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(pC(pC({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/files?where={%22type%22:1}"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error||b({images:r.result,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),b(pC(pC({},m),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=yC(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),w(pC(pC({},O),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(O.change)},e.next=6,fetch("".concat(c.root,"/files"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:(r=e.sent).error?w(pC(pC({},O),{},{loading:!1,error:r.result})):(w({loading:!1,change:{},error:null}),i=[].concat(lC(m.images),[r.result]),b(pC(pC({},m),{},{images:i})),f(Dr.Success,p("GALLERY_IMAGE_ADDED","Business gallery image added")),T(null==r||null===(o=r.result)||void 0===o?void 0:o.source)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(pC(pC({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=yC(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),E(pC(pC({},S),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=6,fetch("".concat(c.root,"/files/").concat(t),n);case 6:return r=e.sent,e.next=9,r.json();case 9:(o=e.sent).error?E({loading:!1,error:o.result}):(E({loading:!1,error:null}),i=m.images.filter((function(e){return e.id!==t})),b(pC(pC({},m),{},{images:i})),f(Dr.Success,p("FILE_DELETED","File deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),E({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=yC(a.a.mark((function e(){var t,i,u,s,d,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u in e.prev=0,t=pC({},C.changes),i={},t)""!==t[u]&&(i=pC(pC({},i),{},dC({},u,t[u])));if(0!==Object.keys(i).length){e.next=6;break}return e.abrupt("return");case 6:return f(Dr.Info,p("LOADING","Loading")),I(pC(pC({},C),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=11,fetch("".concat(c.root,"/pages/").concat(n),s);case 11:return d=e.sent,e.next=14,d.json();case 14:(h=e.sent).error?I({loading:!1,error:h.result}):(o&&(y=r.filter((function(e){var t,r,o,a;e.id===n&&(e.name=null!==(t=C.changes)&&void 0!==t&&t.name?null===(r=C.changes)||void 0===r?void 0:r.name:null==e?void 0:e.name,e.enabled=null!==(o=null===(a=C.changes)||void 0===a?void 0:a.enabled)&&void 0!==o?o:null==e?void 0:e.enabled);return e})),o(y)),I(pC(pC({},C),{},{changes:{},loading:!1,error:null})),f(Dr.Success,p("PAGE_SAVED","Page Saved"))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),I(pC(pC({},C),{},{loading:!1,error:[e.t0.message]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=yC(a.a.mark((function e(){var t,n,i,u,d,h,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u in e.prev=0,n=pC({},C.changes),i={},n)""!==n[u]&&(i=pC(pC({},i),{},dC({},u,n[u])));if(0!==Object.keys(i).length){e.next=6;break}return e.abrupt("return");case 6:return i.enabled=!0,null!==(t=i)&&void 0!==t&&t.body||(i.body="<p><br></p>"),f(Dr.Info,p("LOADING","Loading")),I(pC(pC({},C),{},{loading:!0})),d={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=13,fetch("".concat(c.root,"/pages"),d);case 13:return h=e.sent,e.next=16,h.json();case 16:(y=e.sent).error?I(pC(pC({},C),{},{loading:!1,error:y.result})):(o&&(v=[].concat(lC(r),[y.result]),o(v)),s&&s(),I(pC(pC({},C),{},{changes:{},loading:!1,error:null})),f(Dr.Success,p("PAGE_ADDED","Page Added"))),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),I(pC(pC({},C),{},{loading:!1,error:[e.t0.message]}));case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0!==Object.keys(O.change).length&&B()}),[O.change]),Object(i.useEffect)((function(){L(),n?(U(),D(!1)):D(!0)}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,cC({},e,{isAddMode:k,pageState:h,imageListState:m,insertImageState:O,formState:C,selectedImageUrl:A,setSelectedImageUrl:T,handleInsertImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){w(pC(pC({},O),{},{change:{source:t.result,type:1}}))},t.onerror=function(e){return console.log(e)}},handleDeleteImage:F,handleChangeFormState:function(e,t){I(pC(pC({},C),{},{changes:pC(pC({},C.changes),{},dC({},e,t))}))},handleSavePage:N,handleAddPage:R})))};function OC(){return OC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OC.apply(this,arguments)}function wC(e){return function(e){if(Array.isArray(e))return AC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jC(Object(n),!0).forEach((function(t){EC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function CC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){PC(a,r,o,i,u,"next",e)}function u(e){PC(a,r,o,i,u,"throw",e)}i(void 0)}))}}function IC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||xC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xC(e,t){if(e){if("string"==typeof e)return AC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AC(e,t):void 0}}function AC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gC.defaultProps={propsToFetch:["name","enabled"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var TC=function(e){var t=e.UIComponent,n=e.cityMangersPropsToFetch,r=IC(rn(),1)[0],o=IC(hn(),1)[0].token,s=IC(Br(),2)[1].showToast,c=IC(Bn(),2)[1],l=IC(Object(i.useState)({countries:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=IC(Object(i.useState)({options:[],loading:!1,error:null}),2),h=d[0],y=d[1],v=IC(Object(i.useState)({users:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=IC(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=IC(Object(i.useState)(null),2),S=j[0],E=j[1],P=IC(Object(i.useState)({}),2),C=P[0],I=P[1],x=IC(Object(i.useState)(!1),2),A=x[0],T=x[1],_=IC(Object(i.useState)([]),2),k=_[0],D=_[1],U=IC(Object(i.useState)(!1),2),L=U[0],B=U[1],F=IC(Object(i.useState)(null),2),N=F[0],R=F[1],M=IC(Object(i.useState)([]),2),z=M[0],G=M[1],Y=IC(Object(i.useState)([]),2),q=Y[0],$=Y[1],J=IC(Object(i.useState)(!1),2),V=J[0],H=J[1],W=function(){var e=CC(a.a.mark((function e(){var t,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(SC(SC({},f),{},{loading:!0})),e.next=4,r.countries().get();case 4:t=e.sent,n=t.content,o=n.error,i=n.result,p(SC(SC({},f),{},o?{loading:!1,error:i}:{loading:!1,countries:i})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p(SC(SC({},f),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=CC(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(SC(SC({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/dropdownoptions"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error?y(SC(SC({},h),{},{loading:!1,error:i.result})):y(SC(SC({},h),{},{loading:!1,options:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),y(SC(SC({},h),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=CC(a.a.mark((function e(t,n){var o,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(SC(SC({},O),{},{loading:!0})),e.next=5,r.countries(t).save(n);case 5:o=e.sent,i=o.content,u=i.error,l=i.result,u||(d=f.countries.filter((function(e){return e.id===t&&Object.assign(e,l),!0})),p(SC(SC({},f),{},{countries:d})),s(Dr.Success,c("COUNTRY_SAVED","Country saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=CC(a.a.mark((function e(t){var n,o,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(SC(SC({},O),{},{loading:!0})),e.next=5,r.countries().save(t);case 5:n=e.sent,o=n.content,i=o.error,u=o.result,i?w({loading:!1,error:u}):((l=SC({},u)).enabled=!0,l.cities=[],p(SC(SC({},f),{},{countries:[].concat(wC(f.countries),[l])})),s(Dr.Success,c("COUNTRY_ADDED","Country added")),w(SC(SC({},O),{},{loading:!1}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=CC(a.a.mark((function e(t){var n,o,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(SC(SC({},O),{},{loading:!0})),e.next=5,r.countries(t).delete();case 5:n=e.sent,o=n.content,i=o.error,u=o.result,i?(w(SC(SC({},O),{},{loading:!1,error:u})),H(!1)):(l=f.countries.filter((function(e){return e.id!==t})),p(SC(SC({},f),{},{countries:l})),s(Dr.Success,c("COUNTRY_DELETED","Country deleted")),V&&((d=wC(q)).shift(),0===d.length&&H(!1),$(d)),w(SC(SC({},O),{},{loading:!1}))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]}),H(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=CC(a.a.mark((function e(t,n,o){var i,u,l,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(SC(SC({},O),{},{loading:!0})),e.next=5,r.countries(t).cities(n).save(o);case 5:i=e.sent,u=i.content,l=u.error,d=u.result,l?w(SC(SC({},O),{},{loading:!1,error:d})):(h=f.countries.map((function(e){if(e.id===t){var r=e.cities.filter((function(e){return e.id===n&&Object.assign(e,d),!0}));e.cities=r}return e})),p(SC(SC({},f),{},{countries:h})),s(Dr.Success,c("CITY_SAVED","City saved")),I({})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,r){return e.apply(this,arguments)}}(),te=function(){var e=CC(a.a.mark((function e(t,n){var o,i,u,l,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(SC(SC({},O),{},{loading:!0})),e.next=5,r.countries(t).cities(n).delete();case 5:o=e.sent,i=o.content,u=i.error,l=i.result,u?(w(SC(SC({},O),{},{loading:!1,error:l})),H(!1)):(d=f.countries.map((function(e){if(parseInt(e.id)===parseInt(t)){var r=e.cities.filter((function(e){return e.id!==n}));e.cities=r}return e})),p(SC(SC({},f),{},{countries:d})),s(Dr.Success,c("CITY_REMOVED","City removed")),V&&((h=wC(k)).shift(),0===h.length&&H(!1),D(h))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]}),H(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=CC(a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(SC(SC({},m),{},{loading:!0})),t={},e.next=5,r.setAccessToken(o).users().select(n).where([{attribute:"level",value:[1]}]).get({cancelToken:t});case 5:i=e.sent,u=i.content.result,b(SC(SC({},m),{},{loading:!1,users:u})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),b(SC(SC({},m),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=CC(a.a.mark((function e(){var t,n,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=C&&C.country_id){e.next=3;break}return w(SC(SC({},O),{},{error:c("SELECT_COUNTRY","Select a country")})),e.abrupt("return");case 3:return e.prev=3,s(Dr.Info,c("LOADING","Loading")),w(SC(SC({},O),{},{loading:!0})),C.enabled=!0,e.next=9,r.countries(null==C?void 0:C.country_id).cities().save(C);case 9:t=e.sent,n=t.content,o=n.error,i=n.result,o?w(SC(SC({},O),{},{loading:!1,error:i})):(u=f.countries.map((function(e){if(e.id===(null==C?void 0:C.country_id)){var t=[].concat(wC(e.cities),[i]);e.cities=t}return e})),p(SC(SC({},f),{},{countries:u})),s(Dr.Success,c("CITY_ADDED","City added")),I({}),T(!1)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),w({loading:!1,error:[e.t0.message]});case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=CC(a.a.mark((function e(t,n){var i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(SC(SC({},O),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)},e.next=6,fetch("".concat(r.root,"/dropdownoptions/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?w(SC(SC({},O),{},{loading:!1,error:l.result})):(w(SC(SC({},O),{},{loading:!1})),f=h.options.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),y(SC(SC({},h),{},{options:f})),s(Dr.Success,c("ZONE_SAVED","Zone saved")),I({})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var e=CC(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=C&&C.name){e.next=3;break}return w(SC(SC({},O),{},{error:c("NAME_REQUIRED","The name is required.")})),e.abrupt("return");case 3:return e.prev=3,s(Dr.Info,c("LOADING","Loading")),w(SC(SC({},O),{},{loading:!0})),C.enabled=!0,t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(C)},e.next=10,fetch("".concat(r.root,"/dropdownoptions"),t);case 10:return n=e.sent,e.next=13,n.json();case 13:(i=e.sent).error?w(SC(SC({},O),{},{loading:!1,error:i.result})):(u=[].concat(wC(h.options),[i.result]),y(SC(SC({},h),{},{options:u})),s(Dr.Success,c("ZONE_ADDED","Zone added")),I({}),B(!1),w(SC(SC({},O),{},{loading:!1}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),w({loading:!1,error:[e.t0.message]});case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=CC(a.a.mark((function e(t){var n,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(SC(SC({},O),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/dropdownoptions/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?(w(SC(SC({},O),{},{loading:!1,error:u.result})),H(!1)):(l=h.options.filter((function(e){return e.id!==t})),y(SC(SC({},h),{},{options:l})),s(Dr.Success,c("ZONE_REMOVED","Zone removed")),V&&((f=wC(z)).shift(),0===f.length&&H(!1),G(f))),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]}),H(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;V&&0!==z.length&&ie(null===(e=z[0])||void 0===e?void 0:e.id)}),[z,V]),Object(i.useEffect)((function(){var e,t;V&&0!==k.length&&te(null===(e=k[0])||void 0===e?void 0:e.country_id,null===(t=k[0])||void 0===t?void 0:t.id)}),[k,V]),Object(i.useEffect)((function(){var e;V&&0!==q.length&&Q(null===(e=q[0])||void 0===e?void 0:e.id)}),[q,V]),Object(i.useEffect)((function(){I({})}),[S]),Object(i.useEffect)((function(){ne(),W(),K()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,OC({},e,{countriesState:f,dropdownOptionsState:h,cityManagerList:m,actionState:O,handleUpdateCountry:X,handleAddCountry:Z,setSelectedCountries:$,selectedCountries:q,handleDeleteCountry:Q,handleUpdateCity:ee,handleDeleteCity:te,selectedCity:S,setSelectedCity:E,openCity:A,setOpenCity:T,changesState:C,handleChangesState:function(e,t){I(SC(SC({},C),{},EC({},e,t)))},cleanChagesState:function(){return I({})},handleSaveCity:function(){ee(null==S?void 0:S.country_id,null==S?void 0:S.id,C)},handleAddCity:re,selectedCityList:k,handleCheckboxClick:function(e){if(k.find((function(t){return(null==t?void 0:t.id)===e.id}))){var t=k.filter((function(t){return t.id!==e.id}));D(t)}else D([].concat(wC(k),[e]))},handleAllCheckboxClick:function(){var e,t=null===(e=f.countries)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(wC(e),wC(null==t?void 0:t.cities))}),[]);t.length===k.length?D([]):D(t)},handleSeveralDeleteCities:function(){H(!0)},handleSeveralDeleteCountries:function(){return H(!0)},handleUpdateDropdown:oe,openZoneDropdown:L,setOpenZonedropdown:B,selectedZoneDropdown:N,setSelectedZoneDropdown:R,handleSaveZone:function(){oe(null==N?void 0:N.id,C)},handleAddZone:ae,handleDeleteZone:ie,selectedZoneList:z,handleCheckboxZoneClick:function(e){if(z.find((function(t){return(null==t?void 0:t.id)===e.id}))){var t=z.filter((function(t){return t.id!==e.id}));G(t)}else G([].concat(wC(z),[e]))},handleAllCheckboxZoneClick:function(){var e=wC(h.options);e.length===z.length?G([]):G(e)},handleSeveralDeleteZones:function(){H(!0)}})))};function _C(){return _C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_C.apply(this,arguments)}function kC(e){return function(e){if(Array.isArray(e))return MC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||RC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DC(Object(n),!0).forEach((function(t){LC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function LC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function FC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){BC(a,r,o,i,u,"next",e)}function u(e){BC(a,r,o,i,u,"throw",e)}i(void 0)}))}}function NC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||RC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RC(e,t){if(e){if("string"==typeof e)return MC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?MC(e,t):void 0}}function MC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}TC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},TC.defaultProps={cityMangersPropsToFetch:["id","name","lastname"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var zC=function(e){var t=e.UIComponent,n=e.projectCode,r=NC(rn(),1)[0],o=NC(hn(),1)[0].token,s=NC(Br(),2)[1].showToast,c=NC(Bn(),2)[1],l=NC(Object(i.useState)({plugins:[],sysPlugins:[],loading:!1,error:null,sysError:null}),2),f=l[0],p=l[1],d=NC(Object(i.useState)(!1),2),h=d[0],y=d[1],v=NC(Object(i.useState)(null),2),m=v[0],b=v[1],g=NC(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=function(){var e=FC(a.a.mark((function e(){var t,i,u,s,c,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(UC(UC({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},i=[],u=null,e.prev=5,e.next=8,fetch("".concat(r.url,"/").concat(r.version,"/system/plugins?project_code=").concat(n),t);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error||(i=c.result),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),u=[e.t0.message];case 18:return e.next=20,fetch("".concat(r.root,"/plugins"),t);case 20:return l=e.sent,e.next=23,l.json();case 23:(d=e.sent).error||p(UC(UC({},f),{},{plugins:d.result,sysPlugins:i,sysError:u,loading:!1})),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(0),p(UC(UC({},f),{},{loading:!1,error:[e.t1.message]}));case 30:case"end":return e.stop()}}),e,null,[[0,27],[5,15]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=FC(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(UC(UC({},O),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({url:m})},e.next=6,fetch("".concat(r.root,"/plugins"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:(i=e.sent).error?w({loading:!1,error:i.result}):(w(UC(UC({},O),{},{loading:!1})),u=[].concat(kC(f.plugins),[i.result]),p(UC(UC({},f),{},{plugins:u})),s(Dr.Success,c("PLUGIN_SAVED","Plugin saved")),y(!1),b(null)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=FC(a.a.mark((function e(t){var n,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(UC(UC({},O),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/plugins/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?w({loading:!1,error:u.result}):(w(UC(UC({},O),{},{loading:!1})),l=f.plugins.filter((function(e){return e.id!==t})),d=f.sysPlugins.map((function(e){var t;return UC(UC({},e),{},{installed:e.id!==(null==u||null===(t=u.result)||void 0===t?void 0:t.system_plugin_id)&&e.installed})})),p(UC(UC({},f),{},{plugins:l,sysPlugins:d})),s(Dr.Success,c("PLUGIN_REMOVED","Plugin removed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=FC(a.a.mark((function e(t,n){var i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(UC(UC({},O),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)},e.next=6,fetch("".concat(r.root,"/plugins/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?w({loading:!1,error:l.result}):(w(UC(UC({},O),{},{loading:!1})),d=f.plugins.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),p(UC(UC({},f),{},{plugins:d})),s(Dr.Success,c("PLUGIN_SAVED","Plugin saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=FC(a.a.mark((function e(t){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(UC(UC({},O),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({system_plugin_id:t})},e.next=6,fetch("".concat(r.root,"/plugins"),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?w({loading:!1,error:u.result}):(p(UC(UC({},f),{},{plugins:[].concat(kC(f.plugins),[null==u?void 0:u.result]),sysPlugins:f.sysPlugins.map((function(e){var t;return UC(UC({},e),{},{installed:(null==u||null===(t=u.result)||void 0===t?void 0:t.system_plugin_id)===e.id})}))})),w(UC(UC({},O),{},{loading:!1})),s(Dr.Success,c("SYSTEM_PLUGIN_INSTALLED","Plugin installed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_C({},e,{pluginListState:f,isAddMode:h,setIsAddMode:y,setNewUrl:b,actionState:O,handleAddNewPlugin:S,handleDeletePlugin:E,handleUpdatePlugin:P,handleInstallSysPlugin:C})))};zC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},zC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var GC=n(11),YC=n.n(GC);function qC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var JC=function(e){var t=e.UIComponent,n=e.open,r=e.backdropClassName,o=e.closeOnBackdrop,a=e.onClose,s=Object(i.useRef)(null),c=qC(Object(i.useState)(),2),l=c[0],f=c[1],p=qC(Object(i.useState)(),2),d=p[0],h=p[1],y=qC(Object(i.useState)(!1),2),v=y[0],m=y[1],b=function(){var e=document.querySelectorAll(".popup-component");if(!n&&e.length>1&&e.length>1&&e[e.length-1].focus(),v){var t=window.document.getElementById("app-modals");t&&t.remove(),window.document.body.style.overflow=d}};Object(i.useEffect)((function(){if(n){var e=window.document.getElementById("app-modals");e?f(e):((e=window.document.createElement("div")).id="app-modals",e.className="popup-component-backdrop popup-backdrop"+(r?" ".concat(r):""),document.body.append(e),f(e),m(!0),h(window.document.body.style.overflow)),s.current&&s.current.focus()}return b}),[n,v,d]);return u.a.createElement(u.a.Fragment,null,n&&l&&YC.a.createPortal(u.a.createElement("div",{className:"popup-component",style:{position:"fixed",top:0,left:0,bottom:0,right:0,zIndex:2001,outline:"none"},onClick:function(e){o&&e.target.classList.contains("popup-component")&&a&&a()},onKeyDown:function(e){27===e.keyCode&&e.target.classList.contains("popup-component")&&a&&a()},tabIndex:-1,autoFocus:!0,ref:s},t&&u.a.createElement(t,e)),l))};function VC(){return VC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VC.apply(this,arguments)}function HC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function WC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WC(Object(n),!0).forEach((function(t){XC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZC(e){return function(e){if(Array.isArray(e))return tI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||eI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eI(e,t){if(e){if("string"==typeof e)return tI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tI(e,t):void 0}}function tI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}JC.propTypes={UIComponent:c.a.elementType,open:c.a.bool,closeOnBackdrop:c.a.bool,closeWithKeyboard:c.a.bool,title:c.a.string,content:c.a.oneOfType([c.a.string,c.a.arrayOf(s.string),c.a.elementType,c.a.element]),onAccept:c.a.func,onCancel:c.a.func,onClose:c.a.func},JC.defaultProps={open:!1,closeOnBackdrop:!0,closeWithKeyboard:!0};var nI=function(e){var t=e.UIComponent,n=QC(rn(),1)[0],r=QC(hn(),1)[0].token,o=QC(Object(i.useState)({loading:!1,levels:[],error:null}),2),s=o[0],c=o[1],l=function(){var e,t=(e=a.a.mark((function e(){var t,o,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(KC(KC({},s),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},o="".concat(n.root,"/loyalty_levels"),e.next=6,fetch(o,t);case 6:return i=e.sent,e.next=9,i.json();case 9:u=e.sent,l=u.error,f=u.result,c(KC(KC({},s),{},l?{loading:!1,error:f}:{loading:!1,error:null,levels:f})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),c(KC(KC({},s),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){HC(a,r,o,i,u,"next",e)}function u(e){HC(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){l()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,VC({},e,{levelList:s,handleAddLevelList:function(e){var t=ZC(s.levels);t.push(e),c(KC(KC({},s),{},{levels:t}))},handleUpdateLevelList:function(e){var t=null==s?void 0:s.levels.map((function(t){return t.id===e.id?e:t}));c(KC(KC({},s),{},{levels:t}))},handleDeleteLevelList:function(e){var t,n=null==s||null===(t=s.levels)||void 0===t?void 0:t.filter((function(t){return t.id!==e.id}));c(KC(KC({},s),{},{levels:n}))}})))};nI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rI="change_ingredients",oI="change_options",aI=Object(i.createContext)(),iI=function(){return Object(i.useContext)(aI)||[{},function(){}]};function uI(){return uI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uI.apply(this,arguments)}function sI(e){return function(e){if(Array.isArray(e))return fI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||lI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lI(e,t){if(e){if("string"==typeof e)return fI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fI(e,t):void 0}}function fI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pI=function(e){var t=e.product,n=e.UIComponent,r=cI(iI(),2),o=r[0].ingredients,a=r[1],s=cI(iI(),2),c=s[0].options,l=s[1],f=cI(Object(i.useState)(1),2),p=f[0],d=f[1],h=cI(Object(i.useState)(t.price),2),y=h[0],v=h[1],m=cI(Object(i.useState)(""),2),b=m[0],g=m[1],O=function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n].suboptions,o=0;o<r.length;o++)if(r[o].id==t)return r[o].isChecked;return!1};Object(i.useEffect)((function(){!function(){for(var e=t.ingredients,n=0;n<e.length;n++)e[n].isChecked=!0;a({type:rI,ingredients:e})}(),function(){for(var e=[],n=t.extras,r=0;r<n.length;r++)e.push.apply(e,sI(n[r].options));for(var o=0;o<e.length;o++){var a=e[o];if(a.isDisplay=!0,a.conditioned){var i=a.respect_to;void 0!==i&&""!==i&&"null"!=i||(a.isDisplay=!1),O(e,i)||(a.isDisplay=!1)}for(var u=a.suboptions,s=0;s<u.length;s++)u[s].isChecked=!1}l({type:oI,options:e})}()}),[]);var w=function(e,n){for(var r=0,o=0;o<n.length;o++)if(0!=n[o].isDisplay)for(var a=n[o].suboptions,i=0;i<a.length;i++)a[i].isChecked&&(r+=parseFloat(a[i].price));var u=(parseFloat(t.price)+r)*e;v(u)};return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,uI({},e,{onShare:function(){e.onShare&&e.onShare(t)},onClose:function(){e.onClose&&e.onClose()},productName:t.name,productLogo:t.images,productCount:p,productPrice:y,ingredients:o,options:c,note:b,onChangedIngredient:function(e){o[e].isChecked=!o[e].isChecked,a({type:rI,ingredients:o})},onChangedOption:function(e,t,n){if(n){for(var r=0;r<c[e].suboptions.length;r++)c[e].suboptions[r].isChecked=!1;c[e].suboptions[t].isChecked=!0}else c[e].suboptions[t].isChecked=!c[e].suboptions[t].isChecked;for(var o=0;o<c.length;o++){var a=c[o];if(a.isDisplay=!0,a.conditioned){var i=a.respect_to;void 0!==i&&""!==i&&"null"!=i||(a.isDisplay=!1),O(c,i)||(a.isDisplay=!1)}}w(p,c),l({type:oI,options:c})},onChangedNote:function(e){g(e.target.value)},onClickedButtonPlus:function(){d(p+1),w(p+1,c)},onClickedButtonMinus:function(){p>1&&(d(p-1),w(p-1,c))},onClickedButtonAdd:function(){e.onClickedButtonAdd&&(t.ingredients=o,t.options=c,t.note=b,t.quantity=p,e.onAdd(t))}})))};function dI(){return dI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dI.apply(this,arguments)}function hI(e){return function(e){if(Array.isArray(e))return jI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function vI(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){yI(a,r,o,i,u,"next",e)}function u(e){yI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function mI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mI(Object(n),!0).forEach((function(t){gI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||wI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wI(e,t){if(e){if("string"==typeof e)return jI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jI(e,t):void 0}}function jI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}pI.propTypes={UIComponent:c.a.elementType,onShare:c.a.func,onClose:c.a.func,productName:c.a.string,productLogo:c.a.string,productCount:c.a.number,productPrice:c.a.number,ingredients:c.a.array,options:c.a.array,note:c.a.array,onChangedIngredient:c.a.func,onChangedOption:c.a.func,onChangedNote:c.a.func,onClickedButtonPlus:c.a.func,onClickedButtonMinues:c.a.func,onClickedButtonAdd:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},pI.defaultProps={productName:""};var SI=function(e){var t=e.business,n=e.UIComponent,r=e.productId,o=e.categoryId,s=e.handleUpdateBusinessState,c=OI(rn(),1)[0],l=OI(hn(),1)[0],f=OI(Br(),2)[1].showToast,p=OI(Bn(),2)[1],d=OI(Object(i.useState)({loading:!1,product:null,error:null}),2),h=d[0],y=d[1],v=OI(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),m=v[0],b=v[1],g=OI(Object(i.useState)({ingredients:{},options:{}}),2),O=g[0],w=g[1],j=function(){var e=vI(a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(bI(bI({},h),{},{loading:!0})),e.next=4,c.businesses(t.id).categories(o).products(r).get();case 4:n=e.sent,i=n.content,u=i.error,s=i.result,y(u?bI(bI({},h),{},{loading:!1,error:s}):{loading:!1,product:s,error:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),y(bI(bI({},h),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=vI(a.a.mark((function e(n){var r,o,i,u,s,d,y,v,g,O,w,j,S,E,P,I;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),b(bI(bI({},m),{},{loading:!0})),i=bI({},n||m.changes),u=bI({},n||m.changes),e.next=7,c.businesses(null==t?void 0:t.id).categories(null==h||null===(r=h.product)||void 0===r?void 0:r.category_id).products(null==h||null===(o=h.product)||void 0===o?void 0:o.id).save(i,{accessToken:l.token});case 7:if(s=e.sent,d=s.content,y=d.error,v=d.result,b(bI(bI({},m),{},{changes:y?m.changes:{},result:{error:y,result:v},loading:!1})),y){e.next=24;break}if(void 0===(null==u||null===(g=u.ribbon)||void 0===g?void 0:g.enabled)||null!=u&&null!==(O=u.ribbon)&&void 0!==O&&O.enabled||null==v||null===(w=v.ribbon)||void 0===w||!w.enabled){e.next=22;break}return E={ribbon:{enabled:!1}},e.next=17,c.businesses(null==t?void 0:t.id).categories(null==h||null===(j=h.product)||void 0===j?void 0:j.category_id).products(null==h||null===(S=h.product)||void 0===S?void 0:S.id).save(E,{accessToken:l.token});case 17:P=e.sent,I=P.content,C(null==I?void 0:I.result),e.next=23;break;case 22:C(v);case 23:f(Dr.Success,p("PRODUCT_SAVED","Product saved"));case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),b(bI(bI({},m),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var n=vI(a.a.mark((function n(){var r,o,i,u,l,d,y;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(Dr.Info,p("LOADING","Loading")),b(bI(bI({},m),{},{loading:!0})),n.next=5,c.businesses(parseInt(null==t?void 0:t.id)).categories(parseInt(null===(r=h.product)||void 0===r?void 0:r.category_id)).products(null===(o=h.product)||void 0===o?void 0:o.id).delete();case 5:i=n.sent,u=i.content,l=u.error,d=u.result,l?b(bI(bI({},m),{},{loading:!1,result:{error:!0,result:d}})):(b(bI(bI({},m),{},{loading:!1,result:{error:!1,result:d}})),s&&((y=hI(null==t?void 0:t.categories)).forEach((function e(t){var n;if(t.id===(null===(n=h.product)||void 0===n?void 0:n.category_id)){var r=t.products.filter((function(e){return e.id!==h.product.id}));t.products=hI(r)}Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),s(bI(bI({},t),{},{categories:y}))),f(Dr.Success,p("PRODUCT_DELETED","Product deleted")),e.onClose&&e.onClose()),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),b(bI(bI({},m),{},{loading:!1,result:{error:!0,result:n.t0}}));case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(){return n.apply(this,arguments)}}(),P=function(t){for(var n,r=0,o=0;o<(null===(a=e.product)||void 0===a||null===(i=a.extras)||void 0===i?void 0:i.length);o++)for(var a,i,u,s=null===(u=e.product)||void 0===u?void 0:u.extras[o],c=0;c<(null===(l=s.options)||void 0===l?void 0:l.length);c++)for(var l,f=s.options[c],p=0;p<(null===(d=f.suboptions)||void 0===d?void 0:d.length);p++){var d,h,y,v=f.suboptions[p];if(null!==(h=t.options["id:".concat(f.id)])&&void 0!==h&&null!==(y=h.suboptions["id:".concat(v.id)])&&void 0!==y&&y.selected){var m=t.options["id:".concat(f.id)].suboptions["id:".concat(v.id)],b=f.allow_suboption_quantity?m.quantity:1;r+=(f.with_half_option&&v.half_price&&"whole"!==m.position?v.half_price:v.price)*b}}return(null===(n=e.product)||void 0===n?void 0:n.price)+r},C=function(e){if(y(bI(bI({},h),{},{product:bI(bI({},h.product),e)})),s){var n=hI(null==t?void 0:t.categories);n.forEach((function t(n){var r;if(n.id===(null===(r=h.product)||void 0===r?void 0:r.category_id)){var o=n.products.map((function(t){return t.id===h.product.id?bI(bI({},t),e):t}));n.products=hI(o)}Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(t)}));var r=bI(bI({},t),{},{categories:n});s(r)}};return Object(i.useEffect)((function(){e.product?(y(bI(bI({},h),{},{product:e.product})),function(t){var n,r,o,a,i={};for(var u in t.ingredients){var s=t.ingredients[u];i["id:".concat(s.id)]={selected:!0}}var c=bI(bI({},e.productCart),{},{id:t.id,price:t.price,name:t.name,businessId:e.businessId,categoryId:t.category_id,inventoried:t.inventoried,stock:t.quantity,ingredients:(null===(n=e.productCart)||void 0===n?void 0:n.ingredients)||i,options:(null===(r=e.productCart)||void 0===r?void 0:r.options)||{},comment:(null===(o=e.productCart)||void 0===o?void 0:o.comment)||null,quantity:(null===(a=e.productCart)||void 0===a?void 0:a.quantity)||1});c.unitTotal=P(c),c.total=c.unitTotal*c.quantity,w(c)}(e.product)):r&&o&&j()}),[e.product]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,dI({},e,{productState:h,productCart:O,formState:m,cleanFormState:function(e){return b(bI(bI({},m),e))},handleChangeRibbon:function(e){var t,n,r=null!=m&&null!==(t=m.changes)&&void 0!==t&&t.ribbon?bI(bI({},null==m||null===(n=m.changes)||void 0===n?void 0:n.ribbon),e):bI({},e),o=bI(bI({},null==m?void 0:m.changes),{},{ribbon:r});b(bI(bI({},m),{},{changes:o}))},handleChangeProductActiveState:function(){var e,t={enabled:!(null!=h&&null!==(e=h.product)&&void 0!==e&&e.enabled)};S(t)},handleChangeInput:function(e){b(bI(bI({},m),{},{changes:bI(bI({},m.changes),{},gI({},e.target.name,e.target.value))}))},handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){b(bI(bI({},m),{},{changes:bI(bI({},m.changes),{},gI({},t?"seo_image":"images",n.result))}))},n.onerror=function(e){return console.log(e)}},handleUpdateClick:S,handleDeleteProduct:E,showProductOption:function(e){var t=!0;if(e.respect_to&&(t=!1,O.options)){var n=O.options;for(var r in n){var o;if(null!==(o=n[r].suboptions["id:".concat(e.respect_to)])&&void 0!==o&&o.selected){t=!0;break}}}return t},handleChangeFormState:function(e){b(bI(bI({},m),{},{changes:bI(bI({},m.changes),e)}))},handleSuccessUpdate:C})))};function EI(){return EI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EI.apply(this,arguments)}function PI(e){return function(e){if(Array.isArray(e))return DI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||kI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function II(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CI(Object(n),!0).forEach((function(t){xI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function TI(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){AI(a,r,o,i,u,"next",e)}function u(e){AI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function _I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||kI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kI(e,t){if(e){if("string"==typeof e)return DI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DI(e,t):void 0}}function DI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}SI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},SI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var UI=function(e){var t=e.businessId,n=e.extraId,r=e.metafields,o=e.UIComponent,s=e.handleSuccessAddMetaFields,c=e.handleSuccessDeleteBusinessMetaFields,l=_I(rn(),1)[0],f=_I(hn(),1)[0],p=_I(Br(),2)[1].showToast,d=_I(Bn(),2)[1],h=_I(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),y=h[0],v=h[1],m=_I(Object(i.useState)({loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=function(){var e=TI(a.a.mark((function e(){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(II(II({},y),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/extras/").concat(n,"/metafields"),r);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=i.result,v(II(II({},y),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(II(II({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=TI(a.a.mark((function e(r){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),g(II(II({},b),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=6,fetch("".concat(l.root,"/business/").concat(t,"/extras/").concat(n,"/metafields/").concat(r),o);case 6:e.sent.ok&&(i=y.metaFields.filter((function(e){return e.id!==r})),v(II(II({},y),{},{metaFields:i})),g({loading:!1,result:{error:!1}}),c&&c(r),p(Dr.Success,d("METAFIELD_DELETED","Metafield deleted"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=TI(a.a.mark((function e(r){var o,i,u,c,h,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),g(II(II({},b),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(r)},e.next=6,fetch("".concat(l.root,"/business/").concat(t,"/extras/").concat(n,"/metafields"),o);case 6:return i=e.sent,e.next=9,i.json();case 9:u=e.sent,c=u.error,h=u.result,c?g({loading:!1,result:{error:!0,result:h}}):([],m=[].concat(PI(y.metaFields),[h]),v(II(II({},y),{},{metaFields:m})),g({loading:!1,result:{error:!1}}),s&&s(h),p(Dr.Success,d("METAFIELD_ADDED","Metafield added"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),g({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?v(II(II({},y),{},{metaFields:r})):O()}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,EI({},e,{metaFieldsList:y,actionState:b,handleDeleteMetaField:w,handeAddMetaField:j})))};function LI(){return LI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LI.apply(this,arguments)}function BI(e){return function(e){if(Array.isArray(e))return $I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function NI(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){FI(a,r,o,i,u,"next",e)}function u(e){FI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function RI(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=qI(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function MI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MI(Object(n),!0).forEach((function(t){GI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||qI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qI(e,t){if(e){if("string"==typeof e)return $I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$I(e,t):void 0}}function $I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}UI.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},UI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var JI=function(e){var t=e.UIComponent,n=e.business,r=e.extra,o=e.option,s=e.handleUpdateBusinessState,c=e.handleSucccessDeleteOption,l=YI(rn(),1)[0],f=YI(hn(),1)[0].token,p=YI(Br(),2)[1].showToast,d=YI(Bn(),2)[1],h=YI(Object(i.useState)({option:o,loading:!1,error:null}),2),y=h[0],v=h[1],m=YI(Object(i.useState)({changes:{},result:{}}),2),b=m[0],g=m[1],O=YI(Object(i.useState)(null),2),w=O[0],j=O[1],S=YI(Object(i.useState)({changes:{},loading:!1,error:null}),2),E=S[0],P=S[1],C=YI(Object(i.useState)([]),2),I=C[0],x=C[1],A=YI(Object(i.useState)([]),2),T=A[0],_=A[1],k=YI(Object(i.useState)(null),2),D=k[0],U=k[1],L=YI(Object(i.useState)(r),2),B=L[0],F=L[1],N=YI(Object(i.useState)(null),2),R=N[0],M=N[1],z=YI(Object(i.useState)(!1),2),G=z[0],Y=z[1],q=YI(Object(i.useState)(null),2),$=q[0],J=q[1],V=YI(Object(i.useState)(!1),2),H=V[0],W=V[1],K=function(e){if(s){var t=n.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})),r=zI(zI({},n),{},{extras:t}),o=r.categories.map((function(t){var n=t.products.map((function(t){var n=t.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));return zI(zI({},t),{},{extras:n})}));return zI(zI({},t),{},{products:n})})),a=zI(zI({},r),{},{categories:o});s(a)}},X=function(e){var t,n=[],r=RI(e.options.filter((function(e){return e.id!==o.id})));try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push({value:a.id,content:a.name})}}catch(e){r.e(e)}finally{r.f()}x(n)},Z=function(e,t){var n,r=[],o=RI(e.options.find((function(e){return e.id===t})).suboptions);try{for(o.s();!(n=o.n()).done;){var a=n.value;r.push({value:a.id,content:a.name})}}catch(e){o.e(e)}finally{o.f()}_(r)},Q=function(e){var t,n=RI(null==B?void 0:B.options);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(null!=r&&r.suboptions){var o,a=RI(r.suboptions);try{for(a.s();!(o=a.n()).done;){var i=o.value;i.id===e&&(U(r.id),M(i.id))}}catch(e){a.e(e)}finally{a.f()}}}}catch(e){n.e(e)}finally{n.f()}},ee=function(){var e=NI(a.a.mark((function e(t){var i,u,s,c,h,m,O,j,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in e.prev=0,i=t||zI({},b.changes),u={},i)""!==i[s]&&(u=zI(zI({},u),{},GI({},s,i[s])));if(0!==Object.keys(u).length){e.next=6;break}return e.abrupt("return");case 6:return p(Dr.Info,d("LOADING","Loading")),v(zI(zI({},y),{},{loading:!0})),c={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(u)},e.next=11,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id,"/suboptions/").concat((null==t?void 0:t.id)||w),c);case 11:return h=e.sent,e.next=14,h.json();case 14:if(m=e.sent,g({changes:m.error?b.changes:{},result:null==m?void 0:m.result}),m.error){e.next=26;break}return O=y.option.suboptions.filter((function(e){return e.id===m.result.id&&Object.assign(e,m.result),!0})),j=zI(zI({},y.option),{},{suboptions:O}),v(zI(zI({},y),{},{option:j,loading:!1})),S=r.options.filter((function(e){return e.id===j.id&&Object.assign(e,j),!0})),E=zI(zI({},r),{},{options:S}),F(E),K(E),p(Dr.Success,d("CHOICE_SAVED","Choice saved")),e.abrupt("return",!0);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),v(zI(zI({},y),{},{loading:!1,error:e.t0.message}));case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=NI(a.a.mark((function e(t){var i,u,s,c,h,m,b,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u in e.prev=0,i=zI({},t))i[u]||delete i[u];if(null!=i&&i.price||(i.price=0),0!==Object.keys(i).length){e.next=6;break}return e.abrupt("return");case 6:return p(Dr.Info,d("LOADING","Loading")),i.enabled=!0,v(zI(zI({},y),{},{loading:!0})),s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(i)},e.next=12,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id,"/suboptions"),s);case 12:return c=e.sent,e.next=15,c.json();case 15:(h=e.sent).error||((m=BI(y.option.suboptions)).push(zI(zI({},h.result),{},{preselected:!1})),b=zI(zI({},y.option),{},{suboptions:m}),v(zI(zI({},y),{},{option:b,loading:!1})),g=r.options.filter((function(e){return e.id===b.id&&Object.assign(e,b),!0})),O=zI(zI({},r),{},{options:g}),F(O),K(O),p(Dr.Success,d("CHOICE_ADDED","Choice added")),Y(!1)),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),v(zI(zI({},y),{},{loading:!1,error:e.t0.message}));case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=NI(a.a.mark((function e(t){var i,u,s,c,h,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),v(zI(zI({},y),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id,"/suboptions/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:e.sent.error||(s=y.option.suboptions.filter((function(e){return e.id!==t})),c=zI(zI({},y.option),{},{suboptions:s}),v(zI(zI({},y),{},{option:c,loading:!1})),h=r.options.filter((function(e){return e.id===c.id&&Object.assign(e,c),!0})),m=zI(zI({},r),{},{options:h}),F(m),K(m),p(Dr.Success,d("CHOICE_DELETED","Choice deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(zI(zI({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=NI(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=GI({},t,n),P(zI(zI({},E),{},{changes:r})),oe(r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=NI(a.a.mark((function e(t){var i,u,s,c,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),P(zI(zI({},E),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(t)},e.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error||(P({changes:s.error?E.changes:{},loading:!1}),v(zI(zI({},y),{},{option:zI(zI({},y.option),s.result)})),c=r.options.filter((function(e){return e.id===s.result.id&&Object.assign(e,s.result),!0})),h=zI(zI({},r),{},{options:c}),F(h),K(h),p(Dr.Success,d("OPTION_SAVED","Option saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),P(zI(zI({},E),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var t=NI(a.a.mark((function t(){var i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(Dr.Info,d("LOADING","Loading")),v(zI(zI({},y),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},t.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id),i);case 6:return u=t.sent,t.next=9,u.json();case 9:t.sent.error||(c&&c(o.id),p(Dr.Success,d("OPTION_DELETED","Option deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v(zI(zI({},y),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(D){X(B),Z(B,D);var e=B.options.find((function(e){return e.id===o.id}));Q(null==e?void 0:e.respect_to)}}),[B,D]),Object(i.useEffect)((function(){v(zI(zI({},y),{},{option:o})),X(r),Q(null==o?void 0:o.respect_to)}),[o,r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,LI({},e,{optionState:y,changesState:b,editSubOptionId:w,settingChangeState:E,handleChangeInput:function(e,t){t===w?g({result:{},changes:zI(zI({},b.changes),{},GI({},e.target.name,e.target.value))}):(j(t),g({result:{},changes:GI({},e.target.name,e.target.value)}))},handleChangeSubOptionImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),t===w?n.onload=function(){g({result:{},changes:zI(zI({},b.changes),{},{image:n.result})})}:(j(t),n.onload=function(){g({result:{},changes:{image:n.result}})}),n.onerror=function(e){return console.log(e)}},handleChangeSubOptionEnable:function(e,t){t===w?g({result:{},changes:zI(zI({},b.changes),{},{enabled:e})}):(j(t),g({result:{},changes:{enabled:e}}))},handleDeteteSubOption:ne,handleOptionSetting:re,conditionalOptions:I,conditionalSubOptions:T,conditionalOptionId:D,conditionalSubOptionId:R,handleChangeConditionalOption:function(e){U(e),Z(B,e)},handleChangeConditionalSubOption:function(e){oe({respect_to:e})},handleAddOption:te,handleDeteteOption:ae,handleChangeDefaultSuboption:function(e){var t,n,r,o,a,i,u,s=null==y||null===(t=y.option)||void 0===t||null===(n=t.suboptions)||void 0===n||null===(r=n.find((function(t){return t.id===e})))||void 0===r?void 0:r.preselected,c=null==y||null===(o=y.option)||void 0===o||null===(a=o.suboptions)||void 0===a||null===(i=a.filter((function(e){return null==e?void 0:e.preselected})))||void 0===i?void 0:i.length;s?ee({id:e,preselected:!1}):(null==y||null===(u=y.option)||void 0===u?void 0:u.max)>c?ee({id:e,preselected:!0}):p(Dr.Error,d("MAX_PRESELECTED_OPTIONS_ERROR","Maximum number of options exceeded"),4e3)},handleUpdateSubOption:ee,handleChangeItem:function(e,t){void 0!==t&&w===t&&j(t),g({result:{},changes:zI(zI({},b.changes),e)})},handleUpdateOption:oe,isAddForm:G,setIsAddForm:Y,dragoverSubOptionId:$,isSubOptionsBottom:H,handleDragStart:function(e,t){e.dataTransfer.setData("transferSubOptionId",t.id);var n=document.createElement("div");n.classList.add("ghostDragging"),n.innerHTML=t.name,document.body.appendChild(n),e.dataTransfer.setDragImage(n,0,0),W(!1)},hanldeDragOver:function(e,t,n){if(e.preventDefault(),e.target.closest(".draggable-suboption"))if(n){var r=window.scrollY+e.target.getBoundingClientRect().top+e.target.offsetHeight/2;e.clientY>r?(W(!0),J(null)):(W(!1),J(t.id))}else J(t.id)},handleDrop:function(e,t){e.preventDefault();var n,r=parseInt(e.dataTransfer.getData("transferSubOptionId"));t.id!==r&&(n=H?(null==t?void 0:t.rank)+1:null==t?void 0:t.rank,W(!1),ee({id:r,rank:n}))},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);J(null)}})))};function VI(){return VI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VI.apply(this,arguments)}function HI(e){return function(e){if(Array.isArray(e))return nx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WI(Object(n),!0).forEach((function(t){XI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function QI(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ZI(a,r,o,i,u,"next",e)}function u(e){ZI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ex(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||tx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tx(e,t){if(e){if("string"==typeof e)return nx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nx(e,t):void 0}}function nx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}JI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},JI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rx=function(e){var t=e.businessId,n=e.extraId,r=e.optionId,o=e.metafields,s=e.UIComponent,c=e.handleSuccessAddMetaFields,l=e.handleSuccessDeleteBusinessMetaFields,f=ex(rn(),1)[0],p=ex(hn(),1)[0],d=ex(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),h=d[0],y=d[1],v=ex(Object(i.useState)({loading:!1,result:{error:!1}}),2),m=v[0],b=v[1],g=function(){var e=QI(a.a.mark((function e(){var o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(KI(KI({},h),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,y(KI(KI({},h),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(KI(KI({},h),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=QI(a.a.mark((function e(o){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(KI(KI({},m),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/metafields/").concat(o),i);case 5:e.sent.ok&&(u=h.metaFields.filter((function(e){return e.id!==o})),y(KI(KI({},h),{},{metaFields:u})),b({loading:!1,result:{error:!1}}),l&&l(o)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),b({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=QI(a.a.mark((function e(o){var i,u,s,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(KI(KI({},m),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)},body:JSON.stringify(o)},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/metafields"),i);case 5:return u=e.sent,e.next=8,u.json();case 8:s=e.sent,l=s.error,d=s.result,l?b({loading:!1,result:{error:!0,result:d}}):([],v=[].concat(HI(h.metaFields),[d]),y(KI(KI({},h),{},{metaFields:v})),b({loading:!1,result:{error:!1}}),c&&c(d)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),b({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?y(KI(KI({},h),{},{metaFields:o})):g()}),[o]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,VI({},e,{metaFieldsList:h,actionState:m,handleDeleteMetaField:O,handeAddMetaField:w})))};function ox(){return ox=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ox.apply(this,arguments)}function ax(e){return function(e){if(Array.isArray(e))return dx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||px(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ix(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ux(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ix(a,r,o,i,u,"next",e)}function u(e){ix(a,r,o,i,u,"throw",e)}i(void 0)}))}}function sx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sx(Object(n),!0).forEach((function(t){lx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||px(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function px(e,t){if(e){if("string"==typeof e)return dx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dx(e,t):void 0}}function dx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}rx.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rx.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var hx=function(e){var t=e.UIComponent,n=e.business,r=e.extra,o=e.handleUpdateBusinessState,s=fx(rn(),1)[0],c=fx(hn(),1)[0].token,l=fx(Br(),2)[1].showToast,f=fx(Bn(),2)[1],p=fx(Object(i.useState)({extra:r,loading:!1,error:null}),2),d=p[0],h=p[1],y=fx(Object(i.useState)({changes:{},result:{}}),2),v=y[0],m=y[1],b=fx(Object(i.useState)(null),2),g=b[0],O=b[1],w=fx(Object(i.useState)({conditioned:!1,enabled:!0,name:"",min:1,max:1}),2),j=w[0],S=w[1],E=fx(Object(i.useState)(null),2),P=E[0],C=E[1],I=fx(Object(i.useState)({}),2),x=I[0],A=I[1],T=fx(Object(i.useState)(null),2),_=T[0],k=T[1],D=fx(Object(i.useState)(!1),2),U=D[0],L=D[1],B=function(e){return m(cx({},e))},F=function(e,t){B(cx(cx({},v),{},{changes:{}})),C(e),A(cx(cx({},x),{},lx({},t,!0)))},N=function(e){if(o){var t=n.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})),r=cx(cx({},n),{},{extras:t}),a=r.categories.map((function(t){var n=t.products.map((function(t){var n=t.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));return cx(cx({},t),{},{extras:n})}));return cx(cx({},t),{},{products:n})})),i=cx(cx({},r),{},{categories:a});o(i)}},R=function(){var e=ux(a.a.mark((function e(){var t,o,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),h(cx(cx({},d),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(null==v?void 0:v.changes)},e.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(g),t);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error||(m({changes:i.error?v.changes:{},result:i.result}),u=d.extra.options.filter((function(e){return e.id===i.result.id&&Object.assign(e,i.result),!0})),p=cx(cx({},d.extra),{},{options:u}),h(cx(cx({},d),{},{loading:!1,extra:p})),N(p),l(Dr.Success,f("OPTION_SAVED","Option saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(cx(cx({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=ux(a.a.mark((function e(){var t,o,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),h(cx(cx({},d),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(j)},e.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options"),t);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error||(S({conditioned:!1,enabled:!0,name:"",min:1,max:1}),u=d.extra.options?[].concat(ax(d.extra.options),[cx(cx({},i.result),{},{suboptions:[]})]):[cx(cx({},i.result),{},{suboptions:[]})],p=cx(cx({},d.extra),{},{options:u}),h(cx(cx({},d),{},{loading:!1,extra:p})),N(p),l(Dr.Success,f("OPTION_ADDED","Option added")),F(cx(cx({},i.result),{},{suboptions:[]}),"edit")),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(cx(cx({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=ux(a.a.mark((function e(t){var o,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),h(cx(cx({},d),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},e.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(t),o);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(u=d.extra.options.filter((function(e){return e.id!==t})),p=cx(cx({},d.extra),{},{options:u}),h(cx(cx({},d),{},{loading:!1,extra:p})),N(p),l(Dr.Success,f("OPTION_DELETED","Option deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(cx(cx({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var t=ux(a.a.mark((function t(){var i,u,p,y,v,m;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dr.Info,f("LOADING","Loading")),h(cx(cx({},d),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id),i);case 6:return u=t.sent,t.next=9,u.json();case 9:t.sent.error||(p=n.extras.filter((function(e){return e.id!==r.id})),o&&(y=cx(cx({},n),{},{extras:p}),v=y.categories.map((function(e){var t=e.products.map((function(e){var t=e.extras.filter((function(e){return e.id!==r.id}));return cx(cx({},e),{},{extras:t})}));return cx(cx({},e),{},{products:t})})),m=cx(cx({},y),{},{categories:v}),o(m)),l(Dr.Success,f("EXTRA_DELETED","Extra deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),h(cx(cx({},d),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),Y=function(){var e=ux(a.a.mark((function e(t,o){var i,u,p,y,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),h(cx(cx({},d),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(o)},e.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(p=e.sent).error||(m({changes:p.error?v.changes:{},result:p.result}),y=d.extra.options.filter((function(e){return e.id===p.result.id&&Object.assign(e,p.result),!0})),b=cx(cx({},d.extra),{},{options:y}),h(cx(cx({},d),{},{loading:!1,extra:b})),N(b),l(Dr.Success,f("OPTION_SAVED","Option saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(cx(cx({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m({changes:{},result:{}}),h(cx(cx({},d),{},{extra:r}))}),[r]),Object(i.useEffect)((function(){S({conditioned:!1,enabled:!0,name:"",min:1,max:1})}),[null==r?void 0:r.id]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ox({},e,{changesState:v,cleanChangesState:B,handleChangeItem:function(e,t){void 0!==t&&O(t),m({result:{},changes:cx(cx({},v.changes),e)})},extraState:d,editOptionId:g,addChangesState:j,handleChangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),t===g?n.onload=function(){m({result:{},changes:cx(cx({},v.changes),{},{image:n.result})})}:(O(t),n.onload=function(){m({result:{},changes:{image:n.result}})}),n.onerror=function(e){return console.log(e)}},handleChangeInput:function(e,t){t===g?m({result:{},changes:cx(cx({},v.changes),{},lx({},e.target.name,e.target.value))}):(O(t),m({result:{},changes:lx({},e.target.name,e.target.value)}))},handleChangeOptionEnable:function(e,t){t===g?m({result:{},changes:cx(cx({},v.changes),{},{enabled:e})}):(O(t),m({result:{},changes:{enabled:e}}))},handleAddOption:M,handleChangeAddOption:function(e){S(cx(cx({},j),{},lx({},e.target.name,e.target.value)))},handleChangeAddOptionEnable:function(e){S(cx(cx({},j),{},{enabled:e}))},handleDeteteOption:z,handleDeleteExtra:G,handleSucccessDeleteOption:function(e){var t=d.extra.options.filter((function(t){return t.id!==e})),n=cx(cx({},d.extra),{},{options:t});h(cx(cx({},d),{},{loading:!1,extra:n})),N(n)},handleUpdateOption:R,curOption:P,openModal:x,setCurOption:C,setOpenModal:A,handleOpenModal:F,dragoverOptionId:_,isOptionsBottom:U,handleDragStart:function(e,t){e.dataTransfer.setData("transferOptionId",t.id);var n=document.createElement("div");n.classList.add("ghostDragging"),n.innerHTML=t.name,document.body.appendChild(n),e.dataTransfer.setDragImage(n,0,0),L(!1)},hanldeDragOver:function(e,t,n){if(e.preventDefault(),e.target.closest(".draggable-option"))if(n){var r=window.scrollY+e.target.getBoundingClientRect().top+e.target.offsetHeight/2;e.clientY>r?(L(!0),k(null)):(L(!1),k(t.id))}else k(t.id)},handleDrop:function(e,t){e.preventDefault();var n,r=parseInt(e.dataTransfer.getData("transferOptionId"));t.id!==r&&(n=U?(null==t?void 0:t.rank)+1:null==t?void 0:t.rank,L(!1),Y(r,{rank:n}))},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);k(null)}})))};function yx(){return yx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yx.apply(this,arguments)}function vx(e){return function(e){if(Array.isArray(e))return Ex(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Sx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mx(Object(n),!0).forEach((function(t){gx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ox(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function wx(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ox(a,r,o,i,u,"next",e)}function u(e){Ox(a,r,o,i,u,"throw",e)}i(void 0)}))}}function jx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Sx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sx(e,t){if(e){if("string"==typeof e)return Ex(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ex(e,t):void 0}}function Ex(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}hx.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hx.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Px=function(e){var t=e.businessId,n=e.extraId,r=e.optionId,o=e.subOptionId,s=e.metafields,c=e.UIComponent,l=e.handleSuccessAddMetaFields,f=e.handleSuccessDeleteBusinessMetaFields,p=jx(rn(),1)[0],d=jx(hn(),1)[0],h=jx(Br(),2)[1].showToast,y=jx(Bn(),2)[1],v=jx(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=jx(Object(i.useState)({loading:!1,result:{error:!1}}),2),O=g[0],w=g[1],j=function(){var e=wx(a.a.mark((function e(){var i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(bx(bx({},m),{},{loading:!0})),i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},e.next=5,fetch("".concat(p.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/suboptions/").concat(o,"/metafields"),i);case 5:return u=e.sent,e.next=8,u.json();case 8:s=e.sent,c=s.result,b(bx(bx({},m),{},{loading:!1,metaFields:c})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(bx(bx({},m),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=wx(a.a.mark((function e(i){var u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,y("LOADING","Loading")),w(bx(bx({},O),{},{loading:!0})),u={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},e.next=6,fetch("".concat(p.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/suboptions/").concat(o,"/metafields/").concat(i),u);case 6:e.sent.ok&&(h(Dr.Success,y("METAFIELD_DELETED","Metafield deleted")),s=m.metaFields.filter((function(e){return e.id!==i})),b(bx(bx({},m),{},{metaFields:s})),w({loading:!1,result:{error:!1}}),f&&f(i)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),w({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=wx(a.a.mark((function e(i){var u,s,c,f,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,y("LOADING","Loading")),w(bx(bx({},O),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)},body:JSON.stringify(i)},e.next=6,fetch("".concat(p.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/suboptions/").concat(o,"/metafields"),u);case 6:return s=e.sent,e.next=9,s.json();case 9:c=e.sent,f=c.error,v=c.result,f?w({loading:!1,result:{error:!0,result:v}}):(h(Dr.Success,y("METAFIELD_ADDED","Metafield added")),[],g=[].concat(vx(m.metaFields),[v]),b(bx(bx({},m),{},{metaFields:g})),w({loading:!1,result:{error:!1}}),l&&l(v)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),w({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){s?b(bx(bx({},m),{},{metaFields:s})):j()}),[s]),u.a.createElement(u.a.Fragment,null,c&&u.a.createElement(c,yx({},e,{metaFieldsList:m,actionState:O,handleDeleteMetaField:S,handeAddMetaField:E})))};function Cx(){return Cx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cx.apply(this,arguments)}function Ix(e){return function(e){if(Array.isArray(e))return Lx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ux(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ax(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xx(Object(n),!0).forEach((function(t){Tx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _x(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function kx(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_x(a,r,o,i,u,"next",e)}function u(e){_x(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Dx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ux(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ux(e,t){if(e){if("string"==typeof e)return Lx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lx(e,t):void 0}}function Lx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Px.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Px.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Bx=function(e){var t=e.business,n=e.UIComponent,r=e.product,o=e.handleSuccessUpdate,s=e.handleUpdateBusinessState,c=Dx(rn(),1)[0],l=Dx(hn(),1)[0].token,f=Dx(Br(),2)[1].showToast,p=Dx(Bn(),2)[1],d=Dx(Object(i.useState)({product:r,loading:!1,error:null}),2),h=d[0],y=d[1],v=Dx(Object(i.useState)({extras:null==t?void 0:t.extras,loading:!1,error:null}),2),m=v[0],b=v[1],g=Dx(Object(i.useState)({}),2),O=g[0],w=g[1],j=Dx(Object(i.useState)(!1),2),S=j[0],E=j[1],P=Dx(Object(i.useState)(null),2),C=P[0],I=P[1],x=Dx(Object(i.useState)(!1),2),A=x[0],T=x[1],_=function(){var e=kx(a.a.mark((function e(n){var i,u,s,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={business_id:null==t?void 0:t.id,category_id:null==r?void 0:r.category_id,product_id:null==r?void 0:r.id,extras:JSON.stringify(n)},f(Dr.Info,p("LOADING","Loading")),y(Ax(Ax({},h),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=7,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==r?void 0:r.category_id,"/products/").concat(r.id),u);case 7:return s=e.sent,e.next=10,s.json();case 10:e.sent.error||(d=null==m?void 0:m.extras.filter((function(e){return n.includes(e.id)})),v=Ax(Ax({},h.product),{},{extras:d}),y(Ax(Ax({},h),{},{loading:!1,product:v})),o&&o(v),f(Dr.Success,p("EXTRA_SAVED","Extra saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),y(Ax(Ax({},h),{},{loading:!1,error:e.t0.message}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=kx(a.a.mark((function e(n,i){var u,s,d,v,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),b(Ax(Ax({},m),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/extras/").concat(n),u);case 6:return s=e.sent,e.next=9,s.json();case 9:(d=e.sent).error||(v=m.extras.filter((function(e){return e.id===d.result.id&&Object.assign(e,d.result),!0})),b(Ax(Ax({},m),{},{loading:!1,extras:v})),g=h.product.extras.filter((function(e){return e.id===d.result.id&&Object.assign(e,d.result),!0})),O=Ax(Ax({},r),{},{extras:g}),y(Ax(Ax({},h),{},{product:O})),o&&o(O),f(Dr.Success,p("EXTRA_SAVED","Extra saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(Ax(Ax({},h),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=kx(a.a.mark((function e(n){var i,u,s,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),b(Ax(Ax({},m),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/extras/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:e.sent.error||(s=m.extras.filter((function(e){return e.id!==n})),b(Ax(Ax({},m),{},{loading:!1,extras:s})),d=h.product.extras.filter((function(e){return e.id!==n})),v=Ax(Ax({},r),{},{extras:d}),y(Ax(Ax({},h),{},{product:v})),o&&o(v),f(Dr.Success,p("EXTRA_DELETED","Extra deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(Ax(Ax({},h),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=kx(a.a.mark((function e(){var n,r,o,i,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(O).length){e.next=3;break}return E(!1),e.abrupt("return");case 3:return e.prev=3,n=Ax({business_id:null==t?void 0:t.id},O),f(Dr.Info,p("LOADING","Loading")),b(Ax(Ax({},m),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=10,fetch("".concat(c.root,"/business/").concat(t.id,"/extras"),r);case 10:return o=e.sent,e.next=13,o.json();case 13:(i=e.sent).error||(w({}),E(!1),u=[].concat(Ix(m.extras),[i.result]),b(Ax(Ax({},m),{},{loading:!1,extras:u})),s&&(d=Ax(Ax({},t),{},{extras:u}),s(d)),f(Dr.Success,p("EXTRA_ADDED","Extra added"))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),b(Ax(Ax({},m),{},{loading:!1,error:e.t0.message}));case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=kx(a.a.mark((function e(n,i){var u,s,d,v,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Ax(Ax({},m),{},{loading:!0})),f(Dr.Info,p("LOADING","Loading")),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/extras/").concat(n),u);case 6:return s=e.sent,e.next=9,s.json();case 9:(d=e.sent).error||(v=m.extras.filter((function(e){return e.id===d.result.id&&Object.assign(e,d.result),!0})),b(Ax(Ax({},m),{},{loading:!1,extras:v})),g=h.product.extras.filter((function(e){return e.id===d.result.id&&Object.assign(e,d.result),!0})),O=Ax(Ax({},r),{},{extras:g}),y(Ax(Ax({},h),{},{product:O})),o&&o(O),f(Dr.Success,p("EXTRA_SAVED","Extra saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(Ax(Ax({},h),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y(Ax(Ax({},h),{},{product:r}))}),[r]),Object(i.useEffect)((function(){b(Ax(Ax({},m),{},{extras:null==t?void 0:t.extras}))}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Cx({},e,{changesState:O,isAddMode:S,productState:h,extrasState:m,handleChangeExtraInput:function(e,t){var n={name:e.target.value};k(t,n)},handleDeteteExtra:D,handleOpenAddForm:function(){return E(!0)},handleAddExtra:U,handleChangeAddExtraInput:function(e){w({name:e.target.value})},handleProductExtraState:_,dragoverExtaId:C,isExtrasBottom:A,handleDragStart:function(e,t){e.dataTransfer.setData("transferExtraId",t.id);var n=document.createElement("div");n.classList.add("ghostDragging"),n.innerHTML=t.name,document.body.appendChild(n),e.dataTransfer.setDragImage(n,0,0),T(!1)},hanldeDragOver:function(e,t,n){if(e.preventDefault(),e.target.closest(".draggable-extra"))if(n){var r=window.scrollY+e.target.getBoundingClientRect().top+e.target.offsetHeight/2;e.clientY>r?(T(!0),I(null)):(T(!1),I(t.id))}else I(t.id)},handleDrop:function(e,t){e.preventDefault();var n,r=parseInt(e.dataTransfer.getData("transferExtraId"));t.id!==r&&(n=A?(null==t?void 0:t.rank)+1:null==t?void 0:t.rank,T(!1),L(r,{rank:n}))},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);I(null)}})))};function Fx(){return Fx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fx.apply(this,arguments)}function Nx(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Rx(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Nx(a,r,o,i,u,"next",e)}function u(e){Nx(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Mx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mx(Object(n),!0).forEach((function(t){Gx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Bx.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Bx.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $x=function(e){var t,n,r,o,s,c,l,f=e.UIComponent,p=e.useOrderContext,d=e.onSave,h={},y=Yx(rn(),1)[0],v=Yx(Object(i.useState)({product:e.product,loading:!1,error:null}),2),m=v[0],b=v[1],g=Yx(Object(i.useState)({ingredients:{},options:{}}),2),O=g[0],w=g[1],j=Yx(Object(i.useState)({}),2),S=j[0],E=j[1],P=Yx(Object(i.useState)(null),2),C=P[0],I=P[1],x=void 0!==(null===(t=e.productCart)||void 0===t?void 0:t.code),A=Yx(vr(),2),T=A[0],_=A[1],k=_.addProduct,D=_.updateProduct,U=x?e.productCart.quantity:0,L=T.carts["businessId:".concat(e.businessId)],B=m.product&&(null==L||null===(n=L.products)||void 0===n?void 0:n.find((function(e){return e.id===m.product.id}))),F=((null==B?void 0:B.quantity)||0)-U,N=((null==L||null===(r=L.products)||void 0===r?void 0:r.reduce((function(e,t){return e+(m.product&&t.id===m.product.id?t.quantity:0)}),0))||0)-U,R=Yx(tr(),1)[0],M=(R.configs.max_product_amount?parseInt(R.configs.max_product_amount):100)-F,z=(null!==(o=m.product)&&void 0!==o&&o.inventoried?null===(s=m.product)||void 0===s?void 0:s.quantity:void 0)-N,G=(null===(c=m.product)||void 0===c?void 0:c.inventoried)&&0===(null===(l=m.product)||void 0===l?void 0:l.quantity);z=isNaN(z)?M:z;var Y=Math.min(M,z),q=function(e){for(var t,n=0,r=0;r<(null===(o=m.product)||void 0===o?void 0:o.extras.length);r++)for(var o,a,i=null===(a=m.product)||void 0===a?void 0:a.extras[r],u=0;u<i.options.length;u++)for(var s=i.options[u],c=0;c<s.suboptions.length;c++){var l,f,p=s.suboptions[c];if(null!==(l=e.options["id:".concat(s.id)])&&void 0!==l&&null!==(f=l.suboptions["id:".concat(p.id)])&&void 0!==f&&f.selected){var d=e.options["id:".concat(s.id)].suboptions["id:".concat(p.id)],h=s.allow_suboption_quantity?d.quantity:1;n+=(s.with_half_option&&p.half_price&&"whole"!==d.position?p.half_price:p.price)*h}}return(null===(t=m.product)||void 0===t?void 0:t.price)+n},$=function(){var t=Rx(a.a.mark((function t(){var n,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,b(zx(zx({},m),{},{loading:!0})),n={},h.product=n,t.next=6,y.businesses(e.businessId).categories(e.categoryId).products(e.productId).get({cancelToken:n});case 6:r=t.sent,o=r.content.result,b(zx(zx({},m),{},{loading:!1,product:o})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),b(zx(zx({},m),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),J=function e(t,n){m.product.extras.forEach((function(r){r.options.forEach((function(r){if(r.respect_to===n){var o,a=null===(o=t.options["id:".concat(r.id)])||void 0===o?void 0:o.suboptions;a&&Object.keys(a).map((function(n){return e(t,parseInt(n.split(":")[1]))})),t.options["id:".concat(r.id)]&&(t.options["id:".concat(r.id)].suboptions={})}}))}))},V=function(e,t,n){var r=JSON.parse(JSON.stringify(O));if(r.options||(r.options={}),r.options["id:".concat(n.id)]||(r.options["id:".concat(n.id)]={id:n.id,name:n.name,suboptions:{}}),e.selected){if(n.min===n.max&&1===n.min){var o=r.options["id:".concat(n.id)].suboptions;o&&Object.keys(o).map((function(e){return J(r,parseInt(e.split(":")[1]))})),r.options["id:".concat(n.id)]&&(r.options["id:".concat(n.id)].suboptions={})}r.options["id:".concat(n.id)].suboptions["id:".concat(t.id)]=e}else delete r.options["id:".concat(n.id)].suboptions["id:".concat(t.id)],J(r,t.id);var a,i=Object.keys(r.options["id:".concat(n.id)].suboptions).length;n.limit_suboptions_by_max&&(i=null===(a=Object.values(r.options["id:".concat(n.id)].suboptions))||void 0===a?void 0:a.reduce((function(e,t){return e+t.quantity}),0));i<=n.max&&(r.options["id:".concat(n.id)].balance=i,r.unitTotal=q(r),r.total=r.unitTotal*r.quantity,w(r))},H=function(){var e={};return m.product?(m.product.extras.forEach((function(t){t.options.map((function(t){var n,r=null===(n=O.options["id:".concat(t.id)])||void 0===n?void 0:n.suboptions,o=r?Object.keys(r).length:0,a=!1;if(t.respect_to&&O.options){var i=O.options;for(var u in i){var s;if(null!==(s=i[u].suboptions["id:".concat(t.respect_to)])&&void 0!==s&&s.selected){a=!0;break}}}(!t.respect_to||a)&&(t.min>o||t.max<o)&&(e["id:".concat(t.id)]=!0)}))})),E(e),e):e},W=function(){var t=Rx(a.a.mark((function t(){var n,r,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=H(),0!==Object.keys(n).length){t.next=15;break}if(r=!0,!p){t.next=14;break}if(r=!1,null!==(o=e.productCart)&&void 0!==o&&o.code){t.next=11;break}return t.next=8,k(O);case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,D(O);case 13:r=t.sent;case 14:r&&d(O,!(null!==(i=e.productCart)&&void 0!==i&&i.code));case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m.product&&function(t){var n,r,o,a,i={};for(var u in t.ingredients){var s=t.ingredients[u];i["id:".concat(s.id)]={selected:!0}}var c=zx(zx({},e.productCart),{},{id:t.id,price:t.price,name:t.name,businessId:e.businessId,categoryId:t.category_id,inventoried:t.inventoried,stock:t.quantity,ingredients:(null===(n=e.productCart)||void 0===n?void 0:n.ingredients)||i,options:(null===(r=e.productCart)||void 0===r?void 0:r.options)||{},comment:(null===(o=e.productCart)||void 0===o?void 0:o.comment)||null,quantity:(null===(a=e.productCart)||void 0===a?void 0:a.quantity)||1});c.unitTotal=q(c),c.total=c.unitTotal*c.quantity,w(c)}(m.product)}),[m.product,e.productCart]),Object(i.useEffect)((function(){H()}),[O]),Object(i.useEffect)((function(){if(null!=m&&m.product&&Object.keys(null==m?void 0:m.product).length){var e=m.product.extras.map((function(e){return e.options.find((function(e){return 1===e.min&&1===e.max&&1===e.suboptions.length}))}))[0];if(!e)return;var t=e.suboptions[0],n=e.with_half_option&&t.half_price&&"whole"!==(null==t?void 0:t.position)?t.half_price:t.price,r={id:t.id,name:t.name,position:t.position||"whole",price:n,quantity:1,selected:!0,total:n};I({state:r,suboption:t,option:e})}}),[m.product]),Object(i.useEffect)((function(){if(C){var e=C.state,t=C.suboption,n=C.option;V(e,t,n)}}),[C]),Object(i.useEffect)((function(){if(!(e.product||e.businessId&&e.categoryId&&e.productId))throw new Error("`businessId` && `categoryId` && `productId` are required if `product` was not provided.");return!e.product&&e.businessId&&e.categoryId&&e.productId&&$(),function(){h.product&&h.product.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,f&&u.a.createElement(f,Fx({},e,{productObject:m,productCart:O,errors:S,editMode:x,isSoldOut:G,maxProductQuantity:Y,increment:function(){Y<=0||O.quantity>=Y||(O.quantity++,O.unitTotal=q(O),O.total=O.unitTotal*O.quantity,w(zx({},O)))},decrement:function(){0!==O.quantity&&(O.quantity--,O.unitTotal=q(O),O.total=O.unitTotal*O.quantity,w(zx({},O)))},handleSave:W,showOption:function(e){var t=!0;if(e.respect_to&&(t=!1,O.options)){var n=O.options;for(var r in n){var o;if(null!==(o=n[r].suboptions["id:".concat(e.respect_to)])&&void 0!==o&&o.selected){t=!0;break}}}return t},handleChangeIngredientState:function(e,t){O.ingredients["id:".concat(t.id)]=e,w(zx(zx({},O),{},{ingredients:O.ingredients}))},handleChangeSuboptionState:V,handleChangeCommentState:function(e){var t=e.target.value;O.comment=t,w(zx(zx({},O),{},{comment:O.comment}))}})))};function Jx(){return Jx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jx.apply(this,arguments)}function Vx(e){return function(e){if(Array.isArray(e))return tA(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eA(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hx(Object(n),!0).forEach((function(t){Kx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xx(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Zx(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xx(a,r,o,i,u,"next",e)}function u(e){Xx(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Qx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||eA(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eA(e,t){if(e){if("string"==typeof e)return tA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tA(e,t):void 0}}function tA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}$x.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,categoryId:c.a.number,productId:c.a.number,product:c.a.object,productCart:c.a.object,useOrderContext:c.a.bool,onSave:c.a.func},$x.defaultProps={productCart:{},useOrderContext:!0,balance:0};var nA=function(e){var t=e.UIComponent,n=e.business,r=e.categoryId,o=e.product,s=e.handleSuccessUpdate,c=Qx(rn(),1)[0],l=Qx(hn(),1)[0].token,f=Qx(Br(),2)[1].showToast,p=Qx(Bn(),2)[1],d=Qx(Object(i.useState)({loading:!1,gallery:[],photos:[],videos:[],error:null}),2),h=d[0],y=d[1],v=Qx(Object(i.useState)({changes:{},itemId:null,loading:!1,error:null}),2),m=v[0],b=v[1],g=function(){var e=Zx(a.a.mark((function e(){var t,i,u,s,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Wx(Wx({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/business/").concat(n.id,"/categories/").concat(r,"/products/").concat(o.id,"/gallery"),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(u=e.sent).error?y(Wx(Wx({},h),{},{loading:!1,error:u.result})):(s=u.result.filter((function(e){return 1===e.type})),f=u.result.filter((function(e){return 2===e.type})),y(Wx(Wx({},h),{},{loading:!1,gallery:u.result,photos:s,videos:f}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),y(Wx(Wx({},h),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Zx(a.a.mark((function e(t){var i,u,d,v,g,O,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Wx(Wx({},m),{},{loading:!0})),f(Dr.Info,p("LOADING","Loading")),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(t)},e.next=6,fetch("".concat(c.root,"/business/").concat(n.id,"/categories/").concat(r,"/products/").concat(o.id,"/gallery"),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(d=e.sent).error?b(Wx(Wx({},m),{},{loading:!1,error:d.result})):(b(Wx(Wx({},m),{},{loading:!1,changes:{}})),f(Dr.Success,p("PRODUCT_GALLERY_ITEM_ADDED","Product gallery item added")),O=[].concat(Vx(h.gallery),[d.result]),1===(null===(v=d.result)||void 0===v?void 0:v.type)&&y(Wx(Wx({},h),{},{gallery:O,photos:[].concat(Vx(h.photos),[d.result])})),2===(null===(g=d.result)||void 0===g?void 0:g.type)&&y(Wx(Wx({},h),{},{gallery:O,videos:[].concat(Vx(h.videos),[d.result])})),w=Wx(Wx({},o),{},{gallery:O}),s&&s(w)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Wx(Wx({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Zx(a.a.mark((function e(){var t,i,u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Wx(Wx({},m),{},{loading:!0})),f(Dr.Info,p("LOADING","Loading")),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=6,fetch("".concat(c.root,"/business/").concat(n.id,"/categories/").concat(r,"/products/").concat(o.id,"/gallery/").concat(null==m?void 0:m.itemId),t);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?b(Wx(Wx({},m),{},{loading:!1,error:u.result})):(b(Wx(Wx({},m),{},{loading:!1,changes:{}})),g=h.gallery.filter((function(e){return e.id===u.result.id&&Object.assign(e,u.result),!0})),1===(null===(d=u.result)||void 0===d?void 0:d.type)&&(O=h.photos.filter((function(e){return e.id===u.result.id&&Object.assign(e,u.result),!0})),y(Wx(Wx({},y),{},{gallery:g,photos:O}))),2===(null===(v=u.result)||void 0===v?void 0:v.type)&&(w=h.videos.filter((function(e){return e.id===u.result.id&&Object.assign(e,u.result),!0})),y(Wx(Wx({},y),{},{gallery:g,videos:w}))),j=Wx(Wx({},o),{},{gallery:g}),s&&s(j),f(Dr.Success,p("PRODUCT_GALLERY_ITEM_SAVED","Product gallery item saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Wx(Wx({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Zx(a.a.mark((function e(t,i){var u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Wx(Wx({},m),{},{loading:!0})),f(Dr.Info,p("LOADING","Loading")),u={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=6,fetch("".concat(c.root,"/business/").concat(n.id,"/categories/").concat(r,"/products/").concat(o.id,"/gallery/").concat(t),u);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(Wx(Wx({},m),{},{loading:!1,error:v.result})):(b(Wx(Wx({},m),{},{loading:!1,changes:{}})),g=null==h?void 0:h.gallery.filter((function(e){return e.id!==t})),1===i&&(O=null==h?void 0:h.photos.filter((function(e){return e.id!==t})),y(Wx(Wx({},h),{},{gallery:g,photos:O}))),2===i&&(w=null==h?void 0:h.videos.filter((function(e){return e.id!==t})),y(Wx(Wx({},h),{},{gallery:g,videos:w}))),j=Wx(Wx({},o),{},{gallery:g}),s&&s(j),f(Dr.Success,p("PRODUCT_GALLERY_ITEM_DELETED","Product gallery item deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Wx(Wx({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),S=null,E=function(e,t){b(Wx(Wx({},m),{},{changes:Wx(Wx({},m.changes),{},Kx({},e.target.name,e.target.value)),itemId:t}))};return Object(i.useEffect)((function(){0!==Object.keys(null==m?void 0:m.changes).length&&null!=m&&m.itemId&&w()}),[null==m?void 0:m.changes]),Object(i.useEffect)((function(){if(null!=o&&o.gallery){var e=null==o?void 0:o.gallery.filter((function(e){return 1===e.type})),t=null==o?void 0:o.gallery.filter((function(e){return 2===e.type}));y(Wx(Wx({},h),{},{loading:!1,gallery:o.gallery,photos:e,videos:t}))}else g()}),[o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Jx({},e,{productGalleryState:h,changesState:m,handleChangeItem:function(e,t){b(Wx(Wx({},m),{},{changes:Wx(Wx({},null==m?void 0:m.changes),e)},t&&{itemId:t}))},handleChangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){b(Wx(Wx({},m),{},{changes:Wx(Wx({},null==m?void 0:m.changes),{},{file:n.result}),itemId:t}))},n.onerror=function(e){return console.log(e)}},handleChangeInput:function(e,t){t?(e.persist(),clearTimeout(S),S=setTimeout((function(){E(e,t)}),1e3)):E(e,t)},handleAddGalleryProduct:function(e){var t=Wx(Wx({},m.changes),{},{type:e});O(t)},handleDeteteProductGalleryItem:j})))};function rA(){return rA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rA.apply(this,arguments)}function oA(e){return function(e){if(Array.isArray(e))return pA(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fA(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aA(Object(n),!0).forEach((function(t){uA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sA(a,r,o,i,u,"next",e)}function u(e){sA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function lA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||fA(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fA(e,t){if(e){if("string"==typeof e)return pA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pA(e,t):void 0}}function pA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dA=function(e){var t=e.businessId,n=e.categoryId,r=e.productId,o=e.metafields,s=e.UIComponent,c=e.handleSuccessAddMetaFields,l=e.handleSuccessDeleteBusinessMetaFields,f=lA(rn(),1)[0],p=lA(hn(),1)[0],d=lA(Br(),2)[1].showToast,h=lA(Bn(),2)[1],y=lA(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),v=y[0],m=y[1],b=lA(Object(i.useState)({loading:!1,result:{error:!1}}),2),g=b[0],O=b[1],w=function(){var e=cA(a.a.mark((function e(){var o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(iA(iA({},v),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/categories/").concat(n,"/products/").concat(r,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,m(iA(iA({},v),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(iA(iA({},v),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=cA(a.a.mark((function e(o){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,h("LOADING","Loading")),O(iA(iA({},g),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=6,fetch("".concat(f.root,"/business/").concat(t,"/categories/").concat(n,"/products/").concat(r,"/metafields/").concat(o),i);case 6:e.sent.ok&&(u=v.metaFields.filter((function(e){return e.id!==o})),m(iA(iA({},v),{},{metaFields:u})),O({loading:!1,result:{error:!1}}),l&&l(o),d(Dr.Success,h("METAFIELD_DELETED","Metafield deleted"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),O({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=cA(a.a.mark((function e(o){var i,u,s,l,y,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,h("LOADING","Loading")),O(iA(iA({},g),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)},body:JSON.stringify(o)},e.next=6,fetch("".concat(f.root,"/business/").concat(t,"/categories/").concat(n,"/products/").concat(r,"/metafields"),i);case 6:return u=e.sent,e.next=9,u.json();case 9:s=e.sent,l=s.error,y=s.result,l?O({loading:!1,result:{error:!0,result:y}}):([],b=[].concat(oA(v.metaFields),[y]),m(iA(iA({},v),{},{metaFields:b})),O({loading:!1,result:{error:!1}}),c&&c(y),d(Dr.Success,h("METAFIELD_ADDED","Metafield added"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?m(iA(iA({},v),{},{metaFields:o})):w()}),[o]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,rA({},e,{metaFieldsList:v,actionState:g,handleDeleteMetaField:j,handeAddMetaField:S})))};function hA(){return hA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hA.apply(this,arguments)}function yA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yA(Object(n),!0).forEach((function(t){mA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function gA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){bA(a,r,o,i,u,"next",e)}function u(e){bA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function OA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}dA.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},dA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jA=function(e){var t=e.business,n=e.UIComponent,r=e.product,o=e.handleSuccessUpdate,s=e.setFormTaxState,c=e.formTaxState,l=e.taxes,f=e.setTaxes,p=e.fees,d=e.setFees,h=OA(rn(),1)[0],y=OA(hn(),1)[0],v=OA(zn(),1)[0],m=OA(Br(),2)[1].showToast,b=OA(Bn(),2)[1],g=OA(Object(i.useState)(r),2),O=g[0],w=g[1],j=OA(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),S=j[0],E=j[1],P=OA(Object(i.useState)({}),2),C=P[0],I=P[1],x=OA(Object(i.useState)({action:null,payload:null}),2),A=x[0],T=x[1],_=OA(Object(i.useState)({open:!1,content:[]}),2),k=_[0],D=_[1],U=function(){var e=gA(a.a.mark((function e(n){var r,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dr.Info,b("LOADING","Loading")),E(vA(vA({},S),{},{loading:!0})),r=vA({},n||S.changes),e.next=6,h.businesses(null==t?void 0:t.id).categories(null==O?void 0:O.category_id).products(null==O?void 0:O.id).save(r,{accessToken:y.token});case 6:i=e.sent,u=i.content,s=u.error,c=u.result,s?E(vA(vA({},S),{},{result:{error:!0,result:c},loading:!1})):(w(vA(vA({},O),c)),E(vA(vA({},S),{},{loading:!1,changes:{}})),o&&o(c),m(Dr.Success,b("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),E(vA(vA({},S),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=gA(a.a.mark((function e(t,n){var r,o,i,u,s,c,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(Dr.Info,b("LOADING","Loading")),!t){e.next=13;break}return e.next=4,fetch("".concat(h.root,"/").concat(n,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y.auth)},body:JSON.stringify(vA({},C))});case 4:return i=e.sent,e.next=7,i.json();case 7:u=e.sent,s=u.result,o=s,"taxes"===n?(f(vA(vA({},l),{},mA({},"id:".concat(s.id),{name:s.name,description:s.description,id:s.id,rate:s.rate,type:s.type}))),v.emit("tax_changed",{tax:{name:s.name,description:s.description,id:s.id,rate:s.rate,type:s.type}}),m(Dr.Success,b("PRODUCT_TAX_SAVED","Product tax saved"))):(d(vA(vA({},p),{},mA({},"id:".concat(s.id),{name:s.name,description:s.description,id:s.id,fixed:s.fixed,percentage:s.percentage}))),v.emit("fee_changed",{fee:{name:s.name,description:s.description,id:s.id,fixed:s.fixed,percentage:s.percentage}}),m(Dr.Success,b("PRODUCT_FEE_SAVED","Product fee saved"))),e.next=21;break;case 13:return e.next=15,fetch("".concat(h.root,"/").concat(n),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y.auth)},body:JSON.stringify(C)});case 15:return c=e.sent,e.next=18,c.json();case 18:g=e.sent,O=g.result,"taxes"===n?(f(vA(vA({},l),{},mA({},"id:".concat(O.id),{name:O.name,description:O.description,id:O.id,rate:O.rate,type:O.type}))),m(Dr.Success,b("PRODUCT_TAX_SAVED","Product tax saved"))):(d(vA(vA({},p),{},mA({},"id:".concat(O.id),{name:O.name,description:O.description,id:O.id,fixed:O.fixed,percentage:O.percentage}))),m(Dr.Success,b("PRODUCT_FEE_SAVED","Product fee saved")));case 21:if(null===(r=o)||void 0===r||!r.error){e.next=23;break}return e.abrupt("return");case 23:T({action:null,payload:null});case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=gA(a.a.mark((function e(t,n){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(vA(vA({},c),{},{loading:!0})),m(Dr.Info,b("LOADING","Loading")),!t){e.next=11;break}return e.next=5,fetch("".concat(h.root,"/").concat(n,"/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y.auth)}});case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,o.error||("taxes"===n?(i=l,v.emit("tax_deleted",{tax:i["id:".concat(t)],isRemove:!0}),delete i["id:".concat(t)],f(i),m(Dr.Success,b("PRODUCT_TAX_DELETED","Product tax deleted"))):(u=p,v.emit("fee_deleted",{tax:u["id:".concat(t)],isRemove:!0}),delete u["id:".concat(t)],d(u),m(Dr.Success,b("PRODUCT_FEE_DELETED","Product fee deleted"))));case 11:s(vA(vA({},c),{},{loading:!1}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w(r)}),[r]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,hA({},e,{productState:O,taxes:l,fees:p,formTaxState:c,taxToEdit:A,alertState:k,setAlertState:D,formState:S,handleClickProperty:function(e,t){E(vA(vA({},S),{},{changes:vA(vA({},S.changes),{},mA({},e,t))}))},handleChangeTax:function(e,t){I(vA(vA({},C),{},mA({},e,t)))},setTaxToEdit:T,handleSaveTax:L,handleDeleteTax:B,handleUpdateClick:U})))};function SA(){return SA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SA.apply(this,arguments)}function EA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EA(Object(n),!0).forEach((function(t){CA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return AA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}jA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var TA=function(e){var t=e.UIComponent,n=e.businessId,r=e.productId,o=xA(rn(),1)[0],s=xA(hn(),1)[0].token,c=xA(Object(i.useState)({reviews:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(PA(PA({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/business/").concat(n,"/product_reviews/").concat(r,"/reviews"),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(u=e.sent).error?f(PA(PA({},l),{},{loading:!1,error:u.error})):f(PA(PA({},l),{},{loading:!1,reviews:u.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(PA(PA({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){IA(a,r,o,i,u,"next",e)}function u(e){IA(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,SA({},e,{productReviewList:l})))};function _A(){return _A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_A.apply(this,arguments)}function kA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return DA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}TA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},TA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var UA=function(e){var t=e.UIComponent,n=e.slug,r=e.categoryId,o=e.productId,a=e.defaultUrl,s=kA(Object(i.useState)(!1),2),c=s[0],l=s[1],f=a||"".concat(window.location.origin,"/store/").concat(n,"?category=").concat(r,"&product=").concat(o);Object(i.useEffect)((function(){var e;window.document.getElementById("addthis_widget")||((e=document.createElement("script")).type="text/javascript",e.src="https://static.addtoany.com/menu/page.js",e.async=!0,e.defer=!0,e.id="addthis_widget",document.body.appendChild(e))}),[]);return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_A({},e,{updateShowValue:function(e){l(e),e&&window.a2a&&window.a2a.init()},showShareButton:c,urlToShare:f})))};function LA(){return LA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LA.apply(this,arguments)}function BA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function FA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){BA(a,r,o,i,u,"next",e)}function u(e){BA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function NA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NA(Object(n),!0).forEach((function(t){MA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function MA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return GA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}UA.propTypes={UIComponent:c.a.elementType,slug:c.a.string,categoryId:c.a.number,productId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element)},UA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var YA=function(e){var t,n=e.UIComponent,r=e.handleSuccessUpdate,o=e.handleSuccessDelete,s=e.handleSuccessAdd,c=zA(rn(),1)[0],l=zA(hn(),1)[0].token,f=zA(Br(),2)[1].showToast,p=zA(Bn(),2)[1],d=zA(Object(i.useState)({tag:null!==(t=e.tag)&&void 0!==t?t:null}),2),h=d[0],y=d[1],v=zA(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e=FA(a.a.mark((function e(){var t,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),b(RA(RA({},m),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(m.changes)},e.next=6,fetch("".concat(c.root,"/tags/").concat(h.tag.id),t);case 6:return n=e.sent,e.next=9,n.json();case 9:(o=e.sent).error?b(RA(RA({},m),{},{loading:!1,error:o.result})):(y({tag:RA(RA({},h.tag),o.result)}),b({loading:!1,changes:{},error:null}),r&&r(o.result),f(Dr.Success,p("PRODUCT_TAG_SAVED","Product tag saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(RA(RA({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var t=FA(a.a.mark((function t(){var n,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Dr.Info,p("LOADING","Loading")),b(RA(RA({},m),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(m.changes)},t.next=6,fetch("".concat(c.root,"/tags"),n);case 6:return r=t.sent,t.next=9,r.json();case 9:(o=t.sent).error?b(RA(RA({},m),{},{loading:!1,error:o.result})):(b({loading:!1,changes:{},error:null}),s&&s(o.result),f(Dr.Success,p("PRODUCT_TAG_ADDED","Product tag added")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(RA(RA({},m),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=FA(a.a.mark((function t(){var n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Dr.Info,p("LOADING","Loading")),b(RA(RA({},m),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},t.next=6,fetch("".concat(c.root,"/tags/").concat(h.tag.id),n);case 6:return r=t.sent,t.next=9,r.json();case 9:(i=t.sent).error?b(RA(RA({},m),{},{loading:!1,error:i.result})):(b({loading:!1,changes:{},error:null}),o&&o(h.tag.id),f(Dr.Success,p("PRODUCT_TAG_DELETED","Product tag deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(RA(RA({},m),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var t;b({loading:!1,changes:{},error:null}),y({tag:null!==(t=e.tag)&&void 0!==t?t:null})}),[e.tag]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,LA({},e,{tagState:h,formState:m,handleChangeInput:function(e){b(RA(RA({},m),{},{changes:RA(RA({},m.changes),{},MA({},e.target.name,e.target.value))}))},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){b(RA(RA({},m),{},{changes:RA(RA({},m.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleUpdateProductTag:g,handleAddProductTag:O,handleDeleteProductTag:w,handleChangeItem:function(e){var t=RA(RA({},null==m?void 0:m.changes),e);b(RA(RA({},m),{},{changes:t}))}})))};function qA(){return qA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qA.apply(this,arguments)}function $A(e){return function(e){if(Array.isArray(e))return QA(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ZA(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JA(Object(n),!0).forEach((function(t){HA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function KA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){WA(a,r,o,i,u,"next",e)}function u(e){WA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function XA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ZA(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZA(e,t){if(e){if("string"==typeof e)return QA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QA(e,t):void 0}}function QA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}YA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},YA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var eT=function(e){var t=e.tags,n=e.businessId,r=e.product,o=e.UIComponent,s=e.handleSuccessProductUpdate,c=XA(rn(),1)[0],l=XA(hn(),1)[0].token,f=XA(Br(),2)[1].showToast,p=XA(Bn(),2)[1],d=XA(Object(i.useState)({loading:!1,tags:[],error:null}),2),h=d[0],y=d[1],v=XA(Object(i.useState)([]),2),m=v[0],b=v[1],g=XA(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=XA(Object(i.useState)(null),2),S=j[0],E=j[1],P=function(){var e=KA(a.a.mark((function e(){var t,n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(VA(VA({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},n=null,r=[],S&&r.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(S,"%"))}}),r.length&&(n={conditions:r,conector:"AND"}),o=n?"".concat(c.root,"/tags?where=").concat(JSON.stringify(n)):"".concat(c.root,"/tags"),e.next=10,fetch(o,t);case 10:return i=e.sent,e.next=13,i.json();case 13:(u=e.sent).error?y(VA(VA({},h),{},{loading:!1,error:u.result})):y(VA(VA({},h),{},{loading:!1,tags:u.result})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),y(VA(VA({},h),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=KA(a.a.mark((function e(t){var o,i,u,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),w({loading:!0,error:null}),o={tags:JSON.stringify(t)},e.next=6,c.businesses(n).categories(r.category_id).products(r.id).save(o,{accessToken:l});case 6:i=e.sent,u=i.content,d=u.error,h=u.result,d?w({loading:!1,error:h}):(w({loading:!1,error:null}),s&&s(h),f(Dr.Success,p("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=null==t?void 0:t.reduce((function(e,t){return[].concat($A(e),[t.id])}),[]);b(e)}),[t]),Object(i.useEffect)((function(){P()}),[S]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,qA({},e,{tagsState:h,searchValue:S,onSearch:E,selectedTagIds:m,actionState:O,handleSuccessUpdate:function(e){var t=h.tags.map((function(t){return t.id===e.id?VA(VA({},t),e):t}));y(VA(VA({},h),{},{tags:t}))},handleSuccessDelete:function(e){var t=h.tags.filter((function(t){return t.id!==e}));y(VA(VA({},h),{},{tags:t}))},handleSuccessAdd:function(e){y(VA(VA({},h),{},{tags:[].concat($A(h.tags),[e])}))},handleChangeProductTag:function(e,t){var n=[];n=e?[].concat($A(m),[t]):m.filter((function(e){return e!==parseInt(t)})),b(n),C(n)},handleSelectNoneTags:function(){b([]),C([])},handleSelectAllTags:function(){var e,t=null===(e=h.tags)||void 0===e?void 0:e.reduce((function(e,t){return[].concat($A(e),[t.id])}),[]);b(t),C(t)}})))};function tT(){return tT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tT.apply(this,arguments)}eT.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nT=function(e){var t=e.hero,n=e.gallery,r=e.UIComponent;return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,tT({},e,{hero:t,gallery:n})))};function rT(){return rT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rT.apply(this,arguments)}function oT(e){return function(e){if(Array.isArray(e))return pT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aT(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function iT(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){aT(a,r,o,i,u,"next",e)}function u(e){aT(a,r,o,i,u,"throw",e)}i(void 0)}))}}function uT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uT(Object(n),!0).forEach((function(t){cT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||fT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fT(e,t){if(e){if("string"==typeof e)return pT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pT(e,t):void 0}}function pT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nT.propTypes={UIComponent:c.a.elementType,hero:c.a.string,gallery:c.a.arrayOf(c.a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dT=function(e){var t=e.business,n=e.product,r=e.ingredient,o=e.UIComponent,s=e.handleSuccessUpdate,c=lT(rn(),1)[0],l=lT(hn(),1)[0].token,f=lT(Br(),2)[1].showToast,p=lT(Bn(),2)[1],d=lT(Object(i.useState)({ingredient:r,loading:!1,error:null}),2),h=d[0],y=d[1],v=lT(Object(i.useState)({}),2),m=v[0],b=v[1],g=lT(Object(i.useState)(!1),2),O=g[0],w=g[1],j=function(){var r=iT(a.a.mark((function r(){var o,i,u,d,v,g;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=sT(sT({},o={business_id:null==t?void 0:t.id,category_id:null==n?void 0:n.category_id,product_id:null==n?void 0:n.id}),m),f(Dr.Info,p("LOADING","Loading")),y(sT(sT({},h),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(o)},r.next=8,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==n?void 0:n.category_id,"/products/").concat(n.id,"/ingredients"),i);case 8:return u=r.sent,r.next=11,u.json();case 11:(d=r.sent).error||(b({}),y(sT(sT({},h),{},{loading:!1,ingredient:d.result})),v=n.ingredients?[].concat(oT(n.ingredients),[d.result]):[d.result],g=sT(sT({},n),{},{ingredients:v}),s&&s(g),f(Dr.Success,p("INGREDIENT_SAVED","Ingredient saved")),e.onClose&&e.onClose()),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),y(sT(sT({},h),{},{loading:!1,error:r.t0.message}));case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(){return r.apply(this,arguments)}}(),S=function(){var e=iT(a.a.mark((function e(){var o,i,u,d,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=sT(sT({},o={business_id:null==t?void 0:t.id,category_id:null==n?void 0:n.category_id,product_id:null==n?void 0:n.id}),m),f(Dr.Info,p("LOADING","Loading")),y(sT(sT({},h),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(o)},e.next=8,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==n?void 0:n.category_id,"/products/").concat(n.id,"/ingredients/").concat(r.id),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(d=e.sent).error||(b({}),y(sT(sT({},h),{},{loading:!1,ingredient:d.result})),v=n.ingredients.filter((function(e){return e.id===r.id&&Object.assign(e,d.result),!0})),g=sT(sT({},n),{},{ingredients:v}),s&&s(g),f(Dr.Success,p("INGREDIENT_SAVED","Ingredient saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),y(sT(sT({},h),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var o=iT(a.a.mark((function o(){var i,u,d,v,m;return a.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,f(Dr.Info,p("LOADING","Loading")),y(sT(sT({},h),{},{loading:!1})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},o.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==n?void 0:n.category_id,"/products/").concat(n.id,"/ingredients/").concat(r.id),i);case 6:return u=o.sent,o.next=9,u.json();case 9:(d=o.sent).error||(y(sT(sT({},h),{},{loading:!1,ingredient:d.result})),v=n.ingredients.filter((function(e){return e.id!==r.id})),m=sT(sT({},n),{},{ingredients:v}),s&&s(m),f(Dr.Success,p("INGREDIENT_DELETED","Ingredient deleted")),e.onClose&&e.onClose()),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0),y(sT(sT({},h),{},{loading:!1,error:o.t0.message}));case 16:case"end":return o.stop()}}),o,null,[[0,13]])})));return function(){return o.apply(this,arguments)}}();return Object(i.useEffect)((function(){b({}),y(sT(sT({},h),{},{ingredient:r})),w(!r)}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,rT({},e,{ingredientState:h,changesState:m,isAddMode:O,handleChangeInput:function(e){b(sT(sT({},m),{},cT({},e.target.name,e.target.value)))},handleDeleteIngredient:E,handleAddIngredient:j,handleUpdateIngredient:S})))};dT.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},dT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var hT=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function yT(){return yT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yT.apply(this,arguments)}function vT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vT(Object(n),!0).forEach((function(t){bT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}hT.propTypes={UIComponent:c.a.elementType,option:c.a.object.isRequired,error:c.a.bool},hT.defaultProps={error:!1};var gT=function(e){var t=e.UIComponent,n=e.balance,r=e.option,o=e.suboption,a=e.onChange,i=e.state.selected||e.state.quantity>0,s=0;i&&e.state.quantity&&e.state.quantity>0?s=e.state.quantity:i&&(s=1);var c=e.state.position||"whole",l=r.with_half_option&&o.half_price&&"whole"!==c?o.half_price:o.price,f={id:o.id,name:o.name,price:l,selected:i,quantity:s,position:c,total:l*s},p=function(e){a&&a(e,o,r)};return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,yT({},e,{state:f,increment:function(){r.limit_suboptions_by_max&&n===r.max||(r.limit_suboptions_by_max||f.quantity!==o.max)&&p(mT(mT({},f),{},{selected:0===f.quantity||f.selected,quantity:f.quantity+1,total:f.price*(f.quantity+1)}))},decrement:function(){0!==f.quantity&&p(mT(mT({},f),{},{selected:1!==f.quantity&&f.selected,quantity:f.quantity-1,total:f.price*(f.quantity-1)}))},changePosition:function(e){var t=r.with_half_option&&o.half_price&&"whole"!==e?o.half_price:o.price;p(mT(mT({},f),{},{position:e,price:t,total:t*f.quantity}))},toggleSelect:function(){!f.selected&&r.limit_suboptions_by_max&&n===r.max||p(mT(mT({},f),{},{quantity:f.selected?0:1,selected:!f.selected}))}})))};function OT(){return OT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OT.apply(this,arguments)}function wT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gT.propTypes={UIComponent:c.a.elementType,balance:c.a.number.isRequired,option:c.a.object.isRequired,suboption:c.a.object.isRequired,state:c.a.shape({selected:c.a.bool,quantity:c.a.number,position:c.a.string}).isRequired,onChange:c.a.func},gT.defaultProps={state:{},balance:0};var ST=function(e){var t=e.categories,n=e.UIComponent,r=wT(Object(i.useState)(t),2),o=r[0],a=r[1];return Object(i.useEffect)((function(){a(t.filter((function(e){return e.id})))}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,OT({},e,{categories:o})))};function ET(){return ET=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ET.apply(this,arguments)}function PT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PT(Object(n),!0).forEach((function(t){IT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function IT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xT(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function AT(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){xT(a,r,o,i,u,"next",e)}function u(e){xT(a,r,o,i,u,"throw",e)}i(void 0)}))}}function TT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ST.propTypes={UIComponent:c.a.elementType,productsList:c.a.object,categories:c.a.arrayOf(c.a.object),isAllCategory:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ST.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var kT=function(e){var t=e.isSearchByName,n=e.isSearchByDescription,r=e.businessId,o=e.UIComponent,s=TT(rn(),1)[0],c=TT(vr(),1)[0],l=TT(Object(i.useState)(null),2),f=l[0],p=l[1],d=TT(Object(i.useState)(null),2),h=d[0],y=d[1],v=TT(Object(i.useState)({products:[],loading:!0,error:!1}),2),m=v[0],b=v[1],g=TT(Object(i.useState)([]),2),O=g[0],w=g[1],j=function(){var e=AT(a.a.mark((function e(){var o,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(CT(CT({},m),{},{loading:!0})),e.next=4,s.businesses(r).products().parameters({type:(null===(o=c.options)||void 0===o?void 0:o.type)||1}).get();case 4:i=e.sent,u=i.content.result,l=f||h?u.filter((function(e){return o=e.name,a=e.description,(!f||o.toLowerCase().includes(f.toLowerCase())&&t||a.toLowerCase().includes(f.toLowerCase())&&n)&&(r=e.category_id,!h||Number(r)===Number(h));var r,o,a})):u,b(CT(CT({},m),{},{loading:!1,products:l})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),b(CT(CT({},m),{},{loading:!1,error:e.t0}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=AT(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.businesses(r).categories().get();case 2:t=e.sent,n=t.content.result,w(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j()}),[f,h]),Object(i.useEffect)((function(){S()}),[]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,ET({},e,{categoryValue:!!h,categories:O,productsList:m,handlerClickCategory:function(e){return y(e)},handlerChangeSearch:function(e){return p(e)}})))};function DT(){return DT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DT.apply(this,arguments)}function UT(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function LT(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){UT(a,r,o,i,u,"next",e)}function u(e){UT(a,r,o,i,u,"throw",e)}i(void 0)}))}}function BT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BT(Object(n),!0).forEach((function(t){NT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RT(e){return function(e){if(Array.isArray(e))return GT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||zT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zT(e,t){if(e){if("string"==typeof e)return GT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GT(e,t):void 0}}function GT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}kT.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,isSearchByName:c.a.bool,isSearchByDescription:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},kT.defaultProps={isSearchByName:!0,isSearchByDescription:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var YT=function(e){var t=e.UIComponent,n=e.propsToFetch,r=e.isSearchByName,o=e.user,s=MT(rn(),1)[0],c=MT(hn(),1)[0].token,l=MT(Object(i.useState)(null),2),f=l[0],p=l[1],d=MT(Object(i.useState)({loading:!1,businesses:[],result:{error:null}}),2),h=d[0],y=d[1],v=MT(Object(i.useState)({loading:!1,services:[],result:{error:null}}),2),m=v[0],b=v[1],g=MT(Object(i.useState)(),2),O=g[0],w=g[1],j=new RegExp(/^[A-Za-z0-9\s]+$/g),S=function(){var e=LT(a.a.mark((function e(){var t,o,i,u,c,l,p,d,v,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(FT(FT({},h),{},{loading:!0})),t=null,o=[],f&&(i=[],u=j.test(f),r&&i.push({attribute:"name",value:{condition:"ilike",value:u?encodeURI("%".concat(f,"%")):"%".concat(f,"%")}}),o.push({conector:"OR",conditions:i})),o.length&&(t={conditions:o,conector:"AND"}),c=t?s.businesses().asDashboard().select(n).where(t):s.businesses().asDashboard().select(n),e.next=9,c.get();case 9:l=e.sent,p=l.content,d=p.error,v=p.result,m=p.pagination,y(FT(FT({},h),{},d?{loading:!1,error:v}:{loading:!1,businesses:v,pagination:m})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),y(FT(FT({},h),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=LT(a.a.mark((function e(){var t,n,r,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(FT(FT({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},n="".concat(s.root,"/users/").concat(null==o?void 0:o.id,"/products"),e.next=6,fetch(n,t);case 6:return r=e.sent,e.next=9,r.json();case 9:i=e.sent,u=i.error,l=i.result,f=i.pagination,b(FT(FT({},m),{},u?{loading:!1,error:l}:{loading:!1,services:l,pagination:f})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),b(FT(FT({},m),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){E()}),[null==o?void 0:o.id]),Object(i.useEffect)((function(){S()}),[f]),Object(i.useEffect)((function(){var e,t;if(void 0===O&&(null==h||null===(e=h.businesses)||void 0===e?void 0:e.length)>0&&(null==m||null===(t=m.services)||void 0===t?void 0:t.length)>0){var n=[];h.businesses.forEach((function(e){null!=m&&m.services.reduce((function(e,t){return[].concat(RT(e),[t.business_id])}),[]).includes(e.id)&&n.push(e.id)})),w(n)}}),[null==h?void 0:h.businesses,null==m?void 0:m.services,O]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,DT({},e,{searchValue:f,businessIds:O,onSearch:p,businessList:h,userServiceList:m,handleChangeCheckBox:function(e){var t=[];t=null!=O&&O.includes(e)?O.filter((function(t){return t!==e})):O?[].concat(RT(O),[e]):[e],w(t)},handleUpdateBusinessIds:function(e){w(e)},handleUpdateServices:function(e){b(FT(FT({},m),{},{services:e}))}})))};function qT(){return qT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qT.apply(this,arguments)}function $T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$T(Object(n),!0).forEach((function(t){VT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HT(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function WT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return KT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}YT.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},YT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var XT=function(e){var t=e.UIComponent,n=e.user,r=e.handleSuccessUpdate,o=WT(rn(),1)[0],s=WT(Br(),2)[1].showToast,c=WT(Bn(),2)[1],l=WT(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(t){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(JT(JT({},f),{},{loading:!0})),s(Dr.Info,c("LOADING","Loading")),t&&(f.changes=JT(JT({},f.changes),t)),e.next=6,o.users(null==n?void 0:n.id).save(f.changes);case 6:i=e.sent,p(JT(JT({},f),{},{changes:i.content.error?f.changes:{},result:i.content,loading:!1})),i.content.error||(s(Dr.Success,c("SCHEDULE_UPDATED","Schedule updated")),r&&r(i.content.result)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p(JT(JT({},f),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){HT(a,r,o,i,u,"next",e)}function u(e){HT(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,qT({},e,{formState:f,handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=JT(JT({},n),{},VT({},e.name,e.value))})):n=VT({},e.target.name,e.target.value),p(JT(JT({},f),{},{changes:JT(JT({},f.changes),n)}))},handleChangeItem:function(e){var t=JT(JT({},f.changes),e);p(JT(JT({},f),{},{changes:t}))},handleRemoveKey:function(e){var t=JT({},null==f?void 0:f.changes);delete t[e],p(JT(JT({},f),{},{changes:t}))},handleUpdateClick:d})))};function ZT(){return ZT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZT.apply(this,arguments)}function QT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function e_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QT(Object(n),!0).forEach((function(t){t_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function t_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n_(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function r_(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){n_(a,r,o,i,u,"next",e)}function u(e){n_(a,r,o,i,u,"throw",e)}i(void 0)}))}}function o_(e){return function(e){if(Array.isArray(e))return u_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||i_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i_(e,t){if(e){if("string"==typeof e)return u_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u_(e,t):void 0}}function u_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}XT.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},XT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var s_=function(e){var t=e.UIComponent,n=e.businessId,r=e.services,o=e.userId,s=e.handleUpdateServices,c=e.propsToFetch,l=a_(rn(),1)[0],f=a_(Bn(),2)[1],p=a_(Br(),2)[1].showToast,d=a_(hn(),1)[0].token,h=a_(Object(i.useState)([]),2),y=h[0],v=h[1],m=a_(Object(i.useState)([]),2),b=m[0],g=m[1],O=a_(Object(i.useState)([]),2),w=O[0],j=O[1],S=a_(Object(i.useState)({loading:!1,result:{error:!1}}),2),E=S[0],P=S[1],C=a_(Object(i.useState)({loading:!0,business:{},error:null}),2),I=C[0],x=C[1],A=function(){var e=r_(a.a.mark((function e(){var t,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(e_(e_({},I),{},{loading:!0})),e.next=4,l.businesses(n).asDashboard().select(c).get();case 4:t=e.sent,r=t.content,o=r.result,i=r.error,x(e_(e_({},I),{},i?{error:o,loading:!1}:{business:o,loading:!1,error:null})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),x(e_(e_({},I),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=r_(a.a.mark((function e(t){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(e_(e_({},E),{},{loading:!0})),p(Dr.Info,f("LOADING","Loading")),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(t)},e.next=6,fetch("".concat(l.root,"/users/").concat(o,"/products"),n);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(u=e.sent)&&u.error?P(e_(e_({},E),{},{result:u,loading:!1})):(P(e_(e_({},E),{},{result:{error:!1},loading:!1})),s&&s([].concat(o_(r),[u.result])),p(Dr.Success,f("SERVICE_ADDED","Service added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),P(e_(e_({},E),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=r_(a.a.mark((function e(t){var n,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(e_(e_({},E),{},{loading:!0})),p(Dr.Info,f("LOADING","Loading")),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},e.next=6,fetch("".concat(l.root,"/users/").concat(o,"/products/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(u=e.sent)&&u.error?P(e_(e_({},E),{},{result:u,loading:!1})):(P(e_(e_({},E),{},{result:{error:!1},loading:!1})),s&&(c=r.filter((function(e){return e.id!==t})),s(c)),p(Dr.Success,f("SERVICE_DELETED","Service deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),P(e_(e_({},E),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=[];if((null==r?void 0:r.length)>0){e=r.reduce((function(e,t){return[].concat(o_(e),[t.product_id])}),[]),g(e);var t=r.reduce((function(e,t){return[].concat(o_(e),[t.product])}),[]);j(t)}else g([]),j([]);!function(e){var t,n;if(null!=I&&null!==(t=I.business)&&void 0!==t&&null!==(n=t.categories)&&void 0!==n&&n.length){var r,o=[];v(o),function t(n){return(null==n?void 0:n.length)>0&&(null==n?void 0:n.forEach((function(n){var r,a,i=[],u=null===(r=n.products)||void 0===r?void 0:r.reduce((function(e,t){return[].concat(o_(e),[t.id])}),[]);i=[].concat(o_(i),o_(u)),null!=n&&null!==(a=n.subcategories)&&void 0!==a&&a.length&&n.subcategories.forEach((function e(t){var n,r=null===(n=t.products)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(o_(e),[t.id])}),[]);i=[].concat(o_(i),o_(r)),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),o.push({id:n.id,name:n.name,productIds:i,isChecked:0!==i.length&&i.every((function(t){return e.includes(t)}))}),t(n.subcategories)})))}(null==I||null===(r=I.business)||void 0===r?void 0:r.categories)}}(e)}),[r,null==I?void 0:I.business]),Object(i.useEffect)((function(){A()}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ZT({},e,{selectedProducts:w,subCategoriesList:y,selectedProductsIds:b,setSelectedProducts:j,setSelectedProductsIds:g,handleCreateService:function(e){T({product_id:e,business_id:n,user_id:o})},handleDeleteService:function(e){var t=r.find((function(t){return t.product_id===e}));_(t.id)},businessState:I,actionState:E})))};function c_(){return c_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c_.apply(this,arguments)}function l_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l_(Object(n),!0).forEach((function(t){p_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d_(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function h_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}s_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},s_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var v_=function(e){var t=e.UIComponent,n=e.token,r=e.allowedLevels,o=h_(rn(),1)[0],s=h_(hn(),2)[1].login,c=h_(zn(),1)[0],l=h_(Object(i.useState)({loading:!0,user:{},error:null}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(){var t,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(f_(f_({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},e.next=5,fetch("".concat(o.root,"/users/me"),t);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,c=u.error,l=u.result,c?(p(f_(f_({},f),{},{loading:!1,error:l})),h()):r.includes(l.level)?s({user:l,token:n,project:null==o?void 0:o.project}):h(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),p(f_(f_({},f),{},{loading:!1,error:[e.t0.message]})),h();case 18:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d_(a,r,o,i,u,"next",e)}function u(e){d_(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),h=function(){c.emit("go_to_page",{page:"login"})};return Object(i.useEffect)((function(){null!=o&&o.project&&d()}),[null==o?void 0:o.project]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,c_({},e,{userState:f})))};function m_(){return m_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m_.apply(this,arguments)}function b_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}v_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},v_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var g_=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).handleExpired=t.handleExpired.bind(b_(t)),t.handleErrored=t.handleErrored.bind(b_(t)),t.handleChange=t.handleChange.bind(b_(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(b_(t)),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getValue=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this.props.grecaptcha.getResponse(this._widgetId):null},o.getWidgetId=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this._widgetId:null},o.execute=function(){var e=this.props.grecaptcha;if(e&&void 0!==this._widgetId)return e.execute(this._widgetId);this._executeRequested=!0},o.executeAsync=function(){var e=this;return new Promise((function(t,n){e.executionResolve=t,e.executionReject=n,e.execute()}))},o.reset=function(){this.props.grecaptcha&&void 0!==this._widgetId&&this.props.grecaptcha.reset(this._widgetId)},o.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},o.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},o.handleChange=function(e){this.props.onChange&&this.props.onChange(e),this.executionResolve&&(this.executionResolve(e),delete this.executionReject,delete this.executionResolve)},o.explicitRender=function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&void 0===this._widgetId){var e=document.createElement("div");this._widgetId=this.props.grecaptcha.render(e,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(e)}this._executeRequested&&this.props.grecaptcha&&void 0!==this._widgetId&&(this._executeRequested=!1,this.execute())},o.componentDidMount=function(){this.explicitRender()},o.componentDidUpdate=function(){this.explicitRender()},o.componentWillUnmount=function(){void 0!==this._widgetId&&(this.delayOfCaptchaIframeRemoving(),this.reset())},o.delayOfCaptchaIframeRemoving=function(){var e=document.createElement("div");for(document.body.appendChild(e),e.style.display="none";this.captcha.firstChild;)e.appendChild(this.captcha.firstChild);setTimeout((function(){document.body.removeChild(e)}),5e3)},o.handleRecaptchaRef=function(e){this.captcha=e},o.render=function(){var e=this.props,t=(e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl,function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"]));return u.a.createElement("div",m_({},t,{ref:this.handleRecaptchaRef}))},r}(u.a.Component);g_.displayName="ReCAPTCHA",g_.propTypes={sitekey:c.a.string.isRequired,onChange:c.a.func,grecaptcha:c.a.object,theme:c.a.oneOf(["dark","light"]),type:c.a.oneOf(["image","audio"]),tabindex:c.a.number,onExpired:c.a.func,onErrored:c.a.func,size:c.a.oneOf(["compact","normal","invisible"]),stoken:c.a.string,hl:c.a.string,badge:c.a.oneOf(["bottomright","bottomleft","inline"])},g_.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var O_=n(36),w_=n.n(O_);function j_(){return j_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j_.apply(this,arguments)}var S_={},E_=0;var P_="onloadcallback";var C_,I_,x_=(C_=function(){return"https://"+(("undefined"!=typeof window&&window.recaptchaOptions||{}).useRecaptchaNet?"recaptcha.net":"www.google.com")+"/recaptcha/api.js?onload="+P_+"&render=explicit"},I_=(I_={callbackName:P_,globalName:"grecaptcha"})||{},function(e){var t=e.displayName||e.name||"Component",n=function(t){var n,r;function o(e,n){var r;return(r=t.call(this,e,n)||this).state={},r.__scriptURL="",r}r=t,(n=o).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var a=o.prototype;return a.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+E_++),this.__scriptLoaderID},a.setupScriptURL=function(){return this.__scriptURL="function"==typeof C_?C_():C_,this.__scriptURL},a.asyncScriptLoaderHandleLoad=function(e){var t=this;this.setState(e,(function(){return t.props.asyncScriptOnLoad&&t.props.asyncScriptOnLoad(t.state)}))},a.asyncScriptLoaderTriggerOnScriptLoaded=function(){var e=S_[this.__scriptURL];if(!e||!e.loaded)throw new Error("Script is not loaded.");for(var t in e.observers)e.observers[t](e);delete window[I_.callbackName]},a.componentDidMount=function(){var e=this,t=this.setupScriptURL(),n=this.asyncScriptLoaderGetScriptLoaderID(),r=I_,o=r.globalName,a=r.callbackName,i=r.scriptId;if(o&&void 0!==window[o]&&(S_[t]={loaded:!0,observers:{}}),S_[t]){var u=S_[t];return u&&(u.loaded||u.errored)?void this.asyncScriptLoaderHandleLoad(u):void(u.observers[n]=function(t){return e.asyncScriptLoaderHandleLoad(t)})}var s={};s[n]=function(t){return e.asyncScriptLoaderHandleLoad(t)},S_[t]={loaded:!1,observers:s};var c=document.createElement("script");for(var l in c.src=t,c.async=!0,I_.attributes)c.setAttribute(l,I_.attributes[l]);i&&(c.id=i);var f=function(e){if(S_[t]){var n=S_[t].observers;for(var r in n)e(n[r])&&delete n[r]}};a&&"undefined"!=typeof window&&(window[a]=function(){return e.asyncScriptLoaderTriggerOnScriptLoaded()}),c.onload=function(){var e=S_[t];e&&(e.loaded=!0,f((function(t){return!a&&(t(e),!0)})))},c.onerror=function(){var e=S_[t];e&&(e.errored=!0,f((function(t){return t(e),!0})))},document.body.appendChild(c)},a.componentWillUnmount=function(){var e=this.__scriptURL;if(!0===I_.removeOnUnmount)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n+=1)t[n].src.indexOf(e)>-1&&t[n].parentNode&&t[n].parentNode.removeChild(t[n]);var r=S_[e];r&&(delete r.observers[this.asyncScriptLoaderGetScriptLoaderID()],!0===I_.removeOnUnmount&&delete S_[e])},a.render=function(){var t=I_.globalName,n=this.props,r=(n.asyncScriptOnLoad,n.forwardedRef),o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(n,["asyncScriptOnLoad","forwardedRef"]);return t&&"undefined"!=typeof window&&(o[t]=void 0!==window[t]?window[t]:void 0),o.ref=r,Object(i.createElement)(e,o)},o}(i.Component),r=Object(i.forwardRef)((function(e,t){return Object(i.createElement)(n,j_({},e,{forwardedRef:t}))}));return r.displayName="AsyncScriptLoader("+t+")",r.propTypes={asyncScriptOnLoad:c.a.func},w_()(r,e)})(g_),A_=x_;function T_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return __(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return __(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function __(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k_=function(e){var t=e.handleReCaptcha,n=T_(tr(),1)[0].configs,r=T_(Object(i.useState)(null),2),o=r[0],a=r[1];return Object(i.useEffect)((function(){var e;n&&Object.keys(n).length>0&&null!=n&&null!==(e=n.security_recaptcha_site_key)&&void 0!==e&&e.value?a(null==n?void 0:n.security_recaptcha_site_key.value):(a(null),console.log("ReCaptcha component: the config doesn't have recaptcha site key"))}),[n]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(A_,{key:o,sitekey:o,onChange:function(e){t(e)},onErrored:function(e){return console.log(e)}}))};function D_(){return D_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D_.apply(this,arguments)}function U_(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function L_(e){return function(e){if(Array.isArray(e))return z_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B_(Object(n),!0).forEach((function(t){N_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||M_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M_(e,t){if(e){if("string"==typeof e)return z_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z_(e,t):void 0}}function z_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}k_.propTypes={handleReCaptcha:c.a.func};var G_=function(e){var t=e.UIComponent,n=R_(rn(),1)[0],r=R_(hn(),1)[0],o=r.token,s=r.loading,c=R_(Object(i.useState)({loading:!0,error:null,loyaltyPlans:[],pagination:null}),2),l=c[0],f=c[1],p=R_(Object(i.useState)(null),2),d=p[0],h=p[1],y=function(){var e,t=(e=a.a.mark((function e(){var t,r,i,u,c,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(F_(F_({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},r="".concat(n.root,"/loyalty_plans"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,c=u.error,p=u.result,d=u.pagination,f(F_(F_({},l),{},c?{loading:!1,error:p}:{loading:!1,loyaltyPlans:p,pagination:d})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),f(F_(F_({},l),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){U_(a,r,o,i,u,"next",e)}function u(e){U_(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){y()}),[]),Object(i.useEffect)((function(){var e;if(0!==(null==l||null===(e=l.loyaltyPlans)||void 0===e?void 0:e.length)){var t=null==l?void 0:l.loyaltyPlans.find((function(e){return"credit_point"===e.type}));t&&h(F_({},t))}}),[null==l?void 0:l.loyaltyPlans]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,D_({},e,{loyaltyPlanList:l,pointWallet:d,handleUpdateWalletBusiness:function(e){var t=null==d?void 0:d.businesses.map((function(t){return t.id===e.id?F_(F_({},t),e):t}));h(F_(F_({},d),{},{businesses:t}))},handleUpdatePointsWallet:function(e){h(F_({},e))},handleAddWalletBusiness:function(e){var t=[].concat(L_(null==d?void 0:d.businesses),[e]);h(F_(F_({},d),{},{businesses:t}))},handleDeleteWalletBusiness:function(e){var t,n=null==d||null===(t=d.businesses)||void 0===t?void 0:t.filter((function(t){return t.id!==e.id}));h(F_(F_({},d),{},{businesses:n}))}})))};function Y_(){return Y_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y_.apply(this,arguments)}function q_(e){return function(e){if(Array.isArray(e))return Z_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||X_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$_(Object(n),!0).forEach((function(t){V_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H_(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function W_(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){H_(a,r,o,i,u,"next",e)}function u(e){H_(a,r,o,i,u,"throw",e)}i(void 0)}))}}function K_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||X_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X_(e,t){if(e){if("string"==typeof e)return Z_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z_(e,t):void 0}}function Z_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}G_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},G_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Q_=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.isSearchByName,s=e.isSearchByDescription,c=K_(rn(),1)[0],l=K_(hn(),1)[0].token,f=K_(Br(),2)[1].showToast,p=K_(Bn(),2)[1],d=K_(Object(i.useState)(null),2),h=d[0],y=d[1],v=K_(Object(i.useState)({actions:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=K_(Object(i.useState)({clear:!1,changes:{}}),2),O=g[0],w=g[1],j=K_(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),S=j[0],E=j[1],P=function(){var e=W_(a.a.mark((function e(t,n){var r,i,u,f,p,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(J_(J_({},m),{},{loading:!0})),r=null,i=[],h&&(u=[],o&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(h,"%"))}}),s&&u.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(h,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(r={conditions:i,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},p=r?"".concat(c.root,"/event_rules?page=").concat(t,"&page_size=").concat(n,"&where=").concat(JSON.stringify(r)):"".concat(c.root,"/event_rules?page=").concat(t,"&page_size=").concat(n),e.next=10,fetch(p,f);case 10:return d=e.sent,e.next=13,d.json();case 13:(y=e.sent).error?b(J_(J_({},m),{},{loading:!1,error:y.result})):(b({loading:!1,actions:y.result,error:null}),E(J_(J_({},S),{},{currentPage:y.pagination.current_page,totalPages:y.pagination.total_pages,totalItems:y.pagination.total,from:y.pagination.from,to:y.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),b(J_(J_({},m),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=W_(a.a.mark((function e(t,n){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=5,fetch("".concat(c.root,"/event_rules/").concat(t),r);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error?b(J_(J_({},m),{},{error:i.result})):(I&&(u=null==m?void 0:m.actions.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0})),I(u)),f(Dr.Success,p("RECOVERY_ACTION_SAVED","Recovery action saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),b(J_(J_({},m),{},{error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){b(J_(J_({},m),{},{actions:e}))};return Object(i.useEffect)((function(){m.loading||P(1,S.pageSize)}),[h]),Object(i.useEffect)((function(){(Object.keys(null==O?void 0:O.changes).length>0||O.clear)&&!m.loading&&P(1,S.pageSize)}),[O]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Y_({},e,{searchValue:h,paginationProps:S,recoveryActionList:m,getRecoveryList:P,setFilterValues:w,setPaginationProps:E,handleChangeSearch:function(e){y(e)},handleUpdateAction:C,handleSuccessAddRecoveryAction:function(e){var t=[].concat(q_(m.actions),[e]);E(J_(J_({},S),{},{to:(null==S?void 0:S.to)+1,total:(null==S?void 0:S.total)+1})),b(J_(J_({},m),{},{actions:t}))},handleSuccessUpdateRecoveryAction:I,handleSuccessDeleteRecoveryAction:function(e){var t=m.actions.filter((function(t){return t.id!==e}));E(J_(J_({},S),{},{total:(null==S?void 0:S.total)-1})),b(J_(J_({},m),{},{actions:t}))}})))};function ek(){return ek=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ek.apply(this,arguments)}function tk(e){return tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tk(e)}function nk(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function rk(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){nk(a,r,o,i,u,"next",e)}function u(e){nk(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ok(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ak(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ok(Object(n),!0).forEach((function(t){ik(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ok(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ik(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Q_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Q_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var ck=function(e){var t=e.action,n=e.recoveryActionList,r=e.UIComponent,o=e.handleSuccessUpdateRecoveryAction,s=e.handleSuccessAddRecoveryAction,c=e.handleSuccessDeleteRecoveryAction,l=uk(Bn(),2)[1],f=uk(rn(),1)[0],p=uk(hn(),1)[0].token,d=uk(Br(),2)[1].showToast,h=uk(Object(i.useState)({action:t,loading:!1,error:null}),2),y=h[0],v=h[1],m=uk(Object(i.useState)({loading:!1,changes:{}}),2),b=m[0],g=m[1],O=uk(Object(i.useState)({loading:!1,error:null}),2),w=O[0],j=O[1],S=uk(Object(i.useState)(!1),2),E=S[0],P=S[1],C=function(){return g({loading:!1,changes:{}})},I=function(){var e=rk(a.a.mark((function e(){var r,i,u,s,c,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,d(Dr.Info,l("LOADING","Loading")),j({loading:!0,error:null}),r=ak({},null==b?void 0:b.changes))("object"===tk(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(r)},e.next=8,fetch("".concat(f.root,"/event_rules/").concat(t.id),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?j({loading:!1,error:c.result}):(v(ak(ak({},y),{},{action:c.result})),j({loading:!1,error:null}),o&&(h=null==n?void 0:n.actions.filter((function(e){return e.id===t.id&&Object.assign(e,c.result),!0})),o(h)),C(),d(Dr.Success,l("RECOVERY_ACTION_SAVED","Recovery action saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),j({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var t=rk(a.a.mark((function t(){var n,r,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(Dr.Info,l("LOADING","Loading")),j({loading:!0,error:null}),n=ak({},null==b?void 0:b.changes),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(n)},t.next=7,fetch("".concat(f.root,"/event_rules"),r);case 7:return o=t.sent,t.next=10,o.json();case 10:(i=t.sent).error?j({loading:!1,error:i.result}):(j({error:null,loading:!1}),s&&s(i.result),d(Dr.Success,l("RECOVERY_ACTION_ADDED","Recovery action added")),e.onClose&&e.onClose()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),j({loading:!1,error:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var n=rk(a.a.mark((function n(){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d(Dr.Info,l("LOADING","Loading")),j(ak(ak({},w),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},n.next=6,fetch("".concat(f.root,"/event_rules/").concat(t.id),r);case 6:return o=n.sent,n.next=9,o.json();case 9:n.sent.error||(c&&c(t.id),d(Dr.Success,l("RECOVERY_ACTION_DELETED","Recovery action deleted")),e.onClose&&e.onClose()),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),j({loading:!1,error:[n.t0.message]});case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){0===Object.keys(t).length?(P(!0),g(ak(ak({},b),{},{changes:{enabled:!0,launch_type:"times",name:"",type:"abandoned_cart"}}))):(P(!1),C()),v(ak(ak({},y),{},{action:t}))}),[t]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,ek({},e,{isAddMode:E,recoveryActionState:y,formState:b,actionState:w,handleChangeItem:function(e){g(ak(ak({},b),{},{changes:ak(ak({},b.changes),e)}))},handleChangeInput:function(e){g(ak(ak({},b),{},{changes:ak(ak({},b.changes),{},ik({},e.target.name,e.target.value))}))},handleAddRecoveryAction:x,handleDeleteRecoveryAction:A,handleUpdateClick:I,handleRemoveKey:function(e){var t=ak({},null==b?void 0:b.changes);delete t[e],g(ak(ak({},b),{},{changes:t}))}})))};function lk(){return lk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lk.apply(this,arguments)}function fk(e){return function(e){if(Array.isArray(e))return gk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pk(Object(n),!0).forEach((function(t){hk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yk(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function vk(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){yk(a,r,o,i,u,"next",e)}function u(e){yk(a,r,o,i,u,"throw",e)}i(void 0)}))}}function mk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||bk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bk(e,t){if(e){if("string"==typeof e)return gk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gk(e,t):void 0}}function gk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ck.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ck.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ok=function(e){var t=e.action,n=e.UIComponent,r=mk(rn(),1)[0],o=mk(Bn(),2)[1],s=mk(Br(),2)[1].showToast,c=mk(hn(),1)[0].token,l=mk(Object(i.useState)({loading:!1,notifications:[],error:null}),2),f=l[0],p=l[1],d=mk(Object(i.useState)({loading:!1,error:null}),2),h=d[0],y=d[1],v=function(){var e=vk(a.a.mark((function e(){var n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(dk(dk({},f),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},e.next=5,fetch("".concat(r.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels"),n);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error?p(dk(dk({},f),{},{loading:!1,error:i.result})):p({loading:!1,notifications:i.result,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(dk(dk({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),m=function(e){var t=f.notifications.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));p(dk(dk({},f),{},{notifications:t}))},b=function(){var e=vk(a.a.mark((function e(n,i){var u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,o("LOADING","Loading")),y(dk(dk({},h),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(i)},e.next=6,fetch("".concat(r.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels/").concat(n),u);case 6:return l=e.sent,e.next=9,l.json();case 9:(f=e.sent).error?y({loading:!1,error:f.result}):(y({loading:!1,error:null}),m&&m(f.result),s(Dr.Success,o("NOTIFICATION_SAVED","Notification saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y({loading:!1,error:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){v()}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,lk({},e,{actionState:h,notificationListState:f,handleAddNotifications:function(e){var t=[].concat(fk(f.notifications),[e]);p(dk(dk({},f),{},{notifications:t}))},handleUpdateNotifications:m,handleDeleteNotifications:function(e){var t=f.notifications.filter((function(t){return t.id!==e.id}));p(dk(dk({},f),{},{notifications:t}))},handleUpdateClick:b})))};function wk(){return wk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wk.apply(this,arguments)}function jk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ok.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ok.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ek=function(e){var t=e.UIComponent,n=jk(Object(i.useState)(null),2),r=n[0],o=n[1],a=jk(vr(null),1)[0];return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,wk({},e,{orderState:a,optionSelected:r,handleClickOption:function(e){o(e===r?null:e)}})))};function Pk(){return Pk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pk.apply(this,arguments)}function Ck(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ik(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ck(Object(n),!0).forEach((function(t){xk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ak(e){return function(e){if(Array.isArray(e))return kk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||_k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _k(e,t){if(e){if("string"==typeof e)return kk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kk(e,t):void 0}}function kk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ek.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ek.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Dk=function(e){var t=e.UIComponent,n=e.scheduleList,r=e.handleChangeScheduleState,o=Tk(Object(i.useState)([]),2),a=o[0],s=o[1],c=Tk(Object(i.useState)(!1),2),l=c[0],f=c[1],p=Tk(Object(i.useState)(!1),2),d=p[0],h=p[1],y=Tk(Object(i.useState)({open:{hour:0,minute:0},close:{hour:23,minute:59}}),2),v=y[0],m=y[1],b=Tk(Object(i.useState)({}),2),g=b[0],O=b[1],w=Tk(Object(i.useState)([]),2),j=w[0],S=w[1],E=function(e){return 60*e.hour+e.minute},P=function(e,t,n){for(var r=60*t.open.hour+t.open.minute,o=60*t.close.hour+t.close.minute,a=0;a<e.length;a++)if(a!==n){var i=60*e[a].open.hour+15*parseInt(e[a].open.minute/15),u=60*e[a].close.hour+15*parseInt(e[a].close.minute/15);if(r<i&&o>u)return!0;if(r<i&&o>i)return!0;if(r>i&&o<u)return!0;if(r<u&&o>u)return!0;if(o===u||r===i)return!0}return!1};return Object(i.useEffect)((function(){0!==a.length&&r(Ak(a))}),[a]),Object(i.useEffect)((function(){if(n)s(Ak(n));else{for(var e=[],t=0;t<7;t++)e.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});s(e)}}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Pk({},e,{scheduleState:a,isConflict:l,setIsConflict:f,isTimeChangeError:d,addScheduleTime:v,openAddSchedule:g,setIsTimeChangeError:h,handleEnabledSchedule:function(e,t){var n=Ak(a);n[e].enabled=t,s(n)},handleChangeScheduleTime:function(e,t,n,r){var o,i=Ak(a),u=Ak(i[t].lapses),c=parseInt(e.split(":")[0]),l=parseInt(e.split(":")[1]),p=!1;(r?(p=E({hour:c,minute:l})>=E(u[n].close))?h(!0):o={open:{hour:c,minute:l},close:u[n].close}:(p=E(u[n].open)>=E({hour:c,minute:l}))?h(!0):o={open:u[n].open,close:{hour:c,minute:l}},p)||(P(u,o,n)?f(!0):(i[t].lapses[n]=o,i[t].lapses.sort((function(e,t){return E(e.open)-E(t.open)})),s(i)))},handleDeleteSchedule:function(e,t){var n=Ak(a);n[e].lapses.splice(t,1),s(n)},handleOpenAddSchedule:function(e){m({open:{hour:0,minute:0},close:{hour:23,minute:59}}),O(xk({},e,!0))},handleChangeAddScheduleTime:function(e,t){var n=parseInt(e.split(":")[0]),r=parseInt(e.split(":")[1]);t?E({hour:n,minute:r})>=E(v.close)?h(!0):m(Ik(Ik({},v),{},{open:{hour:n,minute:r}})):E(v.open)>=E({hour:n,minute:r})?h(!0):m(Ik(Ik({},v),{},{close:{hour:n,minute:r}}))},handleAddSchedule:function(e){var t=Ak(a),n=Ak(t[e].lapses);P(n,v,null)?f(!0):(t[e].lapses.push(v),t[e].lapses.sort((function(e,t){return E(e.open)-E(t.open)})),s(t),O(xk({},e,!1)))},selectedCopyDays:j,cleanSelectedCopyDays:function(){return S([])},handleSelectCopyTimes:function(e){var t=j.includes(e)?j.filter((function(t){return t!==e})):[].concat(Ak(j),[e]);S(t)},handleApplyScheduleCopyTimes:function(e){var t=a.map((function(t,n){if(j.includes(n)){var r=Ak(a[e].lapses);return{enabled:a[e].enabled,lapses:r}}return t}));s(t)}})))};function Uk(){return Uk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uk.apply(this,arguments)}function Lk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lk(Object(n),!0).forEach((function(t){Fk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nk(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Rk(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Nk(a,r,o,i,u,"next",e)}function u(e){Nk(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Mk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Dk.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Dk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Gk=function(e){var t=e.UIComponent,n=e.useChekoutFileds,r=e.handleButtonSignupClick,o=e.handleSuccessSignup,s=e.externalPhoneNumber,c={},l=Mk(rn(),1)[0],f=Mk(hn(),2)[1].login,p=Mk(Jr(),1)[0],d=Mk(Object(i.useState)({loading:!1,result:{error:!1}}),2),h=d[0],y=d[1],v=Mk(Object(i.useState)({email:"",cellphone:s||"",password:""}),2),m=v[0],b=v[1],g=Mk(Object(i.useState)({loading:!1,result:{error:!1}}),2),O=g[0],w=g[1],j=Mk(Object(i.useState)({loading:!1,result:{error:!1}}),2),S=j[0],E=j[1],P=function(){var e=Rk(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Bk(Bk({},h),{},{loading:!0})),n={},c.signup=n,r=t||m,e.next=7,l.users().save(r,{cancelToken:n});case 7:i=e.sent,y({result:i.content,loading:!1}),i.content.error||o&&o(i.content.result),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&y({result:{error:!0,result:e.t0.message},loading:!1});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Rk(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(Bk(Bk({},O),{},{loading:!0})),e.next=4,fetch("".concat(l.root,"/auth/sms/twilio/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Bk(Bk({},t),{},{cellphone:t.cellphone,country_phone_code:"+".concat(t.country_phone_code)}))});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,w(Bk(Bk({},O),{},{loading:!1,result:r})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),w(Bk(Bk({},O),{},{loading:!1,result:{error:e.t0.message}}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Rk(a.a.mark((function e(t){var n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(Bk(Bk({},S),{},{loading:!0})),e.next=4,fetch("".concat(l.root,"/auth/sms/twilio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return r=e.sent,e.next=7,r.json();case 7:null!=(i=e.sent)&&i.error||null==i||null===(n=i.result)||void 0===n||!n.id||(f({user:null==i?void 0:i.result,token:null==i||null===(u=i.result)||void 0===u||null===(s=u.session)||void 0===s?void 0:s.access_token}),o&&o(null==i?void 0:i.result)),E(Bk(Bk({},S),{},{loading:!1,result:i})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),E(Bk(Bk({},S),{},{loading:!1,result:{error:e.t0.message}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){c.signup&&c.signup.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Uk({},e,{formState:h,validationFields:p,signupData:m,showField:function(e){var t,r,o;return!n||!p.loading&&!(null!==(t=p.fields)&&void 0!==t&&t.checkout[e])||!p.loading&&(null===(r=p.fields)||void 0===r?void 0:r.checkout[e])&&(null===(o=p.fields)||void 0===o?void 0:o.checkout[e].enabled)},isRequiredField:function(e){var t,r,o;return"password"===e||n&&!p.loading&&(null===(t=p.fields)||void 0===t?void 0:t.checkout[e])&&(null===(r=p.fields)||void 0===r?void 0:r.checkout[e].enabled)&&(null===(o=p.fields)||void 0===o?void 0:o.checkout[e].required)},verifyPhoneState:O,checkPhoneCodeState:S,setCheckPhoneCodeState:function(e){E(e||{loading:!1,result:{error:!1}})},handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=Bk(Bk({},n),{},Fk({},e.name,e.value))})):n=Fk({},e.target.name,e.target.value),b(Bk(Bk({},m),n))},handleButtonSignupClick:r||P,handleSendVerifyCode:C,handleCheckPhoneCode:I})))};Gk.propTypes={UIComponent:c.a.elementType,handleButtonSignupClick:c.a.func,handleSuccessSignup:c.a.func,handleContinueAsGuest:c.a.func,useChekoutFileds:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToLogin:c.a.string,elementLinkToLogin:c.a.element},Gk.defaultProps={useChekoutFileds:!1,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Yk=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function qk(){return qk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qk.apply(this,arguments)}function $k(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Jk(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$k(a,r,o,i,u,"next",e)}function u(e){$k(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Vk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vk(Object(n),!0).forEach((function(t){Wk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yk.propTypes={UIComponent:c.a.elementType,name:c.a.string,minimun:c.a.number,delivery_price:c.a.number,description:c.a.string,distance:c.a.number,delivery_time:c.a.string,pickup_time:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Yk.defaultProps={id:0,name:"",minimun:0,delivery_price:0,description:"",distance:0,delivery_time:""};var Zk=function(e){var t=e.UIComponent,n=e.handleDeleteLevelList,r=e.handleUpdateLevelList,o=e.handleAddLevelList,s=e.level,c=e.setSelectedLevel,l=e.onClose,f=Kk(rn(),1)[0],p=Kk(hn(),1)[0].token,d=Kk(Br(),2)[1].showToast,h=Kk(Bn(),2)[1],y=Kk(Object(i.useState)({loading:!1,error:null,changes:{}}),2),v=y[0],m=y[1],b=function(){var e=Jk(a.a.mark((function e(){var t,r,o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,h("LOADING","Loading")),m(Hk(Hk({},v),{},{loading:!0})),t={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},r="".concat(f.root,"/loyalty_levels/").concat(null==s?void 0:s.id),e.next=7,fetch(r,t);case 7:return o=e.sent,e.next=10,o.json();case 10:i=e.sent,u=i.error,c=i.result,u?m(Hk(Hk({},v),{},{loading:!1,error:c})):(d(Dr.Success,h("LEVEL_DELETED","Level deleted")),m(Hk(Hk({},v),{},{loading:!1,error:null,changes:{}})),n(c),l&&l()),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),m(Hk(Hk({},v),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Jk(a.a.mark((function e(){var t,n,o,i,u,l,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in e.prev=0,d(Dr.Info,h("LOADING","Loading")),m(Hk(Hk({},v),{},{loading:!0})),t=Hk({},null==v?void 0:v.changes))null!=t&&t.name||""!==t[n]||(t[n]=null);return o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(t)},e.next=8,fetch("".concat(f.root,"/loyalty_levels/").concat(null==s?void 0:s.id),o);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,l=u.error,y=u.result,l?m(Hk(Hk({},v),{},{loading:!1,error:y})):(m({changes:{},loading:!1,error:null}),r(y),c(y),d(Dr.Success,h("LEVEL_UPDATED","Level updated"))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),m(Hk(Hk({},v),{},{loading:!1,error:e.t0.message}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Jk(a.a.mark((function e(){var t,n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,h("LOADING","Loading")),m(Hk(Hk({},v),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(v.changes)},n="".concat(f.root,"/loyalty_levels"),e.next=7,fetch(n,t);case 7:return r=e.sent,e.next=10,r.json();case 10:i=e.sent,u=i.error,s=i.result,u?m(Hk(Hk({},v),{},{loading:!1,error:s})):(d(Dr.Success,h("LEVEL_ADDED","Level added")),m(Hk(Hk({},v),{},{loading:!1,error:null,changes:{}})),o(s),l&&l()),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),m(Hk(Hk({},v),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,qk({},e,{formState:v,handleDeleteLevel:b,handleChangeInput:function(e){var t=Hk(Hk({},null==v?void 0:v.changes),{},Wk({},e.target.name,e.target.value));m(Hk(Hk({},v),{},{changes:t}))},updateLevel:g,addLevel:O,handleChangeItem:function(e){var t=Hk(Hk({},null==v?void 0:v.changes),e);m(Hk(Hk({},v),{},{changes:t}))},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){m(Hk(Hk({},v),{},{changes:Hk(Hk({},v.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}}})))};Zk.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Qk=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};Qk.propTypes={UIComponent:c.a.elementType,order:c.a.object.isRequired,orderType:c.a.string.isRequired,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Qk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var eD=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function tD(){return tD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tD.apply(this,arguments)}function nD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function rD(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){nD(a,r,o,i,u,"next",e)}function u(e){nD(a,r,o,i,u,"throw",e)}i(void 0)}))}}function oD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oD(Object(n),!0).forEach((function(t){iD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eD.propTypes={UIComponent:c.a.elementType,isSoldOut:c.a.bool,images:c.a.string,name:c.a.string,description:c.a.string,price:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cD=function(e){var t=e.action,n=e.UIComponent,r=e.handleAddNotifications,o=e.handleUpdateNotifications,s=e.handleDeleteNotifications,c=e.onClose,l=uD(Bn(),2)[1],f=uD(rn(),1)[0],p=uD(hn(),1)[0].token,d=uD(Object(i.useState)({loading:!1,changes:{},error:null}),2),h=d[0],y=d[1],v=uD(Br(),2)[1].showToast,m=function(){y(aD(aD({},h),{},{changes:{}}))},b=function(){var e=rD(a.a.mark((function e(){var n,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Dr.Info,l("LOADING","Loading")),y(aD(aD({},h),{},{loading:!0})),n=aD(aD({},null==h?void 0:h.changes),{},{enabled:!0}),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(n)},e.next=7,fetch("".concat(f.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels"),o);case 7:return i=e.sent,e.next=10,i.json();case 10:(u=e.sent).error?y(aD(aD({},h),{},{loading:!1,error:u.result})):(y(aD(aD({},h),{},{changes:{},loading:!1,error:null})),r(u.result),v(Dr.Success,l("NOTIFICATION_ADDED","Notification added")),c&&c()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),y(aD(aD({},h),{},{loading:!1,error:e.t0.message}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=rD(a.a.mark((function e(n,r){var i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Dr.Info,l("LOADING","Loading")),y(aD(aD({},h),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(r)},e.next=6,fetch("".concat(f.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error?y(aD(aD({},h),{},{loading:!1,error:s.result})):(y(aD(aD({},h),{},{changes:{},loading:!1,error:null})),o&&o(s.result),m(),v(Dr.Success,l("NOTIFICATION_SAVED","Notification saved")),c&&c()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(aD(aD({},h),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=rD(a.a.mark((function e(n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Dr.Info,l("LOADING","Loading")),y(aD(aD({},h),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=6,fetch("".concat(f.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels/").concat(n),r);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?y(aD(aD({},h),{},{loading:!1,error:i.result})):(y(aD(aD({},h),{},{changes:{},loading:!1,error:null})),s&&s(i.result),m(),v(Dr.Success,l("NOTIFICATION_DELETED","Notification deleted")),c&&c()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(aD(aD({},h),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,tD({},e,{formState:h,cleanFormState:m,handleChangeInput:function(e){y(aD(aD({},h),{},{changes:aD(aD({},h.changes),{},iD({},e.target.name,e.target.value))}))},handleChangeSelect:function(e,t){y(aD(aD({},h),{},{changes:aD(aD({},h.changes),{},iD({},e,t))}))},handleUpdateClick:g,handleDeleteClick:O,handleClickAddBtn:b})))};function lD(){return lD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lD.apply(this,arguments)}function fD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fD(Object(n),!0).forEach((function(t){dD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function yD(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hD(a,r,o,i,u,"next",e)}function u(e){hD(a,r,o,i,u,"throw",e)}i(void 0)}))}}function vD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cD.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bD=function(e){var t=e.UIComponent,n=vD(rn(),1)[0],r=vD(hn(),1)[0].token,o=vD(Bn(),2)[1],s=vD(Br(),2)[1].showToast,c=vD(Object(i.useState)({loading:!0,sites:[],error:null}),2),l=c[0],f=c[1],p=vD(Object(i.useState)({loading:!1,configs:[],error:null}),2),d=p[0],h=p[1],y=vD(Object(i.useState)({loading:!1,error:null}),2),v=y[0],m=y[1],b=function(){var e=yD(a.a.mark((function e(){var t,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=4,fetch("".concat(n.root,"/sites"),t);case 4:return o=e.sent,e.next=7,o.json();case 7:i=e.sent,u=i.error,s=i.result,f(u?pD(pD({},l),{},{loading:!1,error:s}):{loading:!1,sites:s,error:null}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),f(pD(pD({},l),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=yD(a.a.mark((function e(t){var o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(pD(pD({},d),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/sites/").concat(t,"/configs"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.error,c=u.result,h(s?pD(pD({},d),{},{error:c}):{loading:!1,configs:c,error:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),h(pD(pD({},d),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=yD(a.a.mark((function e(t,i,u){var c,l,f,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,o("LOADING","Loading")),m(pD(pD({},v),{},{loading:!0})),c={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({value:t})},e.next=6,fetch("".concat(n.root,"/sites/").concat(i,"/configs/").concat(u),c);case 6:return l=e.sent,e.next=9,l.json();case 9:f=e.sent,p=f.error,d=f.result,p?m({loading:!1,error:d}):(m({loading:!1,error:null}),s(Dr.Success,o("SETTINGS_UPDATE","Settings updated"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){b()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,lD({},e,{sitesState:l,siteConfigsState:d,actionState:v,handleGetSiteConfigs:g,handleChangeConfig:O})))};bD.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gD=["photo"];function OD(e){return OD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OD(e)}function wD(){return wD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wD.apply(this,arguments)}function jD(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function SD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ED(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){SD(a,r,o,i,u,"next",e)}function u(e){SD(a,r,o,i,u,"throw",e)}i(void 0)}))}}function PD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PD(Object(n),!0).forEach((function(t){ID(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ID(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return AD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var TD=function(e){var t=e.UIComponent,n=e.useSessionUser,r=e.refreshSessionUser,o=e.useDefualtSessionManager,s=e.userId,c=e.user,l=e.useValidationFields,f=e.handleButtonUpdateClick,p=e.handleSuccessUpdate,d=e.handleSuccessAdd,h=e.isProfessional,y=xD(rn(),1)[0],v=xD(hn(),2),m=v[0],b=v[1].changeUser,g=xD(Jr(),1)[0],O=xD(Object(i.useState)(!1),2),w=O[0],j=O[1],S=xD(Object(i.useState)({loading:!1,result:{error:!1}}),2),E=S[0],P=S[1],C=xD(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),I=C[0],x=C[1],A={},T=o?m.token:e.accessToken;Object(i.useEffect)((function(){if(c){if(!(s||n&&r)||m.loading||e.userData)P({loading:!1,result:{error:!1,result:n&&!r?m.user:c}});else{P(CD(CD({},E),{},{loading:!0}));var t={};A.user=t,y.setAccessToken(T).users(n&&r?m.user.id:s).get({cancelToken:t}).then((function(e){P({loading:!1,result:e.content}),e.content.result&&b(CD(CD({},m.user),e.content.result))})).catch((function(e){"Cancel"!==e.constructor.name&&P({loading:!1,result:{error:!0,result:e.message}})}))}return function(){A.user&&A.user.cancel()}}}),[m.loading,c]);var _=function(){var e=ED(a.a.mark((function e(t,r,o){var i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return",f(E.result.result,I.changes));case 2:if(e.prev=2,x(CD(CD({},I),{},{loading:!0})),t&&(I.changes=CD(CD({},I.changes),t)),!r){e.next=13;break}return e.next=8,y.users((null==c?void 0:c.id)||E.result.result.id).save({photo:o||I.changes.photo},{accessToken:T});case 8:i=e.sent,u=I.changes,u.photo,s=jD(u,gD),x(CD(CD({},I),{},{changes:i.content.error?I.changes:s,result:i.content,loading:!1})),e.next=17;break;case 13:return e.next=15,y.users((null==c?void 0:c.id)||E.result.result.id).save(I.changes,{accessToken:T});case 15:i=e.sent,x(CD(CD({},I),{},{changes:i.content.error?I.changes:{},result:i.content,loading:!1}));case 17:i.content.error||(P(CD(CD({},E),{},{result:CD(CD({},E.result),i.content)})),n&&b(CD(CD({},m.user),i.content.result)),p&&p(i.content.result)),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),x(CD(CD({},I),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t,n,r){return e.apply(this,arguments)}}(),k=function(){var t=ED(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,x(CD(CD({},I),{},{loading:!0})),n=CD({},null==I?void 0:I.changes),h&&Object.assign(n,{level:8}),t.next=6,y.users().save(n,{accessToken:T});case 6:r=t.sent,x(CD(CD({},I),{},{changes:r.content.error?I.changes:{},result:r.content,loading:!1})),r.content.error||(P(CD(CD({},E),{},{result:CD(CD({},E.result),r.content)})),d&&d(r.content.result),e.onClose&&e.onClose()),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),x(CD(CD({},I),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,wD({},e,{isEdit:w,cleanFormState:function(e){return x(CD(CD({},I),e))},formState:I,userState:E,validationFields:g,showField:function(e){var t,n,r;return!l||!g.loading&&!(null!==(t=g.fields)&&void 0!==t&&t.checkout[e])||!g.loading&&(null===(n=g.fields)||void 0===n?void 0:n.checkout[e])&&(null===(r=g.fields)||void 0===r?void 0:r.checkout[e].enabled)},setFormState:x,handleChangeSwtich:function(e,t){var n=ID({},e,t);x(CD(CD({},I),{},{changes:CD(CD({},I.changes),n)}))},isRequiredField:function(e){var t,n,r;return l&&!g.loading&&(null===(t=g.fields)||void 0===t?void 0:t.checkout[e])&&(null===(n=g.fields)||void 0===n?void 0:n.checkout[e].enabled)&&(null===(r=g.fields)||void 0===r?void 0:r.checkout[e].required)},handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=CD(CD({},n),{},ID({},e.name,e.value))})):n=ID({},e.target.name,e.target.value),x(CD(CD({},I),{},{changes:CD(CD({},I.changes),n)}))},handleButtonUpdateClick:_,handleButtonAddClick:k,handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){x(CD(CD({},I),{},{changes:CD(CD({},I.changes),{},{photo:t.result})}))},t.onerror=function(e){return console.log(e)}},toggleIsEdit:function(){return j(!w)},handleChangeUserType:function(e){var t={level:e};x(CD(CD({},I),{},{changes:CD(CD({},I.changes),t)}))},handleChangeOccupation:function(e){x(CD(CD({},I),{},{changes:CD(CD({},I.changes),{},{occupation_id:e})}))}})))};function _D(){return _D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_D.apply(this,arguments)}function kD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kD(Object(n),!0).forEach((function(t){UD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function BD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return FD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}TD.propTypes={UIComponent:c.a.elementType,refreshSessionUser:c.a.bool,handleButtonUpdateClick:c.a.func,handleSuccessUpdate:c.a.func,useValidationFields:c.a.bool,validationFieldsType:c.a.string,useDefualtSessionManager:c.a.bool,accessToken:function(e,t){return void 0!==e[t]&&"string"!=typeof e[t]?new Error("Invalid prop `".concat(t,"` of type `").concat(OD(e[t]),"` supplied to `UserFormDetails`, expected `object`.")):void 0!==e[t]||e.useDefualtSessionManager?void 0:new Error("Invalid prop `".concat(t,"` is required when `useDefualtSessionManager` is false."))},beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToLogin:c.a.string,elementLinkToLogin:c.a.element},TD.defaultProps={useValidationFields:!1,validationFieldsType:"checkout",useDefualtSessionManager:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ND=function(e){var t=e.defaultUserTypesSelected,n=e.disabledActiveStateCondition,r=e.UIComponent,o=e.userTypesSelected,s=e.selectedUserActiveState,c=e.searchValue,l=e.isSearchByUserId,f=e.isSearchByUserEmail,p=e.isSearchByUserPhone,d=e.isSearchByUserName,h=BD(rn(),1)[0],y=BD(hn(),1)[0],v=y.token,m=y.loading,b=BD(Object(i.useState)({loading:!1,error:null,result:null}),2),g=b[0],O=b[1],w=function(){var e,r=(e=a.a.mark((function e(r){var i,u,y,b,w,j,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(DD(DD({},g),{},{loading:!0})),i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}},u=[],Array.isArray(t)&&u.push({attribute:"level",value:t}),y=[],r&&(o.length>0&&y.push({attribute:"level",value:o}),n||y.push({attribute:"enabled",value:s}),c&&(b=[],l&&b.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),f&&b.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),p&&b.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),d&&(b.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),b.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}})),y.push({conector:"OR",conditions:b}))),w=r?"".concat(h.root,"/users.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(y)):u.length>0?"".concat(h.root,"/users.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(u)):"".concat(h.root,"/users.csv?mode=dashboard&orderBy=id"),e.next=12,fetch(w,i);case 12:return j=e.sent,S=(new Date).getTime(),e.next=16,j.blob().then((function(e){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="users_".concat(S,".csv"),n.click()}));case 16:O(DD(DD({},g),{},{loading:!1})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),O(DD(DD({},g),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){LD(a,r,o,i,u,"next",e)}function u(e){LD(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,_D({},e,{actionStatus:g,getCSV:w})))};function RD(){return RD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RD.apply(this,arguments)}function MD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zD(Object(n),!0).forEach((function(t){YD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ND.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ND.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var JD=function(e){var t=e.UIComponent,n=e.businessId,r=e.products,o=e.cartProducts,s=e.onSave,c=qD(Object(i.useState)({products:[],loading:!0,error:!1}),2),l=c[0],f=c[1],p=qD(Object(i.useState)([]),2),d=p[0],h=p[1],y=qD(rn(),1)[0],v=qD(vr(),1)[0];Object(i.useEffect)((function(){null!=r&&r.length||n?null!=r&&r.length?b(r):m():f(GD(GD({},l),{},{error:!0,message:"BusinessId is required when products is not defined"}))}),[]),Object(i.useEffect)((function(){l.loading||b(d)}),[v.loading]);var m=function(){var e,t=(e=a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.businesses(n).products().where([{attribute:"upselling",value:!0}]).parameters({type:1}).get();case 3:t=e.sent,r=t.content.result,h(r),b(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),f(GD(GD({},l),{},{loading:!1,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){MD(a,r,o,i,u,"next",e)}function u(e){MD(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),b=function(e){var t=e.filter((function(e){return e.upselling})),n=o.filter((function(e){return t.find((function(t){return t.id===e.id}))}));n.length?f(GD(GD({},l),{},{loading:!1,products:t.filter((function(e){return!e.inventoried&&!n.find((function(t){return t.id===e.id}))}))})):f(GD(GD({},l),{},{loading:!1,products:t}))};return u.a.createElement(t,RD({},e,{upsellingProducts:l,handleFormProduct:function(e){s(e)}}))};function VD(){return VD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VD.apply(this,arguments)}function HD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HD(Object(n),!0).forEach((function(t){KD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ZD(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){XD(a,r,o,i,u,"next",e)}function u(e){XD(a,r,o,i,u,"throw",e)}i(void 0)}))}}function QD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return eU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}JD.propTypes={UIComponent:c.a.elementType,upsellingProducts:c.a.array,businessId:c.a.number};var tU=function(e){var t=e.orderId,n=e.propsToFetch,r=e.asDashboard,o=e.hashKey,s=e.userCustomerId,c=e.UIComponent,l=QD(hn(),1)[0],f=l.user,p=l.token,d=l.loading,h=QD(rn(),1)[0],y=QD(zn(),1)[0],v=QD(Bn(),2)[1],m=QD(Br(),2)[1].showToast,b=QD(Object(i.useState)({order:null,loading:!e.order,error:null}),2),g=b[0],O=b[1],w=QD(Object(i.useState)({status:null,loading:!1,error:null}),2),j=w[0],S=w[1],E=QD(Object(i.useState)({loading:!1,error:null}),2),P=E[0],C=E[1],I=QD(Object(i.useState)({loading:!0,error:null,messages:[]}),2),x=I[0],A=I[1],T=QD(Object(i.useState)(!1),2),_=T[0],k=T[1],D=Cn(),U=e.accessToken||p,L=function(){var e=ZD(a.a.mark((function e(){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(WD(WD({},x),{},{loading:!0})),n="".concat(h.root,"/orders/").concat(t,"/messages?mode=dashboard"),e.next=5,fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(U)}});case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,i=o.error,u=o.result,A(i?WD(WD({},x),{},{loading:!1,error:u}):{messages:u,loading:!1,error:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),A(WD(WD({},x),{},{loading:!1,error:[e.t0.Messages]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=ZD(a.a.mark((function e(n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(WD(WD({},j),{},{loading:!0})),e.next=4,fetch("".concat(h.root,"/orders/").concat(t,"/messages"),{method:"post",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({can_see:"0,2,3",comment:"I am on the parking number: ".concat(n),order_id:t,type:2})});case 4:r=e.sent,o=r.status,S(WD(WD({},j),{},{loading:!1,status:o})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),S(WD(WD({},j),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=ZD(a.a.mark((function e(){var i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},o&&(i.headers={"X-uuid-access-X":o}),s&&(i.query={mode:"dashboard"}),e.prev=3,O(WD(WD({},g),{},{loading:!0})),u=n?r?h.setAccessToken(p).orders(t).asDashboard().select(n):h.setAccessToken(p).orders(t).select(n):r?h.setAccessToken(p).orders(t).asDashboard():h.setAccessToken(p).orders(t),e.next=8,u.get();case 8:c=e.sent,l=c.content.result,f=Array.isArray(l)?null:l,O(WD(WD({},g),{},{loading:!1,order:f})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),O(WD(WD({},g),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=ZD(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(WD(WD({},P),{},{loading:!0})),e.next=4,fetch("".concat(h.root,"/orders/").concat(null==t?void 0:t.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({status:t.newStatus})});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,C({loading:!1,error:r.error?r.result:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),C(WD(WD({},P),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=ZD(a.a.mark((function e(){var n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null==x||null===(n=x.messages[(null==x||null===(r=x.messages)||void 0===r?void 0:r.length)-1])||void 0===n?void 0:n.id,e.prev=1,e.next=4,fetch("".concat(h.root,"/orders/").concat(t,"/messages/").concat(o,"/read"),{method:"GET",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"}});case 4:return i=e.sent,e.next=7,i.json();case 7:u=e.sent,s=u.result,k(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=ZD(a.a.mark((function e(){var t,n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dr.Info,v("LOADING","Loading")),C(WD(WD({},P),{},{loading:!0})),i={method:"POST",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({order_id:null===(t=g.order)||void 0===t?void 0:t.id,business_id:null===(n=g.order)||void 0===n?void 0:n.business_id,gateway:null===(r=g.order)||void 0===r||null===(o=r.paymethod)||void 0===o?void 0:o.gateway})},e.next=6,fetch("".concat(h.root,"/payments/stripe/refund"),i);case 6:return u=e.sent,e.next=9,u.json();case 9:s=e.sent,C({loading:!1,error:s.error?s.result:null}),s.error||(O(WD(WD({},g),{},{order:WD(WD({},g.order),{},{refund_data:s.result})})),m(Dr.Success,v("ORDER_REFUNDED","Order refunded"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),C(WD(WD({},P),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){e.order?O(WD(WD({},g),{},{order:e.order})):F()}),[t]),Object(i.useEffect)((function(){if(!g.loading&&!d){var e=function(e){var t;(null==e?void 0:e.id)===(null==g||null===(t=g.order)||void 0===t?void 0:t.id)&&(delete e.total,delete e.subtotal,O(WD(WD({},g),{},{order:Object.assign(g.order,e)})))};return r||D.join("orders_".concat(f.id)),D.on("update_order",e),function(){r||D.leave("orders_".concat(f.id)),D.off("update_order",e)}}}),[g.order,D,d]),Object(i.useEffect)((function(){var e=function(e){O(WD(WD({},g),{},{order:WD(WD({},g.order),{},{user_review:e})}))};return y.on("customer_reviewed",e),function(){y.off("customer_reviewed",e)}}),[g]),Object(i.useEffect)((function(){L()}),[t]),u.a.createElement(u.a.Fragment,null,c&&u.a.createElement(c,VD({},e,{order:g,messageErrors:j,actionStatus:P,formatPrice:function(e){return e&&"$ ".concat(e.toFixed(2))},handlerSubmit:function(e){var t=e.spot;B(t)},handleUpdateOrderStatus:N,messages:x,setMessages:A,messagesReadList:_,readMessages:R,handleRefundOrder:M})))};function nU(){return nU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nU.apply(this,arguments)}function rU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rU(Object(n),!0).forEach((function(t){aU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function uU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}tU.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),orderId:c.a.oneOfType([c.a.number,c.a.string]),order:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},tU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cU=function(e){var t=e.UIComponent,n=e.order,r=e.onSaveReview,o=uU(rn(),1)[0],s=uU(hn(),1)[0],c=uU(Object(i.useState)({quality:0,punctiality:0,service:0,packaging:0,comments:""}),2),l=c[0],f=c[1],p=uU(Object(i.useState)({loading:!1,result:{error:!1}}),2),d=p[0],h=p[1],y=function(){var e,t=(e=a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(oU(oU({},d),{},{loading:!0})),e.prev=1,i={order_id:null==n?void 0:n.id,quality:l.quality,delivery:l.punctiality,service:l.service,package:l.packaging,comment:l.comments,user_id:null==s||null===(t=s.user)||void 0===t?void 0:t.id,business_id:n.business_id},e.next=5,fetch("".concat(o.root,"/business/").concat(n.business_id,"/reviews"),{method:"POST",headers:{Authorization:"Bearer ".concat(s.token),"Content-Type":"application/json"},body:JSON.stringify(i)});case 5:u=e.sent,r&&r(u.content),h({loading:!1,result:u.content}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),h({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){iU(a,r,o,i,u,"next",e)}function u(e){iU(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,nU({},e,{stars:l,order:n,formState:d,handleSendReview:y,handleChangeInput:function(e){f(oU(oU({},l),{},{comments:e.target.value}))},handleChangeRating:function(e){f(oU(oU({},l),{},aU({},e.target.name,parseInt(e.target.value))))}})))};function lU(){return lU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lU.apply(this,arguments)}function fU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fU(Object(n),!0).forEach((function(t){dU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function yU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cU.propTypes={UIComponent:c.a.elementType,order:c.a.object,onSaveReview:c.a.func,handleSendReview:c.a.func},cU.defaultProps={order:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mU=function(e){var t=e.UIComponent,n=e.pageSlug,r=e.onNotFound,o=yU(Object(i.useState)({body:null,loading:!1,error:null}),2),s=o[0],c=o[1],l=yU(rn(),1)[0],f={},p=function(){var e,t=(e=a.a.mark((function e(t){var o,i,u,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(pU(pU({},s),{},{loading:!0})),e.prev=1,o={},f.page=o,e.next=6,l.pages(t).get({cancelToken:o});case 6:i=e.sent,u=i.content,p=u.error,d=u.result,c(pU(pU({},s),{},{loading:!1})),p?(c(pU(pU({},s),{},{error:d})),r&&r(n)):c(pU(pU({},s),{},{body:d.body})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&c(pU(pU({},s),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hU(a,r,o,i,u,"next",e)}function u(e){hU(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){return p(n),function(){f.page&&f.page.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,lU({},e,{cmsState:s})))};function bU(){return bU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bU.apply(this,arguments)}function gU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gU(Object(n),!0).forEach((function(t){wU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function SU(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jU(a,r,o,i,u,"next",e)}function u(e){jU(a,r,o,i,u,"throw",e)}i(void 0)}))}}function EU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return PU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mU.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var CU=function(e){var t=e.UIComponent,n=EU(Bn(),2)[1],r=EU(rn(),1)[0],o=EU(hn(),1)[0].token,s=EU(Object(i.useState)(""),2),c=s[0],l=s[1],f=EU(Object(i.useState)({customer:!1,signup:!1}),2),p=f[0],d=f[1],h=EU(Object(i.useState)({loading:!1,result:{error:!1}}),2),y=h[0],v=h[1],m=EU(Object(i.useState)({users:[],loading:!0,error:null}),2),b=m[0],g=m[1],O=function(){var e=SU(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.filter((function(e){return(null==e?void 0:e.cellphone)===n})))[0]?(v({loading:!1,result:r[0]}),d(OU(OU({},p),{},{customer:!0}))):v({loading:!1,result:{error:!1}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=SU(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(OU(OU({},b),{},{loading:!0})),e.prev=1,e.next=4,r.setAccessToken(o).users().get();case 4:t=e.sent,n=t.content.result,g(OU(OU({},b),{},{users:n,loading:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),g(OU(OU({},b),{},{loading:!1,error:e.t0.message}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){!function(e,t){var r;function o(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),r>=e.length&&(r=0),r<0&&(r=e.length-1),e[r].classList.add("autocomplete-active")}function a(t){for(var n=document.getElementsByClassName("autocomplete-items"),r=0;r<n.length;r++)t!==n[r]&&t!==e&&n[r].parentNode.removeChild(n[r])}e.addEventListener("input",(function(o){var i,u,s=this.value;if(a(),!s)return!1;r=-1;var c=document.createElement("DIV");for((c=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),c.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(c),u=0;u<(null==t?void 0:t.length);u++){var f,h,y;if((null===(f=t[u])||void 0===f||null===(h=f.cellphone)||void 0===h||null===(y=h.substr(0,null==s?void 0:s.length))||void 0===y?void 0:y.toUpperCase())===(null==s?void 0:s.toUpperCase())){var v,m,w=null===(v=t[u])||void 0===v?void 0:v.cellphone;(i=document.createElement("DIV")).innerHTML="<strong>"+(null==w?void 0:w.substr(0,null==s?void 0:s.length))+"</strong>",i.innerHTML+=null==w?void 0:w.substr(null==s?void 0:s.length),i.innerHTML+=" ("+(null===(m=t[u])||void 0===m?void 0:m.name)+")",i.innerHTML+="<input type='hidden' value='"+w+"'>",i.addEventListener("click",(function(n){e.value=this.getElementsByTagName("input")[0].value,l(this.getElementsByTagName("input")[0].value),O(t,this.getElementsByTagName("input")[0].value),a()})),c.appendChild(i)}}(i=document.createElement("DIV")).innerHTML="<strong>"+n("CREATE_CUSTOMER","Create new customer")+"</strong>",i.innerHTML+="<input type='hidden' value='"+n("CREATE_CUSTOMER","Create new customer")+"'>",i.addEventListener("click",(function(e){10===o.target.value.length?d(OU(OU({},p),{},{signup:!0})):g(OU(OU({},b),{},{error:n("ERROR_MIN_CHARACTERS_PHONE","The Phone / Mobile must be 10 characters")})),a()})),c.appendChild(i)})),e.addEventListener("keydown",(function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40===e.keyCode?(r++,o(t)):38===e.keyCode?(r--,o(t)):13===e.keyCode&&(e.preventDefault(),r>-1&&t&&t[r].click())})),document.addEventListener("click",(function(e){a(e.target)}))}(document.getElementById("phone-input"),b.users)}),[b.users]),Object(i.useEffect)((function(){w()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,bU({},e,{phone:c,customerState:y,customersPhones:b,setCustomersPhones:g,onChangeNumber:function(e){var t,n,r;l(null!==(t=e.target)&&void 0!==t&&null!==(n=t.validity)&&void 0!==n&&n.valid?null===(r=e.target)||void 0===r?void 0:r.value:c)},openModal:p,setOpenModal:d,setCustomerState:v})))};function IU(){return IU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IU.apply(this,arguments)}function xU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return AU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}CU.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},CU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var TU=function(e){var t=e.UIComponent,n=e.businessList,r=e.userLocation,o=e.setErrors,a=xU(zn(),1)[0],s=xU(Object(i.useState)([]),2),c=s[0],l=s[1];return Object(i.useEffect)((function(){l(n.map((function(e){return{lat:e.location.lat,lng:e.location.lng,icon:e.logo,slug:e.slug}})))}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,IU({},e,{businessLocations:c,userLocation:r,onBusinessClick:function(e){a.emit("go_to_page",{page:"business",params:{store:e}})},setErrors:o})))};function _U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_U(Object(n),!0).forEach((function(t){DU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function LU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return BU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}TU.propTypes={UIComponent:c.a.elementType,businessList:c.a.array.isRequired,userLocation:c.a.object,setErrors:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},TU.defaultProps={businessList:[],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var FU=Object(i.createContext)(),NU=function(e){var t=e.children,n=LU(Object(i.useState)({business:{}}),2),r=n[0],o=n[1],s=function(){var e,t=(e=a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(kU(kU({},r),{},{business:t}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){UU(a,r,o,i,u,"next",e)}function u(e){UU(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),c=JSON.parse(JSON.stringify(r)),l={setBusiness:s};return u.a.createElement(FU.Provider,{value:[c,l]},t)},RU=function(){return Object(i.useContext)(FU)||[{},function(){}]};function MU(e){return MU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MU(e)}function zU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function GU(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){zU(a,r,o,i,u,"next",e)}function u(e){zU(a,r,o,i,u,"throw",e)}i(void 0)}))}}function YU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var qU=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,i,u;return t=e,n=[{key:"getItem",value:(u=GU(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.getItem(t);case 2:if(r=e.sent,!n||"object"===MU(r)){e.next=5;break}return e.abrupt("return",JSON.parse(r));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})},{key:"setItem",value:(i=GU(a.a.mark((function e(t,n,r){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r?JSON.stringify(n):n,e.next=3,window.localStorage.setItem(t,o);case 3:case"end":return e.stop()}}),e)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"removeItem",value:(o=GU(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.removeItem(t);case 2:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})}],n&&YU(t.prototype,n),r&&YU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),$U=Object(i.createContext)(),JU=function(e){var t=e.Alert,n=e.settings,r=e.children,o=new qU;return u.a.createElement($U.Provider,null,u.a.createElement(Mn,null,u.a.createElement(nn,{settings:n},u.a.createElement(Ln,{strategy:o},u.a.createElement(dn,{strategy:o},u.a.createElement(er,null,u.a.createElement(Er,null,u.a.createElement(Lr,null,u.a.createElement($r,null,u.a.createElement(Pn,{settings:Object.assign(n.socket,{project:n.project})},u.a.createElement(yr,{strategy:o,Alert:t},u.a.createElement(NU,null,r))))))))))))};function VU(){return VU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VU.apply(this,arguments)}var HU=function(e){var t=e.UIComponent,n=e.orderTotal;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,VU({},e,{total:n})))};function WU(){return WU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WU.apply(this,arguments)}function KU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function XU(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){KU(a,r,o,i,u,"next",e)}function u(e){KU(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ZU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return QU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}HU.propTypes={UIComponent:c.a.elementType,useOrderContext:c.a.bool,businessId:c.a.number,orderTotal:c.a.number,handlerSubmit:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},HU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var eL=function(e){var t,n,r,o=e.body,s=e.clientId,c=e.btnStyle,l=e.UIComponent,f=e.handlerChangePaypal,p=ZU(vr(),2)[1],d=p.confirmCart,h=p.placeCart,y=ZU(Object(i.useState)(!1),2),v=y[0],m=y[1];Object(i.useEffect)((function(){var e;if(s){if(null===(e=window)||void 0===e||!e.paypal){var t=document.createElement("script");return t.type="text/javascript",t.src="https://www.paypal.com/sdk/js?client-id=".concat(s),t.async=!0,t.onload=function(){m(!0)},t.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(t),function(){t.onload=null}}m(!0)}}),[s]);var b=function(){var e=XU(a.a.mark((function e(t,n){var r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={paymethod_id:o.paymethod_id,amount:o.amount,delivery_zone_id:o.delivery_zone_id},e.next=3,h(o.cartUuid,r);case 3:if(i=e.sent,u=i.error,s=i.result,!u){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",s.pay_reference);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=XU(a.a.mark((function e(t,n){var r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(o.cartUuid);case 2:if(r=e.sent,i=r.error,u=r.result,!i){e.next=7;break}return e.abrupt("return",null);case 7:return f&&f(u.order.uuid),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=XU(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(o.cartUuid);case 2:return n=e.sent,r=n.result,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=null===(t=window)||void 0===t||null===(n=t.paypal)||void 0===n||null===(r=n.Buttons)||void 0===r?void 0:r.driver("react",{React:u.a,ReactDOM:YC.a});return l&&u.a.createElement(l,WU({},e,{isSdkReady:v,PaypalButton:w,paypalButtonProps:{createOrder:b,onApprove:g,onError:O,onCancel:O,style:c}}))};function tL(){return tL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tL.apply(this,arguments)}function nL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nL(Object(n),!0).forEach((function(t){oL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function iL(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){aL(a,r,o,i,u,"next",e)}function u(e){aL(a,r,o,i,u,"throw",e)}i(void 0)}))}}function uL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eL.propTypes={UIComponent:c.a.elementType,body:c.a.object.isRequired,clientId:c.a.string.isRequired,handlerChangePaypal:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cL=function(e){var t=e.businessId,n=e.UIComponent,r=uL(hn(),1)[0],o=r.token,s=r.user,c=uL(rn(),1)[0],l=uL(Object(i.useState)({cards:[],loading:!0,error:null}),2),f=l[0],p=l[1],d=uL(Object(i.useState)(e.publicKey),2),h=d[0],y=d[1],v=uL(Object(i.useState)(null),2),m=v[0],b=v[1],g=uL(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j={},S=function(){var e=iL(a.a.mark((function e(){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(rL(rL({},f),{},{loading:!0})),e.prev=1,n={},j.paymentCards=n,e.next=6,c.setAccessToken(o).paymentCards(t,s.id).get({cancelToken:n});case 6:r=e.sent,i=r.content.result,(u=null==i?void 0:i.find((function(e){return e.default})))&&b({id:u.id,type:"card",card:{brand:u.brand,last4:u.last4}}),p(rL(rL({},f),{},{loading:!1,cards:i})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),p(rL(rL({},f),{},{loading:!1,error:e.t0}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=iL(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.paymentCards(-1,s.id,t.id).delete();case 3:n=e.sent,n.content.error||(f.cards=f.cards.filter((function(e){return e.id!==t.id})),p(rL({},f))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=iL(a.a.mark((function e(n){var r,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(rL(rL({},O),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({business_id:t,user_id:s.id,card_id:n.id})},i="".concat(c.root,"/payments/stripe/cards/default"),e.next=6,fetch(i,r);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?w({loading:!1,error:l.result}):(b({id:n.id,type:"card",card:{brand:n.brand,last4:n.last4}}),w({loading:!1,error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=iL(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.setAccessToken(o).paymentCards().getCredentials();case 3:t=e.sent,n=t.content.result,y(n.publishable),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),I=function(e){b({id:e.id,type:"card",card:{brand:e.brand,last4:e.last4}})};return Object(i.useEffect)((function(){return o&&(S(),e.publicKey||C()),function(){j.paymentCards&&j.paymentCards.cancel()}}),[o]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,tL({},e,{cardSelected:m,cardsList:f,handleCardClick:I,publicKey:h,handleNewCard:function(e){f.cards.push(e),p(rL({},f)),I(e)},deleteCard:E,setDefaultCard:P,defaultCardSetActionStatus:O})))};function lL(){return lL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lL.apply(this,arguments)}function fL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pL(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){fL(a,r,o,i,u,"next",e)}function u(e){fL(a,r,o,i,u,"throw",e)}i(void 0)}))}}function dL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cL.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,userId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var yL=function(e){var t=e.UIComponent,n=dL(rn(),1)[0],r=dL(hn(),1)[0].token,o=dL(Object(i.useState)(null),2),s=o[0],c=o[1],l=dL(Object(i.useState)(null),2),f=l[0],p=l[1],d=function(){var e=pL(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.root,"/payments/stripe/credentials"),{headers:{Authorization:"Bearer ".concat(r)}});case 2:return t=e.sent,e.next=5,t.json();case 5:o=e.sent,i=o.result.publishable,c(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=pL(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.root,"/payments/stripe/requirements?type=add_card"),{headers:{Authorization:"Bearer ".concat(r)}});case 2:return t=e.sent,e.next=5,t.json();case 5:o=e.sent,i=o.result,p(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r&&(d(),h())}),[r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,lL({},e,{stripeKey:s,clientSecret:f})))};function vL(){return vL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vL.apply(this,arguments)}function mL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}yL.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},yL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var OL=function(e){var t,n=e.paymentMethods,r=e.UIComponent,o=bL(hn(),1)[0].token,s=bL(rn(),1)[0],c=bL(Object(i.useState)(null),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s.root,"/payments/stripe/credentials"),{headers:{Authorization:"Bearer ".concat(o)}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r=n.result.publishable,f(r);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){mL(a,r,o,i,u,"next",e)}function u(e){mL(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[]),u.a.createElement(u.a.Fragment,null,r&&l&&u.a.createElement(r,vL({},e,{stripePK:l,modalName:(t="",n.map((function(e,r){r===n.length-1?t+="".concat(e.name):t+="".concat(e.name,", ")})),t)})))};function wL(){return wL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wL.apply(this,arguments)}function jL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function SL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SL(Object(n),!0).forEach((function(t){PL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CL(e){return function(e){if(Array.isArray(e))return AL(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xL(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||xL(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xL(e,t){if(e){if("string"==typeof e)return AL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AL(e,t):void 0}}function AL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}OL.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,currency:c.a.string.isRequired,paymentMethods:c.a.arrayOf(c.a.object).isRequired,handlerStripeSource:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},OL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var TL=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=e.isSearchByName,l=e.isSearchByLastName,f=e.availableDriverIds,p=IL(rn(),1)[0],d=IL(Object(i.useState)({loading:!0,error:null,drivers:[],pagination:null}),2),h=d[0],y=d[1],v=IL(Object(i.useState)(null),2),m=v[0],b=v[1],g=IL(Object(i.useState)(!1),2),O=g[0],w=g[1],j=IL(Object(i.useState)(null),2),S=j[0],E=j[1],P=new RegExp(/^[A-Za-z0-9\s]+$/g),C=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s,d,v,m,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(EL(EL({},h),{},{loading:!0})),t=null,n=[{attribute:"level",value:"4"}],(null==f?void 0:f.length)>0&&n.push({attribute:"id",value:f}),S&&(r=[],i=P.test(S),c&&r.push({attribute:"name",value:{condition:"ilike",value:i?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),l&&r.push({attribute:"lastname",value:{condition:"ilike",value:i?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),n.push({conector:"OR",conditions:r})),n.length&&(t={conditions:n,conector:"AND"}),u=t?p.users().asDashboard().select(o).where(t):p.users().asDashboard().select(o),e.next=10,u.get();case 10:s=e.sent,d=s.content,v=d.error,m=d.result,b=d.pagination,y(EL(EL({},h),{},v?{loading:!1,error:m}:{loading:!1,drivers:m,pagination:b})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),y(EL(EL({},h),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jL(a,r,o,i,u,"next",e)}function u(e){jL(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return C(),e.abort()}),[S]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==h||null===(e=h.drivers)||void 0===e?void 0:e.length)){var o=null==h||null===(t=h.drivers)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(CL(e),[t.id])}),[]),a=(null==n||null===(r=n.drivers_ids)||void 0===r?void 0:r.length)>0?null==n?void 0:n.drivers_ids.filter((function(e){return o.includes(e)})):o;b(CL(a)),null!=n&&n.drivers_ids&&(null==a?void 0:a.length)!==(null==h?void 0:h.drivers.length)||w(!0)}}),[null==h?void 0:h.drivers]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,wL({},e,{driverList:h,driverIds:m,searchValue:S,onSearch:E,handleChangeDriverId:function(e){if(null==m?void 0:m.find((function(t){return t===e}))){var t=null==m?void 0:m.filter((function(t){return t!==e}));b(t),w(!1)}else{var n=m?CL(m):[];n.push(e),n.length===(null==h?void 0:h.drivers.length)&&w(!0),b(n)}},handleClickFilterButton:function(){var e=m?CL(m):null;r(EL(EL({},n),{},{drivers_ids:e})),s&&s()},isAllCheck:O,handleChangeAllCheck:function(){if(O)b(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=xL(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(h.drivers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}b(t)}w(!O)}})))};function _L(){return _L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_L.apply(this,arguments)}function kL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kL(Object(n),!0).forEach((function(t){UL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function BL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return FL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}TL.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},TL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname","birthdate","drivergroups"]};var NL=function(e){var t=e.UIComponent,n=e.order,r=BL(rn(),1)[0],o=BL(hn(),1)[0],s=BL(Bn(),2)[1],c=BL(Br(),2)[1].showToast,l=BL(zn(),1)[0],f=BL(Object(i.useState)({qualification:0,comment:"",order_id:null==n?void 0:n.id,user_id:null==n?void 0:n.customer_id}),2),p=f[0],d=f[1],h=BL(Object(i.useState)({loading:!1,error:null}),2),y=h[0],v=h[1],m=function(){var t,i=(t=a.a.mark((function t(){var i,u,f;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v({loading:!0,error:null}),t.prev=1,t.next=4,fetch("".concat(r.root,"/users/").concat(null==n?void 0:n.customer_id,"/user_reviews"),{method:"POST",headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"},body:JSON.stringify(p)});case 4:return i=t.sent,t.next=7,i.json();case 7:u=t.sent,f=u.result,u.error?v({loading:!1,error:f}):(v(DL(DL({},p),{},{loading:!1})),c(Dr.Success,s("CUSTOMER_REVIEW_SUCCESS_CONTENT","Thank you, Customer review successfully submitted!")),l.emit("customer_reviewed",f),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),v({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[1,13]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){LL(a,r,o,i,u,"next",e)}function u(e){LL(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return i.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_L({},e,{reviewState:p,setReviewState:d,actionState:y,handleChangeQualification:function(e){e&&d(DL(DL({},p),{},{qualification:e}))},handleSendCustomerReview:m})))};function RL(){return RL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RL.apply(this,arguments)}function ML(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return GL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}NL.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},NL.defaultProps={order:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var YL=function(e){var t=e.UIComponent,n=e.toSave,r=zL(rn(),1)[0],o=zL(hn(),1)[0].token,s=zL(Object(i.useState)(),2),c=s[0],l=s[1],f=function(){var e,t=(e=a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r.root,"/payments/stripe/requirements?type=add_card"),{headers:{Authorization:"Bearer ".concat(o)}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,i=n.result,l(i);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ML(a,r,o,i,u,"next",e)}function u(e){ML(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&n&&f()}),[o]),u.a.createElement(t,RL({},e,{requirements:c}))};function qL(){return qL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qL.apply(this,arguments)}function $L(e){return function(e){if(Array.isArray(e))return QL(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ZL(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function VL(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){JL(a,r,o,i,u,"next",e)}function u(e){JL(a,r,o,i,u,"throw",e)}i(void 0)}))}}function HL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HL(Object(n),!0).forEach((function(t){KL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ZL(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZL(e,t){if(e){if("string"==typeof e)return QL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QL(e,t):void 0}}function QL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}YL.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,toSave:c.a.bool,publicKey:c.a.string,clientSecret:c.a.string,handleSource:c.a.func};var eB=function(e){var t=e.UIComponent,n=e.business,r=e.category,o=e.product,s=e.handleUpdateBusinessState,c=e.businessState,l=e.setDataSelected,f=XL(hn(),1)[0].loading,p=XL(rn(),1)[0],d=XL(Bn(),2)[1],h=XL(Br(),2)[1].showToast,y=XL(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),v=y[0],m=y[1],b=XL(Object(i.useState)(!1),2),g=b[0],O=b[1],w=XL(Object(i.useState)(!1),2),j=w[0],S=w[1],E=function(){var e=VL(a.a.mark((function e(t){var r,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(Dr.Info,d("LOADING","Loading")),m(WL(WL({},v),{},{loading:!0})),e.next=7,p.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(null==o?void 0:o.category_id)).products(null==o?void 0:o.id).save(t);case 7:r=e.sent,i=r.content,u=i.error,c=i.result,u?m(WL(WL({},v),{},{loading:!1,result:{error:!0,result:c}})):(m(WL(WL({},v),{},{loading:!1,result:{error:!1,result:c}})),s&&((l=$L(null==n?void 0:n.categories)).forEach((function e(n){if(n.id===(null==o?void 0:o.category_id)){var r=n.products.map((function(e){return e.id===o.id?WL(WL({},e),t):e}));n.products=$L(r)}Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),s(WL(WL({},n),{},{categories:l}))),h(Dr.Success,d("PRODUCT_UPDATED","Product updated")),O(!1)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),m(WL(WL({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=VL(a.a.mark((function e(){var t,r,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(Dr.Info,d("LOADING","Loading")),m(WL(WL({},v),{},{loading:!0})),e.next=7,p.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(null==o?void 0:o.category_id)).products(null==o?void 0:o.id).delete();case 7:t=e.sent,r=t.content,i=r.error,u=r.result,i?m(WL(WL({},v),{},{loading:!1,result:{error:!0,result:u}})):(m(WL(WL({},v),{},{loading:!1,result:{error:!1,result:u}})),s&&((c=$L(null==n?void 0:n.categories)).forEach((function e(t){if(t.id===(null==o?void 0:o.category_id)){var n=t.products.filter((function(e){return e.id!==o.id}));t.products=$L(n)}Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),s(WL(WL({},n),{},{categories:c}))),h(Dr.Success,d("PRODUCT_DELETED","Product deleted"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),m(WL(WL({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=VL(a.a.mark((function e(t,r){var i,u,c,l,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(Dr.Info,d("LOADING","Loading")),e.next=6,p.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(null==o?void 0:o.category_id)).products(t).save(r);case 6:i=e.sent,u=i.content,c=u.error,l=u.result,c?m(WL(WL({},v),{},{loading:!1,result:{error:!0,result:l}})):(s&&((y=$L(null==n?void 0:n.categories)).forEach((function e(n){if(n.id===(null==o?void 0:o.category_id)){var r=n.products.map((function(e){return e.id===t?WL(WL({},e),{},{rank:null==l?void 0:l.rank}):e}));n.products=$L(r)}Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),s(WL(WL({},n),{},{categories:y}))),h(Dr.Success,d("PRODUCT_UPDATED","Product updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),m(WL(WL({},v),{},{loading:!1,result:{error:!0,result:[e.t0.message]}}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&m(WL(WL({},v),{},{changes:WL({},o)}))}),[o,c]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,qL({},e,{handleChangeProductActive:function(e){E({enabled:e})},handleUpdateClick:function(){var e,t,n,r,o,a,i={images:null==v||null===(e=v.changes)||void 0===e?void 0:e.images,name:null==v||null===(t=v.changes)||void 0===t?void 0:t.name,description:null==v||null===(n=v.changes)||void 0===n?void 0:n.description,price:null==v||null===(r=v.changes)||void 0===r?void 0:r.price,fee_fixed:null==v||null===(o=v.changes)||void 0===o?void 0:o.fee_fixed,fee_percentage:null==v||null===(a=v.changes)||void 0===a?void 0:a.fee_percentage};for(var u in i)null===i[u]&&delete i[u];E(i)},deleteProduct:P,productFormState:v,handleChangeInput:function(e){m(WL(WL({},v),{},{changes:WL(WL({},v.changes),{},KL({},e.target.name,e.target.value))})),O(!0)},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){m(WL(WL({},v),{},{changes:WL(WL({},v.changes),{},{images:t.result})}))},t.onerror=function(e){return console.log(e)},O(!0)},isEditMode:g,handleDragStart:function(e,t){e.dataTransfer.setData("transferProductId",t);var n=document.createElement("div");n.classList.add("ghostDragging"),n.innerHTML=null==o?void 0:o.name,document.body.appendChild(n),e.dataTransfer.setDragImage(n,0,0),S(!1)},handleDragOver:function(e,t){e.preventDefault();var n=e.target.closest(".draggable-product");if(n)if(t){var r=window.scrollY+e.target.getBoundingClientRect().top+e.target.offsetHeight/2;e.clientY>r?(S(!0),l("")):(S(!1),l(n.dataset.index))}else l(n.dataset.index)},handleDrop:function(e){e.preventDefault();var t,n=parseInt(e.dataTransfer.getData("transferProductId"));if(j){var a=r.products.sort((function(e,t){return e.rank-t.rank})),i=a.length,u=a.findIndex((function(e){return e.id===o.id}));t=u===i-1?a[u].rank+1:a[u+1].rank}else t=null==o?void 0:o.rank;S(!1),C(n,{rank:t})},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);l("")},isProductsBottom:j})))};function tB(){return tB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tB.apply(this,arguments)}function nB(e){return function(e){if(Array.isArray(e))return lB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cB(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function oB(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rB(a,r,o,i,u,"next",e)}function u(e){rB(a,r,o,i,u,"throw",e)}i(void 0)}))}}function aB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aB(Object(n),!0).forEach((function(t){uB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||cB(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cB(e,t){if(e){if("string"==typeof e)return lB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lB(e,t):void 0}}function lB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eB.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,product:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fB=function(e){var t=e.UIComponent,n=e.handleUpdateBusinessState,r=e.business,o=e.category,s=e.categorySelected,c=e.setCategorySelected,l=e.setDataSelected,f=sB(hn(),1)[0].loading,p=sB(rn(),1)[0],d=sB(Bn(),2)[1],h=sB(Br(),2)[1].showToast,y=sB(Object(i.useState)({changes:{},loading:!1,result:{error:!1}}),2),v=y[0],m=y[1],b=sB(Object(i.useState)(!1),2),g=b[0],O=b[1],w=sB(Object(i.useState)(!1),2),j=w[0],S=w[1],E=function(){var e=oB(a.a.mark((function e(t,o){var i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(Dr.Info,d("LOADING","Loading")),e.next=6,p.businesses(parseInt(null==r?void 0:r.id)).categories(t).save(o);case 6:i=e.sent,(u=i.content).error||((s=nB(null==r?void 0:r.categories)).forEach((function e(n){n.id===t&&(n.rank=u.result.rank),Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),n(iB(iB({},r),{},{categories:s})),h(Dr.Success,d("CATEOGORY_UPDATED","Category updated"))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),m(iB(iB({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=oB(a.a.mark((function e(t){var i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(Dr.Info,d("LOADING","Loading")),m(iB(iB({},v),{},{loading:!0})),e.next=7,p.businesses(parseInt(null==r?void 0:r.id)).categories(parseInt(o.id)).save(t);case 7:i=e.sent,u=i.content,s=u.error,c=u.result,s?m(iB(iB({},v),{},{loading:!1,result:{error:!0,result:c}})):(m(iB(iB({},v),{},{loading:!1,result:{error:!1,result:c}})),O(!1),n&&((l=nB(r.categories)).forEach((function e(t){t.id===c.id&&(t.name=null==c?void 0:c.name,t.enabled=null==c?void 0:c.enabled,t.image=null==c?void 0:c.image),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),n(iB(iB({},r),{},{categories:l}))),h(Dr.Success,d("CATEOGORY_UPDATED","Category updated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),m(iB(iB({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var t=oB(a.a.mark((function t(){var i,u,l,y,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,h(Dr.Info,d("LOADING","Loading")),m(iB(iB({},v),{},{loading:!0})),t.next=7,p.businesses(parseInt(null==r?void 0:r.id)).categories(parseInt(o.id)).delete();case 7:i=t.sent,u=i.content,l=u.error,y=u.result,l?m(iB(iB({},v),{},{loading:!1,result:{error:!0,result:y}})):(m(iB(iB({},v),{},{loading:!1,result:{error:!1,result:y}})),n&&((b=nB(r.categories)).forEach((function e(t,n,r){t.id===o.id&&r.splice(n,1),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),n(iB(iB({},r),{},{categories:b})),o.id===s.id&&c(b[0])),h(Dr.Success,d("CATEOGORY_DELETED","Category deleted")),e.onClose&&e.onClose(o.id)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),m(iB(iB({},v),{},{loading:!1,result:{error:!0,result:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m(iB(iB({},v),{},o?{changes:iB({},o)}:{changes:{}}))}),[o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,tB({},e,{handelChangeCategoryActive:function(e){P({enabled:e})},categoryFormState:v,isCategoriesBottom:j,handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){m(iB(iB({},v),{},{changes:iB(iB({},v.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)},O(!0)},handleUpdateClick:function(){var e,t,n={name:null==v||null===(e=v.changes)||void 0===e?void 0:e.name,image:null==v||null===(t=v.changes)||void 0===t?void 0:t.image};for(var r in n)null===n[r]&&delete n[r];P(n)},deleteCategory:C,handleInputChange:function(e){m(iB(iB({},v),{},{changes:iB(iB({},v.changes),{},uB({},e.target.name,e.target.value))})),O(!0)},isEditMode:g,handleDragStart:function(e){e.dataTransfer.setData("transferCategoryId",null==o?void 0:o.id);var t=document.createElement("div");t.classList.add("ghostDragging"),t.innerHTML=o.name,document.body.appendChild(t),e.dataTransfer.setDragImage(t,0,0),S(!1)},handleDragOver:function(e,t){e.preventDefault();var n=e.target.closest(".draggable-category");if(n)if(t){var r=window.scrollY+e.target.getBoundingClientRect().top+e.target.offsetHeight/2;e.clientY>r?(S(!0),l("")):(S(!1),l(n.dataset.index))}else l(n.dataset.index)},handleDrop:function(e){e.preventDefault();var t,n=parseInt(e.dataTransfer.getData("transferCategoryId"));t=j?(null==o?void 0:o.rank)+1:null==o?void 0:o.rank,S(!1),E(n,{rank:t})},handleDragEnd:function(){l("");for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0])}})))};function pB(){return pB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pB.apply(this,arguments)}function dB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function hB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hB(Object(n),!0).forEach((function(t){vB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mB(e){return function(e){if(Array.isArray(e))return OB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gB(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||gB(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gB(e,t){if(e){if("string"==typeof e)return OB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OB(e,t):void 0}}function OB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fB.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,category:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var wB=function(e){var t=e.UIComponent,n=e.category,r=e.handleUpdateCategoryList,o=e.categoryList,s=e.staticConfigs,c=e.handleChangeStaic,l=bB(Object(i.useState)(null),2),f=l[0],p=l[1],d=bB(hn(),1)[0].loading,h=bB(rn(),1)[0],y=bB(Br(),2)[1].showToast,v=bB(Bn(),2)[1],m=bB(tr(),2)[1].refreshConfigs,b=bB(Object(i.useState)({changes:null,loading:!1,result:{error:null},API:!1,finalResult:[]}),2),g=b[0],O=b[1],w=function(e,t){var n,r=f.find((function(e){return e.id===t}));switch(null==r?void 0:r.key){case"platform_fee_fixed":case"platform_fee_percentage":if(isNaN(Number(e)&&""!==e))return}var o=[],a=null==g||null===(n=g.changes)||void 0===n?void 0:n.find((function(e){return e.id===t}));a?o=null==g?void 0:g.changes.map((function(n){return n.id===t?yB(yB({},n),{},{value:e}):n})):(null!=g&&g.changes&&(o=mB(null==g?void 0:g.changes)),o.push(yB(yB({},r),{},{value:e})));var i=f.map((function(n){return n.id===t?yB(yB({},n),{},{value:e}):n}));O(yB(yB({},g),{},{changes:o})),p(i)},j=function(e){return"["+e+"]"},S=function(){var e,t=(e=a.a.mark((function e(t,i){var u,s,l,f,p,b,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dr.Info,v("LOADING","Loading")),O(yB(yB({},g),{},{loading:!0,API:!1})),e.next=7,h.configs(t).save(i);case 7:u=e.sent,s=u.content,l=s.error,f=s.result,l?O(yB(yB({},g),{},{loading:!1,result:{error:!0,result:f},API:!1})):(p=null!=g&&g.changes?null==g?void 0:g.changes.filter((function(e){return e.id!==f.id})):[],b=null==g?void 0:g.finalResult.map((function(e){return e.id===f.id?yB(yB({},e),{},{value:null==f?void 0:f.value}):e})),p.length>0?O({loading:!1,changes:p,result:{error:!1,result:f},API:!0,finalResult:b}):(O({loading:!1,changes:null,result:{error:!1,result:"ok"},API:!1,finalResult:b}),y(Dr.Success,v("SETTINGS_UPDATE","Settings updated")),r&&(w=null==o?void 0:o.categories.map((function(e){return e.id===n.id?yB(yB({},e),{},{configs:b}):e})),r(w)),c&&c(mB(b)),m&&m())),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),O(yB(yB({},g),{},{loading:!1,result:{error:!0,result:e.t0},API:!1}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){dB(a,r,o,i,u,"next",e)}function u(e){dB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if((null==n?void 0:n.configs.length)>0){var e=mB(null==n?void 0:n.configs);p(e),O(yB(yB({},g),{},{finalResult:e}))}}),[null==n?void 0:n.configs]),Object(i.useEffect)((function(){s&&(p(mB(s)),O(yB(yB({},g),{},{finalResult:mB(s)})))}),[s]),Object(i.useEffect)((function(){var e;if(null!=g&&g.API&&(null==g||null===(e=g.changes)||void 0===e?void 0:e.length)>0){var t={key:null==g?void 0:g.changes[0].key,value:null==g?void 0:g.changes[0].value};S(null==g?void 0:g.changes[0].id,t)}}),[null==g?void 0:g.API]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,pB({},e,{settingsState:g,configs:f,handleInputChange:w,handleCheckBoxChange:function(e,t,n){var r,o=parseInt(e.target.getAttribute("data-id"));if(t){var a=""===n?[]:n.split("|"),i=a.indexOf(e.target.name);-1===i&&e.target.checked&&a.push(e.target.name),!e.target.checked&&i>=0&&a.splice(i,1),r=a.join("|")}else{var u=mB(JSON.parse(n)),s=u.indexOf(parseInt(e.target.name));-1===s&&e.target.checked&&u.push(parseInt(e.target.name)),!e.target.checked&&s>=0&&u.splice(s,1),r=JSON.stringify(u)}w(r,o)},handleClickUpdate:function(){var e;if(null!=g&&g.changes&&0!==(null==g||null===(e=g.changes)||void 0===e?void 0:e.length)){var t=null==g?void 0:g.changes.map((function(e){return"driver_tip_options"===e.key?yB(yB({},e),{},{value:j(null==e?void 0:e.value)}):e}));O(yB(yB({},g),{},{changes:mB(t),API:!0}))}},formState:g,handleChangeFormState:O,saveConfig:S})))};wB.propTypes={UIComponent:c.a.elementType,category:c.a.object,staticConfigs:c.a.arrayOf(s.object),categoryList:c.a.object,handleUpdateCategoryList:c.a.func,handleChangeStaic:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jB=n(12);function SB(){return SB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SB.apply(this,arguments)}function EB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function PB(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){EB(a,r,o,i,u,"next",e)}function u(e){EB(a,r,o,i,u,"throw",e)}i(void 0)}))}}function CB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return IB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IB(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xB=function(e){var t=e.UIComponent,n=e.requirements,r=e.toSave,o=e.handleSource,s=e.onNewCard,c=CB(hn(),1)[0].user,l=CB(rn(),1)[0],f=Object(jB.useStripe)(),p=Object(jB.useElements)(),d=CB(Object(i.useState)(null),2),h=d[0],y=d[1],v=CB(Object(i.useState)(!1),2),m=v[0],b=v[1],g=function(){var e=PB(a.a.mark((function e(t,n,r){var o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(l.root,"/payments/stripe/cards"),{method:"POST",headers:{Authorization:"Bearer ".concat(null==n||null===(o=n.session)||void 0===o?void 0:o.access_token),"Content-Type":"application/json"},body:JSON.stringify({business_id:r,gateway:"stripe",token_id:t,user_id:null==n?void 0:n.id})});case 2:return i=e.sent,e.next=5,i.json();case 5:u=e.sent,s&&s(u.result);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),O=function(){var t=PB(a.a.mark((function t(i){var u,s,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b(!0),i.preventDefault(),u=null==p?void 0:p.getElement(jB.CardElement),n){t.next=10;break}return t.next=6,f.createPaymentMethod({type:"card",card:u,billing_details:{name:"".concat(c.name," ").concat(c.lastname),email:c.email,address:c.address}});case 6:(s=t.sent).error?(b(!1),y(s.error.message)):(b(!1),y(null),o&&o({id:null==s?void 0:s.paymentMethod.id,type:"card",card:{brand:null==s?void 0:s.paymentMethod.card.brand,last4:null==s?void 0:s.paymentMethod.card.last4}})),t.next=14;break;case 10:return t.next=12,f.confirmCardSetup(n,{payment_method:{card:u,billing_details:{name:"".concat(c.name," ").concat(c.lastname),email:c.email,address:c.address}}});case 12:(l=t.sent).error?(b(!1),y(l.error.message)):(b(!1),y(null),r&&g(l.setupIntent.payment_method,c,e.businessId));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return u.a.createElement(t,SB({},e,{handleSubmit:O,error:h,loading:m,handleChange:function(e){e.error?y(e.error.message):y(null)}}))};function AB(){return AB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AB.apply(this,arguments)}function TB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}xB.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,clientSecret:c.a.string,autosave:c.a.bool,handlerToken:c.a.func},xB.defaultProps={autosave:!0};var _B=function(e){var t=e.UIComponent,n=e.handleStripeRedirect,r=function(){var e,t=(e=a.a.mark((function e(t){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.type,o=t.name,i=t.email,n&&n({type:r,owner:{name:o,email:i}});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){TB(a,r,o,i,u,"next",e)}function u(e){TB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,AB({},e,{handleSubmitPaymentMethod:r})))};function kB(){return kB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kB.apply(this,arguments)}_B.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_B.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var DB=function(e){var t=e.handleClick,n=e.btnText,r=e.btnValue,o=e.UIComponent;return u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,kB({},e,{handleButtonClick:t,btnText:n,btnValue:r})))};function UB(){return UB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UB.apply(this,arguments)}function LB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LB(Object(n),!0).forEach((function(t){FB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function FB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function RB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return MB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MB(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}DB.propTypes={UIComponent:c.a.elementType,btnText:c.a.string.isRequired,btnValue:c.a.number,handleClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},DB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var zB=function(e){var t=e.UIComponent,n=e.code,r=e.random,o=e.handleSuccessResetPassword,s=RB(Object(i.useState)({loading:!1,result:{error:!1}}),2),c=s[0],l=s[1],f=RB(Object(i.useState)({code:n,random:r,password:""}),2),p=f[0],d=f[1],h=RB(rn(),1)[0],y=function(){var e,t=(e=a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(BB(BB({},c),{},{loading:!0})),e.next=4,h.users().resetPassword(p);case 4:t=e.sent,n=t.response,r=n.data,l({result:r,loading:!1}),r.error||o&&o(r.result),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&l({result:{error:!0,result:e.t0.message},loading:!1});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){NB(a,r,o,i,u,"next",e)}function u(e){NB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,UB({},e,{handleResetPassword:y,handleChangeInput:function(e){d(BB(BB({},p),{},FB({},e.target.name,e.target.value)))},resetPasswordData:p,formState:c})))};function GB(){return GB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GB.apply(this,arguments)}function YB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function qB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qB(Object(n),!0).forEach((function(t){JB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function JB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VB(e){return function(e){if(Array.isArray(e))return KB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||WB(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||WB(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WB(e,t){if(e){if("string"==typeof e)return KB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?KB(e,t):void 0}}function KB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}zB.propTypes={UIComponent:c.a.elementType,code:c.a.string,random:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},zB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var XB=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=HB(rn(),1)[0],l=HB(Object(i.useState)({loading:!0,error:null,brands:[],pagination:null}),2),f=l[0],p=l[1],d=HB(Object(i.useState)(null),2),h=d[0],y=d[1],v=HB(Object(i.useState)(!1),2),m=v[0],b=v[1],g=HB(hn(),1)[0],O=g.token,w=g.loading,j=g.user,S=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s,l,d,h,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,p($B($B({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O)}},n=[],0===(null==j?void 0:j.level)){e.next=11;break}return e.next=9,c.setAccessToken(O).businesses().select(["franchise_id"]).asDashboard().get();case 9:(r=e.sent).content.error||(n=null===(i=r.content.result)||void 0===i?void 0:i.reduce((function(e,t){return[].concat(VB(e),[t.franchise_id])}),[]).filter((function(e){return e})));case 11:return u="".concat(c.root,"/franchises?params=").concat(o),e.next=14,fetch(u,t);case 14:return s=e.sent,e.next=17,s.json();case 17:l=e.sent,d=l.error,h=l.result,y=l.pagination,d?p($B($B({},f),{},{loading:!1,error:h})):(v=0===(null==j?void 0:j.level)?null==h?void 0:h.filter((function(e){return e.enabled})):null==h?void 0:h.filter((function(e){return e.enabled&&n.includes(e.id)})),p($B($B({},f),{},{loading:!1,brands:v,pagination:y}))),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),p($B($B({},f),{},{loading:!1,error:e.t0}));case 27:case"end":return e.stop()}}),e,null,[[2,24]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){YB(a,r,o,i,u,"next",e)}function u(e){YB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return S(),e.abort()}),[]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==f||null===(e=f.brands)||void 0===e?void 0:e.length)){var o=null===(t=f.brands)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(VB(e),[t.id])}),[]);y(VB((null==n?void 0:n.franchises_id)||o)),null!=n&&n.franchises_id&&(null==n||null===(r=n.franchises_id)||void 0===r?void 0:r.length)!==(null==f?void 0:f.brands.length)||b(!0)}}),[null==f?void 0:f.brands]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,GB({},e,{brandList:f,brandIds:h,handleChangeBrandId:function(e){if(null==h?void 0:h.find((function(t){return t===e}))){var t=null==h?void 0:h.filter((function(t){return t!==e}));y(t),b(!1)}else{var n=h?VB(h):[];n.push(e),n.length===(null==f?void 0:f.brands.length)&&b(!0),y(n)}},handleClickFilterButton:function(){var e=h?VB(h):null;r($B($B({},n),{},{franchises_id:e})),s&&s()},isAllCheck:m,handleChangeAllCheck:function(){if(m)y(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=WB(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(f.brands);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}y(t)}b(!m)}})))};function ZB(){return ZB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZB.apply(this,arguments)}function QB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function eF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eF(Object(n),!0).forEach((function(t){nF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rF(e){return function(e){if(Array.isArray(e))return iF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||aF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||aF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aF(e,t){if(e){if("string"==typeof e)return iF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iF(e,t):void 0}}function iF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}XB.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},XB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","logo","description","header","enabled","created_at","updated_at"]};var uF=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=oF(rn(),1)[0],l=oF(Object(i.useState)({loading:!0,error:null,appIds:[],pagination:null}),2),f=l[0],p=l[1],d=oF(Object(i.useState)(null),2),h=d[0],y=d[1],v=oF(Object(i.useState)(!1),2),m=v[0],b=v[1],g=oF(hn(),1)[0],O=g.token,w=g.loading,j=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(tF(tF({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O)}},n="".concat(c.root,"/sites?params=").concat(o),e.next=8,fetch(n,t);case 8:return r=e.sent,e.next=11,r.json();case 11:i=e.sent,u=i.error,s=i.result,l=i.pagination,p(tF(tF({},f),{},u?{loading:!1,error:s}:{loading:!1,appIds:s,pagination:l})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),p(tF(tF({},f),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){QB(a,r,o,i,u,"next",e)}function u(e){QB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return j(),e.abort()}),[]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==f||null===(e=f.appIds)||void 0===e?void 0:e.length)){var o=null===(t=f.appIds)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(rF(e),[t.id])}),[]);y(rF((null==n?void 0:n.app_ids)||o)),null!=n&&n.app_ids&&(null==n||null===(r=n.app_ids)||void 0===r?void 0:r.length)!==(null==f?void 0:f.appIds.length)||b(!0)}}),[null==f?void 0:f.appIds]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ZB({},e,{appIdList:f,appIds:h,handleChangeAppId:function(e){if(null==h?void 0:h.find((function(t){return t===e}))){var t=null==h?void 0:h.filter((function(t){return t!==e}));y(t),b(!1)}else{var n=h?rF(h):[];n.push(e),n.length===(null==f?void 0:f.appIds.length)&&b(!0),y(n)}},handleClickFilterButton:function(){var e=h?rF(h):null;r(tF(tF({},n),{},{app_ids:e})),s&&s()},isAllCheck:m,handleChangeAllCheck:function(){if(m)y(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=aF(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(f.appIds);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}y(t)}b(!m)}})))};function sF(){return sF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sF.apply(this,arguments)}function cF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function lF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lF(Object(n),!0).forEach((function(t){pF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dF(e){return function(e){if(Array.isArray(e))return vF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||yF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yF(e,t){if(e){if("string"==typeof e)return vF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vF(e,t):void 0}}function vF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}uF.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},uF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","logo","description","header","enabled","created_at","updated_at"]};var mF=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=e.setAvailableDriverIds,l=hF(rn(),1)[0],f=hF(Object(i.useState)({loading:!0,error:null,driverGroups:[],pagination:null}),2),p=f[0],d=f[1],h=hF(Object(i.useState)(null),2),y=h[0],v=h[1],m=hF(Object(i.useState)(!1),2),b=m[0],g=m[1],O=hF(hn(),1)[0],w=O.token,j=O.loading,S=hF(Object(i.useState)(null),2),E=S[0],P=S[1],C=new RegExp(/^[A-Za-z0-9\s]+$/g),I=function(e){if(e){var t=[];p.driverGroups.forEach((function(n){e.includes(n.id)&&n.drivers.forEach((function(e){t.push(e.id)}))}));var n=t.filter((function(e,t,n){return n.indexOf(e)===t}));c(n)}else c(null)},x=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s,c,f,h,y,v,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(fF(fF({},p),{},{loading:!0})),t=null,n=[],E&&(r=[],i=C.test(E),r.push({attribute:"name",value:{condition:"ilike",value:i?encodeURI("%".concat(E,"%")):"%".concat(E,"%")}}),n.push({conector:"AND",conditions:r})),n.length&&(t={conditions:n,conector:"AND"}),u={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}},s=t?"".concat(l.root,"/drivergroups?params=").concat(o,"&where=").concat(JSON.stringify(n[0])):"".concat(l.root,"/drivergroups?params=").concat(o),e.next=12,fetch(s,u);case 12:return c=e.sent,e.next=15,c.json();case 15:f=e.sent,h=f.error,y=f.result,v=f.pagination,h?d(fF(fF({},p),{},{loading:!1,error:y})):(m=null==y?void 0:y.filter((function(e){return e.enabled})),d(fF(fF({},p),{},{loading:!1,driverGroups:m,pagination:v}))),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),d(fF(fF({},p),{},{loading:!1,error:e.t0}));case 25:case"end":return e.stop()}}),e,null,[[2,22]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){cF(a,r,o,i,u,"next",e)}function u(e){cF(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return x(),e.abort()}),[]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==p||null===(e=p.driverGroups)||void 0===e?void 0:e.length)){var o=null==p||null===(t=p.driverGroups)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(dF(e),[t.id])}),[]);v(dF((null==n?void 0:n.driver_groups_ids)||o)),null!=n&&n.driver_groups_ids&&(null==n||null===(r=n.driver_groups_ids)||void 0===r?void 0:r.length)!==(null==p?void 0:p.driverGroups.length)||g(!0)}}),[null==p?void 0:p.driverGroups]),Object(i.useEffect)((function(){var e=new AbortController;return x(),e.abort()}),[E]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,sF({},e,{driverGroupList:p,driverGroupIds:y,handleChangeDriverGroupId:function(e){if(null==y?void 0:y.find((function(t){return t===e}))){var t=null==y?void 0:y.filter((function(t){return t!==e}));v(t),g(!1)}else{var n=y?dF(y):[];n.push(e),n.length===(null==p?void 0:p.driverGroups.length)&&g(!0),v(n)}},handleClickFilterButton:function(){var e=y?dF(y):null;r(fF(fF({},n),{},{driver_groups_ids:e})),s&&s(),c&&I(e)},isAllCheck:b,handleChangeAllCheck:function(){if(b)v(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=yF(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(p.driverGroups);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}v(t)}g(!b)},searchValue:E,onSearch:P})))};function bF(){return bF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bF.apply(this,arguments)}function gF(e){return function(e){if(Array.isArray(e))return IF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||CF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function wF(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){OF(a,r,o,i,u,"next",e)}function u(e){OF(a,r,o,i,u,"throw",e)}i(void 0)}))}}function jF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jF(Object(n),!0).forEach((function(t){EF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||CF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CF(e,t){if(e){if("string"==typeof e)return IF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?IF(e,t):void 0}}function IF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mF.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","enabled","drivers"]};var xF=function(e){var t=e.site,n=e.sitesList,r=e.UIComponent,o=e.handleSuccessUpdateSites,s=PF(Bn(),2)[1],c=PF(rn(),1)[0],l=PF(hn(),1)[0].token,f=PF(Br(),2)[1].showToast,p=PF(Object(i.useState)({site:t||{},loading:!1,error:null}),2),d=p[0],h=p[1],y=PF(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=y[0],m=y[1],b=PF(Object(i.useState)(!1),2),g=b[0],O=b[1],w=function(){return m({loading:!1,changes:{},error:null})},j=function(){var e=wF(a.a.mark((function e(){var r,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,s("LOADING","Loading")),m(SF(SF({},v),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(v.changes)},e.next=6,fetch("".concat(c.root,"/sites/").concat(t.id),r);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?m(SF(SF({},v),{},{loading:!1,error:u.result})):(h(SF(SF({},d),{},{site:u.result})),w(),o&&(p=n.filter((function(e){return e.id===t.id&&Object.assign(e,u.result),!0})),o(p)),f(Dr.Success,s("SITE_SAVED","Site saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(SF(SF({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var r=wF(a.a.mark((function r(){var i,u,p,d;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,f(Dr.Info,s("LOADING","Loading")),m(SF(SF({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},r.next=6,fetch("".concat(c.root,"/sites/").concat(t.id),i);case 6:return u=r.sent,r.next=9,u.json();case 9:(p=r.sent).error?m(SF(SF({},v),{},{loading:!1,error:p.result})):(o&&(d=n.filter((function(e){return e.id!==t.id})),o(d)),f(Dr.Success,s("SITE_DELETED","Site deleted")),e.onClose&&e.onClose()),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),m(SF(SF({},v),{},{loading:!1,error:[r.t0.message]}));case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(){return r.apply(this,arguments)}}(),E=function(){var t=wF(a.a.mark((function t(){var r,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Dr.Info,s("LOADING","Loading")),m(SF(SF({},v),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(v.changes)},t.next=6,fetch("".concat(c.root,"/sites"),r);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?m(SF(SF({},v),{},{loading:!1,error:u.result})):(w(),f(Dr.Success,s("SITE_ADDED","Site added")),o&&o([].concat(gF(n),[u.result])),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(SF(SF({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){t?(O(!1),w(),h(SF(SF({},d),{},{site:t}))):(O(!0),h(SF(SF({},d),{},{site:{}})))}),[t]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,bF({},e,{siteState:d,formState:v,isAddMode:g,handleChangeInput:function(e){m(SF(SF({},v),{},{changes:SF(SF({},v.changes),{},EF({},e.target.name,e.target.value))}))},handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){m(SF(SF({},v),{},{changes:SF(SF({},v.changes),{},EF({},t,n.result))}))},n.onerror=function(e){return console.log(e)}},handleUpdateSite:j,handleDeleteSite:S,handleAddSite:E})))};function AF(){return AF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AF.apply(this,arguments)}function TF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TF(Object(n),!0).forEach((function(t){kF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function UF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LF(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xF.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var BF=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.isSearchByName,s=e.isSearchByDescription,c=UF(rn(),1)[0],l=UF(hn(),1)[0].token,f=UF(Object(i.useState)({loading:!1,sites:[],error:null}),2),p=f[0],d=f[1],h=UF(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),y=h[0],v=h[1],m=UF(Object(i.useState)(null),2),b=m[0],g=m[1],O=function(){var e,t=(e=a.a.mark((function e(t,n){var r,i,u,f,h,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(_F(_F({},p),{},{loading:!0})),r=null,i=[],b&&(u=[],o&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}),s&&u.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(r={conditions:i,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},h=r?"".concat(c.root,"/sites?page=").concat(t,"&page_size=").concat(n,"&&where=").concat(JSON.stringify(r)):"".concat(c.root,"/sites?page=").concat(t,"&page_size=").concat(n),e.next=10,fetch(h,f);case 10:return m=e.sent,e.next=13,m.json();case 13:(g=e.sent).error?d(_F(_F({},p),{},{loading:!1,error:g.result})):(d({loading:!1,sites:g.result,error:null}),v(_F(_F({},y),{},{currentPage:g.pagination.current_page,totalPages:g.pagination.total_pages,totalItems:g.pagination.total,from:g.pagination.from,to:g.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),d(_F(_F({},p),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){DF(a,r,o,i,u,"next",e)}function u(e){DF(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p.loading||O(1,y.pageSize)}),[b]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,AF({},e,{paginationProps:y,setPaginationProps:v,sitesListState:p,searchValue:b,onSearch:g,getSites:O,handleSuccessUpdateSites:function(e){d(_F(_F({},p),{},{sites:e}))}})))};function FF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return NF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NF(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}BF.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},BF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var RF=function(e){var t=e.trackId,n=e.children,r=FF(zn(),1)[0],o=FF(Object(i.useState)(!1),2),a=o[0],s=o[1];Object(i.useEffect)((function(){if(t){if(!window.document.getElementById("google-analytics-sdk")){var e=window.document.createElement("script");return e.id="google-analytics-sdk",e.async=!0,e.defer=!0,e.src="https://www.google-analytics.com/analytics.js",e.onload=function(){s(!0),window.ga("create",t),window.ga("require","ec"),window.ga("set","page",window.location.pathname),window.ga("send","pageview")},window.document.body.appendChild(e),function(){e.onload=null}}"undefined"!=typeof ga&&s(!0)}}),[t]);var c=function(e){window.ga("set","page",null==e?void 0:e.page),window.ga("send","pageview")},l=function(e){window.ga("ec:addProduct",{id:e.id,name:e.name,category:e.category_id,price:e.price}),window.ga("ec:setAction","click"),window.ga("send","event","UI","click","add to cart")},f=function(e){window.ga("ec:addProduct",{id:e.id,name:e.name,category:e.category_id,price:e.price,quantity:e.quantity}),window.ga("ec:setAction","add"),window.ga("send","event","UI","click","add to cart")},p=function(e){window.ga("set","userId",e.id)},d=function(e){var t;window.ga("ec:setAction","purchase",{id:null==e?void 0:e.id,affiliation:null===(t=e.business)||void 0===t?void 0:t.name,revenue:e.total,tax:e.tax_total,shipping:e.delivery_zone_price})};return Object(i.useEffect)((function(){return console.log("Analytic Ready"),a&&window.ga&&(r.on("change_view",c),r.on("userLogin",p),r.on("product_clicked",l),r.on("product_added",f),r.on("order_placed",d)),function(){a&&window.ga&&(r.off("change_view",c),r.off("userLogin",p),r.off("product_clicked",l),r.off("product_added",f),r.off("order_placed",d))}}),[a]),u.a.createElement(u.a.Fragment,null,n)};function MF(){return MF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MF.apply(this,arguments)}function zF(e){return function(e){if(Array.isArray(e))return WF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||HF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GF(Object(n),!0).forEach((function(t){qF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $F(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function JF(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$F(a,r,o,i,u,"next",e)}function u(e){$F(a,r,o,i,u,"throw",e)}i(void 0)}))}}function VF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||HF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HF(e,t){if(e){if("string"==typeof e)return WF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WF(e,t):void 0}}function WF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}RF.propTypes={trackId:c.a.string.isRequired},RF.defaultProps={};var KF=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.propsToFetch,s=e.isSearchByUserId,c=e.isSearchByUserEmail,l=e.isSearchByUserPhone,f=e.isSearchByUserName,p=e.isBusinessOwners,d=e.defaultUserTypesSelected,h=e.disabledActiveStateCondition,y=e.isDriver,v=e.isProfessional,m=VF(rn(),1)[0],b=VF(hn(),1)[0],g=VF(Br(),2)[1].showToast,O=VF(Bn(),2)[1],w=VF(Object(i.useState)({users:[],loading:!1,error:null}),2),j=w[0],S=w[1],E=VF(Object(i.useState)({clear:!1,changes:{}}),2),P=E[0],C=E[1],I=VF(Object(i.useState)(null),2),x=I[0],A=I[1],T=VF(Object(i.useState)(!1),2),_=T[0],k=T[1],D=VF(Object(i.useState)(d),2),U=D[0],L=D[1],B=VF(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),F=B[0],N=B[1],R=VF(Object(i.useState)({}),2),M=R[0],z=R[1],G=VF(Object(i.useState)(!0),2),Y=G[0],q=G[1],$=VF(Object(i.useState)({loading:!1,error:null}),2),J=$[0],V=$[1],H=VF(Object(i.useState)([]),2),W=H[0],K=H[1],X=VF(Object(i.useState)({loading:!1,error:null}),2),Z=X[0],Q=X[1],ee=VF(Object(i.useState)({occupations:[],loading:!1,error:null}),2),te=ee[0],ne=ee[1],re=VF(Object(i.useState)(null),2),oe=re[0],ae=re[1],ie=function(){var e=JF(a.a.mark((function e(t,n){var r,i,u,d,y,v,g,O,w,E,C,I,A,T,k,D,L;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(YF(YF({},j),{},{loading:!0})),r={},i={page:t,page_size:n||F.pageSize},p||(r=YF({},i)),u=null,d=[],h||d.push({attribute:"enabled",value:Y}),_&&((y=[]).push({attribute:"email_verified",value:!0}),y.push({attribute:"phone_verified",value:!0}),d.push({conector:"OR",conditions:y})),U.length>0&&d.push({attribute:"level",value:U}),oe&&d.push({attribute:"occupation_id",value:oe}),x&&(v=[],s&&v.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}),c&&v.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}),l&&v.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}),f&&(v.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}),v.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}})),d.push({conector:"OR",conditions:v})),Object.keys(P.changes).length&&(w=[],null!=P&&null!==(g=P.changes)&&void 0!==g&&g.name&&null!==(null==P||null===(O=P.changes)||void 0===O?void 0:O.name)&&w.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(null==P||null===(E=P.changes)||void 0===E?void 0:E.name,"%"))}}),P.changes.lastname&&null!==P.changes.lastname&&w.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(P.changes.lastname,"%"))}}),P.changes.email&&null!==P.changes.email&&w.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(P.changes.email,"%"))}}),void 0!==P.changes.email_verified&&w.push({attribute:"email_verified",value:P.changes.email_verified}),P.changes.phone&&null!==P.changes.phone&&w.push({attribute:"phone",value:{condition:"ilike",value:encodeURI("%".concat(P.changes.phone,"%"))}}),void 0!==P.changes.phone_verified&&w.push({attribute:"phone_verified",value:P.changes.phone_verified}),P.changes.id&&parseInt(P.changes.id)>0&&w.push({attribute:"id",value:parseInt(P.changes.id)}),w.length&&d.push({conector:"AND",conditions:w})),d.length&&(u={conditions:d,conector:"AND"}),C=u?m.setAccessToken(b.token).users().select(o).parameters(r).where(u):m.setAccessToken(b.token).users().select(o).parameters(r),e.next=17,C.get();case 17:I=e.sent,A=I.content,T=A.result,k=A.pagination,j.users=T,S(YF(YF({},j),{},{loading:!1})),D=0,k.current_page!==k.total_pages&&(L=k.total-j.users.length,D=L<k.page_size?L:k.page_size),N(YF(YF({},F),{},{currentPage:k.current_page,pageSize:0===k.page_size?F.pageSize:k.page_size,totalPages:k.total_pages,totalItems:k.total,from:k.from,to:k.to,nextPageItems:D})),z(YF({},k)),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&S(YF(YF({},j),{},{loading:!1,error:[e.t0.message]}));case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=JF(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ne(YF(YF({},te),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==b?void 0:b.token)}},e.next=5,fetch("".concat(m.root,"/occupations"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?ne(YF(YF({},te),{},{loading:!1,error:r.result})):ne({loading:!1,occupations:r.result,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),ne(YF(YF({},te),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=JF(a.a.mark((function e(t){var n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Dr.Info,O("LOADING","Loading")),V(YF(YF({},J),{},{loading:!0})),{}.updateOrder=n={},e.next=8,m.setAccessToken(b.token).users(t.id).save({level:t.level},{cancelToken:n});case 8:r=e.sent,o=r.content,i=o.error,u=o.result,V(YF(YF({},J),{},{loading:!1,error:i?u:null})),i||(s=[],s=U.includes(t.level)?j.users.filter((function(e){return e.id===t.id&&(e.level=t.level),!0})):j.users.filter((function(e){return e.id!==u.id})),S(YF(YF({},j),{},{users:s})),g(Dr.Success,O("UPDATED","Updated"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),V(YF(YF({},J),{},{loading:!1,error:[e.t0.message]}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=JF(a.a.mark((function e(t){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Dr.Info,O("LOADING","Loading")),V(YF(YF({},J),{},{loading:!0})),e.next=5,m.setAccessToken(b.token).users(t.id).save({enabled:t.enabled});case 5:n=e.sent,r=n.content,o=r.error,i=r.result,V(YF(YF({},J),{},{loading:!1,error:o?i:null})),o||(y?fe(i):h||(u=j.users.filter((function(e){var n=!0;return e.id===t.id&&t.enabled===!Y&&(n=!1),n})),S(YF(YF({},j),{},{users:u}))),g(Dr.Success,O("UPDATED","Updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),V(YF(YF({},J),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=JF(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,V(YF(YF({},J),{},{loading:!0})),e.next=4,m.setAccessToken(b.token).users(t).delete();case 4:n=e.sent,(r=n.content).error||(o=j.users.filter((function(e){return e.id!==t})),S(YF(YF({},j),{},{users:o})),Z.loading&&((i=zF(W)).shift(),0===i.length&&Q(YF(YF({},Z),{},{loading:!1})),K(i)),z(YF(YF({},M),{},{total:(null==M?void 0:M.total)-1}))),V(YF(YF({},J),{},{loading:!1,error:r.error?r.result:null})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),V(YF(YF({},J),{},{loading:!1,error:[e.t0.message]})),Z.loading&&Q(YF(YF({},Z),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){var t=j.users.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));S(YF(YF({},j),{},{users:t}))};return Object(i.useEffect)((function(){Z.loading&&0!==W.length&&le(W[0])}),[W,Z]),Object(i.useEffect)((function(){j.loading||ie(1,null)}),[U,Y,x,_,oe]),Object(i.useEffect)((function(){(Object.keys(null==P?void 0:P.changes).length>0||P.clear)&&!j.loading&&ie(1,null)}),[P]),Object(i.useEffect)((function(){v&&ue()}),[v]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,MF({},e,{actionStatus:J,usersList:j,filterValues:P,setFilterValues:C,userTypesSelected:U,handleSelectedUserTypes:function(e){L(e)},paginationProps:F,getUsers:ie,searchValue:x,onSearch:A,paginationDetail:M,selectedUserActiveState:Y,isVerified:_,setIsVerified:k,handleChangeUserActiveState:function(){q(!Y)},handleChangeUserType:se,handleChangeActiveUser:ce,handleDeleteUser:le,selectedUsers:W,handleSelectedUsers:function(e){var t;t=W.includes(e)?W.filter((function(t){return t!==e})):[].concat(zF(W),[e]),K(t)},deleteUsersActionState:Z,handleDeleteSeveralUsers:function(){Q(YF(YF({},Z),{},{loading:!0}))},handleSuccessUpdate:fe,handleSuccessAddUser:function(e){U.includes(null==e?void 0:e.level)&&(S(YF(YF({},j),{},{users:[].concat(zF(j.users),[e])})),z(YF(YF({},M),{},{total:null!=M&&M.total?(null==M?void 0:M.total)+1:1})))},handleSuccessDeleteUser:function(e){U.includes(null==e?void 0:e.level)&&(S(YF(YF({},j),{},{users:j.users.filter((function(t){return t.id!==e.id}))})),z(YF(YF({},M),{},{total:(null==M?void 0:M.total)-1})))},handleSuccessAddressesUpdate:function(e,t){var n=j.users.filter((function(n){return n.id===e&&(n.addresses=zF(t)),!0}));S(YF(YF({},j),{},{users:n}))},occupationsState:te,selectedOccupation:oe,handleSelectOccupation:ae})))};function XF(){return XF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XF.apply(this,arguments)}function ZF(e){return function(e){if(Array.isArray(e))return iN(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||aN(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QF(Object(n),!0).forEach((function(t){tN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nN(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function rN(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){nN(a,r,o,i,u,"next",e)}function u(e){nN(a,r,o,i,u,"throw",e)}i(void 0)}))}}function oN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||aN(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aN(e,t){if(e){if("string"==typeof e)return iN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iN(e,t):void 0}}function iN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}KF.propTypes={UIComponent:c.a.elementType,isSearchByUserId:c.a.bool,isSearchByUserEmail:c.a.bool,isSearchByUserPhone:c.a.bool,propsToFetch:c.a.arrayOf(s.string)},KF.defaultProps={propsToFetch:["name","lastname","email","phone","photo","cellphone","schedule","country_phone_code","city_id","city","address","addresses","max_days_in_future","address_notes","driver_zone_restriction","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname","birthdate","drivergroups"],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},defaultUserTypesSelected:[0,1,2,3]};var uN=function(e){var t=e.userId,n=e.UIComponent,r=oN(rn(),1)[0],o=oN(hn(),1)[0],s=oN(Object(i.useState)({metaFields:[],loading:!0,error:null}),2),c=s[0],l=s[1],f=oN(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],h=function(){var e=rN(a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(eN(eN({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/users/").concat(t,"/metafields"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,l(eN(eN({},c),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(eN(eN({},c),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=rN(a.a.mark((function e(n){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(eN(eN({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/users/").concat(t,"/metafields/").concat(n),i);case 5:e.sent.ok&&(u=c.metaFields.filter((function(e){return e.id!==n})),l(eN(eN({},c),{},{metaFields:u})),d({loading:!1,result:{error:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=rN(a.a.mark((function e(n){var i,u,s,f,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(eN(eN({},p),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)},body:JSON.stringify(n)},e.next=5,fetch("".concat(r.root,"/users/").concat(t,"/metafields"),i);case 5:return u=e.sent,e.next=8,u.json();case 8:s=e.sent,f=s.error,h=s.result,f?d({loading:!1,result:{error:!0,result:h}}):([],y=[].concat(ZF(c.metaFields),[h]),l(eN(eN({},c),{},{metaFields:y})),d({loading:!1,result:{error:!1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h()}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,XF({},e,{metaFieldsList:c,actionState:p,handleDeleteMetaField:y,handeAddMetaField:v})))};function sN(){return sN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sN.apply(this,arguments)}function cN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}uN.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},uN.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fN=function(e){var t=e.userTypes,n=e.onChangeUserType,r=e.defaultUserTypes,o=e.UIComponent,a=cN(Object(i.useState)(r),2),s=a[0],c=a[1];return u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,sN({},e,{userTypes:t,currentTypesSelected:s,handleChangeUserType:function(e){c(e),n(e)}})))};function pN(){return pN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pN.apply(this,arguments)}function dN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dN(Object(n),!0).forEach((function(t){yN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vN(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mN(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){vN(a,r,o,i,u,"next",e)}function u(e){vN(a,r,o,i,u,"throw",e)}i(void 0)}))}}function bN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fN.propTypes={UIComponent:c.a.elementType,userTypes:c.a.arrayOf(c.a.object),defaultUserTypes:c.a.arrayOf(c.a.number),onChangeUserType:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fN.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ON=function(e){var t=e.userId,n=e.propsToFetch,r=e.UIComponent,o=e.handleSuccessUpdate,s=e.handleSuccessDeleteUser,c=bN(rn(),1)[0],l=bN(hn(),1)[0],f=bN(Br(),2)[1].showToast,p=bN(Bn(),2)[1],d=l.token,h=bN(Object(i.useState)({loading:!1,error:!1,change:[]}),2),y=h[0],v=h[1],m=bN(Object(i.useState)({user:null,loading:!1,error:null}),2),b=m[0],g=m[1],O=bN(Object(i.useState)({loading:!1,error:null}),2),w=O[0],j=O[1],S=function(){var e=mN(a.a.mark((function e(){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(hN(hN({},b),{},{loading:!0})),r=c.setAccessToken(l.token).users(t).select(n),e.next=5,r.get();case 5:o=e.sent,i=o.content.result,u=Array.isArray(i)?null:i,g(hN(hN({},b),{},{loading:!1,user:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),g(hN(hN({},b),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var n=mN(a.a.mark((function n(){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(Dr.Info,p("LOADING","Loading")),j({loading:!0,error:null}),n.next=5,c.setAccessToken(l.token).users(t).delete();case 5:r=n.sent,o=r.content,j({loading:!1,error:o.error?o.result:null}),o.error||(f(Dr.Success,p("USER_DELETED","User deleted")),s&&s(b.user),e.onClose&&e.onClose()),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),j({loading:!1,error:[n.t0.message]});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(){return n.apply(this,arguments)}}(),P=function(){var e=mN(a.a.mark((function e(){var t,n,r,o,i,u,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((null==y||null===(t=y.change)||void 0===t?void 0:t.length)>0&&null!=b&&null!==(n=b.user)&&void 0!==n&&n.id)){e.next=14;break}return f(Dr.Info,p("LOADING","Loading")),v(hN(hN({},y),{},{loading:!0})),o={schedule:JSON.stringify(null==y?void 0:y.change)},e.next=7,c.users(null==b||null===(r=b.user)||void 0===r?void 0:r.id).save(o,{accessToken:d});case 7:i=e.sent,u=i.content,s=u.error,l=u.result,s?(v(hN(hN({},y),{},{change:[],loading:!1,error:!0})),g(hN(hN({},b),{},{error:!0})),f(Dr.Error,p("SCHEDULE_UPDATED_FAILED","Schedule Update Failed"))):(v(hN(hN({},y),{},{change:[],loading:!1,error:!1})),g(hN(hN({},b),{},{error:!1,user:Object.assign(b.user,l)})),f(Dr.Success,p("SCHEDULE_UPDATED","Schedule Updated"))),e.next=15;break;case 14:f(Dr.Info,p("NOT_CHANGED","Not Changed"));case 15:e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),v(hN(hN({},y),{},{change:[],loading:!1,error:!0})),g(hN(hN({},b),{},{loading:!1,error:null===e.t0||void 0===e.t0?void 0:e.t0.message})),f(Dr.Error,null===e.t0||void 0===e.t0?void 0:e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=mN(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),j({loading:!0,error:null}),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},e.next=6,fetch("".concat(c.root,"/users/").concat(null===(t=b.user)||void 0===t?void 0:t.id,"/google/calendar/sync"),n);case 6:return r=e.sent,e.next=9,r.json();case 9:(o=e.sent).error?j({loading:!1,error:o.result}):f(Dr.Success,p("YOUR_CALENDAR_WILL_BE_SYNCHRONIZED","Your calendar will be synchronized")),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),j({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){e.user?g(hN(hN({},b),{},{user:e.user})):S()}),[t]);return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,pN({},e,{userState:b,actionStatus:w,handleDeleteUser:E,handleSuccessUserUpdate:function(e){g(hN(hN({},b),{},{user:Object.assign(b.user,e)})),o&&o(e)},handleGoogleCalendarSync:C,scheduleState:y,handleScheduleState:function(e){(null==e?void 0:e.length)>0&&v(hN(hN({},y),{},{change:e}))},handleScheduleUpdateUser:P})))};function wN(){return wN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wN.apply(this,arguments)}function jN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jN(Object(n),!0).forEach((function(t){EN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PN(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function CN(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){PN(a,r,o,i,u,"next",e)}function u(e){PN(a,r,o,i,u,"throw",e)}i(void 0)}))}}function IN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ON.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),userId:c.a.oneOfType([c.a.number,c.a.string]),user:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ON.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","driver_zone_restriction","dropdown_option_id","dropdown_option","location","loyalty_level","zipcode","level","enabled","middle_name","second_lastname","phone_verified","email_verified","schedule","timezone","max_days_in_future","occupation_id","occupation","session"]};var AN=function(e){var t,n,r=e.UIComponent,o=e.userId,s=e.walletType,c=IN(rn(),1)[0],l=IN(hn(),1)[0].token,f=IN(Br(),2)[1].showToast,p=IN(Bn(),2)[1],d=IN(Object(i.useState)({loading:!1,wallet:{},error:null}),2),h=d[0],y=d[1],v=IN(Object(i.useState)({loading:!1,events:[],error:null}),2),m=v[0],b=v[1],g=IN(Object(i.useState)({loading:!1,users:[],error:null}),2),O=g[0],w=g[1],j=IN(Object(i.useState)({}),2),S=j[0],E=j[1],P=IN(Object(i.useState)({}),2),C=P[0],I=P[1],x=IN(Object(i.useState)({loading:!1,error:null}),2),A=x[0],T=x[1],_=function(){var e=CN(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(SN(SN({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/users/").concat(o,"/wallets"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?y(SN(SN({},h),{},{loading:!1,error:r.result})):y({loading:!1,wallet:r.result.find((function(e){return e.type===s}))||{},error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),y(SN(SN({},h),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=CN(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(SN(SN({},m),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/users/").concat(o,"/wallets/").concat(t,"/events?orderBy=-id"),n);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?b(SN(SN({},m),{},{loading:!1,error:i.result})):b({loading:!1,events:i.result,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),b(SN(SN({},m),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=CN(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(SN({loading:!0},O)),e.next=4,c.setAccessToken(l).users().select(["name","lastname"]).get();case 4:t=e.sent,n=t.content,r=n.result,o=n.error,w(o?SN(SN({},O),{},{loading:!1,error:r}):{loading:!1,users:r,error:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),w(SN(SN({},O),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=CN(a.a.mark((function e(){var t,n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T({loading:!0,error:null}),f(Dr.Info,p("LOADING","Loading")),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(S)},e.next=6,fetch("".concat(c.root,"/users/").concat(o,"/wallets/").concat(null===(t=h.wallet)||void 0===t?void 0:t.id,"/events"),n);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?T({loading:!1,error:i.result}):(y(SN(SN({},h),{},{wallet:SN(SN({},h.wallet),{},{balance:(null===(u=h.wallet)||void 0===u?void 0:u.balance)+i.result.amount})})),E({}),T({loading:!1,error:null}),f(Dr.Success,p("WALLET_MONEY_ADDED","Wallet money added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),T({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=CN(a.a.mark((function e(){var t,n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T({loading:!0,error:null}),f(Dr.Info,p("LOADING","Loading")),(n=SN({},C)).amount="-"+C.amount,r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=8,fetch("".concat(c.root,"/users/").concat(o,"/wallets/").concat(null===(t=h.wallet)||void 0===t?void 0:t.id,"/events"),r);case 8:return i=e.sent,e.next=11,i.json();case 11:(u=e.sent).error?T({loading:!1,error:u.result}):(y(SN(SN({},h),{},{wallet:SN(SN({},h.wallet),{},{balance:(null===(s=h.wallet)||void 0===s?void 0:s.balance)+u.result.amount})})),T({loading:!1,error:null}),I({}),f(Dr.Success,p("WALLET_MONEY_REDUCED","Wallet money reduced"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),T({loading:!1,error:[e.t0.message]});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;null!==(e=h.wallet)&&void 0!==e&&e.id&&k(h.wallet.id)}),[null===(t=h.wallet)||void 0===t?void 0:t.id,null===(n=h.wallet)||void 0===n?void 0:n.balance]),Object(i.useEffect)((function(){_()}),[o]),Object(i.useEffect)((function(){D()}),[]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,wN({},e,{walletState:h,walletEventsState:m,addWalletState:S,reduceWalletState:C,actionState:A,handleChangeInput:function(e,t){t?E(SN(SN({},S),{},EN({},e.target.name,e.target.value))):I(SN(SN({},C),{},EN({},e.target.name,e.target.value)))},handleAddWalletMoney:U,handleReduceWalletMoney:L,parseEvent:function(e){var t="",n="",r=O.users.find((function(t){return t.id===e.author_id}));if(n=r?"".concat(null==r?void 0:r.name," ").concat(null==r?void 0:r.lastname):"".concat(e.author_id),"manual"===e.event_type)switch(e.event){case"movement":t=-1===Math.sign(e.amount)?p("TRANSACTION_REDUCE_MONEY","<strong>_user_</strong> reduce money").replace("_user_","".concat(n)):p("TRANSACTION_ADD_MONEY","<strong>_user_</strong> add money").replace("_user_","".concat(n));break;case"locked":t=p("TRANSACTION_LOCKED","<strong>_user_</strong> locked").replace("_user_","".concat(n));break;case"unlocked":t=p("TRANSACTION_UNLOCKED","<strong>_user_</strong> unlocked").replace("_user_","".concat(n));break;default:t=e.event}return"refund"===e.event_type&&(t=p("REFUND_MONEY","Refund money")),"payment"===e.event_type&&(t=p("PAID_MONEY","Paid money")),t}})))};function TN(){return TN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TN.apply(this,arguments)}function _N(e){return function(e){if(Array.isArray(e))return RN(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||NN(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kN(Object(n),!0).forEach((function(t){UN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function UN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LN(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function BN(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){LN(a,r,o,i,u,"next",e)}function u(e){LN(a,r,o,i,u,"throw",e)}i(void 0)}))}}function FN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||NN(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NN(e,t){if(e){if("string"==typeof e)return RN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RN(e,t):void 0}}function RN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}AN.propTypes={UIComponent:c.a.elementType,userId:c.a.oneOfType([c.a.number,c.a.string]),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},AN.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var MN=function(e){var t=e.UIComponent,n=FN(rn(),1)[0],r=FN(hn(),1)[0].token,o=FN(Br(),2)[1].showToast,s=FN(Bn(),2)[1],c=FN(Object(i.useState)({webhooks:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=FN(Object(i.useState)(!1),2),d=p[0],h=p[1],y=FN(Object(i.useState)({loading:!1,error:null}),2),v=y[0],m=y[1],b=FN(Object(i.useState)({delay:"0"}),2),g=b[0],O=b[1],w=function(){var e=BN(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(DN(DN({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/webhooks"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||f(DN(DN({},l),{},{webhooks:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(DN(DN({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=BN(a.a.mark((function e(){var t,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),m(DN(DN({},v),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(g)},e.next=6,fetch("".concat(n.root,"/webhooks"),t);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?m({loading:!1,error:u.result}):(m(DN(DN({},v),{},{loading:!1})),c=[].concat(_N(l.webhooks),[u.result]),f(DN(DN({},l),{},{webhooks:c})),o(Dr.Success,s("WEBHOOK_ADDED","Webhook added")),h(!1),O({delay:"0"})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=BN(a.a.mark((function e(t){var i,u,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),m(DN(DN({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=6,fetch("".concat(n.root,"/webhooks/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(c=e.sent).error?m({loading:!1,error:c.result}):(m(DN(DN({},v),{},{loading:!1})),p=l.webhooks.filter((function(e){return e.id!==t})),f(DN(DN({},l),{},{webhooks:p})),o(Dr.Success,s("WEBHOOK_REMOVED","Webhook removed")),h(!1),O({delay:"0"})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,TN({},e,{webhookListState:l,isAddMode:d,setIsAddMode:h,handleAddNewWebhook:j,changesState:g,actionState:v,handleChangeAddState:function(e,t){O(DN(DN({},g),{},UN({},e,t)))},handleDeleteWebhook:S})))};MN.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},MN.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]}}])}));