/*! For license information please see ordering-component-admin.df89ed9d24b96fbd21dd.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("OrderingComponentsAdmin",["React","ReactDOM"],e):"object"==typeof exports?exports.OrderingComponentsAdmin=e(require("react"),require("react-dom")):t.OrderingComponentsAdmin=e(t.React,t.ReactDOM)}(window,(function(t,e){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/_bundles/",r(r.s=67)}([function(t,e,r){t.exports=r(37)()},function(e,r){e.exports=t},function(t,e,r){t.exports=function(){"use strict";var t=1e3,e=6e4,r=36e5,n="millisecond",o="second",i="minute",a="hour",c="day",u="week",s="month",l="quarter",f="year",p="date",h="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},g={s:m,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),o=r%60;return(e<=0?"+":"-")+m(n,2,"0")+":"+m(o,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),o=e.clone().add(n,s),i=r-o<0,a=e.clone().add(n+(i?-1:1),s);return+(-(n+(r-o)/(i?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:s,y:f,w:u,d:c,D:p,h:a,m:i,s:o,ms:n,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},b="en",w={};w[b]=v;var O=function(t){return t instanceof S},x=function t(e,r,n){var o;if(!e)return b;if("string"==typeof e){var i=e.toLowerCase();w[i]&&(o=i),r&&(w[i]=r,o=i);var a=e.split("-");if(!o&&a.length>1)return t(a[0])}else{var c=e.name;w[c]=e,o=c}return!n&&o&&(b=o),o||!n&&b},E=function(t,e){if(O(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new S(r)},j=g;j.l=x,j.i=O,j.w=function(t,e){return E(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function v(t){this.$L=x(t.locale,null,!0),this.parse(t)}var m=v.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(j.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(d);if(n){var o=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return j},m.isValid=function(){return!(this.$d.toString()===h)},m.isSame=function(t,e){var r=E(t);return this.startOf(e)<=r&&r<=this.endOf(e)},m.isAfter=function(t,e){return E(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<E(t)},m.$g=function(t,e,r){return j.u(t)?this[e]:this.set(r,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var r=this,n=!!j.u(e)||e,l=j.p(t),h=function(t,e){var o=j.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return n?o:o.endOf(c)},d=function(t,e){return j.w(r.toDate()[t].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},y=this.$W,v=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(l){case f:return n?h(1,0):h(31,11);case s:return n?h(1,v):h(0,v+1);case u:var b=this.$locale().weekStart||0,w=(y<b?y+7:y)-b;return h(n?m-w:m+(6-w),v);case c:case p:return d(g+"Hours",0);case a:return d(g+"Minutes",1);case i:return d(g+"Seconds",2);case o:return d(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var r,u=j.p(t),l="set"+(this.$u?"UTC":""),h=(r={},r[c]=l+"Date",r[p]=l+"Date",r[s]=l+"Month",r[f]=l+"FullYear",r[a]=l+"Hours",r[i]=l+"Minutes",r[o]=l+"Seconds",r[n]=l+"Milliseconds",r)[u],d=u===c?this.$D+(e-this.$W):e;if(u===s||u===f){var y=this.clone().set(p,1);y.$d[h](d),y.init(),this.$d=y.set(p,Math.min(this.$D,y.daysInMonth())).$d}else h&&this.$d[h](d);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[j.p(t)]()},m.add=function(n,l){var p,h=this;n=Number(n);var d=j.p(l),y=function(t){var e=E(h);return j.w(e.date(e.date()+Math.round(t*n)),h)};if(d===s)return this.set(s,this.$M+n);if(d===f)return this.set(f,this.$y+n);if(d===c)return y(1);if(d===u)return y(7);var v=(p={},p[i]=e,p[a]=r,p[o]=t,p)[d]||1,m=this.$d.getTime()+n*v;return j.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=t||"YYYY-MM-DDTHH:mm:ssZ",o=j.z(this),i=this.$H,a=this.$m,c=this.$M,u=r.weekdays,s=r.months,l=function(t,r,o,i){return t&&(t[r]||t(e,n))||o[r].slice(0,i)},f=function(t){return j.s(i%12||12,t,"0")},p=r.meridiem||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n},d={YY:String(this.$y).slice(-2),YYYY:this.$y,M:c+1,MM:j.s(c+1,2,"0"),MMM:l(r.monthsShort,c,s,3),MMMM:l(s,c),D:this.$D,DD:j.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,u,2),ddd:l(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(i),HH:j.s(i,2,"0"),h:f(1),hh:f(2),a:p(i,a,!0),A:p(i,a,!1),m:String(a),mm:j.s(a,2,"0"),s:String(this.$s),ss:j.s(this.$s,2,"0"),SSS:j.s(this.$ms,3,"0"),Z:o};return n.replace(y,(function(t,e){return e||d[t]||o.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,p,h){var d,y=j.p(p),v=E(n),m=(v.utcOffset()-this.utcOffset())*e,g=this-v,b=j.m(this,v);return b=(d={},d[f]=b/12,d[s]=b,d[l]=b/3,d[u]=(g-m)/6048e5,d[c]=(g-m)/864e5,d[a]=g/r,d[i]=g/e,d[o]=g/t,d)[y]||g,h?b:j.a(b)},m.daysInMonth=function(){return this.endOf(s).$D},m.$locale=function(){return w[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=x(t,e,!0);return n&&(r.$L=n),r},m.clone=function(){return j.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),L=S.prototype;return E.prototype=L,[["$ms",n],["$s",o],["$m",i],["$H",a],["$W",c],["$M",s],["$y",f],["$D",p]].forEach((function(t){L[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),E.extend=function(t,e){return t.$i||(t(e,S,E),t.$i=!0),E},E.locale=x,E.isDayjs=O,E.unix=function(t){return E(1e3*t)},E.en=w[b],E.Ls=w,E.p={},E}()},function(t,e,r){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,o,i){var a=o.prototype;i.utc=function(t){return new o({date:t,utc:!0,args:arguments})},a.utc=function(e){var r=i(this.toDate(),{locale:this.$L,utc:!0});return e?r.add(this.utcOffset(),t):r},a.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var c=a.parse;a.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),c.call(this,t)};var u=a.init;a.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else u.call(this)};var s=a.utcOffset;a.utcOffset=function(n,o){var i=this.$utils().u;if(i(n))return this.$u?0:i(this.$offset)?s.call(this):this.$offset;if("string"==typeof n&&(n=function(t){void 0===t&&(t="");var n=t.match(e);if(!n)return null;var o=(""+n[0]).match(r)||["-",0,0],i=o[0],a=60*+o[1]+ +o[2];return 0===a?0:"+"===i?a:-a}(n),null===n))return this;var a=Math.abs(n)<=16?60*n:n,c=this;if(o)return c.$offset=a,c.$u=0===n,c;if(0!==n){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(c=this.local().add(a+u,t)).$offset=a,c.$x.$localOffset=u}else c=this.utc();return c};var l=a.format;a.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,e)},a.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var f=a.toDate;a.toDate=function(t){return"s"===t&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var p=a.diff;a.diff=function(t,e,r){if(t&&this.$u===t.$u)return p.call(this,t,e,r);var n=this.local(),o=i(t).local();return p.call(n,o,e,r)}}}()},function(t,e,r){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<n.length;o++)if((r=n[o])===e||r.fn===e){n.splice(o,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){n=0;for(var o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,r){var n,o=r(52),i=r(26),a=r(54),c=r(55),u=r(56);"undefined"!=typeof ArrayBuffer&&(n=r(57));var s="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=s||l;e.protocol=3;var p=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=o(p),d={type:"error",data:"parser error"},y=r(58);function v(t,e,r){for(var n=new Array(t.length),o=c(t.length,r),i=function(t,r,o){e(r,(function(e,r){n[t]=r,o(e,n)}))},a=0;a<t.length;a++)i(a,t[a],o)}e.encodePacket=function(t,r,n,o){"function"==typeof r&&(o=r,r=!1),"function"==typeof n&&(o=n,n=null);var i=void 0===t.data?void 0:t.data.buffer||t.data;if("undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer)return function(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=t.data,i=new Uint8Array(o),a=new Uint8Array(1+o.byteLength);a[0]=p[t.type];for(var c=0;c<i.length;c++)a[c+1]=i[c];return n(a.buffer)}(t,r,o);if(void 0!==y&&i instanceof y)return function(t,r,n){if(!r)return e.encodeBase64Packet(t,n);if(f)return function(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=new FileReader;return o.onload=function(){e.encodePacket({type:t.type,data:o.result},r,!0,n)},o.readAsArrayBuffer(t.data)}(t,r,n);var o=new Uint8Array(1);o[0]=p[t.type];var i=new y([o.buffer,t.data]);return n(i)}(t,r,o);if(i&&i.base64)return function(t,r){var n="b"+e.packets[t.type]+t.data.data;return r(n)}(t,o);var a=p[t.type];return void 0!==t.data&&(a+=n?u.encode(String(t.data),{strict:!1}):String(t.data)),o(""+a)},e.encodeBase64Packet=function(t,r){var n,o="b"+e.packets[t.type];if(void 0!==y&&t.data instanceof y){var i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];r(o+t)},i.readAsDataURL(t.data)}try{n=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var a=new Uint8Array(t.data),c=new Array(a.length),u=0;u<a.length;u++)c[u]=a[u];n=String.fromCharCode.apply(null,c)}return o+=btoa(n),r(o)},e.decodePacket=function(t,r,n){if(void 0===t)return d;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),r);if(n&&!1===(t=function(t){try{t=u.decode(t,{strict:!1})}catch(t){return!1}return t}(t)))return d;var o=t.charAt(0);return Number(o)==o&&h[o]?t.length>1?{type:h[o],data:t.substring(1)}:{type:h[o]}:d}o=new Uint8Array(t)[0];var i=a(t,1);return y&&"blob"===r&&(i=new y([i])),{type:h[o],data:i}},e.decodeBase64Packet=function(t,e){var r=h[t.charAt(0)];if(!n)return{type:r,data:{base64:!0,data:t.substr(1)}};var o=n.decode(t.substr(1));return"blob"===e&&y&&(o=new y([o])),{type:r,data:o}},e.encodePayload=function(t,r,n){"function"==typeof r&&(n=r,r=null);var o=i(t);if(r&&o)return y&&!f?e.encodePayloadAsBlob(t,n):e.encodePayloadAsArrayBuffer(t,n);if(!t.length)return n("0:");v(t,(function(t,n){e.encodePacket(t,!!o&&r,!1,(function(t){n(null,function(t){return t.length+":"+t}(t))}))}),(function(t,e){return n(e.join(""))}))},e.decodePayload=function(t,r,n){if("string"!=typeof t)return e.decodePayloadAsBinary(t,r,n);var o;if("function"==typeof r&&(n=r,r=null),""===t)return n(d,0,1);for(var i,a,c="",u=0,s=t.length;u<s;u++){var l=t.charAt(u);if(":"===l){if(""===c||c!=(i=Number(c)))return n(d,0,1);if(c!=(a=t.substr(u+1,i)).length)return n(d,0,1);if(a.length){if(o=e.decodePacket(a,r,!1),d.type===o.type&&d.data===o.data)return n(d,0,1);if(!1===n(o,u+i,s))return}u+=i,c=""}else c+=l}return""!==c?n(d,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,r){if(!t.length)return r(new ArrayBuffer(0));v(t,(function(t,r){e.encodePacket(t,!0,!0,(function(t){return r(null,t)}))}),(function(t,e){var n=e.reduce((function(t,e){var r;return t+(r="string"==typeof e?e.length:e.byteLength).toString().length+r+2}),0),o=new Uint8Array(n),i=0;return e.forEach((function(t){var e="string"==typeof t,r=t;if(e){for(var n=new Uint8Array(t.length),a=0;a<t.length;a++)n[a]=t.charCodeAt(a);r=n.buffer}o[i++]=e?0:1;var c=r.byteLength.toString();for(a=0;a<c.length;a++)o[i++]=parseInt(c[a]);o[i++]=255;for(n=new Uint8Array(r),a=0;a<n.length;a++)o[i++]=n[a]})),r(o.buffer)}))},e.encodePayloadAsBlob=function(t,r){v(t,(function(t,r){e.encodePacket(t,!0,!0,(function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);t=n.buffer,e[0]=0}var i=(t instanceof ArrayBuffer?t.byteLength:t.size).toString(),a=new Uint8Array(i.length+1);for(o=0;o<i.length;o++)a[o]=parseInt(i[o]);if(a[i.length]=255,y){var c=new y([e.buffer,a.buffer,t]);r(null,c)}}))}),(function(t,e){return r(new y(e))}))},e.decodePayloadAsBinary=function(t,r,n){"function"==typeof r&&(n=r,r=null);for(var o=t,i=[];o.byteLength>0;){for(var c=new Uint8Array(o),u=0===c[0],s="",l=1;255!==c[l];l++){if(s.length>310)return n(d,0,1);s+=c[l]}o=a(o,2+s.length),s=parseInt(s);var f=a(o,0,s);if(u)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(t){var p=new Uint8Array(f);f="";for(l=0;l<p.length;l++)f+=String.fromCharCode(p[l])}i.push(f),o=a(o,s)}var h=i.length;i.forEach((function(t,o){n(e.decodePacket(t,r,!0),o,h)}))}},function(t,e,r){(function(n){function o(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG),t}(e=t.exports=r(40)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))})),t.splice(i,0,n)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=o,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(o())}).call(this,r(7))},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,s=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?s=u.concat(s):f=-1,s.length&&h())}function h(){if(!l){var t=c(p);l=!0;for(var e=s.length;e;){for(u=s,s=[];++f<e;)u&&u[f].run();f=-1,e=s.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];s.push(new d(t,e)),1!==s.length||l||c(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){e.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e},e.decode=function(t){for(var e={},r=t.split("&"),n=0,o=r.length;n<o;n++){var i=r[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t,e){t.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){(function(n){function o(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG),t}(e=t.exports=r(59)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))})),t.splice(i,0,n)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=o,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(o())}).call(this,r(7))},function(t,r){t.exports=e},function(t,e,r){!function(t,e){"use strict";function r(t,e){return t(e={exports:{}},e.exports),e.exports}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function o(){}function i(){}i.resetWarningCache=o;var a=function(){function t(t,e,r,o,i,a){if(a!==n){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function e(){return t}t.isRequired=t;var r={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r},c=r((function(t){t.exports=a()}));function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t,e){return h(t)||d(t,e)||y(t,e)||m()}function h(t){if(Array.isArray(t))return t}function d(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}}function y(t,e){if(t){if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var g=function(t){var r=e.useRef(t);return e.useEffect((function(){r.current=t}),[t]),r.current},b=function(t){return null!==t&&"object"===l(t)},w=function(t){return b(t)&&"function"==typeof t.then},O=function(t){return b(t)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment},x="[object Object]",E=function t(e,r){if(!b(e)||!b(r))return e===r;var n=Array.isArray(e);if(n!==Array.isArray(r))return!1;var o=Object.prototype.toString.call(e)===x;if(o!==(Object.prototype.toString.call(r)===x))return!1;if(!o&&!n)return e===r;var i=Object.keys(e),a=Object.keys(r);if(i.length!==a.length)return!1;for(var c={},u=0;u<i.length;u+=1)c[i[u]]=!0;for(var s=0;s<a.length;s+=1)c[a[s]]=!0;var l=Object.keys(c);if(l.length!==i.length)return!1;var f=e,p=r,h=function(e){return t(f[e],p[e])};return l.every(h)},j=function(t,e,r){return b(t)?Object.keys(t).reduce((function(n,o){var i=!b(e)||!E(t[o],e[o]);return r.includes(o)?(i&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),n):i?s(s({},n||{}),{},f({},o,t[o])):n}),null):null},S="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",L=function(t){if(null===t||O(t))return t;throw new Error(S)},_=function(t){if(w(t))return{tag:"async",stripePromise:Promise.resolve(t).then(L)};var e=L(t);return null===e?{tag:"empty"}:{tag:"sync",stripe:e}},P=e.createContext(null);P.displayName="ElementsContext";var k=function(t,e){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(e," in an <Elements> provider."));return t},T=function(t){var r=t.stripe,n=t.options,o=t.children,i=e.useMemo((function(){return _(r)}),[r]),a=p(e.useState((function(){return{stripe:"sync"===i.tag?i.stripe:null,elements:"sync"===i.tag?i.stripe.elements(n):null}})),2),c=a[0],u=a[1];e.useEffect((function(){var t=!0,e=function(t){u((function(e){return e.stripe?e:{stripe:t,elements:t.elements(n)}}))};return"async"!==i.tag||c.stripe?"sync"!==i.tag||c.stripe||e(i.stripe):i.stripePromise.then((function(r){r&&t&&e(r)})),function(){t=!1}}),[i,c,n]);var s=g(r);e.useEffect((function(){null!==s&&s!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")}),[s,r]);var l=g(n);return e.useEffect((function(){if(c.elements){var t=j(n,l,["clientSecret","fonts"]);t&&c.elements.update(t)}}),[n,l,c.elements]),e.useEffect((function(){var t=c.stripe;t&&t._registerWrapper&&t.registerAppInfo&&(t._registerWrapper({name:"react-stripe-js",version:"1.10.0"}),t.registerAppInfo({name:"react-stripe-js",version:"1.10.0",url:"https://stripe.com/docs/stripe-js/react"}))}),[c.stripe]),e.createElement(P.Provider,{value:c},o)};T.propTypes={stripe:c.any,options:c.object};var I=function(t){var r=e.useContext(P);return k(r,t)},A=function(){return I("calls useElements()").elements},C=function(){return I("calls useStripe()").stripe},N=function(t){return(0,t.children)(I("mounts <ElementsConsumer>"))};N.propTypes={children:c.func.isRequired};var D=function(t){var r=e.useRef(t);return e.useEffect((function(){r.current=t}),[t]),function(){r.current&&r.current.apply(r,arguments)}},G=function(){},F=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},U=function(t,r){var n="".concat(F(t),"Element"),o=r?function(t){I("mounts <".concat(n,">"));var r=t.id,o=t.className;return e.createElement("div",{id:r,className:o})}:function(r){var o=r.id,i=r.className,a=r.options,c=void 0===a?{}:a,u=r.onBlur,s=void 0===u?G:u,l=r.onFocus,f=void 0===l?G:l,p=r.onReady,h=void 0===p?G:p,d=r.onChange,y=void 0===d?G:d,v=r.onEscape,m=void 0===v?G:v,b=r.onClick,w=void 0===b?G:b,O=r.onLoadError,x=void 0===O?G:O,E=r.onLoaderStart,S=void 0===E?G:E,L=I("mounts <".concat(n,">")).elements,_=e.useRef(null),P=e.useRef(null),k=D(h),T=D(s),A=D(f),C=D(w),N=D(y),F=D(m),U=D(x),B=D(S);e.useLayoutEffect((function(){if(null==_.current&&L&&null!=P.current){var e=L.create(t,c);_.current=e,e.mount(P.current),e.on("ready",(function(){return k(e)})),e.on("change",N),e.on("blur",T),e.on("focus",A),e.on("escape",F),e.on("loaderror",U),e.on("loaderstart",B),e.on("click",C)}}));var R=g(c);return e.useEffect((function(){if(_.current){var t=j(c,R,["paymentRequest"]);t&&_.current.update(t)}}),[c,R]),e.useLayoutEffect((function(){return function(){_.current&&(_.current.destroy(),_.current=null)}}),[]),e.createElement("div",{id:o,className:i,ref:P})};return o.propTypes={id:c.string,className:c.string,onChange:c.func,onBlur:c.func,onFocus:c.func,onReady:c.func,onClick:c.func,onLoadError:c.func,onLoaderStart:c.func,options:c.object},o.displayName=n,o.__elementType=t,o},B="undefined"==typeof window,R=U("auBankAccount",B),M=U("card",B),Y=U("cardNumber",B),z=U("cardExpiry",B),$=U("cardCvc",B),q=U("fpxBank",B),J=U("iban",B),V=U("idealBank",B),H=U("p24Bank",B),W=U("epsBank",B),K=U("payment",B),Z=U("paymentRequestButton",B),X=U("linkAuthentication",B),Q=U("shippingAddress",B),tt=U("affirmMessage",B),et=U("afterpayClearpayMessage",B);t.AffirmMessageElement=tt,t.AfterpayClearpayMessageElement=et,t.AuBankAccountElement=R,t.CardCvcElement=$,t.CardElement=M,t.CardExpiryElement=z,t.CardNumberElement=Y,t.Elements=T,t.ElementsConsumer=N,t.EpsBankElement=W,t.FpxBankElement=q,t.IbanElement=J,t.IdealBankElement=V,t.LinkAuthenticationElement=X,t.P24BankElement=H,t.PaymentElement=K,t.PaymentRequestButtonElement=Z,t.ShippingAddressElement=Q,t.useElements=A,t.useStripe=C,Object.defineProperty(t,"__esModule",{value:!0})}(e,r(1))},function(t,e){var r=1e3,n=60*r,o=60*n,i=24*o,a=365.25*i;function c(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}t.exports=function(t,e){e=e||{};var u,s=typeof t;if("string"===s&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var c=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*o;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(t);if("number"===s&&!1===isNaN(t))return e.long?c(u=t,i,"day")||c(u,o,"hour")||c(u,n,"minute")||c(u,r,"second")||u+" ms":function(t){if(t>=i)return Math.round(t/i)+"d";if(t>=o)return Math.round(t/o)+"h";if(t>=n)return Math.round(t/n)+"m";if(t>=r)return Math.round(t/r)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,r){var n=r(41)("socket.io-parser"),o=r(4),i=r(43),a=r(21),c=r(22);function u(){}e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=u,e.Decoder=f;var s=e.ERROR+'"encode error"';function l(t){var r=""+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(r+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(r+=t.nsp+","),null!=t.id&&(r+=t.id),null!=t.data){var o=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===o)return s;r+=o}return n("encoded %j as %s",t,r),r}function f(){this.reconstructor=null}function p(t){this.reconPack=t,this.buffers=[]}function h(t){return{type:e.ERROR,data:"parser error: "+t}}u.prototype.encode=function(t,r){(n("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)?function(t,e){function r(t){var r=i.deconstructPacket(t),n=l(r.packet),o=r.buffers;o.unshift(n),e(o)}i.removeBlobs(t,r)}(t,r):r([l(t)])},o(f.prototype),f.prototype.add=function(t){var r;if("string"==typeof t)r=function(t){var r=0,o={type:Number(t.charAt(0))};if(null==e.types[o.type])return h("unknown packet type "+o.type);if(e.BINARY_EVENT===o.type||e.BINARY_ACK===o.type){for(var i=r+1;"-"!==t.charAt(++r)&&r!=t.length;);var c=t.substring(i,r);if(c!=Number(c)||"-"!==t.charAt(r))throw new Error("Illegal attachments");o.attachments=Number(c)}if("/"===t.charAt(r+1)){for(i=r+1;++r;){if(","===(s=t.charAt(r)))break;if(r===t.length)break}o.nsp=t.substring(i,r)}else o.nsp="/";var u=t.charAt(r+1);if(""!==u&&Number(u)==u){for(i=r+1;++r;){var s;if(null==(s=t.charAt(r))||Number(s)!=s){--r;break}if(r===t.length)break}o.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){var l=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(r));if(!(!1!==l&&(o.type===e.ERROR||a(l))))return h("invalid payload");o.data=l}return n("decoded %s as %j",t,o),o}(t),e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type?(this.reconstructor=new p(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!c(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(r=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",r))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,r){"use strict";(function(t){var n=r(45),o=r(46),i=r(47);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return s(this,t,e,r)}function s(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=p(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),o=(t=c(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|h(e.length);return 0===(t=c(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?c(t,0):p(t,e);if("Buffer"===e.type&&i(e.data))return p(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=c(t,e<0?0:0|h(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function p(t,e){var r=e.length<0?0:0|h(e.length);t=c(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function h(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(t).length;default:if(n)return M(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,r);case"utf8":case"utf-8":return L(this,e,r);case"ascii":return P(this,e,r);case"latin1":case"binary":return k(this,e,r);case"base64":return S(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:g(t,e,r,n,o);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):g(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function g(t,e,r,n,o){var i,a=1,c=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,c/=2,u/=2,r/=2}function s(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var l=-1;for(i=r;i<c;i++)if(s(t,i)===s(e,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(r+u>c&&(r=c-u),i=r;i>=0;i--){for(var f=!0,p=0;p<u;p++)if(s(t,i+p)!==s(e,p)){f=!1;break}if(f)return i}return-1}function b(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var c=parseInt(e.substr(2*a,2),16);if(isNaN(c))return a;t[r+a]=c}return a}function w(t,e,r,n){return z(M(e,t.length-r),t,r,n)}function O(t,e,r,n){return z(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r,n){return O(t,e,r,n)}function E(t,e,r,n){return z(Y(e),t,r,n)}function j(t,e,r,n){return z(function(t,e){for(var r,n,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function S(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function L(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,a,c,u,s=t[o],l=null,f=s>239?4:s>223?3:s>191?2:1;if(o+f<=r)switch(f){case 1:s<128&&(l=s);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&s)<<6|63&i)>127&&(l=u);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(u=(15&s)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:i=t[o+1],a=t[o+2],c=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&c)&&(u=(15&s)<<18|(63&i)<<12|(63&a)<<6|63&c)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=f}return function(t){var e=t.length;if(e<=_)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=_));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return s(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return l(e),e<=0?c(t,e):void 0!==r?"string"==typeof n?c(t,e).fill(r,n):c(t,e).fill(r):c(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?L(this,0,t):y.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,o){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),c=Math.min(i,a),s=this.slice(n,o),l=t.slice(e,r),f=0;f<c;++f)if(s[f]!==l[f]){i=s[f],a=l[f];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":return O(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function P(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function k(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function T(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=R(t[i]);return o}function I(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function A(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,r,n,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function N(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function D(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function G(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(t,e,r,n,i){return i||G(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function U(t,e,r,n,i){return i||G(t,0,r,8),o.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var o=e-t;r=new u(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},u.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||A(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||A(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||A(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||A(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||A(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);C(this,t,e,r,o-1,-o)}var i=0,a=1,c=0;for(this[e]=255&t;++i<r&&(a*=256);)t<0&&0===c&&0!==this[e+i-1]&&(c=1),this[e+i]=(t/a>>0)-c&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);C(this,t,e,r,o-1,-o)}var i=r-1,a=1,c=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===c&&0!==this[e+i+1]&&(c=1),this[e+i]=(t/a>>0)-c&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return U(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return U(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var a=u.isBuffer(t)?t:M(new u(t,n).toString()),c=a.length;for(i=0;i<r-e;++i)this[i+e]=a[i%c]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function R(t){return t<16?"0"+t.toString(16):t.toString(16)}function M(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function Y(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}}).call(this,r(44))},function(t,e,r){var n=r(50),o=r(17);t.exports=function(t){var e=t.xdomain,r=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||n))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!r&&i)return new XDomainRequest}catch(t){}if(!e)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},function(t,e){t.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(t,e,r){var n=r(5),o=r(4);function i(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=i,o(i.prototype),i.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(t){var e=n.decodePacket(t,this.socket.binaryType);this.onPacket(e)},i.prototype.onPacket=function(t){this.emit("packet",t)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return l}));var n=r(1),o=r.n(n),i=function(){return i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};var a,c=function(t,e){(function(t){var e;t?function(t){if(t)for(;t.lastChild;)t.lastChild.remove()}("string"==typeof t?document.getElementById(t):t):(e=document.querySelector(".grecaptcha-badge"))&&e.parentNode&&document.body.removeChild(e.parentNode)})(e),window.___grecaptcha_cfg=void 0;var r=document.querySelector("#"+t);r&&r.remove(),function(){var t=document.querySelector('script[src^="https://www.gstatic.com/recaptcha/releases"]');t&&t.remove()}()},u=function(e){void 0!==t&&t.env,console.warn(e)};(a||(a={})).SCRIPT_NOT_AVAILABLE="Recaptcha script is not available";var s=Object(n.createContext)({executeRecaptcha:function(){throw Error("GoogleReCaptcha Context has not yet been implemented, if you are using useGoogleReCaptcha hook, make sure the hook is called inside component wrapped by GoogleRecaptchaProvider")}});s.Consumer;function l(t){var e=t.reCaptchaKey,r=t.useEnterprise,l=void 0!==r&&r,f=t.useRecaptchaNet,p=void 0!==f&&f,h=t.scriptProps,d=t.language,y=t.container,v=t.children,m=Object(n.useState)(null),g=m[0],b=m[1],w=Object(n.useRef)(e),O=JSON.stringify(h),x=JSON.stringify(null==y?void 0:y.parameters);Object(n.useEffect)((function(){if(e){var t=(null==h?void 0:h.id)||"google-recaptcha-v3",r=(null==h?void 0:h.onLoadCallbackName)||"onRecaptchaLoadCallback";return window[r]=function(){var t=l?window.grecaptcha.enterprise:window.grecaptcha,r=i({badge:"inline",size:"invisible",sitekey:e},(null==y?void 0:y.parameters)||{});w.current=t.render(null==y?void 0:y.element,r)},function(t){var e=t.render,r=t.onLoadCallbackName,n=t.language,o=t.onLoad,i=t.useRecaptchaNet,a=t.useEnterprise,c=t.scriptProps,u=void 0===c?{}:c,s=u.nonce,l=void 0===s?"":s,f=u.defer,p=void 0!==f&&f,h=u.async,d=void 0!==h&&h,y=u.id,v=void 0===y?"":y,m=u.appendTo,g=v||"google-recaptcha-v3";if(function(t){return!!document.querySelector("#"+t)}(g))o();else{var b=function(t){return"https://www."+(t.useRecaptchaNet?"recaptcha.net":"google.com")+"/recaptcha/"+(t.useEnterprise?"enterprise.js":"api.js")}({useEnterprise:a,useRecaptchaNet:i}),w=document.createElement("script");w.id=g,w.src=b+"?render="+e+("explicit"===e?"&onload="+r:"")+(n?"&hl="+n:""),l&&(w.nonce=l),w.defer=!!p,w.async=!!d,w.onload=o,("body"===m?document.body:document.getElementsByTagName("head")[0]).appendChild(w)}}({render:(null==y?void 0:y.element)?"explicit":e,onLoadCallbackName:r,useEnterprise:l,useRecaptchaNet:p,scriptProps:h,language:d,onLoad:function(){if(window&&window.grecaptcha){var t=l?window.grecaptcha.enterprise:window.grecaptcha;t.ready((function(){b(t)}))}else u("<GoogleRecaptchaProvider /> "+a.SCRIPT_NOT_AVAILABLE)},onError:function(){u("Error loading google recaptcha script")}}),function(){c(t,null==y?void 0:y.element)}}u("<GoogleReCaptchaProvider /> recaptcha key not provided")}),[l,p,O,x,d,e,null==y?void 0:y.element]);var E=Object(n.useCallback)((function(t){if(!g||!g.execute)throw new Error("<GoogleReCaptchaProvider /> Google Recaptcha has not been loaded");return g.execute(w.current,{action:t})}),[g,w]),j=Object(n.useMemo)((function(){return{executeRecaptcha:g?E:void 0,container:null==y?void 0:y.element}}),[E,g,null==y?void 0:y.element]);return o.a.createElement(s.Provider,{value:j},v)}function f(t){var e=this,r=t.action,i=t.onVerify,a=t.refreshReCaptcha,c=Object(n.useContext)(s);Object(n.useEffect)((function(){var t=c.executeRecaptcha;t&&function(t,e,r,n){new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))}(e,void 0,void 0,(function(){var e;return function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(n){switch(n.label){case 0:return[4,t(r)];case 1:return e=n.sent(),i?(i(e),[2]):(u("Please define an onVerify function"),[2])}}))}))}),[r,i,a,c]);var l=c.container;return"string"==typeof l?o.a.createElement("div",{id:l}):null}function p(t,e){return t(e={exports:{}},e.exports),e.exports}var h="function"==typeof Symbol&&Symbol.for,d=h?Symbol.for("react.element"):60103,y=h?Symbol.for("react.portal"):60106,v=h?Symbol.for("react.fragment"):60107,m=h?Symbol.for("react.strict_mode"):60108,g=h?Symbol.for("react.profiler"):60114,b=h?Symbol.for("react.provider"):60109,w=h?Symbol.for("react.context"):60110,O=h?Symbol.for("react.async_mode"):60111,x=h?Symbol.for("react.concurrent_mode"):60111,E=h?Symbol.for("react.forward_ref"):60112,j=h?Symbol.for("react.suspense"):60113,S=h?Symbol.for("react.suspense_list"):60120,L=h?Symbol.for("react.memo"):60115,_=h?Symbol.for("react.lazy"):60116,P=h?Symbol.for("react.block"):60121,k=h?Symbol.for("react.fundamental"):60117,T=h?Symbol.for("react.responder"):60118,I=h?Symbol.for("react.scope"):60119;function A(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case d:switch(t=t.type){case O:case x:case v:case g:case m:case j:return t;default:switch(t=t&&t.$$typeof){case w:case E:case _:case L:case b:return t;default:return e}}case y:return e}}}function C(t){return A(t)===x}var N={AsyncMode:O,ConcurrentMode:x,ContextConsumer:w,ContextProvider:b,Element:d,ForwardRef:E,Fragment:v,Lazy:_,Memo:L,Portal:y,Profiler:g,StrictMode:m,Suspense:j,isAsyncMode:function(t){return C(t)||A(t)===O},isConcurrentMode:C,isContextConsumer:function(t){return A(t)===w},isContextProvider:function(t){return A(t)===b},isElement:function(t){return"object"==typeof t&&null!==t&&t.$$typeof===d},isForwardRef:function(t){return A(t)===E},isFragment:function(t){return A(t)===v},isLazy:function(t){return A(t)===_},isMemo:function(t){return A(t)===L},isPortal:function(t){return A(t)===y},isProfiler:function(t){return A(t)===g},isStrictMode:function(t){return A(t)===m},isSuspense:function(t){return A(t)===j},isValidElementType:function(t){return"string"==typeof t||"function"==typeof t||t===v||t===x||t===g||t===m||t===j||t===S||"object"==typeof t&&null!==t&&(t.$$typeof===_||t.$$typeof===L||t.$$typeof===b||t.$$typeof===w||t.$$typeof===E||t.$$typeof===k||t.$$typeof===T||t.$$typeof===I||t.$$typeof===P)},typeOf:A},D=p((function(t,e){})),G=(D.AsyncMode,D.ConcurrentMode,D.ContextConsumer,D.ContextProvider,D.Element,D.ForwardRef,D.Fragment,D.Lazy,D.Memo,D.Portal,D.Profiler,D.StrictMode,D.Suspense,D.isAsyncMode,D.isConcurrentMode,D.isContextConsumer,D.isContextProvider,D.isElement,D.isForwardRef,D.isFragment,D.isLazy,D.isMemo,D.isPortal,D.isProfiler,D.isStrictMode,D.isSuspense,D.isValidElementType,D.typeOf,p((function(t){t.exports=N}))),F={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},U={};U[G.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},U[G.Memo]=F;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype}).call(this,r(7))},function(t,e){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,o=t.indexOf("["),i=t.indexOf("]");-1!=o&&-1!=i&&(t=t.substring(0,o)+t.substring(o,i).replace(/:/g,";")+t.substring(i,t.length));for(var a,c,u=r.exec(t||""),s={},l=14;l--;)s[n[l]]=u[l]||"";return-1!=o&&-1!=i&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(t,e){var r=/\/{2,9}/g,n=e.replace(r,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||n.splice(0,1);"/"==e.substr(e.length-1,1)&&n.splice(n.length-1,1);return n}(0,s.path),s.queryKey=(a=s.query,c={},a.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,r){e&&(c[e]=r)})),c),s}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){(function(e){t.exports=function(t){return r&&e.isBuffer(t)||n&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))};var r="function"==typeof e&&"function"==typeof e.isBuffer,n="function"==typeof ArrayBuffer}).call(this,r(15).Buffer)},function(t,e,r){var n=r(48),o=r(29),i=r(4),a=r(14),c=r(30),u=r(31),s=r(6)("socket.io-client:manager"),l=r(28),f=r(64),p=Object.prototype.hasOwnProperty;function h(t,e){if(!(this instanceof h))return new h(t,e);t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=e.parser||a;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=h,h.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},h.prototype.updateSocketIds=function(){for(var t in this.nsps)p.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},h.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},i(h.prototype),h.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},h.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},h.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(t,e){if(s("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;s("opening %s",this.uri),this.engine=n(this.uri,this.opts);var r=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var i=c(r,"open",(function(){o.onopen(),t&&t()})),a=c(r,"error",(function(e){if(s("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",e),t){var r=new Error("Connection error");r.data=e,t(r)}else o.maybeReconnectOnOpen()}));if(!1!==this._timeout){var u=this._timeout;s("connect attempt will timeout after %d",u),0===u&&i.destroy();var l=setTimeout((function(){s("connect attempt timed out after %d",u),i.destroy(),r.close(),r.emit("error","timeout"),o.emitAll("connect_timeout",u)}),u);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(i),this.subs.push(a),this},h.prototype.onopen=function(){s("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(c(t,"data",u(this,"ondata"))),this.subs.push(c(t,"ping",u(this,"onping"))),this.subs.push(c(t,"pong",u(this,"onpong"))),this.subs.push(c(t,"error",u(this,"onerror"))),this.subs.push(c(t,"close",u(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",u(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(t){this.decoder.add(t)},h.prototype.ondecoded=function(t){this.emit("packet",t)},h.prototype.onerror=function(t){s("error",t),this.emitAll("error",t)},h.prototype.socket=function(t,e){var r=this.nsps[t];if(!r){r=new o(this,t,e),this.nsps[t]=r;var n=this;r.on("connecting",i),r.on("connect",(function(){r.id=n.generateId(t)})),this.autoConnect&&i()}function i(){~l(n.connecting,r)||n.connecting.push(r)}return r},h.prototype.destroy=function(t){var e=l(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},h.prototype.packet=function(t){s("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,(function(r){for(var n=0;n<r.length;n++)e.engine.write(r[n],t.options);e.encoding=!1,e.processPacketQueue()})))},h.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},h.prototype.cleanup=function(){s("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){s("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(t){s("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)s("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();s("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var r=setTimeout((function(){t.skipReconnect||(s("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open((function(e){e?(s("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(s("reconnect success"),t.onreconnect())})))}),e);this.subs.push({destroy:function(){clearTimeout(r)}})}},h.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,r){var n=r(16),o=r(51),i=r(60),a=r(61);e.polling=function(t){var e=!1,r=!1,a=!1!==t.jsonp;if("undefined"!=typeof location){var c="https:"===location.protocol,u=location.port;u||(u=c?443:80),e=t.hostname!==location.hostname||u!==t.port,r=t.secure!==c}if(t.xdomain=e,t.xscheme=r,"open"in new n(t)&&!t.forceJSONP)return new o(t);if(!a)throw new Error("JSONP disabled");return new i(t)},e.websocket=a},function(t,e,r){var n=r(18),o=r(8),i=r(5),a=r(9),c=r(27),u=r(10)("engine.io-client:polling");t.exports=l;var s=null!=new(r(16))({xdomain:!1}).responseType;function l(t){var e=t&&t.forceBase64;s&&!e||(this.supportsBinary=!1),n.call(this,t)}a(l,n),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(t){var e=this;function r(){u("paused"),e.readyState="paused",t()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(u("we are currently polling - waiting to pause"),n++,this.once("pollComplete",(function(){u("pre-pause polling complete"),--n||r()}))),this.writable||(u("we are currently writing - waiting to pause"),n++,this.once("drain",(function(){u("pre-pause writing complete"),--n||r()})))}else r()},l.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(t){var e=this;u("polling got data %s",t);i.decodePayload(t,this.socket.binaryType,(function(t,r,n){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var t=this;function e(){u("writing close packet"),t.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),e()):(u("transport not open - deferring close"),this.once("open",e))},l.prototype.write=function(t){var e=this;this.writable=!1;var r=function(){e.writable=!0,e.emit("drain")};i.encodePayload(t,this.supportsBinary,(function(t){e.doWrite(t,r)}))},l.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=o.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(r=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+t}},function(t,e,r){(function(e){var n=r(53),o=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);t.exports=function t(r){if(!r||"object"!=typeof r)return!1;if(n(r)){for(var o=0,c=r.length;o<c;o++)if(t(r[o]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(r)||"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||i&&r instanceof Blob||a&&r instanceof File)return!0;if(r.toJSON&&"function"==typeof r.toJSON&&1===arguments.length)return t(r.toJSON(),!0);for(var u in r)if(Object.prototype.hasOwnProperty.call(r,u)&&t(r[u]))return!0;return!1}}).call(this,r(15).Buffer)},function(t,e,r){"use strict";var n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},a=0,c=0;function u(t){var e="";do{e=o[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function s(){var t=u(+new Date);return t!==n?(a=0,n=t):t+"."+u(a++)}for(;c<64;c++)i[o[c]]=c;s.encode=u,s.decode=function(t){var e=0;for(c=0;c<t.length;c++)e=64*e+i[t.charAt(c)];return e},t.exports=s},function(t,e){var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e,r){var n=r(14),o=r(4),i=r(63),a=r(30),c=r(31),u=r(6)("socket.io-client:socket"),s=r(8),l=r(26);t.exports=h;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=o.prototype.emit;function h(t,e,r){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}o(h.prototype),h.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",c(this,"onopen")),a(t,"packet",c(this,"onpacket")),a(t,"close",c(this,"onclose"))]}},h.prototype.open=h.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},h.prototype.send=function(){var t=i(arguments);return t.unshift("message"),this.emit.apply(this,t),this},h.prototype.emit=function(t){if(f.hasOwnProperty(t))return p.apply(this,arguments),this;var e=i(arguments),r={type:(void 0!==this.flags.binary?this.flags.binary:l(e))?n.BINARY_EVENT:n.EVENT,data:e,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this},h.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},h.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"==typeof this.query?s.encode(this.query):this.query;u("sending connect packet with query %s",t),this.packet({type:n.CONNECT,query:t})}else this.packet({type:n.CONNECT})},h.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},h.prototype.onpacket=function(t){var e=t.nsp===this.nsp,r=t.type===n.ERROR&&"/"===t.nsp;if(e||r)switch(t.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(t);break;case n.ACK:case n.BINARY_ACK:this.onack(t);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",t.data)}},h.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?p.apply(this,e):this.receiveBuffer.push(e)},h.prototype.ack=function(t){var e=this,r=!1;return function(){if(!r){r=!0;var o=i(arguments);u("sending ack %j",o),e.packet({type:l(o)?n.BINARY_ACK:n.ACK,id:t,data:o})}}},h.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},h.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emit("connect")},h.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)p.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},h.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},h.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},h.prototype.close=h.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},h.prototype.compress=function(t){return this.flags.compress=t,this},h.prototype.binary=function(t){return this.flags.binary=t,this}},function(t,e){t.exports=function(t,e,r){return t.on(e,r),{destroy:function(){t.removeListener(e,r)}}}},function(t,e){var r=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},function(t,e,r){var n=r(39),o=r(14),i=r(23),a=r(6)("socket.io-client");t.exports=e=u;var c=e.managers={};function u(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,o=n(t),u=o.source,s=o.id,l=o.path,f=c[s]&&l in c[s].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||f?(a("ignoring socket cache for %s",u),r=i(u,e)):(c[s]||(a("new io instance for %s",u),c[s]=i(u,e)),r=c[s]),o.query&&!e.query&&(e.query=o.query),r.socket(o.path,e)}e.protocol=o.protocol,e.connect=u,e.Manager=r(23),e.Socket=r(29)},function(t,e,r){t.exports=function(){"use strict";return function(t,e,r){t=t||{};var n=e.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(t,e,r,o){return n.fromToBase(t,e,r,o)}r.en.relativeTime=o,n.fromToBase=function(e,n,i,a,c){for(var u,s,l,f=i.$locale().relativeTime||o,p=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],h=p.length,d=0;d<h;d+=1){var y=p[d];y.d&&(u=a?r(e).diff(i,y.d,!0):i.diff(e,y.d,!0));var v=(t.rounding||Math.round)(Math.abs(u));if(l=u>0,v<=y.r||!y.r){v<=1&&d>0&&(y=p[d-1]);var m=f[y.l];c&&(v=c(""+v)),s="string"==typeof m?m.replace("%d",v):m(v,n,y.l,l);break}}if(n)return s;var g=l?f.future:f.past;return"function"==typeof g?g(s):g.replace("%s",s)},n.to=function(t,e){return i(t,e,this,!0)},n.from=function(t,e){return i(t,e,this)};var a=function(t){return t.$u?r.utc():r()};n.toNow=function(t){return this.to(a(this),t)},n.fromNow=function(t){return this.from(a(this),t)}}}()},function(t,e,r){t.exports=function(){"use strict";return function(t,e,r){r.updateLocale=function(t,e){var n=r.Ls[t];if(n)return(e?Object.keys(e):[]).forEach((function(t){n[t]=e[t]})),n}}}()},function(t,e,r){t.exports=function(){"use strict";return function(t,e){e.prototype.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)}}}()},function(t,e,r){"use strict";var n=r(65),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};function u(t){return n.isMemo(t)?a:c[t.$$typeof]||o}c[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},c[n.Memo]=a;var s=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,r,n){if("string"!=typeof r){if(d){var o=h(r);o&&o!==d&&t(e,o,n)}var a=l(r);f&&(a=a.concat(f(r)));for(var c=u(e),y=u(r),v=0;v<a.length;++v){var m=a[v];if(!(i[m]||n&&n[m]||y&&y[m]||c&&c[m])){var g=p(r,m);try{s(e,m,g)}catch(t){}}}}return e}},function(t,e,r){"use strict";var n=r(38);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,r,o,i,a){if(a!==n){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function e(){return t}t.isRequired=t;var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},function(t,e,r){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,r){var n=r(20),o=r(6)("socket.io-client:url");t.exports=function(t,e){var r=t;e=e||"undefined"!=typeof location&&location,null==t&&(t=e.protocol+"//"+e.host);"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(o("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),o("parse %s",t),r=n(t));r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443"));r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port,r.href=r.protocol+"://"+i+(e&&e.port===r.port?"":":"+r.port),r}},function(t,e,r){function n(t){var r;function n(){if(n.enabled){var t=n,o=+new Date,i=o-(r||o);t.diff=i,t.prev=r,t.curr=o,r=o;for(var a=new Array(arguments.length),c=0;c<a.length;c++)a[c]=arguments[c];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;u++;var o=e.formatters[n];if("function"==typeof o){var i=a[u];r=o.call(t,i),a.splice(u,1),u--}return r})),e.formatArgs.call(t,a);var s=n.log||e.log||console.log.bind(console);s.apply(t,a)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var r,n=0;for(r in t)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]}(t),n.destroy=o,"function"==typeof e.init&&e.init(n),e.instances.push(n),n}function o(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=n.debug=n.default=n).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var r;e.save(t),e.names=[],e.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(r=0;r<e.instances.length;r++){var i=e.instances[r];i.enabled=e.enabled(i.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(13),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e,r){(function(n){function o(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG),t}(e=t.exports=r(42)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))})),t.splice(i,0,n)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=o,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(o())}).call(this,r(7))},function(t,e,r){function n(t){var r;function n(){if(n.enabled){var t=n,o=+new Date,i=o-(r||o);t.diff=i,t.prev=r,t.curr=o,r=o;for(var a=new Array(arguments.length),c=0;c<a.length;c++)a[c]=arguments[c];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;u++;var o=e.formatters[n];if("function"==typeof o){var i=a[u];r=o.call(t,i),a.splice(u,1),u--}return r})),e.formatArgs.call(t,a);var s=n.log||e.log||console.log.bind(console);s.apply(t,a)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var r,n=0;for(r in t)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]}(t),n.destroy=o,"function"==typeof e.init&&e.init(n),e.instances.push(n),n}function o(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=n.debug=n.default=n).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var r;e.save(t),e.names=[],e.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(r=0;r<e.instances.length;r++){var i=e.instances[r];i.enabled=e.enabled(i.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(13),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e,r){var n=r(21),o=r(22),i=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),c="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);function u(t,e){if(!t)return t;if(o(t)){var r={_placeholder:!0,num:e.length};return e.push(t),r}if(n(t)){for(var i=new Array(t.length),a=0;a<t.length;a++)i[a]=u(t[a],e);return i}if("object"==typeof t&&!(t instanceof Date)){i={};for(var c in t)i[c]=u(t[c],e);return i}return t}function s(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(n(t))for(var r=0;r<t.length;r++)t[r]=s(t[r],e);else if("object"==typeof t)for(var o in t)t[o]=s(t[o],e);return t}e.deconstructPacket=function(t){var e=[],r=t.data,n=t;return n.data=u(r,e),n.attachments=e.length,{packet:n,buffers:e}},e.reconstructPacket=function(t,e){return t.data=s(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var r=0,i=t;!function t(u,s,l){if(!u)return u;if(a&&u instanceof Blob||c&&u instanceof File){r++;var f=new FileReader;f.onload=function(){l?l[s]=this.result:i=this.result,--r||e(i)},f.readAsArrayBuffer(u)}else if(n(u))for(var p=0;p<u.length;p++)t(u[p],p,u);else if("object"==typeof u&&!o(u))for(var h in u)t(u[h],h,u)}(i),r||e(i)}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";e.byteLength=function(t){var e=s(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=s(t),a=n[0],c=n[1],u=new i(function(t,e,r){return 3*(e+r)/4-r}(0,a,c)),l=0,f=c>0?a-4:a;for(r=0;r<f;r+=4)e=o[t.charCodeAt(r)]<<18|o[t.charCodeAt(r+1)]<<12|o[t.charCodeAt(r+2)]<<6|o[t.charCodeAt(r+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===c&&(e=o[t.charCodeAt(r)]<<2|o[t.charCodeAt(r+1)]>>4,u[l++]=255&e);1===c&&(e=o[t.charCodeAt(r)]<<10|o[t.charCodeAt(r+1)]<<4|o[t.charCodeAt(r+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],a=16383,c=0,u=r-o;c<u;c+=a)i.push(l(t,c,c+a>u?u:c+a));1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,u=a.length;c<u;++c)n[c]=a[c],o[a.charCodeAt(c)]=c;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function l(t,e,r){for(var o,i,a=[],c=e;c<r;c+=3)o=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(255&t[c+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,o){var i,a,c=8*o-n-1,u=(1<<c)-1,s=u>>1,l=-7,f=r?o-1:0,p=r?-1:1,h=t[e+f];for(f+=p,i=h&(1<<-l)-1,h>>=-l,l+=c;l>0;i=256*i+t[e+f],f+=p,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=p,l-=8);if(0===i)i=1-s;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),i-=s}return(h?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,c,u,s=8*i-o-1,l=(1<<s)-1,f=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(c=0,a=l):a+f>=1?(c=(e*u-1)*Math.pow(2,o),a+=f):(c=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[r+h]=255&c,h+=d,c/=256,o-=8);for(a=a<<o|c,s+=o;s>0;t[r+h]=255&a,h+=d,a/=256,s-=8);t[r+h-d]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){t.exports=r(49),t.exports.parser=r(5)},function(t,e,r){var n=r(24),o=r(4),i=r(10)("engine.io-client:socket"),a=r(28),c=r(5),u=r(20),s=r(8);function l(t,e){if(!(this instanceof l))return new l(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=u(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=u(e.host).host),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=s.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||void 0,this.key=e.key||void 0,this.passphrase=e.passphrase||void 0,this.cert=e.cert||void 0,this.ca=e.ca||void 0,this.ciphers=e.ciphers||void 0,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=l,l.priorWebsocketSuccess=!1,o(l.prototype),l.protocol=c.protocol,l.Socket=l,l.Transport=r(18),l.transports=r(24),l.parser=r(5),l.prototype.createTransport=function(t){i('creating transport "%s"',t);var e=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}(this.query);e.EIO=c.protocol,e.transport=t;var r=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new n[t]({query:e,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var t;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout((function(){e.emit("error","No transports available")}),0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},l.prototype.setTransport=function(t){i("setting transport %s",t.name);var e=this;this.transport&&(i("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",(function(){e.onDrain()})).on("packet",(function(t){e.onPacket(t)})).on("error",(function(t){e.onError(t)})).on("close",(function(){e.onClose("transport close")}))},l.prototype.probe=function(t){i('probing transport "%s"',t);var e=this.createTransport(t,{probe:1}),r=!1,n=this;function o(){if(n.onlyBinaryUpgrades){var o=!this.supportsBinary&&n.transport.supportsBinary;r=r||o}r||(i('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(function(o){if(!r)if("pong"===o.type&&"probe"===o.data){if(i('probe transport "%s" pong',t),n.upgrading=!0,n.emit("upgrading",e),!e)return;l.priorWebsocketSuccess="websocket"===e.name,i('pausing current transport "%s"',n.transport.name),n.transport.pause((function(){r||"closed"!==n.readyState&&(i("changing transport and sending upgrade packet"),p(),n.setTransport(e),e.send([{type:"upgrade"}]),n.emit("upgrade",e),e=null,n.upgrading=!1,n.flush())}))}else{i('probe transport "%s" failed',t);var a=new Error("probe error");a.transport=e.name,n.emit("upgradeError",a)}})))}function a(){r||(r=!0,p(),e.close(),e=null)}function c(r){var o=new Error("probe error: "+r);o.transport=e.name,a(),i('probe transport "%s" failed because of error: %s',t,r),n.emit("upgradeError",o)}function u(){c("transport closed")}function s(){c("socket closed")}function f(t){e&&t.name!==e.name&&(i('"%s" works - aborting "%s"',t.name,e.name),a())}function p(){e.removeListener("open",o),e.removeListener("error",c),e.removeListener("close",u),n.removeListener("close",s),n.removeListener("upgrading",f)}l.priorWebsocketSuccess=!1,e.once("open",o),e.once("error",c),e.once("close",u),this.once("close",s),this.once("upgrading",f),e.open()},l.prototype.onOpen=function(){if(i("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){i("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},l.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(i('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else i('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout((function(){"closed"!==e.readyState&&e.onClose("ping timeout")}),t||e.pingInterval+e.pingTimeout)},l.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){i("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},l.prototype.ping=function(){var t=this;this.sendPacket("ping",(function(){t.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(i("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(t,e,r){return this.sendPacket("message",t,e,r),this},l.prototype.sendPacket=function(t,e,r,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var o={type:t,data:e,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?n():e()})):this.upgrading?n():e()}function e(){t.onClose("forced close"),i("socket closing - telling transport to close"),t.transport.close()}function r(){t.removeListener("upgrade",r),t.removeListener("upgradeError",r),e()}function n(){t.once("upgrade",r),t.once("upgradeError",r)}return this},l.prototype.onError=function(t){i("socket error %j",t),l.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},l.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){i('socket close with reason: "%s"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;r<n;r++)~a(this.transports,t[r])&&e.push(t[r]);return e}},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,r){var n=r(16),o=r(25),i=r(4),a=r(9),c=r(10)("engine.io-client:polling-xhr"),u=r(17);function s(){}function l(t){if(o.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,"undefined"!=typeof location){var e="https:"===location.protocol,r=location.port;r||(r=e?443:80),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||r!==t.port,this.xs=t.secure!==e}}function f(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}if(t.exports=l,t.exports.Request=f,a(l,o),l.prototype.supportsBinary=!0,l.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new f(t)},l.prototype.doWrite=function(t,e){var r="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:r}),o=this;n.on("success",e),n.on("error",(function(t){o.onError("xhr post error",t)})),this.sendXhr=n},l.prototype.doPoll=function(){c("xhr poll");var t=this.request(),e=this;t.on("data",(function(t){e.onData(t)})),t.on("error",(function(t){e.onError("xhr poll error",t)})),this.pollXhr=t},i(f.prototype),f.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new n(t),r=this;try{c("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&e.setRequestHeader(o,this.extraHeaders[o])}catch(t){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){r.onLoad()},e.onerror=function(){r.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader("Content-Type");(r.supportsBinary&&"application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&(e.responseType="arraybuffer")}catch(t){}4===e.readyState&&(200===e.status||1223===e.status?r.onLoad():setTimeout((function(){r.onError("number"==typeof e.status?e.status:0)}),0))},c("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout((function(){r.onError(t)}),0)}"undefined"!=typeof document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},f.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},f.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=s:this.xhr.onreadystatechange=s,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t=("application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&this.xhr.response||this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},f.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},f.requestsCount=0,f.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",p);else if("function"==typeof addEventListener){addEventListener("onpagehide"in u?"pagehide":"unload",p,!1)}function p(){for(var t in f.requests)f.requests.hasOwnProperty(t)&&f.requests[t].abort()}},function(t,e){t.exports=Object.keys||function(t){var e=[],r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&e.push(n);return e}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){t.exports=function(t,e,r){var n=t.byteLength;if(e=e||0,r=r||n,t.slice)return t.slice(e,r);if(e<0&&(e+=n),r<0&&(r+=n),r>n&&(r=n),e>=n||e>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(r-e),a=e,c=0;a<r;a++,c++)i[c]=o[a];return i.buffer}},function(t,e){function r(){}t.exports=function(t,e,n){var o=!1;return n=n||r,i.count=t,0===t?e():i;function i(t,r){if(i.count<=0)throw new Error("after called too many times");--i.count,t?(o=!0,e(t),e=n):0!==i.count||o||e(null,r)}}},function(t,e){var r,n,o,i=String.fromCharCode;function a(t){for(var e,r,n=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(r=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function c(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function u(t,e){return i(t>>e&63|128)}function s(t,e){if(0==(4294967168&t))return i(t);var r="";return 0==(4294965248&t)?r=i(t>>6&31|192):0==(4294901760&t)?(c(t,e)||(t=65533),r=i(t>>12&15|224),r+=u(t,6)):0==(4292870144&t)&&(r=i(t>>18&7|240),r+=u(t,12),r+=u(t,6)),r+=i(63&t|128)}function l(){if(o>=n)throw Error("Invalid byte index");var t=255&r[o];if(o++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function f(t){var e,i;if(o>n)throw Error("Invalid byte index");if(o==n)return!1;if(e=255&r[o],o++,0==(128&e))return e;if(192==(224&e)){if((i=(31&e)<<6|l())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if((i=(15&e)<<12|l()<<6|l())>=2048)return c(i,t)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(i=(7&e)<<18|l()<<12|l()<<6|l())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}t.exports={version:"2.1.2",encode:function(t,e){for(var r=!1!==(e=e||{}).strict,n=a(t),o=n.length,i=-1,c="";++i<o;)c+=s(n[i],r);return c},decode:function(t,e){var c=!1!==(e=e||{}).strict;r=a(t),n=r.length,o=0;for(var u,s=[];!1!==(u=f(c));)s.push(u);return function(t){for(var e,r=t.length,n=-1,o="";++n<r;)(e=t[n])>65535&&(o+=i((e-=65536)>>>10&1023|55296),e=56320|1023&e),o+=i(e);return o}(s)}}},function(t,e){!function(t){"use strict";e.encode=function(e){var r,n=new Uint8Array(e),o=n.length,i="";for(r=0;r<o;r+=3)i+=t[n[r]>>2],i+=t[(3&n[r])<<4|n[r+1]>>4],i+=t[(15&n[r+1])<<2|n[r+2]>>6],i+=t[63&n[r+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(e){var r,n,o,i,a,c=.75*e.length,u=e.length,s=0;"="===e[e.length-1]&&(c--,"="===e[e.length-2]&&c--);var l=new ArrayBuffer(c),f=new Uint8Array(l);for(r=0;r<u;r+=4)n=t.indexOf(e[r]),o=t.indexOf(e[r+1]),i=t.indexOf(e[r+2]),a=t.indexOf(e[r+3]),f[s++]=n<<2|o>>4,f[s++]=(15&o)<<4|i>>2,f[s++]=(3&i)<<6|63&a;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(t,e){var r=void 0!==r?r:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),o=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),i=r&&r.prototype.append&&r.prototype.getBlob;function a(t){return t.map((function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var r=new Uint8Array(t.byteLength);r.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=r.buffer}return e}return t}))}function c(t,e){e=e||{};var n=new r;return a(t).forEach((function(t){n.append(t)})),e.type?n.getBlob(e.type):n.getBlob()}function u(t,e){return new Blob(a(t),e||{})}"undefined"!=typeof Blob&&(c.prototype=Blob.prototype,u.prototype=Blob.prototype),t.exports=n?o?Blob:u:i?c:void 0},function(t,e,r){function n(t){var r;function n(){if(n.enabled){var t=n,o=+new Date,i=o-(r||o);t.diff=i,t.prev=r,t.curr=o,r=o;for(var a=new Array(arguments.length),c=0;c<a.length;c++)a[c]=arguments[c];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;u++;var o=e.formatters[n];if("function"==typeof o){var i=a[u];r=o.call(t,i),a.splice(u,1),u--}return r})),e.formatArgs.call(t,a);var s=n.log||e.log||console.log.bind(console);s.apply(t,a)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var r,n=0;for(r in t)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]}(t),n.destroy=o,"function"==typeof e.init&&e.init(n),e.instances.push(n),n}function o(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=n.debug=n.default=n).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var r;e.save(t),e.names=[],e.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(r=0;r<e.instances.length;r++){var i=e.instances[r];i.enabled=e.enabled(i.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(13),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e,r){var n=r(25),o=r(9),i=r(17);t.exports=l;var a,c=/\n/g,u=/\\n/g;function s(){}function l(t){n.call(this,t),this.query=this.query||{},a||(a=i.___eio=i.___eio||[]),this.index=a.length;var e=this;a.push((function(t){e.onData(t)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){e.script&&(e.script.onerror=s)}),!1)}o(l,n),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},l.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)}),100)},l.prototype.doWrite=function(t,e){var r=this;if(!this.form){var n,o=document.createElement("form"),i=document.createElement("textarea"),a=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=a,o.method="POST",o.setAttribute("accept-charset","utf-8"),i.name="d",o.appendChild(i),document.body.appendChild(o),this.form=o,this.area=i}function s(){l(),e()}function l(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(t){r.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+r.iframeId+'">';n=document.createElement(t)}catch(t){(n=document.createElement("iframe")).name=r.iframeId,n.src="javascript:0"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n}this.form.action=this.uri(),l(),t=t.replace(u,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&s()}:this.iframe.onload=s}},function(t,e,r){(function(e){var n,o,i=r(18),a=r(5),c=r(8),u=r(9),s=r(27),l=r(10)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof self&&(n=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{o=r(62)}catch(t){}var f=n||o;function p(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=n&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(f=o),i.call(this,t)}t.exports=p,u(p,i),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,r={};this.isReactNative||(r.agent=this.agent,r.perMessageDeflate=this.perMessageDeflate,r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new f(t,e):new f(t):new f(t,e,r)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},p.prototype.write=function(t){var r=this;this.writable=!1;for(var n=t.length,o=0,i=n;o<i;o++)!function(t){a.encodePacket(t,r.supportsBinary,(function(o){if(!r.usingBrowserWebSocket){var i={};if(t.options&&(i.compress=t.options.compress),r.perMessageDeflate)("string"==typeof o?e.byteLength(o):o.length)<r.perMessageDeflate.threshold&&(i.compress=!1)}try{r.usingBrowserWebSocket?r.ws.send(o):r.ws.send(o,i)}catch(t){l("websocket closed before onclose event")}--n||c()}))}(t[o]);function c(){r.emit("flush"),setTimeout((function(){r.writable=!0,r.emit("drain")}),0)}},p.prototype.onClose=function(){i.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",r="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=s()),this.supportsBinary||(t.b64=1),(t=c.encode(t)).length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+t},p.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===p.prototype.name)}}).call(this,r(15).Buffer)},function(t,e){},function(t,e){t.exports=function(t,e){for(var r=[],n=(e=e||0)||0;n<t.length;n++)r[n-e]=t[n];return r}},function(t,e){function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}},function(t,e,r){"use strict";t.exports=r(66)},function(t,e,r){"use strict";var n="function"==typeof Symbol&&Symbol.for,o=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,c=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,f=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,y=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,O=n?Symbol.for("react.scope"):60119;function x(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case o:switch(t=t.type){case f:case p:case a:case u:case c:case d:return t;default:switch(t=t&&t.$$typeof){case l:case h:case m:case v:case s:return t;default:return e}}case i:return e}}}function E(t){return x(t)===p}e.AsyncMode=f,e.ConcurrentMode=p,e.ContextConsumer=l,e.ContextProvider=s,e.Element=o,e.ForwardRef=h,e.Fragment=a,e.Lazy=m,e.Memo=v,e.Portal=i,e.Profiler=u,e.StrictMode=c,e.Suspense=d,e.isAsyncMode=function(t){return E(t)||x(t)===f},e.isConcurrentMode=E,e.isContextConsumer=function(t){return x(t)===l},e.isContextProvider=function(t){return x(t)===s},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===o},e.isForwardRef=function(t){return x(t)===h},e.isFragment=function(t){return x(t)===a},e.isLazy=function(t){return x(t)===m},e.isMemo=function(t){return x(t)===v},e.isPortal=function(t){return x(t)===i},e.isProfiler=function(t){return x(t)===u},e.isStrictMode=function(t){return x(t)===c},e.isSuspense=function(t){return x(t)===d},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===p||t===u||t===c||t===d||t===y||"object"==typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===v||t.$$typeof===s||t.$$typeof===l||t.$$typeof===h||t.$$typeof===b||t.$$typeof===w||t.$$typeof===O||t.$$typeof===g)},e.typeOf=x},function(t,e,r){"use strict";r.r(e),r.d(e,"AdBannersList",(function(){return $r})),r.d(e,"AddressDetails",(function(){return ro})),r.d(e,"AddressFieldsSetting",(function(){return Lo})),r.d(e,"AddressForm",(function(){return Wo})),r.d(e,"AddressList",(function(){return ai})),r.d(e,"AdvancedReports",(function(){return mi})),r.d(e,"AnalyticsBusinessFilter",(function(){return ki})),r.d(e,"AnalyticsDriversFilter",(function(){return Yi})),r.d(e,"AnalyticsStatusSubFilter",(function(){return Xi})),r.d(e,"ApiKeysList",(function(){return fa})),r.d(e,"Appointments",(function(){return xa})),r.d(e,"BaseComponent",(function(){return Ea})),r.d(e,"CannyIdentification",(function(){return La})),r.d(e,"CampaignEmail",(function(){return Ba})),r.d(e,"CampaignUserList",(function(){return Wa})),r.d(e,"Settings",(function(){return lc})),r.d(e,"BusinessAdd",(function(){return lu})),r.d(e,"BannerDetails",(function(){return Ec})),r.d(e,"BannerImageDetails",(function(){return Nc})),r.d(e,"BatchImageForm",(function(){return Vc})),r.d(e,"BusinessAndProductList",(function(){return Eu})),r.d(e,"BusinessAnalytics",(function(){return Nu})),r.d(e,"BusinessBasicInformation",(function(){return qu})),r.d(e,"BusinessBrandBUSIDetail",(function(){return rs})),r.d(e,"BusinessBrandGENDetail",(function(){return ys})),r.d(e,"BusinessBrandListing",(function(){return Ls})),r.d(e,"BusinessController",(function(){return Cs})),r.d(e,"BusinessDeliveryDetails",(function(){return $s})),r.d(e,"BusinessDeliveryZone",(function(){return ol})),r.d(e,"BusinessDeliveryZoneShare",(function(){return gl})),r.d(e,"BusinessDetails",(function(){return Il})),r.d(e,"BusinessEta",(function(){return Ml})),r.d(e,"BusinessFormDetails",(function(){return Xl})),r.d(e,"BusinessGallery",(function(){return lf})),r.d(e,"BusinessGprsPrinters",(function(){return wf})),r.d(e,"BusinessInformation",(function(){return jf})),r.d(e,"BusinessManagerBusinesses",(function(){return Wf})),r.d(e,"BusinessList",(function(){return Gf})),r.d(e,"BusinessMenu",(function(){return ap})),r.d(e,"BusinessMenuMetaFields",(function(){return Ap})),r.d(e,"BusinessMetaFields",(function(){return gh})),r.d(e,"BusinessProductsListing",(function(){return bp})),r.d(e,"BusinessPromotionForm",(function(){return ry})),r.d(e,"BusinessPromotionList",(function(){return hy})),r.d(e,"BusinessPromotionMetaFields",(function(){return Ly})),r.d(e,"BusinessMenuOptions",(function(){return qp})),r.d(e,"BusinessMenuShare",(function(){return ih})),r.d(e,"BusinessPaymethods",(function(){return Ch})),r.d(e,"BusinessPlace",(function(){return $h})),r.d(e,"BusinessPlaceGroup",(function(){return vd})),r.d(e,"BusinessPlaceGroupList",(function(){return nd})),r.d(e,"BusinessPickupDetails",(function(){return Ld})),r.d(e,"BusinessProductsCategoyDetails",(function(){return Bd})),r.d(e,"BusinessProductsCategories",(function(){return Md})),r.d(e,"BusinessProductsSearch",(function(){return zd})),r.d(e,"BusinessReviews",(function(){return Fy})),r.d(e,"BusinessReviewsList",(function(){return Hy})),r.d(e,"BusinessSchedule",(function(){return ov})),r.d(e,"BusinessSharedMenuProductDetails",(function(){return mv})),r.d(e,"BusinessSharedMenuProducts",(function(){return kv})),r.d(e,"BusinessSortControl",(function(){return Cv})),r.d(e,"BusinessSpreadSheet",(function(){return Jv})),r.d(e,"BusinessTypeFilter",(function(){return rm})),r.d(e,"BusinessTypeDetail",(function(){return ym})),r.d(e,"BusinessWebhooks",(function(){return Pm})),r.d(e,"BusinessZoneGoogleMaps",(function(){return Gm})),r.d(e,"BusinessProductCreator",(function(){return Hm})),r.d(e,"BusinessWalletsList",(function(){return ig})),r.d(e,"CampaignListing",(function(){return gg})),r.d(e,"CampaignDetail",(function(){return Cg})),r.d(e,"CampaignDetailContent",(function(){return zg})),r.d(e,"CampaignSignUpOption",(function(){return rb})),r.d(e,"CampaignAmountOption",(function(){return yb})),r.d(e,"Cart",(function(){return bb})),r.d(e,"Checkout",(function(){return Tb})),r.d(e,"CheckoutFieldsSetting",(function(){return Mb})),r.d(e,"CheckPassword",(function(){return Zb})),r.d(e,"CityList",(function(){return lw})),r.d(e,"CountryList",(function(){return Ow})),r.d(e,"CouponControl",(function(){return Pw})),r.d(e,"ContentForm",(function(){return Mw})),r.d(e,"DashboardBusinessList",(function(){return tO})),r.d(e,"DashboardOrdersList",(function(){return hO})),r.d(e,"DeliveryzoneList",(function(){return EO})),r.d(e,"DragAndDrop",(function(){return LO})),r.d(e,"DriversCompanyDetails",(function(){return BO})),r.d(e,"DriverGroupSetting",(function(){return XO})),r.d(e,"UserReviewDetails",(function(){return ux})),r.d(e,"DriverTips",(function(){return qE})),r.d(e,"DriversList",(function(){return oj})),r.d(e,"DriverAnalytics",(function(){return yj})),r.d(e,"DriversCompaniesList",(function(){return Ox})),r.d(e,"DriversGroupAutoassign",(function(){return _x})),r.d(e,"DriversGroupDetails",(function(){return Rx})),r.d(e,"DriversGroupOrders",(function(){return gE})),r.d(e,"DriverGroupDeliveryDetails",(function(){return fE})),r.d(e,"DriverGroupDeliveryZone",(function(){return tE})),r.d(e,"DriversGroupsList",(function(){return IE})),r.d(e,"DriversGroupLogs",(function(){return ME})),r.d(e,"EnterprisePromotionList",(function(){return Pj})),r.d(e,"EnterprisePromotionDetails",(function(){return Mj})),r.d(e,"ExamineClick",(function(){return Yj})),r.d(e,"ExportCSV",(function(){return Xj})),r.d(e,"FacebookLoginButton",(function(){return uS})),r.d(e,"ForgotPasswordForm",(function(){return gS})),r.d(e,"GiftCardsList",(function(){return PS})),r.d(e,"GoogleAutocompleteInput",(function(){return US})),r.d(e,"GoogleMaps",(function(){return JS})),r.d(e,"GoogleMapsMap",(function(){return VS})),r.d(e,"GoogleMapsApiKeySetting",(function(){return nL})),r.d(e,"GpsButton",(function(){return uL})),r.d(e,"GoogleGpsButton",(function(){return sL})),r.d(e,"GoogleTagManager",(function(){return lL})),r.d(e,"Home",(function(){return EL})),r.d(e,"ImporterForm",(function(){return NL})),r.d(e,"ImporterJobForm",(function(){return $L})),r.d(e,"ImporterListing",(function(){return n_})),r.d(e,"InvoiceBusinessManager",(function(){return v_})),r.d(e,"InvoiceDriverManager",(function(){return P_})),r.d(e,"LanguageManager",(function(){return B_})),r.d(e,"LanguageSelector",(function(){return J_})),r.d(e,"LanguageSetting",(function(){return rP})),r.d(e,"LanguageTransSpread",(function(){return dP})),r.d(e,"LanguageTransTable",(function(){return jP})),r.d(e,"LoginForm",(function(){return DP})),r.d(e,"LogisticInformation",(function(){return qP})),r.d(e,"Logistics",(function(){return ek})),r.d(e,"LogoutAction",(function(){return fk})),r.d(e,"PointsWalletBusinessDetail",(function(){return xk})),r.d(e,"MainSearch",(function(){return qk})),r.d(e,"MenuControl",(function(){return Xk})),r.d(e,"MetaFields",(function(){return jT})),r.d(e,"MomentOption",(function(){return TT})),r.d(e,"MyOrders",(function(){return XT})),r.d(e,"MyOrdersList",(function(){return iI})),r.d(e,"MultiCountrySettings",(function(){return MT})),r.d(e,"OccupationSelector",(function(){return mI})),r.d(e,"OpenCartListing",(function(){return TI})),r.d(e,"OrderingWebsite",(function(){return xA})),r.d(e,"OpenCartsDetail",(function(){return RI})),r.d(e,"OpenCartFilter",(function(){return WI})),r.d(e,"OrderList",(function(){return uA})),r.d(e,"OrderNotification",(function(){return fA})),r.d(e,"OrdersFilter",(function(){return IA})),r.d(e,"OrdersManage",(function(){return $A})),r.d(e,"OrdersOverview",(function(){return rC})),r.d(e,"OrderTypeControl",(function(){return aC})),r.d(e,"Messages",(function(){return fT})),r.d(e,"PaymentOptions",(function(){return vC})),r.d(e,"PaymentOptionSquare",(function(){return _C})),r.d(e,"PagesList",(function(){return UC})),r.d(e,"PageForm",(function(){return ZC})),r.d(e,"PlaceList",(function(){return lN})),r.d(e,"PlatformProductDetail",(function(){return ON})),r.d(e,"PlatformProductsList",(function(){return CN})),r.d(e,"PluginList",(function(){return JN})),r.d(e,"Popup",(function(){return ZN})),r.d(e,"PointsWalletLevels",(function(){return sD})),r.d(e,"PointsWalletBusinessList",(function(){return Dk})),r.d(e,"ProductComponent",(function(){return bD})),r.d(e,"ProductDetatils",(function(){return AD})),r.d(e,"ProductDetailsAdvanced",(function(){return ZF})),r.d(e,"ProductExtraMetaFields",(function(){return qD})),r.d(e,"ProductExtraOptions",(function(){return IG})),r.d(e,"ProductExtraOptionDetails",(function(){return iG})),r.d(e,"ProductExtraOptionMetaFields",(function(){return gG})),r.d(e,"ProductExtraSubOptionMetaFields",(function(){return $G})),r.d(e,"ProductExtras",(function(){return nF})),r.d(e,"ProductForm",(function(){return dF})),r.d(e,"ProductGallery",(function(){return _F})),r.d(e,"ProductMetaFields",(function(){return RF})),r.d(e,"ProductShare",(function(){return fU})),r.d(e,"ProductTagDetails",(function(){return xU})),r.d(e,"ProductTagsList",(function(){return DU})),r.d(e,"ProductImages",(function(){return FU})),r.d(e,"ProductIngredient",(function(){return KU})),r.d(e,"ProductOption",(function(){return ZU})),r.d(e,"ProductOptionSuboption",(function(){return rB})),r.d(e,"ProductReviews",(function(){return cU})),r.d(e,"ProductsList",(function(){return aB})),r.d(e,"ProductsListing",(function(){return mB})),r.d(e,"ProfessionalBusinessService",(function(){return TB})),r.d(e,"ProfessionalSchedule",(function(){return RB})),r.d(e,"ProfessionalServices",(function(){return QB})),r.d(e,"ProductStep",(function(){return lR})),r.d(e,"ReportsDriverFilter",(function(){return fJ})),r.d(e,"QueryLogin",(function(){return wR})),r.d(e,"ReCaptcha",(function(){return FR})),r.d(e,"RewardsPrograms",(function(){return WR})),r.d(e,"RecoveryActionListing",(function(){return uM})),r.d(e,"RecoveryActionDetail",(function(){return bM})),r.d(e,"RecoveryNotificationList",(function(){return AM})),r.d(e,"SingleRecoveryNotification",(function(){return VY})),r.d(e,"SitesAuthSettings",(function(){return oz})),r.d(e,"SearchOptions",(function(){return GM})),r.d(e,"SelectPOS",(function(){return JM})),r.d(e,"Schedule",(function(){return eY})),r.d(e,"SidebarMenu",(function(){return fY})),r.d(e,"SignupForm",(function(){return xY})),r.d(e,"SingleBusinessCard",(function(){return EY})),r.d(e,"LoyaltyLevelDetail",(function(){return NY})),r.d(e,"SingleOrderCard",(function(){return DY})),r.d(e,"SingleProductCard",(function(){return GY})),r.d(e,"SingleBusinessProduct",(function(){return MJ})),r.d(e,"SingleBusinessCategory",(function(){return tV})),r.d(e,"UploadMenu",(function(){return _z})),r.d(e,"UserFormDetails",(function(){return Rz})),r.d(e,"UsersExportCSV",(function(){return Kz})),r.d(e,"UpsellingPage",(function(){return a$})),r.d(e,"WrapperGoogleMaps",(function(){return AS})),r.d(e,"OrderDetails",(function(){return m$})),r.d(e,"OrderReview",(function(){return _$})),r.d(e,"PaymentOptionCash",(function(){return bq})),r.d(e,"PaymentOptionPaypal",(function(){return _q})),r.d(e,"PaymentOptionStripe",(function(){return Uq})),r.d(e,"PaymentOptionStripeDirect",(function(){return Jq})),r.d(e,"PaymentOptionStripeRedirect",(function(){return Qq})),r.d(e,"PhoneAutocomplete",(function(){return H$})),r.d(e,"BusinessesMap",(function(){return X$})),r.d(e,"StripeElementsForm",(function(){return PJ})),r.d(e,"CardForm",(function(){return AV})),r.d(e,"StripeRedirectForm",(function(){return FV})),r.d(e,"SettingsList",(function(){return EV})),r.d(e,"CmsContent",(function(){return F$})),r.d(e,"FloatingButton",(function(){return BV})),r.d(e,"ResetPassword",(function(){return WV})),r.d(e,"ReportsBrandFilter",(function(){return cH})),r.d(e,"ReportsAppIdFilter",(function(){return bH})),r.d(e,"ReportsDriverGroupFilter",(function(){return IH})),r.d(e,"ReviewCustomer",(function(){return OJ})),r.d(e,"SiteDetails",(function(){return $H})),r.d(e,"SitesList",(function(){return tW})),r.d(e,"Sessions",(function(){return fV})),r.d(e,"SiteTheme",(function(){return mz})),r.d(e,"Analytics",(function(){return nW})),r.d(e,"UsersList",(function(){return vW})),r.d(e,"UserTypeFilter",(function(){return CW})),r.d(e,"UserDetails",(function(){return $W})),r.d(e,"UserMetaFields",(function(){return kW})),r.d(e,"UserWallet",(function(){return eK})),r.d(e,"WebhookList",(function(){return dK})),r.d(e,"ConfigContext",(function(){return xn})),r.d(e,"ConfigProvider",(function(){return En})),r.d(e,"useConfig",(function(){return jn})),r.d(e,"LanguageContext",(function(){return kr})),r.d(e,"LanguageProvider",(function(){return Tr})),r.d(e,"useLanguage",(function(){return Ir})),r.d(e,"OrderContext",(function(){return Un})),r.d(e,"OrderProvider",(function(){return Bn})),r.d(e,"useOrder",(function(){return Rn})),r.d(e,"BusinessContext",(function(){return cq})),r.d(e,"BusinessProvider",(function(){return uq})),r.d(e,"useBusiness",(function(){return sq})),r.d(e,"SessionContext",(function(){return fr})),r.d(e,"SessionProvider",(function(){return pr})),r.d(e,"useSession",(function(){return hr})),r.d(e,"WebsocketContext",(function(){return tn})),r.d(e,"WebsocketProvider",(function(){return en})),r.d(e,"useWebsocket",(function(){return rn})),r.d(e,"ApiContext",(function(){return Qe})),r.d(e,"ApiProvider",(function(){return tr})),r.d(e,"useApi",(function(){return er})),r.d(e,"OrderingContext",(function(){return vq})),r.d(e,"OrderingProvider",(function(){return mq})),r.d(e,"EventContext",(function(){return an})),r.d(e,"EventProvider",(function(){return cn})),r.d(e,"useEvent",(function(){return un})),r.d(e,"UtilsContext",(function(){return Vn})),r.d(e,"UtilsProviders",(function(){return Hn})),r.d(e,"useUtils",(function(){return Wn})),r.d(e,"ValidationFieldsContext",(function(){return po})),r.d(e,"ValidationFieldsProvider",(function(){return ho})),r.d(e,"useValidationFields",(function(){return yo})),r.d(e,"CustomerContext",(function(){return Go})),r.d(e,"CustomerProvider",(function(){return Fo})),r.d(e,"useCustomer",(function(){return Uo})),r.d(e,"ToastContext",(function(){return mr})),r.d(e,"ToastProvider",(function(){return gr})),r.d(e,"useToast",(function(){return br})),r.d(e,"ToastType",(function(){return vr}));var n,o=r(1),i=r.n(o),a=r(0),c=r.n(a),u=function(t){this.back_page=t.back_page,this.current_page=t.current_page,this.fisrt_page=t.fisrt_page,this.from=t.from,this.last_page=t.last_page,this.next_page=t.next_page,this.page_size=t.page_size,this.to=t.to,this.total=t.total,this.total_pages=t.total_pages},s=function(){function t(t,e,r){void 0===e&&(e={}),void 0===r&&(r=void 0),this.response=t,this.options=e,this.api=r}return Object.defineProperty(t.prototype,"content",{get:function(){var t=this;if(this.options.json){var e=this.response.data;if(200===this.response.status&&(e.pagination&&(e.pagination=new u(e.pagination)),this.options.CastClass))if(null===e.result)e.result=null;else if(Array.isArray(e.result))e.result=e.result.map((function(e){return new t.options.CastClass(e,t.api)}));else if("object"==typeof e)if("dictionary"===this.options.mode)for(var r in e.result)"object"==typeof e.result[r]&&(e.result[r]=new this.options.CastClass(e.result[r],this.api));else e.result=new this.options.CastClass(e.result,this.api);return e}return this.response.data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),t}(),l=function(){return l=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},l.apply(this,arguments)},f=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},p=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},h=function(){function t(t,e,r){void 0===r&&(r=[]),this.hidden=["original","api","hidden"],this.original=l({},t),this.api=e,this.hidden=this.hidden.concat(r)}return t.prototype.setApi=function(t){this.api=t},t.prototype.getId=function(){},t.prototype.save=function(){return f(this,void 0,void 0,(function(){var t,e,r,n=this;return p(this,(function(o){switch(o.label){case 0:if(this.api.setModelId(this.getId()),!this.api)throw new Error("You must provide the `api` to use `save` function. Example: const newModel = new Model(model, api) or newModel.setApi(api)");return t={},Object.entries(this).forEach((function(e){var r=e[0],o=e[1];n.hidden.includes(r)||o===n.original[r]||(t[r]=o)})),Object.values(t).length>0?[4,this.api.save(t)]:[3,2];case 1:return(e=o.sent().content).error||(r={},Object.entries(e.result).forEach((function(t){var e=t[0],o=t[1];n.hidden.includes(e)||(r[e]=o)})),Object.assign(this,r),this.original=l({},this)),[2,e];case 2:return[2,{error:!1,result:this}]}}))}))},t}(),d=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},n(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),y=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r)||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return d(e,t),e.prototype.getId=function(){return this.id},e}(h),v=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},m=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},g=function(){function t(t){this.attributes=[],this.query={},this.ordering=t}return t.prototype.select=function(t){return this.attributes=t,this},t.prototype.where=function(t){return this.conditions=t,this},t.prototype.setMode=function(t){return this.mode=t,this},t.prototype.asDashboard=function(){return this.setMode("dashboard"),this},t.prototype.asDictionary=function(){return this.setMode("dictionary"),this},t.prototype.parameters=function(t){return this.query=Object.assign(this.query,t),this},t.prototype.makeRequest=function(t,e,r,n,o){return v(this,void 0,void 0,(function(){var i,a;return m(this,(function(c){switch(c.label){case 0:if(i=Object.assign({CastClass:n,json:!0,api:this},o),"GET"===t&&(i.attributes=this.attributes,i.conditions=this.conditions,i.mode=this.mode,i.query||(i.query={}),Object.assign(i.query,this.query),r))for(a in r)i.query[a]=r[a];switch(t){case"GET":return[3,1];case"POST":return[3,3];case"PUT":return[3,5];case"DELETE":return[3,7]}return[3,9];case 1:return[4,this.ordering.get(e,i)];case 2:case 4:case 6:case 8:return[2,c.sent()];case 3:return[4,this.ordering.post(e,r,i)];case 5:return[4,this.ordering.put(e,r,i)];case 7:return[4,this.ordering.delete(e,i)];case 9:throw Error("The `"+t+"` methos is not supported.")}}))}))},t}(),b=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),w=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},O=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},x=function(t){function e(e,r){var n=t.call(this,e)||this;return n.languageId=r,n}return b(e,t),e.prototype.setModelId=function(t){this.languageId=t},e.prototype.get=function(t){return void 0===t&&(t={}),w(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:if(this.languageId&&this.conditions)throw new Error("The `where` function is not compatible with languages(languageId). Example ordering.languages().where(contitions).get()");return e="/languages"+(this.languageId?"/"+this.languageId:""),[4,this.makeRequest("GET",e,void 0,y,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),w(this,void 0,void 0,(function(){var r,n,o,i,a;return O(this,(function(c){switch(c.label){case 0:return r="/languages"+(this.languageId?"/"+this.languageId:""),[4,this.makeRequest(this.languageId?"PUT":"POST",r,t,y,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.languageId||(this.languageId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),w(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:if(!this.languageId)throw new Error("`languageId` is require to delete. Example: ordering.languages(languageId).delete()");return e="/languages/"+this.languageId,[4,this.makeRequest("DELETE",e,void 0,y,t)];case 1:return[2,r.sent()]}}))}))},e}(g),E=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},j=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},S=function(){function t(t){this.ordering=t}return t.prototype.auth=function(t,e){return void 0===e&&(e={json:!0,system:!0}),E(this,void 0,void 0,(function(){return j(this,(function(r){switch(r.label){case 0:return[4,this.ordering.post("/system/auth",t,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.getCode=function(t,e){return void 0===e&&(e={json:!0,system:!0}),E(this,void 0,void 0,(function(){return j(this,(function(r){switch(r.label){case 0:return[4,this.ordering.post("/system/code",t,e)];case 1:return[2,r.sent()]}}))}))},t}(),L=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_=function(t){void 0===t&&(t={}),this.access_token=t.access_token,this.expires_in=t.expires_in,this.token_type=t.token_type},P=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r,["session","addresses"])||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),e.session&&(n.session=new _(e.session)),n}return L(e,t),e.prototype.isAdministrator=function(){return 0===this.level},e.prototype.isDriver=function(){return 4===this.level},e.prototype.isBusinessOwner=function(){return 2===this.level},e.prototype.isCustomer=function(){return 3===this.level},e.prototype.getAccessToken=function(){var t;return null===(t=this.session)||void 0===t?void 0:t.access_token},e.prototype.getId=function(){return this.id},e}(h),k=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),T=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r,[])||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return k(e,t),e.prototype.getId=function(){return this.id},e}(h),I=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),A=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},C=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},N=function(t){function e(e,r,n){void 0===n&&(n=null);var o=t.call(this,e)||this;return o.ordering=e,o.userId=r,o.addressId=n,o}return I(e,t),e.prototype.setModelId=function(t){this.addressId=t},e.prototype.get=function(t){return void 0===t&&(t={}),A(this,void 0,void 0,(function(){var e;return C(this,(function(r){switch(r.label){case 0:if(!this.userId)throw new Error("You must provide the `userId` param. Example ordering.users(userId).addresses(addressId?).get()");if(this.addressId&&this.conditions)throw new Error("The `where` function is not compatible with users(userId).addresses(addressId). Example ordering.users(userId).addresses().where(contitions).get()");return e="/users/"+this.userId+"/addresses"+(this.addressId?"/"+this.addressId:""),[4,this.makeRequest("GET",e,void 0,T,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),A(this,void 0,void 0,(function(){var r,n,o,i,a;return C(this,(function(c){switch(c.label){case 0:if(!this.userId)throw new Error("You must provide the `userId` param. Example ordering.users(userId).addresses(addressId?).save(changes)");return r="/users/"+this.userId+"/addresses"+(this.addressId?"/"+this.addressId:""),[4,this.makeRequest(this.addressId?"PUT":"POST",r,t,T,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.addressId||(this.addressId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),A(this,void 0,void 0,(function(){var e;return C(this,(function(r){switch(r.label){case 0:if(!this.userId)throw new Error("`userId` is require to delete. Example: ordering.users(userId).addresses(addressId).delete()");if(!this.addressId)throw new Error("`addressId` is require to delete. Example: ordering.users(userId).addresses(addressId).delete()");return e="/users/"+this.userId+"/addresses/"+this.addressId,[4,this.makeRequest("DELETE",e,void 0,T,t)];case 1:return[2,r.sent()]}}))}))},e}(g),D=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),G=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r,["driver"])||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return D(e,t),e}(h),F=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),U=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},B=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},R=function(t){function e(e,r){var n=t.call(this,e)||this;return n.ordering=e,n.driver_id=r,n}return F(e,t),e.prototype.setModelId=function(t){this.driver_id=t},e.prototype.get=function(t){return void 0===t&&(t={}),U(this,void 0,void 0,(function(){var e;return B(this,(function(r){switch(r.label){case 0:if(!this.driver_id)throw new Error("You must provide the `dfriver_id` param. Example ordering.users(driver_id).driverLocations().get()");if(this.driver_id&&this.conditions)throw new Error("The `where` function is not compatible with users(driver_id). Example ordering.users(driver_id).where(contitions).driverLocations().get()");return e="/users"+(this.driver_id?"/"+this.driver_id:"/locations"),[4,this.makeRequest("GET",e,void 0,G,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return U(this,void 0,void 0,(function(){var r;return B(this,(function(n){switch(n.label){case 0:if(!this.driver_id)throw new Error("You must provide the `dfriver_id` param. Example ordering.users(driver_id).driverLocations().save(changes)");if(!t.location.lat||!t.location.lng)throw new Error("You must provide the `location` param. Example ordering.users(driver_id).driverLocations().save({ lat: 10, lng: 10})");return r="/users"+(this.driver_id?"/"+this.driver_id+"/locations":""),[4,this.makeRequest("POST",r,t,G,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.delete=function(t){throw new Error("Method not implemented.")},e}(g),M=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},z=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},$=function(t){function e(e,r){void 0===r&&(r=null);var n=t.call(this,e)||this;return n.userId=r,n}return M(e,t),e.prototype.setModelId=function(t){this.userId=t},e.prototype.get=function(t){return void 0===t&&(t={}),Y(this,void 0,void 0,(function(){var e;return z(this,(function(r){switch(r.label){case 0:if(this.userId&&this.conditions)throw new Error("The `where` function is not compatible with users(userId). Example ordering.users().where(contitions).get()");return e="/users"+(this.userId?"/"+this.userId:""),[4,this.makeRequest("GET",e,void 0,P,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),Y(this,void 0,void 0,(function(){var r,n,o,i,a;return z(this,(function(c){switch(c.label){case 0:return r="/users"+(this.userId?"/"+this.userId:""),[4,this.makeRequest("POST",r,t,P,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.userId||(this.userId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),Y(this,void 0,void 0,(function(){var e;return z(this,(function(r){switch(r.label){case 0:if(!this.userId)throw new Error("`userId` is require to delete. Example: ordering.users(userId).delete()");return e="/users/"+this.userId,[4,this.makeRequest("DELETE",e,void 0,P,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.auth=function(t,e){return void 0===e&&(e={}),Y(this,void 0,void 0,(function(){var r,n,o,i;return z(this,(function(a){switch(a.label){case 0:return"/auth",[4,this.makeRequest("POST","/auth",t,P,e)];case 1:return r=a.sent(),n=r.content,o=n.error,i=n.result,o||(this.userId=i.id),[2,r]}}))}))},e.prototype.logout=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Y(this,void 0,void 0,(function(){return z(this,(function(r){switch(r.label){case 0:return"/auth/logout",[4,this.makeRequest("POST","/auth/logout",t,P,e)];case 1:return[2,r.sent()]}}))}))},e.prototype.forgotPassword=function(t,e){return void 0===e&&(e={}),Y(this,void 0,void 0,(function(){return z(this,(function(r){switch(r.label){case 0:return"/users/forgot",[4,this.makeRequest("POST","/users/forgot",t,P,e)];case 1:return[2,r.sent()]}}))}))},e.prototype.resetPassword=function(t,e){return void 0===e&&(e={}),Y(this,void 0,void 0,(function(){return z(this,(function(r){switch(r.label){case 0:return"/users/reset",[4,this.makeRequest("POST","/users/reset",t,P,e)];case 1:return[2,r.sent()]}}))}))},e.prototype.authFacebook=function(t,e){return void 0===e&&(e={}),Y(this,void 0,void 0,(function(){var r,n,o,i;return z(this,(function(a){switch(a.label){case 0:return"/auth/facebook",[4,this.makeRequest("POST","/auth/facebook",t,P,e)];case 1:return r=a.sent(),n=r.content,o=n.error,i=n.result,o||(this.userId=i.id),[2,r]}}))}))},e.prototype.authGoogle=function(t,e){return void 0===e&&(e={}),Y(this,void 0,void 0,(function(){var r,n,o,i;return z(this,(function(a){switch(a.label){case 0:return"/auth/google",[4,this.makeRequest("POST","/auth/google",t,P,e)];case 1:return r=a.sent(),n=r.content,o=n.error,i=n.result,o||(this.userId=i.id),[2,r]}}))}))},e.prototype.alerts=function(){var t=this;if(!this.userId)throw new Error("`userId` is require get alerts. Example: ordering.users(userId).alerts().get()");return{get:function(e){return void 0===e&&(e={}),Y(t,void 0,void 0,(function(){var t;return z(this,(function(r){switch(r.label){case 0:return t="/users/"+this.userId+"/alerts",[4,this.makeRequest("GET",t,void 0,void 0,e)];case 1:return[2,r.sent()]}}))}))}}},e.prototype.addresses=function(t){if(!this.userId)throw new Error("`userId` is require to use API addresses. Example: ordering.users(userId).addresses().get()");return new N(this.ordering,this.userId,t)},e.prototype.driverLocations=function(){if(!this.userId)throw new Error("`userId` is require to use API addresses. Example: ordering.users(userId).driverLocations().get()");return new R(this.ordering,this.userId)},e}(g),q=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),J=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r)||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return q(e,t),e.prototype.getId=function(){return this.id},e}(h),V=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),H=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},W=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},K=function(t){function e(e,r){var n=t.call(this,e)||this;return n.fieldId=r,n}return V(e,t),e.prototype.setModelId=function(t){this.fieldId=t},e.prototype.get=function(t){return void 0===t&&(t={}),H(this,void 0,void 0,(function(){var e;return W(this,(function(r){switch(r.label){case 0:if(this.fieldId&&this.conditions)throw new Error("The `where` function is not compatible with validationFields(fieldId). Example ordering.validationFields().where(contitions).get()");return e="/validationfields"+(this.fieldId?"/"+this.fieldId:""),[4,this.makeRequest("GET",e,void 0,J,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),H(this,void 0,void 0,(function(){var r,n,o,i,a;return W(this,(function(c){switch(c.label){case 0:return r="/validationfields"+(this.fieldId?"/"+this.fieldId:""),[4,this.makeRequest(this.fieldId?"PUT":"POST",r,t,J,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.fieldId||(this.fieldId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),H(this,void 0,void 0,(function(){var e;return W(this,(function(r){switch(r.label){case 0:if(!this.fieldId)throw new Error("`fieldId` is require to delete. Example: ordering.validationFields(fieldId).delete()");return e="/validationfields/"+this.fieldId,[4,this.makeRequest("DELETE",e,void 0,J,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.toType=function(t){return this.conditions=[{attribute:"validate",value:t}],this},e.prototype.toCheckout=function(){return this.toType("checkout")},e.prototype.toAddress=function(){return this.toType("address")},e}(g),Z=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),X=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r,["customer","business"])||this,o=["total","subtotal"];return Object.entries(e).map((function(t){var e=t[0],r=t[1];o.includes(e)||(n[e]=r)})),n}return Z(e,t),e.prototype.getId=function(){return this.id},Object.defineProperty(e.prototype,"subtotal",{get:function(){return this.products?this.products.reduce((function(t,e){var r=e.options.reduce((function(t,e){return t+e.suboptions.reduce((function(t,r){return t+(r.position&&"whole"!==r.position?r.half_price:r.price)*(e.allow_suboption_quantity&&r.quantity>1?r.quantity:1)}),0)}),0);return t+(e.price+r)*e.quantity}),0):0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deliveryFee",{get:function(){return this.delivery_type&&1!==this.delivery_type?0:this.delivery_zone_price},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serviceFee",{get:function(){return(this.subtotal-this.discount)*(this.service_fee/100)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalTax",{get:function(){return this.subtotal*this.tax/(this.tax+100)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalDriverTip",{get:function(){return(this.subtotal-this.totalTax)*(this.driver_tip/100)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"total",{get:function(){return this.subtotal+this.serviceFee+this.deliveryFee+this.totalDriverTip+(2===this.tax_type?this.totalTax:0)-this.discount},enumerable:!1,configurable:!0}),e}(h),Q=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tt=function(t){function e(e,r){void 0===e&&(e={}),void 0===r&&(r=null);var n=t.call(this,e,r)||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return Q(e,t),e.prototype.getId=function(){return this.id},e}(h),et=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),rt=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},nt=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},ot=function(t){function e(e,r,n){void 0===n&&(n=null);var o=t.call(this,e)||this;return o.ordering=e,o.orderId=r,o.messageId=n,o}return et(e,t),e.prototype.setModelId=function(t){this.messageId=t},e.prototype.get=function(t){return void 0===t&&(t={}),rt(this,void 0,void 0,(function(){var e;return nt(this,(function(r){switch(r.label){case 0:if(!this.orderId)throw new Error("You must provide the `orderId` param. Example ordering.orders(orderId).messages(messageId?).get()");if(this.messageId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(orderId).messages(messageId). Example ordering.orders(orderId).messages().where(contitions).get()");return e="/orders/"+this.orderId+"/messages"+(this.messageId?"/"+this.messageId:""),[4,this.makeRequest("GET",e,void 0,tt,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),rt(this,void 0,void 0,(function(){var r,n,o,i,a;return nt(this,(function(c){switch(c.label){case 0:if(!this.orderId)throw new Error("You must provide the `orderId` param. Example ordering.orders(orderId).messages(messageId?).save(changes)");if(!this.messageId)throw new Error("ordering.orders(orderId).messages(messageId).save(changes) is not implemented.");return r="/orders/"+this.orderId+"/messages"+(this.messageId?"/"+this.messageId:""),[4,this.makeRequest("POST",r,t,tt,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.messageId||(this.messageId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),rt(this,void 0,void 0,(function(){var e;return nt(this,(function(r){switch(r.label){case 0:if(!this.orderId)throw new Error("ordering.orders(orderId).messages(messageId).delete() is not implemented.");if(!this.messageId)throw new Error("ordering.orders(orderId).messages(messageId).delete() is not implemented.");return e="/orders/"+this.orderId+"/messages/"+this.messageId,[4,this.makeRequest("DELETE",e,void 0,tt,t)];case 1:return[2,r.sent()]}}))}))},e}(g),it=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),at=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},ct=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},ut=function(t){function e(e,r){var n=t.call(this,e)||this;return n.orderId=r,n}return it(e,t),e.prototype.setModelId=function(t){this.orderId=t},e.prototype.get=function(t){return void 0===t&&(t={}),at(this,void 0,void 0,(function(){var e;return ct(this,(function(r){switch(r.label){case 0:if(this.orderId&&this.conditions)throw new Error("The `where` function is not compatible with orders(orderId). Example ordering.orders().where(contitions).get()");return e="/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest("GET",e,void 0,X,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),at(this,void 0,void 0,(function(){var r,n,o,i,a;return ct(this,(function(c){switch(c.label){case 0:return r="/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest(this.orderId?"PUT":"POST",r,t,X,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.orderId||(this.orderId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),at(this,void 0,void 0,(function(){var e;return ct(this,(function(r){switch(r.label){case 0:if(!this.orderId)throw new Error("`orderId` is require to delete. Example: ordering.orders(orderId).delete()");return e="/orders/"+this.orderId,[4,this.makeRequest("DELETE",e,void 0,X,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.summary=function(t){return void 0===t&&(t={}),at(this,void 0,void 0,(function(){return ct(this,(function(e){switch(e.label){case 0:if(this.orderId)throw new Error("`orderId` is NOT require to summary API. Example: ordering.orders().summary()");return"/orders/dashboard",[4,this.makeRequest("GET","/orders/dashboard",void 0,void 0,t)];case 1:return[2,e.sent()]}}))}))},e.prototype.messages=function(t){if(!this.orderId)throw new Error("`orderId` is require to use API messages. Example: ordering.orders(orderId).messages().get()");if("number"!=typeof this.orderId)throw new Error("`orderId` must be a number to use API messages. Example: ordering.orders(orderId).messages().get()");return new ot(this.ordering,this.orderId,t)},e.prototype.reorder=function(t){return void 0===t&&(t={}),at(this,void 0,void 0,(function(){var e;return ct(this,(function(r){switch(r.label){case 0:if(!this.orderId)throw new Error("`orderId` is require to delete. Example: ordering.orders(orderId).reorder()");return e="/orders/"+this.orderId+"/reorder",[4,this.makeRequest("POST",e,void 0,void 0,t)];case 1:return[2,r.sent()]}}))}))},e}(g),st=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lt=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r,["business"])||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return st(e,t),e}(h),ft=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pt=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},ht=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},dt=function(t){function e(e,r){var n=t.call(this,e)||this;return n.orderId=r,n}return ft(e,t),e.prototype.setModelId=function(t){this.orderId=t},e.prototype.get=function(t){return void 0===t&&(t={}),pt(this,void 0,void 0,(function(){var e;return ht(this,(function(r){switch(r.label){case 0:if(this.orderId&&this.conditions)throw new Error("The `where` function is not compatible with controls(orderId). Example ordering.orders().where(contitions).get()");return e="/controls/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest("GET",e,void 0,lt,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){throw new Error("Method not implemented.")},e.prototype.delete=function(t){throw new Error("Method not implemented.")},e}(g),yt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vt=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r,[])||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return yt(e,t),e.prototype.getId=function(){return this.id},e}(h),mt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),gt=function(t){function e(e,r){void 0===e&&(e={}),void 0===r&&(r=null);var n=t.call(this,e,r)||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return mt(e,t),e.prototype.getId=function(){return this.id},e}(h),bt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wt=function(t){function e(e,r){var n;void 0===e&&(e={}),void 0===r&&(r=null);var o=t.call(this,e,r)||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];o[e]=r})),o.products=null===(n=o.products)||void 0===n?void 0:n.map((function(t){return new gt(t)})),o}return bt(e,t),e.prototype.getId=function(){return this.id},e}(h),Ot=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xt=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},Et=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},jt=function(t){function e(e,r,n,o){void 0===o&&(o=null);var i=t.call(this,e)||this;return i.ordering=e,i.businessId=r,i.categoryId=n,i.productId=o,i}return Ot(e,t),e.prototype.setModelId=function(t){this.productId=t},e.prototype.get=function(t){return void 0===t&&(t={}),xt(this,void 0,void 0,(function(){var e;return Et(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId).products(productId?).get()");if(this.productId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).categories(categoryId).products(productId). Example ordering.businesses(businessId).categories(categoryId).products().where(contitions).get()");return e="/business/"+this.businessId+"/categories/"+this.categoryId+"/products"+(this.productId?"/"+this.productId:""),[4,this.makeRequest("GET",e,void 0,gt,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),xt(this,void 0,void 0,(function(){var r,n,o,i,a;return Et(this,(function(c){switch(c.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId).products(productId?).save(changes)");return r="/business/"+this.businessId+"/categories/"+this.categoryId+"/products"+(this.productId?"/"+this.productId:""),[4,this.makeRequest("POST",r,t,gt,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.productId||(this.productId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),xt(this,void 0,void 0,(function(){var e;return Et(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");if(!this.categoryId)throw new Error("`categoryId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");if(!this.productId)throw new Error("`productId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");return e="/business/"+this.businessId+"/categories/"+this.categoryId+"/products/"+this.productId,[4,this.makeRequest("DELETE",e,void 0,gt,t)];case 1:return[2,r.sent()]}}))}))},e}(g),St=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lt=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},_t=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Pt=function(t){function e(e,r,n){void 0===n&&(n=null);var o=t.call(this,e)||this;return o.ordering=e,o.businessId=r,o.categoryId=n,o}return St(e,t),e.prototype.setModelId=function(t){this.categoryId=t},e.prototype.get=function(t){return void 0===t&&(t={}),Lt(this,void 0,void 0,(function(){var e;return _t(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId?).get()");if(this.categoryId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).categories(categoryId). Example ordering.businesses(businessId).categories().where(contitions).get()");return e="/business/"+this.businessId+"/categories"+(this.categoryId?"/"+this.categoryId:""),[4,this.makeRequest("GET",e,void 0,wt,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),Lt(this,void 0,void 0,(function(){var r,n,o,i,a;return _t(this,(function(c){switch(c.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId?).save(changes)");return r="/business/"+this.businessId+"/categories"+(this.categoryId?"/"+this.categoryId:""),[4,this.makeRequest("POST",r,t,wt,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.categoryId||(this.categoryId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),Lt(this,void 0,void 0,(function(){var e;return _t(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).delete()");if(!this.categoryId)throw new Error("`categoryId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).delete()");return e="/business/"+this.businessId+"/categories/"+this.categoryId,[4,this.makeRequest("DELETE",e,void 0,wt,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.products=function(t){if(!this.categoryId)throw new Error("`categoryId` is require to use API products. Example: ordering.businesses(businessId).categories(categoryId).products().get()");return new jt(this.ordering,this.businessId,this.categoryId,t)},e}(g),kt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tt=function(t){function e(e,r){var n;void 0===e&&(e={}),void 0===r&&(r=null);var o=t.call(this,e,r,["products"])||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];o[e]=r})),o.products=null===(n=o.products)||void 0===n?void 0:n.map((function(t){return new gt(t)})),o}return kt(e,t),e.prototype.getId=function(){return this.id},e}(h),It=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),At=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},Ct=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Nt=function(t){function e(e,r,n){void 0===n&&(n=null);var o=t.call(this,e)||this;return o.ordering=e,o.businessId=r,o.menuId=n,o}return It(e,t),e.prototype.setModelId=function(t){this.menuId=t},e.prototype.get=function(t){return void 0===t&&(t={}),At(this,void 0,void 0,(function(){var e;return Ct(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).menus(menuId?).get()");if(this.menuId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).menus(menuId). Example ordering.businesses(businessId).menus().where(contitions).get()");return e="/business/"+this.businessId+"/menus"+(this.menuId?"/"+this.menuId:""),[4,this.makeRequest("GET",e,void 0,Tt,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),At(this,void 0,void 0,(function(){var r,n,o,i,a;return Ct(this,(function(c){switch(c.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).menus(menuId?).save(changes)");return r="/business/"+this.businessId+"/menus"+(this.menuId?"/"+this.menuId:""),[4,this.makeRequest(this.menuId?"PUT":"POST",r,t,Tt,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.menuId||(this.menuId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),At(this,void 0,void 0,(function(){var e;return Ct(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).menus(menuId).delete()");if(!this.menuId)throw new Error("`menuId` is require to delete. Example: ordering.businesses(businessId).menus(menuId).delete()");return e="/business/"+this.businessId+"/menus/"+this.menuId,[4,this.makeRequest("DELETE",e,void 0,Tt,t)];case 1:return[2,r.sent()]}}))}))},e}(g),Dt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gt=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},Ft=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Ut=function(t){function e(e,r,n){void 0===n&&(n=null);var o=t.call(this,e)||this;return o.ordering=e,o.businessId=r,o.productId=n,o}return Dt(e,t),e.prototype.setModelId=function(t){this.productId=t},e.prototype.get=function(t){return void 0===t&&(t={}),Gt(this,void 0,void 0,(function(){var e;return Ft(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).products().get()");return e="/business/"+this.businessId+"/products",[4,this.makeRequest("GET",e,void 0,gt,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){throw void 0===e&&(e={}),new Error("Method not implemented.")},e.prototype.delete=function(t){throw void 0===t&&(t={}),new Error("Method not implemented.")},e}(g),Bt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rt=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},Mt=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Yt=function(t){function e(e,r){var n=t.call(this,e)||this;return n.businessId=r,n}return Bt(e,t),e.prototype.setModelId=function(t){this.businessId=t},e.prototype.get=function(t){return void 0===t&&(t={}),Rt(this,void 0,void 0,(function(){var e,r,n,o,i;return Mt(this,(function(a){switch(a.label){case 0:if(this.businessId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId). Example ordering.businesses().where(contitions).get()");return e=t.advancedSearch?"/search":"/business"+(this.businessId?"/"+this.businessId:""),[4,this.makeRequest("GET",e,void 0,vt,t)];case 1:return r=a.sent(),n=r.content,o=n.error,i=n.result,o||this.businessId||(this.businessId=i.id),[2,r]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),Rt(this,void 0,void 0,(function(){var r,n,o,i,a;return Mt(this,(function(c){switch(c.label){case 0:return r="/business"+(this.businessId?"/"+this.businessId:""),[4,this.makeRequest("POST",r,t,vt,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.businessId||(this.businessId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),Rt(this,void 0,void 0,(function(){var e;return Mt(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).delete()");return e="/business/"+this.businessId,[4,this.makeRequest("DELETE",e,void 0,null,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.validateCart=function(t,e){return void 0===e&&(e={}),Rt(this,void 0,void 0,(function(){var r;return Mt(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to validateCart. Example: ordering.businesses(businessId).validateCart(cart)");return r="/business/"+this.businessId+"/validate_cart",[4,this.makeRequest("GET",r,t,void 0,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.products=function(){if(!this.businessId)throw new Error("`businessId` is require to products. Example: ordering.businesses(businessId).products().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API menus. Example: ordering.businesses(businessId).products().get()");return new Ut(this.ordering,this.businessId)},e.prototype.categories=function(t){if(!this.businessId)throw new Error("`businessId` is require to use API categories. Example: ordering.businesses(businessId).categories().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API categories. Example: ordering.businesses(businessId).categories().get()");return new Pt(this.ordering,this.businessId,t)},e.prototype.menus=function(t){if(!this.businessId)throw new Error("`businessId` is require to use API menus. Example: ordering.businesses(businessId).menus().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API menus. Example: ordering.businesses(businessId).menus().get()");return new Nt(this.ordering,this.businessId,t)},e}(g),zt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$t=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r,["business"])||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return zt(e,t),e}(h),qt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jt=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},Vt=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Ht=function(t){function e(e){return t.call(this,e)||this}return qt(e,t),e.prototype.setModelId=function(t){this.driversGroupsId=t},e.prototype.get=function(t){return void 0===t&&(t={}),Jt(this,void 0,void 0,(function(){var e;return Vt(this,(function(r){switch(r.label){case 0:if(this.driversGroupsId&&this.conditions)throw new Error("The `where` function is not compatible with orders(driversGroupsId). Example ordering.orders().where(contitions).get()");return e="/drivergroups"+(this.driversGroupsId?"/"+this.driversGroupsId:""),[4,this.makeRequest("GET",e,void 0,$t,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){throw new Error("Method not implemented.")},e.prototype.delete=function(t){throw new Error("Method not implemented.")},e}(g),Wt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kt=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r)||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return Wt(e,t),e.prototype.getId=function(){return this.id},e}(h),Zt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xt=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},Qt=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},te=function(t){function e(e,r){var n=t.call(this,e)||this;return n.configId=r,n}return Zt(e,t),e.prototype.setModelId=function(t){this.configId=t},e.prototype.get=function(t){return void 0===t&&(t={}),Xt(this,void 0,void 0,(function(){var e;return Qt(this,(function(r){switch(r.label){case 0:if(this.configId&&this.conditions)throw new Error("The `where` function is not compatible with configs(configId). Example ordering.configs().where(contitions).get()");return e="/configs"+(this.configId?"/"+this.configId:""),[4,this.makeRequest("GET",e,void 0,Kt,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),Xt(this,void 0,void 0,(function(){var r,n,o,i,a;return Qt(this,(function(c){switch(c.label){case 0:return r="/configs"+(this.configId?"/"+this.configId:""),[4,this.makeRequest(this.configId?"PUT":"POST",r,t,Kt,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.configId||(this.configId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),Xt(this,void 0,void 0,(function(){var e;return Qt(this,(function(r){switch(r.label){case 0:if(!this.configId)throw new Error("`configId` is require to delete. Example: ordering.configs(configId).delete()");return e="/configs/"+this.configId,[4,this.makeRequest("DELETE",e,void 0,null,t)];case 1:return[2,r.sent()]}}))}))},e}(g),ee=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),re=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r)||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return ee(e,t),e.prototype.getId=function(){return this.id},e}(h),ne=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oe=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},ie=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},ae=function(t){function e(e,r){var n=t.call(this,e)||this;return n.translationId=r,n}return ne(e,t),e.prototype.setModelId=function(t){this.translationId=t},e.prototype.get=function(t){return void 0===t&&(t={}),oe(this,void 0,void 0,(function(){var e;return ie(this,(function(r){switch(r.label){case 0:if(this.translationId&&this.conditions)throw new Error("The `where` function is not compatible with translations(translationId). Example ordering.translations().where(contitions).get()");return e="/translations"+(this.translationId?"/"+this.translationId:""),[4,this.makeRequest("GET",e,void 0,re,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),oe(this,void 0,void 0,(function(){var r,n,o,i,a;return ie(this,(function(c){switch(c.label){case 0:return r="/translations"+(this.translationId?"/"+this.translationId:""),[4,this.makeRequest(this.translationId?"PUT":"POST",r,t,re,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.translationId||(this.translationId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),oe(this,void 0,void 0,(function(){var e;return ie(this,(function(r){switch(r.label){case 0:if(!this.translationId)throw new Error("`translationId` is require to delete. Example: ordering.translations(translationId).delete()");return e="/translations/"+this.translationId,[4,this.makeRequest("DELETE",e,void 0,re,t)];case 1:return[2,r.sent()]}}))}))},e}(g),ce=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ue=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r,["created_at","updated_at"])||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r,["updated_at","created_at"].includes(e)&&(n[e]=new Date(r))})),n}return ce(e,t),e.prototype.getId=function(){return this.id},e}(h),se=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),le=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},fe=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},pe=function(t){function e(e,r){var n=t.call(this,e)||this;return n.pageId=r,n}return se(e,t),e.prototype.setModelId=function(t){this.pageId=t},e.prototype.get=function(t){return void 0===t&&(t={}),le(this,void 0,void 0,(function(){var e;return fe(this,(function(r){switch(r.label){case 0:if(this.pageId&&this.conditions)throw new Error("The `where` function is not compatible with pages(pageId). Example ordering.pages().where(contitions).get()");return e="/pages"+(this.pageId?"/"+this.pageId:""),[4,this.makeRequest("GET",e,void 0,ue,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),le(this,void 0,void 0,(function(){var r,n,o,i,a;return fe(this,(function(c){switch(c.label){case 0:return r="/pages"+(this.pageId?"/"+this.pageId:""),[4,this.makeRequest(this.pageId?"PUT":"POST",r,t,ue,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.pageId||(this.pageId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),le(this,void 0,void 0,(function(){var e;return fe(this,(function(r){switch(r.label){case 0:if(!this.pageId)throw new Error("`pageId` is require to delete. Example: ordering.pages(pageId).delete()");return e="/pages/"+this.pageId,[4,this.makeRequest("DELETE",e,void 0,null,t)];case 1:return[2,r.sent()]}}))}))},e}(g),he=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),de=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r)||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return he(e,t),e.prototype.getId=function(){return this.id},e}(h),ye=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ve=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r)||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return ye(e,t),e.prototype.getId=function(){return this.id},e}(h),me=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ge=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},be=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},we=function(t){function e(e,r,n){void 0===n&&(n=null);var o=t.call(this,e)||this;return o.ordering=e,o.countryId=r,o.cityId=n,o}return me(e,t),e.prototype.setModelId=function(t){this.cityId=t},e.prototype.get=function(t){return void 0===t&&(t={}),ge(this,void 0,void 0,(function(){var e;return be(this,(function(r){switch(r.label){case 0:if(!this.countryId)throw new Error("You must provide the `countryId` param. Example ordering.countries(countryId).cities(cityId?).get()");if(this.cityId&&this.conditions)throw new Error("The `where` function is not compatible with countries(countryId).cities(cityId). Example ordering.countries(countryId).cities().where(contitions).get()");return e="/countries/"+this.countryId+"/cities"+(this.cityId?"/"+this.cityId:""),[4,this.makeRequest("GET",e,void 0,ve,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),ge(this,void 0,void 0,(function(){var r,n,o,i,a;return be(this,(function(c){switch(c.label){case 0:if(!this.countryId)throw new Error("You must provide the `countryId` param. Example ordering.countries(countryId).cities(cityId?).save(changes)");return r="/countries/"+this.countryId+"/cities"+(this.cityId?"/"+this.cityId:""),[4,this.makeRequest(this.cityId?"PUT":"POST",r,t,ve,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.cityId||(this.cityId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),ge(this,void 0,void 0,(function(){var e;return be(this,(function(r){switch(r.label){case 0:if(!this.countryId)throw new Error("`countryId` is require to delete. Example: ordering.countries(countryId).cities(cityId).delete()");if(!this.cityId)throw new Error("`cityId` is require to delete. Example: ordering.countries(countryId).cities(cityId).delete()");return e="/countries/"+this.countryId+"/cities/"+this.cityId,[4,this.makeRequest("DELETE",e,void 0,void 0,t)];case 1:return[2,r.sent()]}}))}))},e}(g),Oe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xe=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},Ee=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},je=function(t){function e(e,r){var n=t.call(this,e)||this;return n.countryId=r,n}return Oe(e,t),e.prototype.setModelId=function(t){this.countryId=t},e.prototype.get=function(t){return void 0===t&&(t={}),xe(this,void 0,void 0,(function(){var e;return Ee(this,(function(r){switch(r.label){case 0:if(this.countryId&&this.conditions)throw new Error("The `where` function is not compatible with countries(countryId). Example ordering.countries().where(contitions).get()");return e="/countries"+(this.countryId?"/"+this.countryId:""),[4,this.makeRequest("GET",e,void 0,de,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),xe(this,void 0,void 0,(function(){var r,n,o,i,a;return Ee(this,(function(c){switch(c.label){case 0:return r="/countries"+(this.countryId?"/"+this.countryId:""),[4,this.makeRequest(this.countryId?"PUT":"POST",r,t,de,e)];case 1:return n=c.sent(),o=n.content,i=o.error,a=o.result,i||this.countryId||(this.countryId=a.id),[2,n]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),xe(this,void 0,void 0,(function(){var e;return Ee(this,(function(r){switch(r.label){case 0:if(!this.countryId)throw new Error("`countryId` is require to delete. Example: ordering.countries(countryId).delete()");return e="/countries/"+this.countryId,[4,this.makeRequest("DELETE",e,void 0,null,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.cities=function(t){if(!this.countryId)throw new Error("`countryId` is require to use API cities. Example: ordering.countries(countryId).cities().get()");return new we(this.ordering,this.countryId,t)},e}(g),Se=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Le=function(t){function e(e,r){void 0===e&&(e={}),void 0===r&&(r=null);var n=t.call(this,e,r)||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return Se(e,t),e.prototype.getId=function(){return this.id},e}(h),_e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pe=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},ke=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Te=function(t){function e(e,r){var n=t.call(this,e)||this;return n.orderOptionId=r,n}return _e(e,t),e.prototype.setModelId=function(t){this.orderOptionId=t},e.prototype.get=function(t){return void 0===t&&(t={}),Pe(this,void 0,void 0,(function(){return ke(this,(function(e){switch(e.label){case 0:if(this.orderOptionId)throw new Error("ordering.orderOptions(orderOptionId).get() is not implemented");if(this.orderOptionId&&this.conditions)throw new Error("The `where` function is not compatible with countries(orderOptionId). Example ordering.orderOptions().where(contitions).get()");return"/order_options",[4,this.makeRequest("GET","/order_options",void 0,Le,t)];case 1:return[2,e.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),Pe(this,void 0,void 0,(function(){var r,n,o,i;return ke(this,(function(a){switch(a.label){case 0:return"/order_options",[4,this.makeRequest("PUT","/order_options",t,Le,e)];case 1:return r=a.sent(),n=r.content,o=n.error,i=n.result,o||this.orderOptionId||(this.orderOptionId=i.id),[2,r]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),Pe(this,void 0,void 0,(function(){var e;return ke(this,(function(r){switch(r.label){case 0:if(this.orderOptionId||!this.orderOptionId)throw new Error("ordering.orderOptions(orderOptionId).delete() is not implemented.");return e="/order_options/"+this.orderOptionId,[4,this.makeRequest("DELETE",e,void 0,null,t)];case 1:return[2,r.sent()]}}))}))},e}(g),Ie=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ae=function(t){function e(e,r){void 0===e&&(e={}),void 0===r&&(r=null);var n=t.call(this,e,r)||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return Ie(e,t),e.prototype.getId=function(){return this.id},e}(h),Ce=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ne=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},De=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Ge=function(t){function e(e,r){var n=t.call(this,e)||this;return n.cartId=r,n}return Ce(e,t),e.prototype.setModelId=function(t){this.cartId=t},e.prototype.get=function(t){return void 0===t&&(t={}),Ne(this,void 0,void 0,(function(){var e;return De(this,(function(r){switch(r.label){case 0:if(this.cartId&&this.conditions)throw new Error("The `where` function is not compatible with carts(cartId). Example ordering.carts().where(contitions).get()");return e="/carts"+(this.cartId?"/"+this.cartId:""),[4,this.makeRequest("GET",e,void 0,Ae,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.getBusinesses=function(t){return void 0===t&&(t={}),Ne(this,void 0,void 0,(function(){var e;return De(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).getBusinesses(options).");return e="/carts/"+this.cartId+"/businesses",[4,this.makeRequest("GET",e,void 0,Ae,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.set=function(t,e){return void 0===e&&(e={}),Ne(this,void 0,void 0,(function(){var r;return De(this,(function(n){switch(n.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirm(options).");return r="/carts/"+this.cartId,[4,this.makeRequest("PUT",r,t,Ae,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),Ne(this,void 0,void 0,(function(){var t,e,r,n;return De(this,(function(o){switch(o.label){case 0:throw new Error("ordering.carts(cartId?).save() is not implemented.");case 1:return t=o.sent(),e=t.content,r=e.error,n=e.result,r||this.cartId||(this.cartId=n.id),[2,t]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),Ne(this,void 0,void 0,(function(){return De(this,(function(t){switch(t.label){case 0:throw new Error("ordering.carts(cartId).delete() is not implemented.");case 1:return[2,t.sent()]}}))}))},e.prototype.addProduct=function(t,e){return void 0===e&&(e={}),Ne(this,void 0,void 0,(function(){return De(this,(function(r){switch(r.label){case 0:return"/carts/add_product",[4,this.makeRequest("POST","/carts/add_product",t,Ae,e)];case 1:return[2,r.sent()]}}))}))},e.prototype.removeProduct=function(t,e){return void 0===e&&(e={}),Ne(this,void 0,void 0,(function(){return De(this,(function(r){switch(r.label){case 0:return"/carts/remove_product",[4,this.makeRequest("POST","/carts/remove_product",t,Ae,e)];case 1:return[2,r.sent()]}}))}))},e.prototype.updateProduct=function(t,e){return void 0===e&&(e={}),Ne(this,void 0,void 0,(function(){return De(this,(function(r){switch(r.label){case 0:return"/carts/update_product",[4,this.makeRequest("POST","/carts/update_product",t,Ae,e)];case 1:return[2,r.sent()]}}))}))},e.prototype.applyCoupon=function(t,e){return void 0===e&&(e={}),Ne(this,void 0,void 0,(function(){return De(this,(function(r){switch(r.label){case 0:return"/carts/apply_coupon",[4,this.makeRequest("POST","/carts/apply_coupon",t,Ae,e)];case 1:return[2,r.sent()]}}))}))},e.prototype.changeDriverTip=function(t,e){return void 0===e&&(e={}),Ne(this,void 0,void 0,(function(){return De(this,(function(r){switch(r.label){case 0:return"/carts/change_driver_tip",[4,this.makeRequest("POST","/carts/change_driver_tip",t,Ae,e)];case 1:return[2,r.sent()]}}))}))},e.prototype.changePaymethod=function(t,e){return void 0===e&&(e={}),Ne(this,void 0,void 0,(function(){return De(this,(function(r){switch(r.label){case 0:return"/carts/change_paymethod",[4,this.makeRequest("POST","/carts/change_paymethod",t,Ae,e)];case 1:return[2,r.sent()]}}))}))},e.prototype.place=function(t,e){return void 0===e&&(e={}),Ne(this,void 0,void 0,(function(){var r;return De(this,(function(n){switch(n.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).place(data, options).");return r="/carts/"+this.cartId+"/place",[4,this.makeRequest("POST",r,t,Ae,e)];case 1:return[2,n.sent()]}}))}))},e.prototype.confirm=function(t){return void 0===t&&(t={}),Ne(this,void 0,void 0,(function(){var e;return De(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirm(options).");return e="/carts/"+this.cartId+"/confirm",[4,this.makeRequest("POST",e,{},Ae,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.confirmWithData=function(t,e){return void 0===e&&(e={}),Ne(this,void 0,void 0,(function(){var r;return De(this,(function(n){switch(n.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirmWithData(data, options).");return r="/carts/"+this.cartId+"/confirm",[4,this.makeRequest("POST",r,t,Ae,e)];case 1:return[2,n.sent()]}}))}))},e}(g),Fe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ue=function(t){function e(e,r){void 0===e&&(e={});var n=t.call(this,e,r,[])||this;return Object.entries(e).map((function(t){var e=t[0],r=t[1];n[e]=r})),n}return Fe(e,t),e}(h),Be=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},t(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Re=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},Me=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Ye=function(t){function e(e,r,n,o){void 0===o&&(o=null);var i=t.call(this,e)||this;return i.ordering=e,i.businessId=r,i.userId=n,i.card_id=o,i}return Be(e,t),e.prototype.setModelId=function(t){this.businessId=t},e.prototype.get=function(t){return void 0===t&&(t={}),Re(this,void 0,void 0,(function(){var e;return Me(this,(function(r){switch(r.label){case 0:if(!this.businessId||!this.userId)throw new Error("You must provide the `businessId` and `userId` param. Example ordering.paymentCards(businessId,userId).get()");return e="/payments/stripe/cards?business_id="+this.businessId+"&user_id="+this.userId,[4,this.makeRequest("GET",e,void 0,Ue,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.save=function(t,e){return void 0===e&&(e={}),Re(this,void 0,void 0,(function(){return Me(this,(function(t){switch(t.label){case 0:throw new Error("ordering.paymentCards(businessId,userId).save(card) is not implemented.");case 1:return[2,t.sent()]}}))}))},e.prototype.delete=function(t){return void 0===t&&(t={}),Re(this,void 0,void 0,(function(){var e;return Me(this,(function(r){switch(r.label){case 0:if(!this.card_id||!this.businessId||!this.userId)throw new Error("You must provide the `businessId`, `userId`, `cardId` param. Example ordering.paymentCards(businessId,userId,cardId).delete()");return e="/payments/stripe/cards?business_id="+this.businessId+"&user_id="+this.userId+"&card_id="+this.card_id,[4,this.makeRequest("DELETE",e,void 0,Ue,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.getCredentials=function(t){return void 0===t&&(t={}),Re(this,void 0,void 0,(function(){return Me(this,(function(e){switch(e.label){case 0:return"/payments/stripe/credentials",[4,this.makeRequest("GET","/payments/stripe/credentials",void 0,Ue,t)];case 1:return[2,e.sent()]}}))}))},e}(g),ze=function(){return ze=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ze.apply(this,arguments)},$e=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function c(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}u((n=n.apply(t,e||[])).next())}))},qe=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Je=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r},Ve=function(){function t(t){var e=void 0===t?{}:t,r=e.url,n=void 0===r?"https://apiv4.ordering.co":r,o=e.version,i=void 0===o?"v400":o,a=e.project,c=void 0===a?"demo":a,u=e.language,s=void 0===u?"en":u,l=e.accessToken,f=void 0===l?null:l,p=e.apiKey,h=void 0===p?null:p,d=e.appId,y=void 0===d?null:d,v=e.billing,m=void 0===v?null:v,g=e.countryCode,b=void 0===g?null:g;this.url=n,this.version=i,this.project=c,this.language=s,this.accessToken=f,this.apiKey=h,this.appId=y,this.billing=m,this.countryCode=b}return Object.defineProperty(t.prototype,"root",{get:function(){return this.url+"/"+this.version+"/"+this.language+"/"+this.project},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"systemRoot",{get:function(){return this.url+"/"+this.version},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"billingUrl",{get:function(){return this.billing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"countryCodeValue",{get:function(){return this.countryCode},enumerable:!1,configurable:!0}),t.prototype.setAccessToken=function(t){return this.accessToken=t,this},t.prototype.setApiKey=function(t){return this.apiKey=t,this},t.prototype.setAppId=function(t){return this.appId=t,this},t.prototype.setUrl=function(t){return this.url=t,this},t.prototype.setProject=function(t){return this.project=t,this},t.prototype.setVersion=function(t){return this.version=t,this},t.prototype.setLanguage=function(t){return this.language=t,this},t.prototype.setBilling=function(t){return this.billing=t,this},t.prototype.setCountryCode=function(t){return this.countryCode=t,this},t.prototype.users=function(t){return void 0===t&&(t=null),new $(this,t)},t.prototype.orders=function(t){return void 0===t&&(t=null),new ut(this,t)},t.prototype.controls=function(t){return void 0===t&&(t=null),new dt(this,t)},t.prototype.driversgroups=function(){return new Ht(this)},t.prototype.configs=function(t){return void 0===t&&(t=null),new te(this,t)},t.prototype.businesses=function(t){return new Yt(this,t)},t.prototype.validationFields=function(t){return new K(this,t)},t.prototype.languages=function(t){return new x(this,t)},t.prototype.translations=function(t){return new ae(this,t)},t.prototype.pages=function(t){return new pe(this,t)},t.prototype.countries=function(t){return new je(this,t)},t.prototype.orderOptions=function(t){return new Te(this,t)},t.prototype.carts=function(t){return new Ge(this,t)},t.prototype.paymentCards=function(t,e,r){return new Ye(this,t,e,r)},t.prototype.system=function(){return new S(this)},t.prototype.getRequestProps=function(t){var e,r=t.system?this.systemRoot:this.root,n=t.query,o=t.mode,i=t.conditions,a=t.headers,c=Je(t,["query","mode","conditions","headers"]),u=n||{};if(u&&Object.keys(u).length>0)for(var s in u)u[s]="object"==typeof u[s]?JSON.stringify(u[s]):u[s];var l=(null===(e=null==u?void 0:u.params)||void 0===e?void 0:e.split(","))||[];(l=l.concat(t.attributes||[])).length>0&&(u.params=l.join(",")),i&&(u.where="object"==typeof i?JSON.stringify(i):i),o&&(u.mode=t.mode);var f={};return this.accessToken&&!this.apiKey&&(f.Authorization="Bearer "+this.accessToken),this.apiKey&&(f["X-Api-Key"]=this.apiKey),this.appId&&(f["X-APP-X"]=this.appId),this.countryCode&&(f["X-Country-Code-X"]=this.countryCode),[r,ze(ze({},c),{params:u||{},headers:Object.assign(f,a||{})})]},t.prototype.makeRequest=function(t,e,r,n){return new Promise((function(o,i){var a=new window.XMLHttpRequest,c=Object.entries(n.params||{}).map((function(t){return t[0]+"="+t[1]})).join("&");a.open(t,e+(c?"?"+c:"")),Object.entries(n.headers||{}).forEach((function(t){a.setRequestHeader(t[0],t[1])})),n.cancelToken&&"object"==typeof n.cancelToken&&(n.cancelToken.cancel=function(){a.abort()}),a.onload=function(){if(this.status<500){var t=n.json?JSON.parse(this.response):this.response;o({request:this,data:t,status:this.status,statusText:this.statusText})}else i(new Error("Internal error"))},a.onerror=function(t){i(t)},n.json?(a.setRequestHeader("Content-Type","application/json"),a.send(r?JSON.stringify(r):null)):a.send()}))},t.prototype.get=function(t,e){return void 0===e&&(e={CastClass:null,json:!0,system:!1}),$e(this,void 0,void 0,(function(){var r,n,o,i;return qe(this,(function(a){switch(a.label){case 0:return r=this.getRequestProps(e),n=r[0],o=r[1],[4,this.makeRequest("GET",n+t,null,o)];case 1:return i=a.sent(),[2,new s(i,e,e.api)]}}))}))},t.prototype.post=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={CastClass:null,json:!0,system:!1}),$e(this,void 0,void 0,(function(){var n,o,i,a,c;return qe(this,(function(u){switch(u.label){case 0:if(n=this.getRequestProps(r),o=n[0],i=n[1],r.json)for(a in e)null!==e[a]&&"object"==typeof e[a]&&(e[a]=JSON.stringify(e[a]));return[4,this.makeRequest("POST",o+t,e,i)];case 1:return c=u.sent(),[2,new s(c,r,r.api)]}}))}))},t.prototype.put=function(t,e,r){return void 0===e&&(e={}),void 0===r&&(r={CastClass:null,json:!0,system:!1}),$e(this,void 0,void 0,(function(){var n,o,i,a,c;return qe(this,(function(u){switch(u.label){case 0:if(n=this.getRequestProps(r),o=n[0],i=n[1],r.json)for(a in e)null!==e[a]&&"object"==typeof e[a]&&(e[a]=JSON.stringify(e[a]));return[4,this.makeRequest("PUT",o+t,e,i)];case 1:return c=u.sent(),[2,new s(c,r,r.api)]}}))}))},t.prototype.delete=function(t,e){return void 0===e&&(e={CastClass:null,json:!0,system:!1}),$e(this,void 0,void 0,(function(){var r,n,o,i;return qe(this,(function(a){switch(a.label){case 0:return r=this.getRequestProps(e),n=r[0],o=r[1],[4,this.makeRequest("DELETE",n+t,null,o)];case 1:return i=a.sent(),[2,new s(i,e,e.api)]}}))}))},t}();function He(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function We(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?He(Object(r),!0).forEach((function(e){Ke(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ke(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ze(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Xe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Qe=Object(o.createContext)(),tr=function(t){var e=t.settings,r=t.children,n=Ze(Object(o.useState)(Object.assign(e.api,{project:e.project,appId:e.app_id})),2),a=n[0],c=n[1],u=Ze(Object(o.useState)(new Ve(a)),2),s=u[0],l=u[1],f=Ze(Object(o.useState)(e.api.language),2),p=f[0],h=f[1];Object(o.useEffect)((function(){c(Object.assign(e.api,{project:e.project,appId:e.app_id})),l(new Ve(Object.assign(e.api,{project:e.project,appId:e.app_id})))}),[e]),Object(o.useEffect)((function(){if(s.language!==p){var t=new Ve(We(We({},a),{},{language:p}));l(t)}}),[p]);var d={setLanguage:function(t){t!==p&&h(t)}};return i.a.createElement(Qe.Provider,{value:[s,d]},r)},er=function(){return Object(o.useContext)(Qe)||[{}]};function rr(t){return rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rr(t)}function nr(){nr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==rr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function or(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ir(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0).forEach((function(e){ar(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ar(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ur(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){cr(i,n,o,a,c,"next",t)}function c(t){cr(i,n,o,a,c,"throw",t)}a(void 0)}))}}function sr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return lr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var fr=Object(o.createContext)(),pr=function(t){var e=t.children,r=t.strategy,n=sr(er(),1)[0],a=sr(Object(o.useState)({auth:null,token:null,user:null,loading:!0}),2),c=a[0],u=a[1],s=function(){var t=ur(nr().mark((function t(){var e,r,o,i,a;return nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:if(e=t.sent,r=e.auth,o=e.token,i=e.user,!o){t.next=12;break}return a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},t.next=10,fetch("".concat(n.root,"/order_options"),a);case 10:t.sent.ok||8===(null==i?void 0:i.level)||p();case 12:u(ir(ir({},c),{},{auth:r,token:o,user:i,loading:!1}));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=ur(nr().mark((function t(){var e,n,o,i;return nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getItem("token");case 2:return e=t.sent,t.next=5,r.getItem("token");case 5:return n=t.sent,t.next=8,r.getItem("project");case 8:return o=t.sent,t.next=11,r.getItem("user",!0);case 11:return i=t.sent,t.abrupt("return",{auth:e,token:n,project:o,user:i});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){var t=ur(nr().mark((function t(e){return nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.setItem("token",e.token);case 2:return t.next=4,r.setItem("user",e.user,!0);case 4:return t.next=6,r.setItem("project",e.project);case 6:u(ir(ir({},c),{},{auth:!0,user:e.user,token:e.token,loading:!1}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=ur(nr().mark((function t(){return nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.removeItem("token");case 2:return t.next=4,r.removeItem("user");case 4:return t.next=6,r.removeItem("project");case 6:u(ir(ir({},c),{},{auth:!1,user:null,token:null,loading:!1}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=ur(nr().mark((function t(e){return nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.setItem("user",e,!0);case 2:u(ir(ir({},c),{},{user:e,loading:!1}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=ur(nr().mark((function t(){var e,r,n,o;return nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:e=t.sent,r=e.token,n=e.project,o=e.user,r&&!c.token&&f({user:o,token:r,project:n}),r||c.token||p();case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){var t=setInterval((function(){d()}),1e3);return function(){return clearInterval(t)}}),[c]),Object(o.useEffect)((function(){s()}),[]);var y={login:f,logout:p,changeUser:h};return i.a.createElement(fr.Provider,{value:[c,y]},e)},hr=function(){return Object(o.useContext)(fr)||[{},function(){}]};function dr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return yr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var vr={Info:"INFO",Error:"ERROR",Success:"SUCCESS"},mr=o.createContext(null),gr=function(t){var e=t.children,r=dr(o.useState(null),2),n=r[0],i=r[1];return o.createElement(mr.Provider,{value:[n,{showToast:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;i({type:t,message:e,duration:r})},hideToast:function(){i(null)}}]},e)};function br(){return o.useContext(mr)||[{},function(){}]}function wr(t){return wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wr(t)}function Or(){Or=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==wr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function xr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Er(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xr(Object(r),!0).forEach((function(e){jr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Lr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Sr(i,n,o,a,c,"next",t)}function c(t){Sr(i,n,o,a,c,"throw",t)}a(void 0)}))}}function _r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Pr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var kr=Object(o.createContext)(),Tr=function(t){var e,r=t.children,n=t.strategy,a=_r(Object(o.useState)({loading:!0,dictionary:{},languageList:[]}),2),c=a[0],u=a[1],s=function(){var t=Lr(Or().mark((function t(){var e;return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getItem("language",!0);case 2:(e=t.sent)&&(u((function(t){return Er(Er({},t),{},{language:e})})),p.setLanguage(null==e?void 0:e.code));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=_r(er(),2),f=l[0],p=l[1],h=function(){var t=Lr(Or().mark((function t(){var e,r,n,o;return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,!c.loading&&u(Er(Er({},c),{},{loading:!0})),t.next=4,f.translations().asDictionary().get();case 4:e=t.sent,r=e.content,n=r.error,o=r.result,u((function(t){return Er(Er({},t),{},{loading:!1,dictionary:n?{}:o})})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),u((function(t){return Er(Er({},t),{},{loading:!1})}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),d=function(){var t=Lr(Or().mark((function t(e,r){var o,i,a,s,l,h,d,y;return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.id!==(null===(o=c.language)||void 0===o?void 0:o.id)){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,n.getItem("language",!0);case 5:if(!(i=t.sent)||!r){t.next=12;break}return t.next=9,f.languages().where([{attribute:"id",value:e.id}]).get();case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,f.languages(e.id).save({default:!0});case 14:t.t0=t.sent;case 15:if(a=t.t0,s=a.content,l=s.error,h=s.result,l){t.next=27;break}return d={},d=i&&r?{id:h[0].id,code:h[0].code,rtl:h[0].rtl}:{id:h.id,code:h.code,rtl:h.rtl},t.next=24,n.setItem("language",d,!0);case 24:y=c.languageList.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})),u(Er(Er({},c),{},{language:d,languageList:y})),p.setLanguage(null==e?void 0:e.code);case 27:t.next=32;break;case 29:t.prev=29,t.t1=t.catch(2),u(Er(Er({},c),{},{loading:!1}));case 32:location.reload();case 33:case"end":return t.stop()}}),t,null,[[2,29]])})));return function(e,r){return t.apply(this,arguments)}}(),y=function(){var t=Lr(Or().mark((function t(){var e,r,o,i,a,s,l,h;return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(Er(Er({},c),{},{loading:!0})),t.next=4,f.languages().get();case 4:if(e=t.sent,r=e.content,o=r.error,i=r.result,o){t.next=19;break}return t.next=11,n.getItem("language",!0);case 11:return a=t.sent,s=a?i.find((function(t){return t.id===a.id})):{enabled:!1},l=a&&s.enabled?a:i.find((function(t){return t.default})),h={id:l.id,code:l.code,rtl:l.rtl},t.next=17,n.setItem("language",h,!0);case 17:p.setLanguage(null==h?void 0:h.code),u((function(t){return Er(Er({},t),{},{loading:!1,language:h,languageList:i})}));case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),u(Er(Er({},c),{},{loading:!1}));case 24:case"end":return t.stop()}}),t,null,[[0,21]])})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){var t,e;null!=f&&f.project&&null!==(t=c.language)&&void 0!==t&&t.code&&(null===(e=c.language)||void 0===e?void 0:e.code)===f.language&&h()}),[null===(e=c.language)||void 0===e?void 0:e.code,null==f?void 0:f.project,f.language]),Object(o.useEffect)((function(){s(),null!=f&&f.project&&y()}),[null==f?void 0:f.language,null==f?void 0:f.project]);var v={setLanguage:d,updateLanguageListState:function(t){var e=c.languageList.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0}));u(Er(Er({},c),{},{languageList:e}))},refreshTranslations:h};return i.a.createElement(kr.Provider,{value:[c,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(null==c?void 0:c.dictionary)&&Object.keys(null==c?void 0:c.dictionary).length>0&&c.dictionary[t]||e||t},v]},r)},Ir=function(){return Object(o.useContext)(kr)||[{},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e||t},Lr(Or().mark((function t(){return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),Lr(Or().mark((function t(){return Or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))]};function Ar(t){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ar(t)}function Cr(){return Cr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cr.apply(this,arguments)}function Nr(t){return function(t){if(Array.isArray(t))return zr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Yr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(){Dr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ar(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Gr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Fr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gr(Object(r),!0).forEach((function(e){Ur(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ur(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Br(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Rr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Br(i,n,o,a,c,"next",t)}function c(t){Br(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Mr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Yr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yr(t,e){if(t){if("string"==typeof t)return zr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zr(t,e):void 0}}function zr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $r=function(t){var e=t.defaultPosition,r=t.UIComponent,n=Mr(er(),1)[0],a=Mr(hr(),1)[0].token,c=Mr(br(),2)[1].showToast,u=Mr(Ir(),2)[1],s=Mr(Object(o.useState)({loading:!0,banners:[],error:null}),2),l=s[0],f=s[1],p=Mr(Object(o.useState)({loading:!1,sites:[],error:null}),2),h=p[0],d=p[1],y=Mr(Object(o.useState)({loading:!1,error:null}),2),v=y[0],m=y[1],g=function(){var t=Rr(Dr().mark((function t(){var r,o,i,c,u;return Dr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Fr(Fr({},l),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},o=[],i=[],e&&i.push({attribute:"position",value:e}),i.length&&(o={conditions:i,conector:"AND"}),t.next=9,fetch("".concat(n.root,"/banners?where=").concat(JSON.stringify(o)),r);case 9:return c=t.sent,t.next=12,c.json();case 12:u=t.sent,f({loading:!1,banners:u.error?[]:u.result,error:u.error?u.result:null}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),f(Fr(Fr({},l),{},{loading:!1,error:[t.t0.message]}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=Rr(Dr().mark((function t(e,r){var o,i,s,p;return Dr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),m({loading:!0,error:null}),o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)},t.next=6,fetch("".concat(n.root,"/banners/").concat(r),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(s=t.sent).error?m({loading:!1,error:s.result}):(p=l.banners.filter((function(t){var e;return t.id===(null===(e=s.result)||void 0===e?void 0:e.id)&&Object.assign(t,s.result),!0})),f(Fr(Fr({},l),{},{banners:p})),m({loading:!1,error:null}),c(vr.Success,u("BANNER_SAVED","Banner saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m({loading:!1,error:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),w=function(){var t=Rr(Dr().mark((function t(){var e,r,o;return Dr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(Fr(Fr({},h),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,fetch("".concat(n.root,"/sites"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(o=t.sent).error||d({sites:o.result,loading:!1,error:null}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),d(Fr(Fr({},h),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){w()}),[]),Object(o.useEffect)((function(){g()}),[e]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,Cr({},t,{sitesState:h,actionState:v,bannersListState:l,handleSuccessUpdate:function(t){var e=l.banners.map((function(e){return e.id===t.id?t:e}));f(Fr(Fr({},l),{},{banners:e}))},handleUpdateBanner:b,handleSuccessAdd:function(t){f(Fr(Fr({},l),{},{banners:[].concat(Nr(l.banners),[t])}))},handleSuccessDelete:function(t){var e=l.banners.filter((function(e){return e.id!==t}));f(Fr(Fr({},l),{},{banners:e}))}})))};$r.propTypes={UIComponent:c.a.elementType},$r.defaultProps={};var qr=r(32),Jr=r.n(qr);function Vr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Hr=function(){function t(e){var r=e.url,n=e.project,o=e.accessToken;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=r,this.project=n,this.accessToken=o,this.queue=[]}var e,r,n;return e=t,r=[{key:"connect",value:function(){var t=this;this.socket=Jr()(this.url,{extraHeaders:{Authorization:"Bearer ".concat(this.accessToken)},query:"token=".concat(this.accessToken,"&project=").concat(this.project),transports:["websocket"]}),this.socket.on("connect",(function(){for(var e;void 0!==(e=t.queue.shift());)"on"===e.action?t.on(e.event,e.func):"join"===e.action?t.join(e.room):"leave"===e.action?t.leave(e.room):"off"===e.action&&t.off(e.room)}))}},{key:"getId",value:function(){var t;return null===(t=this.socket)||void 0===t?void 0:t.id}},{key:"close",value:function(){var t;null!==(t=this.socket)&&void 0!==t&&t.connected&&this.socket.close()}},{key:"join",value:function(t){var e;return null!==(e=this.socket)&&void 0!==e&&e.connected?this.socket.emit("join","".concat(this.project,"_").concat(t)):this.queue.push({action:"join",room:t}),this}},{key:"leave",value:function(t){var e;return null!==(e=this.socket)&&void 0!==e&&e.connected?this.socket.emit("leave","".concat(this.project,"_").concat(t)):this.queue.push({action:"leave",room:t}),this}},{key:"on",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return null!==(e=this.socket)&&void 0!==e&&e.connected?this.socket.on(t,r):this.queue.push({action:"on",event:t,func:r}),this}},{key:"off",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return null!==(e=this.socket)&&void 0!==e&&e.connected?this.socket.off(t,r):this.queue.push({action:"off",event:t,func:r}),this}}],r&&Vr(e.prototype,r),n&&Vr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Kr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Wr(Object(r),!0).forEach((function(e){Zr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Zr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Qr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var tn=Object(o.createContext)(),en=function(t){var e=t.settings,r=t.children,n=Xr(hr(),1)[0],a=Xr(Object(o.useState)(),2),c=a[0],u=a[1];return Object(o.useEffect)((function(){if(!n.loading){if(n.auth&&e.url&&e.project){var t=new Hr(Kr(Kr({},e),{},{accessToken:n.token}));u(t)}n.auth||c&&c.close()}}),[n]),Object(o.useEffect)((function(){return c&&c.connect(),function(){c&&c.close()}}),[c]),i.a.createElement(tn.Provider,{value:c},r)},rn=function(){return Object(o.useContext)(tn)||new Hr({})};function nn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var on=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._events={}}var e,r,n;return e=t,r=[{key:"on",value:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)}},{key:"off",value:function(t,e){this._events[t]&&(this._events[t]=this._events[t].filter((function(t){return t!==e})))}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(this._events[t]){var o=function(t){t.apply(void 0,r)};this._events[t].forEach(o)}}}],r&&nn(e.prototype,r),n&&nn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),an=Object(o.createContext)(),cn=function(t){var e=t.children,r=new on;return i.a.createElement(an.Provider,{value:[r]},e)},un=function(){return Object(o.useContext)(an)||[new on]},sn=r(2),ln=r.n(sn),fn=r(3),pn=r.n(fn);function hn(t){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hn(t)}function dn(){dn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==hn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function yn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yn(Object(r),!0).forEach((function(e){mn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function bn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){gn(i,n,o,a,c,"next",t)}function c(t){gn(i,n,o,a,c,"throw",t)}a(void 0)}))}}function wn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return On(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return On(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function On(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ln.a.extend(pn.a);var xn=Object(o.createContext)(),En=function(t){var e=t.children,r=wn(Object(o.useState)({loading:!0,configs:{}}),2),n=r[0],a=r[1],c=wn(Ir(),1)[0],u=wn(er(),1)[0],s=wn(hr(),1)[0].token,l={max_days_preorder:{key:"max_days_preorder",value:6},meters_to_change_address:{key:"meters_to_change_address",value:500},default_order_type:{key:"default_order_type",value:"delivery"},order_types_allowed:{key:"order_types_allowed",value:"1|2|3|4|5"},google_autocomplete_selection_required:{key:"google_autocomplete_selection_required",value:"true"},google_maps_api_key:{key:"google_maps_api_key",value:""},country_autocomplete:{key:"country_autocomplete",value:"*"},track_id_google_analytics:{key:"track_id_google_analytics",value:"UA-51635411-4"}},f=function(){var t=bn(dn().mark((function t(){var e,r,o,i,c,f,p,h,d;return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!n.loading&&a(vn(vn({},n),{},{loading:!0})),!s){t.next=8;break}return t.next=5,u.setAccessToken(s).configs().asDictionary().get();case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,u.configs().asDictionary().get();case 10:t.t0=t.sent;case 11:return o=t.t0,i=o.content,c=i.error,f=i.result,p=null,t.prev=16,t.next=19,fetch("https://ipapi.co/json/");case 19:return h=t.sent,t.next=22,h.json();case 22:p=t.sent,t.next=28;break;case 25:t.prev=25,t.t1=t.catch(16),p=null;case 28:d=vn(vn({},l),{},{default_country_code:{value:p&&(null===(e=p)||void 0===e?void 0:e.country_code)||"US",calling_number:p&&(null===(r=p)||void 0===r?void 0:r.country_calling_code)||"+1"}},f),a((function(t){return vn(vn({},t),{},{loading:!1,configs:c?{}:s?d:vn(vn({},t.configs),d)})})),t.next=35;break;case 32:t.prev=32,t.t2=t.catch(0),a(vn(vn({},n),{},{loading:!1}));case 35:case"end":return t.stop()}}),t,null,[[0,32],[16,25]])})));return function(){return t.apply(this,arguments)}}(),p={refreshConfigs:f};return Object(o.useEffect)((function(){null!=u&&u.project?c.loading||f():a({loading:!0,configs:{}})}),[c.loading,null==u?void 0:u.project,s]),i.a.createElement(xn.Provider,{value:[n,p]},e)},jn=function(){return Object(o.useContext)(xn)||[{},bn(dn().mark((function t(){return dn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))]},Sn=["carts"],Ln=["carts"],_n=["carts"];function Pn(t){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pn(t)}function kn(){kn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Pn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Tn(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function In(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function An(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?In(Object(r),!0).forEach((function(e){Cn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):In(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Cn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Dn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Nn(i,n,o,a,c,"next",t)}function c(t){Nn(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Gn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Fn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ln.a.extend(pn.a);var Un=Object(o.createContext)(),Bn=function(t){var e,r,n=t.Alert,a=t.children,c=t.strategy,u=Gn(Object(o.useState)({show:!1}),2),s=u[0],l=u[1],f=Gn(Object(o.useState)({show:!1}),2),p=f[0],h=f[1],d=Gn(er(),1)[0],y=Gn(Ir(),2),v=y[0],m=y[1],g=rn(),b=Gn(un(),1)[0],w=Gn(jn(),1)[0],O=Gn(hr(),2),x=O[0],E=O[1].logout,j={delivery:1,pickup:2,eatin:3,curbside:4,drivethru:5},S=Gn(Object(o.useState)({loading:!0,options:{type:j[null==w||null===(e=w.configs)||void 0===e||null===(r=e.default_order_type)||void 0===r?void 0:r.value],moment:null},carts:{},confirmAlert:s,alert:p}),2),L=S[0],_=S[1],P=function(){var t=Dn(kn().mark((function t(){var e,r,n,o,i,a,u,s,l,f,p,y,v,m,g,b,w,O,j,S,P,k,T,I,A;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,L.loading||_(An(An({},L),{},{loading:!0})),t.next=4,c.getItem("user-customer",!0);case 4:return n=t.sent,o=null==n?void 0:n.id,i={},o&&(i.query={user_id:o}),t.next=10,d.setAccessToken(x.token).orderOptions().get(i);case 10:return a=t.sent,u=null==a||null===(e=a.content)||void 0===e?void 0:e.error,s=null==a||null===(r=a.content)||void 0===r?void 0:r.result,u||(l=s.carts,f=Tn(s,Sn),L.carts={},l.forEach((function(t){L.carts["businessId:".concat(t.business_id)]=t})),L.options=An(An({},L.options),f)),u&&(8!==(null==x||null===(p=x.user)||void 0===p?void 0:p.level)&&h({show:!0,content:s}),401===(null==a?void 0:a.status)&&8!==(null==x||null===(y=x.user)||void 0===y?void 0:y.level)&&x.auth&&E()),t.next=17,c.getItem("options",!0);case 17:if(!(v=t.sent)){t.next=49;break}if(m={},!(Object.keys(v.address).length>0)){t.next=41;break}return b=[{attribute:"address",value:null==v||null===(g=v.address)||void 0===g?void 0:g.address}],w=o||x.user.id,t.next=25,d.setAccessToken(x.token).users(w).addresses().where(b).get();case 25:if(O=t.sent,j=O.content.result.find((function(t){var e,r,n;return v.address.internal_number=(null===(e=v.address)||void 0===e?void 0:e.internal_number)||null,v.address.zipcode=(null===(r=v.address)||void 0===r?void 0:r.zipcode)||null,v.address.address_notes=(null===(n=v.address)||void 0===n?void 0:n.address_notes)||null,t.location.lat===v.address.location.lat&&t.location.lng===v.address.location.lng&&t.internal_number===v.address.internal_number&&t.zipcode===v.address.zipcode&&t.address_notes===v.address.address_notes}))){t.next=38;break}return Object.keys(v.address).forEach((function(t){return null===v.address[t]&&delete v.address[t]})),t.next=31,d.setAccessToken(x.token).users(w).addresses().save(v.address);case 31:S=t.sent,P=S.content,k=P.error,T=P.result,k||(j=T),t.next=40;break;case 38:return t.next=40,d.setAccessToken(x.token).users(w).addresses(j.id).save({default:!0});case 40:j&&(m.address_id=j.id);case 41:return v.type&&(m.type=v.type),v.moment&&(m.moment=ln.a.utc(v.moment,"YYYY-MM-DD HH:mm:ss").unix()),null!=v&&v.address_id&&(m.address_id=null==v?void 0:v.address_id),m&&Object.keys(m).length>0?C(m):_(An(An({},L),{},{loading:!1})),t.next=47,c.removeItem("options");case 47:t.next=50;break;case 49:_(An(An({},L),{},{loading:!1}));case 50:t.next=57;break;case 52:t.prev=52,t.t0=t.catch(0),A=null!==t.t0&&void 0!==t.t0&&null!==(I=t.t0.message)&&void 0!==I&&I.includes("Internal error")?"INTERNAL_ERROR":t.t0.message,h({show:!0,content:[A]}),_(An(An({},L),{},{loading:!1}));case 57:case"end":return t.stop()}}),t,null,[[0,52]])})));return function(){return t.apply(this,arguments)}}(),k=function(t){var e=[];return["address","address_notes","zipcode","location","internal_number"].forEach((function(r){var n,o,i,a,c;null!==(n=L.options)&&void 0!==n&&n.address&&null!==(o=L.options)&&void 0!==o&&o.address[r]?"location"===r?e.push(t[r].lat===(null===(i=L.options)||void 0===i?void 0:i.address[r].lat)&&t[r].lng===(null===(a=L.options)||void 0===a?void 0:a.address[r].lng)):e.push(t[r]===(null===(c=L.options)||void 0===c?void 0:c.address[r])):e.push(!t[r])})),e.every((function(t){return t}))},T=function(){var t=Dn(kn().mark((function t(e,r){var n,o,i;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"!==Pn(e)){t.next=9;break}return t.next=3,c.getItem("options",!0);case 3:return n=t.sent,o=An(An(An({},L.options),n),{},{address:An(An({},null==n?void 0:n.address),e)}),t.next=7,c.setItem("options",o,!0);case 7:return _(An(An({},L),{},{options:o})),t.abrupt("return");case 9:if(!r||null==r||!r.address||k(null==r?void 0:r.address)){t.next=12;break}return C({address_id:null==r||null===(i=r.address)||void 0===i?void 0:i.id}),t.abrupt("return");case 12:if(!r||null==r||!r.isEdit){t.next=17;break}if(e===L.options.address_id){t.next=15;break}return t.abrupt("return");case 15:return C({address_id:e}),t.abrupt("return");case 17:C({address_id:e});case 18:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),I=function(){var t=Dn(kn().mark((function t(e){var r;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=An(An({},L.options),{},{type:e}),L.options.type!==e){t.next=3;break}return t.abrupt("return");case 3:if(x.auth){t.next=7;break}return t.next=6,c.setItem("options",r,!0);case 6:_(An(An({},L),{},{options:r}));case 7:C({type:e});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=Dn(kn().mark((function t(e){var r,n,o;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e?e.getTime()/1e3:null,n=r?ln.a.unix(r).utc().format("YYYY-MM-DD HH:mm:ss"):null,o=An(An({},L.options),{},{moment:n}),L.options.moment!==n){t.next=5;break}return t.abrupt("return");case 5:if(x.auth){t.next=9;break}return t.next=8,c.setItem("options",o,!0);case 8:_(An(An({},L),{},{options:o}));case 9:C({moment:r});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Dn(kn().mark((function t(e){var r,n,o,i,a,u,s,l,f,p,y;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x.auth){t.next=25;break}return t.next=3,c.getItem("user-customer",!0);case 3:return r=t.sent,n=null==r?void 0:r.id,o=An(An({},e),{},{user_id:n||x.user.id}),t.prev=6,_(An(An({},L),{},{loading:!0})),t.next=10,d.setAccessToken(x.token).orderOptions().save(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 10:return i=t.sent,a=i.content,u=a.error,s=a.result,u?h({show:!0,content:s}):(l=s.carts,f=Tn(s,Ln),L.carts={},l.forEach((function(t){L.carts["businessId:".concat(t.business_id)]=t})),L.options=An(An({},L.options),f)),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!u);case 19:return t.prev=19,t.t0=t.catch(6),y=null!==t.t0&&void 0!==t.t0&&null!==(p=t.t0.message)&&void 0!==p&&p.includes("Internal error")?"INTERNAL_ERROR":t.t0.message,h({show:!0,content:[y]}),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!1);case 25:case"end":return t.stop()}}),t,null,[[6,19]])})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=Dn(kn().mark((function t(e){var r,n,o,i,a,u,s;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_(An(An({},L),{},{loading:!0})),t.next=4,c.getItem("user-customer",!0);case 4:return r=t.sent,n=null==r?void 0:r.id,o={product:e,user_id:n||x.user.id},t.next=9,d.setAccessToken(x.token).carts().addProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=t.sent,a=i.content,u=a.error,s=a.result,u?h({show:!0,content:s}):(L.carts["businessId:".concat(s.business_id)]=s,b.emit("cart_product_added",e,s),b.emit("cart_updated",s),b.emit("product_added",e)),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!u);case 18:return t.prev=18,t.t0=t.catch(0),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!1);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=Dn(kn().mark((function t(e){var r,n,o,i,a,u,s;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_(An(An({},L),{},{loading:!0})),t.next=4,c.getItem("user-customer",!0);case 4:return r=t.sent,n=null==r?void 0:r.id,o={product:{id:e.id,code:e.code,business_id:e.business_id},user_id:n||x.user.id},t.next=9,d.setAccessToken(x.token).carts().removeProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=t.sent,a=i.content,u=a.error,s=a.result,u?h({show:!0,content:s}):(L.carts["businessId:".concat(s.business_id)]=s,b.emit("cart_product_removed",e,s),b.emit("cart_updated",s)),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!u);case 18:return t.prev=18,t.t0=t.catch(0),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!1);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}(),G=function(){var t=Dn(kn().mark((function t(e){var r,n,o,i,a,u,s;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_(An(An({},L),{},{loading:!0})),t.next=4,c.getItem("user-customer",!0);case 4:return r=t.sent,n=null==r?void 0:r.id,o=JSON.stringify({uuid:e,user_id:n||x.user.id}),t.next=9,fetch("".concat(d.root,"/carts/clear"),{method:"POST",headers:{"Content-Type":"application/json","X-Socket-Id-X":null==g?void 0:g.getId(),Authorization:"Bearer ".concat(x.token)},body:o});case 9:return i=t.sent,t.next=12,i.json();case 12:return a=t.sent,u=a.error,s=a.result,u?h({show:!0,content:s}):L.carts["businessId:".concat(s.business_id)]=s,_(An(An({},L),{},{loading:!1})),t.abrupt("return",!u);case 20:return t.prev=20,t.t0=t.catch(0),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!1);case 24:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}(),F=function(){var t=Dn(kn().mark((function t(e){var r,n,o,i,a,u,s;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_(An(An({},L),{},{loading:!0})),t.next=4,c.getItem("user-customer",!0);case 4:return r=t.sent,n=null==r?void 0:r.id,o={product:e,user_id:n||x.user.id},t.next=9,d.setAccessToken(x.token).carts().updateProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=t.sent,a=i.content,u=a.error,s=a.result,u?h({show:!0,content:s}):(L.carts["businessId:".concat(s.business_id)]=s,b.emit("cart_product_updated",e,s),b.emit("cart_updated",s)),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!u);case 18:return t.prev=18,t.t0=t.catch(0),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!1);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}(),U=function(){var t=Dn(kn().mark((function t(e){var r,n,o,i,a,u,s,l;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.business_id){t.next=2;break}throw new Error("`business_id` is required.");case 2:if(void 0!==e.coupon){t.next=4;break}throw new Error("`coupon` is required.");case 4:if((null===(r=L.carts["businessId:".concat(e.business_id)])||void 0===r?void 0:r.coupon)!==e.coupon){t.next=6;break}return t.abrupt("return");case 6:return t.prev=6,_(An(An({},L),{},{loading:!0})),t.next=10,c.getItem("user-customer",!0);case 10:return n=t.sent,o=null==n?void 0:n.id,i={business_id:e.business_id,coupon:e.coupon,user_id:o||x.user.id},t.next=15,d.setAccessToken(x.token).carts().applyCoupon(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 15:return a=t.sent,u=a.content,s=u.error,l=u.result,s?h({show:!0,content:l}):(L.carts["businessId:".concat(l.business_id)]=l,b.emit("cart_updated",l)),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!s);case 24:return t.prev=24,t.t0=t.catch(6),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!1);case 28:case"end":return t.stop()}}),t,null,[[6,24]])})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=Dn(kn().mark((function t(e,r){var n,o,i,a,u,s,l,f;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("`businessId` is required.");case 2:if(r||0===r){t.next=4;break}throw new Error("`driverTipRate` is required.");case 4:if(L.carts["businessId:".concat(e)]&&(null===(n=L.carts["businessId:".concat(e)])||void 0===n?void 0:n.driver_tip_rate)!==r){t.next=6;break}return t.abrupt("return");case 6:return t.prev=6,_(An(An({},L),{},{loading:!0})),t.next=10,c.getItem("user-customer",!0);case 10:return o=t.sent,i=null==o?void 0:o.id,a={business_id:e,driver_tip_rate:r,user_id:i||x.user.id},t.next=15,d.setAccessToken(x.token).carts().changeDriverTip(a,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 15:return u=t.sent,s=u.content,l=s.error,f=s.result,l?h({show:!0,content:f}):(L.carts["businessId:".concat(f.business_id)]=f,b.emit("cart_updated",f)),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!l);case 24:return t.prev=24,t.t0=t.catch(6),_(An(An({},L),{},{loading:!1})),t.abrupt("return",!1);case 28:case"end":return t.stop()}}),t,null,[[6,24]])})));return function(e,r){return t.apply(this,arguments)}}(),R=function(){var t=Dn(kn().mark((function t(e,r){var n,o,i,a,u,s,l,f;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_(An(An({},L),{},{loading:!0})),t.next=4,c.getItem("user-customer",!0);case 4:return n=t.sent,o=null==n?void 0:n.id,i=An(An({},r),{},{user_id:o||x.user.id}),t.next=9,d.setAccessToken(x.token).carts(e).place(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:if(a=t.sent,u=a.content,s=u.error,l=u.result,s){t.next=17;break}1!==l.status?(L.carts["businessId:".concat(l.business_id)]=l,b.emit("cart_updated",l)):(delete L.carts["businessId:".concat(l.business_id)],f={id:l.order.uuid,business:{name:l.business.name},total:l.total,tax_total:l.tax,delivery_zone_price:l.delivery_price},b.emit("order_placed",f)),t.next=20;break;case 17:return h({show:!0,content:l}),_(An(An({},L),{},{loading:!1})),t.abrupt("return");case 20:return _(An(An({},L),{},{loading:!1})),t.abrupt("return",{error:s,result:l});case 24:return t.prev=24,t.t0=t.catch(0),_(An(An({},L),{},{loading:!1})),t.abrupt("return",{error:!0,result:[t.t0.message]});case 28:case"end":return t.stop()}}),t,null,[[0,24]])})));return function(e,r){return t.apply(this,arguments)}}(),M=function(){var t=Dn(kn().mark((function t(e,r){var n,o,i,a,u,s,l,f;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_(An(An({},L),{},{loading:!0})),t.next=4,c.getItem("user-customer",!0);case 4:return n=t.sent,o=null==n?void 0:n.id,i=An(An({},r),{},{user_id:o||x.user.id}),t.next=9,d.setAccessToken(x.token).carts(e).confirm(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return a=t.sent,u=a.content,s=u.error,l=u.result,f=u.cart,s?f&&(L.carts["businessId:".concat(f.business_id)]=f,b.emit("cart_updated",f)):1!==l.status?(L.carts["businessId:".concat(l.business_id)]=l,b.emit("cart_updated",l)):delete L.carts["businessId:".concat(l.business_id)],_(An(An({},L),{},{loading:!1})),t.abrupt("return",{error:s,result:l});case 19:return t.prev=19,t.t0=t.catch(0),_(An(An({},L),{},{loading:!1})),t.abrupt("return",{error:!0,result:[t.t0.message]});case 23:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e,r){return t.apply(this,arguments)}}(),Y=function(){var t=Dn(kn().mark((function t(e){var r,n,o,i,a,u,s;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_(An(An({},L),{},{loading:!0})),t.next=4,c.getItem("user-customer",!0);case 4:return r=t.sent,n=null==r?void 0:r.id,o={headers:{"X-Socket-Id-X":null==g?void 0:g.getId()},query:{user_id:n||x.user.id}},t.next=9,d.setAccessToken(x.token).orders(e).reorder(o);case 9:return i=t.sent,a=i.content,u=a.error,s=a.result,u?h({show:!0,content:s}):(L.carts["businessId:".concat(s.business_id)]=s,b.emit("cart_added",s)),_(An(An({},L),{},{loading:!1})),t.abrupt("return",{error:u,result:s});case 18:return t.prev=18,t.t0=t.catch(0),_(An(An({},L),{},{loading:!1})),t.abrupt("return",{error:!0,result:[t.t0.message]});case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}(),z=Gn(Object(o.useState)(null),2),$=z[0],q=z[1],J=function(){var t=Dn(kn().mark((function t(){var e;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.getItem("options",!0);case 2:e=t.sent,q(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){x.loading||v.loading||x.auth&&P()}),[x.auth,x.loading,v.loading,null==x?void 0:x.user]),Object(o.useEffect)((function(){var t,e;x.loading||w.loading||(x.auth||(J(),_(An(An({},L),{},{loading:!1,options:{type:(null==$?void 0:$.type)||j[null==w||null===(t=w.configs)||void 0===t||null===(e=t.default_order_type)||void 0===e?void 0:e.value],moment:(null==$?void 0:$.moment)||null,address:(null==$?void 0:$.address)||{}}}))))}),[x.auth,x.loading,w]),Object(o.useEffect)((function(){var t=function(t){1===t.status?L.carts["businessId:".concat(t.business_id)]&&delete L.carts["businessId:".concat(t.business_id)]:L.carts["businessId:".concat(t.business_id)]=An(An({},L.carts["businessId:".concat(t.business_id)]),t),_(An({},L))},e=function(t){var e=t.carts,r=Tn(t,_n),n={};e.forEach((function(t){n["businessId:".concat(t.business_id)]=t}));var o=An(An({},L),{},{options:An(An({},L.options),r),carts:An(An({},L.carts),n)});_(An({},o))};return g.on("carts_update",t),g.on("order_options_update",e),function(){g.off("carts_update",t),g.off("order_options_update",e)}}),[L,g]),Object(o.useEffect)((function(){var t,e;if(x.auth&&!x.loading)return g.join("carts_".concat(null==x||null===(t=x.user)||void 0===t?void 0:t.id)),g.join("orderoptions_".concat(null==x||null===(e=x.user)||void 0===e?void 0:e.id)),function(){var t,e;g.leave("carts_".concat(null==x||null===(t=x.user)||void 0===t?void 0:t.id)),g.leave("orderoptions_".concat(null==x||null===(e=x.user)||void 0===e?void 0:e.id))}}),[g,x]);var V={refreshOrderOptions:P,changeAddress:T,changeType:I,changeMoment:A,addProduct:N,removeProduct:D,updateProduct:F,clearCart:G,applyCoupon:U,changeDriverTip:B,placeCart:R,confirmCart:M,reorder:Y,setAlert:h,setConfirm:l},H=JSON.parse(JSON.stringify(L));return i.a.createElement(Un.Provider,{value:[H,V]},n&&i.a.createElement(n,{open:p.show,title:m("ERROR","Error"),onAccept:function(){return h({show:!1})},onClose:function(){return h({show:!1})},content:p.content}),a)},Rn=function(){var t=function(){console.warn("Must use OrderProvider to wrappe the app.")};return Object(o.useContext)(Un)||[{},{refreshOrderOptions:t,changeAddress:t,changeType:t,changeMoment:t,addProduct:t,removeProduct:t,updateProduct:t,clearCart:t,applyCoupon:t,placeCart:t,confirmCart:t,setAlert:t,setConfirm:t,changeDriverTip:t,reorder:t}]},Mn=r(33),Yn=r.n(Mn),zn=r(34),$n=r.n(zn);function qn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Jn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jn(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ln.a.extend(pn.a),ln.a.extend(Yn.a),ln.a.extend($n.a);var Vn=Object(o.createContext)(),Hn=function(t){var e=t.children,r=qn(Ir(),2),n=r[0],a=r[1],c=qn(jn(),1)[0],u=function(t){var e,r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=parseFloat(t)||0;var i={decimal:(null==o?void 0:o.decimal)||(null===(e=c.configs.format_number_decimal_length)||void 0===e?void 0:e.value)||2,separator:(null==o?void 0:o.separator)||(null===(r=c.configs.format_number_decimal_separator)||void 0===r?void 0:r.value)||",",thousand:(null==o?void 0:o.thousand)||(null===(n=c.configs.format_number_thousand_separator)||void 0===n?void 0:n.value)||"."},a=t.toFixed(i.decimal);(a=a.toString()).indexOf(".")?a=a.replace(".",i.separator):a.indexOf(",")&&(a=a.replace(",",i.separator));var u=a.split(i.separator);return"space"===i.thousand&&(i.thousand=" "),u[0]=u[0].replace(/(.)(?=(\d{3})+$)/g,"$1"+i.thousand),a=u.join(i.separator)},s=function(t){return t>=1e9?"".concat((t/1e9).toFixed(1).replace(/\.0$/,"")).concat(a("G","G")):t>=1e6?"".concat((t/1e6).toFixed(1).replace(/\.0$/,"")).concat(a("M","M")):t>=1e3?"".concat((t/1e3).toFixed(1).replace(/\.0$/,"")).concat(a("K","K")):void 0},l={parsePrice:function(t){var e,r,n,o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={decimal:(null==a?void 0:a.decimal)||(null===(e=c.configs.format_number_decimal_length)||void 0===e?void 0:e.value)||2,separator:(null==a?void 0:a.separator)||(null===(r=c.configs.format_number_decimal_separator)||void 0===r?void 0:r.value)||",",thousand:(null==a?void 0:a.thousand)||(null===(n=c.configs.format_number_thousand_separator)||void 0===n?void 0:n.value)||".",currency:(null==a?void 0:a.currency)||(null===(o=c.configs.format_number_currency)||void 0===o?void 0:o.value)||"$",currencyPosition:(null==a?void 0:a.currencyPosition)||(null===(i=c.configs.currency_position)||void 0===i?void 0:i.value)||"left"},l=u(t,s);return l="left"===s.currencyPosition?s.currency+" "+l:l+" "+s.currency},parseNumber:u,parseDate:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(null==r?void 0:r.formatTime)||(null===(e=c.configs.format_time)||void 0===e?void 0:e.value)||"24",o={inputFormat:(null==r?void 0:r.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],outputFormat:(null==r?void 0:r.outputFormat)||("24"===n?"YYYY-MM-DD HH:mm":"YYYY-MM-DD hh:mm A"),utc:"boolean"!=typeof(null==r?void 0:r.utc)||(null==r?void 0:r.utc)};if(!ln()(t,o.inputFormat).isValid())return a("INVALID_FORMAT","invalid format");var i=o.utc?ln.a.utc(t,o.inputFormat).local():ln()(t,o.inputFormat);return i.format(o.outputFormat)},parseTime:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return"00:00";var n=(null==r?void 0:r.formatTime)||(null===(e=c.configs.format_time)||void 0===e?void 0:e.value)||"24",o={inputFormat:(null==r?void 0:r.inputFormat)||["HH:mm","hh:mm A","hh:mm"],outputFormat:(null==r?void 0:r.outputFormat)||("24"===n?"HH:mm":"hh:mm A"),utc:"boolean"!=typeof(null==r?void 0:r.utc)||(null==r?void 0:r.utc)};if(!ln()(t,o.inputFormat).isValid())return a("INVALID_FORMAT","invalid format");var i=o.utc?ln.a.utc(t,o.inputFormat).local():ln()(t,o.inputFormat);return i.format(o.outputFormat)},parseDistance:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=parseFloat(t)||0;var o,i=(null==n?void 0:n.unit)||"KM";("1"===(null===(e=c.configs.distance_unit_km)||void 0===e?void 0:e.value)&&(i="KM"),null!==(r=c.configs.distance_unit)&&void 0!==r&&r.value)&&(i=null===(o=c.configs.distance_unit)||void 0===o?void 0:o.value);if("MI"===i.toUpperCase()){var l=1.621371*t;return l>=1e3?"".concat(s(l)," ").concat(a("MI","mi")):"".concat(u(l,n)," ").concat(a("MI","mi"))}return t>=1e3?"".concat(s(t)," ").concat(a("KM","km")):"".concat(u(t,n)," ").concat(a("KM","km"))},parseShortenDistance:s,getTimeAgo:function(t,e){if(!t)return"NN";var r={inputFormat:(null==e?void 0:e.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],utc:"boolean"!=typeof(null==e?void 0:e.utc)||(null==e?void 0:e.utc)};return ln()(t,r.inputFormat).isValid()?(r.utc?ln.a.utc(t,r.inputFormat).local():ln()(t,r.inputFormat)).fromNow():a("INVALID_FORMAT","invalid format")},getTimeTo:function(t,e){if(!t)return"NN";var r={inputFormat:(null==e?void 0:e.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],utc:"boolean"!=typeof(null==e?void 0:e.utc)||(null==e?void 0:e.utc)};return ln()(t,r.inputFormat).isValid()?(r.utc?ln.a.utc(t,r.inputFormat).local():ln()(t,r.inputFormat)).toNow():a("INVALID_FORMAT","invalid format")},optimizeImage:function(t,e,r){if(!t&&r)return r;if(e=e&&e.length>0?",".concat(e):"",null!=t&&-1!==t.indexOf("res.cloudinary.com")){var n=t.split("upload");t="".concat(n[0],"upload/f_auto,q_auto").concat(e).concat(n[1])}return t},getOrderState:function(t){switch(t){case 0:return a("PENDING","Pending");case 1:return a("COMPLETED_BY_ADMIN","Completed by admin");case 2:return a("REJECTED_BY_ADMIN","Rejected by admin");case 3:return a("ORDER_STATUS_IN_BUSINESS","Driver arrived to business");case 4:return a("PREPARATION_COMPLETED","Preparation Completed");case 5:return a("REJECTED_BY_BUSINESS","Rejected by business");case 6:return a("REJECTED_BY_DRIVER","Rejected by driver");case 7:return a("ACCEPTED_BY_BUSINESS","Accepted by business");case 8:return a("ACCEPTED_BY_DRIVER","Accepted by driver");case 9:return a("PICK_UP_COMPLETED_BY_DRIVER","Pick up completed by driver");case 10:return a("PICK_UP_FAILED_BY_DRIVER","Pick up Failed by driver");case 11:return a("DELIVERY_COMPLETED_BY_DRIVER","Delivery completed by driver");case 12:return a("DELIVERY_FAILED_BY_DRIVER","Delivery Failed by driver");case 13:return a("PREORDER","Preorder");case 14:return a("ORDER_NOT_READY","Order not ready");case 15:return a("ORDER_PICKEDUP_COMPLETED_BY_CUSTOMER","Pickup completed by customer");case 16:return a("ORDER_STATUS_CANCELLED_BY_CUSTOMER","Cancelled by customer");case 17:return a("ORDER_NOT_PICKEDUP_BY_CUSTOMER","Not picked by customer");case 18:return a("ORDER_DRIVER_ALMOST_ARRIVED_BUSINESS","Driver almost arrived to business");case 19:return a("ORDER_DRIVER_ALMOST_ARRIVED_CUSTOMER","Driver almost arrived to customer");case 20:return a("ORDER_CUSTOMER_ALMOST_ARRIVED_BUSINESS","Customer almost arrived to business");case 21:return a("ORDER_CUSTOMER_ARRIVED_BUSINESS","Customer arrived to business");case 22:return a("ORDER_LOOKING_FOR_DRIVER","Looking for driver");case 23:return a("ORDER_DRIVER_ON_WAY","Driver on way");default:return"N/A"}}};return Object(o.useEffect)((function(){var t;n.loading||(t={name:"auto",weekdays:[a("DAY7","Sunday"),a("DAY1","Monday"),a("DAY2","Tuesday"),a("DAY3","Wednesday"),a("DAY4","Thursday"),a("DAY5","Friday"),a("DAY6","Saturday")],months:[a("MONTH1","January"),a("MONTH2","February"),a("MONTH3","March"),a("MONTH4","April"),a("MONTH5","May"),a("MONTH6","June"),a("MONTH7","July"),a("MONTH8","August"),a("MONTH9","September"),a("MONTH10","October"),a("MONTH11","November"),a("MONTH12","December")],ordinal:function(t){return"".concat(t,"º")},relativeTime:{future:a("RELATIVE_TIME_IN","in %s"),past:a("RELATIVE_TIME_AGO","%s ago"),s:a("RELATIVE_TIME_FEW_SECONDS ","a few seconds"),m:a("RELATIVE_TIME_MINUTES","a minute"),mm:a("RELATIVE_TIME_MINUTES","%d minutes"),h:a("RELATIVE_TIME_HOUR","an hour"),hh:a("RELATIVE_TIME_HOURS","%d hours"),d:a("RELATIVE_TIME_DAY","a day"),dd:a("RELATIVE_TIME_DAYS","%d days"),M:a("RELATIVE_TIME_MONTH","a month"),MM:a("RELATIVE_TIME_MONTHS","%d months"),y:a("RELATIVE_TIME_YEAR","a year"),yy:a("RELATIVE_TIME_YEARS","%d years")},meridiem:function(t,e,r){return t>12?a("PM","PM"):a("AM","AM")}},ln.a.locale("auto",t),ln.a.updateLocale("auto",t))}),[n]),i.a.createElement(Vn.Provider,{value:[l]},e)},Wn=function(){return Object(o.useContext)(Vn)||[{},function(){}]};function Kn(t){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(t)}function Zn(){return Zn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zn.apply(this,arguments)}function Xn(){Xn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Kn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Qn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function to(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return eo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ro=function(t){var e,r=t.apiKey,n=t.UIComponent,a=t.mapConfigs,c=to(Rn(),1)[0],u=to(Wn(),1)[0].optimizeImage,s=to(jn(),1)[0].configs,l=r||(null==s||null===(e=s.google_maps_api_key)||void 0===e?void 0:e.value),f={},p=to(Object(o.useState)(null),2),h=p[0],d=p[1],y=to(Object(o.useState)(null),2),v=y[0],m=y[1],g=to(er(),1)[0],b=function(){var e,r=(e=Xn().mark((function e(){var r,n,o;return Xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={},f.business=r,e.next=5,g.businesses(t.businessId).select(["location","logo"]).get({cancelToken:r});case 5:n=e.sent,o=n.content.result,m(o.logo),d(o.location),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){Qn(i,n,o,a,c,"next",t)}function c(t){Qn(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(o.useEffect)((function(){return t.location&&t.businessLogo?(d(t.location),m(t.businessLogo)):b(),function(){f.business&&f.business.cancel()}}),[]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,Zn({},t,{googleMapsUrl:function(e){var r,n,o,i,s,f,p=t.orderLocation||(null==c||null===(r=c.options)||void 0===r||null===(n=r.address)||void 0===n?void 0:n.location);return 1===c.options.type?"https://maps.googleapis.com/maps/api/staticmap?size=".concat((null==a||null===(o=a.mapSize)||void 0===o?void 0:o.width)||500,"x").concat((null==a||null===(i=a.mapSize)||void 0===i?void 0:i.height)||190,"&center=").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&zoom=").concat((null==a?void 0:a.mapZoom)||15,"&scale=2&maptype=roadmap&markers=icon:%7Ccolor:red%7C").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&key=").concat(l):"https://maps.googleapis.com/maps/api/staticmap?size=".concat((null==a||null===(s=a.mapSize)||void 0===s?void 0:s.width)||500,"x").concat((null==a||null===(f=a.mapSize)||void 0===f?void 0:f.height)||190,"&scale=2&maptype=roadmap&markers=icon:%7Ccolor:red%7C").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&markers=icon:").concat(u(v,"w_60,h_60,r_max"),"%7Ccolor:white%7C").concat(null==e?void 0:e.lat,",").concat(null==e?void 0:e.lng,"&key=").concat(l)}(h)})))};function no(t){return no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},no(t)}function oo(){oo=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==no(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function io(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ao(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?io(Object(r),!0).forEach((function(e){co(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):io(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function co(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function so(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){uo(i,n,o,a,c,"next",t)}function c(t){uo(i,n,o,a,c,"throw",t)}a(void 0)}))}}function lo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return fo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fo(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ro.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ro.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var po=Object(o.createContext)(),ho=function(t){var e=t.children,r=lo(er(),1)[0],n=lo(Object(o.useState)({loading:!0,fields:{}}),2),a=n[0],c=n[1],u=function(t,e){t.forEach((function(t){e["mobile_phone"===t.code?"cellphone":t.code]=t}))},s=function(){var t=so(oo().mark((function t(){var e,n,o,i,s,l;return oo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.validationFields().get();case 3:e=t.sent,n=e.content,o=n.result,i=n.error,s={},l={},i||(u(o.filter((function(t){return"checkout"===t.validate})),s),u(o.filter((function(t){return"address"===t.validate})),l)),c({loading:!1,fields:{checkout:s,address:l}}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),c(ao(ao({},a),{},{loading:!1}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),l={loadValidationFields:s};return Object(o.useEffect)((function(){null!=r&&r.project&&s()}),[null==r?void 0:r.project]),i.a.createElement(po.Provider,{value:[a,l]},e)},yo=function(){return Object(o.useContext)(po)||[{},so(oo().mark((function t(){return oo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))]};function vo(t){return vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vo(t)}function mo(){return mo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mo.apply(this,arguments)}function go(){go=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==vo(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function bo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bo(Object(r),!0).forEach((function(e){Oo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Oo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Eo(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){xo(i,n,o,a,c,"next",t)}function c(t){xo(i,n,o,a,c,"throw",t)}a(void 0)}))}}function jo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return So(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return So(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function So(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Lo=function(t){var e=t.UIComponent,r=jo(er(),1)[0],n=jo(br(),2)[1].showToast,a=jo(Ir(),2)[1],c=jo(yo(),2)[1].loadValidationFields,u=jo(Object(o.useState)({fields:[],loading:!1,error:null}),2),s=u[0],l=u[1],f=jo(Object(o.useState)({loading:!1,error:null}),2),p=f[0],h=f[1],d=function(){var t=Eo(go().mark((function t(){var e,n,o,i,a;return go().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(wo(wo({},s),{},{loading:!0})),e=[{attribute:"validate",value:"address"}],t.next=5,r.validationFields().where(e).get();case 5:n=t.sent,o=n.content,i=o.result,o.error||(a=i.filter((function(t){return"city_dropdown_option"!==t.code&&"name"!==t.code&&"lastname"!==t.code&&"mobile_phone"!==t.code&&"email"!==t.code&&"middle_name"!==t.code&&"second_lastname"!==t.code})),l({fields:a,loading:!1})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),l(wo(wo({},s),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Eo(go().mark((function t(e,o){var i,u,f,d;return go().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(vr.Info,a("LOADING","Loading")),h(wo(wo({},p),{},{loading:!0})),t.next=5,r.validationFields(e).save(o);case 5:i=t.sent,u=i.content,f=u.result,u.error?h({loading:!1,error:f}):(h({loading:!1,error:null}),n(vr.Success,a("FIELD_SAVED","Field saved")),d=s.fields.filter((function(t){return t.id===e&&Object.assign(t,f),!0})),l(wo(wo({},s),{},{fields:d})),c&&c()),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),h({loading:!1,error:[t.t0.message]});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){d()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,mo({},t,{addressFieldsState:s,handleChangeFieldSetting:y})))};function _o(t){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_o(t)}function Po(){Po=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==_o(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ko(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function To(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ko(Object(r),!0).forEach((function(e){Io(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ko(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Io(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ao(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Co(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ao(i,n,o,a,c,"next",t)}function c(t){Ao(i,n,o,a,c,"throw",t)}a(void 0)}))}}function No(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Do(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Do(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Do(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Lo.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Lo.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Go=Object(o.createContext)(),Fo=function(t){var e=t.children,r=t.strategy,n=No(Object(o.useState)({loading:!1,user:null}),2),a=n[0],c=n[1],u=function(){var t=Co(Po().mark((function t(){var e;return Po().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getItem("user-customer",!0);case 2:(e=t.sent)&&c(To(To({},a),{},{user:e}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Co(Po().mark((function t(e,n){return Po().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!e){t.next=3;break}return t.next=3,r.setItem("user-customer",e,!0);case 3:c(To(To({},a),{},{user:e}));case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),l=function(){var t=Co(Po().mark((function t(e){return Po().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,r.removeItem("user-customer");case 3:c(To(To({},a),{},{user:null}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f={setUserCustomer:s,deleteUserCustomer:l};return Object(o.useEffect)((function(){u()}),[]),i.a.createElement(Go.Provider,{value:[a,f]},e)},Uo=function(){return Object(o.useContext)(Go)||[{},function(){}]};function Bo(t){return Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bo(t)}function Ro(){return Ro=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ro.apply(this,arguments)}function Mo(){Mo=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Bo(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Yo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Yo(Object(r),!0).forEach((function(e){$o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qo(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Jo(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){qo(i,n,o,a,c,"next",t)}function c(t){qo(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Vo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ho(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ho(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ho(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Wo=function(t){var e=t.UIComponent,r=t.addressId,n=t.address,a=t.useValidationFileds,c=t.onSaveAddress,u=Vo(er(),1)[0],s=Vo(yo(),1)[0],l=Vo(Object(o.useState)({loading:!1,error:null,address:n||{}}),2),f=l[0],p=l[1],h=Vo(Object(o.useState)({loading:!1,changes:{},error:null}),2),d=h[0],y=h[1],v=Vo(hr(),1)[0],m=v.user,g=v.token,b={},w=t.userId||(null==m?void 0:m.id),O=t.accessToken||g,x=Vo(Uo(),2)[1].setUserCustomer,E=Vo(Object(o.useState)(!1),2),j=(E[0],E[1]),S=function(){var t=Jo(Mo().mark((function t(e,r){var n,o,i;return Mo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(zo(zo({},f),{},{loading:!0})),n={},b.address=n,t.next=6,u.users(e).addresses(r).get({accessToken:O,cancelToken:n});case 6:o=t.sent,i=o.content,p({loading:!1,error:i.error?i.result:null,address:i.error?{}:i.result}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),"Cancel"!==t.t0.constructor.name&&p({loading:!1,error:[t.t0.message],address:{}});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}(),L=function(t){y(zo(zo({},d),{},{changes:zo(zo({},d.changes),t)}))},_=function(){var t=Jo(Mo().mark((function t(e,r){var n,o,i;return Mo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r&&x(r,!0),y(zo(zo({},d),{},{loading:!0})),t.prev=2,t.next=5,u.users(w).addresses(null===(n=f.address)||void 0===n?void 0:n.id).save(zo(zo({},e),d.changes),{accessToken:O});case 5:o=t.sent,i=o.content,y(zo(zo({},d),{},{loading:!1,error:i.error?i.result:null,changes:i.error?d.changes:{}})),i.error||(p(zo(zo({},f),{},{address:i.result})),c&&c(i.result)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),y(zo(zo({},d),{},{loading:!1,error:[t.t0.message],address:{}}));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){p(zo(zo({},f),{},{address:n||{}}))}),[n]),Object(o.useEffect)((function(){r&&!n&&S(w,r)}),[]),Object(o.useEffect)((function(){return function(){b.address&&b.address.cancel()}}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Ro({},t,{formState:d,showField:function(t){var e,r,n;return!a||!s.loading&&!(null!==(e=s.fields)&&void 0!==e&&e.address[t])||!s.loading&&(null===(r=s.fields)||void 0===r?void 0:r.address[t])&&(null===(n=s.fields)||void 0===n?void 0:n.address[t].enabled)},updateChanges:L,handleChangeInput:function(t){L($o({},t.target.name,t.target.value))},isRequiredField:function(t){var e,r,n;return a&&!s.loading&&(null===(e=s.fields)||void 0===e?void 0:e.address[t])&&(null===(r=s.fields)||void 0===r?void 0:r.address[t].enabled)&&(null===(n=s.fields)||void 0===n?void 0:n.address[t].required)},saveAddress:_,addressState:f,setIsEdit:function(t){return j(t)}})))};function Ko(t){return Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ko(t)}function Zo(){return Zo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zo.apply(this,arguments)}function Xo(){Xo=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ko(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Qo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ti(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qo(Object(r),!0).forEach((function(e){ei(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ei(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ri(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ni(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ri(i,n,o,a,c,"next",t)}function c(t){ri(i,n,o,a,c,"throw",t)}a(void 0)}))}}function oi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ii(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ii(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Wo.propTypes={UIComponent:c.a.elementType,isSelectedAfterAdd:c.a.bool,useValidationFileds:c.a.bool,address:c.a.object,userId:c.a.number,addressId:c.a.number,onSaveAddress:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Wo.defaultProps={useValidationFileds:!1,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ai=function(t){var e=t.UIComponent,r=t.changeOrderAddressWithDefault,n=t.handleClickSetDefault,a=t.handleClickDelete,c=t.handleSuccessUpdate,u=t.userState,s=oi(er(),1)[0],l=oi(hr(),1)[0],f=l.user,p=l.token,h=oi(Uo(),2)[1].setUserCustomer,d=t.userId||(null==f?void 0:f.id),y=t.accessToken||p;if(!d)throw new Error("`userId` must provide from props or use SessionProviver to wrappe the app.");if(!y)throw new Error("`accessToken` must provide from props or use SessionProviver to wrappe the app.");var v=oi(Object(o.useState)({loading:!1,error:null,addresses:[]}),2),m=v[0],g=v[1],b=oi(Object(o.useState)({loading:!1,error:null}),2),w=b[0],O=b[1],x=oi(Rn(),2)[1].changeAddress,E={},j=function(){var t=ni(Xo().mark((function t(){var e,r,n;return Xo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g(ti(ti({},m),{},{loading:!0})),e={},E.list=e,t.next=6,s.setAccessToken(y).users(d).addresses().get({cancelToken:e});case 6:r=t.sent,n=r.content,g({loading:!1,error:n.error?n.result:null,addresses:n.error?[]:n.result}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),"Cancel"!==t.t0.constructor.name&&g(ti(ti({},m),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){if(null==t||!t.addresses)return j(),function(){E.list&&E.list.cancel()};g(ti(ti({},m),{},{addresses:t.addresses}))}),[t.addresses]);var S=function(){var t=ni(Xo().mark((function t(e,o){var i,a;return Xo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o&&h(o,!0),!n){t.next=3;break}return t.abrupt("return",n(e));case 3:return t.prev=3,O(ti(ti({},w),{},{loading:!0})),t.next=7,s.setAccessToken(y).users(d).addresses(e.id).save({default:!0});case 7:i=t.sent,a=i.content,O({loading:!1,error:a.error?a.result:null}),!a.error&&a.result.default&&(m.addresses.map((function(t){return t.default=t.id===e.id,t})),r&&x(a.result.id),g(ti({},m))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),O(ti(ti({},w),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e,r){return t.apply(this,arguments)}}(),L=function(){var t=ni(Xo().mark((function t(e){var r,n,o,i;return Xo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return",a(e));case 2:return t.prev=2,O(ti(ti({},w),{},{loading:!0})),t.next=6,s.users(d).addresses(e.id).delete({accessToken:y});case 6:r=t.sent,n=r.content,O({loading:!1,error:n.error?n.result:null}),n.error||(o=m.addresses.filter((function(t){return t.id!==e.id})),g(ti(ti({},m),{},{addresses:o})),c&&(i=ti(ti({},u.user),{},{addresses:o}),c(i))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),O(ti(ti({},w),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Zo({},t,{addressList:m,setAddressList:g,actionStatus:w,handleSetDefault:S,handleDelete:L})))};function ci(t){return ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ci(t)}function ui(){return ui=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ui.apply(this,arguments)}function si(){si=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ci(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function li(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?li(Object(r),!0).forEach((function(e){pi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):li(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function di(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){hi(i,n,o,a,c,"next",t)}function c(t){hi(i,n,o,a,c,"throw",t)}a(void 0)}))}}function yi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return vi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vi(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ai.propTypes={UIComponent:c.a.elementType,handleClickAddress:c.a.func,handleClickSetDefault:c.a.func,handleClickDelete:c.a.func,userId:c.a.number,accessToken:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ai.defaultProps={changeOrderAddressWithDefault:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mi=function(t){var e=t.UIComponent,r=t.endpoint,n=t.endpoint1,a=yi(er(),1)[0],c=yi(hr(),1)[0],u=c.token,s=c.loading,l=yi(Object(o.useState)({content:[],loading:!1,error:null}),2),f=l[0],p=l[1],h=yi(Object(o.useState)({content:[],loading:!1,error:null}),2),d=h[0],y=h[1],v=yi(Object(o.useState)(""),2),m=v[0],g=v[1],b=yi(Object(o.useState)({from:"",to:"",businessIds:null,drivers_ids:null,franchises_id:null,driver_companies_ids:null,driver_groups_ids:null,delivery_types_ids:null,app_ids:null}),2),w=b[0],O=b[1],x=function(){var t=di(si().mark((function t(){var e,n,o,i,c,l,h;return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,p(fi(fi({},f),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},n="",""!==(null==w?void 0:w.from)&&""!==(null==w?void 0:w.to)&&(n="from=".concat(ln()(null==w?void 0:w.from).format("YYYY-MM-DD")," 00:00:00&to=").concat(ln()(null==w?void 0:w.to).format("YYYY-MM-DD")," 23:59:59")),null!=w&&w.businessIds&&(null==w?void 0:w.businessIds.length)>0&&(n="".concat(n,"&businesses_ids=").concat(JSON.stringify(null==w?void 0:w.businessIds))),null!=w&&w.drivers_ids&&(null==w?void 0:w.drivers_ids.length)>0&&(n="".concat(n,"&drivers_ids=").concat(JSON.stringify(null==w?void 0:w.drivers_ids))),null!=w&&w.franchises_id&&(null==w?void 0:w.franchises_id.length)>0&&(n="".concat(n,"&franchises_id=").concat(JSON.stringify(null==w?void 0:w.franchises_id))),null!=w&&w.driver_companies_ids&&(null==w?void 0:w.driver_companies_ids.length)>0&&(n="".concat(n,"&driver_companies_ids=").concat(JSON.stringify(null==w?void 0:w.driver_companies_ids))),null!=w&&w.driver_groups_ids&&(null==w?void 0:w.driver_groups_ids.length)>0&&(n="".concat(n,"&driver_groups_ids=").concat(JSON.stringify(null==w?void 0:w.driver_groups_ids))),null!=w&&w.delivery_types_ids&&(null==w?void 0:w.delivery_types_ids.length)>0&&(n="".concat(n,"&delivery_types_ids=").concat(JSON.stringify(null==w?void 0:w.delivery_types_ids))),null!=w&&w.app_ids&&(null==w?void 0:w.app_ids.length)>0&&(n="".concat(n,"&app_ids=").concat(JSON.stringify(null==w?void 0:w.app_ids))),o="".concat(a.root,"/reports/").concat(r,"?").concat(n),t.next=17,fetch(o,e);case 17:return i=t.sent,t.next=20,i.json();case 20:c=t.sent,l=c.error,h=c.result,p(fi(fi({},f),{},l?{loading:!1,error:h}:{loading:!1,content:h})),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(2),p(fi(fi({},f),{},{loading:!1,error:t.t0}));case 29:case"end":return t.stop()}}),t,null,[[2,26]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=di(si().mark((function t(){var e,r,o,i,c,l,f;return si().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,y(fi(fi({},d),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},r="",""!==(null==w?void 0:w.from)&&""!==(null==w?void 0:w.to)&&(r="from=".concat(ln()(null==w?void 0:w.from).format("YYYY-MM-DD")," 00:00:00&to=").concat(ln()(null==w?void 0:w.to).format("YYYY-MM-DD")," 23:59:59")),null!=w&&w.businessIds&&(null==w?void 0:w.businessIds.length)>0&&(r="".concat(r,"&businesses_ids=").concat(JSON.stringify(null==w?void 0:w.businessIds))),null!=w&&w.drivers_ids&&(null==w?void 0:w.drivers_ids.length)>0&&(r="".concat(r,"&drivers_ids=").concat(JSON.stringify(null==w?void 0:w.drivers_ids))),null!=w&&w.franchises_id&&(null==w?void 0:w.franchises_id.length)>0&&(r="".concat(r,"&franchises_id=").concat(JSON.stringify(null==w?void 0:w.franchises_id))),null!=w&&w.driver_companies_ids&&(null==w?void 0:w.driver_companies_ids.length)>0&&(r="".concat(r,"&driver_companies_ids=").concat(JSON.stringify(null==w?void 0:w.driver_companies_ids))),null!=w&&w.driver_groups_ids&&(null==w?void 0:w.driver_groups_ids.length)>0&&(r="".concat(r,"&driver_groups_ids=").concat(JSON.stringify(null==w?void 0:w.driver_groups_ids))),null!=w&&w.delivery_types_ids&&(null==w?void 0:w.delivery_types_ids.length)>0&&(r="".concat(r,"&delivery_types_ids=").concat(JSON.stringify(null==w?void 0:w.delivery_types_ids))),null!=w&&w.app_ids&&(null==w?void 0:w.app_ids.length)>0&&(r="".concat(r,"&app_ids=").concat(JSON.stringify(null==w?void 0:w.app_ids))),o="".concat(a.root,"/reports/").concat(n,"?").concat(r),t.next=17,fetch(o,e);case 17:return i=t.sent,t.next=20,i.json();case 20:c=t.sent,l=c.error,f=c.result,y(fi(fi({},d),{},l?{loading:!1,error:f}:{loading:!1,content:f})),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(2),y(fi(fi({},d),{},{loading:!1,error:t.t0}));case 29:case"end":return t.stop()}}),t,null,[[2,26]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){x(),n&&E()}),[w]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,ui({},t,{filterList:w,handleChangeFilterList:O,reportData:f,reportData1:d,countryCode:m,handleChangeCode:function(t){g(t===m?"":t)}})))};function gi(t){return gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gi(t)}function bi(){return bi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bi.apply(this,arguments)}function wi(){wi=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==gi(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Oi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function xi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ei(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xi(Object(r),!0).forEach((function(e){ji(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ji(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Si(t){return function(t){if(Array.isArray(t))return Pi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||_i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _i(t,e){if(t){if("string"==typeof t)return Pi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pi(t,e):void 0}}function Pi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}mi.propTypes={UIComponent:c.a.elementType,endpoint:c.a.string,endpoint1:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mi.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ki=function(t){var e=t.UIComponent,r=t.filterList,n=t.handleChangeFilterList,a=t.propsToFetch,c=t.onClose,u=t.isFranchise,s=t.isSearchByName,l=Li(er(),1)[0],f=Li(Object(o.useState)({loading:!0,error:null,businesses:[],pagination:null}),2),p=f[0],h=f[1],d=Li(Object(o.useState)(null),2),y=d[0],v=d[1],m=Li(Object(o.useState)(!1),2),g=m[0],b=m[1],w=Li(Object(o.useState)(null),2),O=w[0],x=w[1],E=new RegExp(/^[A-Za-z0-9\s]+$/g),j=function(){var t,e=(t=wi().mark((function t(){var e,n,o,i,c,f,d,y,v,m,g,b;return wi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Ei(Ei({},p),{},{loading:!0})),e=null,n=[],O&&(o=[],i=E.test(O),s&&o.push({attribute:"name",value:{condition:"ilike",value:i?encodeURI("%".concat(O,"%")):"%".concat(O,"%")}}),n.push({conector:"OR",conditions:o})),n.length&&(e={conditions:n,conector:"AND"}),c=e?l.businesses().asDashboard().select(a).where(e):l.businesses().asDashboard().select(a),t.next=9,c.get();case 9:f=t.sent,d=f.content,y=d.error,v=d.result,m=d.pagination,y?h(Ei(Ei({},p),{},{loading:!1,error:v})):(b=[],b=u&&(null==r||null===(g=r.franchises_id)||void 0===g?void 0:g.length)>0?v.filter((function(t){return null==r?void 0:r.franchises_id.includes(t.franchise_id)})):Si(v),h(Ei(Ei({},p),{},{loading:!1,businesses:b,pagination:m}))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),h(Ei(Ei({},p),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Oi(i,n,o,a,c,"next",t)}function c(t){Oi(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t=new AbortController;return j(),t.abort()}),[O]),Object(o.useEffect)((function(){var t,e,n;if(0!==(null==p||null===(t=p.businesses)||void 0===t?void 0:t.length)){var o=null===(e=p.businesses)||void 0===e?void 0:e.reduce((function(t,e){return[].concat(Si(t),[e.id])}),[]),i=(null==r||null===(n=r.businessIds)||void 0===n?void 0:n.length)>0?null==r?void 0:r.businessIds.filter((function(t){return o.includes(t)})):o;v(Si(i)),null!=r&&r.businessIds&&(null==i?void 0:i.length)!==(null==p?void 0:p.businesses.length)||b(!0)}}),[null==p?void 0:p.businesses]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,bi({},t,{businessList:p,businessIds:y,handleChangeBusinessId:function(t){if(null==y?void 0:y.find((function(e){return e===t}))){var e=null==y?void 0:y.filter((function(e){return e!==t}));v(e),b(!1)}else{var r=y?Si(y):[];r.push(t),r.length===(null==p?void 0:p.businesses.length)&&b(!0),v(r)}},handleClickFilterButton:function(){var t=y?Si(y):null;n(Ei(Ei({},r),{},{businessIds:t})),c&&c()},isAllCheck:g,handleChangeAllCheck:function(){if(g)v(null);else{var t,e=[],r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_i(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(p.businesses);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.id)}}catch(t){r.e(t)}finally{r.f()}v(e)}b(!g)},searchValue:O,onSearch:x})))};function Ti(t){return Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ti(t)}function Ii(){return Ii=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ii.apply(this,arguments)}function Ai(){Ai=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ti(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Ci(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ni(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Di(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ni(Object(r),!0).forEach((function(e){Gi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ni(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Gi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fi(t){return function(t){if(Array.isArray(t))return Mi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ri(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ui(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Ri(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Bi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Ri(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ri(t,e){if(t){if("string"==typeof t)return Mi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mi(t,e):void 0}}function Mi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ki.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ki.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var Yi=function(t){var e=t.UIComponent,r=t.filterList,n=t.handleChangeFilterList,a=t.propsToFetch,c=t.onClose,u=Bi(er(),1)[0],s=Bi(Object(o.useState)({loading:!0,error:null,users:[],pagination:null}),2),l=s[0],f=s[1],p=Bi(Object(o.useState)(null),2),h=p[0],d=p[1],y=Bi(Object(o.useState)(null),2),v=y[0],m=y[1],g=Bi(Object(o.useState)("all"),2),b=g[0],w=g[1],O=function(t){var e,r=!1,n=!1,o=Ui(h);try{for(o.s();!(e=o.n()).done;){var i=e.value;if(i.id===t){var a,c=Ui(i.children);try{var u=function(){var t=a.value;(null==v?void 0:v.find((function(e){return e===t.id})))?r=!0:n=!0};for(c.s();!(a=c.n()).done;)u()}catch(t){c.e(t)}finally{c.f()}}}}catch(t){o.e(t)}finally{o.f()}var s="all";return r&&n?s="some":!r&&n&&(s="none"),s},x=function(t,e){var r,n=!1,o=Ui(null==l?void 0:l.users);try{for(o.s();!(r=o.n()).done;){var i,a=r.value,c=Ui(a.drivergroups);try{for(c.s();!(i=c.n()).done;){var u=i.value;a.id===t&&u.id===e&&(n=!0)}}catch(t){c.e(t)}finally{c.f()}}}catch(t){o.e(t)}finally{o.f()}return n},E=function(){var t,e=(t=Ai().mark((function t(){var e,r,n,o,i,c;return Ai().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Di(Di({},l),{},{loading:!0})),e=[{attribute:"level",value:"4"}],t.next=5,u.users().asDashboard().select(a).where(e).get();case 5:r=t.sent,n=r.content,o=n.error,i=n.result,c=n.pagination,f(Di(Di({},l),{},o?{loading:!1,error:i}:{loading:!1,users:i,pagination:c})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),f(Di(Di({},l),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ci(i,n,o,a,c,"next",t)}function c(t){Ci(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t=new AbortController;return E(),t.abort()}),[]),Object(o.useEffect)((function(){(null==l?void 0:l.users.length)>0&&function(){var t,e=[],r=[],n=Ui(null==l?void 0:l.users);try{for(n.s();!(t=n.n()).done;){var o,i=t.value,a=Ui(null==i?void 0:i.drivergroups);try{var c=function(){var t=o.value;e.find((function(e){return e.id===t.id}))||e.push({id:t.id,name:t.name,isCollapse:!1,children:[]})};for(a.s();!(o=a.n()).done;)c()}catch(t){a.e(t)}finally{a.f()}r.push(i.id)}}catch(t){n.e(t)}finally{n.f()}var u=e.map((function(t){var e,r=Fi(t.children),n=Ui(null==l?void 0:l.users);try{for(n.s();!(e=n.n()).done;){var o=e.value;x(o.id,t.id)&&r.push(o)}}catch(t){n.e(t)}finally{n.f()}return Di(Di({},t),{},{children:r})}));m(r),d(u)}()}),[l]),Object(o.useEffect)((function(){v&&null!=l&&l.users&&(v.length>0&&v.length===l.users.length&&w("all"),v.length>0&&v.length!==l.users.length&&w("some"),0===v.length&&w("none"))}),[v]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Ii({},t,{usersList:l,groupList:h,userIds:v,isAllCheck:b,handleChangeCollapse:function(t){var e=null==h?void 0:h.map((function(e){return e.id===t?Di(Di({},e),{},{isCollapse:!e.isCollapse}):e}));d(e)},handleChangeUserId:function(t){if(null==v?void 0:v.find((function(e){return e===t}))){var e=null==v?void 0:v.filter((function(e){return e!==t}));m(e),w(!1)}else{var r=v?Fi(v):[];r.push(t),r.length===(null==l?void 0:l.users.length)&&w(!0),m(r)}},isParentCheck:O,parentClick:function(t){var e,r=O(t),n=null==h?void 0:h.find((function(e){return e.id===t})),o=Fi(v),i=Ui(null==n?void 0:n.children);try{var a=function(){var t=e.value,n=v.find((function(e){return e===t.id}));if(n&&"none"!==r){var i,a=null===(i=o)||void 0===i?void 0:i.filter((function(e){return e!==t.id}));o=Fi(a)}n||"none"!==r||o.push(t.id)};for(i.s();!(e=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}m(o)},isIncluded:x,changeAllCheckStatus:function(t){if(t!==b)if(w(t),"all"===t){var e,r=[],n=Ui(null==l?void 0:l.users);try{for(n.s();!(e=n.n()).done;){var o=e.value;r.push(o.id)}}catch(t){n.e(t)}finally{n.f()}m(r)}else m([])},handleClickFilterButton:function(){var t=v&&v.length>0?Fi(v):null;n&&n(Di(Di({},r),{},{userIds:t})),c&&c()}})))};function zi(t){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zi(t)}function $i(){return $i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$i.apply(this,arguments)}function qi(){qi=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==zi(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Ji(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ji(Object(r),!0).forEach((function(e){Hi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ji(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Hi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wi(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ki(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Zi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zi(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Yi.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Yi.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var Xi=function(t){var e=t.UIComponent,r=Ki(hr(),1)[0],n=r.token,a=r.loading,c=Ki(er(),1)[0],u=Ki(Object(o.useState)({loading:!1,ids:[],error:null}),2),s=u[0],l=u[1],f=function(){var t,e=(t=qi().mark((function t(){var e,r,o,i,u,f;return qi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,l(Vi(Vi({},s),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r="".concat(c.root,"/reports/app_ids"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,u=i.error,f=i.result,l(Vi(Vi({},s),{},u?{loading:!0,error:f}:{loading:!1,ids:f})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),l(Vi(Vi({},s),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Wi(i,n,o,a,c,"next",t)}function c(t){Wi(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){f()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,$i({},t,{appIdList:s})))};function Qi(t){return Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qi(t)}function ta(){return ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ta.apply(this,arguments)}function ea(t){return function(t){if(Array.isArray(t))return la(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||sa(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ra(){ra=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Qi(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function na(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function oa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?na(Object(r),!0).forEach((function(e){ia(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):na(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ia(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aa(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ca(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){aa(i,n,o,a,c,"next",t)}function c(t){aa(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ua(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||sa(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sa(t,e){if(t){if("string"==typeof t)return la(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?la(t,e):void 0}}function la(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Xi.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xi.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fa=function(t){var e=t.UIComponent,r=ua(er(),1)[0],n=ua(hr(),1)[0],a=n.user,c=n.token,u=ua(br(),2)[1].showToast,s=ua(Ir(),2)[1],l=ua(Object(o.useState)({keys:[],loading:!1,error:null}),2),f=l[0],p=l[1],h=ua(Object(o.useState)({loading:!1,error:null}),2),d=h[0],y=h[1],v=function(){var t=ca(ra().mark((function t(){var e,n,o;return ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(oa(oa({},f),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=5,fetch("".concat(r.root,"/users/").concat(null==a?void 0:a.id,"/keys"),e);case 5:return n=t.sent,t.next=8,n.json();case 8:(o=t.sent).error||p(oa(oa({},f),{},{keys:o.result,loading:!1})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),p(oa(oa({},f),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=ca(ra().mark((function t(e){var n,o,i,l;return ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(vr.Info,s("LOADING","Loading")),y(oa(oa({},d),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(r.root,"/users/").concat(null==a?void 0:a.id,"/keys/").concat(e),n);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?y({loading:!1,error:i.result}):(y(oa(oa({},d),{},{loading:!1})),l=f.keys.filter((function(t){return t.id!==e})),p(oa(oa({},f),{},{keys:l})),u(vr.Success,s("APIKEY_REMOVED","API key removed"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),y({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=ca(ra().mark((function t(){var e,n,o,i;return ra().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(vr.Info,s("LOADING","Loading")),y(oa(oa({},d),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(r.root,"/users/").concat(null==a?void 0:a.id,"/keys"),e);case 6:return n=t.sent,t.next=9,n.json();case 9:(o=t.sent).error?y({loading:!1,error:o.result}):(y(oa(oa({},d),{},{loading:!1})),i=[].concat(ea(f.keys),[o.result]),p(oa(oa({},f),{},{keys:i})),u(vr.Success,s("APIKEY_ADDED","API key added"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),y({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){0!==(null==a?void 0:a.level)&&2!==(null==a?void 0:a.level)||v()}),[a]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,ta({},t,{apiKeysList:f,actionState:d,handleDeleteApiKey:m,handleAddApiKey:g})))};function pa(t){return pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pa(t)}function ha(){return ha=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ha.apply(this,arguments)}function da(){da=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==pa(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ya(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function va(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ya(Object(r),!0).forEach((function(e){ma(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ya(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ma(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ba(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function wa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Oa(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oa(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}fa.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fa.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xa=function(t){var e=t.UIComponent,r=wa(er(),1)[0],n=wa(hr(),1)[0].token,a=wa(Object(o.useState)(null),2),c=a[0],u=a[1],s=wa(Object(o.useState)({loading:!1,result:[],error:null}),2),l=s[0],f=s[1],p=function(){var t,e=(t=da().mark((function t(){var e,o,i,a,u;return da().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(va(va({},l),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=5,fetch("".concat(r.root,"/business/").concat(c.id,"/calendar_events"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,a=i.result,u=i.error,f({loading:!1,result:u?[]:a,error:u?a:null}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),f(va(va({},l),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ba(i,n,o,a,c,"next",t)}function c(t){ba(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){c&&p()}),[c]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,ha({},t,{selectedBusiness:c,setSelectedBusiness:u,businessCalendarEvents:l})))};xa.propTypes={UIComponent:c.a.elementType};var Ea=function(t){var e=t.UIComponent;return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,t))};function ja(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Sa(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sa(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Ea.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ea.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var La=function(t){var e=t.appId,r=t.children,n=ja(hr(),1)[0].user;return Object(o.useEffect)((function(){e&&function(t,e,r,n){function o(){if(!e.getElementById("canny-jssdk")){var t=e.getElementsByTagName(n)[0],r=e.createElement(n);r.type="text/javascript",r.async=!0,r.src="https://canny.io/sdk.js",t.parentNode.insertBefore(r,t)}}if("function"!=typeof t.Canny){var i=function t(){t.q.push(arguments)};i.q=[],t.Canny=i,"complete"===e.readyState?o():t.attachEvent?t.attachEvent("onload",o):t.addEventListener("load",o,!1)}}(window,document,0,"script")}),[e]),Object(o.useEffect)((function(){n&&e&&window.Canny("identify",{appID:e,user:{email:n.email,name:n.name,id:n.id,avatarURL:null==n?void 0:n.photo}})}),[n,e]),i.a.createElement(i.a.Fragment,null,r)};function _a(t){return _a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_a(t)}function Pa(){return Pa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pa.apply(this,arguments)}function ka(t){return function(t){if(Array.isArray(t))return Ua(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Fa(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ta(){Ta=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==_a(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Ia(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Aa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ia(Object(r),!0).forEach((function(e){Ca(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ia(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ca(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Na(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Da(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Na(i,n,o,a,c,"next",t)}function c(t){Na(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ga(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Fa(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fa(t,e){if(t){if("string"==typeof t)return Ua(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ua(t,e):void 0}}function Ua(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}La.propTypes={appId:c.a.string.isRequired},La.defaultProps={};var Ba=function(t){var e=t.UIComponent,r=Ga(er(),1)[0],n=Ga(hr(),1)[0].token,a=Ga(br(),2)[1].showToast,c=Ga(Ir(),2)[1],u=Ga(Object(o.useState)({images:[],loading:!1,error:null}),2),s=u[0],l=u[1],f=Ga(Object(o.useState)({loading:!1,change:{},error:null}),2),p=f[0],h=f[1],d=Ga(Object(o.useState)({loading:!1,error:null}),2),y=d[0],v=d[1],m=Ga(Object(o.useState)(null),2),g=m[0],b=m[1],w=function(){var t=Da(Ta().mark((function t(){var e,o,i;return Ta().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Aa(Aa({},s),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=5,fetch("".concat(r.root,"/files?where={%22type%22:1}"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error||l({images:i.result,loading:!1}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),l(Aa(Aa({},s),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Da(Ta().mark((function t(){var e,o,i,u,f;return Ta().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(vr.Info,c("LOADING","Loading")),h(Aa(Aa({},p),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(p.change)},t.next=6,fetch("".concat(r.root,"/files"),e);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?h(Aa(Aa({},p),{},{loading:!1,error:i.result})):(h({loading:!1,change:{},error:null}),f=[].concat(ka(s.images),[i.result]),l(Aa(Aa({},s),{},{images:f})),a(vr.Success,c("GALLERY_IMAGE_ADDED","Business gallery image added")),b(null==i||null===(u=i.result)||void 0===u?void 0:u.source)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),h(Aa(Aa({},p),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=Da(Ta().mark((function t(e){var o,i,u,f;return Ta().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(vr.Info,c("LOADING","Loading")),v(Aa(Aa({},y),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=6,fetch("".concat(r.root,"/files/").concat(e),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?v({loading:!1,error:u.result}):(v({loading:!1,error:null}),f=s.images.filter((function(t){return t.id!==e})),l(Aa(Aa({},s),{},{images:f})),a(vr.Success,c("FILE_DELETED","File deleted"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){0!==Object.keys(p.change).length&&O()}),[p.change]),Object(o.useEffect)((function(){w()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Pa({},t,{imageListState:s,insertImageState:p,selectedImageUrl:g,setSelectedImageUrl:b,handleInsertImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){h(Aa(Aa({},p),{},{change:{source:e.result,type:1}}))},e.onerror=function(t){return console.log(t)}},handleDeleteImage:x})))};function Ra(t){return Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ra(t)}function Ma(){return Ma=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ma.apply(this,arguments)}function Ya(){Ya=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ra(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function za(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?za(Object(r),!0).forEach((function(e){qa(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):za(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qa(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ja(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Va(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ha(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ha(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ha(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Ba.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ba.defaultProps={propsToFetch:["name","enabled"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Wa=function(t){var e=t.UIComponent,r=t.campaignId,n=Va(er(),1)[0],a=Va(hr(),1)[0].token,c=Va(Object(o.useState)({users:[],loading:!0,error:null}),2),u=c[0],s=c[1],l=function(){var t,e=(t=Ya().mark((function t(){var e,o,i;return Ya().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s($a($a({},u),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,fetch("".concat(n.root,"/marketing_campaigns/").concat(r,"/users"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error?s($a($a({},u),{},{loading:!1,error:i.result})):s($a($a({},u),{},{loading:!1,error:null,users:i.result})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),s($a($a({},u),{},{loading:!1,error:t.t0.message}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ja(i,n,o,a,c,"next",t)}function c(t){Ja(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){l()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Ma({},t,{userListState:u})))};function Ka(t){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(t)}function Za(){return Za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Za.apply(this,arguments)}function Xa(t){return function(t){if(Array.isArray(t))return cc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ac(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qa(){Qa=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ka(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function tc(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ec(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){tc(i,n,o,a,c,"next",t)}function c(t){tc(i,n,o,a,c,"throw",t)}a(void 0)}))}}function rc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rc(Object(r),!0).forEach((function(e){oc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ic(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||ac(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ac(t,e){if(t){if("string"==typeof t)return cc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cc(t,e):void 0}}function cc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Wa.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Wa.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var uc=["cloudinary","tookan","order_messages","others"],sc=["search_by_address","distance_unit_km","pickup","orders_metafields_strategy","order_validate","time_format","driver_close_distance","lazy_load_products_when_necessary","advanced_business_search_enabled"],lc=function(t){var e=t.UIComponent,r=t.settingsType,n=ic(hr(),1)[0],a=n.token,c=n.loading,u=ic(er(),1)[0],s=ic(Object(o.useState)({categories:[],loading:!1,error:null}),2),l=s[0],f=s[1],p=ic(Object(o.useState)(!1),2),h=p[0],d=p[1],y=ic(Object(o.useState)(null),2),v=y[0],m=y[1],g=function(){var t=ec(Qa().mark((function t(){var e,n,o,i,s,p,h;return Qa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,f(nc(nc({},l),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},(n=[]).push({attribute:"key",value:r}),o="".concat(u.root,"/config_categories?where=").concat(JSON.stringify(n)),t.next=10,fetch(o,e);case 10:return i=t.sent,t.next=13,i.json();case 13:s=t.sent,p=s.error,h=s.result,!p&&h.length>0?m(h[0].id):f(nc(nc({},l),{},{loading:!1,error:h})),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),f(nc(nc({},l),{},{loading:!1,error:t.t0}));case 22:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=ec(Qa().mark((function t(){var e,r,n,o,i,s,p,h;return Qa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,f(nc(nc({},l),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},(r=[]).push({attribute:"parent_category_id",value:parseInt(v)}),n="".concat(u.root,"/config_categories?orderBy=rank&where=").concat(JSON.stringify(r)),t.next=10,fetch(n,e);case 10:return o=t.sent,t.next=13,o.json();case 13:i=t.sent,s=i.error,p=i.result,s?f(nc(nc({},l),{},{loading:!0,error:p})):(h=p.filter((function(t){return!uc.includes(t.key)})).map((function(t){var e,r=null===(e=t.configs)||void 0===e?void 0:e.filter((function(t){return!sc.includes(t.key)})).sort((function(t,e){return 1*t.rank>1*e.rank?1:-1}));return nc(nc({},t),{},{configs:Xa(r)})})),f(nc(nc({},l),{},{loading:!1,categories:h}))),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),f(nc(nc({},l),{},{loading:!1,error:t.t0}));case 22:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){g()}),[]),Object(o.useEffect)((function(){v&&b(v)}),[v]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Za({},t,{isUpdateConfig:h,handChangeConfig:d,categoryList:l,handleUpdateCategoryList:function(t){f(nc(nc({},l),{},{categories:t})),d(!0)}})))};function fc(t){return fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fc(t)}function pc(){return pc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pc.apply(this,arguments)}function hc(){hc=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==fc(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function dc(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function yc(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){dc(i,n,o,a,c,"next",t)}function c(t){dc(i,n,o,a,c,"throw",t)}a(void 0)}))}}function vc(t){return function(t){if(Array.isArray(t))return xc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Oc(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mc(Object(r),!0).forEach((function(e){bc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Oc(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oc(t,e){if(t){if("string"==typeof t)return xc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xc(t,e):void 0}}function xc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}lc.propTypes={UIComponent:c.a.elementType,settingsType:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ec=function(t){var e=t.UIComponent,r=t.banner,n=t.sitesState,a=t.defaultPosition,c=t.handleSuccessUpdate,u=t.handleSuccessAdd,s=t.handleSuccessDelete,l=wc(er(),1)[0],f=wc(hr(),1)[0].token,p=wc(br(),2)[1].showToast,h=wc(Ir(),2)[1],d=wc(Object(o.useState)({banner:r,loading:!1,error:null}),2),y=d[0],v=d[1],m=wc(Object(o.useState)(!1),2),g=m[0],b=m[1],w=wc(Object(o.useState)({loading:!1,items:[],images:[],videos:[],error:null}),2),O=w[0],x=w[1],E=wc(Object(o.useState)({changes:{},itemId:null,loading:!1,error:null}),2),j=E[0],S=E[1],L=wc(Object(o.useState)([]),2),_=L[0],P=L[1],k=wc(Object(o.useState)({loading:!1,error:null}),2),T=k[0],I=k[1],A=function(){var t=yc(hc().mark((function t(e){var n,o,i,a,u,s,d,y,v=arguments;return hc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=v.length>1&&void 0!==v[1]&&v[1],t.prev=1,S((function(t){return gc(gc({},t),{},{loading:!0})})),p(vr.Info,h("LOADING","Loading")),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(e)},t.next=7,fetch("".concat(l.root,"/banners/").concat(r.id,"/items"),o);case 7:return i=t.sent,t.next=10,i.json();case 10:if((a=t.sent).error?S(gc(gc({},j),{},{loading:!1,error:a.result})):(S(gc(gc({},j),{},{loading:!1,changes:{}})),p(vr.Success,h("BANNER_ITEM_ADDED","Banner item added")),d=[].concat(vc(O.items),[a.result]),"image"===(null===(u=a.result)||void 0===u?void 0:u.type)&&x(gc(gc({},O),{},{items:d,images:[].concat(vc(O.images),[a.result])})),"video"===(null===(s=a.result)||void 0===s?void 0:s.type)&&x(gc(gc({},O),{},{items:d,videos:[].concat(vc(O.videos),[a.result])})),y=gc(gc({},r),{},{items:d}),c&&c(y)),!n){t.next=14;break}return t.abrupt("return",a);case 14:t.next=21;break;case 16:if(t.prev=16,t.t0=t.catch(1),S(gc(gc({},j),{},{loading:!1,error:[t.t0.message]})),!n){t.next=21;break}return t.abrupt("return",{error:!0,result:t.t0});case 21:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=yc(hc().mark((function t(e){var n,o,i,a,u,s,d;return hc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,S((function(t){return gc(gc({},t),{},{loading:!0})})),p(vr.Info,h("LOADING","Loading")),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},t.next=6,fetch("".concat(l.root,"/banners/").concat(r.id,"/items/").concat(e),n);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?S(gc(gc({},j),{},{loading:!1,error:i.result})):(S(gc(gc({},j),{},{loading:!1,changes:{}})),p(vr.Success,h("BANNER_ITEM_DELETED","Banner item deleted")),s=O.items.filter((function(t){return t.id!==e})),"image"===(null===(a=i.result)||void 0===a?void 0:a.type)&&x(gc(gc({},O),{},{items:s,images:O.images.filter((function(t){return t.id!==e}))})),"video"===(null===(u=i.result)||void 0===u?void 0:u.type)&&x(gc(gc({},O),{},{items:s,videos:O.videos.filter((function(t){return t.id!==e}))})),d=gc(gc({},r),{},{items:s}),c&&c(d)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),S(gc(gc({},j),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=yc(hc().mark((function t(e,n){var o,i,a,u,s,d,y,v,m,g,b=arguments;return hc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=b.length>2&&void 0!==b[2]&&b[2],t.prev=1,S((function(t){return gc(gc({},t),{},{loading:!0})})),p(vr.Info,h("LOADING","Loading")),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(e)},t.next=7,fetch("".concat(l.root,"/banners/").concat(r.id,"/items/").concat(n),i);case 7:return a=t.sent,t.next=10,a.json();case 10:if((u=t.sent).error?S(gc(gc({},j),{},{loading:!1,error:u.result})):(S(gc(gc({},j),{},{loading:!1,changes:{}})),y=O.items.filter((function(t){return t.id===u.result.id&&Object.assign(t,u.result),!0})),"image"===(null===(s=u.result)||void 0===s?void 0:s.type)&&(v=O.images.filter((function(t){return t.id===u.result.id&&Object.assign(t,u.result),!0})),x(gc(gc({},O),{},{items:y,images:v}))),"video"===(null===(d=u.result)||void 0===d?void 0:d.type)&&(m=O.videos.filter((function(t){return t.id===u.result.id&&Object.assign(t,u.result),!0})),x(gc(gc({},O),{},{items:y,videos:m}))),g=gc(gc({},r),{},{items:y}),c&&c(g),p(vr.Success,h("BANNER_ITEM_SAVED","Banner item saved"))),!o){t.next=14;break}return t.abrupt("return",u);case 14:t.next=21;break;case 16:if(t.prev=16,t.t0=t.catch(1),S(gc(gc({},j),{},{loading:!1,error:[t.t0.message]})),!o){t.next=21;break}return t.abrupt("return",{error:!0,result:t.t0});case 21:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e,r){return t.apply(this,arguments)}}(),D=function(){var t=yc(hc().mark((function t(e){var n,o,i,a,u,s;return hc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),I({loading:!0,error:null}),i=gc({},e||(null==j?void 0:j.changes)),a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(i)},t.next=7,fetch("".concat(l.root,"/banners/").concat(null!==(n=r.id)&&void 0!==n?n:null===(o=y.banner)||void 0===o?void 0:o.id),a);case 7:return u=t.sent,t.next=10,u.json();case 10:(s=t.sent).error?I({loading:!1,error:s.result}):(v(gc(gc({},y),{},{banner:s.result})),I({loading:!1,error:null}),c&&c(s.result),S(gc(gc({},j),{},{changes:{}})),p(vr.Success,h("BANNER_SAVED","Banner saved"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),I({loading:!1,error:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),G=function(){var e=yc(hc().mark((function e(){var r,n,o,i;return hc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(vr.Info,h("LOADING","Loading")),I({loading:!0,error:null}),r=gc(gc({},null==j?void 0:j.changes),{},{position:a}),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(r)},e.next=7,fetch("".concat(l.root,"/banners"),n);case 7:return o=e.sent,e.next=10,o.json();case 10:(i=e.sent).error?I({loading:!1,error:i.result}):(I({loading:!1,error:null}),u&&u(gc(gc({},i.result),{},{enabled:!0})),t.onClose&&t.onClose(),p(vr.Success,h("BANNER_ADDED","Banner added"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),I({loading:!1,error:e.t0.message});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=yc(hc().mark((function e(){var n,o,i;return hc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(vr.Info,h("LOADING","Loading")),I({loading:!0,error:null}),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/banners/").concat(r.id),n);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?I({loading:!1,error:i.result}):(I({loading:!1,error:null}),s&&s(r.id),t.onClose&&t.onClose(),p(vr.Success,h("BANNER_DELETED","Banner deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),I({loading:!1,error:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){if(0===Object.keys(r).length)b(!0),S(gc(gc({},j),{},{changes:{}})),P([]),x(gc(gc({},O),{},{loading:!1,items:[],images:[],videos:[]}));else{var t;b(!1),S(gc(gc({},j),{},{changes:{}}));var e=null==r?void 0:r.items.filter((function(t){return"image"===t.type})),n=null==r?void 0:r.items.filter((function(t){return"video"===t.type}));x(gc(gc({},O),{},{loading:!1,items:r.items,images:e,videos:n}));var o=null==r||null===(t=r.sites)||void 0===t?void 0:t.reduce((function(t,e){return[].concat(vc(t),[e.id])}),[]);P(o||[]),v(gc(gc({},y),{},{banner:r}))}}),[r]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,pc({},t,{bannerState:y,bannerItemsState:O,changesState:j,actionState:T,isAddMode:g,handleChangeItem:function(t,e){S((function(r){return gc(gc({},r),{},{changes:gc(gc({},null==r?void 0:r.changes),t)},e&&{itemId:e})}))},handleAddBannerItem:A,handleUpdateBannerItem:N,selectedSitesIds:_,handleSelectSite:function(t,e){var n,o,i,a=[];null!==(n=j.changes)&&void 0!==n&&n.sites?a=vc(null===(o=j.changes)||void 0===o?void 0:o.sites):null!=r&&r.sites&&(a=null==r||null===(i=r.sites)||void 0===i?void 0:i.reduce((function(t,e){return[].concat(vc(t),[e.id])}),[]));t?a.push(e):a=a.filter((function(t){return t!==e})),P(a),S(gc(gc({},j),{},{changes:gc(gc({},j.changes),{},{sites:a})}))},handleSelectAllSites:function(t){var e,r=null===(e=n.sites)||void 0===e?void 0:e.reduce((function(t,e){return[].concat(vc(t),[e.id])}),[]),o=[];o=t?vc(r):[],P(o),S(gc(gc({},j),{},{changes:gc(gc({},j.changes),{},{sites:o})}))},handleUpdateClick:D,handleAddBanner:G,handleDeleteBanner:F,handleDeleteBannerItem:C})))};function jc(t){return jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jc(t)}function Sc(){return Sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sc.apply(this,arguments)}function Lc(){Lc=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==jc(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function _c(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Pc(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_c(i,n,o,a,c,"next",t)}function c(t){_c(i,n,o,a,c,"throw",t)}a(void 0)}))}}function kc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Tc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kc(Object(r),!0).forEach((function(e){Ic(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ic(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ac(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Cc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cc(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Ec.propTypes={UIComponent:c.a.elementType},Ec.defaultProps={};var Nc=function(t){var e,r,n=t.UIComponent,a=t.propsToFetch,c=t.isSearchByName,u=t.handleUpdateBannerItem,s=t.handleAddBannerItem,l=Ac(Ir(),2)[1],f=Ac(er(),1)[0],p=Ac(Object(o.useState)(null),2),h=p[0],d=p[1],y=Ac(Object(o.useState)({image:t.image,loading:!1,error:null}),2),v=y[0],m=y[1],g=Ac(Object(o.useState)({changes:{},loading:!1,error:null}),2),b=g[0],w=g[1],O=Ac(Object(o.useState)({loading:!1,businesses:[],result:{error:null}}),2),x=O[0],E=O[1],j=Ac(Object(o.useState)((null===(e=t.image)||void 0===e||null===(r=e.action)||void 0===r?void 0:r.type)||null),2),S=j[0],L=j[1],_=Ac(Object(o.useState)(null),2),P=_[0],k=_[1],T=Ac(Object(o.useState)(null),2),I=T[0],A=T[1],C=Ac(Object(o.useState)(null),2),N=C[0],D=C[1],G=new RegExp(/^[A-Za-z0-9\s]+$/g),F=function(){var t=Pc(Lc().mark((function t(){var e,r,n,o,i,u,s,l,p,d;return Lc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,E(Tc(Tc({},x),{},{loading:!0})),e=null,r=[],h&&(n=[],o=G.test(h),c&&n.push({attribute:"name",value:{condition:"ilike",value:o?encodeURI("%".concat(h,"%")):"%".concat(h,"%")}}),r.push({conector:"OR",conditions:n})),r.length&&(e={conditions:r,conector:"AND"}),i=e?f.businesses().asDashboard().select(a).where(e):f.businesses().asDashboard().select(a),t.next=9,i.get();case 9:u=t.sent,s=u.content,l=s.error,p=s.result,d=s.pagination,E(Tc(Tc({},x),{},l?{loading:!1,error:p}:{loading:!1,businesses:p,pagination:d})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),E(Tc(Tc({},x),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),U=function(){var e=Pc(Lc().mark((function e(){var r,n,o,i,a;return Lc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m(Tc(Tc({},v),{},{loading:!0,error:null})),r=null,"business"===S&&(r={type:"business",business_id:P}),"product"===S&&(r={type:"product",business_id:P,category_id:I,product_id:N}),(n={}).action=JSON.stringify(r),b.changes&&(n=Tc(Tc({},n),b.changes)),S){e.next=11;break}return m(Tc(Tc({},v),{},{loading:!1,error:[l("VALIDATION_ERROR_REQUIRED","The link type is required").replace("_attribute_",l("LINK_TYPE","Link type"))]})),e.abrupt("return");case 11:if("business"!==S||P){e.next=14;break}return m(Tc(Tc({},v),{},{loading:!1,error:[l("VALIDATION_ERROR_REQUIRED","The business is required").replace("_attribute_",l("BUSINESS","Business"))]})),e.abrupt("return");case 14:if("product"!==S||N){e.next=17;break}return m(Tc(Tc({},v),{},{loading:!1,error:[l("VALIDATION_ERROR_REQUIRED","The business is required").replace("_attribute_",l("PRODUCT","Product"))]})),e.abrupt("return");case 17:if(!t.image){e.next=23;break}return e.next=20,u(n,null===(i=v.image)||void 0===i?void 0:i.id,!0);case 20:o=e.sent,e.next=29;break;case 23:if(null!==(a=b.changes)&&void 0!==a&&a.image){e.next=26;break}return m(Tc(Tc({},v),{},{loading:!1,error:[l("VALIDATION_ERROR_REQUIRED","The image is required").replace("_attribute_",l("IMAGE",""))]})),e.abrupt("return");case 26:return e.next=28,s(n,!0);case 28:o=e.sent;case 29:o.error?m(Tc(Tc({},v),{},{loading:!1,error:o.result})):m({loading:!1,image:o.result,error:null}),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(0),m(Tc(Tc({},v),{},{loading:!0,error:[e.t0.message]}));case 35:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){F()}),[h]),Object(o.useEffect)((function(){var e;if(null!==(e=t.image)&&void 0!==e&&e.action){var r,n=Tc({},null===(r=t.image)||void 0===r?void 0:r.action);k((null==n?void 0:n.business_id)||null),A((null==n?void 0:n.category_id)||null),D((null==n?void 0:n.product_id)||null)}else k(null),A(null),D(null)}),[t.image,S]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,Sc({},t,{imageState:v,changesState:b,handleChangeItem:function(t){w((function(e){return Tc(Tc({},e),{},{changes:Tc(Tc({},null==e?void 0:e.changes),t)})}))},searchValue:h,onSearch:d,businessList:x,selectedLinkType:S,setSelectedLinkType:L,selectedBusinessId:P,setSelectedBusinessId:k,selectedCategoryId:I,setSelectedCategoryId:A,selectedProductId:N,setSelectedProductId:D,handleSaveImage:U})))};function Dc(t){return Dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dc(t)}function Gc(){return Gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gc.apply(this,arguments)}function Fc(){Fc=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Dc(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Uc(t){return function(t){if(Array.isArray(t))return Jc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||qc(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Rc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bc(Object(r),!0).forEach((function(e){Mc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yc(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function zc(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Yc(i,n,o,a,c,"next",t)}function c(t){Yc(i,n,o,a,c,"throw",t)}a(void 0)}))}}function $c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||qc(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qc(t,e){if(t){if("string"==typeof t)return Jc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jc(t,e):void 0}}function Jc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Nc.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string)},Nc.defaultProps={propsToFetch:["id","name","logo","slug"]};var Vc=function(t){var e=t.categorySelected,r=t.businessState,n=t.handleUpdateBusinessState,a=t.UIComponent,c=$c(Ir(),2)[1],u=$c(er(),1)[0],s=$c(hr(),1)[0].loading,l=$c(br(),2)[1].showToast,f=$c(Object(o.useState)([]),2),p=f[0],h=f[1],d=r.business,y=$c(Object(o.useState)({photos:[],loading:!1,result:{error:null},API:!1,endPoint:!1}),2),v=y[0],m=y[1],g=$c(Object(o.useState)([]),2),b=g[0],w=g[1],O=function(){return m({photos:[],loading:!1,result:{error:null},API:!1})},x=function(){var t=zc(Fc().mark((function t(e,r){var o,i,a,f,p,h,y;return Fc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,l(vr.Info,c("LOADING","Loading")),m(Rc(Rc({},v),{},{loading:!0,API:!1})),t.next=7,u.businesses(parseInt(null==d?void 0:d.id)).categories(parseInt(null==e?void 0:e.category_id)).products(null==e?void 0:e.id).save(r);case 7:o=t.sent,i=o.content,a=i.error,f=i.result,a?m(Rc(Rc({},v),{},{loading:!1,result:{error:!0,result:f}})):(n&&((h=Uc(null==d?void 0:d.categories)).forEach((function t(n){if(n.id===(null==e?void 0:e.category_id)){var o=n.products.map((function(t){return t.id===e.id?Rc(Rc({},t),r):t}));n.products=Uc(o)}Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(t)})),n(Rc(Rc({},d),{},{categories:h}))),(y=null==v||null===(p=v.photos)||void 0===p?void 0:p.filter((function(t){return(null==t?void 0:t.name)!==(null==f?void 0:f.id)}))).length>0?m(Rc(Rc({},v),{},{photos:y,API:!0})):m({loading:!1,photos:[],result:{error:!1,result:"all product updated"},API:!1,endPoint:!0}),l(vr.Success,c("PRODUCT_UPDATE","Products updated"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),m(Rc(Rc({},v),{},{loading:!1,result:{error:!0,result:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e,r){return t.apply(this,arguments)}}(),E=function(t){return new Promise((function(e){var r=new FileReader,n=t.type,o=t.name,i=t.size;r.addEventListener("load",(function(){e({base64:r.result,name:parseInt(o.split(".")[0]),type:n,size:i})})),r.readAsDataURL(t)}))},j=function(){var t=zc(Fc().mark((function t(e){var r,n,o;return Fc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],n=0;n<e.length;n++)r.push(E(e[n]));return t.next=4,Promise.all(r);case 4:o=t.sent,w([].concat(Uc(b),Uc(o)));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){m(Rc(Rc({},v),{},{photos:b}))}),[b]);return Object(o.useEffect)((function(){e&&null!=e&&e.products&&(null==e?void 0:e.products.length)>0&&h(null==e?void 0:e.products)}),[e]),Object(o.useEffect)((function(){var t;if(null!=v&&v.API&&(null==v||null===(t=v.photos)||void 0===t?void 0:t.length)>0){var e=null==v?void 0:v.photos[0],r={images:null==e?void 0:e.base64},n=p.find((function(t){return(null==e?void 0:e.name)===(null==t?void 0:t.id)}));x(n,r)}null!=v&&v.API&&0===(null==v?void 0:v.photos.length)&&O()}),[null==v?void 0:v.API]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,Gc({},t,{handleUploadImages:j,cleanFormState:O,updateProduct:function(){m(Rc(Rc({},v),{},{API:!0,loading:!0}))},formState:v,products:p})))};Vc.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Vc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Hc=function(t){var e;t=null===(e=t=t.replace(/^\s+|\s+$/g,""))||void 0===e?void 0:e.toLowerCase();for(var r="åàáãäâèéëêìíïîòóöôùúüûñç·/_,:;",n=0,o=r.length;n<o;n++)t=t.replace(new RegExp(r.charAt(n),"g"),"aaaaaaeeeeiiiioooouuuunc------".charAt(n));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"_").replace(/-+/g,"_").replace(/^-+/,"").replace(/-+$/,"")},Wc=function(t){return t*Math.PI/180},Kc=function(t,e,r,n){var o=Wc(r-t),i=Wc(n-e),a=Wc(t),c=Wc(r),u=Math.sin(o/2)*Math.sin(o/2)+Math.sin(i/2)*Math.sin(i/2)*Math.cos(a)*Math.cos(c);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))};function Zc(t){return Zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zc(t)}function Xc(){return Xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xc.apply(this,arguments)}function Qc(t){return function(t){if(Array.isArray(t))return su(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||uu(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tu(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=uu(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function eu(){eu=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Zc(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ru(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function nu(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ru(i,n,o,a,c,"next",t)}function c(t){ru(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ou(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function iu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ou(Object(r),!0).forEach((function(e){au(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ou(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function au(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||uu(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uu(t,e){if(t){if("string"==typeof t)return su(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?su(t,e):void 0}}function su(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var lu=function(t){var e,r,n=t.UIComponent,a=t.handleOpenCategory,c=t.defaultSandboxRequiredGateways,u=cu(er(),1)[0],s=cu(hr(),1)[0],l=cu(jn(),1)[0].configs,f=cu(br(),2)[1].showToast,p=cu(Ir(),2)[1],h=cu(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),d=h[0],y=h[1],v=cu(Object(o.useState)({}),2),m=v[0],g=v[1],b=cu(Object(o.useState)([]),2),w=b[0],O=b[1],x=cu(Object(o.useState)({paymethods:[],loading:!0,error:null}),2),E=x[0],j=x[1],S=cu(Object(o.useState)([]),2),L=S[0],_=S[1],P=cu(Object(o.useState)(null),2),k=P[0],T=P[1],I=cu(Object(o.useState)([]),2),A=I[0],C=I[1],N=cu(Object(o.useState)(null),2),D=N[0],G=N[1],F=cu(Object(o.useState)(null),2),U=F[0],B=F[1],R=cu(Object(o.useState)(null),2),M=R[0],Y=R[1],z=null,$=["paypal_express","authorize"],q=null==l||null===(e=l.google_maps_api_key)||void 0===e?void 0:e.value,J=c||["paypal","stripe_direct","paypal_express","stripe_connect","stripe_redirect","carlos_payment","ivr"],V={minimum:0,delivery_price:0,tax:0,tax_type:1,service_fee:0,enabled:!0,owner_id:null==s||null===(r=s.user)||void 0===r?void 0:r.id},H=function(){var t=nu(eu().mark((function t(){var e,r,n;return eu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(u.root,"/paymethods?where=[{%22attribute%22:%22enabled%22,%22value%22:true}]"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token),"x-app-x":null==u?void 0:u.appId}});case 3:return e=t.sent,t.next=6,e.json();case 6:r=t.sent,n=r.result,j(iu(iu({},E),{},{loading:!1,paymethods:W(n)})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),j(iu(iu({},E),{},{loading:!1,error:t.t0.message}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),W=function(t){return t&&t.filter((function(t){return!$.includes(null==t?void 0:t.gateway)}))},K=function(){var t=nu(eu().mark((function t(){var e,r,n;return eu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,p("LOADING","Loading")),y(iu(iu({},d),{},{loading:!0})),null==d||(null===(e=d.changes)||void 0===e||delete e.schedule),r=iu(iu(iu({},d.changes),V),{},{schedule:A},U&&{city_id:U}),t.next=7,u.businesses().save(r,{accessToken:s.token});case 7:if((n=t.sent).content.error){t.next=20;break}if(!(L.length>0)){t.next=12;break}return t.next=12,Promise.all(L.map(function(){var t=nu(eu().mark((function t(e){return eu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X(n.content.result.id,e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 12:if(!(w.length>0)){t.next=15;break}return t.next=15,Promise.all(w.map(function(){var t=nu(eu().mark((function t(e){var r,o,i;return eu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={business_id:null==n||null===(r=n.content)||void 0===r||null===(o=r.result)||void 0===o?void 0:o.id,file:null==e?void 0:e.file,type:1},t.next=3,Q(n.content.result.id,i);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 15:if(!(null!=m&&m.name&&null!=m&&m.minimum&&null!=m&&m.price)){t.next=18;break}return t.next=18,Z(n.content.result.id);case 18:f(vr.Success,p("BUSINESS_ADDED","Business added")),a&&a(n.content.result.slug);case 20:y(iu(iu({},d),{},{changes:n.content.error?d.changes:{},result:n.content,loading:!1})),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),y(iu(iu({},d),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 26:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(){return t.apply(this,arguments)}}(),Z=function(){var t=nu(eu().mark((function t(e){var r,n,o,i;return eu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=iu({},m),r=iu(iu({},r),{},{data:JSON.stringify(null==m?void 0:m.data),type:(null==m?void 0:m.type)||2,enabled:!0,schedule:JSON.stringify([{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]}])}),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},body:JSON.stringify(r)},t.next=5,fetch("".concat(u.root,"/business/").concat(e,"/deliveryzones"),n);case 5:return o=t.sent,t.next=8,o.json();case 8:return i=t.sent,t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(){var t=nu(eu().mark((function t(e,r){var n,o,i,a,c;return eu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=E.paymethods.find((function(t){return t.id===r})),o={enabled:!0,paymethod_id:r,sandbox:J.includes(n.gateway)},i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token),"x-app-x":null==u?void 0:u.appId},body:JSON.stringify(o)},t.next=5,fetch("".concat(u.root,"/business/").concat(e,"/paymethods"),i);case 5:return a=t.sent,t.next=8,a.json();case 8:return c=t.sent,t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Q=function(){var t=nu(eu().mark((function t(e,r){var n,o,i;return eu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},body:JSON.stringify(r)},t.next=3,fetch("".concat(u.root,"/business/").concat(e,"/gallery"),n);case 3:return o=t.sent,t.next=6,o.json();case 6:return i=t.sent,t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),tt=function(){var t=nu(eu().mark((function t(){var e,r,n,o,i,a,c,s,l,f;return eu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.countries().select().get();case 3:if(e=t.sent,r=e.content,n=r.error,o=r.result,i=[],!n){s=tu(o);try{for(s.s();!(l=s.n()).done;)null!=(f=l.value)&&f.enabled&&(i=[].concat(Qc(i),Qc(null==f?void 0:f.cities)))}catch(t){s.e(t)}finally{s.f()}(null===(a=i)||void 0===a?void 0:a.length)>0&&B(null===(c=i[0])||void 0===c?void 0:c.id)}t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),et=function(t){y(iu(iu({},d),{},{changes:iu(iu({},null==d?void 0:d.changes),t)}))},rt=function(){var t=nu(eu().mark((function t(e,r){var n,o,i,a,c;return eu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Date,o=Math.floor(n.getTime()/1e3),i="https://maps.googleapis.com/maps/api/timezone/json?location=".concat(e,",").concat(r,"&timestamp=").concat(o,"&key=").concat(q),t.next=5,fetch(i,{method:"GET"});case 5:return a=t.sent,t.next=8,a.json();case 8:return c=t.sent,t.abrupt("return",null==c?void 0:c.timeZoneId);case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),nt=function(){var t=nu(eu().mark((function t(e){var r,n,o;return eu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt(null==e||null===(r=e.location)||void 0===r?void 0:r.lat,null==e||null===(n=e.location)||void 0===n?void 0:n.lng);case 2:o=t.sent,T({address:null==e?void 0:e.address,location:iu(iu({},null==e?void 0:e.location),{},{zipcode:null!=e&&e.zipcode?e.zipcode:-1,zoom:15}),timezone:o});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ot=function(t){var e=(new DOMParser).parseFromString(t,"text/xml"),r=[],n="";if("kml"===e.documentElement.nodeName){var o,i=tu(e.getElementsByTagName("Placemark"));try{for(i.s();!(o=i.n()).done;){var a=o.value;n=a.getElementsByTagName("name")[0].childNodes[0].nodeValue.trim();var c,u=tu(a.getElementsByTagName("Polygon"));try{for(u.s();!(c=u.n()).done;){var s,l=c.value.getElementsByTagName("coordinates")[0].childNodes[0].nodeValue.trim(),f=(l=l.replace(/\n/g," ").replace(/\s+/g," ")).split(" "),h=[],v=tu(f);try{for(v.s();!(s=v.n()).done;){var b=s.value.split(",");h.push({lat:+b[1],lng:+b[0]})}}catch(t){v.e(t)}finally{v.f()}r.push(h)}}catch(t){u.e(t)}finally{u.f()}}}catch(t){i.e(t)}finally{i.f()}}else y(iu(iu({},d),{},{result:{error:p("INVALID_KML_FILE","Invalid KML file")}}));1===r.length?(g(iu(iu({},m),{},{type:2,name:n,data:r[0]})),G(r[0])):y(iu(iu({},d),{},{result:{error:p("INVALID_KML_FILE","Invalid KML file")}}))},it=function(t){for(var e,r,n=null,o=[],i=function(e){var r,i,a=t.find((function(t){var r;return(null==t||null===(r=t.open)||void 0===r?void 0:r.day)===e}));if(a||(n?o.push({enabled:!0,lapses:n}):o.push({enabled:!1})),(null==a||null===(r=a.open)||void 0===r?void 0:r.day)===e&&(null==a?void 0:a.close.day)===e){var c,u,s,l,f=[{open:{hour:null==a||null===(c=a.open)||void 0===c?void 0:c.hours,minute:null==a||null===(u=a.open)||void 0===u?void 0:u.minutes},close:{hour:null==a||null===(s=a.close)||void 0===s?void 0:s.hours,minute:null==a||null===(l=a.close)||void 0===l?void 0:l.minutes}}];n&&f.unshift(n),n=null,o.push({enabled:!0,lapses:f})}if((null==a||null===(i=a.open)||void 0===i?void 0:i.day)===e&&(null==a?void 0:a.close.day)!==e){var p,h,d,y,v=[{open:{hour:null==a||null===(p=a.open)||void 0===p?void 0:p.hours,minute:null==a||null===(h=a.open)||void 0===h?void 0:h.minutes},close:{hour:23,minute:59}}];n&&v.unshift(n),n={open:{hour:0,minute:0},close:{hour:null==a||null===(d=a.close)||void 0===d?void 0:d.hours,minute:null==a||null===(y=a.close)||void 0===y?void 0:y.minutes}},o.push({enabled:!0,lapses:v})}},a=0;a<7;a++)i(a);return n&&null!==(e=o[0])&&void 0!==e&&e.enabled&&o[0].lapses.unshift(n),!n||null!==(r=o[0])&&void 0!==r&&r.enabled||(o[0]={enabled:!0,lapses:n}),o};return Object(o.useEffect)((function(){if(M){var t,e,r,n,o,i,a,c,u=null==M||null===(t=M.photos)||void 0===t?void 0:t.map((function(t){return{temp_id:Date.now().toString(36)+Math.random().toString(36).substr(2),file:t.getUrl()}}));(null==u?void 0:u.length)>0&&O(u);var s=iu(iu({name:null==M?void 0:M.name,slug:Hc(null==M?void 0:M.name),cellphone:null==M?void 0:M.international_phone_number,price_level:null==M||null===(e=M.price_level)||void 0===e?void 0:e.toString(),logo:null==M?void 0:M.icon,address:null==M?void 0:M.formatted_address},(null==M||null===(r=M.opening_hours)||void 0===r?void 0:r.periods)&&{schedule:it(null==M||null===(n=M.opening_hours)||void 0===n?void 0:n.periods)}),{},{location:{lat:null==M||null===(o=M.geometry)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.lat(),lng:null==M||null===(a=M.geometry)||void 0===a||null===(c=a.location)||void 0===c?void 0:c.lng(),zipcode:-1,zoom:15}});et(s)}}),[M]),Object(o.useEffect)((function(){k&&y(iu(iu({},d),{},{changes:iu(iu({},null==d?void 0:d.changes),k)}))}),[k]),Object(o.useEffect)((function(){H(),tt()}),[]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,Xc({},t,{cleanFormState:function(t){return y(iu(iu({},d),t))},formState:d,setFormState:y,handleChangeInput:function(t,e){var r={};e?Object.values(t).map((function(t){r=iu(iu({},r),{},au({},t.name,t.value))})):r=au({},t.target.name,t.target.value),y(iu(iu({},d),{},{changes:iu(iu({},d.changes),r)}))},handlechangeImage:function(t,e){var r=new window.FileReader;r.readAsDataURL(t),r.onload=function(){y(iu(iu({},d),{},{changes:iu(iu({},d.changes),{},au({},e,r.result))}))},r.onerror=function(t){return console.log(t)}},handleAddBusiness:K,handleChangeAddress:nt,handleChangeCenter:function(t){var e;clearTimeout(z),z=setTimeout(nu(eu().mark((function r(){return eu().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,rt(null==t?void 0:t.lat(),null==t?void 0:t.lng());case 2:e=r.sent,T({location:{lat:null==t?void 0:t.lat(),lng:null==t?void 0:t.lng(),zoom:15,zipcode:-1},timezone:e});case 4:case"end":return r.stop()}}),r)}))),200)},handleChangeSwtich:function(t,e){var r=iu(iu({},d.changes),{},au({},t,e));y(iu(iu({},d),{},{changes:r}))},handleChangeRibbon:function(t){var e,r,n=null!=d&&null!==(e=d.changes)&&void 0!==e&&e.ribbon?iu(iu({},null==d||null===(r=d.changes)||void 0===r?void 0:r.ribbon),t):iu({},t),o=iu(iu({},null==d?void 0:d.changes),{},{ribbon:n});y(iu(iu({},d),{},{changes:o}))},handleChangeGallery:O,changeFormState:et,paymethodsList:E,kmlData:D,handleUploadKmlFiles:function(t){if(1===t.length){var e=new window.FileReader;e.readAsText(t[0]),e.onload=function(){ot(e.result)},e.onerror=function(t){return console.log(t)}}},zoneState:m,handleChangeZoneState:function(t,e,r){var n,o,i={};(i=e?iu({},t):au({},t.target.name,t.target.value),"distance"===(null==t||null===(n=t.target)||void 0===n?void 0:n.name))?g(iu(iu({},m),{},{data:(o={},au(o,t.target.name,t.target.value),au(o,"unit",r),o)})):g(iu(iu({},m),i))},gallery:w,paymethodIds:L,handleChangePaymethodIds:_,handleChangeSchedule:C,details:M,setDetails:Y})))};function fu(t){return fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(t)}function pu(){return pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pu.apply(this,arguments)}function hu(){hu=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==fu(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function du(t){return function(t){if(Array.isArray(t))return xu(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ou(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yu(Object(r),!0).forEach((function(e){mu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gu(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function bu(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){gu(i,n,o,a,c,"next",t)}function c(t){gu(i,n,o,a,c,"throw",t)}a(void 0)}))}}function wu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Ou(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ou(t,e){if(t){if("string"==typeof t)return xu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xu(t,e):void 0}}function xu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}lu.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},ln.a.extend(pn.a);var Eu=function(t){var e,r,n,a,c,u=t.isSearchByName,s=t.isSearchByDescription,l=t.slug,f=t.categoryId,p=t.productId,h=t.isInitialRender,d=t.ordering,y=t.businessProps,v=t.UIComponent,m=wu(Rn(),1)[0],g=wu(Ir(),2),b=g[0],w=g[1],O=wu(Object(o.useState)({id:null,name:w("ALL","All")}),2),x=O[0],E=O[1],j=wu(Object(o.useState)(null),2),S=j[0],L=j[1],_=wu(Object(o.useState)(null),2),P=_[0],k=_[1],T=wu(Object(o.useState)(null),2),I=T[0],A=T[1],C=wu(Object(o.useState)({business:{},menus:null,loading:!0,error:null}),2),N=C[0],D=C[1],G=wu(Object(o.useState)({}),2),F=G[0],U=G[1],B=wu(Object(o.useState)(),2),R=B[0],M=B[1],Y=wu(Object(o.useState)({}),2),z=Y[0],$=Y[1],q=wu(Object(o.useState)({product:null,loading:!1,error:null}),2),J=q[0],V=q[1],H=wu(Object(o.useState)(!1),2),W=H[0],K=H[1],Z={loading:!0,pagination:{currentPage:0,pageSize:20,totalItems:null,totalPages:0,nextPageItems:10},products:[]},X=wu(Object(o.useState)(Z),2),Q=X[0],tt=X[1],et=wu(Object(o.useState)(null),2),rt=et[0],nt=et[1],ot=function(t,e){return!S||(t&&t.toLowerCase().includes(S.toLowerCase())&&u||e&&e.toLowerCase().includes(S.toLowerCase())&&s)},it=function(t){return!!t.featured&&(!S||(t.name&&t.name.toLowerCase().includes(S.toLowerCase())&&u||t.description&&t.description.toLowerCase().includes(S.toLowerCase())&&s))},at=function(t,e){return"rank"===t?e.sort((function(t,e){return e.rank-t.rank})):"a-z"===t?e.sort((function(t,e){return t.name>e.name?1:e.name>t.name?-1:0})):e},ct=function(){var t=bu(hu().mark((function t(e){var r,n,o,i,a,c,l,f,p,h,y,v,g,b,w,O,E,j,L,_,k,T,I,A,C,D,G,B,R,M,Y,q,J,V;return hu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=N&&null!==(r=N.business)&&void 0!==r&&r.lazy_load_products_recommended){t.next=8;break}return c=!(null==N||null===(o=N.business)||void 0===o||null===(i=o.categories)||void 0===i||null===(a=i.find((function(t){return t})))||void 0===a||!a.products.filter((function(t){return t.featured})).length),K(c),l=vu(vu({},Z),{},{loading:!1}),"featured"!==(null==x?void 0:x.id)&&null!==(null==x?void 0:x.id)?(y=null==N||null===(f=N.business)||void 0===f||null===(p=f.categories)||void 0===p||null===(h=p.find((function(t){return(null==t?void 0:t.id)===(null==x?void 0:x.id)})))||void 0===h?void 0:h.products.filter((function(t){return ot(t.name,t.description)})),l.products=y||[]):"featured"===(null==x?void 0:x.id)?(b=null==N||null===(v=N.business)||void 0===v||null===(g=v.categories)||void 0===g?void 0:g.reduce((function(t,e){return[].concat(du(t),du(e.products))}),[]).filter((function(t){return it(t)})),l.products=b||[]):(E=null==N||null===(w=N.business)||void 0===w||null===(O=w.categories)||void 0===O?void 0:O.reduce((function(t,e){return[].concat(du(t),du(e.products))}),[]).filter((function(t){return ot(t.name,t.description)})),l.products=E||[]),l.products=at(P,l.products),tt(vu({},l)),t.abrupt("return");case 8:if(j=S?"search":"featured"===(null==x?void 0:x.id)?"featured":null!=x&&x.id?"categoryId:".concat(null==x?void 0:x.id):"all",(L=F[j]||Z).products=at(P,L.products),_=L.pagination,e||!(_.currentPage>0)||_.currentPage!==_.totalPages){t.next=15;break}return tt(vu(vu({},L),{},{loading:!1})),t.abrupt("return");case 15:return tt(vu(vu({},L),{},{loading:!0})),k={type:(null===(n=m.options)||void 0===n?void 0:n.type)||1,page:e?1:_.currentPage+1,page_size:_.pageSize},P&&(k.orderBy="a-z"===P?"name":P),T=null,I=[],S&&(u&&I.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(S,"%"))}}),s&&I.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(S,"%"))}})),T={conditions:I,conector:"OR"},"featured"===(null==x?void 0:x.id)&&(T={conditions:[{attribute:"featured",value:!0}]}),"featured"===(null==x?void 0:x.id)&&S&&(T={conditions:[{attribute:"featured",value:!0},{conditions:I,conector:"OR"}],conector:"AND"}),t.prev=24,D=null!=x&&x.id&&"featured"!==(null==x?void 0:x.id)?d.businesses(null===(A=N.business)||void 0===A?void 0:A.id).categories(null==x?void 0:x.id).products():d.businesses(null===(C=N.business)||void 0===C?void 0:C.id).products(),G={},z.products=G,$(vu({},z)),B=T.conditions.length>0?D.parameters(k).where(T):D.parameters(k),t.next=32,B.get({cancelToken:G});case 32:R=t.sent,M=R.content,Y=M.error,q=M.result,J=M.pagination,Y?nt(q):(V={pagination:vu(vu({},L.pagination),{},{currentPage:J.current_page,totalItems:J.total,totalPages:J.total_pages}),loading:!1,products:e?du(q):[].concat(du(L.products),du(q))},F[j]=V,tt(vu({},V)),U(vu({},F)),K(!!F.all.products.find((function(t){return t.featured})))),t.next=43;break;case 40:t.prev=40,t.t0=t.catch(24),nt([t.t0.message]);case 43:case"end":return t.stop()}}),t,null,[[24,40]])})));return function(e){return t.apply(this,arguments)}}(),ut=function(){var t=bu(hu().mark((function t(){var e,r,n,o,i,a,c,u,s;return hu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(f&&p&&null!==(e=N.business)&&void 0!==e&&e.id)){t.next=17;break}return t.prev=1,V(vu(vu({},J),{},{loading:!0})),i={},z.product=i,a={type:(null===(r=m.options)||void 0===r?void 0:r.type)||1,moment:(null===(n=m.options)||void 0===n?void 0:n.moment)||null},t.next=8,d.businesses(null===(o=N.business)||void 0===o?void 0:o.id).categories(f).products(p).parameters(a).get({cancelToken:i});case 8:c=t.sent,u=c.content.result,s=Array.isArray(u)?null:u,V(vu(vu({},J),{},{product:s,loading:!1})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),V(vu(vu({},J),{},{loading:!1,error:[t.t0]}));case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){h&&ut()}),[JSON.stringify(null===(e=N.business)||void 0===e?void 0:e.id),h]);var st=function(){var t=bu(hu().mark((function t(){var e,r,n,o,i,a,c,u,s,f,p,h,v,g,b,w,O,x,E;return hu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,D(vu(vu({},N),{},{loading:!0})),h={},z.business=h,$(vu({},z)),v={type:(null===(e=m.options)||void 0===e?void 0:e.type)||1,location:null!==(r=m.options)&&void 0!==r&&null!==(n=r.address)&&void 0!==n&&n.location?"".concat(null===(o=m.options)||void 0===o||null===(i=o.address)||void 0===i||null===(a=i.location)||void 0===a?void 0:a.lat,",").concat(null===(c=m.options)||void 0===c||null===(u=c.address)||void 0===u||null===(s=u.location)||void 0===s?void 0:s.lng):null},null!==(f=m.options)&&void 0!==f&&f.moment&&(j=null===(p=m.options)||void 0===p?void 0:p.moment,S="YYYY-MM-DD HH:mm:ss",ln()(j,S).format(S)===j)&&(b=ln.a.utc(null===(g=m.options)||void 0===g?void 0:g.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),v.timestamp=b),I&&(v.menu_id=I),t.next=10,d.businesses(l).select(y).parameters(v).get({cancelToken:h});case 10:return w=t.sent,O=w.content.result,t.next=14,d.businesses(O.id).menus().get();case 14:x=t.sent,E=x.content.result,D(vu(vu({},N),{},{business:O,loading:!1,menus:E})),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),D(vu(vu({},N),{},{loading:!1,error:[t.t0.message]}));case 22:case"end":return t.stop()}var j,S}),t,null,[[0,19]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){N.loading||ct(!0)}),[N]),Object(o.useEffect)((function(){ct(!!S)}),[S]),Object(o.useEffect)((function(){ct(!!S)}),[x.id]),Object(o.useEffect)((function(){ct(!!S)}),[P]),Object(o.useEffect)((function(){ct()}),[l]),Object(o.useEffect)((function(){m.loading||!R||b.loading||st()}),[R,b.loading,l,I]),Object(o.useEffect)((function(){var t,e,r,n;m.loading||M({type:null==m||null===(t=m.options)||void 0===t?void 0:t.type,moment:null==m||null===(e=m.options)||void 0===e?void 0:e.moment,location:null==m||null===(r=m.options)||void 0===r||null===(n=r.address)||void 0===n?void 0:n.location})}),[null==m||null===(r=m.options)||void 0===r?void 0:r.type,null==m||null===(n=m.options)||void 0===n?void 0:n.moment,JSON.stringify(null==m||null===(a=m.options)||void 0===a||null===(c=a.address)||void 0===c?void 0:c.location)]),Object(o.useEffect)((function(){var t=z.business;return function(){t&&t.cancel()}}),[z.business]),Object(o.useEffect)((function(){var t=z.products;return function(){t&&t.cancel()}}),[z.products]),i.a.createElement(i.a.Fragment,null,v&&i.a.createElement(v,pu({},t,{errors:rt,categorySelected:x,searchValue:S,sortByValue:P,filterByMenus:I,categoryState:Q,businessState:N,productModal:J,featuredProducts:W,handleChangeCategory:function(t){(null==t?void 0:t.id)!==(null==x?void 0:x.id)&&E(t)},handleChangeSearch:function(t){L(t)},handleChangeSortBy:function(t){k(t)},handleChangeFilterByMenus:function(t){A(t)},getNextProducts:ct,updateProductModal:function(t){return V(vu(vu({},J),{},{product:t}))}})))};function ju(t){return ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ju(t)}function Su(){return Su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Su.apply(this,arguments)}function Lu(){Lu=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ju(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function _u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_u(Object(r),!0).forEach((function(e){ku(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ku(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tu(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Iu(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Tu(i,n,o,a,c,"next",t)}function c(t){Tu(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Au(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Cu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cu(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Eu.propTypes={UIComponent:c.a.elementType},Eu.defaultProps={};var Nu=function(t){var e=t.UIComponent,r=Au(hr(),1)[0],n=r.token,a=r.loading,c=Au(er(),1)[0],u=Au(Object(o.useState)({lapse:"today",businessIds:null,app_id:"all",franchises_id:null}),2),s=u[0],l=u[1],f=Au(Object(o.useState)({loading:!1,data:[],error:null}),2),p=f[0],h=f[1],d=Au(Object(o.useState)({loading:!1,data:[],error:null}),2),y=d[0],v=d[1],m=Au(Object(o.useState)({loading:!1,data:[],error:null}),2),g=m[0],b=m[1],w=Au(Object(o.useState)({loading:!1,data:[],error:null}),2),O=w[0],x=w[1],E=Au(Object(o.useState)({loading:!1,data:[],error:null}),2),j=E[0],S=E[1],L=Au(Object(o.useState)({loading:!1,data:[],error:null}),2),_=L[0],P=L[1],k=Au(Object(o.useState)({loading:!1,data:[],error:null}),2),T=k[0],I=k[1],A=Au(Object(o.useState)({loading:!1,data:[],error:null}),2),C=A[0],N=A[1],D=Au(Object(o.useState)({loading:!1,data:[],error:null}),2),G=D[0],F=D[1],U=Au(Object(o.useState)({loading:!1,data:[],error:null}),2),B=U[0],R=U[1],M=Au(Object(o.useState)(""),2),Y=M[0],z=M[1],$=function(t){var e,r="".concat(c.root,"/reports/").concat(t),n="lapse=".concat(null==s?void 0:s.lapse);return null!=s&&s.businessIds&&(null==s?void 0:s.businessIds.length)>0&&(n="".concat(n,"&businesses=").concat(null==s||null===(e=s.businessIds)||void 0===e?void 0:e.toString())),null!=s&&s.app_id&&"all"!==s.app_id&&(n="".concat(n,"&app_id=").concat(null==s?void 0:s.app_id)),null!=s&&s.franchises_id&&(null==s?void 0:s.franchises_id.length)>0&&(n="".concat(n,"&franchises_id=").concat(JSON.stringify(null==s?void 0:s.franchises_id))),"".concat(r,"?").concat(n)},q=function(){var t=Iu(Lu().mark((function t(){var e,r,o,i,c,u;return Lu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,h(Pu(Pu({},p),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=$("orders"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,h(Pu(Pu({},p),{},c?{loading:!1,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),h(Pu(Pu({},p),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),J=function(){var t=Iu(Lu().mark((function t(){var e,r,o,i,c,u;return Lu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,v(Pu(Pu({},y),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=$("sales"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,v(Pu(Pu({},y),{},c?{loading:!1,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),v(Pu(Pu({},y),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),V=function(){var t=Iu(Lu().mark((function t(){var e,r,o,i,c,u;return Lu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,b(Pu(Pu({},g),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=$("top_selling"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,b(Pu(Pu({},g),{},c?{loading:!1,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),b(Pu(Pu({},g),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),H=function(){var t=Iu(Lu().mark((function t(){var e,r,o,i,c,u;return Lu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,x(Pu(Pu({},O),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=$("top_categories"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,x(Pu(Pu({},O),{},c?{loading:!1,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),x(Pu(Pu({},O),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),W=function(){var t=Iu(Lu().mark((function t(){var e,r,o,i,c,u;return Lu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,S(Pu(Pu({},j),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=$("orders_status"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,S(Pu(Pu({},j),{},c?{loading:!1,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),S(Pu(Pu({},j),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),K=function(){var t=Iu(Lu().mark((function t(){var e,r,o,i,c,u;return Lu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,P(Pu(Pu({},_),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=$("users"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,P(Pu(Pu({},_),{},c?{loading:!1,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),P(Pu(Pu({},_),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),Z=function(){var t=Iu(Lu().mark((function t(){var e,r,o,i,c,u;return Lu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,I(Pu(Pu({},T),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=$("customer_satisfaction"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,I(Pu(Pu({},T),{},c?{loading:!1,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),I(Pu(Pu({},T),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),X=function(){var t=Iu(Lu().mark((function t(){var e,r,o,i,c,u;return Lu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,N(Pu(Pu({},C),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=$("orders_accept_spend"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,N(Pu(Pu({},C),{},c?{loading:!1,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),N(Pu(Pu({},C),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),Q=function(){var t=Iu(Lu().mark((function t(){var e,r,o,i,c,u;return Lu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,F(Pu(Pu({},G),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=$("arrived_pickup_spend"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,F(Pu(Pu({},G),{},c?{loading:!1,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),F(Pu(Pu({},G),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),tt=function(){var t=Iu(Lu().mark((function t(){var e,r,o,i,c,u;return Lu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,R(Pu(Pu({},B),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=$("order_location"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,R(Pu(Pu({},B),{},c?{loading:!1,error:u}:{loading:!1,locations:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),R(Pu(Pu({},B),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){q(),J(),V(),H(),W(),K(),Z(),X(),Q(),tt()}),[s]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Su({},t,{filterList:s,ordersList:p,salesList:y,topProductList:g,topCategoryList:O,orderStatusList:j,registerUsersList:_,customerSatisfactionList:T,ordersAcceptSpendList:C,arrivedPickUpSpendList:G,orderLocationList:B,handleChangeFilterList:l,countryCode:Y,handleChangeCode:function(t){z(t===Y?"":t)}})))};function Du(t){return Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(t)}function Gu(){return Gu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gu.apply(this,arguments)}function Fu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Uu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Fu(Object(r),!0).forEach((function(e){Bu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Bu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ru(){Ru=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Du(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Mu(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Yu(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Mu(i,n,o,a,c,"next",t)}function c(t){Mu(i,n,o,a,c,"throw",t)}a(void 0)}))}}function zu(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $u(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Nu.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Nu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qu=function(t){var e=t.UIComponent,r=t.business,n=t.businessId,a=t.businessParams,c=zu(er(),1)[0],u=zu(Object(o.useState)({business:{},loading:!1,error:null}),2),s=u[0],l=u[1],f={},p=function(){var t=Yu(Ru().mark((function t(e){var r;return Ru().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},f.business=r,t.next=4,c.businesses(e).select(a).parameters({location:"40.7539143,-73.9810162",type:1}).get({cancelToken:r});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Yu(Ru().mark((function t(){var e,r;return Ru().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Uu(Uu({},s),{},{loading:!0})),t.next=4,p(n);case 4:e=t.sent,r=e.content.result,l(Uu(Uu({},s),{},{loading:!1,business:r})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),l(Uu(Uu({},s),{},{loading:!1,error:[t.t0]}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){return r?l(Uu(Uu({},s),{},{business:r})):h(),function(){f.business&&f.business.cancel()}}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Gu({},t,{businessState:s})))};function Ju(t){return Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(t)}function Vu(){return Vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vu.apply(this,arguments)}function Hu(){Hu=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ju(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Wu(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ku(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Wu(i,n,o,a,c,"next",t)}function c(t){Wu(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Zu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zu(Object(r),!0).forEach((function(e){Qu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Qu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ts(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return es(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return es(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}qu.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessParams:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qu.defaultProps={businessParams:["header","logo","name","today","delivery_price","minimum","description","distance","delivery_time","pickup_time","reviews"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rs=function(t){var e=t.UIComponent,r=t.propsToFetch,n=t.isSearchByName,a=ts(er(),1)[0],c=ts(Object(o.useState)(null),2),u=c[0],s=c[1],l=ts(br(),2)[1].showToast,f=ts(Ir(),2)[1],p=ts(Object(o.useState)({loading:!1,businesses:[],result:{error:null}}),2),h=p[0],d=p[1],y=new RegExp(/^[A-Za-z0-9\s]+$/g),v=function(){var t=Ku(Hu().mark((function t(){var e,o,i,c,s,l,f,p,v,m;return Hu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(Xu(Xu({},h),{},{loading:!0})),e=null,o=[],u&&(i=[],c=y.test(u),n&&i.push({attribute:"name",value:{condition:"ilike",value:c?encodeURI("%".concat(u,"%")):"%".concat(u,"%")}}),o.push({conector:"OR",conditions:i})),o.length&&(e={conditions:o,conector:"AND"}),s=e?a.businesses().asDashboard().select(r).where(e):a.businesses().asDashboard().select(r),t.next=9,s.get();case 9:l=t.sent,f=l.content,p=f.error,v=f.result,m=f.pagination,d(Xu(Xu({},h),{},p?{loading:!1,error:v}:{loading:!1,businesses:v,pagination:m})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),d(Xu(Xu({},h),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Ku(Hu().mark((function t(e,r){var n,o,i,c,u;return Hu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,f("LOADING","Loading")),t.next=4,a.businesses(parseInt(e)).save(r);case 4:n=t.sent,o=n.content,i=o.error,c=o.result,i||(u=null==h?void 0:h.businesses.map((function(t){return t.id===e?Xu(Xu({},t),{},{franchise_id:c.franchise_id}):t})),d((function(t){return Xu(Xu({},t),{},{businesses:u})})),l(vr.Success,f("BUSINESS_UPDATED","Business updated"))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){v()}),[u]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Vu({},t,{searchValue:u,onSearch:s,businessList:h,handleChangeCheckBox:function(t,e,r){var n={franchise_id:r};t.target.checked||(n={franchise_id:null}),m(e,n)},handleSelectAllBusinesses:function(t,e){var r,n=[];t?(r={franchise_id:e},h.businesses.forEach((function(t){t.franchise_id!==e&&(m(t.id,r),t.franchise_id=e),n.push(t)}))):(r={franchise_id:null},h.businesses.forEach((function(t){null!==t.franchise_id&&(m(t.id,r),t.franchise_id=null),n.push(t)}))),d(Xu(Xu({},h),{},{businesses:n}))}})))};function ns(){return ns=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ns.apply(this,arguments)}function os(t){return function(t){if(Array.isArray(t))return ds(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||hs(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function is(t){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},is(t)}function as(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function cs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?as(Object(r),!0).forEach((function(e){us(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):as(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function us(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ss(){ss=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==is(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ls(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function fs(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ls(i,n,o,a,c,"next",t)}function c(t){ls(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ps(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||hs(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hs(t,e){if(t){if("string"==typeof t)return ds(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ds(t,e):void 0}}function ds(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}rs.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rs.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var ys=function(t){var e=t.UIComponent,r=t.brand,n=t.handleUpdateBrandList,a=t.brandListState,c=t.onSelectedBrand,u=ps(er(),1)[0],s=ps(Ir(),2)[1],l=ps(br(),2)[1].showToast,f=ps(hr(),1)[0].token,p=ps(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),h=p[0],d=p[1],y=function(){var t=fs(ss().mark((function t(){return ss().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r?g():v();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=fs(ss().mark((function t(){var e,r,o,i,p,y;return ss().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in t.prev=0,d(cs(cs({},h),{},{loading:!0})),l(vr.Info,s("LOADING","Loading")),void 0===(null==(r=cs({},null==h?void 0:h.changes))?void 0:r.ribbon)||null!=r&&null!==(e=r.ribbon)&&void 0!==e&&e.enabled||delete r.ribbon,r)("object"===is(r[o])&&null!==r[o]||Array.isArray(r[o]))&&(r[o]=JSON.stringify(r[o]));return i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(r)},t.next=9,fetch("".concat(u.root,"/franchises"),i);case 9:return p=t.sent,t.next=12,p.json();case 12:null!=(y=t.sent)&&y.error?d(cs(cs({},h),{},{changes:h.changes,result:y,loading:!1})):(d(cs(cs({},h),{},{changes:{},result:y,loading:!1})),n&&n([].concat(os(null==a?void 0:a.brands),[y.result])),c&&c(y.result),l(vr.Success,s("BRAND_ADDED","Brand added"))),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),d(cs(cs({},h),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}(),m=function(t){if(d(cs(cs({},h),{},{changes:{},result:t,loading:!1})),n){var e=null==a?void 0:a.brands.map((function(e){return e.id===t.result.id?cs(cs({},e),t.result):e}));n(e)}},g=function(){var t=fs(ss().mark((function t(){var e,n,o,i,a,c,p,y,v,g,b,w,O,x,E;return ss().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n in t.prev=0,d(cs(cs({},h),{},{loading:!0})),l(vr.Info,s("LOADING","Loading")),e=cs({},null==h?void 0:h.changes))("object"===is(e[n])&&null!==e[n]||Array.isArray(e[n]))&&(e[n]=JSON.stringify(e[n]));return o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(e)},t.next=8,fetch("".concat(u.root,"/franchises/").concat(null==r?void 0:r.id),o);case 8:return i=t.sent,t.next=11,i.json();case 11:if(null!=(a=t.sent)&&a.error){t.next=29;break}if(void 0===(null===(c=h.changes)||void 0===c||null===(p=c.ribbon)||void 0===p?void 0:p.enabled)||null!==(y=h.changes)&&void 0!==y&&null!==(v=y.ribbon)&&void 0!==v&&v.enabled||null==a||null===(g=a.result)||void 0===g||null===(b=g.ribbon)||void 0===b||!b.enabled){t.next=25;break}return w={ribbon:JSON.stringify({enabled:!1})},O={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(w)},t.next=18,fetch("".concat(u.root,"/franchises/").concat(null==r?void 0:r.id),O);case 18:return x=t.sent,t.next=21,x.json();case 21:E=t.sent,m(E),t.next=26;break;case 25:m(a);case 26:l(vr.Success,s("BRAND_UPDATED","Brand updated")),t.next=30;break;case 29:d(cs(cs({},h),{},{changes:h.changes,result:a,loading:!1}));case 30:t.next=35;break;case 32:t.prev=32,t.t0=t.catch(0),d(cs(cs({},h),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 35:case"end":return t.stop()}}),t,null,[[0,32]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){d(cs(cs({},h),{},{changes:{}}))}),[null==r?void 0:r.id]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,ns({},t,{brandFormState:h,handleUpdateClick:y,handleChangeInput:function(t){var e=us({},t.target.name,t.target.value);d(cs(cs({},h),{},{changes:cs(cs({},h.changes),e)}))},handlechangeImage:function(t,e){var r=new window.FileReader;r.readAsDataURL(t),r.onload=function(){d(cs(cs({},h),{},{changes:cs(cs({},h.changes),{},us({},e,r.result))}))},r.onerror=function(t){return console.log(t)}},handleChangeItem:function(t){var e=cs(cs({},null==h?void 0:h.changes),t);d(cs(cs({},h),{},{changes:e}))},handleChangeRibbon:function(t){var e,r,n=null!=h&&null!==(e=h.changes)&&void 0!==e&&e.ribbon?cs(cs({},null==h||null===(r=h.changes)||void 0===r?void 0:r.ribbon),t):cs({},t),o=cs(cs({},null==h?void 0:h.changes),{},{ribbon:n});d(cs(cs({},h),{},{changes:o}))}})))};function vs(t){return vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vs(t)}function ms(){return ms=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ms.apply(this,arguments)}function gs(){gs=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==vs(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function bs(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ws(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){bs(i,n,o,a,c,"next",t)}function c(t){bs(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Os(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Os(Object(r),!0).forEach((function(e){Es(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Os(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Es(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function js(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ss(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ss(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ss(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ys.propTypes={UIComponent:c.a.elementType,brand:c.a.object,brandListState:c.a.object,handleUpdateBrandList:c.a.func,onSelectedBrand:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ys.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ls=function(t){var e=t.UIComponent,r=js(Ir(),2)[1],n=js(br(),2)[1].showToast,a=js(Object(o.useState)(null),2),c=a[0],u=a[1],s=js(hr(),1)[0],l=s.token,f=s.loading,p=js(er(),1)[0],h=js(Object(o.useState)({loading:!1,brands:[],error:null}),2),d=h[0],y=h[1],v=js(Object(o.useState)({loading:!1,changes:{},result:{error:null}}),2),m=v[0],g=v[1],b=js(Object(o.useState)(!1),2),w=b[0],O=b[1],x=function(t){y(xs(xs({},d),{},{brands:t}))},E=function(){var t=ws(gs().mark((function t(e){var o,i,a,c;return gs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g(xs(xs({},m),{},{loading:!0})),n(vr.Info,r("LOADING","Loading")),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},t.next=6,fetch("".concat(p.root,"/franchises/").concat(e),o);case 6:return i=t.sent,t.next=9,i.json();case 9:null!=(a=t.sent)&&a.error?g(xs(xs({},m),{},{result:a,loading:!1})):(g(xs(xs({},m),{},{changes:{},result:a,loading:!1})),x&&(c=null==d?void 0:d.brands.filter((function(t){return t.id!==e})),x(c)),n(vr.Success,r("BRAND_DELETED","Brand deleted")),O(!1)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),g(xs(xs({},m),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=ws(gs().mark((function t(e,o){var i,a,c,u;return gs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g(xs(xs({},m),{},{loading:!0})),n(vr.Info,r("LOADING","Loading")),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(o)},t.next=6,fetch("".concat(p.root,"/franchises/").concat(e),i);case 6:return a=t.sent,t.next=9,a.json();case 9:null!=(c=t.sent)&&c.error?g(xs(xs({},m),{},{result:c,loading:!1})):(g(xs(xs({},m),{},{changes:{},result:c,loading:!1})),x&&(u=null==d?void 0:d.brands.map((function(t){return t.id===c.result.id?xs(xs({},t),{},{name:c.result.name,logo:c.result.logo,enabled:c.result.enabled}):t})),x(u)),n(vr.Success,r("BRAND_UPDATED","Brand updated"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),g(xs(xs({},m),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),S=function(){var t=ws(gs().mark((function t(){var e,r,n,o,i,a;return gs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,y(xs(xs({},d),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},r="".concat(p.root,"/franchises"),t.next=8,fetch(r,e);case 8:return n=t.sent,t.next=11,n.json();case 11:o=t.sent,i=o.error,a=o.result,y(xs(xs({},d),{},i?{loading:!1,error:a}:{loading:!1,brands:a})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),y(xs(xs({},d),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){S()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,ms({},t,{searchValue:c,onSearch:u,handleUpdateBrandList:x,brandListState:d,handleChangeState:function(t,e,r){var n=Es({},e,r);j(t,n)},brandFormState:m,handleDeleteBrand:E,openDetail:w,setOpenDetail:O})))};function _s(t){return _s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_s(t)}function Ps(){return Ps=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ps.apply(this,arguments)}function ks(){ks=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==_s(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Ts(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Is(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return As(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return As(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function As(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Ls.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ls.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Cs=function(t){var e,r,n=t.business,a=t.businessId,c=t.businessAttributes,u=t.onBusinessClick,s=t.handleCustomClick,l=t.UIComponent,f=Is(er(),1)[0],p=Is(Object(o.useState)(n),2),h=p[0],d=p[1],y=Is(Object(o.useState)(null),2),v=y[0],m=y[1],g=Is(Object(o.useState)(!1),2),b=g[0],w=g[1],O=Is(Rn(),1)[0],x=Is(Wn(),1)[0].parsePrice,E=function(){var t,e=(t=ks().mark((function t(){var e,r;return ks().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.businesses(a).select(c).get();case 2:e=t.sent,r=e.content.result,d(r);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ts(i,n,o,a,c,"next",t)}function c(t){Ts(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),j=function(t){var e=(null==t?void 0:t.hour)<10?"0".concat(null==t?void 0:t.hour):null==t?void 0:t.hour,r=(null==t?void 0:t.minute)<10?"0".concat(null==t?void 0:t.minute):null==t?void 0:t.minute;return t?"".concat(e,":").concat(r):"none"},S=j((null==h||null===(e=h.today)||void 0===e||null===(r=e.lapses[0])||void 0===r?void 0:r.close)||null);return Object(o.useEffect)((function(){var t=null==v?void 0:v.split(":")[0],e=null==v?void 0:v.split(":")[1],r=null==S?void 0:S.split(":")[0],n=null==S?void 0:S.split(":")[1];S&&w(t>r||t===r&&e>=n)}),[v]),Object(o.useEffect)((function(){var t=setInterval((function(){var t=(new Date).getHours(),e=(new Date).getMinutes();m("".concat(t,":").concat(e))}),1e3);return function(){return clearInterval(t)}}),[]),Object(o.useEffect)((function(){n?d(n):E()}),[]),i.a.createElement(i.a.Fragment,null,l&&i.a.createElement(l,Ps({},t,{orderState:O,isBusinessClose:b,business:h,formatDate:j,formatNumber:function(t){return Math.round(100*t)/100},getBusinessOffer:function(t){if(!t||!t.length)return null;var e=null==t?void 0:t.reduce((function(t,e){return t.rate>e.rate?t:e}));return 1===(null==e?void 0:e.rate_type)?"".concat(null==e?void 0:e.rate,"%"):x(null==e?void 0:e.rate)},handleClick:s||u})))};function Ns(t){return Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(t)}function Ds(){return Ds=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ds.apply(this,arguments)}function Gs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Fs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gs(Object(r),!0).forEach((function(e){Us(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Us(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bs(){Bs=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ns(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Rs(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ms(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Rs(i,n,o,a,c,"next",t)}function c(t){Rs(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ys(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return zs(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zs(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zs(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Cs.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessId:c.a.number,businessAttributes:c.a.arrayOf(c.a.string),onBusinessClick:c.a.func,handleCustomClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Cs.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $s=function(t){var e=t.business,r=t.UIComponent,n=t.handleUpdateBusinessState,a=Ys(er(),1)[0],c=Ys(hr(),1)[0],u=Ys(br(),2)[1].showToast,s=Ys(Ir(),2)[1],l=Ys(Object(o.useState)({loading:!1,error:null}),2),f=l[0],p=l[1],h=Ys(Object(o.useState)({changes:{}}),2),d=h[0],y=h[1],v=Ys(Object(o.useState)({changes:{},isCheckAll:!1,isDirty:!1}),2),m=v[0],g=v[1],b=function(){var t=Ms(Bs().mark((function t(){var r,n,o,i;return Bs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.businesses(e.id).save(d.changes,{accessToken:c.token});case 3:if(r=t.sent,n=r.content,o=n.error,i=n.result,o){t.next=11;break}return t.abrupt("return",i);case 11:throw{message:o};case 12:t.next=17;break;case 14:return t.prev=14,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Ms(Bs().mark((function t(r,n){var o,i,u;return Bs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)},body:JSON.stringify({enabled:n})},t.next=4,fetch("".concat(a.root,"/business/").concat(null==e?void 0:e.id,"/deliveryzones/").concat(r),o);case 4:return i=t.sent,t.next=7,i.json();case 7:if((u=t.sent).error){t.next=12;break}return t.abrupt("return",u.result);case 12:throw{message:u.result};case 13:t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r){return t.apply(this,arguments)}}(),O=function(){var t=Ms(Bs().mark((function t(){var r,o,i,a,c;return Bs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,u(vr.Info,s("LOADING","Loading")),p({loading:!0,error:null}),!Object.keys(m.changes).length){t.next=15;break}r=Bs().mark((function t(r){var n,o,i;return Bs().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=parseInt(r),(null==(i=null==e||null===(n=e.zones)||void 0===n?void 0:n.find((function(t){return t.id===o})))?void 0:i.enabled)===m.changes[r]){t.next=5;break}return t.next=5,w(o,m.changes[r]);case 5:case"end":return t.stop()}}),t)})),t.t0=Bs().keys(m.changes);case 6:if((t.t1=t.t0()).done){t.next=11;break}return o=t.t1.value,t.delegateYield(r(o),"t2",9);case 9:t.next=6;break;case 11:g(Fs(Fs({},m),{},{isDirty:!1})),i=e.zones.filter((function(t){return void 0!==m.changes[t.id]&&(t.enabled=m.changes[t.id]),!0})),a=Fs(Fs({},e),{},{zones:i}),n(a);case 15:if(!Object.keys(d.changes).length){t.next=21;break}return t.next=18,b();case 18:c=t.sent,y({changes:{}}),n(c);case 21:p({loading:!1,error:null}),u(vr.Success,s("BUSINESS_UPDATED","Business updated")),t.next=28;break;case 25:t.prev=25,t.t3=t.catch(0),p({loading:!1,error:[t.t3.message]});case 28:case"end":return t.stop()}}),t,null,[[0,25]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t=0;for(var e in m.changes)m.changes[e]&&(t+=1);g(Fs(Fs({},m),{},{isCheckAll:Object.keys(m.changes).length===t}))}),[m.changes]),Object(o.useEffect)((function(){var t,r=(null==e||null===(t=e.zones)||void 0===t?void 0:t.filter((function(t){return 3!==(null==t?void 0:t.type)})))||[],n={};r.forEach((function(t){n[t.id]=t.enabled})),g(Fs(Fs({},m),{},{changes:n}))}),[null==e?void 0:e.zones]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,Ds({},t,{actionState:f,formState:d,zoneListState:m,handleChangeForm:function(t){y({changes:Fs(Fs({},d.changes),t)})},onDeliveryStateSave:O,handleChangeAllZoneState:function(t){var e=Fs({},m.changes);for(var r in e)e[r]=t;g(Fs(Fs({},m),{},{changes:e,isCheckAll:t,isDirty:!0}))},handleChangeZoneState:function(t,e){g(Fs(Fs({},m),{},{changes:Fs(Fs({},m.changes),{},Us({},t,e)),isDirty:!0}))}})))};function qs(t){return qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qs(t)}function Js(){return Js=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Js.apply(this,arguments)}function Vs(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=rl(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Hs(t){return function(t){if(Array.isArray(t))return nl(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||rl(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ws(){Ws=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==qs(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Ks(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Zs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ks(Object(r),!0).forEach((function(e){Xs(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ks(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qs(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function tl(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Qs(i,n,o,a,c,"next",t)}function c(t){Qs(i,n,o,a,c,"throw",t)}a(void 0)}))}}function el(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||rl(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rl(t,e){if(t){if("string"==typeof t)return nl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nl(t,e):void 0}}function nl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}$s.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$s.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ol=function(t){var e=t.business,r=t.zone,n=t.UIComponent,a=t.handleSuccessUpdate,c=el(er(),1)[0],u=el(hr(),1)[0].token,s=el(br(),2)[1].showToast,l=el(Ir(),2)[1],f=el(Object(o.useState)({zone:r}),2),p=f[0],h=f[1],d=el(Object(o.useState)({loading:!1,changes:{},error:null}),2),y=d[0],v=d[1],m=el(Object(o.useState)(null),2),g=m[0],b=m[1],w=function(){var t=tl(Ws().mark((function t(){var n,o,i,f,p,h;return Ws().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=Zs({},y.changes),n=Zs(Zs({},n),{},{data:JSON.stringify(y.changes.data)}),s(vr.Info,l("LOADING","Loading")),v(Zs(Zs({},y),{},{loading:!0})),o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(n)},t.next=8,fetch("".concat(c.root,"/business/").concat(null==e?void 0:e.id,"/deliveryzones/").concat(r.id),o);case 8:return i=t.sent,t.next=11,i.json();case 11:(f=t.sent).error?v(Zs(Zs({},y),{},{loading:!1,error:f.result})):(v(Zs(Zs({},y),{},{loading:!1,changes:{}})),p=e.zones.filter((function(t){return(null==t?void 0:t.id)===r.id&&Object.assign(r,f.result),!0})),h=Zs(Zs({},e),{},{zones:p}),a&&a(h),s(vr.Success,l("DELIVERYZONE_SAVED","Delivery zone saved"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),v(Zs(Zs({},y),{},{loading:!1,error:[t.t0.message]}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var r=tl(Ws().mark((function r(){var n,o,i,f,p,h,d;return Ws().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=Zs({},y.changes),o=Zs(Zs({},o),{},{data:JSON.stringify(y.changes.data),type:(null===(n=y.changes)||void 0===n?void 0:n.type)||2,enabled:!0,schedule:JSON.stringify([{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]}])}),s(vr.Info,l("LOADING","Loading")),v(Zs(Zs({},y),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(o)},r.next=8,fetch("".concat(c.root,"/business/").concat(null==e?void 0:e.id,"/deliveryzones"),i);case 8:return f=r.sent,r.next=11,f.json();case 11:(p=r.sent).error?v(Zs(Zs({},y),{},{loading:!1,error:p.result})):(v(Zs(Zs({},y),{},{changes:{},loading:!1})),h=[].concat(Hs(e.zones),[p.result]),d=Zs(Zs({},e),{},{zones:h}),a&&a(d),s(vr.Success,l("DELIVERYZONE_ADDED","Delivery zone added")),t.onClose&&t.onClose()),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),v(Zs(Zs({},y),{},{error:r.t0.message,loading:!1}));case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(){return r.apply(this,arguments)}}(),x=function(){var n=tl(Ws().mark((function n(){var o,i,f,p,h;return Ws().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s(vr.Info,l("LOADING","Loading")),v(Zs(Zs({},y),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},n.next=6,fetch("".concat(c.root,"/business/").concat(null==e?void 0:e.id,"/deliveryzones/").concat(r.id),o);case 6:return i=n.sent,n.next=9,i.json();case 9:(f=n.sent).error?v(Zs(Zs({},y),{},{loading:!1,error:f.result})):(p=e.zones.filter((function(t){return(null==t?void 0:t.id)!==r.id})),v(Zs(Zs({},y),{},{loading:!1})),h=Zs(Zs({},e),{},{zones:p}),a&&a(h),s(vr.Success,l("DELIVERYZONE_DELETED","Business delivery zone deleted")),t.onClose&&t.onClose()),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),v(Zs(Zs({},y),{},{loading:!1,error:[n.t0.message]}));case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}(),E=function(t){var e=(new DOMParser).parseFromString(t,"text/xml"),r=[],n="";if("kml"===e.documentElement.nodeName){var o,i=Vs(e.getElementsByTagName("Placemark"));try{for(i.s();!(o=i.n()).done;){var a=o.value;n=a.getElementsByTagName("name")[0].childNodes[0].nodeValue.trim();var c,u=Vs(a.getElementsByTagName("Polygon"));try{for(u.s();!(c=u.n()).done;){var s,f=c.value.getElementsByTagName("coordinates")[0].childNodes[0].nodeValue.trim(),p=(f=f.replace(/\n/g," ").replace(/\s+/g," ")).split(" "),h=[],d=Vs(p);try{for(d.s();!(s=d.n()).done;){var m=s.value.split(",");h.push({lat:+m[1],lng:+m[0]})}}catch(t){d.e(t)}finally{d.f()}r.push(h)}}catch(t){u.e(t)}finally{u.f()}}}catch(t){i.e(t)}finally{i.f()}}else v(Zs(Zs({},y),{},{error:l("INVALID_KML_FILE","Invalid KML file")}));1===r.length?(v(Zs(Zs({},y),{},{changes:Zs(Zs({},y.changes),{},{type:2,name:n,data:r[0]})})),b(r[0])):v(Zs(Zs({},y),{},{error:l("INVALID_KML_FILE","Invalid KML file")}))};return Object(o.useEffect)((function(){v({loading:!1,changes:{},error:null}),h({zone:r})}),[r]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,Js({},t,{zoneState:p,formState:y,kmlData:g,handleChangeInput:function(t,e){var r;"distance"===t.target.name?v(Zs(Zs({},y),{},{changes:Zs(Zs({},y.changes),{},{data:(r={},Xs(r,t.target.name,t.target.value),Xs(r,"unit",e),r)})})):v(Zs(Zs({},y),{},{changes:Zs(Zs({},y.changes),{},Xs({},t.target.name,t.target.value))}))},handleChangeFormState:function(t){v(Zs(Zs({},y),{},{changes:Zs(Zs({},y.changes),t)}))},handleDeleteBusinessDeliveryZone:x,handleUpdateBusinessDeliveryZone:w,handleAddBusinessDeliveryZone:O,handleUploadKmlFiles:function(t){if(1===t.length){var e=new window.FileReader;e.readAsText(t[0]),e.onload=function(){E(e.result)},e.onerror=function(t){return console.log(t)}}}})))};function il(t){return il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},il(t)}function al(){return al=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},al.apply(this,arguments)}function cl(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=vl(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function ul(t){return function(t){if(Array.isArray(t))return ml(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||vl(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sl(){sl=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==il(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ll(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ll(Object(r),!0).forEach((function(e){pl(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ll(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hl(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function dl(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){hl(i,n,o,a,c,"next",t)}function c(t){hl(i,n,o,a,c,"throw",t)}a(void 0)}))}}function yl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||vl(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vl(t,e){if(t){if("string"==typeof t)return ml(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ml(t,e):void 0}}function ml(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ol.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ol.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gl=function(t){var e=t.UIComponent,r=t.business,n=t.zone,a=t.businesses,c=t.busienssesPropsToFetch,u=t.handleUpdateBusinessDeliveryZone,s=yl(er(),1)[0],l=yl(hr(),1)[0].token,f=yl(Ir(),2)[1],p=yl(br(),2)[1].showToast,h=yl(Object(o.useState)({businesses:[],loading:!1,error:null}),2),d=h[0],y=h[1],v=yl(Object(o.useState)({loading:!1,result:{error:!1}}),2),m=v[0],g=v[1],b=yl(Object(o.useState)([]),2),w=b[0],O=b[1],x=function(){var t=dl(sl().mark((function t(){var e,n,o,i,a,u;return sl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(fl(fl({},d),{},{loading:!0})),e=s.setAccessToken(l).businesses().select(c).asDashboard(),t.next=5,e.get();case 5:n=t.sent,o=n.content,i=o.error,a=o.result,i||(u=a.filter((function(t){return t.id!==r.id})),y(fl(fl({},d),{},{businesses:u,loading:!1}))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),y(fl(fl({},d),{},{loading:!1,error:t.t0.message}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=dl(sl().mark((function t(){var e,o,i,a,c,h,y,v,b;return sl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,f("LOADING","Loading")),g(fl(fl({},m),{},{loading:!0})),e={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},t.next=6,fetch("".concat(s.root,"/business/").concat(r.id,"/deliveryzones/").concat(n.id,"?jbusinesses=").concat(w),e);case 6:return o=t.sent,t.next=9,o.json();case 9:if(!t.sent.error){i=[],a=cl(w);try{for(h=function(){var t,e=c.value;i.push({id:e,name:null===(t=d.businesses.find((function(t){return t.id===e})))||void 0===t?void 0:t.name,pivot:{business_id:e,zone_id:n.id}})},a.s();!(c=a.n()).done;)h()}catch(t){a.e(t)}finally{a.f()}y=fl(fl({},n),{},{businesses:i}),v=r.zones.filter((function(t){return t.id===y.id&&Object.assign(t,y),!0})),b=fl(fl({},r),{},{zones:v}),u&&u(b),g({loading:!1,result:{error:!1}}),p(vr.Success,f("BUSINESS_SAVED","Business saved"))}t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),g({loading:!1,result:{error:!1}});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){a?y(fl(fl({},d),{},{businesses:a,loading:!1})):x()}),[a]),Object(o.useEffect)((function(){if(null!=n&&n.businesses){var t,e=null===(t=n.businesses)||void 0===t?void 0:t.reduce((function(t,e){return[].concat(ul(t),[e.id])}),[]);O(e)}}),[n]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,al({},t,{businessesState:d,actionState:m,selectedBusinessIds:w,handleSelectBusiness:function(t,e){if(e)O([].concat(ul(w),[t]));else{var r=w.filter((function(e){return e!==t}));O(r)}},handleSelectAllBusiness:function(t){if(t){var e,r=null===(e=d.businesses)||void 0===e?void 0:e.reduce((function(t,e){return[].concat(ul(t),[e.id])}),[]);O(r)}else O([])},handleShareBusinesses:E})))};function bl(t){return bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bl(t)}function wl(){return wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wl.apply(this,arguments)}function Ol(t){return function(t){if(Array.isArray(t))return Tl(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||kl(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xl(){xl=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==bl(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function El(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function jl(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){El(i,n,o,a,c,"next",t)}function c(t){El(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Sl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ll(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sl(Object(r),!0).forEach((function(e){_l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||kl(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kl(t,e){if(t){if("string"==typeof t)return Tl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tl(t,e):void 0}}function Tl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}gl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var Il=function(t){var e=t.asDashboard,r=t.business,n=t.businessId,a=t.propsToFetch,c=t.UIComponent,u=t.handleSucessUpdateBusiness,s=t.handleSucessRemoveBusiness,l=t.handleSucessAddBusiness,f=Pl(er(),1)[0],p=Pl(hr(),1)[0],h=Pl(br(),2)[1].showToast,d=Pl(Ir(),2)[1],y=Pl(Object(o.useState)({business:null,loading:!0,error:null}),2),v=y[0],m=y[1],g=Pl(Object(o.useState)({loading:!1,error:null}),2),b=g[0],w=g[1],O=Pl(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),x=O[0],E=O[1],j=function(){var t=jl(xl().mark((function t(){var r,o,i,c;return xl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(Ll(Ll({},v),{},{loading:!0})),r=e?f.setAccessToken(p.token).businesses(n).asDashboard():f.setAccessToken(p.token).businesses(n).select(a),t.next=5,r.get();case 5:o=t.sent,i=o.content.result,c=Array.isArray(i)?null:i,m(Ll(Ll({},v),{},{loading:!1,business:c})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),m(Ll(Ll({},v),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=jl(xl().mark((function t(e){var r,o,i,a,c,u,s=arguments;return xl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>1&&void 0!==s[1]&&s[1],t.prev=1,h(vr.Info,d("LOADING","Loading")),w(Ll(Ll({},b),{},{loading:!0})),o=r?{featured:e}:{enabled:e},t.next=7,f.setAccessToken(p.token).businesses(n).save(o);case 7:i=t.sent,a=i.content,c=a.error,u=a.result,w(Ll(Ll({},b),{},{loading:!1,error:c?u:null})),c||(m(Ll(Ll({},v),{},{business:Ll(Ll({},v.business),u)})),h(vr.Success,d("BUSINESS_UPDATED","Business updated"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),w(Ll(Ll({},b),{},{loading:!1,error:[t.t0.message]}));case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}(),L=function(){var e=jl(xl().mark((function e(){var r,o,i;return xl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(vr.Info,d("LOADING","Loading")),w(Ll(Ll({},b),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=6,fetch("".concat(f.root,"/business/").concat(n),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,w(Ll(Ll({},b),{},{loading:!1,error:i.error?i.result:null})),i.error||(h(vr.Success,d("BUSINESS_DELETED","Business deleted")),s&&s(n),t.onClose&&t.onClose()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),w(Ll(Ll({},b),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var t=jl(xl().mark((function t(){var e,r,o;return xl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(vr.Info,d("LOADING","Loading")),w(Ll(Ll({},b),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},t.next=6,fetch("".concat(f.root,"/business/").concat(n,"/duplicate"),e);case 6:return r=t.sent,t.next=9,r.json();case 9:o=t.sent,w(Ll(Ll({},b),{},{loading:!1,error:o.error?o.result:null})),o.error||(l&&l(null==o?void 0:o.result),h(vr.Success,d("BUSINESS_DUPLICATED","Business duplicated"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),w(Ll(Ll({},b),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),P=function(){var t=jl(xl().mark((function t(e){var r,o,i,a,c,u,s;return xl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(vr.Info,d("LOADING","Loading")),w(Ll(Ll({},b),{},{loading:!0})),t.next=5,f.setAccessToken(p.token).businesses(n).save({owners:e});case 5:r=t.sent,o=r.content,i=o.error,a=o.result,w(Ll(Ll({},b),{},{loading:!1,error:i?a:null})),i||(u=null==v||null===(c=v.business)||void 0===c?void 0:c.owners.filter((function(t){return e.includes(t.id)})),s=Ll(Ll({},null==v?void 0:v.business),{},{owners:u}),m(Ll(Ll({},v),{},{business:s})),h(vr.Success,d("BUSINESS_OWNER_DELETED","Business owner deleted"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w(Ll(Ll({},b),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=jl(xl().mark((function t(e,r){var o,i,a,c,u,s,l;return xl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(vr.Info,d("LOADING","Loading")),w(Ll(Ll({},b),{},{loading:!0})),t.next=5,f.setAccessToken(p.token).businesses(n).save({owners:e});case 5:o=t.sent,i=o.content,a=i.error,c=i.result,w(Ll(Ll({},b),{},{loading:!1,error:a?c:null})),a||(s=[].concat(Ol(null==v||null===(u=v.business)||void 0===u?void 0:u.owners),[r]),l=Ll(Ll({},null==v?void 0:v.business),{},{owners:s}),m(Ll(Ll({},v),{},{business:l})),h(vr.Success,d("BUSINESS_OWNER_ADDED","Business owner added"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w(Ll(Ll({},b),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),T=function(){var t=jl(xl().mark((function t(){var e;return xl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,E(Ll(Ll({},x),{},{loading:!0})),h(vr.Info,d("LOADING","Loading")),t.next=5,f.businesses(n).save(x.changes,{accessToken:p.token});case 5:e=t.sent,E(Ll(Ll({},x),{},{changes:e.content.error?x.changes:{},result:e.content,loading:!1})),e.content.error||(m(Ll(Ll({},v),{},{business:Ll(Ll({},v.business),e.content.result)})),h(vr.Success,d("BUSINESS_UPDATED","Business updated"))),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),E(Ll(Ll({},x),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=jl(xl().mark((function t(e,o){var i,a,c;return xl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w(Ll(Ll({},b),{},{loading:!0})),h(vr.Info,d("LOADING","Loading")),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)},body:JSON.stringify({value:e})},t.next=6,fetch("".concat(f.root,"/business/").concat((null==r?void 0:r.id)||n,"/configs/").concat(o),i);case 6:return a=t.sent,t.next=9,a.json();case 9:(c=t.sent).error?w({loading:!1,error:c.result}):(w({loading:!1,error:null}),m(Ll(Ll({},v),{},{business:Ll(Ll({},v.business),{},{configs:v.business.configs.map((function(t){return t.id===o?c.result:t}))})})),h(vr.Success,d("CHANGES_SAVED","Changes saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){null!=v&&v.business&&u&&u(null==v?void 0:v.business)}),[null==v?void 0:v.business]),Object(o.useEffect)((function(){r?m(Ll(Ll({},v),{},{loading:!1,business:r})):j()}),[n,r]),i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(c,wl({},t,{businessState:v,actionStatus:b,formState:x,setFormState:E,cleanFormState:function(t){return E(Ll(Ll({},x),t))},handleChangeActiveBusiness:S,handleDuplicateBusiness:_,handleDeleteBusiness:L,handleDeleteBusinessOwner:P,handleAddBusinessOwner:k,handleUpdateBusinessClick:T,handleUpdateBusinessState:function(t){var e=Ll({},null==v?void 0:v.business);Object.assign(e,t),m(Ll(Ll({},v),{},{business:e}))},handleSuccessAddBusinessItem:function(t,e){var r=[].concat(Ol(null==v?void 0:v.business[t]),[e]);m(Ll(Ll({},v),{},{business:Ll(Ll({},null==v?void 0:v.business),{},_l({},t,r))}))},handleSuccessDeleteBusinessItem:function(t,e){var r=null==v?void 0:v.business[t].filter((function(t){return t.id!==e}));m(Ll(Ll({},v),{},{business:Ll(Ll({},null==v?void 0:v.business),{},_l({},t,r))}))},handleUpdatePreorderConfigs:I})))};function Al(t){return Al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(t)}function Cl(){return Cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cl.apply(this,arguments)}function Nl(){Nl=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Al(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Dl(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Gl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Fl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Gl(Object(r),!0).forEach((function(e){Ul(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ul(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Rl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rl(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Il.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),businessId:c.a.oneOfType([c.a.number,c.a.string]),business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Il.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","address","alcohol","city","city_id","description","ribbon","delivery_price","distance","delivery_time","enabled","featured","food","gallery","groceries","header","laundry","logo","location","metafields","name","offers","open","owners","pickup_time","reviews","schedule","slug","types"]};var Ml=function(t){var e=t.business,r=t.UIComponent,n=t.handleUpdateBusinessState,a=Bl(er(),1)[0],c=Bl(hr(),1)[0].token,u=Bl(br(),2)[1].showToast,s=Bl(Ir(),2)[1],l=Bl(Object(o.useState)("status"),2),f=l[0],p=l[1],h=Bl(Object(o.useState)({loading:!1,changes:(null==e?void 0:e.eta_status_times)||{},error:null}),2),d=h[0],y=h[1],v=function(){var t,r=(t=Nl().mark((function t(){var r,o,i,l;return Nl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(vr.Info,s("LOADING","Loading")),y(Fl(Fl({},d),{},{loading:!0,error:null})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({eta_status_times:JSON.stringify(d.changes)})},t.next=6,fetch("".concat(a.root,"/business/").concat(e.id),r);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?y(Fl(Fl({},d),{},{loading:!1,error:i.result})):(y(Fl(Fl({},d),{},{loading:!1,error:null})),l=Fl(Fl({},e),{},{eta_status_times:d.changes}),n(l),u(vr.Success,s("SAVED","Saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),y(Fl(Fl({},d),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Dl(i,n,o,a,c,"next",t)}function c(t){Dl(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,Cl({},t,{selectedOption:f,setSelectedOption:p,formState:d,handleChangeInput:function(t){y(Fl(Fl({},d),{},{changes:Fl(Fl({},d.changes),{},Ul({},t.target.name,Number(t.target.value)))}))},hanldeUpdateBusinessEtaTimes:v})))};function Yl(t){return Yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yl(t)}function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zl.apply(this,arguments)}function $l(){$l=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Yl(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ql(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Jl(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ql(i,n,o,a,c,"next",t)}function c(t){ql(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Vl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Hl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vl(Object(r),!0).forEach((function(e){Wl(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vl(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Zl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zl(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Ml.propTypes={UIComponent:c.a.elementType},Ml.defaultProps={};var Xl=function(t){var e,r,n=t.UIComponent,a=t.business,c=t.handleSuccessUpdate,u=t.handleSucessAddBusiness,s=t.handleUpdateBusinessState,l=Kl(er(),1)[0],f=Kl(hr(),1)[0],p=Kl(jn(),1)[0].configs,h=Kl(br(),2)[1].showToast,d=Kl(Ir(),2)[1],y=Kl(Object(o.useState)({loading:!1,business:null,error:null}),2),v=y[0],m=y[1],g=Kl(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),b=g[0],w=g[1],O=Kl(Object(o.useState)(null),2),x=O[0],E=O[1],j=null,S=null==p||null===(e=p.google_maps_api_key)||void 0===e?void 0:e.value,L={minimum:0,delivery_price:0,tax:0,tax_type:1,service_fee:0,enabled:!0,owner_id:null==f||null===(r=f.user)||void 0===r?void 0:r.id,schedule:[{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]}]},_=function(t){m(Hl(Hl({},v),{},{business:Hl(Hl({},v.business),t.content.result)})),c&&c(t.content.result),s&&s(t.content.result)},P=function(){var t=Jl($l().mark((function t(){var e,r,n,o,i,c,u,s,p,y;return $l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(vr.Info,d("LOADING","Loading")),w(Hl(Hl({},b),{},{loading:!0})),e=Hl({},b.changes),t.next=6,l.businesses(null==a?void 0:a.id).save(e,{accessToken:f.token});case 6:if(r=t.sent,n=Hl({},b.changes),w(Hl(Hl({},b),{},{changes:r.content.error?b.changes:{},result:r.content,loading:!1})),r.content.error){t.next=20;break}if(void 0===(null==n||null===(o=n.ribbon)||void 0===o?void 0:o.enabled)||null!=n&&null!==(i=n.ribbon)&&void 0!==i&&i.enabled||null===(c=r.content)||void 0===c||null===(u=c.result)||void 0===u||null===(s=u.ribbon)||void 0===s||!s.enabled){t.next=18;break}return p={ribbon:{enabled:!1}},t.next=14,l.businesses(null==a?void 0:a.id).save(p,{accessToken:f.token});case 14:y=t.sent,_(y),t.next=19;break;case 18:_(r);case 19:h(vr.Success,d("BUSINESS_UPDATED","Business updated"));case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),w(Hl(Hl({},b),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 25:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=Jl($l().mark((function t(){var e,r;return $l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(vr.Info,d("LOADING","Loading")),w(Hl(Hl({},b),{},{loading:!0})),e=Hl(Hl({},b.changes),L),t.next=6,l.businesses().save(e,{accessToken:f.token});case 6:r=t.sent,w(Hl(Hl({},b),{},{changes:r.content.error?b.changes:{},result:r.content,loading:!1})),r.content.error||(m(Hl(Hl({},v),{},{business:Hl(Hl({},v.business),r.content.result)})),h(vr.Success,d("BUSINESS_ADDED","Business added")),u&&u(r.content.result)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),w(Hl(Hl({},b),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=Jl($l().mark((function t(e,r){var n,o,i,a,c;return $l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Date,o=Math.floor(n.getTime()/1e3),i="https://maps.googleapis.com/maps/api/timezone/json?location=".concat(e,",").concat(r,"&timestamp=").concat(o,"&key=").concat(S),t.next=5,fetch(i,{method:"GET"});case 5:return a=t.sent,t.next=8,a.json();case 8:return c=t.sent,t.abrupt("return",null==c?void 0:c.timeZoneId);case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),I=function(){var t=Jl($l().mark((function t(e){var r,n,o;return $l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(null==e||null===(r=e.location)||void 0===r?void 0:r.lat,null==e||null===(n=e.location)||void 0===n?void 0:n.lng);case 2:o=t.sent,E({address:null==e?void 0:e.address,location:Hl(Hl({},null==e?void 0:e.location),{},{zipcode:null!=e&&e.zipcode?e.zipcode:-1,zoom:15}),timezone:o});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){x&&w(Hl(Hl({},b),{},{changes:Hl(Hl({},null==b?void 0:b.changes),x)}))}),[x]),Object(o.useEffect)((function(){a&&m(Hl(Hl({},v),{},{business:a}))}),[a]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,zl({},t,{cleanFormState:function(t){return w(Hl(Hl({},b),t))},formState:b,businessState:v,setFormState:w,handleChangeInput:function(t,e){var r={};e?Object.values(t).map((function(t){r=Hl(Hl({},r),{},Wl({},t.name,t.value))})):r=Wl({},t.target.name,t.target.value),w(Hl(Hl({},b),{},{changes:Hl(Hl({},b.changes),r)}))},handleButtonUpdateClick:P,handlechangeImage:function(t,e){var r=new window.FileReader;r.readAsDataURL(t),r.onload=function(){w(Hl(Hl({},b),{},{changes:Hl(Hl({},b.changes),{},Wl({},e,r.result))}))},r.onerror=function(t){return console.log(t)}},handleAddBusiness:k,handleChangeAddress:I,handleChangeCenter:function(t){var e;clearTimeout(j),j=setTimeout(Jl($l().mark((function r(){return $l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,T(null==t?void 0:t.lat(),null==t?void 0:t.lng());case 2:e=r.sent,E({location:{lat:null==t?void 0:t.lat(),lng:null==t?void 0:t.lng(),zoom:15,zipcode:-1},timezone:e});case 4:case"end":return r.stop()}}),r)}))),200)},handleChangeSwtich:function(t,e){var r=Hl(Hl({},b.changes),{},Wl({},t,e));w(Hl(Hl({},b),{},{changes:r}))},handleChangeRibbon:function(t){var e,r,n=null!=b&&null!==(e=b.changes)&&void 0!==e&&e.ribbon?Hl(Hl({},null==b||null===(r=b.changes)||void 0===r?void 0:r.ribbon),t):Hl({},t),o=Hl(Hl({},null==b?void 0:b.changes),{},{ribbon:n});w(Hl(Hl({},b),{},{changes:o}))}})))};function Ql(t){return Ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ql(t)}function tf(){return tf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tf.apply(this,arguments)}function ef(){ef=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ql(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function rf(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function nf(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){rf(i,n,o,a,c,"next",t)}function c(t){rf(i,n,o,a,c,"throw",t)}a(void 0)}))}}function of(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function af(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?of(Object(r),!0).forEach((function(e){cf(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):of(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function cf(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return sf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sf(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sf(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Xl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var lf=function(t){var e=t.business,r=t.isVideoGallery,n=t.isImageGallery,a=t.UIComponent,c=t.handleSucessAddBusinessGallery,u=t.handleSucessDeleteBusinessGallery,s=uf(er(),1)[0],l=uf(hr(),1)[0].token,f=uf(br(),2)[1].showToast,p=uf(Ir(),2)[1],h=uf(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),d=h[0],y=h[1],v=uf(Object(o.useState)([]),2),m=v[0],g=v[1],b=uf(Object(o.useState)([]),2),w=b[0],O=b[1],x=function(){var t=nf(ef().mark((function t(){var o,i,a;return ef().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,p("LOADING","Loading")),y(af(af({},d),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(d.changes)},t.next=6,fetch("".concat(s.root,"/business/").concat(e.id,"/gallery"),o);case 6:return i=t.sent,t.next=9,i.json();case 9:a=t.sent,y(af(af({},d),{},{changes:a.error?d.changes:{},result:a,loading:!1})),a.error||(r&&f(vr.Success,p("GALLERY_VIDEO_ADDED")),n&&f(vr.Success,p("GALLERY_IMAGE_ADDED")),c&&c(a.result)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),y(af(af({},d),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=nf(ef().mark((function t(r){var n,o,i;return ef().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,p("LOADING","Loading")),y(af(af({},d),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},t.next=6,fetch("".concat(s.root,"/business/").concat(e.id,"/gallery/").concat(r,"?business_id=").concat(e.id),n);case 6:return o=t.sent,t.next=9,o.json();case 9:i=t.sent,y(af(af({},d),{},{loading:!1})),i.error||(f(vr.Success,p("GALLERY_ITEM_DELETED")),u&&u(r)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),y(af(af({},d),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t,r,n=null==e||null===(t=e.gallery)||void 0===t?void 0:t.filter((function(t){return t.file})),o=null==e||null===(r=e.gallery)||void 0===r?void 0:r.filter((function(t){return t.video}));g(n),O(o)}),[e]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,tf({},t,{businessSchedule:(null==e?void 0:e.schedule)||[],businessPhotos:m||[],businessVideos:w||[],formState:d,handlechangeImage:function(t){var r=new window.FileReader;r.readAsDataURL(t),r.onload=function(){y(af(af({},d),{},{changes:af(af({},d.changes),{},{business_id:e.id,file:r.result,type:1})}))},r.onerror=function(t){return console.log(t)}},cleanFormState:function(t){return y(af(af({},d),t))},handleChangeBusinessVideo:function(t){y(af(af({},d),{},{changes:af(af({},d.changes),{},{business_id:null==e?void 0:e.id,type:2,video:t.target.value})}))},handleUpdateBusinessGallery:x,handleDeleteBusinessGallery:E})))};function ff(t){return ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ff(t)}function pf(){return pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pf.apply(this,arguments)}function hf(){hf=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ff(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function df(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function yf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?df(Object(r),!0).forEach((function(e){vf(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):df(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function vf(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mf(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function gf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return bf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bf(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bf(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}lf.propTypes={UIComponent:c.a.elementType,business:c.a.object,optionToShow:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lf.defaultProps={business:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var wf=function(t){var e=t.UIComponent,r=gf(hr(),1)[0],n=r.token,a=r.loading,c=gf(er(),1)[0],u=gf(Object(o.useState)({loading:!1,printers:[],error:null}),2),s=u[0],l=u[1],f=function(){var t,e=(t=hf().mark((function t(){var e,r,o,i,u,f;return hf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,l(yf(yf({},s),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r="".concat(c.root,"/printers"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,u=i.error,f=i.result,l(yf(yf({},s),{},u?{loading:!1,error:f}:{loading:!1,printers:f})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),l(yf(yf({},s),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){mf(i,n,o,a,c,"next",t)}function c(t){mf(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){f()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,pf({},t,{printersListState:s})))};function Of(){return Of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Of.apply(this,arguments)}function xf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ef(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ef(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ef(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}wf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jf=function(t){var e=t.googleMapsControls,r=t.business,n=t.optionToShow,a=t.UIComponent,c=xf(Object(o.useState)(n),2),u=c[0],s=c[1],l=xf(Object(o.useState)([]),2),f=l[0],p=l[1],h=xf(Object(o.useState)([]),2),d=h[0],y=h[1],v=xf(Object(o.useState)({}),2),m=v[0],g=v[1];return Object(o.useEffect)((function(){var t,n,o=null==r||null===(t=r.gallery)||void 0===t?void 0:t.filter((function(t){return t.file})),i=null==r||null===(n=r.gallery)||void 0===n?void 0:n.filter((function(t){return t.video})),a={location:null==r?void 0:r.location,address:null==r?void 0:r.address,address_notes:null==r?void 0:r.address_notes,googleMapsControls:e};p(o),y(i),g(a)}),[r]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,Of({},t,{businessSchedule:(null==r?void 0:r.schedule)||[],businessPhotos:f||[],businessVideos:d||[],businessLocation:m||{},optionToShow:u,onChangeOption:function(t){s(t)}})))};function Sf(t){return Sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(t)}function Lf(){return Lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lf.apply(this,arguments)}function _f(){_f=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Sf(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Pf(t){return function(t){if(Array.isArray(t))return Df(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Nf(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Tf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kf(Object(r),!0).forEach((function(e){If(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function If(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Af(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Cf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Nf(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nf(t,e){if(t){if("string"==typeof t)return Df(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Df(t,e):void 0}}function Df(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}jf.propTypes={UIComponent:c.a.elementType,business:c.a.object,optionToShow:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jf.defaultProps={business:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},ln.a.extend(pn.a);var Gf=function(t){var e=t.UIComponent,r=t.initialOrderType,n=t.initialFilterKey,a=t.initialFilterValue,c=t.isSortByReview,u=t.isSearchByName,s=t.isSearchByDescription,l=t.propsToFetch,f=t.onBusinessClick,p=Cf(Object(o.useState)({businesses:[],loading:!0,error:null}),2),h=p[0],d=p[1],y=Cf(Object(o.useState)({currentPage:0,pageSize:10,totalItems:null,totalPages:null}),2),v=y[0],m=y[1],g=Cf(Object(o.useState)(null),2),b=g[0],w=g[1],O=Cf(Object(o.useState)(""),2),x=O[0],E=O[1],j=Cf(Object(o.useState)(null),2),S=j[0],L=j[1],_=Cf(Rn(),1)[0],P=Cf(er(),1)[0],k=Cf(Object(o.useState)({}),2),T=k[0],I=k[1],A=new RegExp(/^[A-Za-z0-9\s]+$/g),C=function(){var t,e=(t=_f().mark((function t(e){var n,o,i,a,f,p,y,g,w,O,E,j,L,k,C,N,D,G,F,U,B,R,M,Y,z,$,q,J;return _f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(Tf(Tf({},h),{},{loading:!0})),O={location:"".concat(null===(n=_.options)||void 0===n||null===(o=n.address)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.lat,",").concat(null===(a=_.options)||void 0===a||null===(f=a.address)||void 0===f||null===(p=f.location)||void 0===p?void 0:p.lng),type:r||(null===(y=_.options)||void 0===y?void 0:y.type)||1},c||(E={page:e?1:v.currentPage+1,page_size:v.pageSize},O=Tf(Tf({},O),E)),null!==(g=_.options)&&void 0!==g&&g.moment&&(V=null===(w=_.options)||void 0===w?void 0:w.moment,H="YYYY-MM-DD HH:mm:ss",ln()(V,H).format(H)===V)&&(L=ln.a.utc(null===(j=_.options)||void 0===j?void 0:j.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),O.timestamp=L),k=null,C=[],b&&C.push({attribute:b,value:!0}),S&&(1===(null===(N=_.options)||void 0===N?void 0:N.type)&&C.push({attribute:"delivery_time",value:{condition:"<=",value:S}}),2===(null===(D=_.options)||void 0===D?void 0:D.type)&&C.push({attribute:"pickup_time",value:{condition:"<=",value:S}})),x&&(G=[],F=A.test(x),u&&G.push({attribute:"name",value:{condition:"ilike",value:F?encodeURI("%".concat(x,"%")):"%".concat(x,"%")}}),s&&G.push({attribute:"description",value:{condition:"ilike",value:F?encodeURI("%".concat(x,"%")):"%".concat(x,"%")}}),C.push({conector:"OR",conditions:G})),C.length&&(k={conditions:C,conector:"AND"}),U={},T.businesses=U,I(Tf({},T)),B=k?P.businesses().select(l).parameters(O).where(k):P.businesses().select(l).parameters(O),t.next=17,B.get({cancelToken:U});case 17:R=t.sent,M=R.content,Y=M.result,z=M.pagination,c?($=Y.sort((function(t,e){return e.reviews.total-t.reviews.total})),h.businesses=$):h.businesses=e?Y:[].concat(Pf(h.businesses),Pf(Y)),d(Tf(Tf({},h),{},{loading:!1})),q=0,z.current_page!==z.total_pages&&(J=z.total-h.businesses.length,q=J<z.page_size?J:z.page_size),m(Tf(Tf({},v),{},{currentPage:z.current_page,totalPages:z.total_pages,totalItems:z.total,nextPageItems:q})),t.next=31;break;case 28:t.prev=28,t.t0=t.catch(0),"Cancel"!==t.t0.constructor.name&&d(Tf(Tf({},h),{},{loading:!1,error:[t.t0.message]}));case 31:case"end":return t.stop()}var V,H}),t,null,[[0,28]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Af(i,n,o,a,c,"next",t)}function c(t){Af(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){var t=T.businesses;return function(){t&&t.cancel()}}),[T.businesses]),Object(o.useEffect)((function(){var t,e;!_.loading&&null!==(t=_.options)&&void 0!==t&&null!==(e=t.address)&&void 0!==e&&e.location&&C(!0)}),[JSON.stringify(_.options),b,x,S]),Object(o.useEffect)((function(){if(n||a)switch(n){case"category":N(a);break;case"timeLimit":G(a);break;case"search":D(a)}}),[n,a]);var N=function(t){t!==b&&(d(Tf(Tf({},h),{},{businesses:[],loading:!0})),w(t))},D=function(t){d(Tf(Tf({},h),{},!!t!=!!x?{businesses:[],loading:!0}:{loading:!1})),E(t)},G=function(t){d(Tf(Tf({},h),{},!!t!=!!S?{businesses:[],loading:!0}:{loading:!1})),L(t)};return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Lf({},t,{businessesList:h,paginationProps:v,searchValue:x,timeLimitValue:S,businessTypeSelected:b,getBusinesses:C,handleChangeSearch:D,handleChangeTimeLimit:G,handleBusinessClick:function(t){f&&f(t)},handleChangeBusinessType:N})))};function Ff(t){return Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(t)}function Uf(){return Uf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Uf.apply(this,arguments)}function Bf(){Bf=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ff(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Rf(t){return function(t){if(Array.isArray(t))return Hf(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Vf(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yf(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mf(Object(r),!0).forEach((function(e){zf(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function zf(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $f(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function qf(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){$f(i,n,o,a,c,"next",t)}function c(t){$f(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Jf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Vf(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vf(t,e){if(t){if("string"==typeof t)return Hf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hf(t,e):void 0}}function Hf(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Gf.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),onBusinessClick:c.a.func},Gf.defaultProps={propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var Wf=function(t){var e=t.UIComponent,r=t.userId,n=t.busienssesPropsToFetch,a=Jf(er(),1)[0],c=Jf(hr(),1)[0].token,u=Jf(Ir(),2)[1],s=Jf(br(),2)[1].showToast,l=Jf(Object(o.useState)({businesses:[],loading:!1,error:null}),2),f=l[0],p=l[1],h=Jf(Object(o.useState)([]),2),d=h[0],y=h[1],v=Jf(Object(o.useState)({loading:!1,error:null}),2),m=v[0],g=v[1],b=function(){var t=qf(Bf().mark((function t(){var e,n,o,i,u,s,l;return Bf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g(Yf(Yf({},m),{},{loading:!0})),e=a.setAccessToken(c).users(r).select(["businesses"]),t.next=5,e.get();case 5:n=t.sent,o=n.content,i=o.error,u=o.result,i?g({loading:!1,error:u}):(g({loading:!1,error:null}),l=null===(s=u.businesses)||void 0===s?void 0:s.reduce((function(t,e){return[].concat(Rf(t),[e.id])}),[]),y(l)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),g({loading:!1,error:[t.t0.message]});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=qf(Bf().mark((function t(){var e,r,o,i,u;return Bf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(Yf(Yf({},f),{},{loading:!0})),e=a.setAccessToken(c).businesses().select(n).asDashboard(),t.next=5,e.get();case 5:r=t.sent,o=r.content,i=o.error,u=o.result,i||p(Yf(Yf({},f),{},{businesses:u,loading:!1})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),p(Yf(Yf({},f),{},{loading:!1,error:t.t0.message}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=qf(Bf().mark((function t(){var e,n,o,i;return Bf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,u("LOADING","Loading")),g({loading:!0,error:null}),t.next=5,a.setAccessToken(c).users(r).save({businesses:d});case 5:e=t.sent,n=e.content,o=n.error,i=n.result,o?g({loading:!1,error:i}):(g({loading:!1,error:null}),s(vr.Success,u("BUSINESS_SAVED","Business saved"))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),g({loading:!1,error:[t.t0.message]});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){t.businesses?p(Yf(Yf({},f),{},{businesses:t.businesses,loading:!1})):w()}),[t.businesses]),Object(o.useEffect)((function(){b()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Uf({},t,{actionState:m,businessesState:f,selectedBusinessIds:d,handleSelectBusiness:function(t,e){if(e)y([].concat(Rf(d),[t]));else{var r=d.filter((function(e){return e!==t}));y(r)}},handleSelectAllBusiness:function(t){if(t){var e,r=null===(e=f.businesses)||void 0===e?void 0:e.reduce((function(t,e){return[].concat(Rf(t),[e.id])}),[]);y(r)}else y([])},handleUpdateBusinesses:O})))};function Kf(t){return Kf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(t)}function Zf(){return Zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Zf.apply(this,arguments)}function Xf(){Xf=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Kf(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Qf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qf(Object(r),!0).forEach((function(e){ep(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ep(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rp(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function np(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){rp(i,n,o,a,c,"next",t)}function c(t){rp(i,n,o,a,c,"throw",t)}a(void 0)}))}}function op(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ip(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ip(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ip(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Wf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Wf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var ap=function(t){var e=t.business,r=t.UIComponent,n=t.handleSuccessBusinessMenu,a=op(er(),1)[0],c=op(hr(),1)[0].token,u=op(Ir(),2)[1],s=op(br(),2)[1].showToast,l=op(Object(o.useState)({menus:[],menusShared:[],loading:!1,error:null}),2),f=l[0],p=l[1],h=op(Object(o.useState)(!1),2),d=h[0],y=h[1],v=op(Object(o.useState)({sites:[],loading:!0,error:null}),2),m=v[0],g=v[1],b=function(){var t=np(Xf().mark((function t(){var r,n,o;return Xf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(tp(tp({},f),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=5,fetch("".concat(a.root,"/business/").concat(e.id,"/menus"),r);case 5:return n=t.sent,t.next=8,n.json();case 8:(o=t.sent).error?p(tp(tp({},f),{},{loading:!1,error:o.result})):p(tp(tp({},f),{},{loading:!1,menus:o.result})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),p(tp(tp({},f),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=np(Xf().mark((function t(r,o){var i,l,h,y,v,m,g;return Xf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,u("LOADING","Loading")),p(tp(tp({},f),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({enabled:o})},l=d?"".concat(a.root,"/business/").concat(e.id,"/menus_shared/").concat(r):"".concat(a.root,"/business/").concat(e.id,"/menus/").concat(r),t.next=7,fetch(l,i);case 7:return h=t.sent,t.next=10,h.json();case 10:(y=t.sent).error?p(tp(tp({},f),{},{loading:!1,error:y.result})):(v={},d?(g=f.menusShared.map((function(t){return t.id===r?tp(tp(tp({},t),y.result),{},{id:null==t?void 0:t.id}):t})),p(tp(tp({},f),{},{loading:!1,menusShared:g})),v=tp(tp({},e),{},{menus_shared:g})):(m=f.menus.filter((function(t){return t.id===r&&Object.assign(t,y.result),!0})),p(tp(tp({},f),{},{loading:!1,menus:m})),v=tp(tp({},e),{},{menus:m})),n&&n(v),s(vr.Success,u("MENU_SAVED","Products catalog saved"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),p(tp(tp({},f),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,r){return t.apply(this,arguments)}}(),O=function(){var t=np(Xf().mark((function t(r){var o,i,l,h,y,v,m;return Xf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,u("LOADING","Loading")),p(tp(tp({},f),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},i=d?"".concat(a.root,"/business/").concat(e.id,"/menus_shared/").concat(r):"".concat(a.root,"/business/").concat(e.id,"/menus/").concat(r),t.next=7,fetch(i,o);case 7:return l=t.sent,t.next=10,l.json();case 10:(h=t.sent).error?p(tp(tp({},f),{},{loading:!1,error:h.result})):(y={},d?(m=f.menusShared.filter((function(t){return t.id!==r})),p(tp(tp({},f),{},{loading:!1,menusShared:m})),y=tp(tp({},e),{},{menus_shared:m})):(v=f.menus.filter((function(t){return t.id!==r})),p(tp(tp({},f),{},{loading:!1,menus:v})),y=tp(tp({},e),{},{menus:v})),n&&n(y),s(vr.Success,u("MENU_DELETED","Products catalog deleted"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),p(tp(tp({},f),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=np(Xf().mark((function t(){var r,n,o,i,u,s,l,h;return Xf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=4,fetch("".concat(a.root,"/business/").concat(e.id,"/menus?params=sites"),r);case 4:return n=t.sent,t.next=7,n.json();case 7:if(o=t.sent,i=o.result,o.error){t.next=29;break}return u={},i.forEach((function(t){u=tp(tp({},u),{},ep({},t.id,{id:t.id,sites:t.sites}))})),t.prev=13,t.next=16,fetch("".concat(a.root,"/sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c),"x-app-x":null==a?void 0:a.appId}});case 16:return s=t.sent,t.next=19,s.json();case 19:l=t.sent,h=l.result,g(tp(tp({},m),{},{loading:!1,sites:h})),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(13),p(tp(tp({},f),{},{loading:!1,error:[t.t0.message]}));case 27:t.next=30;break;case 29:p(tp(tp({},f),{},{loading:!1,error:i}));case 30:t.next=35;break;case 32:t.prev=32,t.t1=t.catch(0),p(tp(tp({},f),{},{loading:!1,error:[t.t1.message]}));case 35:case"end":return t.stop()}}),t,null,[[0,32],[13,24]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){null!=e&&e.menus?p(tp(tp({},f),{},{menus:null==e?void 0:e.menus,menusShared:null==e?void 0:e.menus_shared})):b()}),[e]),Object(o.useEffect)((function(){x()}),[]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,Zf({},t,{businessMenusState:f,isSelectedSharedMenus:d,sitesState:m,handleChangeBusinessMenuActiveState:w,handleDeleteBusinessMenu:O,setIsSelectedSharedMenus:y})))};function cp(t){return cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(t)}function up(){return up=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},up.apply(this,arguments)}function sp(){sp=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==cp(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function lp(t){return function(t){if(Array.isArray(t))return gp(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||mp(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fp(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function pp(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){fp(i,n,o,a,c,"next",t)}function c(t){fp(i,n,o,a,c,"throw",t)}a(void 0)}))}}function hp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function dp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hp(Object(r),!0).forEach((function(e){yp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vp(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||mp(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mp(t,e){if(t){if("string"==typeof t)return gp(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gp(t,e):void 0}}function gp(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ap.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ap.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bp=function(t){var e,r=t.isSearchByName,n=t.isSearchByDescription,a=t.slug,c=t.categoryId,u=t.productId,s=t.isAllCategoryProducts,l=t.isInitialRender,f=t.ordering,p=t.UIComponent,h=vp(hr(),1)[0].token,d=vp(un(),1)[0],y=vp(Object(o.useState)(null),2),v=y[0],m=y[1],g=vp(Object(o.useState)(null),2),b=g[0],w=g[1],O=vp(Object(o.useState)({business:{},menus:null,loading:!0,error:null}),2),x=O[0],E=O[1],j=vp(Object(o.useState)({}),2),S=j[0],L=j[1],_=vp(Object(o.useState)({}),2),P=_[0],k=_[1],T=vp(Object(o.useState)({product:null,loading:!1,error:null}),2),I=T[0],A=T[1],C=vp(Object(o.useState)({values:[]}),2),N=C[0],D=C[1],G=vp(Object(o.useState)(a),2),F=G[0],U=G[1],B=vp(Object(o.useState)(!1),2),R=B[0],M=B[1],Y=vp(Object(o.useState)({}),2),z=Y[0],$=Y[1],q=vp(Object(o.useState)({}),2),J=q[0],V=q[1],H=vp(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),W=H[0],K=H[1],Z=vp(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),X=Z[0],Q=Z[1],tt=vp(Object(o.useState)([]),2),et=tt[0],rt=tt[1],nt={loading:!0,pagination:{currentPage:0,pageSize:10,totalItems:null,totalPages:0,nextPageItems:10},products:[]},ot=vp(Object(o.useState)(nt),2),it=ot[0],at=ot[1],ct=vp(Object(o.useState)(null),2),ut=ct[0],st=ct[1],lt=vp(Object(o.useState)(!1),2),ft=lt[0],pt=lt[1],ht=function(t,e){return!b||(t&&t.toLowerCase().includes(b.toLowerCase())&&r||e&&e.toLowerCase().includes(b.toLowerCase())&&n)},dt=function(){var t=pp(sp().mark((function t(e,o,i){var a,c,u,s,l,p,h,d,y,m,g,w,O,E,j,_,T,I,A,C,N,D,G,F,U,B,M,Y,z,$;return sp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=x&&null!==(a=x.business)&&void 0!==a&&a.lazy_load_products_recommended){t.next=5;break}return c=dp(dp({},nt),{},{loading:!1}),v?(lp(null==x||null===(u=x.business)||void 0===u?void 0:u.categories).forEach((function t(e){(null==e?void 0:e.id)===(null==v?void 0:v.id)&&(h=e),Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})),d=lp(null===(s=h)||void 0===s?void 0:s.products),h&&null!==(l=h)&&void 0!==l&&l.subcategories&&h.subcategories.forEach((function t(e){d=[].concat(lp(d),lp(e.products)),Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})),(y=null===(p=d)||void 0===p?void 0:p.filter((function(t){return ht(t.name,t.description)})))||(y=null==v||null===(m=v.products)||void 0===m?void 0:m.filter((function(t){return ht(t.name,t.description)}))),c.products=y||[]):(O=null==x||null===(g=x.business)||void 0===g||null===(w=g.categories)||void 0===w?void 0:w.reduce((function(t,e){return e.products?[].concat(lp(t),lp(e.products)):lp(t)}),[]).filter((function(t){return ht(t.name,t.description)})),c.products=O||[]),at(dp(dp({},c),{},{products:lp(new Map(c.products.map((function(t){return[t.id,t]}))).values())})),t.abrupt("return");case 5:return E=b?"search":"featured"===(null==v?void 0:v.id)?"featured":null!=v&&v.id?"categoryId:".concat(null==v?void 0:v.id):"all",j=S[E]||nt,_=j.pagination,R||at(dp(dp({},j),{},{loading:!0})),T={page:o||(e?1:_.currentPage+1),page_size:i||_.pageSize},null,A=[],b&&(r&&A.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}),n&&A.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}})),I={conditions:A,conector:"OR"},t.prev=14,D=null!=v&&v.id&&"featured"!==(null==v?void 0:v.id)?f.businesses(null===(C=x.business)||void 0===C?void 0:C.id).categories(null==v?void 0:v.id).products():f.businesses(null===(N=x.business)||void 0===N?void 0:N.id).products(),G={},P.products=G,k(dp({},P)),F=I.conditions.length>0?D.parameters(T).where(I):D.parameters(T),t.next=22,F.get({cancelToken:G});case 22:U=t.sent,B=U.content,M=B.error,Y=B.result,z=B.pagination,M?st(Y):($={pagination:dp(dp({},j.pagination),{},{pageSize:0===z.page_size?j.pagination.pageSize:z.page_size,currentPage:z.current_page,totalItems:z.total,totalPages:z.total_pages}),loading:!1,products:e?lp(Y):[].concat(lp(j.products),lp(Y))},S[E]=$,at(dp(dp({},$),{},{products:lp(new Map($.products.map((function(t){return[t.id,t]}))).values())})),L(dp({},S))),t.next=33;break;case 30:t.prev=30,t.t0=t.catch(14),st([t.t0.message]);case 33:case"end":return t.stop()}}),t,null,[[14,30]])})));return function(e,r,n){return t.apply(this,arguments)}}(),yt=function(){var t=pp(sp().mark((function t(){var e,r,n,o,i,a;return sp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c&&u&&null!==(e=x.business)&&void 0!==e&&e.id)){t.next=16;break}return t.prev=1,A(dp(dp({},I),{},{loading:!0})),n={},P.product=n,t.next=7,f.businesses(null===(r=x.business)||void 0===r?void 0:r.id).categories(c).products(u).get({cancelToken:n});case 7:o=t.sent,i=o.content.result,a=Array.isArray(i)?null:i,A(dp(dp({},I),{},{product:a,loading:!1})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),A(dp(dp({},I),{},{loading:!1,error:[t.t0]}));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(){return t.apply(this,arguments)}}(),vt=function(){var t=pp(sp().mark((function t(){var e,r,n,o,i;return sp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={},K(dp(dp({},W),{},{loading:!0})),t.next=4,fetch("".concat(f.root,"/taxes"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}});case 4:return r=t.sent,t.next=7,r.json();case 7:if(n=t.sent,o=n.error,i=n.result,o){t.next=14;break}return i.forEach((function(t){return e["id:".concat(null==t?void 0:t.id)]=t})),$(e),t.abrupt("return");case 14:K(dp(dp({},W),{},{result:{error:!0,result:e},loading:!1}));case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),mt=function(){var t=pp(sp().mark((function t(){var e,r,n,o,i;return sp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={},Q(dp(dp({},X),{},{loading:!0})),t.next=4,fetch("".concat(f.root,"/fees"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}});case 4:return r=t.sent,t.next=7,r.json();case 7:if(n=t.sent,o=n.error,i=n.result,o){t.next=14;break}return i.forEach((function(t){return e["id:".concat(null==t?void 0:t.id)]=t})),V(e),t.abrupt("return");case 14:Q(dp(dp({},X),{},{result:{error:!0,result:e},loading:!1}));case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),gt=function(){var t=pp(sp().mark((function t(){var e,r,n,o;return sp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(f.root,'/business_types?where=[{"attribute":"enabled","value":true}]'),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return e=t.sent,t.next=6,e.json();case 6:r=t.sent,n=r.error,o=r.result,n||rt(o),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(null===t.t0||void 0===t.t0?void 0:t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){l&&yt()}),[JSON.stringify(null===(e=x.business)||void 0===e?void 0:e.id),l]),Object(o.useEffect)((function(){U(a)}),[a]);var bt=function(){var t=pp(sp().mark((function t(){var e,r,n,o;return sp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,E(dp(dp({},x),{},{loading:!0})),r={},P.business=r,k(dp({},P)),t.next=7,f.businesses(F).asDashboard().get();case 7:n=t.sent,null!=(o=n.content.result)&&o.categories&&0!==(null==o||null===(e=o.categories)||void 0===e?void 0:e.length)||pt(!0),E(dp(dp({},x),{},{business:o,loading:!1})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),E(dp(dp({},x),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),wt=function(t){var e,r=t.tax,n=t.isRemove,o=(t.id,lp(null==x||null===(e=x.business)||void 0===e?void 0:e.categories));E(dp(dp({},x),{},{business:dp(dp({},x.business),{},{categories:function t(e,r){for(var o=0;o<(null==e?void 0:e.length);o++){for(var i,a=e[o],c=0;c<a.products.length;c++){var u,s,l=a.products[c];n&&(null===(u=l.tax)||void 0===u?void 0:u.id)===(null==r?void 0:r.id)?(l.tax=null,l.tax_id=null):l.tax&&(null===(s=l.tax)||void 0===s?void 0:s.id)===(null==r?void 0:r.id)&&(Object.assign(l.tax,r),l.tax_id=null==r?void 0:r.id)}(null===(i=a.subcategories)||void 0===i?void 0:i.length)>0&&(e.subcategories=t(e.subcategories,r))}return e}(o,r)})}))},Ot=function(t){var e,r=t.fee,n=t.isRemove,o=lp(null==x||null===(e=x.business)||void 0===e?void 0:e.categories);E(dp(dp({},x),{},{business:dp(dp({},x.business),{},{categories:function t(e,r){for(var o=0;o<(null==e?void 0:e.length);o++){for(var i,a=e[o],c=0;c<a.products.length;c++){var u,s,l=a.products[c];n&&(null===(u=l.fee)||void 0===u?void 0:u.id)===(null==r?void 0:r.id)?(l.fee=null,l.fee_id=null):l.fee&&(null===(s=l.fee)||void 0===s?void 0:s.id)===(null==r?void 0:r.id)&&(Object.assign(l.fee,r),l.fee_id=null==r?void 0:r.id)}(null===(i=a.subcategories)||void 0===i?void 0:i.length)>0&&(e.subcategories=t(e.subcategories,r))}return e}(o,r)})}))};return Object(o.useEffect)((function(){var t;if(!x.loading)if(x.loading||!v&&!s){if(null!=x&&null!==(t=x.business)&&void 0!==t&&t.categories){var e;m(null==x||null===(e=x.business)||void 0===e?void 0:e.categories[0])}}else dt(!0)}),[x]),Object(o.useEffect)((function(){null!==b&&dt(!!b)}),[b]),Object(o.useEffect)((function(){dt(!!b,1)}),[null==v?void 0:v.id]),Object(o.useEffect)((function(){F?bt():(E(dp(dp({},x),{},{loading:!1,business:{}})),L({}),at(dp(dp({},nt),{},{loading:!1})),m(null))}),[F]),Object(o.useEffect)((function(){var t;if(null!=x&&x.business)return(null===(t=Object.keys(null==x?void 0:x.business))||void 0===t?void 0:t.length)>0?(d.on("tax_changed",wt),d.on("fee_changed",Ot),d.on("tax_deleted",wt),d.on("fee_deleted",Ot),function(){d.off("tax_changed",wt),d.off("fee_changed",Ot),d.off("tax_deleted",Ot),d.off("fee_deleted",Ot)}):void 0}),[null==x?void 0:x.business]),Object(o.useEffect)((function(){var t=P.business;return function(){t&&t.cancel&&t.cancel()}}),[P.business]),Object(o.useEffect)((function(){var t=P.products;return function(){t&&t.cancel&&t.cancel()}}),[P.products]),Object(o.useEffect)((function(){vt(),mt(),gt()}),[]),i.a.createElement(i.a.Fragment,null,p&&i.a.createElement(p,up({},t,{errors:ut,categorySelected:v,searchValue:b,categoryState:it,businessState:x,productModal:I,errorQuantityProducts:ft,handleChangeCategory:function(t,e){var r,n,o;null===t&&null===e&&m(null),(null==t||null===(r=t.target)||void 0===r?void 0:r.closest)&&((null==t||null===(n=t.target)||void 0===n?void 0:n.closest(".business_enable_control"))||t.target.closest(".business_actions"))||(null==e?void 0:e.id)===(null==v?void 0:v.id)||(M(!1),null!=e&&null!==(o=e.subcategories)&&void 0!==o&&o.length&&(null!=e&&e.parent_category_id||(N.values=[]),N.values.includes(null==e?void 0:e.id)?N.values=N.values.filter((function(t){return t!==(null==e?void 0:e.id)})):N.values.push(null==e?void 0:e.id),D(dp(dp({},N),{},{values:N.values}))),null===(null==e?void 0:e.id)&&D(dp(dp({},N),{},{values:[]})),m(e))},handleChangeSearch:function(t){w(t)},getPageProducts:dt,getBusiness:bt,setCategorySelected:m,setBusinessState:E,handleUpdateBusinessState:function(t){M(!0);var e=dp({},null==x?void 0:x.business);Object.assign(e,t),v&&e.categories.forEach((function t(e){(null==e?void 0:e.id)===(null==v?void 0:v.id)&&m(e),Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})),E(dp(dp({},x),{},{business:e}))},updateProductModal:function(t){return A(dp(dp({},I),{},{product:t}))},openCategories:N.values,setOpenCategories:D,setBusinessSlug:U,handleUpdateCategoryState:function(t){at(t)},setFormTaxState:K,formTaxState:W,taxes:z,setTaxes:$,fees:J,setFees:V,businessTypes:et,setBusinessTypes:rt})))};function wp(t){return wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(t)}function Op(){return Op=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Op.apply(this,arguments)}function xp(t){return function(t){if(Array.isArray(t))return Ip(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Tp(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ep(){Ep=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==wp(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function jp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Sp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jp(Object(r),!0).forEach((function(e){Lp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Lp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _p(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Pp(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_p(i,n,o,a,c,"next",t)}function c(t){_p(i,n,o,a,c,"throw",t)}a(void 0)}))}}function kp(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Tp(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tp(t,e){if(t){if("string"==typeof t)return Ip(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ip(t,e):void 0}}function Ip(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}bp.propTypes={UIComponent:c.a.elementType,isSearchByName:c.a.bool,isSearchByDescription:c.a.bool,slug:c.a.string,isInitialRender:c.a.bool},bp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ap=function(t){var e=t.businessId,r=t.menuId,n=t.metafields,a=t.UIComponent,c=kp(er(),1)[0],u=kp(hr(),1)[0],s=kp(Object(o.useState)({metaFields:[],loading:!1,error:null}),2),l=s[0],f=s[1],p=kp(Object(o.useState)({loading:!1,result:{error:!1}}),2),h=p[0],d=p[1],y=function(){var t=Pp(Ep().mark((function t(){var n,o,i,a;return Ep().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Sp(Sp({},l),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u.token)}},t.next=5,fetch("".concat(c.root,"/business/").concat(e,"/menus/").concat(r,"/metafields"),n);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,a=i.result,f(Sp(Sp({},l),{},{loading:!1,metaFields:a})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),f(Sp(Sp({},l),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=Pp(Ep().mark((function t(n){var o,i;return Ep().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(Sp(Sp({},h),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u.token)}},t.next=5,fetch("".concat(c.root,"/business/").concat(e,"/menus/").concat(r,"/metafields/").concat(n),o);case 5:t.sent.ok&&(i=l.metaFields.filter((function(t){return t.id!==n})),f(Sp(Sp({},l),{},{metaFields:i})),d({loading:!1,result:{error:!1}})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),d({result:{error:!0,result:t.t0.message},loading:!1});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Pp(Ep().mark((function t(n){var o,i,a,s,p,y;return Ep().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(Sp(Sp({},h),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u.token)},body:JSON.stringify(n)},t.next=5,fetch("".concat(c.root,"/business/").concat(e,"/menus/").concat(r,"/metafields"),o);case 5:return i=t.sent,t.next=8,i.json();case 8:a=t.sent,s=a.error,p=a.result,s?d({loading:!1,result:{error:!0,result:p}}):([],y=[].concat(xp(l.metaFields),[p]),f(Sp(Sp({},l),{},{metaFields:y})),d({loading:!1,result:{error:!1}})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),d({result:{error:!0,result:t.t0.message},loading:!1});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){n?f(Sp(Sp({},l),{},{metaFields:n})):y()}),[n]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,Op({},t,{metaFieldsList:l,actionState:h,handleDeleteMetaField:v,handeAddMetaField:m})))};function Cp(){return Cp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cp.apply(this,arguments)}function Np(){Np=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Gp(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Dp(t){return function(t){if(Array.isArray(t))return $p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||zp(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gp(t){return Gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gp(t)}function Fp(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Up(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Fp(i,n,o,a,c,"next",t)}function c(t){Fp(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Bp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Rp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bp(Object(r),!0).forEach((function(e){Mp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yp(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||zp(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zp(t,e){if(t){if("string"==typeof t)return $p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$p(t,e):void 0}}function $p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Ap.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ap.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qp=function(t){var e=t.business,r=t.menu,n=t.UIComponent,a=t.handleUpdateBusinessState,c=t.isSelectedSharedMenus,u=t.sitesState,s=Yp(er(),1)[0],l=Yp(hr(),1)[0].token,f=Yp(Ir(),2)[1],p=Yp(br(),2)[1].showToast,h=Yp(Object(o.useState)({loading:!1,error:null,menu:r||{}}),2),d=h[0],y=h[1],v=Yp(Object(o.useState)({loading:!1,changes:{},error:null}),2),m=v[0],g=v[1],b=Yp(Object(o.useState)({}),2),w=b[0],O=b[1],x=Yp(Object(o.useState)([]),2),E=x[0],j=x[1],S=Yp(Object(o.useState)([]),2),L=S[0],_=S[1],P=Yp(Object(o.useState)([]),2),k=P[0],T=P[1],I=function(){var t=Up(Np().mark((function t(){var n,o,i,c,u,h;return Np().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in t.prev=0,p(vr.Info,f("LOADING","Loading")),g(Rp(Rp({},m),{},{loading:!0,result:{error:!1}})),n=Rp({},m.changes))("object"===Gp(n[o])&&null!==n[o]||Array.isArray(n[o]))&&(n[o]=JSON.stringify(n[o]));return i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},t.next=8,fetch("".concat(s.root,"/business/").concat(e.id,"/menus/").concat(null==r?void 0:r.id),i);case 8:return c=t.sent,t.next=11,c.json();case 11:u=t.sent,g(Rp(Rp({},m),{},{changes:u.error?m.changes:{},result:{error:u.error,result:u.result},loading:!1})),u.error||((h=Rp({},e)).menus.filter((function(t){t.id===u.result.id&&(Object.assign(t,u.result),void 0!==(null==n?void 0:n.products)&&(t.products=Dp(L)));return!0})),a&&a(h),p(vr.Success,f("MENU_SAVED","Products catalog saved"))),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),g(Rp(Rp({},m),{},{loading:!1,result:{error:!0,result:t.t0.message}}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var r=Up(Np().mark((function r(){var n,o,i,c,u,h,d,y,v,b;return Np().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,p(vr.Info,f("LOADING","Loading")),g(Rp(Rp({},m),{},{loading:!0,result:{error:!1}})),null!=(n=Rp({},null==m?void 0:m.changes))&&n.products&&(n.products=JSON.stringify(null==n?void 0:n.products)),null!=n&&n.schedule)n.schedule=JSON.stringify(null==n?void 0:n.schedule);else{for(o=[],i=0;i<7;i++)o.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});n.schedule=JSON.stringify(o)}return c={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},r.next=9,fetch("".concat(s.root,"/business/").concat(e.id,"/menus"),c);case 9:return u=r.sent,r.next=12,u.json();case 12:h=r.sent,g(Rp(Rp({},m),{},{changes:h.error?m.changes:{},result:{error:h.error,result:h.result},loading:!1})),h.error||(d=Rp({},e),y=Rp(Rp({},h.result),{},{enabled:!0}),v=[],e.categories.forEach((function t(e){v=[].concat(Dp(v),Dp(e.products)),Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})),b=[],b=null!=n&&n.all_products?Dp(v):v.filter((function(t){return y.products.includes(t.id)})),y=Rp(Rp({},y),{},{products:b}),d.menus.push(y),a&&a(d),p(vr.Success,f("MENU_ADDED","Products catalog added")),t.onClose()&&t.onClose()),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(0),g(Rp(Rp({},m),{},{loading:!1,result:{error:!0,result:r.t0.message}}));case 20:case"end":return r.stop()}}),r,null,[[0,17]])})));return function(){return r.apply(this,arguments)}}(),C=function(){var n=Up(Np().mark((function n(){var o,i,u,h,d,y,v;return Np().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,p(vr.Info,f("LOADING","Loading")),g(Rp(Rp({},m),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},i=c?"".concat(s.root,"/business/").concat(e.id,"/menus_shared/").concat(r.id):"".concat(s.root,"/business/").concat(e.id,"/menus/").concat(r.id),n.next=7,fetch(i,o);case 7:return u=n.sent,n.next=10,u.json();case 10:(h=n.sent).error?g(Rp(Rp({},m),{},{loading:!1,error:h.result})):(g(Rp(Rp({},m),{},{loading:!1,error:null})),d=null,c?(y=e.menus_shared.filter((function(t){return t.id!==r.id})),d=Rp(Rp({},e),{},{menus_shared:y})):(v=e.menus.filter((function(t){return t.id!==r.id})),d=Rp(Rp({},e),{},{menus:v})),a&&a(d),p(vr.Success,f("MENU_DELETED","Products catalog deleted")),t.onClose&&t.onClose()),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),g(Rp(Rp({},m),{},{loading:!1,error:n.t0}));case 17:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(){return n.apply(this,arguments)}}();Object(o.useEffect)((function(){g(Rp(Rp({},m),{},{changes:Rp(Rp({},m.changes),{},{products:E})}))}),[E]),Object(o.useEffect)((function(){g(Rp(Rp({},m),{},{changes:{}})),y(Rp(Rp({},d),{},{menu:r||{}})),O({delivery:null==r?void 0:r.delivery,pickup:null==r?void 0:r.pickup,eatin:null==r?void 0:r.eatin,curbside:null==r?void 0:r.curbside,driver_thru:null==r?void 0:r.driver_thru});var t,e=[];Object.keys(r).length?(e=null===(t=r.products)||void 0===t?void 0:t.reduce((function(t,e){return[].concat(Dp(t),[e.id])}),[]),j(e),_(r.products)):(j([]),_([]),O({delivery:!0,pickup:!0,eatin:!1,curbside:!1,driver_thru:!1}),g(Rp(Rp({},m),{},{changes:{delivery:!0,pickup:!0}})));N(e)}),[r]);var N=function(t){if(null!=e&&e.categories.length){var r=[];T(r),function e(n){return(null==n?void 0:n.length)>0&&(null==n?void 0:n.forEach((function(n){var o,i,a=[],c=null===(o=n.products)||void 0===o?void 0:o.reduce((function(t,e){return[].concat(Dp(t),[e.id])}),[]);a=[].concat(Dp(a),Dp(c)),null!=n&&null!==(i=n.subcategories)&&void 0!==i&&i.length&&n.subcategories.forEach((function t(e){var r,n=null===(r=e.products)||void 0===r?void 0:r.reduce((function(t,e){return[].concat(Dp(t),[e.id])}),[]);a=[].concat(Dp(a),Dp(n)),Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})),r.push({id:n.id,name:n.name,productIds:a,isChecked:0!==a.length&&a.every((function(e){return t.includes(e)}))}),e(n.subcategories)})))}(null==e?void 0:e.categories)}};return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,Cp({},t,{businessMenuState:d,formState:m,selectedProductsIds:E,setSelectedProductsIds:j,selectedProducts:L,setSelectedProducts:_,handleChangeInput:function(t){var e=Mp({},t.target.name,t.target.value);g(Rp(Rp({},m),{},{changes:Rp(Rp({},m.changes),e)}))},handleCheckOrderType:function(t){g(Rp(Rp({},m),{},{changes:Rp(Rp({},m.changes),{},Mp({},t,!w[t]))})),O(Rp(Rp({},w),{},Mp({},t,!w[t])))},handleUpdateBusinessMenuOption:I,handleAddBusinessMenuOption:A,handleChangeScheduleState:function(t){g(Rp(Rp({},m),{},{changes:Rp(Rp({},m.changes),{},{schedule:t})}))},handleDeleteMenu:C,handleChangeMenuSite:function(t){var e,n=[].concat(Dp(null==r||null===(e=r.sites)||void 0===e?void 0:e.map((function(t){return t.id})).filter((function(t){var e;return!m.changes.sites||(null===(e=m.changes.sites)||void 0===e?void 0:e.includes(t))}))),Dp(m.changes.sites||[])),o=n.includes(t);g(Rp(Rp({},m),{},{changes:Rp(Rp({},m.changes),{},{sites:o?n.filter((function(e){return e!==t})):[].concat(Dp(n),[t])})}))},handleSelectAllChannels:function(){g(Rp(Rp({},m),{},{changes:Rp(Rp({},m.changes),{},{sites:null==u?void 0:u.sites.map((function(t){return t.id}))})}))},handleSelectNoneChannels:function(){g(Rp(Rp({},m),{},{changes:Rp(Rp({},m.changes),{},{sites:[]})}))},subCategoriesList:k})))};function Jp(t){return Jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jp(t)}function Vp(){return Vp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vp.apply(this,arguments)}function Hp(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=nh(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Wp(t){return function(t){if(Array.isArray(t))return oh(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||nh(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kp(){Kp=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Jp(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Zp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Xp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zp(Object(r),!0).forEach((function(e){Qp(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Qp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function th(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function eh(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){th(i,n,o,a,c,"next",t)}function c(t){th(i,n,o,a,c,"throw",t)}a(void 0)}))}}function rh(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||nh(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nh(t,e){if(t){if("string"==typeof t)return oh(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oh(t,e):void 0}}function oh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}qp.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ih=function(t){var e=t.UIComponent,r=t.business,n=t.menu,a=t.businesses,c=t.busienssesPropsToFetch,u=t.handleUpdateBusinessState,s=rh(er(),1)[0],l=rh(hr(),1)[0].token,f=rh(Ir(),2)[1],p=rh(br(),2)[1].showToast,h=rh(Object(o.useState)({businesses:[],loading:!1,error:null}),2),d=h[0],y=h[1],v=rh(Object(o.useState)({loading:!1,result:{error:!1}}),2),m=v[0],g=v[1],b=rh(Object(o.useState)([]),2),w=b[0],O=b[1],x=function(){var t=eh(Kp().mark((function t(){var e,n,o,i,a,u;return Kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Xp(Xp({},d),{},{loading:!0})),e=s.setAccessToken(l).businesses().select(c).asDashboard(),t.next=5,e.get();case 5:n=t.sent,o=n.content,i=o.error,a=o.result,i||(u=a.filter((function(t){return t.id!==r.id})),y(Xp(Xp({},d),{},{businesses:u,loading:!1}))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),y(Xp(Xp({},d),{},{loading:!1,error:t.t0.message}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=eh(Kp().mark((function t(){var e,o,i,a,c,l,h,y;return Kp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,f("LOADING","Loading")),g(Xp(Xp({},m),{},{loading:!0})),e={business_id:r.id,shared:w},t.next=6,s.businesses(r.id).menus(n.id).save(e);case 6:if(!t.sent.error){o=[],i=Hp(w);try{for(c=function(){var t,e=a.value;o.push({id:e,name:null===(t=d.businesses.find((function(t){return t.id===e})))||void 0===t?void 0:t.name,pivot:{business_id:e,menu_id:n.id}})},i.s();!(a=i.n()).done;)c()}catch(t){i.e(t)}finally{i.f()}l=Xp(Xp({},n),{},{businesses:o}),h=r.menus.filter((function(t){return t.id===l.id&&Object.assign(t,l),!0})),y=Xp(Xp({},r),{},{menus:h}),u&&u(y),g({loading:!1,result:{error:!1}}),p(vr.Success,f("BUSINESS_SAVED","Business saved"))}t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),g({loading:!1,result:{error:!1}});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){a?y(Xp(Xp({},d),{},{businesses:a,loading:!1})):x()}),[a]),Object(o.useEffect)((function(){if(null!=n&&n.businesses){var t,e=null===(t=n.businesses)||void 0===t?void 0:t.reduce((function(t,e){return[].concat(Wp(t),[e.id])}),[]);O(e)}}),[n]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Vp({},t,{businessesState:d,actionState:m,selectedBusinessIds:w,handleSelectBusiness:function(t,e){if(e)O([].concat(Wp(w),[t]));else{var r=w.filter((function(e){return e!==t}));O(r)}},handleSelectAllBusiness:function(t){if(t){var e,r=null===(e=d.businesses)||void 0===e?void 0:e.reduce((function(t,e){return[].concat(Wp(t),[e.id])}),[]);O(r)}else O([])},handleShareBusinesses:E})))};function ah(t){return ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ah(t)}function ch(){return ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ch.apply(this,arguments)}function uh(t){return function(t){if(Array.isArray(t))return mh(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||vh(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sh(){sh=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ah(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function lh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lh(Object(r),!0).forEach((function(e){ph(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ph(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hh(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function dh(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){hh(i,n,o,a,c,"next",t)}function c(t){hh(i,n,o,a,c,"throw",t)}a(void 0)}))}}function yh(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||vh(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vh(t,e){if(t){if("string"==typeof t)return mh(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mh(t,e):void 0}}function mh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ih.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ih.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var gh=function(t){var e=t.businessId,r=t.metafields,n=t.UIComponent,a=t.handleSuccessAddMetaFields,c=t.handleSuccessDeleteBusinessMetaFields,u=yh(er(),1)[0],s=yh(hr(),1)[0],l=yh(Object(o.useState)({metaFields:[],loading:!1,error:null}),2),f=l[0],p=l[1],h=yh(Object(o.useState)({loading:!1,result:{error:!1}}),2),d=h[0],y=h[1],v=function(){var t=dh(sh().mark((function t(){var r,n,o,i;return sh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(fh(fh({},f),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},t.next=5,fetch("".concat(u.root,"/business/").concat(e,"/metafields"),r);case 5:return n=t.sent,t.next=8,n.json();case 8:o=t.sent,i=o.result,p(fh(fh({},f),{},{loading:!1,metaFields:i})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),p(fh(fh({},f),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=dh(sh().mark((function t(r){var n,o;return sh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(fh(fh({},d),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},t.next=5,fetch("".concat(u.root,"/business/").concat(e,"/metafields/").concat(r),n);case 5:t.sent.ok&&(o=f.metaFields.filter((function(t){return t.id!==r})),p(fh(fh({},f),{},{metaFields:o})),y({loading:!1,result:{error:!1}}),c&&c(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),y({result:{error:!0,result:t.t0.message},loading:!1});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=dh(sh().mark((function t(r){var n,o,i,c,l,h;return sh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(fh(fh({},d),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},body:JSON.stringify(r)},t.next=5,fetch("".concat(u.root,"/business/").concat(e,"/metafields"),n);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,c=i.error,l=i.result,c?y({loading:!1,result:{error:!0,result:l}}):([],h=[].concat(uh(f.metaFields),[l]),p(fh(fh({},f),{},{metaFields:h})),y({loading:!1,result:{error:!1}}),a&&a(l)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),y({result:{error:!0,result:t.t0.message},loading:!1});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){r?p(fh(fh({},f),{},{metaFields:r})):v()}),[r]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,ch({},t,{metaFieldsList:f,actionState:d,handleDeleteMetaField:m,handeAddMetaField:g})))};function bh(t){return bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bh(t)}function wh(){return wh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wh.apply(this,arguments)}function Oh(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Th(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function xh(t){return function(t){if(Array.isArray(t))return Ih(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Th(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eh(){Eh=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==bh(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function jh(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Sh(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){jh(i,n,o,a,c,"next",t)}function c(t){jh(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Lh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Lh(Object(r),!0).forEach((function(e){Ph(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ph(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kh(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Th(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Th(t,e){if(t){if("string"==typeof t)return Ih(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ih(t,e):void 0}}function Ih(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}gh.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ah=["paypal_express","authorize"],Ch=function(t){var e,r,n,a,c,u,s=t.business,l=t.UIComponent,f=t.defaultSandboxRequiredGateways,p=t.handleSuccessUpdate,h=kh(er(),1)[0],d=kh(hr(),1)[0].token,y=kh(jn(),1)[0],v=kh(br(),2)[1].showToast,m=kh(Ir(),2)[1],g=kh(Object(o.useState)({paymethods:[],loading:!0,error:null}),2),b=g[0],w=g[1],O=kh(Object(o.useState)({sites:[],loading:!0,error:null}),2),x=O[0],E=O[1],j=kh(Object(o.useState)({paymethods:[],loading:!0,error:null}),2),S=j[0],L=j[1],_=f||["paypal","stripe_direct","paypal_express","stripe_connect","stripe_redirect","carlos_payment","ivr"],P=kh(Object(o.useState)({loading:!1,result:{error:!1}}),2),k=P[0],T=P[1],I=kh(Object(o.useState)({}),2),A=I[0],C=I[1],N=kh(Object(o.useState)({}),2),D=N[0],G=N[1],F=kh(Object(o.useState)(!1),2),U=F[0],B=F[1],R="1"===(null==y||null===(e=y.configs)||void 0===e||null===(r=e.stripe_connect_sandbox)||void 0===r?void 0:r.value)?null==y||null===(n=y.configs)||void 0===n||null===(a=n.stripe_connect_client_id_sandbox)||void 0===a?void 0:a.value:null==y||null===(c=y.configs)||void 0===c||null===(u=c.stripe_connect_client_id)||void 0===u?void 0:u.value,M=function(){var t=Sh(Eh().mark((function t(){var e,r,n,o,i,a;return Eh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(h.root,"/business/").concat(s.id,"/paymethods?params=sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d),"x-app-x":null==h?void 0:h.appId}});case 3:return e=t.sent,t.next=6,e.json();case 6:return r=t.sent,n=r.result,t.prev=8,t.next=11,fetch("".concat(h.root,"/sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d),"x-app-x":null==h?void 0:h.appId}});case 11:return o=t.sent,t.next=14,o.json();case 14:i=t.sent,a=i.result,E(_h(_h({},x),{},{loading:!1,sites:a})),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(8),E(_h(_h({},x),{},{loading:!1,sites:t.t0.message}));case 22:w(_h(_h({},S),{},{loading:!1,paymethods:n})),t.next=28;break;case 25:t.prev=25,t.t1=t.catch(0),w(_h(_h({},S),{},{loading:!1,error:t.t1.message}));case 28:case"end":return t.stop()}}),t,null,[[0,25],[8,19]])})));return function(){return t.apply(this,arguments)}}(),Y=function(){var t=Sh(Eh().mark((function t(){var e,r,n;return Eh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(h.root,"/paymethods?where=[{%22attribute%22:%22enabled%22,%22value%22:true}]"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d),"x-app-x":null==h?void 0:h.appId}});case 3:return e=t.sent,t.next=6,e.json();case 6:r=t.sent,n=r.result,L(_h(_h({},S),{},{loading:!1,paymethods:(o=n,o&&o.filter((function(t){return!Ah.includes(null==t?void 0:t.gateway)})))})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),L(_h(_h({},S),{},{loading:!1,error:t.t0.message}));case 14:case"end":return t.stop()}var o}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),z=function(){var t=Sh(Eh().mark((function t(e){var r,n,o,i,a;return Eh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=S.paymethods.find((function(t){return t.id===e})),n={enabled:!0,paymethod_id:e,sandbox:_.includes(r.gateway)},t.prev=2,v(vr.Info,m("LOADING","Loading")),T(_h(_h({},k),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d),"x-app-x":null==h?void 0:h.appId},body:JSON.stringify(n)},t.next=8,fetch("".concat(h.root,"/business/").concat(s.id,"/paymethods"),o);case 8:return i=t.sent,t.next=11,i.json();case 11:(a=t.sent).error||(w((function(t){return _h(_h({},t),{},{paymethods:[].concat(xh(t.paymethods),[_h(_h({},a.result),{},{paymethod:r})])})})),T({loading:!1,result:{error:!1}}),v(vr.Success,m("PAYMETHOD_SAVED","Payment method saved"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),T({result:{error:!0,result:t.t0.message},loading:!1});case 18:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e){return t.apply(this,arguments)}}(),$=function(){var t=Sh(Eh().mark((function t(e,r){var n,o,i;return Eh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(vr.Info,m("LOADING","Loading")),T(_h(_h({},k),{},{loading:!0})),n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d),"x-app-x":null==h?void 0:h.appId},body:JSON.stringify(r)},t.next=6,fetch("".concat(h.root,"/business/").concat(s.id,"/paymethods/").concat(e),n);case 6:return o=t.sent,t.next=9,o.json();case 9:i=t.sent,C(i.error?A:{}),i.error||(T(_h(_h({},k),{},{loading:!1})),w((function(t){return _h(_h({},t),{},{paymethods:t.paymethods.filter((function(t){return t.id===e&&Object.assign(t,i.result),!0}))})})),v(vr.Success,m("PAYMETHOD_SAVED","Payment method saved"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),T({result:{error:!0,result:t.t0.message},loading:!1});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,r){return t.apply(this,arguments)}}(),q=function(){var t=Sh(Eh().mark((function t(){var e,r,n;return Eh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(vr.Info,m("LOADING","Loading")),T(_h(_h({},k),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d),"x-app-x":null==h?void 0:h.appId},body:JSON.stringify(A)},t.next=6,fetch("".concat(h.root,"/business/").concat(s.id),e);case 6:return r=t.sent,t.next=9,r.json();case 9:n=t.sent,C(n.error?A:{}),n.error||(T(_h(_h({},k),{},{loading:!1})),p&&p(n.result)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),T({result:{error:!0,result:t.t0.message},loading:!1});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),J=function(){var t=Sh(Eh().mark((function t(e){var r,n,o,i;return Eh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=b.paymethods.find((function(t){return t.paymethod_id===e})).id,t.prev=1,v(vr.Info,m("LOADING","Loading")),T(_h(_h({},k),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d),"x-app-x":null==h?void 0:h.appId}},t.next=7,fetch("".concat(h.root,"/business/").concat(s.id,"/paymethods/").concat(r),n);case 7:return o=t.sent,t.next=10,o.json();case 10:t.sent.error||(T(_h(_h({},k),{},{loading:!1})),i=b.paymethods.filter((function(t){return t.paymethod_id!==e})),w(_h(_h({},b),{},{paymethods:i})),v(vr.Success,m("PAYMETHOD_DELETED","Payment method deleted")),B(!0)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),T({result:{error:!0,result:t.t0.message},loading:!1});case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){Y(),M()}),[]),i.a.createElement(i.a.Fragment,null,l&&i.a.createElement(l,wh({},t,{businessPaymethodsState:b,paymethodsList:S,handleClickPayment:function(t){var e=b.paymethods.find((function(e){return e.paymethod_id===t}));e?$(e.id,{enabled:!e.enabled}):z(t)},actionState:k,sitesState:x,handleDeleteBusinessPaymethodOption:J,changesState:A,handleChangeBusinessPaymentState:function(t){C(_h(_h({},A),t))},stripeConnectData:D,handleChangeStripeConnectData:function(t){G(_h(_h({},D),t))},cleanChangesState:function(t){return C(_h({},t))},handleChangeSandbox:function(t){C(_h(_h({},A),{},{sandbox:null!=t?t:!(null!=A&&A.sandbox)}))},handleChangeInput:function(t,e){C(_h(_h({},A),{},e?{data_sandbox:_h(_h({},null==A?void 0:A.data_sandbox),{},Ph({},t.target.name,t.target.value))}:{data:_h(_h({},null==A?void 0:A.data),{},Ph({},t.target.name,t.target.value))}))},handleSaveClick:function(t){var e,r,n,o,i=_h({},A);null!==(e=i)&&void 0!==e&&e.data&&(i=_h(_h({},i),{},{data:JSON.stringify(i.data)})),null!==(r=i)&&void 0!==r&&r.data_sandbox&&(i=_h(_h({},i),{},{data_sandbox:JSON.stringify(i.data_sandbox)})),null!==(n=i)&&void 0!==n&&n.allowed_order_types&&(i=_h(_h({},i),{},{allowed_order_types:i.allowed_order_types.length>0?JSON.stringify(i.allowed_order_types):null})),null!==(o=i)&&void 0!==o&&o.sites&&(i=_h(_h({},i),{},{sites:JSON.stringify(i.sites)})),$(t,i)},handleStripeConnect:function(){var t=window.open("https://connect.stripe.com/oauth/authorize?response_type=code&client_id=".concat(R,"&scope=read_write&state=").concat(d),"_blank","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,clearcache=yes"),e=setInterval((function(){t.closed?clearInterval(e):t.postMessage("data",h.url)}),200),r=null;window.addEventListener("message",(function(n){-1!==n.origin.indexOf(".ordering.co")&&(clearInterval(e),r&&clearTimeout(r),r=setTimeout((function(){if(t.postMessage("close",h.url),!n.data.error&&n.data.result){var e=n.data.result,r={sandbox:e.livemode,data:{token:e.access_token,publishable:e.stripe_publishable_key,user:e.stripe_user_id,refresh_token:e.refresh_token}};G(r)}else n.data.error&&T(_h(_h({},k),{},{loading:!1,error:n.data.error}))}),1e3))}))},handleChangeStripeInput:function(t){C(_h(_h({},A),{},Ph({},t.target.name,t.target.value)))},handleStripeSave:function(t){var e,r,n=_h(_h({},D),{},{sandbox:null==D?void 0:D.sandbox,data:JSON.stringify(null==D?void 0:D.data),data_sandbox:JSON.stringify(null==D?void 0:D.data)});null!==(e=n)&&void 0!==e&&e.allowed_order_types&&(n=_h(_h({},n),{},{allowed_order_types:n.allowed_order_types.length>0?JSON.stringify(n.allowed_order_types):null})),null!==(r=n)&&void 0!==r&&r.sites&&(n=_h(_h({},n),{},{sites:JSON.stringify(n.sites)})),Object.keys(D).length&&$(t,n),q()},isSuccessDeleted:U,setIsSuccessDeleted:B,handleSelectAllPaymethods:function(){var t,e=Oh(S.paymethods);try{var r=function(){var e=t.value,r=b.paymethods.find((function(t){return t.paymethod_id===e.id}));r?null!=r&&r.enabled||$(r.id,{enabled:!0}):z(e.id)};for(e.s();!(t=e.n()).done;)r()}catch(t){e.e(t)}finally{e.f()}},handleSelectNonePaymethods:function(){var t,e=Oh(b.paymethods);try{for(e.s();!(t=e.n()).done;){var r=t.value;null!=r&&r.enabled&&$(r.id,{enabled:!1})}}catch(t){e.e(t)}finally{e.f()}},handleSuccessPaymethodUpdate:function(t){w(_h(_h({},b),{},{paymethods:t}))}})))};function Nh(t){return Nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nh(t)}function Dh(){return Dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dh.apply(this,arguments)}function Gh(){Gh=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Nh(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Fh(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Uh(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Fh(i,n,o,a,c,"next",t)}function c(t){Fh(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Bh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Rh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bh(Object(r),!0).forEach((function(e){Mh(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mh(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yh(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return zh(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zh(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Ch.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ch.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $h=function(t){var e=t.UIComponent,r=t.place,n=t.placeGroup,a=t.businessId,c=t.handleSuccessAddPlace,u=t.handleSuccessUpdatePlace,s=t.handleSuccessDeletePlace,l=t.handleUpdateSelectedPlace,f=Yh(Ir(),2)[1],p=Yh(er(),1)[0],h=Yh(hr(),1)[0].token,d=Yh(br(),2)[1].showToast,y=Yh(Object(o.useState)({loading:!1,changes:{},error:null}),2),v=y[0],m=y[1],g=function(){var e=Uh(Gh().mark((function e(){var r,o,i,u;return Gh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(vr.Info,f("LOADING","Loading")),m(Rh(Rh({},v),{},{loading:!0,error:null})),r=Rh(Rh({},null==v?void 0:v.changes),{},{place_group_id:null==n?void 0:n.id}),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(r)},e.next=7,fetch("".concat(p.root,"/business/").concat(a,"/places"),o);case 7:return i=e.sent,e.next=10,i.json();case 10:(u=e.sent).error?m(Rh(Rh({},v),{},{loading:!1,error:u.result})):(m(Rh(Rh({},v),{},{loading:!1,error:null})),c&&c(Rh(Rh({},u.result),{},{enabled:!0})),d(vr.Success,f("OPTION_ADDED","Option added")),t.onClose&&t.onClose()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),m(Rh(Rh({},v),{},{loading:!1,error:e.t0.message}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var t=Uh(Gh().mark((function t(){var e,n,o;return Gh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(vr.Info,f("LOADING","Loading")),m(Rh(Rh({},v),{},{loading:!0,error:null})),e={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(null==v?void 0:v.changes)},t.next=6,fetch("".concat(p.root,"/business/").concat(a,"/places/").concat(null==r?void 0:r.id),e);case 6:return n=t.sent,t.next=9,n.json();case 9:(o=t.sent).error?m(Rh(Rh({},v),{},{loading:!1,error:o.result})):(m(Rh(Rh({},v),{},{loading:!1,error:null,changes:{}})),l&&l(o.result),u&&u(o.result),d(vr.Success,f("OPTION_SAVED","Option saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(Rh(Rh({},v),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var e=Uh(Gh().mark((function e(){var n,o,i;return Gh().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(vr.Info,f("LOADING","Loading")),m(Rh(Rh({},v),{},{loading:!0,error:null})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},e.next=6,fetch("".concat(p.root,"/business/").concat(a,"/places/").concat(null==r?void 0:r.id),n);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?m(Rh(Rh({},v),{},{loading:!1,error:i.result})):(s&&s(null==r?void 0:r.id),d(vr.Success,f("OPTION_DELETED","Option deleted")),m(Rh(Rh({},v),{},{loading:!1,error:null})),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(Rh(Rh({},v),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){m(Rh(Rh({},v),{},{changes:{}}))}),[null==r?void 0:r.id]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Dh({},t,{formState:v,handleChangeInput:function(t){var e=Rh(Rh({},null==v?void 0:v.changes),{},Mh({},t.target.name,t.target.value));m(Rh(Rh({},v),{},{changes:e}))},handleAddPlace:g,handleUpdatePlace:b,handleDeletePlace:w})))};function qh(t){return qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qh(t)}function Jh(){return Jh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jh.apply(this,arguments)}function Vh(){Vh=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==qh(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Hh(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Wh(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Hh(i,n,o,a,c,"next",t)}function c(t){Hh(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Kh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Zh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kh(Object(r),!0).forEach((function(e){Xh(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xh(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qh(t){return function(t){if(Array.isArray(t))return rd(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ed(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function td(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||ed(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ed(t,e){if(t){if("string"==typeof t)return rd(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rd(t,e):void 0}}function rd(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}$h.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$h.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nd=function(t){var e=t.UIComponent,r=t.business,n=td(Ir(),2)[1],a=td(er(),1)[0],c=td(hr(),1)[0].token,u=td(br(),2)[1].showToast,s=td(Object(o.useState)({loading:!1,placeGroups:[],error:null}),2),l=s[0],f=s[1],p=td(Object(o.useState)({loading:!1,error:null}),2),h=p[0],d=p[1],y=function(){var t=Wh(Vh().mark((function t(e){var r,n;return Vh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=null==l||null===(r=l.placeGroups)||void 0===r?void 0:r.map((function(t){return(null==e?void 0:e.id)===(null==t?void 0:t.id)?Zh(Zh({},t),e):t})),f(Zh(Zh({},l),{},{placeGroups:n}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Wh(Vh().mark((function t(){var e,n,o;return Vh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Zh(Zh({},l),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=5,fetch("".concat(a.root,"/business/").concat(null==r?void 0:r.id,"/place_groups"),e);case 5:return n=t.sent,t.next=8,n.json();case 8:(o=t.sent).error?f(Zh(Zh({},l),{},{loading:!1,error:o.result})):f(Zh(Zh({},l),{},{loading:!1,placeGroups:o.result})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),f(Zh(Zh({},l),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Wh(Vh().mark((function t(e,o,i){var s,l,f;return Vh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(vr.Info,n("LOADING","Loading")),d(Zh(Zh({},h),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(o)},t.next=6,fetch("".concat(a.root,"/business/").concat(null==r?void 0:r.id,"/place_groups/").concat(e),s);case 6:return l=t.sent,t.next=9,l.json();case 9:(f=t.sent).error?d(Zh(Zh({},h),{},{loading:!1,error:f.result})):(d(Zh(Zh({},h),{},{loading:!1,error:null})),!i&&y(f.result),u(vr.Success,n("PLACE_UPDATED","Place updated"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),d(Zh(Zh({},h),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r,n){return t.apply(this,arguments)}}(),g=function(){var t=!0;return l.placeGroups.forEach((function(e){e.enabled||(t=!1)})),t},b=function(){var t=Wh(Vh().mark((function t(){var e,r,n,o;return Vh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],n=g(),l.placeGroups.forEach((function(t){r.push(new Promise((function(e,r){e(m(t.id,{enabled:!n},!0))})))})),t.next=5,Promise.all(r);case 5:o=null==l||null===(e=l.placeGroups)||void 0===e?void 0:e.map((function(t){return Zh(Zh({},t),{},{enabled:!n})})),f(Zh(Zh({},l),{},{placeGroups:o}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){r&&v()}),[r]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Jh({},t,{placeGroupList:l,handleSuccessAddPlaceGroup:function(t){var e=[].concat(Qh(l.placeGroups),[t]);f(Zh(Zh({},l),{},{placeGroups:e}))},handleSuccessUpdatePlaceGroup:y,handleSuccessDeletePlaceGroup:function(t){var e,r=null==l||null===(e=l.placeGroups)||void 0===e?void 0:e.filter((function(e){return e.id!==t}));f(Zh(Zh({},l),{},{placeGroups:r}))},handleChangeEnabled:m,handleMultiChangeEnabled:b,getMultiCheckStatus:g})))};function od(t){return od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(t)}function id(){return id=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},id.apply(this,arguments)}function ad(){ad=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==od(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function cd(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ud(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){cd(i,n,o,a,c,"next",t)}function c(t){cd(i,n,o,a,c,"throw",t)}a(void 0)}))}}function sd(t){return function(t){if(Array.isArray(t))return yd(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||dd(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ld(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ld(Object(r),!0).forEach((function(e){pd(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ld(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||dd(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dd(t,e){if(t){if("string"==typeof t)return yd(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yd(t,e):void 0}}function yd(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}nd.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var vd=function(t){var e=t.UIComponent,r=t.placeGroup,n=t.businessId,a=t.handleSuccessAddPlaceGroup,c=t.handleSuccessUpdatePlaceGroup,u=t.handleSuccessDeletePlaceGroup,s=t.handleUpdateSelectedPlaceGroup,l=hd(Ir(),2)[1],f=hd(er(),1)[0],p=hd(hr(),1)[0].token,h=hd(br(),2)[1].showToast,d=hd(Object(o.useState)({loading:!1,places:[],error:null}),2),y=d[0],v=d[1],m=hd(Object(o.useState)({loading:!1,changes:{},error:null}),2),g=m[0],b=m[1],w=hd(Object(o.useState)({loading:!1,error:null}),2),O=w[0],x=w[1],E=function(){var t=ud(ad().mark((function t(e){var r,n;return ad().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=null==y||null===(r=y.places)||void 0===r?void 0:r.map((function(t){return(null==e?void 0:e.id)===(null==t?void 0:t.id)?fd(fd({},t),e):t})),v(fd(fd({},y),{},{places:n}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=!0;return y.places.forEach((function(e){e.enabled||(t=!1)})),t},S=function(){var e=ud(ad().mark((function e(){var r,o,i;return ad().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(vr.Info,l("LOADING","Loading")),b(fd(fd({},g),{},{loading:!0,error:null})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(null==g?void 0:g.changes)},e.next=6,fetch("".concat(f.root,"/business/").concat(n,"/place_groups"),r);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?b(fd(fd({},g),{},{loading:!1,error:i.result})):(b(fd(fd({},g),{},{loading:!1,error:null})),a&&a(fd(fd({},i.result),{},{enabled:!0})),h(vr.Success,l("PLACE_ADDED","Place added")),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(fd(fd({},g),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var t=ud(ad().mark((function t(){var e,o,i;return ad().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(vr.Info,l("LOADING","Loading")),b(fd(fd({},g),{},{loading:!0,error:null})),e={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(null==g?void 0:g.changes)},t.next=6,fetch("".concat(f.root,"/business/").concat(n,"/place_groups/").concat(null==r?void 0:r.id),e);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?b(fd(fd({},g),{},{loading:!1,error:i.result})):(b(fd(fd({},g),{},{loading:!1,error:null,changes:{}})),s&&s(i.result),c&&c(i.result),h(vr.Success,l("PLACE_SAVED","Place saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(fd(fd({},g),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var e=ud(ad().mark((function e(){var o,i,a;return ad().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(vr.Info,l("LOADING","Loading")),b(fd(fd({},g),{},{loading:!0,error:null})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=6,fetch("".concat(f.root,"/business/").concat(n,"/place_groups/").concat(null==r?void 0:r.id),o);case 6:return i=e.sent,e.next=9,i.json();case 9:(a=e.sent).error?b(fd(fd({},g),{},{loading:!1,error:a.result})):(u&&u(null==r?void 0:r.id),h(vr.Success,l("PLACE_DELETED","Place deleted")),b(fd(fd({},g),{},{loading:!1,error:null})),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(fd(fd({},g),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var t=ud(ad().mark((function t(){var e,o,i,a;return ad().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(fd(fd({},y),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},t.next=5,fetch("".concat(f.root,"/business/").concat(n,"/places"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,a=null==i?void 0:i.result.filter((function(t){return t.place_group_id===(null==r?void 0:r.id)})),i.error?v(fd(fd({},y),{},{loading:!1,error:i.result})):v(fd(fd({},y),{},{loading:!1,places:a})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v(fd(fd({},y),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=ud(ad().mark((function t(e,r,o){var i,a,c;return ad().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(vr.Info,l("LOADING","Loading")),x(fd(fd({},O),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(r)},t.next=6,fetch("".concat(f.root,"/business/").concat(n,"/places/").concat(e),i);case 6:return a=t.sent,t.next=9,a.json();case 9:(c=t.sent).error?x(fd(fd({},O),{},{loading:!1,error:c.result})):(x(fd(fd({},O),{},{loading:!1,error:null})),!o&&E(c.result),h(vr.Success,l("OPTION_UPDATED","Option updated"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),x(fd(fd({},O),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r,n){return t.apply(this,arguments)}}(),T=function(){var t=ud(ad().mark((function t(){var e,r,n,o;return ad().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],n=j(),y.places.forEach((function(t){r.push(new Promise((function(e,r){e(k(t.id,{enabled:!n},!0))})))})),t.next=5,Promise.all(r);case 5:o=null==y||null===(e=y.places)||void 0===e?void 0:e.map((function(t){return fd(fd({},t),{},{enabled:!n})})),v(fd(fd({},y),{},{places:o}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){b(fd(fd({},g),{},{changes:{}})),r&&P()}),[null==r?void 0:r.id]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,id({},t,{formState:g,placeList:y,handleChangeInput:function(t){var e=fd(fd({},null==g?void 0:g.changes),{},pd({},t.target.name,t.target.value));b(fd(fd({},g),{},{changes:e}))},handleAddPlaceGroup:S,handleUpdatePlaceGroup:L,handleDeletePlaceGroup:_,handleSuccessAddPlace:function(t){var e=[].concat(sd(y.places),[t]);v(fd(fd({},y),{},{places:e}))},handleSuccessUpdatePlace:E,handleSuccessDeletePlace:function(t){var e,r=null==y||null===(e=y.places)||void 0===e?void 0:e.filter((function(e){return e.id!==t}));v(fd(fd({},y),{},{places:r}))},handleChangePlaceEnabled:k,getMultiPlaceCheckStatus:j,handleMultiPlaceChangeEnabled:T})))};function md(t){return md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(t)}function gd(){return gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gd.apply(this,arguments)}function bd(){bd=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==md(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function wd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Od(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wd(Object(r),!0).forEach((function(e){xd(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ed(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function jd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Sd(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sd(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sd(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}vd.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ld=function(t){var e=t.business,r=t.UIComponent,n=t.handleUpdateBusinessState,a=jd(er(),1)[0],c=jd(hr(),1)[0],u=jd(br(),2)[1].showToast,s=jd(Ir(),2)[1],l=jd(Object(o.useState)({loading:!1,changes:{},error:null}),2),f=l[0],p=l[1],h=function(){var t,r=(t=bd().mark((function t(){var r,o,i,l;return bd().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(Od(Od({},f),{},{loading:!0})),u(vr.Info,s("LOADING","Loading")),t.next=5,a.businesses(e.id).save(f.changes,{accessToken:c.token});case 5:r=t.sent,o=r.content,i=o.error,l=o.result,i?p(Od(Od({},f),{},{loading:!1,error:i})):(p(Od(Od({},f),{},{loading:!1,changes:{},error:null})),n(l),u(vr.Success,s("BUSINESS_UPDATED","Business updated"))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),p(Od(Od({},f),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ed(i,n,o,a,c,"next",t)}function c(t){Ed(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,gd({},t,{formState:f,handleChangeForm:function(t){p(Od(Od({},f),{},{changes:Od(Od({},f.changes),t)}))},handlePickupStateSave:h})))};function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_d.apply(this,arguments)}function Pd(t){return Pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pd(t)}function kd(){kd=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Pd(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Td(t){return function(t){if(Array.isArray(t))return Ud(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Fd(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Id(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ad(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Id(i,n,o,a,c,"next",t)}function c(t){Id(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Cd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Nd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Cd(Object(r),!0).forEach((function(e){Dd(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Dd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Fd(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fd(t,e){if(t){if("string"==typeof t)return Ud(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ud(t,e):void 0}}function Ud(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Ld.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ld.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Bd=function(t){var e=t.UIComponent,r=t.businessState,n=t.handleUpdateBusinessState,a=t.category,c=t.categoryId,u=t.onClose,s=t.categorySelected,l=t.setCategorySelected,f=Gd(hr(),1)[0].loading,p=Gd(er(),1)[0],h=Gd(Ir(),2)[1],d=Gd(br(),2)[1].showToast,y=Gd(Object(o.useState)({loading:!1,changes:{enabled:!0,enabledParent:!1},result:{error:!1}}),2),v=y[0],m=y[1],g=Gd(Object(o.useState)([]),2),b=g[0],w=g[1];Object(o.useEffect)((function(){m(Nd(Nd({},v),{},{changes:a||{}}))}),[a]);var O=function(){var t=Ad(kd().mark((function t(e){var n,o;return kd().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=Td(r.business.categories)).forEach((function t(r,n,o){var i,a;(null==r?void 0:r.id)===(null==e?void 0:e.result.parent_category_id)&&(Array.isArray(null==r?void 0:r.subcategories)&&(r.subcategories.find((function(t){var r;return(null==t?void 0:t.id)===(null==e||null===(r=e.result)||void 0===r?void 0:r.id)}))||r.subcategories.push(null==e?void 0:e.result)));var c=["name","enabled","header","description","ribbon","image","slug","seo_image","seo_title","seo_description"];(null==r?void 0:r.id)===(null==e||null===(i=e.result)||void 0===i?void 0:i.id)&&r.parent_category_id===(null==e?void 0:e.result.parent_category_id)&&Object.keys(r).forEach((function(t){c.includes(t)&&void 0!==e.result[t]&&(r[t]=null==e?void 0:e.result[t])})),(null==r?void 0:r.id)===(null==e||null===(a=e.result)||void 0===a?void 0:a.id)&&r.parent_category_id!==(null==e?void 0:e.result.parent_category_id)&&o.splice(n,1),Array.isArray(null==r?void 0:r.subcategories)&&r.subcategories.forEach(t)})),o=Nd(Nd({},r.business),{},{categories:n}),t.abrupt("return",o);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Ad(kd().mark((function t(){var e,o,i,u,s,y,g,b,w,x,j,S,L,_,P,k,T,I;return kd().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=47;break}if(e=(null==a?void 0:a.id)||c,!f){t.next=4;break}return t.abrupt("return");case 4:for(u in t.prev=4,d(vr.Info,h("LOADING","Loading")),m(Nd(Nd({},v),{},{loading:!0})),i=Nd({},v.changes))null===i[u]&&delete i[u];return t.next=11,p.businesses(null==r||null===(o=r.business)||void 0===o?void 0:o.id).categories(parseInt(e)).save(i);case 11:if(s=t.sent,(y=s.content).error){t.next=39;break}if(void 0===(null===(g=v.changes)||void 0===g||null===(b=g.ribbon)||void 0===b?void 0:b.enabled)||null!==(w=v.changes)&&void 0!==w&&null!==(x=w.ribbon)&&void 0!==x&&x.enabled||null==y||null===(j=y.result)||void 0===j||null===(S=j.ribbon)||void 0===S||!S.enabled){t.next=29;break}return _={ribbon:{enabled:!1}},t.next=18,p.businesses(null==r||null===(L=r.business)||void 0===L?void 0:L.id).categories(parseInt(e)).save(_);case 18:if(P=t.sent,k=P.content,m(Nd(Nd({},v),{},{changes:k.result,result:{error:!1,result:k.result},loading:!1})),l(k.result),!n){t.next=27;break}return t.next=25,O(k);case 25:T=t.sent,n(T);case 27:t.next=36;break;case 29:if(m(Nd(Nd({},v),{},{changes:y.result,result:{error:!1,result:y.result},loading:!1})),l(y.result),!n){t.next=36;break}return t.next=34,O(y);case 34:I=t.sent,n(I);case 36:d(vr.Success,h("CATEOGORY_UPDATED","Category updated")),t.next=40;break;case 39:m(Nd(Nd({},v),{},{changes:v.changes,result:y,loading:!1}));case 40:t.next=45;break;case 42:t.prev=42,t.t0=t.catch(4),m(Nd(Nd({},v),{},{result:{error:!0,result:[t.t0.message]},loading:!1}));case 45:t.next=48;break;case 47:E();case 48:case"end":return t.stop()}}),t,null,[[4,42]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Ad(kd().mark((function t(){var e,o,i,a,c,s,l,y,g,b;return kd().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,d(vr.Info,h("LOADING","Loading")),m(Nd(Nd({},v),{},{loading:!0})),void 0===(null==(a=Nd(Nd({},null==v?void 0:v.changes),{},{slug:Hc((null==v||null===(e=v.changes)||void 0===e?void 0:e.name)||"")}))?void 0:a.ribbon)||null!=a&&null!==(o=a.ribbon)&&void 0!==o&&o.enabled||delete a.ribbon,t.next=9,p.businesses(parseInt(null==r||null===(i=r.business)||void 0===i?void 0:i.id)).categories().save(a);case 9:c=t.sent,(s=c.content).error?m(Nd(Nd({},v),{},{changes:v.changes,result:s,loading:!1})):((y=Nd({},s.result)).parent_category_id=(null===(l=s.result)||void 0===l?void 0:l.parent_category_id)||null,m(Nd(Nd({},v),{},{category:{},result:{error:!1,result:y},loading:!1})),n&&(b=(null===(g=r.business)||void 0===g?void 0:g.categories)||[],null!=s&&s.result.parent_category_id?b.forEach((function t(e){(null==e?void 0:e.id)===(null==s?void 0:s.result.parent_category_id)&&e.subcategories.push(Nd(Nd({},y),{},{products:[],subcategories:[]})),Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})):b.push(Nd(Nd({},y),{},{products:[],subcategories:[]})),n(Nd(Nd({},r.business),{},{categories:b}))),d(vr.Success,h("CATEOGORY_CREATED","Category created")),u&&u()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),m(Nd(Nd({},v),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(){return t.apply(this,arguments)}}(),j=function(){var e=Ad(kd().mark((function e(){var o,i,c,u,y,g;return kd().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(vr.Info,h("LOADING","Loading")),m(Nd(Nd({},v),{},{loading:!0})),e.next=7,p.businesses(parseInt(null===(o=r.business)||void 0===o?void 0:o.id)).categories(parseInt(null==a?void 0:a.id)).delete();case 7:i=e.sent,c=i.content,u=c.error,y=c.result,u?m(Nd(Nd({},v),{},{loading:!1,result:{error:!0,result:y}})):(m(Nd(Nd({},v),{},{loading:!1,result:{error:!1,result:y}})),n&&((g=Td(r.business.categories)).forEach((function t(e,r,n){(null==e?void 0:e.id)===(null==a?void 0:a.id)&&n.splice(r,1),Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})),n(Nd(Nd({},r.business),{},{categories:g})),(null==a?void 0:a.id)===(null==s?void 0:s.id)&&l(g[0])),d(vr.Success,h("CATEOGORY_DELETED","Category deleted")),t.onClose&&t.onClose(null==a?void 0:a.id)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),m(Nd(Nd({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){if(!r.loading&&s){var t=function t(e,r){var n,o={id:null==e?void 0:e.id,name:e.name};if(e&&"object"===Pd(e))return(null==e?void 0:e.id)===r?[]:(((null==e?void 0:e.subcategories)||[]).some((function(e){return n=t(e,r)})),n&&[o].concat(Td(n)))};r.business.categories.forEach((function(e){var r=t(e,null==s?void 0:s.id);r&&w(r)}))}}),[null==r?void 0:r.loading,s]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,_d({},t,{isAddMode:!a,formState:v,setFormState:m,parentCategories:b,handlechangeImage:function(t,e){var r=new window.FileReader;r.readAsDataURL(t),r.onload=function(){m(Nd(Nd({},v),{},{changes:Nd(Nd({},v.changes),{},Dd({},e,r.result))}))},r.onerror=function(t){return console.log(t)}},handleChangeInput:function(t){var e=Dd({},t.target.name,t.target.value);m(Nd(Nd({},v),{},{changes:Nd(Nd({},v.changes),e)}))},handleChangeCheckBox:function(t){var e=null;void 0!==t.enabled&&(e={enabled:t.enabled}),e=t.enabledParent?Nd(Nd({},e),{},{parent_category_id:null==s?void 0:s.id}):Nd(Nd({},e),{},{parent_category_id:null}),m(Nd(Nd({},v),{},{changes:Nd(Nd({},v.changes),e)}))},handleChangeItem:function(t){m(Nd(Nd({},v),{},{changes:Nd(Nd({},v.changes),t)}))},handleUpdateClick:x,handleDeleteCategory:j,handleChangeRibbon:function(t){var e,r,n=null!=v&&null!==(e=v.changes)&&void 0!==e&&e.ribbon?Nd(Nd({},null==v||null===(r=v.changes)||void 0===r?void 0:r.ribbon),t):Nd({},t),o=Nd(Nd({},null==v?void 0:v.changes),{},{ribbon:n});m(Nd(Nd({},v),{},{changes:o}))}})))};function Rd(){return Rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rd.apply(this,arguments)}Bd.propTypes={UIComponent:c.a.elementType,businessState:c.a.object,handleUpdateBusinessState:c.a.func,setIsAddProduct:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Bd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Md=function(t){var e=t.categories,r=t.onClickCategory,n=t.UIComponent;return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,Rd({},t,{categories:e,handlerClickCategory:r})))};function Yd(){return Yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yd.apply(this,arguments)}Md.propTypes={UIComponent:c.a.elementType,categories:c.a.arrayOf(c.a.object),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Md.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var zd=function(t){var e=t.onChangeSearch,r=t.UIComponent;return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,Yd({},t,{handleChangeSearch:e})))};function $d(t){return $d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$d(t)}function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qd.apply(this,arguments)}function Jd(t){return function(t){if(Array.isArray(t))return ey(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ty(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vd(){Vd=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==$d(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Hd(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Wd(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Hd(i,n,o,a,c,"next",t)}function c(t){Hd(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Kd(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Zd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kd(Object(r),!0).forEach((function(e){Xd(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||ty(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ty(t,e){if(t){if("string"==typeof t)return ey(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ey(t,e):void 0}}function ey(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}zd.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},zd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ry=function(t){var e,r=t.promotion,n=t.UIComponent,a=t.business,c=t.handleCloseAddForm,u=t.handleSuccessUpdate,s=Qd(Ir(),2)[1],l=Qd(er(),1)[0],f=Qd(hr(),1)[0].token,p=Qd(br(),2)[1].showToast,h=Qd(jn(),1)[0].configs,d=null==h||null===(e=h.advanced_offers_module)||void 0===e?void 0:e.value,y=Qd(Object(o.useState)({promotion:r,loading:!1,error:null}),2),v=y[0],m=y[1],g=Qd(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),b=g[0],w=g[1],O=Qd(Object(o.useState)(!1),2),x=O[0],E=O[1],j=function(){var t=Wd(Vd().mark((function t(){var e,n,o,i;return Vd().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,s("LOADING","Loading")),w(Zd(Zd({},b),{},{result:{},loading:!0})),e={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(null==b?void 0:b.changes)},t.next=6,fetch("".concat(l.root,"/business/").concat(a.id,"/offers/").concat(r.id),e);case 6:return n=t.sent,t.next=9,n.json();case 9:(o=t.sent).error?w(Zd(Zd({},b),{},{result:{error:!0,result:o.result},loading:!1})):(m(Zd(Zd({},v),{},{promotion:o.result})),w(Zd(Zd({},b),{},{loading:!1,changes:{}})),p(vr.Success,s("PROMOTION_SAVED","Promotion saved")),u&&(i=a.offers.filter((function(t){return t.id===r.id&&Object.assign(t,o.result),!0})),u(Zd(Zd({},a),{},{offers:i})))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w(Zd(Zd({},b),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=Wd(Vd().mark((function t(){var e,r,n;return Vd().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,s("LOADING","Loading")),w(Zd(Zd({},b),{},{result:{},loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(null==b?void 0:b.changes)},t.next=6,fetch("".concat(l.root,"/business/").concat(a.id,"/offers"),e);case 6:return r=t.sent,t.next=9,r.json();case 9:(n=t.sent).error?w(Zd(Zd({},b),{},{result:{error:!0,result:n.result},loading:!1})):(p(vr.Success,s("PROMOTION_ADDED","Promotion added")),c&&c(),u&&u(Zd(Zd({},a),{},{offers:[].concat(Jd(a.offers),[n.result])}))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w(Zd(Zd({},b),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){0===Object.keys(r).length?(E(!0),w(Zd(Zd({},b),{},d?{changes:{type:2,rate_type:2,rate:0,auto:!1,public:!0,condition_type:1,target:1,stackable:!1}}:{changes:{type:2,rate_type:2,rate:0}}))):(w(Zd(Zd({},b),{},{changes:{}})),E(!1)),m(Zd(Zd({},v),{},{promotion:r}))}),[r]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,qd({},t,{promotionState:v,formState:b,isAddMode:x,handleChangeImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){w(Zd(Zd({},b),{},{changes:Zd(Zd({},b.changes),{},{image:e.result})}))},e.onerror=function(t){return console.log(t)}},handleChangeInput:function(t){var e,r,n;"coupon"!==t.target.name||2!==(null==b||null===(e=b.changes)||void 0===e?void 0:e.type)&&(null!=b&&null!==(r=b.changes)&&void 0!==r&&r.type||2!==(null==v||null===(n=v.promotion)||void 0===n?void 0:n.type))?w(Zd(Zd({},b),{},{changes:Zd(Zd({},b.changes),{},Xd({},t.target.name,t.target.value))})):w(Zd(Zd({},b),{},{changes:Zd(Zd({},b.changes),{},{coupon:t.target.value.replace(/\s/g,"")})}))},handleChangeItem:function(t){w(Zd(Zd({},b),{},{changes:Zd(Zd({},b.changes),t)}))},handleUpdateClick:j,handleAddClick:S})))};function ny(t){return ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ny(t)}function oy(){return oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oy.apply(this,arguments)}function iy(){iy=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ny(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ay(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function cy(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ay(Object(r),!0).forEach((function(e){uy(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ay(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function uy(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sy(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ly(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){sy(i,n,o,a,c,"next",t)}function c(t){sy(i,n,o,a,c,"throw",t)}a(void 0)}))}}function fy(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return py(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return py(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function py(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ry.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ry.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var hy=function(t){var e=t.business,r=t.businessId,n=t.promotions,a=t.UIComponent,c=t.handleSuccessUpdate,u=fy(Ir(),2)[1],s=fy(er(),1)[0],l=fy(hr(),1)[0].token,f=fy(br(),2)[1].showToast,p=fy(Object(o.useState)({promotions:[],loading:!1,error:null}),2),h=p[0],d=p[1],y=fy(Object(o.useState)({loading:!1,error:null}),2),v=y[0],m=y[1],g=fy(Object(o.useState)(!1),2),b=g[0],w=g[1],O=function(){var t=ly(iy().mark((function t(){var e,n,o;return iy().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(cy(cy({},h),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},t.next=5,fetch("".concat(s.root,"/business/").concat(r,"/offers"),e);case 5:return n=t.sent,t.next=8,n.json();case 8:(o=t.sent).error||d({promotions:o.result,loading:!1,error:null}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),d(cy(cy({},h),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=ly(iy().mark((function t(n,o){var i,a,p,y;return iy().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,u("LOADING","Loading")),m(cy(cy({},v),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:n})},t.next=6,fetch("".concat(s.root,"/business/").concat(r,"/offers/").concat(o),i);case 6:return a=t.sent,t.next=9,a.json();case 9:(p=t.sent).error||(y=h.promotions.filter((function(t){return t.id===o&&Object.assign(t,p.result),!0})),d(cy(cy({},h),{},{promotions:y})),f(vr.Success,u("PROMOTION_SAVED","Promotion saved")),c&&c(cy(cy({},e),{},{offers:y}))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),E=function(){var t=ly(iy().mark((function t(n){var o,i,a;return iy().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,u("LOADING","Loading")),m(cy(cy({},v),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},t.next=6,fetch("".concat(s.root,"/business/").concat(r,"/offers/").concat(n),o);case 6:return i=t.sent,t.next=9,i.json();case 9:t.sent.error||(a=h.promotions.filter((function(t){return t.id!==n})),d(cy(cy({},h),{},{promotions:a})),c&&c(cy(cy({},e),{},{offers:a})),f(vr.Success,u("PROMOTION_DELETED","Promotion deleted")),w(!0)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){n?d(cy(cy({},h),{},{loading:!1,promotions:n})):O()}),[n]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,oy({},t,{promotionListState:h,handleChangePromotionActiveState:x,handleDeletePromotion:E,isSuccessDeleted:b,setIsSuccessDeleted:w})))};function dy(t){return dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dy(t)}function yy(){return yy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yy.apply(this,arguments)}function vy(t){return function(t){if(Array.isArray(t))return Sy(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||jy(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function my(){my=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==dy(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function gy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function by(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gy(Object(r),!0).forEach((function(e){wy(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wy(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oy(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function xy(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Oy(i,n,o,a,c,"next",t)}function c(t){Oy(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ey(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||jy(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jy(t,e){if(t){if("string"==typeof t)return Sy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sy(t,e):void 0}}function Sy(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}hy.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hy.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ly=function(t){var e=t.businessId,r=t.offerId,n=t.metafields,a=t.UIComponent,c=t.handleSuccessAddPromotionMetaFields,u=t.handleSuccessDeletePromotionMetaFields,s=Ey(er(),1)[0],l=Ey(hr(),1)[0],f=Ey(Object(o.useState)({metaFields:[],loading:!1,error:null}),2),p=f[0],h=f[1],d=Ey(Object(o.useState)({loading:!1,result:{error:!1}}),2),y=d[0],v=d[1],m=function(){var t=xy(my().mark((function t(){var n,o,i,a;return my().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(by(by({},p),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},t.next=5,fetch("".concat(s.root,"/business/").concat(e,"/offers/").concat(r,"/metafields"),n);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,a=i.result,h(by(by({},p),{},{loading:!1,metaFields:a})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),h(by(by({},p),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=xy(my().mark((function t(n){var o,i;return my().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(by(by({},y),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},t.next=5,fetch("".concat(s.root,"/business/").concat(e,"/offers/").concat(r,"/metafields/").concat(n),o);case 5:t.sent.ok&&(i=p.metaFields.filter((function(t){return t.id!==n})),h(by(by({},p),{},{metaFields:i})),v({loading:!1,result:{error:!1}}),u&&u(n)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),v({result:{error:!0,result:t.t0.message},loading:!1});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=xy(my().mark((function t(n){var o,i,a,u,f,d;return my().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(by(by({},y),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)},body:JSON.stringify(n)},t.next=5,fetch("".concat(s.root,"/business/").concat(e,"/offers/").concat(r,"/metafields"),o);case 5:return i=t.sent,t.next=8,i.json();case 8:a=t.sent,u=a.error,f=a.result,u?v({loading:!1,result:{error:!0,result:f}}):([],d=[].concat(vy(p.metaFields),[f]),h(by(by({},p),{},{metaFields:d})),v({loading:!1,result:{error:!1}}),c&&c(f)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),v({result:{error:!0,result:t.t0.message},loading:!1});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){n?h(by(by({},p),{},{metaFields:n})):m()}),[n]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,yy({},t,{metaFieldsList:p,actionState:y,handleDeleteMetaField:g,handeAddMetaField:b})))};function _y(t){return _y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_y(t)}function Py(){return Py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Py.apply(this,arguments)}function ky(){ky=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==_y(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Ty(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Iy(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ty(i,n,o,a,c,"next",t)}function c(t){Ty(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ay(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Cy(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ay(Object(r),!0).forEach((function(e){Ny(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ay(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ny(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dy(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Gy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gy(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gy(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Ly.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ly.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Fy=function(t){var e=t.businessId,r=t.reviews,n=t.UIComponent,a=Dy(er(),1)[0],c=Dy(hr(),1)[0].token,u=Dy(br(),2)[1].showToast,s=Dy(Ir(),2)[1],l={},f=Dy(Object(o.useState)({reviews:[],loading:!0,error:null}),2),p=f[0],h=f[1],d=Dy(Object(o.useState)(r),2),y=d[0],v=d[1],m=Dy(Object(o.useState)({loading:!1,error:null}),2),g=m[0],b=m[1],w=function(){var t=Iy(ky().mark((function t(){var r,n,o,i,c;return ky().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={},l.reviews=n,t.next=5,a.businesses(e).select(["reviews"]).get({cancelToken:n});case 5:o=t.sent,i=o.content.result,(c=null==i||null===(r=i.reviews)||void 0===r?void 0:r.reviews).sort((function(t,e){return new Date(e.created_at)-new Date(t.created_at)})),v(c),h(Cy(Cy({},p),{},{loading:!1,reviews:c})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),"Cancel"!==t.t0.constructor.name&&h(Cy(Cy({},p),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Iy(ky().mark((function t(r,n){var o,i,l,f;return ky().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(vr.Info,s("LOADING","Loading")),b(Cy(Cy({},g),{},{loading:!0})),o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({enabled:n})},t.next=6,fetch("".concat(a.root,"/business/").concat(e,"/reviews/").concat(r),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(l=t.sent).error||(f=p.reviews.filter((function(t){return t.id===r&&Object.assign(t,l.result),!0})),h(Cy(Cy({},p),{},{reviews:f})),u(vr.Success,s("REVIEW_UPDATED","Review updated"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){return r?(r.length&&r.sort((function(t,e){return new Date(e.created_at)-new Date(t.created_at)})),h(Cy(Cy({},p),{},{loading:!1,reviews:r}))):w(),function(){l.reviews&&l.reviews.cancel()}}),[e]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,Py({},t,{reviewsList:p,actionState:g,handleClickOption:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e="all"!==t?y.filter((function(e){return e.total>=t&&e.total<t+1})):y;h(Cy(Cy({},p),{},{loading:!1,reviews:e}))},handleChangeReviewEnabled:O})))};function Uy(t){return Uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uy(t)}function By(){return By=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},By.apply(this,arguments)}function Ry(){Ry=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Uy(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function My(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yy(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?My(Object(r),!0).forEach((function(e){zy(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):My(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function zy(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function qy(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){$y(i,n,o,a,c,"next",t)}function c(t){$y(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Jy(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Vy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vy(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vy(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Fy.propTypes={UIComponent:c.a.elementType,reviews:c.a.arrayOf(c.a.object),businessId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Fy.defaultProps={reviews:[],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Hy=function(t){var e=t.UIComponent,r=t.propsToFetch,n=Jy(er(),1)[0],a=Jy(hr(),1)[0].token,c=Jy(br(),2)[1].showToast,u=Jy(Ir(),2)[1],s=Jy(Object(o.useState)({reviews:[],loading:!1,error:null}),2),l=s[0],f=s[1],p=Jy(Object(o.useState)({loading:!1,error:null}),2),h=p[0],d=p[1],y=function(){var t=qy(Ry().mark((function t(){var e,o,i,c,u,s,p,h;return Ry().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Yy(Yy({},l),{},{loading:!0})),t.next=4,n.setAccessToken(a).businesses().select(r).asDashboard().get();case 4:if(e=t.sent,o=e.content,i=o.error,c=o.result,!i){for(u=[],s=0;s<c.length;s++)for(p=0;p<c[s].reviews.reviews.length;p++)c[s].reviews.reviews[p].business_id=c[s].id,c[s].reviews.reviews[p].business_name=c[s].name,c[s].reviews.reviews[p].business_logo=c[s].logo,c[s].reviews.reviews[p].city_name=null===(h=c[s].city)||void 0===h?void 0:h.name,u.push(c[s].reviews.reviews[p]);u.length>0&&u.sort((function(t,e){return e.id-t.id})),f(Yy(Yy({},l),{},{loading:!1,reviews:u}))}t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),f(Yy(Yy({},l),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=qy(Ry().mark((function t(e,r,o){var i,s,p,y;return Ry().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),d(Yy(Yy({},h),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(o)},t.next=6,fetch("".concat(n.root,"/business/").concat(e,"/reviews/").concat(r),i);case 6:return s=t.sent,t.next=9,s.json();case 9:(p=t.sent).error||(y=l.reviews.filter((function(t){return t.id===r&&Object.assign(t,p.result),!0})),f(Yy(Yy({},l),{},{reviews:y})),c(vr.Success,u("REVIEW_UPDATED","Review updated"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),d({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r,n){return t.apply(this,arguments)}}(),m=function(){var t=qy(Ry().mark((function t(e,r){var o,i,s;return Ry().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),d(Yy(Yy({},h),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=6,fetch("".concat(n.root,"/business/").concat(e,"/reviews/").concat(r),o);case 6:return i=t.sent,t.next=9,i.json();case 9:t.sent.error||(s=l.reviews.filter((function(t){return t.id!==r})),f(Yy(Yy({},l),{},{reviews:s})),c(vr.Success,u("REVIEW_REMOVED","Review removed"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),d({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){y()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,By({},t,{reviewsListState:l,actionState:h,handleUpdateReview:v,handleDeleteReview:m})))};function Wy(t){return Wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wy(t)}function Ky(){return Ky=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ky.apply(this,arguments)}function Zy(){Zy=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Wy(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Xy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Qy(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xy(Object(r),!0).forEach((function(e){tv(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function tv(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ev(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function rv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return nv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nv(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nv(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Hy.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Hy.defaultProps={propsToFetch:["reviews","name","logo","city"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ov=function(t){var e=t.business,r=t.UIComponent,n=t.handleSuccessUpdate,a=rv(er(),1)[0],c=rv(hr(),1)[0],u=rv(br(),2)[1].showToast,s=rv(Ir(),2)[1],l=rv(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),f=l[0],p=l[1],h=function(){var t,r=(t=Zy().mark((function t(){var r,o,i,l,h;return Zy().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(vr.Info,s("LOADING","Loading")),p(Qy(Qy({},f),{},{loading:!0})),null!=(r=Qy({},f.changes))&&r.schedule&&(r.schedule=JSON.stringify(null==r?void 0:r.schedule)),t.next=7,a.businesses(e.id).save(r,{accessToken:c.token});case 7:o=t.sent,i=o.content,l=i.error,h=i.result,l?p({changes:f.changes,result:{error:!1,result:h},loading:!1}):(p({loading:!1,changes:{},result:{error:!1}}),n&&n(h),u(vr.Success,s("SCHEDULE_UPDATED","Schedule updated"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),p(Qy(Qy({},f),{},{result:{error:!0,result:[t.t0.message]},loading:!1}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ev(i,n,o,a,c,"next",t)}function c(t){ev(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,Ky({},t,{formState:f,handleChangeScheduleState:function(t){p(Qy(Qy({},f),{},{changes:{schedule:t}}))},handleUpdateSchedule:h})))};function iv(t){return iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iv(t)}function av(){return av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},av.apply(this,arguments)}function cv(){cv=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==iv(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function uv(t){return function(t){if(Array.isArray(t))return vv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||yv(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lv(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sv(Object(r),!0).forEach((function(e){fv(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fv(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pv(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function hv(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){pv(i,n,o,a,c,"next",t)}function c(t){pv(i,n,o,a,c,"throw",t)}a(void 0)}))}}function dv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||yv(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yv(t,e){if(t){if("string"==typeof t)return vv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vv(t,e):void 0}}function vv(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ov.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ov.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mv=function(t){var e=t.menu,r=t.product,n=t.UIComponent,a=t.business,c=t.handleUpdateBusinessState,u=dv(er(),1)[0],s=dv(hr(),1)[0].token,l=dv(Ir(),2)[1],f=dv(br(),2)[1].showToast,p=dv(Object(o.useState)({loading:!1,error:null,product:r||{}}),2),h=p[0],d=p[1],y=dv(Object(o.useState)({loading:!1,changes:{},error:null}),2),v=y[0],m=y[1],g=dv(Object(o.useState)(null),2),b=g[0],w=g[1],O=function(){var t=hv(cv().mark((function t(n){var o,i,p,y,g;return cv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,l("LOADING","Loading")),m((function(t){return lv(lv({},t),{},{loading:!1})})),o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(n)},t.next=6,fetch("".concat(u.root,"/business/").concat(a.id,"/menus_shared/").concat(e.id,"/products/").concat(r.id),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(p=t.sent).error?m(lv(lv({},v),{},{loading:!1,error:p.resulut})):(d(lv(lv({},h),{},{product:lv(lv({},h.product),n)})),y=a.menus_shared.filter((function(t){var e=t.products.map((function(t){return t.id===r.id?Object.assign(t,n):t}));return t.products=uv(e),!0})),g=lv(lv({},a),{},{menus_shared:y}),c&&c(g),f(vr.Success,l("PRODUCT_SAVED","Product saved")),m({loading:!1,changes:{},error:null})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(lv(lv({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=hv(cv().mark((function t(n,o){var i,p,y,g,b,w,O;return cv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,l("LOADING","Loading")),m(lv(lv({},v),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({enabled:o})},t.next=6,fetch("".concat(u.root,"/business/").concat(a.id,"/menus_shared/").concat(e.id,"/extras/").concat(n),i);case 6:return p=t.sent,t.next=9,p.json();case 9:(y=t.sent).error?m(lv(lv({},v),{},{loading:!1,error:y.resulut})):(g=h.product.extras.filter((function(t){return t.id===n&&(t.enabled=o),!0})),b=lv(lv({},h.product),{},{extras:g}),d(lv(lv({},h),{},{product:lv(lv({},h.product),b)})),w=a.menus_shared.filter((function(t){var e=t.products.map((function(t){return t.id===r.id?Object.assign(t,b):t}));return t.products=uv(e),!0})),O=lv(lv({},a),{},{menus_shared:w}),c&&c(O),f(vr.Success,l("PRODUCT_SAVED","Product saved")),m({loading:!1,changes:{},error:null})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(lv(lv({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),E=function(){var t=hv(cv().mark((function t(n,o){var i,p,y,g,b,w,O;return cv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,l("LOADING","Loading")),m(lv(lv({},v),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({enabled:o})},t.next=6,fetch("".concat(u.root,"/business/").concat(a.id,"/menus_shared/").concat(e.id,"/options/").concat(n),i);case 6:return p=t.sent,t.next=9,p.json();case 9:(y=t.sent).error?m(lv(lv({},v),{},{loading:!1,error:y.resulut})):(g=h.product.extras.filter((function(t){var e=t.options.map((function(t){return t.id===n?lv(lv({},t),{},{enabled:o}):t}));return t.options=uv(e),!0})),b=lv(lv({},h.product),{},{extras:g}),d(lv(lv({},h),{},{product:lv(lv({},h.product),b)})),w=a.menus_shared.filter((function(t){var e=t.products.map((function(t){return t.id===r.id?Object.assign(t,b):t}));return t.products=uv(e),!0})),O=lv(lv({},a),{},{menus_shared:w}),c&&c(O),f(vr.Success,l("PRODUCT_SAVED","Product saved")),m({loading:!1,changes:{},error:null})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(lv(lv({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),j=function(){var t=hv(cv().mark((function t(n,o){var i,p,y,g,b,w,O;return cv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,l("LOADING","Loading")),m((function(t){return lv(lv({},t),{},{loading:!1})})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({enabled:o})},t.next=6,fetch("".concat(u.root,"/business/").concat(a.id,"/menus_shared/").concat(e.id,"/suboptions/").concat(n),i);case 6:return p=t.sent,t.next=9,p.json();case 9:(y=t.sent).error?m(lv(lv({},v),{},{loading:!1,error:y.resulut})):(g=h.product.extras.filter((function(t){var e=t.options.filter((function(t){var e=t.suboptions.map((function(t){return t.id===n?lv(lv({},t),{},{enabled:o}):t}));return t.suboptions=uv(e),!0}));return t.options=uv(e),!0})),b=lv(lv({},h.product),{},{extras:g}),d(lv(lv({},h),{},{product:lv(lv({},h.product),b)})),w=a.menus_shared.filter((function(t){var e=t.products.map((function(t){return t.id===r.id?Object.assign(t,b):t}));return t.products=uv(e),!0})),O=lv(lv({},a),{},{menus_shared:w}),c&&c(O),f(vr.Success,l("PRODUCT_SAVED","Product saved")),m({loading:!1,changes:{},error:null})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(lv(lv({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){m(lv(lv({},v),{},{changes:{},error:null})),d(lv(lv({},h),{},{product:r||{}}))}),[r]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,av({},t,{productState:h,formState:v,handleUpdateBusinessSharedMenuProduct:O,handleChangeInput:function(t){t.persist(),m((function(e){return lv(lv({},e),{},{changes:lv(lv({},v.changes),{},fv({},t.target.name,t.target.value))})})),clearTimeout(b),w(setTimeout((function(){O(fv({},t.target.name,t.target.value))}),750))},handleChangeItem:function(t){m((function(e){return lv(lv({},e),{},{changes:lv(lv({},v.changes),t)})})),O(t)},handleUpdateExtra:x,handleUpdateOption:E,handleUpdateSuboption:j})))};function gv(t){return gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(t)}function bv(){return bv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bv.apply(this,arguments)}function wv(){wv=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==gv(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Ov(t){return function(t){if(Array.isArray(t))return Pv(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ev(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xv(Object(r),!0).forEach((function(e){jv(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jv(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sv(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Lv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||_v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _v(t,e){if(t){if("string"==typeof t)return Pv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pv(t,e):void 0}}function Pv(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}mv.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var kv=function(t){var e=t.menu,r=t.UIComponent,n=t.business,a=t.handleUpdateBusinessState,c=Lv(er(),1)[0],u=Lv(hr(),1)[0].token,s=Lv(Ir(),2)[1],l=Lv(br(),2)[1].showToast,f=Lv(Object(o.useState)({loading:!1,error:null,menu:e||{}}),2),p=f[0],h=f[1],d=Lv(Object(o.useState)({loading:!1,error:null}),2),y=d[0],v=d[1],m=function(){var t,r=(t=wv().mark((function t(r,o){var i,f,p,h,d;return wv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,s("LOADING","Loading")),v(Ev(Ev({},y),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(o)},t.next=6,fetch("".concat(c.root,"/business/").concat(n.id,"/menus_shared/").concat(e.id,"/products/").concat(r),i);case 6:return f=t.sent,t.next=9,f.json();case 9:(p=t.sent).error?v({loading:!1,error:p.resulut}):(h=n.menus_shared.filter((function(t){var e=t.products.map((function(t){return t.id===r?Ev(Ev({},t),o):t}));return t.products=Ov(e),!0})),d=Ev(Ev({},n),{},{menus_shared:h}),a&&a(d),l(vr.Success,s("PRODUCT_SAVED","Product saved")),v({loading:!1,error:null})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Sv(i,n,o,a,c,"next",t)}function c(t){Sv(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,e){return r.apply(this,arguments)}}();return Object(o.useEffect)((function(){h(Ev(Ev({},p),{},{menu:e||{}}))}),[e]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,bv({},t,{menuState:p,actionState:y,handleUpdateBusinessSharedMenuProduct:m})))};function Tv(){return Tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tv.apply(this,arguments)}function Iv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Av(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Av(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Av(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}kv.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},kv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Cv=function(t){var e=t.orderType,r=t.sortOptions,n=t.defaultSortOption,a=t.onChangeSortOption,c=t.UIComponent,u=Iv(Object(o.useState)(n),2),s=u[0],l=u[1],f=Iv(Object(o.useState)(r),2),p=f[0],h=f[1];return Object(o.useEffect)((function(){var t="delivery_time"===e?"Pickup time":"Delivery time";h(r.filter((function(e){return e!==t})))}),[e]),i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(c,Tv({},t,{orderType:e,sortOptions:p,currentOptionSelected:s,onChangeSortOption:function(t){l(t),a&&a(t)}})))};function Nv(t){return Nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nv(t)}function Dv(){return Dv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dv.apply(this,arguments)}function Gv(){Gv=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Nv(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Fv(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Uv(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Fv(i,n,o,a,c,"next",t)}function c(t){Fv(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Bv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Rv(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bv(Object(r),!0).forEach((function(e){Mv(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mv(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yv(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=$v(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function zv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||$v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $v(t,e){if(t){if("string"==typeof t)return qv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qv(t,e):void 0}}function qv(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Cv.propTypes={UIComponent:c.a.elementType,sortOptions:c.a.arrayOf(c.a.string),defaultSortOption:c.a.string,orderType:c.a.number,onChangeSortOption:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Cv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Jv=function(t){var e=t.UIComponent,r=t.categoryState,n=t.business,a=t.handleUpdateBusinessState,c=t.categoryId,u=t.categorySelected,s=zv(Ir(),2)[1],l=zv(er(),1)[0],f=zv(br(),2)[1].showToast,p=zv(hr(),1)[0],h=p.token,d=p.loading,y=zv(Wn(),1)[0].parsePrice,v=zv(Object(o.useState)({products:null,loading:!1,result:{error:!1}}),2),m=v[0],g=v[1],b=zv(Object(o.useState)(!1),2),w=b[0],O=b[1],x=zv(Object(o.useState)(!1),2),E=x[0],j=x[1],S=zv(Object(o.useState)({row:-1,col:-1}),2),L=S[0],_=S[1],P="".concat(n.tax,"% ").concat(1===n.tax_type?s("INCLUDED_ON_PRICE","Included on price"):s("NOT_INCLUDED_ON_PRICE","Not included on price")),k="".concat(y(0)," + ").concat(n.service_fee,"%"),T=function(){var t=Uv(Gv().mark((function t(e,r,n){var o,i,a,c,u,p;return Gv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!d){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,f(vr.Info,s("LOADING","Loading")),g(Rv(Rv({},m),{},{loading:!0})),o={method:r?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify({products:JSON.stringify(e)})},i="".concat(l.root,"/bulks/products"),t.next=9,fetch(i,o);case 9:return a=t.sent,t.next=12,a.json();case 12:c=t.sent,u=c.error,p=c.result,u?g(Rv(Rv({},m),{},{loading:!1,result:{error:!0,result:p}})):(g(Rv(Rv({},m),{},{loading:!1,result:{error:!1,result:r?s("PRODUCT_CREATED","Product created"):s("PRODUCT_UPDATE","Product updated")}})),f(vr.Success,r?s("PRODUCT_CREATED","Product created"):s("PRODUCT_UPDATE","Product updated")),I()),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),g(Rv(Rv({},m),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 21:case"end":return t.stop()}}),t,null,[[2,18]])})));return function(e,r,n){return t.apply(this,arguments)}}(),I=function(){var t=Uv(Gv().mark((function t(){var e,r,o,i,f,p,h;return Gv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!d){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e=c||u.id,r={business_id:null==n?void 0:n.id,category_id:parseInt(e)},t.next=7,l.businesses(null==n?void 0:n.id).categories(parseInt(e)).products().parameters(r).get();case 7:o=t.sent,i=o.content,f=i.error,p=i.result,f?g(Rv(Rv({},m),{},{loading:!1,result:{error:!0,result:p}})):(a&&(h=null==n?void 0:n.categories.map((function(t){return parseInt(t.id)===parseInt(e)?Rv(Rv({},t),{},{products:p}):t})),a(Rv(Rv({},n),{},{categories:h}))),g(Rv(Rv({},m),{},{products:p.map((function(t){var e,r,o,i;return Rv(Rv({},t),{},{taxShow:null!=t&&t.tax?"".concat(null===(e=t.tax)||void 0===e?void 0:e.rate,"% ").concat(1===(null===(r=n.tax)||void 0===r?void 0:r.type)?s("INCLUDED_ON_PRICE","Included on price"):s("NOT_INCLUDED_ON_PRICE","Not included on price")):P,feeShow:null!=t&&t.fee?"".concat(y(null===(o=t.fee)||void 0===o?void 0:o.fixed)," + ").concat(null===(i=t.fee)||void 0===i?void 0:i.percentage,"%"):k})})),loading:!1,result:{error:!1,result:s("PRODUCT_SAVED","Product saved")}}))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),g(Rv(Rv({},m),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Uv(Gv().mark((function t(e){var r,n,o,i,a,c;return Gv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!d){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,f(vr.Info,s("LOADING","Loading")),g(Rv(Rv({},m),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify({products:JSON.stringify(e)})},n="".concat(l.root,"/bulks/products"),t.next=9,fetch(n,r);case 9:return o=t.sent,t.next=12,o.json();case 12:i=t.sent,a=i.error,c=i.result,a?g(Rv(Rv({},m),{},{loading:!1,result:{error:!0,result:c}})):(g(Rv(Rv({},m),{},{loading:!1,result:{error:!1,result:s("PRODUCT_DELETED","Product deleted")}})),f(vr.Success,s("PRODUCT_DELETED","Product deleted")),I()),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),g(Rv(Rv({},m),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 21:case"end":return t.stop()}}),t,null,[[2,18]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t,e=[],o=Yv(r.products);try{for(o.s();!(t=o.n()).done;){var i,a,c,u,l=t.value,f=null!=l&&l.tax?"".concat(null===(i=l.tax)||void 0===i?void 0:i.rate,"% ").concat(1===(null===(a=n.tax)||void 0===a?void 0:a.type)?s("INCLUDED_ON_PRICE","Included on price"):s("NOT_INCLUDED_ON_PRICE","Not included on price")):P,p=l.fee?"".concat(y(null===(c=l.fee)||void 0===c?void 0:c.fixed)," + ").concat(null===(u=l.fee)||void 0===u?void 0:u.percentage,"%"):k,h=Rv(Rv({},l),{},{taxShow:f,feeShow:p});e.push(h)}}catch(t){o.e(t)}finally{o.f()}g(Rv(Rv({},m),{},{products:e}))}),[null==r?void 0:r.products]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Dv({},t,{handleItemChange:function(t,e,r){if(E)j(!1);else if("loadData"!==e){t=t||[];var o=[],i=[],a=[],l=[],f=c||(null==u?void 0:u.id);t.forEach((function(t){var e={name:!1,price:!1};if(t[2]!==t[3]){for(var c=!0,u=0;u<o.length;u++)if(o[u]===t[0]){c=!1;break}if(c){o.push(t[0]);var p=r.getSourceDataAtRow(t[0]);if(r.validateRows(o,(function(t){})),!p.name&&(p.price||p.quantity||p.description)&&(e.name=!0,g(Rv(Rv({},m),{},{result:{error:!0,result:[s("NAME_REQUIRED","Name Required")]}}))),p.price&&"number"!=typeof p.price){var h=parseFloat(p.price);h?p.price=h:(e.price=!0,g(Rv(Rv({},m),{},{result:{error:!0,result:[s("PRODUCT_PRICE_NUMBER")]}})))}if(p.quantity&&"number"!=typeof p.quantity&&"NA"!==p.quantity){var d=parseFloat(p.quantity);d?p.quantity=d:e.quantity=!0}if(p.id)if(p.name||p.price||p.description){if(!(e.price||e.name||e.quantity)){p.description||(p.description=null);var y={id:p.id,name:p.name,description:p.description?p.description:"",price:p.price?p.price:0,inventoried:(null==p?void 0:p.inventoried)||!1,category_id:f,business_id:null==n?void 0:n.id};void 0!==(null==p?void 0:p.offer_price)&&(y.offer_price=p.offer_price),void 0!==(null==p?void 0:p.cost_price)&&(y.cost_price=p.cost_price),(p.quantity&&"NA"!==p.quantity||0===p.quantity)&&(y.quantity=p.quantity),a.push(y)}}else p.row=t[0],i.push(p);else if(!(e.price||e.name||e.quantity)){var v={name:p.name,description:p.description?p.description:"",price:p.price?p.price:0,cost_price:(null==p?void 0:p.cost_price)||0,category_id:f,business_id:null==n?void 0:n.id};(p.quantity&&"NA"!==p.quantity||0===p.quantity)&&(v.quantity=p.quantity,v.inventoried=!0),l.push(v)}}}})),l.length>0&&T(l,!0,r),a.length>0&&T(a,!1,r),i.length>0&&(r.alter("remove_row",i[0].row,i.length),O(!0))}},spreadSheetState:m,handleRowRemove:function(t,e,r,n){if(n){var o,i=[],a=Yv(r);try{for(a.s();!(o=a.n()).done;){var c=o.value;i.push(null==n?void 0:n.getSourceDataAtRow(c).id)}}catch(t){a.e(t)}finally{a.f()}w&&O(!1),setTimeout((function(){A(i)}),1)}},handleAfterSectionEnd:function(t,e,r,n,o){L.row===t&&L.col===e||t!==r||e!==n||(L.row=t,L.col=e,_({row:t,col:e}),o.deselectCell(),o.selectCell(t,e))},handleoutsideClickDeselects:function(){return _({row:-1,col:-1}),!1}})))};function Vv(t){return Vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vv(t)}function Hv(){return Hv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hv.apply(this,arguments)}function Wv(){Wv=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Vv(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Kv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Zv(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kv(Object(r),!0).forEach((function(e){Xv(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xv(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qv(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function tm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return em(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return em(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function em(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Jv.propTypes={UIComponent:c.a.elementType,businessState:c.a.object,setBusinessState:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Jv.defaultProps={};var rm=function(t){var e=t.businessTypes,r=t.onChangeBusinessType,n=t.defaultBusinessType,a=t.UIComponent,c=tm(er(),1)[0],u=tm(Object(o.useState)(n),2),s=u[0],l=u[1],f=tm(Object(o.useState)({loading:!0,error:null,types:[],pagination:null}),2),p=f[0],h=f[1],d=function(){var t,e=(t=Wv().mark((function t(){var e,r,n,o,i;return Wv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(c.root,'/business_types?where=[{"attribute":"enabled","value":true}]'),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return e=t.sent,t.next=6,e.json();case 6:if(r=t.sent,n=r.error,o=r.result,i=r.pagination,n){t.next=14;break}return o.length>0&&o.unshift({id:null,enabled:!0,image:null,name:"All"}),h(Zv(Zv({},p),{},{loading:!1,types:o,pagination:i})),t.abrupt("return");case 14:h(Zv(Zv({},p),{},{loading:!1,error:o})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),h(Zv(Zv({},p),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Qv(i,n,o,a,c,"next",t)}function c(t){Qv(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){e?h(Zv(Zv({},p),{},{loading:!1,types:e})):d()}),[e]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,Hv({},t,{typesState:p,businessTypes:e,currentTypeSelected:s,handleChangeBusinessType:function(t){l(t),r(t)}})))};function nm(t){return nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nm(t)}function om(){return om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},om.apply(this,arguments)}function im(t){return function(t){if(Array.isArray(t))return dm(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||hm(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function am(){am=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==nm(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function cm(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function um(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){cm(i,n,o,a,c,"next",t)}function c(t){cm(i,n,o,a,c,"throw",t)}a(void 0)}))}}function sm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lm(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sm(Object(r),!0).forEach((function(e){fm(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fm(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||hm(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hm(t,e){if(t){if("string"==typeof t)return dm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dm(t,e):void 0}}function dm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}rm.propTypes={UIComponent:c.a.elementType,businessTypes:c.a.arrayOf(c.a.object),defaultBusinessType:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ym=function(t){var e,r=t.UIComponent,n=t.setBusinessTypes,a=t.businessTypes,c=pm(er(),1)[0],u=pm(hr(),1)[0].token,s=pm(br(),2)[1].showToast,l=pm(Ir(),2)[1],f=pm(Object(o.useState)({businessType:null!==(e=t.businessType)&&void 0!==e?e:null}),2),p=f[0],h=f[1],d=pm(Object(o.useState)({loading:!1,changes:{},error:null}),2),y=d[0],v=d[1],m=function(){var t=um(am().mark((function t(){var e,r,o,i,f;return am().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,l("LOADING","Loading")),v(lm(lm({},y),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(y.changes)},t.next=6,fetch("".concat(c.root,"/business_types/").concat(null==p||null===(e=p.businessType)||void 0===e?void 0:e.id),r);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?v(lm(lm({},y),{},{loading:!1,error:i.result})):(h({businessType:lm(lm({},p.businessType),i.result)}),v({loading:!1,changes:{},error:null}),n&&(f=a.map((function(t){var e;return t.id===(null==i||null===(e=i.result)||void 0===e?void 0:e.id)?lm(lm({},t),null==i?void 0:i.result):t})),n(f)),s(vr.Success,l("CATEGORY_UPDATED","Category updated"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v(lm(lm({},y),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var e=um(am().mark((function e(){var r,o,i;return am().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(vr.Info,l("LOADING","Loading")),v(lm(lm({},y),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(y.changes)},e.next=6,fetch("".concat(c.root,"/business_types"),r);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?v(lm(lm({},y),{},{loading:!1,error:i.result})):(v({loading:!1,changes:{},error:null}),n&&n([].concat(im(a),[i.result])),s(vr.Success,l("CATEGORY_ADDED","Category added")),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(lm(lm({},y),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=um(am().mark((function e(){var r,o,i,f;return am().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(vr.Info,l("LOADING","Loading")),v(lm(lm({},y),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=6,fetch("".concat(c.root,"/business_types/").concat(p.businessType.id),r);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?v(lm(lm({},y),{},{loading:!1,error:i.result})):(v({loading:!1,changes:{},error:null}),n&&(f=a.filter((function(t){return t.id!==p.businessType.id})),n(f)),s(vr.Success,l("CATEGORY_DELETED","Category deleted")),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(lm(lm({},y),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e;v({loading:!1,changes:{},error:null}),h({businessType:null!==(e=t.businessType)&&void 0!==e?e:null})}),[null==t?void 0:t.businessType]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,om({},t,{businessTypeState:p,typeFormState:y,handleChangeInput:function(t){v(lm(lm({},y),{},{changes:lm(lm({},y.changes),{},fm({},t.target.name,t.target.value))}))},handlechangeImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){v(lm(lm({},y),{},{changes:lm(lm({},y.changes),{},{image:e.result})}))},e.onerror=function(t){return console.log(t)}},handleUpdateProductType:m,handleAddProductType:g,handleDeleteProductType:b,handleChangeItem:function(t,e){var r=lm(lm({},null==y?void 0:y.changes),{},fm({},t,e));v(lm(lm({},y),{},{changes:r}))}})))};function vm(t){return vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(t)}function mm(){return mm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mm.apply(this,arguments)}function gm(){gm=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==vm(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function bm(t){return function(t){if(Array.isArray(t))return _m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Lm(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Om(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wm(Object(r),!0).forEach((function(e){xm(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xm(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Em(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function jm(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Em(i,n,o,a,c,"next",t)}function c(t){Em(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Sm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Lm(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lm(t,e){if(t){if("string"==typeof t)return _m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_m(t,e):void 0}}function _m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ym.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ym.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Pm=function(t){var e=t.UIComponent,r=t.business,n=t.handleSuccessUpdate,a=Sm(er(),1)[0],c=Sm(hr(),1)[0].token,u=Sm(Ir(),2)[1],s=Sm(br(),2)[1].showToast,l=Sm(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),f=l[0],p=l[1],h=function(){var t=jm(gm().mark((function t(){var e,o,i,l;return gm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,u("LOADING","Loading")),p(Om(Om({},f),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(f.changes)},t.next=6,fetch("".concat(a.root,"/business/").concat(null==r?void 0:r.id,"/webhooks"),e);case 6:return o=t.sent,t.next=9,o.json();case 9:null!=(i=t.sent)&&i.error?p(Om(Om({},f),{},{changes:f.changes,result:i,loading:!1})):(p(Om(Om({},f),{},{changes:{},result:i,loading:!1})),(l=bm(r.webhooks)).push(null==i?void 0:i.result),n&&n(Om(Om({},r),{},{webhooks:bm(l)})),s(vr.Success,u("WEBHOOK_ADDED","Webhook added"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),p(Om(Om({},f),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),d=function(){var t=jm(gm().mark((function t(e,o){var i,l,h,d,y;return gm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,u("LOADING","Loading")),p(Om(Om({},f),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(e)},t.next=6,fetch("".concat(a.root,"/business/").concat(null==r?void 0:r.id,"/webhooks/").concat(o),i);case 6:return l=t.sent,t.next=9,l.json();case 9:null!=(h=t.sent)&&h.error?p(Om(Om({},f),{},{result:h,loading:!1})):(p(Om(Om({},f),{},{result:h,loading:!1})),y=null==r||null===(d=r.webhooks)||void 0===d?void 0:d.map((function(t){var e,r;return t.id===(null==h||null===(e=h.result)||void 0===e?void 0:e.id)?Om(Om({},t),{},{delay:null==h||null===(r=h.result)||void 0===r?void 0:r.delay}):t})),n&&n(Om(Om({},r),{},{webhooks:bm(y)})),s(vr.Success,u("WEBHOOK_UPDATED","Webhook updated"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),p(Om(Om({},f),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),y=function(){var t=jm(gm().mark((function t(e){var o,i,l,h,d,y;return gm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,u("LOADING","Loading")),p(Om(Om({},f),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(a.root,"/business/").concat(null==r?void 0:r.id,"/webhooks/").concat(e),o);case 6:return i=t.sent,t.next=9,i.json();case 9:null!=(l=t.sent)&&l.error?p(Om(Om({},f),{},{result:l,loading:!1})):(p(Om(Om({},f),{},{loading:!1})),d=null==r||null===(h=r.webhooks)||void 0===h?void 0:h.filter((function(t){return t.id!==e})),y=Om(Om({},r),{},{webhooks:bm(d)}),n&&n(y),s(vr.Success,u("WEBHOOK_DELETED","Webhook deleted"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),p(Om(Om({},f),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,mm({},t,{businessTypeFormState:f,handleChangeInput:function(t){var e=xm({},t.target.name,t.target.value);p(Om(Om({},f),{},{changes:Om(Om({},f.changes),e)}))},handleChangeSelect:function(t,e){p(Om(Om({},f),{},{changes:Om(Om({},f.changes),{},xm({},e,t))}))},hookFormState:f,handleUpdateAddClick:h,handleDeleteWebhook:y,handleChangeDelay:function(t,e){var r=Om(Om({},e),{},{delay:t});d(r,null==e?void 0:e.id)}})))};function km(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Nm(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Tm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Im(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tm(Object(r),!0).forEach((function(e){Am(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Am(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Nm(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nm(t,e){if(t){if("string"==typeof t)return Dm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dm(t,e):void 0}}function Dm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Pm.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleSuccessUpdate:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Pm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Gm=function(t){var e=t.apiKey,r=t.mapControls,n=t.clearState,a=t.location,c=t.type,u=t.data,s=t.fillStyle,l=t.infoContentString,f=t.handleData,p=t.setClearState,h=t.isAddMode,d=t.greenFillStyle,y=t.businessZones,v=t.kmlData,m=t.disabled,g=t.distance,b=t.isDriverGroup;e||console.warn("Prop `apiKey` is required to use Google Maps components.");var w=Object(o.useRef)(),O=Cm(Object(o.useState)(null),2),x=O[0],E=O[1],j=Cm(Object(o.useState)(null),2),S=j[0],L=j[1],_=Cm(Object(o.useState)(null),2),P=_[0],k=_[1],T=Cm(Object(o.useState)(null),2),I=T[0],A=T[1],C=Cm(Object(o.useState)(null),2),N=C[0],D=C[1],G=Cm(Object(o.useState)(null),2),F=G[0],U=G[1],B=Cm(Object(o.useState)(null),2),R=B[0],M=B[1],Y=a?{lat:null==a?void 0:a.lat,lng:null==a?void 0:a.lng}:null==r?void 0:r.defaultPosition,z=Cm(Object(o.useState)(!1),2),$=z[0],q=z[1],J={mi:1609,km:1e3},V=function(){f({center:{lat:P.getCenter().lat(),lng:P.getCenter().lng()},radio:P.getRadius()/1e3})},H=function(){f(Im(Im({},u),{},{radio:P.getRadius()/1e3}))},W=function(){var t,e=[],r=km(N.getPath().getArray());try{for(r.s();!(t=r.n()).done;){var n=t.value,o={lat:n.lat(),lng:n.lng()};e.push(o)}}catch(t){r.e(t)}finally{r.f()}f(e)},K=function(t){p(!1),R.setMap(null),1===c?(k(t.overlay),F&&F.open(x)):D(t.overlay)};return Object(o.useEffect)((function(){$&&F&&(F.setContent(l),null!=u&&u.center&&F.setPosition(u.center),null!=u&&u.distance&&F.setPosition(Y))}),[F,l,u,$]),Object(o.useEffect)((function(){P&&(f({center:{lat:P.getCenter().lat(),lng:P.getCenter().lng()},radio:P.getRadius()/1e3}),window.google.maps.event.addListener(P,"center_changed",V),window.google.maps.event.addListener(P,"radius_changed",H))}),[P]),Object(o.useEffect)((function(){I&&!n&&f(Im(Im({},u),{},{distance:I.getRadius()/J[null==u?void 0:u.unit]})),I&&n&&f(u)}),[I]),Object(o.useEffect)((function(){if(N){var t,e=[],r=km(N.getPath().getArray());try{for(r.s();!(t=r.n()).done;){var n=t.value,o={lat:n.lat(),lng:n.lng()};e.push(o)}}catch(t){r.e(t)}finally{r.f()}f(e),window.google.maps.event.addListener(N,"mouseup",W)}}),[N]),Object(o.useEffect)((function(){R&&R.addListener("overlaycomplete",K)}),[R]),Object(o.useEffect)((function(){var t,e,r;if(null!==(t=window.google)&&void 0!==t&&t.maps&&(n&&(P&&(P.setMap(null),k(null),F&&F.close()),N&&(N.setMap(null),D(null)),I&&(I.setMap(null),A(null)),R&&R.setMap(null),null!==(e=window.google.maps)&&void 0!==e&&null!==(r=e.drawing)&&void 0!==r&&r.DrawingManager))){var o=new window.google.maps.drawing.DrawingManager({drawingControl:null!=b?b:m&&5!==c,drawingControlOptions:{position:window.google.maps.ControlPosition.TOP_CENTER,drawingModes:(null!=b?b:m&&5!==c)&&1===c?[window.google.maps.drawing.OverlayType.CIRCLE]:[window.google.maps.drawing.OverlayType.POLYGON]},circleOptions:Im(Im({},s),{},{clickable:!1,draggable:!0}),polygonOptions:Im(Im({},s),{},{clickable:!1,draggable:!1})});M(o),o.setMap(x)}}),[n,c]),Object(o.useEffect)((function(){if($&&x){var t=new window.google.maps.LatLngBounds;if(P&&(t.union(P.getBounds()),x.fitBounds(t)),I&&(t.union(I.getBounds()),x.fitBounds(t)),N&&Array.isArray(u)){var e,r=km(u);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.extend(n)}}catch(t){r.e(t)}finally{r.f()}x.fitBounds(t)}}}),[$,u,c,x,P,N,I]),Object(o.useEffect)((function(){$&&(Y.lat=null==a?void 0:a.lat,Y.lng=null==a?void 0:a.lng,Y.lat&&Y.lng&&(S&&S.setPosition(new window.google.maps.LatLng(null==Y?void 0:Y.lat,null==Y?void 0:Y.lng)),x&&x.panTo(new window.google.maps.LatLng(null==Y?void 0:Y.lat,null==Y?void 0:Y.lng))))}),[a]),Object(o.useEffect)((function(){if(x&&Array.isArray(v)&&h){var t=new window.google.maps.Polygon(Im(Im({},s),{},{draggable:!1,map:x,paths:v}));t.setMap(x);var e,r=new window.google.maps.LatLngBounds,n=km(v);try{for(n.s();!(e=n.n()).done;){var o=e.value;r.extend(o)}}catch(t){n.e(t)}finally{n.f()}x.fitBounds(r),D(t)}}),[h,v,x]),Object(o.useEffect)((function(){if($){var t,e,n,o,i=new window.google.maps.Map(w.current,{zoom:null!==(t=null==a?void 0:a.zoom)&&void 0!==t?t:r.defaultZoom,center:Y,zoomControl:null==r?void 0:r.zoomControl,streetViewControl:null==r?void 0:r.streetViewControl,fullscreenControl:null==r?void 0:r.fullscreenControl,mapTypeControl:null==r?void 0:r.mapTypeControl,mapTypeId:null==r?void 0:r.mapTypeId,mapTypeControlOptions:Im({style:window.google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:window.google.maps.ControlPosition.TOP_LEFT},null==r?void 0:r.mapTypeControlOptions)});if(E(i),o=b?null:new window.google.maps.Marker({position:new window.google.maps.LatLng(null==Y?void 0:Y.lat,null==Y?void 0:Y.lng),map:i,draggable:!(null==r||!r.isMarkerDraggable)}),L(o),u){var f=new window.google.maps.InfoWindow({content:l,position:u.center});if(U(f),1===c&&null!=u&&u.center){var p=new window.google.maps.Circle(Im(Im({},s),{},{editable:m,draggable:!0,map:i,center:u.center,radius:1e3*u.radio}));k(p),f.open(i)}if(2===c&&Array.isArray(u)){var v=new window.google.maps.Polygon(Im(Im({},s),{},{editable:m,draggable:!1,map:i,paths:u}));D(v)}if(5===c&&null!=u&&u.distance){var g=new window.google.maps.Circle(Im(Im({},s),{},{editable:!1,center:Y,radius:u.distance*J[null==u?void 0:u.unit]}));g.setMap(i),A(g),f.open(i)}}if(null!==(e=window.google.maps)&&void 0!==e&&null!==(n=e.drawing)&&void 0!==n&&n.DrawingManager){var O=new window.google.maps.drawing.DrawingManager({drawingControl:null!=b?b:m&&5!==c,drawingControlOptions:{position:window.google.maps.ControlPosition.TOP_CENTER,drawingModes:(null!=b?b:m&&5!==c)&&1===c?[window.google.maps.drawing.OverlayType.CIRCLE]:[window.google.maps.drawing.OverlayType.POLYGON]},circleOptions:Im(Im({},s),{},{clickable:!1,draggable:!0}),polygonOptions:Im(Im({},s),{},{clickable:!1,draggable:!1})});M(O),O.setMap(i)}if(h){var x,j=new window.google.maps.LatLngBounds,S=km(y);try{for(S.s();!(x=S.n()).done;){var _,P,T,I=x.value;if(1===I.type&&null!=I&&null!==(_=I.data)&&void 0!==_&&_.center&&null!=I&&null!==(P=I.data)&&void 0!==P&&P.radio){var C=new window.google.maps.Circle(Im(Im({},d),{},{editable:!1,center:null==I?void 0:I.data.center,radius:1e3*(null==I?void 0:I.data.radio)}));C.setMap(i),j.union(C.getBounds()),i.fitBounds(j)}if(5===I.type&&null!=I&&null!==(T=I.data)&&void 0!==T&&T.distance){var N,G=new window.google.maps.Circle(Im(Im({},d),{},{editable:!1,center:Y,radius:(null==I?void 0:I.data.distance)*J[null==I||null===(N=I.data)||void 0===N?void 0:N.unit]}));G.setMap(i),j.union(G.getBounds()),i.fitBounds(j)}if(2===(null==I?void 0:I.type)&&Array.isArray(null==I?void 0:I.data))if(new window.google.maps.Polygon(Im(Im({},d),{},{editable:!1,paths:null==I?void 0:I.data})).setMap(i),Array.isArray(null==I?void 0:I.data)){var F,B=km(null==I?void 0:I.data);try{for(B.s();!(F=B.n()).done;){var R=F.value;j.extend(R)}}catch(t){B.e(t)}finally{B.f()}i.fitBounds(j)}}}catch(t){S.e(t)}finally{S.f()}}}}),[$,g]),Object(o.useEffect)((function(){if(e){var t=null;if(!window.document.getElementById("__googleMapsScriptId")){window.googleAsyncInit=function(){q(!0)};var r=window.document.createElement("script");return r.id="__googleMapsScriptId",r.async=!0,r.defer=!0,r.src="https://maps.googleapis.com/maps/api/js?key=".concat(e,"&libraries=places,geometry,visualization,drawing&callback=googleAsyncInit"),window.document.body.appendChild(r),function(){t&&clearInterval(t)}}"undefined"!=typeof google?q(!0):t=setInterval((function(){"undefined"!=typeof google&&(q(!0),clearInterval(t))}),100)}}),[e]),$&&i.a.createElement("div",{id:"map",ref:w,style:{width:"70%",height:"50%",position:"absolute"}})};function Fm(t){return Fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(t)}function Um(){return Um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Um.apply(this,arguments)}function Bm(){Bm=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Fm(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Rm(t){return function(t){if(Array.isArray(t))return Vm(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Jm(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mm(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ym(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zm(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ym(Object(r),!0).forEach((function(e){$m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ym(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Jm(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jm(t,e){if(t){if("string"==typeof t)return Vm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vm(t,e):void 0}}function Vm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Gm.propTypes={UIComponent:c.a.elementType,maxLimitLocation:c.a.number,handleChangeAddressMap:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Gm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},Gm.propTypes={apiKey:c.a.string.isRequired};var Hm=function(t){var e=t.UIComponent,r=t.business,n=t.handleUpdateBusinessState,a=t.setIsAddProduct,c=t.categorySelected,u=t.handleParentProductAdd,s=qm(hr(),1)[0].loading,l=qm(er(),1)[0],f=qm(br(),2)[1].showToast,p=qm(Ir(),2)[1],h=qm(Object(o.useState)({loading:!1,changes:{enabled:!0},result:{error:!1}}),2),d=h[0],y=h[1],v=function(){var t,e=(t=Bm().mark((function t(){var e,o,i,h,v,m;return Bm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,f(vr.Info,p("LOADING","Loading")),o=null===(null==c?void 0:c.id)&&"featured"===(null==c?void 0:c.id)?parseInt(null==r?void 0:r.categories[0]):parseInt(null==c?void 0:c.id),y(zm(zm({},d),{},{loading:!0})),i=zm(zm({},d.changes),{},{slug:Hc((null===(e=d.changes)||void 0===e?void 0:e.name)||"")}),t.next=9,l.businesses(parseInt(null==r?void 0:r.id)).categories(o).products().save(i);case 9:h=t.sent,(v=h.content).error?y(zm(zm({},d),{},{changes:d.changes,result:v,loading:!1})):(y(zm(zm({},d),{},{changes:{},result:{error:!1,result:v.result},loading:!1})),n&&((m=Rm(null==r?void 0:r.categories)).forEach((function t(e){(null==e?void 0:e.id)===o&&e.products.push(v.result),Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})),n(zm(zm({},r),{},{categories:m}))),a(!1),u&&u(!1),f(vr.Success,p("PRODUCT_ADD","Product added"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),y(zm(zm({},d),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Mm(i,n,o,a,c,"next",t)}function c(t){Mm(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Um({},t,{formState:d,setFormState:y,handlechangeImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){y(zm(zm({},d),{},{changes:zm(zm({},d.changes),{},{images:e.result})}))},e.onerror=function(t){return console.log(t)}},handleChangeInput:function(t){var e=$m({},t.target.name,t.target.value);y(zm(zm({},d),{},{changes:zm(zm({},d.changes),e)}))},handleUpdateClick:v,handleChangeCheckBox:function(t){var e={enabled:t};y(zm(zm({},d),{},{changes:zm(zm({},d.changes),e)}))},handleChangeItem:function(t){var e=zm(zm({},d.changes),t);y(zm(zm({},d),{},{changes:e}))}})))};function Wm(t){return Wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(t)}function Km(){return Km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Km.apply(this,arguments)}function Zm(){Zm=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Wm(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Xm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Qm(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xm(Object(r),!0).forEach((function(e){tg(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function tg(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eg(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function rg(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){eg(i,n,o,a,c,"next",t)}function c(t){eg(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ng(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return og(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return og(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function og(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Hm.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,setIsAddProduct:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Hm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ig=function(t){var e=t.UIComponent,r=t.business,n=t.handleSuccessUpdate,a=ng(er(),1)[0],c=ng(hr(),1)[0].token,u=ng(Ir(),2)[1],s=ng(br(),2)[1].showToast,l=ng(Object(o.useState)({wallets:(null==r?void 0:r.configs)||[],loading:!1,error:null}),2),f=l[0],p=l[1],h=ng(Object(o.useState)({loading:!0,created:!1,error:null}),2),d=h[0],y=h[1],v=ng(Object(o.useState)({loading:!1,error:null}),2),m=v[0],g=v[1],b=function(){var t=rg(Zm().mark((function t(){var e,n,o;return Zm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(Qm(Qm({},f),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=5,fetch("".concat(a.root,"/business/").concat(r.id,"/configs"),e);case 5:return n=t.sent,t.next=8,n.json();case 8:(o=t.sent).error?p(Qm(Qm({},f),{},{loading:!1,error:o.result})):p(Qm(Qm({},f),{},{loading:!1,wallets:o.result})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),p(Qm(Qm({},f),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=rg(Zm().mark((function t(){var e,n,o,i;return Zm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Qm(Qm({},d),{},{loading:!0})),t.next=4,fetch("".concat(a.root,"/loyalty_plans"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}});case 4:return e=t.sent,t.next=7,e.json();case 7:(n=t.sent).error?y(Qm(Qm({},d),{},{loading:!1,error:n.result})):(o=n.result.find((function(t){return"credit_point"===t.type})))&&(i=o.businesses.find((function(t){return t.business_id===r.id})),y(Qm(Qm({},d),{},{loading:!1,created:!!i}))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),y(Qm(Qm({},d),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=rg(Zm().mark((function t(e,o){var i,l,h,d;return Zm().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g(Qm(Qm({},m),{},{loading:!0})),s(vr.Info,u("LOADING","Loading")),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(o)},t.next=6,fetch("".concat(a.root,"/business/").concat(r.id,"/configs/").concat(e),i);case 6:return l=t.sent,t.next=9,l.json();case 9:(h=t.sent).error?g({loading:!1,error:h.result}):(g({loading:!1,error:null}),d=f.wallets.map((function(t){var e;return t.id===(null===(e=h.result)||void 0===e?void 0:e.id)?h.result:t})),p(Qm(Qm({},f),{},{wallets:d})),n&&n(Qm(Qm({},r),{},{configs:d})),s(vr.Success,u("CHANGES_SAVED","Changes saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),g({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){w(),null!=r&&r.configs||b()}),[null==r?void 0:r.configs]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Km({},t,{loyaltyPlanState:d,walletsListState:f,actionState:m,handleUpdateWallet:O})))};function ag(t){return ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ag(t)}function cg(){return cg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cg.apply(this,arguments)}function ug(t){return function(t){if(Array.isArray(t))return mg(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||vg(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sg(){sg=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ag(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function lg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fg(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lg(Object(r),!0).forEach((function(e){pg(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pg(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hg(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function dg(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){hg(i,n,o,a,c,"next",t)}function c(t){hg(i,n,o,a,c,"throw",t)}a(void 0)}))}}function yg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||vg(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vg(t,e){if(t){if("string"==typeof t)return mg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mg(t,e):void 0}}function mg(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ig.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ig.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gg=function(t){var e,r=t.UIComponent,n=t.paginationSettings,a=t.isSearchByName,c=t.isSearchByContactType,u=yg(er(),1)[0],s=yg(hr(),1)[0].token,l=yg(br(),2)[1].showToast,f=yg(Ir(),2)[1],p=yg(Object(o.useState)(null),2),h=p[0],d=p[1],y=yg(Object(o.useState)({campaigns:[],loading:!1,error:null}),2),v=y[0],m=y[1],g=yg(Object(o.useState)({clear:!1,changes:{}}),2),b=g[0],w=g[1],O=yg(Object(o.useState)({currentPage:"pages"===n.controlType&&n.initialPage&&n.initialPage>=1?n.initialPage-1:0,pageSize:null!==(e=n.pageSize)&&void 0!==e?e:10,totalItems:null,totalPages:null}),2),x=O[0],E=O[1],j=function(){var t=dg(sg().mark((function t(e,r){var n,o,i,l,f,p,d;return sg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(fg(fg({},v),{},{loading:!0})),n=null,o=[],h&&(i=[],a&&i.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(h,"%"))}}),c&&i.push({attribute:"contact_type",value:{condition:"ilike",value:encodeURI("%".concat(h,"%"))}}),o.push({conector:"OR",conditions:i})),o.length&&(n={conditions:o,conector:"AND"}),l={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},f=n?"".concat(u.root,"/marketing_campaigns?page=").concat(e,"&page_size=").concat(r,"&where=").concat(JSON.stringify(n)):"".concat(u.root,"/marketing_campaigns?page=").concat(e,"&page_size=").concat(r),t.next=10,fetch(f,l);case 10:return p=t.sent,t.next=13,p.json();case 13:(d=t.sent).error?m(fg(fg({},v),{},{loading:!1,error:d.result})):(m({loading:!1,campaigns:d.result,error:null}),E(fg(fg({},x),{},{currentPage:d.pagination.current_page,totalPages:d.pagination.total_pages,totalItems:d.pagination.total,from:d.pagination.from,to:d.pagination.to}))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),m(fg(fg({},v),{},{loading:!1,error:[t.t0.message]}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e,r){return t.apply(this,arguments)}}(),S=function(){var t=dg(sg().mark((function t(e,r){var n,o,i,a;return sg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,f("LOADING","Loading")),n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(r)},t.next=5,fetch("".concat(u.root,"/marketing_campaigns/").concat(e),n);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error||(L&&(a=null==v?void 0:v.campaigns.filter((function(t){return t.id===e&&Object.assign(t,i.result),!0})),L(a)),l(vr.Success,f("CAMPAIGN_SAVED","Campaign saved"))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r){return t.apply(this,arguments)}}(),L=function(t){m(fg(fg({},v),{},{campaigns:t}))};return Object(o.useEffect)((function(){v.loading||j(1,x.pageSize)}),[h]),Object(o.useEffect)((function(){(Object.keys(null==b?void 0:b.changes).length>0||b.clear)&&!v.loading&&j(1,x.pageSize)}),[b]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,cg({},t,{searchValue:h,paginationProps:x,campaignList:v,getCampaignList:j,setFilterValues:w,setPaginationProps:E,handleChangeSearch:function(t){d(t)},handleUpdateCampaign:S,handleSuccessAddCampaign:function(t){var e=[].concat(ug(v.campaigns),[t]);E(fg(fg({},x),{},{to:(null==x?void 0:x.to)+1,total:(null==x?void 0:x.total)+1})),m(fg(fg({},v),{},{campaigns:e}))},handleSuccessUpdateCampaign:L,handleSuccessDeleteCampaign:function(t){var e=v.campaigns.filter((function(e){return e.id!==t}));E(fg(fg({},x),{},{total:(null==x?void 0:x.total)-1})),m(fg(fg({},v),{},{campaigns:e}))}})))};function bg(){return bg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bg.apply(this,arguments)}function wg(t){return function(t){if(Array.isArray(t))return Tg(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||kg(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Og(){Og=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==xg(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function xg(t){return xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xg(t)}function Eg(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function jg(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Eg(i,n,o,a,c,"next",t)}function c(t){Eg(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Sg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lg(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sg(Object(r),!0).forEach((function(e){_g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||kg(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kg(t,e){if(t){if("string"==typeof t)return Tg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tg(t,e):void 0}}function Tg(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}gg.propTypes={UIComponent:c.a.elementType,isSearchByName:c.a.bool,isSearchByContactType:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gg.defaultProps={isSearchByName:!0,isSearchByContactType:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var Ig=["cloudinary","tookan","order_messages","others"],Ag=["search_by_address","distance_unit_km","pickup","orders_metafields_strategy","order_validate","time_format","driver_close_distance","lazy_load_products_when_necessary","advanced_business_search_enabled"],Cg=function(t){var e,r,n=t.campaign,a=t.campaignList,c=t.UIComponent,u=t.handleSuccessUpdateCampaign,s=t.handleSuccessAddCampaign,l=t.handleSuccessDeleteCampaign,f=Pg(Ir(),2)[1],p=Pg(er(),1)[0],h=Pg(hr(),1)[0].token,d=Pg(br(),2)[1].showToast,y=Pg(Object(o.useState)({campaign:n,loading:!1,error:null}),2),v=y[0],m=y[1],g=Pg(Object(o.useState)({loading:!1,changes:{},error:null}),2),b=g[0],w=g[1],O=Pg(Object(o.useState)(!1),2),x=O[0],E=O[1],j=Pg(Object(o.useState)({loading:!1,audience:0,error:null}),2),S=j[0],L=j[1],_=Pg(Object(o.useState)({loading:!1,categories:[],error:null}),2),P=_[0],k=_[1],T=function(){return w({loading:!1,changes:{}})},I=function(){var t=jg(Og().mark((function t(){var e,r,o,i,c,s;return Og().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r in t.prev=0,d(vr.Info,f("LOADING","Loading")),w(Lg(Lg({},b),{},{loading:!0,error:null})),e=Lg({},null==b?void 0:b.changes))("object"===xg(e[r])&&null!==e[r]||Array.isArray(e[r]))&&(e[r]=JSON.stringify(e[r]));return null!=e&&e.conditions&&delete e.conditions,o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(e)},t.next=9,fetch("".concat(p.root,"/marketing_campaigns/").concat(n.id),o);case 9:return i=t.sent,t.next=12,i.json();case 12:(c=t.sent).error?w(Lg(Lg({},b),{},{loading:!1,error:c.result})):(m(Lg(Lg({},v),{},{campaign:c.result})),w(Lg(Lg({},b),{},{loading:!1,error:null,changes:{}})),u&&(s=null==a?void 0:a.campaigns.filter((function(t){return t.id===n.id&&Object.assign(t,c.result),!0})),u(s)),T(),d(vr.Success,f("CAMPAIGN_SAVED","Campaign saved"))),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),w(Lg(Lg({},b),{},{loading:!1,error:t.t0.message}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var e=jg(Og().mark((function e(){var r,n,o,i,a;return Og().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in e.prev=0,d(vr.Info,f("LOADING","Loading")),w(Lg(Lg({},b),{},{loading:!0,error:null})),r=Lg({},null==b?void 0:b.changes))("object"===xg(r[n])&&null!==r[n]||Array.isArray(r[n]))&&(r[n]=JSON.stringify(r[n]));return o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(r)},e.next=8,fetch("".concat(p.root,"/marketing_campaigns"),o);case 8:return i=e.sent,e.next=11,i.json();case 11:(a=e.sent).error?w(Lg(Lg({},b),{},{loading:!1,error:a.result})):(w(Lg(Lg({},b),{},{loading:!1,error:null})),s&&s(a.result),d(vr.Success,f("CAMPAIGN_ADDED","Campaign added")),t.onClose&&t.onClose()),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),w(Lg(Lg({},b),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=jg(Og().mark((function e(){var r,o,i;return Og().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(vr.Info,f("LOADING","Loading")),w(Lg(Lg({},b),{},{loading:!0,error:null})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},e.next=6,fetch("".concat(p.root,"/marketing_campaigns/").concat(n.id),r);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?w(Lg(Lg({},b),{},{loading:!1,error:i.result})):(l&&l(n.id),d(vr.Success,f("CAMPAIGN_DELETED","Campaign deleted")),w(Lg(Lg({},b),{},{loading:!1,error:null})),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Lg(Lg({},b),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var t=jg(Og().mark((function t(e){var r,o,i,c,s,l;return Og().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(vr.Info,f("LOADING","Loading")),w(Lg(Lg({},b),{},{loading:!0,error:null})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},t.next=6,fetch("".concat(p.root,"/marketing_campaigns/").concat(n.id,"/conditions/").concat(e),r);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?w(Lg(Lg({},b),{},{loading:!1,error:i.result})):(d(vr.Success,f("CONDITION_DELETED","Condition deleted")),w(Lg(Lg({},b),{},{loading:!1,error:null})),u&&(s=null==a?void 0:a.campaigns.map((function(t){if(t.id===n.id){var e=t.conditions.filter((function(t){return t.id!==i.result.id}));return Lg(Lg({},t),{},{conditions:e})}return t})),u(s)),l=null==v||null===(c=v.campaign)||void 0===c?void 0:c.conditions.filter((function(t){var e;return t.type!==(null==i||null===(e=i.result)||void 0===e?void 0:e.type)})),m(Lg(Lg({},v),{},{campaign:Lg(Lg({},null==v?void 0:v.campaign),{},{conditions:l})}))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w(Lg(Lg({},b),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=jg(Og().mark((function t(e,r){var n,o,i,a,c;return Og().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,L(Lg(Lg({},S),{},{loading:!0})),(n=wg(e)).forEach((function(t){Object.keys(t).forEach((function(e){null===t[e]&&delete t[e]}))})),o={conditions:JSON.stringify(n),contact_type:r},i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(o)},t.next=8,fetch("".concat(p.root,"/marketing_campaigns/audience"),i);case 8:return a=t.sent,t.next=11,a.json();case 11:(c=t.sent).error?L(Lg(Lg({},S),{},{loading:!1,error:c.result})):L(Lg(Lg({},S),{},{loading:!1,error:null,audience:null==c?void 0:c.result,pagination:null==c?void 0:c.pagination})),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),L(Lg(Lg({},S),{},{loading:!1,error:t.t0.message}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r){return t.apply(this,arguments)}}(),G=function(){var t=jg(Og().mark((function t(){var e,r,n,o,i,a,c;return Og().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,k(Lg(Lg({},P),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},(r=[]).push({attribute:"key",value:"key_operation"}),n="".concat(p.root,"/config_categories?where=").concat(JSON.stringify(r)),t.next=8,fetch(n,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,a=i.error,c=i.result,!a&&c.length>0?F(c[0].id):k(Lg(Lg({},P),{},{loading:!1,error:c})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),k(Lg(Lg({},P),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),F=function(){var t=jg(Og().mark((function t(e){var r,n,o,i,a,c,u,s;return Og().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,k(Lg(Lg({},P),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},(n=[]).push({attribute:"parent_category_id",value:parseInt(e)}),o="".concat(p.root,"/config_categories?orderBy=rank&where=").concat(JSON.stringify(n)),t.next=8,fetch(o,r);case 8:return i=t.sent,t.next=11,i.json();case 11:a=t.sent,c=a.error,u=a.result,c?k(Lg(Lg({},P),{},{loading:!0,error:u})):(s=u.filter((function(t){return!Ig.includes(t.key)})).map((function(t){var e,r=null===(e=t.configs)||void 0===e?void 0:e.filter((function(t){return!Ag.includes(t.key)})).sort((function(t,e){return 1*t.rank>1*e.rank?1:-1}));return Lg(Lg({},t),{},{configs:wg(r)})})),k(Lg(Lg({},P),{},{loading:!1,categories:s}))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),k(Lg(Lg({},P),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){0===Object.keys(n).length?(E(!0),w(Lg(Lg({},b),{},{changes:{enabled:!0,conditions:[],status:"pending"}}))):(E(!1),T()),m(Lg(Lg({},v),{},{campaign:n}))}),[n]),Object(o.useEffect)((function(){var t,e;D(null==v||null===(t=v.campaign)||void 0===t?void 0:t.conditions,null==v||null===(e=v.campaign)||void 0===e?void 0:e.contact_type)}),[JSON.stringify(null==v||null===(e=v.campaign)||void 0===e?void 0:e.conditions)]),Object(o.useEffect)((function(){var t,e,r,n,o,i;if(x&&null!=b&&null!==(t=b.changes)&&void 0!==t&&t.conditions){var a=(null==b||null===(e=b.changes)||void 0===e?void 0:e.contact_type)||(null==v||null===(r=v.campaign)||void 0===r?void 0:r.contact_type);(null==b||null===(n=b.changes)||void 0===n||null===(o=n.conditions)||void 0===o?void 0:o.length)>0&&a&&D(null==b||null===(i=b.changes)||void 0===i?void 0:i.conditions,a)}}),[JSON.stringify(null==b||null===(r=b.changes)||void 0===r?void 0:r.conditions)]),Object(o.useEffect)((function(){G()}),[]),i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(c,bg({},t,{isAddMode:x,audienceState:S,campaignState:v,formState:b,handleChangeItem:function(t,e){var r=Lg(Lg({},b.changes),{},_g({},t,e));"scheduled_at"===t&&(r.status=e?"scheduled":"pending"),w(Lg(Lg({},b),{},{changes:r}))},handleChangeInput:function(t){w(Lg(Lg({},b),{},{changes:Lg(Lg({},b.changes),{},_g({},t.target.name,t.target.value))}))},handleAddCampaign:A,handleDeleteCampaign:C,handleUpdateClick:I,handleRemoveKey:function(t){var e=Lg({},null==b?void 0:b.changes);delete e[t],w(Lg(Lg({},b),{},{changes:e}))},handleChangeContactData:function(t){var e,r,n=null!==(e=b.changes)&&void 0!==e&&e.contact_data?Lg(Lg({},null===(r=b.changes)||void 0===r?void 0:r.contact_data),{},_g({},t.target.name,t.target.value)):_g({},t.target.name,t.target.value);w(Lg(Lg({},b),{},{changes:Lg(Lg({},b.changes),{},{contact_data:n})}))},handleChangeParentContact:function(t,e){var r,n,o=null!==(r=b.changes)&&void 0!==r&&r.contact_data?Lg(Lg({},null===(n=b.changes)||void 0===n?void 0:n.contact_data),{},_g({},t,e)):_g({},t,e);w(Lg(Lg({},b),{},{changes:Lg(Lg({},b.changes),{},{contact_data:o})}))},setCampaignState:m,handleDeleteCondition:N,categoryList:P,handleUpdateCategoryList:function(t){k(Lg(Lg({},P),{},{categories:t}))}})))};function Ng(){return Ng=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ng.apply(this,arguments)}function Dg(){Dg=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Gg(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Gg(t){return Gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gg(t)}function Fg(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ug(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Bg(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ug(Object(r),!0).forEach((function(e){Rg(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ug(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Rg(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Yg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yg(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yg(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Cg.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Cg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var zg=function(t){var e=t.UIComponent,r=t.campaignState,n=t.isAddMode,a=t.formState,c=t.handleChangeItem,u=t.handleChangeContactData,s=t.handleSuccessUpdateCampaign,l=t.campaignList,f=t.handleChangeParentContact,p=Mg(er(),1)[0],h=Mg(hr(),1)[0].token,d=Mg(br(),2)[1].showToast,y=Mg(Ir(),2)[1],v=Mg(Object(o.useState)({loading:!1,changes:{},error:null}),2),m=v[0],g=v[1],b=function(){var t,e=(t=Dg().mark((function t(){var e,n,o,i,a,c,u;return Dg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in t.prev=0,d(vr.Info,y("LOADING","Loading")),g(Bg(Bg({},m),{},{loading:!0,error:null})),n=Bg({},null==m?void 0:m.changes))("object"===Gg(n[o])&&null!==n[o]||Array.isArray(n[o]))&&(n[o]=JSON.stringify(n[o])),null==n||delete n.contact_type;return i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(n)},t.next=8,fetch("".concat(p.root,"/marketing_campaigns/").concat(null==r||null===(e=r.campaign)||void 0===e?void 0:e.id),i);case 8:return a=t.sent,t.next=11,a.json();case 11:(c=t.sent).error?g(Bg(Bg({},m),{},{loading:!1,error:c.result})):(g(Bg(Bg({},m),{},{loading:!1,error:null})),s&&(u=null==l?void 0:l.campaigns.filter((function(t){var e;return t.id===(null==r||null===(e=r.campaign)||void 0===e?void 0:e.id)&&Object.assign(t,c.result),!0})),s(u)),d(vr.Success,y("CAMPAIGN_SAVED","Campaign saved"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),g(Bg(Bg({},m),{},{loading:!1,error:t.t0.message}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Fg(i,n,o,a,c,"next",t)}function c(t){Fg(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t,e;n||null!=r&&r.campaign&&Object.keys(null==r?void 0:r.campaign).length>0&&g(Bg(Bg({},m),{},{changes:{contact_type:(null==r||null===(t=r.campaign)||void 0===t?void 0:t.contact_type)||"",contact_data:(null==r||null===(e=r.campaign)||void 0===e?void 0:e.contact_data)||{}}}))}),[null==r?void 0:r.campaign]),Object(o.useEffect)((function(){var t,e;n&&(null!=a&&a.changes&&Object.keys(null==a?void 0:a.changes).length>0&&g(Bg(Bg({},m),{},{changes:{contact_type:(null==a||null===(t=a.changes)||void 0===t?void 0:t.contact_type)||"",contact_data:(null==a||null===(e=a.changes)||void 0===e?void 0:e.contact_data)||{}}})))}),[null==a?void 0:a.changes]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Ng({},t,{contactState:m,handleChangeType:function(t,e){var r=Bg(Bg({},null==m?void 0:m.changes),{},Rg({},t,e));g(Bg(Bg({},m),{},{changes:r})),n&&c&&c(t,e)},handleChangeData:function(t){var e,r=Bg(Bg({},null===(e=m.changes)||void 0===e?void 0:e.contact_data),{},Rg({},t.target.name,t.target.value));g(Bg(Bg({},m),{},{changes:Bg(Bg({},m.changes),{},{contact_data:r})})),n&&u&&u(t)},handleUpdateContact:b,handleChangeContact:function(t,e){var r,o=Bg(Bg({},null===(r=m.changes)||void 0===r?void 0:r.contact_data),{},Rg({},t,e));g(Bg(Bg({},m),{},{changes:Bg(Bg({},m.changes),{},{contact_data:o})})),n&&f&&f(t,e)}})))};function $g(){return $g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$g.apply(this,arguments)}function qg(t){return function(t){if(Array.isArray(t))return eb(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||tb(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jg(){Jg=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Vg(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Vg(t){return Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vg(t)}function Hg(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Wg(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Hg(i,n,o,a,c,"next",t)}function c(t){Hg(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Kg(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Zg(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kg(Object(r),!0).forEach((function(e){Xg(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xg(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||tb(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tb(t,e){if(t){if("string"==typeof t)return eb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eb(t,e):void 0}}function eb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}zg.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},zg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rb=function(t){var e=t.campaignState,r=t.campaignList,n=t.UIComponent,a=t.handleSuccessUpdateCampaign,c=t.type,u=t.isAddMode,s=t.setCampaignState,l=t.formState,f=Qg(Ir(),2)[1],p=Qg(er(),1)[0],h=Qg(hr(),1)[0].token,d=Qg(br(),2)[1].showToast,y=Qg(Object(o.useState)({loading:!1,changes:{},error:null}),2),v=y[0],m=y[1],g=function(){var t=Wg(Jg().mark((function t(){var n,o,i,c,u,l;return Jg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in t.prev=0,d(vr.Info,f("LOADING","Loading")),m(Zg(Zg({},v),{},{loading:!0,error:null})),n=Zg({},null==v?void 0:v.changes))("object"===Vg(n[o])&&null!==n[o]||Array.isArray(n[o]))&&(n[o]=JSON.stringify(n[o]));return i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(n)},t.next=8,fetch("".concat(p.root,"/marketing_campaigns/").concat(null==e?void 0:e.campaign.id,"/conditions/").concat(v.changes.id),i);case 8:return c=t.sent,t.next=11,c.json();case 11:(u=t.sent).error?m(Zg(Zg({},v),{},{loading:!1,error:u.result})):(m(Zg(Zg({},v),{},{loading:!1,error:null,changes:{}})),a&&(l=null==r?void 0:r.campaigns.map((function(t){if(t.id===(null==e?void 0:e.campaign.id)){var r=[];return t.conditions.find((function(t){return t.id===u.result.id}))&&(r=t.conditions.filter((function(t){return t.id!==u.result.id}))),r.push(u.result),s(Zg(Zg({},e),{},{campaign:Zg(Zg({},t),{},{conditions:r})})),Zg(Zg({},t),{},{conditions:r})}return t})),a(l)),d(vr.Success,f("CONDITION_SAVED","Condition saved"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),m(Zg(Zg({},v),{},{loading:!1,error:t.t0.message}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=Wg(Jg().mark((function t(){var n,o,i,c,u,l;return Jg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in t.prev=0,d(vr.Info,f("LOADING","Loading")),m(Zg(Zg({},v),{},{loading:!0,error:null})),n=Zg({},null==v?void 0:v.changes))("object"===Vg(n[o])&&null!==n[o]||Array.isArray(n[o]))&&(n[o]=JSON.stringify(n[o]));return i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(n)},t.next=8,fetch("".concat(p.root,"/marketing_campaigns/").concat(null==e?void 0:e.campaign.id,"/conditions"),i);case 8:return c=t.sent,t.next=11,c.json();case 11:(u=t.sent).error?m(Zg(Zg({},v),{},{loading:!1,error:u.result})):(m(Zg(Zg({},v),{},{loading:!1,error:null,changes:{}})),a&&(l=null==r?void 0:r.campaigns.map((function(t){if(t.id===(null==e?void 0:e.campaign.id)){var r=qg(t.conditions);return r.push(u.result),s(Zg(Zg({},e),{},{campaign:Zg(Zg({},t),{},{conditions:r})})),Zg(Zg({},t),{},{conditions:r})}return t})),a(l)),d(vr.Success,f("CONDITION_SAVED","Condition saved"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),m(Zg(Zg({},v),{},{loading:!1,error:t.t0.message}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){if(u){var t,r=null==l||null===(t=l.changes)||void 0===t?void 0:t.conditions.find((function(t){return t.type===c}));m(Zg(Zg({},v),{},{changes:Zg({},r)}))}else{var n,o=null==e||null===(n=e.campaign)||void 0===n?void 0:n.conditions.find((function(t){return t.type===c}));m(Zg(Zg({},v),{},{changes:Zg(Zg(Zg(Zg(Zg({},(null==o?void 0:o.id)&&{id:null==o?void 0:o.id}),(null==o?void 0:o.date_condition)&&{date_condition:null==o?void 0:o.date_condition}),(null==o?void 0:o.date)&&{date:null==o?void 0:o.date}),(null==o?void 0:o.max_date)&&{max_date:null==o?void 0:o.max_date}),{},{type:c})}))}}),[null==e?void 0:e.campaign]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,$g({},t,{ruleFormState:v,handleChangeValue:function(t,e){if("condition"!==t){var r=Zg(Zg({},v.changes),{},Xg({},t,parseInt(e)));m(Zg(Zg({},v),{},{changes:r}))}else{var n,o=Zg(Zg({},v.changes),{},(Xg(n={},t,e),Xg(n,"value",null),n));m(Zg(Zg({},v),{},{changes:o}))}},handleUpdateRule:g,handleAddRule:b,handleChangeDate:function(t,e){var r=Zg(Zg({},v.changes),{},{date:"".concat(t," 00:00:00"),max_date:"".concat(e," 00:00:00")});m(Zg(Zg({},v),{},{changes:r}))},handleChangeOption:function(t){var e=Zg(Zg({},v.changes),{},{date_condition:t,date:null});m(Zg(Zg({},v),{},{changes:e}))},handleChangeDateTime:function(t){var e=Zg(Zg({},v.changes),{},{date:t,max_date:null});m(Zg(Zg({},v),{},{changes:e}))}})))};function nb(){return nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nb.apply(this,arguments)}function ob(t){return function(t){if(Array.isArray(t))return db(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||hb(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ib(){ib=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ab(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ab(t){return ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ab(t)}function cb(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ub(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){cb(i,n,o,a,c,"next",t)}function c(t){cb(i,n,o,a,c,"throw",t)}a(void 0)}))}}function sb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lb(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sb(Object(r),!0).forEach((function(e){fb(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fb(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||hb(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hb(t,e){if(t){if("string"==typeof t)return db(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?db(t,e):void 0}}function db(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}rb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var yb=function(t){var e=t.campaignState,r=t.campaignList,n=t.UIComponent,a=t.handleSuccessUpdateCampaign,c=t.type,u=t.isAddMode,s=t.setCampaignState,l=t.formState,f=pb(Ir(),2)[1],p=pb(er(),1)[0],h=pb(hr(),1)[0].token,d=pb(br(),2)[1].showToast,y=pb(Object(o.useState)({loading:!1,changes:{},error:null}),2),v=y[0],m=y[1],g=function(){var t=ub(ib().mark((function t(){var n,o,i,c,u,l;return ib().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in t.prev=0,d(vr.Info,f("LOADING","Loading")),m(lb(lb({},v),{},{loading:!0,error:null})),n=lb({},null==v?void 0:v.changes))("object"===ab(n[o])&&null!==n[o]||Array.isArray(n[o]))&&(n[o]=JSON.stringify(n[o]));return i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(n)},t.next=8,fetch("".concat(p.root,"/marketing_campaigns/").concat(null==e?void 0:e.campaign.id,"/conditions/").concat(v.changes.id),i);case 8:return c=t.sent,t.next=11,c.json();case 11:(u=t.sent).error?m(lb(lb({},v),{},{loading:!1,error:u.result})):(m(lb(lb({},v),{},{loading:!1,error:null,changes:{}})),a&&(l=null==r?void 0:r.campaigns.map((function(t){if(t.id===(null==e?void 0:e.campaign.id)){var r=[];return t.conditions.find((function(t){return t.id===u.result.id}))&&(r=t.conditions.filter((function(t){return t.id!==u.result.id}))),r.push(u.result),s(lb(lb({},e),{},{campaign:lb(lb({},t),{},{conditions:r})})),lb(lb({},t),{},{conditions:r})}return t})),a(l)),d(vr.Success,f("CONDITION_SAVED","Condition saved"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),m(lb(lb({},v),{},{loading:!1,error:t.t0.message}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=ub(ib().mark((function t(){var n,o,i,c,u,l;return ib().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in t.prev=0,d(vr.Info,f("LOADING","Loading")),m(lb(lb({},v),{},{loading:!0,error:null})),n=lb({},null==v?void 0:v.changes))("object"===ab(n[o])&&null!==n[o]||Array.isArray(n[o]))&&(n[o]=JSON.stringify(n[o]));return i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(n)},t.next=8,fetch("".concat(p.root,"/marketing_campaigns/").concat(null==e?void 0:e.campaign.id,"/conditions"),i);case 8:return c=t.sent,t.next=11,c.json();case 11:(u=t.sent).error?m(lb(lb({},v),{},{loading:!1,error:u.result})):(m(lb(lb({},v),{},{loading:!1,error:null,changes:{}})),a&&(l=null==r?void 0:r.campaigns.map((function(t){if(t.id===(null==e?void 0:e.campaign.id)){var r=ob(t.conditions);return r.push(u.result),s(lb(lb({},e),{},{campaign:lb(lb({},t),{},{conditions:r})})),lb(lb({},t),{},{conditions:r})}return t})),a(l)),d(vr.Success,f("CONDITION_SAVED","Condition saved"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),m(lb(lb({},v),{},{loading:!1,error:t.t0.message}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){if(u){var t,r=null==l||null===(t=l.changes)||void 0===t?void 0:t.conditions.find((function(t){return t.type===c}));m(lb(lb({},v),{},{changes:lb({},r)}))}else{var n,o=null==e||null===(n=e.campaign)||void 0===n?void 0:n.conditions.find((function(t){return t.type===c}));m(lb(lb({},v),{},{changes:lb(lb(lb(lb({},(null==o?void 0:o.id)&&{id:null==o?void 0:o.id}),(null==o?void 0:o.condition)&&{condition:null==o?void 0:o.condition}),(null==o?void 0:o.value)&&{value:null==o?void 0:o.value}),{},{type:c})}))}}),[null==e?void 0:e.campaign]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,nb({},t,{ruleFormState:v,handleChangeValue:function(t,e){if("condition"!==t){var r=lb(lb({},v.changes),{},fb({},t,parseInt(e)));m(lb(lb({},v),{},{changes:r}))}else{var n,o=lb(lb({},v.changes),{},(fb(n={},t,e),fb(n,"value",null),n));m(lb(lb({},v),{},{changes:o}))}},handleUpdateRule:g,handleAddRule:b})))};function vb(){return vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vb.apply(this,arguments)}function mb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return gb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gb(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}yb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},yb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bb=function(t){var e,r=t.UIComponent,n=t.handleEditProduct,o=mb(Rn(),2),a=o[0],c=o[1],u=c.updateProduct,s=c.removeProduct,l=c.clearCart,f=mb(jn(),1)[0],p=(null===(e=f.order)||void 0===e?void 0:e.quantity)||0,h=(f.configs.max_product_amount?parseInt(f.configs.max_product_amount):100)-p;return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,vb({},t,{carts:a.carts,orderState:a,clearCart:l,removeProduct:s,changeQuantity:function(t,e){0===e?s(t):u({id:t.id,business_id:t.business_id,code:t.code,quantity:e})},getProductMax:function(t){var e=t.inventoried?t.stock:h,r=t.quantity+e-t.balance;return r<t.quantity?t.quantity:r},offsetDisabled:function(t){return(t.inventoried?t.stock:h)-(t.balance-t.quantity)},handleEditProduct:n})))};function wb(t){return wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wb(t)}function Ob(){return Ob=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ob.apply(this,arguments)}function xb(){xb=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==wb(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Eb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jb(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Eb(Object(r),!0).forEach((function(e){Sb(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Eb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sb(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lb(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function _b(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Lb(i,n,o,a,c,"next",t)}function c(t){Lb(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Pb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return kb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kb(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}bb.propTypes={UIComponent:c.a.elementType,handleEditProduct:c.a.func,validationFieldsType:c.a.string};var Tb=function(t){var e=t.businessId,r=t.actionsBeforePlace,n=t.handleCustomClick,a=t.onPlaceOrderClick,c=t.UIComponent,u=Pb(er(),1)[0],s=Pb(Object(o.useState)(!1),2),l=s[0],f=s[1],p=Pb(Object(o.useState)(null),2),h=p[0],d=p[1],y=Pb(Rn(),2),v=y[0],m=y[1].placeCart,g=Pb(Object(o.useState)({business:null,loading:!0,error:null}),2),b=g[0],w=g[1],O=Pb(Object(o.useState)(null),2),x=O[0],E=O[1],j=v.carts["businessId:".concat(e)],S=function(){var t=_b(xb().mark((function t(){var r,n,o;return xb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=["id","name","email","cellphone","address","paymethods","logo","location"],t.next=4,u.businesses(e).select(r).get();case 4:n=t.sent,o=n.content.result,w(jb(jb({},b),{},{loading:!1,business:o})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),w(jb(jb({},b),{},{loading:!1,error:t.t0}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=_b(xb().mark((function t(){var e,o,i,c,u;return xb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=x.data,["stripe","stripe_connect","stripe_direct"].includes(x.paymethod.gateway)&&(o={source_id:x.data.id}),i={paymethod_id:x.paymethodId,paymethod_data:x.data,offer_id:j.offer_id,amount:j.total},1===v.options.type&&(i=jb(jb({},i),{},{delivery_zone_id:j.delivery_zone_id})),!n){t.next=7;break}return n(i,x,j),t.abrupt("return");case 7:return i=jb(jb({},i),{},{paymethod_data:o}),f(!0),t.next=11,m(j.uuid,i);case 11:if(null==(c=t.sent)||!c.error){t.next=15;break}return d(null==c?void 0:c.result),t.abrupt("return");case 15:if(2!==(null==(u=null==c?void 0:c.result)||null===(e=u.paymethod_data)||void 0===e?void 0:e.status)||!r){t.next=19;break}return t.next=19,r(x,c.result);case 19:f(!1),a&&a(i,x,u);case 21:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){S()}),[e]),Object(o.useEffect)((function(){if(j&&1===j.status){var t={paymethod_id:x.paymethodId,paymethod_data:x.data,delivery_zone_id:j.delivery_zone_id,offer_id:j.offer_id,amount:j.total};a&&a(t,x,j)}}),[j]),i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(c,Ob({},t,{cart:j,placing:l,errors:h,orderOptions:v.options,paymethodSelected:x,businessDetails:b,handlePaymethodChange:function(t){E(t)},handlerClickPlaceOrder:L})))};function Ib(t){return Ib="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ib(t)}function Ab(){return Ab=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ab.apply(this,arguments)}function Cb(){Cb=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ib(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Nb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Db(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Nb(Object(r),!0).forEach((function(e){Gb(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Gb(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fb(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Ub(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Fb(i,n,o,a,c,"next",t)}function c(t){Fb(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Bb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Rb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rb(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Tb.propTypes={UIComponent:c.a.elementType,handleCustomClick:c.a.func,onPlaceOrderClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Tb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Mb=function(t){var e=t.UIComponent,r=Bb(er(),1)[0],n=Bb(hr(),1)[0].token,a=Bb(br(),2)[1].showToast,c=Bb(Ir(),2)[1],u=Bb(yo(),2)[1].loadValidationFields,s=["city_dropdown_option","address","zipcode","address_notes"],l=Bb(Object(o.useState)({fields:[],loading:!1,error:null}),2),f=l[0],p=l[1],h=Bb(Object(o.useState)({loading:!1,error:null}),2),d=h[0],y=h[1],v=function(){var t=Ub(Cb().mark((function t(){var e,o,i,a,c;return Cb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(Db(Db({},f),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=5,fetch("".concat(r.root,"/checkoutfields"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error||(a=i.result.filter((function(t){return!s.includes(t.code)})),c=[],["name","middle_name","lastname","second_lastname","email","mobile_phone","city_dropdown_option","address","zipcode","address_notes","coupon","driver_tip"].forEach((function(t){var e=a.findIndex((function(e){return e.code===t}));if(-1!==e){var r=a[e];a.splice(e,1),c.push(r)}})),p({fields:c,loading:!1})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),p(Db(Db({},f),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=Ub(Cb().mark((function t(e,o){var i,s,l,h;return Cb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(vr.Info,c("LOADING","Loading")),y(Db(Db({},d),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(o)},t.next=6,fetch("".concat(r.root,"/checkoutfields/").concat(e),i);case 6:return s=t.sent,t.next=9,s.json();case 9:(l=t.sent).error?y({loading:!1,error:l.result}):(y({loading:!1,error:null}),a(vr.Success,c("FIELD_SAVED","Field saved")),h=f.fields.filter((function(t){return t.id===e&&Object.assign(t,l.result),!0})),p(Db(Db({},f),{},{fields:h})),u&&u()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),y({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){v()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Ab({},t,{checkoutFieldsState:f,handleChangeCheckoutFieldSetting:m})))};function Yb(t){return Yb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yb(t)}function zb(){return zb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zb.apply(this,arguments)}function $b(){$b=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Yb(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function qb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Jb(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qb(Object(r),!0).forEach((function(e){Vb(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Vb(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hb(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Wb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Kb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kb(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Mb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Mb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Zb=function(t){var e=t.UIComponent,r=Wb(er(),1)[0],n=Wb(hr(),1)[0].token,a=Wb(Object(o.useState)(null),2),c=a[0],u=a[1],s=Wb(Object(o.useState)({result:null,loading:!1,error:null}),2),l=s[0],f=s[1],p=function(){var t,e=(t=$b().mark((function t(){var e,o,i;return $b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Jb(Jb({},l),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({password:c})},t.next=5,fetch("".concat(r.root,"/users/check_password"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error?f(Jb(Jb({},l),{},{loading:!1,error:i.result})):f(Jb(Jb({},l),{},{loading:!1,result:i.result,error:null})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),f(Jb(Jb({},l),{},{loading:!1,error:t.t0}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Hb(i,n,o,a,c,"next",t)}function c(t){Hb(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,zb({},t,{checkPasswordStatus:l,handleChangePassword:function(t){u(t)},getCheckPassword:p})))};function Xb(t){return Xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xb(t)}function Qb(){return Qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qb.apply(this,arguments)}function tw(){tw=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Xb(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ew(t){return function(t){if(Array.isArray(t))return sw(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||uw(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rw(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=uw(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function nw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ow(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nw(Object(r),!0).forEach((function(e){iw(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nw(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function iw(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aw(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function cw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||uw(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uw(t,e){if(t){if("string"==typeof t)return sw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sw(t,e):void 0}}function sw(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Zb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var lw=function(t){var e=t.cities,r=t.propsToFetch,n=t.UIComponent,a=cw(er(),1)[0],c=cw(Object(o.useState)({cities:[],loading:!0,error:null}),2),u=c[0],s=c[1],l=function(){var t,e=(t=tw().mark((function t(){var e,n,o,i,c,l,f,p;return tw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(ow(ow({},u),{},{loading:!0})),t.next=4,a.countries().select(r).get();case 4:if(e=t.sent,n=e.content,o=n.error,i=n.result,c=[],!o){l=rw(i);try{for(l.s();!(f=l.n()).done;)null!=(p=f.value)&&p.enabled&&(c=[].concat(ew(c),ew(null==p?void 0:p.cities)))}catch(t){l.e(t)}finally{l.f()}s(ow(ow({},u),{},{loading:!1,cities:c}))}t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),s(ow(ow({},u),{},{loading:!1,error:t.t0.message}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){aw(i,n,o,a,c,"next",t)}function c(t){aw(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){e?s(ow(ow({},u),{},{loading:!1,cities:e})):l()}),[]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,Qb({},t,{citiesList:u})))};function fw(t){return fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fw(t)}function pw(){return pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pw.apply(this,arguments)}function hw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function dw(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hw(Object(r),!0).forEach((function(e){yw(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hw(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yw(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vw(){vw=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==fw(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function mw(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function gw(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){mw(i,n,o,a,c,"next",t)}function c(t){mw(i,n,o,a,c,"throw",t)}a(void 0)}))}}function bw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ww(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ww(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ww(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}lw.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lw.defaultProps={propsToFetch:["id","name","enabled","cities"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ow=function(t){var e=t.UIComponent,r=t.isSearchByName,n=t.countryCode,a=t.filterList,c=t.handleChangeFilterList,u=t.onClose,s=t.handleChangeCode,l=bw(er(),1)[0],f=bw(Object(o.useState)({countries:[],loading:!0,error:null}),2),p=f[0],h=f[1],d=bw(Object(o.useState)(null),2),y=d[0],v=d[1],m=bw(Object(o.useState)(n),2),g=m[0],b=m[1],w=new RegExp(/^[A-Za-z0-9\s]+$/g),O=function(){var t=gw(vw().mark((function t(){return vw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:s(g),u&&u();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=gw(vw().mark((function t(){var e,r,n,o,i;return vw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=3;break}return c(dw(dw({},a),{},{businessIds:null})),t.abrupt("return");case 3:return t.prev=3,h(dw(dw({},p),{},{loading:!0})),t.next=7,l.businesses().asDashboard().get({headers:{"X-Country-Code-X":g}});case 7:e=t.sent,r=e.content,n=r.error,o=r.result,n||(i=o.map((function(t){return t.id})),c(dw(dw({},a),{},{businessIds:i})),h(dw(dw({},p),{},{loading:!1}))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),h(dw(dw({},p),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=gw(vw().mark((function t(){var e,n,o,i,a,c,u,s,f;return vw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(dw(dw({},p),{},{loading:!0})),e=null,n=[],y&&(o=[],i=w.test(y),r&&o.push({attribute:"name",value:{condition:"ilike",value:i?encodeURI("%".concat(y,"%")):"%".concat(y,"%")}}),n.push({conector:"OR",conditions:o})),n.length&&(e={conditions:n,conector:"AND"}),a=e?l.countries().where(e):l.countries(),t.next=9,a.get();case 9:c=t.sent,u=c.content,s=u.error,f=u.result,h(dw(dw({},p),{},s?{loading:!1,error:f}:{loading:!1,countries:f})),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),h(dw(dw({},p),{},{loading:!1,error:[t.t0.message]}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){E()}),[y]),Object(o.useEffect)((function(){var t;y||null!=p&&p.loading||!((null==p||null===(t=p.countries)||void 0===t?void 0:t.length)<=1)||u&&u()}),[y,p]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,pw({},t,{searchValue:y,countriesState:p,onSearch:v,handleClickFilterButton:O,code:g,setCode:b})))};function xw(){return xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xw.apply(this,arguments)}function Ew(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jw(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ew(Object(r),!0).forEach((function(e){Sw(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ew(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sw(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _w(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Ow.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ow.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Pw=function(t){var e,r=t.businessId,n=t.price,a=t.UIComponent,c=Lw(Rn(),2),u=c[0],s=c[1].applyCoupon,l=Lw(Object(o.useState)({open:!1,content:null,error:!1}),2),f=l[0],p=l[1],h=Lw(Ir(),2)[1],d=(null==u?void 0:u.carts)&&r&&(null==u||null===(e=u.carts["businessId:".concat(r)])||void 0===e?void 0:e.coupon)||null,y=Lw(Object(o.useState)(null),2),v=y[0],m=y[1],g=function(){s({business_id:r,coupon:null})};return Object(o.useEffect)((function(){n<1&&(g(),p(jw(jw({},f),{},{open:!0,content:h("COUPON_TOTAL_ERROR","The total value of the cart with discount must be at least 1$"),error:!0})))}),[n]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,xw({},t,{couponDefault:d,couponInput:v,onChangeInputCoupon:function(t){return m(t)},handleButtonApplyClick:function(){s({business_id:r,coupon:v})},handleRemoveCouponClick:g,confirm:f,setConfirm:p})))};function kw(t){return kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kw(t)}function Tw(){return Tw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tw.apply(this,arguments)}function Iw(t){return function(t){if(Array.isArray(t))return Rw(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Bw(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Aw(){Aw=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==kw(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Cw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Nw(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Cw(Object(r),!0).forEach((function(e){Dw(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cw(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Dw(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gw(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Fw(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Gw(i,n,o,a,c,"next",t)}function c(t){Gw(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Uw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Bw(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bw(t,e){if(t){if("string"==typeof t)return Rw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rw(t,e):void 0}}function Rw(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Pw.propTypes={UIComponent:c.a.elementType,isDisabled:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Pw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Mw=function(t){var e=t.UIComponent,r=t.type,n=t.handleChangeContent,a=t.onClose,c=Uw(er(),1)[0],u=Uw(hr(),1)[0].token,s=Uw(br(),2)[1].showToast,l=Uw(Ir(),2)[1],f=Uw(Object(o.useState)({images:[],loading:!1,error:null}),2),p=f[0],h=f[1],d=Uw(Object(o.useState)({loading:!1,change:{},error:null}),2),y=d[0],v=d[1],m=Uw(Object(o.useState)({loading:!1,error:null}),2),g=m[0],b=m[1],w=Uw(Object(o.useState)({loading:!1,changes:{},error:null}),2),O=w[0],x=w[1],E=Uw(Object(o.useState)(null),2),j=E[0],S=E[1],L=function(){var t=Fw(Aw().mark((function t(){var e,r,n;return Aw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Nw(Nw({},p),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},t.next=5,fetch("".concat(c.root,"/files?where={%22type%22:1}"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(n=t.sent).error||h({images:n.result,loading:!1}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),h(Nw(Nw({},p),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var t=Fw(Aw().mark((function t(){var e,r,n,o,i;return Aw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,l("LOADING","Loading")),v(Nw(Nw({},y),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(y.change)},t.next=6,fetch("".concat(c.root,"/files"),e);case 6:return r=t.sent,t.next=9,r.json();case 9:(n=t.sent).error?v(Nw(Nw({},y),{},{loading:!1,error:n.result})):(v({loading:!1,change:{},error:null}),i=[].concat(Iw(p.images),[n.result]),h(Nw(Nw({},p),{},{images:i})),s(vr.Success,l("GALLERY_IMAGE_ADDED","Business gallery image added")),S(null==n||null===(o=n.result)||void 0===o?void 0:o.source)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v(Nw(Nw({},y),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),P=function(){var t=Fw(Aw().mark((function t(e){var r,n,o,i;return Aw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,l("LOADING","Loading")),b(Nw(Nw({},g),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},t.next=6,fetch("".concat(c.root,"/files/").concat(e),r);case 6:return n=t.sent,t.next=9,n.json();case 9:(o=t.sent).error?b({loading:!1,error:o.result}):(b({loading:!1,error:null}),i=p.images.filter((function(t){return t.id!==e})),h(Nw(Nw({},p),{},{images:i})),s(vr.Success,l("FILE_DELETED","File deleted"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){0!==Object.keys(y.change).length&&_()}),[y.change]),Object(o.useEffect)((function(){L()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Tw({},t,{imageListState:p,insertImageState:y,formState:O,selectedImageUrl:j,setSelectedImageUrl:S,handleInsertImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){v(Nw(Nw({},y),{},{change:{source:e.result,type:1}}))},e.onerror=function(t){return console.log(t)}},handleDeleteImage:P,handleChangeFormState:function(t,e){x(Nw(Nw({},O),{},{changes:Nw(Nw({},O.changes),{},Dw({},t,e))}))},handleSave:function(t){var e,o=null!=t?t:null==O||null===(e=O.changes)||void 0===e?void 0:e.body;n(r,o),a()},handleDelete:function(){n(r,""),a()}})))};function Yw(t){return Yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yw(t)}function zw(){return zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zw.apply(this,arguments)}function $w(t){return function(t){if(Array.isArray(t))return Qw(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Xw(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Jw(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qw(Object(r),!0).forEach((function(e){Vw(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qw(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Vw(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hw(){Hw=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Yw(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Ww(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Kw(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ww(i,n,o,a,c,"next",t)}function c(t){Ww(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Zw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Xw(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xw(t,e){if(t){if("string"==typeof t)return Qw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qw(t,e):void 0}}function Qw(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Mw.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Mw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var tO=function(t){var e,r=t.asDashboard,n=t.UIComponent,a=t.paginationSettings,c=t.propsToFetch,u=t.initialPageSize,s=t.loadMorePageSize,l=t.isSearchByBusinessId,f=t.isSearchByBusinessName,p=t.isSearchByBusinessEmail,h=t.isSearchByBusinessPhone,d=t.noActiveStatusCondition,y=Zw(er(),1)[0],v=Zw(hr(),1)[0],m=Zw(Ir(),2)[1],g=Zw(br(),2)[1].showToast,b=["us","usa","united states","united states of american","ca","canada"],w=Zw(Object(o.useState)({loading:!1,error:null,businesses:[]}),2),O=w[0],x=w[1],E=Zw(Object(o.useState)({countries:[],loading:!0,error:null,enabled:!1}),2),j=E[0],S=E[1],L=Zw(Object(o.useState)({currentPage:"pages"===a.controlType&&a.initialPage&&a.initialPage>=1?a.initialPage-1:0,pageSize:null!==(e=a.pageSize)&&void 0!==e?e:10}),2),_=L[0],P=L[1],k=Zw(Object(o.useState)(null),2),T=k[0],I=k[1],A=Zw(Object(o.useState)(!0),2),C=A[0],N=A[1],D=Zw(Object(o.useState)(null),2),G=D[0],F=D[1],U=Zw(Object(o.useState)([]),2),B=U[0],R=U[1],M=function(){var t=Kw(Hw().mark((function t(e,n){var o,i,a,u,s;return Hw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=[],i=[],a={query:{page:n,page_size:e}},d||i.push({attribute:"enabled",value:C}),G&&i.push({attribute:"types",conditions:[{attribute:"id",value:G}]}),T&&(u=[],l&&u.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(T,"%"))}}),f&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(T,"%"))}}),p&&u.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(T,"%"))}}),h&&u.push({attribute:"phone",value:{condition:"ilike",value:encodeURI("%".concat(T,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(o={conditions:i,conector:"AND"}),s=r?y.setAccessToken(v.token).businesses().select(c).asDashboard().where(o):y.setAccessToken(v.token).businesses().select(c).where(o),t.next=10,s.get(a);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Y=function(){var t=Kw(Hw().mark((function t(){var e,r,n,o,i;return Hw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,S(Jw(Jw({},j),{},{loading:!0})),t.next=4,y.countries().get();case 4:e=t.sent,r=e.content,n=r.error,o=r.result,n?S(Jw(Jw({},j),{},{loading:!1,error:o})):(i=o.filter((function(t){return null==t?void 0:t.enabled})).some((function(t){var e,r;return b.includes(null==t||null===(e=t.code)||void 0===e?void 0:e.toLowerCase())||b.includes(null==t||null===(r=t.name)||void 0===r?void 0:r.toLowerCase())})),S(Jw(Jw({},j),{},{loading:!1,countries:o,enabled:i}))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),S(Jw(Jw({},j),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),z=function(){var t=Kw(Hw().mark((function t(){var e,r;return Hw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v.token){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,x(Jw(Jw({},O),{},{loading:!0})),t.next=6,M(u||_.pageSize,1);case 6:e=t.sent,x({loading:!1,businesses:e.content.error?[]:e.content.result,error:e.content.error?e.content.result:null}),e.content.error||P({currentPage:e.content.pagination.current_page,pageSize:0===e.content.pagination.page_size?_.pageSize:e.content.pagination.page_size,totalPages:e.content.pagination.total_pages,total:e.content.pagination.total,from:e.content.pagination.from,to:e.content.pagination.to}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),"Cancel"!==(null===t.t0||void 0===t.t0||null===(r=t.t0.constructor)||void 0===r?void 0:r.name)&&x(Jw(Jw({},O),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(){return t.apply(this,arguments)}}(),$=function(){var t=Kw(Hw().mark((function t(){var e;return Hw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(Jw(Jw({},O),{},{loading:!0})),t.prev=1,t.next=4,M(s,Math.ceil((null==_?void 0:_.to)/s)+1);case 4:e=t.sent,x({loading:!1,businesses:e.content.error?O.businesses:O.businesses.concat(e.content.result),error:e.content.error?e.content.result:null}),e.content.error||P({currentPage:e.content.pagination.current_page,pageSize:0===e.content.pagination.page_size?_.pageSize:e.content.pagination.page_size,totalPages:e.content.pagination.total_pages,total:e.content.pagination.total,from:e.content.pagination.from,to:e.content.pagination.to}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),"Cancel"!==t.t0.constructor.name&&x(Jw(Jw({},O),{},{loading:!1,error:[t.t0.message]}));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),q=function(){var t=Kw(Hw().mark((function t(e,r){var n;return Hw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(Jw(Jw({},O),{},{loading:!0})),t.prev=1,t.next=4,M(e,r);case 4:n=t.sent,x({loading:!1,businesses:n.content.error?O.businesses:n.content.result,error:n.content.error?n.content.result:null}),n.content.error||P({currentPage:n.content.pagination.current_page,pageSize:0===n.content.pagination.page_size?_.pageSize:n.content.pagination.page_size,totalPages:n.content.pagination.total_pages,total:n.content.pagination.total,from:n.content.pagination.from,to:n.content.pagination.to}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),"Cancel"!==t.t0.constructor.name&&x(Jw(Jw({},O),{},{loading:!1,error:[t.t0.message]}));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,r){return t.apply(this,arguments)}}(),J=function(){var t=Kw(Hw().mark((function t(e){var r,n,o,i,a,c,u=arguments;return Hw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]&&u[1],t.prev=1,g(vr.Info,m("LOADING","Loading")),n=Jw({businesses_id:B},r?{featured:e}:{enabled:e}),o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v.token)},body:JSON.stringify(n)},t.next=7,fetch("".concat(y.root,"/business"),o);case 7:return i=t.sent,t.next=10,i.json();case 10:null!=(a=t.sent)&&a.error?g(vr.Error,null==a?void 0:a.result):(c=r?null==O?void 0:O.businesses.map((function(t){return B.includes(null==t?void 0:t.id)?Jw(Jw({},t),{},{featured:e}):t})):null==O?void 0:O.businesses.filter((function(t){return!B.includes(null==t?void 0:t.id)})),x(Jw(Jw({},O),{},{businesses:c})),r||R([]),g(vr.Success,m("BUSINESS_UPDATED","Business updated"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),g(vr.Error,t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=Kw(Hw().mark((function t(){var e,r,n,o;return Hw().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g(vr.Info,m("LOADING","Loading")),e={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v.token)},body:JSON.stringify({businesses_id:B})},t.next=5,fetch("".concat(y.root,"/business"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:null!=(n=t.sent)&&n.error?g(vr.Error,null==n?void 0:n.result):(o=null==O?void 0:O.businesses.filter((function(t){return!B.includes(null==t?void 0:t.id)})),x(Jw(Jw({},O),{},{businesses:o})),R([]),g(vr.Success,m("BUSINESS_DELETED","Business deleted"))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),g(vr.Error,t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),H=function(t){var e=O.businesses.filter((function(e){return e.id!==t}));P(Jw(Jw({},_),{},{to:(null==_?void 0:_.to)-1,total:(null==_?void 0:_.total)-1})),x(Jw(Jw({},O),{},{businesses:e}))},W=function(t){var e=[].concat($w(O.businesses),[t]);P(Jw(Jw({},_),{},{to:(null==_?void 0:_.to)+1,total:(null==_?void 0:_.total)+1})),x(Jw(Jw({},O),{},{businesses:e}))};return Object(o.useEffect)((function(){O.loading||O.businesses.length>0||0!==(null==_?void 0:_.currentPage)&&0!==(null==_?void 0:_.total)&&(Math.ceil((null==_?void 0:_.total)/_.pageSize)>=(null==_?void 0:_.currentPage)?q(_.pageSize,_.currentPage):q(_.pageSize,_.currentPage-1))}),[O.businesses]),Object(o.useEffect)((function(){t.businesses?x(Jw(Jw({},O),{},{businesses:t.businesses})):z()}),[v,T,C,G]),Object(o.useEffect)((function(){Y()}),[]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,zw({},t,{pagination:_,searchValue:T,businessIds:B,businessList:O,selectedBusinessActiveState:C,onSearch:I,loadBusinesses:z,setBusinessIds:R,getPageBusinesses:q,loadMoreBusinesses:$,handleSucessAddBusiness:W,handleChangeBusinessIds:function(t){var e=B.includes(t)?B.filter((function(e){return e!==t})):[].concat($w(B),[t]);R(e)},handleEnableAllBusiness:J,handleChangeBusinessType:function(t){t!==G&&(x(Jw(Jw({},O),{},{businesses:[],loading:!0})),F(t))},handleSucessRemoveBusiness:H,handleSucessUpdateBusiness:function(t){if(O.businesses.find((function(e){return e.id===t.id})))if(C===(null==t?void 0:t.enabled)){var e=O.businesses.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0}));x(Jw(Jw({},O),{},{businesses:e}))}else H(t.id);else C===(null==t?void 0:t.enabled)?W(t):H(t.id)},handleDeleteMultiBusinesses:V,handleChangeBusinessActiveState:function(){N(!C)},countriesState:j})))};function eO(t){return eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eO(t)}function rO(){return rO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rO.apply(this,arguments)}function nO(t){return function(t){if(Array.isArray(t))return pO(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||fO(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oO(){oO=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==eO(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function iO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function aO(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?iO(Object(r),!0).forEach((function(e){cO(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iO(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function cO(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uO(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function sO(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){uO(i,n,o,a,c,"next",t)}function c(t){uO(i,n,o,a,c,"throw",t)}a(void 0)}))}}function lO(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||fO(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fO(t,e){if(t){if("string"==typeof t)return pO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pO(t,e):void 0}}function pO(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}tO.propTypes={UIComponent:c.a.elementType,isSearchByBusinessId:c.a.bool,isSearchByBusinessEmail:c.a.bool,isSearchByBusinessPhone:c.a.bool,propsToFetch:c.a.arrayOf(a.string)},tO.defaultProps={loadMorePageSize:10,propsToFetch:["id","alcohol","city","delivery_price","distance","delivery_time","ribbon","enabled","featured","food","groceries","header","laundry","logo","minimum","name","pickup_time","slug","reviews"],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var hO=function(t){var e,r=t.UIComponent,n=t.propsToFetch,a=t.orders,c=t.isOnlyDelivery,u=t.driverId,s=t.customerId,l=t.businessId,f=t.orderIds,p=t.deletedOrderId,h=t.orderStatus,d=t.orderBy,y=t.orderDirection,v=t.useDefualtSessionManager,m=t.paginationSettings,g=t.filterValues,b=t.searchValue,w=t.isSearchByOrderId,O=t.isSearchByCustomerEmail,x=t.isSearchByCustomerPhone,E=t.isSearchByBusinessName,j=t.orderIdForUnreadCountUpdate,S=t.timeStatus,L=t.driversList,_=t.allowColumns,P=t.setAllowColumns,k=lO(er(),1)[0],T=lO(un(),1)[0],I=lO(Object(o.useState)({loading:!a,error:null,orders:[]}),2),A=I[0],C=I[1],N=lO(Object(o.useState)({currentPage:"pages"===m.controlType&&m.initialPage&&m.initialPage>=1?m.initialPage-1:0,pageSize:null!==(e=m.pageSize)&&void 0!==e?e:10}),2),D=N[0],G=N[1],F=lO(hr(),1)[0],U=rn(),B=v?F.token:t.accessToken,R={},M=lO(Object(o.useState)({loading:!1,error:null}),2),Y=M[0],z=M[1],$=function(t,e){if("id"===t){if("desc"===y)return e.sort((function(t,e){return e.id-t.id}));if("asc"===y)return e.sort((function(t,e){return t.id-e.id}))}return"last_direct_message_at"===t?e.sort((function(t,e){return new Date(e.last_direct_message_at)-new Date(t.last_direct_message_at)})):e},q=function(){var t=sO(oO().mark((function t(e){var r,n,o,i;return oO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,z(aO(aO({},Y),{},{loading:!0})),r={},R.updateOrders=r,t.next=6,k.setAccessToken(B).orders(null==e?void 0:e.id).save({status:e.newStatus},{cancelToken:r});case 6:n=t.sent,o=n.content,z({loading:!1,error:o.error?o.result:null}),o.error||(i=A.orders.filter((function(t){return(null==t?void 0:t.id)!==(null==e?void 0:e.id)})),C(aO(aO({},A),{},{orders:i}))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),z({loading:!1,error:[t.t0.message]});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=sO(oO().mark((function t(e,r){var o,i,a,p,v,m,j,L;return oO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=[],i=[],a={query:{orderBy:("desc"===y?"-":"")+d,page:r,page_size:e}},f&&i.push({attribute:"id",value:f}),0===Object.keys(g).length?h&&i.push({attribute:"status",value:h}):g.statuses.length>0?(p=g.statuses.filter((function(t){return h.includes(t)})),i.push({attribute:"status",value:p})):h&&i.push({attribute:"status",value:h}),c&&i.push({attribute:"delivery_type",value:1}),u&&i.push({attribute:"driver_id",value:u}),s&&i.push({attribute:"customer_id",value:s}),l&&i.push({attribute:"business_id",value:l}),S&&i.push({attribute:"time_status",value:S}),b&&(v=[],w&&v.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}),O&&v.push({attribute:"customer",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}]}),x&&v.push({attribute:"customer",conditions:[{attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}]}),E&&v.push({attribute:"business",conditions:[{attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}]}),i.push({conector:"OR",conditions:v})),Object.keys(g).length&&(m=[],null!=g&&g.orderId&&m.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(null==g?void 0:g.orderId,"%"))}}),null!==g.deliveryFromDatetime&&m.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(g.deliveryFromDatetime)}}),null!==g.deliveryEndDatetime&&m.push({attribute:"delivery_datetime",value:{condition:"<=",value:g.deliveryEndDatetime}}),0!==g.businessIds.length&&m.push({attribute:"business_id",value:g.businessIds}),0!==(null==g?void 0:g.countryCode.length)&&m.push({attribute:"country_code",value:null==g?void 0:g.countryCode}),0!==(null==g?void 0:g.currency.length)&&m.push({attribute:"currency",value:null==g?void 0:g.currency}),0!==g.driverIds.length&&m.push({attribute:"driver_id",value:g.driverIds}),0!==g.deliveryTypes.length&&m.push({attribute:"delivery_type",value:g.deliveryTypes}),0!==g.driverGroupIds.length&&m.push({attribute:"driver_id",value:g.driverGroupIds}),0!==g.paymethodIds.length&&m.push({attribute:"paymethod_id",value:g.paymethodIds}),m.length&&i.push({conector:"AND",conditions:m})),i.length&&(o={conditions:i,conector:"AND"}),j={},R.orders=j,a.cancelToken=j,L=n?k.setAccessToken(B).orders().asDashboard().select(n).where(o):k.setAccessToken(B).orders().asDashboard().where(o),t.next=19,L.get(a);case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),V=function(t){var e=!0;return void 0!==g.businessIds&&g.businessIds.length>0&&(g.businessIds.includes(t.business_id)||(e=!1)),void 0!==g.driverIds&&g.driverIds.length>0&&(g.driverIds.includes(t.driver_id)||(e=!1)),void 0!==g.deliveryTypes&&g.deliveryTypes.length>0&&(g.deliveryTypes.includes(t.delivery_type)||(e=!1)),void 0!==g.paymethodIds&&g.paymethodIds.length>0&&(g.paymethodIds.includes(t.paymethod_id)||(e=!1)),void 0!==g.statuses&&g.statuses.length>0&&(g.statuses.includes(parseInt(t.status))||(e=!1)),e},H=function(){var t=sO(oO().mark((function t(){var e;return oO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(F.token){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,C(aO(aO({},A),{},{loading:!0})),t.next=6,J(D.pageSize,1);case 6:e=t.sent,C({loading:!1,orders:e.content.error?[]:e.content.result,error:e.content.error?e.content.result:null}),e.content.error||G({currentPage:e.content.pagination.current_page,pageSize:0===e.content.pagination.page_size?D.pageSize:e.content.pagination.page_size,totalPages:e.content.pagination.total_pages,total:e.content.pagination.total,from:e.content.pagination.from,to:e.content.pagination.to}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),"Cancel"!==t.t0.constructor.name&&C(aO(aO({},A),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(){return t.apply(this,arguments)}}(),W=function(){var t=sO(oO().mark((function t(){var e;return oO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(aO(aO({},A),{},{loading:!0})),t.prev=1,t.next=4,J(D.pageSize,D.currentPage+1);case 4:e=t.sent,C({loading:!1,orders:e.content.error?A.orders:A.orders.concat(e.content.result),error:e.content.error?e.content.result:null}),e.content.error||G({currentPage:e.content.pagination.current_page,pageSize:0===e.content.pagination.page_size?D.pageSize:e.content.pagination.page_size,totalPages:e.content.pagination.total_pages,total:e.content.pagination.total,from:e.content.pagination.from,to:e.content.pagination.to}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),"Cancel"!==t.t0.constructor.name&&C(aO(aO({},A),{},{loading:!1,error:[t.t0.message]}));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),K=function(){var t=sO(oO().mark((function t(e,r){var n;return oO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(aO(aO({},A),{},{loading:!0})),t.prev=1,t.next=4,J(e,r);case 4:n=t.sent,C({loading:!1,orders:n.content.error?A.orders:n.content.result,error:n.content.error?n.content.result:null}),n.content.error||G({currentPage:n.content.pagination.current_page,pageSize:0===n.content.pagination.page_size?D.pageSize:n.content.pagination.page_size,totalPages:n.content.pagination.total_pages,total:n.content.pagination.total,from:n.content.pagination.from,to:n.content.pagination.to}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),"Cancel"!==t.t0.constructor.name&&C(aO(aO({},A),{},{loading:!1,error:[t.t0.message]}));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,r){return t.apply(this,arguments)}}(),Z=function(){var t=sO(oO().mark((function t(e){var r,n,o,i,a;return oO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null!=F&&null!==(r=F.user)&&void 0!==r&&r.id){t.next=3;break}return t.abrupt("return");case 3:return i=null==F||null===(n=F.user)||void 0===n?void 0:n.settings,a=aO(aO({},e),{},{timer:aO(aO({},null==e?void 0:e.timer),{},{visable:!1})}),t.next=7,k.users(null==F||null===(o=F.user)||void 0===o?void 0:o.id).save({settings:aO(aO({},i),{},{orderColumns:a})},{accessToken:B});case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.warn(t.t0,"error");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){if(null!==j&&0!==A.orders.length){var t=A.orders.filter((function(t){return(null==t?void 0:t.id)===j&&(t.unread_count=0,t.unread_general_count=0,t.unread_direct_count=0),!0}));C(aO(aO({},A),{},{orders:t}))}}),[j]),Object(o.useEffect)((function(){if(p){var t=A.orders.filter((function(t){return(null==t?void 0:t.id)!==p}));H(),C(aO(aO({},A),{},{orders:t}))}}),[p]),Object(o.useEffect)((function(){if(null==F||!F.loading)return a?C(aO(aO({},A),{},{orders:a})):H(),function(){R.orders&&R.orders.cancel()}}),[F,b,d,g,c,u,s,l,a,h,S]),Object(o.useEffect)((function(){if(!A.loading){var t=function(t){if(!c||1===(null==t?void 0:t.delivery_type)){if((null==t||!t.driver)&&null!=t&&t.driver_id){var e=null==L?void 0:L.drivers.find((function(e){return e.id===t.driver_id}));e&&(t.driver=aO({},e))}var r=[];if(A.orders.find((function(e){return(null==e?void 0:e.id)===(null==t?void 0:t.id)}))){r=A.orders.filter((function(e){var r=!0;return(null==e?void 0:e.id)===(null==t?void 0:t.id)&&(delete t.total,delete t.subtotal,Object.assign(e,t),(r=(0===h.length||h.includes(parseInt(e.status)))&&V(t))||(D.total--,G(aO({},D)))),r}));var n=$(d,r);C(aO(aO({},A),{},{orders:n}))}else{if(V(t))if(h.includes(parseInt(t.status))){r=[].concat(nO(A.orders),[t]);var o=$(d,r);D.total++,G(aO({},D)),C(aO(aO({},A),{},{orders:o.slice(0,D.pageSize)}))}}}},e=function(t){if((!c||1===(null==t?void 0:t.delivery_type))&&!A.orders.find((function(e){return(null==e?void 0:e.id)===(null==t?void 0:t.id)}))){var e=[];if(V(t)&&(h.includes(0)&&0===t.status||h.includes(13)&&13===t.status)){e=[t].concat(nO(A.orders));var r=$(d,e);D.total++,G(aO({},D)),C(aO(aO({},A),{},{orders:r.slice(0,D.pageSize)}))}}},r=function(t){if(0!==A.orders.length&&A.orders.find((function(e){var r;return(null==e?void 0:e.id)===(null===(r=t.order)||void 0===r?void 0:r.id)}))){var e=A.orders.filter((function(e){var r;return(null==e?void 0:e.id)===(null===(r=t.order)||void 0===r?void 0:r.id)&&e.last_message_at!==t.created_at&&(1===t.type?(e.last_general_message_at=t.created_at,0!==t.author.level&&(e.unread_general_count=e.unread_general_count+1)):(e.last_direct_message_at=t.created_at,0!==t.author.level&&(e.unread_direct_count=e.unread_direct_count+1)),e.last_message_at=t.created_at,0!==t.author.level&&(e.unread_count=e.unread_count+1)),!0})),r=$(d,e);C(aO(aO({},A),{},{orders:r}))}};return A.loading||0!==A.orders.length||0!==(null==D?void 0:D.currentPage)&&0!==(null==D?void 0:D.total)&&(Math.ceil((null==D?void 0:D.total)/D.pageSize)>=(null==D?void 0:D.currentPage)?K(D.pageSize,D.currentPage):K(D.pageSize,D.currentPage-1)),U.on("update_order",t),U.on("orders_register",e),U.on("message",r),function(){U.off("update_order",t),U.off("orders_register",e),U.off("message",r)}}}),[A.orders,D,d,U,L]),Object(o.useEffect)((function(){var t=function(t){var e=A.orders.filter((function(e){return(null==e?void 0:e.id)===t.order_id&&(e.user_review=t),!0})),r=$(d,e);C(aO(aO({},A),{},{orders:r}))};return T.on("customer_reviewed",t),function(){T.off("customer_reviewed",t)}}),[A,d]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,rO({},t,{orderList:A,pagination:D,loadMoreOrders:W,getPageOrders:K,handleUpdateOrderStatus:q,allowColumns:_,setAllowColumns:P,handleDrop:function(t,e){var r,n;t.preventDefault();var o=t.dataTransfer.getData("transferColumnName");if(e!==o){var i=null===(r=_[o])||void 0===r?void 0:r.order,a=null===(n=_[e])||void 0===n?void 0:n.order,c=lO(i<a?[i,a]:[a,i],2),u=c[0],s=c[1],l={};Object.keys(_).filter((function(t){var e,r;return t!==o&&(null===(e=_[t])||void 0===e?void 0:e.order)>=u&&(null===(r=_[t])||void 0===r?void 0:r.order)<=s})).forEach((function(t){var e;l[t]=aO(aO({},_[t]),{},{order:(null===(e=_[t])||void 0===e?void 0:e.order)+(i<a?-1:1)})}));var f=aO(aO({},_),{},cO({},o,aO(aO({},_[o]),{},{order:a})),l);Z(f),P(f)}}})))};function dO(t){return dO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dO(t)}function yO(){return yO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yO.apply(this,arguments)}function vO(){vO=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==dO(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function mO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gO(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mO(Object(r),!0).forEach((function(e){bO(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mO(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bO(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wO(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function OO(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return xO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xO(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xO(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}hO.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),onOrderClick:c.a.func,useDefualtSessionManager:c.a.bool,orders:c.a.arrayOf(a.object),orderIds:c.a.arrayOf(a.number),orderIdForUnreadCountUpdate:c.a.number,orderStatus:c.a.arrayOf(a.number),orderBy:c.a.string,orderDirection:c.a.oneOf(["asc","desc"]),paginationSettings:c.a.exact({initialPage:c.a.number,pageSize:c.a.number,controlType:c.a.oneOf(["infinity","pages"])}),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hO.defaultProps={orderBy:"id",orderDirection:"desc",paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var EO=function(t){var e,r=t.UIComponent,n=t.propsToFetch,a=t.businessIds,c=t.paginationSettings,u=OO(er(),1)[0],s=OO(hr(),1)[0].token,l=OO(Object(o.useState)({zones:[],loading:!1,error:null}),2),f=l[0],p=l[1],h=OO(Object(o.useState)({currentPage:"pages"===c.controlType&&c.initialPage&&c.initialPage>=1?c.initialPage-1:0,pageSize:null!==(e=c.pageSize)&&void 0!==e?e:10,totalItems:null,totalPages:null}),2),d=h[0],y=h[1],v=function(){var t,e=(t=vO().mark((function t(e,r){var o,i,c,l,h,v;return vO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(gO(gO({},f),{},{loading:!0})),o=null,i=[],a&&i.push({attribute:"business_id",value:a}),i.length&&(o={conditions:i,conector:"AND"}),c={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},l=o?"".concat(u.root,"/delivery_zones?page=").concat(e,"&page_size=").concat(r,"8&params=").concat(n.toString(),"&&where=").concat(JSON.stringify(o)):"".concat(u.root,"/delivery_zones?page=").concat(e,"&page_size=").concat(r,"8&params=").concat(n.toString()),t.next=10,fetch(l,c);case 10:return h=t.sent,t.next=13,h.json();case 13:(v=t.sent).error||(p({loading:!1,zones:v.result,error:null}),y(gO(gO({},d),{},{currentPage:v.pagination.current_page,totalPages:v.pagination.total_pages,totalItems:v.pagination.total,from:v.pagination.from,to:v.pagination.to}))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),p(gO(gO({},f),{},{loading:!1,error:[t.t0.message]}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){wO(i,n,o,a,c,"next",t)}function c(t){wO(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){v(1,d.pageSize)}),[]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,yO({},t,{deliveryzoneList:f,paginationProps:d,setPaginationProps:y,getDeliveryzones:v})))};function jO(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return SO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SO(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SO(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}EO.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},EO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},propsToFetch:["name","minimum","price","type","data","enabled","business_id"]};var LO=function(t){var e=t.onDrop,r=t.children,n=t.className,a=t.style,c=jO(Object(o.useState)(),2),u=c[0],s=c[1];return i.a.createElement("div",{onDrop:function(t){t.preventDefault(),t.stopPropagation(),e(t.dataTransfer)},onDragOver:function(t){t.preventDefault(),t.stopPropagation()},onDragEnter:function(t){t.preventDefault(),t.stopPropagation(),s("dragover")},onDragLeave:function(t){t.preventDefault(),t.stopPropagation(),s()},style:a,className:n+" "+u},r)};function _O(t){return _O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_O(t)}function PO(){return PO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},PO.apply(this,arguments)}function kO(t){return function(t){if(Array.isArray(t))return UO(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||FO(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TO(){TO=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==_O(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function IO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function AO(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?IO(Object(r),!0).forEach((function(e){CO(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IO(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function CO(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NO(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function DO(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){NO(i,n,o,a,c,"next",t)}function c(t){NO(i,n,o,a,c,"throw",t)}a(void 0)}))}}function GO(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||FO(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FO(t,e){if(t){if("string"==typeof t)return UO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?UO(t,e):void 0}}function UO(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var BO=function(t){var e=t.UIComponent,r=t.driversCompaniesState,n=t.setDriversCompaniesState,a=t.driversCompany,c=GO(er(),1)[0],u=GO(hr(),1)[0].token,s=GO(br(),2)[1].showToast,l=GO(Ir(),2)[1],f=GO(Object(o.useState)({}),2),p=f[0],h=f[1],d=GO(Object(o.useState)({loading:!1,error:null}),2),y=d[0],v=d[1],m=function(){var t=DO(TO().mark((function t(){var e,o,i,f,d;return TO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,l("LOADING","Loading")),v(AO(AO({},y),{},{loading:!0})),null!=(e=AO({},p))&&e.schedule&&(e.schedule=JSON.stringify(null==e?void 0:e.schedule)),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(e)},t.next=8,fetch("".concat(c.root,"/driver_companies/").concat(null==a?void 0:a.id),o);case 8:return i=t.sent,t.next=11,i.json();case 11:(f=t.sent).error?v(AO(AO({},y),{},{loading:!1,error:f.result})):(v(AO(AO({},y),{},{loading:!1})),d=r.companies.filter((function(t){return t.id===(null==a?void 0:a.id)&&Object.assign(t,f.result),!0})),n(AO(AO({},r),{},{companies:d})),s(vr.Success,l("CHANGES_SAVED","Changes saved")),h({})),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),v({loading:!1,error:[t.t0.message]});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var e=DO(TO().mark((function e(){var o,i,a,f,d,m,g,b;return TO().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,s(vr.Info,l("LOADING","Loading")),v(AO(AO({},y),{},{loading:!0})),o=[],i=0;i<7;i++)o.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});return a={enabled:!0,priority:"0",fixed_cost_per_km:0,fixed_cost_delivery:0,percentage_cost_per_order_subtotal:0},f=AO(AO(AO({},p),a),{},{schedule:null!=p&&p.schedule?JSON.stringify(null==p?void 0:p.schedule):JSON.stringify(o)}),d={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(f)},e.next=10,fetch("".concat(c.root,"/driver_companies"),d);case 10:return m=e.sent,e.next=13,m.json();case 13:(g=e.sent).error?v({loading:!1,error:g.result}):(v(AO(AO({},y),{},{loading:!1})),b=[].concat(kO(r.companies),[g.result]),n(AO(AO({},r),{},{companies:b})),s(vr.Success,l("DRIVER_COMPANY_ADDED","Driver company added")),h({}),t.onClose&&t.onClose()),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=DO(TO().mark((function e(){var o,i,f,p;return TO().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(vr.Info,l("LOADING","Loading")),v(AO(AO({},y),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=6,fetch("".concat(c.root,"/driver_companies/").concat(a.id),o);case 6:return i=e.sent,e.next=9,i.json();case 9:(f=e.sent).error?v(AO(AO({},y),{},{loading:!1,error:f.result})):(v(AO(AO({},y),{},{loading:!1})),p=r.companies.filter((function(t){return t.id!==a.id})),n(AO(AO({},r),{},{companies:p})),s(vr.Success,l("DRIVER_COMPANY_DELETED","Driver company deleted")),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,PO({},t,{cleanChagesState:function(){return h({})},changesState:p,actionState:y,cleanActionState:function(){return v(AO(AO({},y),{},{error:null}))},handleChangesState:function(t,e){h(AO(AO({},p),{},CO({},t,e)))},handleUpdateDriversCompany:m,handleAddDriversCompany:g,handleChangeScheduleState:function(t){h(AO(AO({},p),{},{schedule:t}))},handleDeleteDriversCompany:b})))};function RO(t){return RO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RO(t)}function MO(){return MO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MO.apply(this,arguments)}function YO(t){return function(t){if(Array.isArray(t))return ZO(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||KO(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zO(){zO=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==RO(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function $O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qO(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$O(Object(r),!0).forEach((function(e){JO(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function JO(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VO(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function HO(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){VO(i,n,o,a,c,"next",t)}function c(t){VO(i,n,o,a,c,"throw",t)}a(void 0)}))}}function WO(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||KO(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KO(t,e){if(t){if("string"==typeof t)return ZO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ZO(t,e):void 0}}function ZO(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}BO.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},BO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var XO=function(t){var e=t.userId,r=t.UIComponent,n=WO(er(),1)[0],a=WO(hr(),1)[0].token,c=WO(br(),2)[1].showToast,u=WO(Ir(),2)[1],s=WO(Object(o.useState)({groups:[],loading:!1,error:null}),2),l=s[0],f=s[1],p=WO(Object(o.useState)({loading:!1,error:null}),2),h=p[0],d=p[1],y=WO(Object(o.useState)([]),2),v=y[0],m=y[1],g=function(){var t=HO(zO().mark((function t(){var e,r,o;return zO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(qO(qO({},l),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,fetch("".concat(n.root,"/drivergroups?params=name,drivers"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(o=t.sent).error||f(qO(qO({},l),{},{groups:o.result,loading:!1})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),f(qO(qO({},l),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=HO(zO().mark((function t(e,r){var o,i,s,p;return zO().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),d(qO(qO({},h),{},{loading:!0,error:null})),o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(r)},t.next=6,fetch("".concat(n.root,"/drivergroups/").concat(e),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(s=t.sent).error?d(qO(qO({},h),{},{loading:!1,error:s.result})):(d({error:null,loading:!1}),p=l.groups.filter((function(t){return t.id===e&&Object.assign(t,s.result),!0})),f(qO(qO({},l),{},{groups:p})),c(vr.Success,u("CHANGES_SAVED","Changes saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),d({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t;if(!l.loading){var r=null===(t=l.groups)||void 0===t?void 0:t.reduce((function(t,r){return r.drivers.find((function(t){return t.id===e}))?[].concat(YO(t),[r.id]):YO(t)}),[]);m(r)}}),[e,l]),Object(o.useEffect)((function(){g()}),[]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,MO({},t,{driversGroupsState:l,includedGroupIds:v,actionState:h,handleCheckboxClick:function(t){var r,n=null===(r=l.groups.find((function(e){return e.id===t})).drivers)||void 0===r?void 0:r.reduce((function(t,e){return[].concat(YO(t),[e.id])}),[]),o=[];n.includes(e)?(console.log(e,n),o=n.filter((function(t){return t!==e}))):(console.log("else"),o=[].concat(YO(n),[e])),console.log(o);var i={drivers:JSON.stringify(o)};b(t,i)}})))};function QO(t){return QO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},QO(t)}function tx(){return tx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tx.apply(this,arguments)}function ex(){ex=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==QO(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function rx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nx(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rx(Object(r),!0).forEach((function(e){ox(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rx(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ox(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ix(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ax(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return cx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cx(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cx(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}XO.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},XO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ux=function(t){var e=t.userId,r=t.UIComponent,n=ax(er(),1)[0],a=ax(hr(),1)[0].token,c=ax(Object(o.useState)({reviews:[],loading:!1,error:null}),2),u=c[0],s=c[1],l=function(){var t,r=(t=ex().mark((function t(){var r,o,i;return ex().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(nx(nx({},u),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,fetch("".concat(n.root,"/users/").concat(e,"/user_reviews"),r);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error||s({reviews:i.result,loading:!1,error:null}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),s(nx(nx({},u),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ix(i,n,o,a,c,"next",t)}function c(t){ix(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(o.useEffect)((function(){e&&l()}),[e]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,tx({},t,{userReviewState:u})))};function sx(t){return sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sx(t)}function lx(){return lx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lx.apply(this,arguments)}function fx(t){return function(t){if(Array.isArray(t))return wx(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||bx(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function px(){px=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==sx(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function hx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function dx(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hx(Object(r),!0).forEach((function(e){yx(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hx(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yx(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vx(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function mx(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){vx(i,n,o,a,c,"next",t)}function c(t){vx(i,n,o,a,c,"throw",t)}a(void 0)}))}}function gx(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||bx(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bx(t,e){if(t){if("string"==typeof t)return wx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wx(t,e):void 0}}function wx(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ux.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ux.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ox=function(t){var e=t.UIComponent,r=gx(er(),1)[0],n=gx(hr(),1)[0].token,a=gx(br(),2)[1].showToast,c=gx(Ir(),2)[1],u=gx(Object(o.useState)({companies:[],loading:!1,error:null}),2),s=u[0],l=u[1],f=gx(Object(o.useState)({loading:!1,error:null}),2),p=f[0],h=f[1],d=gx(Object(o.useState)(!1),2),y=d[0],v=d[1],m=gx(Object(o.useState)([]),2),g=m[0],b=m[1],w=gx(Object(o.useState)(!1),2),O=w[0],x=w[1],E=function(){var t=mx(px().mark((function t(){var e,o,i;return px().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(dx(dx({},s),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=5,fetch("".concat(r.root,"/driver_companies"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error||l(dx(dx({},s),{},{companies:i.result,loading:!1})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),l(dx(dx({},s),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=mx(px().mark((function t(e,o){var i,u,f,d;return px().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(vr.Info,c("LOADING","Loading")),h(dx(dx({},p),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(o)},t.next=6,fetch("".concat(r.root,"/driver_companies/").concat(e),i);case 6:return u=t.sent,t.next=9,u.json();case 9:(f=t.sent).error?h(dx(dx({},p),{},{loading:!1,error:f.result})):(h(dx(dx({},p),{},{loading:!1})),d=s.companies.filter((function(t){return t.id===e&&Object.assign(t,f.result),!0})),l(dx(dx({},s),{},{companies:d})),a(vr.Success,c("CHANGES_SAVED","Changes saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),h({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),S=function(){var t=mx(px().mark((function t(e){var o,i,u,f,d;return px().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(vr.Info,c("LOADING","Loading")),h(dx(dx({},p),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=6,fetch("".concat(r.root,"/driver_companies/").concat(e),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?(h(dx(dx({},p),{},{loading:!1,error:u.result})),x(!1)):(h(dx(dx({},p),{},{loading:!1})),f=s.companies.filter((function(t){return t.id!==e})),l(dx(dx({},s),{},{companies:f})),a(vr.Success,c("DRIVER_COMPANY_DELETED","Driver company deleted")),O&&((d=fx(g)).shift(),0===d.length&&x(!1),b(d))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),h({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){O&&0!==g.length&&S(g[0])}),[g,O]),Object(o.useEffect)((function(){E()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,lx({},t,{driversCompaniesState:s,setDriversCompaniesState:l,actionState:p,openDetails:y,setOpenDetails:v,handleUpdateDriversCompany:j,handleDeleteDriversCompany:S,handleSelectCompany:function(t){var e=[];e=g.includes(t)?g.filter((function(e){return e!==t})):[].concat(fx(g),[t]),b(e)},selectedCompanyList:g,handleAllSelectCompany:function(){var t,e=null===(t=s.companies)||void 0===t?void 0:t.reduce((function(t,e){return[].concat(fx(t),[e.id])}),[]);g.length===e.length?b([]):b(e)},handleDeleteSelectedCompanies:function(){return x(!0)}})))};function xx(){return xx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xx.apply(this,arguments)}function Ex(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jx(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sx(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Lx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lx(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lx(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Ox.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ox.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var _x=function(t){var e=t.UIComponent,r=t.curDriversGroup,n=t.handleChangesState,a=Sx(Object(o.useState)(0),2),c=a[0],u=a[1],s=Sx(Object(o.useState)({}),2),l=s[0],f=s[1],p=function(t){return Math.floor((t-3600*Math.floor(t/3600))/60)},h=function(t){var e=t-3600*Math.floor(t/3600);return Math.floor(e-60*Math.floor(e/60))};return Object(o.useEffect)((function(){var t;if(r){t=1*r.autoassign_initial_radius==500&&1*r.autoassign_amount_drivers==1?1:1*r.autoassign_initial_radius==15e3&&1*r.autoassign_amount_drivers==1e3?2:1*r.autoassign_initial_radius==100&&1*r.autoassign_amount_drivers==1?3:1*r.autoassign_initial_radius==1e3&&1*r.autoassign_amount_drivers==2?4:1*r.autoassign_initial_radius==15e3&&1*r.autoassign_amount_drivers==1?5:6,u(t);var e,n={hour:(e=r.autoassign_autoreject_time,1*e/3600>1?Math.floor(1*e/3600):0),minute:p(r.autoassign_autoreject_time),second:h(r.autoassign_autoreject_time)};f(n)}}),[r]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,xx({},t,{autoAssign:c,autoRejectOrderGroup:l,onSelectAssign:function(t){u(t);var e={};1===t?(e.autoassign_initial_radius=500,e.autoassign_increment_radius=100,e.autoassign_max_radius=15e3,e.autoassign_amount_drivers=1):2===t?(e.autoassign_initial_radius=15e3,e.autoassign_increment_radius=15e3,e.autoassign_max_radius=15e3,e.autoassign_amount_drivers=1e3):3===t?(e.autoassign_initial_radius=100,e.autoassign_increment_radius=100,e.autoassign_max_radius=1500,e.autoassign_amount_drivers=1):4===t?(e.autoassign_initial_radius=1e3,e.autoassign_increment_radius=500,e.autoassign_max_radius=15e3,e.autoassign_amount_drivers=2):5===t?(e.autoassign_initial_radius=15e3,e.autoassign_increment_radius=15e3,e.autoassign_max_radius=15e3,e.autoassign_amount_drivers=1):6===t&&(e.autoassign_initial_radius="",e.autoassign_increment_radius="",e.autoassign_max_radius="",e.autoassign_amount_drivers=""),n({autoassign_initial_radius:e.autoassign_initial_radius,autoassign_increment_radius:e.autoassign_increment_radius,autoassign_max_radius:e.autoassign_max_radius,autoassign_amount_drivers:e.autoassign_amount_drivers})},onChangeSave:n,handleChangeInput:function(t){var e=t.target.value,r=""===e?0:parseInt(e);(""===r||/^[0-9\b]+$/.test(r))&&n(jx({},t.target.name,r))},onChangeAutoRejectOrderGroup:function(t,e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ex(Object(r),!0).forEach((function(e){jx(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ex(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},l);if(""===t||/^[0-9\b]+$/.test(t)){var o=""===t?0:parseInt(t);r[e]=o,f(r);var i=3600*(null==r?void 0:r.hour)+60*(null==r?void 0:r.minute)+(null==r?void 0:r.second);n({autoassign_autoreject_time:i})}}})))};function Px(t){return Px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Px(t)}function kx(){return kx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kx.apply(this,arguments)}function Tx(t){return function(t){if(Array.isArray(t))return Bx(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ux(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ix(){Ix=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Px(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Ax(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Cx(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ax(Object(r),!0).forEach((function(e){Nx(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ax(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Nx(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dx(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Gx(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Dx(i,n,o,a,c,"next",t)}function c(t){Dx(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Fx(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Ux(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ux(t,e){if(t){if("string"==typeof t)return Bx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bx(t,e):void 0}}function Bx(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}_x.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_x.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Rx=function(t){var e=t.UIComponent,r=t.driversGroupsState,n=t.setDriversGroupsState,a=t.curDriversGroup,c=t.driversManagers,u=t.businesses,s=t.paymethods,l=t.drivers,f=t.companies,p=Fx(er(),1)[0],h=Fx(hr(),1)[0].token,d=Fx(br(),2)[1].showToast,y=Fx(Ir(),2)[1],v=Fx(Object(o.useState)({driversGroup:t.curDriversGroup,loading:!1}),2),m=v[0],g=v[1],b=Fx(Object(o.useState)({loading:!1,error:null}),2),w=b[0],O=b[1],x=Fx(Object(o.useState)({}),2),E=x[0],j=x[1],S=Fx(Object(o.useState)([]),2),L=S[0],_=S[1],P=Fx(Object(o.useState)([]),2),k=P[0],T=P[1],I=Fx(Object(o.useState)([]),2),A=I[0],C=I[1],N=Fx(Object(o.useState)([]),2),D=N[0],G=N[1],F=function(){var t=Gx(Ix().mark((function t(e){var o,i,c,u;return Ix().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(vr.Info,y("LOADING","Loading")),O(Cx(Cx({},w),{},{loading:!0,error:null})),o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(e)},t.next=6,fetch("".concat(p.root,"/drivergroups/").concat(a.id),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(c=t.sent).error?O(Cx(Cx({},w),{},{loading:!1,error:c.result})):(O({error:null,loading:!1}),u=r.groups.filter((function(t){return t.id===a.id&&Object.assign(t,c.result),!0})),n(Cx(Cx({},r),{},{groups:u})),d(vr.Success,y("CHANGES_SAVED","Changes saved")),g(Cx(Cx({},m),{},{driversGroup:c.result})),j({})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),O({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),U=function(){var e=Gx(Ix().mark((function e(){var o,i,c,u;return Ix().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(vr.Info,y("LOADING","Loading")),O(Cx(Cx({},w),{},{loading:!0,error:null})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},e.next=6,fetch("".concat(p.root,"/drivergroups/").concat(a.id),o);case 6:return i=e.sent,e.next=9,i.json();case 9:(c=e.sent).error?O(Cx(Cx({},w),{},{loading:!1,error:c.result})):(O(Cx(Cx({},w),{},{loading:!1})),u=r.groups.filter((function(t){return t.id!==a.id})),n(Cx(Cx({},r),{},{groups:u})),d(vr.Success,y("DRIVER_GROUP_DELETED","Driver group deleted")),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Gx(Ix().mark((function e(){var o,i,a,u,s,l,f,v,m;return Ix().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(vr.Info,y("LOADING","Loading")),O({loading:!0,error:null}),o={enabled:!0,autoassign_amount_drivers:1,autoassign_autoaccept_by_driver:!1,autoassign_autoreject_time:30,autoassign_increment_radius:100,autoassign_initial_radius:500,autoassign_max_in_accepted_by_business:5,autoassign_max_in_accepted_by_driver:5,autoassign_max_in_driver_in_business:5,autoassign_max_in_pending:5,autoassign_max_in_pickup_completed:5,autoassign_max_in_ready_for_pickup:5,autoassign_max_orders:5,autoassign_max_radius:1e3,orders_group_max_distance_between_delivery:200,orders_group_max_distance_between_pickup:200,orders_group_max_orders:1,orders_group_max_time_between:5,orders_group_max_time_between_delivery:600,orders_group_max_time_between_pickup:600,orders_group_start_in_status:"7",orders_group_use_maps_api:!1},i=Cx(Cx({},E),o),a={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(i)},e.next=8,fetch("".concat(p.root,"/drivergroups"),a);case 8:return u=e.sent,e.next=11,u.json();case 11:(s=e.sent).error?O({loading:!1,error:s.result}):(O({loading:!1,error:null}),f=Cx({},s.result),(null===(l=s.result)||void 0===l||!l.administrator)&&c.length>0&&(v=c.find((function(t){var e;return t.id===(null===(e=s.result)||void 0===e?void 0:e.administrator_id)})),f=Cx(Cx({},f),{},{administrator:v})),m=[].concat(Tx(r.groups),[f]),n(Cx(Cx({},r),{},{groups:m})),d(vr.Success,y("DRIVER_GROUP_ADDED","Driver group added")),j({}),t.onClose&&t.onClose()),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){if(g(Cx(Cx({},m),{},{driversGroup:a})),a){var t,e,r,n=null==a||null===(t=a.business)||void 0===t?void 0:t.reduce((function(t,e){return[].concat(Tx(t),[e.id])}),[]);_(n),T((null==a?void 0:a.allowed_paymethods)||[]);var o=null==a||null===(e=a.drivers)||void 0===e?void 0:e.reduce((function(t,e){return[].concat(Tx(t),[e.id])}),[]);C(o);var i=null==a||null===(r=a.driver_companies)||void 0===r?void 0:r.reduce((function(t,e){return[].concat(Tx(t),[e.id])}),[]);G(i)}else j({type:0}),_([]),T([]),C([]),G([])}),[a]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,kx({},t,{driversGroupState:m,changesState:E,actionState:w,cleanChagesState:function(){return j({})},selectedBusinessIds:L,selectedPaymethodIds:k,selectedDriverIds:A,selectedDriversCompanyIds:D,handleChangesState:function(t){j(Cx(Cx({},E),t))},handleSelectBusiness:function(t,e){var r=Tx(L),n=[];n=e?[].concat(Tx(r),[t]):r.filter((function(e){return e!==t})),_(n),j(Cx(Cx({},E),{},{business:JSON.stringify(n)}))},handleSelectAllBusiness:function(t){var e=null==u?void 0:u.reduce((function(t,e){return[].concat(Tx(t),[e.id])}),[]),r=[];r=t?Tx(e):[],_(r),j(Cx(Cx({},E),{},{business:JSON.stringify(r)}))},handleSelectPaymethod:function(t,e){var r=Tx(k),n=[];n=e?[].concat(Tx(r),[t]):r.filter((function(e){return e!==t})),T(n),j(Cx(Cx({},E),{},{allowed_paymethods:JSON.stringify(n)}))},handleSelectDriver:function(t,e){var r=Tx(A),n=[];n=e?[].concat(Tx(r),[t]):r.filter((function(e){return e!==t})),C(n),j(Cx(Cx({},E),{},{drivers:JSON.stringify(n)}))},handleSelectDriversCompany:function(t,e){var r=Tx(D),n=[];n=e?[].concat(Tx(r),[t]):r.filter((function(e){return e!==t})),G(n),j(Cx(Cx({},E),{},{driver_companies:JSON.stringify(n)}))},handleSelectAllPaymethod:function(t){var e=null==s?void 0:s.reduce((function(t,e){return[].concat(Tx(t),[e.id])}),[]),r=[];r=t?Tx(e):[],T(r),j(Cx(Cx({},E),{},{allowed_paymethods:JSON.stringify(r)}))},handleSelectAllDriver:function(t){var e=null==l?void 0:l.reduce((function(t,e){return[].concat(Tx(t),[e.id])}),[]),r=[];r=t?Tx(e):[],C(r),j(Cx(Cx({},E),{},{drivers:JSON.stringify(r)}))},handleSelectAllDriversCompany:function(t){var e=null==f?void 0:f.reduce((function(t,e){return[].concat(Tx(t),[e.id])}),[]),r=[];r=t?Tx(e):[],G(r),j(Cx(Cx({},E),{},{driver_companies:JSON.stringify(r)}))},handleUpdateDriversGroup:F,handleDeleteDriversGroup:U,handleAddDriversGroup:B})))};function Mx(t){return Mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(t)}function Yx(){return Yx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yx.apply(this,arguments)}function zx(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Xx(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function $x(t){return function(t){if(Array.isArray(t))return Qx(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Xx(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qx(){qx=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Mx(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Jx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vx(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jx(Object(r),!0).forEach((function(e){Hx(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jx(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Hx(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wx(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Kx(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Wx(i,n,o,a,c,"next",t)}function c(t){Wx(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Zx(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Xx(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xx(t,e){if(t){if("string"==typeof t)return Qx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qx(t,e):void 0}}function Qx(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Rx.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Rx.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var tE=function(t){var e=t.drivergroup,r=t.zone,n=t.driverGroupsZones,a=t.UIComponent,c=t.handleSuccessUpdate,u=t.setZoneList,s=Zx(er(),1)[0],l=Zx(hr(),1)[0].token,f=Zx(br(),2)[1].showToast,p=Zx(Ir(),2)[1],h=Zx(Object(o.useState)({zone:r}),2),d=h[0],y=h[1],v=Zx(Object(o.useState)({loading:!1,changes:{},error:null}),2),m=v[0],g=v[1],b=Zx(Object(o.useState)(null),2),w=b[0],O=b[1],x=function(){var o=Kx(qx().mark((function o(){var i,a,c,h,d,y;return qx().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,i=Vx({},m.changes),i=Vx(Vx({},i),{},{data:JSON.stringify(m.changes.data)}),f(vr.Info,p("LOADING","Loading")),g(Vx(Vx({},m),{},{loading:!0})),a={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},o.next=8,fetch("".concat(s.root,"/drivergroups/").concat(null==e?void 0:e.id,"/deliveryzones/").concat(r.id),a);case 8:return c=o.sent,o.next=11,c.json();case 11:(h=o.sent).error?g(Vx(Vx({},m),{},{loading:!1,error:h.result})):(g(Vx(Vx({},m),{},{loading:!1,changes:{}})),y=null==n||null===(d=n.zones)||void 0===d?void 0:d.filter((function(t){return(null==t?void 0:t.id)===r.id&&Object.assign(r,h.result),!0})),u({zones:y,loading:!1,error:null}),f(vr.Success,p("DELIVERYZONE_SAVED","Delivery zone saved")),t.onClose&&t.onClose()),o.next=18;break;case 15:o.prev=15,o.t0=o.catch(0),g(Vx(Vx({},m),{},{loading:!1,error:[o.t0.message]}));case 18:case"end":return o.stop()}}),o,null,[[0,15]])})));return function(){return o.apply(this,arguments)}}(),E=function(){var r=Kx(qx().mark((function r(){var o,i,a,c,h,d;return qx().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,i=Vx({},m.changes),i=Vx(Vx({},i),{},{data:JSON.stringify(m.changes.data),type:(null===(o=m.changes)||void 0===o?void 0:o.type)||2,enabled:!0,schedule:JSON.stringify([{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]}])}),f(vr.Info,p("LOADING","Loading")),g(Vx(Vx({},m),{},{loading:!0})),a={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},r.next=8,fetch("".concat(s.root,"/drivergroups/").concat(null==e?void 0:e.id,"/deliveryzones"),a);case 8:return c=r.sent,r.next=11,c.json();case 11:(h=r.sent).error?g(Vx(Vx({},m),{},{loading:!1,error:h.result})):(g(Vx(Vx({},m),{},{changes:{},loading:!1})),d=[].concat($x(null==n?void 0:n.zones),[h.result]),u({zones:d,loading:!1,error:null}),f(vr.Success,p("DELIVERYZONE_ADDED","Delivery zone added")),t.onClose&&t.onClose()),r.next=19;break;case 15:r.prev=15,r.t0=r.catch(0),console.log("entro"),g(Vx(Vx({},m),{},{error:r.t0.message,loading:!1}));case 19:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(){return r.apply(this,arguments)}}(),j=function(){var o=Kx(qx().mark((function o(){var i,a,h,d,y;return qx().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,f(vr.Info,p("LOADING","Loading")),g(Vx(Vx({},m),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},o.next=6,fetch("".concat(s.root,"/drivergroups/").concat(null==e?void 0:e.id,"/deliveryzones/").concat(r.id),i);case 6:return a=o.sent,o.next=9,a.json();case 9:(h=o.sent).error?g(Vx(Vx({},m),{},{loading:!1,error:h.result})):(y=null==n||null===(d=n.zones)||void 0===d?void 0:d.filter((function(t){return(null==t?void 0:t.id)!==r.id})),g(Vx(Vx({},m),{},{loading:!1})),u({zones:y,loading:!1,error:null}),c&&c(_driverGroupsZones),f(vr.Success,p("DELIVERYZONE_DELETED","Driver group delivery zone deleted")),t.onClose&&t.onClose()),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0),g(Vx(Vx({},m),{},{loading:!1,error:[o.t0.message]}));case 16:case"end":return o.stop()}}),o,null,[[0,13]])})));return function(){return o.apply(this,arguments)}}(),S=function(t){var e=(new DOMParser).parseFromString(t,"text/xml"),r=[],n="";if("kml"===e.documentElement.nodeName){var o,i=zx(e.getElementsByTagName("Placemark"));try{for(i.s();!(o=i.n()).done;){var a=o.value;n=a.getElementsByTagName("name")[0].childNodes[0].nodeValue.trim();var c,u=zx(a.getElementsByTagName("Polygon"));try{for(u.s();!(c=u.n()).done;){var s,l=c.value.getElementsByTagName("coordinates")[0].childNodes[0].nodeValue.trim(),f=(l=l.replace(/\n/g," ").replace(/\s+/g," ")).split(" "),h=[],d=zx(f);try{for(d.s();!(s=d.n()).done;){var y=s.value.split(",");h.push({lat:+y[1],lng:+y[0]})}}catch(t){d.e(t)}finally{d.f()}r.push(h)}}catch(t){u.e(t)}finally{u.f()}}}catch(t){i.e(t)}finally{i.f()}}else g(Vx(Vx({},m),{},{error:p("INVALID_KML_FILE","Invalid KML file")}));1===r.length?(g(Vx(Vx({},m),{},{changes:Vx(Vx({},m.changes),{},{type:2,name:n,data:r[0]})})),O(r[0])):g(Vx(Vx({},m),{},{error:p("INVALID_KML_FILE","Invalid KML file")}))};return Object(o.useEffect)((function(){g({loading:!1,changes:{},error:null}),y({zone:r})}),[r]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,Yx({},t,{zoneState:d,formState:m,kmlData:w,handleChangeInput:function(t,e){var r;"distance"===t.target.name?g(Vx(Vx({},m),{},{changes:Vx(Vx({},m.changes),{},{data:(r={},Hx(r,t.target.name,t.target.value),Hx(r,"unit",e),r)})})):g(Vx(Vx({},m),{},{changes:Vx(Vx({},m.changes),{},Hx({},t.target.name,t.target.value))}))},handleChangeFormState:function(t){g(Vx(Vx({},m),{},{changes:Vx(Vx({},m.changes),t)}))},handleDeleteDriverGroupDeliveryZone:j,handleUpdateDriverGroupDeliveryZone:x,handleAddDriverGroupDeliveryZone:E,handleUploadKmlFiles:function(t){if(1===t.length){var e=new window.FileReader;e.readAsText(t[0]),e.onload=function(){S(e.result)},e.onerror=function(t){return console.log(t)}}}})))};function eE(t){return eE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eE(t)}function rE(){return rE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rE.apply(this,arguments)}function nE(){nE=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==eE(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function oE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function iE(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?oE(Object(r),!0).forEach((function(e){aE(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oE(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function aE(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cE(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function uE(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){cE(i,n,o,a,c,"next",t)}function c(t){cE(i,n,o,a,c,"throw",t)}a(void 0)}))}}function sE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return lE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lE(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lE(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}tE.propTypes={UIComponent:c.a.elementType,drivergroup:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},tE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fE=function(t){var e=t.drivergroup,r=t.UIComponent,n=sE(er(),1)[0],a=sE(hr(),1)[0],c=sE(br(),2)[1].showToast,u=sE(Ir(),2)[1],s=sE(Object(o.useState)({loading:!1,error:null}),2),l=s[0],f=s[1],p=sE(Object(o.useState)({loading:!1,zones:[],error:null}),2),h=p[0],d=p[1],y=sE(Object(o.useState)({changes:{}}),2),v=y[0],m=y[1],g=sE(Object(o.useState)({changes:{},isCheckAll:!1,isDirty:!1}),2),b=g[0],w=g[1],O=function(){var t=uE(nE().mark((function t(){var r,o,i;return nE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(iE(iE({},h),{},{loading:!0,error:null})),t.prev=1,r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)}},t.next=5,fetch("".concat(n.root,"/drivergroups/").concat(null==e?void 0:e.id,"/deliveryzones"),r);case 5:return o=t.sent,t.next=8,o.json();case 8:if((i=t.sent).error){t.next=13;break}d({zones:i.result,loading:!1,error:null}),t.next=15;break;case 13:throw d({zones:i,loading:!1,error:[err.message]}),{message:i.result};case 15:t.next=20;break;case 17:return t.prev=17,t.t0=t.catch(1),t.abrupt("return",Promise.reject(t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=uE(nE().mark((function t(r,o){var i,c,u;return nE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)},body:JSON.stringify({enabled:o})},t.next=4,fetch("".concat(n.root,"/drivergroups/").concat(null==e?void 0:e.id,"/deliveryzones/").concat(r),i);case 4:return c=t.sent,t.next=7,c.json();case 7:if((u=t.sent).error){t.next=12;break}return t.abrupt("return",u.result);case 12:throw f({loading:!1,error:[err.message]}),{message:u.result};case 14:t.next=19;break;case 16:return t.prev=16,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e,r){return t.apply(this,arguments)}}(),E=function(){var t=uE(nE().mark((function t(){var e,r;return nE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,c(vr.Info,u("LOADING","Loading")),f({loading:!0,error:null}),!Object.keys(b.changes).length){t.next=12;break}e=nE().mark((function t(e){var r,n,o;return nE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=parseInt(e),(null==(o=null==h||null===(r=h.zones)||void 0===r?void 0:r.find((function(t){return t.id===n})))?void 0:o.enabled)===b.changes[e]){t.next=5;break}return t.next=5,x(n,b.changes[e]);case 5:case"end":return t.stop()}}),t)})),t.t0=nE().keys(b.changes);case 6:if((t.t1=t.t0()).done){t.next=11;break}return r=t.t1.value,t.delegateYield(e(r),"t2",9);case 9:t.next=6;break;case 11:w(iE(iE({},b),{},{isDirty:!1}));case 12:f({loading:!1,error:null}),c(vr.Success,u("DRIVER_GROUP_UPDATED","Driver group updated")),t.next=19;break;case 16:t.prev=16,t.t3=t.catch(0),f({loading:!1,error:[t.t3.message]});case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t=0;for(var e in b.changes)b.changes[e]&&(t+=1);w(iE(iE({},b),{},{isCheckAll:Object.keys(b.changes).length===t}))}),[b.changes]),Object(o.useEffect)((function(){var t,e=(null==h||null===(t=h.zones)||void 0===t?void 0:t.filter((function(t){return 3!==(null==t?void 0:t.type)})))||[],r={};null==e||e.forEach((function(t){r[t.id]=t.enabled})),w(iE(iE({},b),{},{changes:r}))}),[null==h?void 0:h.zones]),Object(o.useEffect)((function(){O()}),[null==e?void 0:e.id]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,rE({},t,{actionState:l,formState:v,zoneListState:b,handleChangeForm:function(t){m({changes:iE(iE({},v.changes),t)})},onDeliveryStateSave:E,handleChangeAllZoneState:function(t){var e=iE({},b.changes);for(var r in e)e[r]=t;w(iE(iE({},b),{},{changes:e,isCheckAll:t,isDirty:!0}))},handleChangeZoneState:function(t,e){w(iE(iE({},b),{},{changes:iE(iE({},b.changes),{},aE({},t,e)),isDirty:!0}))},zoneList:h,setZoneList:d})))};function pE(){return pE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pE.apply(this,arguments)}function hE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function dE(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hE(Object(r),!0).forEach((function(e){yE(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hE(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yE(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return mE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mE(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mE(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}fE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gE=function(t){var e=t.UIComponent,r=t.curDriversGroup,n=t.handleChangesState,a=vE(Object(o.useState)({}),2),c=a[0],u=a[1],s=vE(Object(o.useState)({}),2),l=s[0],f=s[1],p=vE(Object(o.useState)({}),2),h=p[0],d=p[1],y=function(t){return 1*t/3600>1?Math.floor(1*t/3600):0},v=function(t){return Math.floor((t-3600*Math.floor(t/3600))/60)},m=function(t){var e=t-3600*Math.floor(t/3600);return Math.floor(e-60*Math.floor(e/60))};return Object(o.useEffect)((function(){if(r){var t={hour:y(null==r?void 0:r.orders_group_max_time_between),minute:v(null==r?void 0:r.orders_group_max_time_between),second:m(null==r?void 0:r.orders_group_max_time_between)};u(t);var e={hour:y(null==r?void 0:r.orders_group_max_time_between_pickup),minute:v(null==r?void 0:r.orders_group_max_time_between_pickup),second:m(null==r?void 0:r.orders_group_max_time_between_pickup)};f(e);var n={hour:y(null==r?void 0:r.orders_group_max_time_between_delivery),minute:v(null==r?void 0:r.orders_group_max_time_between_delivery),second:m(null==r?void 0:r.orders_group_max_time_between_delivery)};d(n)}}),[r]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,pE({},t,{maxTimeBetweenOrder:c,maxTimeBetweenBusiness:l,maxTimeBetweenDelivery:h,handleChangeMaxTimeBetweenOrder:function(t,e){if(""===t||/^[0-9\b]+$/.test(t)){var r=""===t?0:parseInt(t),o=dE({},c);o[e]=r,u(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);n({orders_group_max_time_between:i})}},handleChangeMaxTimeBetweenBusiness:function(t,e){if(""===t||/^[0-9\b]+$/.test(t)){var r=""===t?0:parseInt(t),o=dE({},c);o[e]=r,f(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);n({orders_group_max_time_between_pickup:i})}},handleChangeMaxTimeBetweenDelivery:function(t,e){if(""===t||/^[0-9\b]+$/.test(t)){var r=""===t?0:parseInt(t),o=dE({},c);o[e]=r,d(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);n({orders_group_max_time_between_delivery:i})}},onChangeNumberInput:function(t,e){(""===e||/^[0-9\b]+$/.test(e))&&n(yE({},t,e))}})))};function bE(t){return bE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bE(t)}function wE(){return wE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wE.apply(this,arguments)}function OE(t){return function(t){if(Array.isArray(t))return TE(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||kE(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xE(){xE=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==bE(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function EE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jE(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?EE(Object(r),!0).forEach((function(e){SE(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EE(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function SE(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LE(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function _E(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){LE(i,n,o,a,c,"next",t)}function c(t){LE(i,n,o,a,c,"throw",t)}a(void 0)}))}}function PE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||kE(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kE(t,e){if(t){if("string"==typeof t)return TE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?TE(t,e):void 0}}function TE(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}gE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var IE=function(t){var e=t.UIComponent,r=t.isDriversMangersRequired,n=PE(er(),1)[0],a=PE(hr(),1)[0].token,c=PE(br(),2)[1].showToast,u=PE(Ir(),2)[1],s=PE(Object(o.useState)({groups:[],loading:!1,error:null}),2),l=s[0],f=s[1],p=PE(Object(o.useState)({managers:[],loading:!1,error:null}),2),h=p[0],d=p[1],y=PE(Object(o.useState)({businesses:[],loading:!1,error:null}),2),v=y[0],m=y[1],g=PE(Object(o.useState)({paymethods:[],loading:!1,error:null}),2),b=g[0],w=g[1],O=PE(Object(o.useState)({drivers:[],loading:!1,error:null}),2),x=O[0],E=O[1],j=PE(Object(o.useState)({companies:[],loading:!1,error:null}),2),S=j[0],L=j[1],_=PE(Object(o.useState)(!1),2),P=_[0],k=_[1],T=PE(Object(o.useState)({loading:!1,error:null}),2),I=T[0],A=T[1],C=PE(Object(o.useState)([]),2),N=C[0],D=C[1],G=function(){var t=_E(xE().mark((function t(){var e,r,o;return xE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(jE(jE({},l),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,fetch("".concat(n.root,"/drivergroups"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(o=t.sent).error||f(jE(jE({},l),{},{groups:o.result,loading:!1})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),f(jE(jE({},l),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),F=function(){var t=_E(xE().mark((function t(){var e,r,o,i;return xE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(jE(jE({},h),{},{loading:!1})),t.next=4,n.setAccessToken(a).users().where([{attribute:"level",value:5}]).select(["name","email","photo"]).get();case 4:e=t.sent,r=e.content,o=r.error,i=r.result,o||d(jE(jE({},h),{},{loading:!1,managers:i})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),d(jE(jE({},h),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=_E(xE().mark((function t(){var e,r,o,i;return xE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(jE(jE({},v),{},{loading:!1})),t.next=4,n.setAccessToken(a).businesses().select(["name","logo"]).asDashboard().get();case 4:e=t.sent,r=e.content,o=r.error,i=r.result,o||m(jE(jE({},v),{},{loading:!1,businesses:i})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),m(jE(jE({},v),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),B=function(){var t=_E(xE().mark((function t(){var e,r,o,i;return xE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,E(jE(jE({},x),{},{loading:!1})),t.next=4,n.setAccessToken(a).users().where([{attribute:"level",value:4}]).select(["name","lastname","email","photo"]).get();case 4:e=t.sent,r=e.content,o=r.error,i=r.result,o||E(jE(jE({},x),{},{loading:!1,drivers:i})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),E(jE(jE({},x),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),R=function(){var t=_E(xE().mark((function t(){var e,r,o;return xE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w(jE(jE({},b),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,fetch("".concat(n.root,"/paymethods?params=name&where={%22enabled%22:true}"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(o=t.sent).error||w(jE(jE({},b),{},{paymethods:o.result,loading:!1})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),w(jE(jE({},b),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=_E(xE().mark((function t(){var e,r,o;return xE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,L(jE(jE({},S),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,fetch("".concat(n.root,"/driver_companies?params=name"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(o=t.sent).error||L(jE(jE({},S),{},{companies:o.result,loading:!1})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),L(jE(jE({},S),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),Y=function(){var t=_E(xE().mark((function t(e,r){var o,i,s,p;return xE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),A(jE(jE({},I),{},{loading:!0,error:null})),o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(r)},t.next=6,fetch("".concat(n.root,"/drivergroups/").concat(e),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(s=t.sent).error?A(jE(jE({},I),{},{loading:!1,error:s.result})):(A({error:null,loading:!1}),p=l.groups.filter((function(t){return t.id===e&&Object.assign(t,s.result),!0})),f(jE(jE({},l),{},{groups:p})),c(vr.Success,u("CHANGES_SAVED","Changes saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),A({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),z=function(){var t=_E(xE().mark((function t(e){var r,o,i,s,p;return xE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),A(jE(jE({},I),{},{loading:!0,error:null})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=6,fetch("".concat(n.root,"/drivergroups/").concat(e),r);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?(A(jE(jE({},I),{},{loading:!1,error:i.result})),k(!1)):(A(jE(jE({},I),{},{loading:!1})),s=l.groups.filter((function(t){return t.id!==e})),f(jE(jE({},l),{},{groups:s})),c(vr.Success,u("DRIVER_GROUP_DELETED","Driver group deleted")),P&&((p=OE(N)).shift(),0===p.length&&k(!1),D(p))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),A({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){P&&0!==N.length&&z(N[0])}),[N,P]),Object(o.useEffect)((function(){G(),r&&F(),B(),U(),R(),M()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,wE({},t,{driversGroupsState:l,setDriversGroupsState:f,driversManagersList:h,businessesList:v,paymethodsList:b,driversList:x,driversCompanyList:S,actionState:I,handleUpdateDriversGroup:Y,handleDeleteDriversGroup:z,handleDeleteSelectedGroups:function(){return k(!0)},selectedGroupList:N,handleSelectGroup:function(t){var e=[];e=N.includes(t)?N.filter((function(e){return e!==t})):[].concat(OE(N),[t]),D(e)},handleAllSelectGroup:function(){var t,e=null===(t=l.groups)||void 0===t?void 0:t.reduce((function(t,e){return[].concat(OE(t),[e.id])}),[]);N.length===e.length?D([]):D(e)}})))};function AE(t){return AE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AE(t)}function CE(){return CE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CE.apply(this,arguments)}function NE(){NE=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==AE(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function DE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function GE(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?DE(Object(r),!0).forEach((function(e){FE(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DE(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function FE(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UE(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function BE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return RE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RE(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RE(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}IE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},IE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ME=function(t){var e,r=t.driversGroupId,n=t.UIComponent,a=t.paginationSettings,c=BE(er(),1)[0],u=BE(hr(),1)[0],s=BE(Object(o.useState)({logs:[],loading:!0,error:null}),2),l=s[0],f=s[1],p=BE(Object(o.useState)({currentPage:"pages"===a.controlType&&a.initialPage&&a.initialPage>=1?a.initialPage-1:0,pageSize:null!==(e=a.pageSize)&&void 0!==e?e:10,totalItems:null,totalPages:null}),2),h=p[0],d=p[1],y=function(){var t,e=(t=NE().mark((function t(e,n){var o,i,a,s,p;return NE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(GE(GE({},l),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u.token)}},t.next=5,fetch("".concat(c.root,"/drivergroups/").concat(r,"/logs?orderBy=-id&page=").concat(e,"&page_size=").concat(n),o);case 5:return i=t.sent,t.next=8,i.json();case 8:a=t.sent,s=a.pagination,p=a.result,f(GE(GE({},l),{},{loading:!1,logs:p})),d(GE(GE({},h),{},{currentPage:s.current_page,totalPages:s.total_pages,totalItems:s.total,from:s.from,to:s.to})),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),f(GE(GE({},l),{},{loading:!1,error:t.t0.message}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){UE(i,n,o,a,c,"next",t)}function c(t){UE(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){y(1,null)}),[r]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,CE({},t,{logsList:l,paginationProps:h,getDriversGroupLogs:y})))};function YE(){return YE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YE.apply(this,arguments)}function zE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $E(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $E(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ME.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ME.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var qE=function(t){var e=t.UIComponent,r=t.businessId,n=t.useOrderContext;if(n&&!r)throw new Error("`businessId` is required when `useOrderContext` is true.");var a=zE(Rn(),2),c=a[0],u=a[1].changeDriverTip,s=zE(Object(o.useState)(0),2),l=s[0],f=s[1],p=zE(Object(o.useState)(0),2),h=p[0],d=p[1];return Object(o.useEffect)((function(){var t,e,n=(null===(t=c.carts["businessId:".concat(r)])||void 0===t?void 0:t.driver_tip_rate)||0,o=(null===(e=c.carts["businessId:".concat(r)])||void 0===e?void 0:e.driver_tip)||0;f(n),d(o)}),[c]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,YE({},t,{driverTipAmount:h,optionSelected:l,handlerChangeOption:function(e){e=parseInt(e),n?u(r,e):f(e),t.handlerChangeDriverOption&&t.handlerChangeDriverOption(e)}})))};function JE(t){return JE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JE(t)}function VE(){return VE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VE.apply(this,arguments)}function HE(t){return function(t){if(Array.isArray(t))return nj(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||rj(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WE(){WE=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==JE(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function KE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ZE(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?KE(Object(r),!0).forEach((function(e){XE(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KE(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function XE(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QE(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function tj(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){QE(i,n,o,a,c,"next",t)}function c(t){QE(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ej(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||rj(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rj(t,e){if(t){if("string"==typeof t)return nj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nj(t,e):void 0}}function nj(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}qE.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,useOrderContext:c.a.bool,driverTipsOptions:c.a.arrayOf(c.a.number),handlerChangeDriverOption:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qE.defaultProps={useOrderContext:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var oj=function(t){var e=t.drivers,r=t.UIComponent,n=t.propsToFetch,a=t.isSearchByName,c=t.isSearchByCellphone,u=t.asDashboard,s=t.isOrderDrivers,l=t.orderId,f=ej(er(),1)[0],p=ej(br(),2)[1].showToast,h=ej(Ir(),2)[1],d={},y=ej(Object(o.useState)({loading:!0,error:null}),2),v=y[0],m=y[1],g=rn(),b=ej(hr(),1)[0],w=ej(Object(o.useState)({drivers:[],loading:!0,error:null}),2),O=w[0],x=w[1],E=ej(Object(o.useState)([]),2),j=E[0],S=E[1],L=ej(Object(o.useState)([]),2),_=L[0],P=L[1],k=ej(Object(o.useState)(!0),2),T=k[0],I=k[1],A=ej(Object(o.useState)({busy:!0,notBusy:!0}),2),C=A[0],N=A[1],D=ej(Object(o.useState)(null),2),G=D[0],F=D[1],U=function(){var t=tj(WE().mark((function t(e){var r,n,o;return WE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),m(ZE(ZE({},v),{},{loading:!0})),r={},d.assignDriver=r,t.next=7,f.setAccessToken(b.token).orders(e.orderId).save({driver_id:e.driverId},{cancelToken:r});case 7:n=t.sent,o=n.content,m({loading:!1,error:o.error?o.result:null}),o.error||(e.driverId?p(vr.Success,h("ORDER_DRIVER_ASSIGNED","Driver assigned to order")):p(vr.Success,h("ORDER_DRIVER_REMOVED","Driver removed from the order"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(ZE(ZE({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),B=function(t){var e,r;C.busy&&C.notBusy?(e=t.filter((function(t){return t.enabled&&t.available})),r=t.filter((function(t){return t.enabled&&!t.available}))):C.busy&&!C.notBusy?(e=t.filter((function(t){return t.enabled&&t.available&&t.busy})),r=t.filter((function(t){return t.enabled&&!t.available&&t.busy}))):!C.busy&&C.notBusy?(e=t.filter((function(t){return t.enabled&&t.available&&!t.busy})),r=t.filter((function(t){return t.enabled&&!t.available&&!t.busy}))):(e=[],r=[]),S(e),P(r)},R=function(){var t=tj(WE().mark((function t(){var e,r,o,i,u,s;return WE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,x(ZE(ZE({},O),{},{loading:!0})),e={},d.drivers=e,r=null,(o=[]).push({attribute:"level",value:[4]}),G&&(i=[],a&&(i.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(G,"%"))}}),i.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(G,"%"))}})),c&&i.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(G,"%"))}}),o.push({conector:"OR",conditions:i})),o.length&&(r={conditions:o,conector:"AND"}),t.next=11,f.setAccessToken(b.token).users().select(n).where(r).get({cancelToken:e});case 11:u=t.sent,s=u.content.result,x(ZE(ZE({},O),{},{loading:!1,drivers:s})),B(s),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),x(ZE(ZE({},O),{},{loading:!1,error:t.t0.message}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=tj(WE().mark((function t(){var e,r,n,o,i;return WE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,x(ZE(ZE({},O),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b.token)}},t.next=5,fetch("".concat(f.root,"/controls/orders/").concat(l),e);case 5:return r=t.sent,t.next=8,r.json();case 8:n=t.sent,o=n.error,i=n.result,x({loading:!1,drivers:o?[]:null==i?void 0:i.drivers,error:o?i:null}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),x(ZE(ZE({},O),{},{loading:!1,error:t.t0.message}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){B(O.drivers)}),[C]),Object(o.useEffect)((function(){return e?(x(ZE(ZE({},O),{},{drivers:e,loading:!1})),B(e)):s?M():R(),function(){d.drivers&&d.drivers.cancel()}}),[e,G]),Object(o.useEffect)((function(){if(null==b||!b.loading){var t=function(t){var e=[];e=O.drivers.find((function(e){return e.id===t.id}))?O.drivers.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0})):s?HE(O.drivers):[].concat(HE(O.drivers),[t]),x(ZE(ZE({},O),{},{drivers:e}))},e=function(t){var e;e=O.drivers.filter((function(e){if(e.id===t.driver_id)if("string"==typeof t.location){var r=t.location.replaceAll("\\",""),n=JSON.parse(r);e.location=n}else e.location=t.location;return!0})),x(ZE(ZE({},O),{},{drivers:e}))};return g.on("drivers_update",t),g.on("tracking_driver",e),function(){g.off("drivers_update",t),g.off("tracking_driver",e)}}}),[g,null==b?void 0:b.loading,O.drivers]),Object(o.useEffect)((function(){null!=b&&b.user&&!e&&g.join("drivers")}),[g,null==b?void 0:b.user,u]),Object(o.useEffect)((function(){B(O.drivers)}),[O.drivers]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,VE({},t,{driversList:O,onlineDrivers:j,offlineDrivers:_,driverActionStatus:v,driversIsOnline:T,driversSubfilter:C,searchValue:G,handleChangeSearch:function(t){t!==G&&F(t)},handleChangeDriverIsOnline:function(t){I(t)},handleChangeDriversSubFilter:function(t){N(t)},handleAssignDriver:U})))};function ij(t){return ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ij(t)}function aj(){return aj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aj.apply(this,arguments)}function cj(){cj=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==ij(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function uj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function sj(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?uj(Object(r),!0).forEach((function(e){lj(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uj(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function lj(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fj(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function pj(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){fj(i,n,o,a,c,"next",t)}function c(t){fj(i,n,o,a,c,"throw",t)}a(void 0)}))}}function hj(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return dj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dj(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dj(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}oj.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},oj.defaultProps={propsToFetch:["id","name","lastname","assigned_orders_count","available","phone","cellphone","location","photo","qualification","last_order_assigned_at"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var yj=function(t){var e=t.UIComponent,r=hj(hr(),1)[0],n=r.token,a=r.loading,c=hj(er(),1)[0],u=hj(Object(o.useState)({lapse:"today",userIds:null,businessIds:null,app_id:"all",driver_groups_ids:null,franchises_id:null,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),2),s=u[0],l=u[1],f=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),p=f[0],h=f[1],d=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),y=d[0],v=d[1],m=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),g=m[0],b=m[1],w=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),O=w[0],x=w[1],E=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),j=E[0],S=E[1],L=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),_=L[0],P=L[1],k=hj(Object(o.useState)({loading:!1,data:{},error:null}),2),T=k[0],I=k[1],A=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),C=A[0],N=A[1],D=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),G=D[0],F=D[1],U=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),B=U[0],R=U[1],M=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),Y=M[0],z=M[1],$=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),q=$[0],J=$[1],V=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),H=V[0],W=V[1],K=hj(Object(o.useState)({loading:!1,data:[],error:null}),2),Z=K[0],X=K[1],Q=hj(Object(o.useState)(""),2),tt=Q[0],et=Q[1],rt=function(t){var e,r,n="".concat(c.root,"/reports/").concat(t),o="lapse=".concat(null==s?void 0:s.lapse,"&timezone=").concat(null==s?void 0:s.timeZone);return null!=s&&s.userIds&&(o="".concat(o,"&drivers=").concat(null==s||null===(e=s.userIds)||void 0===e?void 0:e.toString())),null!=s&&s.businessIds&&(null==s?void 0:s.businessIds.length)>0&&(o="".concat(o,"&businesses=").concat(null==s||null===(r=s.businessIds)||void 0===r?void 0:r.toString())),null!=s&&s.app_id&&"all"!==s.app_id&&(o="".concat(o,"&app_id=").concat(null==s?void 0:s.app_id)),null!=s&&s.driver_groups_ids&&(o="".concat(o,"&driver_groups_ids=").concat(JSON.stringify(null==s?void 0:s.driver_groups_ids))),null!=s&&s.franchises_id&&(o="".concat(o,"&franchises_id=").concat(JSON.stringify(null==s?void 0:s.franchises_id))),"".concat(n,"?").concat(o)},nt=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,h(sj(sj({},p),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("driver_orders_v2"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,h(sj(sj({},p),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),h(sj(sj({},p),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),ot=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,v(sj(sj({},y),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("driver_sales_v2"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,v(sj(sj({},y),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),v(sj(sj({},y),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),it=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,b(sj(sj({},g),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("drivers_orders_status"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,b(sj(sj({},g),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),b(sj(sj({},g),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),at=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,x(sj(sj({},O),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("drivers_top_orders"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,x(sj(sj({},O),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),x(sj(sj({},O),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),ct=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,N(sj(sj({},C),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("customer_satisfaction"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,N(sj(sj({},C),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),N(sj(sj({},C),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),ut=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,J(sj(sj({},q),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("drivers_complete_spend"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,J(sj(sj({},q),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),J(sj(sj({},q),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),st=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,S(sj(sj({},j),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("drivers_spend_times"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,S(sj(sj({},j),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),S(sj(sj({},j),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),lt=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,P(sj(sj({},_),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("drivers_available_times"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,P(sj(sj({},_),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),P(sj(sj({},_),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),ft=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,I(sj(sj({},T),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("drivers_busy_times"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,I(sj(sj({},T),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),I(sj(sj({},T),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),pt=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,F(sj(sj({},G),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("drivers_accept_spend"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,F(sj(sj({},G),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),F(sj(sj({},G),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),ht=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,R(sj(sj({},B),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("drivers_arrived_pickup_spend"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,R(sj(sj({},B),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),R(sj(sj({},B),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),dt=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,z(sj(sj({},Y),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("drivers_order_location"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,z(sj(sj({},Y),{},c?{loading:!0,error:u}:{loading:!1,locations:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),z(sj(sj({},Y),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),yt=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,W(sj(sj({},H),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("drivers_pickup_spend"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,W(sj(sj({},H),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),W(sj(sj({},H),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),vt=function(){var t=pj(cj().mark((function t(){var e,r,o,i,c,u;return cj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,X(sj(sj({},Z),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=rt("drivers_delivery_spend"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,c=i.error,u=i.result,X(sj(sj({},Z),{},c?{loading:!0,error:u}:{loading:!1,data:u})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),X(sj(sj({},Z),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){nt(),ot(),it(),at(),st(),lt(),ft(),ct(),pt(),ut(),ht(),yt(),dt(),vt()}),[s]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,aj({},t,{filterList:s,ordersList:p,salesList:y,orderStatusList:g,topOrdersList:O,customerSatisfactionList:C,ordersAcceptSpendList:G,arrivedPickUpSpendList:B,orderLocationList:Y,spendTimesList:j,availableTimesList:_,busyTimesList:T,completeSpendList:q,pickUpSpendList:H,deliverySpendList:Z,handleChangeFilterList:l,countryCode:tt,handleChangeCode:function(t){et(t===tt?"":t)}})))};function vj(t){return vj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vj(t)}function mj(){return mj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mj.apply(this,arguments)}function gj(t){return function(t){if(Array.isArray(t))return _j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Lj(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bj(){bj=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==vj(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function wj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Oj(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wj(Object(r),!0).forEach((function(e){xj(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wj(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xj(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ej(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function jj(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ej(i,n,o,a,c,"next",t)}function c(t){Ej(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Sj(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Lj(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lj(t,e){if(t){if("string"==typeof t)return _j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_j(t,e):void 0}}function _j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}yj.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},yj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Pj=function(t){var e,r=t.UIComponent,n=t.paginationSettings,a=t.propsToFetch,c=t.isSearchByPromotionName,u=t.isSearchByPromotionDescription,s=Sj(er(),1)[0],l=Sj(hr(),1)[0].token,f=Sj(Ir(),2)[1],p=Sj(br(),2)[1].showToast,h=Sj(Object(o.useState)({promotions:[],loading:!1,error:null}),2),d=h[0],y=h[1],v=Sj(Object(o.useState)({loading:!1,error:null}),2),m=v[0],g=v[1],b=Sj(Object(o.useState)(null),2),w=b[0],O=b[1],x=Sj(Object(o.useState)({currentPage:"pages"===n.controlType&&n.initialPage&&n.initialPage>=1?n.initialPage-1:0,pageSize:null!==(e=n.pageSize)&&void 0!==e?e:10,totalItems:null,totalPages:null}),2),E=x[0],j=x[1],S=Sj(Object(o.useState)(null),2),L=S[0],_=S[1],P=Sj(Object(o.useState)(!1),2),k=P[0],T=P[1],I=Sj(Object(o.useState)({loading:!1,sites:[],error:null}),2),A=I[0],C=I[1],N=Sj(Object(o.useState)({loading:!1,paymethods:[],error:null}),2),D=N[0],G=N[1],F=Sj(Object(o.useState)({businesses:[],loading:!1,error:null}),2),U=F[0],B=F[1],R=function(){var t=jj(bj().mark((function t(e,r){var n,o,i,f,p,h,v;return bj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Oj(Oj({},d),{},{loading:!0})),n=null,o=[],w&&(i=[],c&&i.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}),u&&i.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}),o.push({conector:"OR",conditions:i})),o.length&&(n={conditions:o,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},p=n?"".concat(s.root,"/offers?page=").concat(e,"&page_size=").concat(r,"&params=").concat(a.toString(),"&&where=").concat(JSON.stringify(n)):"".concat(s.root,"/offers?page=").concat(e,"&page_size=").concat(r,"&params=").concat(a.toString()),t.next=10,fetch(p,f);case 10:return h=t.sent,t.next=13,h.json();case 13:(v=t.sent).error?y(Oj(Oj({},d),{},{loading:!1,error:v.result})):(y({promotions:v.result,loading:!1,error:null}),j(Oj(Oj({},E),{},{currentPage:v.pagination.current_page,pageSize:0===v.pagination.page_size?E.pageSize:v.pagination.page_size,totalPages:v.pagination.total_pages,totalItems:v.pagination.total,from:v.pagination.from,to:v.pagination.to}))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),y(Oj(Oj({},d),{},{loading:!1,error:[t.t0.message]}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e,r){return t.apply(this,arguments)}}(),M=function(){var t=jj(bj().mark((function t(e,r){var n,o,i,a;return bj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,f("LOADING","Loading")),g(Oj(Oj({},m),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:r})},t.next=6,fetch("".concat(s.root,"/offers/").concat(e),n);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error||(a=d.promotions.filter((function(t){return t.id===e&&Object.assign(t,i.result),!0})),y(Oj(Oj({},d),{},{promotions:a})),p(vr.Success,f("CHANGES_SAVED","Changes saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),g({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),Y=function(){var t=jj(bj().mark((function t(e,r){var n,o,i,a,c,u;return bj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,f("LOADING","Loading")),g(Oj(Oj({},m),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(r)},t.next=6,fetch("".concat(s.root,"/offers/").concat(e),n);case 6:return o=t.sent,t.next=9,o.json();case 9:i=t.sent,a=i.error,c=i.result,a||(p(vr.Success,f("CATEOGORY_UPDATED","Category updated")),u=null==d?void 0:d.promotions.map((function(t){return(null==t?void 0:t.id)===(null==c?void 0:c.id)?Oj(Oj({},t),{},{rank:null==c?void 0:c.rank}):t})),y({promotions:u,loading:!1,error:!1})),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),g({loading:!1,error:[t.t0.message]});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r){return t.apply(this,arguments)}}(),z=function(){var t=jj(bj().mark((function t(){var e,r,n;return bj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,C(Oj(Oj({},A),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},t.next=5,fetch("".concat(s.root,"/sites"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(n=t.sent).error||C({sites:n.result,loading:!1,error:null}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),C(Oj(Oj({},A),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),$=function(){var t=jj(bj().mark((function t(){var e,r,n;return bj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,G(Oj(Oj({},D),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},t.next=5,fetch("".concat(s.root,"/paymethods?where=").concat(JSON.stringify({enabled:!0})),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(n=t.sent).error||G({paymethods:n.result,loading:!1,error:null}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),G(Oj(Oj({},D),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),q=function(){var t=jj(bj().mark((function t(){var e,r,n,o;return bj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,B(Oj(Oj({},U),{},{loading:!1})),t.next=4,s.setAccessToken(l).businesses().select(["name","logo","slug"]).asDashboard().get();case 4:e=t.sent,r=e.content,n=r.error,o=r.result,n||B(Oj(Oj({},U),{},{loading:!1,businesses:o})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),B(Oj(Oj({},U),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){d.loading||R(1,E.pageSize)}),[w]),Object(o.useEffect)((function(){z(),q(),$()}),[]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,mj({},t,{sitesState:A,businessesList:U,paymethodsState:D,promotionListState:d,paginationProps:E,setPaginationProps:j,searchValue:w,onSearch:O,getPromotions:R,dataSelected:L,handleDragStart:function(t,e){t.dataTransfer.setData("transferPromotionId",e.id);var r=document.createElement("div");r.classList.add("ghostDragging"),r.innerHTML=null==e?void 0:e.name,document.body.appendChild(r),t.dataTransfer.setDragImage(r,0,0)},handleAllowDrop:function(t,e,r){if(t.preventDefault(),t.target.closest(".draggable_promotion"))if(r<(null==d?void 0:d.promotions.length)-1)_(e),T(!1);else{var n=window.scrollY+t.target.getBoundingClientRect().top+t.target.offsetHeight/2;t.clientY>n?(T(!0),_("")):(T(!1),_(e))}},handleDrop:function(t,e){t.preventDefault();var r=parseInt(t.dataTransfer.getData("transferPromotionId")),n=d.promotions.find((function(t){return t.id===r})),o=null==n?void 0:n.rank,i=null==e?void 0:e.rank;null===o&&null===i&&(i=1),k&&(i=Number(i)+1),Y(r,{rank:i})},handleDragEnd:function(){for(var t=document.getElementsByClassName("ghostDragging");t.length>0;)t[0].parentNode.removeChild(t[0]);_(""),T(!1)},isPromotionBottom:k,handleEnablePromotion:M,handleSuccessUpdatePromotions:function(t){y(Oj(Oj({},d),{},{promotions:t}))},handleSuccessAddPromotion:function(t){var e=[].concat(gj(d.promotions),[t]);j(Oj(Oj({},E),{},{to:(null==E?void 0:E.to)+1,total:(null==E?void 0:E.total)+1})),y(Oj(Oj({},d),{},{promotions:e}))},handleSuccessDeletePromotion:function(t){var e=d.promotions.filter((function(e){return e.id!==t}));j(Oj(Oj({},E),{},{total:(null==E?void 0:E.total)-1})),y(Oj(Oj({},d),{},{promotions:e}))}})))};function kj(){return kj=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kj.apply(this,arguments)}function Tj(){Tj=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ij(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Ij(t){return Ij="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ij(t)}function Aj(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Cj(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Aj(i,n,o,a,c,"next",t)}function c(t){Aj(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Nj(t){return function(t){if(Array.isArray(t))return Rj(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Bj(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Gj(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dj(Object(r),!0).forEach((function(e){Fj(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dj(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fj(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uj(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Bj(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bj(t,e){if(t){if("string"==typeof t)return Rj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rj(t,e):void 0}}function Rj(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Pj.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Pj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},propsToFetch:["name","auto","enabled","end","description","image","label","order_priority","sites","stackable","start","target","type","limit_per_user","user_order_count","user_order_count_condition","valid_from_after_user_last_order_minutes","valid_until_after_user_last_order_minutes","users","delivery_zones","paymethods","order_types_allowed","max_discount","rank","rate_type","rate","public","coupon","businesses","condition_type","minimum","products","categories","schedule","limit","include_options","loyalty_levels"]};var Mj=function(t){var e=t.promotion,r=t.promotionsList,n=t.businessesList,a=t.sitesState,c=t.UIComponent,u=t.handleSuccessUpdatePromotions,s=t.handleSuccessAddPromotion,l=t.handleSuccessDeletePromotion,f=Uj(Ir(),2)[1],p=Uj(er(),1)[0],h=Uj(hr(),1)[0].token,d=Uj(br(),2)[1].showToast,y=Uj(Object(o.useState)({promotion:e,loading:!1,error:null}),2),v=y[0],m=y[1],g=Uj(Object(o.useState)({loading:!1,changes:{}}),2),b=g[0],w=g[1],O=Uj(Object(o.useState)({loading:!1,error:null}),2),x=O[0],E=O[1],j=Uj(Object(o.useState)(!1),2),S=j[0],L=j[1],_=Uj(Object(o.useState)([]),2),P=_[0],k=_[1],T=Uj(Object(o.useState)([]),2),I=T[0],A=T[1],C=Uj(Object(o.useState)({}),2),N=C[0],D=C[1],G=Uj(Object(o.useState)({}),2),F=G[0],U=G[1],B=Uj(Object(o.useState)([]),2),R=B[0],M=B[1],Y=Uj(Object(o.useState)([]),2),z=Y[0],$=Y[1],q=function(){return w({loading:!1,changes:{}})},J=function(){var t=Cj(Tj().mark((function t(){var n,o,i,a,c,s,l,y;return Tj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a in t.prev=0,d(vr.Info,f("LOADING","Loading")),E({loading:!0,error:null}),i=Gj({},null==b?void 0:b.changes))("object"===Ij(i[a])&&null!==i[a]||Array.isArray(i[a]))&&(i[a]=JSON.stringify(i[a]));return c={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(i)},t.next=8,fetch("".concat(p.root,"/offers/").concat(null!==(n=e.id)&&void 0!==n?n:null===(o=v.promotion)||void 0===o?void 0:o.id),c);case 8:return s=t.sent,t.next=11,s.json();case 11:(l=t.sent).error?E({loading:!1,error:l.result}):(m(Gj(Gj({},v),{},{promotion:l.result})),E({loading:!1,error:null}),u&&(y=r.filter((function(t){return t.id===e.id&&Object.assign(t,l.result),!0})),u(y)),q(),d(vr.Success,f("PROMOTION_SAVED","Promotion saved"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),E({loading:!1,error:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),V=function(){var e=Cj(Tj().mark((function e(r){var n,o,i,a;return Tj().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(vr.Info,f("LOADING","Loading")),E({loading:!0,error:null}),null!=(n=Gj({},null==b?void 0:b.changes))&&n.schedule&&(n.schedule=JSON.stringify(n.schedule)),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(n)},e.next=8,fetch("".concat(p.root,"/offers"),o);case 8:return i=e.sent,e.next=11,i.json();case 11:(a=e.sent).error?E({loading:!1,error:a.result}):(E({error:null,loading:!1}),m(Gj(Gj({},v),{},{promotion:a.result})),s&&s(a.result),d(vr.Success,f("PROMOTION_ADDED","Promotion added")),L(!1),!r&&t.onClose&&t.onClose()),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),E({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var r=Cj(Tj().mark((function r(){var n,o;return Tj().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,d(vr.Info,f("LOADING","Loading")),E(Gj(Gj({},x),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},r.next=6,fetch("".concat(p.root,"/offers/").concat(e.id),n);case 6:return o=r.sent,r.next=9,o.json();case 9:r.sent.error||(l&&l(e.id),d(vr.Success,f("OFFER_DELETED","Offer deleted")),t.onClose&&t.onClose()),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),E({loading:!1,error:[r.t0.message]});case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(){return r.apply(this,arguments)}}();return Object(o.useEffect)((function(){if(0===Object.keys(e).length)L(!0),w(Gj(Gj({},b),{},{changes:{enabled:!0,auto:!1,public:!0,condition_type:1,type:1,target:1,rate_type:1,stackable:!1,rate:5}})),k([]),A([]),D({}),U({}),M([]),$([]);else{var t,r,n,o,i,a;L(!1),q();var c=null==e||null===(t=e.businesses)||void 0===t?void 0:t.reduce((function(t,e){return[].concat(Nj(t),[e.id])}),[]);k(c||[]);var u=null==e||null===(r=e.sites)||void 0===r?void 0:r.reduce((function(t,e){return[].concat(Nj(t),[e.id])}),[]);A(u||[]);var s=null==e||null===(n=e.products)||void 0===n?void 0:n.reduce((function(t,e){return[].concat(Nj(t),[e.id])}),[]);D(s);var l=null==e||null===(o=e.categories)||void 0===o?void 0:o.reduce((function(t,e){return[].concat(Nj(t),[e.id])}),[]);U(l);var f=null==e||null===(i=e.users)||void 0===i?void 0:i.reduce((function(t,e){return[].concat(Nj(t),[e.id])}),[]);M(f||[]);var p=null==e||null===(a=e.loyalty_levels)||void 0===a?void 0:a.reduce((function(t,e){return[].concat(Nj(t),[e.id])}),[]);$(p||[])}m(Gj(Gj({},v),{},{promotion:e}))}),[e]),i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(c,kj({},t,{isAddMode:S,promotionState:v,formState:b,actionState:x,selectedBusinessIds:P,selectedSitesIds:I,selectedProductsIds:N,setSelectedProductsIds:D,selectedCategoryIds:F,setSelectedCategoryIds:U,handleChangeImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){w(Gj(Gj({},b),{},{changes:Gj(Gj({},b.changes),{},{image:e.result})}))},e.onerror=function(t){return console.log(t)}},handleChangeInput:function(t){w(Gj(Gj({},b),{},{changes:Gj(Gj({},b.changes),{},Fj({},t.target.name,t.target.value))}))},handleUpdateClick:J,handleAddPromotion:V,handleDeletePromotion:H,handleChangeItem:function(t){w(Gj(Gj({},b),{},{changes:Gj(Gj({},b.changes),t)}))},handleRemoveKey:function(t){var e=Gj({},null==b?void 0:b.changes);delete e[t],w(Gj(Gj({},b),{},{changes:e}))},handleSelectSite:function(t,r){var n,o,i,a=[];null!==(n=b.changes)&&void 0!==n&&n.sites?a=Nj(null===(o=b.changes)||void 0===o?void 0:o.sites):null!=e&&e.sites&&(a=null==e||null===(i=e.sites)||void 0===i?void 0:i.reduce((function(t,e){return[].concat(Nj(t),[e.id])}),[]));t?a.push(r):a=a.filter((function(t){return t!==r})),A(a),w(Gj(Gj({},b),{},{changes:Gj(Gj({},b.changes),{},{sites:a})}))},handleSelectAllBusiness:function(t){var e,r=null==n||null===(e=n.businesses)||void 0===e?void 0:e.reduce((function(t,e){return[].concat(Nj(t),[e.id])}),[]),o=[];o=t?Nj(r):[],k(o),w(Gj(Gj({},b),{},{changes:Gj(Gj({},b.changes),{},{businesses:o})}))},handleSelectBusiness:function(t,e){var r=Nj(P),n=[];n=e?[].concat(Nj(r),[t]):r.filter((function(e){return e!==t})),k(n),w(Gj(Gj({},b),{},{changes:Gj(Gj({},b.changes),{},{businesses:n})}))},handleSelectAllSites:function(t){var e,r=null===(e=a.sites)||void 0===e?void 0:e.reduce((function(t,e){return[].concat(Nj(t),[e.id])}),[]),n=[];n=t?Nj(r):[],A(n),w(Gj(Gj({},b),{},{changes:Gj(Gj({},b.changes),{},{sites:n})}))},selectedUserIds:R,handleSelectUser:function(t,r){var n,o,i,a=[];null!==(n=b.changes)&&void 0!==n&&n.users?a=Nj(null===(o=b.changes)||void 0===o?void 0:o.users):null!=e&&e.users&&(a=null==e||null===(i=e.users)||void 0===i?void 0:i.reduce((function(t,e){return[].concat(Nj(t),[e.id])}),[]));t?a.push(r):a=a.filter((function(t){return t!==r})),M(a),w(Gj(Gj({},b),{},{changes:Gj(Gj({},b.changes),{},{users:a})}))},selectedLoyaltyLevelIds:z,handleSelectLoyaltyLevel:function(t,r){var n,o,i,a=[];null!==(n=b.changes)&&void 0!==n&&n.loyalty_levels?a=Nj(null===(o=b.changes)||void 0===o?void 0:o.loyalty_levels):null!=e&&e.loyalty_levels&&(a=null==e||null===(i=e.loyalty_levels)||void 0===i?void 0:i.reduce((function(t,e){return[].concat(Nj(t),[e.id])}),[]));t?a.push(r):a=a.filter((function(t){return t!==r})),$(a),w(Gj(Gj({},b),{},{changes:Gj(Gj({},b.changes),{},{loyalty_levels:a})}))},handleSelectAllLoyaltyLevels:function(t){$(t),w(Gj(Gj({},b),{},{changes:Gj(Gj({},b.changes),{},{loyalty_levels:t})}))},handleSelectAllUsers:function(){M([]),w(Gj(Gj({},b),{},{changes:Gj(Gj({},b.changes),{},{users:[]})}))}})))};Mj.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Mj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Yj=function(t){var e=t.onFiles,r=t.childRef,n=t.childId,a=t.children,c=t.className,u=t.style,s=t.accept,l=t.disabled,f=Object(o.useRef)(null);return i.a.createElement("div",{draggable:!0,onClick:function(t){r||n||f.current.click()},style:u,className:c},i.a.createElement("input",{type:"file",id:n,style:{display:"none"},onChange:function(t){t.preventDefault(),t.stopPropagation(),e(t.target.files)},onClick:function(t){return t.stopPropagation()},ref:function(t){f.current=t,r&&r(t)},accept:s,disabled:l}),a)};function zj(t){return zj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zj(t)}function $j(){return $j=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$j.apply(this,arguments)}function qj(){qj=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==zj(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Jj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vj(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jj(Object(r),!0).forEach((function(e){Hj(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jj(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Hj(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wj(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Kj(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Zj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zj(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zj(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Xj=function(t){var e=t.UIComponent,r=t.filterValues,n=Kj(er(),1)[0],a=Kj(hr(),1)[0],c=a.token,u=a.loading,s=Kj(Object(o.useState)({loading:!1,error:null,result:null}),2),l=s[0],f=s[1],p=function(){var t,e=(t=qj().mark((function t(e){var o,i,a,s,p,h,d;return qj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,f(Vj(Vj({},l),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},i=[],e&&Object.keys(r).length&&(void 0!==r.statuses&&(r.statuses.length>0?i.push({attribute:"status",value:r.statuses}):i.push({attribute:"status",value:[0,1,2,3,4,5,6,7,8,9,10,11,12]})),void 0!==r.deliveryFromDatetime&&null!==r.deliveryFromDatetime&&i.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(r.deliveryFromDatetime)}}),void 0!==r.deliveryEndDatetime&&null!==r.deliveryEndDatetime&&i.push({attribute:"delivery_datetime",value:{condition:"<=",value:r.deliveryEndDatetime}}),void 0!==r.businessIds&&0!==r.businessIds.length&&i.push({attribute:"business_id",value:r.businessIds}),void 0!==r.driverIds&&0!==r.driverIds.length&&i.push({attribute:"driver_id",value:r.driverIds}),void 0!==r.deliveryTypes&&0!==r.deliveryTypes.length&&i.push({attribute:"delivery_type",value:r.deliveryTypes}),void 0!==r.paymethodIds&&0!==r.paymethodIds.length&&i.push({attribute:"paymethod_id",value:r.paymethodIds})),a=e?"".concat(n.root,"/orders.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(i)):"".concat(n.root,"/orders.csv?mode=dashboard&orderBy=id"),t.next=10,fetch(a,o);case 10:return s=t.sent,t.next=13,s.json();case 13:p=t.sent,h=p.error,d=p.result,f(Vj(Vj({},l),{},h?{loading:!0,error:d}:{loading:!1,result:d})),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),f(Vj(Vj({},l),{},{loading:!1,error:t.t0}));case 22:case"end":return t.stop()}}),t,null,[[2,19]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Wj(i,n,o,a,c,"next",t)}function c(t){Wj(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,$j({},t,{actionStatus:l,getCSV:p})))};function Qj(t){return Qj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qj(t)}function tS(){return tS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tS.apply(this,arguments)}function eS(){eS=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Qj(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function rS(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function nS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function oS(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nS(Object(r),!0).forEach((function(e){iS(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nS(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function iS(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return cS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cS(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Xj.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var uS=function(t){var e=t.UIComponent,r=t.appId,n=t.debug,a=t.version,c=t.language,u=t.domain,s=t.handleButtonFacebookLoginClick,l=t.handleSuccessFacebookLogin,f=t.handleSuccessFacebookLogout,p=aS(er(),1)[0],h=aS(Object(o.useState)({loading:!1,result:{error:!1}}),2),d=h[0],y=h[1],v=aS(Object(o.useState)({ready:!1,logged:!1}),2),m=v[0],g=v[1],b=!1;Object(o.useEffect)((function(){if(!window.document.getElementById("facebook-jssdk")){window.fbAsyncInit=function(){window.FB.init({appId:r,cookie:!0,xfbml:!1,version:a,status:!0}),!b&&g(oS(oS({},m),{},{ready:!0})),window.FB.getLoginStatus((function(t){"connected"===t.status&&!b&&g(oS(oS({},m),{},{logged:!0}))}))};var t=window.document.createElement("script"),e=window.document.getElementsByTagName("script")[0];t.id="facebook-jssdk",t.async=!0,t.defer=!0,t.src="https://".concat(u,"/").concat(c,"/sdk").concat(n?"/debug":"",".js"),e.parentNode.insertBefore(t,e)}}),[]),Object(o.useEffect)((function(){return function(){b=!0}}),[]);var w=function(){var t,e=(t=eS().mark((function t(e){var r,n;return eS().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=3;break}return s(e),t.abrupt("return");case 3:return t.prev=3,y(oS(oS({},d),{},{loading:!0})),t.next=7,p.users().authFacebook({access_token:null===(r=e.authResponse)||void 0===r?void 0:r.accessToken});case 7:n=t.sent,y({result:n.content,loading:!1}),n.content.error?O():l&&l(n.content.result),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),y({result:{error:!0,result:t.t0.message},loading:!1});case 15:case"end":return t.stop()}}),t,null,[[3,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){rS(i,n,o,a,c,"next",t)}function c(t){rS(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),O=function(t){window.FB&&(y(oS(oS({},d),{},{loading:!0})),window.FB.logout((function(t){y({loading:!1,result:{error:!1}}),g(oS(oS({},m),{},{logged:!1})),f&&f(t)})))};return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,tS({},t,{formState:d,facebookStatus:m,handleFacebookLogout:O,handleFacebookLogin:function(t){window.FB&&(y(oS(oS({},d),{},{loading:!0})),window.FB.login((function(t){"connected"===t.status?(y({loading:!1,result:{error:!1}}),g(oS(oS({},m),{},{logged:!0})),w(t)):y({loading:!1,result:{error:!0,result:"Error login with Facebook"}})})))}})))};function sS(t){return sS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sS(t)}function lS(){return lS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lS.apply(this,arguments)}function fS(){fS=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==sS(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function pS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function hS(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pS(Object(r),!0).forEach((function(e){dS(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pS(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function dS(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yS(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function vS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return mS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mS(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}uS.propTypes={UIComponent:c.a.elementType,handleButtonForgotPassowrdClick:c.a.func,handleSuccessForgotPassoword:c.a.func,appId:c.a.string.isRequired,debug:c.a.bool,version:c.a.string,language:c.a.string,domain:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},uS.defaultProps={version:"v7.0",language:"en_US",domain:"connect.facebook.net",beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gS=function(t){var e=t.UIComponent,r=t.defaultEmail,n=t.handleButtonForgotPasswordClick,a=t.handleSuccessForgotPassword,c=vS(er(),1)[0],u=vS(Ir(),2)[1],s=vS(jn(),1)[0].configs,l=vS(Object(o.useState)({loading:!1,result:{error:!1}}),2),f=l[0],p=l[1],h=vS(Object(o.useState)({email:r||""}),2),d=h[0],y=h[1],v=vS(Object(o.useState)(null),2),m=v[0],g=v[1],b=vS(Object(o.useState)(!1),2),w=b[0],O=b[1],x=function(){var t,e=(t=fS().mark((function t(e){var r,n;return fS().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w){t.next=4;break}if(null!==m){t.next=4;break}return p({result:{error:!0,result:u("RECAPTCHA_VALIDATION_IS_REQUIRED","The captcha validation is required")},loading:!1}),t.abrupt("return");case 4:return t.prev=4,p(hS(hS({},f),{},{loading:!0})),r=e||d,t.next=9,c.users().forgotPassword(r);case 9:n=t.sent,p({result:n.content,loading:!1}),w&&(window.grecaptcha.reset(),g(null)),n.content.error||a&&a(d.email),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),p({result:{error:!0,result:t.t0.message},loading:!1});case 18:case"end":return t.stop()}}),t,null,[[4,15]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yS(i,n,o,a,c,"next",t)}function c(t){yS(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t;O((null==c?void 0:c.project)&&s&&Object.keys(s).length>0&&"1"===(null==s||null===(t=s.security_recaptcha_auth)||void 0===t?void 0:t.value))}),[s,null==c?void 0:c.project]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,lS({},t,{formState:f,formData:d,hanldeChangeInput:function(t){y(hS(hS({},d),{},dS({},t.target.name,t.target.value)))},handleButtonForgotPasswordClick:n||x,isReCaptchaEnable:w,handleReCaptcha:g})))};function bS(t){return bS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bS(t)}function wS(){return wS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wS.apply(this,arguments)}function OS(){OS=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==bS(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function xS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ES(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xS(Object(r),!0).forEach((function(e){jS(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xS(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jS(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SS(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function LS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _S(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _S(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _S(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}gS.propTypes={UIComponent:c.a.elementType,handleButtonForgotPasswordClick:c.a.func,handleSuccessForgotPassword:c.a.func,defaultEmail:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToSignup:c.a.string,linkToLogin:c.a.string,elementLinkToSignup:c.a.element,elementLinkToLogin:c.a.element},gS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var PS=function(t){var e,r=t.UIComponent,n=t.paginationSettings,a=t.isSearchById,c=t.isSearchByAuthorName,u=t.isSearchByAuthorEmail,s=t.isSearchByAuthorPhone,l=LS(er(),1)[0],f=LS(hr(),1)[0].token,p=LS(Object(o.useState)({loading:!0,list:[],error:null}),2),h=p[0],d=p[1],y=LS(Object(o.useState)({currentPage:n.initialPage&&n.initialPage>=1?n.initialPage-1:0,pageSize:null!==(e=n.pageSize)&&void 0!==e?e:10,totalItems:null,totalPages:null}),2),v=y[0],m=y[1],g=LS(Object(o.useState)("pending"),2),b=g[0],w=g[1],O=LS(Object(o.useState)(null),2),x=O[0],E=O[1],j=function(){var t,e=(t=OS().mark((function t(e,r){var n,o,i,p,y,g,w,O,E,j;return OS().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(ES(ES({},h),{},{loading:!0})),n=[],o=[],b&&o.push({attribute:"status",value:b}),x&&(i=[],a&&i.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}),c&&i.push({attribute:"author",conditions:[{attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}]}),u&&i.push({attribute:"author",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}]}),s&&i.push({attribute:"author",conditions:[{attribute:"phone",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}]}),o.push({conector:"OR",conditions:i})),o.length&&(n={conditions:o,conector:"AND"}),p={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},y=n?"".concat(l.root,"/gift_cards?page=").concat(e,"&page_size=").concat(r,"&&where=").concat(JSON.stringify(n)):"".concat(l.root,"/gift_cards?page=").concat(e,"&page_size=").concat(r),t.next=11,fetch(y,p);case 11:return g=t.sent,t.next=14,g.json();case 14:w=t.sent,O=w.error,E=w.result,j=w.pagination,O||m({currentPage:j.current_page,pageSize:0===j.page_size?v.pageSize:j.page_size,totalPages:j.total_pages,totalItems:j.total,from:j.from,to:j.to}),d({loading:!1,list:O?[]:E,error:O?E:null}),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),d(ES(ES({},h),{},{loading:!1,error:[t.t0.message]}));case 25:case"end":return t.stop()}}),t,null,[[0,22]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){SS(i,n,o,a,c,"next",t)}function c(t){SS(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){j(0,v.pageSize)}),[b,x]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,wS({},t,{giftCards:h,paginationProps:v,activeStatus:b,setActiveStatus:w,getGiftCards:j,searchValue:x,onSearch:E})))};function kS(){return kS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kS.apply(this,arguments)}function TS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return IS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IS(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}PS.propTypes={UIComponent:c.a.elementType},PS.defaultProps={paginationSettings:{initialPage:1,pageSize:10}};var AS=function(t){return function(e){var r=e.apiKey;r||console.warn("Prop `apiKey` is required to use Google Maps components.");var n=TS(Object(o.useState)(!1),2),a=n[0],c=n[1];return Object(o.useEffect)((function(){if(r){var t=null;if(!window.document.getElementById("google-maps-cluster")){var e=window.document.createElement("script");e.id="google-maps-cluster",e.async=!0,e.defer=!0,e.src="https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js",window.document.body.appendChild(e)}if(!window.document.getElementById("__googleMapsScriptId")||!window.document.getElementById("google-maps-cluster")){window.googleAsyncInit=function(){c(!0)};var n=window.document.createElement("script");return n.id="__googleMapsScriptId",n.async=!0,n.defer=!0,n.src="https://maps.googleapis.com/maps/api/js?key=".concat(r,"&libraries=places,geometry,visualization,drawing&callback=googleAsyncInit"),window.document.body.appendChild(n),function(){t&&clearInterval(t)}}"undefined"!=typeof google?c(!0):t=setInterval((function(){"undefined"!=typeof google&&(c(!0),clearInterval(t))}),100)}}),[r]),i.a.createElement(t,kS({},e,{googleReady:a}))}};function CS(){return CS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CS.apply(this,arguments)}function NS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||DS(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DS(t,e){if(t){if("string"==typeof t)return GS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?GS(t,e):void 0}}function GS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}AS.propTypes={apiKey:c.a.string.isRequired},AS.defaultProps={};var FS=function(t){var e=t.googleReady,r=t.onChangeAddress,n=t.types,a=t.fields,c=t.countryCode,u=t.childRef,s=Object(o.useRef)(),l={};Object.entries(t).forEach((function(t){var e=NS(t,2),r=e[0],n=e[1];-1===["googleReady","apiKey","onChangeAddress","setValue","childRef","countryCode","types","fields"].indexOf(r)&&(l[r]=n)}));var f={types:n,fields:a};return"*"!==c&&(f.componentRestrictions={country:c}),Object(o.useEffect)((function(){var t,n,o;if(e&&r&&null!==(t=window.google)&&void 0!==t&&null!==(n=t.maps)&&void 0!==n&&null!==(o=n.places)&&void 0!==o&&o.Autocomplete){var i=new window.google.maps.places.Autocomplete(s.current,f);i.addListener("place_changed",(function(){var t,e=i.getPlace(),n=null,o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=DS(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(e.address_components);try{for(o.s();!(t=o.n()).done;){var a=t.value;if("postal_code"===a.types[0]){n=a.short_name;break}}}catch(t){o.e(t)}finally{o.f()}var c={address:e.formatted_address,location:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},utc_offset:e.utc_offset_minutes,map_data:{library:"google",place_id:e.place_id}};n&&(c.zipcode=n),r(c)}))}}),[e]),Object(o.useEffect)((function(){var e=setInterval((function(){s.current.attributes.autocomplete&&s.current.attributes.autocomplete.value===(t.autoComplete||"new-field")&&clearInterval(e),s.current.setAttribute("autocomplete",t.autoComplete||"new-field")}),100);return function(){return clearInterval(e)}})),i.a.createElement("input",CS({},l,{autoComplete:t.autoComplete||"new-field",disabled:!t.googleReady,ref:function(t){s.current=t,u&&u(t)},onFocus:function(){return s.current.setAttribute("autocomplete",t.autoComplete||"new-field")}}))};FS.propTypes={apiKey:c.a.string.isRequired,fields:c.a.arrayOf(a.string),types:c.a.arrayOf(a.string),countryCode:c.a.string,onChangeAddress:c.a.func},FS.defaultProps={types:[],fields:["place_id","formatted_address","geometry","utc_offset_minutes","address_components"],countryCode:"*"};var US=AS(FS);function BS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function RS(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?BS(Object(r),!0).forEach((function(e){MS(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BS(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function MS(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YS(t){return function(t){if(Array.isArray(t))return qS(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||$S(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||$S(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $S(t,e){if(t){if("string"==typeof t)return qS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qS(t,e):void 0}}function qS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var JS=function(t){var e=t.googleReady,r=t.locations,n=t.mapControls,a=t.setErrors,c=t.isSetInputs,u=t.fixedLocation,s=t.handleChangeAddressMap,l=t.maxLimitLocation,f=t.businessMap,p=t.onBusinessClick,h=t.isHeatMap,d=t.isHeat,y=t.markerIcon,v=t.isFitCenter,m=t.handleChangeCenter,g=t.data,b=t.fillStyle,w=t.placeId,O=t.setDetails,x=zS(Wn(),1)[0].optimizeImage,E=zS(un(),1)[0],j=Object(o.useRef)(),S=zS(Object(o.useState)(null),2),L=S[0],_=S[1],P=zS(Object(o.useState)(null),2),k=P[0],T=P[1],I=zS(Object(o.useState)([]),2),A=I[0],C=I[1],N=zS(Object(o.useState)(null),2),D=N[0],G=N[1],F=zS(Object(o.useState)(null),2),U=F[0],B=F[1],R=zS(Object(o.useState)(null),2),M=R[0],Y=R[1],z=u||t.location,$={lat:null==z?void 0:z.lat,lng:null==z?void 0:z.lng},q=function(t){for(var e=new window.google.maps.LatLngBounds,n=0,o=function(o){var i,a,c,u,s,l=null;(1===o||f)&&(l=x(null===(s=r[o])||void 0===s?void 0:s.icon,"r_max"));h&&y&&(l=y);var d=new window.google.maps.Marker({position:new window.google.maps.LatLng(null===(i=r[o])||void 0===i?void 0:i.lat,null===(a=r[o])||void 0===a?void 0:a.lng),map:t,title:null===(c=r[o])||void 0===c?void 0:c.slug,icon:null!==(u=r[o])&&void 0!==u&&u.icon?{url:l||r[o].icon,scaledSize:new window.google.maps.Size(45,45)}:h?{url:l,scaledSize:new window.google.maps.Size(40,40)}:null});f?V(L,d,d.getPosition())?(d.addListener("click",(function(){var t;return p(null===(t=r[o])||void 0===t?void 0:t.slug)})),e.extend(d.position),C((function(t){return[].concat(YS(t),[d])})),n+=1):d.setMap(null):(e.extend(d.position),C((function(t){return[].concat(YS(t),[d])})))},i=0;i<r.length;i++)o(i);0===n&&a&&a("ERROR_NOT_FOUND_BUSINESSES"),(null==t?void 0:t.fitBounds)&&t.fitBounds(e),G(e)},J=function(t){if(c){(new window.google.maps.Geocoder).geocode({latLng:t},(function(e){var r=null;if(e&&e.length>0){var n,o,i,c=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=$S(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(e[0].address_components);try{for(c.s();!(i=c.n()).done;){var u=i.value;if("postal_code"===u.types[0]){r=u.short_name;break}}}catch(t){c.e(t)}finally{c.f()}var l={address:e[0].formatted_address,location:{lat:null==t?void 0:t.lat(),lng:null==t?void 0:t.lng()},zipcode:r};s&&s(l),$.lat=null===(n=l.location)||void 0===n?void 0:n.lat,$.lng=null===(o=l.location)||void 0===o?void 0:o.lng}else k&&k.setPosition($),a&&a("ERROR_NOT_FOUND_ADDRESS");null!=$&&$.lat&&null!=$&&$.lng&&L&&L.panTo(new window.google.maps.LatLng(null==$?void 0:$.lat,null==$?void 0:$.lng))}))}else{var e={lat:null==t?void 0:t.lat(),lng:null==t?void 0:t.lng()};s&&s({location:e}),$.lat=null==e?void 0:e.lat,$.lng=null==e?void 0:e.lng,e.lat&&e.lng&&L&&L.panTo(new window.google.maps.LatLng(null==e?void 0:e.lat,null==e?void 0:e.lng))}},V=function(t,e,r){var n=new window.google.maps.LatLng(null==r?void 0:r.lat(),null==r?void 0:r.lng()),o=new window.google.maps.LatLng(null==z?void 0:z.lat,null==z?void 0:z.lng),i=window.google.maps.geometry.spherical.computeDistanceBetween(n,o);if(f){return i<=2e4}l?i<=l?J(r):null!=$&&$.lat&&null!=$&&$.lng&&(e.setPosition($),t.panTo(new window.google.maps.LatLng(null==$?void 0:$.lat,null==$?void 0:$.lng)),a&&a("ERROR_MAX_LIMIT_LOCATION")):J(r)};return Object(o.useEffect)((function(){e&&L&&k&&h&&M&&(U.setMap(U.getMap()?null:L),U.getMap()?M.clearMarkers():M.addMarkers(A))}),[d]),Object(o.useEffect)((function(){e&&L&&k&&v&&L.addListener("center_changed",(function(){var t=setTimeout((function(){k.setPosition(L.getCenter()),m&&m(L.getCenter())}),200);return function(){return clearTimeout(t)}}))}),[k]),Object(o.useEffect)((function(){if(e){var t,o=new window.google.maps.Map(j.current,{zoom:null!==(t=z.zoom)&&void 0!==t?t:n.defaultZoom,center:$,zoomControl:null==n?void 0:n.zoomControl,streetViewControl:null==n?void 0:n.streetViewControl,fullscreenControl:null==n?void 0:n.fullscreenControl,mapTypeControl:null==n?void 0:n.mapTypeControl,mapTypeId:null==n?void 0:n.mapTypeId,mapTypeControlOptions:RS({style:window.google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:window.google.maps.ControlPosition.TOP_LEFT},null==n?void 0:n.mapTypeControlOptions)}),i=null;_(o),r?(f&&(i=new window.google.maps.Marker({position:new window.google.maps.LatLng($.lat,$.lng),map:o}),T(i)),q(o),i=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==$?void 0:$.lat,null==$?void 0:$.lng),map:o,opacity:h?0:1}),T(i)):(i=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==$?void 0:$.lat,null==$?void 0:$.lng),map:o,draggable:!(null==n||!n.isMarkerDraggable)}),T(i)),g&&g.forEach((function(t){var e;if(1===t.type&&null!=t&&null!==(e=t.data)&&void 0!==e&&e.center){var r=new window.google.maps.Circle(RS(RS({},b),{},{draggable:!1,map:o,center:t.data.center,radius:t.data.radio}));console.log(r)}if(2===t.type&&Array.isArray(t.data)){var n=new window.google.maps.Polygon(RS(RS({},b),{},{draggable:!1,map:o,paths:t.data}));console.log(n)}}))}}),[e]),Object(o.useEffect)((function(){if(!f&&e&&L&&k){if(window.google.maps.event.addListener(k,"dragend",(function(){V(L,k,k.getPosition())})),window.google.maps.event.addListener(k,"drag",(function(){E.emit("map_is_dragging",!0)})),null!=n&&n.isMarkerDraggable&&(window.google.maps.event.addListener(L,"drag",(function(){k.setPosition(L.getCenter()),E.emit("map_is_dragging",!0)})),window.google.maps.event.addListener(L,"dragend",(function(){k.setPosition(L.getCenter()),V(L,k,L.getCenter())}))),h&&!M&&window.google.maps.visualization){var t=new window.google.maps.visualization.HeatmapLayer({data:null==r?void 0:r.map((function(t){return new window.google.maps.LatLng(t.lat,t.lng)})),map:null,radius:17});if(B(t),window.MarkerClusterer){var o=new window.MarkerClusterer(L,A,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"});Y(o)}}return function(){window.google.maps.event.clearListeners(k,"dragend"),window.google.maps.event.clearListeners(L,"drag"),window.google.maps.event.clearListeners(L,"dragend")}}}),[k,L,z]),Object(o.useEffect)((function(){e&&(f&&L&&q(L),h&&(null==r?void 0:r.length)>0||($.lat=null==z?void 0:z.lat,$.lng=null==z?void 0:z.lng,$.lat&&$.lng&&(k&&k.setPosition(new window.google.maps.LatLng(null==$?void 0:$.lat,null==$?void 0:$.lng)),L&&L.panTo(new window.google.maps.LatLng(null==$?void 0:$.lat,null==$?void 0:$.lng)))))}),[z]),Object(o.useEffect)((function(){if(!f){var t=setInterval((function(){if(e&&L){var t=r[0],n=new window.google.maps.LatLng(null==t?void 0:t.lat,null==t?void 0:t.lng);A[0]&&A[0].setPosition(n),A.forEach((function(t){return D.extend(t.position)})),L.fitBounds(D)}}),1e3);return function(){return clearInterval(t)}}}),[r]),Object(o.useEffect)((function(){if(L&&w){var t={placeId:w};new window.google.maps.places.PlacesService(L).getDetails(t,(function(t,e){e===window.google.maps.places.PlacesServiceStatus.OK&&O&&O(t)}))}}),[L,w]),e&&i.a.createElement("div",{id:"map",ref:j,style:{width:"70%",height:"50%",position:"absolute"}})};JS.propTypes={UIComponent:c.a.elementType,maxLimitLocation:c.a.number,handleChangeAddressMap:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},JS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var VS=AS(JS);function HS(t){return HS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HS(t)}function WS(){return WS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WS.apply(this,arguments)}function KS(){KS=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==HS(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ZS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function XS(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ZS(Object(r),!0).forEach((function(e){QS(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZS(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function QS(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tL(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function eL(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return rL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rL(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rL(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}VS.propTypes={apiKey:c.a.string.isRequired,onAddress:c.a.func,onError:c.a.func};var nL=function(t){var e,r,n=t.UIComponent,a=eL(er(),1)[0],c=eL(hr(),1)[0].token,u=eL(br(),2)[1].showToast,s=eL(Ir(),2)[1],l=eL(jn(),2),f=l[0],p=l[1].refreshConfigs,h=null==f||null===(e=f.configs)||void 0===e||null===(r=e.google_maps_api_key)||void 0===r?void 0:r.id,d=eL(Object(o.useState)({loading:!1,error:null}),2),y=d[0],v=d[1],m=function(){var t,e=(t=KS().mark((function t(e){var r,n,o;return KS().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(vr.Info,s("LOADING","Loading")),v(XS(XS({},y),{},{loading:!0})),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({key:"google_maps_api_key",value:e})},t.next=6,fetch("".concat(a.root,"/configs/").concat(h),r);case 6:return n=t.sent,t.next=9,n.json();case 9:if((o=t.sent).error){t.next=15;break}return t.next=13,p();case 13:v(XS(XS({},y),{},{loading:!1})),u(vr.Success,s("APIKEY_ADDED","API key added"));case 15:v({loading:!1,error:o.error?o.result:null}),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),v({loading:!1,error:[t.t0.message]});case 21:case"end":return t.stop()}}),t,null,[[0,18]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){tL(i,n,o,a,c,"next",t)}function c(t){tL(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,WS({},t,{actionState:y,handleSaveApiKey:m})))};function oL(){return oL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oL.apply(this,arguments)}function iL(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||aL(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aL(t,e){if(t){if("string"==typeof t)return cL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cL(t,e):void 0}}function cL(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}nL.propTypes={UIComponent:c.a.elementType},nL.defaultProps={};var uL=function(t){var e=t.UIComponent,r=t.googleReady,n=t.onData,a=t.onError,c=t.onAddress,u=iL(Ir(),2)[1],s=iL(Object(o.useState)(!1),2),l=s[0],f=s[1],p=void 0!==r;return navigator.geolocation&&i.a.createElement(e,oL({},t,{handleGPS:function(){p&&!r||l||(f(!0),navigator.geolocation.getCurrentPosition((function(t){var e={lat:t.coords.latitude,lng:t.coords.longitude};p&&c?(new window.google.maps.Geocoder).geocode({location:e},(function(t,r){f(!1);var n,o=null,i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=aL(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(t[0].address_components);try{for(i.s();!(n=i.n()).done;){var s=n.value;if("postal_code"===s.types[0]){o=s.short_name;break}}}catch(t){i.e(t)}finally{i.f()}"OK"===r?c({address:t[0].formatted_address,location:e,utc_offset:(new Date).getTimezoneOffset(),zipcode:o,map_data:{library:"google",place_id:t[0].place_id}}):a&&a(u("ERROR_GPS_BUTTON","Error to get result with gps button"))})):(f(!1),n&&n({location:e,utc_offset:(new Date).getTimezoneOffset()}))}),(function(t){f(!1),a&&a(u("ERROR_GPS_BUTTON",t.message))}),{timeout:5e3,enableHighAccuracy:!0}))},isGoogleButton:p,googleReady:r,isLoading:l}))};uL.propTypes={onData:c.a.func,onError:c.a.func};var sL=AS(uL);sL.propTypes={apiKey:c.a.string.isRequired,onAddress:c.a.func,onError:c.a.func};var lL=function(t){var e=t.children,r=t.tagId;return Object(o.useEffect)((function(){if(r){!function(t,e,r,n,o){t[n]=t[n]||[],t[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=e.getElementsByTagName(r)[0],a=e.createElement(r),c="dataLayer"!==n?"&l="+n:"";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+o+c,i.parentNode.insertBefore(a,i),window.document.head.appendChild(a)}(window,document,"script","dataLayer",r)}}),[r]),i.a.createElement(i.a.Fragment,null,e)};function fL(t){return fL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fL(t)}function pL(){return pL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pL.apply(this,arguments)}function hL(){hL=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==fL(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function dL(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=OL(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function yL(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function vL(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yL(i,n,o,a,c,"next",t)}function c(t){yL(i,n,o,a,c,"throw",t)}a(void 0)}))}}function mL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gL(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mL(Object(r),!0).forEach((function(e){bL(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mL(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bL(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wL(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||OL(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OL(t,e){if(t){if("string"==typeof t)return xL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xL(t,e):void 0}}function xL(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}lL.propTypes={tagId:c.a.string.isRequired},lL.defaultProps={tagId:"GTM-MHNGWVF"};var EL=function(t){var e=t.UIComponent,r=wL(hr(),1)[0],n=r.token,a=r.loading,c=wL(er(),1)[0],u=[{id:1,name:"Create a store",addText:!1,description:"Go inside your Stores and Click Add New Store, fill up all the fields required and also add your banner and logo, if you don’t have one right now, don’t worry, you can add those later.",completed:!1},{id:2,name:"Fill up your business information",addText:!1,description:"The business information will show on your front-end website, such as; business name, logo, banner, business email, slug = the word after your domain, orderinwebsite.co/store, and business description.",completed:!1},{id:3,name:"Add your first category",addText:!1,description:"After you’ve clicked on the Add New Store and Filled up your business information you’ll get a blank screen, click on the Add Category button and add the name of your category.",completed:!1},{id:4,name:"Add your first product",addText:!1,description:"Now, click in the category you’ve just added and create a product, the products cannot be created if you don’t have a category, add an image to that product, make it look good.",completed:!1},{id:5,name:"Create a business menu",addText:!1,description:"To create a menu click in the store, a sidebar setting bar will show, inside here you’ll find the tab Menu, click Add Menu now, add a name, the delivery types, schedule, and at the bottom you’ll find all the products you have available to put inside this menu.",completed:!1},{id:6,name:"Create a delivery zone",addText:!1,description:"Go back a little bit in your sidebar setting bar, click in Delivery Zones, name the delivery zones, put a minimum price of delivery, and the price is how much you are going to charge for delivery, click “+”, and add your delivery zone, by Polygon or Circle, create by clicking around the map your range of delivery.",completed:!1},{id:7,name:"Payment method",addText:!0,description:"Last but not least, add a Payment Method, you’ll have several payment gateways, the biggest ones, PayPal, Stripe, or any other payment you want. That’s it! Look for your store in your Front-end Website.",completed:!1}],s=wL(Object(o.useState)({loading:!1,orders:0,error:null}),2),l=s[0],f=s[1],p=wL(Object(o.useState)({loading:!1,sales:0,error:null}),2),h=p[0],d=p[1],y=wL(Object(o.useState)({loading:!1,sales:[],error:null}),2),v=y[0],m=y[1],g=wL(Object(o.useState)({loading:!1,data:[],error:null}),2),b=g[0],w=g[1],O=wL(Object(o.useState)({loading:!0,project:{},error:null}),2),x=O[0],E=O[1],j=function(){var t=vL(hL().mark((function t(){var e,r,o,i,u,s,p,h,d,y;return hL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,f(gL(gL({},l),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r="".concat(c.root,"/reports/orders?lapse=today"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:if(i=t.sent,u=i.error,s=i.result,u)f(gL(gL({},l),{},{loading:!0,error:s}));else{if(p=0,(null==s?void 0:s.length)>0){h=dL(s);try{for(h.s();!(d=h.n()).done;)y=d.value,p+=parseInt(y.orders)}catch(t){h.e(t)}finally{h.f()}}f(gL(gL({},l),{},{loading:!1,orders:p}))}t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),f(gL(gL({},l),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=vL(hL().mark((function t(){var e,r,o,i,u,s,l,f,p,y;return hL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,d(gL(gL({},h),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r="".concat(c.root,"/reports/sales?lapse=today"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:if(i=t.sent,u=i.error,s=i.result,u)d(gL(gL({},h),{},{loading:!0,error:s}));else{if(l=0,(null==s?void 0:s.length)>0){f=dL(s);try{for(f.s();!(p=f.n()).done;)y=p.value,l+=y.sales}catch(t){f.e(t)}finally{f.f()}}d(gL(gL({},h),{},{loading:!1,sales:l}))}t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),d(gL(gL({},h),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=vL(hL().mark((function t(){var e,r,o,i,u,s,l;return hL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,m(gL(gL({},v),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=P(),o="".concat(c.root,"/reports/sales?lapse=").concat(r),t.next=9,fetch(o,e);case 9:return i=t.sent,t.next=12,i.json();case 12:u=t.sent,s=u.error,l=u.result,m(gL(gL({},v),{},s?{loading:!0,error:l}:{loading:!1,sales:l})),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),m(gL(gL({},v),{},{loading:!1,error:t.t0}));case 21:case"end":return t.stop()}}),t,null,[[2,18]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var t=vL(hL().mark((function t(){var e,r,n,o,i,a;return hL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,E(gL(gL({},x),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json"}},r="".concat(c.root,"/current"),t.next=6,fetch(r,e);case 6:return n=t.sent,t.next=9,n.json();case 9:o=t.sent,i=o.error,a=o.result,E({loading:!1,project:i?{}:a,error:i?a:null}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),E(gL(gL({},x),{},{loading:!1,error:[t.t0.message]}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),P=function(){var t=new Date,e=t.getDate(),r=e<10?"0".concat(e):e,n=t.getMonth()+1,o=n<10?"0".concat(n):n,i=t.getFullYear();return"".concat(i,"-").concat(o,"-01,").concat(i,"-").concat(o,"-").concat(r)};return Object(o.useEffect)((function(){_(),j(),S(),L(),w(gL(gL({},b),{},{data:u}))}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,pL({},t,{projectStatus:x,ordersList:l,todaySalelsList:h,monthSalesList:v,taskList:b,getCurrentDateRange:P,handleUpdateTaskList:function(t){w(gL(gL({},b),{},{data:t}))}})))};function jL(){return jL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jL.apply(this,arguments)}function SL(){SL=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==PL(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function LL(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function _L(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){LL(i,n,o,a,c,"next",t)}function c(t){LL(i,n,o,a,c,"throw",t)}a(void 0)}))}}function PL(t){return PL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PL(t)}function kL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function TL(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kL(Object(r),!0).forEach((function(e){IL(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kL(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function IL(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AL(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return CL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CL(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CL(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}EL.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},EL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var NL=function(t){var e=t.UIComponent,r=t.handleSuccessAdd,n=t.handleSuccessUpdateImporter,a=t.selectedImporter,c=t.handleCustomEditImporter,u=t.handleCustomAddImporter,s=AL(er(),1)[0],l=AL(hr(),1)[0],f=AL(br(),2)[1].showToast,p=AL(Ir(),2)[1],h=AL(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),d=h[0],y=h[1],v=AL(Object(o.useState)({}),2),m=v[0],g=v[1],b=AL(Object(o.useState)({}),2),w=b[0],O=b[1],x=AL(Object(o.useState)({}),2),E=x[0],j=x[1],S=AL(Object(o.useState)(!1),2),L=S[0],_=S[1],P=AL(Object(o.useState)({}),2),k=P[0],T=P[1],I=["business_id","external_business_id","category_id","external_category_id","external_parent_category_id","product_id","rank","external_product_id","extra_id","external_extra_id","extra_option_id","external_extra_option_id","extra_option_suboption_id","external_extra_option_suboption_id"],A=function(){document.getElementById("importer-form")&&document.getElementById("importer-form").reset()},C=function(){document.getElementById("field-form")&&document.getElementById("field-form").reset()},N=function(){A(),C(),g({}),O({}),T({}),y(TL(TL({},d),{},{changes:{}}))},D=function(){var e=_L(SL().mark((function e(n){var o,i,a,c,h,v;return SL().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=3;break}return u(d.changes),e.abrupt("return");case 3:return f(vr.Info,p("LOADING","Loading")),o=TL({},n||d.changes),e.prev=5,y(TL(TL({},d),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)},body:JSON.stringify(o)},e.next=10,fetch("".concat(s.root,"/importers"),i);case 10:return a=e.sent,e.next=13,a.json();case 13:c=e.sent,h=c.error,v=c.result,h?y(TL(TL({},d),{},{loading:!1,result:{error:!0,result:v}})):(f(vr.Success,p("IMPORTER_SAVED","Importer saved")),N(),y({loading:!1,changes:{},result:{error:!1,result:v}}),r&&r(v),t.onClose&&t.onClose()),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),y(TL(TL({},d),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 22:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=_L(SL().mark((function e(r){var o,i,u,h,v,m;return SL().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=3;break}return c(d.changes),e.abrupt("return");case 3:return f(vr.Info,p("LOADING","Loading")),o=TL({},r||d.changes),e.prev=5,y(TL(TL({},d),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)},body:JSON.stringify(o)},e.next=10,fetch("".concat(s.root,"/importers/").concat(null==a?void 0:a.id),i);case 10:return u=e.sent,e.next=13,u.json();case 13:h=e.sent,v=h.error,m=h.result,v?y(TL(TL({},d),{},{loading:!1,result:{error:!0,result:m}})):(f(vr.Success,p("IMPORTER_SAVED","Importer saved")),N(),y({loading:!1,changes:{},result:{error:!1,result:m}}),n&&n(m),t.onClose&&t.onClose()),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),y(TL(TL({},d),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 22:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){0!==Object.keys(E).length&&g(TL(TL({},m),{},{metafields:E}))}),[E]),Object(o.useEffect)((function(){0!==Object.keys(w).length&&g(TL(TL({},m),{},{fields:w}))}),[w]),Object(o.useEffect)((function(){if(0!==Object.keys(m).length){var t=TL({},m);y(TL(TL({},d),{},{changes:TL(TL({},d.changes),{},{mapping:JSON.stringify(t)})}))}}),[m]);return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,jL({},t,{formState:d,mappingState:m,fieldList:w,metafieldList:E,editState:k,isEdit:L,handleChangeInput:function(t,e){var r={};e?Object.values(t).map((function(t){r=TL(TL({},r),{},IL({},t.name,t.value))})):r=IL({},t.target.name,t.target.value),y(TL(TL({},d),{},{changes:TL(TL({},d.changes),r)}))},handleChangeSelect:function(t,e){var r;r=IL({},t,e),y(TL(TL({},d),{},{changes:TL(TL({},d.changes),r)})),L||(g({}),A())},handleChangeMappingInput:function(t,e){var r={};if(e?Object.values(t).map((function(t){r=TL(TL({},r),{},IL({},t.name,t.value))})):r=IL({},t.target.name,t.target.value),I.includes(t.target.name)&&""===t.target.value){var n=t.target.name,o=m;return delete o[n],void g(TL({},o))}g(TL(TL({},m),r))},addNewField:function(t,e){var r=IL({},t,parseInt(e));O(TL(TL({},w),r)),C()},removeField:function(t){var e=TL({},w);delete e[t],O(e)},addNewMetaField:function(t,e){var r=IL({},t,parseInt(e));j(TL(TL({},E),r)),C()},removeMetaField:function(t){var e=TL({},E);delete e[t],j(e)},clearImorterForm:N,setIsEdit:_,handleCreateImporter:D,handleEditState:function(t){var e,r,n;"object"===PL(n=null==t||null===(e=t.mapping)||void 0===e?void 0:e.metafields)&&null!==n&&j(n);var o;"object"===PL(o=null==t||null===(r=t.mapping)||void 0===r?void 0:r.fields)&&null!==o&&O(o);var i;i=null==t?void 0:t.mapping,g(i),T(TL(TL({},k),{},{name:null==t?void 0:t.name,slug:null==t?void 0:t.slug,type:null==t?void 0:t.type,mapping:i,fields:o,metafields:n})),y(TL(TL({},d),{},{changes:TL(TL({},d.changes),{},{name:null==t?void 0:t.name,type:null==t?void 0:t.type})}))},editImporter:G,downloadCSV:function(){var t={business_id:10,external_business_id:120,name:"House mine",logo:'"https://res.cloudinary.com/ordering2/image/upload/f_auto,q_auto,h_100,c_limit/v1539095959/crya6ibldlsz4hjyo03e.jpg"',email:"test@ordering.co",slug:"test_slug",header:'"https://s3.amazonaws.com/ordering-images2/res/ordering/image/upload/bqvntsurh8opknu58z9f/1534196989.jpg"',about:"test about",address:'"5th Avenue, New York, NY, USA"',location:'"{""lat"":40.7552112,""lng"":-73.982322}"',timezone:"America/New_York",description:"test description",cellphone:"123123123123",phone:"123123",featured:1,enabled:1,front_layout:"food",seo_image:'"https://res.cloudinary.com/ordering2/image/upload/f_auto,q_auto,h_100,c_limit/v1539095959/crya6ibldlsz4hjyo03e.jpg"',seo_title:"seo title",seo_description:"seo description",category_id:10,external_category_id:120,external_parent_category_id:130,product_id:10,image:'"https://s3.amazonaws.com/ordering-images2/res/ordering/image/upload/wmpfkcedo4y2kwxcamve/1534167067.png"',rank:10,parent_category_id:20,external_product_id:100,price:10,images:'"https://s3.amazonaws.com/ordering-images2/res/ordering/image/upload/lx0zuprnuozhqmaa97jj/1534200630.jpg"',sku:"test_sku",inventoried:1,quantity:10,upselling:1,in_offer:1,offer_price:10,offer_rate:0,offer_rate_type:1,offer_include_options:1,tax_id:10,fee_id:10,estimated_person:'"test person"',barcode:'"0123456789"',barcode_alternative:'"0123"',seo_keywords:"test key",hide_special_instructions:1,maximum_per_order:2,minimum_per_order:1,extra_id:10,external_extra_id:100,extra_option_id:10,external_extra_option_id:100,extra_option_suboption_id:10,external_extra_option_suboption_id:100,min:1,max:1},e=["slug","name","sku","seo_keywords"],r={};if("sync_multiple"===(null==a?void 0:a.type))a.mapping.forEach((function(t){var e=TL({},t),n=TL({},e.fields),o=e.type.replace("sync_","").replaceAll("_"," "),i={};for(var a in n)i[o+" "+a]=n[a];delete e.fields,delete e.metafields,delete e.type;var c=TL(TL({},e),i);r=TL(TL({},r),c)}));else{var n=TL({},m),o=TL({},n.fields);delete n.fields,delete n.metafields,r=TL(TL({},n),o)}var i=Object.values(r),c=Math.max.apply(Math,i),u=Array(c+1).fill(""),s=Array(c+1).fill(""),l=Array(c+1).fill("");for(var f in r){var p=f.replaceAll("_"," ");u[r[f]]=p.charAt(0).toUpperCase()+p.slice(1),"sync_multiple"!==(null==a?void 0:a.type)&&(s[r[f]]=t[f]||" ",I.includes(f)?l[r[f]]=t[f]+1:e.includes(f)?l[r[f]]=t[f]+"_2":l[r[f]]=t[f]||" ")}"sync_multiple"===(null==a?void 0:a.type)&&a.mapping.forEach((function(r){var n=TL({},r),o=TL({},n.fields);for(var i in delete n.fields,delete n.type,n)s[n[i]]=t[i]||" ",I.includes(i)?l[n[i]]=t[i]+1:e.includes(i)?l[n[i]]=t[i]+"_2":l[n[i]]=t[i]||" ";for(var a in o)s[o[a]]=t[a]||" ",I.includes(a)?l[o[a]]=t[a]+1:e.includes(a)?l[o[a]]=t[a]+"_2":l[o[a]]=t[a]||" "}));var h=[u,s,l].map((function(t){return t.join(",")})).join("\n"),d=document.createElement("a");d.download=(null==k?void 0:k.type)+".csv";var y=new Blob(["\ufeff",h],{type:"text/csv"}),v=new FileReader;v.readAsDataURL(y),v.onload=function(){d.href=v.result,d.click()}},handleUpdateMultipleMapping:function(t){T(TL(TL({},k),{},{mapping:t})),y(TL(TL({},d),{},{changes:TL(TL({},d.changes),{},{mapping:JSON.stringify(t)})}))}})))};function DL(t){return DL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DL(t)}function GL(){return GL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GL.apply(this,arguments)}function FL(){FL=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==DL(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function UL(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function BL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function RL(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?BL(Object(r),!0).forEach((function(e){ML(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BL(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ML(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YL(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return zL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zL(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zL(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}NL.propTypes={handleSuccessUpdateImporter:c.a.func,UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},NL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $L=function(t){var e=t.UIComponent,r=YL(er(),1)[0],n=YL(hr(),1)[0],a=YL(Object(o.useState)({loading:!1,changes:{separator:",",enclosure:'"',escape:"/",start_line:2},result:{error:!1}}),2),c=a[0],u=a[1],s=YL(Object(o.useState)({fileName:null,fileType:null,csvFile:null,importOptions:{separator:",",enclosure:'"',escape:"/",start_line:2}}),2),l=s[0],f=s[1],p=YL(br(),2)[1].showToast,h=YL(Ir(),2)[1],d=function(){var t,e=(t=FL().mark((function t(e){var o,i,a,s,f,d,y;return FL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(vr.Info,h("LOADING","Loading")),(o=new FormData).append("file",null==l?void 0:l.csvFile),i=RL({},null==l?void 0:l.importOptions),Object.keys(i).forEach((function(t){i[t]||delete i[t]})),o.append("import_options",JSON.stringify(i)),t.prev=6,u(RL(RL({},c),{},{loading:!0})),a={method:"POST",headers:{Authorization:"Bearer ".concat(n.token)},body:o},t.next=11,fetch("".concat(r.root,"/importers/").concat(e,"/jobs"),a);case 11:return s=t.sent,t.next=14,s.json();case 14:f=t.sent,d=f.error,y=f.result,d?u(RL(RL({},c),{},{loading:!1,result:{error:!0,result:y}})):(p(vr.Success,h("IMPORTER_JOB_SAVED","Importer Job Created")),u({loading:!1,changes:{},result:{error:!1,result:y}})),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(6),u(RL(RL({},c),{},{result:{error:!0,result:[t.t0.message]},loading:!1}));case 23:case"end":return t.stop()}}),t,null,[[6,20]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){UL(i,n,o,a,c,"next",t)}function c(t){UL(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,GL({},t,{formState:c,fileState:l,setFileState:f,handleChangeInput:function(t,e){var r={};e?Object.values(t).map((function(t){r=RL(RL({},r),{},ML({},t.name,t.value))})):r=ML({},t.target.name,t.target.value),f(RL(RL({},l),{},{importOptions:RL(RL({},l.importOptions),r)}))},handleUploadCsv:function(t){t&&f(RL(RL({},l),{},{fileName:t.name,fileType:t.type,csvFile:t}))},handleCreateImporterJob:d})))};function qL(t){return qL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qL(t)}function JL(){return JL=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JL.apply(this,arguments)}function VL(t){return function(t){if(Array.isArray(t))return r_(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e_(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HL(){HL=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==qL(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function WL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function KL(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?WL(Object(r),!0).forEach((function(e){ZL(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WL(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ZL(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XL(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function QL(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){XL(i,n,o,a,c,"next",t)}function c(t){XL(i,n,o,a,c,"throw",t)}a(void 0)}))}}function t_(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||e_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e_(t,e){if(t){if("string"==typeof t)return r_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?r_(t,e):void 0}}function r_(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}$L.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$L.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var n_=function(t){var e,r=t.UIComponent,n=t.paginationSettings,a=t_(er(),1)[0],c=t_(hr(),1)[0].token,u=t_(Object(o.useState)({loading:!1,error:null,importers:[]}),2),s=u[0],l=u[1],f=t_(Object(o.useState)({currentPage:"pages"===n.controlType&&n.initialPage&&n.initialPage>=1?n.initialPage-1:0,pageSize:null!==(e=n.pageSize)&&void 0!==e?e:10,totalItems:null,totalPages:null}),2),p=f[0],h=f[1],d=t_(Object(o.useState)({}),2),y=d[0],v=d[1],m=t_(Object(o.useState)({loading:!1,error:null}),2),g=m[0],b=m[1],w=function(){var t=QL(HL().mark((function t(e,r){var n,o,i,u,f,d,y;return HL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,l(KL(KL({},s),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},!e){t.next=9;break}return t.next=6,fetch("".concat(a.root,"/importers?page=").concat(e||p.currentPage,"&page_size=").concat(r||p.pageSize),n);case 6:t.t0=t.sent,t.next=12;break;case 9:return t.next=11,fetch("".concat(a.root,"/importers"),n);case 11:t.t0=t.sent;case 12:return o=t.t0,t.next=15,o.json();case 15:i=t.sent,u=i.result,f=i.pagination,l(KL(KL({},s),{},{loading:!1,importers:u})),d=0,f.current_page!==f.total_pages&&(y=f.total-s.importers.length,d=y<f.page_size?y:f.page_size),h(KL(KL({},p),{},{currentPage:f.current_page,totalPages:f.total_pages,totalItems:f.total,from:f.from,to:f.to,nextPageItems:d})),v(KL({},f)),t.next=28;break;case 25:t.prev=25,t.t1=t.catch(0),"Cancel"!==t.t1.constructor.name&&l(KL(KL({},s),{},{loading:!1,error:[t.t1.message]}));case 28:case"end":return t.stop()}}),t,null,[[0,25]])})));return function(e,r){return t.apply(this,arguments)}}(),O=function(){var t=QL(HL().mark((function t(e){var r,n,o,i;return HL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,b(KL(KL({},g),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=5,fetch("".concat(a.root,"/importers/").concat(e),r);case 5:return n=t.sent,t.next=8,n.json();case 8:(o=t.sent).error||(i=s.importers.filter((function(t){return t.id!==e})),v(KL(KL({},y),{},{totalPages:(null==y?void 0:y.totalPages)-1,totalItems:(null==y?void 0:y.totalItems)-1})),l(KL(KL({},s),{},{importers:i}))),b(KL(KL({},g),{},{loading:!1,error:o.error?o.result:null})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(KL(KL({},g),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){w()}),[]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,JL({},t,{actionStatus:g,importerList:s,getImporters:w,paginationProps:p,paginationDetail:y,handleDeleteImporter:O,handleSuccessAddImporter:function(t){l(KL(KL({},s),{},{importers:[].concat(VL(s.importers),[t])})),v(KL(KL({},y),{},{total:null!=y&&y.total?(null==y?void 0:y.total)+1:1}))},handleSuccessUpdateImporter:function(t){var e=s.importers.map((function(e){return e.id===t.id?t:e}));l(KL(KL({},s),{},{importers:e}))}})))};function o_(t){return o_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o_(t)}function i_(){return i_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i_.apply(this,arguments)}function a_(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=d_(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function c_(){c_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==o_(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function u_(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function s_(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u_(i,n,o,a,c,"next",t)}function c(t){u_(i,n,o,a,c,"throw",t)}a(void 0)}))}}function l_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f_(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l_(Object(r),!0).forEach((function(e){p_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p_(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h_(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||d_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d_(t,e){if(t){if("string"==typeof t)return y_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y_(t,e):void 0}}function y_(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}n_.propTypes={UIComponent:c.a.elementType,slug:c.a.string,isInitialRender:c.a.bool},n_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var v_=function(t){var e,r=t.UIComponent,n=t.propsToFetch,a=h_(er(),1)[0],c=h_(hr(),1)[0],u=c.token,s=c.loading,l=h_(jn(),1)[0].configs,f=h_(Ir(),2)[1],p=h_(Object(o.useState)({loading:!1,businesses:[],error:null}),2),h=p[0],d=p[1],y=h_(Object(o.useState)({loading:!1,data:[],error:null}),2),v=y[0],m=y[1],g=(null==l||null===(e=l.order_types_allowed)||void 0===e?void 0:e.value.split("|").map((function(t){return Number(t)})))||[],b=[{value:1,name:f("DELIVERY","Delivery"),enabled:!0},{value:2,name:f("PICKUP","Pickup"),enabled:!0},{value:3,name:f("EAT_IN","Eat in"),enabled:!0},{value:4,name:f("CURBSIDE","Curbside"),enabled:!0},{value:5,name:f("DRIVE_THRU","Drive thru"),enabled:!0}],w=h_(Object(o.useState)(b.filter((function(t){return null==g?void 0:g.includes(t.value)}))),2),O=w[0],x=w[1],E=h_(Object(o.useState)({loading:!1,invoice:null,error:null}),2),j=E[0],S=E[1],L=h_(Object(o.useState)({type:"charge",from:"",to:"",business:"",cancelled:!1,discounts:!1,notes:"",percentage_fee:0,fixed_fee:0,tax:0,misc_amount:0,misc_description:""}),2),_=L[0],P=L[1],k=function(){var t=s_(c_().mark((function t(){var e,r,o,i,c;return c_().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(f_(f_({},h),{},{loading:!0})),t.next=4,a.businesses().asDashboard().select(n).get();case 4:e=t.sent,r=e.content,o=r.error,i=r.result,c=r.pagination,d(f_(f_({},h),{},o?{loading:!1,error:i}:{loading:!1,businesses:i,pagination:c})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),d(f_(f_({},h),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=s_(c_().mark((function t(){var e,r,n,o,i,c,l;return c_().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,m(f_(f_({},v),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},r="".concat(a.root,"/paymethods"),t.next=8,fetch(r,e);case 8:return n=t.sent,t.next=11,n.json();case 11:o=t.sent,i=o.error,c=o.result,i?m(f_(f_({},v),{},{loading:!1,error:c})):(l=c.filter((function(t){return t.enabled})),m(f_(f_({},v),{},{loading:!1,data:l}))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),m(f_(f_({},v),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=s_(c_().mark((function t(){var e,r,n,o,i,c,u;return c_().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,S(f_(f_({},j),{},{loading:!0})),e=[{attribute:"business_id",value:_.business}],_.from&&e.push({attribute:"delivery_datetime",value:{condition:">=",value:"".concat(_.from," 00:00:00")}}),_.to&&e.push({attribute:"delivery_datetime",value:{condition:"<=",value:"".concat(_.to," 23:59:59")}}),t.next=7,a.orders().asDashboard().where(e).get();case 7:r=t.sent,n=r.content,o=n.error,i=n.result,c=n.pagination,o?S(f_(f_({},j),{},{loading:!1,error:i})):(u=A(i),S(f_(f_({},j),{},{loading:!1,invoice:u,pagination:c}))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),S(f_(f_({},j),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),A=function(t){var e,r=[],n=a_(null==v?void 0:v.data);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.enabled&&r.push(o.id)}}catch(t){n.e(t)}finally{n.f()}var i=[];if(O){var a,c=a_(O);try{for(c.s();!(a=c.n()).done;){var u=a.value;u.enabled&&i.push(u.value)}}catch(t){c.e(t)}finally{c.f()}}var s=_.from.split("-");s=1===s.length?null:new Date(s[0],s[1]-1,s[2],0,0,0,0);var l=_.to.split("-");l=1===l.length?null:new Date(l[0],l[1]-1,l[2],0,0,0,0);var f=t.filter((function(t){var e=!0,n=t.delivery_datetime.split(" ");return n=new Date(n[0].split("-")[0],n[0].split("-")[1]-1,n[0].split("-")[2],0,0,0,0),(-1===r.indexOf(t.paymethod_id)||-1===i.indexOf(t.delivery_type)||-1===[0,1,7,8,9,11,15].indexOf(t.status)&&!_.cancelled)&&(e=!1),(s&&s>n||l&&l<n)&&(e=!1),e})),p={from:_.from,to:_.to,type:_.type,orders:f,percentage_fee:_.percentage_fee,fixed_fee:_.fixed_fee,tax:_.tax,misc_amount:("payout"!==_.type?1:-1)*_.misc_amount,misc_description:_.misc_description,inlcude_discounts:_.discounts,tax_products:"payout"!==_.type?0:null==f?void 0:f.reduce((function(t,e){return 1===e.tax_type?t:t+G(e)}),0),discounts:_.discounts?null==f?void 0:f.reduce((function(t,e){return t-F(e)}),0):0,orders_subtotal:null==f?void 0:f.reduce((function(t,e){return t+D(e)}),0),orders_total:null==f?void 0:f.reduce((function(t,e){return t+B(e)}),0),notes:_.notes.replace(/\n/g,"<br>")};p.percentage_fee_total=("payout"!==_.type?1:-1)*(p.orders_subtotal+p.discounts)*_.percentage_fee/100,p.fixed_fee_total=("payout"!==_.type?1:-1)*f.length*_.fixed_fee;var d=parseFloat(p.percentage_fee_total)+parseFloat(p.fixed_fee_total)+parseFloat(p.misc_amount)+parseFloat(p.discounts)+parseFloat(p.tax_products)+("payout"!==_.type?0:parseFloat(p.orders_subtotal));return p.subtotal=d,p.tax_total=("payout"!==_.type?1:-1)*d*parseFloat(_.tax)/100,p.total=d+p.tax_total,h.businesses.forEach((function(t){t.id===_.business&&(p.business=t)})),p},C=function(t,e){var r=1,n=e.price;return t.allow_suboptionQuantity&&e.quantity&&(r=e.quantity),t.with_half_option&&e.position&&"whole"!==e.position&&(n=e.half_price),n*r},N=function(t){var e=0;if(t.options)for(var r=0;r<t.options.length;r++){var n=t.options[r];if(n.suboptions)for(var o=0;o<n.suboptions.length;o++){var i=n.suboptions[o];e+=C(n,i)}}return(e+t.price)*t.quantity},D=function(t){if(t.summary){var e,r=!0;if(null!=l&&l.project_fix_order_summary)r="1"===(null==l||null===(e=l.project_fix_order_summary)||void 0===e?void 0:e.value);return 1!==t.tax_type||r?t.summary.subtotal:t.summary.subtotal+t.summary.tax}for(var n=0,o=0;o<t.products.length;o++)n+=N(t.products[o]);return U(n)},G=function(t){if(t.summary)return t.summary.tax;var e=2===t.tax_type?t.tax*(D(t)-t.discount)/100:0;return U(e)},F=function(t){return t.summary?t.summary.discount:U(t.discount)},U=function(t){var e,r=Math.pow(10,null==l||null===(e=l.format_number_decimal_length)||void 0===e?void 0:e.value);return Math.round(t*r)/r},B=function(t){if(t.summary)return t.summary.total;var e=D(t),r=G(t),n=R(t),o="2"===t.delivery_type?e+r+n-t.discount:e+r+t.delivery_zone_price+M(t)+n-t.discount;return U(o)},R=function(t){if(t.summary)return t.summary.service_fee;var e=(D(t)-t.discount)*t.service_fee/100;return U(e)},M=function(t){if(t.summary)return t.summary.driver_tip;var e=(D(t)-t.discount)*t.driver_tip/100;return U(e)};return Object(o.useEffect)((function(){k(),T()}),[]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,i_({},t,{businessList:h,invocing:_,payMethodsList:v,orderTypes:O,exportInvoiceList:j,handleChangeOrderTypes:x,handleChangeInvocing:P,handleChangePayMethods:function(t){m(f_(f_({},v),{},{data:t}))},getOrders:I,getSubtotal:D,getTotal:B})))};function m_(t){return m_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m_(t)}function g_(){return g_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},g_.apply(this,arguments)}function b_(){b_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==m_(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function w_(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function O_(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){w_(i,n,o,a,c,"next",t)}function c(t){w_(i,n,o,a,c,"throw",t)}a(void 0)}))}}function x_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E_(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x_(Object(r),!0).forEach((function(e){j_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function j_(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function S_(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||L_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L_(t,e){if(t){if("string"==typeof t)return __(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?__(t,e):void 0}}function __(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}v_.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},v_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var P_=function(t){var e=t.UIComponent,r=t.propsToFetch,n=S_(er(),1)[0],a=S_(hr(),1)[0],c=a.token,u=a.loading,s=S_(jn(),1)[0].configs,l=S_(Object(o.useState)({loading:!1,drivers:[],error:null}),2),f=l[0],p=l[1],h=S_(Object(o.useState)({loading:!1,data:[],error:null}),2),d=h[0],y=h[1],v=S_(Object(o.useState)({loading:!1,invoice:null,error:null}),2),m=v[0],g=v[1],b=S_(Object(o.useState)({from:"",to:"",driver:"",cancelled:!1,notes:"",percentage_fee:0,fixed_fee:0,percentage_delivery_price:0,percentage_driver_tip:0,tax:0,misc_amount:0,misc_description:""}),2),w=b[0],O=b[1],x=function(){var t=O_(b_().mark((function t(){var e,o,i,a,c,u;return b_().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(E_(E_({},f),{},{loading:!0})),e=[{attribute:"level",value:"4"}],t.next=5,n.users().asDashboard().select(r).where(e).get();case 5:o=t.sent,i=o.content,a=i.error,c=i.result,u=i.pagination,p(E_(E_({},f),{},a?{loading:!1,error:c}:{loading:!1,drivers:c,pagination:u})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),p(E_(E_({},f),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=O_(b_().mark((function t(){var e,r,o,i,a,s,l;return b_().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,y(E_(E_({},d),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},r="".concat(n.root,"/paymethods"),t.next=8,fetch(r,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,a=i.error,s=i.result,a?y(E_(E_({},d),{},{loading:!1,error:s})):(l=s.filter((function(t){return t.enabled})),y(E_(E_({},d),{},{loading:!1,data:l}))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),y(E_(E_({},d),{},{loading:!1,error:t.t0}));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=O_(b_().mark((function t(){var e,r,o,i,a,c,u;return b_().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g(E_(E_({},m),{},{loading:!0})),e=[{attribute:"driver_id",value:w.driver}],w.from&&e.push({attribute:"delivery_datetime",value:{condition:">=",value:"".concat(w.from," 00:00:00")}}),w.to&&e.push({attribute:"delivery_datetime",value:{condition:"<=",value:"".concat(w.to," 23:59:59")}}),t.next=7,n.orders().asDashboard().where(e).get();case 7:r=t.sent,o=r.content,i=o.error,a=o.result,c=o.pagination,i?g(E_(E_({},m),{},{loading:!1,error:a})):(u=S(a),g(E_(E_({},m),{},{loading:!1,invoice:u,pagination:c}))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),g(E_(E_({},m),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),S=function(t){var e,r=[],n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=L_(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(null==d?void 0:d.data);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.enabled&&r.push(o.id)}}catch(t){n.e(t)}finally{n.f()}var i=w.from.split("-");i=1===i.length?null:new Date(i[0],i[1]-1,i[2],0,0,0,0);var a=w.to.split("-");a=1===a.length?null:new Date(a[0],a[1]-1,a[2],0,0,0,0);var c=t.filter((function(t){var e=!0,n=t.delivery_datetime.split(" ");return n=new Date(n[0].split("-")[0],n[0].split("-")[1]-1,n[0].split("-")[2],0,0,0,0),(-1===r.indexOf(t.paymethod_id)||-1===[1,2,5,6,10,11,12].indexOf(t.status)||[2,5,6,10,12].indexOf(t.status)>-1&&!w.cancelled)&&(e=!1),(i&&i>n||a&&a<n)&&(e=!1),e})),u={from:w.from,to:w.to,orders:c,percentage_fee:w.percentage_fee,fixed_fee:w.fixed_fee,tax:w.tax,misc_amount:w.misc_amount,misc_description:w.misc_description,orders_subtotal:null==c?void 0:c.reduce((function(t,e){return t+P(e)}),0),orders_total:null==c?void 0:c.reduce((function(t,e){return t+I(e)}),0),discounts:null==c?void 0:c.reduce((function(t,e){return t-k(e)}),0),percentage_delivery_price:w.percentage_delivery_price,percentage_delivery_price_total:(null==c?void 0:c.reduce((function(t,e){return t+e.delivery_zone_price}),0))*w.percentage_delivery_price/100,percentage_driver_tip:w.percentage_driver_tip,percentage_driver_tip_total:(null==c?void 0:c.reduce((function(t,e){return t+C(e)}),0))*w.percentage_driver_tip/100,notes:w.notes.replace(/\n/g,"<br>")};u.percentage_fee_total=(u.orders_subtotal+u.discounts)*w.percentage_fee/100,u.fixed_fee_total=c.length*w.fixed_fee;var s=parseFloat(u.percentage_fee_total)+parseFloat(u.fixed_fee_total)+parseFloat(u.misc_amount)+parseFloat(u.percentage_delivery_price_total)+parseFloat(u.percentage_driver_tip_total);return u.subtotal=s,u.tax_total=s*parseFloat(w.tax)/100,u.total=s+u.tax_total,f.drivers.forEach((function(t){t.id===w.driver&&(u.driver=t)})),u},L=function(t,e){var r=1,n=e.price;return t.allow_suboptionQuantity&&e.quantity&&(r=e.quantity),t.with_half_option&&e.position&&"whole"!==e.position&&(n=e.half_price),n*r},_=function(t){var e=0;if(t.options)for(var r=0;r<t.options.length;r++){var n=t.options[r];if(n.suboptions)for(var o=0;o<n.suboptions.length;o++){var i=n.suboptions[o];e+=L(n,i)}}return(e+t.price)*t.quantity},P=function(t){if(t.summary){var e,r=!0;if(null!=s&&s.project_fix_order_summary)r="1"===(null==s||null===(e=s.project_fix_order_summary)||void 0===e?void 0:e.value);return 1!==t.tax_type||r?t.summary.subtotal:t.summary.subtotal+t.summary.tax}for(var n=0,o=0;o<t.products.length;o++)n+=_(t.products[o]);return T(n)},k=function(t){return t.summary?t.summary.discount:T(t.discount)},T=function(t){var e,r=Math.pow(10,null==s||null===(e=s.format_number_decimal_length)||void 0===e?void 0:e.value);return Math.round(t*r)/r},I=function(t){if(t.summary)return t.summary.total;var e=P(t),r=function(t){if(t.summary)return t.summary.tax;var e=2===t.tax_type?t.tax*(P(t)-t.discount)/100:0;return T(e)}(t),n=A(t),o="2"===t.delivery_type?e+r+n-t.discount:e+r+t.delivery_zone_price+C(t)+n-t.discount;return T(o)},A=function(t){if(t.summary)return t.summary.service_fee;var e=(P(t)-t.discount)*t.service_fee/100;return T(e)},C=function(t){if(t.summary)return t.summary.driver_tip;var e=(P(t)-t.discount)*t.driver_tip/100;return T(e)};return Object(o.useEffect)((function(){x(),E()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,g_({},t,{driverList:f,invocing:w,payMethodsList:d,exportInvoiceList:m,handleChangeInvocing:O,handleChangePayMethods:function(t){y(E_(E_({},d),{},{data:t}))},getOrders:j,getSubtotal:P,getTotal:I})))};function k_(t){return k_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k_(t)}function T_(){return T_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},T_.apply(this,arguments)}function I_(){I_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==k_(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function A_(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function C_(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){A_(i,n,o,a,c,"next",t)}function c(t){A_(i,n,o,a,c,"throw",t)}a(void 0)}))}}function N_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D_(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N_(Object(r),!0).forEach((function(e){G_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function G_(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F_(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return U_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U_(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U_(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}P_.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},P_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var B_=function(t){var e=t.UIComponent,r=F_(er(),1)[0],n=F_(Ir(),2)[1],a=F_(hr(),1)[0].loading,c=F_(br(),2)[1].showToast,u=F_(Object(o.useState)({loading:!1,translations:[],result:{error:null}}),2),s=u[0],l=u[1],f=F_(Object(o.useState)(null),2),p=f[0],h=f[1],d=F_(Object(o.useState)({loading:!1,changes:{},result:{error:null}}),2),y=d[0],v=d[1],m=function(t){l(D_(D_({},s),{},{translations:t}))},g=function(){var t=C_(I_().mark((function t(){var e,o,i,a,u,s,l,f;return I_().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(D_(D_({},y),{},{loading:!0})),c(vr.Info,n("LOADING","Loading")),a={key:null==y||null===(e=y.changes)||void 0===e?void 0:e.key,text:null==y||null===(o=y.changes)||void 0===o?void 0:o.text},t.next=6,r.translations(null==y||null===(i=y.changes)||void 0===i?void 0:i.id).save(a);case 6:u=t.sent,s=u.content,l=s.error,f=s.result,l?v(D_(D_({},y),{},{loading:!1,error:f})):(v(D_(D_({},y),{},{loading:!1,changes:{}})),c(vr.Success,n("WEB_APP_LANG_SAVED","Language change saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v(D_(D_({},y),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=C_(I_().mark((function t(){var e,n,o,i;return I_().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,l(D_(D_({},s),{},{loading:!0})),t.next=6,r.translations().get();case 6:e=t.sent,n=e.content,o=n.error,i=n.result,l(D_(D_({},s),{},o?{loading:!1,error:i}:{loading:!1,translations:i})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),l(D_(D_({},s),{},{loading:!1,error:t.t0}));case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){b()}),[]),Object(o.useEffect)((function(){Object.keys(null==y?void 0:y.changes).length>0&&g()}),[null==y?void 0:y.changes]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,T_({},t,{translationList:s,handleUpdateTranslationList:m,textEditState:y.changes,searchValue:p,onSearch:h,handleChangeText:function(t,e,r){var n=null==s?void 0:s.translations.map((function(t){return t.key===e?D_(D_({},t),{},{text:r}):t}));p&&h(e),m&&m(n),v(D_(D_({},y),{},{changes:{id:t,key:e,text:r}}))},getTranslations:b})))};function R_(){return R_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},R_.apply(this,arguments)}function M_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Y_(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M_(Object(r),!0).forEach((function(e){z_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function z_(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $_(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return q_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q_(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q_(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}B_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},B_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var J_=function(t){var e,r=t.currentLanguage,n=t.languages,a=t.UIComponent,c=$_(Object(o.useState)({loading:!n,languages:n,error:null}),2),u=c[0],s=c[1],l=$_(Ir(),3),f=l[0],p=l[2].setLanguage,h=$_(Object(o.useState)(null),2),d=h[0],y=h[1],v={};return Object(o.useEffect)((function(){if(!f.loading){if((null==n?void 0:n.length)>0)s(Y_(Y_({},u),{},{loading:!1,languages:n}));else{var t=f.languageList.filter((function(t){return t.enabled}));s(Y_(Y_({},u),{},{loading:!1,languages:t}))}return function(){v.languages&&v.languages.cancel()}}}),[f]),Object(o.useEffect)((function(){var t;if(r){var e=n.find((function(t){return t.code===r}));p(e),y(e)}else if(null==f||null===(t=f.language)||void 0===t||!t.code||null==d||!d.code){var o,i,a=null!=f&&null!==(o=f.language)&&void 0!==o&&o.code?null==f?void 0:f.language:null==u||null===(i=u.languages)||void 0===i?void 0:i.find((function(t){return t.default}));a&&(p(a),y(a))}}),[n,u]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,R_({},t,{currentLanguage:t.handlerCustomChangeLanguage?null==d?void 0:d.code:null==f||null===(e=f.language)||void 0===e?void 0:e.code,languagesState:u,handleChangeLanguage:function(e,r){var n=u.languages.find((function(t){return t.code===e}));if(t.handlerCustomChangeLanguage)return t.handlerCustomChangeLanguage(n),void y(n);t.onChangeLanguage&&t.onChangeLanguage(n),p(n,r)}})))};function V_(t){return V_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V_(t)}function H_(){return H_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},H_.apply(this,arguments)}function W_(){W_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==V_(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function K_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Z_(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?K_(Object(r),!0).forEach((function(e){X_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function X_(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q_(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function tP(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return eP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eP(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eP(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}J_.propTypes={UIComponent:c.a.elementType,currentLanguage:c.a.string,languages:c.a.arrayOf(c.a.object),onChangeLanguage:c.a.func,handlerCustomChangeLanguage:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},J_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rP=function(t){var e=t.UIComponent,r=tP(er(),1)[0],n=tP(br(),2)[1].showToast,a=tP(Ir(),3),c=a[0],u=a[1],s=a[2].updateLanguageListState,l=tP(Object(o.useState)({fields:[],loading:!1,error:null}),2),f=l[0],p=l[1],h=tP(Object(o.useState)({loading:!1,error:null}),2),d=h[0],y=h[1],v=function(){var t,e=(t=W_().mark((function t(e,o){var i,a,c,l,h;return W_().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(vr.Info,u("LOADING","Loading")),y(Z_(Z_({},d),{},{loading:!0})),t.next=5,r.languages(e).save(o);case 5:i=t.sent,a=i.content,c=a.error,l=a.result,c?y({loading:!1,error:l}):(y({loading:!1,error:null}),n(vr.Success,u("WEB_APP_LANG_SAVED","Language change saved")),h=f.fields.filter((function(t){return t.id===e&&Object.assign(t,l),!0})),p(Z_(Z_({},f),{},{fields:h})),s(l)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),y({loading:!1,error:[t.t0.message]});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Q_(i,n,o,a,c,"next",t)}function c(t){Q_(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){c.loading||p(Z_(Z_({},f),{},{loading:!1,fields:c.languageList}))}),[c.languageList]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,H_({},t,{languageFiledsState:f,handleChangeFieldSetting:v})))};function nP(t){return nP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nP(t)}function oP(){return oP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oP.apply(this,arguments)}function iP(){iP=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==nP(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function aP(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=pP(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function cP(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function uP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function sP(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?uP(Object(r),!0).forEach((function(e){lP(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function lP(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fP(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||pP(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pP(t,e){if(t){if("string"==typeof t)return hP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hP(t,e):void 0}}function hP(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}rP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dP=function(t){var e=t.UIComponent,r=t.translationList,n=t.handleUpdateTranslationList,a=t.getTranslations,c=fP(er(),1)[0],u=fP(hr(),1)[0],s=u.token,l=u.loading,f=fP(Ir(),2)[1],p=fP(br(),2)[1].showToast,h=fP(Object(o.useState)({loading:!1,changes:{},result:{error:null}}),2),d=h[0],y=h[1],v=fP(Object(o.useState)({row:-1,col:-1}),2),m=v[0],g=v[1],b=fP(Object(o.useState)(!1),2),w=b[0],O=b[1],x=function(){var t,e=(t=iP().mark((function t(e,o,i){var u,h,v,m,g,b,w,O;return iP().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,y(sP(sP({},d),{},{loading:!0})),p(vr.Info,f("LOADING","Loading")),u={method:o?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({translations:JSON.stringify(e)})},h="".concat(c.root,"/bulks/translations"),t.next=9,fetch(h,u);case 9:return v=t.sent,t.next=12,v.json();case 12:m=t.sent,g=m.error,b=m.result,g?y(sP(sP({},d),{},{loading:!1,result:{error:!0,result:b}})):(y(sP(sP({},d),{},{loading:!1,result:{error:!1,result:b}})),o?a():(w=null==r?void 0:r.translations.map((function(t){var r,n=aP(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.id===t.id)return sP(sP({},t),{},{key:o.key,text:o.text})}}catch(t){n.e(t)}finally{n.f()}return t})),n(w)),p(vr.Success,o?f("WEB_APP_LANG_ADDED","Language item added"):f("WEB_APP_LANG_SAVED","Language change saved"))),t.next=22;break;case 18:if(t.prev=18,t.t0=t.catch(2),y(sP(sP({},d),{},{result:{error:!0,result:t.t0.message},loading:!1})),o)for(O=e.length-1;O>=0;O--)i.alter("remove_row",e[O].row);case 22:case"end":return t.stop()}}),t,null,[[2,18]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){cP(i,n,o,a,c,"next",t)}function c(t){cP(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,oP({},t,{creationFormState:d,handleItemChange:function(t,e,r){if(w)O(!1);else{t=t||[];for(var n=[],o=[],i=[],a=[],c=0;c<t.length;c++){var u={key:!1,text:!1};if(t[c][2]!==t[c][3]){for(var s=!0,l=0;l<n.length;l++)if(n[l]===t[c][0]){s=!1;break}if(s){n.push(t[c][0]);var p=r.getSourceDataAtRow(t[c][0]);if(r.validateRows(n,(function(t){})),p.key||(u.key=!0,-1===a.indexOf(f("KEY_REQUIRED"))&&a.push(f("KEY_REQUIRED"))),p.text||(u.text=!0,-1===a.indexOf(f("TEXT_REQUIRED"))&&a.push(f("TEXT_REQUIRED"))),p.id){if(u.text||u.text)continue;i.push(p)}else{if(u.key||u.text)continue;p.row=t[c][0],o.push(p)}}}}a.length>0&&y(sP(sP({},d),{},{result:{error:!0,result:a}})),i.length>0&&x(i,!1,r),o.length>0&&x(o,!0,r)}},handleAfterSectionEnd:function(t,e,r,n,o){m.row===t&&m.col===e||t!==r||e!==n||(g({row:t,col:e}),o.deselectCell(),o.selectCell(t,e))},handleoutsideClickDeselects:function(){return g({row:-1,col:-1}),!1}})))};function yP(t){return yP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yP(t)}function vP(){return vP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vP.apply(this,arguments)}function mP(){mP=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==yP(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function gP(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function bP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wP(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bP(Object(r),!0).forEach((function(e){OP(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bP(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function OP(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xP(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return EP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EP(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EP(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}dP.propTypes={UIComponent:c.a.elementType,translationList:c.a.object,handleUpdateTranslationList:c.a.func,getTranslations:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},dP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jP=function(t){var e=t.UIComponent,r=t.getTranslations,n=xP(er(),1)[0],a=xP(br(),2)[1].showToast,c=xP(Ir(),2)[1],u=xP(Object(o.useState)({loading:!1,changes:{},result:{error:null}}),2),s=u[0],l=u[1],f=function(){var t,e=(t=mP().mark((function t(){var e,o,i,u;return mP().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(wP(wP({},s),{},{loading:!0})),a(vr.Info,c("LOADING","Loading")),t.next=5,n.translations().save(null==s?void 0:s.changes);case 5:e=t.sent,o=e.content,i=o.error,u=o.result,i?l(wP(wP({},s),{},{loading:!1,result:{error:!0,result:u}})):(l(wP(wP({},s),{},{loading:!1,changes:{},result:{error:!1,result:u}})),r&&r(),a(vr.Success,c("WEB_APP_LANG_ADDED","Language item added"))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),l(wP(wP({},s),{},{loading:!1,result:{error:!0,result:t.t0}}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){gP(i,n,o,a,c,"next",t)}function c(t){gP(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,vP({},t,{creationFormState:s,handleChangeInput:function(t,e){l(wP(wP({},s),{},{changes:wP(wP({},null==s?void 0:s.changes),{},OP({},t,e.target.value))}))},handleUpdateClick:function(){f()}})))};function SP(t){return SP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SP(t)}function LP(){return LP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LP.apply(this,arguments)}function _P(){_P=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==SP(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function PP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function kP(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?PP(Object(r),!0).forEach((function(e){TP(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PP(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function TP(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IP(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function AP(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){IP(i,n,o,a,c,"next",t)}function c(t){IP(i,n,o,a,c,"throw",t)}a(void 0)}))}}function CP(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return NP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NP(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NP(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}jP.propTypes={UIComponent:c.a.elementType,getTranslations:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var DP=function(t){var e,r,n=t.UIComponent,a=t.handleButtonLoginClick,c=t.handleSuccessLogin,u=t.useDefualtSessionManager,s=t.urlToRedirect,l=t.allowedLevels,f=t.billingUrl,p=CP(er(),1)[0],h=t.defaultLoginTab,d=CP(Object(o.useState)({loading:!1,result:{error:!1}}),2),y=d[0],v=d[1],m=CP(Object(o.useState)({email:"",cellphone:"",password:""}),2),g=m[0],b=m[1],w=CP(Object(o.useState)({loading:!1,result:{error:!1}}),2),O=w[0],x=w[1],E=CP(Object(o.useState)({loading:!1,result:{error:!1}}),2),j=E[0],S=E[1],L=CP(un(),1)[0],_=CP(Ir(),2)[1],P=CP(jn(),1)[0].configs,k=CP(Object(o.useState)({code:"",version:""}),2),T=k[0],I=k[1],A=CP(Object(o.useState)(!1),2),C=A[0],N=A[1],D="1"===(null==P||null===(e=P.opt_email_enabled)||void 0===e?void 0:e.value),G=!D||"1"===(null==P||null===(r=P.email_password_login_enabled)||void 0===r?void 0:r.value),F=D;h=G?"email":"otp";var U=CP(Object(o.useState)(h),2),B=U[0],R=U[1],M=CP(Object(o.useState)("email"),2),Y=M[0],z=M[1],$=CP(Object(o.useState)(""),2),q=$[0],J=$[1],V=CP(hr(),2)[1],H=V.login,W=V.logout,K=function(){var t=AP(_P().mark((function t(e){var r,n,o,i,a,h,d,m,b,w,O,x,E,j;return _P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"otp"===B?(TP(n={},Y,e&&e[Y]||g[Y]),TP(n,"one_time_password",e&&(null==e?void 0:e.code)||q),r=n):(TP(o={},B,e&&e[B]||g[B]),TP(o,"password",e&&(null==e?void 0:e.password)||g.password),r=o),!C){t.next=10;break}if(""!==(null==T?void 0:T.code)){t.next=8;break}return v({result:{error:!0,result:_("RECAPTCHA_VALIDATION_IS_REQUIRED","The captcha validation is required")},loading:!1}),t.abrupt("return");case 8:r.verification_code=null==T?void 0:T.code,r.recaptcha_type=null==T?void 0:T.version;case 10:return v(kP(kP({},y),{},{loading:!0})),t.next=13,p.users().auth(r);case 13:if(i=t.sent,a=i.content,h=a.error,d=a.result,(m=a.action)&&"billing_autologin"===(null==m?void 0:m.type)&&window.open("".concat(f,"?token=").concat(null==m||null===(b=m.data)||void 0===b?void 0:b.access_token,"&projectId=").concat(null==m||null===(w=m.data)||void 0===w?void 0:w.project_id,"&userId=").concat(null==m||null===(O=m.data)||void 0===O?void 0:O.user_id),"_blank").focus(),C&&window.grecaptcha&&("v2"===r.recaptcha_type&&window.grecaptcha.reset(),I({code:"",version:""})),h){t.next=42;break}if(!u){t.next=39;break}if(!(l&&(null==l?void 0:l.length)>0)){t.next=38;break}if(x=d.level,E=d.session.access_token,l.includes(x)){t.next=38;break}return t.prev=25,t.next=28,p.setAccessToken(E).users().logout();case 28:j=t.sent,j.content.error||W(),v({result:{error:!0,result:["YOU_DO_NOT_HAVE_PERMISSION"]},loading:!1}),t.next=37;break;case 34:t.prev=34,t.t0=t.catch(25),v({result:{error:!0,result:t.t0.message},loading:!1});case 37:return t.abrupt("return");case 38:H({user:d,token:d.session.access_token,project:null==p?void 0:p.project});case 39:L.emit("userLogin",d),c&&c(d),s&&(window.location.href="".concat(window.location.origin).concat(s));case 42:v({result:{error:h,result:d},loading:!1}),t.next=48;break;case 45:t.prev=45,t.t1=t.catch(0),v({result:{error:!0,result:t.t1.message},loading:!1});case 48:case"end":return t.stop()}}),t,null,[[0,45],[25,34]])})));return function(e){return t.apply(this,arguments)}}(),Z=function(){var t=AP(_P().mark((function t(e){var r,n;return _P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,x(kP(kP({},O),{},{loading:!0})),t.next=4,fetch("".concat(p.root,"/auth/sms/twilio/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cellphone:e.cellphone,country_phone_code:"+".concat(e.country_phone_code)})});case 4:return r=t.sent,t.next=7,r.json();case 7:n=t.sent,x(kP(kP({},O),{},{loading:!1,result:n})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),x(kP(kP({},O),{},{loading:!1,result:{error:t.t0.message}}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),X=function(){var t=AP(_P().mark((function t(e){var r,n,o,i,a;return _P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,S(kP(kP({},j),{},{loading:!0})),t.next=4,fetch("".concat(p.root,"/auth/sms/twilio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:return n=t.sent,t.next=7,n.json();case 7:null!=(o=t.sent)&&o.error||null==o||null===(r=o.result)||void 0===r||!r.id||(H({user:null==o?void 0:o.result,token:null==o||null===(i=o.result)||void 0===i||null===(a=i.session)||void 0===a?void 0:a.access_token,project:null==p?void 0:p.project}),c&&c(null==o?void 0:o.result)),S(kP(kP({},j),{},{loading:!1,result:o})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),S(kP(kP({},j),{},{loading:!1,result:{error:t.t0.message}}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),Q=function(){var t=AP(_P().mark((function t(e){var r,n,o,i,a,c,u;return _P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={type:4,channel:"email"===Y?1:2,size:6},n=(null==e?void 0:e.email)||(null==g?void 0:g.email),o=(null==e?void 0:e.cellphone)||(null==g?void 0:g.cellphone),i=(null==e?void 0:e.countryPhoneCode)||(null==e?void 0:e.country_phone_code)||g.country_phone_code,t.prev=4,"cellphone"===Y?(r.country_phone_code=i,r.cellphone=o,b({cellphone:o,country_phone_code:i})):(r.email=n,b({email:n})),t.next=8,fetch("".concat(p.root,"/codes/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 8:return a=t.sent,t.next=11,a.json();case 11:if(c=t.sent,u=c.result,c.error){t.next=17;break}return S(kP(kP({},j),{},{result:{result:u,error:null}})),t.abrupt("return");case 17:S(kP(kP({},j),{},{result:{error:u}})),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(4),S(kP(kP({},j),{},{result:{error:t.t0.message}}));case 23:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t;N((null==p?void 0:p.project)&&P&&Object.keys(P).length>0&&"1"===(null==P||null===(t=P.security_recaptcha_auth)||void 0===t?void 0:t.value))}),[P,null==p?void 0:p.project]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,LP({},t,{formState:y,loginTab:B,credentials:g,verifyPhoneState:O,checkPhoneCodeState:j,setCheckPhoneCodeState:function(t){S(t||{loading:!1,result:{error:!1}})},handleChangeInput:function(t){b(kP(kP({},g),{},TP({},t.target.name,t.target.value)))},handleButtonLoginClick:a||K,handleChangeTab:function(t){R(t)},handleSendVerifyCode:Z,handleCheckPhoneCode:X,isReCaptchaEnable:C,handleReCaptcha:I,useLoginOtp:F,setOtpType:z,otpType:Y,setOtpState:J,otpState:q,useLoginByEmail:G,useLoginOtpEmail:D,generateOtpCode:Q})))};function GP(t){return GP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GP(t)}function FP(){return FP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FP.apply(this,arguments)}function UP(){UP=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==GP(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function BP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function RP(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?BP(Object(r),!0).forEach((function(e){MP(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function MP(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YP(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function zP(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $P(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $P(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $P(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}DP.propTypes={UIComponent:c.a.elementType,handleButtonLoginClick:c.a.func,handleSuccessLogin:c.a.func,useDefualtSessionManager:c.a.bool,useLoginByEmail:c.a.bool,useLoginByCellphone:c.a.bool,defaultLoginTab:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToSignup:c.a.string,linkToForgetPassword:c.a.string,elementLinkToSignup:c.a.element,elementLinkToForgotPassword:c.a.element},DP.defaultProps={defaultLoginTab:"email",useLoginByEmail:!0,useDefualtSessionManager:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qP=function(t){var e=t.orderId,r=t.UIComponent,n=zP(er(),1)[0],a=zP(hr(),1)[0],c=zP(Object(o.useState)({data:[],loading:!0,error:null}),2),u=c[0],s=c[1],l=function(){var t,r=(t=UP().mark((function t(){var r,o,i,c;return UP().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(RP(RP({},u),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)}},t.next=5,fetch("".concat(n.root,"/logistic/orders/").concat(e,"/information"),r);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,c=i.result,o.ok?s({error:null,loading:!1,data:c}):s(RP(RP({},u),{},{loading:!1,error:c})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),s(RP(RP({},u),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){YP(i,n,o,a,c,"next",t)}function c(t){YP(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(o.useEffect)((function(){l()}),[]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,FP({},t,{logisticInformation:u,getLogistics:l})))};function JP(t){return JP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JP(t)}function VP(){return VP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VP.apply(this,arguments)}function HP(){HP=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==JP(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function WP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function KP(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?WP(Object(r),!0).forEach((function(e){ZP(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WP(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ZP(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XP(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function QP(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return tk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tk(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tk(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}qP.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ek=function(t){var e=t.orderId,r=t.UIComponent,n=QP(er(),1)[0],a=QP(hr(),1)[0],c=QP(Ir(),2)[1],u=QP(Wn(),1)[0],s=u.getOrderState,l=u.parseDistance,f=QP(Object(o.useState)({logs:[],loading:!0,error:null}),2),p=f[0],h=f[1],d=function(){var t,r=(t=HP().mark((function t(){var r,o,i,c;return HP().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(KP(KP({},p),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)}},t.next=5,fetch("".concat(n.root,"/orders/").concat(e,"/logs?order_id=").concat(e),r);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,c=i.result,h(KP(KP({},p),{},{loading:!1,logs:c})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),h(KP(KP({},p),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){XP(i,n,o,a,c,"next",t)}function c(t){XP(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(o.useEffect)((function(){d()}),[]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,VP({},t,{logisticList:p,parseLog:function(t){var e=function(t,e){var r=c("LOG_"+t.toUpperCase());for(var n in e){var o=e[n];"distance"===n||"coverage"===n?o=l(e[n]):"with_orders"===n?(o=e[n].join(", "),n="orders"):"status"===n&&(o=s(e[n])),r=r.replace("_"+n+"_",o)}return r},r=t.data?t.data:{};return-1!==["logistic_driver_found","logistic_driver_found_group","logistic_driver_not_found","logistic_driver_not_found_group","logistic_driver_found_in_coverage","logistic_driver_found_in_coverage_group","logistic_driver_found_out_coverage","logistic_driver_found_out_coverage_group","logistic_driver_autoaccepted","logistic_driver_autoaccepted_group","logistic_request_autorejected","logistic_request_autorejected_group","logistic_assign_request_accepted","logistic_assign_request_accepted_group","logistic_assign_request_rejected","logistic_assign_request_rejected_group","logistic_manual_driver_assignment","logistic_manual_driver_unassignment","logistic_driver_autoassigned_group"].indexOf(t.event)||t.driver_id?(t.driver&&(r.driver=t.driver.name+(t.driver.lastname?t.driver.lastname:"")),e(t.event,r)):t.driver_company_id||t.external_driver_id?(t.driver_company&&(r.driver_company=t.driver_company.name),t.external_driver&&(r.external_driver=t.external_driver.name),e(t.event,r)):-1!==["logistic_started","logistic_finished","logistic_expired","logistic_resolved","logistic_reset","logistic_grouped","logistic_cancelled","logistic_not_grouped","logistic_order_queued","logistic_order_out_queued","logistic_driver_company_not_found"].indexOf(t.event)?e(t.event,r):c(t.event.toUpperCase())+"<br />"+JSON.stringify(t.data)}})))};function rk(t){return rk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rk(t)}function nk(){return nk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nk.apply(this,arguments)}function ok(){ok=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==rk(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ik(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ak(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ik(Object(r),!0).forEach((function(e){ck(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ik(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ck(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uk(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function sk(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return lk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lk(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lk(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ek.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ek.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fk=function(t){var e,r=t.UIComponent,n=t.handleSuccessLogout,a=t.token,c=t.isNative,u=t.useDefualtSessionManager,s=sk(er(),1)[0],l=sk(Object(o.useState)({loading:!1,result:{error:!1}}),2),f=l[0],p=l[1],h=sk(hr(),2),d=h[0],y=h[1].logout,v=sk(jn(),1)[0].configs;Object(o.useEffect)((function(){var t;if(null!=v&&null!==(t=v.facebook_id)&&void 0!==t&&t.value&&!c){if(window.fbAsyncInit=function(){var t;window.FB.init({appId:null==v||null===(t=v.facebook_id)||void 0===t?void 0:t.value,cookie:!0,xfbml:!1,version:"v7.0",status:!0})},window.document.getElementById("facebook-jssdk"))return;var e=window.document.createElement("script"),r=window.document.getElementsByTagName("script")[0];e.id="facebook-jssdk",e.async=!0,e.defer=!0,e.src="https://connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(e,r)}}),[null==v||null===(e=v.facebook_id)||void 0===e?void 0:e.value]);var m=function(){var t,e=(t=ok().mark((function t(){var e,r;return ok().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(ak(ak({},f),{},{loading:!0})),e=a||d.token,t.next=5,s.setAccessToken(e).users().logout();case 5:r=t.sent,p({result:r.content,loading:!1}),r.content.error||(u&&y(),n&&n()),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),p({result:{error:!0,result:t.t0.message},loading:!1});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){uk(i,n,o,a,c,"next",t)}function c(t){uk(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,nk({},t,{formState:f,handleLogoutClick:m})))};function pk(t){return pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pk(t)}function hk(){return hk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hk.apply(this,arguments)}function dk(){dk=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==pk(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function yk(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function vk(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yk(i,n,o,a,c,"next",t)}function c(t){yk(i,n,o,a,c,"throw",t)}a(void 0)}))}}function mk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gk(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mk(Object(r),!0).forEach((function(e){bk(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mk(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bk(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wk(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ok(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ok(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ok(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}fk.propTypes={UIComponent:c.a.elementType,handleSuccessLogout:c.a.func,handleErrorLogout:c.a.func,token:c.a.string,useDefualtSessionManager:c.a.bool},fk.defaultProps={useDefualtSessionManager:!0};var xk=function(t){var e=t.UIComponent,r=t.walletData,n=t.handleUpdateWalletBusiness,a=t.handleUpdateBusinessList,c=t.handleUpdatePointsWallet,u=t.isBusiness,s=t.selectedBusinessList,l=wk(er(),1)[0],f=wk(hr(),1)[0].token,p=wk(br(),2)[1].showToast,h=wk(Ir(),2)[1],d=wk(Object(o.useState)({loading:!1,changes:{},error:null}),2),y=d[0],v=d[1],m=function(){var t=vk(dk().mark((function t(e,o){var i,s,d,m,g,b;return dk().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),v(gk(gk({},y),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(o)},s=u?"".concat(l.root,"/loyalty_plans/").concat(null==r?void 0:r.loyalty_plan_id,"/businesses/").concat(e):"".concat(l.root,"/loyalty_plans/").concat(null==r?void 0:r.id),t.next=7,fetch(s,i);case 7:return d=t.sent,t.next=10,d.json();case 10:m=t.sent,g=m.error,b=m.result,g?v(gk(gk({},y),{},{loading:!1,error:b})):(p(vr.Success,h("POINTS_WALLET_UPDATED","Points wallet updated")),v(gk(gk({},y),{},{loading:!1,error:null,changes:{}})),n&&n(b),a&&a(o),!u&&c&&c(b)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),v(gk(gk({},y),{},{loading:!1,error:t.t0.message}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e,r){return t.apply(this,arguments)}}(),g=function(){var t=vk(dk().mark((function t(e){var r,n,o,i,a,s;return dk().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),v(gk(gk({},y),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(e)},n="".concat(l.root,"/loyalty_plans"),t.next=7,fetch(n,r);case 7:return o=t.sent,t.next=10,o.json();case 10:i=t.sent,a=i.error,s=i.result,a?v(gk(gk({},y),{},{loading:!1,error:s})):(p(vr.Success,h("POINTS_WALLET_CREATED","Points wallet created")),v(gk(gk({},y),{},{loading:!1,error:null,changes:{}})),!u&&c&&c(s)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),v(gk(gk({},y),{},{loading:!1,error:t.t0.message}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){v(gk(gk({},y),{},{changes:{}}))}),[r]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,hk({},t,{formState:y,setFormState:v,handleClickSubmit:function(){if(0!==Object.keys(null==y?void 0:y.changes).length)if(r)m(null==r?void 0:r.id,null==y?void 0:y.changes);else{var t=s.filter((function(t){return t.wallet_enabled})).map((function(t){return{id:t.id,redeems:(null==t?void 0:t.redeems)||!1,accumulates:(null==t?void 0:t.accumulates)||!1}})),e=gk({name:"Loyalty Point Plan",type:"credit_point",redemption_rate:null,accumulation_rate:null,businesses:JSON.stringify(t)},null==y?void 0:y.changes);g(e)}},handleChangeInput:function(t){var e=t.target.value;v(gk(gk({},y),{},{changes:gk(gk({},y.changes),{},bk({},t.target.name,e))}))},handleChangeItem:function(t){v(gk(gk({},y),{},{changes:gk(gk({},y.changes),t)}))}})))};function Ek(t){return Ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ek(t)}function jk(){return jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jk.apply(this,arguments)}function Sk(t){return function(t){if(Array.isArray(t))return Nk(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ck(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lk(){Lk=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ek(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function _k(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Pk(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_k(i,n,o,a,c,"next",t)}function c(t){_k(i,n,o,a,c,"throw",t)}a(void 0)}))}}function kk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Tk(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kk(Object(r),!0).forEach((function(e){Ik(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ik(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ak(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||Ck(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ck(t,e){if(t){if("string"==typeof t)return Nk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nk(t,e):void 0}}function Nk(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}xk.propTypes={UIComponent:c.a.elementType,walletData:c.a.object,handleUpdateWalletBusiness:c.a.func,handleUpdateBusinessList:c.a.func,handleUpdatePointsWallet:c.a.func,isBusiness:c.a.bool,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Dk=function(t){var e=t.UIComponent,r=t.pointWallet,n=t.propsToFetch,a=t.handleUpdateWalletBusiness,c=t.handleAddWalletBusiness,u=t.handleDeleteWalletBusiness,s=t.setSelectedBusinessList,l=Ak(er(),1)[0],f=Ak(hr(),1)[0].token,p=Ak(br(),2)[1].showToast,h=Ak(Ir(),2)[1],d=Ak(Object(o.useState)({loading:!0,error:null,businesses:[],pagination:null}),2),y=d[0],v=d[1],m=Ak(Object(o.useState)({loading:!1,error:null}),2),g=m[0],b=m[1],w=function(t,e){var r=y.businesses.map((function(r){return r.id===t?Tk(Tk({},r),e):r}));v(Tk(Tk({},y),{},{businesses:r}))},O=function(t,e){var r=y.businesses.map((function(r){return r.id===t.business_id?Tk(Tk(Tk(Tk(Tk(Tk(Tk(Tk(Tk({},r),{},{wallet_enabled:e},!e&&{redeems:!1}),!e&&{accumulates:!1}),!e&&{redemption_rate:null}),!e&&{accumulation_rate:null}),!e&&{expire_after_minutes:null}),!e&&{maximum_accumulation:null}),!e&&{maximum_redemption_rate:null}),!e&&{maximum_redemption_type:null}):r}));v(Tk(Tk({},y),{},{businesses:r}))},x=function(){var t=Pk(Lk().mark((function t(e,n){var o,i,c,u,s;return Lk().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),b(Tk(Tk({},g),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(n)},t.next=6,fetch("".concat(l.root,"/loyalty_plans/").concat(null==r?void 0:r.id,"/businesses/").concat(e),o);case 6:return i=t.sent,t.next=9,i.json();case 9:c=t.sent,u=c.error,s=c.result,u?b({loading:!1,error:s}):(p(vr.Success,h("WALLET_BUSINESS_UPDATED","Wallet business updated")),b({loading:!1,error:null}),a&&a(s),w(e,n)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),b({loading:!1,error:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r){return t.apply(this,arguments)}}(),E=function(){var t=Pk(Lk().mark((function t(e){var n,o,i,a,u;return Lk().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),b(Tk(Tk({},g),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(e)},t.next=6,fetch("".concat(l.root,"/loyalty_plans/").concat(null==r?void 0:r.id,"/businesses"),n);case 6:return o=t.sent,t.next=9,o.json();case 9:i=t.sent,a=i.error,u=i.result,a?b({loading:!1,error:u}):(p(vr.Success,h("WALLET_BUSINESS_ENABLED","Wallet business enabled")),b({loading:!1,error:null}),c&&c(u),O(u,!0)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),b({loading:!1,error:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Pk(Lk().mark((function t(e){var n,o,i,a,c;return Lk().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),b(Tk(Tk({},g),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},t.next=6,fetch("".concat(l.root,"/loyalty_plans/").concat(null==r?void 0:r.id,"/businesses/").concat(e),n);case 6:return o=t.sent,t.next=9,o.json();case 9:i=t.sent,a=i.error,c=i.result,a?b({loading:!1,error:c}):(p(vr.Success,h("WALLET_BUSINESS_DISABLED","Wallet business disabled")),b({loading:!1,error:null}),u&&u(c),O(c,!1)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),b({loading:!1,error:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=Pk(Lk().mark((function t(){var e,o,i,a,c,u,s;return Lk().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(Tk(Tk({},y),{},{loading:!0})),e=l.businesses().asDashboard().select(n),t.next=5,e.get();case 5:o=t.sent,i=o.content,a=i.error,c=i.result,u=i.pagination,a?v(Tk(Tk({},y),{},{loading:!1,error:c})):([],s=c.map((function(t){var e=null==r?void 0:r.businesses.find((function(e){return e.business_id===t.id}));return e?Tk(Tk(Tk({},e),t),{},{wallet_enabled:!0}):Tk(Tk({},t),{},{redeems:!1,accumulates:!1,wallet_enabled:!1,loyalty_plan_id:null==r?void 0:r.id,redemption_rate:null,accumulation_rate:null,expire_after_minutes:null,maximum_accumulation:null,maximum_redemption_rate:null,maximum_redemption_type:null})})),v(Tk(Tk({},y),{},{loading:!1,businesses:s,pagination:u}))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v(Tk(Tk({},y),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t=new AbortController;return S(),t.abort()}),[]),Object(o.useEffect)((function(){s(Sk(null==y?void 0:y.businesses))}),[null==y?void 0:y.businesses]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,jk({},t,{businessList:y,handleCheckBox:function(t,e,n){var o=Ik({},e,n);r?x(t,o):w(t,o)},handleUpdateBusinessList:w,handleChangeSwitch:function(t,e){if(r)if(e){var n,o=null==y||null===(n=y.businesses)||void 0===n?void 0:n.find((function(e){return e.id===t}));if(o){var i={business_id:t,redeems:null==o?void 0:o.redeems,accumulates:null==o?void 0:o.accumulates,loyalty_plan_id:null==r?void 0:r.id};E(i)}}else j(t);else{var a=null==y?void 0:y.businesses.map((function(r){return t===r.id?Tk(Tk({},r),{},{wallet_enabled:e}):r}));v(Tk(Tk({},y),{},{businesses:a}))}}})))};function Gk(t){return Gk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gk(t)}function Fk(){return Fk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fk.apply(this,arguments)}function Uk(){Uk=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Gk(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Bk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Rk(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bk(Object(r),!0).forEach((function(e){Mk(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bk(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mk(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yk(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function zk(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $k(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Dk.propTypes={UIComponent:c.a.elementType,pointWallet:c.a.object,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Dk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var qk=function(t){var e,r=t.searchByAddress,n=t.handlerFindBusiness,a=t.UIComponent,c=zk(er(),1)[0],u=zk(Rn(),1)[0],s=zk(Object(o.useState)({countries:[],cities:[],citiesOptions:[]}),2),l=s[0],f=s[1],p=zk(Object(o.useState)({cityId:null,dropdownOptionId:null,orderType:(null===(e=u.options)||void 0===e?void 0:e.type)||1}),2),h=p[0],d=p[1],y=zk(Object(o.useState)(!1),2),v=y[0],m=y[1],g=function(){var t,e=(t=Uk().mark((function t(){var e,r,n;return Uk().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.countries().get();case 3:r=t.sent,n=r.response,f(Rk(Rk({},l),{},{countries:null==n||null===(e=n.data)||void 0===e?void 0:e.result})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Yk(i,n,o,a,c,"next",t)}function c(t){Yk(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){r||g()}),[]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,Fk({},t,{orderState:u,allListValues:l,currentValues:h,isFormErrors:v,handleChangeValue:function(t){var e=t.name,r=t.value;switch(e){case"country":var n=null==l?void 0:l.countries.find((function(t){return Number(t.id)===Number(r)})),o=null==n?void 0:n.cities.filter((function(t){return t.options.length}));f(Rk(Rk({},l),{},{cities:o})),d(Rk(Rk({},h),{},{cityId:null}));break;case"cityId":var i=l.cities.find((function(t){return Number(t.id)===Number(r)}));f(Rk(Rk({},l),{},{citiesOptions:null==i?void 0:i.options})),d(Rk(Rk({},h),{},{cityId:r,dropdownOptionId:null}));break;case"dropdownOptionId":d(Rk(Rk({},h),{},{dropdownOptionId:r}))}},handleFindBusiness:function(){var t=!(l.citiesOptions.length>0)||!!h.dropdownOptionId,e=h.cityId&&t;e&&n(h),m(!e)}})))};function Jk(){return Jk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jk.apply(this,arguments)}function Vk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Hk(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vk(Object(r),!0).forEach((function(e){Wk(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vk(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wk(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kk(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Zk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zk(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zk(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}qk.propTypes={UIComponent:c.a.elementType,searchByAddress:c.a.bool,handlerFindBusiness:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Xk=function(t){var e,r=t.maxPreoderDays,n=t.UIComponent,a=Kk(Object(o.useState)(null),2),c=a[0],u=a[1],s=Kk(Object(o.useState)(null),2),l=s[0],f=s[1],p=Kk(Object(o.useState)(null),2),h=p[0],d=p[1],y=Kk(Object(o.useState)(null),2),v=y[0],m=y[1],g=Kk(Object(o.useState)([]),2)[1],b=(null==l||null===(e=l.schedule)||void 0===e?void 0:e.map((function(t,e){return!t.enabled&&e})))||[],w=function(){var t=r,e=ln()().toDate(),n=[],o=b.every((function(t){return!1===t}));if(b.length&&!o)for(;t>0;){var i=e,a=ln()(e).day();!1===b[a]&&(n.push(ln()(i).toDate()),t--),e=ln()(ln()(e).add(1,"d")).toDate()}if(b.length&&o)for(var c=1;c<=r;c++)n.push(ln()(ln()(e).add(c,"d")).toDate());return n.unshift(ln()().toDate()),n};return Object(o.useEffect)((function(){w()}),[b]),Object(o.useEffect)((function(){!function(){for(var t=[],e=ln()().format("YYYY-MM-DD"),r=ln()().day(30).format("YYYY-MM-DD"),n=ln()(r,"YYYY-MM-DD HH:mm").diff(ln()(e,"YYYY-MM-DD HH:mm"),"days"),o=0;o<=n;o++)t.push({key:"".concat(o),date:ln()(e).add(o,"d").format("YYYY-MM-DD")});g(t)}()}),[]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,Jk({},t,{futureDaysToShow:w,menuLapsesList:function(){for(var t=[],e=(null==c?void 0:c.lapses)||[],r=0;r<e.length;r++)for(var n,o,i,a,u,s,l,f,p="".concat(null===(n=e[r])||void 0===n||null===(o=n.open)||void 0===o?void 0:o.hour,":").concat(null===(i=e[r])||void 0===i||null===(a=i.open)||void 0===a?void 0:a.minute),h="".concat(null===(u=e[r])||void 0===u||null===(s=u.close)||void 0===s?void 0:s.hour,":").concat(null===(l=e[r])||void 0===l||null===(f=l.close)||void 0===f?void 0:f.minute),d=ln()(h,"HH:mm").diff(ln()(p,"HH:mm"),"hour",!0);d>0;){var y=p;t.push(ln()(y,"HH:mm").toDate()),p=ln()(y,"HH:mm").add(15,"minutes"),d-=.25}return t},disableDays:b,startDate:v,isDisabledDay:function(t){var e=ln()(t,"YYYY-MM-DD").day();return b.every((function(t){return t!==e}))},scheduleSelected:c,menuSelected:null==l?void 0:l.id,handleMenuSelected:function(t){return u(function(t){var e;f(t);var r=ln()().day();return{lapses:null==t||null===(e=t.schedule[r])||void 0===e?void 0:e.lapses,menuId:t.id}}(t))},handleDate:function(e){var r,n=ln()(e,"YYYY-MM-DD").day(),o=null==l||null===(r=l.schedule[n])||void 0===r?void 0:r.lapses;u(Hk(Hk({},c),{},{lapses:o})),m(e),d(ln()(e).format("YYYY-MM-DD HH:mm")),t.handlerSelectDate(ln()(e).format("YYYY-MM-DD HH:mm"))},onSendMenuInfo:function(){(null==c?void 0:c.menuId)&&h&&t.handleMenuInfo({menuId:null==c?void 0:c.menuId,date:new Date(h)})},dateSelected:h})))};function Qk(t){return Qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qk(t)}function tT(){return tT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tT.apply(this,arguments)}function eT(){eT=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Qk(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function rT(t){return function(t){if(Array.isArray(t))return lT(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||sT(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function oT(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nT(Object(r),!0).forEach((function(e){iT(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nT(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function iT(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aT(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function cT(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){aT(i,n,o,a,c,"next",t)}function c(t){aT(i,n,o,a,c,"throw",t)}a(void 0)}))}}function uT(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||sT(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sT(t,e){if(t){if("string"==typeof t)return lT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lT(t,e):void 0}}function lT(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Xk.propTypes={UIComponent:c.a.elementType,maxPreoderDays:c.a.number,business:c.a.object,handleMenuInfo:c.a.func,handlerSelectDate:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fT=function(t){var e=t.UIComponent,r=t.orderId,n=t.customHandleSend,a=t.messages,c=t.setMessages,u=t.asDashboard,s=t.order,l=t.handleUpdateOrderForUnreadCount,f=uT(er(),1)[0],p=uT(hr(),1)[0],h=p.user,d=p.token,y=t.accessToken||d,v=uT(Object(o.useState)({business:!0,administrator:!0,driver:!0,customer:!0}),2),m=v[0],g=v[1],b=uT(Object(o.useState)(""),2),w=b[0],O=b[1],x=uT(Object(o.useState)({loading:!0,error:null,messages:[]}),2),E=x[0],j=x[1],S=uT(Object(o.useState)({loading:!1,error:null}),2),L=S[0],_=S[1],P=uT(Object(o.useState)({loading:!0,error:null,messages:[]}),2),k=P[0],T=P[1],I=uT(Object(o.useState)(null),2),A=I[0],C=I[1],N=rn(),D=function(){var t=cT(eT().mark((function t(){var e,o,i,u,s,l;return eT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=2;break}return t.abrupt("return",n(w));case 2:return t.prev=2,_({loading:!0,error:null}),e=[],m.customer&&e.push(3),m.administrator&&e.push(0),m.business&&e.push(2),m.driver&&e.push(4),o={comment:w,type:2,can_see:e.join(",")},A&&(o.type=3,o.file=A),t.next=13,fetch("".concat(f.root,"/orders/").concat(r,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(o)});case 13:return i=t.sent,t.next=16,i.json();case 16:u=t.sent,s=u.error,l=u.result,s||(c&&a?c(oT(oT({},a),{},{messages:[].concat(rT(a.messages),[l])})):j(oT(oT({},E),{},{messages:[].concat(rT(E.messages),[l])}))),_({loading:!1,error:s?l:null}),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(2),_({loading:!1,error:[t.t0.Messages]});case 26:case"end":return t.stop()}}),t,null,[[2,23]])})));return function(){return t.apply(this,arguments)}}(),G=function(){var t=cT(eT().mark((function t(){var e,n,o,i,a;return eT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(oT(oT({},E),{},{loading:!0})),e=u?"".concat(f.root,"/orders/").concat(r,"/messages?mode=dashboard"):"".concat(f.root,"/orders/").concat(r,"/messages"),t.next=5,fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}});case 5:return n=t.sent,t.next=8,n.json();case 8:o=t.sent,i=o.error,a=o.result,j(i?oT(oT({},E),{},{loading:!1,error:a}):{messages:a,loading:!1,error:null}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),j(oT(oT({},E),{},{loading:!1,error:[t.t0.Messages]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),F=function(){var t=cT(eT().mark((function t(e){var n,o,i,u,s,p;return eT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a||!c){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,T(oT(oT({},k),{},{loading:!0})),n="".concat(f.root,"/orders/").concat(r,"/messages/").concat(e,"/read?order_id=").concat(r,"&order_message_id=").concat(e),t.next=7,fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}});case 7:return o=t.sent,t.next=10,o.json();case 10:i=t.sent,u=i.error,s=i.result,u?T(oT(oT({},k),{},{loading:!1,error:s})):(T({messages:s,loading:!1,error:null}),E.messages.length>0&&(p=E.messages.filter((function(t){return t.id===e&&(t.read=!0),!0})),j(oT(oT({},E),{},{messages:p}))),l&&l(null),l&&l(r)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),T(oT(oT({},k),{},{loading:!1,error:[t.t0.Messages]}));case 19:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){a&&c||G()}),[r]),Object(o.useEffect)((function(){if(!(E.loading||a&&c)){var t=function(t){var e;(null===(e=t.order)||void 0===e?void 0:e.id)===r&&(E.messages.find((function(e){return e.id===t.id}))||j(oT(oT({},E),{},{messages:[].concat(rT(E.messages),[t])})))};return N.on("message",t),function(){N.off("message",t)}}}),[E,N,null==s?void 0:s.status]),Object(o.useEffect)((function(){return u?N.join("messages_orders_".concat(r,"_").concat(null==h?void 0:h.level)):N.join("messages_orders_".concat(null==h?void 0:h.id)),function(){u?N.leave("messages_orders_".concat(r,"_").concat(null==h?void 0:h.level)):N.leave("messages_orders_".concat(null==h?void 0:h.id))}}),[N,r]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,tT({},t,{messages:E,image:A,canRead:m,handleSend:D,message:w,handleReadMessages:F,setMessage:O,setCanRead:g,sendMessage:L,setImage:C})))};function pT(t){return pT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pT(t)}function hT(){return hT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hT.apply(this,arguments)}function dT(t){return function(t){if(Array.isArray(t))return ET(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||xT(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yT(){yT=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==pT(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function vT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mT(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vT(Object(r),!0).forEach((function(e){gT(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vT(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function gT(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bT(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function wT(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){bT(i,n,o,a,c,"next",t)}function c(t){bT(i,n,o,a,c,"throw",t)}a(void 0)}))}}function OT(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||xT(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xT(t,e){if(t){if("string"==typeof t)return ET(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ET(t,e):void 0}}function ET(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}fT.propTypes={UIComponent:c.a.elementType,handleClickSetDefault:c.a.func,customHandleSend:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jT=function(t){var e=t.orderId,r=t.UIComponent,n=OT(er(),1)[0],a=OT(hr(),1)[0],c=OT(Object(o.useState)({metaFields:[],loading:!0,error:null}),2),u=c[0],s=c[1],l=OT(Object(o.useState)({loading:!1,result:{error:!1}}),2),f=l[0],p=l[1],h=function(){var t=wT(yT().mark((function t(){var r,o,i,c;return yT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(mT(mT({},u),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)}},t.next=5,fetch("".concat(n.root,"/orders/").concat(e,"/metafields"),r);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,c=i.result,s(mT(mT({},u),{},{loading:!1,metaFields:c})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),s(mT(mT({},u),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),d=function(){var t=wT(yT().mark((function t(r){var o,i;return yT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(mT(mT({},f),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)}},t.next=5,fetch("".concat(n.root,"/orders/").concat(e,"/metafields/").concat(r),o);case 5:t.sent.ok&&(i=u.metaFields.filter((function(t){return t.id!==r})),s(mT(mT({},u),{},{metaFields:i})),p({loading:!1,result:{error:!1}})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),p({result:{error:!0,result:t.t0.message},loading:!1});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=wT(yT().mark((function t(r){var o,i,c,l,h,d;return yT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(mT(mT({},f),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)},body:JSON.stringify(r)},t.next=5,fetch("".concat(n.root,"/orders/").concat(e,"/metafields"),o);case 5:return i=t.sent,t.next=8,i.json();case 8:c=t.sent,l=c.error,h=c.result,l?p({loading:!1,result:{error:!0,result:h}}):([],d=[].concat(dT(u.metaFields),[h]),s(mT(mT({},u),{},{metaFields:d})),p({loading:!1,result:{error:!1}})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),p({result:{error:!0,result:t.t0.message},loading:!1});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){h()}),[]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,hT({},t,{metaFieldsList:u,actionState:f,handleDeleteMetaField:d,handeAddMetaField:y})))};jT.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ST=r(35),LT=r.n(ST);function _T(){return _T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_T.apply(this,arguments)}function PT(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return kT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kT(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kT(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ln.a.extend(LT.a),ln.a.extend(pn.a);var TT=function(t){var e,r,n=t.minDate,a=t.maxDate,c=t.currentDate,u=t.useOrderContext,s=t.onChangeMoment,l=t.UIComponent,f=PT(Rn(),2),p=f[0],h=f[1].changeMoment,d=function(t){if(t)return ln()(t,"YYYY-MM-DD HH:mm").isSameOrAfter(ln()(),"day")?ln()(t).format("YYYY-MM-DD HH:mm"):ln()().format("YYYY-MM-DD HH:mm")},y=u?null===(e=p.options)||void 0===e?void 0:e.moment:c,v=PT(Object(o.useState)(y?ln()(d(y)).format("YYYY-MM-DD HH:mm"):null),2),m=v[0],g=v[1],b=PT(Object(o.useState)(!m),2),w=b[0],O=b[1],x=PT(Object(o.useState)([]),2),E=x[0],j=x[1],S=PT(Object(o.useState)([]),2),L=S[0],_=S[1],P=PT(Object(o.useState)(ln()(d(y)).format("YYYY-MM-DD")),2),k=P[0],T=P[1],I=PT(Object(o.useState)(null),2),A=I[0],C=I[1],N=function(){w||(O(!0),u&&h(null),s&&s(null))};Object(o.useEffect)((function(){var t;if(u)if(null!==(t=p.options)&&void 0!==t&&t.moment){var e,r=ln.a.utc(d(null===(e=p.options)||void 0===e?void 0:e.moment)).local();g(r.format("YYYY-MM-DD HH:mm")),T(r.format("YYYY-MM-DD")),C(r.format("HH:mm")),w&&O(!1)}else k!==ln()().format("YYYY-MM-DD")&&T(ln()().format("YYYY-MM-DD")),null!==A&&C(null),null!==m&&g(null),!w&&O(!0);else null!==m&&g(null),!w&&O(!0)}),[null===(r=p.options)||void 0===r?void 0:r.moment]),Object(o.useEffect)((function(){if(m){var t=ln()(m,"YYYY-MM-DD HH:mm"),e=ln()(),r=t.diff(e,"seconds");if(!(r<=0)){var n=setTimeout((function(){N()}),1e3*r);return function(){clearTimeout(n)}}N()}}),[m]),Object(o.useEffect)((function(){w&&L[0]&&(T(L[0]),C(null))}),[w,L]);var D=function(){for(var t=[],e=k===ln()().format("YYYY-MM-DD"),r=k===ln()(a).format("YYYY-MM-DD"),n=new Date,o=0;o<24;o++)if(!(e&&o<(null==n?void 0:n.getHours())||r&&o>(null==a?void 0:a.getHours())))for(var i=0;i<59;i+=15)if(!(e&&o===(null==n?void 0:n.getHours())&&i<=n.getMinutes()||r&&o===(null==a?void 0:a.getHours())&&i>a.getMinutes())){var c=o<10?"0".concat(o):o,u=i<10?"0".concat(i):i,s=i+14<10?"0".concat(i+14):i+14,l="".concat(c,":").concat(u),f="".concat(c,":").concat(s);t.push({startTime:l,endTime:f})}j(t)},G=function(){for(var t,e,r,o=[],i=parseInt((t=d(a),r=null!=e?e:ln()(),ln()(t).diff(ln()(r),"day")),d(n)),c=0;c<i+1;c++)o.push(ln()(d(n)).add(c,"d").format("YYYY-MM-DD"));_(o)};return Object(o.useEffect)((function(){k&&D()}),[k]),Object(o.useEffect)((function(){var t=setInterval((function(){0===ln()(k).diff(ln()(c),"day")&&D()}),1e3);return function(){return clearInterval(t)}}),[k]),Object(o.useEffect)((function(){G()}),[a,n]),i.a.createElement(i.a.Fragment,null,l&&i.a.createElement(l,_T({},t,{isAsap:w,minDate:d(n),maxDate:d(a),dateSelected:k,timeSelected:A,handleChangeDate:function(t){t&&t!==k&&(T(t),C(null),O(!1))},handleChangeTime:function(t){if(t&&t!==A){var e=ln()("".concat(k," ").concat(t),"YYYY-MM-DD HH:mm").toDate();C(t),O(!1),u&&h(e),s&&s(e)}},datesList:L,hoursList:E,handleAsap:N})))};function IT(t){return IT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},IT(t)}function AT(){return AT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},AT.apply(this,arguments)}function CT(){CT=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==IT(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function NT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function DT(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?NT(Object(r),!0).forEach((function(e){GT(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NT(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function GT(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FT(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function UT(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){FT(i,n,o,a,c,"next",t)}function c(t){FT(i,n,o,a,c,"throw",t)}a(void 0)}))}}function BT(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return RT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RT(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RT(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}TT.propTypes={UIComponent:c.a.elementType,minDate:c.a.instanceOf(Date),maxDate:c.a.instanceOf(Date).isRequired,currentDate:c.a.instanceOf(Date),useOrderContext:c.a.bool,onChangeMoment:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},TT.defaultProps={useOrderContext:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var MT=function(t){var e=t.UIComponent,r=BT(er(),1)[0],n=BT(hr(),1)[0].token,a=BT(Ir(),2)[1],c=BT(br(),2)[1].showToast,u=BT(Object(o.useState)({loading:!0,countries:[],error:null}),2),s=u[0],l=u[1],f=BT(Object(o.useState)({loading:!1,configs:[],error:null}),2),p=f[0],h=f[1],d=BT(Object(o.useState)({loading:!1,error:null}),2),y=d[0],v=d[1],m=function(){var t=UT(CT().mark((function t(){var e,o,i,a,c;return CT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=4,fetch("".concat(r.root,"/countries"),e);case 4:return o=t.sent,t.next=7,o.json();case 7:i=t.sent,a=i.error,c=i.result,l(a?DT(DT({},s),{},{loading:!1,error:c}):{loading:!1,countries:c,error:null}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),l(DT(DT({},s),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=UT(CT().mark((function t(e){var o,i,a,c,u;return CT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(DT(DT({},p),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=5,fetch("".concat(r.root,"/countries/").concat(e,"/configs"),o);case 5:return i=t.sent,t.next=8,i.json();case 8:a=t.sent,c=a.error,u=a.result,h(c?DT(DT({},p),{},{error:u}):{loading:!1,configs:u,error:null}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),h(DT(DT({},p),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=UT(CT().mark((function t(e,o,i){var u,s,l,f,p;return CT().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,a("LOADING","Loading")),v(DT(DT({},y),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({value:e})},t.next=6,fetch("".concat(r.root,"/countries/").concat(o,"/configs/").concat(i),u);case 6:return s=t.sent,t.next=9,s.json();case 9:l=t.sent,f=l.error,p=l.result,f?v({loading:!1,error:p}):(v({loading:!1,error:null}),c(vr.Success,a("SETTINGS_UPDATE","Settings updated"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),v({loading:!1,error:[t.t0.message]});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r,n){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,AT({},t,{countryState:s,countryConfigState:p,actionState:y,handleGetContryConfigs:g,handleChangeConfig:b})))};function YT(t){return YT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YT(t)}function zT(){return zT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zT.apply(this,arguments)}function $T(){$T=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==YT(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function qT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function JT(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qT(Object(r),!0).forEach((function(e){VT(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qT(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function VT(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HT(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function WT(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){HT(i,n,o,a,c,"next",t)}function c(t){HT(i,n,o,a,c,"throw",t)}a(void 0)}))}}function KT(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ZT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZT(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZT(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}MT.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},MT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var XT=function(t){var e=t.UIComponent,r=KT(er(),1)[0],n={},a=KT(hr(),1)[0].token,c=KT(Object(o.useState)({loading:!0,orders:[],error:null}),2),u=c[0],s=c[1],l=KT(Object(o.useState)({loading:!0,orders:[],error:null}),2),f=l[0],p=l[1],h=function(){var t=WT($T().mark((function t(){var e,o,i;return $T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={},n.activeOrders=e,t.next=5,r.setAccessToken(a).orders().where([{attribute:"status",value:[0,3,4,7,8,9]}]).get({cancelToken:e});case 5:o=t.sent,i=o.content.result,s(JT(JT({},u),{},{loading:!1,orders:i})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),s(JT(JT({},u),{},{loading:!1,error:t.t0.message}));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),d=function(){var t=WT($T().mark((function t(){var e,o,i;return $T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={},n.previousOrders=e,t.next=5,r.setAccessToken(a).orders().where([{attribute:"status",value:[1,2,5,6,10,11,12]}]).get({cancelToken:e});case 5:o=t.sent,i=o.content.result,p(JT(JT({},f),{},{loading:!1,orders:i})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),p(JT(JT({},f),{},{loading:!1,error:t.t0.message}));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){return d(),h(),function(){n.previousOrders&&n.previousOrders.cancel(),n.activeOrders&&n.activeOrders.cancel()}}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,zT({},t,{activeOrders:u,previousOrders:f})))};function QT(t){return QT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},QT(t)}function tI(){return tI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tI.apply(this,arguments)}function eI(){eI=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==QT(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function rI(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function nI(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return oI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oI(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oI(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}XT.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},XT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var iI=function(t){var e=t.status,r=t.UIComponent,n=nI(er(),1)[0],a=nI(hr(),1)[0].token,c=nI(Object(o.useState)([]),2),u=c[0],s=c[1],l={},f=function(){var t,r=(t=eI().mark((function t(){var r,o,i;return eI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={},l.orders=r,t.next=5,n.setAccessToken(a).orders().where([{attribute:"status",value:e}]).get({cancelToken:r});case 5:o=t.sent,i=o.content.result,s(i),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){rI(i,n,o,a,c,"next",t)}function c(t){rI(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(o.useEffect)((function(){return f(),function(){l.orders&&l.orders.cancel()}}),[]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,tI({},t,{orders:u})))};function aI(t){return aI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aI(t)}function cI(){return cI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cI.apply(this,arguments)}function uI(){uI=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==aI(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function sI(t){return function(t){if(Array.isArray(t))return vI(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||yI(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fI(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lI(Object(r),!0).forEach((function(e){pI(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lI(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pI(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hI(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function dI(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||yI(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yI(t,e){if(t){if("string"==typeof t)return vI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vI(t,e):void 0}}function vI(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}iI.propTypes={UIComponent:c.a.elementType,orderType:c.a.oneOf(["active","previous"]).isRequired,status:c.a.arrayOf(c.a.number).isRequired,orders:c.a.arrayOf(c.a.object),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},iI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mI=function(t){var e=t.UIComponent,r=t.handleChangeOccupation,n=dI(er(),1)[0],a=dI(hr(),1)[0].token,c=dI(un(),1)[0],u=dI(Object(o.useState)(t.occupationId),2),s=u[0],l=u[1],f=dI(Object(o.useState)(t.occupations),2),p=f[0],h=f[1],d=dI(Object(o.useState)({loading:!1,error:null}),2),y=d[0],v=d[1],m=function(){var t,e=(t=uI().mark((function t(e){var o,i,u;return uI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(fI(fI({},y),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)},t.next=5,fetch("".concat(n.root,"/occupations"),o);case 5:return i=t.sent,t.next=8,i.json();case 8:(u=t.sent).error?v({loading:!1,error:u.result}):(v({loading:!1,error:null}),h([].concat(sI(p),[u.result])),l(u.result.id),r(u.result.id),c.emit("occupations_update",[].concat(sI(p),[u.result]))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),v({loading:!1,error:[t.t0.message]});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){hI(i,n,o,a,c,"next",t)}function c(t){hI(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){l(t.occupationId)}),[t.occupationId]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,cI({},t,{actionState:y,occupationId:s,occupations:p,handleAddOccupation:m})))};function gI(t){return gI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gI(t)}function bI(){return bI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bI.apply(this,arguments)}function wI(){wI=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==gI(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function OI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xI(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?OI(Object(r),!0).forEach((function(e){EI(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OI(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function EI(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jI(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function SI(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){jI(i,n,o,a,c,"next",t)}function c(t){jI(i,n,o,a,c,"throw",t)}a(void 0)}))}}function LI(t){return function(t){if(Array.isArray(t))return kI(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||PI(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||PI(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PI(t,e){if(t){if("string"==typeof t)return kI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kI(t,e):void 0}}function kI(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}mI.propTypes={UIComponent:c.a.elementType},mI.defaultProps={};var TI=function(t){var e,r=t.UIComponent,n=t.isSearchByCartId,a=t.isSearchByCityName,c=t.paginationSettings,u=_I(er(),1)[0],s=_I(hr(),1)[0],l=s.user,f=s.token,p=s.loading,h={},d=_I(Object(o.useState)(null),2),y=d[0],v=d[1],m=_I(Object(o.useState)({}),2),g=m[0],b=m[1],w=_I(Object(o.useState)(!1),2),O=w[0],x=w[1],E=_I(Object(o.useState)({loading:!1,error:null}),2),j=E[0],S=E[1],L=_I(Object(o.useState)(null),2),_=L[0],P=L[1],k=_I(Object(o.useState)({loading:!1,carts:[],error:null}),2),T=k[0],I=k[1],A=_I(Object(o.useState)({currentPage:"pages"===c.controlType&&c.initialPage&&c.initialPage>=1?c.initialPage-1:0,pageSize:null!==(e=c.pageSize)&&void 0!==e?e:10,totalItems:null,totalPages:null}),2),C=A[0],N=A[1],D=_I(Object(o.useState)({businesses:[],loading:!0,error:null}),2),G=D[0],F=D[1],U=_I(Object(o.useState)([]),2),B=U[0],R=U[1],M=_I(Object(o.useState)([]),2),Y=M[0],z=M[1],$=function(){var t=SI(wI().mark((function t(e){var r,n,o,i,a;return wI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,S(xI(xI({},j),{},{loading:!0})),r={},h.deleteOrder=r,n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},t.next=7,fetch("".concat(u.root,"/carts/dashboard/").concat(e),n);case 7:return o=t.sent,t.next=10,o.json();case 10:(i=t.sent).error||(P(e),(a=LI(z)).shift(),0===a.length&&x(!1),z(a)),S({loading:!1,error:i.error?i.result:null}),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),S({loading:!1,error:[t.t0.message]}),x(!1);case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=SI(wI().mark((function t(){var e,r,n;return wI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,S(xI(xI({},j),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},t.next=5,fetch("".concat(u.root,"/controls/orders"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(n=t.sent).error?S({loading:!1,error:null==n?void 0:n.result}):(R(n.result.cities),F(xI(xI({},G),{},{loading:!1,businesses:n.result.businesses}))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),S({loading:!1,error:[t.t0.message]});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),J=function(){var t=SI(wI().mark((function t(e,r){var o,i,c,s,l,p,h,d;return wI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,I(xI(xI({},T),{},{loading:!0})),o=null,i=[],y&&(c=[],n&&c.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(y,"%"))}}),a&&c.push({attribute:"city",conditions:[{attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(y,"%"))}}]}),i.push({conector:"OR",conditions:c})),Object.keys(g).length&&(s=[],null!=g&&g.cartId&&s.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(null==g?void 0:g.cartId,"%"))}}),null!==g.deliveryFromDatetime&&s.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(g.deliveryFromDatetime)}}),null!==g.deliveryEndDatetime&&s.push({attribute:"delivery_datetime",value:{condition:"<=",value:g.deliveryEndDatetime}}),0!==g.businessIds.length&&s.push({attribute:"business_id",value:g.businessIds}),0!==g.customerIds.length&&s.push({attribute:"user_id",value:g.customerIds}),0!==g.cityIds.length&&s.push({attribute:"city_id",value:g.cityIds}),s.length&&i.push({conector:"AND",conditions:s})),i.length&&(o={conditions:i,conector:"AND"}),l={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},p=o?"".concat(u.root,"/carts/dashboard?orderBy=-id&page=").concat(r,"&page_size=").concat(e,"&where=").concat(JSON.stringify(o)):"".concat(u.root,"/carts/dashboard?orderBy=-id&page=").concat(r,"&page_size=").concat(e),t.next=11,fetch(p,l);case 11:return h=t.sent,t.next=14,h.json();case 14:(d=t.sent).error?I(xI(xI({},T),{},{loading:!1,error:d.result})):(I({loading:!1,carts:d.result,error:null}),N(xI(xI({},C),{},{currentPage:d.pagination.current_page,pageSize:0===d.pagination.page_size?C.pageSize:d.pagination.page_size,totalPages:d.pagination.total_pages,totalItems:d.pagination.total,from:d.pagination.from,to:d.pagination.to}))),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),I(xI(xI({},T),{},{loading:!1,error:[t.t0.message]}));case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){O&&0!==z.length&&$(z[0])}),[z,O]),Object(o.useEffect)((function(){if(!p)return q(),function(){h.drivers&&h.drivers.cancel()}}),[l,p]),Object(o.useEffect)((function(){T.loading||J(C.pageSize,1)}),[y]),Object(o.useEffect)((function(){Object.keys(g).length>0&&!T.loading&&J(C.pageSize,1)}),[g]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,bI({},t,{searchValue:y,businessesList:G,citiesList:B,filterValues:g,selectedCartIds:Y,deletedCartId:_,startMulitOrderDelete:O,handleSelectedCartIds:function(t){var e=LI(Y);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),z(e)},handleRemoveSelectedCartId:function(t){var e=LI(Y);e=e.filter((function(e){return e!==t})),z(e)},handleChangeSearch:function(t){v(t)},handleChangeFilterValues:function(t){b(t)},handleDeleteMultiCarts:function(){x(!0)},setSelectedCartIds:z,getCartList:J,pagination:C,cartList:T})))};function II(t){return II="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},II(t)}function AI(){return AI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},AI.apply(this,arguments)}function CI(){CI=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==II(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function NI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function DI(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?NI(Object(r),!0).forEach((function(e){GI(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NI(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function GI(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FI(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function UI(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return BI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BI(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BI(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}TI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},TI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var RI=function(t){var e=t.cart,r=t.UIComponent,n=UI(hr(),1)[0].token,a=UI(er(),1)[0],c=UI(Object(o.useState)({cart:null,loading:!1,error:null}),2),u=c[0],s=c[1],l=function(){var t,r=(t=CI().mark((function t(){var r,o,i,c,l,f;return CI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(DI(DI({},u),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},o="".concat(a.root,"/carts/").concat(null==e?void 0:e.uuid,"?user_id=").concat(null==e?void 0:e.user_id),t.next=6,fetch(o,r);case 6:return i=t.sent,t.next=9,i.json();case 9:(c=t.sent).error?s(DI(DI({},u),{},{loading:!1,error:c.result})):(f=DI(DI({},c.result),{},{id:null==e?void 0:e.id,business:DI(DI({},c.result.business),null==e?void 0:e.business),user:DI(DI({},null==e?void 0:e.user),(null==e||null===(l=e.address)||void 0===l?void 0:l.address)&&{address:e.address.address}),updated_at:null==e?void 0:e.updated_at}),s({loading:!1,cart:f,error:null})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),s(DI(DI({},u),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){FI(i,n,o,a,c,"next",t)}function c(t){FI(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(o.useEffect)((function(){e&&l()}),[e]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,AI({},t,{cartState:u})))};function MI(){return MI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MI.apply(this,arguments)}function YI(t){return function(t){if(Array.isArray(t))return HI(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||VI(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zI(Object(r),!0).forEach((function(e){qI(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zI(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qI(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JI(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||VI(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VI(t,e){if(t){if("string"==typeof t)return HI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?HI(t,e):void 0}}function HI(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}RI.propTypes={UIComponent:c.a.elementType,cartId:c.a.oneOfType([c.a.number,c.a.string]),order:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},RI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var WI=function(t){var e=t.UIComponent,r=JI(Object(o.useState)({cartId:null,dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],cityIds:[],customerIds:[]}),2),n=r[0],a=r[1];return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,MI({},t,{filterValues:n,handleChangeCartId:function(t){var e=t.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");a($I($I({},n),{},{cartId:e}))},handleChangeDateType:function(t){var e=ln()();switch(t){case"default":a($I($I({},n),{},{dateType:"default",deliveryFromDatetime:null,deliveryEndDatetime:null}));break;case"today":var r=e.format("YYYY-MM-DD"),o=ln()(r).format("YYYY-MM-DD HH:mm:ss");a($I($I({},n),{},{dateType:"today",deliveryFromDatetime:o}));break;case"yesterday":var i=e.subtract("1","day").format("YYYY-MM-DD"),c=ln()(i).format("YYYY-MM-DD HH:mm:ss");a($I($I({},n),{},{dateType:"yesterday",deliveryFromDatetime:c}));break;case"last7":var u=e.subtract("7","day").format("YYYY-MM-DD"),s=ln()(u).format("YYYY-MM-DD HH:mm:ss");a($I($I({},n),{},{dateType:"last7",deliveryFromDatetime:s}));break;case"last30":var l=e.subtract("30","day").format("YYYY-MM-DD"),f=ln()(l).format("YYYY-MM-DD HH:mm:ss");a($I($I({},n),{},{dateType:"last30",deliveryFromDatetime:f}));break;case"term":a($I($I({},n),{},{dateType:"term",deliveryFromDatetime:null,deliveryEndDatetime:null}))}},handleChangeFromDate:function(t){var e;e=null!==t?ln()(t).format("YYYY-MM-DD HH:mm:ss"):null,a($I($I({},n),{},{deliveryFromDatetime:e}))},handleChangeEndDate:function(t){var e;null!==t?e=ln()(t).format("YYYY-MM-DD HH:mm:ss"):t=null,a($I($I({},n),{},{deliveryEndDatetime:e}))},handleChangeBusinesses:function(t){var e=YI(n.businessIds);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),a($I($I({},n),{},{businessIds:e}))},handleChangeCity:function(t){var e=YI(n.cityIds);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),a($I($I({},n),{},{cityIds:e}))},handleChangeCustomers:function(t){var e=YI(n.customerIds);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),a($I($I({},n),{},{customerIds:e}))},handleResetFilterValues:function(){a({cartId:null,dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],cityIds:[],customerIds:[]})},handleChangeDateRange:function(t,e,r){a($I($I({},n),{},{dateType:t,deliveryFromDatetime:e,deliveryEndDatetime:r}))}})))};function KI(t){return KI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KI(t)}function ZI(){return ZI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZI.apply(this,arguments)}function XI(t){return function(t){if(Array.isArray(t))return cA(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||aA(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QI(){QI=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==KI(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function tA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function eA(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tA(Object(r),!0).forEach((function(e){rA(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tA(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nA(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function oA(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){nA(i,n,o,a,c,"next",t)}function c(t){nA(i,n,o,a,c,"throw",t)}a(void 0)}))}}function iA(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||aA(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aA(t,e){if(t){if("string"==typeof t)return cA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cA(t,e):void 0}}function cA(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}WI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},WI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var uA=function(t){var e,r=t.UIComponent,n=t.propsToFetch,a=t.orders,c=t.orderIds,u=t.deletedOrderId,s=t.orderStatus,l=t.orderBy,f=t.orderDirection,p=t.useDefualtSessionManager,h=t.paginationSettings,d=t.asDashboard,y=t.filterValues,v=t.searchValue,m=t.isSearchByOrderId,g=t.isSearchByCustomerEmail,b=t.isSearchByCustomerPhone,w=t.orderIdForUnreadCountUpdate,O=iA(er(),1)[0],x=iA(Object(o.useState)({loading:!a,error:null,orders:[]}),2),E=x[0],j=x[1],S=iA(Object(o.useState)({currentPage:"pages"===h.controlType&&h.initialPage&&h.initialPage>=1?h.initialPage-1:0,pageSize:null!==(e=h.pageSize)&&void 0!==e?e:10}),2),L=S[0],_=S[1],P=iA(hr(),1)[0],k=rn(),T=p?P.token:t.accessToken,I={},A=iA(Object(o.useState)({loading:!1,error:null}),2),C=A[0],N=A[1],D=iA(Object(o.useState)(null),2),G=D[0],F=D[1],U=function(t,e){if("id"===t){if("desc"===f)return e.sort((function(t,e){return e.id-t.id}));if("asc"===f)return e.sort((function(t,e){return t.id-e.id}))}return"last_direct_message_at"===t?e.sort((function(t,e){return new Date(e.last_direct_message_at)-new Date(t.last_direct_message_at)})):e},B=function(){var t=oA(QI().mark((function t(e){var r,n,o,i;return QI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,N(eA(eA({},C),{},{loading:!0})),r={},I.updateOrders=r,t.next=6,O.setAccessToken(T).orders(null==e?void 0:e.id).save({status:e.newStatus},{cancelToken:r});case 6:n=t.sent,o=n.content,N({loading:!1,error:o.error?o.result:null}),o.error||(i=E.orders.filter((function(t){return(null==t?void 0:t.id)!==(null==e?void 0:e.id)})),j(eA(eA({},E),{},{orders:i}))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),N({loading:!1,error:[t.t0.message]});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),R=function(){var t=oA(QI().mark((function t(e){var r,o,i,a,u,p,w,x,E;return QI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,o=[],i=[],r=d?{query:{orderBy:("desc"===f?"-":"")+l}}:{query:{orderBy:("desc"===f?"-":"")+l,page:e,page_size:h.pageSize}},c&&i.push({attribute:"id",value:c}),0===Object.keys(y).length?s&&i.push({attribute:"status",value:s}):y.statuses.length>0?(a=y.statuses.every((function(t){return-1!==s.indexOf(t)})),u=s.every((function(t){return-1!==y.statuses.indexOf(t)})),a&&i.push({attribute:"status",value:y.statuses}),u&&s&&i.push({attribute:"status",value:s})):s&&i.push({attribute:"status",value:s}),v&&(p=[],m&&p.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(v,"%"))}}),g&&p.push({attribute:"customer",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(v,"%"))}}]}),b&&p.push({attribute:"customer",conditions:[{attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(v,"%"))}}]}),i.push({conector:"OR",conditions:p})),Object.keys(y).length&&(w=[],null!==y.deliveryFromDatetime&&w.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(y.deliveryFromDatetime)}}),null!==y.deliveryEndDatetime&&w.push({attribute:"delivery_datetime",value:{condition:"<=",value:y.deliveryEndDatetime}}),0!==y.businessIds.length&&w.push({attribute:"business_id",value:y.businessIds}),0!==y.driverIds.length&&w.push({attribute:"driver_id",value:y.driverIds}),0!==y.deliveryTypes.length&&w.push({attribute:"delivery_type",value:y.deliveryTypes}),0!==y.paymethodIds.length&&w.push({attribute:"paymethod_id",value:y.paymethodIds}),w.length&&i.push({conector:"AND",conditions:w})),i.length&&(o={conditions:i,conector:"AND"}),x={},I.orders=x,r.cancelToken=x,E=n?d?O.setAccessToken(T).orders().asDashboard().select(n).where(o):O.setAccessToken(T).orders().select(n).where(o):d?O.setAccessToken(T).orders().asDashboard().where(o):O.setAccessToken(T).orders().where(o),t.next=15,E.get(r);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(t){var e=!0;return void 0!==y.businessIds&&y.businessIds.length>0&&(y.businessIds.includes(t.business_id)||(e=!1)),void 0!==y.driverIds&&y.driverIds.length>0&&(y.driverIds.includes(t.driver_id)||(e=!1)),void 0!==y.deliveryTypes&&y.deliveryTypes.length>0&&(y.deliveryTypes.includes(t.delivery_type)||(e=!1)),void 0!==y.paymethodIds&&y.paymethodIds.length>0&&(y.paymethodIds.includes(t.paymethod_id)||(e=!1)),void 0!==y.statuses&&y.statuses.length>0&&(y.statuses.includes(parseInt(t.status))||(e=!1)),e},Y=function(){var t=oA(QI().mark((function t(){var e;return QI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(P.token){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,j(eA(eA({},E),{},{loading:!0})),t.next=6,R(L.currentPage+1);case 6:e=t.sent,j({loading:!1,orders:e.content.error?[]:e.content.result,error:e.content.error?e.content.result:null}),e.content.error||_({currentPage:e.content.pagination.current_page,pageSize:e.content.pagination.page_size,totalPages:e.content.pagination.total_pages,total:e.content.pagination.total,from:e.content.pagination.from,to:e.content.pagination.to}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),"Cancel"!==t.t0.constructor.name&&j(eA(eA({},E),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){if(null!==w&&0!==E.orders.length){var t=E.orders.filter((function(t){return(null==t?void 0:t.id)===w&&(t.unread_count=0,t.unread_general_count=0,t.unread_direct_count=0),!0}));j(eA(eA({},E),{},{orders:t}))}}),[w]),Object(o.useEffect)((function(){if(!E.loading){var t=U(l,E.orders);j(eA(eA({},E),{},{orders:t}))}}),[l,E.orders]),Object(o.useEffect)((function(){if(null!==u){var t=E.orders.filter((function(t){return(null==t?void 0:t.id)!==u}));j(eA(eA({},E),{},{orders:t}))}}),[u]),Object(o.useEffect)((function(){null!==v&&Y()}),[v]),Object(o.useEffect)((function(){if(a)j(eA(eA({},E),{},{orders:a}));else{var t=!1,e=!1;if(Object.keys(y).length>0&&(t=y.statuses.every((function(t){return-1!==s.indexOf(t)})),e=s.every((function(t){return-1!==y.statuses.indexOf(t)})),!t&&!e))return void j({loading:!1,orders:[],error:null});Y()}return function(){I.orders&&I.orders.cancel()}}),[P,y,a]),Object(o.useEffect)((function(){if(!E.loading){var t=function(t){var e=[];if(E.orders.find((function(e){return(null==e?void 0:e.id)===(null==t?void 0:t.id)}))){e=E.orders.filter((function(e){var r=!0;return(null==e?void 0:e.id)===(null==t?void 0:t.id)&&(delete t.total,delete t.subtotal,Object.assign(e,t),(r=(0===s.length||s.includes(parseInt(e.status)))&&M(t))||(L.total--,_(eA({},L)))),r}));var r=U(l,e);j(eA(eA({},E),{},{orders:r}))}else{if(M(t))if(s.includes(parseInt(t.status))){e=[].concat(XI(E.orders),[t]);var n=U(l,e);L.total++,_(eA({},L)),j(eA(eA({},E),{},{orders:n}))}}},e=function(t){F(null==t?void 0:t.id);var e=eA(eA({},t),{},{status:0}),r=[];if(s.includes(0)&&M(t)){r=[e].concat(XI(E.orders));var n=U(l,r);L.total++,_(eA({},L)),j(eA(eA({},E),{},{orders:n}))}},r=function(t){if(0!==E.orders.length&&E.orders.find((function(e){var r;return(null==e?void 0:e.id)===(null===(r=t.order)||void 0===r?void 0:r.id)}))){var e=E.orders.filter((function(e){var r;return(null==e?void 0:e.id)===(null===(r=t.order)||void 0===r?void 0:r.id)&&e.last_message_at!==t.created_at&&(1===t.type?(e.last_general_message_at=t.created_at,0!==t.author.level&&(e.unread_general_count=e.unread_general_count+1)):(e.last_direct_message_at=t.created_at,0!==t.author.level&&(e.unread_direct_count=e.unread_direct_count+1)),e.last_message_at=t.created_at,0!==t.author.level&&(e.unread_count=e.unread_count+1)),!0})),r=U(l,e);j(eA(eA({},E),{},{orders:r}))}};return k.on("update_order",t),k.on("orders_register",e),k.on("message",r),function(){k.off("update_order",t),k.off("orders_register",e),k.off("message",r)}}}),[E.orders,L,l,k]),Object(o.useEffect)((function(){if(P.user){var t;if(d)k.join("messages_orders"),k.join("orders");else k.join("orders_".concat(null==P||null===(t=P.user)||void 0===t?void 0:t.id));return function(){var t;d?(k.leave("messages_orders"),k.leave("orders")):k.leave("orders_".concat(null==P||null===(t=P.user)||void 0===t?void 0:t.id))}}}),[k,P]);var z=function(){var t=oA(QI().mark((function t(){var e;return QI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j(eA(eA({},E),{},{loading:!0})),t.prev=1,t.next=4,R(L.currentPage+1);case 4:e=t.sent,j({loading:!1,orders:e.content.error?E.orders:E.orders.concat(e.content.result),error:e.content.error?e.content.result:null}),e.content.error||_({currentPage:e.content.pagination.current_page,pageSize:e.content.pagination.page_size,totalPages:e.content.pagination.total_pages,total:e.content.pagination.total,from:e.content.pagination.from,to:e.content.pagination.to}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),"Cancel"!==t.t0.constructor.name&&j(eA(eA({},E),{},{loading:!1,error:[t.t0.message]}));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}(),$=function(){var t=oA(QI().mark((function t(e){var r;return QI().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j(eA(eA({},E),{},{loading:!0})),t.prev=1,t.next=4,R(e);case 4:r=t.sent,j({loading:!1,orders:r.content.error?[]:r.content.result,error:r.content.error?r.content.result:null}),r.content.error||_({currentPage:r.content.pagination.current_page,pageSize:r.content.pagination.page_size,totalPages:r.content.pagination.total_pages,total:r.content.pagination.total,from:r.content.pagination.from,to:r.content.pagination.to}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),"Cancel"!==t.t0.constructor.name&&j(eA(eA({},E),{},{loading:!1,error:[t.t0.message]}));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,ZI({},t,{orderList:E,pagination:L,registerOrderId:G,loadMoreOrders:z,goToPage:$,handleUpdateOrderStatus:B,handleResetNotification:function(){F(null)}})))};function sA(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return lA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lA(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lA(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}uA.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),onOrderClick:c.a.func,useDefualtSessionManager:c.a.bool,orders:c.a.arrayOf(a.object),orderIds:c.a.arrayOf(a.number),orderIdForUnreadCountUpdate:c.a.number,orderStatus:c.a.arrayOf(a.number),orderBy:c.a.string,orderDirection:c.a.oneOf(["asc","desc"]),paginationSettings:c.a.exact({initialPage:c.a.number,pageSize:c.a.number,controlType:c.a.oneOf(["infinity","pages"])}),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},uA.defaultProps={orderBy:"id",orderDirection:"desc",paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fA=function(t){var e=t.UIComponent,r=rn(),n=sA(hr(),1)[0],a=n.user,c=n.loading,u=sA(un(),1)[0];return Object(o.useEffect)((function(){if(a){var t=function(t){u.emit("order_added",t)};return 0===a.level?r.join("orders"):r.join("orders_".concat(null==a?void 0:a.id)),r.on("orders_register",t),function(){r.off("orders_register",t)}}}),[r,c,a]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,t))};function pA(t){return pA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pA(t)}function hA(){return hA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hA.apply(this,arguments)}function dA(){dA=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==pA(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function yA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vA(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yA(Object(r),!0).forEach((function(e){mA(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yA(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gA(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function bA(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){gA(i,n,o,a,c,"next",t)}function c(t){gA(i,n,o,a,c,"throw",t)}a(void 0)}))}}function wA(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return OA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OA(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OA(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}fA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xA=function(t){var e=t.UIComponent,r=t.appId,n=wA(er(),1)[0],a=wA(hr(),1)[0].token,c=wA(br(),2)[1].showToast,u=wA(Ir(),2)[1],s=wA(Object(o.useState)({}),2),l=s[0],f=s[1],p=wA(Object(o.useState)({}),2),h=p[0],d=p[1],y=wA(Object(o.useState)({loading:!0,themes:[],error:null,siteId:null}),2),v=y[0],m=y[1],g=wA(Object(o.useState)({loading:!0,themes:[],error:null}),2),b=g[0],w=g[1],O=function(){var t=bA(dA().mark((function t(){var e,o,i,c,u,s;return dA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(vA(vA({},v),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,fetch("".concat(n.root,"/sites"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:if(i=t.sent,c=i.error,u=i.result,c){t.next=20;break}if(!(s=u.find((function(t){return t.code===r})))){t.next=18;break}return t.next=16,E(s.id);case 16:t.next=20;break;case 18:return t.next=20,x();case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),m(vA(vA({},v),{},{loading:!1,error:[t.t0.message]}));case 25:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=bA(dA().mark((function t(){var e,o,i,c,u,s;return dA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={code:r,name:"Ordering.co"},o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(e)},t.next=5,fetch("".concat(n.root,"/sites"),o);case 5:return i=t.sent,t.next=8,i.json();case 8:if(c=t.sent,u=c.error,s=c.result,u){t.next=16;break}return t.next=14,E(s.id);case 14:t.next=17;break;case 16:m(vA(vA({},v),{},{loading:!1,themes:[],error:s}));case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),m(vA(vA({},v),{},{loading:!1,result:[t.t0.message]}));case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=bA(dA().mark((function t(e){var r,o,i,c,u;return dA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=4,fetch("".concat(n.root,"/sites/").concat(e,"/themes"),r);case 4:return o=t.sent,t.next=7,o.json();case 7:i=t.sent,c=i.error,u=i.result,m({loading:!1,themes:c?[]:u,error:c?u:null,siteId:e}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(vA(vA({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=bA(dA().mark((function t(e,r,o){var i,s,l,f,p;return dA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({theme_id:r,values:JSON.stringify(e)})},t.next=4,fetch("".concat(n.root,"/sites/").concat(o,"/themes"),i);case 4:return s=t.sent,t.next=7,s.json();case 7:l=t.sent,f=l.error,p=l.result,f?c(vr.Error,p):(c(vr.Success,u("THEME_ADDED","Theme added")),m(vA(vA({},v),{},{themes:[p]}))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),c(vr.Error,t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r,n){return t.apply(this,arguments)}}(),S=function(){var t=bA(dA().mark((function t(){var e,r,o,i,c;return dA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w(vA(vA({},b),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,fetch("".concat(n.root,"/themes"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:o=t.sent,i=o.error,c=o.result,w({loading:!1,themes:i?[]:c,error:i?c:null}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),w(vA(vA({},b),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=bA(dA().mark((function t(e){var r,o,i,s,f,p,d,y,m,g,b,w;return dA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),s=null===(r=v.themes[0])||void 0===r?void 0:r.theme_id,f=null===(o=v.themes[0])||void 0===o?void 0:o.site_id,p=vA(vA({},v.themes[0].values),{},{my_products:vA(vA({},null===(i=v.themes[0].values)||void 0===i?void 0:i.my_products),{},{components:vA({},l)})}),d=e?JSON.parse(JSON.stringify(h)):JSON.parse(JSON.stringify(p)),y={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({values:JSON.stringify(d)})},t.next=9,fetch("".concat(n.root,"/sites/").concat(f,"/themes/").concat(s),y);case 9:return m=t.sent,t.next=12,m.json();case 12:g=t.sent,b=g.error,w=g.result,b?c(vr.Error,w):c(vr.Success,u("THEME_UPDATED","Theme updated")),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),c(vr.Error,t.t0.message);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){r&&(S(),O())}),[r]),Object(o.useEffect)((function(){var t,e;if(null!=v&&v.siteId&&null!==(t=b.themes)&&void 0!==t&&t.length&&(null==v||null===(e=v.themes)||void 0===e||!e.length)){var r,o,i,a,c,u,s=JSON.parse(JSON.stringify(null===(r=b.themes[0])||void 0===r?void 0:r.values_default));null!=s&&null!==(o=s.my_products)&&void 0!==o&&null!==(i=o.components)&&void 0!==i&&null!==(a=i.website_settings)&&void 0!==a&&null!==(c=a.components)&&void 0!==c&&c.values&&(s.my_products.components.website_settings.components.values.default_domain="https://".concat(n.project,".tryordering.com")),j(s,null===(u=b.themes[0])||void 0===u?void 0:u.id,null==v?void 0:v.siteId)}}),[JSON.stringify(b.themes),null==v?void 0:v.siteId]),Object(o.useEffect)((function(){var t,e,r,n,o;if(null!==(t=v.themes[0])&&void 0!==t&&t.values){d(JSON.parse(JSON.stringify(null===(e=v.themes[0])||void 0===e?void 0:e.values)));var i=null===(r=v.themes[0])||void 0===r||null===(n=r.values)||void 0===n||null===(o=n.my_products)||void 0===o?void 0:o.components;i&&f(JSON.parse(JSON.stringify(i)))}}),[null==v?void 0:v.themes]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,hA({},t,{themeValues:l,advancedValues:h,setAdvancedValues:d,orderingTheme:v,setThemeValues:f,handleUpdateSiteTheme:L,themesList:b})))};function EA(){return EA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EA.apply(this,arguments)}function jA(t){return function(t){if(Array.isArray(t))return TA(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||kA(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function LA(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?SA(Object(r),!0).forEach((function(e){_A(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SA(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _A(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PA(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||kA(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kA(t,e){if(t){if("string"==typeof t)return TA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?TA(t,e):void 0}}function TA(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}xA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var IA=function(t){var e=t.UIComponent,r=t.driverGroupList,n=PA(Object(o.useState)({orderId:null,groupTypes:[],dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],driverIds:[],driverGroupIds:[],cityIds:[],statuses:[],deliveryTypes:[],paymethodIds:[],countryCode:[],currency:[]}),2),a=n[0],c=n[1];return Object(o.useEffect)((function(){var t=[];if(a.groupTypes.length>0){var e,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=kA(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(a.groupTypes);try{var o=function(){var n=e.value,o=r.groups.find((function(t){return t.id===n}));o&&(t=[].concat(jA(t),jA(null==o?void 0:o.drivers)))};for(n.s();!(e=n.n()).done;)o()}catch(t){n.e(t)}finally{n.f()}}var i=t.filter((function(t,e,r){return r.indexOf(t)===e}));c(LA(LA({},a),{},{driverGroupIds:i}))}),[a.groupTypes]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,EA({},t,{filterValues:a,handleChangeOrderId:function(t){var e=t.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");c(LA(LA({},a),{},{orderId:e}))},handleChangeGroup:function(t){var e=jA(a.groupTypes);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),c(LA(LA({},a),{},{groupTypes:e}))},handleChangeDateType:function(t){var e=ln()();switch(t){case"default":c(LA(LA({},a),{},{dateType:"default",deliveryFromDatetime:null,deliveryEndDatetime:null}));break;case"today":var r=e.format("YYYY-MM-DD"),n=ln()(r).format("YYYY-MM-DD HH:mm:ss");c(LA(LA({},a),{},{dateType:"today",deliveryFromDatetime:n}));break;case"yesterday":var o=e.subtract("1","day").format("YYYY-MM-DD"),i=ln()(o).format("YYYY-MM-DD HH:mm:ss");c(LA(LA({},a),{},{dateType:"yesterday",deliveryFromDatetime:i}));break;case"last7":var u=e.subtract("7","day").format("YYYY-MM-DD"),s=ln()(u).format("YYYY-MM-DD HH:mm:ss");c(LA(LA({},a),{},{dateType:"last7",deliveryFromDatetime:s}));break;case"last30":var l=e.subtract("30","day").format("YYYY-MM-DD"),f=ln()(l).format("YYYY-MM-DD HH:mm:ss");c(LA(LA({},a),{},{dateType:"last30",deliveryFromDatetime:f}));break;case"term":c(LA(LA({},a),{},{dateType:"term",deliveryFromDatetime:null,deliveryEndDatetime:null}))}},handleChangeFromDate:function(t){var e;e=null!==t?ln()(t).format("YYYY-MM-DD HH:mm:ss"):null,c(LA(LA({},a),{},{deliveryFromDatetime:e}))},handleChangeEndDate:function(t){var e;null!==t?e=ln()(t).format("YYYY-MM-DD HH:mm:ss"):t=null,c(LA(LA({},a),{},{deliveryEndDatetime:e}))},handleChangeBusinesses:function(t){var e=jA(a.businessIds);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),c(LA(LA({},a),{},{businessIds:e}))},handleChangeDriver:function(t){var e=jA(a.driverIds);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),c(LA(LA({},a),{},{driverIds:e}))},handleChangeCity:function(t){var e=jA(a.cityIds);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),c(LA(LA({},a),{},{cityIds:e}))},handleChangeOrderStatus:function(t){var e=jA(a.statuses);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),c(LA(LA({},a),{},{statuses:e}))},handleChangeDeliveryType:function(t){var e=jA(a.deliveryTypes);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),c(LA(LA({},a),{},{deliveryTypes:e}))},handleChangePaymethodType:function(t){var e=jA(a.paymethodIds);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),c(LA(LA({},a),{},{paymethodIds:e}))},handleResetFilterValues:function(){c({orderId:null,groupTypes:[],deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],driverIds:[],cityIds:[],statuses:[],deliveryTypes:[],paymethodIds:[],countryCode:[],currency:[]})},handleChangeCountryCode:function(t){var e=jA(a.countryCode);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),c(LA(LA({},a),{},{countryCode:e}))},handleChangeCurrency:function(t){var e=jA(a.currency);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),c(LA(LA({},a),{},{currency:e}))}})))};function AA(t){return AA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AA(t)}function CA(){return CA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CA.apply(this,arguments)}function NA(){NA=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==AA(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function DA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function GA(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?DA(Object(r),!0).forEach((function(e){FA(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DA(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function FA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UA(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function BA(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){UA(i,n,o,a,c,"next",t)}function c(t){UA(i,n,o,a,c,"throw",t)}a(void 0)}))}}function RA(t){return function(t){if(Array.isArray(t))return zA(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||YA(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MA(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||YA(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YA(t,e){if(t){if("string"==typeof t)return zA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zA(t,e):void 0}}function zA(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}IA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},IA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $A=function(t){var e=t.UIComponent,r=t.statusGroup,n=t.driversPropsToFetch,a=t.driverId,c=t.customerId,u=t.businessId,s=MA(er(),1)[0],l=rn(),f=MA(hr(),1)[0],p=f.user,h=f.token,d=f.loading,y=MA(jn(),1)[0],v=MA(Ir(),2)[1],m={},g={pending:[0,13],inProgress:[7,8,4,9,3,14,18,19,20,21,22,23],completed:[1,11,15],cancelled:[2,5,6,10,12,16,17]},b=MA(Object(o.useState)(null),2),w=b[0],O=b[1],x=MA(Object(o.useState)(r||"pending"),2),E=x[0],j=x[1],S=MA(Object(o.useState)({}),2),L=S[0],_=S[1],P=MA(Object(o.useState)(null),2),k=P[0],T=P[1],I=MA(Object(o.useState)(!1),2),A=I[0],C=I[1],N=MA(Object(o.useState)(!1),2),D=N[0],G=N[1],F=MA(Object(o.useState)({loading:!1,error:null}),2),U=F[0],B=F[1],R=MA(Object(o.useState)(null),2),M=R[0],Y=R[1],z=MA(Object(o.useState)({result:null,loading:!1,error:!1}),2),$=z[0],q=z[1],J={slaBar:{visable:!1,title:"",className:"",draggable:!1,colSpan:1,order:-2},orderNumber:{visable:!0,title:"",className:"",draggable:!1,colSpan:1,order:-1},status:{visable:!0,title:v("STATUS","Status"),className:"statusInfo",draggable:!0,colSpan:1,order:1},dateTime:{visable:!0,title:"",className:"",draggable:!1,colSpan:1,order:0},business:{visable:!0,title:v("BUSINESS","Business"),className:"businessInfo",draggable:!0,colSpan:1,order:2},customer:{visable:!0,title:v("CUSTOMER","Customer"),className:"customerInfo",draggable:!0,colSpan:1,order:3},driver:{visable:!0,title:v("DRIVER","Driver"),className:"driverInfo",draggable:!0,colSpan:1,order:4},advanced:{visable:!0,title:v("ADVANCED_LOGISTICS","Advanced logistics"),className:"advanced",draggable:!0,colSpan:3,order:5},timer:{visable:!1,title:v("SLA_TIMER","SLA’s timer"),className:"timer",draggable:!0,colSpan:1,order:6},eta:{visable:!0,title:v("ETA","ETA"),className:"eta",draggable:!0,colSpan:1,order:7},total:{visable:!0,title:"",className:"",draggable:!1,colSpan:1,order:10}},V=MA(Object(o.useState)(J),2),H=V[0],W=V[1],K=MA(Object(o.useState)({groups:[],loading:!1,error:null}),2),Z=K[0],X=K[1],Q=MA(Object(o.useState)({drivers:[],loading:!0,error:null}),2),tt=Q[0],et=Q[1],rt=MA(Object(o.useState)({paymethods:[],loading:!0,error:null}),2),nt=rt[0],ot=rt[1],it=MA(Object(o.useState)({businesses:[],loading:!0,error:null}),2),at=it[0],ct=it[1],ut=MA(Object(o.useState)([]),2),st=ut[0],lt=ut[1],ft=MA(Object(o.useState)([]),2),pt=ft[0],ht=ft[1],dt=MA(Object(o.useState)({pending:g.pending,inProgress:g.inProgress,completed:g.completed,cancelled:g.cancelled,all:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]}),2),yt=dt[0],vt=dt[1],mt=function(){var t=BA(NA().mark((function t(e){var r,n,o,i,a;return NA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,B(GA(GA({},U),{},{loading:!0})),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify({status:k})},t.next=5,fetch("".concat(s.root,"/orders/").concat(e),r);case 5:return n=t.sent,t.next=8,n.json();case 8:o=t.sent,i=o.result,parseInt(i.status)===k&&((a=RA(pt)).shift(),0===a.length&&C(!1),ht(a)),B(GA(GA({},U),{},{loading:!1})),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),B({loading:!1,error:[t.t0.message]}),C(!1);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),gt=function(){var t=BA(NA().mark((function t(e){var r,n,o,i;return NA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,B(GA(GA({},U),{},{loading:!0})),r={},m.deleteOrder=r,t.next=6,s.setAccessToken(h).orders(e).delete({cancelToken:r});case 6:n=t.sent,(o=n.content).error||(Y(e),(i=RA(pt)).shift(),0===i.length&&G(!1),ht(i)),B({loading:!1,error:o.error?o.result:null}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),B({loading:!1,error:[t.t0.message]}),G(!1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),bt=function(){var t=BA(NA().mark((function t(){var e,r,o;return NA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={},m.drivers=e,t.next=5,s.setAccessToken(h).users().select(n).where([{attribute:"level",value:[4]}]).get({cancelToken:e});case 5:r=t.sent,o=r.content.result,et(GA(GA({},tt),{},{loading:!1,drivers:o})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),et(GA(GA({},tt),{},{loading:!1,error:t.t0.message}));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),wt=function(){var t=BA(NA().mark((function t(){var e,r,n;return NA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,B(GA(GA({},U),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},t.next=5,fetch("".concat(s.root,"/controls/orders"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(n=t.sent).error?B({loading:!1,error:null==n?void 0:n.result}):(lt(n.result.cities),X(GA(GA({},Z),{},{loading:!1,groups:n.result.driver_groups})),ot(GA(GA({},nt),{},{loading:!1,paymethods:n.result.paymethods})),ct(GA(GA({},at),{},{loading:!1,businesses:n.result.businesses})),B(GA(GA({},U),{},{loading:!1}))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),B({loading:!1,error:[t.t0.message]});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){if(!d){var t=function(t){var e=[];e=tt.drivers.find((function(e){return e.id===t.id}))?tt.drivers.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0})):[].concat(RA(tt.drivers),[t]),et(GA(GA({},tt),{},{drivers:e}))},e=function(t){var e;e=tt.drivers.filter((function(e){if(e.id===t.driver_id)if("string"==typeof t.location){var r=t.location.replaceAll("\\",""),n=JSON.parse(r);e.location=n}else e.location=t.location;return!0})),et(GA(GA({},tt),{},{drivers:e}))};return l.on("drivers_update",t),l.on("tracking_driver",e),function(){l.off("drivers_update",t),l.off("tracking_driver",e)}}}),[l,d,tt.drivers]);var Ot=function(){var t=BA(NA().mark((function t(){var e,r,n,o,i,l,f,p,d;return NA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],r=[],Object.keys(L).length>0&&(n=[],(null==L?void 0:L.statuses.length)>0&&n.push({attribute:"status",value:null==L?void 0:L.statuses}),null!=L&&L.orderId&&n.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(null==L?void 0:L.orderId,"%"))}}),null!==(null==L?void 0:L.deliveryFromDatetime)&&n.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(null==L?void 0:L.deliveryFromDatetime)}}),null!==(null==L?void 0:L.deliveryEndDatetime)&&n.push({attribute:"delivery_datetime",value:{condition:"<=",value:null==L?void 0:L.deliveryEndDatetime}}),0!==(null==L?void 0:L.businessIds.length)&&n.push({attribute:"business_id",value:null==L?void 0:L.businessIds}),0!==(null==L?void 0:L.countryCode.length)&&n.push({attribute:"country_code",value:null==L?void 0:L.countryCode}),0!==(null==L?void 0:L.currency.length)&&n.push({attribute:"currency",value:null==L?void 0:L.currency}),(null==L?void 0:L.driverIds.length)>0&&n.push({attribute:"driver_id",value:null==L?void 0:L.driverIds}),0!==(null==L?void 0:L.deliveryTypes.length)&&n.push({attribute:"delivery_type",value:null==L?void 0:L.deliveryTypes}),0!==(null==L?void 0:L.driverGroupIds.length)&&n.push({attribute:"driver_id",value:null==L?void 0:L.driverGroupIds}),0!==(null==L?void 0:L.paymethodIds.length)&&n.push({attribute:"paymethod_id",value:null==L?void 0:L.paymethodIds}),n.length&&r.push({conector:"AND",conditions:n})),o=[],a&&o.push({attribute:"driver_id",value:a}),c&&o.push({attribute:"customer_id",value:c}),u&&o.push({attribute:"business_id",value:u}),o.length&&r.push({conector:"AND",conditions:o}),w&&((i=[]).push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}),i.push({attribute:"customer",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}]}),i.push({attribute:"customer",conditions:[{attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}]}),i.push({attribute:"business",conditions:[{attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}]}),r.push({conector:"OR",conditions:i})),r.length&&(e={conditions:r,conector:"AND"}),t.prev=10,q(GA(GA({},$),{},{loading:!0})),l={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},t.next=15,fetch("".concat(s.root,"/orders/dashboard?where=").concat(JSON.stringify(e)),l);case 15:return f=t.sent,t.next=18,f.json();case 18:null!=(p=t.sent)&&p.error?q(GA(GA({},$),{},{loading:!1,error:!0})):(d=Object.keys(g).reduce((function(t,e,r){var n,o=null==p?void 0:p.result.filter((function(t){return g[e].indexOf(null==t?void 0:t.status)>=0}));if(1===r){var i,a,c,u=null==p?void 0:p.result.filter((function(e){return g[t].indexOf(null==e?void 0:e.status)>=0}));return FA(c={},t,u.length>1?u.reduce((function(t,e){return Number((null==t?void 0:t.quantity)||t||0)+Number(null==e?void 0:e.quantity)})):(null===(i=u[0])||void 0===i?void 0:i.quantity)||0),FA(c,e,o.length>1?o.reduce((function(t,e){return Number((null==t?void 0:t.quantity)||t||0)+Number(null==e?void 0:e.quantity)})):(null===(a=o[0])||void 0===a?void 0:a.quantity)||0),c}return GA(GA({},t),{},FA({},e,o.length>1?o.reduce((function(t,e){return Number((null==t?void 0:t.quantity)||t||0)+Number(null==e?void 0:e.quantity)})):(null===(n=o[0])||void 0===n?void 0:n.quantity)||0))})),q(GA(GA({},$),{},{loading:!1,error:!1,result:d}))),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(10),q(GA(GA({},$),{},{loading:!1,error:[t.t0.message]}));case 25:case"end":return t.stop()}}),t,null,[[10,22]])})));return function(){return t.apply(this,arguments)}}(),xt=function(){Ot()};return Object(o.useEffect)((function(){return l.on("update_order",xt),l.on("orders_register",xt),function(){l.off("update_order",xt),l.off("orders_register",xt)}}),[l,L,w,$]),Object(o.useEffect)((function(){p&&(l.join("drivers"),0===p.level?(l.join("orders"),l.join("messages_orders")):(l.join("orders_".concat(null==p?void 0:p.id)),l.join("messages_orders_".concat(null==p?void 0:p.id))))}),[l,d,p]),Object(o.useEffect)((function(){A&&0!==pt.length&&mt(pt[0])}),[pt,A]),Object(o.useEffect)((function(){D&&0!==pt.length&&gt(pt[0])}),[pt,D]),Object(o.useEffect)((function(){if(!d)return 0!==(null==p?void 0:p.level)&&2!==(null==p?void 0:p.level)&&5!==(null==p?void 0:p.level)||bt(),wt(),function(){m.drivers&&m.drivers.cancel()}}),[p,d]),Object(o.useEffect)((function(){Ot()}),[L,w,a,c,u]),Object(o.useEffect)((function(){if(!(!p.id||null!=y&&y.loading||H)){var t=function(){var t=BA(NA().mark((function t(){var e,r,n,o,i,a,c,u,l,f,h,d,v,m;return NA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.users(p.id).select(["settings"]).get();case 3:if(a=t.sent,c=a.content,u=c.error,l=c.result,u||null===(e=l.settings)||void 0===e||!e.orderColumns){t.next=8;break}return W(null===(f=l.settings)||void 0===f?void 0:f.orderColumns),t.abrupt("return");case 8:W(GA(GA({},J),{},{slaBar:GA(GA({},null==J?void 0:J.slaBar),{},{visable:"1"===(null==y||null===(r=y.configs)||void 0===r||null===(n=r.order_deadlines_enabled)||void 0===n?void 0:n.value)}),timer:GA(GA({},null==J?void 0:J.timer),{},{visable:"1"===(null==y||null===(o=y.configs)||void 0===o||null===(i=o.order_deadlines_enabled)||void 0===i?void 0:i.value)})})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),W(GA(GA({},J),{},{slaBar:GA(GA({},null==J?void 0:J.slaBar),{},{visable:"1"===(null==y||null===(h=y.configs)||void 0===h||null===(d=h.order_deadlines_enabled)||void 0===d?void 0:d.value)}),timer:GA(GA({},null==J?void 0:J.timer),{},{visable:"1"===(null==y||null===(v=y.configs)||void 0===v||null===(m=v.order_deadlines_enabled)||void 0===m?void 0:m.value)})}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();t()}}),[p,y]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,CA({},t,{searchValue:w,driverGroupList:Z,driversList:tt,paymethodsList:nt,businessesList:at,citiesList:st,ordersStatusGroup:E,filterValues:L,multiOrderUpdateStatus:k,selectedOrderIds:pt,deletedOrderId:M,startMulitOrderStatusChange:A,startMulitOrderDelete:D,selectedSubOrderStatus:yt,handleSelectedSubOrderStatus:vt,handleSelectedOrderIds:function(t){var e=RA(pt);e.includes(t)?e=e.filter((function(e){return e!==t})):e.push(t),ht(e)},handleRemoveSelectedOrderId:function(t){var e=RA(pt);e=e.filter((function(e){return e!==t})),ht(e)},handleChangeSearch:function(t){O(t)},handleChangeFilterValues:function(t){_(t)},handleOrdersStatusGroupFilter:function(t){t!==E&&(j(t),ht([]))},handleChangeMultiOrdersStatus:function(t){T(t),C(!0)},handleDeleteMultiOrders:function(){G(!0)},setSelectedOrderIds:ht,numberOfOrdersByStatus:$,allowColumns:H,setAllowColumns:W})))};function qA(t){return qA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qA(t)}function JA(){return JA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JA.apply(this,arguments)}function VA(){VA=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==qA(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function HA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function WA(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?HA(Object(r),!0).forEach((function(e){KA(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HA(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function KA(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZA(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function XA(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=tC(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function QA(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||tC(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tC(t,e){if(t){if("string"==typeof t)return eC(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eC(t,e):void 0}}function eC(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}$A.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$A.defaultProps={driversPropsToFetch:["id","name","lastname","assigned_orders_count","available","phone","cellphone","location","photo","qualification","last_order_assigned_at"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rC=function(t){var e=t.UIComponent,r=QA(er(),1)[0],n={},a=rn(),c=QA(hr(),1)[0],u=c.token,s=c.loading,l=QA(Object(o.useState)({loading:!0,overview:{},error:null}),2),f=l[0],p=l[1],h=function(t){var e,r=0,n=0,o=0,i=0,a=0,c=XA(t);try{for(c.s();!(e=c.n()).done;){var u=e.value;r+=u.quantity,0===u.status&&(n+=u.quantity),3!==u.status&&4!==u.status&&7!==u.status&&8!==u.status&&9!==u.status||(o+=u.quantity),1!==u.status&&11!==u.status||(i+=u.quantity),2!==u.status&&5!==u.status&&6!==u.status&&10!==u.status&&12!==u.status||(a+=u.quantity)}}catch(t){c.e(t)}finally{c.f()}return{total:r,pending:n,inProgress:o,completed:i,cancelled:a}},d=function(){var t,e=(t=VA().mark((function t(){var e,o,i,a;return VA().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(WA(WA({},f),{},{loading:!0})),e={},n.ordersOverview=e,t.next=6,r.setAccessToken(u).orders().summary({cancelToken:e});case 6:o=t.sent,i=o.content.result,a=h(i),p(WA(WA({},f),{},{overview:a,loading:!1})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),p(WA(WA({},f),{},{loading:!1,error:t.t0}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ZA(i,n,o,a,c,"next",t)}function c(t){ZA(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),y=function(t){if(Array.isArray(t)){var e,r=XA(t);try{for(r.s();!(e=r.n()).done;){if("status"===e.value.attribute)return!0}}catch(t){r.e(t)}finally{r.f()}}else{if(null===t)return!1;if("status"===t.attribute)return!0}return!1};return Object(o.useEffect)((function(){if(!f.loading&&!s){var t=function(t){var e=t.history.filter((function(t){return y(t.data)}));if(0!==e.length){var r,n,o,i,a,c,u=e[e.length-1].data.filter((function(t){return y(t)}));r=u[0],n=[0],o=[3,4,7,8,9],i=[1,11],a=[2,5,6,10,12],c=WA({},f.overview),n.includes(r.old)?c.pending=c.pending-1:o.includes(r.old)?c.inProgress=c.inProgress-1:i.includes(r.old)?c.completed=c.completed-1:a.includes(r.old)&&(c.cancelled=c.cancelled-1),n.includes(r.new)?c.pending=c.pending+1:o.includes(r.new)?c.inProgress=c.inProgress+1:i.includes(r.new)?c.completed=c.completed+1:a.includes(r.new)&&(c.cancelled=c.cancelled+1),p(WA(WA({},f),{},{overview:c}))}},e=function(t){var e=WA({},f.overview);e.total+=1,e.pending+=1,p(WA(WA({},f),{},{overview:e}))};return a.join("orders"),a.on("update_order",t),a.on("orders_register",e),function(){a.leave("orders"),a.off("update_order",t),a.off("orders_register",e)}}}),[f.overview,a,s]),Object(o.useEffect)((function(){return d(),function(){n.ordersOverview&&n.ordersOverview.cancel()}}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,JA({},t,{ordersOverviewList:f})))};function nC(){return nC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nC.apply(this,arguments)}function oC(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return iC(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iC(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iC(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}rC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var aC=function(t){var e=t.UIComponent,r=oC(Rn(),2),n=r[0],a=r[1].changeType,c=oC(Object(o.useState)(null),2),u=c[0],s=c[1];return Object(o.useEffect)((function(){s(n.options.type)}),[n.options.type]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,nC({},t,{typeSelected:u||n.options.type,handleChangeOrderType:t.handleChangeOrderType||function(t){s(t),a(t)}})))};function cC(t){return cC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cC(t)}function uC(){return uC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uC.apply(this,arguments)}function sC(){sC=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==cC(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function lC(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function fC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pC(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fC(Object(r),!0).forEach((function(e){hC(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fC(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function hC(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dC(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return yC(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yC(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yC(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}aC.propTypes={UIComponent:c.a.elementType,orderTypes:c.a.arrayOf(a.object),handleChangeOrderType:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},aC.defaultProps={orderTypes:[1,2,3,4,5],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var vC=function(t){var e,r=t.isLoading,n=t.paymethods,a=t.businessId,c=t.onPaymentChange,u=t.UIComponent,s=dC(er(),1)[0],l=(null===(e=dC(Rn(),1)[0].carts["businessId:".concat(a)])||void 0===e?void 0:e.total)||0,f=dC(Object(o.useState)({paymethods:[],loading:!0,error:null}),2),p=f[0],h=f[1],d=dC(Object(o.useState)(null),2),y=d[0],v=d[1],m=dC(Object(o.useState)({}),2),g=m[0],b=m[1],w=function(t){return t&&t.filter((function(t){var e;return!["paypal_express","authorize"].includes(null==t||null===(e=t.paymethod)||void 0===e?void 0:e.gateway)})).map((function(t){return pC(pC({},null==t?void 0:t.paymethod),{},{sandbox:null==t?void 0:t.sandbox,credentials:null==t?void 0:t.data})}))},O=function(){var t,e=(t=sC().mark((function t(){var e,r,n,o;return sC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.businesses(a).get();case 3:e=t.sent,r=e.content,n=r.error,o=r.result,n||(p.paymethods=w(o.paymethods)),h(pC(pC({},p),{},{error:n?o:null,loading:!1,paymethods:n?[]:w(o.paymethods)})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),h(pC(pC({},p),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){lC(i,n,o,a,c,"next",t)}function c(t){lC(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),x=function(t){b(t),y?c&&c({paymethodId:y.id,gateway:y.gateway,paymethod:y,data:t}):c&&c(null)};return Object(o.useEffect)((function(){["card_delivery","cash","stripe_redirect"].includes(null==y?void 0:y.gateway)?c&&c({paymethodId:y.id,gateway:y.gateway,paymethod:y,data:{}}):null===y&&c&&c(null)}),[y]),Object(o.useEffect)((function(){r||(n?h(pC(pC({},p),{},{loading:!1,paymethods:w(n)})):a?O():h(pC(pC({},p),{},{loading:!1})))}),[r]),i.a.createElement(i.a.Fragment,null,u&&i.a.createElement(u,uC({},t,{orderTotal:l,paymethodsList:p,paymethodSelected:y,paymethodData:g,handlePaymethodClick:function(t){v(t),x({})},handlePaymethodDataChange:x})))};function mC(t){return mC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mC(t)}function gC(){return gC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gC.apply(this,arguments)}function bC(){bC=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==mC(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function wC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function OC(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wC(Object(r),!0).forEach((function(e){xC(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wC(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xC(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EC(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function jC(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){EC(i,n,o,a,c,"next",t)}function c(t){EC(i,n,o,a,c,"throw",t)}a(void 0)}))}}function SC(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return LC(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LC(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LC(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}vC.propTypes={UIComponent:c.a.elementType,paymethods:c.a.array,businessId:c.a.number,onPaymentChange:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var _C=function(t){var e=t.businessPaymethod,r=t.UIComponent,n=t.business,a=t.businessPaymethods,c=t.handleSuccessPaymethodUpdate,u=SC(br(),2)[1].showToast,s=SC(Ir(),2)[1],l=SC(er(),1)[0],f=SC(hr(),1)[0],p=f.user,h=f.token,d=SC(Object(o.useState)({url:null,loading:!0,error:null}),2),y=d[0],v=d[1],m=SC(Object(o.useState)({sandbox:null==e?void 0:e.sandbox,data:null==e?void 0:e.data,data_sandbox:null==e?void 0:e.data_sandbox}),2),g=m[0],b=m[1],w=SC(Object(o.useState)({loading:!1,error:null}),2),O=w[0],x=w[1],E=function(){var t=jC(bC().mark((function t(){var e,r,n,o,i;return bC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,x(OC(OC({},O),{},{loading:!1})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},t.next=5,fetch("".concat(l.root,"/users/").concat(null==p?void 0:p.id,"/keys"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(n=t.sent).error?x(OC(OC({},O),{},{loading:!1,error:n.result})):(i=null===(o=n.result[0])||void 0===o?void 0:o.key)?(j(i),x(OC(OC({},O),{},{loading:!1,error:null}))):x(OC(OC({},O),{},{loading:!1,error:s("NO_API_KEY_SQUARE","There is no Api Key for Square connection")})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),x(OC(OC({},O),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=jC(bC().mark((function t(e){var r,o,i,a,c;return bC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(OC(OC({},y),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({business_id:null==n?void 0:n.id,project_name:null==l?void 0:l.project,api_key:e})},"https://plugins-live.ordering.co/square/oauth/oauth",t.next=6,fetch("https://plugins-live.ordering.co/square/oauth/oauth",r);case 6:return o=t.sent,t.next=9,o.json();case 9:i=t.sent,a=i.status,c=i.result,"ok"===a?(v(OC(OC({},y),{},{loading:!1,url:null==c?void 0:c.data.url})),S(null==c?void 0:c.data.url)):v(OC(OC({},y),{},{loading:!1,error:c})),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),v(OC(OC({},y),{},{loading:!1,error:[t.t0.message]}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),S=function(t){var e=window.open(t,"_blank","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,clearcache=yes"),r=setInterval((function(){e.closed?clearInterval(r):e.postMessage("data",l.url)}),200),n=null;window.addEventListener("message",(function(t){-1!==t.origin.indexOf(".ordering.co")&&(clearInterval(r),n&&clearTimeout(n),n=setTimeout((function(){e.postMessage("close",l.url),t.data&&(b(t.data.paymethod_credentials),e.close())}),1e3))}))},L=function(){var t=jC(bC().mark((function t(e){var r,o,i,f;return bC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(vr.Info,s("LOADING","Loading")),x(OC(OC({},O),{},{loading:!0})),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify({sandbox:null==g?void 0:g.sandbox,data:JSON.stringify(null==g?void 0:g.data),data_sandbox:JSON.stringify(null==g?void 0:g.data_sandbox)})},t.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/paymethods/").concat(e),r);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error||(f=a.map((function(t){return t.id===e&&Object.assign(t,i.result),t})),c&&c(f),u(vr.Success,s("PAYMETHOD_SAVED","Payment method saved"))),x({loading:!1,error:i.error?i.result:null}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),x({error:[t.t0.message],loading:!1});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,gC({},t,{squareUrlState:y,squareData:g,actionState:O,handleConnectSquare:E,handleSavePaymethod:L,handleChangeDataInput:function(t){b(OC(OC({},g),{},{data:OC(OC({},null==g?void 0:g.data),{},xC({},t.target.name,t.target.value))}))},handleChangeSanboxDataInput:function(t){b(OC(OC({},g),{},{data_sandbox:OC(OC({},null==g?void 0:g.data_sandbox),{},xC({},t.target.name,t.target.value))}))},handleChangeSandbox:function(t){b(OC(OC({},g),{},{sandbox:t}))}})))};function PC(t){return PC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PC(t)}function kC(){return kC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kC.apply(this,arguments)}function TC(){TC=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==PC(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function IC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function AC(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?IC(Object(r),!0).forEach((function(e){CC(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function CC(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NC(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function DC(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){NC(i,n,o,a,c,"next",t)}function c(t){NC(i,n,o,a,c,"throw",t)}a(void 0)}))}}function GC(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return FC(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FC(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FC(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}_C.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_C.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var UC=function(t){var e=t.UIComponent,r=t.propsToFetch,n=GC(er(),1)[0],a=GC(hr(),1)[0].token,c=GC(br(),2)[1].showToast,u=GC(Ir(),2)[1],s=GC(Object(o.useState)({pages:[],loading:!1,error:null}),2),l=s[0],f=s[1],p=GC(Object(o.useState)(null),2),h=p[0],d=p[1],y=GC(Object(o.useState)({changes:{},loading:!1,error:null}),2),v=y[0],m=y[1],g=GC(Object(o.useState)({loading:!1,error:null}),2),b=g[0],w=g[1],O=function(){var t=DC(TC().mark((function t(){var e,o,i;return TC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(AC(AC({},l),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,fetch("".concat(n.root,"/pages?params=").concat(r.toString()),e);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error||f({pages:i.result,loading:!1}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),f(AC(AC({},l),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=DC(TC().mark((function t(){var e,r,o,i,s,f,p;return TC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in t.prev=0,e=AC({},v.changes),r={},e)""!==e[o]&&(r=AC(AC({},r),{},CC({},o,e[o])));if(0!==Object.keys(r).length){t.next=6;break}return t.abrupt("return");case 6:return c(vr.Info,u("LOADING","Loading")),m(AC(AC({},v),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(null==v?void 0:v.changes)},t.next=11,fetch("".concat(n.root,"/pages/").concat(h),i);case 11:return s=t.sent,t.next=14,s.json();case 14:(f=t.sent).error?m(AC(AC({},v),{},{result:{error:!0,result:f.result},loading:!1})):(p=l.pages.filter((function(t){var e,r,n,o;t.id===h&&(t.name=null!==(e=v.changes)&&void 0!==e&&e.name?null===(r=v.changes)||void 0===r?void 0:r.name:null==t?void 0:t.name,t.enabled=null!==(n=null===(o=v.changes)||void 0===o?void 0:o.enabled)&&void 0!==n?n:null==t?void 0:t.enabled);return t})),S(p),m(AC(AC({},v),{},{loading:!1,changes:{}})),c(vr.Success,u("PAGE_SAVED","Page saved"))),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),m(AC(AC({},v),{},{loading:!1,error:[t.t0.message]}));case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=DC(TC().mark((function t(e){var r,o,i;return TC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w(AC(AC({},b),{},{loading:!0})),c(vr.Info,u("LOADING","Loading")),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=6,fetch("".concat(n.root,"/pages/").concat(e),r);case 6:return o=t.sent,t.next=9,o.json();case 9:t.sent.error||(w(AC(AC({},b),{},{loading:!1})),i=l.pages.filter((function(t){return t.id!==e})),S(i),c(vr.Success,u("PAGE_DELETED","Page Deleted"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),j=null,S=function(t){f(AC(AC({},l),{},{pages:t}))};return Object(o.useEffect)((function(){v.loading||0===Object.keys(null==v?void 0:v.changes).length||x()}),[v]),Object(o.useEffect)((function(){O()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,kC({},t,{pagesListState:l,handleChangeState:function(t,e,r){d(t),"name"===e?(clearTimeout(j),j=setTimeout((function(){m(AC(AC({},v),{},{changes:CC({},e,r)}))}),1e3)):m(AC(AC({},v),{},{changes:CC({},e,r)}))},handleUpdatePageList:S,handleDeletePage:E})))};function BC(t){return BC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BC(t)}function RC(){return RC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RC.apply(this,arguments)}function MC(t){return function(t){if(Array.isArray(t))return KC(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||WC(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YC(){YC=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==BC(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function zC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zC(Object(r),!0).forEach((function(e){qC(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zC(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qC(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JC(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function VC(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){JC(i,n,o,a,c,"next",t)}function c(t){JC(i,n,o,a,c,"throw",t)}a(void 0)}))}}function HC(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||WC(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WC(t,e){if(t){if("string"==typeof t)return KC(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?KC(t,e):void 0}}function KC(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}UC.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},UC.defaultProps={propsToFetch:["name","enabled"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ZC=function(t){var e=t.UIComponent,r=t.pageId,n=t.pageList,a=t.handleSuccessUpdate,c=t.handleCancel,u=HC(er(),1)[0],s=HC(hr(),1)[0].token,l=HC(br(),2)[1].showToast,f=HC(Ir(),2)[1],p=HC(Object(o.useState)({page:{},loading:!1,error:null}),2),h=p[0],d=p[1],y=HC(Object(o.useState)({images:[],loading:!1,error:null}),2),v=y[0],m=y[1],g=HC(Object(o.useState)({loading:!1,change:{},error:null}),2),b=g[0],w=g[1],O=HC(Object(o.useState)({loading:!1,error:null}),2),x=O[0],E=O[1],j=HC(Object(o.useState)({loading:!1,changes:{},error:null}),2),S=j[0],L=j[1],_=HC(Object(o.useState)(null),2),P=_[0],k=_[1],T=HC(Object(o.useState)(null),2),I=T[0],A=T[1],C=function(){var t=VC(YC().mark((function t(){var e,n,o;return YC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d($C($C({},h),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},t.next=5,fetch("".concat(u.root,"/pages/").concat(r),e);case 5:return n=t.sent,t.next=8,n.json();case 8:(o=t.sent).error||d({page:o.result,loading:!1}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),d($C($C({},h),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=VC(YC().mark((function t(){var e,r,n;return YC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m($C($C({},v),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},t.next=5,fetch("".concat(u.root,"/files?where={%22type%22:1}"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(n=t.sent).error||m({images:n.result,loading:!1}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),m($C($C({},v),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=VC(YC().mark((function t(){var e,r,n,o,i;return YC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,f("LOADING","Loading")),w($C($C({},b),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(b.change)},t.next=6,fetch("".concat(u.root,"/files"),e);case 6:return r=t.sent,t.next=9,r.json();case 9:(n=t.sent).error?w($C($C({},b),{},{loading:!1,error:n.result})):(w({loading:!1,change:{},error:null}),i=[].concat(MC(v.images),[n.result]),m($C($C({},v),{},{images:i})),l(vr.Success,f("GALLERY_IMAGE_ADDED","Business gallery image added")),k(null==n||null===(o=n.result)||void 0===o?void 0:o.source)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w($C($C({},b),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),G=function(){var t=VC(YC().mark((function t(e){var r,n,o,i;return YC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,f("LOADING","Loading")),E($C($C({},x),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},t.next=6,fetch("".concat(u.root,"/files/").concat(e),r);case 6:return n=t.sent,t.next=9,n.json();case 9:(o=t.sent).error?E({loading:!1,error:o.result}):(E({loading:!1,error:null}),i=v.images.filter((function(t){return t.id!==e})),m($C($C({},v),{},{images:i})),l(vr.Success,f("FILE_DELETED","File deleted"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),E({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),F=function(){var t=VC(YC().mark((function t(){var e,o,i,c,p,h,d;return YC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i in t.prev=0,e=$C({},S.changes),o={},e)""!==e[i]&&(o=$C($C({},o),{},qC({},i,e[i])));if(0!==Object.keys(o).length){t.next=6;break}return t.abrupt("return");case 6:return l(vr.Info,f("LOADING","Loading")),L($C($C({},S),{},{loading:!0})),c={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(o)},t.next=11,fetch("".concat(u.root,"/pages/").concat(r),c);case 11:return p=t.sent,t.next=14,p.json();case 14:(h=t.sent).error?L({loading:!1,error:h.result}):(a&&(d=n.filter((function(t){var e,n,o,i;t.id===r&&(t.name=null!==(e=S.changes)&&void 0!==e&&e.name?null===(n=S.changes)||void 0===n?void 0:n.name:null==t?void 0:t.name,t.enabled=null!==(o=null===(i=S.changes)||void 0===i?void 0:i.enabled)&&void 0!==o?o:null==t?void 0:t.enabled);return t})),a(d)),L($C($C({},S),{},{changes:{},loading:!1,error:null})),l(vr.Success,f("PAGE_SAVED","Page Saved"))),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),L($C($C({},S),{},{loading:!1,error:[t.t0.message]}));case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=VC(YC().mark((function t(){var e,r,o,i,p,h,d,y;return YC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i in t.prev=0,r=$C({},S.changes),o={},r)""!==r[i]&&(o=$C($C({},o),{},qC({},i,r[i])));if(0!==Object.keys(o).length){t.next=6;break}return t.abrupt("return");case 6:return o.enabled=!0,null!==(e=o)&&void 0!==e&&e.body||(o.body="<p><br></p>"),l(vr.Info,f("LOADING","Loading")),L($C($C({},S),{},{loading:!0})),p={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(o)},t.next=13,fetch("".concat(u.root,"/pages"),p);case 13:return h=t.sent,t.next=16,h.json();case 16:(d=t.sent).error?L($C($C({},S),{},{loading:!1,error:d.result})):(a&&(y=[].concat(MC(n),[d.result]),a(y)),c&&c(),L($C($C({},S),{},{changes:{},loading:!1,error:null})),l(vr.Success,f("PAGE_ADDED","Page Added"))),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),L($C($C({},S),{},{loading:!1,error:[t.t0.message]}));case 23:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){0!==Object.keys(b.change).length&&D()}),[b.change]),Object(o.useEffect)((function(){N(),r?(C(),A(!1)):A(!0)}),[r]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,RC({},t,{isAddMode:I,pageState:h,imageListState:v,insertImageState:b,formState:S,selectedImageUrl:P,setSelectedImageUrl:k,handleInsertImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){w($C($C({},b),{},{change:{source:e.result,type:1}}))},e.onerror=function(t){return console.log(t)}},handleDeleteImage:G,handleChangeFormState:function(t,e){L($C($C({},S),{},{changes:$C($C({},S.changes),{},qC({},t,e))}))},handleSavePage:F,handleAddPage:U})))};function XC(t){return XC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},XC(t)}function QC(){return QC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QC.apply(this,arguments)}function tN(t){return function(t){if(Array.isArray(t))return sN(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||uN(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eN(){eN=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==XC(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function rN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nN(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rN(Object(r),!0).forEach((function(e){oN(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rN(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oN(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iN(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function aN(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){iN(i,n,o,a,c,"next",t)}function c(t){iN(i,n,o,a,c,"throw",t)}a(void 0)}))}}function cN(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||uN(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uN(t,e){if(t){if("string"==typeof t)return sN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sN(t,e):void 0}}function sN(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ZC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ZC.defaultProps={propsToFetch:["name","enabled"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var lN=function(t){var e=t.UIComponent,r=t.cityMangersPropsToFetch,n=cN(er(),1)[0],a=cN(hr(),1)[0].token,c=cN(br(),2)[1].showToast,u=cN(Ir(),2)[1],s=cN(Object(o.useState)({countries:[],loading:!1,error:null}),2),l=s[0],f=s[1],p=cN(Object(o.useState)({options:[],loading:!1,error:null}),2),h=p[0],d=p[1],y=cN(Object(o.useState)({users:[],loading:!1,error:null}),2),v=y[0],m=y[1],g=cN(Object(o.useState)({loading:!1,error:null}),2),b=g[0],w=g[1],O=cN(Object(o.useState)(null),2),x=O[0],E=O[1],j=cN(Object(o.useState)({}),2),S=j[0],L=j[1],_=cN(Object(o.useState)(!1),2),P=_[0],k=_[1],T=cN(Object(o.useState)([]),2),I=T[0],A=T[1],C=cN(Object(o.useState)(!1),2),N=C[0],D=C[1],G=cN(Object(o.useState)(null),2),F=G[0],U=G[1],B=cN(Object(o.useState)([]),2),R=B[0],M=B[1],Y=cN(Object(o.useState)([]),2),z=Y[0],$=Y[1],q=cN(Object(o.useState)(!1),2),J=q[0],V=q[1],H=function(){var t=aN(eN().mark((function t(){var e,r,o,i;return eN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(nN(nN({},l),{},{loading:!0})),t.next=4,n.countries().get();case 4:e=t.sent,r=e.content,o=r.error,i=r.result,f(nN(nN({},l),{},o?{loading:!1,error:i}:{loading:!1,countries:i})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),f(nN(nN({},l),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),W=function(){var t=aN(eN().mark((function t(){var e,r,o;return eN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(nN(nN({},h),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,fetch("".concat(n.root,"/dropdownoptions"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(o=t.sent).error?d(nN(nN({},h),{},{loading:!1,error:o.result})):d(nN(nN({},h),{},{loading:!1,options:o.result})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),d(nN(nN({},h),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),K=function(){var t=aN(eN().mark((function t(e,r){var o,i,a,s,p;return eN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),w(nN(nN({},b),{},{loading:!0})),t.next=5,n.countries(e).save(r);case 5:o=t.sent,i=o.content,a=i.error,s=i.result,a||(p=l.countries.filter((function(t){return t.id===e&&Object.assign(t,s),!0})),f(nN(nN({},l),{},{countries:p})),c(vr.Success,u("COUNTRY_SAVED","Country saved"))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r){return t.apply(this,arguments)}}(),Z=function(){var t=aN(eN().mark((function t(e){var r,o,i,a,s;return eN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),w(nN(nN({},b),{},{loading:!0})),t.next=5,n.countries().save(e);case 5:r=t.sent,o=r.content,i=o.error,a=o.result,i?w({loading:!1,error:a}):((s=nN({},a)).enabled=!0,s.cities=[],f(nN(nN({},l),{},{countries:[].concat(tN(l.countries),[s])})),c(vr.Success,u("COUNTRY_ADDED","Country added")),w(nN(nN({},b),{},{loading:!1}))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),X=function(){var t=aN(eN().mark((function t(e){var r,o,i,a,s,p;return eN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),w(nN(nN({},b),{},{loading:!0})),t.next=5,n.countries(e).delete();case 5:r=t.sent,o=r.content,i=o.error,a=o.result,i?(w(nN(nN({},b),{},{loading:!1,error:a})),V(!1)):(s=l.countries.filter((function(t){return t.id!==e})),f(nN(nN({},l),{},{countries:s})),c(vr.Success,u("COUNTRY_DELETED","Country deleted")),J&&((p=tN(z)).shift(),0===p.length&&V(!1),$(p)),w(nN(nN({},b),{},{loading:!1}))),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]}),V(!1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),Q=function(){var t=aN(eN().mark((function t(e,r,o){var i,a,s,p,h;return eN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),w(nN(nN({},b),{},{loading:!0})),t.next=5,n.countries(e).cities(r).save(o);case 5:i=t.sent,a=i.content,s=a.error,p=a.result,s?w(nN(nN({},b),{},{loading:!1,error:p})):(h=l.countries.map((function(t){if(t.id===e){var n=t.cities.filter((function(t){return t.id===r&&Object.assign(t,p),!0}));t.cities=n}return t})),f(nN(nN({},l),{},{countries:h})),c(vr.Success,u("CITY_SAVED","City saved")),L({})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r,n){return t.apply(this,arguments)}}(),tt=function(){var t=aN(eN().mark((function t(e,r){var o,i,a,s,p,h;return eN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),w(nN(nN({},b),{},{loading:!0})),t.next=5,n.countries(e).cities(r).delete();case 5:o=t.sent,i=o.content,a=i.error,s=i.result,a?(w(nN(nN({},b),{},{loading:!1,error:s})),V(!1)):(p=l.countries.map((function(t){if(parseInt(t.id)===parseInt(e)){var n=t.cities.filter((function(t){return t.id!==r}));t.cities=n}return t})),f(nN(nN({},l),{},{countries:p})),c(vr.Success,u("CITY_REMOVED","City removed")),J&&((h=tN(I)).shift(),0===h.length&&V(!1),A(h))),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]}),V(!1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r){return t.apply(this,arguments)}}(),et=function(){var t=aN(eN().mark((function t(){var e,o,i;return eN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(nN(nN({},v),{},{loading:!0})),e={},t.next=5,n.setAccessToken(a).users().select(r).where([{attribute:"level",value:[1]}]).get({cancelToken:e});case 5:o=t.sent,i=o.content.result,m(nN(nN({},v),{},{loading:!1,users:i})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),m(nN(nN({},v),{},{loading:!1,error:t.t0.message}));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),rt=function(){var t=aN(eN().mark((function t(){var e,r,o,i,a;return eN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=S&&S.country_id){t.next=3;break}return w(nN(nN({},b),{},{error:u("SELECT_COUNTRY","Select a country")})),t.abrupt("return");case 3:return t.prev=3,c(vr.Info,u("LOADING","Loading")),w(nN(nN({},b),{},{loading:!0})),S.enabled=!0,t.next=9,n.countries(null==S?void 0:S.country_id).cities().save(S);case 9:e=t.sent,r=e.content,o=r.error,i=r.result,o?w(nN(nN({},b),{},{loading:!1,error:i})):(a=l.countries.map((function(t){if(t.id===(null==S?void 0:S.country_id)){var e=[].concat(tN(t.cities),[i]);t.cities=e}return t})),f(nN(nN({},l),{},{countries:a})),c(vr.Success,u("CITY_ADDED","City added")),L({}),k(!1)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3),w({loading:!1,error:[t.t0.message]});case 19:case"end":return t.stop()}}),t,null,[[3,16]])})));return function(){return t.apply(this,arguments)}}(),nt=function(){var t=aN(eN().mark((function t(e,r){var o,i,s,l;return eN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),w(nN(nN({},b),{},{loading:!0})),o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(r)},t.next=6,fetch("".concat(n.root,"/dropdownoptions/").concat(e),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(s=t.sent).error?w(nN(nN({},b),{},{loading:!1,error:s.result})):(w(nN(nN({},b),{},{loading:!1})),l=h.options.filter((function(t){return t.id===e&&Object.assign(t,s.result),!0})),d(nN(nN({},h),{},{options:l})),c(vr.Success,u("ZONE_SAVED","Zone saved")),L({})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),ot=function(){var t=aN(eN().mark((function t(){var e,r,o,i;return eN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=S&&S.name){t.next=3;break}return w(nN(nN({},b),{},{error:u("NAME_REQUIRED","The name is required.")})),t.abrupt("return");case 3:return t.prev=3,c(vr.Info,u("LOADING","Loading")),w(nN(nN({},b),{},{loading:!0})),S.enabled=!0,e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(S)},t.next=10,fetch("".concat(n.root,"/dropdownoptions"),e);case 10:return r=t.sent,t.next=13,r.json();case 13:(o=t.sent).error?w(nN(nN({},b),{},{loading:!1,error:o.result})):(i=[].concat(tN(h.options),[o.result]),d(nN(nN({},h),{},{options:i})),c(vr.Success,u("ZONE_ADDED","Zone added")),L({}),D(!1),w(nN(nN({},b),{},{loading:!1}))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),w({loading:!1,error:[t.t0.message]});case 20:case"end":return t.stop()}}),t,null,[[3,17]])})));return function(){return t.apply(this,arguments)}}(),it=function(){var t=aN(eN().mark((function t(e){var r,o,i,s,l;return eN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),w(nN(nN({},b),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=6,fetch("".concat(n.root,"/dropdownoptions/").concat(e),r);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?(w(nN(nN({},b),{},{loading:!1,error:i.result})),V(!1)):(s=h.options.filter((function(t){return t.id!==e})),d(nN(nN({},h),{},{options:s})),c(vr.Success,u("ZONE_REMOVED","Zone removed")),J&&((l=tN(R)).shift(),0===l.length&&V(!1),M(l))),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]}),V(!1);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t;J&&0!==R.length&&it(null===(t=R[0])||void 0===t?void 0:t.id)}),[R,J]),Object(o.useEffect)((function(){var t,e;J&&0!==I.length&&tt(null===(t=I[0])||void 0===t?void 0:t.country_id,null===(e=I[0])||void 0===e?void 0:e.id)}),[I,J]),Object(o.useEffect)((function(){var t;J&&0!==z.length&&X(null===(t=z[0])||void 0===t?void 0:t.id)}),[z,J]),Object(o.useEffect)((function(){L({})}),[x]),Object(o.useEffect)((function(){et(),H(),W()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,QC({},t,{countriesState:l,dropdownOptionsState:h,cityManagerList:v,actionState:b,handleUpdateCountry:K,handleAddCountry:Z,setSelectedCountries:$,selectedCountries:z,handleDeleteCountry:X,handleUpdateCity:Q,handleDeleteCity:tt,selectedCity:x,setSelectedCity:E,openCity:P,setOpenCity:k,changesState:S,handleChangesState:function(t,e){L(nN(nN({},S),{},oN({},t,e)))},cleanChagesState:function(){return L({})},handleSaveCity:function(){Q(null==x?void 0:x.country_id,null==x?void 0:x.id,S)},handleAddCity:rt,selectedCityList:I,handleCheckboxClick:function(t){if(I.find((function(e){return(null==e?void 0:e.id)===t.id}))){var e=I.filter((function(e){return e.id!==t.id}));A(e)}else A([].concat(tN(I),[t]))},handleAllCheckboxClick:function(){var t,e=null===(t=l.countries)||void 0===t?void 0:t.reduce((function(t,e){return[].concat(tN(t),tN(null==e?void 0:e.cities))}),[]);e.length===I.length?A([]):A(e)},handleSeveralDeleteCities:function(){V(!0)},handleSeveralDeleteCountries:function(){return V(!0)},handleUpdateDropdown:nt,openZoneDropdown:N,setOpenZonedropdown:D,selectedZoneDropdown:F,setSelectedZoneDropdown:U,handleSaveZone:function(){nt(null==F?void 0:F.id,S)},handleAddZone:ot,handleDeleteZone:it,selectedZoneList:R,handleCheckboxZoneClick:function(t){if(R.find((function(e){return(null==e?void 0:e.id)===t.id}))){var e=R.filter((function(e){return e.id!==t.id}));M(e)}else M([].concat(tN(R),[t]))},handleAllCheckboxZoneClick:function(){var t=tN(h.options);t.length===R.length?M([]):M(t)},handleSeveralDeleteZones:function(){V(!0)}})))};function fN(t){return fN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fN(t)}function pN(){return pN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pN.apply(this,arguments)}function hN(){hN=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==fN(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function dN(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function yN(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){dN(i,n,o,a,c,"next",t)}function c(t){dN(i,n,o,a,c,"throw",t)}a(void 0)}))}}function vN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mN(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vN(Object(r),!0).forEach((function(e){gN(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vN(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function gN(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bN(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return wN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wN(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wN(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}lN.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lN.defaultProps={cityMangersPropsToFetch:["id","name","lastname"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ON=function(t){var e=t.UIComponent,r=t.handleSuccessDeleteProduct,n=t.handleSuccessUpdateProduct,a=t.handleSuccessAddProduct,c=t.product,u=t.setSelectedProduct,s=t.onClose,l=bN(er(),1)[0],f=bN(hr(),1)[0].token,p=bN(br(),2)[1].showToast,h=bN(Ir(),2)[1],d=bN(Object(o.useState)({loading:!1,error:null,changes:{}}),2),y=d[0],v=d[1],m=function(){var t=yN(hN().mark((function t(){var e,n,o,i,a,u;return hN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),v(mN(mN({},y),{},{loading:!0})),e={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},n="".concat(l.root,"/platform_products/").concat(null==c?void 0:c.id),t.next=7,fetch(n,e);case 7:return o=t.sent,t.next=10,o.json();case 10:i=t.sent,a=i.error,u=i.result,a?v(mN(mN({},y),{},{loading:!1,error:u})):(p(vr.Success,h("GIFT_CARD_DELETED","Gift card deleted")),v(mN(mN({},y),{},{loading:!1,error:null,changes:{}})),r(null==c?void 0:c.id),s&&s()),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),v(mN(mN({},y),{},{loading:!1,error:t.t0.message}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=yN(hN().mark((function t(e){var r,o,i,a,s,d,m,g;return hN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,p(vr.Info,h("LOADING","Loading")),v(mN(mN({},y),{},{loading:!0})),e)r=e;else for(o in r=mN({},null==y?void 0:y.changes))null!==(i=r)&&void 0!==i&&i.name||""!==r[o]||(r[o]=null);return a={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(r)},t.next=7,fetch("".concat(l.root,"/platform_products/").concat(null==c?void 0:c.id),a);case 7:return s=t.sent,t.next=10,s.json();case 10:d=t.sent,m=d.error,g=d.result,m?v(mN(mN({},y),{},{loading:!1,error:g})):(v({changes:{},loading:!1,error:null}),n(g),u(g),p(vr.Success,h("GIFT_CARD_UPDATED","Gift card updated"))),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),v(mN(mN({},y),{},{loading:!1,error:t.t0.message}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=yN(hN().mark((function t(e){var r,n,o,i,c,u;return hN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),v(mN(mN({},y),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(mN(mN({},y.changes),{},{type:e}))},n="".concat(l.root,"/platform_products"),t.next=7,fetch(n,r);case 7:return o=t.sent,t.next=10,o.json();case 10:i=t.sent,c=i.error,u=i.result,c?v(mN(mN({},y),{},{loading:!1,error:u})):(p(vr.Success,h("GIFT_CARD_ADDED","Gift card added")),v(mN(mN({},y),{},{loading:!1,error:null,changes:{}})),a(u),s&&s()),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),v(mN(mN({},y),{},{loading:!1,error:t.t0.message}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,pN({},t,{formState:y,handleChangeInput:function(t){var e=mN(mN({},null==y?void 0:y.changes),{},gN({},t.target.name,t.target.value));v(mN(mN({},y),{},{changes:e}))},handleChangeItem:function(t){var e=mN(mN({},null==y?void 0:y.changes),t);v(mN(mN({},y),{},{changes:e}))},handlechangeImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){v(mN(mN({},y),{},{changes:mN(mN({},y.changes),{},{image:e.result})}))},e.onerror=function(t){return console.log(t)}},handleDeleteProduct:m,handleUpdateProduct:g,handleAddProduct:b})))};function xN(t){return xN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xN(t)}function EN(){return EN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EN.apply(this,arguments)}function jN(t){return function(t){if(Array.isArray(t))return AN(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||IN(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SN(){SN=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==xN(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function LN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?LN(Object(r),!0).forEach((function(e){PN(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LN(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function PN(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kN(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function TN(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||IN(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IN(t,e){if(t){if("string"==typeof t)return AN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?AN(t,e):void 0}}function AN(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ON.propTypes={UIComponent:c.a.elementType},ON.defaultProps={};var CN=function(t){var e=t.UIComponent,r=TN(hr(),1)[0].token,n=TN(er(),1)[0],a=TN(Object(o.useState)({loading:!0,products:[],error:null}),2),c=a[0],u=a[1],s=function(){var t,e=(t=SN().mark((function t(){var e,o,i,a,s;return SN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(_N(_N({},c),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},t.next=5,fetch("".concat(n.root,"/platform_products"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,a=i.error,s=i.result,u({loading:!1,products:a?[]:s,error:a?s:null}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),u(_N(_N({},c),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){kN(i,n,o,a,c,"next",t)}function c(t){kN(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){s()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,EN({},t,{platformProductsListState:c,handleSuccessDeleteProduct:function(t){var e,r=null===(e=c.products)||void 0===e?void 0:e.filter((function(e){return e.id!==t}));u(_N(_N({},c),{},{products:r}))},handleSuccessUpdateProduct:function(t){var e=c.products.map((function(e){return e.id===t.id?t:e}));u(_N(_N({},c),{},{products:e}))},handleSuccessAddProduct:function(t){u(_N(_N({},c),{},{products:[].concat(jN(c.products),[t])}))}})))};function NN(t){return NN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NN(t)}function DN(){return DN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DN.apply(this,arguments)}function GN(t){return function(t){if(Array.isArray(t))return qN(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||$N(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FN(){FN=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==NN(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function UN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function BN(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?UN(Object(r),!0).forEach((function(e){RN(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UN(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function RN(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MN(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function YN(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){MN(i,n,o,a,c,"next",t)}function c(t){MN(i,n,o,a,c,"throw",t)}a(void 0)}))}}function zN(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||$N(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $N(t,e){if(t){if("string"==typeof t)return qN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qN(t,e):void 0}}function qN(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}CN.propTypes={UIComponent:c.a.elementType},CN.defaultProps={};var JN=function(t){var e=t.UIComponent,r=t.projectCode,n=zN(er(),1)[0],a=zN(hr(),1)[0].token,c=zN(br(),2)[1].showToast,u=zN(Ir(),2)[1],s=zN(Object(o.useState)({plugins:[],sysPlugins:[],loading:!1,error:null,sysError:null}),2),l=s[0],f=s[1],p=zN(Object(o.useState)(!1),2),h=p[0],d=p[1],y=zN(Object(o.useState)(null),2),v=y[0],m=y[1],g=zN(Object(o.useState)({loading:!1,error:null}),2),b=g[0],w=g[1],O=function(){var t=YN(FN().mark((function t(){var e,o,i,c,u,s,p;return FN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(BN(BN({},l),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},o=[],i=null,t.prev=5,t.next=8,fetch("".concat(n.url,"/").concat(n.version,"/system/plugins?project_code=").concat(r),e);case 8:return c=t.sent,t.next=11,c.json();case 11:(u=t.sent).error||(o=u.result),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),i=[t.t0.message];case 18:return t.next=20,fetch("".concat(n.root,"/plugins"),e);case 20:return s=t.sent,t.next=23,s.json();case 23:(p=t.sent).error||f(BN(BN({},l),{},{plugins:p.result,sysPlugins:o,sysError:i,loading:!1})),t.next=30;break;case 27:t.prev=27,t.t1=t.catch(0),f(BN(BN({},l),{},{loading:!1,error:[t.t1.message]}));case 30:case"end":return t.stop()}}),t,null,[[0,27],[5,15]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=YN(FN().mark((function t(){var e,r,o,i;return FN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),w(BN(BN({},b),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({url:v})},t.next=6,fetch("".concat(n.root,"/plugins"),e);case 6:return r=t.sent,t.next=9,r.json();case 9:(o=t.sent).error?w({loading:!1,error:o.result}):(w(BN(BN({},b),{},{loading:!1})),i=[].concat(GN(l.plugins),[o.result]),f(BN(BN({},l),{},{plugins:i})),c(vr.Success,u("PLUGIN_SAVED","Plugin saved")),d(!1),m(null)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=YN(FN().mark((function t(e){var r,o,i,s,p;return FN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),w(BN(BN({},b),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=6,fetch("".concat(n.root,"/plugins/").concat(e),r);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?w({loading:!1,error:i.result}):(w(BN(BN({},b),{},{loading:!1})),s=l.plugins.filter((function(t){return t.id!==e})),p=l.sysPlugins.map((function(t){var e;return BN(BN({},t),{},{installed:t.id!==(null==i||null===(e=i.result)||void 0===e?void 0:e.system_plugin_id)&&t.installed})})),f(BN(BN({},l),{},{plugins:s,sysPlugins:p})),c(vr.Success,u("PLUGIN_REMOVED","Plugin removed"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=YN(FN().mark((function t(e,r){var o,i,s,p;return FN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),w(BN(BN({},b),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(r)},t.next=6,fetch("".concat(n.root,"/plugins/").concat(e),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(s=t.sent).error?w({loading:!1,error:s.result}):(w(BN(BN({},b),{},{loading:!1})),p=l.plugins.filter((function(t){return t.id===e&&Object.assign(t,s.result),!0})),f(BN(BN({},l),{},{plugins:p})),c(vr.Success,u("PLUGIN_SAVED","Plugin saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),S=function(){var t=YN(FN().mark((function t(e){var r,o,i;return FN().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,u("LOADING","Loading")),w(BN(BN({},b),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({system_plugin_id:e})},t.next=6,fetch("".concat(n.root,"/plugins"),r);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?w({loading:!1,error:i.result}):(f(BN(BN({},l),{},{plugins:[].concat(GN(l.plugins),[null==i?void 0:i.result]),sysPlugins:l.sysPlugins.map((function(t){var e;return BN(BN({},t),{},{installed:(null==i||null===(e=i.result)||void 0===e?void 0:e.system_plugin_id)===t.id})}))})),w(BN(BN({},b),{},{loading:!1})),c(vr.Success,u("SYSTEM_PLUGIN_INSTALLED","Plugin installed"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){O()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,DN({},t,{pluginListState:l,isAddMode:h,setIsAddMode:d,setNewUrl:m,actionState:b,handleAddNewPlugin:x,handleDeletePlugin:E,handleUpdatePlugin:j,handleInstallSysPlugin:S})))};JN.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},JN.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var VN=r(11),HN=r.n(VN);function WN(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return KN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KN(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KN(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ZN=function(t){var e=t.UIComponent,r=t.open,n=t.backdropClassName,a=t.closeOnBackdrop,c=t.onClose,u=Object(o.useRef)(null),s=WN(Object(o.useState)(),2),l=s[0],f=s[1],p=WN(Object(o.useState)(),2),h=p[0],d=p[1],y=WN(Object(o.useState)(!1),2),v=y[0],m=y[1],g=function(){var t=document.querySelectorAll(".popup-component");if(!r&&t.length>1&&t.length>1&&t[t.length-1].focus(),v){var e=window.document.getElementById("app-modals");e&&e.remove(),window.document.body.style.overflow=h}};Object(o.useEffect)((function(){if(r){var t=window.document.getElementById("app-modals");t?f(t):((t=window.document.createElement("div")).id="app-modals",t.className="popup-component-backdrop popup-backdrop"+(n?" ".concat(n):""),document.body.append(t),f(t),m(!0),d(window.document.body.style.overflow)),u.current&&u.current.focus()}return g}),[r,v,h]);return i.a.createElement(i.a.Fragment,null,r&&l&&HN.a.createPortal(i.a.createElement("div",{className:"popup-component",style:{position:"fixed",top:0,left:0,bottom:0,right:0,zIndex:2001,outline:"none"},onClick:function(t){a&&t.target.classList.contains("popup-component")&&c&&c()},onKeyDown:function(t){27===t.keyCode&&t.target.classList.contains("popup-component")&&c&&c()},tabIndex:-1,autoFocus:!0,ref:u},e&&i.a.createElement(e,t)),l))};function XN(t){return XN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},XN(t)}function QN(){return QN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QN.apply(this,arguments)}function tD(){tD=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==XN(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function eD(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function rD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nD(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rD(Object(r),!0).forEach((function(e){oD(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oD(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iD(t){return function(t){if(Array.isArray(t))return uD(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||cD(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aD(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||cD(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cD(t,e){if(t){if("string"==typeof t)return uD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?uD(t,e):void 0}}function uD(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ZN.propTypes={UIComponent:c.a.elementType,open:c.a.bool,closeOnBackdrop:c.a.bool,closeWithKeyboard:c.a.bool,title:c.a.string,content:c.a.oneOfType([c.a.string,c.a.arrayOf(a.string),c.a.elementType,c.a.element]),onAccept:c.a.func,onCancel:c.a.func,onClose:c.a.func},ZN.defaultProps={open:!1,closeOnBackdrop:!0,closeWithKeyboard:!0};var sD=function(t){var e=t.UIComponent,r=aD(er(),1)[0],n=aD(hr(),1)[0].token,a=aD(Object(o.useState)({loading:!1,levels:[],error:null}),2),c=a[0],u=a[1],s=function(){var t,e=(t=tD().mark((function t(){var e,o,i,a,s,l;return tD().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,u(nD(nD({},c),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},o="".concat(r.root,"/loyalty_levels"),t.next=6,fetch(o,e);case 6:return i=t.sent,t.next=9,i.json();case 9:a=t.sent,s=a.error,l=a.result,u(nD(nD({},c),{},s?{loading:!1,error:l}:{loading:!1,error:null,levels:l})),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),u(nD(nD({},c),{},{loading:!1,error:t.t0.message}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){eD(i,n,o,a,c,"next",t)}function c(t){eD(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){s()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,QN({},t,{levelList:c,handleAddLevelList:function(t){var e=iD(c.levels);e.push(t),u(nD(nD({},c),{},{levels:e}))},handleUpdateLevelList:function(t){var e=null==c?void 0:c.levels.map((function(e){return e.id===t.id?t:e}));u(nD(nD({},c),{},{levels:e}))},handleDeleteLevelList:function(t){var e,r=null==c||null===(e=c.levels)||void 0===e?void 0:e.filter((function(e){return e.id!==t.id}));u(nD(nD({},c),{},{levels:r}))}})))};sD.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var lD="change_ingredients",fD="change_options",pD=Object(o.createContext)(),hD=function(){return Object(o.useContext)(pD)||[{},function(){}]};function dD(){return dD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dD.apply(this,arguments)}function yD(t){return function(t){if(Array.isArray(t))return gD(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||mD(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vD(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||mD(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mD(t,e){if(t){if("string"==typeof t)return gD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gD(t,e):void 0}}function gD(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var bD=function(t){var e=t.product,r=t.UIComponent,n=vD(hD(),2),a=n[0].ingredients,c=n[1],u=vD(hD(),2),s=u[0].options,l=u[1],f=vD(Object(o.useState)(1),2),p=f[0],h=f[1],d=vD(Object(o.useState)(e.price),2),y=d[0],v=d[1],m=vD(Object(o.useState)(""),2),g=m[0],b=m[1],w=function(t,e){for(var r=0;r<t.length;r++)for(var n=t[r].suboptions,o=0;o<n.length;o++)if(n[o].id==e)return n[o].isChecked;return!1};Object(o.useEffect)((function(){!function(){for(var t=e.ingredients,r=0;r<t.length;r++)t[r].isChecked=!0;c({type:lD,ingredients:t})}(),function(){for(var t=[],r=e.extras,n=0;n<r.length;n++)t.push.apply(t,yD(r[n].options));for(var o=0;o<t.length;o++){var i=t[o];if(i.isDisplay=!0,i.conditioned){var a=i.respect_to;void 0!==a&&""!==a&&"null"!=a||(i.isDisplay=!1),w(t,a)||(i.isDisplay=!1)}for(var c=i.suboptions,u=0;u<c.length;u++)c[u].isChecked=!1}l({type:fD,options:t})}()}),[]);var O=function(t,r){for(var n=0,o=0;o<r.length;o++)if(0!=r[o].isDisplay)for(var i=r[o].suboptions,a=0;a<i.length;a++)i[a].isChecked&&(n+=parseFloat(i[a].price));var c=(parseFloat(e.price)+n)*t;v(c)};return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,dD({},t,{onShare:function(){t.onShare&&t.onShare(e)},onClose:function(){t.onClose&&t.onClose()},productName:e.name,productLogo:e.images,productCount:p,productPrice:y,ingredients:a,options:s,note:g,onChangedIngredient:function(t){a[t].isChecked=!a[t].isChecked,c({type:lD,ingredients:a})},onChangedOption:function(t,e,r){if(r){for(var n=0;n<s[t].suboptions.length;n++)s[t].suboptions[n].isChecked=!1;s[t].suboptions[e].isChecked=!0}else s[t].suboptions[e].isChecked=!s[t].suboptions[e].isChecked;for(var o=0;o<s.length;o++){var i=s[o];if(i.isDisplay=!0,i.conditioned){var a=i.respect_to;void 0!==a&&""!==a&&"null"!=a||(i.isDisplay=!1),w(s,a)||(i.isDisplay=!1)}}O(p,s),l({type:fD,options:s})},onChangedNote:function(t){b(t.target.value)},onClickedButtonPlus:function(){h(p+1),O(p+1,s)},onClickedButtonMinus:function(){p>1&&(h(p-1),O(p-1,s))},onClickedButtonAdd:function(){t.onClickedButtonAdd&&(e.ingredients=a,e.options=s,e.note=g,e.quantity=p,t.onAdd(e))}})))};function wD(t){return wD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wD(t)}function OD(){return OD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OD.apply(this,arguments)}function xD(t){return function(t){if(Array.isArray(t))return ID(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||TD(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ED(){ED=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==wD(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function jD(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function SD(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){jD(i,n,o,a,c,"next",t)}function c(t){jD(i,n,o,a,c,"throw",t)}a(void 0)}))}}function LD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?LD(Object(r),!0).forEach((function(e){PD(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LD(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function PD(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kD(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||TD(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TD(t,e){if(t){if("string"==typeof t)return ID(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ID(t,e):void 0}}function ID(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}bD.propTypes={UIComponent:c.a.elementType,onShare:c.a.func,onClose:c.a.func,productName:c.a.string,productLogo:c.a.string,productCount:c.a.number,productPrice:c.a.number,ingredients:c.a.array,options:c.a.array,note:c.a.array,onChangedIngredient:c.a.func,onChangedOption:c.a.func,onChangedNote:c.a.func,onClickedButtonPlus:c.a.func,onClickedButtonMinues:c.a.func,onClickedButtonAdd:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bD.defaultProps={productName:""};var AD=function(t){var e=t.business,r=t.UIComponent,n=t.productId,a=t.categoryId,c=t.handleUpdateBusinessState,u=kD(er(),1)[0],s=kD(hr(),1)[0],l=kD(br(),2)[1].showToast,f=kD(Ir(),2)[1],p=kD(Object(o.useState)({loading:!1,product:null,error:null}),2),h=p[0],d=p[1],y=kD(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),v=y[0],m=y[1],g=kD(Object(o.useState)({ingredients:{},options:{}}),2),b=g[0],w=g[1],O=function(){var t=SD(ED().mark((function t(){var r,o,i,c;return ED().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(_D(_D({},h),{},{loading:!0})),t.next=4,u.businesses(e.id).categories(a).products(n).get();case 4:r=t.sent,o=r.content,i=o.error,c=o.result,d(i?_D(_D({},h),{},{loading:!1,error:c}):{loading:!1,product:c,error:null}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),d(_D(_D({},h),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=SD(ED().mark((function t(r){var n,o,i,a,c,p,d,y,g,b,w,O,x,E,j,L;return ED().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,f("LOADING","Loading")),m(_D(_D({},v),{},{loading:!0})),i=_D({},r||v.changes),a=_D({},r||v.changes),t.next=7,u.businesses(null==e?void 0:e.id).categories(null==h||null===(n=h.product)||void 0===n?void 0:n.category_id).products(null==h||null===(o=h.product)||void 0===o?void 0:o.id).save(i,{accessToken:s.token});case 7:if(c=t.sent,p=c.content,d=p.error,y=p.result,m(_D(_D({},v),{},{changes:d?v.changes:{},result:{error:d,result:y},loading:!1})),d){t.next=24;break}if(void 0===(null==a||null===(g=a.ribbon)||void 0===g?void 0:g.enabled)||null!=a&&null!==(b=a.ribbon)&&void 0!==b&&b.enabled||null==y||null===(w=y.ribbon)||void 0===w||!w.enabled){t.next=22;break}return E={ribbon:{enabled:!1}},t.next=17,u.businesses(null==e?void 0:e.id).categories(null==h||null===(O=h.product)||void 0===O?void 0:O.category_id).products(null==h||null===(x=h.product)||void 0===x?void 0:x.id).save(E,{accessToken:s.token});case 17:j=t.sent,L=j.content,S(null==L?void 0:L.result),t.next=23;break;case 22:S(y);case 23:l(vr.Success,f("PRODUCT_SAVED","Product saved"));case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(0),m(_D(_D({},v),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 29:case"end":return t.stop()}}),t,null,[[0,26]])})));return function(e){return t.apply(this,arguments)}}(),E=function(){var r=SD(ED().mark((function r(){var n,o,i,a,s,p,d;return ED().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,l(vr.Info,f("LOADING","Loading")),m(_D(_D({},v),{},{loading:!0})),r.next=5,u.businesses(parseInt(null==e?void 0:e.id)).categories(parseInt(null===(n=h.product)||void 0===n?void 0:n.category_id)).products(null===(o=h.product)||void 0===o?void 0:o.id).delete();case 5:i=r.sent,a=i.content,s=a.error,p=a.result,s?m(_D(_D({},v),{},{loading:!1,result:{error:!0,result:p}})):(m(_D(_D({},v),{},{loading:!1,result:{error:!1,result:p}})),c&&((d=xD(null==e?void 0:e.categories)).forEach((function t(e){var r;if(e.id===(null===(r=h.product)||void 0===r?void 0:r.category_id)){var n=e.products.filter((function(t){return t.id!==h.product.id}));e.products=xD(n)}Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})),c(_D(_D({},e),{},{categories:d}))),l(vr.Success,f("PRODUCT_DELETED","Product deleted")),t.onClose&&t.onClose()),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),m(_D(_D({},v),{},{loading:!1,result:{error:!0,result:r.t0}}));case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(){return r.apply(this,arguments)}}(),j=function(e){for(var r,n=0,o=0;o<(null===(i=t.product)||void 0===i||null===(a=i.extras)||void 0===a?void 0:a.length);o++)for(var i,a,c,u=null===(c=t.product)||void 0===c?void 0:c.extras[o],s=0;s<(null===(l=u.options)||void 0===l?void 0:l.length);s++)for(var l,f=u.options[s],p=0;p<(null===(h=f.suboptions)||void 0===h?void 0:h.length);p++){var h,d,y,v=f.suboptions[p];if(null!==(d=e.options["id:".concat(f.id)])&&void 0!==d&&null!==(y=d.suboptions["id:".concat(v.id)])&&void 0!==y&&y.selected){var m=e.options["id:".concat(f.id)].suboptions["id:".concat(v.id)],g=f.allow_suboption_quantity?m.quantity:1;n+=(f.with_half_option&&v.half_price&&"whole"!==m.position?v.half_price:v.price)*g}}return(null===(r=t.product)||void 0===r?void 0:r.price)+n},S=function(t){if(d(_D(_D({},h),{},{product:_D(_D({},h.product),t)})),c){var r=xD(null==e?void 0:e.categories);r.forEach((function e(r){var n;if(r.id===(null===(n=h.product)||void 0===n?void 0:n.category_id)){var o=r.products.map((function(e){return e.id===h.product.id?_D(_D({},e),t):e}));r.products=xD(o)}Array.isArray(null==r?void 0:r.subcategories)&&r.subcategories.forEach(e)}));var n=_D(_D({},e),{},{categories:r});c(n)}};return Object(o.useEffect)((function(){t.product?(d(_D(_D({},h),{},{product:t.product})),function(e){var r,n,o,i,a={};for(var c in e.ingredients){var u=e.ingredients[c];a["id:".concat(u.id)]={selected:!0}}var s=_D(_D({},t.productCart),{},{id:e.id,price:e.price,name:e.name,businessId:t.businessId,categoryId:e.category_id,inventoried:e.inventoried,stock:e.quantity,ingredients:(null===(r=t.productCart)||void 0===r?void 0:r.ingredients)||a,options:(null===(n=t.productCart)||void 0===n?void 0:n.options)||{},comment:(null===(o=t.productCart)||void 0===o?void 0:o.comment)||null,quantity:(null===(i=t.productCart)||void 0===i?void 0:i.quantity)||1});s.unitTotal=j(s),s.total=s.unitTotal*s.quantity,w(s)}(t.product)):n&&a&&O()}),[t.product]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,OD({},t,{productState:h,productCart:b,formState:v,cleanFormState:function(t){return m(_D(_D({},v),t))},handleChangeRibbon:function(t){var e,r,n=null!=v&&null!==(e=v.changes)&&void 0!==e&&e.ribbon?_D(_D({},null==v||null===(r=v.changes)||void 0===r?void 0:r.ribbon),t):_D({},t),o=_D(_D({},null==v?void 0:v.changes),{},{ribbon:n});m(_D(_D({},v),{},{changes:o}))},handleChangeProductActiveState:function(){var t,e={enabled:!(null!=h&&null!==(t=h.product)&&void 0!==t&&t.enabled)};x(e)},handleChangeInput:function(t){m(_D(_D({},v),{},{changes:_D(_D({},v.changes),{},PD({},t.target.name,t.target.value))}))},handlechangeImage:function(t,e){var r=new window.FileReader;r.readAsDataURL(t),r.onload=function(){m(_D(_D({},v),{},{changes:_D(_D({},v.changes),{},PD({},e?"seo_image":"images",r.result))}))},r.onerror=function(t){return console.log(t)}},handleUpdateClick:x,handleDeleteProduct:E,showProductOption:function(t){var e=!0;if(t.respect_to&&(e=!1,b.options)){var r=b.options;for(var n in r){var o;if(null!==(o=r[n].suboptions["id:".concat(t.respect_to)])&&void 0!==o&&o.selected){e=!0;break}}}return e},handleChangeFormState:function(t){m(_D(_D({},v),{},{changes:_D(_D({},v.changes),t)}))},handleSuccessUpdate:S})))};function CD(t){return CD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CD(t)}function ND(){return ND=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ND.apply(this,arguments)}function DD(t){return function(t){if(Array.isArray(t))return $D(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||zD(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GD(){GD=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==CD(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function FD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function UD(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?FD(Object(r),!0).forEach((function(e){BD(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FD(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function BD(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RD(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function MD(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){RD(i,n,o,a,c,"next",t)}function c(t){RD(i,n,o,a,c,"throw",t)}a(void 0)}))}}function YD(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||zD(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zD(t,e){if(t){if("string"==typeof t)return $D(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$D(t,e):void 0}}function $D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}AD.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},AD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qD=function(t){var e=t.businessId,r=t.extraId,n=t.metafields,a=t.UIComponent,c=t.handleSuccessAddMetaFields,u=t.handleSuccessDeleteBusinessMetaFields,s=YD(er(),1)[0],l=YD(hr(),1)[0],f=YD(br(),2)[1].showToast,p=YD(Ir(),2)[1],h=YD(Object(o.useState)({metaFields:[],loading:!1,error:null}),2),d=h[0],y=h[1],v=YD(Object(o.useState)({loading:!1,result:{error:!1}}),2),m=v[0],g=v[1],b=function(){var t=MD(GD().mark((function t(){var n,o,i,a;return GD().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(UD(UD({},d),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},t.next=5,fetch("".concat(s.root,"/business/").concat(e,"/extras/").concat(r,"/metafields"),n);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,a=i.result,y(UD(UD({},d),{},{loading:!1,metaFields:a})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),y(UD(UD({},d),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=MD(GD().mark((function t(n){var o,i;return GD().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,p("LOADING","Loading")),g(UD(UD({},m),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},t.next=6,fetch("".concat(s.root,"/business/").concat(e,"/extras/").concat(r,"/metafields/").concat(n),o);case 6:t.sent.ok&&(i=d.metaFields.filter((function(t){return t.id!==n})),y(UD(UD({},d),{},{metaFields:i})),g({loading:!1,result:{error:!1}}),u&&u(n),f(vr.Success,p("METAFIELD_DELETED","Metafield deleted"))),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),g({result:{error:!0,result:t.t0.message},loading:!1});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=MD(GD().mark((function t(n){var o,i,a,u,h,v;return GD().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,p("LOADING","Loading")),g(UD(UD({},m),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)},body:JSON.stringify(n)},t.next=6,fetch("".concat(s.root,"/business/").concat(e,"/extras/").concat(r,"/metafields"),o);case 6:return i=t.sent,t.next=9,i.json();case 9:a=t.sent,u=a.error,h=a.result,u?g({loading:!1,result:{error:!0,result:h}}):([],v=[].concat(DD(d.metaFields),[h]),y(UD(UD({},d),{},{metaFields:v})),g({loading:!1,result:{error:!1}}),c&&c(h),f(vr.Success,p("METAFIELD_ADDED","Metafield added"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),g({result:{error:!0,result:t.t0.message},loading:!1});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){n?y(UD(UD({},d),{},{metaFields:n})):b()}),[n]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,ND({},t,{metaFieldsList:d,actionState:m,handleDeleteMetaField:w,handeAddMetaField:O})))};function JD(t){return JD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JD(t)}function VD(){return VD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VD.apply(this,arguments)}function HD(t){return function(t){if(Array.isArray(t))return oG(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||nG(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WD(){WD=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==JD(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function KD(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ZD(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){KD(i,n,o,a,c,"next",t)}function c(t){KD(i,n,o,a,c,"throw",t)}a(void 0)}))}}function XD(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=nG(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function QD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tG(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?QD(Object(r),!0).forEach((function(e){eG(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QD(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function eG(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rG(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||nG(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nG(t,e){if(t){if("string"==typeof t)return oG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oG(t,e):void 0}}function oG(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}qD.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var iG=function(t){var e=t.UIComponent,r=t.business,n=t.extra,a=t.option,c=t.handleUpdateBusinessState,u=t.handleSucccessDeleteOption,s=rG(er(),1)[0],l=rG(hr(),1)[0].token,f=rG(br(),2)[1].showToast,p=rG(Ir(),2)[1],h=rG(Object(o.useState)({option:a,loading:!1,error:null}),2),d=h[0],y=h[1],v=rG(Object(o.useState)({changes:{},result:{}}),2),m=v[0],g=v[1],b=rG(Object(o.useState)(null),2),w=b[0],O=b[1],x=rG(Object(o.useState)({changes:{},loading:!1,error:null}),2),E=x[0],j=x[1],S=rG(Object(o.useState)([]),2),L=S[0],_=S[1],P=rG(Object(o.useState)([]),2),k=P[0],T=P[1],I=rG(Object(o.useState)(null),2),A=I[0],C=I[1],N=rG(Object(o.useState)(n),2),D=N[0],G=N[1],F=rG(Object(o.useState)(null),2),U=F[0],B=F[1],R=rG(Object(o.useState)(!1),2),M=R[0],Y=R[1],z=rG(Object(o.useState)(null),2),$=z[0],q=z[1],J=rG(Object(o.useState)(!1),2),V=J[0],H=J[1],W=function(t){if(c){var e=r.extras.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0})),n=tG(tG({},r),{},{extras:e}),o=n.categories.map((function(e){var r=e.products.map((function(e){var r=e.extras.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0}));return tG(tG({},e),{},{extras:r})}));return tG(tG({},e),{},{products:r})})),i=tG(tG({},n),{},{categories:o});c(i)}},K=function(t){var e,r=[],n=XD(t.options.filter((function(t){return t.id!==a.id})));try{for(n.s();!(e=n.n()).done;){var o=e.value;r.push({value:o.id,content:o.name})}}catch(t){n.e(t)}finally{n.f()}_(r)},Z=function(t,e){var r,n=[],o=XD(t.options.find((function(t){return t.id===e})).suboptions);try{for(o.s();!(r=o.n()).done;){var i=r.value;n.push({value:i.id,content:i.name})}}catch(t){o.e(t)}finally{o.f()}T(n)},X=function(t){var e,r=XD(null==D?void 0:D.options);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(null!=n&&n.suboptions){var o,i=XD(n.suboptions);try{for(i.s();!(o=i.n()).done;){var a=o.value;a.id===t&&(C(n.id),B(a.id))}}catch(t){i.e(t)}finally{i.f()}}}}catch(t){r.e(t)}finally{r.f()}},Q=function(){var t=ZD(WD().mark((function t(e){var o,i,c,u,h,v,b,O,x,E;return WD().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c in t.prev=0,o=e||tG({},m.changes),i={},o)""!==o[c]&&(i=tG(tG({},i),{},eG({},c,o[c])));if(0!==Object.keys(i).length){t.next=6;break}return t.abrupt("return");case 6:return f(vr.Info,p("LOADING","Loading")),y(tG(tG({},d),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},t.next=11,fetch("".concat(s.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(a.id,"/suboptions/").concat((null==e?void 0:e.id)||w),u);case 11:return h=t.sent,t.next=14,h.json();case 14:if(v=t.sent,g({changes:v.error?m.changes:{},result:null==v?void 0:v.result}),v.error){t.next=26;break}return b=d.option.suboptions.filter((function(t){return t.id===v.result.id&&Object.assign(t,v.result),!0})),O=tG(tG({},d.option),{},{suboptions:b}),y(tG(tG({},d),{},{option:O,loading:!1})),x=n.options.filter((function(t){return t.id===O.id&&Object.assign(t,O),!0})),E=tG(tG({},n),{},{options:x}),G(E),W(E),f(vr.Success,p("CHOICE_SAVED","Choice saved")),t.abrupt("return",!0);case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(0),y(tG(tG({},d),{},{loading:!1,error:t.t0.message}));case 31:case"end":return t.stop()}}),t,null,[[0,28]])})));return function(e){return t.apply(this,arguments)}}(),tt=function(){var t=ZD(WD().mark((function t(e){var o,i,c,u,h,v,m,g,b;return WD().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i in t.prev=0,o=tG({},e))o[i]||delete o[i];if(null!=o&&o.price||(o.price=0),0!==Object.keys(o).length){t.next=6;break}return t.abrupt("return");case 6:return f(vr.Info,p("LOADING","Loading")),o.enabled=!0,y(tG(tG({},d),{},{loading:!0})),c={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(o)},t.next=12,fetch("".concat(s.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(a.id,"/suboptions"),c);case 12:return u=t.sent,t.next=15,u.json();case 15:(h=t.sent).error||((v=HD(d.option.suboptions)).push(tG(tG({},h.result),{},{preselected:!1})),m=tG(tG({},d.option),{},{suboptions:v}),y(tG(tG({},d),{},{option:m,loading:!1})),g=n.options.filter((function(t){return t.id===m.id&&Object.assign(t,m),!0})),b=tG(tG({},n),{},{options:g}),G(b),W(b),f(vr.Success,p("CHOICE_ADDED","Choice added")),Y(!1)),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),y(tG(tG({},d),{},{loading:!1,error:t.t0.message}));case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}(),et=function(){var t=ZD(WD().mark((function t(e){var o,i,c,u,h,v;return WD().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,p("LOADING","Loading")),y(tG(tG({},d),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},t.next=6,fetch("".concat(s.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(a.id,"/suboptions/").concat(e),o);case 6:return i=t.sent,t.next=9,i.json();case 9:t.sent.error||(c=d.option.suboptions.filter((function(t){return t.id!==e})),u=tG(tG({},d.option),{},{suboptions:c}),y(tG(tG({},d),{},{option:u,loading:!1})),h=n.options.filter((function(t){return t.id===u.id&&Object.assign(t,u),!0})),v=tG(tG({},n),{},{options:h}),G(v),W(v),f(vr.Success,p("CHOICE_DELETED","Choice deleted"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),y(tG(tG({},d),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),rt=function(){var t=ZD(WD().mark((function t(e,r){var n;return WD().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=eG({},e,r),j(tG(tG({},E),{},{changes:n})),nt(n);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),nt=function(){var t=ZD(WD().mark((function t(e){var o,i,c,u,h;return WD().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(vr.Info,p("LOADING","Loading")),j(tG(tG({},E),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(e)},t.next=6,fetch("".concat(s.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(a.id),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(c=t.sent).error||(j({changes:c.error?E.changes:{},loading:!1}),y(tG(tG({},d),{},{option:tG(tG({},d.option),c.result)})),u=n.options.filter((function(t){return t.id===c.result.id&&Object.assign(t,c.result),!0})),h=tG(tG({},n),{},{options:u}),G(h),W(h),f(vr.Success,p("OPTION_SAVED","Option saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),j(tG(tG({},E),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),ot=function(){var e=ZD(WD().mark((function e(){var o,i;return WD().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(vr.Info,p("LOADING","Loading")),y(tG(tG({},d),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=6,fetch("".concat(s.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(a.id),o);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(u&&u(a.id),f(vr.Success,p("OPTION_DELETED","Option deleted")),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(tG(tG({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){if(A){K(D),Z(D,A);var t=D.options.find((function(t){return t.id===a.id}));X(null==t?void 0:t.respect_to)}}),[D,A]),Object(o.useEffect)((function(){y(tG(tG({},d),{},{option:a})),K(n),X(null==a?void 0:a.respect_to)}),[a,n]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,VD({},t,{optionState:d,changesState:m,editSubOptionId:w,settingChangeState:E,handleChangeInput:function(t,e){e===w?g({result:{},changes:tG(tG({},m.changes),{},eG({},t.target.name,t.target.value))}):(O(e),g({result:{},changes:eG({},t.target.name,t.target.value)}))},handleChangeSubOptionImage:function(t,e){var r=new window.FileReader;r.readAsDataURL(t),e===w?r.onload=function(){g({result:{},changes:tG(tG({},m.changes),{},{image:r.result})})}:(O(e),r.onload=function(){g({result:{},changes:{image:r.result}})}),r.onerror=function(t){return console.log(t)}},handleChangeSubOptionEnable:function(t,e){e===w?g({result:{},changes:tG(tG({},m.changes),{},{enabled:t})}):(O(e),g({result:{},changes:{enabled:t}}))},handleDeteteSubOption:et,handleOptionSetting:rt,conditionalOptions:L,conditionalSubOptions:k,conditionalOptionId:A,conditionalSubOptionId:U,handleChangeConditionalOption:function(t){C(t),Z(D,t)},handleChangeConditionalSubOption:function(t){nt({respect_to:t})},handleAddOption:tt,handleDeteteOption:ot,handleChangeDefaultSuboption:function(t){var e,r,n,o,i,a,c,u=null==d||null===(e=d.option)||void 0===e||null===(r=e.suboptions)||void 0===r||null===(n=r.find((function(e){return e.id===t})))||void 0===n?void 0:n.preselected,s=null==d||null===(o=d.option)||void 0===o||null===(i=o.suboptions)||void 0===i||null===(a=i.filter((function(t){return null==t?void 0:t.preselected})))||void 0===a?void 0:a.length;u?Q({id:t,preselected:!1}):(null==d||null===(c=d.option)||void 0===c?void 0:c.max)>s?Q({id:t,preselected:!0}):f(vr.Error,p("MAX_PRESELECTED_OPTIONS_ERROR","Maximum number of options exceeded"),4e3)},handleUpdateSubOption:Q,handleChangeItem:function(t,e){void 0!==e&&w===e&&O(e),g({result:{},changes:tG(tG({},m.changes),t)})},handleUpdateOption:nt,isAddForm:M,setIsAddForm:Y,dragoverSubOptionId:$,isSubOptionsBottom:V,handleDragStart:function(t,e){t.dataTransfer.setData("transferSubOptionId",e.id);var r=document.createElement("div");r.classList.add("ghostDragging"),r.innerHTML=e.name,document.body.appendChild(r),t.dataTransfer.setDragImage(r,0,0),H(!1)},hanldeDragOver:function(t,e,r){if(t.preventDefault(),t.target.closest(".draggable-suboption"))if(r){var n=window.scrollY+t.target.getBoundingClientRect().top+t.target.offsetHeight/2;t.clientY>n?(H(!0),q(null)):(H(!1),q(e.id))}else q(e.id)},handleDrop:function(t,e){t.preventDefault();var r,n=parseInt(t.dataTransfer.getData("transferSubOptionId"));e.id!==n&&(r=V?(null==e?void 0:e.rank)+1:null==e?void 0:e.rank,H(!1),Q({id:n,rank:r}))},handleDragEnd:function(){for(var t=document.getElementsByClassName("ghostDragging");t.length>0;)t[0].parentNode.removeChild(t[0]);q(null)}})))};function aG(t){return aG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aG(t)}function cG(){return cG=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cG.apply(this,arguments)}function uG(t){return function(t){if(Array.isArray(t))return mG(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||vG(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sG(){sG=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==aG(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function lG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fG(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lG(Object(r),!0).forEach((function(e){pG(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lG(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pG(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hG(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function dG(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){hG(i,n,o,a,c,"next",t)}function c(t){hG(i,n,o,a,c,"throw",t)}a(void 0)}))}}function yG(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||vG(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vG(t,e){if(t){if("string"==typeof t)return mG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mG(t,e):void 0}}function mG(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}iG.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},iG.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gG=function(t){var e=t.businessId,r=t.extraId,n=t.optionId,a=t.metafields,c=t.UIComponent,u=t.handleSuccessAddMetaFields,s=t.handleSuccessDeleteBusinessMetaFields,l=yG(er(),1)[0],f=yG(hr(),1)[0],p=yG(Object(o.useState)({metaFields:[],loading:!1,error:null}),2),h=p[0],d=p[1],y=yG(Object(o.useState)({loading:!1,result:{error:!1}}),2),v=y[0],m=y[1],g=function(){var t=dG(sG().mark((function t(){var o,i,a,c;return sG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(fG(fG({},h),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},t.next=5,fetch("".concat(l.root,"/business/").concat(e,"/extras/").concat(r,"/options/").concat(n,"/metafields"),o);case 5:return i=t.sent,t.next=8,i.json();case 8:a=t.sent,c=a.result,d(fG(fG({},h),{},{loading:!1,metaFields:c})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),d(fG(fG({},h),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=dG(sG().mark((function t(o){var i,a;return sG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(fG(fG({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},t.next=5,fetch("".concat(l.root,"/business/").concat(e,"/extras/").concat(r,"/options/").concat(n,"/metafields/").concat(o),i);case 5:t.sent.ok&&(a=h.metaFields.filter((function(t){return t.id!==o})),d(fG(fG({},h),{},{metaFields:a})),m({loading:!1,result:{error:!1}}),s&&s(o)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),m({result:{error:!0,result:t.t0.message},loading:!1});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=dG(sG().mark((function t(o){var i,a,c,s,p,y;return sG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(fG(fG({},v),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(o)},t.next=5,fetch("".concat(l.root,"/business/").concat(e,"/extras/").concat(r,"/options/").concat(n,"/metafields"),i);case 5:return a=t.sent,t.next=8,a.json();case 8:c=t.sent,s=c.error,p=c.result,s?m({loading:!1,result:{error:!0,result:p}}):([],y=[].concat(uG(h.metaFields),[p]),d(fG(fG({},h),{},{metaFields:y})),m({loading:!1,result:{error:!1}}),u&&u(p)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),m({result:{error:!0,result:t.t0.message},loading:!1});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){a?d(fG(fG({},h),{},{metaFields:a})):g()}),[a]),i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(c,cG({},t,{metaFieldsList:h,actionState:v,handleDeleteMetaField:b,handeAddMetaField:w})))};function bG(t){return bG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bG(t)}function wG(){return wG=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wG.apply(this,arguments)}function OG(t){return function(t){if(Array.isArray(t))return TG(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||kG(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xG(){xG=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==bG(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function EG(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function jG(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){EG(i,n,o,a,c,"next",t)}function c(t){EG(i,n,o,a,c,"throw",t)}a(void 0)}))}}function SG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function LG(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?SG(Object(r),!0).forEach((function(e){_G(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SG(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _G(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PG(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||kG(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kG(t,e){if(t){if("string"==typeof t)return TG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?TG(t,e):void 0}}function TG(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}gG.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gG.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var IG=function(t){var e=t.UIComponent,r=t.business,n=t.extra,a=t.handleUpdateBusinessState,c=PG(er(),1)[0],u=PG(hr(),1)[0].token,s=PG(br(),2)[1].showToast,l=PG(Ir(),2)[1],f=PG(Object(o.useState)({extra:n,loading:!1,error:null}),2),p=f[0],h=f[1],d=PG(Object(o.useState)({changes:{},result:{}}),2),y=d[0],v=d[1],m=PG(Object(o.useState)(null),2),g=m[0],b=m[1],w=PG(Object(o.useState)({conditioned:!1,enabled:!0,name:"",min:1,max:1}),2),O=w[0],x=w[1],E=PG(Object(o.useState)(null),2),j=E[0],S=E[1],L=PG(Object(o.useState)({}),2),_=L[0],P=L[1],k=PG(Object(o.useState)(null),2),T=k[0],I=k[1],A=PG(Object(o.useState)(!1),2),C=A[0],N=A[1],D=function(t){return v(LG({},t))},G=function(t,e){D(LG(LG({},y),{},{changes:{}})),S(t),P(LG(LG({},_),{},_G({},e,!0)))},F=function(t){if(a){var e=r.extras.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0})),n=LG(LG({},r),{},{extras:e}),o=n.categories.map((function(e){var r=e.products.map((function(e){var r=e.extras.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0}));return LG(LG({},e),{},{extras:r})}));return LG(LG({},e),{},{products:r})})),i=LG(LG({},n),{},{categories:o});a(i)}},U=function(){var t=jG(xG().mark((function t(){var e,o,i,a,f;return xG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,l("LOADING","Loading")),h(LG(LG({},p),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(null==y?void 0:y.changes)},t.next=6,fetch("".concat(c.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(g),e);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error||(v({changes:i.error?y.changes:{},result:i.result}),a=p.extra.options.filter((function(t){return t.id===i.result.id&&Object.assign(t,i.result),!0})),f=LG(LG({},p.extra),{},{options:a}),h(LG(LG({},p),{},{loading:!1,extra:f})),F(f),s(vr.Success,l("OPTION_SAVED","Option saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),h(LG(LG({},p),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),B=function(){var t=jG(xG().mark((function t(){var e,o,i,a,f;return xG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,l("LOADING","Loading")),h(LG(LG({},p),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(O)},t.next=6,fetch("".concat(c.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options"),e);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error||(x({conditioned:!1,enabled:!0,name:"",min:1,max:1}),a=p.extra.options?[].concat(OG(p.extra.options),[LG(LG({},i.result),{},{suboptions:[]})]):[LG(LG({},i.result),{},{suboptions:[]})],f=LG(LG({},p.extra),{},{options:a}),h(LG(LG({},p),{},{loading:!1,extra:f})),F(f),s(vr.Success,l("OPTION_ADDED","Option added")),G(LG(LG({},i.result),{},{suboptions:[]}),"edit")),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),h(LG(LG({},p),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),R=function(){var t=jG(xG().mark((function t(e){var o,i,a,f;return xG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,l("LOADING","Loading")),h(LG(LG({},p),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},t.next=6,fetch("".concat(c.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(e),o);case 6:return i=t.sent,t.next=9,i.json();case 9:t.sent.error||(a=p.extra.options.filter((function(t){return t.id!==e})),f=LG(LG({},p.extra),{},{options:a}),h(LG(LG({},p),{},{loading:!1,extra:f})),F(f),s(vr.Success,l("OPTION_DELETED","Option deleted"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),h(LG(LG({},p),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),M=function(){var e=jG(xG().mark((function e(){var o,i,f,d,y,v;return xG().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(vr.Info,l("LOADING","Loading")),h(LG(LG({},p),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=6,fetch("".concat(c.root,"/business/").concat(r.id,"/extras/").concat(n.id),o);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(f=r.extras.filter((function(t){return t.id!==n.id})),a&&(d=LG(LG({},r),{},{extras:f}),y=d.categories.map((function(t){var e=t.products.map((function(t){var e=t.extras.filter((function(t){return t.id!==n.id}));return LG(LG({},t),{},{extras:e})}));return LG(LG({},t),{},{products:e})})),v=LG(LG({},d),{},{categories:y}),a(v)),s(vr.Success,l("EXTRA_DELETED","Extra deleted")),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(LG(LG({},p),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var t=jG(xG().mark((function t(e,o){var i,a,f,d,m;return xG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,l("LOADING","Loading")),h(LG(LG({},p),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(o)},t.next=6,fetch("".concat(c.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(e),i);case 6:return a=t.sent,t.next=9,a.json();case 9:(f=t.sent).error||(v({changes:f.error?y.changes:{},result:f.result}),d=p.extra.options.filter((function(t){return t.id===f.result.id&&Object.assign(t,f.result),!0})),m=LG(LG({},p.extra),{},{options:d}),h(LG(LG({},p),{},{loading:!1,extra:m})),F(m),s(vr.Success,l("OPTION_SAVED","Option saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),h(LG(LG({},p),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){v({changes:{},result:{}}),h(LG(LG({},p),{},{extra:n}))}),[n]),Object(o.useEffect)((function(){x({conditioned:!1,enabled:!0,name:"",min:1,max:1})}),[null==n?void 0:n.id]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,wG({},t,{changesState:y,cleanChangesState:D,handleChangeItem:function(t,e){void 0!==e&&b(e),v({result:{},changes:LG(LG({},y.changes),t)})},extraState:p,editOptionId:g,addChangesState:O,handleChangeImage:function(t,e){var r=new window.FileReader;r.readAsDataURL(t),e===g?r.onload=function(){v({result:{},changes:LG(LG({},y.changes),{},{image:r.result})})}:(b(e),r.onload=function(){v({result:{},changes:{image:r.result}})}),r.onerror=function(t){return console.log(t)}},handleChangeInput:function(t,e){e===g?v({result:{},changes:LG(LG({},y.changes),{},_G({},t.target.name,t.target.value))}):(b(e),v({result:{},changes:_G({},t.target.name,t.target.value)}))},handleChangeOptionEnable:function(t,e){e===g?v({result:{},changes:LG(LG({},y.changes),{},{enabled:t})}):(b(e),v({result:{},changes:{enabled:t}}))},handleAddOption:B,handleChangeAddOption:function(t){x(LG(LG({},O),{},_G({},t.target.name,t.target.value)))},handleChangeAddOptionEnable:function(t){x(LG(LG({},O),{},{enabled:t}))},handleDeteteOption:R,handleDeleteExtra:M,handleSucccessDeleteOption:function(t){var e=p.extra.options.filter((function(e){return e.id!==t})),r=LG(LG({},p.extra),{},{options:e});h(LG(LG({},p),{},{loading:!1,extra:r})),F(r)},handleUpdateOption:U,curOption:j,openModal:_,setCurOption:S,setOpenModal:P,handleOpenModal:G,dragoverOptionId:T,isOptionsBottom:C,handleDragStart:function(t,e){t.dataTransfer.setData("transferOptionId",e.id);var r=document.createElement("div");r.classList.add("ghostDragging"),r.innerHTML=e.name,document.body.appendChild(r),t.dataTransfer.setDragImage(r,0,0),N(!1)},hanldeDragOver:function(t,e,r){if(t.preventDefault(),t.target.closest(".draggable-option"))if(r){var n=window.scrollY+t.target.getBoundingClientRect().top+t.target.offsetHeight/2;t.clientY>n?(N(!0),I(null)):(N(!1),I(e.id))}else I(e.id)},handleDrop:function(t,e){t.preventDefault();var r,n=parseInt(t.dataTransfer.getData("transferOptionId"));e.id!==n&&(r=C?(null==e?void 0:e.rank)+1:null==e?void 0:e.rank,N(!1),Y(n,{rank:r}))},handleDragEnd:function(){for(var t=document.getElementsByClassName("ghostDragging");t.length>0;)t[0].parentNode.removeChild(t[0]);I(null)}})))};function AG(t){return AG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AG(t)}function CG(){return CG=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CG.apply(this,arguments)}function NG(t){return function(t){if(Array.isArray(t))return zG(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||YG(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DG(){DG=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==AG(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function GG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function FG(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?GG(Object(r),!0).forEach((function(e){UG(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GG(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function UG(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BG(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function RG(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){BG(i,n,o,a,c,"next",t)}function c(t){BG(i,n,o,a,c,"throw",t)}a(void 0)}))}}function MG(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||YG(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YG(t,e){if(t){if("string"==typeof t)return zG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zG(t,e):void 0}}function zG(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}IG.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},IG.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $G=function(t){var e=t.businessId,r=t.extraId,n=t.optionId,a=t.subOptionId,c=t.metafields,u=t.UIComponent,s=t.handleSuccessAddMetaFields,l=t.handleSuccessDeleteBusinessMetaFields,f=MG(er(),1)[0],p=MG(hr(),1)[0],h=MG(br(),2)[1].showToast,d=MG(Ir(),2)[1],y=MG(Object(o.useState)({metaFields:[],loading:!1,error:null}),2),v=y[0],m=y[1],g=MG(Object(o.useState)({loading:!1,result:{error:!1}}),2),b=g[0],w=g[1],O=function(){var t=RG(DG().mark((function t(){var o,i,c,u;return DG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(FG(FG({},v),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},t.next=5,fetch("".concat(f.root,"/business/").concat(e,"/extras/").concat(r,"/options/").concat(n,"/suboptions/").concat(a,"/metafields"),o);case 5:return i=t.sent,t.next=8,i.json();case 8:c=t.sent,u=c.result,m(FG(FG({},v),{},{loading:!1,metaFields:u})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(FG(FG({},v),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=RG(DG().mark((function t(o){var i,c;return DG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(vr.Info,d("LOADING","Loading")),w(FG(FG({},b),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},t.next=6,fetch("".concat(f.root,"/business/").concat(e,"/extras/").concat(r,"/options/").concat(n,"/suboptions/").concat(a,"/metafields/").concat(o),i);case 6:t.sent.ok&&(h(vr.Success,d("METAFIELD_DELETED","Metafield deleted")),c=v.metaFields.filter((function(t){return t.id!==o})),m(FG(FG({},v),{},{metaFields:c})),w({loading:!1,result:{error:!1}}),l&&l(o)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),w({result:{error:!0,result:t.t0.message},loading:!1});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=RG(DG().mark((function t(o){var i,c,u,l,y,g;return DG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(vr.Info,d("LOADING","Loading")),w(FG(FG({},b),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)},body:JSON.stringify(o)},t.next=6,fetch("".concat(f.root,"/business/").concat(e,"/extras/").concat(r,"/options/").concat(n,"/suboptions/").concat(a,"/metafields"),i);case 6:return c=t.sent,t.next=9,c.json();case 9:u=t.sent,l=u.error,y=u.result,l?w({loading:!1,result:{error:!0,result:y}}):(h(vr.Success,d("METAFIELD_ADDED","Metafield added")),[],g=[].concat(NG(v.metaFields),[y]),m(FG(FG({},v),{},{metaFields:g})),w({loading:!1,result:{error:!1}}),s&&s(y)),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),w({result:{error:!0,result:t.t0.message},loading:!1});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){c?m(FG(FG({},v),{},{metaFields:c})):O()}),[c]),i.a.createElement(i.a.Fragment,null,u&&i.a.createElement(u,CG({},t,{metaFieldsList:v,actionState:b,handleDeleteMetaField:x,handeAddMetaField:E})))};function qG(t){return qG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qG(t)}function JG(){return JG=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JG.apply(this,arguments)}function VG(t){return function(t){if(Array.isArray(t))return rF(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||eF(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HG(){HG=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==qG(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function WG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function KG(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?WG(Object(r),!0).forEach((function(e){ZG(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WG(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ZG(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XG(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function QG(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){XG(i,n,o,a,c,"next",t)}function c(t){XG(i,n,o,a,c,"throw",t)}a(void 0)}))}}function tF(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||eF(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eF(t,e){if(t){if("string"==typeof t)return rF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rF(t,e):void 0}}function rF(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}$G.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$G.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nF=function(t){var e=t.business,r=t.UIComponent,n=t.product,a=t.handleSuccessUpdate,c=t.handleUpdateBusinessState,u=tF(er(),1)[0],s=tF(hr(),1)[0].token,l=tF(br(),2)[1].showToast,f=tF(Ir(),2)[1],p=tF(Object(o.useState)({product:n,loading:!1,error:null}),2),h=p[0],d=p[1],y=tF(Object(o.useState)({extras:null==e?void 0:e.extras,loading:!1,error:null}),2),v=y[0],m=y[1],g=tF(Object(o.useState)({}),2),b=g[0],w=g[1],O=tF(Object(o.useState)(!1),2),x=O[0],E=O[1],j=tF(Object(o.useState)(null),2),S=j[0],L=j[1],_=tF(Object(o.useState)(!1),2),P=_[0],k=_[1],T=function(){var t=QG(HG().mark((function t(r){var o,i,c,p,y;return HG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o={business_id:null==e?void 0:e.id,category_id:null==n?void 0:n.category_id,product_id:null==n?void 0:n.id,extras:JSON.stringify(r)},l(vr.Info,f("LOADING","Loading")),d(KG(KG({},h),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(o)},t.next=7,fetch("".concat(u.root,"/business/").concat(e.id,"/categories/").concat(null==n?void 0:n.category_id,"/products/").concat(n.id),i);case 7:return c=t.sent,t.next=10,c.json();case 10:t.sent.error||(p=null==v?void 0:v.extras.filter((function(t){return r.includes(t.id)})),y=KG(KG({},h.product),{},{extras:p}),d(KG(KG({},h),{},{loading:!1,product:y})),a&&a(y),l(vr.Success,f("EXTRA_SAVED","Extra saved"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),d(KG(KG({},h),{},{loading:!1,error:t.t0.message}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=QG(HG().mark((function t(r,o){var i,c,p,y,g,b;return HG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,f("LOADING","Loading")),m(KG(KG({},v),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(o)},t.next=6,fetch("".concat(u.root,"/business/").concat(e.id,"/extras/").concat(r),i);case 6:return c=t.sent,t.next=9,c.json();case 9:(p=t.sent).error||(y=v.extras.filter((function(t){return t.id===p.result.id&&Object.assign(t,p.result),!0})),m(KG(KG({},v),{},{loading:!1,extras:y})),g=h.product.extras.filter((function(t){return t.id===p.result.id&&Object.assign(t,p.result),!0})),b=KG(KG({},n),{},{extras:g}),d(KG(KG({},h),{},{product:b})),a&&a(b),l(vr.Success,f("EXTRA_SAVED","Extra saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),d(KG(KG({},h),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),A=function(){var t=QG(HG().mark((function t(r){var o,i,c,p,y;return HG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,f("LOADING","Loading")),m(KG(KG({},v),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},t.next=6,fetch("".concat(u.root,"/business/").concat(e.id,"/extras/").concat(r),o);case 6:return i=t.sent,t.next=9,i.json();case 9:t.sent.error||(c=v.extras.filter((function(t){return t.id!==r})),m(KG(KG({},v),{},{loading:!1,extras:c})),p=h.product.extras.filter((function(t){return t.id!==r})),y=KG(KG({},n),{},{extras:p}),d(KG(KG({},h),{},{product:y})),a&&a(y),l(vr.Success,f("EXTRA_DELETED","Extra deleted"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),d(KG(KG({},h),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=QG(HG().mark((function t(){var r,n,o,i,a,p;return HG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==Object.keys(b).length){t.next=3;break}return E(!1),t.abrupt("return");case 3:return t.prev=3,r=KG({business_id:null==e?void 0:e.id},b),l(vr.Info,f("LOADING","Loading")),m(KG(KG({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(r)},t.next=10,fetch("".concat(u.root,"/business/").concat(e.id,"/extras"),n);case 10:return o=t.sent,t.next=13,o.json();case 13:(i=t.sent).error||(w({}),E(!1),a=[].concat(VG(v.extras),[i.result]),m(KG(KG({},v),{},{loading:!1,extras:a})),c&&(p=KG(KG({},e),{},{extras:a}),c(p)),l(vr.Success,f("EXTRA_ADDED","Extra added"))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(3),m(KG(KG({},v),{},{loading:!1,error:t.t0.message}));case 20:case"end":return t.stop()}}),t,null,[[3,17]])})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=QG(HG().mark((function t(r,o){var i,c,p,y,g,b;return HG().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(KG(KG({},v),{},{loading:!0})),l(vr.Info,f("LOADING","Loading")),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(o)},t.next=6,fetch("".concat(u.root,"/business/").concat(e.id,"/extras/").concat(r),i);case 6:return c=t.sent,t.next=9,c.json();case 9:(p=t.sent).error||(y=v.extras.filter((function(t){return t.id===p.result.id&&Object.assign(t,p.result),!0})),m(KG(KG({},v),{},{loading:!1,extras:y})),g=h.product.extras.filter((function(t){return t.id===p.result.id&&Object.assign(t,p.result),!0})),b=KG(KG({},n),{},{extras:g}),d(KG(KG({},h),{},{product:b})),a&&a(b),l(vr.Success,f("EXTRA_SAVED","Extra saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),d(KG(KG({},h),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){d(KG(KG({},h),{},{product:n}))}),[n]),Object(o.useEffect)((function(){m(KG(KG({},v),{},{extras:null==e?void 0:e.extras}))}),[e]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,JG({},t,{changesState:b,isAddMode:x,productState:h,extrasState:v,handleChangeExtraInput:function(t,e){var r={name:t.target.value};I(e,r)},handleDeteteExtra:A,handleOpenAddForm:function(){return E(!0)},handleAddExtra:C,handleChangeAddExtraInput:function(t){w({name:t.target.value})},handleProductExtraState:T,dragoverExtaId:S,isExtrasBottom:P,handleDragStart:function(t,e){t.dataTransfer.setData("transferExtraId",e.id);var r=document.createElement("div");r.classList.add("ghostDragging"),r.innerHTML=e.name,document.body.appendChild(r),t.dataTransfer.setDragImage(r,0,0),k(!1)},hanldeDragOver:function(t,e,r){if(t.preventDefault(),t.target.closest(".draggable-extra"))if(r){var n=window.scrollY+t.target.getBoundingClientRect().top+t.target.offsetHeight/2;t.clientY>n?(k(!0),L(null)):(k(!1),L(e.id))}else L(e.id)},handleDrop:function(t,e){t.preventDefault();var r,n=parseInt(t.dataTransfer.getData("transferExtraId"));e.id!==n&&(r=P?(null==e?void 0:e.rank)+1:null==e?void 0:e.rank,k(!1),N(n,{rank:r}))},handleDragEnd:function(){for(var t=document.getElementsByClassName("ghostDragging");t.length>0;)t[0].parentNode.removeChild(t[0]);L(null)}})))};function oF(t){return oF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oF(t)}function iF(){return iF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iF.apply(this,arguments)}function aF(){aF=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==oF(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function cF(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function uF(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){cF(i,n,o,a,c,"next",t)}function c(t){cF(i,n,o,a,c,"throw",t)}a(void 0)}))}}function sF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lF(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sF(Object(r),!0).forEach((function(e){fF(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sF(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fF(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pF(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return hF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hF(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hF(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}nF.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dF=function(t){var e,r,n,a,c,u,s,l=t.UIComponent,f=t.useOrderContext,p=t.onSave,h={},d=pF(er(),1)[0],y=pF(Object(o.useState)({product:t.product,loading:!1,error:null}),2),v=y[0],m=y[1],g=pF(Object(o.useState)({ingredients:{},options:{}}),2),b=g[0],w=g[1],O=pF(Object(o.useState)({}),2),x=O[0],E=O[1],j=pF(Object(o.useState)(null),2),S=j[0],L=j[1],_=void 0!==(null===(e=t.productCart)||void 0===e?void 0:e.code),P=pF(Rn(),2),k=P[0],T=P[1],I=T.addProduct,A=T.updateProduct,C=_?t.productCart.quantity:0,N=k.carts["businessId:".concat(t.businessId)],D=v.product&&(null==N||null===(r=N.products)||void 0===r?void 0:r.find((function(t){return t.id===v.product.id}))),G=((null==D?void 0:D.quantity)||0)-C,F=((null==N||null===(n=N.products)||void 0===n?void 0:n.reduce((function(t,e){return t+(v.product&&e.id===v.product.id?e.quantity:0)}),0))||0)-C,U=pF(jn(),1)[0],B=(U.configs.max_product_amount?parseInt(U.configs.max_product_amount):100)-G,R=(null!==(a=v.product)&&void 0!==a&&a.inventoried?null===(c=v.product)||void 0===c?void 0:c.quantity:void 0)-F,M=(null===(u=v.product)||void 0===u?void 0:u.inventoried)&&0===(null===(s=v.product)||void 0===s?void 0:s.quantity);R=isNaN(R)?B:R;var Y=Math.min(B,R),z=function(t){for(var e,r=0,n=0;n<(null===(o=v.product)||void 0===o?void 0:o.extras.length);n++)for(var o,i,a=null===(i=v.product)||void 0===i?void 0:i.extras[n],c=0;c<a.options.length;c++)for(var u=a.options[c],s=0;s<u.suboptions.length;s++){var l,f,p=u.suboptions[s];if(null!==(l=t.options["id:".concat(u.id)])&&void 0!==l&&null!==(f=l.suboptions["id:".concat(p.id)])&&void 0!==f&&f.selected){var h=t.options["id:".concat(u.id)].suboptions["id:".concat(p.id)],d=u.allow_suboption_quantity?h.quantity:1;r+=(u.with_half_option&&p.half_price&&"whole"!==h.position?p.half_price:p.price)*d}}return(null===(e=v.product)||void 0===e?void 0:e.price)+r},$=function(){var e=uF(aF().mark((function e(){var r,n,o;return aF().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(lF(lF({},v),{},{loading:!0})),r={},h.product=r,e.next=6,d.businesses(t.businessId).categories(t.categoryId).products(t.productId).get({cancelToken:r});case 6:n=e.sent,o=n.content.result,m(lF(lF({},v),{},{loading:!1,product:o})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),m(lF(lF({},v),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),q=function t(e,r){v.product.extras.forEach((function(n){n.options.forEach((function(n){if(n.respect_to===r){var o,i=null===(o=e.options["id:".concat(n.id)])||void 0===o?void 0:o.suboptions;i&&Object.keys(i).map((function(r){return t(e,parseInt(r.split(":")[1]))})),e.options["id:".concat(n.id)]&&(e.options["id:".concat(n.id)].suboptions={})}}))}))},J=function(t,e,r){var n=JSON.parse(JSON.stringify(b));if(n.options||(n.options={}),n.options["id:".concat(r.id)]||(n.options["id:".concat(r.id)]={id:r.id,name:r.name,suboptions:{}}),t.selected){if(r.min===r.max&&1===r.min){var o=n.options["id:".concat(r.id)].suboptions;o&&Object.keys(o).map((function(t){return q(n,parseInt(t.split(":")[1]))})),n.options["id:".concat(r.id)]&&(n.options["id:".concat(r.id)].suboptions={})}n.options["id:".concat(r.id)].suboptions["id:".concat(e.id)]=t}else delete n.options["id:".concat(r.id)].suboptions["id:".concat(e.id)],q(n,e.id);var i,a=Object.keys(n.options["id:".concat(r.id)].suboptions).length;r.limit_suboptions_by_max&&(a=null===(i=Object.values(n.options["id:".concat(r.id)].suboptions))||void 0===i?void 0:i.reduce((function(t,e){return t+e.quantity}),0));a<=r.max&&(n.options["id:".concat(r.id)].balance=a,n.unitTotal=z(n),n.total=n.unitTotal*n.quantity,w(n))},V=function(){var t={};return v.product?(v.product.extras.forEach((function(e){e.options.map((function(e){var r,n=null===(r=b.options["id:".concat(e.id)])||void 0===r?void 0:r.suboptions,o=n?Object.keys(n).length:0,i=!1;if(e.respect_to&&b.options){var a=b.options;for(var c in a){var u;if(null!==(u=a[c].suboptions["id:".concat(e.respect_to)])&&void 0!==u&&u.selected){i=!0;break}}}(!e.respect_to||i)&&(e.min>o||e.max<o)&&(t["id:".concat(e.id)]=!0)}))})),E(t),t):t},H=function(){var e=uF(aF().mark((function e(){var r,n,o,i;return aF().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=V(),0!==Object.keys(r).length){e.next=15;break}if(n=!0,!f){e.next=14;break}if(n=!1,null!==(o=t.productCart)&&void 0!==o&&o.code){e.next=11;break}return e.next=8,I(b);case 8:n=e.sent,e.next=14;break;case 11:return e.next=13,A(b);case 13:n=e.sent;case 14:n&&p(b,!(null!==(i=t.productCart)&&void 0!==i&&i.code));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){v.product&&function(e){var r,n,o,i,a={};for(var c in e.ingredients){var u=e.ingredients[c];a["id:".concat(u.id)]={selected:!0}}var s=lF(lF({},t.productCart),{},{id:e.id,price:e.price,name:e.name,businessId:t.businessId,categoryId:e.category_id,inventoried:e.inventoried,stock:e.quantity,ingredients:(null===(r=t.productCart)||void 0===r?void 0:r.ingredients)||a,options:(null===(n=t.productCart)||void 0===n?void 0:n.options)||{},comment:(null===(o=t.productCart)||void 0===o?void 0:o.comment)||null,quantity:(null===(i=t.productCart)||void 0===i?void 0:i.quantity)||1});s.unitTotal=z(s),s.total=s.unitTotal*s.quantity,w(s)}(v.product)}),[v.product,t.productCart]),Object(o.useEffect)((function(){V()}),[b]),Object(o.useEffect)((function(){if(null!=v&&v.product&&Object.keys(null==v?void 0:v.product).length){var t=v.product.extras.map((function(t){return t.options.find((function(t){return 1===t.min&&1===t.max&&1===t.suboptions.length}))}))[0];if(!t)return;var e=t.suboptions[0],r=t.with_half_option&&e.half_price&&"whole"!==(null==e?void 0:e.position)?e.half_price:e.price,n={id:e.id,name:e.name,position:e.position||"whole",price:r,quantity:1,selected:!0,total:r};L({state:n,suboption:e,option:t})}}),[v.product]),Object(o.useEffect)((function(){if(S){var t=S.state,e=S.suboption,r=S.option;J(t,e,r)}}),[S]),Object(o.useEffect)((function(){if(!(t.product||t.businessId&&t.categoryId&&t.productId))throw new Error("`businessId` && `categoryId` && `productId` are required if `product` was not provided.");return!t.product&&t.businessId&&t.categoryId&&t.productId&&$(),function(){h.product&&h.product.cancel()}}),[]),i.a.createElement(i.a.Fragment,null,l&&i.a.createElement(l,iF({},t,{productObject:v,productCart:b,errors:x,editMode:_,isSoldOut:M,maxProductQuantity:Y,increment:function(){Y<=0||b.quantity>=Y||(b.quantity++,b.unitTotal=z(b),b.total=b.unitTotal*b.quantity,w(lF({},b)))},decrement:function(){0!==b.quantity&&(b.quantity--,b.unitTotal=z(b),b.total=b.unitTotal*b.quantity,w(lF({},b)))},handleSave:H,showOption:function(t){var e=!0;if(t.respect_to&&(e=!1,b.options)){var r=b.options;for(var n in r){var o;if(null!==(o=r[n].suboptions["id:".concat(t.respect_to)])&&void 0!==o&&o.selected){e=!0;break}}}return e},handleChangeIngredientState:function(t,e){b.ingredients["id:".concat(e.id)]=t,w(lF(lF({},b),{},{ingredients:b.ingredients}))},handleChangeSuboptionState:J,handleChangeCommentState:function(t){var e=t.target.value;b.comment=e,w(lF(lF({},b),{},{comment:b.comment}))}})))};function yF(t){return yF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yF(t)}function vF(){return vF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vF.apply(this,arguments)}function mF(t){return function(t){if(Array.isArray(t))return LF(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||SF(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gF(){gF=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==yF(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function bF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wF(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bF(Object(r),!0).forEach((function(e){OF(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bF(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function OF(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xF(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function EF(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){xF(i,n,o,a,c,"next",t)}function c(t){xF(i,n,o,a,c,"throw",t)}a(void 0)}))}}function jF(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||SF(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SF(t,e){if(t){if("string"==typeof t)return LF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?LF(t,e):void 0}}function LF(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}dF.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,categoryId:c.a.number,productId:c.a.number,product:c.a.object,productCart:c.a.object,useOrderContext:c.a.bool,onSave:c.a.func},dF.defaultProps={productCart:{},useOrderContext:!0,balance:0};var _F=function(t){var e=t.UIComponent,r=t.business,n=t.categoryId,a=t.product,c=t.handleSuccessUpdate,u=jF(er(),1)[0],s=jF(hr(),1)[0].token,l=jF(br(),2)[1].showToast,f=jF(Ir(),2)[1],p=jF(Object(o.useState)({loading:!1,gallery:[],photos:[],videos:[],error:null}),2),h=p[0],d=p[1],y=jF(Object(o.useState)({changes:{},itemId:null,loading:!1,error:null}),2),v=y[0],m=y[1],g=function(){var t=EF(gF().mark((function t(){var e,o,i,c,l;return gF().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(wF(wF({},h),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},t.next=5,fetch("".concat(u.root,"/business/").concat(r.id,"/categories/").concat(n,"/products/").concat(a.id,"/gallery"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error?d(wF(wF({},h),{},{loading:!1,error:i.result})):(c=i.result.filter((function(t){return 1===t.type})),l=i.result.filter((function(t){return 2===t.type})),d(wF(wF({},h),{},{loading:!1,gallery:i.result,photos:c,videos:l}))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),d(wF(wF({},h),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=EF(gF().mark((function t(e){var o,i,p,y,g,b,w;return gF().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(wF(wF({},v),{},{loading:!0})),l(vr.Info,f("LOADING","Loading")),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(e)},t.next=6,fetch("".concat(u.root,"/business/").concat(r.id,"/categories/").concat(n,"/products/").concat(a.id,"/gallery"),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(p=t.sent).error?m(wF(wF({},v),{},{loading:!1,error:p.result})):(m(wF(wF({},v),{},{loading:!1,changes:{}})),l(vr.Success,f("PRODUCT_GALLERY_ITEM_ADDED","Product gallery item added")),b=[].concat(mF(h.gallery),[p.result]),1===(null===(y=p.result)||void 0===y?void 0:y.type)&&d(wF(wF({},h),{},{gallery:b,photos:[].concat(mF(h.photos),[p.result])})),2===(null===(g=p.result)||void 0===g?void 0:g.type)&&d(wF(wF({},h),{},{gallery:b,videos:[].concat(mF(h.videos),[p.result])})),w=wF(wF({},a),{},{gallery:b}),c&&c(w)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(wF(wF({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=EF(gF().mark((function t(){var e,o,i,p,y,g,b,w,O;return gF().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(wF(wF({},v),{},{loading:!0})),l(vr.Info,f("LOADING","Loading")),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(null==v?void 0:v.changes)},t.next=6,fetch("".concat(u.root,"/business/").concat(r.id,"/categories/").concat(n,"/products/").concat(a.id,"/gallery/").concat(null==v?void 0:v.itemId),e);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?m(wF(wF({},v),{},{loading:!1,error:i.result})):(m(wF(wF({},v),{},{loading:!1,changes:{}})),g=h.gallery.filter((function(t){return t.id===i.result.id&&Object.assign(t,i.result),!0})),1===(null===(p=i.result)||void 0===p?void 0:p.type)&&(b=h.photos.filter((function(t){return t.id===i.result.id&&Object.assign(t,i.result),!0})),d(wF(wF({},d),{},{gallery:g,photos:b}))),2===(null===(y=i.result)||void 0===y?void 0:y.type)&&(w=h.videos.filter((function(t){return t.id===i.result.id&&Object.assign(t,i.result),!0})),d(wF(wF({},d),{},{gallery:g,videos:w}))),O=wF(wF({},a),{},{gallery:g}),c&&c(O),l(vr.Success,f("PRODUCT_GALLERY_ITEM_SAVED","Product gallery item saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(wF(wF({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=EF(gF().mark((function t(e,o){var i,p,y,g,b,w,O;return gF().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(wF(wF({},v),{},{loading:!0})),l(vr.Info,f("LOADING","Loading")),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},t.next=6,fetch("".concat(u.root,"/business/").concat(r.id,"/categories/").concat(n,"/products/").concat(a.id,"/gallery/").concat(e),i);case 6:return p=t.sent,t.next=9,p.json();case 9:(y=t.sent).error?m(wF(wF({},v),{},{loading:!1,error:y.result})):(m(wF(wF({},v),{},{loading:!1,changes:{}})),g=null==h?void 0:h.gallery.filter((function(t){return t.id!==e})),1===o&&(b=null==h?void 0:h.photos.filter((function(t){return t.id!==e})),d(wF(wF({},h),{},{gallery:g,photos:b}))),2===o&&(w=null==h?void 0:h.videos.filter((function(t){return t.id!==e})),d(wF(wF({},h),{},{gallery:g,videos:w}))),O=wF(wF({},a),{},{gallery:g}),c&&c(O),l(vr.Success,f("PRODUCT_GALLERY_ITEM_DELETED","Product gallery item deleted"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(wF(wF({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),x=null,E=function(t,e){m(wF(wF({},v),{},{changes:wF(wF({},v.changes),{},OF({},t.target.name,t.target.value)),itemId:e}))};return Object(o.useEffect)((function(){0!==Object.keys(null==v?void 0:v.changes).length&&null!=v&&v.itemId&&w()}),[null==v?void 0:v.changes]),Object(o.useEffect)((function(){if(null!=a&&a.gallery){var t=null==a?void 0:a.gallery.filter((function(t){return 1===t.type})),e=null==a?void 0:a.gallery.filter((function(t){return 2===t.type}));d(wF(wF({},h),{},{loading:!1,gallery:a.gallery,photos:t,videos:e}))}else g()}),[a]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,vF({},t,{productGalleryState:h,changesState:v,handleChangeItem:function(t,e){m(wF(wF({},v),{},{changes:wF(wF({},null==v?void 0:v.changes),t)},e&&{itemId:e}))},handleChangeImage:function(t,e){var r=new window.FileReader;r.readAsDataURL(t),r.onload=function(){m(wF(wF({},v),{},{changes:wF(wF({},null==v?void 0:v.changes),{},{file:r.result}),itemId:e}))},r.onerror=function(t){return console.log(t)}},handleChangeInput:function(t,e){e?(t.persist(),clearTimeout(x),x=setTimeout((function(){E(t,e)}),1e3)):E(t,e)},handleAddGalleryProduct:function(t){var e=wF(wF({},v.changes),{},{type:t});b(e)},handleDeteteProductGalleryItem:O})))};function PF(t){return PF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PF(t)}function kF(){return kF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kF.apply(this,arguments)}function TF(t){return function(t){if(Array.isArray(t))return BF(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||UF(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IF(){IF=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==PF(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function AF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function CF(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?AF(Object(r),!0).forEach((function(e){NF(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AF(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function NF(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function DF(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function GF(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){DF(i,n,o,a,c,"next",t)}function c(t){DF(i,n,o,a,c,"throw",t)}a(void 0)}))}}function FF(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||UF(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UF(t,e){if(t){if("string"==typeof t)return BF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?BF(t,e):void 0}}function BF(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}_F.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_F.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var RF=function(t){var e=t.businessId,r=t.categoryId,n=t.productId,a=t.metafields,c=t.UIComponent,u=t.handleSuccessAddMetaFields,s=t.handleSuccessDeleteBusinessMetaFields,l=FF(er(),1)[0],f=FF(hr(),1)[0],p=FF(br(),2)[1].showToast,h=FF(Ir(),2)[1],d=FF(Object(o.useState)({metaFields:[],loading:!1,error:null}),2),y=d[0],v=d[1],m=FF(Object(o.useState)({loading:!1,result:{error:!1}}),2),g=m[0],b=m[1],w=function(){var t=GF(IF().mark((function t(){var o,i,a,c;return IF().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(CF(CF({},y),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},t.next=5,fetch("".concat(l.root,"/business/").concat(e,"/categories/").concat(r,"/products/").concat(n,"/metafields"),o);case 5:return i=t.sent,t.next=8,i.json();case 8:a=t.sent,c=a.result,v(CF(CF({},y),{},{loading:!1,metaFields:c})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v(CF(CF({},y),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=GF(IF().mark((function t(o){var i,a;return IF().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),b(CF(CF({},g),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},t.next=6,fetch("".concat(l.root,"/business/").concat(e,"/categories/").concat(r,"/products/").concat(n,"/metafields/").concat(o),i);case 6:t.sent.ok&&(a=y.metaFields.filter((function(t){return t.id!==o})),v(CF(CF({},y),{},{metaFields:a})),b({loading:!1,result:{error:!1}}),s&&s(o),p(vr.Success,h("METAFIELD_DELETED","Metafield deleted"))),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),b({result:{error:!0,result:t.t0.message},loading:!1});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=GF(IF().mark((function t(o){var i,a,c,s,d,m;return IF().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),b(CF(CF({},g),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(o)},t.next=6,fetch("".concat(l.root,"/business/").concat(e,"/categories/").concat(r,"/products/").concat(n,"/metafields"),i);case 6:return a=t.sent,t.next=9,a.json();case 9:c=t.sent,s=c.error,d=c.result,s?b({loading:!1,result:{error:!0,result:d}}):([],m=[].concat(TF(y.metaFields),[d]),v(CF(CF({},y),{},{metaFields:m})),b({loading:!1,result:{error:!1}}),u&&u(d),p(vr.Success,h("METAFIELD_ADDED","Metafield added"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),b({result:{error:!0,result:t.t0.message},loading:!1});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){a?v(CF(CF({},y),{},{metaFields:a})):w()}),[a]),i.a.createElement(i.a.Fragment,null,c&&i.a.createElement(c,kF({},t,{metaFieldsList:y,actionState:g,handleDeleteMetaField:O,handeAddMetaField:x})))};function MF(t){return MF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MF(t)}function YF(){return YF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YF.apply(this,arguments)}function zF(){zF=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==MF(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function $F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qF(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$F(Object(r),!0).forEach((function(e){JF(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function JF(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VF(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function HF(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){VF(i,n,o,a,c,"next",t)}function c(t){VF(i,n,o,a,c,"throw",t)}a(void 0)}))}}function WF(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return KF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KF(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KF(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}RF.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},RF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ZF=function(t){var e=t.business,r=t.UIComponent,n=t.product,a=t.handleSuccessUpdate,c=t.setFormTaxState,u=t.formTaxState,s=t.taxes,l=t.setTaxes,f=t.fees,p=t.setFees,h=WF(er(),1)[0],d=WF(hr(),1)[0],y=WF(un(),1)[0],v=WF(br(),2)[1].showToast,m=WF(Ir(),2)[1],g=WF(Object(o.useState)(n),2),b=g[0],w=g[1],O=WF(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),x=O[0],E=O[1],j=WF(Object(o.useState)({}),2),S=j[0],L=j[1],_=WF(Object(o.useState)({action:null,payload:null}),2),P=_[0],k=_[1],T=WF(Object(o.useState)({open:!1,content:[]}),2),I=T[0],A=T[1],C=function(){var t=HF(zF().mark((function t(r){var n,o,i,c,u;return zF().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(vr.Info,m("LOADING","Loading")),E(qF(qF({},x),{},{loading:!0})),n=qF({},r||x.changes),t.next=6,h.businesses(null==e?void 0:e.id).categories(null==b?void 0:b.category_id).products(null==b?void 0:b.id).save(n,{accessToken:d.token});case 6:o=t.sent,i=o.content,c=i.error,u=i.result,c?E(qF(qF({},x),{},{result:{error:!0,result:u},loading:!1})):(w(qF(qF({},b),u)),E(qF(qF({},x),{},{loading:!1,changes:{}})),a&&a(u),v(vr.Success,m("CHANGES_SAVED","Changes saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),E(qF(qF({},x),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=HF(zF().mark((function t(e,r){var n,o,i,a,c,u,g,b;return zF().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v(vr.Info,m("LOADING","Loading")),!e){t.next=13;break}return t.next=4,fetch("".concat(h.root,"/").concat(r,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.auth)},body:JSON.stringify(qF({},S))});case 4:return i=t.sent,t.next=7,i.json();case 7:a=t.sent,c=a.result,o=c,"taxes"===r?(l(qF(qF({},s),{},JF({},"id:".concat(c.id),{name:c.name,description:c.description,id:c.id,rate:c.rate,type:c.type}))),y.emit("tax_changed",{tax:{name:c.name,description:c.description,id:c.id,rate:c.rate,type:c.type}}),v(vr.Success,m("PRODUCT_TAX_SAVED","Product tax saved"))):(p(qF(qF({},f),{},JF({},"id:".concat(c.id),{name:c.name,description:c.description,id:c.id,fixed:c.fixed,percentage:c.percentage}))),y.emit("fee_changed",{fee:{name:c.name,description:c.description,id:c.id,fixed:c.fixed,percentage:c.percentage}}),v(vr.Success,m("PRODUCT_FEE_SAVED","Product fee saved"))),t.next=21;break;case 13:return t.next=15,fetch("".concat(h.root,"/").concat(r),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.auth)},body:JSON.stringify(S)});case 15:return u=t.sent,t.next=18,u.json();case 18:g=t.sent,b=g.result,"taxes"===r?(l(qF(qF({},s),{},JF({},"id:".concat(b.id),{name:b.name,description:b.description,id:b.id,rate:b.rate,type:b.type}))),v(vr.Success,m("PRODUCT_TAX_SAVED","Product tax saved"))):(p(qF(qF({},f),{},JF({},"id:".concat(b.id),{name:b.name,description:b.description,id:b.id,fixed:b.fixed,percentage:b.percentage}))),v(vr.Success,m("PRODUCT_FEE_SAVED","Product fee saved")));case 21:if(null===(n=o)||void 0===n||!n.error){t.next=23;break}return t.abrupt("return");case 23:k({action:null,payload:null});case 24:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),D=function(){var t=HF(zF().mark((function t(e,r){var n,o,i,a;return zF().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c(qF(qF({},u),{},{loading:!0})),v(vr.Info,m("LOADING","Loading")),!e){t.next=11;break}return t.next=5,fetch("".concat(h.root,"/").concat(r,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.auth)}});case 5:return n=t.sent,t.next=8,n.json();case 8:o=t.sent,o.error||("taxes"===r?(i=s,y.emit("tax_deleted",{tax:i["id:".concat(e)],isRemove:!0}),delete i["id:".concat(e)],l(i),v(vr.Success,m("PRODUCT_TAX_DELETED","Product tax deleted"))):(a=f,y.emit("fee_deleted",{tax:a["id:".concat(e)],isRemove:!0}),delete a["id:".concat(e)],p(a),v(vr.Success,m("PRODUCT_FEE_DELETED","Product fee deleted"))));case 11:c(qF(qF({},u),{},{loading:!1}));case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){w(n)}),[n]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,YF({},t,{productState:b,taxes:s,fees:f,formTaxState:u,taxToEdit:P,alertState:I,setAlertState:A,formState:x,handleClickProperty:function(t,e){E(qF(qF({},x),{},{changes:qF(qF({},x.changes),{},JF({},t,e))}))},handleChangeTax:function(t,e){L(qF(qF({},S),{},JF({},t,e)))},setTaxToEdit:k,handleSaveTax:N,handleDeleteTax:D,handleUpdateClick:C})))};function XF(t){return XF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},XF(t)}function QF(){return QF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QF.apply(this,arguments)}function tU(){tU=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==XF(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function eU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function rU(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?eU(Object(r),!0).forEach((function(e){nU(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eU(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function nU(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oU(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function iU(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return aU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aU(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aU(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ZF.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ZF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cU=function(t){var e=t.UIComponent,r=t.businessId,n=t.productId,a=iU(er(),1)[0],c=iU(hr(),1)[0].token,u=iU(Object(o.useState)({reviews:[],loading:!1,error:null}),2),s=u[0],l=u[1],f=function(){var t,e=(t=tU().mark((function t(){var e,o,i;return tU().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(rU(rU({},s),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=5,fetch("".concat(a.root,"/business/").concat(r,"/product_reviews/").concat(n,"/reviews"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error?l(rU(rU({},s),{},{loading:!1,error:i.error})):l(rU(rU({},s),{},{loading:!1,reviews:i.result})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),l(rU(rU({},s),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){oU(i,n,o,a,c,"next",t)}function c(t){oU(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){f()}),[n]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,QF({},t,{productReviewList:s})))};function uU(){return uU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uU.apply(this,arguments)}function sU(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return lU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lU(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lU(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}cU.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fU=function(t){var e=t.UIComponent,r=t.slug,n=t.categoryId,a=t.productId,c=t.defaultUrl,u=sU(Object(o.useState)(!1),2),s=u[0],l=u[1],f=c||"".concat(window.location.origin,"/store/").concat(r,"?category=").concat(n,"&product=").concat(a);Object(o.useEffect)((function(){var t;window.document.getElementById("addthis_widget")||((t=document.createElement("script")).type="text/javascript",t.src="https://static.addtoany.com/menu/page.js",t.async=!0,t.defer=!0,t.id="addthis_widget",document.body.appendChild(t))}),[]);return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,uU({},t,{updateShowValue:function(t){l(t),t&&window.a2a&&window.a2a.init()},showShareButton:s,urlToShare:f})))};function pU(t){return pU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pU(t)}function hU(){return hU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hU.apply(this,arguments)}function dU(){dU=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==pU(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function yU(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function vU(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yU(i,n,o,a,c,"next",t)}function c(t){yU(i,n,o,a,c,"throw",t)}a(void 0)}))}}function mU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function gU(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mU(Object(r),!0).forEach((function(e){bU(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mU(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bU(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wU(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return OU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OU(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OU(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}fU.propTypes={UIComponent:c.a.elementType,slug:c.a.string,categoryId:c.a.number,productId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element)},fU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xU=function(t){var e,r=t.UIComponent,n=t.handleSuccessUpdate,a=t.handleSuccessDelete,c=t.handleSuccessAdd,u=wU(er(),1)[0],s=wU(hr(),1)[0].token,l=wU(br(),2)[1].showToast,f=wU(Ir(),2)[1],p=wU(Object(o.useState)({tag:null!==(e=t.tag)&&void 0!==e?e:null}),2),h=p[0],d=p[1],y=wU(Object(o.useState)({loading:!1,changes:{},error:null}),2),v=y[0],m=y[1],g=function(){var t=vU(dU().mark((function t(){var e,r,o;return dU().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,f("LOADING","Loading")),m(gU(gU({},v),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(v.changes)},t.next=6,fetch("".concat(u.root,"/tags/").concat(h.tag.id),e);case 6:return r=t.sent,t.next=9,r.json();case 9:(o=t.sent).error?m(gU(gU({},v),{},{loading:!1,error:o.result})):(d({tag:gU(gU({},h.tag),o.result)}),m({loading:!1,changes:{},error:null}),n&&n(o.result),l(vr.Success,f("PRODUCT_TAG_SAVED","Product tag saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(gU(gU({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var e=vU(dU().mark((function e(){var r,n,o;return dU().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(vr.Info,f("LOADING","Loading")),m(gU(gU({},v),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(v.changes)},e.next=6,fetch("".concat(u.root,"/tags"),r);case 6:return n=e.sent,e.next=9,n.json();case 9:(o=e.sent).error?m(gU(gU({},v),{},{loading:!1,error:o.result})):(m({loading:!1,changes:{},error:null}),c&&c(o.result),l(vr.Success,f("PRODUCT_TAG_ADDED","Product tag added")),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(gU(gU({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=vU(dU().mark((function e(){var r,n,o;return dU().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(vr.Info,f("LOADING","Loading")),m(gU(gU({},v),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=6,fetch("".concat(u.root,"/tags/").concat(h.tag.id),r);case 6:return n=e.sent,e.next=9,n.json();case 9:(o=e.sent).error?m(gU(gU({},v),{},{loading:!1,error:o.result})):(m({loading:!1,changes:{},error:null}),a&&a(h.tag.id),l(vr.Success,f("PRODUCT_TAG_DELETED","Product tag deleted")),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(gU(gU({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var e;m({loading:!1,changes:{},error:null}),d({tag:null!==(e=t.tag)&&void 0!==e?e:null})}),[t.tag]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,hU({},t,{tagState:h,formState:v,handleChangeInput:function(t){m(gU(gU({},v),{},{changes:gU(gU({},v.changes),{},bU({},t.target.name,t.target.value))}))},handlechangeImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){m(gU(gU({},v),{},{changes:gU(gU({},v.changes),{},{image:e.result})}))},e.onerror=function(t){return console.log(t)}},handleUpdateProductTag:g,handleAddProductTag:b,handleDeleteProductTag:w,handleChangeItem:function(t){var e=gU(gU({},null==v?void 0:v.changes),t);m(gU(gU({},v),{},{changes:e}))}})))};function EU(t){return EU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},EU(t)}function jU(){return jU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jU.apply(this,arguments)}function SU(t){return function(t){if(Array.isArray(t))return NU(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||CU(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LU(){LU=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==EU(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function _U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function PU(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_U(Object(r),!0).forEach((function(e){kU(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_U(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function kU(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TU(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function IU(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){TU(i,n,o,a,c,"next",t)}function c(t){TU(i,n,o,a,c,"throw",t)}a(void 0)}))}}function AU(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||CU(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CU(t,e){if(t){if("string"==typeof t)return NU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?NU(t,e):void 0}}function NU(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}xU.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var DU=function(t){var e=t.tags,r=t.businessId,n=t.product,a=t.UIComponent,c=t.handleSuccessProductUpdate,u=AU(er(),1)[0],s=AU(hr(),1)[0].token,l=AU(br(),2)[1].showToast,f=AU(Ir(),2)[1],p=AU(Object(o.useState)({loading:!1,tags:[],error:null}),2),h=p[0],d=p[1],y=AU(Object(o.useState)([]),2),v=y[0],m=y[1],g=AU(Object(o.useState)({loading:!1,error:null}),2),b=g[0],w=g[1],O=AU(Object(o.useState)(null),2),x=O[0],E=O[1],j=function(){var t=IU(LU().mark((function t(){var e,r,n,o,i,a;return LU().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(PU(PU({},h),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},r=null,n=[],x&&n.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}),n.length&&(r={conditions:n,conector:"AND"}),o=r?"".concat(u.root,"/tags?where=").concat(JSON.stringify(r)):"".concat(u.root,"/tags"),t.next=10,fetch(o,e);case 10:return i=t.sent,t.next=13,i.json();case 13:(a=t.sent).error?d(PU(PU({},h),{},{loading:!1,error:a.result})):d(PU(PU({},h),{},{loading:!1,tags:a.result})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),d(PU(PU({},h),{},{loading:!1,error:[t.t0.message]}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=IU(LU().mark((function t(e){var o,i,a,p,h;return LU().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,f("LOADING","Loading")),w({loading:!0,error:null}),o={tags:JSON.stringify(e)},t.next=6,u.businesses(r).categories(n.category_id).products(n.id).save(o,{accessToken:s});case 6:i=t.sent,a=i.content,p=a.error,h=a.result,p?w({loading:!1,error:h}):(w({loading:!1,error:null}),c&&c(h),l(vr.Success,f("CHANGES_SAVED","Changes saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t=null==e?void 0:e.reduce((function(t,e){return[].concat(SU(t),[e.id])}),[]);m(t)}),[e]),Object(o.useEffect)((function(){j()}),[x]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,jU({},t,{tagsState:h,searchValue:x,onSearch:E,selectedTagIds:v,actionState:b,handleSuccessUpdate:function(t){var e=h.tags.map((function(e){return e.id===t.id?PU(PU({},e),t):e}));d(PU(PU({},h),{},{tags:e}))},handleSuccessDelete:function(t){var e=h.tags.filter((function(e){return e.id!==t}));d(PU(PU({},h),{},{tags:e}))},handleSuccessAdd:function(t){d(PU(PU({},h),{},{tags:[].concat(SU(h.tags),[t])}))},handleChangeProductTag:function(t,e){var r=[];r=t?[].concat(SU(v),[e]):v.filter((function(t){return t!==parseInt(e)})),m(r),S(r)},handleSelectNoneTags:function(){m([]),S([])},handleSelectAllTags:function(){var t,e=null===(t=h.tags)||void 0===t?void 0:t.reduce((function(t,e){return[].concat(SU(t),[e.id])}),[]);m(e),S(e)}})))};function GU(){return GU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},GU.apply(this,arguments)}DU.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},DU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var FU=function(t){var e=t.hero,r=t.gallery,n=t.UIComponent;return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,GU({},t,{hero:e,gallery:r})))};function UU(t){return UU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UU(t)}function BU(){return BU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},BU.apply(this,arguments)}function RU(){RU=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==UU(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function MU(t){return function(t){if(Array.isArray(t))return WU(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||HU(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YU(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function zU(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){YU(i,n,o,a,c,"next",t)}function c(t){YU(i,n,o,a,c,"throw",t)}a(void 0)}))}}function $U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qU(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$U(Object(r),!0).forEach((function(e){JU(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$U(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function JU(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VU(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||HU(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HU(t,e){if(t){if("string"==typeof t)return WU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?WU(t,e):void 0}}function WU(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}FU.propTypes={UIComponent:c.a.elementType,hero:c.a.string,gallery:c.a.arrayOf(c.a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},FU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var KU=function(t){var e=t.business,r=t.product,n=t.ingredient,a=t.UIComponent,c=t.handleSuccessUpdate,u=VU(er(),1)[0],s=VU(hr(),1)[0].token,l=VU(br(),2)[1].showToast,f=VU(Ir(),2)[1],p=VU(Object(o.useState)({ingredient:n,loading:!1,error:null}),2),h=p[0],d=p[1],y=VU(Object(o.useState)({}),2),v=y[0],m=y[1],g=VU(Object(o.useState)(!1),2),b=g[0],w=g[1],O=function(){var n=zU(RU().mark((function n(){var o,i,a,p,y,g;return RU().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=qU(qU({},o={business_id:null==e?void 0:e.id,category_id:null==r?void 0:r.category_id,product_id:null==r?void 0:r.id}),v),l(vr.Info,f("LOADING","Loading")),d(qU(qU({},h),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(o)},n.next=8,fetch("".concat(u.root,"/business/").concat(e.id,"/categories/").concat(null==r?void 0:r.category_id,"/products/").concat(r.id,"/ingredients"),i);case 8:return a=n.sent,n.next=11,a.json();case 11:(p=n.sent).error||(m({}),d(qU(qU({},h),{},{loading:!1,ingredient:p.result})),y=r.ingredients?[].concat(MU(r.ingredients),[p.result]):[p.result],g=qU(qU({},r),{},{ingredients:y}),c&&c(g),l(vr.Success,f("INGREDIENT_SAVED","Ingredient saved")),t.onClose&&t.onClose()),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),d(qU(qU({},h),{},{loading:!1,error:n.t0.message}));case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(){return n.apply(this,arguments)}}(),x=function(){var t=zU(RU().mark((function t(){var o,i,a,p,y,g;return RU().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=qU(qU({},o={business_id:null==e?void 0:e.id,category_id:null==r?void 0:r.category_id,product_id:null==r?void 0:r.id}),v),l(vr.Info,f("LOADING","Loading")),d(qU(qU({},h),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(o)},t.next=8,fetch("".concat(u.root,"/business/").concat(e.id,"/categories/").concat(null==r?void 0:r.category_id,"/products/").concat(r.id,"/ingredients/").concat(n.id),i);case 8:return a=t.sent,t.next=11,a.json();case 11:(p=t.sent).error||(m({}),d(qU(qU({},h),{},{loading:!1,ingredient:p.result})),y=r.ingredients.filter((function(t){return t.id===n.id&&Object.assign(t,p.result),!0})),g=qU(qU({},r),{},{ingredients:y}),c&&c(g),l(vr.Success,f("INGREDIENT_SAVED","Ingredient saved"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),d(qU(qU({},h),{},{loading:!1,error:t.t0.message}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var o=zU(RU().mark((function o(){var i,a,p,y,v;return RU().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,l(vr.Info,f("LOADING","Loading")),d(qU(qU({},h),{},{loading:!1})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},o.next=6,fetch("".concat(u.root,"/business/").concat(e.id,"/categories/").concat(null==r?void 0:r.category_id,"/products/").concat(r.id,"/ingredients/").concat(n.id),i);case 6:return a=o.sent,o.next=9,a.json();case 9:(p=o.sent).error||(d(qU(qU({},h),{},{loading:!1,ingredient:p.result})),y=r.ingredients.filter((function(t){return t.id!==n.id})),v=qU(qU({},r),{},{ingredients:y}),c&&c(v),l(vr.Success,f("INGREDIENT_DELETED","Ingredient deleted")),t.onClose&&t.onClose()),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0),d(qU(qU({},h),{},{loading:!1,error:o.t0.message}));case 16:case"end":return o.stop()}}),o,null,[[0,13]])})));return function(){return o.apply(this,arguments)}}();return Object(o.useEffect)((function(){m({}),d(qU(qU({},h),{},{ingredient:n})),w(!n)}),[n]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,BU({},t,{ingredientState:h,changesState:v,isAddMode:b,handleChangeInput:function(t){m(qU(qU({},v),{},JU({},t.target.name,t.target.value)))},handleDeleteIngredient:E,handleAddIngredient:O,handleUpdateIngredient:x})))};KU.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},KU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ZU=function(t){var e=t.UIComponent;return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,t))};function XU(){return XU=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XU.apply(this,arguments)}function QU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tB(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?QU(Object(r),!0).forEach((function(e){eB(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QU(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function eB(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}ZU.propTypes={UIComponent:c.a.elementType,option:c.a.object.isRequired,error:c.a.bool},ZU.defaultProps={error:!1};var rB=function(t){var e=t.UIComponent,r=t.balance,n=t.option,o=t.suboption,a=t.onChange,c=t.state.selected||t.state.quantity>0,u=0;c&&t.state.quantity&&t.state.quantity>0?u=t.state.quantity:c&&(u=1);var s=t.state.position||"whole",l=n.with_half_option&&o.half_price&&"whole"!==s?o.half_price:o.price,f={id:o.id,name:o.name,price:l,selected:c,quantity:u,position:s,total:l*u},p=function(t){a&&a(t,o,n)};return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,XU({},t,{state:f,increment:function(){n.limit_suboptions_by_max&&r===n.max||(n.limit_suboptions_by_max||f.quantity!==o.max)&&p(tB(tB({},f),{},{selected:0===f.quantity||f.selected,quantity:f.quantity+1,total:f.price*(f.quantity+1)}))},decrement:function(){0!==f.quantity&&p(tB(tB({},f),{},{selected:1!==f.quantity&&f.selected,quantity:f.quantity-1,total:f.price*(f.quantity-1)}))},changePosition:function(t){var e=n.with_half_option&&o.half_price&&"whole"!==t?o.half_price:o.price;p(tB(tB({},f),{},{position:t,price:e,total:e*f.quantity}))},toggleSelect:function(){!f.selected&&n.limit_suboptions_by_max&&r===n.max||p(tB(tB({},f),{},{quantity:f.selected?0:1,selected:!f.selected}))}})))};function nB(){return nB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nB.apply(this,arguments)}function oB(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return iB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iB(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iB(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}rB.propTypes={UIComponent:c.a.elementType,balance:c.a.number.isRequired,option:c.a.object.isRequired,suboption:c.a.object.isRequired,state:c.a.shape({selected:c.a.bool,quantity:c.a.number,position:c.a.string}).isRequired,onChange:c.a.func},rB.defaultProps={state:{},balance:0};var aB=function(t){var e=t.categories,r=t.UIComponent,n=oB(Object(o.useState)(e),2),a=n[0],c=n[1];return Object(o.useEffect)((function(){c(e.filter((function(t){return t.id})))}),[e]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,nB({},t,{categories:a})))};function cB(t){return cB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cB(t)}function uB(){return uB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uB.apply(this,arguments)}function sB(){sB=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==cB(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function lB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fB(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lB(Object(r),!0).forEach((function(e){pB(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lB(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pB(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hB(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function dB(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){hB(i,n,o,a,c,"next",t)}function c(t){hB(i,n,o,a,c,"throw",t)}a(void 0)}))}}function yB(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return vB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vB(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vB(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}aB.propTypes={UIComponent:c.a.elementType,productsList:c.a.object,categories:c.a.arrayOf(c.a.object),isAllCategory:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},aB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mB=function(t){var e=t.isSearchByName,r=t.isSearchByDescription,n=t.businessId,a=t.UIComponent,c=yB(er(),1)[0],u=yB(Rn(),1)[0],s=yB(Object(o.useState)(null),2),l=s[0],f=s[1],p=yB(Object(o.useState)(null),2),h=p[0],d=p[1],y=yB(Object(o.useState)({products:[],loading:!0,error:!1}),2),v=y[0],m=y[1],g=yB(Object(o.useState)([]),2),b=g[0],w=g[1],O=function(){var t=dB(sB().mark((function t(){var o,i,a,s;return sB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(fB(fB({},v),{},{loading:!0})),t.next=4,c.businesses(n).products().parameters({type:(null===(o=u.options)||void 0===o?void 0:o.type)||1}).get();case 4:i=t.sent,a=i.content.result,s=l||h?a.filter((function(t){return o=t.name,i=t.description,(!l||o.toLowerCase().includes(l.toLowerCase())&&e||i.toLowerCase().includes(l.toLowerCase())&&r)&&(n=t.category_id,!h||Number(n)===Number(h));var n,o,i})):a,m(fB(fB({},v),{},{loading:!1,products:s})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),m(fB(fB({},v),{},{loading:!1,error:t.t0}));case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=dB(sB().mark((function t(){var e,r;return sB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.businesses(n).categories().get();case 2:e=t.sent,r=e.content.result,w(r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){O()}),[l,h]),Object(o.useEffect)((function(){x()}),[]),i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,uB({},t,{categoryValue:!!h,categories:b,productsList:v,handlerClickCategory:function(t){return d(t)},handlerChangeSearch:function(t){return f(t)}})))};function gB(t){return gB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gB(t)}function bB(){return bB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bB.apply(this,arguments)}function wB(){wB=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==gB(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function OB(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function xB(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){OB(i,n,o,a,c,"next",t)}function c(t){OB(i,n,o,a,c,"throw",t)}a(void 0)}))}}function EB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jB(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?EB(Object(r),!0).forEach((function(e){SB(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EB(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function SB(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LB(t){return function(t){if(Array.isArray(t))return kB(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||PB(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _B(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||PB(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PB(t,e){if(t){if("string"==typeof t)return kB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kB(t,e):void 0}}function kB(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}mB.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,isSearchByName:c.a.bool,isSearchByDescription:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mB.defaultProps={isSearchByName:!0,isSearchByDescription:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var TB=function(t){var e=t.UIComponent,r=t.propsToFetch,n=t.isSearchByName,a=t.user,c=_B(er(),1)[0],u=_B(hr(),1)[0].token,s=_B(Object(o.useState)(null),2),l=s[0],f=s[1],p=_B(Object(o.useState)({loading:!1,businesses:[],result:{error:null}}),2),h=p[0],d=p[1],y=_B(Object(o.useState)({loading:!1,services:[],result:{error:null}}),2),v=y[0],m=y[1],g=_B(Object(o.useState)(),2),b=g[0],w=g[1],O=new RegExp(/^[A-Za-z0-9\s]+$/g),x=function(){var t=xB(wB().mark((function t(){var e,o,i,a,u,s,f,p,y,v;return wB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(jB(jB({},h),{},{loading:!0})),e=null,o=[],l&&(i=[],a=O.test(l),n&&i.push({attribute:"name",value:{condition:"ilike",value:a?encodeURI("%".concat(l,"%")):"%".concat(l,"%")}}),o.push({conector:"OR",conditions:i})),o.length&&(e={conditions:o,conector:"AND"}),u=e?c.businesses().asDashboard().select(r).where(e):c.businesses().asDashboard().select(r),t.next=9,u.get();case 9:s=t.sent,f=s.content,p=f.error,y=f.result,v=f.pagination,d(jB(jB({},h),{},p?{loading:!1,error:y}:{loading:!1,businesses:y,pagination:v})),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),d(jB(jB({},h),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=xB(wB().mark((function t(){var e,r,n,o,i,s,l;return wB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(jB(jB({},v),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},r="".concat(c.root,"/users/").concat(null==a?void 0:a.id,"/products"),t.next=6,fetch(r,e);case 6:return n=t.sent,t.next=9,n.json();case 9:o=t.sent,i=o.error,s=o.result,l=o.pagination,m(jB(jB({},v),{},i?{loading:!1,error:s}:{loading:!1,services:s,pagination:l})),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),m(jB(jB({},v),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){E()}),[null==a?void 0:a.id]),Object(o.useEffect)((function(){x()}),[l]),Object(o.useEffect)((function(){var t,e;if(void 0===b&&(null==h||null===(t=h.businesses)||void 0===t?void 0:t.length)>0&&(null==v||null===(e=v.services)||void 0===e?void 0:e.length)>0){var r=[];h.businesses.forEach((function(t){null!=v&&v.services.reduce((function(t,e){return[].concat(LB(t),[e.business_id])}),[]).includes(t.id)&&r.push(t.id)})),w(r)}}),[null==h?void 0:h.businesses,null==v?void 0:v.services,b]),Object(o.useEffect)((function(){var t,e;if(void 0!==b&&(null==h||null===(t=h.businesses)||void 0===t?void 0:t.length)>0&&(null==v||null===(e=v.services)||void 0===e?void 0:e.length)>0){var r=[];h.businesses.forEach((function(t){null!=v&&v.services.reduce((function(t,e){return[].concat(LB(t),[e.business_id])}),[]).includes(t.id)&&r.push(t.id)})),w(r)}}),[null==a?void 0:a.id,null==v?void 0:v.services]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,bB({},t,{searchValue:l,businessIds:b,onSearch:f,businessList:h,userServiceList:v,handleChangeCheckBox:function(t){var e=[];e=null!=b&&b.includes(t)?b.filter((function(e){return e!==t})):b?[].concat(LB(b),[t]):[t],w(e)},handleUpdateBusinessIds:function(t){w(t)},handleUpdateServices:function(t){m(jB(jB({},v),{},{services:t}))}})))};function IB(){return IB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},IB.apply(this,arguments)}function AB(){AB=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==CB(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function CB(t){return CB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CB(t)}function NB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function DB(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?NB(Object(r),!0).forEach((function(e){GB(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NB(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function GB(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FB(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function UB(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return BB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BB(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BB(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}TB.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},TB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var RB=function(t){var e=t.UIComponent,r=t.user,n=t.handleSuccessUpdate,a=UB(er(),1)[0],c=UB(hr(),1)[0],u=UB(br(),2)[1].showToast,s=UB(Ir(),2)[1],l=UB(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),f=l[0],p=l[1],h=function(){var t,e=(t=AB().mark((function t(e){var o,i,l,h,d,y,v,m,g,b;return AB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,p(DB(DB({},f),{},{loading:!0})),u(vr.Info,s("LOADING","Loading")),i={},e&&(f.changes=DB(DB({},f.changes),e)),2===(null===(o=c.user)||void 0===o?void 0:o.level)){t.next=12;break}return t.next=8,a.users(null==r?void 0:r.id).save(f.changes);case 8:l=t.sent,i=l.content,t.next=21;break;case 12:for(d in h=DB({},f.changes))("object"===CB(h[d])&&null!==h[d]||Array.isArray(h[d]))&&(h[d]=JSON.stringify(h[d]));return y={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)},body:JSON.stringify(h)},t.next=17,fetch("".concat(a.root,"/professionals/").concat(null==r?void 0:r.id),y);case 17:return v=t.sent,t.next=20,v.json();case 20:i=t.sent;case 21:g=(m=i).result,b=m.error,p(DB(DB({},f),{},{changes:b?f.changes:{},result:g,loading:!1})),b||(u(vr.Success,s("SCHEDULE_UPDATED","Schedule updated")),n&&n(g)),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(0),p(DB(DB({},f),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 29:case"end":return t.stop()}}),t,null,[[0,26]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){FB(i,n,o,a,c,"next",t)}function c(t){FB(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,IB({},t,{formState:f,handleChangeInput:function(t,e){var r={};e?Object.values(t).map((function(t){r=DB(DB({},r),{},GB({},t.name,t.value))})):r=GB({},t.target.name,t.target.value),p(DB(DB({},f),{},{changes:DB(DB({},f.changes),r)}))},handleChangeItem:function(t){var e=DB(DB({},f.changes),t);p(DB(DB({},f),{},{changes:e}))},handleRemoveKey:function(t){var e=DB({},null==f?void 0:f.changes);delete e[t],p(DB(DB({},f),{},{changes:e}))},handleUpdateClick:h})))};function MB(t){return MB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MB(t)}function YB(){return YB=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YB.apply(this,arguments)}function zB(){zB=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==MB(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function $B(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qB(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$B(Object(r),!0).forEach((function(e){JB(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$B(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function JB(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VB(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function HB(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){VB(i,n,o,a,c,"next",t)}function c(t){VB(i,n,o,a,c,"throw",t)}a(void 0)}))}}function WB(t){return function(t){if(Array.isArray(t))return XB(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ZB(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KB(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||ZB(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZB(t,e){if(t){if("string"==typeof t)return XB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?XB(t,e):void 0}}function XB(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}RB.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},RB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var QB=function(t){var e=t.UIComponent,r=t.businessId,n=t.services,a=t.userId,c=t.handleUpdateServices,u=t.propsToFetch,s=KB(er(),1)[0],l=KB(Ir(),2)[1],f=KB(br(),2)[1].showToast,p=KB(hr(),1)[0].token,h=KB(Object(o.useState)([]),2),d=h[0],y=h[1],v=KB(Object(o.useState)([]),2),m=v[0],g=v[1],b=KB(Object(o.useState)([]),2),w=b[0],O=b[1],x=KB(Object(o.useState)({loading:!1,result:{error:!1}}),2),E=x[0],j=x[1],S=KB(Object(o.useState)({loading:!0,business:{},error:null}),2),L=S[0],_=S[1],P=function(){var t=HB(zB().mark((function t(){var e,n,o,i;return zB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_(qB(qB({},L),{},{loading:!0})),t.next=4,s.businesses(r).asDashboard().select(u).get();case 4:e=t.sent,n=e.content,o=n.result,i=n.error,_(qB(qB({},L),{},i?{error:o,loading:!1}:{business:o,loading:!1,error:null})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),_(qB(qB({},L),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=HB(zB().mark((function t(e){var r,o,i;return zB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(qB(qB({},E),{},{loading:!0})),f(vr.Info,l("LOADING","Loading")),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(e)},t.next=6,fetch("".concat(s.root,"/users/").concat(a,"/products"),r);case 6:return o=t.sent,t.next=9,o.json();case 9:null!=(i=t.sent)&&i.error?j(qB(qB({},E),{},{result:i,loading:!1})):(j(qB(qB({},E),{},{result:{error:!1},loading:!1})),c&&c([].concat(WB(n),[i.result])),f(vr.Success,l("SERVICE_ADDED","Service added"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),j(qB(qB({},E),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=HB(zB().mark((function t(e){var r,o,i,u;return zB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(qB(qB({},E),{},{loading:!0})),f(vr.Info,l("LOADING","Loading")),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},t.next=6,fetch("".concat(s.root,"/users/").concat(a,"/products/").concat(e),r);case 6:return o=t.sent,t.next=9,o.json();case 9:null!=(i=t.sent)&&i.error?j(qB(qB({},E),{},{result:i,loading:!1})):(j(qB(qB({},E),{},{result:{error:!1},loading:!1})),c&&(u=n.filter((function(t){return t.id!==e})),c(u)),f(vr.Success,l("SERVICE_DELETED","Service deleted"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),j(qB(qB({},E),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t=[];if((null==n?void 0:n.length)>0){t=n.reduce((function(t,e){return[].concat(WB(t),[e.product_id])}),[]),g(t);var e=n.reduce((function(t,e){return[].concat(WB(t),[e.product])}),[]);O(e)}else g([]),O([]);!function(t){var e,r;if(null!=L&&null!==(e=L.business)&&void 0!==e&&null!==(r=e.categories)&&void 0!==r&&r.length){var n,o=[];y(o),function e(r){return(null==r?void 0:r.length)>0&&(null==r?void 0:r.forEach((function(r){var n,i,a=[],c=null===(n=r.products)||void 0===n?void 0:n.reduce((function(t,e){return[].concat(WB(t),[e.id])}),[]);a=[].concat(WB(a),WB(c)),null!=r&&null!==(i=r.subcategories)&&void 0!==i&&i.length&&r.subcategories.forEach((function t(e){var r,n=null===(r=e.products)||void 0===r?void 0:r.reduce((function(t,e){return[].concat(WB(t),[e.id])}),[]);a=[].concat(WB(a),WB(n)),Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})),o.push({id:r.id,name:r.name,productIds:a,isChecked:0!==a.length&&a.every((function(e){return t.includes(e)}))}),e(r.subcategories)})))}(null==L||null===(n=L.business)||void 0===n?void 0:n.categories)}}(t)}),[n,null==L?void 0:L.business]),Object(o.useEffect)((function(){P()}),[r]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,YB({},t,{selectedProducts:w,subCategoriesList:d,selectedProductsIds:m,setSelectedProducts:O,setSelectedProductsIds:g,handleCreateService:function(t){k({product_id:t,business_id:r,user_id:a})},handleDeleteService:function(t){var e=n.find((function(e){return e.product_id===t}));T(e.id)},businessState:L,actionState:E})))};function tR(t){return tR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tR(t)}function eR(){return eR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eR.apply(this,arguments)}function rR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nR(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rR(Object(r),!0).forEach((function(e){oR(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rR(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oR(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iR(){iR=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==tR(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function aR(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function cR(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){aR(i,n,o,a,c,"next",t)}function c(t){aR(i,n,o,a,c,"throw",t)}a(void 0)}))}}function uR(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return sR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sR(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sR(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}QB.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},QB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var lR=function(t){var e=t.UIComponent,r=t.orderingBusiness,n=uR(er(),1)[0],a=uR(hr(),1)[0],c=uR(Object(o.useState)({countries:[],loading:!0,error:null,enabled:!1}),2),u=c[0],s=c[1],l=uR(Object(o.useState)({loading:!1,error:null}),2),f=l[0],p=l[1],h=uR(Object(o.useState)([]),2),d=h[0],y=h[1],v=uR(Object(o.useState)(!1),2),m=v[0],g=v[1],b=uR(Object(o.useState)(),2),w=b[0],O=b[1],x=["us","usa","united states","united states of american","ca","canada"],E=function(){var t=cR(iR().mark((function t(e){var r,n,o,i,a,c,u,s;return iR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=null==e||null===(r=e.location)||void 0===r?void 0:r.lat,i=null==e||null===(n=e.location)||void 0===n?void 0:n.lng,a="https://integrations.ordering.co/network/search.php?latitude=".concat(o,"&longitude=").concat(i),g(!0),t.next=6,fetch(a,{method:"GET"});case 6:return c=t.sent,t.next=9,c.json();case 9:u=t.sent,s=null==u?void 0:u.result.sort((function(t,e){var r,n;return Kc(null==t||null===(r=t.address)||void 0===r?void 0:r.lat,null==t?void 0:t.address.lon,o,i)-Kc(null==e||null===(n=e.address)||void 0===n?void 0:n.lat,null==e?void 0:e.address.lon,o,i)})),y(s),g(!1);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=cR(iR().mark((function t(){var e,o,i,c;return iR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(nR(nR({},f),{},{loading:!0})),t.next=4,n.setAccessToken(a.token).businesses(null==r?void 0:r.id).save({external_id:null==w?void 0:w._id});case 4:if(e=t.sent,o=e.content,i=o.error,c=o.result,i){t.next=13;break}return t.next=11,S();case 11:t.next=14;break;case 13:p(nR(nR({},f),{},{loading:!1,error:c}));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),p(nR(nR({},f),{},{loading:!1,error:[t.t0.message]}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=cR(iR().mark((function t(){var e,r,o,i;return iR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)},body:JSON.stringify(w)},r="https://integrations.ordering.co/network/sync_store.php?project=".concat(n.project),t.next=5,fetch(r,e);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,p(nR(nR({},f),{},{loading:!1,error:null!=i&&i.error?null==i?void 0:i.result:null})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),p(nR(nR({},f),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=cR(iR().mark((function t(){var e,r,o,i,a;return iR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(nR(nR({},u),{},{loading:!0})),t.next=4,n.countries().get();case 4:e=t.sent,r=e.content,o=r.error,i=r.result,o?s(nR(nR({},u),{},{loading:!1,error:i})):(a=i.filter((function(t){return null==t?void 0:t.enabled})).some((function(t){var e,r;return x.includes(null==t||null===(e=t.code)||void 0===e?void 0:e.toLowerCase())||x.includes(null==t||null===(r=t.name)||void 0===r?void 0:r.toLowerCase())})),s(nR(nR({},u),{},{loading:!1,countries:i,enabled:a}))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),s(nR(nR({},u),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){null!=r&&r.location&&E({location:null==r?void 0:r.location})}),[null==r?void 0:r.location]),Object(o.useEffect)((function(){L()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,eR({},t,{businessList:d,setBusiness:O,handleImport:j,actionState:f,business:w,handleChangeAddress:E,isLoading:m,countriesState:u})))};function fR(t){return fR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fR(t)}function pR(){return pR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pR.apply(this,arguments)}function hR(){hR=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==fR(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function dR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function yR(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dR(Object(r),!0).forEach((function(e){vR(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dR(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function vR(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mR(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function gR(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return bR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bR(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bR(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}lR.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lR.defaultProps={loadMorePageSize:10,paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var wR=function(t){var e=t.UIComponent,r=t.token,n=t.allowedLevels,a=gR(er(),1)[0],c=gR(hr(),2)[1].login,u=gR(un(),1)[0],s=gR(Object(o.useState)({loading:!0,user:{},error:null}),2),l=s[0],f=s[1],p=function(){var t,e=(t=hR().mark((function t(){var e,o,i,u,s;return hR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(yR(yR({},l),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},t.next=5,fetch("".concat(a.root,"/users/me"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,u=i.error,s=i.result,u?(f(yR(yR({},l),{},{loading:!1,error:s})),h()):n.includes(s.level)?c({user:s,token:r,project:null==a?void 0:a.project}):h(),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),f(yR(yR({},l),{},{loading:!1,error:[t.t0.message]})),h();case 18:case"end":return t.stop()}}),t,null,[[0,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){mR(i,n,o,a,c,"next",t)}function c(t){mR(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),h=function(){u.emit("go_to_page",{page:"login"})};return Object(o.useEffect)((function(){null!=a&&a.project&&p()}),[null==a?void 0:a.project]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,pR({},t,{userState:l})))};function OR(){return OR=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OR.apply(this,arguments)}function xR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}wR.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wR.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ER=function(t){var e,r;function n(){var e;return(e=t.call(this)||this).handleExpired=e.handleExpired.bind(xR(e)),e.handleErrored=e.handleErrored.bind(xR(e)),e.handleChange=e.handleChange.bind(xR(e)),e.handleRecaptchaRef=e.handleRecaptchaRef.bind(xR(e)),e}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=n.prototype;return o.getValue=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this.props.grecaptcha.getResponse(this._widgetId):null},o.getWidgetId=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this._widgetId:null},o.execute=function(){var t=this.props.grecaptcha;if(t&&void 0!==this._widgetId)return t.execute(this._widgetId);this._executeRequested=!0},o.executeAsync=function(){var t=this;return new Promise((function(e,r){t.executionResolve=e,t.executionReject=r,t.execute()}))},o.reset=function(){this.props.grecaptcha&&void 0!==this._widgetId&&this.props.grecaptcha.reset(this._widgetId)},o.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},o.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},o.handleChange=function(t){this.props.onChange&&this.props.onChange(t),this.executionResolve&&(this.executionResolve(t),delete this.executionReject,delete this.executionResolve)},o.explicitRender=function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&void 0===this._widgetId){var t=document.createElement("div");this._widgetId=this.props.grecaptcha.render(t,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(t)}this._executeRequested&&this.props.grecaptcha&&void 0!==this._widgetId&&(this._executeRequested=!1,this.execute())},o.componentDidMount=function(){this.explicitRender()},o.componentDidUpdate=function(){this.explicitRender()},o.componentWillUnmount=function(){void 0!==this._widgetId&&(this.delayOfCaptchaIframeRemoving(),this.reset())},o.delayOfCaptchaIframeRemoving=function(){var t=document.createElement("div");for(document.body.appendChild(t),t.style.display="none";this.captcha.firstChild;)t.appendChild(this.captcha.firstChild);setTimeout((function(){document.body.removeChild(t)}),5e3)},o.handleRecaptchaRef=function(t){this.captcha=t},o.render=function(){var t=this.props,e=(t.sitekey,t.onChange,t.theme,t.type,t.tabindex,t.onExpired,t.onErrored,t.size,t.stoken,t.grecaptcha,t.badge,t.hl,function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"]));return i.a.createElement("div",OR({},e,{ref:this.handleRecaptchaRef}))},n}(i.a.Component);ER.displayName="ReCAPTCHA",ER.propTypes={sitekey:c.a.string.isRequired,onChange:c.a.func,grecaptcha:c.a.object,theme:c.a.oneOf(["dark","light"]),type:c.a.oneOf(["image","audio"]),tabindex:c.a.number,onExpired:c.a.func,onErrored:c.a.func,size:c.a.oneOf(["compact","normal","invisible"]),stoken:c.a.string,hl:c.a.string,badge:c.a.oneOf(["bottomright","bottomleft","inline"])},ER.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var jR=r(36),SR=r.n(jR);function LR(){return LR=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LR.apply(this,arguments)}var _R={},PR=0;var kR="onloadcallback";var TR,IR,AR=(TR=function(){return"https://"+(("undefined"!=typeof window&&window.recaptchaOptions||{}).useRecaptchaNet?"recaptcha.net":"www.google.com")+"/recaptcha/api.js?onload="+kR+"&render=explicit"},IR=(IR={callbackName:kR,globalName:"grecaptcha"})||{},function(t){var e=t.displayName||t.name||"Component",r=function(e){var r,n;function i(t,r){var n;return(n=e.call(this,t,r)||this).state={},n.__scriptURL="",n}n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n;var a=i.prototype;return a.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+PR++),this.__scriptLoaderID},a.setupScriptURL=function(){return this.__scriptURL="function"==typeof TR?TR():TR,this.__scriptURL},a.asyncScriptLoaderHandleLoad=function(t){var e=this;this.setState(t,(function(){return e.props.asyncScriptOnLoad&&e.props.asyncScriptOnLoad(e.state)}))},a.asyncScriptLoaderTriggerOnScriptLoaded=function(){var t=_R[this.__scriptURL];if(!t||!t.loaded)throw new Error("Script is not loaded.");for(var e in t.observers)t.observers[e](t);delete window[IR.callbackName]},a.componentDidMount=function(){var t=this,e=this.setupScriptURL(),r=this.asyncScriptLoaderGetScriptLoaderID(),n=IR,o=n.globalName,i=n.callbackName,a=n.scriptId;if(o&&void 0!==window[o]&&(_R[e]={loaded:!0,observers:{}}),_R[e]){var c=_R[e];return c&&(c.loaded||c.errored)?void this.asyncScriptLoaderHandleLoad(c):void(c.observers[r]=function(e){return t.asyncScriptLoaderHandleLoad(e)})}var u={};u[r]=function(e){return t.asyncScriptLoaderHandleLoad(e)},_R[e]={loaded:!1,observers:u};var s=document.createElement("script");for(var l in s.src=e,s.async=!0,IR.attributes)s.setAttribute(l,IR.attributes[l]);a&&(s.id=a);var f=function(t){if(_R[e]){var r=_R[e].observers;for(var n in r)t(r[n])&&delete r[n]}};i&&"undefined"!=typeof window&&(window[i]=function(){return t.asyncScriptLoaderTriggerOnScriptLoaded()}),s.onload=function(){var t=_R[e];t&&(t.loaded=!0,f((function(e){return!i&&(e(t),!0)})))},s.onerror=function(){var t=_R[e];t&&(t.errored=!0,f((function(e){return e(t),!0})))},document.body.appendChild(s)},a.componentWillUnmount=function(){var t=this.__scriptURL;if(!0===IR.removeOnUnmount)for(var e=document.getElementsByTagName("script"),r=0;r<e.length;r+=1)e[r].src.indexOf(t)>-1&&e[r].parentNode&&e[r].parentNode.removeChild(e[r]);var n=_R[t];n&&(delete n.observers[this.asyncScriptLoaderGetScriptLoaderID()],!0===IR.removeOnUnmount&&delete _R[t])},a.render=function(){var e=IR.globalName,r=this.props,n=(r.asyncScriptOnLoad,r.forwardedRef),i=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(r,["asyncScriptOnLoad","forwardedRef"]);return e&&"undefined"!=typeof window&&(i[e]=void 0!==window[e]?window[e]:void 0),i.ref=n,Object(o.createElement)(t,i)},i}(o.Component),n=Object(o.forwardRef)((function(t,e){return Object(o.createElement)(r,LR({},t,{forwardedRef:e}))}));return n.displayName="AsyncScriptLoader("+e+")",n.propTypes={asyncScriptOnLoad:c.a.func},SR()(n,t)})(ER),CR=AR,NR=r(19);function DR(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return GR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GR(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GR(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var FR=function(t){var e=t.handleReCaptcha,r=t.reCaptchaVersion,n=DR(Object(o.useState)(null==r?void 0:r.version),2),a=n[0],c=n[1],u=Object(o.useCallback)((function(t){e({code:t,version:null==r?void 0:r.version})}),[r]);return Object(o.useEffect)((function(){""!==(null==r?void 0:r.siteKey)&&((null==a?void 0:a.version)!==r&&window.grecaptcha&&(window.grecaptcha=void 0),c(null==r?void 0:r.version))}),[r]),i.a.createElement(i.a.Fragment,null,"v3"===(null==r?void 0:r.version)&&"v3"===a&&i.a.createElement(NR.b,{reCaptchaKey:null==r?void 0:r.siteKey},i.a.createElement(NR.a,{onVerify:u})),"v2"===(null==r?void 0:r.version)&&"v2"===a&&i.a.createElement(CR,{key:null==r?void 0:r.siteKey,sitekey:null==r?void 0:r.siteKey,onChange:u,onErrored:function(t){return console.log(t)}}))};function UR(t){return UR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UR(t)}function BR(){return BR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},BR.apply(this,arguments)}function RR(){RR=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==UR(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function MR(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function YR(t){return function(t){if(Array.isArray(t))return HR(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||VR(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zR(Object(r),!0).forEach((function(e){qR(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zR(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qR(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JR(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||VR(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VR(t,e){if(t){if("string"==typeof t)return HR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?HR(t,e):void 0}}function HR(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}FR.propTypes={handleReCaptcha:c.a.func};var WR=function(t){var e=t.UIComponent,r=JR(er(),1)[0],n=JR(hr(),1)[0],a=n.token,c=n.loading,u=JR(Object(o.useState)({loading:!0,error:null,loyaltyPlans:[],pagination:null}),2),s=u[0],l=u[1],f=JR(Object(o.useState)(null),2),p=f[0],h=f[1],d=function(){var t,e=(t=RR().mark((function t(){var e,n,o,i,u,f,p;return RR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,l($R($R({},s),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},n="".concat(r.root,"/loyalty_plans"),t.next=8,fetch(n,e);case 8:return o=t.sent,t.next=11,o.json();case 11:i=t.sent,u=i.error,f=i.result,p=i.pagination,l($R($R({},s),{},u?{loading:!1,error:f}:{loading:!1,loyaltyPlans:f,pagination:p})),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),l($R($R({},s),{},{loading:!1,error:t.t0}));case 21:case"end":return t.stop()}}),t,null,[[2,18]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){MR(i,n,o,a,c,"next",t)}function c(t){MR(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){d()}),[]),Object(o.useEffect)((function(){var t;if(0!==(null==s||null===(t=s.loyaltyPlans)||void 0===t?void 0:t.length)){var e=null==s?void 0:s.loyaltyPlans.find((function(t){return"credit_point"===t.type}));e&&h($R({},e))}}),[null==s?void 0:s.loyaltyPlans]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,BR({},t,{loyaltyPlanList:s,pointWallet:p,handleUpdateWalletBusiness:function(t){var e=null==p?void 0:p.businesses.map((function(e){return e.id===t.id?$R($R({},e),t):e}));h($R($R({},p),{},{businesses:e}))},handleUpdatePointsWallet:function(t){h($R({},t))},handleAddWalletBusiness:function(t){var e=[].concat(YR(null==p?void 0:p.businesses),[t]);h($R($R({},p),{},{businesses:e}))},handleDeleteWalletBusiness:function(t){var e,r=null==p||null===(e=p.businesses)||void 0===e?void 0:e.filter((function(e){return e.id!==t.id}));h($R($R({},p),{},{businesses:r}))}})))};function KR(t){return KR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KR(t)}function ZR(){return ZR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZR.apply(this,arguments)}function XR(t){return function(t){if(Array.isArray(t))return cM(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||aM(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QR(){QR=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==KR(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function tM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function eM(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tM(Object(r),!0).forEach((function(e){rM(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tM(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rM(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nM(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function oM(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){nM(i,n,o,a,c,"next",t)}function c(t){nM(i,n,o,a,c,"throw",t)}a(void 0)}))}}function iM(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||aM(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aM(t,e){if(t){if("string"==typeof t)return cM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cM(t,e):void 0}}function cM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}WR.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},WR.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var uM=function(t){var e,r=t.UIComponent,n=t.paginationSettings,a=t.isSearchByName,c=t.isSearchByDescription,u=iM(er(),1)[0],s=iM(hr(),1)[0].token,l=iM(br(),2)[1].showToast,f=iM(Ir(),2)[1],p=iM(Object(o.useState)(null),2),h=p[0],d=p[1],y=iM(Object(o.useState)({actions:[],loading:!1,error:null}),2),v=y[0],m=y[1],g=iM(Object(o.useState)({clear:!1,changes:{}}),2),b=g[0],w=g[1],O=iM(Object(o.useState)({currentPage:"pages"===n.controlType&&n.initialPage&&n.initialPage>=1?n.initialPage-1:0,pageSize:null!==(e=n.pageSize)&&void 0!==e?e:10,totalItems:null,totalPages:null}),2),x=O[0],E=O[1],j=function(){var t=oM(QR().mark((function t(e,r){var n,o,i,l,f,p,d;return QR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(eM(eM({},v),{},{loading:!0})),n=null,o=[],h&&(i=[],a&&i.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(h,"%"))}}),c&&i.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(h,"%"))}}),o.push({conector:"OR",conditions:i})),o.length&&(n={conditions:o,conector:"AND"}),l={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},f=n?"".concat(u.root,"/event_rules?page=").concat(e,"&page_size=").concat(r,"&where=").concat(JSON.stringify(n)):"".concat(u.root,"/event_rules?page=").concat(e,"&page_size=").concat(r),t.next=10,fetch(f,l);case 10:return p=t.sent,t.next=13,p.json();case 13:(d=t.sent).error?m(eM(eM({},v),{},{loading:!1,error:d.result})):(m({loading:!1,actions:d.result,error:null}),E(eM(eM({},x),{},{currentPage:d.pagination.current_page,totalPages:d.pagination.total_pages,totalItems:d.pagination.total,from:d.pagination.from,to:d.pagination.to}))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),m(eM(eM({},v),{},{loading:!1,error:[t.t0.message]}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e,r){return t.apply(this,arguments)}}(),S=function(){var t=oM(QR().mark((function t(e,r){var n,o,i,a;return QR().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,f("LOADING","Loading")),n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(r)},t.next=5,fetch("".concat(u.root,"/event_rules/").concat(e),n);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error?m(eM(eM({},v),{},{error:i.result})):(L&&(a=null==v?void 0:v.actions.filter((function(t){return t.id===e&&Object.assign(t,i.result),!0})),L(a)),l(vr.Success,f("RECOVERY_ACTION_SAVED","Recovery action saved"))),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),m(eM(eM({},v),{},{error:t.t0.message}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,r){return t.apply(this,arguments)}}(),L=function(t){m(eM(eM({},v),{},{actions:t}))};return Object(o.useEffect)((function(){v.loading||j(1,x.pageSize)}),[h]),Object(o.useEffect)((function(){(Object.keys(null==b?void 0:b.changes).length>0||b.clear)&&!v.loading&&j(1,x.pageSize)}),[b]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,ZR({},t,{searchValue:h,paginationProps:x,recoveryActionList:v,getRecoveryList:j,setFilterValues:w,setPaginationProps:E,handleChangeSearch:function(t){d(t)},handleUpdateAction:S,handleSuccessAddRecoveryAction:function(t){var e=[].concat(XR(v.actions),[t]);E(eM(eM({},x),{},{to:(null==x?void 0:x.to)+1,total:(null==x?void 0:x.total)+1})),m(eM(eM({},v),{},{actions:e}))},handleSuccessUpdateRecoveryAction:L,handleSuccessDeleteRecoveryAction:function(t){var e=v.actions.filter((function(e){return e.id!==t}));E(eM(eM({},x),{},{total:(null==x?void 0:x.total)-1})),m(eM(eM({},v),{},{actions:e}))}})))};function sM(){return sM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sM.apply(this,arguments)}function lM(){lM=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==fM(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function fM(t){return fM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fM(t)}function pM(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function hM(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){pM(i,n,o,a,c,"next",t)}function c(t){pM(i,n,o,a,c,"throw",t)}a(void 0)}))}}function dM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function yM(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dM(Object(r),!0).forEach((function(e){vM(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dM(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function vM(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mM(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return gM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gM(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}uM.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},uM.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var bM=function(t){var e=t.action,r=t.recoveryActionList,n=t.UIComponent,a=t.handleSuccessUpdateRecoveryAction,c=t.handleSuccessAddRecoveryAction,u=t.handleSuccessDeleteRecoveryAction,s=mM(Ir(),2)[1],l=mM(er(),1)[0],f=mM(hr(),1)[0].token,p=mM(br(),2)[1].showToast,h=mM(Object(o.useState)({action:e,loading:!1,error:null}),2),d=h[0],y=h[1],v=mM(Object(o.useState)({loading:!1,changes:{}}),2),m=v[0],g=v[1],b=mM(Object(o.useState)({loading:!1,error:null}),2),w=b[0],O=b[1],x=mM(Object(o.useState)(!1),2),E=x[0],j=x[1],S=function(){return g({loading:!1,changes:{}})},L=function(){var t=hM(lM().mark((function t(){var n,o,i,c,u,h;return lM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in t.prev=0,p(vr.Info,s("LOADING","Loading")),O({loading:!0,error:null}),n=yM({},null==m?void 0:m.changes))("object"===fM(n[o])&&null!==n[o]||Array.isArray(n[o]))&&(n[o]=JSON.stringify(n[o]));return i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(n)},t.next=8,fetch("".concat(l.root,"/event_rules/").concat(e.id),i);case 8:return c=t.sent,t.next=11,c.json();case 11:(u=t.sent).error?O({loading:!1,error:u.result}):(y(yM(yM({},d),{},{action:u.result})),O({loading:!1,error:null}),a&&(h=null==r?void 0:r.actions.filter((function(t){return t.id===e.id&&Object.assign(t,u.result),!0})),a(h)),S(),p(vr.Success,s("RECOVERY_ACTION_SAVED","Recovery action saved"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),O({loading:!1,error:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var e=hM(lM().mark((function e(){var r,n,o,i;return lM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(vr.Info,s("LOADING","Loading")),O({loading:!0,error:null}),r=yM({},null==m?void 0:m.changes),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(r)},e.next=7,fetch("".concat(l.root,"/event_rules"),n);case 7:return o=e.sent,e.next=10,o.json();case 10:(i=e.sent).error?O({loading:!1,error:i.result}):(O({error:null,loading:!1}),c&&c(i.result),p(vr.Success,s("RECOVERY_ACTION_ADDED","Recovery action added")),t.onClose&&t.onClose()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),O({loading:!1,error:e.t0.message});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var r=hM(lM().mark((function r(){var n,o;return lM().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,p(vr.Info,s("LOADING","Loading")),O(yM(yM({},w),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},r.next=6,fetch("".concat(l.root,"/event_rules/").concat(e.id),n);case 6:return o=r.sent,r.next=9,o.json();case 9:r.sent.error||(u&&u(e.id),p(vr.Success,s("RECOVERY_ACTION_DELETED","Recovery action deleted")),t.onClose&&t.onClose()),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),O({loading:!1,error:[r.t0.message]});case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(){return r.apply(this,arguments)}}();return Object(o.useEffect)((function(){0===Object.keys(e).length?(j(!0),g(yM(yM({},m),{},{changes:{enabled:!0,launch_type:"times",name:"",type:"abandoned_cart"}}))):(j(!1),S()),y(yM(yM({},d),{},{action:e}))}),[e]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,sM({},t,{isAddMode:E,recoveryActionState:d,formState:m,actionState:w,handleChangeItem:function(t){g(yM(yM({},m),{},{changes:yM(yM({},m.changes),t)}))},handleChangeInput:function(t){g(yM(yM({},m),{},{changes:yM(yM({},m.changes),{},vM({},t.target.name,t.target.value))}))},handleAddRecoveryAction:_,handleDeleteRecoveryAction:P,handleUpdateClick:L,handleRemoveKey:function(t){var e=yM({},null==m?void 0:m.changes);delete e[t],g(yM(yM({},m),{},{changes:e}))}})))};function wM(t){return wM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wM(t)}function OM(){return OM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OM.apply(this,arguments)}function xM(t){return function(t){if(Array.isArray(t))return IM(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||TM(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EM(){EM=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==wM(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function jM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function SM(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jM(Object(r),!0).forEach((function(e){LM(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jM(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function LM(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _M(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function PM(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_M(i,n,o,a,c,"next",t)}function c(t){_M(i,n,o,a,c,"throw",t)}a(void 0)}))}}function kM(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||TM(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TM(t,e){if(t){if("string"==typeof t)return IM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?IM(t,e):void 0}}function IM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}bM.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bM.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var AM=function(t){var e=t.action,r=t.UIComponent,n=kM(er(),1)[0],a=kM(Ir(),2)[1],c=kM(br(),2)[1].showToast,u=kM(hr(),1)[0].token,s=kM(Object(o.useState)({loading:!1,notifications:[],error:null}),2),l=s[0],f=s[1],p=kM(Object(o.useState)({loading:!1,error:null}),2),h=p[0],d=p[1],y=function(){var t=PM(EM().mark((function t(){var r,o,i;return EM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(SM(SM({},l),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},t.next=5,fetch("".concat(n.root,"/event_rules/").concat(null==e?void 0:e.id,"/channels"),r);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error?f(SM(SM({},l),{},{loading:!1,error:i.result})):f({loading:!1,notifications:i.result,error:null}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),f(SM(SM({},l),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),v=function(t){var e=l.notifications.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0}));f(SM(SM({},l),{},{notifications:e}))},m=function(){var t=PM(EM().mark((function t(r,o){var i,s,l;return EM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,a("LOADING","Loading")),d(SM(SM({},h),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(o)},t.next=6,fetch("".concat(n.root,"/event_rules/").concat(null==e?void 0:e.id,"/channels/").concat(r),i);case 6:return s=t.sent,t.next=9,s.json();case 9:(l=t.sent).error?d({loading:!1,error:l.result}):(d({loading:!1,error:null}),v&&v(l.result),c(vr.Success,a("NOTIFICATION_SAVED","Notification saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),d({loading:!1,error:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){y()}),[e]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,OM({},t,{actionState:h,notificationListState:l,handleAddNotifications:function(t){var e=[].concat(xM(l.notifications),[t]);f(SM(SM({},l),{},{notifications:e}))},handleUpdateNotifications:v,handleDeleteNotifications:function(t){var e=l.notifications.filter((function(e){return e.id!==t.id}));f(SM(SM({},l),{},{notifications:e}))},handleUpdateClick:m})))};function CM(){return CM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CM.apply(this,arguments)}function NM(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return DM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DM(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}AM.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},AM.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var GM=function(t){var e=t.UIComponent,r=NM(Object(o.useState)(null),2),n=r[0],a=r[1],c=NM(Rn(null),1)[0];return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,CM({},t,{orderState:c,optionSelected:n,handleClickOption:function(t){a(t===n?null:t)}})))};function FM(t){return FM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FM(t)}function UM(){return UM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UM.apply(this,arguments)}function BM(){BM=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==FM(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function RM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function MM(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?RM(Object(r),!0).forEach((function(e){YM(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RM(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function YM(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zM(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function $M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return qM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qM(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}GM.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},GM.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var JM=function(t){var e=t.UIComponent,r=t.handleSuccess,n=$M(hr(),1)[0],a=n.token,c=n.user,u=$M(er(),1)[0],s=$M(br(),2)[1].showToast,l=$M(Ir(),2)[1],f=$M(Object(o.useState)({changes:{},loading:!1,error:null}),2),p=f[0],h=f[1],d=function(){var t,e=(t=BM().mark((function t(){var e,n,o,i;return BM().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,l("LOADING","Loading")),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},t.next=5,fetch("https://integrations.ordering.co/network/request_integration.php?admin_name=".concat(null==c?void 0:c.name,"&project=").concat(null==u?void 0:u.project,"&Selected_POS=").concat(null==p||null===(e=p.changes)||void 0===e?void 0:e.pos),n);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error?h(MM(MM({},p),{},{loading:!1,error:i.result})):(s(vr.Success,i.result),r&&r()),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),h(MM(MM({},p),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){zM(i,n,o,a,c,"next",t)}function c(t){zM(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,UM({},t,{formState:p,handleSendMessage:d,changeFormState:function(t){h(MM(MM({},p),{},{changes:MM(MM({},null==p?void 0:p.changes),t)}))}})))};function VM(){return VM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VM.apply(this,arguments)}function HM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function WM(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?HM(Object(r),!0).forEach((function(e){KM(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HM(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function KM(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZM(t){return function(t){if(Array.isArray(t))return tY(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||QM(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XM(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||QM(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QM(t,e){if(t){if("string"==typeof t)return tY(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tY(t,e):void 0}}function tY(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}JM.propTypes={UIComponent:c.a.elementType},JM.defaultProps={};var eY=function(t){var e=t.UIComponent,r=t.scheduleList,n=t.handleChangeScheduleState,a=XM(Object(o.useState)([]),2),c=a[0],u=a[1],s=XM(Object(o.useState)(!1),2),l=s[0],f=s[1],p=XM(Object(o.useState)(!1),2),h=p[0],d=p[1],y=XM(Object(o.useState)({open:{hour:0,minute:0},close:{hour:23,minute:59}}),2),v=y[0],m=y[1],g=XM(Object(o.useState)({}),2),b=g[0],w=g[1],O=XM(Object(o.useState)([]),2),x=O[0],E=O[1],j=function(t){return 60*t.hour+t.minute},S=function(t,e,r){for(var n=60*e.open.hour+e.open.minute,o=60*e.close.hour+e.close.minute,i=0;i<t.length;i++)if(i!==r){var a=60*t[i].open.hour+15*parseInt(t[i].open.minute/15),c=60*t[i].close.hour+15*parseInt(t[i].close.minute/15);if(n<a&&o>c)return!0;if(n<a&&o>a)return!0;if(n>a&&o<c)return!0;if(n<c&&o>c)return!0;if(o===c||n===a)return!0}return!1};return Object(o.useEffect)((function(){0!==c.length&&n(ZM(c))}),[c]),Object(o.useEffect)((function(){if(r)u(ZM(r));else{for(var t=[],e=0;e<7;e++)t.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]});u(t)}}),[r]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,VM({},t,{scheduleState:c,isConflict:l,setIsConflict:f,isTimeChangeError:h,addScheduleTime:v,openAddSchedule:b,setIsTimeChangeError:d,handleEnabledSchedule:function(t,e){var r=ZM(c);r[t].enabled=e,u(r)},handleChangeScheduleTime:function(t,e,r,n){var o,i=ZM(c),a=ZM(i[e].lapses),s=parseInt(t.split(":")[0]),l=parseInt(t.split(":")[1]),p=!1;(n?(p=j({hour:s,minute:l})>=j(a[r].close))?d(!0):o={open:{hour:s,minute:l},close:a[r].close}:(p=j(a[r].open)>=j({hour:s,minute:l}))?d(!0):o={open:a[r].open,close:{hour:s,minute:l}},p)||(S(a,o,r)?f(!0):(i[e].lapses[r]=o,i[e].lapses.sort((function(t,e){return j(t.open)-j(e.open)})),u(i)))},handleDeleteSchedule:function(t,e){var r=ZM(c);r[t].lapses.splice(e,1),u(r)},handleOpenAddSchedule:function(t){m({open:{hour:0,minute:0},close:{hour:23,minute:59}}),w(KM({},t,!0))},handleChangeAddScheduleTime:function(t,e){var r=parseInt(t.split(":")[0]),n=parseInt(t.split(":")[1]);e?j({hour:r,minute:n})>=j(v.close)?d(!0):m(WM(WM({},v),{},{open:{hour:r,minute:n}})):j(v.open)>=j({hour:r,minute:n})?d(!0):m(WM(WM({},v),{},{close:{hour:r,minute:n}}))},handleAddSchedule:function(t){var e=ZM(c),r=ZM(e[t].lapses);S(r,v,null)?f(!0):(e[t].lapses.push(v),e[t].lapses.sort((function(t,e){return j(t.open)-j(e.open)})),u(e),w(KM({},t,!1)))},selectedCopyDays:x,cleanSelectedCopyDays:function(){return E([])},handleSelectCopyTimes:function(t){var e=x.includes(t)?x.filter((function(e){return e!==t})):[].concat(ZM(x),[t]);E(e)},handleApplyScheduleCopyTimes:function(t){var e=c.map((function(e,r){if(x.includes(r)){var n=ZM(c[t].lapses);return{enabled:c[t].enabled,lapses:n}}return e}));u(e)}})))};function rY(t){return rY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rY(t)}function nY(){return nY=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nY.apply(this,arguments)}function oY(){oY=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==rY(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function iY(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function aY(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?iY(Object(r),!0).forEach((function(e){cY(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iY(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function cY(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uY(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function sY(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return lY(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lY(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lY(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}eY.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eY.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fY=function(t){var e=t.UIComponent,r=sY(er(),1)[0],n=sY(hr(),1)[0].token,a=sY(br(),2)[1].showToast,c=sY(Object(o.useState)({loading:!1,error:null,result:null}),2),u=c[0],s=c[1],l=function(){var t,e=(t=oY().mark((function t(){var e,o,i,c;return oY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(aY(aY({},u),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=5,fetch("".concat(r.root,"/integrations/internal/tokens/current/"),o);case 5:return i=t.sent,t.next=8,i.json();case 8:return c=t.sent,s(aY(aY({},u),{},{loading:!1,result:c.error?null:c.result,error:c.error?c.result:null})),c.error&&a(vr.Error,null===(e=c.result)||void 0===e?void 0:e[0]),t.abrupt("return",{result:c.result,error:c.error?c.result:null});case 14:t.prev=14,t.t0=t.catch(0),s(aY(aY({},u),{},{loading:!1,error:t.t0.message})),(null===t.t0||void 0===t.t0?void 0:t.t0.message)&&a(vr.Error,null===t.t0||void 0===t.t0?void 0:t.t0.message);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){uY(i,n,o,a,c,"next",t)}function c(t){uY(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return e&&i.a.createElement(e,nY({},t,{state:u,getBillingToken:l}))};function pY(t){return pY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pY(t)}function hY(){return hY=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hY.apply(this,arguments)}function dY(){dY=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==pY(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function yY(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vY(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yY(Object(r),!0).forEach((function(e){mY(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yY(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mY(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gY(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function bY(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){gY(i,n,o,a,c,"next",t)}function c(t){gY(i,n,o,a,c,"throw",t)}a(void 0)}))}}function wY(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return OY(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OY(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OY(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var xY=function(t){var e=t.UIComponent,r=t.useChekoutFileds,n=t.handleButtonSignupClick,a=t.handleSuccessSignup,c=t.externalPhoneNumber,u={},s=wY(er(),1)[0],l=wY(hr(),2)[1].login,f=wY(yo(),1)[0],p=wY(Object(o.useState)({loading:!1,result:{error:!1}}),2),h=p[0],d=p[1],y=wY(Object(o.useState)({email:"",cellphone:c||"",password:""}),2),v=y[0],m=y[1],g=wY(Object(o.useState)({loading:!1,result:{error:!1}}),2),b=g[0],w=g[1],O=wY(Object(o.useState)({loading:!1,result:{error:!1}}),2),x=O[0],E=O[1],j=function(){var t=bY(dY().mark((function t(e){var r,n,o;return dY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(vY(vY({},h),{},{loading:!0})),r={},u.signup=r,n=e||v,t.next=7,s.users().save(n,{cancelToken:r});case 7:o=t.sent,d({result:o.content,loading:!1}),o.content.error||a&&a(o.content.result),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),"Cancel"!==t.t0.constructor.name&&d({result:{error:!0,result:t.t0.message},loading:!1});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=bY(dY().mark((function t(e){var r,n;return dY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w(vY(vY({},b),{},{loading:!0})),t.next=4,fetch("".concat(s.root,"/auth/sms/twilio/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(vY(vY({},e),{},{cellphone:e.cellphone,country_phone_code:"+".concat(e.country_phone_code)}))});case 4:return r=t.sent,t.next=7,r.json();case 7:n=t.sent,w(vY(vY({},b),{},{loading:!1,result:n})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),w(vY(vY({},b),{},{loading:!1,result:{error:t.t0.message}}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=bY(dY().mark((function t(e){var r,n,o,i,c;return dY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,E(vY(vY({},x),{},{loading:!0})),t.next=4,fetch("".concat(s.root,"/auth/sms/twilio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:return n=t.sent,t.next=7,n.json();case 7:null!=(o=t.sent)&&o.error||null==o||null===(r=o.result)||void 0===r||!r.id||(l({user:null==o?void 0:o.result,token:null==o||null===(i=o.result)||void 0===i||null===(c=i.session)||void 0===c?void 0:c.access_token}),a&&a(null==o?void 0:o.result)),E(vY(vY({},x),{},{loading:!1,result:o})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),E(vY(vY({},x),{},{loading:!1,result:{error:t.t0.message}}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){return function(){u.signup&&u.signup.cancel()}}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,hY({},t,{formState:h,validationFields:f,signupData:v,showField:function(t){var e,n,o;return!r||!f.loading&&!(null!==(e=f.fields)&&void 0!==e&&e.checkout[t])||!f.loading&&(null===(n=f.fields)||void 0===n?void 0:n.checkout[t])&&(null===(o=f.fields)||void 0===o?void 0:o.checkout[t].enabled)},isRequiredField:function(t){var e,n,o;return"password"===t||r&&!f.loading&&(null===(e=f.fields)||void 0===e?void 0:e.checkout[t])&&(null===(n=f.fields)||void 0===n?void 0:n.checkout[t].enabled)&&(null===(o=f.fields)||void 0===o?void 0:o.checkout[t].required)},verifyPhoneState:b,checkPhoneCodeState:x,setCheckPhoneCodeState:function(t){E(t||{loading:!1,result:{error:!1}})},handleChangeInput:function(t,e){var r={};e?Object.values(t).map((function(t){r=vY(vY({},r),{},mY({},t.name,t.value))})):r=mY({},t.target.name,t.target.value),m(vY(vY({},v),r))},handleButtonSignupClick:n||j,handleSendVerifyCode:S,handleCheckPhoneCode:L})))};xY.propTypes={UIComponent:c.a.elementType,handleButtonSignupClick:c.a.func,handleSuccessSignup:c.a.func,handleContinueAsGuest:c.a.func,useChekoutFileds:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToLogin:c.a.string,elementLinkToLogin:c.a.element},xY.defaultProps={useChekoutFileds:!1,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var EY=function(t){var e=t.UIComponent;return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,t))};function jY(t){return jY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jY(t)}function SY(){return SY=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SY.apply(this,arguments)}function LY(){LY=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==jY(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function _Y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function PY(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_Y(i,n,o,a,c,"next",t)}function c(t){_Y(i,n,o,a,c,"throw",t)}a(void 0)}))}}function kY(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function TY(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kY(Object(r),!0).forEach((function(e){IY(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kY(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function IY(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AY(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return CY(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CY(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CY(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}EY.propTypes={UIComponent:c.a.elementType,name:c.a.string,minimun:c.a.number,delivery_price:c.a.number,description:c.a.string,distance:c.a.number,delivery_time:c.a.string,pickup_time:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},EY.defaultProps={id:0,name:"",minimun:0,delivery_price:0,description:"",distance:0,delivery_time:""};var NY=function(t){var e=t.UIComponent,r=t.handleDeleteLevelList,n=t.handleUpdateLevelList,a=t.handleAddLevelList,c=t.level,u=t.setSelectedLevel,s=t.onClose,l=AY(er(),1)[0],f=AY(hr(),1)[0].token,p=AY(br(),2)[1].showToast,h=AY(Ir(),2)[1],d=AY(Object(o.useState)({loading:!1,error:null,changes:{}}),2),y=d[0],v=d[1],m=function(){var t=PY(LY().mark((function t(){var e,n,o,i,a,u;return LY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),v(TY(TY({},y),{},{loading:!0})),e={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},n="".concat(l.root,"/loyalty_levels/").concat(null==c?void 0:c.id),t.next=7,fetch(n,e);case 7:return o=t.sent,t.next=10,o.json();case 10:i=t.sent,a=i.error,u=i.result,a?v(TY(TY({},y),{},{loading:!1,error:u})):(p(vr.Success,h("LEVEL_DELETED","Level deleted")),v(TY(TY({},y),{},{loading:!1,error:null,changes:{}})),r(u),s&&s()),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),v(TY(TY({},y),{},{loading:!1,error:t.t0.message}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=PY(LY().mark((function t(){var e,r,o,i,a,s,d;return LY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r in t.prev=0,p(vr.Info,h("LOADING","Loading")),v(TY(TY({},y),{},{loading:!0})),e=TY({},null==y?void 0:y.changes))null!=e&&e.name||""!==e[r]||(e[r]=null);return o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(e)},t.next=8,fetch("".concat(l.root,"/loyalty_levels/").concat(null==c?void 0:c.id),o);case 8:return i=t.sent,t.next=11,i.json();case 11:a=t.sent,s=a.error,d=a.result,s?v(TY(TY({},y),{},{loading:!1,error:d})):(v({changes:{},loading:!1,error:null}),n(d),u(d),p(vr.Success,h("LEVEL_UPDATED","Level updated"))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),v(TY(TY({},y),{},{loading:!1,error:t.t0.message}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=PY(LY().mark((function t(){var e,r,n,o,i,c;return LY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(vr.Info,h("LOADING","Loading")),v(TY(TY({},y),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(y.changes)},r="".concat(l.root,"/loyalty_levels"),t.next=7,fetch(r,e);case 7:return n=t.sent,t.next=10,n.json();case 10:o=t.sent,i=o.error,c=o.result,i?v(TY(TY({},y),{},{loading:!1,error:c})):(p(vr.Success,h("LEVEL_ADDED","Level added")),v(TY(TY({},y),{},{loading:!1,error:null,changes:{}})),a(c),s&&s()),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),v(TY(TY({},y),{},{loading:!1,error:t.t0.message}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,SY({},t,{formState:y,handleDeleteLevel:m,handleChangeInput:function(t){var e=TY(TY({},null==y?void 0:y.changes),{},IY({},t.target.name,t.target.value));v(TY(TY({},y),{},{changes:e}))},updateLevel:g,addLevel:b,handleChangeItem:function(t){var e=TY(TY({},null==y?void 0:y.changes),t);v(TY(TY({},y),{},{changes:e}))},handlechangeImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){v(TY(TY({},y),{},{changes:TY(TY({},y.changes),{},{image:e.result})}))},e.onerror=function(t){return console.log(t)}}})))};NY.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},NY.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var DY=function(t){var e=t.UIComponent;return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,t))};DY.propTypes={UIComponent:c.a.elementType,order:c.a.object.isRequired,orderType:c.a.string.isRequired,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},DY.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var GY=function(t){var e=t.UIComponent;return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,t))};function FY(t){return FY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FY(t)}function UY(){return UY=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UY.apply(this,arguments)}function BY(){BY=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==FY(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function RY(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function MY(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){RY(i,n,o,a,c,"next",t)}function c(t){RY(i,n,o,a,c,"throw",t)}a(void 0)}))}}function YY(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zY(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?YY(Object(r),!0).forEach((function(e){$Y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YY(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $Y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qY(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return JY(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JY(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JY(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}GY.propTypes={UIComponent:c.a.elementType,isSoldOut:c.a.bool,images:c.a.string,name:c.a.string,description:c.a.string,price:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},GY.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var VY=function(t){var e=t.action,r=t.UIComponent,n=t.handleAddNotifications,a=t.handleUpdateNotifications,c=t.handleDeleteNotifications,u=t.onClose,s=qY(Ir(),2)[1],l=qY(er(),1)[0],f=qY(hr(),1)[0].token,p=qY(Object(o.useState)({loading:!1,changes:{},error:null}),2),h=p[0],d=p[1],y=qY(br(),2)[1].showToast,v=function(){d(zY(zY({},h),{},{changes:{}}))},m=function(){var t=MY(BY().mark((function t(){var r,o,i,a;return BY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(vr.Info,s("LOADING","Loading")),d(zY(zY({},h),{},{loading:!0})),r=zY(zY({},null==h?void 0:h.changes),{},{enabled:!0}),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(r)},t.next=7,fetch("".concat(l.root,"/event_rules/").concat(null==e?void 0:e.id,"/channels"),o);case 7:return i=t.sent,t.next=10,i.json();case 10:(a=t.sent).error?d(zY(zY({},h),{},{loading:!1,error:a.result})):(d(zY(zY({},h),{},{changes:{},loading:!1,error:null})),n(a.result),y(vr.Success,s("NOTIFICATION_ADDED","Notification added")),u&&u()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),d(zY(zY({},h),{},{loading:!1,error:t.t0.message}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=MY(BY().mark((function t(r,n){var o,i,c;return BY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(vr.Info,s("LOADING","Loading")),d(zY(zY({},h),{},{loading:!0})),o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(n)},t.next=6,fetch("".concat(l.root,"/event_rules/").concat(null==e?void 0:e.id,"/channels/").concat(r),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(c=t.sent).error?d(zY(zY({},h),{},{loading:!1,error:c.result})):(d(zY(zY({},h),{},{changes:{},loading:!1,error:null})),a&&a(c.result),v(),y(vr.Success,s("NOTIFICATION_SAVED","Notification saved")),u&&u()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),d(zY(zY({},h),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,r){return t.apply(this,arguments)}}(),b=function(){var t=MY(BY().mark((function t(r){var n,o,i;return BY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(vr.Info,s("LOADING","Loading")),d(zY(zY({},h),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},t.next=6,fetch("".concat(l.root,"/event_rules/").concat(null==e?void 0:e.id,"/channels/").concat(r),n);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?d(zY(zY({},h),{},{loading:!1,error:i.result})):(d(zY(zY({},h),{},{changes:{},loading:!1,error:null})),c&&c(i.result),v(),y(vr.Success,s("NOTIFICATION_DELETED","Notification deleted")),u&&u()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),d(zY(zY({},h),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,UY({},t,{formState:h,cleanFormState:v,handleChangeInput:function(t){d(zY(zY({},h),{},{changes:zY(zY({},h.changes),{},$Y({},t.target.name,t.target.value))}))},handleChangeSelect:function(t,e){d(zY(zY({},h),{},{changes:zY(zY({},h.changes),{},$Y({},t,e))}))},handleUpdateClick:g,handleDeleteClick:b,handleClickAddBtn:m})))};function HY(t){return HY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HY(t)}function WY(){return WY=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WY.apply(this,arguments)}function KY(){KY=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==HY(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ZY(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function XY(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ZY(Object(r),!0).forEach((function(e){QY(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZY(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function QY(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tz(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ez(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){tz(i,n,o,a,c,"next",t)}function c(t){tz(i,n,o,a,c,"throw",t)}a(void 0)}))}}function rz(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return nz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nz(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}VY.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},VY.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var oz=function(t){var e=t.UIComponent,r=rz(er(),1)[0],n=rz(hr(),1)[0].token,a=rz(Ir(),2)[1],c=rz(br(),2)[1].showToast,u=rz(Object(o.useState)({loading:!0,sites:[],error:null}),2),s=u[0],l=u[1],f=rz(Object(o.useState)({loading:!1,configs:[],error:null}),2),p=f[0],h=f[1],d=rz(Object(o.useState)({loading:!1,error:null}),2),y=d[0],v=d[1],m=function(){var t=ez(KY().mark((function t(){var e,o,i,a,c;return KY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=4,fetch("".concat(r.root,"/sites"),e);case 4:return o=t.sent,t.next=7,o.json();case 7:i=t.sent,a=i.error,c=i.result,l(a?XY(XY({},s),{},{loading:!1,error:c}):{loading:!1,sites:c,error:null}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),l(XY(XY({},s),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=ez(KY().mark((function t(e){var o,i,a,c,u;return KY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(XY(XY({},p),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=5,fetch("".concat(r.root,"/sites/").concat(e,"/configs"),o);case 5:return i=t.sent,t.next=8,i.json();case 8:a=t.sent,c=a.error,u=a.result,h(c?XY(XY({},p),{},{error:u}):{loading:!1,configs:u,error:null}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),h(XY(XY({},p),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=ez(KY().mark((function t(e,o,i){var u,s,l,f,p;return KY().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c(vr.Info,a("LOADING","Loading")),v(XY(XY({},y),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({value:e})},t.next=6,fetch("".concat(r.root,"/sites/").concat(o,"/configs/").concat(i),u);case 6:return s=t.sent,t.next=9,s.json();case 9:l=t.sent,f=l.error,p=l.result,f?v({loading:!1,error:p}):(v({loading:!1,error:null}),c(vr.Success,a("SETTINGS_UPDATE","Settings updated"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),v({loading:!1,error:[t.t0.message]});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r,n){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,WY({},t,{sitesState:s,siteConfigsState:p,actionState:y,handleGetSiteConfigs:g,handleChangeConfig:b})))};function iz(t){return iz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iz(t)}function az(){return az=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},az.apply(this,arguments)}function cz(t){return function(t){if(Array.isArray(t))return vz(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||yz(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uz(){uz=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==iz(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function sz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lz(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sz(Object(r),!0).forEach((function(e){fz(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sz(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fz(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pz(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function hz(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){pz(i,n,o,a,c,"next",t)}function c(t){pz(i,n,o,a,c,"throw",t)}a(void 0)}))}}function dz(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||yz(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yz(t,e){if(t){if("string"==typeof t)return vz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vz(t,e):void 0}}function vz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}oz.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},oz.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mz=function(t){var e=t.siteId,r=t.UIComponent,n=dz(Ir(),2)[1],a=dz(er(),1)[0],c=dz(hr(),1)[0].token,u=dz(br(),2)[1].showToast,s=dz(Object(o.useState)({loading:!0,result:[],error:null}),2),l=s[0],f=s[1],p=dz(Object(o.useState)({loading:!0,result:[],error:null}),2),h=p[0],d=p[1],y=dz(Object(o.useState)(null),2),v=y[0],m=y[1],g=dz(Object(o.useState)({loading:!1,error:null}),2),b=g[0],w=g[1],O=function(){var t=hz(uz().mark((function t(){var e,r,n,o,i;return uz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(lz(lz({},h),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=5,fetch("".concat(a.root,"/themes"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:n=t.sent,o=n.error,i=n.result,d({loading:!1,result:o?[]:i,error:o?i:null}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),d(lz(lz({},h),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=hz(uz().mark((function t(){var r,n,o,i,u;return uz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(lz(lz({},l),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=5,fetch("".concat(a.root,"/sites/").concat(e,"/themes"),r);case 5:return n=t.sent,t.next=8,n.json();case 8:o=t.sent,i=o.error,u=o.result,f({loading:!1,result:i?[]:u,error:i?u:null}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),f(lz(lz({},l),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=hz(uz().mark((function t(){var r,o,i,s,l;return uz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w(lz(lz({},b),{},{loading:!0})),u(vr.Info,n("LOADING","Loading")),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({theme_id:null==v?void 0:v.id,values:JSON.stringify(null==v?void 0:v.values_default)})},t.next=6,fetch("".concat(a.root,"/sites/").concat(e,"/themes"),r);case 6:return o=t.sent,t.next=9,o.json();case 9:i=t.sent,s=i.error,l=i.result,s||(u(vr.Success,n("THEME_ADDED","Theme added")),x()),w({loading:!1,error:s?l:null}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=hz(uz().mark((function t(r){var o,i,s,p,h,d,y;return uz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w(lz(lz({},b),{},{loading:!0})),u(vr.Info,n("LOADING","Loading")),i=null===(o=l.result[0])||void 0===o?void 0:o.theme_id,s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({values:JSON.stringify(r)})},t.next=7,fetch("".concat(a.root,"/sites/").concat(e,"/themes/").concat(i),s);case 7:return p=t.sent,t.next=10,p.json();case 10:h=t.sent,d=h.error,y=h.result,d||(u(vr.Success,n("THEME_UPDATED","Theme updated")),f(lz(lz({},l),{},{result:[].concat(cz(l.result),cz(y))}))),w({loading:!1,error:d?y:null}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),w({loading:!1,error:[t.t0.message]});case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=hz(uz().mark((function t(e){var r,n,o,i;return uz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null===(r=l.result[0])||void 0===r?void 0:r.theme_id,o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({type:"image",file:e})},t.next=4,fetch("".concat(a.root,"/themes/").concat(n,"/gallery"),o);case 4:return i=t.sent,t.next=7,i.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){x()}),[e]),Object(o.useEffect)((function(){O()}),[]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,az({},t,{siteThemesState:l,themesList:h,actionState:b,selectedTheme:v,handleSelectTheme:function(t){var e=h.result.find((function(e){return e.id===t}));m(e)},handleAssignTheme:E,handleUpdateSiteTheme:j,handleAddThemeGallery:S})))};function gz(t){return gz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gz(t)}function bz(){return bz=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bz.apply(this,arguments)}function wz(){wz=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==gz(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Oz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xz(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oz(Object(r),!0).forEach((function(e){Ez(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oz(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ez(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jz(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Sz(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Lz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lz(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}mz.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mz.defaultProps={};var _z=function(t){var e=t.UIComponent,r=t.handleSuccess,n=Sz(hr(),1)[0],a=n.token,c=n.user,u=Sz(er(),1)[0],s=Sz(br(),2)[1].showToast,l=Sz(Ir(),2)[1],f=Sz(Object(o.useState)({changes:{},loading:!1,error:null}),2),p=f[0],h=f[1],d=function(){var t,e=(t=wz().mark((function t(){var e,n,o,i,f,d,y;return wz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(vr.Info,l("LOADING","Loading")),i=null!=p&&null!==(e=p.changes)&&void 0!==e&&e.file?{file:null==p||null===(n=p.changes)||void 0===n?void 0:n.file}:{url:null==p||null===(o=p.changes)||void 0===o?void 0:o.url},f={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(i)},t.next=6,fetch("https://integrations.ordering.co/network/request_import.php?admin_name=".concat(null==c?void 0:c.name,"&project=").concat(null==u?void 0:u.project),f);case 6:return d=t.sent,t.next=9,d.json();case 9:(y=t.sent).error?h(xz(xz({},p),{},{loading:!1,error:y.result})):(s(vr.Success,y.result),r&&r()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),h(xz(xz({},p),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){jz(i,n,o,a,c,"next",t)}function c(t){jz(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,bz({},t,{formState:p,handleUploadMenu:d,changeFormState:function(t){h(xz(xz({},p),{},{changes:xz(xz({},null==p?void 0:p.changes),t)}))}})))};_z.propTypes={UIComponent:c.a.elementType},_z.defaultProps={};var Pz=["photo"];function kz(t){return kz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kz(t)}function Tz(){return Tz=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tz.apply(this,arguments)}function Iz(){Iz=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==kz(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Az(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Cz(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Nz(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Cz(i,n,o,a,c,"next",t)}function c(t){Cz(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Dz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Gz(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dz(Object(r),!0).forEach((function(e){Fz(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dz(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fz(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uz(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Bz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bz(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Rz=function(t){var e=t.UIComponent,r=t.useSessionUser,n=t.refreshSessionUser,a=t.useDefualtSessionManager,c=t.userId,u=t.user,s=t.useValidationFields,l=t.handleButtonUpdateClick,f=t.handleSuccessUpdate,p=t.handleSuccessAdd,h=t.isProfessional,d=Uz(er(),1)[0],y=Uz(hr(),2),v=y[0],m=y[1].changeUser,g=Uz(yo(),1)[0],b=Uz(Object(o.useState)(!1),2),w=b[0],O=b[1],x=Uz(Object(o.useState)({loading:!1,result:{error:!1}}),2),E=x[0],j=x[1],S=Uz(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),L=S[0],_=S[1],P={},k=a?v.token:t.accessToken;Object(o.useEffect)((function(){if(u){if(!(c||r&&n)||v.loading||t.userData)j({loading:!1,result:{error:!1,result:r&&!n?v.user:u}});else{j(Gz(Gz({},E),{},{loading:!0}));var e={};P.user=e,d.setAccessToken(k).users(r&&n?v.user.id:c).get({cancelToken:e}).then((function(t){j({loading:!1,result:t.content}),t.content.result&&m(Gz(Gz({},v.user),t.content.result))})).catch((function(t){"Cancel"!==t.constructor.name&&j({loading:!1,result:{error:!0,result:t.message}})}))}return function(){P.user&&P.user.cancel()}}}),[v.loading,u]);var T=function(){var t=Nz(Iz().mark((function t(e,n,o){var i,a,c,s,p,h,y,g,b,w;return Iz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=2;break}return t.abrupt("return",l(E.result.result,L.changes));case 2:if(t.prev=2,a={},_(Gz(Gz({},L),{},{loading:!0})),e&&(L.changes=Gz(Gz({},L.changes),e)),!n){t.next=25;break}if(2===(null===(c=v.user)||void 0===c?void 0:c.level)){t.next=14;break}return t.next=10,d.users((null==u?void 0:u.id)||E.result.result.id).save({photo:o||L.changes.photo},{accessToken:k});case 10:i=t.sent,a=i.content,t.next=21;break;case 14:return s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v.token)},body:JSON.stringify({photo:o||L.changes.photo})},t.next=17,fetch("".concat(d.root,"/professionals/").concat((null==u?void 0:u.id)||E.result.result.id),s);case 17:return p=t.sent,t.next=20,p.json();case 20:a=t.sent;case 21:h=L.changes,h.photo,y=Az(h,Pz),_(Gz(Gz({},L),{},{changes:a.error?L.changes:y,result:a,loading:!1})),t.next=40;break;case 25:if(2===(null===(g=v.user)||void 0===g?void 0:g.level)){t.next=32;break}return t.next=28,d.users((null==u?void 0:u.id)||E.result.result.id).save(L.changes,{accessToken:k});case 28:i=t.sent,a=i.content,t.next=39;break;case 32:return b={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v.token)},body:JSON.stringify(L.changes)},t.next=35,fetch("".concat(d.root,"/professionals/").concat((null==u?void 0:u.id)||E.result.result.id),b);case 35:return w=t.sent,t.next=38,w.json();case 38:a=t.sent;case 39:_(Gz(Gz({},L),{},{changes:a.error?L.changes:{},result:a,loading:!1}));case 40:a.error||(j(Gz(Gz({},E),{},{result:Gz(Gz({},E.result),a)})),r&&m(Gz(Gz({},v.user),a.result)),f&&f(a.result)),t.next=46;break;case 43:t.prev=43,t.t0=t.catch(2),_(Gz(Gz({},L),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 46:case"end":return t.stop()}}),t,null,[[2,43]])})));return function(e,r,n){return t.apply(this,arguments)}}(),I=function(){var e=Nz(Iz().mark((function e(){var r,n;return Iz().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(Gz(Gz({},L),{},{loading:!0})),r=Gz({},null==L?void 0:L.changes),h&&Object.assign(r,{level:8}),e.next=6,d.users().save(r,{accessToken:k});case 6:n=e.sent,_(Gz(Gz({},L),{},{changes:n.content.error?L.changes:{},result:n.content,loading:!1})),n.content.error||(j(Gz(Gz({},E),{},{result:Gz(Gz({},E.result),n.content)})),p&&p(n.content.result),t.onClose&&t.onClose()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),_(Gz(Gz({},L),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Tz({},t,{isEdit:w,cleanFormState:function(t){return _(Gz(Gz({},L),t))},formState:L,userState:E,validationFields:g,showField:function(t){var e,r,n;return!s||!g.loading&&!(null!==(e=g.fields)&&void 0!==e&&e.checkout[t])||!g.loading&&(null===(r=g.fields)||void 0===r?void 0:r.checkout[t])&&(null===(n=g.fields)||void 0===n?void 0:n.checkout[t].enabled)},setFormState:_,handleChangeSwtich:function(t,e){var r=Fz({},t,e);_(Gz(Gz({},L),{},{changes:Gz(Gz({},L.changes),r)}))},isRequiredField:function(t){var e,r,n;return s&&!g.loading&&(null===(e=g.fields)||void 0===e?void 0:e.checkout[t])&&(null===(r=g.fields)||void 0===r?void 0:r.checkout[t].enabled)&&(null===(n=g.fields)||void 0===n?void 0:n.checkout[t].required)},handleChangeInput:function(t,e){var r={};e?Object.values(t).map((function(t){r=Gz(Gz({},r),{},Fz({},t.name,t.value))})):r=Fz({},t.target.name,t.target.value),_(Gz(Gz({},L),{},{changes:Gz(Gz({},L.changes),r)}))},handleButtonUpdateClick:T,handleButtonAddClick:I,handlechangeImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){_(Gz(Gz({},L),{},{changes:Gz(Gz({},L.changes),{},{photo:e.result})}))},e.onerror=function(t){return console.log(t)}},toggleIsEdit:function(){return O(!w)},handleChangeUserType:function(t){var e={level:t};_(Gz(Gz({},L),{},{changes:Gz(Gz({},L.changes),e)}))},handleChangeOccupation:function(t){_(Gz(Gz({},L),{},{changes:Gz(Gz({},L.changes),{},{occupation_id:t})}))}})))};function Mz(t){return Mz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mz(t)}function Yz(){return Yz=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yz.apply(this,arguments)}function zz(){zz=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Mz(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function $z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qz(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$z(Object(r),!0).forEach((function(e){Jz(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Jz(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vz(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Hz(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Wz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wz(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Rz.propTypes={UIComponent:c.a.elementType,refreshSessionUser:c.a.bool,handleButtonUpdateClick:c.a.func,handleSuccessUpdate:c.a.func,useValidationFields:c.a.bool,validationFieldsType:c.a.string,useDefualtSessionManager:c.a.bool,accessToken:function(t,e){return void 0!==t[e]&&"string"!=typeof t[e]?new Error("Invalid prop `".concat(e,"` of type `").concat(kz(t[e]),"` supplied to `UserFormDetails`, expected `object`.")):void 0!==t[e]||t.useDefualtSessionManager?void 0:new Error("Invalid prop `".concat(e,"` is required when `useDefualtSessionManager` is false."))},beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToLogin:c.a.string,elementLinkToLogin:c.a.element},Rz.defaultProps={useValidationFields:!1,validationFieldsType:"checkout",useDefualtSessionManager:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Kz=function(t){var e=t.defaultUserTypesSelected,r=t.disabledActiveStateCondition,n=t.UIComponent,a=t.userTypesSelected,c=t.selectedUserActiveState,u=t.searchValue,s=t.isSearchByUserId,l=t.isSearchByUserEmail,f=t.isSearchByUserPhone,p=t.isSearchByUserName,h=Hz(er(),1)[0],d=Hz(hr(),1)[0],y=d.token,v=d.loading,m=Hz(Object(o.useState)({loading:!1,error:null,result:null}),2),g=m[0],b=m[1],w=function(){var t,n=(t=zz().mark((function t(n){var o,i,d,m,w,O,x;return zz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!v){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,b(qz(qz({},g),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}},i=[],Array.isArray(e)&&i.push({attribute:"level",value:e}),d=[],n&&(a.length>0&&d.push({attribute:"level",value:a}),r||d.push({attribute:"enabled",value:c}),u&&(m=[],s&&m.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(u,"%"))}}),l&&m.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(u,"%"))}}),f&&m.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(u,"%"))}}),p&&(m.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(u,"%"))}}),m.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(u,"%"))}})),d.push({conector:"OR",conditions:m}))),w=n?"".concat(h.root,"/users.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(d)):i.length>0?"".concat(h.root,"/users.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(i)):"".concat(h.root,"/users.csv?mode=dashboard&orderBy=id"),t.next=12,fetch(w,o);case 12:return O=t.sent,x=(new Date).getTime(),t.next=16,O.blob().then((function(t){var e=window.URL.createObjectURL(t),r=document.createElement("a");r.href=e,r.download="users_".concat(x,".csv"),r.click()}));case 16:b(qz(qz({},g),{},{loading:!1})),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(2),b(qz(qz({},g),{},{loading:!1,error:t.t0}));case 22:case"end":return t.stop()}}),t,null,[[2,19]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Vz(i,n,o,a,c,"next",t)}function c(t){Vz(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,Yz({},t,{actionStatus:g,getCSV:w})))};function Zz(t){return Zz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zz(t)}function Xz(){return Xz=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xz.apply(this,arguments)}function Qz(){Qz=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Zz(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function t$(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function e$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r$(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?e$(Object(r),!0).forEach((function(e){n$(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o$(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i$(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i$(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Kz.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Kz.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var a$=function(t){var e=t.UIComponent,r=t.businessId,n=t.products,a=t.cartProducts,c=t.onSave,u=o$(Object(o.useState)({products:[],loading:!0,error:!1}),2),s=u[0],l=u[1],f=o$(Object(o.useState)([]),2),p=f[0],h=f[1],d=o$(er(),1)[0],y=o$(Rn(),1)[0];Object(o.useEffect)((function(){null!=n&&n.length||r?null!=n&&n.length?m(n):v():l(r$(r$({},s),{},{error:!0,message:"BusinessId is required when products is not defined"}))}),[]),Object(o.useEffect)((function(){s.loading||m(p)}),[y.loading]);var v=function(){var t,e=(t=Qz().mark((function t(){var e,n;return Qz().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.businesses(r).products().where([{attribute:"upselling",value:!0}]).parameters({type:1}).get();case 3:e=t.sent,n=e.content.result,h(n),m(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),l(r$(r$({},s),{},{loading:!1,error:t.t0}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){t$(i,n,o,a,c,"next",t)}function c(t){t$(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),m=function(t){var e=t.filter((function(t){return t.upselling})),r=a.filter((function(t){return e.find((function(e){return e.id===t.id}))}));r.length?l(r$(r$({},s),{},{loading:!1,products:e.filter((function(t){return!t.inventoried&&!r.find((function(e){return e.id===t.id}))}))})):l(r$(r$({},s),{},{loading:!1,products:e}))};return i.a.createElement(e,Xz({},t,{upsellingProducts:s,handleFormProduct:function(t){c(t)}}))};function c$(t){return c$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c$(t)}function u$(){return u$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u$.apply(this,arguments)}function s$(){s$=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==c$(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function l$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f$(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l$(Object(r),!0).forEach((function(e){p$(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h$(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d$(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){h$(i,n,o,a,c,"next",t)}function c(t){h$(i,n,o,a,c,"throw",t)}a(void 0)}))}}function y$(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return v$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v$(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v$(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}a$.propTypes={UIComponent:c.a.elementType,upsellingProducts:c.a.array,businessId:c.a.number};var m$=function(t){var e=t.orderId,r=t.propsToFetch,n=t.asDashboard,a=t.hashKey,c=t.userCustomerId,u=t.isDisableLoadMessages,s=t.drivers,l=t.UIComponent,f=y$(hr(),1)[0],p=f.user,h=f.token,d=f.loading,y=y$(er(),1)[0],v=y$(un(),1)[0],m=y$(Ir(),2)[1],g=y$(br(),2)[1].showToast,b=y$(Object(o.useState)({order:null,loading:!t.order,error:null}),2),w=b[0],O=b[1],x=y$(Object(o.useState)({status:null,loading:!1,error:null}),2),E=x[0],j=x[1],S=y$(Object(o.useState)({loading:!1,error:null}),2),L=S[0],_=S[1],P=y$(Object(o.useState)({loading:!0,error:null,messages:[]}),2),k=P[0],T=P[1],I=y$(Object(o.useState)(!1),2),A=I[0],C=I[1],N=rn(),D=t.accessToken||h,G=function(){var t=d$(s$().mark((function t(){var r,n,o,i,a;return s$().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,T(f$(f$({},k),{},{loading:!0})),r="".concat(y.root,"/orders/").concat(e,"/messages?mode=dashboard"),t.next=5,fetch(r,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(D)}});case 5:return n=t.sent,t.next=8,n.json();case 8:o=t.sent,i=o.error,a=o.result,T(i?f$(f$({},k),{},{loading:!1,error:a}):{messages:a,loading:!1,error:null}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),T(f$(f$({},k),{},{loading:!1,error:[t.t0.Messages]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),F=function(){var t=d$(s$().mark((function t(r){var n,o;return s$().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(f$(f$({},E),{},{loading:!0})),t.next=4,fetch("".concat(y.root,"/orders/").concat(e,"/messages"),{method:"post",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({can_see:"0,2,3",comment:"I am on the parking number: ".concat(r),order_id:e,type:2})});case 4:n=t.sent,o=n.status,j(f$(f$({},E),{},{loading:!1,status:o})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),j(f$(f$({},E),{},{loading:!1,error:[t.t0.message]}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),U=function(){var t=d$(s$().mark((function t(){var o,i,u,s,l;return s$().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={},a&&(o.headers={"X-uuid-access-X":a}),c&&(o.query={mode:"dashboard"}),t.prev=3,O(f$(f$({},w),{},{loading:!0})),i=r?n?y.setAccessToken(h).orders(e).asDashboard().select(r):y.setAccessToken(h).orders(e).select(r):n?y.setAccessToken(h).orders(e).asDashboard():y.setAccessToken(h).orders(e),t.next=8,i.get();case 8:u=t.sent,s=u.content.result,l=Array.isArray(s)?null:s,O(f$(f$({},w),{},{loading:!1,order:l})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),O(f$(f$({},w),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(){return t.apply(this,arguments)}}(),B=function(){var t=d$(s$().mark((function t(e){var r,n;return s$().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,_(f$(f$({},L),{},{loading:!0})),t.next=4,fetch("".concat(y.root,"/orders/").concat(null==e?void 0:e.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({status:e.newStatus})});case 4:return r=t.sent,t.next=7,r.json();case 7:n=t.sent,_({loading:!1,error:n.error?n.result:null}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),_(f$(f$({},L),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),R=function(){var t=d$(s$().mark((function t(){var r,n,o,i,a,c;return s$().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=null==k||null===(r=k.messages[(null==k||null===(n=k.messages)||void 0===n?void 0:n.length)-1])||void 0===r?void 0:r.id,t.prev=1,t.next=4,fetch("".concat(y.root,"/orders/").concat(e,"/messages/").concat(o,"/read"),{method:"GET",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"}});case 4:return i=t.sent,t.next=7,i.json();case 7:a=t.sent,c=a.result,C(c),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=d$(s$().mark((function t(){var e,r,n,o,i,a,c;return s$().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g(vr.Info,m("LOADING","Loading")),_(f$(f$({},L),{},{loading:!0})),i={method:"POST",headers:{Authorization:"Bearer ".concat(h),"Content-Type":"application/json"},body:JSON.stringify({order_id:null===(e=w.order)||void 0===e?void 0:e.id,business_id:null===(r=w.order)||void 0===r?void 0:r.business_id,gateway:null===(n=w.order)||void 0===n||null===(o=n.paymethod)||void 0===o?void 0:o.gateway})},t.next=6,fetch("".concat(y.root,"/payments/stripe/refund"),i);case 6:return a=t.sent,t.next=9,a.json();case 9:c=t.sent,_({loading:!1,error:c.error?c.result:null}),c.error||(O(f$(f$({},w),{},{order:f$(f$({},w.order),{},{refund_data:c.result})})),g(vr.Success,m("ORDER_REFUNDED","Order refunded"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),_(f$(f$({},L),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){t.order?O(f$(f$({},w),{},{order:t.order})):U()}),[e]),Object(o.useEffect)((function(){if(!w.loading&&!d){var t=function(t){var e;if((null==t?void 0:t.id)===(null==w||null===(e=w.order)||void 0===e?void 0:e.id)){if(delete t.total,delete t.subtotal,(null==t||!t.driver)&&null!=t&&t.driver_id){var r=s.find((function(e){return e.id===t.driver_id}));r&&(t.driver=f$({},r))}O(f$(f$({},w),{},{order:Object.assign(w.order,t)}))}};return n||N.join("orders_".concat(p.id)),N.on("update_order",t),function(){n||N.leave("orders_".concat(p.id)),N.off("update_order",t)}}}),[w.order,N,d,s]),Object(o.useEffect)((function(){var t=function(t){O(f$(f$({},w),{},{order:f$(f$({},w.order),{},{user_review:t})}))};return v.on("customer_reviewed",t),function(){v.off("customer_reviewed",t)}}),[w]),Object(o.useEffect)((function(){u||G()}),[e]),i.a.createElement(i.a.Fragment,null,l&&i.a.createElement(l,u$({},t,{order:w,messageErrors:E,actionStatus:L,formatPrice:function(t){return t&&"$ ".concat(t.toFixed(2))},handlerSubmit:function(t){var e=t.spot;F(e)},handleUpdateOrderStatus:B,messages:k,setMessages:T,messagesReadList:A,readMessages:R,handleRefundOrder:M})))};function g$(t){return g$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g$(t)}function b$(){return b$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},b$.apply(this,arguments)}function w$(){w$=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==g$(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function O$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x$(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O$(Object(r),!0).forEach((function(e){E$(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function E$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j$(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function S$(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return L$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L$(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L$(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}m$.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),orderId:c.a.oneOfType([c.a.number,c.a.string]),order:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},m$.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var _$=function(t){var e=t.UIComponent,r=t.order,n=t.onSaveReview,a=S$(er(),1)[0],c=S$(hr(),1)[0],u=S$(Object(o.useState)({quality:0,punctiality:0,service:0,packaging:0,comments:""}),2),s=u[0],l=u[1],f=S$(Object(o.useState)({loading:!1,result:{error:!1}}),2),p=f[0],h=f[1],d=function(){var t,e=(t=w$().mark((function t(){var e,o,i;return w$().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h(x$(x$({},p),{},{loading:!0})),t.prev=1,o={order_id:null==r?void 0:r.id,quality:s.quality,delivery:s.punctiality,service:s.service,package:s.packaging,comment:s.comments,user_id:null==c||null===(e=c.user)||void 0===e?void 0:e.id,business_id:r.business_id},t.next=5,fetch("".concat(a.root,"/business/").concat(r.business_id,"/reviews"),{method:"POST",headers:{Authorization:"Bearer ".concat(c.token),"Content-Type":"application/json"},body:JSON.stringify(o)});case 5:i=t.sent,n&&n(i.content),h({loading:!1,result:i.content}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),h({result:{error:!0,result:t.t0.message},loading:!1});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){j$(i,n,o,a,c,"next",t)}function c(t){j$(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,b$({},t,{stars:s,order:r,formState:p,handleSendReview:d,handleChangeInput:function(t){l(x$(x$({},s),{},{comments:t.target.value}))},handleChangeRating:function(t){l(x$(x$({},s),{},E$({},t.target.name,parseInt(t.target.value))))}})))};function P$(t){return P$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P$(t)}function k$(){return k$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},k$.apply(this,arguments)}function T$(){T$=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==P$(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function I$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function A$(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?I$(Object(r),!0).forEach((function(e){C$(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):I$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function C$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N$(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function D$(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return G$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G$(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G$(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}_$.propTypes={UIComponent:c.a.elementType,order:c.a.object,onSaveReview:c.a.func,handleSendReview:c.a.func},_$.defaultProps={order:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var F$=function(t){var e=t.UIComponent,r=t.pageSlug,n=t.onNotFound,a=D$(Object(o.useState)({body:null,loading:!1,error:null}),2),c=a[0],u=a[1],s=D$(er(),1)[0],l={},f=function(){var t,e=(t=T$().mark((function t(e){var o,i,a,f,p;return T$().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(A$(A$({},c),{},{loading:!0})),t.prev=1,o={},l.page=o,t.next=6,s.pages(e).get({cancelToken:o});case 6:i=t.sent,a=i.content,f=a.error,p=a.result,u(A$(A$({},c),{},{loading:!1})),f?(u(A$(A$({},c),{},{error:p})),n&&n(r)):u(A$(A$({},c),{},{body:p.body})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),"Cancel"!==t.t0.constructor.name&&u(A$(A$({},c),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[1,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){N$(i,n,o,a,c,"next",t)}function c(t){N$(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){return f(r),function(){l.page&&l.page.cancel()}}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,k$({},t,{cmsState:c})))};function U$(t){return U$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U$(t)}function B$(){return B$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},B$.apply(this,arguments)}function R$(){R$=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==U$(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function M$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Y$(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M$(Object(r),!0).forEach((function(e){z$(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function z$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $$(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function q$(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){$$(i,n,o,a,c,"next",t)}function c(t){$$(i,n,o,a,c,"throw",t)}a(void 0)}))}}function J$(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return V$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V$(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V$(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}F$.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},F$.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var H$=function(t){var e=t.UIComponent,r=J$(Ir(),2)[1],n=J$(er(),1)[0],a=J$(hr(),1)[0].token,c=J$(Object(o.useState)(""),2),u=c[0],s=c[1],l=J$(Object(o.useState)({customer:!1,signup:!1}),2),f=l[0],p=l[1],h=J$(Object(o.useState)({loading:!1,result:{error:!1}}),2),d=h[0],y=h[1],v=J$(Object(o.useState)({users:[],loading:!0,error:null}),2),m=v[0],g=v[1],b=function(){var t=q$(R$().mark((function t(e,r){var n;return R$().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=e.filter((function(t){return(null==t?void 0:t.cellphone)===r})))[0]?(y({loading:!1,result:n[0]}),p(Y$(Y$({},f),{},{customer:!0}))):y({loading:!1,result:{error:!1}});case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),w=function(){var t=q$(R$().mark((function t(){var e,r;return R$().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(Y$(Y$({},m),{},{loading:!0})),t.prev=1,t.next=4,n.setAccessToken(a).users().get();case 4:e=t.sent,r=e.content.result,g(Y$(Y$({},m),{},{users:r,loading:!1})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),g(Y$(Y$({},m),{},{loading:!1,error:t.t0.message}));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){!function(t,e){var n;function o(t){if(!t)return!1;!function(t){for(var e=0;e<t.length;e++)t[e].classList.remove("autocomplete-active")}(t),n>=t.length&&(n=0),n<0&&(n=t.length-1),t[n].classList.add("autocomplete-active")}function i(e){for(var r=document.getElementsByClassName("autocomplete-items"),n=0;n<r.length;n++)e!==r[n]&&e!==t&&r[n].parentNode.removeChild(r[n])}t.addEventListener("input",(function(o){var a,c,u=this.value;if(i(),!u)return!1;n=-1;var l=document.createElement("DIV");for((l=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),l.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(l),c=0;c<(null==e?void 0:e.length);c++){var h,d,y;if((null===(h=e[c])||void 0===h||null===(d=h.cellphone)||void 0===d||null===(y=d.substr(0,null==u?void 0:u.length))||void 0===y?void 0:y.toUpperCase())===(null==u?void 0:u.toUpperCase())){var v,w,O=null===(v=e[c])||void 0===v?void 0:v.cellphone;(a=document.createElement("DIV")).innerHTML="<strong>"+(null==O?void 0:O.substr(0,null==u?void 0:u.length))+"</strong>",a.innerHTML+=null==O?void 0:O.substr(null==u?void 0:u.length),a.innerHTML+=" ("+(null===(w=e[c])||void 0===w?void 0:w.name)+")",a.innerHTML+="<input type='hidden' value='"+O+"'>",a.addEventListener("click",(function(r){t.value=this.getElementsByTagName("input")[0].value,s(this.getElementsByTagName("input")[0].value),b(e,this.getElementsByTagName("input")[0].value),i()})),l.appendChild(a)}}(a=document.createElement("DIV")).innerHTML="<strong>"+r("CREATE_CUSTOMER","Create new customer")+"</strong>",a.innerHTML+="<input type='hidden' value='"+r("CREATE_CUSTOMER","Create new customer")+"'>",a.addEventListener("click",(function(t){10===o.target.value.length?p(Y$(Y$({},f),{},{signup:!0})):g(Y$(Y$({},m),{},{error:r("ERROR_MIN_CHARACTERS_PHONE","The Phone / Mobile must be 10 characters")})),i()})),l.appendChild(a)})),t.addEventListener("keydown",(function(t){var e=document.getElementById(this.id+"autocomplete-list");e&&(e=e.getElementsByTagName("div")),40===t.keyCode?(n++,o(e)):38===t.keyCode?(n--,o(e)):13===t.keyCode&&(t.preventDefault(),n>-1&&e&&e[n].click())})),document.addEventListener("click",(function(t){i(t.target)}))}(document.getElementById("phone-input"),m.users)}),[m.users]),Object(o.useEffect)((function(){w()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,B$({},t,{phone:u,customerState:d,customersPhones:m,setCustomersPhones:g,onChangeNumber:function(t){var e,r,n;s(null!==(e=t.target)&&void 0!==e&&null!==(r=e.validity)&&void 0!==r&&r.valid?null===(n=t.target)||void 0===n?void 0:n.value:u)},openModal:f,setOpenModal:p,setCustomerState:y})))};function W$(){return W$=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},W$.apply(this,arguments)}function K$(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Z$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z$(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z$(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}H$.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},H$.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var X$=function(t){var e=t.UIComponent,r=t.businessList,n=t.userLocation,a=t.setErrors,c=K$(un(),1)[0],u=K$(Object(o.useState)([]),2),s=u[0],l=u[1];return Object(o.useEffect)((function(){l(r.map((function(t){return{lat:t.location.lat,lng:t.location.lng,icon:t.logo,slug:t.slug}})))}),[r]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,W$({},t,{businessLocations:s,userLocation:n,onBusinessClick:function(t){c.emit("go_to_page",{page:"business",params:{store:t}})},setErrors:a})))};function Q$(t){return Q$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q$(t)}function tq(){tq=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Q$(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function eq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function rq(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?eq(Object(r),!0).forEach((function(e){nq(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eq(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function nq(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oq(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function iq(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return aq(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aq(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aq(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}X$.propTypes={UIComponent:c.a.elementType,businessList:c.a.array.isRequired,userLocation:c.a.object,setErrors:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},X$.defaultProps={businessList:[],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cq=Object(o.createContext)(),uq=function(t){var e=t.children,r=iq(Object(o.useState)({business:{}}),2),n=r[0],a=r[1],c=function(){var t,e=(t=tq().mark((function t(e){return tq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a(rq(rq({},n),{},{business:e}));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){oq(i,n,o,a,c,"next",t)}function c(t){oq(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),u=JSON.parse(JSON.stringify(n)),s={setBusiness:c};return i.a.createElement(cq.Provider,{value:[u,s]},e)},sq=function(){return Object(o.useContext)(cq)||[{},function(){}]};function lq(){lq=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==fq(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function fq(t){return fq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fq(t)}function pq(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function hq(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){pq(i,n,o,a,c,"next",t)}function c(t){pq(i,n,o,a,c,"throw",t)}a(void 0)}))}}function dq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yq=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n,o,i,a;return e=t,r=[{key:"getItem",value:(a=hq(lq().mark((function t(e,r){var n;return lq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.localStorage.getItem(e);case 2:if(n=t.sent,!r||"object"===fq(n)){t.next=5;break}return t.abrupt("return",JSON.parse(n));case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),function(t,e){return a.apply(this,arguments)})},{key:"setItem",value:(i=hq(lq().mark((function t(e,r,n){var o;return lq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n?JSON.stringify(r):r,t.next=3,window.localStorage.setItem(e,o);case 3:case"end":return t.stop()}}),t)}))),function(t,e,r){return i.apply(this,arguments)})},{key:"removeItem",value:(o=hq(lq().mark((function t(e){return lq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.localStorage.removeItem(e);case 2:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})}],r&&dq(e.prototype,r),n&&dq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),vq=Object(o.createContext)(),mq=function(t){var e=t.Alert,r=t.settings,n=t.children,o=new yq;return i.a.createElement(vq.Provider,null,i.a.createElement(cn,null,i.a.createElement(tr,{settings:r},i.a.createElement(Tr,{strategy:o},i.a.createElement(pr,{strategy:o},i.a.createElement(En,null,i.a.createElement(Hn,null,i.a.createElement(gr,null,i.a.createElement(ho,null,i.a.createElement(en,{settings:Object.assign(r.socket,{project:r.project})},i.a.createElement(Bn,{strategy:o,Alert:e},i.a.createElement(uq,null,n))))))))))))};function gq(){return gq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gq.apply(this,arguments)}var bq=function(t){var e=t.UIComponent,r=t.orderTotal;return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,gq({},t,{total:r})))};function wq(t){return wq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wq(t)}function Oq(){return Oq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Oq.apply(this,arguments)}function xq(){xq=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==wq(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Eq(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function jq(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Eq(i,n,o,a,c,"next",t)}function c(t){Eq(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Sq(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Lq(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lq(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lq(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}bq.propTypes={UIComponent:c.a.elementType,useOrderContext:c.a.bool,businessId:c.a.number,orderTotal:c.a.number,handlerSubmit:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bq.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var _q=function(t){var e,r,n,a=t.body,c=t.clientId,u=t.btnStyle,s=t.UIComponent,l=t.handlerChangePaypal,f=Sq(Rn(),2)[1],p=f.confirmCart,h=f.placeCart,d=Sq(Object(o.useState)(!1),2),y=d[0],v=d[1];Object(o.useEffect)((function(){var t;if(c){if(null===(t=window)||void 0===t||!t.paypal){var e=document.createElement("script");return e.type="text/javascript",e.src="https://www.paypal.com/sdk/js?client-id=".concat(c),e.async=!0,e.onload=function(){v(!0)},e.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(e),function(){e.onload=null}}v(!0)}}),[c]);var m=function(){var t=jq(xq().mark((function t(e,r){var n,o,i,c;return xq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={paymethod_id:a.paymethod_id,amount:a.amount,delivery_zone_id:a.delivery_zone_id},t.next=3,h(a.cartUuid,n);case 3:if(o=t.sent,i=o.error,c=o.result,!i){t.next=8;break}return t.abrupt("return",null);case 8:return t.abrupt("return",c.pay_reference);case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),g=function(){var t=jq(xq().mark((function t(e,r){var n,o,i;return xq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(a.cartUuid);case 2:if(n=t.sent,o=n.error,i=n.result,!o){t.next=7;break}return t.abrupt("return",null);case 7:return l&&l(i.order.uuid),t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),b=function(){var t=jq(xq().mark((function t(e){var r,n;return xq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(a.cartUuid);case 2:return r=t.sent,n=r.result,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=null===(e=window)||void 0===e||null===(r=e.paypal)||void 0===r||null===(n=r.Buttons)||void 0===n?void 0:n.driver("react",{React:i.a,ReactDOM:HN.a});return s&&i.a.createElement(s,Oq({},t,{isSdkReady:y,PaypalButton:w,paypalButtonProps:{createOrder:m,onApprove:g,onError:b,onCancel:b,style:u}}))};function Pq(t){return Pq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pq(t)}function kq(){return kq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kq.apply(this,arguments)}function Tq(){Tq=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Pq(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Iq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Aq(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Iq(Object(r),!0).forEach((function(e){Cq(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Iq(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Cq(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nq(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Dq(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Nq(i,n,o,a,c,"next",t)}function c(t){Nq(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Gq(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Fq(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fq(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fq(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}_q.propTypes={UIComponent:c.a.elementType,body:c.a.object.isRequired,clientId:c.a.string.isRequired,handlerChangePaypal:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_q.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Uq=function(t){var e=t.businessId,r=t.UIComponent,n=Gq(hr(),1)[0],a=n.token,c=n.user,u=Gq(er(),1)[0],s=Gq(Object(o.useState)({cards:[],loading:!0,error:null}),2),l=s[0],f=s[1],p=Gq(Object(o.useState)(t.publicKey),2),h=p[0],d=p[1],y=Gq(Object(o.useState)(null),2),v=y[0],m=y[1],g=Gq(Object(o.useState)({loading:!1,error:null}),2),b=g[0],w=g[1],O={},x=function(){var t=Dq(Tq().mark((function t(){var r,n,o,i;return Tq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(Aq(Aq({},l),{},{loading:!0})),t.prev=1,r={},O.paymentCards=r,t.next=6,u.setAccessToken(a).paymentCards(e,c.id).get({cancelToken:r});case 6:n=t.sent,o=n.content.result,(i=null==o?void 0:o.find((function(t){return t.default})))&&m({id:i.id,type:"card",card:{brand:i.brand,last4:i.last4}}),f(Aq(Aq({},l),{},{loading:!1,cards:o})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),f(Aq(Aq({},l),{},{loading:!1,error:t.t0}));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Dq(Tq().mark((function t(e){var r;return Tq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.paymentCards(-1,c.id,e.id).delete();case 3:r=t.sent,r.content.error||(l.cards=l.cards.filter((function(t){return t.id!==e.id})),f(Aq({},l))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Dq(Tq().mark((function t(r){var n,o,i,s;return Tq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w(Aq(Aq({},b),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({business_id:e,user_id:c.id,card_id:r.id})},o="".concat(u.root,"/payments/stripe/cards/default"),t.next=6,fetch(o,n);case 6:return i=t.sent,t.next=9,i.json();case 9:(s=t.sent).error?w({loading:!1,error:s.result}):(m({id:r.id,type:"card",card:{brand:r.brand,last4:r.last4}}),w({loading:!1,error:null})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),w({loading:!1,error:t.t0});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=Dq(Tq().mark((function t(){var e,r;return Tq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.setAccessToken(a).paymentCards().getCredentials();case 3:e=t.sent,r=e.content.result,d(r.publishable),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),L=function(t){m({id:t.id,type:"card",card:{brand:t.brand,last4:t.last4}})};return Object(o.useEffect)((function(){return a&&(x(),t.publicKey||S()),function(){O.paymentCards&&O.paymentCards.cancel()}}),[a]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,kq({},t,{cardSelected:v,cardsList:l,handleCardClick:L,publicKey:h,handleNewCard:function(t){l.cards.push(t),f(Aq({},l)),L(t)},deleteCard:E,setDefaultCard:j,defaultCardSetActionStatus:b})))};function Bq(t){return Bq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bq(t)}function Rq(){return Rq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rq.apply(this,arguments)}function Mq(){Mq=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Bq(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Yq(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function zq(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Yq(i,n,o,a,c,"next",t)}function c(t){Yq(i,n,o,a,c,"throw",t)}a(void 0)}))}}function $q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return qq(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qq(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qq(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Uq.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,userId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Uq.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Jq=function(t){var e=t.UIComponent,r=$q(er(),1)[0],n=$q(hr(),1)[0].token,a=$q(Object(o.useState)(null),2),c=a[0],u=a[1],s=$q(Object(o.useState)(null),2),l=s[0],f=s[1],p=function(){var t=zq(Mq().mark((function t(){var e,o,i;return Mq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(r.root,"/payments/stripe/credentials"),{headers:{Authorization:"Bearer ".concat(n)}});case 2:return e=t.sent,t.next=5,e.json();case 5:o=t.sent,i=o.result.publishable,u(i);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=zq(Mq().mark((function t(){var e,o,i;return Mq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(r.root,"/payments/stripe/requirements?type=add_card"),{headers:{Authorization:"Bearer ".concat(n)}});case 2:return e=t.sent,t.next=5,e.json();case 5:o=t.sent,i=o.result,f(i);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){n&&(p(),h())}),[n]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,Rq({},t,{stripeKey:c,clientSecret:l})))};function Vq(t){return Vq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vq(t)}function Hq(){return Hq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hq.apply(this,arguments)}function Wq(){Wq=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Vq(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Kq(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Zq(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Xq(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xq(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xq(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Jq.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Jq.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Qq=function(t){var e,r=t.paymentMethods,n=t.UIComponent,a=Zq(hr(),1)[0].token,c=Zq(er(),1)[0],u=Zq(Object(o.useState)(null),2),s=u[0],l=u[1],f=function(){var t,e=(t=Wq().mark((function t(){var e,r,n;return Wq().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(c.root,"/payments/stripe/credentials"),{headers:{Authorization:"Bearer ".concat(a)}});case 2:return e=t.sent,t.next=5,e.json();case 5:r=t.sent,n=r.result.publishable,l(n);case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Kq(i,n,o,a,c,"next",t)}function c(t){Kq(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){f()}),[]),i.a.createElement(i.a.Fragment,null,n&&s&&i.a.createElement(n,Hq({},t,{stripePK:s,modalName:(e="",r.map((function(t,n){n===r.length-1?e+="".concat(t.name):e+="".concat(t.name,", ")})),e)})))};function tJ(t){return tJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tJ(t)}function eJ(){return eJ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eJ.apply(this,arguments)}function rJ(){rJ=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==tJ(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function nJ(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function oJ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function iJ(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?oJ(Object(r),!0).forEach((function(e){aJ(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oJ(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function aJ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cJ(t){return function(t){if(Array.isArray(t))return lJ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||sJ(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uJ(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||sJ(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sJ(t,e){if(t){if("string"==typeof t)return lJ(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lJ(t,e):void 0}}function lJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Qq.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,currency:c.a.string.isRequired,paymentMethods:c.a.arrayOf(c.a.object).isRequired,handlerStripeSource:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Qq.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fJ=function(t){var e=t.UIComponent,r=t.filterList,n=t.handleChangeFilterList,a=t.propsToFetch,c=t.onClose,u=t.isSearchByName,s=t.isSearchByLastName,l=t.availableDriverIds,f=uJ(er(),1)[0],p=uJ(Object(o.useState)({loading:!0,error:null,drivers:[],pagination:null}),2),h=p[0],d=p[1],y=uJ(Object(o.useState)(null),2),v=y[0],m=y[1],g=uJ(Object(o.useState)(!1),2),b=g[0],w=g[1],O=uJ(Object(o.useState)(null),2),x=O[0],E=O[1],j=new RegExp(/^[A-Za-z0-9\s]+$/g),S=function(){var t,e=(t=rJ().mark((function t(){var e,r,n,o,i,c,p,y,v,m;return rJ().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(iJ(iJ({},h),{},{loading:!0})),e=null,r=[{attribute:"level",value:"4"}],(null==l?void 0:l.length)>0&&r.push({attribute:"id",value:l}),x&&(n=[],o=j.test(x),u&&n.push({attribute:"name",value:{condition:"ilike",value:o?encodeURI("%".concat(x,"%")):"%".concat(x,"%")}}),s&&n.push({attribute:"lastname",value:{condition:"ilike",value:o?encodeURI("%".concat(x,"%")):"%".concat(x,"%")}}),r.push({conector:"OR",conditions:n})),r.length&&(e={conditions:r,conector:"AND"}),i=e?f.users().asDashboard().select(a).where(e):f.users().asDashboard().select(a),t.next=10,i.get();case 10:c=t.sent,p=c.content,y=p.error,v=p.result,m=p.pagination,d(iJ(iJ({},h),{},y?{loading:!1,error:v}:{loading:!1,drivers:v,pagination:m})),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),d(iJ(iJ({},h),{},{loading:!1,error:[t.t0||(null===t.t0||void 0===t.t0?void 0:t.t0.toString())||(null===t.t0||void 0===t.t0?void 0:t.t0.message)]}));case 21:case"end":return t.stop()}}),t,null,[[0,18]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){nJ(i,n,o,a,c,"next",t)}function c(t){nJ(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t=new AbortController;return S(),t.abort()}),[x]),Object(o.useEffect)((function(){var t,e,n;if(0!==(null==h||null===(t=h.drivers)||void 0===t?void 0:t.length)){var o=null==h||null===(e=h.drivers)||void 0===e?void 0:e.reduce((function(t,e){return[].concat(cJ(t),[e.id])}),[]),i=(null==r||null===(n=r.drivers_ids)||void 0===n?void 0:n.length)>0?null==r?void 0:r.drivers_ids.filter((function(t){return o.includes(t)})):o;m(cJ(i)),null!=r&&r.drivers_ids&&(null==i?void 0:i.length)!==(null==h?void 0:h.drivers.length)||w(!0)}}),[null==h?void 0:h.drivers]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,eJ({},t,{driverList:h,driverIds:v,searchValue:x,onSearch:E,handleChangeDriverId:function(t){if(null==v?void 0:v.find((function(e){return e===t}))){var e=null==v?void 0:v.filter((function(e){return e!==t}));m(e),w(!1)}else{var r=v?cJ(v):[];r.push(t),r.length===(null==h?void 0:h.drivers.length)&&w(!0),m(r)}},handleClickFilterButton:function(){var t=v?cJ(v):null;n(iJ(iJ({},r),{},{drivers_ids:t})),c&&c()},isAllCheck:b,handleChangeAllCheck:function(){if(b)m(null);else{var t,e=[],r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=sJ(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(h.drivers);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.id)}}catch(t){r.e(t)}finally{r.f()}m(e)}w(!b)}})))};function pJ(t){return pJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pJ(t)}function hJ(){return hJ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hJ.apply(this,arguments)}function dJ(){dJ=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==pJ(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function yJ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vJ(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yJ(Object(r),!0).forEach((function(e){mJ(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yJ(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mJ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gJ(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function bJ(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return wJ(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wJ(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}fJ.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fJ.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname","birthdate","drivergroups"]};var OJ=function(t){var e=t.UIComponent,r=t.order,n=bJ(er(),1)[0],a=bJ(hr(),1)[0],c=bJ(Ir(),2)[1],u=bJ(br(),2)[1].showToast,s=bJ(un(),1)[0],l=bJ(Object(o.useState)({qualification:0,comment:"",order_id:null==r?void 0:r.id,user_id:null==r?void 0:r.customer_id}),2),f=l[0],p=l[1],h=bJ(Object(o.useState)({loading:!1,error:null}),2),d=h[0],y=h[1],v=function(){var e,o=(e=dJ().mark((function e(){var o,i,l;return dJ().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y({loading:!0,error:null}),e.prev=1,e.next=4,fetch("".concat(n.root,"/users/").concat(null==r?void 0:r.customer_id,"/user_reviews"),{method:"POST",headers:{Authorization:"Bearer ".concat(a.token),"Content-Type":"application/json"},body:JSON.stringify(f)});case 4:return o=e.sent,e.next=7,o.json();case 7:i=e.sent,l=i.result,i.error?y({loading:!1,error:l}):(y(vJ(vJ({},f),{},{loading:!1})),u(vr.Success,c("CUSTOMER_REVIEW_SUCCESS_CONTENT","Thank you, Customer review successfully submitted!")),s.emit("customer_reviewed",l),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),y({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){gJ(i,n,o,a,c,"next",t)}function c(t){gJ(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,hJ({},t,{reviewState:f,setReviewState:p,actionState:d,handleChangeQualification:function(t){t&&p(vJ(vJ({},f),{},{qualification:t}))},handleSendCustomerReview:v})))};function xJ(t){return xJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xJ(t)}function EJ(){return EJ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EJ.apply(this,arguments)}function jJ(){jJ=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==xJ(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function SJ(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function LJ(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _J(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _J(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _J(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}OJ.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},OJ.defaultProps={order:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var PJ=function(t){var e=t.UIComponent,r=t.toSave,n=LJ(er(),1)[0],a=LJ(hr(),1)[0].token,c=LJ(Object(o.useState)(),2),u=c[0],s=c[1],l=function(){var t,e=(t=jJ().mark((function t(){var e,r,o;return jJ().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(n.root,"/payments/stripe/requirements?type=add_card"),{headers:{Authorization:"Bearer ".concat(a)}});case 2:return e=t.sent,t.next=5,e.json();case 5:r=t.sent,o=r.result,s(o);case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){SJ(i,n,o,a,c,"next",t)}function c(t){SJ(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){a&&r&&l()}),[a]),i.a.createElement(e,EJ({},t,{requirements:u}))};function kJ(t){return kJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kJ(t)}function TJ(){return TJ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},TJ.apply(this,arguments)}function IJ(){IJ=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==kJ(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function AJ(t){return function(t){if(Array.isArray(t))return RJ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||BJ(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CJ(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function NJ(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){CJ(i,n,o,a,c,"next",t)}function c(t){CJ(i,n,o,a,c,"throw",t)}a(void 0)}))}}function DJ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function GJ(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?DJ(Object(r),!0).forEach((function(e){FJ(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DJ(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function FJ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UJ(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||BJ(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BJ(t,e){if(t){if("string"==typeof t)return RJ(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?RJ(t,e):void 0}}function RJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}PJ.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,toSave:c.a.bool,publicKey:c.a.string,clientSecret:c.a.string,handleSource:c.a.func};var MJ=function(t){var e=t.UIComponent,r=t.business,n=t.category,a=t.product,c=t.handleUpdateBusinessState,u=t.businessState,s=t.setDataSelected,l=UJ(hr(),1)[0].loading,f=UJ(er(),1)[0],p=UJ(Ir(),2)[1],h=UJ(br(),2)[1].showToast,d=UJ(Object(o.useState)({loading:!1,changes:{},result:{error:!1}}),2),y=d[0],v=d[1],m=UJ(Object(o.useState)(!1),2),g=m[0],b=m[1],w=UJ(Object(o.useState)(!1),2),O=w[0],x=w[1],E=function(){var t=NJ(IJ().mark((function t(e){var n,o,i,u,s;return IJ().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,h(vr.Info,p("LOADING","Loading")),v(GJ(GJ({},y),{},{loading:!0})),t.next=7,f.businesses(parseInt(null==r?void 0:r.id)).categories(parseInt(null==a?void 0:a.category_id)).products(null==a?void 0:a.id).save(e);case 7:n=t.sent,o=n.content,i=o.error,u=o.result,i?v(GJ(GJ({},y),{},{loading:!1,result:{error:!0,result:u}})):(v(GJ(GJ({},y),{},{loading:!1,result:{error:!1,result:u}})),c&&((s=AJ(null==r?void 0:r.categories)).forEach((function t(r){if(r.id===(null==a?void 0:a.category_id)){var n=r.products.map((function(t){return t.id===a.id?GJ(GJ({},t),e):t}));r.products=AJ(n)}Array.isArray(null==r?void 0:r.subcategories)&&r.subcategories.forEach(t)})),c(GJ(GJ({},r),{},{categories:s}))),h(vr.Success,p("PRODUCT_UPDATED","Product updated")),b(!1)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),v(GJ(GJ({},y),{},{loading:!1,result:{error:!0,result:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=NJ(IJ().mark((function t(){var e,n,o,i,u;return IJ().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,h(vr.Info,p("LOADING","Loading")),v(GJ(GJ({},y),{},{loading:!0})),t.next=7,f.businesses(parseInt(null==r?void 0:r.id)).categories(parseInt(null==a?void 0:a.category_id)).products(null==a?void 0:a.id).delete();case 7:e=t.sent,n=e.content,o=n.error,i=n.result,o?v(GJ(GJ({},y),{},{loading:!1,result:{error:!0,result:i}})):(v(GJ(GJ({},y),{},{loading:!1,result:{error:!1,result:i}})),c&&((u=AJ(null==r?void 0:r.categories)).forEach((function t(e){if(e.id===(null==a?void 0:a.category_id)){var r=e.products.filter((function(t){return t.id!==a.id}));e.products=AJ(r)}Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})),c(GJ(GJ({},r),{},{categories:u}))),h(vr.Success,p("PRODUCT_DELETED","Product deleted"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),v(GJ(GJ({},y),{},{loading:!1,result:{error:!0,result:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=NJ(IJ().mark((function t(e,n){var o,i,u,s,d;return IJ().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,h(vr.Info,p("LOADING","Loading")),t.next=6,f.businesses(parseInt(null==r?void 0:r.id)).categories(parseInt(null==a?void 0:a.category_id)).products(e).save(n);case 6:o=t.sent,i=o.content,u=i.error,s=i.result,u?v(GJ(GJ({},y),{},{loading:!1,result:{error:!0,result:s}})):(c&&((d=AJ(null==r?void 0:r.categories)).forEach((function t(r){if(r.id===(null==a?void 0:a.category_id)){var n=r.products.map((function(t){return t.id===e?GJ(GJ({},t),{},{rank:null==s?void 0:s.rank}):t}));r.products=AJ(n)}Array.isArray(null==r?void 0:r.subcategories)&&r.subcategories.forEach(t)})),c(GJ(GJ({},r),{},{categories:d}))),h(vr.Success,p("PRODUCT_UPDATED","Product updated"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),v(GJ(GJ({},y),{},{loading:!1,result:{error:!0,result:[t.t0.message]}}));case 16:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,r){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){a&&v(GJ(GJ({},y),{},{changes:GJ({},a)}))}),[a,u]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,TJ({},t,{handleChangeProductActive:function(t){E({enabled:t})},handleUpdateClick:function(){var t,e,r,n,o,i,a={images:null==y||null===(t=y.changes)||void 0===t?void 0:t.images,name:null==y||null===(e=y.changes)||void 0===e?void 0:e.name,description:null==y||null===(r=y.changes)||void 0===r?void 0:r.description,price:null==y||null===(n=y.changes)||void 0===n?void 0:n.price,fee_fixed:null==y||null===(o=y.changes)||void 0===o?void 0:o.fee_fixed,fee_percentage:null==y||null===(i=y.changes)||void 0===i?void 0:i.fee_percentage};for(var c in a)null===a[c]&&delete a[c];E(a)},deleteProduct:j,productFormState:y,handleChangeInput:function(t){v(GJ(GJ({},y),{},{changes:GJ(GJ({},y.changes),{},FJ({},t.target.name,t.target.value))})),b(!0)},handlechangeImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){v(GJ(GJ({},y),{},{changes:GJ(GJ({},y.changes),{},{images:e.result})}))},e.onerror=function(t){return console.log(t)},b(!0)},isEditMode:g,handleDragStart:function(t,e){t.dataTransfer.setData("transferProductId",e);var r=document.createElement("div");r.classList.add("ghostDragging"),r.innerHTML=null==a?void 0:a.name,document.body.appendChild(r),t.dataTransfer.setDragImage(r,0,0),x(!1)},handleDragOver:function(t,e){t.preventDefault();var r=t.target.closest(".draggable-product");if(r)if(e){var n=window.scrollY+t.target.getBoundingClientRect().top+t.target.offsetHeight/2;t.clientY>n?(x(!0),s("")):(x(!1),s(r.dataset.index))}else s(r.dataset.index)},handleDrop:function(t){t.preventDefault();var e,r=parseInt(t.dataTransfer.getData("transferProductId"));if(O){var o=n.products.sort((function(t,e){return t.rank-e.rank})),i=o.length,c=o.findIndex((function(t){return t.id===a.id}));e=c===i-1?o[c].rank+1:o[c+1].rank}else e=null==a?void 0:a.rank;x(!1),S(r,{rank:e})},handleDragEnd:function(){for(var t=document.getElementsByClassName("ghostDragging");t.length>0;)t[0].parentNode.removeChild(t[0]);s("")},isProductsBottom:O})))};function YJ(t){return YJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YJ(t)}function zJ(){return zJ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zJ.apply(this,arguments)}function $J(){$J=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==YJ(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function qJ(t){return function(t){if(Array.isArray(t))return QJ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||XJ(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JJ(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function VJ(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){JJ(i,n,o,a,c,"next",t)}function c(t){JJ(i,n,o,a,c,"throw",t)}a(void 0)}))}}function HJ(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function WJ(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?HJ(Object(r),!0).forEach((function(e){KJ(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HJ(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function KJ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZJ(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||XJ(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XJ(t,e){if(t){if("string"==typeof t)return QJ(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?QJ(t,e):void 0}}function QJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}MJ.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,product:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},MJ.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var tV=function(t){var e=t.UIComponent,r=t.handleUpdateBusinessState,n=t.business,a=t.category,c=t.categorySelected,u=t.setCategorySelected,s=t.setDataSelected,l=ZJ(hr(),1)[0].loading,f=ZJ(er(),1)[0],p=ZJ(Ir(),2)[1],h=ZJ(br(),2)[1].showToast,d=ZJ(Object(o.useState)({changes:{},loading:!1,result:{error:!1}}),2),y=d[0],v=d[1],m=ZJ(Object(o.useState)(!1),2),g=m[0],b=m[1],w=ZJ(Object(o.useState)(!1),2),O=w[0],x=w[1],E=function(){var t=VJ($J().mark((function t(e,o){var i,a,c;return $J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,h(vr.Info,p("LOADING","Loading")),t.next=6,f.businesses(parseInt(null==n?void 0:n.id)).categories(e).save(o);case 6:i=t.sent,(a=i.content).error||((c=qJ(null==n?void 0:n.categories)).forEach((function t(r){r.id===e&&(r.rank=a.result.rank),Array.isArray(null==r?void 0:r.subcategories)&&r.subcategories.forEach(t)})),r(WJ(WJ({},n),{},{categories:c})),h(vr.Success,p("CATEOGORY_UPDATED","Category updated"))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),v(WJ(WJ({},y),{},{loading:!1,result:{error:!0,result:t.t0}}));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,r){return t.apply(this,arguments)}}(),j=function(){var t=VJ($J().mark((function t(e){var o,i,c,u,s;return $J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,h(vr.Info,p("LOADING","Loading")),v(WJ(WJ({},y),{},{loading:!0})),t.next=7,f.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(a.id)).save(e);case 7:o=t.sent,i=o.content,c=i.error,u=i.result,c?v(WJ(WJ({},y),{},{loading:!1,result:{error:!0,result:u}})):(v(WJ(WJ({},y),{},{loading:!1,result:{error:!1,result:u}})),b(!1),r&&((s=qJ(n.categories)).forEach((function t(e){e.id===u.id&&(e.name=null==u?void 0:u.name,e.enabled=null==u?void 0:u.enabled,e.image=null==u?void 0:u.image),Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})),r(WJ(WJ({},n),{},{categories:s}))),h(vr.Success,p("CATEOGORY_UPDATED","Category updated"))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),v(WJ(WJ({},y),{},{loading:!1,result:{error:!0,result:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}(),S=function(){var e=VJ($J().mark((function e(){var o,i,s,d,m;return $J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(vr.Info,p("LOADING","Loading")),v(WJ(WJ({},y),{},{loading:!0})),e.next=7,f.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(a.id)).delete();case 7:o=e.sent,i=o.content,s=i.error,d=i.result,s?v(WJ(WJ({},y),{},{loading:!1,result:{error:!0,result:d}})):(v(WJ(WJ({},y),{},{loading:!1,result:{error:!1,result:d}})),r&&((m=qJ(n.categories)).forEach((function t(e,r,n){e.id===a.id&&n.splice(r,1),Array.isArray(null==e?void 0:e.subcategories)&&e.subcategories.forEach(t)})),r(WJ(WJ({},n),{},{categories:m})),a.id===c.id&&u(m[0])),h(vr.Success,p("CATEOGORY_DELETED","Category deleted")),t.onClose&&t.onClose(a.id)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),v(WJ(WJ({},y),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){v(WJ(WJ({},y),{},a?{changes:WJ({},a)}:{changes:{}}))}),[a]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,zJ({},t,{handelChangeCategoryActive:function(t){j({enabled:t})},categoryFormState:y,isCategoriesBottom:O,handlechangeImage:function(t){var e=new window.FileReader;e.readAsDataURL(t),e.onload=function(){v(WJ(WJ({},y),{},{changes:WJ(WJ({},y.changes),{},{image:e.result})}))},e.onerror=function(t){return console.log(t)},b(!0)},handleUpdateClick:function(){var t,e,r={name:null==y||null===(t=y.changes)||void 0===t?void 0:t.name,image:null==y||null===(e=y.changes)||void 0===e?void 0:e.image};for(var n in r)null===r[n]&&delete r[n];j(r)},deleteCategory:S,handleInputChange:function(t){v(WJ(WJ({},y),{},{changes:WJ(WJ({},y.changes),{},KJ({},t.target.name,t.target.value))})),b(!0)},isEditMode:g,handleDragStart:function(t){t.dataTransfer.setData("transferCategoryId",null==a?void 0:a.id);var e=document.createElement("div");e.classList.add("ghostDragging"),e.innerHTML=a.name,document.body.appendChild(e),t.dataTransfer.setDragImage(e,0,0),x(!1)},handleDragOver:function(t,e){t.preventDefault();var r=t.target.closest(".draggable-category");if(r)if(e){var n=window.scrollY+t.target.getBoundingClientRect().top+t.target.offsetHeight/2;t.clientY>n?(x(!0),s("")):(x(!1),s(r.dataset.index))}else s(r.dataset.index)},handleDrop:function(t){t.preventDefault();var e,r=parseInt(t.dataTransfer.getData("transferCategoryId"));e=O?(null==a?void 0:a.rank)+1:null==a?void 0:a.rank,x(!1),E(r,{rank:e})},handleDragEnd:function(){s("");for(var t=document.getElementsByClassName("ghostDragging");t.length>0;)t[0].parentNode.removeChild(t[0])}})))};function eV(t){return eV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eV(t)}function rV(){return rV=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rV.apply(this,arguments)}function nV(){nV=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==eV(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function oV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function iV(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?oV(Object(r),!0).forEach((function(e){aV(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oV(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function aV(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cV(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function uV(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){cV(i,n,o,a,c,"next",t)}function c(t){cV(i,n,o,a,c,"throw",t)}a(void 0)}))}}function sV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return lV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lV(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lV(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}tV.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,category:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},tV.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fV=function(t){var e=t.UIComponent,r=sV(er(),1)[0],n=sV(hr(),2),a=n[0],c=a.user,u=a.token,s=n[1],l=s.login,f=s.logout,p=sV(Object(o.useState)({sessions:[],loading:!0,error:null}),2),h=p[0],d=p[1],y=sV(Object(o.useState)({loading:!1,error:null}),2),v=y[0],m=y[1],g=function(){var t=uV(nV().mark((function t(){var e,n,o,i;return nV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(iV(iV({},h),{},{loading:!0})),t.next=4,fetch("".concat(r.root,"/users/").concat(c.id,"/sessions"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}});case 4:return e=t.sent,t.next=7,e.json();case 7:n=t.sent,o=n.result,i=n.error,d(i?iV(iV({},h),{},{loading:!1,error:o}):{loading:!1,error:null,sessions:o}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),d(iV(iV({},h),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=uV(nV().mark((function t(e){var n,o,i,a;return nV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(iV(iV({},v),{},{loading:!0})),t.next=4,fetch("".concat(r.root,"/users/").concat(c.id,"/sessions/").concat(e.id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}});case 4:return n=t.sent,t.next=7,n.json();case 7:o=t.sent,i=o.result,o.error?m({loading:!1,error:i}):(a=h.sessions.filter((function(t){return t.id!==e.id})),d(iV(iV({},h),{},{sessions:a})),m({loading:!1,error:null}),e.current&&f()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=uV(nV().mark((function t(){var e,n,o,i,a=arguments;return nV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]&&a[0],t.prev=1,m(iV(iV({},v),{},{loading:!0})),t.next=5,fetch("".concat(r.root,"/users/").concat(c.id,"/sessions/all"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify({delete_current:e})});case 5:return n=t.sent,t.next=8,n.json();case 8:o=t.sent,i=o.result,o.error?m({loading:!1,error:i}):(m({loading:!1,error:null}),e?(d(iV(iV({},h),{},{sessions:[]})),f()):(d(iV(iV({},h),{},{sessions:h.sessions.filter((function(t){return t.current}))})),"jwt"===(null==c?void 0:c.session_strategy)&&l({token:u,user:iV(iV({},c),{},{session_strategy:"jwt_session"})}))),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),m({loading:!1,error:[t.t0.message]});case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){"jwt_session"===(null==c?void 0:c.session_strategy)?g():d(iV(iV({},h),{},{loading:!1,sessions:[]}))}),[null==c?void 0:c.session_strategy]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,rV({},t,{sessionsList:h,actionState:v,handleDeleteSession:b,handleDeleteAllSessions:w})))};function pV(t){return pV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pV(t)}function hV(){return hV=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hV.apply(this,arguments)}function dV(){dV=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==pV(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function yV(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function vV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mV(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vV(Object(r),!0).forEach((function(e){gV(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vV(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function gV(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bV(t){return function(t){if(Array.isArray(t))return xV(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||OV(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||OV(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OV(t,e){if(t){if("string"==typeof t)return xV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xV(t,e):void 0}}function xV(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}fV.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fV.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var EV=function(t){var e=t.UIComponent,r=t.category,n=t.handleUpdateCategoryList,a=t.categoryList,c=t.staticConfigs,u=t.handleChangeStaic,s=wV(Object(o.useState)(null),2),l=s[0],f=s[1],p=wV(hr(),1)[0].loading,h=wV(er(),1)[0],d=wV(br(),2)[1].showToast,y=wV(Ir(),2)[1],v=wV(jn(),2)[1].refreshConfigs,m=wV(Object(o.useState)({changes:null,loading:!1,result:{error:null},API:!1,finalResult:[]}),2),g=m[0],b=m[1],w=function(t,e){var r,n=l.find((function(t){return t.id===e}));switch(null==n?void 0:n.key){case"platform_fee_fixed":case"platform_fee_percentage":if(isNaN(Number(t)&&""!==t))return}var o=[],i=null==g||null===(r=g.changes)||void 0===r?void 0:r.find((function(t){return t.id===e}));i?o=null==g?void 0:g.changes.map((function(r){return r.id===e?mV(mV({},r),{},{value:t}):r})):(null!=g&&g.changes&&(o=bV(null==g?void 0:g.changes)),o.push(mV(mV({},n),{},{value:t})));var a=l.map((function(r){return r.id===e?mV(mV({},r),{},{value:t}):r}));b(mV(mV({},g),{},{changes:o})),f(a)},O=function(t){return"["+t+"]"},x=function(){var t,e=(t=dV().mark((function t(e,o){var i,c,s,l,f,m,w;return dV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,d(vr.Info,y("LOADING","Loading")),b(mV(mV({},g),{},{loading:!0,API:!1})),t.next=7,h.configs(e).save(o);case 7:i=t.sent,c=i.content,s=c.error,l=c.result,s?b(mV(mV({},g),{},{loading:!1,result:{error:!0,result:l},API:!1})):(f=null!=g&&g.changes?null==g?void 0:g.changes.filter((function(t){return t.id!==l.id})):[],m=null==g?void 0:g.finalResult.map((function(t){return t.id===l.id?mV(mV({},t),{},{value:null==l?void 0:l.value}):t})),f.length>0?b({loading:!1,changes:f,result:{error:!1,result:l},API:!0,finalResult:m}):(b({loading:!1,changes:null,result:{error:!1,result:"ok"},API:!1,finalResult:m}),d(vr.Success,y("SETTINGS_UPDATE","Settings updated")),n&&(w=null==a?void 0:a.categories.map((function(t){return t.id===r.id?mV(mV({},t),{},{configs:m}):t})),n(w)),u&&u(bV(m)),v&&v())),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),b(mV(mV({},g),{},{loading:!1,result:{error:!0,result:t.t0},API:!1}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yV(i,n,o,a,c,"next",t)}function c(t){yV(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){if((null==r?void 0:r.configs.length)>0){var t=bV(null==r?void 0:r.configs);f(t),b(mV(mV({},g),{},{finalResult:t}))}}),[null==r?void 0:r.configs]),Object(o.useEffect)((function(){c&&(f(bV(c)),b(mV(mV({},g),{},{finalResult:bV(c)})))}),[c]),Object(o.useEffect)((function(){var t;if(null!=g&&g.API&&(null==g||null===(t=g.changes)||void 0===t?void 0:t.length)>0){var e={key:null==g?void 0:g.changes[0].key,value:null==g?void 0:g.changes[0].value};x(null==g?void 0:g.changes[0].id,e)}}),[null==g?void 0:g.API]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,hV({},t,{settingsState:g,configs:l,handleInputChange:w,handleCheckBoxChange:function(t,e,r){var n,o=parseInt(t.target.getAttribute("data-id"));if(e){var i=""===r?[]:r.split("|"),a=i.indexOf(t.target.name);-1===a&&t.target.checked&&i.push(t.target.name),!t.target.checked&&a>=0&&i.splice(a,1),n=i.join("|")}else{var c=bV(JSON.parse(r)),u=c.indexOf(parseInt(t.target.name));-1===u&&t.target.checked&&c.push(parseInt(t.target.name)),!t.target.checked&&u>=0&&c.splice(u,1),n=JSON.stringify(c)}w(n,o)},handleClickUpdate:function(){var t;if(null!=g&&g.changes&&0!==(null==g||null===(t=g.changes)||void 0===t?void 0:t.length)){var e=null==g?void 0:g.changes.map((function(t){return"driver_tip_options"===t.key?mV(mV({},t),{},{value:O(null==t?void 0:t.value)}):t}));b(mV(mV({},g),{},{changes:bV(e),API:!0}))}},formState:g,handleChangeFormState:b,saveConfig:x})))};EV.propTypes={UIComponent:c.a.elementType,category:c.a.object,staticConfigs:c.a.arrayOf(a.object),categoryList:c.a.object,handleUpdateCategoryList:c.a.func,handleChangeStaic:c.a.func,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},EV.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jV=r(12);function SV(t){return SV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SV(t)}function LV(){return LV=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LV.apply(this,arguments)}function _V(){_V=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==SV(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function PV(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function kV(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){PV(i,n,o,a,c,"next",t)}function c(t){PV(i,n,o,a,c,"throw",t)}a(void 0)}))}}function TV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return IV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IV(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IV(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var AV=function(t){var e=t.UIComponent,r=t.requirements,n=t.toSave,a=t.handleSource,c=t.onNewCard,u=TV(hr(),1)[0].user,s=TV(er(),1)[0],l=Object(jV.useStripe)(),f=Object(jV.useElements)(),p=TV(Object(o.useState)(null),2),h=p[0],d=p[1],y=TV(Object(o.useState)(!1),2),v=y[0],m=y[1],g=function(){var t=kV(_V().mark((function t(e,r,n){var o,i,a;return _V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(s.root,"/payments/stripe/cards"),{method:"POST",headers:{Authorization:"Bearer ".concat(null==r||null===(o=r.session)||void 0===o?void 0:o.access_token),"Content-Type":"application/json"},body:JSON.stringify({business_id:n,gateway:"stripe",token_id:e,user_id:null==r?void 0:r.id})});case 2:return i=t.sent,t.next=5,i.json();case 5:a=t.sent,c&&c(a.result);case 7:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),b=function(){var e=kV(_V().mark((function e(o){var i,c,s;return _V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(!0),o.preventDefault(),i=null==f?void 0:f.getElement(jV.CardElement),r){e.next=10;break}return e.next=6,l.createPaymentMethod({type:"card",card:i,billing_details:{name:"".concat(u.name," ").concat(u.lastname),email:u.email,address:u.address}});case 6:(c=e.sent).error?(m(!1),d(c.error.message)):(m(!1),d(null),a&&a({id:null==c?void 0:c.paymentMethod.id,type:"card",card:{brand:null==c?void 0:c.paymentMethod.card.brand,last4:null==c?void 0:c.paymentMethod.card.last4}})),e.next=14;break;case 10:return e.next=12,l.confirmCardSetup(r,{payment_method:{card:i,billing_details:{name:"".concat(u.name," ").concat(u.lastname),email:u.email,address:u.address}}});case 12:(s=e.sent).error?(m(!1),d(s.error.message)):(m(!1),d(null),n&&g(s.setupIntent.payment_method,u,t.businessId));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(e,LV({},t,{handleSubmit:b,error:h,loading:v,handleChange:function(t){t.error?d(t.error.message):d(null)}}))};function CV(t){return CV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CV(t)}function NV(){return NV=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NV.apply(this,arguments)}function DV(){DV=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==CV(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function GV(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}AV.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,clientSecret:c.a.string,autosave:c.a.bool,handlerToken:c.a.func},AV.defaultProps={autosave:!0};var FV=function(t){var e=t.UIComponent,r=t.handleStripeRedirect,n=function(){var t,e=(t=DV().mark((function t(e){var n,o,i;return DV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.type,o=e.name,i=e.email,r&&r({type:n,owner:{name:o,email:i}});case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){GV(i,n,o,a,c,"next",t)}function c(t){GV(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,NV({},t,{handleSubmitPaymentMethod:n})))};function UV(){return UV=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UV.apply(this,arguments)}FV.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},FV.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var BV=function(t){var e=t.handleClick,r=t.btnText,n=t.btnValue,o=t.UIComponent;return i.a.createElement(i.a.Fragment,null,o&&i.a.createElement(o,UV({},t,{handleButtonClick:e,btnText:r,btnValue:n})))};function RV(t){return RV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RV(t)}function MV(){return MV=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MV.apply(this,arguments)}function YV(){YV=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==RV(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function zV(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $V(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zV(Object(r),!0).forEach((function(e){qV(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zV(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qV(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JV(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function VV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return HV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HV(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HV(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}BV.propTypes={UIComponent:c.a.elementType,btnText:c.a.string.isRequired,btnValue:c.a.number,handleClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},BV.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var WV=function(t){var e=t.UIComponent,r=t.code,n=t.random,a=t.handleCustomResetPassword,c=t.handleSuccessResetPassword,u=VV(Object(o.useState)({loading:!1,result:{error:!1}}),2),s=u[0],l=u[1],f=VV(Object(o.useState)({code:r,random:n,password:""}),2),p=f[0],h=f[1],d=VV(Object(o.useState)(!1),2),y=d[0],v=d[1],m=VV(er(),1)[0],g=function(){var t,e=(t=YV().mark((function t(){var e,r,n;return YV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return",a(p));case 2:return t.prev=2,l($V($V({},s),{},{loading:!0})),t.next=6,m.users().resetPassword(p);case 6:e=t.sent,r=e.response,n=r.data,l({result:n,loading:!1}),n.error||(c&&c(n.result),v(!0)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),"Cancel"!==t.t0.constructor.name&&l({result:{error:!0,result:t.t0.message},loading:!1});case 16:case"end":return t.stop()}}),t,null,[[2,13]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){JV(i,n,o,a,c,"next",t)}function c(t){JV(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,MV({},t,{handleResetPassword:g,handleChangeInput:function(t){h($V($V({},p),{},qV({},t.target.name,t.target.value)))},resetPasswordData:p,formState:s,isSuccessfulReset:y})))};function KV(t){return KV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KV(t)}function ZV(){return ZV=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZV.apply(this,arguments)}function XV(){XV=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==KV(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function QV(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function tH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function eH(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tH(Object(r),!0).forEach((function(e){rH(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tH(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rH(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nH(t){return function(t){if(Array.isArray(t))return aH(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||iH(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oH(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||iH(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iH(t,e){if(t){if("string"==typeof t)return aH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aH(t,e):void 0}}function aH(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}WV.propTypes={UIComponent:c.a.elementType,code:c.a.string,random:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},WV.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cH=function(t){var e=t.UIComponent,r=t.filterList,n=t.handleChangeFilterList,a=t.propsToFetch,c=t.onClose,u=oH(er(),1)[0],s=oH(Object(o.useState)({loading:!0,error:null,brands:[],pagination:null}),2),l=s[0],f=s[1],p=oH(Object(o.useState)(null),2),h=p[0],d=p[1],y=oH(Object(o.useState)(!1),2),v=y[0],m=y[1],g=oH(hr(),1)[0],b=g.token,w=g.loading,O=g.user,x=function(){var t,e=(t=XV().mark((function t(){var e,r,n,o,i,c,s,p,h,d,y;return XV().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,f(eH(eH({},l),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)}},r=[],0===(null==O?void 0:O.level)){t.next=11;break}return t.next=9,u.setAccessToken(b).businesses().select(["franchise_id"]).asDashboard().get();case 9:(n=t.sent).content.error||(r=null===(o=n.content.result)||void 0===o?void 0:o.reduce((function(t,e){return[].concat(nH(t),[e.franchise_id])}),[]).filter((function(t){return t})));case 11:return i="".concat(u.root,"/franchises?params=").concat(a),t.next=14,fetch(i,e);case 14:return c=t.sent,t.next=17,c.json();case 17:s=t.sent,p=s.error,h=s.result,d=s.pagination,p?f(eH(eH({},l),{},{loading:!1,error:h})):(y=0===(null==O?void 0:O.level)?null==h?void 0:h.filter((function(t){return t.enabled})):null==h?void 0:h.filter((function(t){return t.enabled&&r.includes(t.id)})),f(eH(eH({},l),{},{loading:!1,brands:y,pagination:d}))),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(2),f(eH(eH({},l),{},{loading:!1,error:t.t0}));case 27:case"end":return t.stop()}}),t,null,[[2,24]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){QV(i,n,o,a,c,"next",t)}function c(t){QV(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t=new AbortController;return x(),t.abort()}),[]),Object(o.useEffect)((function(){var t,e,n;if(0!==(null==l||null===(t=l.brands)||void 0===t?void 0:t.length)){var o=null===(e=l.brands)||void 0===e?void 0:e.reduce((function(t,e){return[].concat(nH(t),[e.id])}),[]);d(nH((null==r?void 0:r.franchises_id)||o)),null!=r&&r.franchises_id&&(null==r||null===(n=r.franchises_id)||void 0===n?void 0:n.length)!==(null==l?void 0:l.brands.length)||m(!0)}}),[null==l?void 0:l.brands]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,ZV({},t,{brandList:l,brandIds:h,handleChangeBrandId:function(t){if(null==h?void 0:h.find((function(e){return e===t}))){var e=null==h?void 0:h.filter((function(e){return e!==t}));d(e),m(!1)}else{var r=h?nH(h):[];r.push(t),r.length===(null==l?void 0:l.brands.length)&&m(!0),d(r)}},handleClickFilterButton:function(){var t=h?nH(h):null;n(eH(eH({},r),{},{franchises_id:t})),c&&c()},isAllCheck:v,handleChangeAllCheck:function(){if(v)d(null);else{var t,e=[],r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=iH(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(l.brands);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.id)}}catch(t){r.e(t)}finally{r.f()}d(e)}m(!v)}})))};function uH(t){return uH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uH(t)}function sH(){return sH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sH.apply(this,arguments)}function lH(){lH=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==uH(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function fH(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function pH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function hH(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pH(Object(r),!0).forEach((function(e){dH(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pH(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function dH(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yH(t){return function(t){if(Array.isArray(t))return gH(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||mH(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vH(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||mH(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mH(t,e){if(t){if("string"==typeof t)return gH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gH(t,e):void 0}}function gH(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}cH.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cH.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","logo","description","header","enabled","created_at","updated_at"]};var bH=function(t){var e=t.UIComponent,r=t.filterList,n=t.handleChangeFilterList,a=t.propsToFetch,c=t.onClose,u=vH(er(),1)[0],s=vH(Object(o.useState)({loading:!0,error:null,appIds:[],pagination:null}),2),l=s[0],f=s[1],p=vH(Object(o.useState)(null),2),h=p[0],d=p[1],y=vH(Object(o.useState)(!1),2),v=y[0],m=y[1],g=vH(hr(),1)[0],b=g.token,w=g.loading,O=function(){var t,e=(t=lH().mark((function t(){var e,r,n,o,i,c,s;return lH().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,f(hH(hH({},l),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)}},r="".concat(u.root,"/sites?params=").concat(a),t.next=8,fetch(r,e);case 8:return n=t.sent,t.next=11,n.json();case 11:o=t.sent,i=o.error,c=o.result,s=o.pagination,f(hH(hH({},l),{},i?{loading:!1,error:c}:{loading:!1,appIds:c,pagination:s})),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),f(hH(hH({},l),{},{loading:!1,error:t.t0}));case 21:case"end":return t.stop()}}),t,null,[[2,18]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){fH(i,n,o,a,c,"next",t)}function c(t){fH(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t=new AbortController;return O(),t.abort()}),[]),Object(o.useEffect)((function(){var t,e,n;if(0!==(null==l||null===(t=l.appIds)||void 0===t?void 0:t.length)){var o=null===(e=l.appIds)||void 0===e?void 0:e.reduce((function(t,e){return[].concat(yH(t),[e.id])}),[]);d(yH((null==r?void 0:r.app_ids)||o)),null!=r&&r.app_ids&&(null==r||null===(n=r.app_ids)||void 0===n?void 0:n.length)!==(null==l?void 0:l.appIds.length)||m(!0)}}),[null==l?void 0:l.appIds]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,sH({},t,{appIdList:l,appIds:h,handleChangeAppId:function(t){if(null==h?void 0:h.find((function(e){return e===t}))){var e=null==h?void 0:h.filter((function(e){return e!==t}));d(e),m(!1)}else{var r=h?yH(h):[];r.push(t),r.length===(null==l?void 0:l.appIds.length)&&m(!0),d(r)}},handleClickFilterButton:function(){var t=h?yH(h):null;n(hH(hH({},r),{},{app_ids:t})),c&&c()},isAllCheck:v,handleChangeAllCheck:function(){if(v)d(null);else{var t,e=[],r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=mH(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(l.appIds);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.id)}}catch(t){r.e(t)}finally{r.f()}d(e)}m(!v)}})))};function wH(t){return wH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wH(t)}function OH(){return OH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OH.apply(this,arguments)}function xH(){xH=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==wH(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function EH(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function jH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function SH(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jH(Object(r),!0).forEach((function(e){LH(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jH(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function LH(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _H(t){return function(t){if(Array.isArray(t))return TH(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||kH(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PH(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||kH(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kH(t,e){if(t){if("string"==typeof t)return TH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?TH(t,e):void 0}}function TH(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}bH.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bH.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","logo","description","header","enabled","created_at","updated_at"]};var IH=function(t){var e=t.UIComponent,r=t.filterList,n=t.handleChangeFilterList,a=t.propsToFetch,c=t.onClose,u=t.setAvailableDriverIds,s=PH(er(),1)[0],l=PH(Object(o.useState)({loading:!0,error:null,driverGroups:[],pagination:null}),2),f=l[0],p=l[1],h=PH(Object(o.useState)(null),2),d=h[0],y=h[1],v=PH(Object(o.useState)(!1),2),m=v[0],g=v[1],b=PH(hr(),1)[0],w=b.token,O=b.loading,x=PH(Object(o.useState)(null),2),E=x[0],j=x[1],S=new RegExp(/^[A-Za-z0-9\s]+$/g),L=function(t){if(t){var e=[];f.driverGroups.forEach((function(r){t.includes(r.id)&&r.drivers.forEach((function(t){e.push(t.id)}))}));var r=e.filter((function(t,e,r){return r.indexOf(t)===e}));u(r)}else u(null)},_=function(){var t,e=(t=xH().mark((function t(){var e,r,n,o,i,c,u,l,h,d,y,v;return xH().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!O){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,p(SH(SH({},f),{},{loading:!0})),e=null,r=[],E&&(n=[],o=S.test(E),n.push({attribute:"name",value:{condition:"ilike",value:o?encodeURI("%".concat(E,"%")):"%".concat(E,"%")}}),r.push({conector:"AND",conditions:n})),r.length&&(e={conditions:r,conector:"AND"}),i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}},c=e?"".concat(s.root,"/drivergroups?params=").concat(a,"&where=").concat(JSON.stringify(r[0])):"".concat(s.root,"/drivergroups?params=").concat(a),t.next=12,fetch(c,i);case 12:return u=t.sent,t.next=15,u.json();case 15:l=t.sent,h=l.error,d=l.result,y=l.pagination,h?p(SH(SH({},f),{},{loading:!1,error:d})):(v=null==d?void 0:d.filter((function(t){return t.enabled})),p(SH(SH({},f),{},{loading:!1,driverGroups:v,pagination:y}))),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(2),p(SH(SH({},f),{},{loading:!1,error:t.t0}));case 25:case"end":return t.stop()}}),t,null,[[2,22]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){EH(i,n,o,a,c,"next",t)}function c(t){EH(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t=new AbortController;return _(),t.abort()}),[]),Object(o.useEffect)((function(){var t,e,n;if(0!==(null==f||null===(t=f.driverGroups)||void 0===t?void 0:t.length)){var o=null==f||null===(e=f.driverGroups)||void 0===e?void 0:e.reduce((function(t,e){return[].concat(_H(t),[e.id])}),[]);y(_H((null==r?void 0:r.driver_groups_ids)||o)),null!=r&&r.driver_groups_ids&&(null==r||null===(n=r.driver_groups_ids)||void 0===n?void 0:n.length)!==(null==f?void 0:f.driverGroups.length)||g(!0)}}),[null==f?void 0:f.driverGroups]),Object(o.useEffect)((function(){var t=new AbortController;return _(),t.abort()}),[E]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,OH({},t,{driverGroupList:f,driverGroupIds:d,handleChangeDriverGroupId:function(t){if(null==d?void 0:d.find((function(e){return e===t}))){var e=null==d?void 0:d.filter((function(e){return e!==t}));y(e),g(!1)}else{var r=d?_H(d):[];r.push(t),r.length===(null==f?void 0:f.driverGroups.length)&&g(!0),y(r)}},handleClickFilterButton:function(){var t=d?_H(d):null;n(SH(SH({},r),{},{driver_groups_ids:t})),c&&c(),u&&L(t)},isAllCheck:m,handleChangeAllCheck:function(){if(m)y(null);else{var t,e=[],r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=kH(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(f.driverGroups);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.id)}}catch(t){r.e(t)}finally{r.f()}y(e)}g(!m)},searchValue:E,onSearch:j})))};function AH(t){return AH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AH(t)}function CH(){return CH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CH.apply(this,arguments)}function NH(t){return function(t){if(Array.isArray(t))return zH(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||YH(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DH(){DH=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==AH(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function GH(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function FH(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){GH(i,n,o,a,c,"next",t)}function c(t){GH(i,n,o,a,c,"throw",t)}a(void 0)}))}}function UH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function BH(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?UH(Object(r),!0).forEach((function(e){RH(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UH(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function RH(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MH(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||YH(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YH(t,e){if(t){if("string"==typeof t)return zH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zH(t,e):void 0}}function zH(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}IH.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},IH.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","enabled","drivers"]};var $H=function(t){var e=t.site,r=t.sitesList,n=t.UIComponent,a=t.handleSuccessUpdateSites,c=MH(Ir(),2)[1],u=MH(er(),1)[0],s=MH(hr(),1)[0].token,l=MH(br(),2)[1].showToast,f=MH(Object(o.useState)({site:e||{},loading:!1,error:null}),2),p=f[0],h=f[1],d=MH(Object(o.useState)({loading:!1,changes:{},error:null}),2),y=d[0],v=d[1],m=MH(Object(o.useState)(!1),2),g=m[0],b=m[1],w=function(){return v({loading:!1,changes:{},error:null})},O=function(){var t=FH(DH().mark((function t(){var n,o,i,f;return DH().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,c("LOADING","Loading")),v(BH(BH({},y),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(y.changes)},t.next=6,fetch("".concat(u.root,"/sites/").concat(e.id),n);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?v(BH(BH({},y),{},{loading:!1,error:i.result})):(h(BH(BH({},p),{},{site:i.result})),w(),a&&(f=r.filter((function(t){return t.id===e.id&&Object.assign(t,i.result),!0})),a(f)),l(vr.Success,c("SITE_SAVED","Site saved"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v(BH(BH({},y),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var n=FH(DH().mark((function n(){var o,i,f,p;return DH().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,l(vr.Info,c("LOADING","Loading")),v(BH(BH({},y),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},n.next=6,fetch("".concat(u.root,"/sites/").concat(e.id),o);case 6:return i=n.sent,n.next=9,i.json();case 9:(f=n.sent).error?v(BH(BH({},y),{},{loading:!1,error:f.result})):(a&&(p=r.filter((function(t){return t.id!==e.id})),a(p)),l(vr.Success,c("SITE_DELETED","Site deleted")),t.onClose&&t.onClose()),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),v(BH(BH({},y),{},{loading:!1,error:[n.t0.message]}));case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}(),E=function(){var e=FH(DH().mark((function e(){var n,o,i;return DH().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(vr.Info,c("LOADING","Loading")),v(BH(BH({},y),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(y.changes)},e.next=6,fetch("".concat(u.root,"/sites"),n);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?v(BH(BH({},y),{},{loading:!1,error:i.result})):(w(),l(vr.Success,c("SITE_ADDED","Site added")),a&&a([].concat(NH(r),[i.result])),t.onClose&&t.onClose()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(BH(BH({},y),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){e?(b(!1),w(),h(BH(BH({},p),{},{site:e}))):(b(!0),h(BH(BH({},p),{},{site:{}})))}),[e]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,CH({},t,{siteState:p,formState:y,isAddMode:g,handleChangeInput:function(t){v(BH(BH({},y),{},{changes:BH(BH({},y.changes),{},RH({},t.target.name,t.target.value))}))},handlechangeImage:function(t,e){var r=new window.FileReader;r.readAsDataURL(t),r.onload=function(){v(BH(BH({},y),{},{changes:BH(BH({},y.changes),{},RH({},e,r.result))}))},r.onerror=function(t){return console.log(t)}},handleUpdateSite:O,handleDeleteSite:x,handleAddSite:E})))};function qH(t){return qH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qH(t)}function JH(){return JH=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JH.apply(this,arguments)}function VH(){VH=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==qH(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function HH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function WH(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?HH(Object(r),!0).forEach((function(e){KH(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HH(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function KH(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZH(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function XH(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return QH(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QH(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QH(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}$H.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$H.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var tW=function(t){var e,r=t.UIComponent,n=t.paginationSettings,a=t.isSearchByName,c=t.isSearchByDescription,u=XH(er(),1)[0],s=XH(hr(),1)[0].token,l=XH(Object(o.useState)({loading:!1,sites:[],error:null}),2),f=l[0],p=l[1],h=XH(Object(o.useState)({currentPage:"pages"===n.controlType&&n.initialPage&&n.initialPage>=1?n.initialPage-1:0,pageSize:null!==(e=n.pageSize)&&void 0!==e?e:10,totalItems:null,totalPages:null}),2),d=h[0],y=h[1],v=XH(Object(o.useState)(null),2),m=v[0],g=v[1],b=function(){var t,e=(t=VH().mark((function t(e,r){var n,o,i,l,h,v,g;return VH().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(WH(WH({},f),{},{loading:!0})),n=null,o=[],m&&(i=[],a&&i.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}),c&&i.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}),o.push({conector:"OR",conditions:i})),o.length&&(n={conditions:o,conector:"AND"}),l={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},h=n?"".concat(u.root,"/sites?page=").concat(e,"&page_size=").concat(r,"&&where=").concat(JSON.stringify(n)):"".concat(u.root,"/sites?page=").concat(e,"&page_size=").concat(r),t.next=10,fetch(h,l);case 10:return v=t.sent,t.next=13,v.json();case 13:(g=t.sent).error?p(WH(WH({},f),{},{loading:!1,error:g.result})):(p({loading:!1,sites:g.result,error:null}),y(WH(WH({},d),{},{currentPage:g.pagination.current_page,totalPages:g.pagination.total_pages,totalItems:g.pagination.total,from:g.pagination.from,to:g.pagination.to}))),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),p(WH(WH({},f),{},{loading:!1,error:[t.t0.message]}));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ZH(i,n,o,a,c,"next",t)}function c(t){ZH(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){f.loading||b(1,d.pageSize)}),[m]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,JH({},t,{paginationProps:d,setPaginationProps:y,sitesListState:f,searchValue:m,onSearch:g,getSites:b,handleSuccessUpdateSites:function(t){p(WH(WH({},f),{},{sites:t}))}})))};function eW(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return rW(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rW(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rW(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}tW.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},tW.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var nW=function(t){var e=t.trackId,r=t.children,n=eW(un(),1)[0],a=eW(Object(o.useState)(!1),2),c=a[0],u=a[1];Object(o.useEffect)((function(){if(e){if(!window.document.getElementById("google-analytics-sdk")){var t=window.document.createElement("script");return t.id="google-analytics-sdk",t.async=!0,t.defer=!0,t.src="https://www.google-analytics.com/analytics.js",t.onload=function(){u(!0),window.ga("create",e),window.ga("require","ec"),window.ga("set","page",window.location.pathname),window.ga("send","pageview")},window.document.body.appendChild(t),function(){t.onload=null}}"undefined"!=typeof ga&&u(!0)}}),[e]);var s=function(t){window.ga("set","page",null==t?void 0:t.page),window.ga("send","pageview")},l=function(t){window.ga("ec:addProduct",{id:t.id,name:t.name,category:t.category_id,price:t.price}),window.ga("ec:setAction","click"),window.ga("send","event","UI","click","add to cart")},f=function(t){window.ga("ec:addProduct",{id:t.id,name:t.name,category:t.category_id,price:t.price,quantity:t.quantity}),window.ga("ec:setAction","add"),window.ga("send","event","UI","click","add to cart")},p=function(t){window.ga("set","userId",t.id)},h=function(t){var e;window.ga("ec:setAction","purchase",{id:null==t?void 0:t.id,affiliation:null===(e=t.business)||void 0===e?void 0:e.name,revenue:t.total,tax:t.tax_total,shipping:t.delivery_zone_price})};return Object(o.useEffect)((function(){return console.log("Analytic Ready"),c&&window.ga&&(n.on("change_view",s),n.on("userLogin",p),n.on("product_clicked",l),n.on("product_added",f),n.on("order_placed",h)),function(){c&&window.ga&&(n.off("change_view",s),n.off("userLogin",p),n.off("product_clicked",l),n.off("product_added",f),n.off("order_placed",h))}}),[c]),i.a.createElement(i.a.Fragment,null,r)};function oW(t){return oW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oW(t)}function iW(){return iW=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iW.apply(this,arguments)}function aW(t){return function(t){if(Array.isArray(t))return yW(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||dW(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cW(){cW=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==oW(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function uW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function sW(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?uW(Object(r),!0).forEach((function(e){lW(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uW(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function lW(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fW(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function pW(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){fW(i,n,o,a,c,"next",t)}function c(t){fW(i,n,o,a,c,"throw",t)}a(void 0)}))}}function hW(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||dW(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dW(t,e){if(t){if("string"==typeof t)return yW(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yW(t,e):void 0}}function yW(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}nW.propTypes={trackId:c.a.string.isRequired},nW.defaultProps={};var vW=function(t){var e,r=t.UIComponent,n=t.paginationSettings,a=t.propsToFetch,c=t.isSearchByUserId,u=t.isSearchByUserEmail,s=t.isSearchByUserPhone,l=t.isSearchByUserName,f=t.isBusinessOwners,p=t.defaultUserTypesSelected,h=t.disabledActiveStateCondition,d=t.isDriver,y=t.isProfessional,v=hW(er(),1)[0],m=hW(hr(),1)[0],g=hW(br(),2)[1].showToast,b=hW(Ir(),2)[1],w=hW(un(),1)[0],O=hW(Object(o.useState)({users:[],loading:!1,error:null}),2),x=O[0],E=O[1],j=hW(Object(o.useState)({clear:!1,changes:{}}),2),S=j[0],L=j[1],_=hW(Object(o.useState)(null),2),P=_[0],k=_[1],T=hW(Object(o.useState)(!1),2),I=T[0],A=T[1],C=hW(Object(o.useState)(p),2),N=C[0],D=C[1],G=hW(Object(o.useState)({currentPage:"pages"===n.controlType&&n.initialPage&&n.initialPage>=1?n.initialPage-1:0,pageSize:null!==(e=n.pageSize)&&void 0!==e?e:10,totalItems:null,totalPages:null}),2),F=G[0],U=G[1],B=hW(Object(o.useState)({}),2),R=B[0],M=B[1],Y=hW(Object(o.useState)(!0),2),z=Y[0],$=Y[1],q=hW(Object(o.useState)({loading:!1,error:null}),2),J=q[0],V=q[1],H=hW(Object(o.useState)([]),2),W=H[0],K=H[1],Z=hW(Object(o.useState)({loading:!1,error:null}),2),X=Z[0],Q=Z[1],tt=hW(Object(o.useState)({occupations:[],loading:!1,error:null}),2),et=tt[0],rt=tt[1],nt=hW(Object(o.useState)(null),2),ot=nt[0],it=nt[1],at=function(){var t=pW(cW().mark((function t(e,r){var n,o,i,p,d,y,g,b,w,O,j,L,_,k,T,A,C,D,G,B,R,Y;return cW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,E(sW(sW({},x),{},{loading:!0})),o={},i={page:e,page_size:r||F.pageSize},f||(o=sW({},i)),p=null,d=[],h||d.push({attribute:"enabled",value:z}),I&&((y=[]).push({attribute:"email_verified",value:!0}),y.push({attribute:"phone_verified",value:!0}),d.push({conector:"OR",conditions:y})),N.length>0&&d.push({attribute:"level",value:N}),ot&&d.push({attribute:"occupation_id",value:ot}),P&&(g=[],c&&g.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),u&&g.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),s&&g.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),l&&(g.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),g.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}})),d.push({conector:"OR",conditions:g})),Object.keys(S.changes).length&&(O=[],null!=S&&null!==(b=S.changes)&&void 0!==b&&b.name&&null!==(null==S||null===(w=S.changes)||void 0===w?void 0:w.name)&&O.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(null==S||null===(j=S.changes)||void 0===j?void 0:j.name,"%"))}}),S.changes.lastname&&null!==S.changes.lastname&&O.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(S.changes.lastname,"%"))}}),S.changes.email&&null!==S.changes.email&&O.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(S.changes.email,"%"))}}),void 0!==S.changes.email_verified&&O.push({attribute:"email_verified",value:S.changes.email_verified}),S.changes.phone&&null!==S.changes.phone&&O.push({attribute:"phone",value:{condition:"ilike",value:encodeURI("%".concat(S.changes.phone,"%"))}}),void 0!==S.changes.phone_verified&&O.push({attribute:"phone_verified",value:S.changes.phone_verified}),S.changes.id&&parseInt(S.changes.id)>0&&O.push({attribute:"id",value:parseInt(S.changes.id)}),O.length&&d.push({conector:"AND",conditions:O})),d.length&&(p={conditions:d,conector:"AND"}),L=null,_={},2===(null===(n=m.user)||void 0===n?void 0:n.level)){t.next=24;break}return L=p?v.setAccessToken(m.token).users().select(a).parameters(o).where(p):v.setAccessToken(m.token).users().select(a).parameters(o),t.next=20,L.get();case 20:k=t.sent,_=k.content,t.next=32;break;case 24:return T={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(m.token)}},A=p?"".concat(v.root,"/professionals?page=").concat(e,"&page_size=").concat(r,"&&where=").concat(JSON.stringify(p)):"".concat(v.root,"/professionals?page=").concat(e,"&page_size=").concat(r),t.next=28,fetch(A,T);case 28:return C=t.sent,t.next=31,C.json();case 31:_=t.sent;case 32:G=(D=_).result,B=D.pagination,x.users=G,E(sW(sW({},x),{},{loading:!1})),R=0,B.current_page!==B.total_pages&&(Y=B.total-x.users.length,R=Y<B.page_size?Y:B.page_size),U(sW(sW({},F),{},{currentPage:B.current_page,pageSize:0===B.page_size?F.pageSize:B.page_size,totalPages:B.total_pages,totalItems:B.total,from:B.from,to:B.to,nextPageItems:R})),M(sW({},B)),t.next=44;break;case 41:t.prev=41,t.t0=t.catch(0),"Cancel"!==t.t0.constructor.name&&E(sW(sW({},x),{},{loading:!1,error:[t.t0.message]}));case 44:case"end":return t.stop()}}),t,null,[[0,41]])})));return function(e,r){return t.apply(this,arguments)}}(),ct=function(){var t=pW(cW().mark((function t(){var e,r,n;return cW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,rt(sW(sW({},et),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==m?void 0:m.token)}},t.next=5,fetch("".concat(v.root,"/occupations"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(n=t.sent).error?rt(sW(sW({},et),{},{loading:!1,error:n.result})):rt({loading:!1,occupations:n.result,error:null}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),rt(sW(sW({},et),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),ut=function(){var t=pW(cW().mark((function t(e){var r,n,o,i,a,c;return cW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g(vr.Info,b("LOADING","Loading")),V(sW(sW({},J),{},{loading:!0})),{}.updateOrder=r={},t.next=8,v.setAccessToken(m.token).users(e.id).save({level:e.level},{cancelToken:r});case 8:n=t.sent,o=n.content,i=o.error,a=o.result,V(sW(sW({},J),{},{loading:!1,error:i?a:null})),i||(c=[],c=N.includes(e.level)?x.users.filter((function(t){return t.id===e.id&&(t.level=e.level),!0})):x.users.filter((function(t){return t.id!==a.id})),E(sW(sW({},x),{},{users:c})),g(vr.Success,b("UPDATED","Updated"))),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),V(sW(sW({},J),{},{loading:!1,error:[t.t0.message]}));case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}(),st=function(){var t=pW(cW().mark((function t(e){var r,n,o,i,a;return cW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,g(vr.Info,b("LOADING","Loading")),V(sW(sW({},J),{},{loading:!0})),t.next=5,v.setAccessToken(m.token).users(e.id).save({enabled:e.enabled});case 5:r=t.sent,n=r.content,o=n.error,i=n.result,V(sW(sW({},J),{},{loading:!1,error:o?i:null})),o||(d?ft(i):h||(a=aW(null==x?void 0:x.users),!e.enabled&&z||null!=e&&e.enabled&&!z?a=x.users.filter((function(t){var r=!0;return t.id===e.id&&e.enabled===!z&&(r=!1),r})):a.push(e),E(sW(sW({},x),{},{users:a}))),g(vr.Success,b("UPDATED","Updated"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),V(sW(sW({},J),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}(),lt=function(){var t=pW(cW().mark((function t(e){var r,n,o,i;return cW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,V(sW(sW({},J),{},{loading:!0})),t.next=4,v.setAccessToken(m.token).users(e).delete();case 4:r=t.sent,(n=r.content).error||(o=x.users.filter((function(t){return t.id!==e})),E(sW(sW({},x),{},{users:o})),X.loading&&((i=aW(W)).shift(),0===i.length&&Q(sW(sW({},X),{},{loading:!1})),K(i)),M(sW(sW({},R),{},{total:(null==R?void 0:R.total)-1}))),V(sW(sW({},J),{},{loading:!1,error:n.error?n.result:null})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),V(sW(sW({},J),{},{loading:!1,error:[t.t0.message]})),X.loading&&Q(sW(sW({},X),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),ft=function(t){var e=x.users.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0}));E(sW(sW({},x),{},{users:e}))};return Object(o.useEffect)((function(){X.loading&&0!==W.length&&lt(W[0])}),[W,X]),Object(o.useEffect)((function(){x.loading||at(1,null)}),[N,z,P,I,ot]),Object(o.useEffect)((function(){(Object.keys(null==S?void 0:S.changes).length>0||S.clear)&&!x.loading&&at(1,null)}),[S]),Object(o.useEffect)((function(){y&&ct()}),[y]),Object(o.useEffect)((function(){return w.on("occupations_update",(function(t){rt(sW(sW({},et),{},{occupations:t}))})),function(){w.off("occupations_update")}}),[w]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,iW({},t,{actionStatus:J,usersList:x,filterValues:S,setFilterValues:L,userTypesSelected:N,handleSelectedUserTypes:function(t){D(t)},paginationProps:F,getUsers:at,searchValue:P,onSearch:k,paginationDetail:R,selectedUserActiveState:z,isVerified:I,setIsVerified:A,handleChangeUserActiveState:function(){$(!z)},handleChangeUserType:ut,handleChangeActiveUser:st,handleDeleteUser:lt,selectedUsers:W,handleSelectedUsers:function(t){var e;e=W.includes(t)?W.filter((function(e){return e!==t})):[].concat(aW(W),[t]),K(e)},deleteUsersActionState:X,handleDeleteSeveralUsers:function(){Q(sW(sW({},X),{},{loading:!0}))},handleSuccessUpdate:ft,handleSuccessAddUser:function(t){N.includes(null==t?void 0:t.level)&&(E(sW(sW({},x),{},{users:[].concat(aW(x.users),[t])})),M(sW(sW({},R),{},{total:null!=R&&R.total?(null==R?void 0:R.total)+1:1})))},handleSuccessDeleteUser:function(t){N.includes(null==t?void 0:t.level)&&(E(sW(sW({},x),{},{users:x.users.filter((function(e){return e.id!==t.id}))})),M(sW(sW({},R),{},{total:(null==R?void 0:R.total)-1})))},handleSuccessAddressesUpdate:function(t,e){var r=x.users.filter((function(r){return r.id===t&&(r.addresses=aW(e)),!0}));E(sW(sW({},x),{},{users:r}))},occupationsState:et,selectedOccupation:ot,handleSelectOccupation:it,setSelectedUsers:K})))};function mW(t){return mW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mW(t)}function gW(){return gW=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gW.apply(this,arguments)}function bW(t){return function(t){if(Array.isArray(t))return PW(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_W(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wW(){wW=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==mW(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function OW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xW(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?OW(Object(r),!0).forEach((function(e){EW(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OW(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function EW(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jW(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function SW(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){jW(i,n,o,a,c,"next",t)}function c(t){jW(i,n,o,a,c,"throw",t)}a(void 0)}))}}function LW(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||_W(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _W(t,e){if(t){if("string"==typeof t)return PW(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?PW(t,e):void 0}}function PW(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}vW.propTypes={UIComponent:c.a.elementType,isSearchByUserId:c.a.bool,isSearchByUserEmail:c.a.bool,isSearchByUserPhone:c.a.bool,propsToFetch:c.a.arrayOf(a.string)},vW.defaultProps={propsToFetch:["name","lastname","email","phone","photo","cellphone","schedule","country_phone_code","city_id","city","address","addresses","max_days_in_future","address_notes","driver_zone_restriction","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname","birthdate","drivergroups"],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},defaultUserTypesSelected:[0,1,2,3]};var kW=function(t){var e=t.userId,r=t.UIComponent,n=LW(er(),1)[0],a=LW(hr(),1)[0],c=LW(Object(o.useState)({metaFields:[],loading:!0,error:null}),2),u=c[0],s=c[1],l=LW(Object(o.useState)({loading:!1,result:{error:!1}}),2),f=l[0],p=l[1],h=function(){var t=SW(wW().mark((function t(){var r,o,i,c;return wW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,s(xW(xW({},u),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)}},t.next=5,fetch("".concat(n.root,"/users/").concat(e,"/metafields"),r);case 5:return o=t.sent,t.next=8,o.json();case 8:i=t.sent,c=i.result,s(xW(xW({},u),{},{loading:!1,metaFields:c})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),s(xW(xW({},u),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),d=function(){var t=SW(wW().mark((function t(r){var o,i;return wW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(xW(xW({},f),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)}},t.next=5,fetch("".concat(n.root,"/users/").concat(e,"/metafields/").concat(r),o);case 5:t.sent.ok&&(i=u.metaFields.filter((function(t){return t.id!==r})),s(xW(xW({},u),{},{metaFields:i})),p({loading:!1,result:{error:!1}})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),p({result:{error:!0,result:t.t0.message},loading:!1});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=SW(wW().mark((function t(r){var o,i,c,l,h,d;return wW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(xW(xW({},f),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.token)},body:JSON.stringify(r)},t.next=5,fetch("".concat(n.root,"/users/").concat(e,"/metafields"),o);case 5:return i=t.sent,t.next=8,i.json();case 8:c=t.sent,l=c.error,h=c.result,l?p({loading:!1,result:{error:!0,result:h}}):([],d=[].concat(bW(u.metaFields),[h]),s(xW(xW({},u),{},{metaFields:d})),p({loading:!1,result:{error:!1}})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),p({result:{error:!0,result:t.t0.message},loading:!1});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){h()}),[e]),i.a.createElement(i.a.Fragment,null,r&&i.a.createElement(r,gW({},t,{metaFieldsList:u,actionState:f,handleDeleteMetaField:d,handeAddMetaField:y})))};function TW(){return TW=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},TW.apply(this,arguments)}function IW(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return AW(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AW(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AW(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}kW.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},kW.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var CW=function(t){var e=t.userTypes,r=t.onChangeUserType,n=t.defaultUserTypes,a=t.UIComponent,c=IW(Object(o.useState)(n),2),u=c[0],s=c[1];return i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(a,TW({},t,{userTypes:e,currentTypesSelected:u,handleChangeUserType:function(t){s(t),r(t)}})))};function NW(t){return NW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NW(t)}function DW(){return DW=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DW.apply(this,arguments)}function GW(){GW=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==NW(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function FW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function UW(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?FW(Object(r),!0).forEach((function(e){BW(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FW(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function BW(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RW(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function MW(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){RW(i,n,o,a,c,"next",t)}function c(t){RW(i,n,o,a,c,"throw",t)}a(void 0)}))}}function YW(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return zW(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zW(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zW(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}CW.propTypes={UIComponent:c.a.elementType,userTypes:c.a.arrayOf(c.a.object),defaultUserTypes:c.a.arrayOf(c.a.number),onChangeUserType:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},CW.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $W=function(t){var e=t.userId,r=t.propsToFetch,n=t.UIComponent,a=t.handleSuccessUpdate,c=t.handleSuccessDeleteUser,u=YW(er(),1)[0],s=YW(hr(),1)[0],l=YW(br(),2)[1].showToast,f=YW(Ir(),2)[1],p=s.token,h=YW(Object(o.useState)({loading:!1,error:!1,change:[]}),2),d=h[0],y=h[1],v=YW(Object(o.useState)({user:null,loading:!1,error:null}),2),m=v[0],g=v[1],b=YW(Object(o.useState)({loading:!1,error:null}),2),w=b[0],O=b[1],x=function(){var t=MW(GW().mark((function t(){var n,o,i,a,c,l,f,p;return GW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,g(UW(UW({},m),{},{loading:!0})),o=null,i={},2===(null===(n=s.user)||void 0===n?void 0:n.level)){t.next=12;break}return o=u.setAccessToken(s.token).users(e).select(r),t.next=8,o.get();case 8:a=t.sent,i=a.content,t.next=20;break;case 12:return c={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},o="".concat(u.root,"/professionals/").concat(e),t.next=16,fetch(o,c);case 16:return l=t.sent,t.next=19,l.json();case 19:i=t.sent;case 20:f=i.result,p=Array.isArray(f)?null:f,g(UW(UW({},m),{},{loading:!1,user:p})),t.next=28;break;case 25:t.prev=25,t.t0=t.catch(0),g(UW(UW({},m),{},{loading:!1,error:[t.t0.message]}));case 28:case"end":return t.stop()}}),t,null,[[0,25]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var r=MW(GW().mark((function r(){var n,o;return GW().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,l(vr.Info,f("LOADING","Loading")),O({loading:!0,error:null}),r.next=5,u.setAccessToken(s.token).users(e).delete();case 5:n=r.sent,o=n.content,O({loading:!1,error:o.error?o.result:null}),o.error||(l(vr.Success,f("USER_DELETED","User deleted")),c&&c(m.user),t.onClose&&t.onClose()),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),O({loading:!1,error:[r.t0.message]});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(){return r.apply(this,arguments)}}(),j=function(){var t=MW(GW().mark((function t(){var e,r,n,o,i,a,c,h,v,b,w,O;return GW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!((null==d||null===(e=d.change)||void 0===e?void 0:e.length)>0&&null!=m&&null!==(r=m.user)&&void 0!==r&&r.id)){t.next=24;break}if(l(vr.Info,f("LOADING","Loading")),y(UW(UW({},d),{},{loading:!0})),o={schedule:JSON.stringify(null==d?void 0:d.change)},i={},2===(null===(n=s.user)||void 0===n?void 0:n.level)){t.next=13;break}return t.next=9,u.users(null==m||null===(a=m.user)||void 0===a?void 0:a.id).save(o,{accessToken:p});case 9:c=t.sent,i=c.content,t.next=20;break;case 13:return v={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},body:JSON.stringify(o)},t.next=16,fetch("".concat(u.root,"/professionals/").concat(null==m||null===(h=m.user)||void 0===h?void 0:h.id),v);case 16:return b=t.sent,t.next=19,b.json();case 19:i=t.sent;case 20:O=(w=i).result,w.error?(y(UW(UW({},d),{},{change:[],loading:!1,error:!0})),g(UW(UW({},m),{},{error:!0})),l(vr.Error,f("SCHEDULE_UPDATED_FAILED","Schedule Update Failed"))):(y(UW(UW({},d),{},{change:[],loading:!1,error:!1})),g(UW(UW({},m),{},{error:!1,user:Object.assign(m.user,O)})),l(vr.Success,f("SCHEDULE_UPDATED","Schedule Updated"))),t.next=25;break;case 24:l(vr.Info,f("NOT_CHANGED","Not Changed"));case 25:t.next=32;break;case 27:t.prev=27,t.t0=t.catch(0),y(UW(UW({},d),{},{change:[],loading:!1,error:!0})),g(UW(UW({},m),{},{loading:!1,error:null===t.t0||void 0===t.t0?void 0:t.t0.message})),l(vr.Error,null===t.t0||void 0===t.t0?void 0:t.t0.message);case 32:case"end":return t.stop()}}),t,null,[[0,27]])})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=MW(GW().mark((function t(){var e,r,n,o;return GW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(vr.Info,f("LOADING","Loading")),O({loading:!0,error:null}),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)}},t.next=6,fetch("".concat(u.root,"/users/").concat(null===(e=m.user)||void 0===e?void 0:e.id,"/google/calendar/sync"),r);case 6:return n=t.sent,t.next=9,n.json();case 9:(o=t.sent).error?O({loading:!1,error:o.result}):l(vr.Success,f("YOUR_CALENDAR_WILL_BE_SYNCHRONIZED","Your calendar will be synchronized")),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),O({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=MW(GW().mark((function t(){var e,r,n,o;return GW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=window.open("".concat(u.root,"/users/").concat(null===(e=m.user)||void 0===e?void 0:e.id,"/google/permissions/request?name=calendar&token=").concat(s.token),"_blank","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,clearcache=yes"),n=setInterval((function(){r.closed?clearInterval(n):r.postMessage("data",u.url)}),200),o=null,window.addEventListener("message",(function(t){-1!==t.origin.indexOf(".ordering.co")&&(clearInterval(n),o&&clearTimeout(o),o=setTimeout((function(){r.postMessage("close",u.url),l(vr.Success,t.data.message)}),1e3))}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){t.user?g(UW(UW({},m),{},{user:t.user})):x()}),[e]);return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,DW({},t,{userState:m,actionStatus:w,handleDeleteUser:E,handleSuccessUserUpdate:function(t){g(UW(UW({},m),{},{user:Object.assign(m.user,t)})),a&&a(t)},handleGoogleCalendarSync:S,scheduleState:d,handleScheduleState:function(t){(null==t?void 0:t.length)>0&&y(UW(UW({},d),{},{change:t}))},handleScheduleUpdateUser:j,handleGoogleAccountLink:L})))};function qW(t){return qW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qW(t)}function JW(){return JW=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JW.apply(this,arguments)}function VW(){VW=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==qW(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function HW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function WW(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?HW(Object(r),!0).forEach((function(e){KW(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HW(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function KW(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZW(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function XW(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ZW(i,n,o,a,c,"next",t)}function c(t){ZW(i,n,o,a,c,"throw",t)}a(void 0)}))}}function QW(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return tK(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tK(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tK(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}$W.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(a.string),userId:c.a.oneOfType([c.a.number,c.a.string]),user:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$W.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","driver_zone_restriction","dropdown_option_id","dropdown_option","location","loyalty_level","zipcode","level","enabled","middle_name","second_lastname","phone_verified","email_verified","schedule","timezone","max_days_in_future","occupation_id","occupation","session"]};var eK=function(t){var e,r,n=t.UIComponent,a=t.userId,c=t.walletType,u=QW(er(),1)[0],s=QW(hr(),1)[0].token,l=QW(br(),2)[1].showToast,f=QW(Ir(),2)[1],p=QW(Object(o.useState)({loading:!1,wallet:{},error:null}),2),h=p[0],d=p[1],y=QW(Object(o.useState)({loading:!1,events:[],error:null}),2),v=y[0],m=y[1],g=QW(Object(o.useState)({loading:!1,users:[],error:null}),2),b=g[0],w=g[1],O=QW(Object(o.useState)({}),2),x=O[0],E=O[1],j=QW(Object(o.useState)({}),2),S=j[0],L=j[1],_=QW(Object(o.useState)({loading:!1,error:null}),2),P=_[0],k=_[1],T=function(){var t=XW(VW().mark((function t(){var e,r,n;return VW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(WW(WW({},h),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},t.next=5,fetch("".concat(u.root,"/users/").concat(a,"/wallets"),e);case 5:return r=t.sent,t.next=8,r.json();case 8:(n=t.sent).error?d(WW(WW({},h),{},{loading:!1,error:n.result})):d({loading:!1,wallet:n.result.find((function(t){return t.type===c}))||{},error:null}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),d(WW(WW({},h),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=XW(VW().mark((function t(e){var r,n,o;return VW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m(WW(WW({},v),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},t.next=5,fetch("".concat(u.root,"/users/").concat(a,"/wallets/").concat(e,"/events?orderBy=-id"),r);case 5:return n=t.sent,t.next=8,n.json();case 8:(o=t.sent).error?m(WW(WW({},v),{},{loading:!1,error:o.result})):m({loading:!1,events:o.result,error:null}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),m(WW(WW({},v),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=XW(VW().mark((function t(){var e,r,n,o;return VW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w(WW({loading:!0},b)),t.next=4,u.setAccessToken(s).users().select(["name","lastname"]).get();case 4:e=t.sent,r=e.content,n=r.result,o=r.error,w(o?WW(WW({},b),{},{loading:!1,error:n}):{loading:!1,users:n,error:null}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),w(WW(WW({},b),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=XW(VW().mark((function t(){var e,r,n,o,i;return VW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,k({loading:!0,error:null}),l(vr.Info,f("LOADING","Loading")),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(x)},t.next=6,fetch("".concat(u.root,"/users/").concat(a,"/wallets/").concat(null===(e=h.wallet)||void 0===e?void 0:e.id,"/events"),r);case 6:return n=t.sent,t.next=9,n.json();case 9:(o=t.sent).error?k({loading:!1,error:o.result}):(d(WW(WW({},h),{},{wallet:WW(WW({},h.wallet),{},{balance:(null===(i=h.wallet)||void 0===i?void 0:i.balance)+o.result.amount})})),E({}),k({loading:!1,error:null}),l(vr.Success,f("WALLET_MONEY_ADDED","Wallet money added"))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),k({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=XW(VW().mark((function t(){var e,r,n,o,i,c;return VW().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,k({loading:!0,error:null}),l(vr.Info,f("LOADING","Loading")),(r=WW({},S)).amount="-"+S.amount,n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(r)},t.next=8,fetch("".concat(u.root,"/users/").concat(a,"/wallets/").concat(null===(e=h.wallet)||void 0===e?void 0:e.id,"/events"),n);case 8:return o=t.sent,t.next=11,o.json();case 11:(i=t.sent).error?k({loading:!1,error:i.result}):(d(WW(WW({},h),{},{wallet:WW(WW({},h.wallet),{},{balance:(null===(c=h.wallet)||void 0===c?void 0:c.balance)+i.result.amount})})),k({loading:!1,error:null}),L({}),l(vr.Success,f("WALLET_MONEY_REDUCED","Wallet money reduced"))),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),k({loading:!1,error:[t.t0.message]});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){var t;null!==(t=h.wallet)&&void 0!==t&&t.id&&I(h.wallet.id)}),[null===(e=h.wallet)||void 0===e?void 0:e.id,null===(r=h.wallet)||void 0===r?void 0:r.balance]),Object(o.useEffect)((function(){T()}),[a]),Object(o.useEffect)((function(){A()}),[]),i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(n,JW({},t,{walletState:h,walletEventsState:v,addWalletState:x,reduceWalletState:S,actionState:P,handleChangeInput:function(t,e){e?E(WW(WW({},x),{},KW({},t.target.name,t.target.value))):L(WW(WW({},S),{},KW({},t.target.name,t.target.value)))},handleAddWalletMoney:C,handleReduceWalletMoney:N,parseEvent:function(t){var e="",r="",n=b.users.find((function(e){return e.id===t.author_id}));if(r=n?"".concat(null==n?void 0:n.name," ").concat(null==n?void 0:n.lastname):"".concat(t.author_id),"manual"===t.event_type)switch(t.event){case"movement":e=-1===Math.sign(t.amount)?f("TRANSACTION_REDUCE_MONEY","<strong>_user_</strong> reduce money").replace("_user_","".concat(r)):f("TRANSACTION_ADD_MONEY","<strong>_user_</strong> add money").replace("_user_","".concat(r));break;case"locked":e=f("TRANSACTION_LOCKED","<strong>_user_</strong> locked").replace("_user_","".concat(r));break;case"unlocked":e=f("TRANSACTION_UNLOCKED","<strong>_user_</strong> unlocked").replace("_user_","".concat(r));break;default:e=t.event}return"redeem_gift_card"===t.event_type&&(e=f("REDEEMED_GIFT_CARD","Redeemed from the <strong>Gift card</strong>")),"refund"===t.event_type&&(e=f("REFUND_MONEY","Refund money")),"payment"===t.event_type&&(e=f("PAID_MONEY","Paid money")),e}})))};function rK(t){return rK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rK(t)}function nK(){return nK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nK.apply(this,arguments)}function oK(t){return function(t){if(Array.isArray(t))return hK(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||pK(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iK(){iK=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==rK(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,c(m,"constructor",h),c(h,"constructor",p),p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function aK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function cK(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?aK(Object(r),!0).forEach((function(e){uK(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aK(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function uK(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sK(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function lK(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){sK(i,n,o,a,c,"next",t)}function c(t){sK(i,n,o,a,c,"throw",t)}a(void 0)}))}}function fK(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||pK(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pK(t,e){if(t){if("string"==typeof t)return hK(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hK(t,e):void 0}}function hK(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}eK.propTypes={UIComponent:c.a.elementType,userId:c.a.oneOfType([c.a.number,c.a.string]),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eK.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dK=function(t){var e=t.UIComponent,r=fK(er(),1)[0],n=fK(hr(),1)[0].token,a=fK(br(),2)[1].showToast,c=fK(Ir(),2)[1],u=fK(Object(o.useState)({webhooks:[],loading:!1,error:null}),2),s=u[0],l=u[1],f=fK(Object(o.useState)(!1),2),p=f[0],h=f[1],d=fK(Object(o.useState)({loading:!1,error:null}),2),y=d[0],v=d[1],m=fK(Object(o.useState)({delay:"0"}),2),g=m[0],b=m[1],w=function(){var t=lK(iK().mark((function t(){var e,o,i;return iK().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(cK(cK({},s),{},{loading:!0})),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=5,fetch("".concat(r.root,"/webhooks"),e);case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent).error||l(cK(cK({},s),{},{webhooks:i.result,loading:!1})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),l(cK(cK({},s),{},{loading:!1,error:[t.t0.message]}));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=lK(iK().mark((function t(){var e,o,i,u;return iK().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(vr.Info,c("LOADING","Loading")),v(cK(cK({},y),{},{loading:!0})),e={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(g)},t.next=6,fetch("".concat(r.root,"/webhooks"),e);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?v({loading:!1,error:i.result}):(v(cK(cK({},y),{},{loading:!1})),u=[].concat(oK(s.webhooks),[i.result]),l(cK(cK({},s),{},{webhooks:u})),a(vr.Success,c("WEBHOOK_ADDED","Webhook added")),h(!1),b({delay:"0"})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=lK(iK().mark((function t(e){var o,i,u,f;return iK().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(vr.Info,c("LOADING","Loading")),v(cK(cK({},y),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},t.next=6,fetch("".concat(r.root,"/webhooks/").concat(e),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?v({loading:!1,error:u.result}):(v(cK(cK({},y),{},{loading:!1})),f=s.webhooks.filter((function(t){return t.id!==e})),l(cK(cK({},s),{},{webhooks:f})),a(vr.Success,c("WEBHOOK_REMOVED","Webhook removed")),h(!1),b({delay:"0"})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){w()}),[]),i.a.createElement(i.a.Fragment,null,e&&i.a.createElement(e,nK({},t,{webhookListState:s,isAddMode:p,setIsAddMode:h,handleAddNewWebhook:O,changesState:g,actionState:y,handleChangeAddState:function(t,e){b(cK(cK({},g),{},uK({},t,e)))},handleDeleteWebhook:x})))};dK.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},dK.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]}}])}));