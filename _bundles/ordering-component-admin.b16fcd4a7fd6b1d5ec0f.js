/*! For license information please see ordering-component-admin.b16fcd4a7fd6b1d5ec0f.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("OrderingComponentsAdmin",["React","ReactDOM"],t):"object"==typeof exports?exports.OrderingComponentsAdmin=t(require("react"),require("react-dom")):e.OrderingComponentsAdmin=t(e.React,e.ReactDOM)}(window,(function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/_bundles/",n(n.s=68)}([function(e,t,n){e.exports=n(64)()},function(t,n){t.exports=e},function(e,t,n){e.exports=n(37)},function(e,t,n){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",o="second",a="minute",i="hour",u="day",s="week",c="month",l="quarter",f="year",p="date",d="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},b={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),o=n%60;return(t<=0?"+":"-")+m(r,2,"0")+":"+m(o,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),o=t.clone().add(r,c),a=n-o<0,i=t.clone().add(r+(a?-1:1),c);return+(-(r+(n-o)/(a?o-i:i-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:f,w:s,d:u,D:p,h:i,m:a,s:o,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",O={};O[g]=v;var w=function(e){return e instanceof P},j=function(e,t,n){var r;if(!e)return g;if("string"==typeof e)O[e]&&(r=e),t&&(O[e]=t,r=e);else{var o=e.name;O[o]=e,r=o}return!n&&r&&(g=r),r||!n&&g},S=function(e,t){if(w(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new P(n)},E=b;E.l=j,E.i=w,E.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var P=function(){function v(e){this.$L=j(e.locale,null,!0),this.parse(e)}var m=v.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(y);if(r){var o=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return E},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(e,t){var n=S(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return S(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<S(e)},m.$g=function(e,t,n){return E.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,r=!!E.u(t)||t,l=E.p(e),d=function(e,t){var o=E.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?o:o.endOf(u)},y=function(e,t){return E.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},h=this.$W,v=this.$M,m=this.$D,b="set"+(this.$u?"UTC":"");switch(l){case f:return r?d(1,0):d(31,11);case c:return r?d(1,v):d(0,v+1);case s:var g=this.$locale().weekStart||0,O=(h<g?h+7:h)-g;return d(r?m-O:m+(6-O),v);case u:case p:return y(b+"Hours",0);case i:return y(b+"Minutes",1);case a:return y(b+"Seconds",2);case o:return y(b+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var n,s=E.p(e),l="set"+(this.$u?"UTC":""),d=(n={},n[u]=l+"Date",n[p]=l+"Date",n[c]=l+"Month",n[f]=l+"FullYear",n[i]=l+"Hours",n[a]=l+"Minutes",n[o]=l+"Seconds",n[r]=l+"Milliseconds",n)[s],y=s===u?this.$D+(t-this.$W):t;if(s===c||s===f){var h=this.clone().set(p,1);h.$d[d](y),h.init(),this.$d=h.set(p,Math.min(this.$D,h.daysInMonth())).$d}else d&&this.$d[d](y);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[E.p(e)]()},m.add=function(r,l){var p,d=this;r=Number(r);var y=E.p(l),h=function(e){var t=S(d);return E.w(t.date(t.date()+Math.round(e*r)),d)};if(y===c)return this.set(c,this.$M+r);if(y===f)return this.set(f,this.$y+r);if(y===u)return h(1);if(y===s)return h(7);var v=(p={},p[a]=t,p[i]=n,p[o]=e,p)[y]||1,m=this.$d.getTime()+r*v;return E.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=e||"YYYY-MM-DDTHH:mm:ssZ",o=E.z(this),a=this.$H,i=this.$m,u=this.$M,s=n.weekdays,c=n.months,l=function(e,n,o,a){return e&&(e[n]||e(t,r))||o[n].substr(0,a)},f=function(e){return E.s(a%12||12,e,"0")},p=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},y={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:E.s(u+1,2,"0"),MMM:l(n.monthsShort,u,c,3),MMMM:l(c,u),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,s,2),ddd:l(n.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(a),HH:E.s(a,2,"0"),h:f(1),hh:f(2),a:p(a,i,!0),A:p(a,i,!1),m:String(i),mm:E.s(i,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:o};return r.replace(h,(function(e,t){return t||y[e]||o.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,p,d){var y,h=E.p(p),v=S(r),m=(v.utcOffset()-this.utcOffset())*t,b=this-v,g=E.m(this,v);return g=(y={},y[f]=g/12,y[c]=g,y[l]=g/3,y[s]=(b-m)/6048e5,y[u]=(b-m)/864e5,y[i]=b/n,y[a]=b/t,y[o]=b/e,y)[h]||b,d?g:E.a(g)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return O[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=j(e,t,!0);return r&&(n.$L=r),n},m.clone=function(){return E.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),C=P.prototype;return S.prototype=C,[["$ms",r],["$s",o],["$m",a],["$H",i],["$W",u],["$M",c],["$y",f],["$D",p]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,P,S),e.$i=!0),S},S.locale=j,S.isDayjs=w,S.unix=function(e){return S(1e3*e)},S.en=O[g],S.Ls=O,S.p={},S}()},function(e,t,n){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,o,a){var i=o.prototype;a.utc=function(e){return new o({date:e,utc:!0,args:arguments})},i.utc=function(t){var n=a(this.toDate(),{locale:this.$L,utc:!0});return t?n.add(this.utcOffset(),e):n},i.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=i.parse;i.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),u.call(this,e)};var s=i.init;i.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var c=i.utcOffset;i.utcOffset=function(r,o){var a=this.$utils().u;if(a(r))return this.$u?0:a(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&null===(r=function(e){void 0===e&&(e="");var r=e.match(t);if(!r)return null;var o=(""+r[0]).match(n)||["-",0,0],a=o[0],i=60*+o[1]+ +o[2];return 0===i?0:"+"===a?i:-i}(r)))return this;var i=Math.abs(r)<=16?60*r:r,u=this;if(o)return u.$offset=i,u.$u=0===r,u;if(0!==r){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(u=this.local().add(i+s,e)).$offset=i,u.$x.$localOffset=s}else u=this.utc();return u};var l=i.format;i.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},i.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*e},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var f=i.toDate;i.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var p=i.diff;i.diff=function(e,t,n){if(e&&this.$u===e.$u)return p.call(this,e,t,n);var r=this.local(),o=a(e).local();return p.call(r,o,t,n)}}}()},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r,o=n(51),a=n(26),i=n(53),u=n(54),s=n(55);"undefined"!=typeof ArrayBuffer&&(r=n(56));var c="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=c||l;t.protocol=3;var p=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=o(p),y={type:"error",data:"parser error"},h=n(57);function v(e,t,n){for(var r=new Array(e.length),o=u(e.length,n),a=function(e,n,o){t(n,(function(t,n){r[e]=n,o(t,r)}))},i=0;i<e.length;i++)a(i,e[i],o)}t.encodePacket=function(e,n,r,o){"function"==typeof n&&(o=n,n=!1),"function"==typeof r&&(o=r,r=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=e.data,a=new Uint8Array(o),i=new Uint8Array(1+o.byteLength);i[0]=p[e.type];for(var u=0;u<a.length;u++)i[u+1]=a[u];return r(i.buffer)}(e,n,o);if(void 0!==h&&a instanceof h)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(f)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var o=new FileReader;return o.onload=function(){t.encodePacket({type:e.type,data:o.result},n,!0,r)},o.readAsArrayBuffer(e.data)}(e,n,r);var o=new Uint8Array(1);o[0]=p[e.type];var a=new h([o.buffer,e.data]);return r(a)}(e,n,o);if(a&&a.base64)return function(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}(e,o);var i=p[e.type];return void 0!==e.data&&(i+=r?s.encode(String(e.data),{strict:!1}):String(e.data)),o(""+i)},t.encodeBase64Packet=function(e,n){var r,o="b"+t.packets[e.type];if(void 0!==h&&e.data instanceof h){var a=new FileReader;return a.onload=function(){var e=a.result.split(",")[1];n(o+e)},a.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var i=new Uint8Array(e.data),u=new Array(i.length),s=0;s<i.length;s++)u[s]=i[s];r=String.fromCharCode.apply(null,u)}return o+=btoa(r),n(o)},t.decodePacket=function(e,n,r){if(void 0===e)return y;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function(e){try{e=s.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return y;var o=e.charAt(0);return Number(o)==o&&d[o]?e.length>1?{type:d[o],data:e.substring(1)}:{type:d[o]}:y}o=new Uint8Array(e)[0];var a=i(e,1);return h&&"blob"===n&&(a=new h([a])),{type:d[o],data:a}},t.decodeBase64Packet=function(e,t){var n=d[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=r.decode(e.substr(1));return"blob"===t&&h&&(o=new h([o])),{type:n,data:o}},t.encodePayload=function(e,n,r){"function"==typeof n&&(r=n,n=null);var o=a(e);if(n&&o)return h&&!f?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r);if(!e.length)return r("0:");v(e,(function(e,r){t.encodePacket(e,!!o&&n,!1,(function(e){r(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return r(t.join(""))}))},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);var o;if("function"==typeof n&&(r=n,n=null),""===e)return r(y,0,1);for(var a,i,u="",s=0,c=e.length;s<c;s++){var l=e.charAt(s);if(":"===l){if(""===u||u!=(a=Number(u)))return r(y,0,1);if(u!=(i=e.substr(s+1,a)).length)return r(y,0,1);if(i.length){if(o=t.decodePacket(i,n,!1),y.type===o.type&&y.data===o.data)return r(y,0,1);if(!1===r(o,s+a,c))return}s+=a,u=""}else u+=l}return""!==u?r(y,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));v(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var r=t.reduce((function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2}),0),o=new Uint8Array(r),a=0;return t.forEach((function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);n=r.buffer}o[a++]=t?0:1;var u=n.byteLength.toString();for(i=0;i<u.length;i++)o[a++]=parseInt(u[i]);o[a++]=255;for(r=new Uint8Array(n),i=0;i<r.length;i++)o[a++]=r[i]})),n(o.buffer)}))},t.encodePayloadAsBlob=function(e,n){v(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);e=r.buffer,t[0]=0}var a=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),i=new Uint8Array(a.length+1);for(o=0;o<a.length;o++)i[o]=parseInt(a[o]);if(i[a.length]=255,h){var u=new h([t.buffer,i.buffer,e]);n(null,u)}}))}),(function(e,t){return n(new h(t))}))},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var o=e,a=[];o.byteLength>0;){for(var u=new Uint8Array(o),s=0===u[0],c="",l=1;255!==u[l];l++){if(c.length>310)return r(y,0,1);c+=u[l]}o=i(o,2+c.length),c=parseInt(c);var f=i(o,0,c);if(s)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(e){var p=new Uint8Array(f);f="";for(l=0;l<p.length;l++)f+=String.fromCharCode(p[l])}a.push(f),o=i(o,c)}var d=a.length;a.forEach((function(e,o){r(t.decodePacket(e,n,!0),o,d)}))}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(39)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(13))},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(58)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(13))},function(e,n){e.exports=t},function(e,t,n){!function(e,t){"use strict";function n(e,t){return e(t={exports:{}},t.exports),t.exports}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function o(){}function a(){}a.resetWarningCache=o;var i=function(){function e(e,t,n,o,a,i){if(i!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n},u=n((function(e){e.exports=i()}));function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){return d(e)||y(e,t)||h(e,t)||m()}function d(e){if(Array.isArray(e))return e}function y(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}}function h(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var b=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},g=function(e){return null!==e&&"object"===s(e)},O=function(e){return g(e)&&"function"==typeof e.then},w=function(e){return g(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment},j="[object Object]",S=function e(t,n){if(!g(t)||!g(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var o=Object.prototype.toString.call(t)===j;if(o!==(Object.prototype.toString.call(n)===j))return!1;if(!o&&!r)return t===n;var a=Object.keys(t),i=Object.keys(n);if(a.length!==i.length)return!1;for(var u={},s=0;s<a.length;s+=1)u[a[s]]=!0;for(var c=0;c<i.length;c+=1)u[i[c]]=!0;var l=Object.keys(u);if(l.length!==a.length)return!1;var f=t,p=n,d=function(t){return e(f[t],p[t])};return l.every(d)},E=function(e,t,n){return g(e)?Object.keys(e).reduce((function(r,o){var a=!g(t)||!S(e[o],t[o]);return n.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),r):a?f(f({},r||{}),{},c({},o,e[o])):r}),null):null},P="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",C=function(e){if(null===e||w(e))return e;throw new Error(P)},I=function(e){if(O(e))return{tag:"async",stripePromise:Promise.resolve(e).then(C)};var t=C(e);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},x=t.createContext(null);x.displayName="ElementsContext";var A=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},T=function(e){var n=e.stripe,r=e.options,o=e.children,a=t.useRef(!1),i=t.useRef(!0),u=t.useMemo((function(){return I(n)}),[n]),s=p(t.useState((function(){return{stripe:null,elements:null}})),2),c=s[0],l=s[1],f=b(n);null!==f&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it."),a.current||("sync"===u.tag&&(a.current=!0,l({stripe:u.stripe,elements:u.stripe.elements(r)})),"async"===u.tag&&(a.current=!0,u.stripePromise.then((function(e){e&&i.current&&l({stripe:e,elements:e.elements(r)})}))));var d=b(r);return t.useEffect((function(){if(c.elements){var e=E(r,d,["clientSecret","fonts"]);e&&c.elements.update(e)}}),[r,d,c.elements]),t.useEffect((function(){return function(){i.current=!1}}),[]),t.useEffect((function(){var e=c.stripe;e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"1.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"1.7.0",url:"https://stripe.com/docs/stripe-js/react"}))}),[c.stripe]),t.createElement(x.Provider,{value:c},o)};T.propTypes={stripe:u.any,options:u.object};var _=function(e){var n=t.useContext(x);return A(n,e)},k=function(){return _("calls useElements()").elements},D=function(){return _("calls useStripe()").stripe},U=function(e){return(0,e.children)(_("mounts <ElementsConsumer>"))};U.propTypes={children:u.func.isRequired};var L=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),function(){n.current&&n.current.apply(n,arguments)}},B=function(){},F=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},R=function(e,n){var r="".concat(F(e),"Element"),o=n?function(e){_("mounts <".concat(r,">"));var n=e.id,o=e.className;return t.createElement("div",{id:n,className:o})}:function(n){var o=n.id,a=n.className,i=n.options,u=void 0===i?{}:i,s=n.onBlur,c=void 0===s?B:s,l=n.onFocus,f=void 0===l?B:l,p=n.onReady,d=void 0===p?B:p,y=n.onChange,h=void 0===y?B:y,v=n.onEscape,m=void 0===v?B:v,g=n.onClick,O=void 0===g?B:g,w=_("mounts <".concat(r,">")).elements,j=t.useRef(null),S=t.useRef(null),P=L(d),C=L(c),I=L(f),x=L(O),A=L(h),T=L(m);t.useLayoutEffect((function(){if(null==j.current&&w&&null!=S.current){var t=w.create(e,u);j.current=t,t.mount(S.current),t.on("ready",(function(){return P(t)})),t.on("change",A),t.on("blur",C),t.on("focus",I),t.on("escape",T),t.on("click",x)}}));var k=b(u);return t.useEffect((function(){if(j.current){var e=E(u,k,["paymentRequest"]);e&&j.current.update(e)}}),[u,k]),t.useLayoutEffect((function(){return function(){j.current&&j.current.destroy()}}),[]),t.createElement("div",{id:o,className:a,ref:S})};return o.propTypes={id:u.string,className:u.string,onChange:u.func,onBlur:u.func,onFocus:u.func,onReady:u.func,onClick:u.func,options:u.object},o.displayName=r,o.__elementType=e,o},M="undefined"==typeof window,N=R("auBankAccount",M),z=R("card",M),G=R("cardNumber",M),Y=R("cardExpiry",M),q=R("cardCvc",M),$=R("fpxBank",M),J=R("iban",M),V=R("idealBank",M),H=R("p24Bank",M),W=R("epsBank",M),K=R("payment",M),X=R("paymentRequestButton",M),Z=R("linkAuthentication",M),Q=R("shippingAddress",M),ee=R("affirmMessage",M),te=R("afterpayClearpayMessage",M);e.AffirmMessageElement=ee,e.AfterpayClearpayMessageElement=te,e.AuBankAccountElement=N,e.CardCvcElement=q,e.CardElement=z,e.CardExpiryElement=Y,e.CardNumberElement=G,e.Elements=T,e.ElementsConsumer=U,e.EpsBankElement=W,e.FpxBankElement=$,e.IbanElement=J,e.IdealBankElement=V,e.LinkAuthenticationElement=Z,e.P24BankElement=H,e.PaymentElement=K,e.PaymentRequestButtonElement=X,e.ShippingAddressElement=Q,e.useElements=k,e.useStripe=D,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1))},function(e,t){var n,r,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var s,c=[],l=!1,f=-1;function p(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=u(p);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new y(e,t)),1!==c.length||l||u(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n=1e3,r=60*n,o=60*r,a=24*o,i=365.25*a;function u(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var u=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*i;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*o;case"minutes":case"minute":case"mins":case"min":case"m":return u*r;case"seconds":case"second":case"secs":case"sec":case"s":return u*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?u(s=e,a,"day")||u(s,o,"hour")||u(s,r,"minute")||u(s,n,"second")||s+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var r=n(40)("socket.io-parser"),o=n(5),a=n(42),i=n(21),u=n(22);function s(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=s,t.Decoder=f;var c=t.ERROR+'"encode error"';function l(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var o=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===o)return c;n+=o}return r("encoded %j as %s",e,n),n}function f(){this.reconstructor=null}function p(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:t.ERROR,data:"parser error: "+e}}s.prototype.encode=function(e,n){(r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){function n(e){var n=a.deconstructPacket(e),r=l(n.packet),o=n.buffers;o.unshift(r),t(o)}a.removeBlobs(e,n)}(e,n):n([l(e)])},o(f.prototype),f.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,o={type:Number(e.charAt(0))};if(null==t.types[o.type])return d("unknown packet type "+o.type);if(t.BINARY_EVENT===o.type||t.BINARY_ACK===o.type){for(var a=n+1;"-"!==e.charAt(++n)&&n!=e.length;);var u=e.substring(a,n);if(u!=Number(u)||"-"!==e.charAt(n))throw new Error("Illegal attachments");o.attachments=Number(u)}if("/"===e.charAt(n+1)){for(a=n+1;++n;){if(","===(c=e.charAt(n)))break;if(n===e.length)break}o.nsp=e.substring(a,n)}else o.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(a=n+1;++n;){var c;if(null==(c=e.charAt(n))||Number(c)!=c){--n;break}if(n===e.length)break}o.id=Number(e.substring(a,n+1))}if(e.charAt(++n)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n));if(!(!1!==l&&(o.type===t.ERROR||i(l))))return d("invalid payload");o.data=l}return r("decoded %s as %j",e,o),o}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new p(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!u(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){"use strict";(function(e){var r=n(44),o=n(45),a=n(46);function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=p(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n),o=(e=u(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|d(t.length);return 0===(e=u(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?u(e,0):p(e,t);if("Buffer"===t.type&&a(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=u(e,t<0?0:0|d(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|d(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function y(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return z(e).length;t=(""+t).toLowerCase(),r=!0}}function h(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,o);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,o){var a,i=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,u/=2,s/=2,n/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var l=-1;for(a=n;a<u;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===s)return l*i}else-1!==l&&(a-=a-l),l=-1}else for(n+s>u&&(n=u-s),a=n;a>=0;a--){for(var f=!0,p=0;p<s;p++)if(c(e,a+p)!==c(t,p)){f=!1;break}if(f)return a}return-1}function g(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var i=0;i<r;++i){var u=parseInt(t.substr(2*i,2),16);if(isNaN(u))return i;e[n+i]=u}return i}function O(e,t,n,r){return Y(z(t,e.length-n),e,n,r)}function w(e,t,n,r){return Y(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function j(e,t,n,r){return w(e,t,n,r)}function S(e,t,n,r){return Y(G(t),e,n,r)}function E(e,t,n,r){return Y(function(e,t){for(var n,r,o,a=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(n=e.charCodeAt(i))>>8,o=n%256,a.push(o),a.push(r);return a}(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var a,i,u,s,c=e[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[o+1]))&&(s=(31&c)<<6|63&a)>127&&(l=s);break;case 3:a=e[o+1],i=e[o+2],128==(192&a)&&128==(192&i)&&(s=(15&c)<<12|(63&a)<<6|63&i)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:a=e[o+1],i=e[o+2],u=e[o+3],128==(192&a)&&128==(192&i)&&128==(192&u)&&(s=(15&c)<<18|(63&a)<<12|(63&i)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return c(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?u(e,t):void 0!==n?"string"==typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!s.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},s.byteLength=y,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):h.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,o){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0),u=Math.min(a,i),c=this.slice(r,o),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],i=l[f];break}return a<i?-1:i<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return O(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return j(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function x(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",a=t;a<n;++a)o+=N(e[a]);return o}function _(e,t,n){for(var r=e.slice(t,n),o="",a=0;a<r.length;a+=2)o+=String.fromCharCode(r[a]+256*r[a+1]);return o}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,o,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function B(e,t,n,r,o,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,a){return a||B(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,a){return a||B(e,0,n,8),o.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var o=t-e;n=new s(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},s.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=t,o=1,a=this[e+--r];r>0&&(o*=256);)a+=this[e+--r]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),o.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),o.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),o.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),o.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);D(this,e,t,n,o-1,-o)}var a=0,i=1,u=0;for(this[t]=255&e;++a<n&&(i*=256);)e<0&&0===u&&0!==this[t+a-1]&&(u=1),this[t+a]=(e/i>>0)-u&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);D(this,e,t,n,o-1,-o)}var a=n-1,i=1,u=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===u&&0!==this[t+a+1]&&(u=1),this[t+a]=(e/i>>0)-u&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,a=r-n;if(this===e&&n<t&&t<r)for(o=a-1;o>=0;--o)e[o+t]=this[o+n];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var i=s.isBuffer(e)?e:z(new s(e,r).toString()),u=i.length;for(a=0;a<n-t;++a)this[a+t]=i[a%u]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var n;t=t||1/0;for(var r=e.length,o=null,a=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function G(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(43))},function(e,t,n){var r=n(49),o=n(18);e.exports=function(e){var t=e.xdomain,n=e.xscheme,a=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&a)return new XDomainRequest}catch(e){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,n){var r=n(6),o=n(5);function a(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=a,o(a.prototype),a.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},a.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},a.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},a.prototype.onPacket=function(e){this.emit("packet",e)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),a=e.indexOf("]");-1!=o&&-1!=a&&(e=e.substring(0,o)+e.substring(o,a).replace(/:/g,";")+e.substring(a,e.length));for(var i,u,s=n.exec(e||""),c={},l=14;l--;)c[r[l]]=s[l]||"";return-1!=o&&-1!=a&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,c.path),c.queryKey=(i=c.query,u={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(u[t]=n)})),u),c}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var n="function"==typeof t&&"function"==typeof t.isBuffer,r="function"==typeof ArrayBuffer}).call(this,n(16).Buffer)},function(e,t,n){var r=n(47),o=n(29),a=n(5),i=n(15),u=n(30),s=n(31),c=n(7)("socket.io-client:manager"),l=n(28),f=n(63),p=Object.prototype.hasOwnProperty;function d(e,t){if(!(this instanceof d))return new d(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||i;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=d,d.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},d.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},d.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},a(d.prototype),d.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},d.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},d.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(e,t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var a=u(n,"open",(function(){o.onopen(),e&&e()})),i=u(n,"error",(function(t){if(c("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else o.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;c("connect attempt will timeout after %d",s),0===s&&a.destroy();var l=setTimeout((function(){c("connect attempt timed out after %d",s),a.destroy(),n.close(),n.emit("error","timeout"),o.emitAll("connect_timeout",s)}),s);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(a),this.subs.push(i),this},d.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(u(e,"data",s(this,"ondata"))),this.subs.push(u(e,"ping",s(this,"onping"))),this.subs.push(u(e,"pong",s(this,"onpong"))),this.subs.push(u(e,"error",s(this,"onerror"))),this.subs.push(u(e,"close",s(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",s(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(e){this.decoder.add(e)},d.prototype.ondecoded=function(e){this.emit("packet",e)},d.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},d.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new o(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",a),n.on("connect",(function(){n.id=r.generateId(e)})),this.autoConnect&&a()}function a(){~l(r.connecting,n)||r.connecting.push(n)}return n},d.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},d.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},d.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},d.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var r=n(17),o=n(50),a=n(59),i=n(60);t.polling=function(e){var t=!1,n=!1,i=!1!==e.jsonp;if("undefined"!=typeof location){var u="https:"===location.protocol,s=location.port;s||(s=u?443:80),t=e.hostname!==location.hostname||s!==e.port,n=e.secure!==u}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new o(e);if(!i)throw new Error("JSONP disabled");return new a(e)},t.websocket=i},function(e,t,n){var r=n(19),o=n(8),a=n(6),i=n(9),u=n(27),s=n(10)("engine.io-client:polling");e.exports=l;var c=null!=new(n(17))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),r.call(this,e)}i(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t=this;function n(){s("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(s("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){s("pre-pause polling complete"),--r||n()}))),this.writable||(s("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){s("pre-pause writing complete"),--r||n()})))}else n()},l.prototype.poll=function(){s("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var t=this;s("polling got data %s",e);a.decodePayload(e,this.socket.binaryType,(function(e,n,r){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():s('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){s("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(s("transport open - closing"),t()):(s("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){var r=n(52),o=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),i="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);e.exports=function e(n){if(!n||"object"!=typeof n)return!1;if(r(n)){for(var o=0,u=n.length;o<u;o++)if(e(n[o]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||a&&n instanceof Blob||i&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&e(n[s]))return!0;return!1}}).call(this,n(16).Buffer)},function(e,t,n){"use strict";var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a={},i=0,u=0;function s(e){var t="";do{t=o[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function c(){var e=s(+new Date);return e!==r?(i=0,r=e):e+"."+s(i++)}for(;u<64;u++)a[o[u]]=u;c.encode=s,c.decode=function(e){var t=0;for(u=0;u<e.length;u++)t=64*t+a[e.charAt(u)];return t},e.exports=c},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(15),o=n(5),a=n(62),i=n(30),u=n(31),s=n(7)("socket.io-client:socket"),c=n(8),l=n(26);e.exports=d;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=o.prototype.emit;function d(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}o(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[i(e,"open",u(this,"onopen")),i(e,"packet",u(this,"onpacket")),i(e,"close",u(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},d.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(f.hasOwnProperty(e))return p.apply(this,arguments),this;var t=a(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(s("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){if(s("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?c.encode(this.query):this.query;s("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},d.prototype.onclose=function(e){s("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];s("emitting event %j",t),null!=e.id&&(s("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var o=a(arguments);s("sending ack %j",o),t.packet({type:l(o)?r.BINARY_ACK:r.ACK,id:e,data:o})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(s("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):s("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){s("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(s("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags.compress=e,this},d.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){var r=n(38),o=n(15),a=n(23),i=n(7)("socket.io-client");e.exports=t=s;var u=t.managers={};function s(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o=r(e),s=o.source,c=o.id,l=o.path,f=u[c]&&l in u[c].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||f?(i("ignoring socket cache for %s",s),n=a(s,t)):(u[c]||(i("new io instance for %s",s),u[c]=a(s,t)),n=u[c]),o.query&&!t.query&&(t.query=o.query),n.socket(o.path,t)}t.protocol=o.protocol,t.connect=s,t.Manager=n(23),t.Socket=n(29)},function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){e=e||{};var r=t.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(e,t,n,o){return r.fromToBase(e,t,n,o)}n.en.relativeTime=o,r.fromToBase=function(t,r,a,i,u){for(var s,c,l,f=a.$locale().relativeTime||o,p=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],d=p.length,y=0;y<d;y+=1){var h=p[y];h.d&&(s=i?n(t).diff(a,h.d,!0):a.diff(t,h.d,!0));var v=(e.rounding||Math.round)(Math.abs(s));if(l=s>0,v<=h.r||!h.r){v<=1&&y>0&&(h=p[y-1]);var m=f[h.l];u&&(v=u(""+v)),c="string"==typeof m?m.replace("%d",v):m(v,r,h.l,l);break}}if(r)return c;var b=l?f.future:f.past;return"function"==typeof b?b(c):b.replace("%s",c)},r.to=function(e,t){return a(e,t,this,!0)},r.from=function(e,t){return a(e,t,this)};var i=function(e){return e.$u?n.utc():n()};r.toNow=function(e){return this.to(i(this),e)},r.fromNow=function(e){return this.from(i(this),e)}}}()},function(e,t,n){e.exports=function(){"use strict";return function(e,t,n){n.updateLocale=function(e,t){var r=n.Ls[e];if(r)return(t?Object.keys(t):[]).forEach((function(e){r[e]=t[e]})),r}}}()},function(e,t,n){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}()},function(e,t,n){"use strict";var r=n(66),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?i:u[e.$$typeof]||o}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=i;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,y=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(y){var o=d(n);o&&o!==y&&e(t,o,r)}var i=l(n);f&&(i=i.concat(f(n)));for(var u=s(t),h=s(n),v=0;v<i.length;++v){var m=i[v];if(!(a[m]||r&&r[m]||h&&h[m]||u&&u[m])){var b=p(n,m);try{c(t,m,b)}catch(e){}}}}return t}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),i=new x(r||[]);return a._invoke=function(e,t,n){var r=f;return function(o,a){if(r===d)throw new Error("Generator is already running");if(r===y){if("throw"===o)throw a;return T()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var u=P(i,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?y:p,s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=y,n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",y="completed",h={};function v(){}function m(){}function b(){}var g={};s(g,a,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(A([])));w&&w!==n&&r.call(w,a)&&(g=w);var j=b.prototype=v.prototype=Object.create(g);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(o,a,i,u){var s=l(e[o],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return n("throw",e,i,u)}))}u(s.arg)}var o;this._invoke=function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}}function P(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:T}}function T(){return{value:t,done:!0}}return m.prototype=b,s(j,"constructor",b),s(b,"constructor",m),m.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},e.awrap=function(e){return{__await:e}},S(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new E(c(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(j),s(j,u,"Generator"),s(j,a,(function(){return this})),s(j,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(20),o=n(7)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),n=r(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,a=o-(n||o);e.diff=a,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n})),t.formatArgs.call(e,i);var c=r.log||t.log||console.log.bind(console);c.apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(14),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(41)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(13))},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,a=o-(n||o);e.diff=a,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n})),t.formatArgs.call(e,i);var c=r.log||t.log||console.log.bind(console);c.apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(14),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(21),o=n(22),a=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===a.call(Blob),u="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===a.call(File);function s(e,t){if(!e)return e;if(o(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(r(e)){for(var a=new Array(e.length),i=0;i<e.length;i++)a[i]=s(e[i],t);return a}if("object"==typeof e&&!(e instanceof Date)){a={};for(var u in e)a[u]=s(e[u],t);return a}return e}function c(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(r(e))for(var n=0;n<e.length;n++)e[n]=c(e[n],t);else if("object"==typeof e)for(var o in e)e[o]=c(e[o],t);return e}t.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=s(n,t),r.attachments=t.length,{packet:r,buffers:t}},t.reconstructPacket=function(e,t){return e.data=c(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,a=e;!function e(s,c,l){if(!s)return s;if(i&&s instanceof Blob||u&&s instanceof File){n++;var f=new FileReader;f.onload=function(){l?l[c]=this.result:a=this.result,--n||t(a)},f.readAsArrayBuffer(s)}else if(r(s))for(var p=0;p<s.length;p++)e(s[p],p,s);else if("object"==typeof s&&!o(s))for(var d in s)e(s[d],d,s)}(a),n||t(a)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),i=r[0],u=r[1],s=new a(function(e,t,n){return 3*(t+n)/4-n}(0,i,u)),l=0,f=u>0?i-4:i;for(n=0;n<f;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===u&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,s[l++]=255&t);1===u&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,a=[],i=16383,u=0,s=n-o;u<s;u+=i)a.push(l(e,u,u+i>s?s:u+i));1===o?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=i.length;u<s;++u)r[u]=i[u],o[i.charCodeAt(u)]=u;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var o,a,i=[],u=t;u<n;u+=3)o=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),i.push(r[(a=o)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var a,i,u=8*o-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?o-1:0,p=n?-1:1,d=e[t+f];for(f+=p,a=d&(1<<-l)-1,d>>=-l,l+=u;l>0;a=256*a+e[t+f],f+=p,l-=8);for(i=a&(1<<-l)-1,a>>=-l,l+=r;l>0;i=256*i+e[t+f],f+=p,l-=8);if(0===a)a=1-c;else{if(a===s)return i?NaN:1/0*(d?-1:1);i+=Math.pow(2,r),a-=c}return(d?-1:1)*i*Math.pow(2,a-r)},t.write=function(e,t,n,r,o,a){var i,u,s,c=8*a-o-1,l=(1<<c)-1,f=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,y=r?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-i))<1&&(i--,s*=2),(t+=i+f>=1?p/s:p*Math.pow(2,1-f))*s>=2&&(i++,s/=2),i+f>=l?(u=0,i=l):i+f>=1?(u=(t*s-1)*Math.pow(2,o),i+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,o),i=0));o>=8;e[n+d]=255&u,d+=y,u/=256,o-=8);for(i=i<<o|u,c+=o;c>0;e[n+d]=255&i,d+=y,i/=256,c-=8);e[n+d-y]|=128*h}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(48),e.exports.parser=n(6)},function(e,t,n){var r=n(24),o=n(5),a=n(10)("engine.io-client:socket"),i=n(28),u=n(6),s=n(20),c=n(8);function l(e,t){if(!(this instanceof l))return new l(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=s(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=s(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=l,l.priorWebsocketSuccess=!1,o(l.prototype),l.protocol=u.protocol,l.Socket=l,l.Transport=n(19),l.transports=n(24),l.parser=n(6),l.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=u.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var e;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},l.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},l.prototype.probe=function(e){a('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function o(){if(r.onlyBinaryUpgrades){var o=!this.supportsBinary&&r.transport.supportsBinary;n=n||o}n||(a('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(a('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,a('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(a("changing transport and sending upgrade packet"),p(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{a('probe transport "%s" failed',e);var i=new Error("probe error");i.transport=t.name,r.emit("upgradeError",i)}})))}function i(){n||(n=!0,p(),t.close(),t=null)}function u(n){var o=new Error("probe error: "+n);o.transport=t.name,i(),a('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",o)}function s(){u("transport closed")}function c(){u("socket closed")}function f(e){t&&e.name!==t.name&&(a('"%s" works - aborting "%s"',e.name,t.name),i())}function p(){t.removeListener("open",o),t.removeListener("error",u),t.removeListener("close",s),r.removeListener("close",c),r.removeListener("upgrading",f)}l.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",u),t.once("close",s),this.once("close",c),this.once("upgrading",f),t.open()},l.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},l.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},l.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},l.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},l.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()}function t(){e.onClose("forced close"),a("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},l.prototype.onError=function(e){a("socket error %j",e),l.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},l.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~i(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){var r=n(17),o=n(25),a=n(5),i=n(9),u=n(10)("engine.io-client:polling-xhr"),s=n(18);function c(){}function l(e){if(o.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function f(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=l,e.exports.Request=f,i(l,o),l.prototype.supportsBinary=!0,l.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new f(e)},l.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),o=this;r.on("success",t),r.on("error",(function(e){o.onError("xhr post error",e)})),this.sendXhr=r},l.prototype.doPoll=function(){u("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},a(f.prototype),f.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),n=this;try{u("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},u("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},f.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},f.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},f.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},f.requestsCount=0,f.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",p);else if("function"==typeof addEventListener){addEventListener("onpagehide"in s?"pagehide":"unload",p,!1)}function p(){for(var e in f.requests)f.requests.hasOwnProperty(e)&&f.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),a=new Uint8Array(n-t),i=t,u=0;i<n;i++,u++)a[u]=o[i];return a.buffer}},function(e,t){function n(){}e.exports=function(e,t,r){var o=!1;return r=r||n,a.count=e,0===e?t():a;function a(e,n){if(a.count<=0)throw new Error("after called too many times");--a.count,e?(o=!0,t(e),t=r):0!==a.count||o||t(null,n)}}},function(e,t){var n,r,o,a=String.fromCharCode;function i(e){for(var t,n,r=[],o=0,a=e.length;o<a;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<a?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function u(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function s(e,t){return a(e>>t&63|128)}function c(e,t){if(0==(4294967168&e))return a(e);var n="";return 0==(4294965248&e)?n=a(e>>6&31|192):0==(4294901760&e)?(u(e,t)||(e=65533),n=a(e>>12&15|224),n+=s(e,6)):0==(4292870144&e)&&(n=a(e>>18&7|240),n+=s(e,12),n+=s(e,6)),n+=a(63&e|128)}function l(){if(o>=r)throw Error("Invalid byte index");var e=255&n[o];if(o++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(e){var t,a;if(o>r)throw Error("Invalid byte index");if(o==r)return!1;if(t=255&n[o],o++,0==(128&t))return t;if(192==(224&t)){if((a=(31&t)<<6|l())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&t)){if((a=(15&t)<<12|l()<<6|l())>=2048)return u(a,e)?a:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(a=(7&t)<<18|l()<<12|l()<<6|l())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=i(e),o=r.length,a=-1,u="";++a<o;)u+=c(r[a],n);return u},decode:function(e,t){var u=!1!==(t=t||{}).strict;n=i(e),r=n.length,o=0;for(var s,c=[];!1!==(s=f(u));)c.push(s);return function(e){for(var t,n=e.length,r=-1,o="";++r<n;)(t=e[r])>65535&&(o+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=a(t);return o}(c)}}},function(e,t){!function(e){"use strict";t.encode=function(t){var n,r=new Uint8Array(t),o=r.length,a="";for(n=0;n<o;n+=3)a+=e[r[n]>>2],a+=e[(3&r[n])<<4|r[n+1]>>4],a+=e[(15&r[n+1])<<2|r[n+2]>>6],a+=e[63&r[n+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a},t.decode=function(t){var n,r,o,a,i,u=.75*t.length,s=t.length,c=0;"="===t[t.length-1]&&(u--,"="===t[t.length-2]&&u--);var l=new ArrayBuffer(u),f=new Uint8Array(l);for(n=0;n<s;n+=4)r=e.indexOf(t[n]),o=e.indexOf(t[n+1]),a=e.indexOf(t[n+2]),i=e.indexOf(t[n+3]),f[c++]=r<<2|o>>4,f[c++]=(15&o)<<4|a>>2,f[c++]=(3&a)<<6|63&i;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=n&&n.prototype.append&&n.prototype.getBlob;function i(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function u(e,t){t=t||{};var r=new n;return i(e).forEach((function(e){r.append(e)})),t.type?r.getBlob(t.type):r.getBlob()}function s(e,t){return new Blob(i(e),t||{})}"undefined"!=typeof Blob&&(u.prototype=Blob.prototype,s.prototype=Blob.prototype),e.exports=r?o?Blob:s:a?u:void 0},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,a=o-(n||o);e.diff=a,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;s++;var o=t.formatters[r];if("function"==typeof o){var a=i[s];n=o.call(e,a),i.splice(s,1),s--}return n})),t.formatArgs.call(e,i);var c=r.log||t.log||console.log.bind(console);c.apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(14),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(25),o=n(9),a=n(18);e.exports=l;var i,u=/\n/g,s=/\\n/g;function c(){}function l(e){r.call(this,e),this.query=this.query||{},i||(i=a.___eio=a.___eio||[]),this.index=i.length;var t=this;i.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=c)}),!1)}o(l,r),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},l.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,o=document.createElement("form"),a=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=i,o.method="POST",o.setAttribute("accept-charset","utf-8"),a.name="d",o.appendChild(a),document.body.appendChild(o),this.form=o,this.area=a}function c(){l(),t()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),e=e.replace(s,"\\\n"),this.area.value=e.replace(u,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&c()}:this.iframe.onload=c}},function(e,t,n){(function(t){var r,o,a=n(19),i=n(6),u=n(8),s=n(9),c=n(27),l=n(10)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{o=n(61)}catch(e){}var f=r||o;function p(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(f=o),a.call(this,e)}e.exports=p,s(p,a),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new f(e,t):new f(e):new f(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},p.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,o=0,a=r;o<a;o++)!function(e){i.encodePacket(e,n.supportsBinary,(function(o){if(!n.usingBrowserWebSocket){var a={};if(e.options&&(a.compress=e.options.compress),n.perMessageDeflate)("string"==typeof o?t.byteLength(o):o.length)<n.perMessageDeflate.threshold&&(a.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(o):n.ws.send(o,a)}catch(e){l("websocket closed before onclose event")}--r||u()}))}(e[o]);function u(){n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0)}},p.prototype.onClose=function(){a.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),(e=u.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},p.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===p.prototype.name)}}).call(this,n(16).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){"use strict";var r=n(65);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports=n(67)},function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,y=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,g=r?Symbol.for("react.fundamental"):60117,O=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function j(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case f:case p:case i:case s:case u:case y:return e;default:switch(e=e&&e.$$typeof){case l:case d:case m:case v:case c:return e;default:return t}}case a:return t}}}function S(e){return j(e)===p}t.AsyncMode=f,t.ConcurrentMode=p,t.ContextConsumer=l,t.ContextProvider=c,t.Element=o,t.ForwardRef=d,t.Fragment=i,t.Lazy=m,t.Memo=v,t.Portal=a,t.Profiler=s,t.StrictMode=u,t.Suspense=y,t.isAsyncMode=function(e){return S(e)||j(e)===f},t.isConcurrentMode=S,t.isContextConsumer=function(e){return j(e)===l},t.isContextProvider=function(e){return j(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return j(e)===d},t.isFragment=function(e){return j(e)===i},t.isLazy=function(e){return j(e)===m},t.isMemo=function(e){return j(e)===v},t.isPortal=function(e){return j(e)===a},t.isProfiler=function(e){return j(e)===s},t.isStrictMode=function(e){return j(e)===u},t.isSuspense=function(e){return j(e)===y},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===p||e===s||e===u||e===y||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===g||e.$$typeof===O||e.$$typeof===w||e.$$typeof===b)},t.typeOf=j},function(e,t,n){"use strict";n.r(t),n.d(t,"AddressDetails",(function(){return Tr})),n.d(t,"AddressFieldsSetting",(function(){return to})),n.d(t,"AddressForm",(function(){return wo})),n.d(t,"AddressList",(function(){return To})),n.d(t,"AdvancedReports",(function(){return Mo})),n.d(t,"AnalyticsBusinessFilter",(function(){return Wo})),n.d(t,"AnalyticsDriversFilter",(function(){return ia})),n.d(t,"AnalyticsStatusSubFilter",(function(){return ya})),n.d(t,"ApiKeysList",(function(){return Ca})),n.d(t,"BaseComponent",(function(){return Ia})),n.d(t,"CannyIdentification",(function(){return Ta})),n.d(t,"Settings",(function(){return Ya})),n.d(t,"BatchImageForm",(function(){return ei})),n.d(t,"BusinessAndProductList",(function(){return fi})),n.d(t,"BusinessAnalytics",(function(){return Oi})),n.d(t,"BusinessBasicInformation",(function(){return Ai})),n.d(t,"BusinessBrandBUSIDetail",(function(){return Ri})),n.d(t,"BusinessBrandGENDetail",(function(){return Ki})),n.d(t,"BusinessBrandListing",(function(){return au})),n.d(t,"BusinessController",(function(){return lu})),n.d(t,"BusinessDeliveryDetails",(function(){return gu})),n.d(t,"BusinessDeliveryZone",(function(){return _u})),n.d(t,"BusinessDeliveryZoneShare",(function(){return Yu})),n.d(t,"BusinessDetails",(function(){return es})),n.d(t,"BusinessFormDetails",(function(){return cs})),n.d(t,"BusinessGallery",(function(){return bs})),n.d(t,"BusinessGprsPrinters",(function(){return Cs})),n.d(t,"BusinessInformation",(function(){return Ts})),n.d(t,"BusinessManagerBusinesses",(function(){return Xs})),n.d(t,"BusinessList",(function(){return Ns})),n.d(t,"BusinessMenu",(function(){return ic})),n.d(t,"BusinessMenuMetaFields",(function(){return xc})),n.d(t,"BusinessMetaFields",(function(){return cl})),n.d(t,"BusinessProductsListing",(function(){return mc})),n.d(t,"BusinessPromotionForm",(function(){return Lf})),n.d(t,"BusinessPromotionList",(function(){return qf})),n.d(t,"BusinessPromotionMetaFields",(function(){return tp})),n.d(t,"BusinessMenuOptions",(function(){return Nc})),n.d(t,"BusinessMenuShare",(function(){return Zc})),n.d(t,"BusinessPaymethods",(function(){return jl})),n.d(t,"BusinessPlace",(function(){return _l})),n.d(t,"BusinessPlaceGroup",(function(){return Ql})),n.d(t,"BusinessPlaceGroupList",(function(){return Gl})),n.d(t,"BusinessPickupDetails",(function(){return sf})),n.d(t,"BusinessProductsCategoyDetails",(function(){return Of})),n.d(t,"BusinessProductsCategories",(function(){return jf})),n.d(t,"BusinessProductsSearch",(function(){return Ef})),n.d(t,"BusinessReviews",(function(){return lp})),n.d(t,"BusinessReviewsList",(function(){return gp})),n.d(t,"BusinessSchedule",(function(){return Ip})),n.d(t,"BusinessSharedMenuProductDetails",(function(){return Rp})),n.d(t,"BusinessSharedMenuProducts",(function(){return Hp})),n.d(t,"BusinessSortControl",(function(){return Zp})),n.d(t,"BusinessSpreadSheet",(function(){return cd})),n.d(t,"BusinessTypeFilter",(function(){return md})),n.d(t,"BusinessTypeDetail",(function(){return xd})),n.d(t,"BusinessWebhooks",(function(){return Md})),n.d(t,"BusinessZoneGoogleMaps",(function(){return Vd})),n.d(t,"BusinessProductCreator",(function(){return ry})),n.d(t,"BusinessWalletsList",(function(){return py})),n.d(t,"CampaignListing",(function(){return Sy})),n.d(t,"CampaignDetail",(function(){return Ly})),n.d(t,"CampaignDetailContent",(function(){return qy})),n.d(t,"CampaignSignUpOption",(function(){return nh})),n.d(t,"CampaignAmountOption",(function(){return yh})),n.d(t,"Cart",(function(){return bh})),n.d(t,"Checkout",(function(){return Ih})),n.d(t,"CheckoutFieldsSetting",(function(){return Bh})),n.d(t,"CheckPassword",(function(){return qh})),n.d(t,"CityList",(function(){return tv})),n.d(t,"CouponControl",(function(){return sv})),n.d(t,"DashboardBusinessList",(function(){return gv})),n.d(t,"DashboardOrdersList",(function(){return Tv})),n.d(t,"DeliveryzoneList",(function(){return Rv})),n.d(t,"DragAndDrop",(function(){return zv})),n.d(t,"DriversCompanyDetails",(function(){return Zv})),n.d(t,"DriverGroupSetting",(function(){return cm})),n.d(t,"UserReviewDetails",(function(){return mm})),n.d(t,"DriverTips",(function(){return wb})),n.d(t,"DriversList",(function(){return kb})),n.d(t,"DriverAnalytics",(function(){return zb})),n.d(t,"DriversCompaniesList",(function(){return xm})),n.d(t,"DriversGroupAutoassign",(function(){return Um})),n.d(t,"DriversGroupDetails",(function(){return $m})),n.d(t,"DriversGroupOrders",(function(){return Zm})),n.d(t,"DriversGroupsList",(function(){return cb})),n.d(t,"DriversGroupLogs",(function(){return mb})),n.d(t,"EnterprisePromotionList",(function(){return Zb})),n.d(t,"EnterprisePromotionDetails",(function(){return lg})),n.d(t,"ExamineClick",(function(){return fg})),n.d(t,"ExportCSV",(function(){return gg})),n.d(t,"FacebookLoginButton",(function(){return Ig})),n.d(t,"ForgotPasswordForm",(function(){return Lg})),n.d(t,"GoogleAutocompleteInput",(function(){return $g})),n.d(t,"GoogleMaps",(function(){return Qg})),n.d(t,"GoogleMapsMap",(function(){return eO})),n.d(t,"GpsButton",(function(){return aO})),n.d(t,"GoogleGpsButton",(function(){return iO})),n.d(t,"GoogleTagManager",(function(){return uO})),n.d(t,"Home",(function(){return bO})),n.d(t,"ImporterForm",(function(){return TO})),n.d(t,"ImporterJobForm",(function(){return RO})),n.d(t,"ImporterListing",(function(){return WO})),n.d(t,"InvoiceBusinessManager",(function(){return iw})),n.d(t,"InvoiceDriverManager",(function(){return vw})),n.d(t,"LanguageManager",(function(){return Pw})),n.d(t,"LanguageSelector",(function(){return kw})),n.d(t,"LanguageSetting",(function(){return Nw})),n.d(t,"LanguageTransSpread",(function(){return Kw})),n.d(t,"LanguageTransTable",(function(){return oj})),n.d(t,"LoginForm",(function(){return dj})),n.d(t,"LogisticInformation",(function(){return wj})),n.d(t,"Logistics",(function(){return Aj})),n.d(t,"LogoutAction",(function(){return Fj})),n.d(t,"PointsWalletBusinessDetail",(function(){return Jj})),n.d(t,"MainSearch",(function(){return fS})),n.d(t,"MenuControl",(function(){return bS})),n.d(t,"MetaFields",(function(){return NS})),n.d(t,"MomentOption",(function(){return JS})),n.d(t,"MyOrders",(function(){return tE})),n.d(t,"MyOrdersList",(function(){return iE})),n.d(t,"OpenCartListing",(function(){return mE})),n.d(t,"OpenCartsDetail",(function(){return PE})),n.d(t,"OpenCartFilter",(function(){return UE})),n.d(t,"OrderList",(function(){return $E})),n.d(t,"OrderNotification",(function(){return HE})),n.d(t,"OrdersFilter",(function(){return rP})),n.d(t,"OrdersManage",(function(){return yP})),n.d(t,"OrdersOverview",(function(){return EP})),n.d(t,"OrderTypeControl",(function(){return xP})),n.d(t,"Messages",(function(){return AS})),n.d(t,"PaymentOptions",(function(){return BP})),n.d(t,"PaymentOptionSquare",(function(){return $P})),n.d(t,"PagesList",(function(){return eC})),n.d(t,"PageForm",(function(){return fC})),n.d(t,"PlaceList",(function(){return jC})),n.d(t,"PluginList",(function(){return DC})),n.d(t,"Popup",(function(){return RC})),n.d(t,"PointsWalletLevels",(function(){return WC})),n.d(t,"PointsWalletBusinessList",(function(){return rS})),n.d(t,"ProductComponent",(function(){return aI})),n.d(t,"ProductDetatils",(function(){return vI})),n.d(t,"ProductDetailsAdvanced",(function(){return hA})),n.d(t,"ProductExtraMetaFields",(function(){return II})),n.d(t,"ProductExtraOptions",(function(){return ux})),n.d(t,"ProductExtraOptionDetails",(function(){return MI})),n.d(t,"ProductExtraOptionMetaFields",(function(){return KI})),n.d(t,"ProductExtraSubOptionMetaFields",(function(){return bx})),n.d(t,"ProductExtras",(function(){return Ax})),n.d(t,"ProductForm",(function(){return Rx})),n.d(t,"ProductGallery",(function(){return Wx})),n.d(t,"ProductMetaFields",(function(){return iA})),n.d(t,"ProductShare",(function(){return IA})),n.d(t,"ProductTagDetails",(function(){return BA})),n.d(t,"ProductTagsList",(function(){return VA})),n.d(t,"ProductImages",(function(){return WA})),n.d(t,"ProductIngredient",(function(){return iT})),n.d(t,"ProductOption",(function(){return uT})),n.d(t,"ProductOptionSuboption",(function(){return pT})),n.d(t,"ProductReviews",(function(){return SA})),n.d(t,"ProductsList",(function(){return vT})),n.d(t,"ProductsListing",(function(){return PT})),n.d(t,"ProfessionalBusinessService",(function(){return BT})),n.d(t,"ProfessionalSchedule",(function(){return qT})),n.d(t,"ProfessionalServices",(function(){return t_})),n.d(t,"ReportsDriverFilter",(function(){return SL})),n.d(t,"QueryLogin",(function(){return c_})),n.d(t,"ReCaptcha",(function(){return P_})),n.d(t,"RewardsPrograms",(function(){return L_})),n.d(t,"RecoveryActionListing",(function(){return J_})),n.d(t,"RecoveryActionDetail",(function(){return nk})),n.d(t,"RecoveryNotificationList",(function(){return dk})),n.d(t,"SingleRecoveryNotification",(function(){return nD})),n.d(t,"SitesAuthSettings",(function(){return fD})),n.d(t,"SearchOptions",(function(){return mk})),n.d(t,"Schedule",(function(){return Ck})),n.d(t,"SignupForm",(function(){return Lk})),n.d(t,"SingleBusinessCard",(function(){return Bk})),n.d(t,"SingleLoyaltyLevel",(function(){return $k})),n.d(t,"SingleOrderCard",(function(){return Jk})),n.d(t,"SingleProductCard",(function(){return Vk})),n.d(t,"SingleBusinessProduct",(function(){return VL})),n.d(t,"SingleBusinessCategory",(function(){return oB})),n.d(t,"UserFormDetails",(function(){return SD})),n.d(t,"UsersExportCSV",(function(){return _D})),n.d(t,"UpsellingPage",(function(){return MD})),n.d(t,"WrapperGoogleMaps",(function(){return Mg})),n.d(t,"OrderDetails",(function(){return HD})),n.d(t,"OrderReview",(function(){return nU})),n.d(t,"PaymentOptionCash",(function(){return zU})),n.d(t,"PaymentOptionPaypal",(function(){return VU})),n.d(t,"PaymentOptionStripe",(function(){return nL})),n.d(t,"PaymentOptionStripeDirect",(function(){return sL})),n.d(t,"PaymentOptionStripeRedirect",(function(){return dL})),n.d(t,"PhoneAutocomplete",(function(){return gU})),n.d(t,"BusinessesMap",(function(){return SU})),n.d(t,"StripeElementsForm",(function(){return BL})),n.d(t,"CardForm",(function(){return wB})),n.d(t,"StripeRedirectForm",(function(){return EB})),n.d(t,"SettingsList",(function(){return yB})),n.d(t,"CmsContent",(function(){return lU})),n.d(t,"FloatingButton",(function(){return CB})),n.d(t,"ResetPassword",(function(){return UB})),n.d(t,"ReportsBrandFilter",(function(){return qB})),n.d(t,"ReportsAppIdFilter",(function(){return eF})),n.d(t,"ReportsDriverGroupFilter",(function(){return lF})),n.d(t,"ReviewCustomer",(function(){return _L})),n.d(t,"SiteDetails",(function(){return wF})),n.d(t,"SitesList",(function(){return AF})),n.d(t,"Analytics",(function(){return kF})),n.d(t,"UsersList",(function(){return YF})),n.d(t,"UserTypeFilter",(function(){return oR})),n.d(t,"UserDetails",(function(){return dR})),n.d(t,"UserMetaFields",(function(){return eR})),n.d(t,"UserWallet",(function(){return jR})),n.d(t,"WebhookList",(function(){return DR})),n.d(t,"ConfigContext",(function(){return Qn})),n.d(t,"ConfigProvider",(function(){return er})),n.d(t,"useConfig",(function(){return tr})),n.d(t,"LanguageContext",(function(){return Un})),n.d(t,"LanguageProvider",(function(){return Ln})),n.d(t,"useLanguage",(function(){return Bn})),n.d(t,"OrderContext",(function(){return yr})),n.d(t,"OrderProvider",(function(){return hr})),n.d(t,"useOrder",(function(){return vr})),n.d(t,"BusinessContext",(function(){return TU})),n.d(t,"BusinessProvider",(function(){return _U})),n.d(t,"useBusiness",(function(){return kU})),n.d(t,"SessionContext",(function(){return pn})),n.d(t,"SessionProvider",(function(){return dn})),n.d(t,"useSession",(function(){return yn})),n.d(t,"WebsocketContext",(function(){return En})),n.d(t,"WebsocketProvider",(function(){return Pn})),n.d(t,"useWebsocket",(function(){return Cn})),n.d(t,"ApiContext",(function(){return tn})),n.d(t,"ApiProvider",(function(){return nn})),n.d(t,"useApi",(function(){return rn})),n.d(t,"OrderingContext",(function(){return RU})),n.d(t,"OrderingProvider",(function(){return MU})),n.d(t,"EventContext",(function(){return Mn})),n.d(t,"EventProvider",(function(){return Nn})),n.d(t,"useEvent",(function(){return zn})),n.d(t,"UtilsContext",(function(){return Sr})),n.d(t,"UtilsProviders",(function(){return Er})),n.d(t,"useUtils",(function(){return Pr})),n.d(t,"ValidationFieldsContext",(function(){return qr})),n.d(t,"ValidationFieldsProvider",(function(){return $r})),n.d(t,"useValidationFields",(function(){return Jr})),n.d(t,"CustomerContext",(function(){return co})),n.d(t,"CustomerProvider",(function(){return lo})),n.d(t,"useCustomer",(function(){return fo})),n.d(t,"ToastContext",(function(){return Ur})),n.d(t,"ToastProvider",(function(){return Lr})),n.d(t,"useToast",(function(){return Br})),n.d(t,"ToastType",(function(){return Dr}));var r,o=n(2),a=n.n(o),i=n(1),u=n.n(i),s=n(0),c=n.n(s),l=function(e){this.back_page=e.back_page,this.current_page=e.current_page,this.fisrt_page=e.fisrt_page,this.from=e.from,this.last_page=e.last_page,this.next_page=e.next_page,this.page_size=e.page_size,this.to=e.to,this.total=e.total,this.total_pages=e.total_pages},f=function(){function e(e,t,n){void 0===t&&(t={}),void 0===n&&(n=void 0),this.response=e,this.options=t,this.api=n}return Object.defineProperty(e.prototype,"content",{get:function(){var e=this;if(this.options.json){var t=this.response.data;if(200===this.response.status&&(t.pagination&&(t.pagination=new l(t.pagination)),this.options.CastClass))if(null===t.result)t.result=null;else if(Array.isArray(t.result))t.result=t.result.map((function(t){return new e.options.CastClass(t,e.api)}));else if("object"==typeof t)if("dictionary"===this.options.mode)for(var n in t.result)"object"==typeof t.result[n]&&(t.result[n]=new this.options.CastClass(t.result[n],this.api));else t.result=new this.options.CastClass(t.result,this.api);return t}return this.response.data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),e}(),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)},d=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},y=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},h=function(){function e(e,t,n){void 0===n&&(n=[]),this.hidden=["original","api","hidden"],this.original=p({},e),this.api=t,this.hidden=this.hidden.concat(n)}return e.prototype.setApi=function(e){this.api=e},e.prototype.getId=function(){},e.prototype.save=function(){return d(this,void 0,void 0,(function(){var e,t,n,r=this;return y(this,(function(o){switch(o.label){case 0:if(this.api.setModelId(this.getId()),!this.api)throw new Error("You must provide the `api` to use `save` function. Example: const newModel = new Model(model, api) or newModel.setApi(api)");return e={},Object.entries(this).forEach((function(t){var n=t[0],o=t[1];r.hidden.includes(n)||o===r.original[n]||(e[n]=o)})),Object.values(e).length>0?[4,this.api.save(e)]:[3,2];case 1:return(t=o.sent().content).error||(n={},Object.entries(t.result).forEach((function(e){var t=e[0],o=e[1];r.hidden.includes(t)||(n[t]=o)})),Object.assign(this,n),this.original=p({},this)),[2,t];case 2:return[2,{error:!1,result:this}]}}))}))},e}(),v=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return v(t,e),t.prototype.getId=function(){return this.id},t}(h),b=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},g=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},O=function(){function e(e){this.attributes=[],this.query={},this.ordering=e}return e.prototype.select=function(e){return this.attributes=e,this},e.prototype.where=function(e){return this.conditions=e,this},e.prototype.setMode=function(e){return this.mode=e,this},e.prototype.asDashboard=function(){return this.setMode("dashboard"),this},e.prototype.asDictionary=function(){return this.setMode("dictionary"),this},e.prototype.parameters=function(e){return this.query=Object.assign(this.query,e),this},e.prototype.makeRequest=function(e,t,n,r,o){return b(this,void 0,void 0,(function(){var a,i;return g(this,(function(u){switch(u.label){case 0:if(a=Object.assign({CastClass:r,json:!0,api:this},o),"GET"===e&&(a.attributes=this.attributes,a.conditions=this.conditions,a.mode=this.mode,a.query||(a.query={}),Object.assign(a.query,this.query),n))for(i in n)a.query[i]=n[i];switch(e){case"GET":return[3,1];case"POST":return[3,3];case"PUT":return[3,5];case"DELETE":return[3,7]}return[3,9];case 1:return[4,this.ordering.get(t,a)];case 2:case 4:case 6:case 8:return[2,u.sent()];case 3:return[4,this.ordering.post(t,n,a)];case 5:return[4,this.ordering.put(t,n,a)];case 7:return[4,this.ordering.delete(t,a)];case 9:throw Error("The `"+e+"` methos is not supported.")}}))}))},e}(),w=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},E=function(e){function t(t,n){var r=e.call(this,t)||this;return r.languageId=n,r}return w(t,e),t.prototype.setModelId=function(e){this.languageId=e},t.prototype.get=function(e){return void 0===e&&(e={}),j(this,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:if(this.languageId&&this.conditions)throw new Error("The `where` function is not compatible with languages(languageId). Example ordering.languages().where(contitions).get()");return t="/languages"+(this.languageId?"/"+this.languageId:""),[4,this.makeRequest("GET",t,void 0,m,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),j(this,void 0,void 0,(function(){var n,r,o,a,i;return S(this,(function(u){switch(u.label){case 0:return n="/languages"+(this.languageId?"/"+this.languageId:""),[4,this.makeRequest(this.languageId?"PUT":"POST",n,e,m,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.languageId||(this.languageId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),j(this,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:if(!this.languageId)throw new Error("`languageId` is require to delete. Example: ordering.languages(languageId).delete()");return t="/languages/"+this.languageId,[4,this.makeRequest("DELETE",t,void 0,m,e)];case 1:return[2,n.sent()]}}))}))},t}(O),P=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},C=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},I=function(){function e(e){this.ordering=e}return e.prototype.auth=function(e,t){return void 0===t&&(t={json:!0,system:!0}),P(this,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return[4,this.ordering.post("/system/auth",e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.getCode=function(e,t){return void 0===t&&(t={json:!0,system:!0}),P(this,void 0,void 0,(function(){return C(this,(function(n){switch(n.label){case 0:return[4,this.ordering.post("/system/code",e,t)];case 1:return[2,n.sent()]}}))}))},e}(),x=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(e){void 0===e&&(e={}),this.access_token=e.access_token,this.expires_in=e.expires_in,this.token_type=e.token_type},T=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["session","addresses"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),t.session&&(r.session=new A(t.session)),r}return x(t,e),t.prototype.isAdministrator=function(){return 0===this.level},t.prototype.isDriver=function(){return 4===this.level},t.prototype.isBusinessOwner=function(){return 2===this.level},t.prototype.isCustomer=function(){return 3===this.level},t.prototype.getAccessToken=function(){var e;return null===(e=this.session)||void 0===e?void 0:e.access_token},t.prototype.getId=function(){return this.id},t}(h),_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,[])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return _(t,e),t.prototype.getId=function(){return this.id},t}(h),D=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),U=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},L=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},B=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.userId=n,o.addressId=r,o}return D(t,e),t.prototype.setModelId=function(e){this.addressId=e},t.prototype.get=function(e){return void 0===e&&(e={}),U(this,void 0,void 0,(function(){var t;return L(this,(function(n){switch(n.label){case 0:if(!this.userId)throw new Error("You must provide the `userId` param. Example ordering.users(userId).addresses(addressId?).get()");if(this.addressId&&this.conditions)throw new Error("The `where` function is not compatible with users(userId).addresses(addressId). Example ordering.users(userId).addresses().where(contitions).get()");return t="/users/"+this.userId+"/addresses"+(this.addressId?"/"+this.addressId:""),[4,this.makeRequest("GET",t,void 0,k,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),U(this,void 0,void 0,(function(){var n,r,o,a,i;return L(this,(function(u){switch(u.label){case 0:if(!this.userId)throw new Error("You must provide the `userId` param. Example ordering.users(userId).addresses(addressId?).save(changes)");return n="/users/"+this.userId+"/addresses"+(this.addressId?"/"+this.addressId:""),[4,this.makeRequest(this.addressId?"PUT":"POST",n,e,k,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.addressId||(this.addressId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),U(this,void 0,void 0,(function(){var t;return L(this,(function(n){switch(n.label){case 0:if(!this.userId)throw new Error("`userId` is require to delete. Example: ordering.users(userId).addresses(addressId).delete()");if(!this.addressId)throw new Error("`addressId` is require to delete. Example: ordering.users(userId).addresses(addressId).delete()");return t="/users/"+this.userId+"/addresses/"+this.addressId,[4,this.makeRequest("DELETE",t,void 0,k,e)];case 1:return[2,n.sent()]}}))}))},t}(O),F=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["driver"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return F(t,e),t}(h),M=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},z=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},G=function(e){function t(t,n){var r=e.call(this,t)||this;return r.ordering=t,r.driver_id=n,r}return M(t,e),t.prototype.setModelId=function(e){this.driver_id=e},t.prototype.get=function(e){return void 0===e&&(e={}),N(this,void 0,void 0,(function(){var t;return z(this,(function(n){switch(n.label){case 0:if(!this.driver_id)throw new Error("You must provide the `dfriver_id` param. Example ordering.users(driver_id).driverLocations().get()");if(this.driver_id&&this.conditions)throw new Error("The `where` function is not compatible with users(driver_id). Example ordering.users(driver_id).where(contitions).driverLocations().get()");return t="/users"+(this.driver_id?"/"+this.driver_id:"/locations"),[4,this.makeRequest("GET",t,void 0,R,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return N(this,void 0,void 0,(function(){var n;return z(this,(function(r){switch(r.label){case 0:if(!this.driver_id)throw new Error("You must provide the `dfriver_id` param. Example ordering.users(driver_id).driverLocations().save(changes)");if(!e.location.lat||!e.location.lng)throw new Error("You must provide the `location` param. Example ordering.users(driver_id).driverLocations().save({ lat: 10, lng: 10})");return n="/users"+(this.driver_id?"/"+this.driver_id+"/locations":""),[4,this.makeRequest("POST",n,e,R,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.delete=function(e){throw new Error("Method not implemented.")},t}(O),Y=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),q=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},$=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},J=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t)||this;return r.userId=n,r}return Y(t,e),t.prototype.setModelId=function(e){this.userId=e},t.prototype.get=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t;return $(this,(function(n){switch(n.label){case 0:if(this.userId&&this.conditions)throw new Error("The `where` function is not compatible with users(userId). Example ordering.users().where(contitions).get()");return t="/users"+(this.userId?"/"+this.userId:""),[4,this.makeRequest("GET",t,void 0,T,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var n,r,o,a,i;return $(this,(function(u){switch(u.label){case 0:return n="/users"+(this.userId?"/"+this.userId:""),[4,this.makeRequest("POST",n,e,T,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.userId||(this.userId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),q(this,void 0,void 0,(function(){var t;return $(this,(function(n){switch(n.label){case 0:if(!this.userId)throw new Error("`userId` is require to delete. Example: ordering.users(userId).delete()");return t="/users/"+this.userId,[4,this.makeRequest("DELETE",t,void 0,T,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.auth=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var n,r,o,a;return $(this,(function(i){switch(i.label){case 0:return"/auth",[4,this.makeRequest("POST","/auth",e,T,t)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||(this.userId=a.id),[2,n]}}))}))},t.prototype.logout=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),q(this,void 0,void 0,(function(){return $(this,(function(n){switch(n.label){case 0:return"/auth/logout",[4,this.makeRequest("POST","/auth/logout",e,T,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.forgotPassword=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){return $(this,(function(n){switch(n.label){case 0:return"/users/forgot",[4,this.makeRequest("POST","/users/forgot",e,T,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.resetPassword=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){return $(this,(function(n){switch(n.label){case 0:return"/users/reset",[4,this.makeRequest("POST","/users/reset",e,T,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.authFacebook=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var n,r,o,a;return $(this,(function(i){switch(i.label){case 0:return"/auth/facebook",[4,this.makeRequest("POST","/auth/facebook",e,T,t)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||(this.userId=a.id),[2,n]}}))}))},t.prototype.authGoogle=function(e,t){return void 0===t&&(t={}),q(this,void 0,void 0,(function(){var n,r,o,a;return $(this,(function(i){switch(i.label){case 0:return"/auth/google",[4,this.makeRequest("POST","/auth/google",e,T,t)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||(this.userId=a.id),[2,n]}}))}))},t.prototype.alerts=function(){var e=this;if(!this.userId)throw new Error("`userId` is require get alerts. Example: ordering.users(userId).alerts().get()");return{get:function(t){return void 0===t&&(t={}),q(e,void 0,void 0,(function(){var e;return $(this,(function(n){switch(n.label){case 0:return e="/users/"+this.userId+"/alerts",[4,this.makeRequest("GET",e,void 0,void 0,t)];case 1:return[2,n.sent()]}}))}))}}},t.prototype.addresses=function(e){if(!this.userId)throw new Error("`userId` is require to use API addresses. Example: ordering.users(userId).addresses().get()");return new B(this.ordering,this.userId,e)},t.prototype.driverLocations=function(){if(!this.userId)throw new Error("`userId` is require to use API addresses. Example: ordering.users(userId).driverLocations().get()");return new G(this.ordering,this.userId)},t}(O),V=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return V(t,e),t.prototype.getId=function(){return this.id},t}(h),W=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},X=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Z=function(e){function t(t,n){var r=e.call(this,t)||this;return r.fieldId=n,r}return W(t,e),t.prototype.setModelId=function(e){this.fieldId=e},t.prototype.get=function(e){return void 0===e&&(e={}),K(this,void 0,void 0,(function(){var t;return X(this,(function(n){switch(n.label){case 0:if(this.fieldId&&this.conditions)throw new Error("The `where` function is not compatible with validationFields(fieldId). Example ordering.validationFields().where(contitions).get()");return t="/validationfields"+(this.fieldId?"/"+this.fieldId:""),[4,this.makeRequest("GET",t,void 0,H,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),K(this,void 0,void 0,(function(){var n,r,o,a,i;return X(this,(function(u){switch(u.label){case 0:return n="/validationfields"+(this.fieldId?"/"+this.fieldId:""),[4,this.makeRequest(this.fieldId?"PUT":"POST",n,e,H,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.fieldId||(this.fieldId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),K(this,void 0,void 0,(function(){var t;return X(this,(function(n){switch(n.label){case 0:if(!this.fieldId)throw new Error("`fieldId` is require to delete. Example: ordering.validationFields(fieldId).delete()");return t="/validationfields/"+this.fieldId,[4,this.makeRequest("DELETE",t,void 0,H,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.toType=function(e){return this.conditions=[{attribute:"validate",value:e}],this},t.prototype.toCheckout=function(){return this.toType("checkout")},t.prototype.toAddress=function(){return this.toType("address")},t}(O),Q=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ee=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["customer","business"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return Q(t,e),t.prototype.getId=function(){return this.id},Object.defineProperty(t.prototype,"subtotal",{get:function(){return this.products?this.products.reduce((function(e,t){var n=t.options.reduce((function(e,t){return e+t.suboptions.reduce((function(e,n){return e+(n.position&&"whole"!==n.position?n.half_price:n.price)*(t.allow_suboption_quantity&&n.quantity>1?n.quantity:1)}),0)}),0);return e+(t.price+n)*t.quantity}),0):0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deliveryFee",{get:function(){return this.delivery_type&&1!==this.delivery_type?0:this.delivery_zone_price},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serviceFee",{get:function(){return(this.subtotal-this.discount)*(this.service_fee/100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalTax",{get:function(){return this.subtotal*this.tax/(this.tax+100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDriverTip",{get:function(){return(this.subtotal-this.totalTax)*(this.driver_tip/100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this.subtotal+this.serviceFee+this.deliveryFee+this.totalDriverTip+(2===this.tax_type?this.totalTax:0)-this.discount},enumerable:!1,configurable:!0}),t}(h),te=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ne=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return te(t,e),t.prototype.getId=function(){return this.id},t}(h),re=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},ae=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},ie=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.orderId=n,o.messageId=r,o}return re(t,e),t.prototype.setModelId=function(e){this.messageId=e},t.prototype.get=function(e){return void 0===e&&(e={}),oe(this,void 0,void 0,(function(){var t;return ae(this,(function(n){switch(n.label){case 0:if(!this.orderId)throw new Error("You must provide the `orderId` param. Example ordering.orders(orderId).messages(messageId?).get()");if(this.messageId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(orderId).messages(messageId). Example ordering.orders(orderId).messages().where(contitions).get()");return t="/orders/"+this.orderId+"/messages"+(this.messageId?"/"+this.messageId:""),[4,this.makeRequest("GET",t,void 0,ne,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),oe(this,void 0,void 0,(function(){var n,r,o,a,i;return ae(this,(function(u){switch(u.label){case 0:if(!this.orderId)throw new Error("You must provide the `orderId` param. Example ordering.orders(orderId).messages(messageId?).save(changes)");if(!this.messageId)throw new Error("ordering.orders(orderId).messages(messageId).save(changes) is not implemented.");return n="/orders/"+this.orderId+"/messages"+(this.messageId?"/"+this.messageId:""),[4,this.makeRequest("POST",n,e,ne,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.messageId||(this.messageId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),oe(this,void 0,void 0,(function(){var t;return ae(this,(function(n){switch(n.label){case 0:if(!this.orderId)throw new Error("ordering.orders(orderId).messages(messageId).delete() is not implemented.");if(!this.messageId)throw new Error("ordering.orders(orderId).messages(messageId).delete() is not implemented.");return t="/orders/"+this.orderId+"/messages/"+this.messageId,[4,this.makeRequest("DELETE",t,void 0,ne,e)];case 1:return[2,n.sent()]}}))}))},t}(O),ue=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},ce=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},le=function(e){function t(t,n){var r=e.call(this,t)||this;return r.orderId=n,r}return ue(t,e),t.prototype.setModelId=function(e){this.orderId=e},t.prototype.get=function(e){return void 0===e&&(e={}),se(this,void 0,void 0,(function(){var t;return ce(this,(function(n){switch(n.label){case 0:if(this.orderId&&this.conditions)throw new Error("The `where` function is not compatible with orders(orderId). Example ordering.orders().where(contitions).get()");return t="/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest("GET",t,void 0,ee,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),se(this,void 0,void 0,(function(){var n,r,o,a,i;return ce(this,(function(u){switch(u.label){case 0:return n="/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest(this.orderId?"PUT":"POST",n,e,ee,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.orderId||(this.orderId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),se(this,void 0,void 0,(function(){var t;return ce(this,(function(n){switch(n.label){case 0:if(!this.orderId)throw new Error("`orderId` is require to delete. Example: ordering.orders(orderId).delete()");return t="/orders/"+this.orderId,[4,this.makeRequest("DELETE",t,void 0,ee,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.summary=function(e){return void 0===e&&(e={}),se(this,void 0,void 0,(function(){return ce(this,(function(t){switch(t.label){case 0:if(this.orderId)throw new Error("`orderId` is NOT require to summary API. Example: ordering.orders().summary()");return"/orders/dashboard",[4,this.makeRequest("GET","/orders/dashboard",void 0,void 0,e)];case 1:return[2,t.sent()]}}))}))},t.prototype.messages=function(e){if(!this.orderId)throw new Error("`orderId` is require to use API messages. Example: ordering.orders(orderId).messages().get()");if("number"!=typeof this.orderId)throw new Error("`orderId` must be a number to use API messages. Example: ordering.orders(orderId).messages().get()");return new ie(this.ordering,this.orderId,e)},t.prototype.reorder=function(e){return void 0===e&&(e={}),se(this,void 0,void 0,(function(){var t;return ce(this,(function(n){switch(n.label){case 0:if(!this.orderId)throw new Error("`orderId` is require to delete. Example: ordering.orders(orderId).reorder()");return t="/orders/"+this.orderId+"/reorder",[4,this.makeRequest("POST",t,void 0,void 0,e)];case 1:return[2,n.sent()]}}))}))},t}(O),fe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pe=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["business"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return fe(t,e),t}(h),de=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ye=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},he=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},ve=function(e){function t(t,n){var r=e.call(this,t)||this;return r.orderId=n,r}return de(t,e),t.prototype.setModelId=function(e){this.orderId=e},t.prototype.get=function(e){return void 0===e&&(e={}),ye(this,void 0,void 0,(function(){var t;return he(this,(function(n){switch(n.label){case 0:if(this.orderId&&this.conditions)throw new Error("The `where` function is not compatible with controls(orderId). Example ordering.orders().where(contitions).get()");return t="/controls/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest("GET",t,void 0,pe,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){throw new Error("Method not implemented.")},t.prototype.delete=function(e){throw new Error("Method not implemented.")},t}(O),me=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),be=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,[])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return me(t,e),t.prototype.getId=function(){return this.id},t}(h),ge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oe=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return ge(t,e),t.prototype.getId=function(){return this.id},t}(h),we=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),je=function(e){function t(t,n){var r;void 0===t&&(t={}),void 0===n&&(n=null);var o=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];o[t]=n})),o.products=null===(r=o.products)||void 0===r?void 0:r.map((function(e){return new Oe(e)})),o}return we(t,e),t.prototype.getId=function(){return this.id},t}(h),Se=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ee=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Pe=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ce=function(e){function t(t,n,r,o){void 0===o&&(o=null);var a=e.call(this,t)||this;return a.ordering=t,a.businessId=n,a.categoryId=r,a.productId=o,a}return Se(t,e),t.prototype.setModelId=function(e){this.productId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ee(this,void 0,void 0,(function(){var t;return Pe(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId).products(productId?).get()");if(this.productId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).categories(categoryId).products(productId). Example ordering.businesses(businessId).categories(categoryId).products().where(contitions).get()");return t="/business/"+this.businessId+"/categories/"+this.categoryId+"/products"+(this.productId?"/"+this.productId:""),[4,this.makeRequest("GET",t,void 0,Oe,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ee(this,void 0,void 0,(function(){var n,r,o,a,i;return Pe(this,(function(u){switch(u.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId).products(productId?).save(changes)");return n="/business/"+this.businessId+"/categories/"+this.categoryId+"/products"+(this.productId?"/"+this.productId:""),[4,this.makeRequest("POST",n,e,Oe,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.productId||(this.productId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ee(this,void 0,void 0,(function(){var t;return Pe(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");if(!this.categoryId)throw new Error("`categoryId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");if(!this.productId)throw new Error("`productId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");return t="/business/"+this.businessId+"/categories/"+this.categoryId+"/products/"+this.productId,[4,this.makeRequest("DELETE",t,void 0,Oe,e)];case 1:return[2,n.sent()]}}))}))},t}(O),Ie=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xe=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Ae=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Te=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.businessId=n,o.categoryId=r,o}return Ie(t,e),t.prototype.setModelId=function(e){this.categoryId=e},t.prototype.get=function(e){return void 0===e&&(e={}),xe(this,void 0,void 0,(function(){var t;return Ae(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId?).get()");if(this.categoryId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).categories(categoryId). Example ordering.businesses(businessId).categories().where(contitions).get()");return t="/business/"+this.businessId+"/categories"+(this.categoryId?"/"+this.categoryId:""),[4,this.makeRequest("GET",t,void 0,je,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),xe(this,void 0,void 0,(function(){var n,r,o,a,i;return Ae(this,(function(u){switch(u.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId?).save(changes)");return n="/business/"+this.businessId+"/categories"+(this.categoryId?"/"+this.categoryId:""),[4,this.makeRequest("POST",n,e,je,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.categoryId||(this.categoryId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),xe(this,void 0,void 0,(function(){var t;return Ae(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).delete()");if(!this.categoryId)throw new Error("`categoryId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).delete()");return t="/business/"+this.businessId+"/categories/"+this.categoryId,[4,this.makeRequest("DELETE",t,void 0,je,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.products=function(e){if(!this.categoryId)throw new Error("`categoryId` is require to use API products. Example: ordering.businesses(businessId).categories(categoryId).products().get()");return new Ce(this.ordering,this.businessId,this.categoryId,e)},t}(O),_e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(e){function t(t,n){var r;void 0===t&&(t={}),void 0===n&&(n=null);var o=e.call(this,t,n,["products"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];o[t]=n})),o.products=null===(r=o.products)||void 0===r?void 0:r.map((function(e){return new Oe(e)})),o}return _e(t,e),t.prototype.getId=function(){return this.id},t}(h),De=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ue=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Le=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Be=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.businessId=n,o.menuId=r,o}return De(t,e),t.prototype.setModelId=function(e){this.menuId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ue(this,void 0,void 0,(function(){var t;return Le(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).menus(menuId?).get()");if(this.menuId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).menus(menuId). Example ordering.businesses(businessId).menus().where(contitions).get()");return t="/business/"+this.businessId+"/menus"+(this.menuId?"/"+this.menuId:""),[4,this.makeRequest("GET",t,void 0,ke,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ue(this,void 0,void 0,(function(){var n,r,o,a,i;return Le(this,(function(u){switch(u.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).menus(menuId?).save(changes)");return n="/business/"+this.businessId+"/menus"+(this.menuId?"/"+this.menuId:""),[4,this.makeRequest(this.menuId?"PUT":"POST",n,e,ke,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.menuId||(this.menuId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ue(this,void 0,void 0,(function(){var t;return Le(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).menus(menuId).delete()");if(!this.menuId)throw new Error("`menuId` is require to delete. Example: ordering.businesses(businessId).menus(menuId).delete()");return t="/business/"+this.businessId+"/menus/"+this.menuId,[4,this.makeRequest("DELETE",t,void 0,ke,e)];case 1:return[2,n.sent()]}}))}))},t}(O),Fe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Re=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Me=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ne=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.businessId=n,o.productId=r,o}return Fe(t,e),t.prototype.setModelId=function(e){this.productId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Re(this,void 0,void 0,(function(){var t;return Me(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).products().get()");return t="/business/"+this.businessId+"/products",[4,this.makeRequest("GET",t,void 0,Oe,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){throw void 0===t&&(t={}),new Error("Method not implemented.")},t.prototype.delete=function(e){throw void 0===e&&(e={}),new Error("Method not implemented.")},t}(O),ze=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ge=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Ye=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},qe=function(e){function t(t,n){var r=e.call(this,t)||this;return r.businessId=n,r}return ze(t,e),t.prototype.setModelId=function(e){this.businessId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ge(this,void 0,void 0,(function(){var t,n,r,o,a;return Ye(this,(function(i){switch(i.label){case 0:if(this.businessId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId). Example ordering.businesses().where(contitions).get()");return t="/business"+(this.businessId?"/"+this.businessId:""),[4,this.makeRequest("GET",t,void 0,be,e)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||this.businessId||(this.businessId=a.id),[2,n]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ge(this,void 0,void 0,(function(){var n,r,o,a,i;return Ye(this,(function(u){switch(u.label){case 0:return n="/business"+(this.businessId?"/"+this.businessId:""),[4,this.makeRequest("POST",n,e,be,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.businessId||(this.businessId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ge(this,void 0,void 0,(function(){var t;return Ye(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).delete()");return t="/business/"+this.businessId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.validateCart=function(e,t){return void 0===t&&(t={}),Ge(this,void 0,void 0,(function(){var n;return Ye(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to validateCart. Example: ordering.businesses(businessId).validateCart(cart)");return n="/business/"+this.businessId+"/validate_cart",[4,this.makeRequest("GET",n,e,void 0,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.products=function(){if(!this.businessId)throw new Error("`businessId` is require to products. Example: ordering.businesses(businessId).products().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API menus. Example: ordering.businesses(businessId).products().get()");return new Ne(this.ordering,this.businessId)},t.prototype.categories=function(e){if(!this.businessId)throw new Error("`businessId` is require to use API categories. Example: ordering.businesses(businessId).categories().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API categories. Example: ordering.businesses(businessId).categories().get()");return new Te(this.ordering,this.businessId,e)},t.prototype.menus=function(e){if(!this.businessId)throw new Error("`businessId` is require to use API menus. Example: ordering.businesses(businessId).menus().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API menus. Example: ordering.businesses(businessId).menus().get()");return new Be(this.ordering,this.businessId,e)},t}(O),$e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Je=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["business"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return $e(t,e),t}(h),Ve=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),He=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},We=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ke=function(e){function t(t){return e.call(this,t)||this}return Ve(t,e),t.prototype.setModelId=function(e){this.driversGroupsId=e},t.prototype.get=function(e){return void 0===e&&(e={}),He(this,void 0,void 0,(function(){var t;return We(this,(function(n){switch(n.label){case 0:if(this.driversGroupsId&&this.conditions)throw new Error("The `where` function is not compatible with orders(driversGroupsId). Example ordering.orders().where(contitions).get()");return t="/drivergroups"+(this.driversGroupsId?"/"+this.driversGroupsId:""),[4,this.makeRequest("GET",t,void 0,Je,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){throw new Error("Method not implemented.")},t.prototype.delete=function(e){throw new Error("Method not implemented.")},t}(O),Xe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ze=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return Xe(t,e),t.prototype.getId=function(){return this.id},t}(h),Qe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},tt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},nt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.configId=n,r}return Qe(t,e),t.prototype.setModelId=function(e){this.configId=e},t.prototype.get=function(e){return void 0===e&&(e={}),et(this,void 0,void 0,(function(){var t;return tt(this,(function(n){switch(n.label){case 0:if(this.configId&&this.conditions)throw new Error("The `where` function is not compatible with configs(configId). Example ordering.configs().where(contitions).get()");return t="/configs"+(this.configId?"/"+this.configId:""),[4,this.makeRequest("GET",t,void 0,Ze,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),et(this,void 0,void 0,(function(){var n,r,o,a,i;return tt(this,(function(u){switch(u.label){case 0:return n="/configs"+(this.configId?"/"+this.configId:""),[4,this.makeRequest(this.configId?"PUT":"POST",n,e,Ze,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.configId||(this.configId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),et(this,void 0,void 0,(function(){var t;return tt(this,(function(n){switch(n.label){case 0:if(!this.configId)throw new Error("`configId` is require to delete. Example: ordering.configs(configId).delete()");return t="/configs/"+this.configId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t}(O),rt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ot=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return rt(t,e),t.prototype.getId=function(){return this.id},t}(h),at=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},ut=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},st=function(e){function t(t,n){var r=e.call(this,t)||this;return r.translationId=n,r}return at(t,e),t.prototype.setModelId=function(e){this.translationId=e},t.prototype.get=function(e){return void 0===e&&(e={}),it(this,void 0,void 0,(function(){var t;return ut(this,(function(n){switch(n.label){case 0:if(this.translationId&&this.conditions)throw new Error("The `where` function is not compatible with translations(translationId). Example ordering.translations().where(contitions).get()");return t="/translations"+(this.translationId?"/"+this.translationId:""),[4,this.makeRequest("GET",t,void 0,ot,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),it(this,void 0,void 0,(function(){var n,r,o,a,i;return ut(this,(function(u){switch(u.label){case 0:return n="/translations"+(this.translationId?"/"+this.translationId:""),[4,this.makeRequest(this.translationId?"PUT":"POST",n,e,ot,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.translationId||(this.translationId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),it(this,void 0,void 0,(function(){var t;return ut(this,(function(n){switch(n.label){case 0:if(!this.translationId)throw new Error("`translationId` is require to delete. Example: ordering.translations(translationId).delete()");return t="/translations/"+this.translationId,[4,this.makeRequest("DELETE",t,void 0,ot,e)];case 1:return[2,n.sent()]}}))}))},t}(O),ct=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lt=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,["created_at","updated_at"])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n,["updated_at","created_at"].includes(t)&&(r[t]=new Date(n))})),r}return ct(t,e),t.prototype.getId=function(){return this.id},t}(h),ft=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},dt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},yt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.pageId=n,r}return ft(t,e),t.prototype.setModelId=function(e){this.pageId=e},t.prototype.get=function(e){return void 0===e&&(e={}),pt(this,void 0,void 0,(function(){var t;return dt(this,(function(n){switch(n.label){case 0:if(this.pageId&&this.conditions)throw new Error("The `where` function is not compatible with pages(pageId). Example ordering.pages().where(contitions).get()");return t="/pages"+(this.pageId?"/"+this.pageId:""),[4,this.makeRequest("GET",t,void 0,lt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),pt(this,void 0,void 0,(function(){var n,r,o,a,i;return dt(this,(function(u){switch(u.label){case 0:return n="/pages"+(this.pageId?"/"+this.pageId:""),[4,this.makeRequest(this.pageId?"PUT":"POST",n,e,lt,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.pageId||(this.pageId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),pt(this,void 0,void 0,(function(){var t;return dt(this,(function(n){switch(n.label){case 0:if(!this.pageId)throw new Error("`pageId` is require to delete. Example: ordering.pages(pageId).delete()");return t="/pages/"+this.pageId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t}(O),ht=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vt=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return ht(t,e),t.prototype.getId=function(){return this.id},t}(h),mt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bt=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return mt(t,e),t.prototype.getId=function(){return this.id},t}(h),gt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ot=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},wt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},jt=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this,t)||this;return o.ordering=t,o.countryId=n,o.cityId=r,o}return gt(t,e),t.prototype.setModelId=function(e){this.cityId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ot(this,void 0,void 0,(function(){var t;return wt(this,(function(n){switch(n.label){case 0:if(!this.countryId)throw new Error("You must provide the `countryId` param. Example ordering.countries(countryId).cities(cityId?).get()");if(this.cityId&&this.conditions)throw new Error("The `where` function is not compatible with countries(countryId).cities(cityId). Example ordering.countries(countryId).cities().where(contitions).get()");return t="/countries/"+this.countryId+"/cities"+(this.cityId?"/"+this.cityId:""),[4,this.makeRequest("GET",t,void 0,bt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ot(this,void 0,void 0,(function(){var n,r,o,a,i;return wt(this,(function(u){switch(u.label){case 0:if(!this.countryId)throw new Error("You must provide the `countryId` param. Example ordering.countries(countryId).cities(cityId?).save(changes)");return n="/countries/"+this.countryId+"/cities"+(this.cityId?"/"+this.cityId:""),[4,this.makeRequest(this.cityId?"PUT":"POST",n,e,bt,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.cityId||(this.cityId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ot(this,void 0,void 0,(function(){var t;return wt(this,(function(n){switch(n.label){case 0:if(!this.countryId)throw new Error("`countryId` is require to delete. Example: ordering.countries(countryId).cities(cityId).delete()");if(!this.cityId)throw new Error("`cityId` is require to delete. Example: ordering.countries(countryId).cities(cityId).delete()");return t="/countries/"+this.countryId+"/cities/"+this.cityId,[4,this.makeRequest("DELETE",t,void 0,void 0,e)];case 1:return[2,n.sent()]}}))}))},t}(O),St=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Et=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Pt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ct=function(e){function t(t,n){var r=e.call(this,t)||this;return r.countryId=n,r}return St(t,e),t.prototype.setModelId=function(e){this.countryId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Et(this,void 0,void 0,(function(){var t;return Pt(this,(function(n){switch(n.label){case 0:if(this.countryId&&this.conditions)throw new Error("The `where` function is not compatible with countries(countryId). Example ordering.countries().where(contitions).get()");return t="/countries"+(this.countryId?"/"+this.countryId:""),[4,this.makeRequest("GET",t,void 0,vt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Et(this,void 0,void 0,(function(){var n,r,o,a,i;return Pt(this,(function(u){switch(u.label){case 0:return n="/countries"+(this.countryId?"/"+this.countryId:""),[4,this.makeRequest(this.countryId?"PUT":"POST",n,e,vt,t)];case 1:return r=u.sent(),o=r.content,a=o.error,i=o.result,a||this.countryId||(this.countryId=i.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Et(this,void 0,void 0,(function(){var t;return Pt(this,(function(n){switch(n.label){case 0:if(!this.countryId)throw new Error("`countryId` is require to delete. Example: ordering.countries(countryId).delete()");return t="/countries/"+this.countryId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.cities=function(e){if(!this.countryId)throw new Error("`countryId` is require to use API cities. Example: ordering.countries(countryId).cities().get()");return new jt(this.ordering,this.countryId,e)},t}(O),It=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xt=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return It(t,e),t.prototype.getId=function(){return this.id},t}(h),At=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},_t=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},kt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.orderOptionId=n,r}return At(t,e),t.prototype.setModelId=function(e){this.orderOptionId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Tt(this,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:if(this.orderOptionId)throw new Error("ordering.orderOptions(orderOptionId).get() is not implemented");if(this.orderOptionId&&this.conditions)throw new Error("The `where` function is not compatible with countries(orderOptionId). Example ordering.orderOptions().where(contitions).get()");return"/order_options",[4,this.makeRequest("GET","/order_options",void 0,xt,e)];case 1:return[2,t.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Tt(this,void 0,void 0,(function(){var n,r,o,a;return _t(this,(function(i){switch(i.label){case 0:return"/order_options",[4,this.makeRequest("PUT","/order_options",e,xt,t)];case 1:return n=i.sent(),r=n.content,o=r.error,a=r.result,o||this.orderOptionId||(this.orderOptionId=a.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Tt(this,void 0,void 0,(function(){var t;return _t(this,(function(n){switch(n.label){case 0:if(this.orderOptionId||!this.orderOptionId)throw new Error("ordering.orderOptions(orderOptionId).delete() is not implemented.");return t="/order_options/"+this.orderOptionId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,n.sent()]}}))}))},t}(O),Dt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ut=function(e){function t(t,n){void 0===t&&(t={}),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return Dt(t,e),t.prototype.getId=function(){return this.id},t}(h),Lt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Ft=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Rt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.cartId=n,r}return Lt(t,e),t.prototype.setModelId=function(e){this.cartId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Bt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){switch(n.label){case 0:if(this.cartId&&this.conditions)throw new Error("The `where` function is not compatible with carts(cartId). Example ordering.carts().where(contitions).get()");return t="/carts"+(this.cartId?"/"+this.cartId:""),[4,this.makeRequest("GET",t,void 0,Ut,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.getBusinesses=function(e){return void 0===e&&(e={}),Bt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){switch(n.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).getBusinesses(options).");return t="/carts/"+this.cartId+"/businesses",[4,this.makeRequest("GET",t,void 0,Ut,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.set=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){var n;return Ft(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirm(options).");return n="/carts/"+this.cartId,[4,this.makeRequest("PUT",n,e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){var e,t,n,r;return Ft(this,(function(o){switch(o.label){case 0:throw new Error("ordering.carts(cartId?).save() is not implemented.");case 1:return e=o.sent(),t=e.content,n=t.error,r=t.result,n||this.cartId||(this.cartId=r.id),[2,e]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(e){switch(e.label){case 0:throw new Error("ordering.carts(cartId).delete() is not implemented.");case 1:return[2,e.sent()]}}))}))},t.prototype.addProduct=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/add_product",[4,this.makeRequest("POST","/carts/add_product",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.removeProduct=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/remove_product",[4,this.makeRequest("POST","/carts/remove_product",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.updateProduct=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/update_product",[4,this.makeRequest("POST","/carts/update_product",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.applyCoupon=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/apply_coupon",[4,this.makeRequest("POST","/carts/apply_coupon",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.changeDriverTip=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/change_driver_tip",[4,this.makeRequest("POST","/carts/change_driver_tip",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.changePaymethod=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){return Ft(this,(function(n){switch(n.label){case 0:return"/carts/change_paymethod",[4,this.makeRequest("POST","/carts/change_paymethod",e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.place=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){var n;return Ft(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).place(data, options).");return n="/carts/"+this.cartId+"/place",[4,this.makeRequest("POST",n,e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.confirm=function(e){return void 0===e&&(e={}),Bt(this,void 0,void 0,(function(){var t;return Ft(this,(function(n){switch(n.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirm(options).");return t="/carts/"+this.cartId+"/confirm",[4,this.makeRequest("POST",t,{},Ut,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.confirmWithData=function(e,t){return void 0===t&&(t={}),Bt(this,void 0,void 0,(function(){var n;return Ft(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirmWithData(data, options).");return n="/carts/"+this.cartId+"/confirm",[4,this.makeRequest("POST",n,e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t}(O),Mt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nt=function(e){function t(t,n){void 0===t&&(t={});var r=e.call(this,t,n,[])||this;return Object.entries(t).map((function(e){var t=e[0],n=e[1];r[t]=n})),r}return Mt(t,e),t}(h),zt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Yt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},qt=function(e){function t(t,n,r,o){void 0===o&&(o=null);var a=e.call(this,t)||this;return a.ordering=t,a.businessId=n,a.userId=r,a.card_id=o,a}return zt(t,e),t.prototype.setModelId=function(e){this.businessId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){var t;return Yt(this,(function(n){switch(n.label){case 0:if(!this.businessId||!this.userId)throw new Error("You must provide the `businessId` and `userId` param. Example ordering.paymentCards(businessId,userId).get()");return t="/payments/stripe/cards?business_id="+this.businessId+"&user_id="+this.userId,[4,this.makeRequest("GET",t,void 0,Nt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Gt(this,void 0,void 0,(function(){return Yt(this,(function(e){switch(e.label){case 0:throw new Error("ordering.paymentCards(businessId,userId).save(card) is not implemented.");case 1:return[2,e.sent()]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){var t;return Yt(this,(function(n){switch(n.label){case 0:if(!this.card_id||!this.businessId||!this.userId)throw new Error("You must provide the `businessId`, `userId`, `cardId` param. Example ordering.paymentCards(businessId,userId,cardId).delete()");return t="/payments/stripe/cards?business_id="+this.businessId+"&user_id="+this.userId+"&card_id="+this.card_id,[4,this.makeRequest("DELETE",t,void 0,Nt,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.getCredentials=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){return Yt(this,(function(t){switch(t.label){case 0:return"/payments/stripe/credentials",[4,this.makeRequest("GET","/payments/stripe/credentials",void 0,Nt,e)];case 1:return[2,t.sent()]}}))}))},t}(O),$t=function(){return $t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$t.apply(this,arguments)},Jt=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},Vt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ht=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Wt=function(){function e(e){var t=void 0===e?{}:e,n=t.url,r=void 0===n?"https://apiv4.ordering.co":n,o=t.version,a=void 0===o?"v400":o,i=t.project,u=void 0===i?"demo":i,s=t.language,c=void 0===s?"en":s,l=t.accessToken,f=void 0===l?null:l,p=t.apiKey,d=void 0===p?null:p,y=t.appId,h=void 0===y?null:y;this.url=r,this.version=a,this.project=u,this.language=c,this.accessToken=f,this.apiKey=d,this.appId=h}return Object.defineProperty(e.prototype,"root",{get:function(){return this.url+"/"+this.version+"/"+this.language+"/"+this.project},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"systemRoot",{get:function(){return this.url+"/"+this.version},enumerable:!1,configurable:!0}),e.prototype.setAccessToken=function(e){return this.accessToken=e,this},e.prototype.setApiKey=function(e){return this.apiKey=e,this},e.prototype.setAppId=function(e){return this.appId=e,this},e.prototype.setUrl=function(e){return this.url=e,this},e.prototype.setProject=function(e){return this.project=e,this},e.prototype.setVersion=function(e){return this.version=e,this},e.prototype.setLanguage=function(e){return this.language=e,this},e.prototype.users=function(e){return void 0===e&&(e=null),new J(this,e)},e.prototype.orders=function(e){return void 0===e&&(e=null),new le(this,e)},e.prototype.controls=function(e){return void 0===e&&(e=null),new ve(this,e)},e.prototype.driversgroups=function(){return new Ke(this)},e.prototype.configs=function(e){return void 0===e&&(e=null),new nt(this,e)},e.prototype.businesses=function(e){return new qe(this,e)},e.prototype.validationFields=function(e){return new Z(this,e)},e.prototype.languages=function(e){return new E(this,e)},e.prototype.translations=function(e){return new st(this,e)},e.prototype.pages=function(e){return new yt(this,e)},e.prototype.countries=function(e){return new Ct(this,e)},e.prototype.orderOptions=function(e){return new kt(this,e)},e.prototype.carts=function(e){return new Rt(this,e)},e.prototype.paymentCards=function(e,t,n){return new qt(this,e,t,n)},e.prototype.system=function(){return new I(this)},e.prototype.getRequestProps=function(e){var t,n=e.system?this.systemRoot:this.root,r=e.query,o=e.mode,a=e.conditions,i=e.headers,u=Ht(e,["query","mode","conditions","headers"]),s=r||{};if(s&&Object.keys(s).length>0)for(var c in s)s[c]="object"==typeof s[c]?JSON.stringify(s[c]):s[c];var l=(null===(t=null==s?void 0:s.params)||void 0===t?void 0:t.split(","))||[];(l=l.concat(e.attributes||[])).length>0&&(s.params=l.join(",")),a&&(s.where="object"==typeof a?JSON.stringify(a):a),o&&(s.mode=e.mode);var f={};return this.accessToken&&!this.apiKey&&(f.Authorization="Bearer "+this.accessToken),this.apiKey&&(f["X-Api-Key"]=this.apiKey),this.appId&&(f["X-APP-X"]=this.appId),[n,$t($t({},u),{params:s||{},headers:Object.assign(f,i||{})})]},e.prototype.makeRequest=function(e,t,n,r){return new Promise((function(o,a){var i=new window.XMLHttpRequest,u=Object.entries(r.params||{}).map((function(e){return e[0]+"="+e[1]})).join("&");i.open(e,t+(u?"?"+u:"")),Object.entries(r.headers||{}).forEach((function(e){i.setRequestHeader(e[0],e[1])})),r.cancelToken&&"object"==typeof r.cancelToken&&(r.cancelToken.cancel=function(){i.abort()}),i.onload=function(){if(this.status<500){var e=r.json?JSON.parse(this.response):this.response;o({request:this,data:e,status:this.status,statusText:this.statusText})}else a(new Error("Internal error"))},i.onerror=function(e){a(e)},r.json?(i.setRequestHeader("Content-Type","application/json"),i.send(n?JSON.stringify(n):null)):i.send()}))},e.prototype.get=function(e,t){return void 0===t&&(t={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var n,r,o,a;return Vt(this,(function(i){switch(i.label){case 0:return n=this.getRequestProps(t),r=n[0],o=n[1],[4,this.makeRequest("GET",r+e,null,o)];case 1:return a=i.sent(),[2,new f(a,t,t.api)]}}))}))},e.prototype.post=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var r,o,a,i,u;return Vt(this,(function(s){switch(s.label){case 0:if(r=this.getRequestProps(n),o=r[0],a=r[1],n.json)for(i in t)null!==t[i]&&"object"==typeof t[i]&&(t[i]=JSON.stringify(t[i]));return[4,this.makeRequest("POST",o+e,t,a)];case 1:return u=s.sent(),[2,new f(u,n,n.api)]}}))}))},e.prototype.put=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var r,o,a,i,u;return Vt(this,(function(s){switch(s.label){case 0:if(r=this.getRequestProps(n),o=r[0],a=r[1],n.json)for(i in t)null!==t[i]&&"object"==typeof t[i]&&(t[i]=JSON.stringify(t[i]));return[4,this.makeRequest("PUT",o+e,t,a)];case 1:return u=s.sent(),[2,new f(u,n,n.api)]}}))}))},e.prototype.delete=function(e,t){return void 0===t&&(t={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var n,r,o,a;return Vt(this,(function(i){switch(i.label){case 0:return n=this.getRequestProps(t),r=n[0],o=n[1],[4,this.makeRequest("DELETE",r+e,null,o)];case 1:return a=i.sent(),[2,new f(a,t,t.api)]}}))}))},e}();function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return en(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return en(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tn=Object(i.createContext)(),nn=function(e){var t=e.settings,n=e.children,r=Qt(Object(i.useState)(Object.assign(t.api,{project:t.project,appId:t.app_id})),2),o=r[0],a=r[1],s=Qt(Object(i.useState)(new Wt(o)),2),c=s[0],l=s[1],f=Qt(Object(i.useState)(t.api.language),2),p=f[0],d=f[1];Object(i.useEffect)((function(){a(Object.assign(t.api,{project:t.project,appId:t.app_id})),l(new Wt(Object.assign(t.api,{project:t.project,appId:t.app_id})))}),[t]),Object(i.useEffect)((function(){if(c.language!==p){var e=new Wt(Xt(Xt({},o),{},{language:p}));l(e)}}),[p]);var y={setLanguage:function(e){e!==p&&d(e)}};return u.a.createElement(tn.Provider,{value:[c,y]},n)},rn=function(){return Object(i.useContext)(tn)||[{}]};function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sn(a,r,o,i,u,"next",e)}function u(e){sn(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pn=Object(i.createContext)(),dn=function(e){var t=e.children,n=e.strategy,r=ln(rn(),1)[0],o=ln(Object(i.useState)({auth:null,token:null,user:null,loading:!0}),2),s=o[0],c=o[1],l=function(){var e=cn(a.a.mark((function e(){var t,n,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:if(t=e.sent,n=t.auth,o=t.token,i=t.user,!o){e.next=12;break}return u={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=10,fetch("".concat(r.root,"/order_options"),u);case 10:e.sent.ok||d();case 12:c(an(an({},s),{},{auth:n,token:o,user:i,loading:!1}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=cn(a.a.mark((function e(){var t,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getItem("token");case 2:return t=e.sent,e.next=5,n.getItem("token");case 5:return r=e.sent,e.next=8,n.getItem("project");case 8:return o=e.sent,e.next=11,n.getItem("user",!0);case 11:return i=e.sent,e.abrupt("return",{auth:t,token:r,project:o,user:i});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=cn(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setItem("token",t.token);case 2:return e.next=4,n.setItem("user",t.user,!0);case 4:return e.next=6,n.setItem("project",t.project);case 6:c(an(an({},s),{},{auth:!0,user:t.user,token:t.token,loading:!1}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=cn(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.removeItem("token");case 2:return e.next=4,n.removeItem("user");case 4:return e.next=6,n.removeItem("project");case 6:c(an(an({},s),{},{auth:!1,user:null,token:null,loading:!1}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=cn(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setItem("user",t,!0);case 2:c(an(an({},s),{},{user:t,loading:!1}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=cn(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:t=e.sent,n=t.token,r=t.project,o=t.user,n&&!s.token&&p({user:o,token:n,project:r}),!n&&s.token&&d();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=setInterval((function(){h()}),1e3);return function(){return clearInterval(e)}}),[s]),Object(i.useEffect)((function(){l()}),[]);var v={login:p,logout:d,changeUser:y};return u.a.createElement(pn.Provider,{value:[s,v]},t)},yn=function(){return Object(i.useContext)(pn)||[{},function(){}]},hn=n(32),vn=n.n(hn);function mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var bn=function(){function e(t){var n=t.url,r=t.project,o=t.accessToken;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=n,this.project=r,this.accessToken=o,this.queue=[]}var t,n,r;return t=e,n=[{key:"connect",value:function(){var e=this;this.socket=vn()(this.url,{extraHeaders:{Authorization:"Bearer ".concat(this.accessToken)},query:"token=".concat(this.accessToken,"&project=").concat(this.project),transports:["websocket"]}),this.socket.on("connect",(function(){for(var t;void 0!==(t=e.queue.shift());)"on"===t.action?e.on(t.event,t.func):"join"===t.action?e.join(t.room):"leave"===t.action?e.leave(t.room):"off"===t.action&&e.off(t.room)}))}},{key:"getId",value:function(){var e;return null===(e=this.socket)||void 0===e?void 0:e.id}},{key:"close",value:function(){var e;null!==(e=this.socket)&&void 0!==e&&e.connected&&this.socket.close()}},{key:"join",value:function(e){var t;return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.emit("join","".concat(this.project,"_").concat(e)):this.queue.push({action:"join",room:e}),this}},{key:"leave",value:function(e){var t;return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.emit("leave","".concat(this.project,"_").concat(e)):this.queue.push({action:"leave",room:e}),this}},{key:"on",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.on(e,n):this.queue.push({action:"on",event:e,func:n}),this}},{key:"off",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.off(e,n):this.queue.push({action:"off",event:e,func:n}),this}}],n&&mn(t.prototype,n),r&&mn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var En=Object(i.createContext)(),Pn=function(e){var t=e.settings,n=e.children,r=jn(yn(),1)[0],o=jn(Object(i.useState)(),2),a=o[0],s=o[1];return Object(i.useEffect)((function(){if(!r.loading){if(r.auth&&t.url&&t.project){var e=new bn(On(On({},t),{},{accessToken:r.token}));s(e)}r.auth||a&&a.close()}}),[r]),Object(i.useEffect)((function(){return a&&a.connect(),function(){a&&a.close()}}),[a]),u.a.createElement(En.Provider,{value:a},n)},Cn=function(){return Object(i.useContext)(En)||new bn({})};function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){An(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function _n(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Tn(a,r,o,i,u,"next",e)}function u(e){Tn(a,r,o,i,u,"throw",e)}i(void 0)}))}}function kn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Un=Object(i.createContext)(),Ln=function(e){var t,n=e.children,r=e.strategy,o=kn(Object(i.useState)({loading:!0,dictionary:{},languageList:[]}),2),s=o[0],c=o[1],l=function(){var e=_n(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getItem("language",!0);case 2:(t=e.sent)&&(c((function(e){return xn(xn({},e),{},{language:t})})),d.setLanguage(null==t?void 0:t.code));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=kn(rn(),2),p=f[0],d=f[1],y=function(){var e=_n(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,!s.loading&&c(xn(xn({},s),{},{loading:!0})),e.next=4,p.translations().asDictionary().get();case 4:t=e.sent,n=t.content,r=n.error,o=n.result,c((function(e){return xn(xn({},e),{},{loading:!1,dictionary:r?{}:o})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c((function(e){return xn(xn({},e),{},{loading:!1})}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=_n(a.a.mark((function e(t){var n,o,i,u,l,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.id!==(null===(n=s.language)||void 0===n?void 0:n.id)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,p.languages(t.id).save({default:!0});case 5:if(o=e.sent,i=o.content,u=i.error,l=i.result,u){e.next=16;break}return f={id:l.id,code:l.code,rtl:l.rtl},e.next=13,r.setItem("language",f,!0);case 13:y=s.languageList.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0})),c(xn(xn({},s),{},{language:f,languageList:y})),d.setLanguage(null==t?void 0:t.code);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),c(xn(xn({},s),{},{loading:!1}));case 21:location.reload();case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=_n(a.a.mark((function e(){var t,n,o,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(xn(xn({},s),{},{loading:!0})),e.next=4,p.languages().get();case 4:if(t=e.sent,n=t.content,o=n.error,i=n.result,o){e.next=15;break}return u=i.find((function(e){return e.default})),l={id:u.id,code:u.code,rtl:u.rtl},e.next=13,r.setItem("language",l,!0);case 13:d.setLanguage(null==l?void 0:l.code),c((function(e){return xn(xn({},e),{},{loading:!1,language:l,languageList:i})}));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),c(xn(xn({},s),{},{loading:!1}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e,t;null!=p&&p.project&&null!==(e=s.language)&&void 0!==e&&e.code&&(null===(t=s.language)||void 0===t?void 0:t.code)===p.language&&y()}),[null===(t=s.language)||void 0===t?void 0:t.code,null==p?void 0:p.project,p.language]),Object(i.useEffect)((function(){l(),null!=p&&p.project&&v()}),[null==p?void 0:p.language,null==p?void 0:p.project]);var m={setLanguage:h,updateLanguageListState:function(e){var t=s.languageList.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));c(xn(xn({},s),{},{languageList:t}))},refreshTranslations:y};return u.a.createElement(Un.Provider,{value:[s,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(null==s?void 0:s.dictionary)&&Object.keys(null==s?void 0:s.dictionary).length>0&&s.dictionary[e]||t||e},m]},n)},Bn=function(){return Object(i.useContext)(Un)||[{},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t||e},_n(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),_n(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))]};function Fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Rn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._events={}}var t,n,r;return t=e,n=[{key:"on",value:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)}},{key:"off",value:function(e,t){this._events[e]&&(this._events[e]=this._events[e].filter((function(e){return e!==t})))}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this._events[e]){var o=function(e){e.apply(void 0,n)};this._events[e].forEach(o)}}}],n&&Fn(t.prototype,n),r&&Fn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Mn=Object(i.createContext)(),Nn=function(e){var t=e.children,n=new Rn;return u.a.createElement(Mn.Provider,{value:[n]},t)},zn=function(){return Object(i.useContext)(Mn)||[new Rn]},Gn=n(3),Yn=n.n(Gn),qn=n(4),$n=n.n(qn);function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Kn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Wn(a,r,o,i,u,"next",e)}function u(e){Wn(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yn.a.extend($n.a);var Qn=Object(i.createContext)(),er=function(e){var t=e.children,n=Xn(Object(i.useState)({loading:!0,configs:{}}),2),r=n[0],o=n[1],s=Xn(Bn(),1)[0],c=Xn(rn(),1)[0],l=Xn(yn(),1)[0].token,f={max_days_preorder:{key:"max_days_preorder",value:6},meters_to_change_address:{key:"meters_to_change_address",value:500},default_order_type:{key:"default_order_type",value:"delivery"},order_types_allowed:{key:"order_types_allowed",value:"1|2|3|4|5"},google_autocomplete_selection_required:{key:"google_autocomplete_selection_required",value:"true"},google_maps_api_key:{key:"google_maps_api_key",value:"AIzaSyDX5giPfK-mtbLR72qxzevCYSUrbi832Sk"},country_autocomplete:{key:"country_autocomplete",value:"*"},track_id_google_analytics:{key:"track_id_google_analytics",value:"UA-51635411-4"}},p=function(){var e=Kn(a.a.mark((function e(){var t,n,i,u,s,p,d,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r.loading&&o(Vn(Vn({},r),{},{loading:!0})),!l){e.next=8;break}return e.next=5,c.setAccessToken(l).configs().asDictionary().get();case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,c.configs().asDictionary().get();case 10:e.t0=e.sent;case 11:return i=e.t0,u=i.content,s=u.error,p=u.result,d=null,e.prev=16,e.next=19,fetch("https://ipapi.co/json/");case 19:return y=e.sent,e.next=22,y.json();case 22:d=e.sent,e.next=28;break;case 25:e.prev=25,e.t1=e.catch(16),d=null;case 28:h=Vn(Vn({},f),{},{default_country_code:{value:d&&(null===(t=d)||void 0===t?void 0:t.country_code)||"US",calling_number:d&&(null===(n=d)||void 0===n?void 0:n.country_calling_code)||"+1"}},p),o((function(e){return Vn(Vn({},e),{},{loading:!1,configs:s?{}:l?h:Vn(Vn({},e.configs),h)})})),e.next=35;break;case 32:e.prev=32,e.t2=e.catch(0),o(Vn(Vn({},r),{},{loading:!1}));case 35:case"end":return e.stop()}}),e,null,[[0,32],[16,25]])})));return function(){return e.apply(this,arguments)}}(),d={refreshConfigs:p};return Object(i.useEffect)((function(){null!=c&&c.project?s.loading||p():o({loading:!0,configs:{}})}),[s.loading,null==c?void 0:c.project,l]),u.a.createElement(Qn.Provider,{value:[r,d]},t)},tr=function(){return Object(i.useContext)(Qn)||[{},Kn(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))]},nr=["carts"],rr=["carts"],or=["carts"];function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function ir(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(n),!0).forEach((function(t){cr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function fr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){lr(a,r,o,i,u,"next",e)}function u(e){lr(a,r,o,i,u,"throw",e)}i(void 0)}))}}function pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yn.a.extend($n.a);var yr=Object(i.createContext)(),hr=function(e){var t,n,r=e.Alert,o=e.children,s=e.strategy,c=pr(Object(i.useState)({show:!1}),2),l=c[0],f=c[1],p=pr(Object(i.useState)({show:!1}),2),d=p[0],y=p[1],h=pr(rn(),1)[0],v=pr(Bn(),2),m=v[0],b=v[1],g=Cn(),O=pr(zn(),1)[0],w=pr(tr(),1)[0],j=pr(yn(),2),S=j[0],E=j[1].logout,P={delivery:1,pickup:2,eatin:3,curbside:4,drivethru:5},C=pr(Object(i.useState)({loading:!0,options:{type:P[null==w||null===(t=w.configs)||void 0===t||null===(n=t.default_order_type)||void 0===n?void 0:n.value],moment:null},carts:{},confirmAlert:l,alert:d}),2),I=C[0],x=C[1],A=function(){var e=fr(a.a.mark((function e(){var t,n,r,o,i,u,c,l,f,p,d,v,m,b,g,O,w,j,P,C,A,T,_;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I.loading||x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return r=e.sent,o=null==r?void 0:r.id,i={},o&&(i.query={user_id:o}),e.next=10,h.setAccessToken(S.token).orderOptions().get(i);case 10:return u=e.sent,c=null==u||null===(t=u.content)||void 0===t?void 0:t.error,l=null==u||null===(n=u.content)||void 0===n?void 0:n.result,c||(f=l.carts,p=ir(l,nr),I.carts={},f.forEach((function(e){I.carts["businessId:".concat(e.business_id)]=e})),I.options=sr(sr({},I.options),p)),c&&(y({show:!0,content:l}),401===(null==u?void 0:u.status)&&S.auth&&E()),e.next=17,s.getItem("options",!0);case 17:if(!(d=e.sent)){e.next=49;break}if(v={},!(Object.keys(d.address).length>0)){e.next=41;break}return b=[{attribute:"address",value:null==d||null===(m=d.address)||void 0===m?void 0:m.address}],g=o||S.user.id,e.next=25,h.setAccessToken(S.token).users(g).addresses().where(b).get();case 25:if(O=e.sent,w=O.content.result.find((function(e){var t,n,r;return d.address.internal_number=(null===(t=d.address)||void 0===t?void 0:t.internal_number)||null,d.address.zipcode=(null===(n=d.address)||void 0===n?void 0:n.zipcode)||null,d.address.address_notes=(null===(r=d.address)||void 0===r?void 0:r.address_notes)||null,e.location.lat===d.address.location.lat&&e.location.lng===d.address.location.lng&&e.internal_number===d.address.internal_number&&e.zipcode===d.address.zipcode&&e.address_notes===d.address.address_notes}))){e.next=38;break}return Object.keys(d.address).forEach((function(e){return null===d.address[e]&&delete d.address[e]})),e.next=31,h.setAccessToken(S.token).users(g).addresses().save(d.address);case 31:j=e.sent,P=j.content,C=P.error,A=P.result,C||(w=A),e.next=40;break;case 38:return e.next=40,h.setAccessToken(S.token).users(g).addresses(w.id).save({default:!0});case 40:w&&(v.address_id=w.id);case 41:return d.type&&(v.type=d.type),d.moment&&(v.moment=Yn.a.utc(d.moment,"YYYY-MM-DD HH:mm:ss").unix()),null!=d&&d.address_id&&(v.address_id=null==d?void 0:d.address_id),v&&Object.keys(v).length>0?U(v):x(sr(sr({},I),{},{loading:!1})),e.next=47,s.removeItem("options");case 47:e.next=50;break;case 49:x(sr(sr({},I),{},{loading:!1}));case 50:e.next=57;break;case 52:e.prev=52,e.t0=e.catch(0),_=null!==e.t0&&void 0!==e.t0&&null!==(T=e.t0.message)&&void 0!==T&&T.includes("Internal error")?"INTERNAL_ERROR":e.t0.message,y({show:!0,content:[_]}),x(sr(sr({},I),{},{loading:!1}));case 57:case"end":return e.stop()}}),e,null,[[0,52]])})));return function(){return e.apply(this,arguments)}}(),T=function(e){var t=[];return["address","address_notes","zipcode","location","internal_number"].forEach((function(n){var r,o,a,i,u;null!==(r=I.options)&&void 0!==r&&r.address&&null!==(o=I.options)&&void 0!==o&&o.address[n]?"location"===n?t.push(e[n].lat===(null===(a=I.options)||void 0===a?void 0:a.address[n].lat)&&e[n].lng===(null===(i=I.options)||void 0===i?void 0:i.address[n].lng)):t.push(e[n]===(null===(u=I.options)||void 0===u?void 0:u.address[n])):t.push(!e[n])})),t.every((function(e){return e}))},_=function(){var e=fr(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"!==ar(t)){e.next=9;break}return e.next=3,s.getItem("options",!0);case 3:return r=e.sent,o=sr(sr(sr({},I.options),r),{},{address:sr(sr({},null==r?void 0:r.address),t)}),e.next=7,s.setItem("options",o,!0);case 7:return x(sr(sr({},I),{},{options:o})),e.abrupt("return");case 9:if(!n||null==n||!n.address||T(null==n?void 0:n.address)){e.next=12;break}return U({address_id:null==n||null===(i=n.address)||void 0===i?void 0:i.id}),e.abrupt("return");case 12:if(!n||null==n||!n.isEdit){e.next=17;break}if(t===I.options.address_id){e.next=15;break}return e.abrupt("return");case 15:return U({address_id:t}),e.abrupt("return");case 17:U({address_id:t});case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=fr(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=sr(sr({},I.options),{},{type:t}),I.options.type!==t){e.next=3;break}return e.abrupt("return");case 3:if(S.auth){e.next=7;break}return e.next=6,s.setItem("options",n,!0);case 6:x(sr(sr({},I),{},{options:n}));case 7:U({type:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=fr(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t?t.getTime()/1e3:null,r=n?Yn.a.unix(n).utc().format("YYYY-MM-DD HH:mm:ss"):null,o=sr(sr({},I.options),{},{moment:r}),I.options.moment!==r){e.next=5;break}return e.abrupt("return");case 5:if(S.auth){e.next=9;break}return e.next=8,s.setItem("options",o,!0);case 8:x(sr(sr({},I),{},{options:o}));case 9:U({moment:n});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l,f,p,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S.auth){e.next=25;break}return e.next=3,s.getItem("user-customer",!0);case 3:return n=e.sent,r=null==n?void 0:n.id,o=sr(sr({},t),{},{user_id:r||S.user.id}),e.prev=6,x(sr(sr({},I),{},{loading:!0})),e.next=10,h.setAccessToken(S.token).orderOptions().save(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 10:return i=e.sent,u=i.content,c=u.error,l=u.result,c?y({show:!0,content:l}):(f=l.carts,p=ir(l,rr),I.carts={},f.forEach((function(e){I.carts["businessId:".concat(e.business_id)]=e})),I.options=sr(sr({},I.options),p)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 19:return e.prev=19,e.t0=e.catch(6),v=null!==e.t0&&void 0!==e.t0&&null!==(d=e.t0.message)&&void 0!==d&&d.includes("Internal error")?"INTERNAL_ERROR":e.t0.message,y({show:!0,content:[v]}),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o={product:t,user_id:r||S.user.id},e.next=9,h.setAccessToken(S.token).carts().addProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=e.sent,u=i.content,c=u.error,l=u.result,c?y({show:!0,content:l}):(I.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_product_added",t,l),O.emit("cart_updated",l),O.emit("product_added",t)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 18:return e.prev=18,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o={product:{id:t.id,code:t.code,business_id:t.business_id},user_id:r||S.user.id},e.next=9,h.setAccessToken(S.token).carts().removeProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=e.sent,u=i.content,c=u.error,l=u.result,c?y({show:!0,content:l}):(I.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_product_removed",t,l),O.emit("cart_updated",l)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 18:return e.prev=18,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o=JSON.stringify({uuid:t,user_id:r||S.user.id}),e.next=9,fetch("".concat(h.root,"/carts/clear"),{method:"POST",headers:{"Content-Type":"application/json","X-Socket-Id-X":null==g?void 0:g.getId(),Authorization:"Bearer ".concat(S.token)},body:o});case 9:return i=e.sent,e.next=12,i.json();case 12:return u=e.sent,c=u.error,l=u.result,c?y({show:!0,content:l}):I.carts["businessId:".concat(l.business_id)]=l,x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 20:return e.prev=20,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o={product:t,user_id:r||S.user.id},e.next=9,h.setAccessToken(S.token).carts().updateProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=e.sent,u=i.content,c=u.error,l=u.result,c?y({show:!0,content:l}):(I.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_product_updated",t,l),O.emit("cart_updated",l)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!c);case 18:return e.prev=18,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.business_id){e.next=2;break}throw new Error("`business_id` is required.");case 2:if(void 0!==t.coupon){e.next=4;break}throw new Error("`coupon` is required.");case 4:if((null===(n=I.carts["businessId:".concat(t.business_id)])||void 0===n?void 0:n.coupon)!==t.coupon){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,x(sr(sr({},I),{},{loading:!0})),e.next=10,s.getItem("user-customer",!0);case 10:return r=e.sent,o=null==r?void 0:r.id,i={business_id:t.business_id,coupon:t.coupon,user_id:o||S.user.id},e.next=15,h.setAccessToken(S.token).carts().applyCoupon(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 15:return u=e.sent,c=u.content,l=c.error,f=c.result,l?y({show:!0,content:f}):(I.carts["businessId:".concat(f.business_id)]=f,O.emit("cart_updated",f)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!l);case 24:return e.prev=24,e.t0=e.catch(6),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,null,[[6,24]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=fr(a.a.mark((function e(t,n){var r,o,i,u,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("`businessId` is required.");case 2:if(n||0===n){e.next=4;break}throw new Error("`driverTipRate` is required.");case 4:if(I.carts["businessId:".concat(t)]&&(null===(r=I.carts["businessId:".concat(t)])||void 0===r?void 0:r.driver_tip_rate)!==n){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,x(sr(sr({},I),{},{loading:!0})),e.next=10,s.getItem("user-customer",!0);case 10:return o=e.sent,i=null==o?void 0:o.id,u={business_id:t,driver_tip_rate:n,user_id:i||S.user.id},e.next=15,h.setAccessToken(S.token).carts().changeDriverTip(u,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 15:return c=e.sent,l=c.content,f=l.error,p=l.result,f?y({show:!0,content:p}):(I.carts["businessId:".concat(p.business_id)]=p,O.emit("cart_updated",p)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!f);case 24:return e.prev=24,e.t0=e.catch(6),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,null,[[6,24]])})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=fr(a.a.mark((function e(t,n){var r,o,i,u,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return r=e.sent,o=null==r?void 0:r.id,i=sr(sr({},n),{},{user_id:o||S.user.id}),e.next=9,h.setAccessToken(S.token).carts(t).place(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:if(u=e.sent,c=u.content,l=c.error,f=c.result,l){e.next=17;break}1!==f.status?(I.carts["businessId:".concat(f.business_id)]=f,O.emit("cart_updated",f)):(delete I.carts["businessId:".concat(f.business_id)],p={id:f.order.uuid,business:{name:f.business.name},total:f.total,tax_total:f.tax,delivery_zone_price:f.delivery_price},O.emit("order_placed",p)),e.next=20;break;case 17:return y({show:!0,content:f}),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return");case 20:return x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:l,result:f});case 24:return e.prev=24,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:!0,result:[e.t0.message]});case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=fr(a.a.mark((function e(t,n){var r,o,i,u,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return r=e.sent,o=null==r?void 0:r.id,i=sr(sr({},n),{},{user_id:o||S.user.id}),e.next=9,h.setAccessToken(S.token).carts(t).confirm(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return u=e.sent,c=u.content,l=c.error,f=c.result,p=c.cart,l?p&&(I.carts["businessId:".concat(p.business_id)]=p,O.emit("cart_updated",p)):1!==f.status?(I.carts["businessId:".concat(f.business_id)]=f,O.emit("cart_updated",f)):delete I.carts["businessId:".concat(f.business_id)],x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:l,result:f});case 19:return e.prev=19,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:!0,result:[e.t0.message]});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=fr(a.a.mark((function e(t){var n,r,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(sr(sr({},I),{},{loading:!0})),e.next=4,s.getItem("user-customer",!0);case 4:return n=e.sent,r=null==n?void 0:n.id,o={headers:{"X-Socket-Id-X":null==g?void 0:g.getId()},query:{user_id:r||S.user.id}},e.next=9,h.setAccessToken(S.token).orders(t).reorder(o);case 9:return i=e.sent,u=i.content,c=u.error,l=u.result,c?y({show:!0,content:l}):(I.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_added",l)),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:c,result:l});case 18:return e.prev=18,e.t0=e.catch(0),x(sr(sr({},I),{},{loading:!1})),e.abrupt("return",{error:!0,result:[e.t0.message]});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),q=pr(Object(i.useState)(null),2),$=q[0],J=q[1],V=function(){var e=fr(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getItem("options",!0);case 2:t=e.sent,J(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){S.loading||m.loading||S.auth&&A()}),[S.auth,S.loading,m.loading]),Object(i.useEffect)((function(){var e,t;S.loading||w.loading||(S.auth||(V(),x(sr(sr({},I),{},{loading:!1,options:{type:(null==$?void 0:$.type)||P[null==w||null===(e=w.configs)||void 0===e||null===(t=e.default_order_type)||void 0===t?void 0:t.value],moment:(null==$?void 0:$.moment)||null,address:(null==$?void 0:$.address)||{}}}))))}),[S.auth,S.loading,w]),Object(i.useEffect)((function(){var e=function(e){1===e.status?I.carts["businessId:".concat(e.business_id)]&&delete I.carts["businessId:".concat(e.business_id)]:I.carts["businessId:".concat(e.business_id)]=sr(sr({},I.carts["businessId:".concat(e.business_id)]),e),x(sr({},I))},t=function(e){var t=e.carts,n=ir(e,or),r={};t.forEach((function(e){r["businessId:".concat(e.business_id)]=e}));var o=sr(sr({},I),{},{options:sr(sr({},I.options),n),carts:sr(sr({},I.carts),r)});x(sr({},o))};return g.on("carts_update",e),g.on("order_options_update",t),function(){g.off("carts_update",e),g.off("order_options_update",t)}}),[I,g]),Object(i.useEffect)((function(){var e,t;if(S.auth&&!S.loading)return g.join("carts_".concat(null==S||null===(e=S.user)||void 0===e?void 0:e.id)),g.join("orderoptions_".concat(null==S||null===(t=S.user)||void 0===t?void 0:t.id)),function(){var e,t;g.leave("carts_".concat(null==S||null===(e=S.user)||void 0===e?void 0:e.id)),g.leave("orderoptions_".concat(null==S||null===(t=S.user)||void 0===t?void 0:t.id))}}),[g,S]);var H={refreshOrderOptions:A,changeAddress:_,changeType:k,changeMoment:D,addProduct:L,removeProduct:B,updateProduct:R,clearCart:F,applyCoupon:M,changeDriverTip:N,placeCart:z,confirmCart:G,reorder:Y,setAlert:y,setConfirm:f},W=JSON.parse(JSON.stringify(I));return u.a.createElement(yr.Provider,{value:[W,H]},r&&u.a.createElement(r,{open:d.show,title:b("ERROR","Error"),onAccept:function(){return y({show:!1})},onClose:function(){return y({show:!1})},content:d.content}),o)},vr=function(){var e=function(){console.warn("Must use OrderProvider to wrappe the app.")};return Object(i.useContext)(yr)||[{},{refreshOrderOptions:e,changeAddress:e,changeType:e,changeMoment:e,addProduct:e,removeProduct:e,updateProduct:e,clearCart:e,applyCoupon:e,placeCart:e,confirmCart:e,setAlert:e,setConfirm:e,changeDriverTip:e,reorder:e}]},mr=n(33),br=n.n(mr),gr=n(34),Or=n.n(gr);function wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yn.a.extend($n.a),Yn.a.extend(br.a),Yn.a.extend(Or.a);var Sr=Object(i.createContext)(),Er=function(e){var t=e.children,n=wr(Bn(),2),r=n[0],o=n[1],a=wr(tr(),1)[0],s=function(e){var t,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=parseFloat(e)||0;var i={decimal:(null==o?void 0:o.decimal)||(null===(t=a.configs.format_number_decimal_length)||void 0===t?void 0:t.value)||2,separator:(null==o?void 0:o.separator)||(null===(n=a.configs.format_number_decimal_separator)||void 0===n?void 0:n.value)||",",thousand:(null==o?void 0:o.thousand)||(null===(r=a.configs.format_number_thousand_separator)||void 0===r?void 0:r.value)||"."},u=e.toFixed(i.decimal);(u=u.toString()).indexOf(".")?u=u.replace(".",i.separator):u.indexOf(",")&&(u=u.replace(",",i.separator));var s=u.split(i.separator);return"space"===i.thousand&&(i.thousand=" "),s[0]=s[0].replace(/(.)(?=(\d{3})+$)/g,"$1"+i.thousand),u=s.join(i.separator)},c=function(e){return e>=1e9?"".concat((e/1e9).toFixed(1).replace(/\.0$/,"")).concat(o("G","G")):e>=1e6?"".concat((e/1e6).toFixed(1).replace(/\.0$/,"")).concat(o("M","M")):e>=1e3?"".concat((e/1e3).toFixed(1).replace(/\.0$/,"")).concat(o("K","K")):void 0},l={parsePrice:function(e){var t,n,r,o,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c={decimal:(null==u?void 0:u.decimal)||(null===(t=a.configs.format_number_decimal_length)||void 0===t?void 0:t.value)||2,separator:(null==u?void 0:u.separator)||(null===(n=a.configs.format_number_decimal_separator)||void 0===n?void 0:n.value)||",",thousand:(null==u?void 0:u.thousand)||(null===(r=a.configs.format_number_thousand_separator)||void 0===r?void 0:r.value)||".",currency:(null==u?void 0:u.currency)||(null===(o=a.configs.format_number_currency)||void 0===o?void 0:o.value)||"$",currencyPosition:(null==u?void 0:u.currencyPosition)||(null===(i=a.configs.currency_position)||void 0===i?void 0:i.value)||"left"},l=s(e,c);return l="left"===c.currencyPosition?c.currency+" "+l:l+" "+c.currency},parseNumber:s,parseDate:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(null==n?void 0:n.formatTime)||(null===(t=a.configs.format_time)||void 0===t?void 0:t.value)||"24",i={inputFormat:(null==n?void 0:n.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],outputFormat:(null==n?void 0:n.outputFormat)||("24"===r?"YYYY-MM-DD HH:mm":"YYYY-MM-DD hh:mm A"),utc:"boolean"!=typeof(null==n?void 0:n.utc)||(null==n?void 0:n.utc)};if(!Yn()(e,i.inputFormat).isValid())return o("INVALID_FORMAT","invalid format");var u=i.utc?Yn.a.utc(e,i.inputFormat).local():Yn()(e,i.inputFormat);return u.format(i.outputFormat)},parseTime:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"00:00";var r=(null==n?void 0:n.formatTime)||(null===(t=a.configs.format_time)||void 0===t?void 0:t.value)||"24",i={inputFormat:(null==n?void 0:n.inputFormat)||["HH:mm","hh:mm A","hh:mm"],outputFormat:(null==n?void 0:n.outputFormat)||("24"===r?"HH:mm":"hh:mm A"),utc:"boolean"!=typeof(null==n?void 0:n.utc)||(null==n?void 0:n.utc)};if(!Yn()(e,i.inputFormat).isValid())return o("INVALID_FORMAT","invalid format");var u=i.utc?Yn.a.utc(e,i.inputFormat).local():Yn()(e,i.inputFormat);return u.format(i.outputFormat)},parseDistance:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=parseFloat(e)||0;var i,u=(null==r?void 0:r.unit)||"KM";("1"===(null===(t=a.configs.distance_unit_km)||void 0===t?void 0:t.value)&&(u="KM"),null!==(n=a.configs.distance_unit)&&void 0!==n&&n.value)&&(u=null===(i=a.configs.distance_unit)||void 0===i?void 0:i.value);if("MI"===u.toUpperCase()){var l=1.621371*e;return l>=1e3?"".concat(c(l)," ").concat(o("MI","mi")):"".concat(s(l,r)," ").concat(o("MI","mi"))}return e>=1e3?"".concat(c(e)," ").concat(o("KM","km")):"".concat(s(e,r)," ").concat(o("KM","km"))},parseShortenDistance:c,getTimeAgo:function(e,t){if(!e)return"NN";var n={inputFormat:(null==t?void 0:t.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],utc:"boolean"!=typeof(null==t?void 0:t.utc)||(null==t?void 0:t.utc)};return Yn()(e,n.inputFormat).isValid()?(n.utc?Yn.a.utc(e,n.inputFormat).local():Yn()(e,n.inputFormat)).fromNow():o("INVALID_FORMAT","invalid format")},getTimeTo:function(e,t){if(!e)return"NN";var n={inputFormat:(null==t?void 0:t.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],utc:"boolean"!=typeof(null==t?void 0:t.utc)||(null==t?void 0:t.utc)};return Yn()(e,n.inputFormat).isValid()?(n.utc?Yn.a.utc(e,n.inputFormat).local():Yn()(e,n.inputFormat)).toNow():o("INVALID_FORMAT","invalid format")},optimizeImage:function(e,t,n){if(!e&&n)return n;if(t=t&&t.length>0?",".concat(t):"",null!=e&&-1!==e.indexOf("res.cloudinary.com")){var r=e.split("upload");e="".concat(r[0],"upload/f_auto,q_auto").concat(t).concat(r[1])}return e},getOrderState:function(e){switch(e){case 0:return o("PENDING","Pending");case 1:return o("COMPLETED_BY_ADMIN","Completed by admin");case 2:return o("REJECTED_BY_ADMIN","Rejected by admin");case 3:return o("ORDER_STATUS_IN_BUSINESS","Driver arrived to business");case 4:return o("PREPARATION_COMPLETED","Preparation Completed");case 5:return o("REJECTED_BY_BUSINESS","Rejected by business");case 6:return o("REJECTED_BY_DRIVER","Rejected by driver");case 7:return o("ACCEPTED_BY_BUSINESS","Accepted by business");case 8:return o("ACCEPTED_BY_DRIVER","Accepted by driver");case 9:return o("PICK_UP_COMPLETED_BY_DRIVER","Pick up completed by driver");case 10:return o("PICK_UP_FAILED_BY_DRIVER","Pick up Failed by driver");case 11:return o("DELIVERY_COMPLETED_BY_DRIVER","Delivery completed by driver");case 12:return o("DELIVERY_FAILED_BY_DRIVER","Delivery Failed by driver");case 13:return o("PREORDER","Preorder");case 14:return o("ORDER_NOT_READY","Order not ready");case 15:return o("ORDER_PICKEDUP_COMPLETED_BY_CUSTOMER","Pickup completed by customer");case 16:return o("ORDER_STATUS_CANCELLED_BY_CUSTOMER","Cancelled by customer");case 17:return o("ORDER_NOT_PICKEDUP_BY_CUSTOMER","Not picked by customer");case 18:return o("ORDER_DRIVER_ALMOST_ARRIVED_BUSINESS","Driver almost arrived to business");case 19:return o("ORDER_DRIVER_ALMOST_ARRIVED_CUSTOMER","Driver almost arrived to customer");case 20:return o("ORDER_CUSTOMER_ALMOST_ARRIVED_BUSINESS","Customer almost arrived to business");case 21:return o("ORDER_CUSTOMER_ARRIVED_BUSINESS","Customer arrived to business");case 22:return o("ORDER_LOOKING_FOR_DRIVER","Looking for driver");case 23:return o("ORDER_DRIVER_ON_WAY","Driver on way");default:return"N/A"}}};return Object(i.useEffect)((function(){var e;r.loading||(e={name:"auto",weekdays:[o("DAY7","Sunday"),o("DAY1","Monday"),o("DAY2","Tuesday"),o("DAY3","Wednesday"),o("DAY4","Thursday"),o("DAY5","Friday"),o("DAY6","Saturday")],months:[o("MONTH1","January"),o("MONTH2","February"),o("MONTH3","March"),o("MONTH4","April"),o("MONTH5","May"),o("MONTH6","June"),o("MONTH7","July"),o("MONTH8","August"),o("MONTH9","September"),o("MONTH10","October"),o("MONTH11","November"),o("MONTH12","December")],ordinal:function(e){return"".concat(e,"º")},relativeTime:{future:o("RELATIVE_TIME_IN","in %s"),past:o("RELATIVE_TIME_AGO","%s ago"),s:o("RELATIVE_TIME_FEW_SECONDS ","a few seconds"),m:o("RELATIVE_TIME_MINUTES","a minute"),mm:o("RELATIVE_TIME_MINUTES","%d minutes"),h:o("RELATIVE_TIME_HOUR","an hour"),hh:o("RELATIVE_TIME_HOURS","%d hours"),d:o("RELATIVE_TIME_DAY","a day"),dd:o("RELATIVE_TIME_DAYS","%d days"),M:o("RELATIVE_TIME_MONTH","a month"),MM:o("RELATIVE_TIME_MONTHS","%d months"),y:o("RELATIVE_TIME_YEAR","a year"),yy:o("RELATIVE_TIME_YEARS","%d years")},meridiem:function(e,t,n){return e>12?o("PM","PM"):o("AM","AM")}},Yn.a.locale("auto",e),Yn.a.updateLocale("auto",e))}),[r]),u.a.createElement(Sr.Provider,{value:[l]},t)},Pr=function(){return Object(i.useContext)(Sr)||[{},function(){}]};function Cr(){return Cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cr.apply(this,arguments)}function Ir(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ar(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tr=function(e){var t,n=e.apiKey,r=e.UIComponent,o=e.mapConfigs,s=xr(vr(),1)[0],c=xr(Pr(),1)[0].optimizeImage,l=xr(tr(),1)[0].configs,f=n||(null==l||null===(t=l.google_maps_api_key)||void 0===t?void 0:t.value),p={},d=xr(Object(i.useState)(null),2),y=d[0],h=d[1],v=xr(Object(i.useState)(null),2),m=v[0],b=v[1],g=xr(rn(),1)[0],O=function(){var t,n=(t=a.a.mark((function t(){var n,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={},p.business=n,t.next=5,g.businesses(e.businessId).select(["location","logo"]).get({cancelToken:n});case 5:r=t.sent,o=r.content.result,b(o.logo),h(o.location),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){Ir(a,r,o,i,u,"next",e)}function u(e){Ir(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){return e.location&&e.businessLogo?(h(e.location),b(e.businessLogo)):O(),function(){p.business&&p.business.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Cr({},e,{googleMapsUrl:function(t){var n,r,a,i,u,l,p=e.orderLocation||(null==s||null===(n=s.options)||void 0===n||null===(r=n.address)||void 0===r?void 0:r.location);return 1===s.options.type?"https://maps.googleapis.com/maps/api/staticmap?size=".concat((null==o||null===(a=o.mapSize)||void 0===a?void 0:a.width)||500,"x").concat((null==o||null===(i=o.mapSize)||void 0===i?void 0:i.height)||190,"&center=").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&zoom=").concat((null==o?void 0:o.mapZoom)||15,"&scale=2&maptype=roadmap&markers=icon:%7Ccolor:red%7C").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&key=").concat(f):"https://maps.googleapis.com/maps/api/staticmap?size=".concat((null==o||null===(u=o.mapSize)||void 0===u?void 0:u.width)||500,"x").concat((null==o||null===(l=o.mapSize)||void 0===l?void 0:l.height)||190,"&scale=2&maptype=roadmap&markers=icon:%7Ccolor:red%7C").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&markers=icon:").concat(c(m,"w_60,h_60,r_max"),"%7Ccolor:white%7C").concat(null==t?void 0:t.lat,",").concat(null==t?void 0:t.lng,"&key=").concat(f)}(y)})))};function _r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Tr.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Tr.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Dr={Info:"INFO",Error:"ERROR",Success:"SUCCESS"},Ur=i.createContext(null),Lr=function(e){var t=e.children,n=_r(i.useState(null),2),r=n[0],o=n[1];return i.createElement(Ur.Provider,{value:[r,{showToast:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;o({type:e,message:t,duration:n})},hideToast:function(){o(null)}}]},t)};function Br(){return i.useContext(Ur)||[{},function(){}]}function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){Mr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Nr(a,r,o,i,u,"next",e)}function u(e){Nr(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qr=Object(i.createContext)(),$r=function(e){var t=e.children,n=Gr(rn(),1)[0],r=Gr(Object(i.useState)({loading:!0,fields:{}}),2),o=r[0],s=r[1],c=function(e,t){e.forEach((function(e){t["mobile_phone"===e.code?"cellphone":e.code]=e}))},l=function(){var e=zr(a.a.mark((function e(){var t,r,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.validationFields().get();case 3:t=e.sent,r=t.content,i=r.result,u=r.error,l={},f={},u||(c(i.filter((function(e){return"checkout"===e.validate})),l),c(i.filter((function(e){return"address"===e.validate})),f)),s({loading:!1,fields:{checkout:l,address:f}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),s(Rr(Rr({},o),{},{loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),f={loadValidationFields:l};return Object(i.useEffect)((function(){null!=n&&n.project&&l()}),[null==n?void 0:n.project]),u.a.createElement(qr.Provider,{value:[o,f]},t)},Jr=function(){return Object(i.useContext)(qr)||[{},zr(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))]};function Vr(){return Vr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vr.apply(this,arguments)}function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){Kr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xr(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Zr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xr(a,r,o,i,u,"next",e)}function u(e){Xr(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var to=function(e){var t=e.UIComponent,n=Qr(rn(),1)[0],r=Qr(Br(),2)[1].showToast,o=Qr(Bn(),2)[1],s=Qr(Jr(),2)[1].loadValidationFields,c=Qr(Object(i.useState)({fields:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=Qr(Object(i.useState)({loading:!1,error:null}),2),d=p[0],y=p[1],h=function(){var e=Zr(a.a.mark((function e(){var t,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Wr(Wr({},l),{},{loading:!0})),t=[{attribute:"validate",value:"address"}],e.next=5,n.validationFields().where(t).get();case 5:r=e.sent,o=r.content,i=o.result,o.error||(u=i.filter((function(e){return"city_dropdown_option"!==e.code&&"name"!==e.code&&"lastname"!==e.code&&"mobile_phone"!==e.code&&"email"!==e.code&&"middle_name"!==e.code&&"second_lastname"!==e.code})),f({fields:u,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(Wr(Wr({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Zr(a.a.mark((function e(t,i){var u,c,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(Dr.Info,o("LOADING","Loading")),y(Wr(Wr({},d),{},{loading:!0})),e.next=5,n.validationFields(t).save(i);case 5:u=e.sent,c=u.content,p=c.result,c.error?y({loading:!1,error:p}):(y({loading:!1,error:null}),r(Dr.Success,o("FIELD_SAVED","Field saved")),h=l.fields.filter((function(e){return e.id===t&&Object.assign(e,p),!0})),f(Wr(Wr({},l),{},{fields:h})),s&&s()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),y({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Vr({},e,{addressFieldsState:l,handleChangeFieldSetting:v})))};function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach((function(t){oo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ao(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function io(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ao(a,r,o,i,u,"next",e)}function u(e){ao(a,r,o,i,u,"throw",e)}i(void 0)}))}}function uo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return so(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return so(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}to.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},to.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var co=Object(i.createContext)(),lo=function(e){var t=e.children,n=e.strategy,r=uo(Object(i.useState)({loading:!1,user:null}),2),o=r[0],s=r[1],c=function(){var e=io(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getItem("user-customer",!0);case 2:(t=e.sent)&&s(ro(ro({},o),{},{user:t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=io(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!t){e.next=3;break}return e.next=3,n.setItem("user-customer",t,!0);case 3:s(ro(ro({},o),{},{user:t}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=io(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,n.removeItem("user-customer");case 3:s(ro(ro({},o),{},{user:null}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p={setUserCustomer:l,deleteUserCustomer:f};return Object(i.useEffect)((function(){c()}),[]),u.a.createElement(co.Provider,{value:[o,p]},t)},fo=function(){return Object(i.useContext)(co)||[{},function(){}]};function po(){return po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},po.apply(this,arguments)}function yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(n),!0).forEach((function(t){vo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){mo(a,r,o,i,u,"next",e)}function u(e){mo(a,r,o,i,u,"throw",e)}i(void 0)}))}}function go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wo=function(e){var t=e.UIComponent,n=e.addressId,r=e.address,o=e.useValidationFileds,s=e.onSaveAddress,c=go(rn(),1)[0],l=go(Jr(),1)[0],f=go(Object(i.useState)({loading:!1,error:null,address:r||{}}),2),p=f[0],d=f[1],y=go(Object(i.useState)({loading:!1,changes:{},error:null}),2),h=y[0],v=y[1],m=go(yn(),1)[0],b=m.user,g=m.token,O={},w=e.userId||(null==b?void 0:b.id),j=e.accessToken||g,S=go(fo(),2)[1].setUserCustomer,E=go(Object(i.useState)(!1),2),P=(E[0],E[1]),C=function(){var e=bo(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(ho(ho({},p),{},{loading:!0})),r={},O.address=r,e.next=6,c.users(t).addresses(n).get({accessToken:j,cancelToken:r});case 6:o=e.sent,i=o.content,d({loading:!1,error:i.error?i.result:null,address:i.error?{}:i.result}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&d({loading:!1,error:[e.t0.message],address:{}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){v(ho(ho({},h),{},{changes:ho(ho({},h.changes),e)}))},x=function(){var e=bo(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&S(n,!0),v(ho(ho({},h),{},{loading:!0})),e.prev=2,e.next=5,c.users(w).addresses(null===(r=p.address)||void 0===r?void 0:r.id).save(ho(ho({},t),h.changes),{accessToken:j});case 5:o=e.sent,i=o.content,v(ho(ho({},h),{},{loading:!1,error:i.error?i.result:null,changes:i.error?h.changes:{}})),i.error||(d(ho(ho({},p),{},{address:i.result})),s&&s(i.result)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),v(ho(ho({},h),{},{loading:!1,error:[e.t0.message],address:{}}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){d(ho(ho({},p),{},{address:r||{}}))}),[r]),Object(i.useEffect)((function(){n&&!r&&C(w,n)}),[]),Object(i.useEffect)((function(){return function(){O.address&&O.address.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,po({},e,{formState:h,showField:function(e){var t,n,r;return!o||!l.loading&&!(null!==(t=l.fields)&&void 0!==t&&t.address[e])||!l.loading&&(null===(n=l.fields)||void 0===n?void 0:n.address[e])&&(null===(r=l.fields)||void 0===r?void 0:r.address[e].enabled)},updateChanges:I,handleChangeInput:function(e){I(vo({},e.target.name,e.target.value))},isRequiredField:function(e){var t,n,r;return o&&!l.loading&&(null===(t=l.fields)||void 0===t?void 0:t.address[e])&&(null===(n=l.fields)||void 0===n?void 0:n.address[e].enabled)&&(null===(r=l.fields)||void 0===r?void 0:r.address[e].required)},saveAddress:x,addressState:p,setIsEdit:function(e){return P(e)}})))};function jo(){return jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jo.apply(this,arguments)}function So(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?So(Object(n),!0).forEach((function(t){Po(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):So(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Co(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Io(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Co(a,r,o,i,u,"next",e)}function u(e){Co(a,r,o,i,u,"throw",e)}i(void 0)}))}}function xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ao(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ao(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ao(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}wo.propTypes={UIComponent:c.a.elementType,isSelectedAfterAdd:c.a.bool,useValidationFileds:c.a.bool,address:c.a.object,userId:c.a.number,addressId:c.a.number,onSaveAddress:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wo.defaultProps={useValidationFileds:!1,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var To=function(e){var t=e.UIComponent,n=e.changeOrderAddressWithDefault,r=e.handleClickSetDefault,o=e.handleClickDelete,s=e.handleSuccessUpdate,c=e.userState,l=xo(rn(),1)[0],f=xo(yn(),1)[0],p=f.user,d=f.token,y=xo(fo(),2)[1].setUserCustomer,h=e.userId||(null==p?void 0:p.id),v=e.accessToken||d;if(!h)throw new Error("`userId` must provide from props or use SessionProviver to wrappe the app.");if(!v)throw new Error("`accessToken` must provide from props or use SessionProviver to wrappe the app.");var m=xo(Object(i.useState)({loading:!1,error:null,addresses:[]}),2),b=m[0],g=m[1],O=xo(Object(i.useState)({loading:!1,error:null}),2),w=O[0],j=O[1],S=xo(vr(),2)[1].changeAddress,E={},P=function(){var e=Io(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Eo(Eo({},b),{},{loading:!0})),t={},E.list=t,e.next=6,l.setAccessToken(v).users(h).addresses().get({cancelToken:t});case 6:n=e.sent,r=n.content,g({loading:!1,error:r.error?r.result:null,addresses:r.error?[]:r.result}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&g(Eo(Eo({},b),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){if(null==e||!e.addresses)return P(),function(){E.list&&E.list.cancel()};g(Eo(Eo({},b),{},{addresses:e.addresses}))}),[e.addresses]);var C=function(){var e=Io(a.a.mark((function e(t,o){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&y(o,!0),!r){e.next=3;break}return e.abrupt("return",r(t));case 3:return e.prev=3,j(Eo(Eo({},w),{},{loading:!0})),e.next=7,l.setAccessToken(v).users(h).addresses(t.id).save({default:!0});case 7:i=e.sent,u=i.content,j({loading:!1,error:u.error?u.result:null}),!u.error&&u.result.default&&(b.addresses.map((function(e){return e.default=e.id===t.id,e})),n&&S(u.result.id),g(Eo({},b))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),j(Eo(Eo({},w),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Io(a.a.mark((function e(t){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return",o(t));case 2:return e.prev=2,j(Eo(Eo({},w),{},{loading:!0})),e.next=6,l.users(h).addresses(t.id).delete({accessToken:v});case 6:n=e.sent,r=n.content,j({loading:!1,error:r.error?r.result:null}),r.error||(i=b.addresses.filter((function(e){return e.id!==t.id})),g(Eo(Eo({},b),{},{addresses:i})),s&&(u=Eo(Eo({},c.user),{},{addresses:i}),s(u))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),j(Eo(Eo({},w),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,jo({},e,{addressList:b,setAddressList:g,actionStatus:w,handleSetDefault:C,handleDelete:I})))};function _o(){return _o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_o.apply(this,arguments)}function ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(n),!0).forEach((function(t){Uo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Bo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Lo(a,r,o,i,u,"next",e)}function u(e){Lo(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Fo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ro(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ro(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}To.propTypes={UIComponent:c.a.elementType,handleClickAddress:c.a.func,handleClickSetDefault:c.a.func,handleClickDelete:c.a.func,userId:c.a.number,accessToken:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},To.defaultProps={changeOrderAddressWithDefault:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Mo=function(e){var t=e.UIComponent,n=e.endpoint,r=e.endpoint1,o=Fo(rn(),1)[0],s=Fo(yn(),1)[0],c=s.token,l=s.loading,f=Fo(Object(i.useState)({content:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=Fo(Object(i.useState)({content:[],loading:!1,error:null}),2),h=y[0],v=y[1],m=Fo(Object(i.useState)({from:"",to:"",businessIds:null,drivers_ids:null,franchises_id:null,driver_companies_ids:null,driver_groups_ids:null,delivery_types_ids:null,app_ids:null}),2),b=m[0],g=m[1],O=function(){var e=Bo(a.a.mark((function e(){var t,r,i,u,s,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(Do(Do({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},r="",""!==(null==b?void 0:b.from)&&""!==(null==b?void 0:b.to)&&(r="from=".concat(Yn()(null==b?void 0:b.from).format("YYYY-MM-DD")," 00:00:00&to=").concat(Yn()(null==b?void 0:b.to).format("YYYY-MM-DD")," 23:59:59")),null!=b&&b.businessIds&&(null==b?void 0:b.businessIds.length)>0&&(r="".concat(r,"&businesses_ids=").concat(JSON.stringify(null==b?void 0:b.businessIds))),null!=b&&b.drivers_ids&&(null==b?void 0:b.drivers_ids.length)>0&&(r="".concat(r,"&drivers_ids=").concat(JSON.stringify(null==b?void 0:b.drivers_ids))),null!=b&&b.franchises_id&&(null==b?void 0:b.franchises_id.length)>0&&(r="".concat(r,"&franchises_id=").concat(JSON.stringify(null==b?void 0:b.franchises_id))),null!=b&&b.driver_companies_ids&&(null==b?void 0:b.driver_companies_ids.length)>0&&(r="".concat(r,"&driver_companies_ids=").concat(JSON.stringify(null==b?void 0:b.driver_companies_ids))),null!=b&&b.driver_groups_ids&&(null==b?void 0:b.driver_groups_ids.length)>0&&(r="".concat(r,"&driver_groups_ids=").concat(JSON.stringify(null==b?void 0:b.driver_groups_ids))),null!=b&&b.delivery_types_ids&&(null==b?void 0:b.delivery_types_ids.length)>0&&(r="".concat(r,"&delivery_types_ids=").concat(JSON.stringify(null==b?void 0:b.delivery_types_ids))),null!=b&&b.app_ids&&(null==b?void 0:b.app_ids.length)>0&&(r="".concat(r,"&app_ids=").concat(JSON.stringify(null==b?void 0:b.app_ids))),i="".concat(o.root,"/reports/").concat(n,"?").concat(r),e.next=17,fetch(i,t);case 17:return u=e.sent,e.next=20,u.json();case 20:s=e.sent,f=s.error,y=s.result,d(Do(Do({},p),{},f?{loading:!1,error:y}:{loading:!1,content:y})),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(2),d(Do(Do({},p),{},{loading:!1,error:e.t0}));case 29:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Bo(a.a.mark((function e(){var t,n,i,u,s,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(Do(Do({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},n="",""!==(null==b?void 0:b.from)&&""!==(null==b?void 0:b.to)&&(n="from=".concat(Yn()(null==b?void 0:b.from).format("YYYY-MM-DD")," 00:00:00&to=").concat(Yn()(null==b?void 0:b.to).format("YYYY-MM-DD")," 23:59:59")),null!=b&&b.businessIds&&(null==b?void 0:b.businessIds.length)>0&&(n="".concat(n,"&businesses_ids=").concat(JSON.stringify(null==b?void 0:b.businessIds))),null!=b&&b.drivers_ids&&(null==b?void 0:b.drivers_ids.length)>0&&(n="".concat(n,"&drivers_ids=").concat(JSON.stringify(null==b?void 0:b.drivers_ids))),null!=b&&b.franchises_id&&(null==b?void 0:b.franchises_id.length)>0&&(n="".concat(n,"&franchises_id=").concat(JSON.stringify(null==b?void 0:b.franchises_id))),null!=b&&b.driver_companies_ids&&(null==b?void 0:b.driver_companies_ids.length)>0&&(n="".concat(n,"&driver_companies_ids=").concat(JSON.stringify(null==b?void 0:b.driver_companies_ids))),null!=b&&b.driver_groups_ids&&(null==b?void 0:b.driver_groups_ids.length)>0&&(n="".concat(n,"&driver_groups_ids=").concat(JSON.stringify(null==b?void 0:b.driver_groups_ids))),null!=b&&b.delivery_types_ids&&(null==b?void 0:b.delivery_types_ids.length)>0&&(n="".concat(n,"&delivery_types_ids=").concat(JSON.stringify(null==b?void 0:b.delivery_types_ids))),null!=b&&b.app_ids&&(null==b?void 0:b.app_ids.length)>0&&(n="".concat(n,"&app_ids=").concat(JSON.stringify(null==b?void 0:b.app_ids))),i="".concat(o.root,"/reports/").concat(r,"?").concat(n),e.next=17,fetch(i,t);case 17:return u=e.sent,e.next=20,u.json();case 20:s=e.sent,f=s.error,p=s.result,v(Do(Do({},h),{},f?{loading:!1,error:p}:{loading:!1,content:p})),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(2),v(Do(Do({},h),{},{loading:!1,error:e.t0}));case 29:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){O(),r&&w()}),[b]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_o({},e,{filterList:b,handleChangeFilterList:g,reportData:p,reportData1:h})))};function No(){return No=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},No.apply(this,arguments)}function zo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(n),!0).forEach((function(t){qo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $o(e){return function(e){if(Array.isArray(e))return Ho(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Vo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Vo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vo(e,t){if(e){if("string"==typeof e)return Ho(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ho(e,t):void 0}}function Ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Mo.propTypes={UIComponent:c.a.elementType,endpoint:c.a.string,endpoint1:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Mo.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Wo=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=e.isFranchise,l=e.isSearchByName,f=Jo(rn(),1)[0],p=Jo(Object(i.useState)({loading:!0,error:null,businesses:[],pagination:null}),2),d=p[0],y=p[1],h=Jo(Object(i.useState)(null),2),v=h[0],m=h[1],b=Jo(Object(i.useState)(!1),2),g=b[0],O=b[1],w=Jo(Object(i.useState)(null),2),j=w[0],S=w[1],E=new RegExp(/^[A-Za-z0-9\s]+$/g),P=function(){var e,t=(e=a.a.mark((function e(){var t,r,i,u,s,p,h,v,m,b,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Yo(Yo({},d),{},{loading:!0})),t=null,r=[],j&&(i=[],u=E.test(j),l&&i.push({attribute:"name",value:{condition:"ilike",value:u?encodeURI("%".concat(j,"%")):"%".concat(j,"%")}}),r.push({conector:"OR",conditions:i})),r.length&&(t={conditions:r,conector:"AND"}),s=t?f.businesses().asDashboard().select(o).where(t):f.businesses().asDashboard().select(o),e.next=9,s.get();case 9:p=e.sent,h=p.content,v=h.error,m=h.result,b=h.pagination,v?y(Yo(Yo({},d),{},{loading:!1,error:m})):(O=[],O=c&&(null==n||null===(g=n.franchises_id)||void 0===g?void 0:g.length)>0?m.filter((function(e){return null==n?void 0:n.franchises_id.includes(e.franchise_id)})):$o(m),y(Yo(Yo({},d),{},{loading:!1,businesses:O,pagination:b}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),y(Yo(Yo({},d),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){zo(a,r,o,i,u,"next",e)}function u(e){zo(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return P(),e.abort()}),[j]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==d||null===(e=d.businesses)||void 0===e?void 0:e.length)){var o=null===(t=d.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat($o(e),[t.id])}),[]),a=(null==n||null===(r=n.businessIds)||void 0===r?void 0:r.length)>0?null==n?void 0:n.businessIds.filter((function(e){return o.includes(e)})):o;m($o(a)),null!=n&&n.businessIds&&(null==a?void 0:a.length)!==(null==d?void 0:d.businesses.length)||O(!0)}}),[null==d?void 0:d.businesses]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,No({},e,{businessList:d,businessIds:v,handleChangeBusinessId:function(e){if(null==v?void 0:v.find((function(t){return t===e}))){var t=null==v?void 0:v.filter((function(t){return t!==e}));m(t),O(!1)}else{var n=v?$o(v):[];n.push(e),n.length===(null==d?void 0:d.businesses.length)&&O(!0),m(n)}},handleClickFilterButton:function(){var e=v?$o(v):null;r(Yo(Yo({},n),{},{businessIds:e})),s&&s()},isAllCheck:g,handleChangeAllCheck:function(){if(g)m(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Vo(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(d.businesses);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}m(t)}O(!g)},searchValue:j,onSearch:S})))};function Ko(){return Ko=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ko.apply(this,arguments)}function Xo(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zo(Object(n),!0).forEach((function(t){ea(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ta(e){return function(e){if(Array.isArray(e))return aa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function na(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=oa(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||oa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oa(e,t){if(e){if("string"==typeof e)return aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aa(e,t):void 0}}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Wo.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Wo.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var ia=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=ra(rn(),1)[0],l=ra(Object(i.useState)({loading:!0,error:null,users:[],pagination:null}),2),f=l[0],p=l[1],d=ra(Object(i.useState)(null),2),y=d[0],h=d[1],v=ra(Object(i.useState)(null),2),m=v[0],b=v[1],g=ra(Object(i.useState)("all"),2),O=g[0],w=g[1],j=function(e){var t,n=!1,r=!1,o=na(y);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.id===e){var i,u=na(a.children);try{var s=function(){var e=i.value;(null==m?void 0:m.find((function(t){return t===e.id})))?n=!0:r=!0};for(u.s();!(i=u.n()).done;)s()}catch(e){u.e(e)}finally{u.f()}}}}catch(e){o.e(e)}finally{o.f()}var c="all";return n&&r?c="some":!n&&r&&(c="none"),c},S=function(e,t){var n,r=!1,o=na(null==f?void 0:f.users);try{for(o.s();!(n=o.n()).done;){var a,i=n.value,u=na(i.drivergroups);try{for(u.s();!(a=u.n()).done;){var s=a.value;i.id===e&&s.id===t&&(r=!0)}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}return r},E=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Qo(Qo({},f),{},{loading:!0})),t=[{attribute:"level",value:"4"}],e.next=5,c.users().asDashboard().select(o).where(t).get();case 5:n=e.sent,r=n.content,i=r.error,u=r.result,s=r.pagination,p(Qo(Qo({},f),{},i?{loading:!1,error:u}:{loading:!1,users:u,pagination:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),p(Qo(Qo({},f),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xo(a,r,o,i,u,"next",e)}function u(e){Xo(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return E(),e.abort()}),[]),Object(i.useEffect)((function(){(null==f?void 0:f.users.length)>0&&function(){var e,t=[],n=[],r=na(null==f?void 0:f.users);try{for(r.s();!(e=r.n()).done;){var o,a=e.value,i=na(null==a?void 0:a.drivergroups);try{var u=function(){var e=o.value;t.find((function(t){return t.id===e.id}))||t.push({id:e.id,name:e.name,isCollapse:!1,children:[]})};for(i.s();!(o=i.n()).done;)u()}catch(e){i.e(e)}finally{i.f()}n.push(a.id)}}catch(e){r.e(e)}finally{r.f()}var s=t.map((function(e){var t,n=ta(e.children),r=na(null==f?void 0:f.users);try{for(r.s();!(t=r.n()).done;){var o=t.value;S(o.id,e.id)&&n.push(o)}}catch(e){r.e(e)}finally{r.f()}return Qo(Qo({},e),{},{children:n})}));b(n),h(s)}()}),[f]),Object(i.useEffect)((function(){m&&null!=f&&f.users&&(m.length>0&&m.length===f.users.length&&w("all"),m.length>0&&m.length!==f.users.length&&w("some"),0===m.length&&w("none"))}),[m]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ko({},e,{usersList:f,groupList:y,userIds:m,isAllCheck:O,handleChangeCollapse:function(e){var t=null==y?void 0:y.map((function(t){return t.id===e?Qo(Qo({},t),{},{isCollapse:!t.isCollapse}):t}));h(t)},handleChangeUserId:function(e){if(null==m?void 0:m.find((function(t){return t===e}))){var t=null==m?void 0:m.filter((function(t){return t!==e}));b(t),w(!1)}else{var n=m?ta(m):[];n.push(e),n.length===(null==f?void 0:f.users.length)&&w(!0),b(n)}},isParentCheck:j,parentClick:function(e){var t,n=j(e),r=null==y?void 0:y.find((function(t){return t.id===e})),o=ta(m),a=na(null==r?void 0:r.children);try{var i=function(){var e=t.value,r=m.find((function(t){return t===e.id}));if(r&&"none"!==n){var a,i=null===(a=o)||void 0===a?void 0:a.filter((function(t){return t!==e.id}));o=ta(i)}r||"none"!==n||o.push(e.id)};for(a.s();!(t=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}b(o)},isIncluded:S,changeAllCheckStatus:function(e){if(e!==O)if(w(e),"all"===e){var t,n=[],r=na(null==f?void 0:f.users);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.push(o.id)}}catch(e){r.e(e)}finally{r.f()}b(n)}else b([])},handleClickFilterButton:function(){var e=m&&m.length>0?ta(m):null;r&&r(Qo(Qo({},n),{},{userIds:e})),s&&s()}})))};function ua(){return ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ua.apply(this,arguments)}function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(n),!0).forEach((function(t){la(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function la(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return da(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return da(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ia.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ia.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var ya=function(e){var t=e.UIComponent,n=pa(yn(),1)[0],r=n.token,o=n.loading,s=pa(rn(),1)[0],c=pa(Object(i.useState)({loading:!1,ids:[],error:null}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,n,i,u,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(ca(ca({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n="".concat(s.root,"/reports/app_ids"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,c=u.error,p=u.result,f(ca(ca({},l),{},c?{loading:!0,error:p}:{loading:!1,ids:p})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),f(ca(ca({},l),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){fa(a,r,o,i,u,"next",e)}function u(e){fa(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ua({},e,{appIdList:l})))};function ha(){return ha=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ha.apply(this,arguments)}function va(e){return function(e){if(Array.isArray(e))return Pa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ea(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(n),!0).forEach((function(t){Oa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ja(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){wa(a,r,o,i,u,"next",e)}function u(e){wa(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Sa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ea(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ea(e,t){if(e){if("string"==typeof e)return Pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pa(e,t):void 0}}function Pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ya.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ya.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ca=function(e){var t=e.UIComponent,n=Sa(rn(),1)[0],r=Sa(yn(),1)[0],o=r.user,s=r.token,c=Sa(Br(),2)[1].showToast,l=Sa(Bn(),2)[1],f=Sa(Object(i.useState)({keys:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=Sa(Object(i.useState)({loading:!1,error:null}),2),h=y[0],v=y[1],m=function(){var e=ja(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(ba(ba({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(n.root,"/users/").concat(null==o?void 0:o.id,"/keys"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error||d(ba(ba({},p),{},{keys:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(ba(ba({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=ja(a.a.mark((function e(t){var r,i,u,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),v(ba(ba({},h),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=6,fetch("".concat(n.root,"/users/").concat(null==o?void 0:o.id,"/keys/").concat(t),r);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?v({loading:!1,error:u.result}):(v(ba(ba({},h),{},{loading:!1})),f=p.keys.filter((function(e){return e.id!==t})),d(ba(ba({},p),{},{keys:f})),c(Dr.Success,l("APIKEY_REMOVED","API key removed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=ja(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),v(ba(ba({},h),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=6,fetch("".concat(n.root,"/users/").concat(null==o?void 0:o.id,"/keys"),t);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?v({loading:!1,error:i.result}):(v(ba(ba({},h),{},{loading:!1})),u=[].concat(va(p.keys),[i.result]),d(ba(ba({},p),{},{keys:u})),c(Dr.Success,l("APIKEY_ADDED","API key added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0!==(null==o?void 0:o.level)&&2!==(null==o?void 0:o.level)||m()}),[o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ha({},e,{apiKeysList:p,actionState:h,handleDeleteApiKey:b,handleAddApiKey:g})))};Ca.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ca.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ia=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function xa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Aa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ia.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ia.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ta=function(e){var t=e.appId,n=e.children,r=xa(yn(),1)[0].user;return Object(i.useEffect)((function(){t&&function(e,t,n,r){function o(){if(!t.getElementById("canny-jssdk")){var e=t.getElementsByTagName(r)[0],n=t.createElement(r);n.type="text/javascript",n.async=!0,n.src="https://canny.io/sdk.js",e.parentNode.insertBefore(n,e)}}if("function"!=typeof e.Canny){var a=function e(){e.q.push(arguments)};a.q=[],e.Canny=a,"complete"===t.readyState?o():e.attachEvent?e.attachEvent("onload",o):e.addEventListener("load",o,!1)}}(window,document,0,"script")}),[t]),Object(i.useEffect)((function(){r&&t&&window.Canny("identify",{appID:t,user:{email:r.email,name:r.name,id:r.id,avatarURL:null==r?void 0:r.photo,created:new Date(r.created_at).toISOString()}})}),[r,t]),u.a.createElement(u.a.Fragment,null,n)};function _a(){return _a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_a.apply(this,arguments)}function ka(e){return function(e){if(Array.isArray(e))return Na(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ma(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Da(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ua(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Da(a,r,o,i,u,"next",e)}function u(e){Da(a,r,o,i,u,"throw",e)}i(void 0)}))}}function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach((function(t){Fa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ma(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ma(e,t){if(e){if("string"==typeof e)return Na(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Na(e,t):void 0}}function Na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ta.propTypes={appId:c.a.string.isRequired},Ta.defaultProps={};var za=["cloudinary","tookan","order_messages","others","location"],Ga=["search_by_address","distance_unit_km","pickup","orders_metafields_strategy","order_validate","time_format","driver_close_distance","lazy_load_products_when_necessary"],Ya=function(e){var t=e.UIComponent,n=e.settingsType,r=Ra(yn(),1)[0],o=r.token,s=r.loading,c=Ra(rn(),1)[0],l=Ra(Object(i.useState)({categories:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=Ra(Object(i.useState)(!1),2),y=d[0],h=d[1],v=Ra(Object(i.useState)(null),2),m=v[0],b=v[1],g=function(){var e=Ua(a.a.mark((function e(){var t,r,i,u,l,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Ba(Ba({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},(r=[]).push({attribute:"key",value:n}),i="".concat(c.root,"/config_categories?where=").concat(JSON.stringify(r)),e.next=10,fetch(i,t);case 10:return u=e.sent,e.next=13,u.json();case 13:l=e.sent,d=l.error,y=l.result,!d&&y.length>0?b(y[0].id):p(Ba(Ba({},f),{},{loading:!1,error:y})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p(Ba(Ba({},f),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Ua(a.a.mark((function e(){var t,n,r,i,u,l,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Ba(Ba({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},(n=[]).push({attribute:"parent_category_id",value:parseInt(m)}),r="".concat(c.root,"/config_categories?orderBy=id&where=").concat(JSON.stringify(n)),e.next=10,fetch(r,t);case 10:return i=e.sent,e.next=13,i.json();case 13:u=e.sent,l=u.error,d=u.result,l?p(Ba(Ba({},f),{},{loading:!0,error:d})):(y=d.filter((function(e){return!za.includes(e.key)})).map((function(e){var t,n=null===(t=e.configs)||void 0===t?void 0:t.filter((function(e){return!Ga.includes(e.key)})).sort((function(e,t){return 1*e.rank>1*t.rank?1:-1}));return Ba(Ba({},e),{},{configs:ka(n)})})),p(Ba(Ba({},f),{},{loading:!1,categories:y}))),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p(Ba(Ba({},f),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){g()}),[]),Object(i.useEffect)((function(){m&&O(m)}),[m]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_a({},e,{isUpdateConfig:y,handChangeConfig:h,categoryList:f,handleUpdateCategoryList:function(e){p(Ba(Ba({},f),{},{categories:e})),h(!0)}})))};function qa(){return qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qa.apply(this,arguments)}function $a(e){return function(e){if(Array.isArray(e))return Qa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Za(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){Ha(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wa(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ka(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Wa(a,r,o,i,u,"next",e)}function u(e){Wa(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Xa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Za(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Za(e,t){if(e){if("string"==typeof e)return Qa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qa(e,t):void 0}}function Qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ya.propTypes={UIComponent:c.a.elementType,settingsType:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ya.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ei=function(e){var t=e.categorySelected,n=e.businessState,r=e.handleUpdateBusinessState,o=e.UIComponent,s=Xa(Bn(),2)[1],c=Xa(rn(),1)[0],l=Xa(yn(),1)[0].loading,f=Xa(Br(),2)[1].showToast,p=Xa(Object(i.useState)([]),2),d=p[0],y=p[1],h=n.business,v=Xa(Object(i.useState)({photos:[],loading:!1,result:{error:null},API:!1,endPoint:!1}),2),m=v[0],b=v[1],g=Xa(Object(i.useState)([]),2),O=g[0],w=g[1],j=function(){return b({photos:[],loading:!1,result:{error:null},API:!1})},S=function(){var e=Ka(a.a.mark((function e(t,n){var o,i,u,p,d,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(Dr.Info,s("LOADING","Loading")),b(Va(Va({},m),{},{loading:!0,API:!1})),e.next=7,c.businesses(parseInt(null==h?void 0:h.id)).categories(parseInt(null==t?void 0:t.category_id)).products(null==t?void 0:t.id).save(n);case 7:o=e.sent,i=o.content,u=i.error,p=i.result,u?b(Va(Va({},m),{},{loading:!1,result:{error:!0,result:p}})):(r&&((y=$a(null==h?void 0:h.categories)).forEach((function e(r){if(r.id===(null==t?void 0:t.category_id)){var o=r.products.map((function(e){return e.id===t.id?Va(Va({},e),n):e}));r.products=$a(o)}Array.isArray(null==r?void 0:r.subcategories)&&r.subcategories.forEach(e)})),r(Va(Va({},h),{},{categories:y}))),(v=null==m||null===(d=m.photos)||void 0===d?void 0:d.filter((function(e){return(null==e?void 0:e.name)!==(null==p?void 0:p.id)}))).length>0?b(Va(Va({},m),{},{photos:v,API:!0})):b({loading:!1,photos:[],result:{error:!1,result:"all product updated"},API:!1,endPoint:!0}),f(Dr.Success,s("PRODUCT_UPDATE","Products updated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),b(Va(Va({},m),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(e){return new Promise((function(t){var n=new FileReader,r=e.type,o=e.name,a=e.size;n.addEventListener("load",(function(){t({base64:n.result,name:parseInt(o.split(".")[0]),type:r,size:a})})),n.readAsDataURL(e)}))},P=function(){var e=Ka(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=0;r<t.length;r++)n.push(E(t[r]));return e.next=4,Promise.all(n);case 4:o=e.sent,w([].concat($a(O),$a(o)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){b(Va(Va({},m),{},{photos:O}))}),[O]);return Object(i.useEffect)((function(){t&&null!=t&&t.products&&(null==t?void 0:t.products.length)>0&&y(null==t?void 0:t.products)}),[t]),Object(i.useEffect)((function(){var e;if(null!=m&&m.API&&(null==m||null===(e=m.photos)||void 0===e?void 0:e.length)>0){var t=null==m?void 0:m.photos[0],n={images:null==t?void 0:t.base64},r=d.find((function(e){return(null==t?void 0:t.name)===(null==e?void 0:e.id)}));S(r,n)}null!=m&&m.API&&0===(null==m?void 0:m.photos.length)&&j()}),[null==m?void 0:m.API]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,qa({},e,{handleUploadImages:P,cleanFormState:j,updateProduct:function(){b(Va(Va({},m),{},{API:!0,loading:!0}))},formState:m,products:d})))};function ti(){return ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ti.apply(this,arguments)}function ni(e){return function(e){if(Array.isArray(e))return li(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ci(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ri(Object(n),!0).forEach((function(t){ai(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ai(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ii(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ui(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ii(a,r,o,i,u,"next",e)}function u(e){ii(a,r,o,i,u,"throw",e)}i(void 0)}))}}function si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ci(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ci(e,t){if(e){if("string"==typeof e)return li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?li(e,t):void 0}}function li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ei.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ei.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},Yn.a.extend($n.a);var fi=function(e){var t,n,r,o,s,c=e.isSearchByName,l=e.isSearchByDescription,f=e.slug,p=e.categoryId,d=e.productId,y=e.isInitialRender,h=e.ordering,v=e.businessProps,m=e.UIComponent,b=si(vr(),1)[0],g=si(Bn(),2),O=g[0],w=g[1],j=si(Object(i.useState)({id:null,name:w("ALL","All")}),2),S=j[0],E=j[1],P=si(Object(i.useState)(null),2),C=P[0],I=P[1],x=si(Object(i.useState)(null),2),A=x[0],T=x[1],_=si(Object(i.useState)(null),2),k=_[0],D=_[1],U=si(Object(i.useState)({business:{},menus:null,loading:!0,error:null}),2),L=U[0],B=U[1],F=si(Object(i.useState)({}),2),R=F[0],M=F[1],N=si(Object(i.useState)(),2),z=N[0],G=N[1],Y=si(Object(i.useState)({}),2),q=Y[0],$=Y[1],J=si(Object(i.useState)({product:null,loading:!1,error:null}),2),V=J[0],H=J[1],W=si(Object(i.useState)(!1),2),K=W[0],X=W[1],Z={loading:!0,pagination:{currentPage:0,pageSize:20,totalItems:null,totalPages:0,nextPageItems:10},products:[]},Q=si(Object(i.useState)(Z),2),ee=Q[0],te=Q[1],ne=si(Object(i.useState)(null),2),re=ne[0],oe=ne[1],ae=function(e,t){return!C||(e&&e.toLowerCase().includes(C.toLowerCase())&&c||t&&t.toLowerCase().includes(C.toLowerCase())&&l)},ie=function(e){return!!e.featured&&(!C||(e.name&&e.name.toLowerCase().includes(C.toLowerCase())&&c||e.description&&e.description.toLowerCase().includes(C.toLowerCase())&&l))},ue=function(e,t){return"rank"===e?t.sort((function(e,t){return t.rank-e.rank})):"a-z"===e?t.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})):t},se=function(){var e=ui(a.a.mark((function e(t){var n,r,o,i,u,s,f,p,d,y,v,m,g,O,w,j,E,P,I,x,T,_,k,D,U,B,F,N,z,G,Y,J,V,H;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=L&&null!==(n=L.business)&&void 0!==n&&n.lazy_load_products_recommended){e.next=8;break}return s=!(null==L||null===(o=L.business)||void 0===o||null===(i=o.categories)||void 0===i||null===(u=i.find((function(e){return e})))||void 0===u||!u.products.filter((function(e){return e.featured})).length),X(s),f=oi(oi({},Z),{},{loading:!1}),"featured"!==(null==S?void 0:S.id)&&null!==(null==S?void 0:S.id)?(v=null==L||null===(p=L.business)||void 0===p||null===(d=p.categories)||void 0===d||null===(y=d.find((function(e){return(null==e?void 0:e.id)===(null==S?void 0:S.id)})))||void 0===y?void 0:y.products.filter((function(e){return ae(e.name,e.description)})),f.products=v||[]):"featured"===(null==S?void 0:S.id)?(O=null==L||null===(m=L.business)||void 0===m||null===(g=m.categories)||void 0===g?void 0:g.reduce((function(e,t){return[].concat(ni(e),ni(t.products))}),[]).filter((function(e){return ie(e)})),f.products=O||[]):(E=null==L||null===(w=L.business)||void 0===w||null===(j=w.categories)||void 0===j?void 0:j.reduce((function(e,t){return[].concat(ni(e),ni(t.products))}),[]).filter((function(e){return ae(e.name,e.description)})),f.products=E||[]),f.products=ue(A,f.products),te(oi({},f)),e.abrupt("return");case 8:if(P=C?"search":"featured"===(null==S?void 0:S.id)?"featured":null!=S&&S.id?"categoryId:".concat(null==S?void 0:S.id):"all",(I=R[P]||Z).products=ue(A,I.products),x=I.pagination,t||!(x.currentPage>0)||x.currentPage!==x.totalPages){e.next=15;break}return te(oi(oi({},I),{},{loading:!1})),e.abrupt("return");case 15:return te(oi(oi({},I),{},{loading:!0})),T={type:(null===(r=b.options)||void 0===r?void 0:r.type)||1,page:t?1:x.currentPage+1,page_size:x.pageSize},A&&(T.orderBy="a-z"===A?"name":A),_=null,k=[],C&&(c&&k.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}}),l&&k.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}})),_={conditions:k,conector:"OR"},"featured"===(null==S?void 0:S.id)&&(_={conditions:[{attribute:"featured",value:!0}]}),"featured"===(null==S?void 0:S.id)&&C&&(_={conditions:[{attribute:"featured",value:!0},{conditions:k,conector:"OR"}],conector:"AND"}),e.prev=24,B=null!=S&&S.id&&"featured"!==(null==S?void 0:S.id)?h.businesses(null===(D=L.business)||void 0===D?void 0:D.id).categories(null==S?void 0:S.id).products():h.businesses(null===(U=L.business)||void 0===U?void 0:U.id).products(),F={},q.products=F,$(oi({},q)),N=_.conditions.length>0?B.parameters(T).where(_):B.parameters(T),e.next=32,N.get({cancelToken:F});case 32:z=e.sent,G=z.content,Y=G.error,J=G.result,V=G.pagination,Y?oe(J):(H={pagination:oi(oi({},I.pagination),{},{currentPage:V.current_page,totalItems:V.total,totalPages:V.total_pages}),loading:!1,products:t?ni(J):[].concat(ni(I.products),ni(J))},R[P]=H,te(oi({},H)),M(oi({},R)),X(!!R.all.products.find((function(e){return e.featured})))),e.next=43;break;case 40:e.prev=40,e.t0=e.catch(24),oe([e.t0.message]);case 43:case"end":return e.stop()}}),e,null,[[24,40]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=ui(a.a.mark((function e(){var t,n,r,o,i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p&&d&&null!==(t=L.business)&&void 0!==t&&t.id)){e.next=17;break}return e.prev=1,H(oi(oi({},V),{},{loading:!0})),i={},q.product=i,u={type:(null===(n=b.options)||void 0===n?void 0:n.type)||1,moment:(null===(r=b.options)||void 0===r?void 0:r.moment)||null},e.next=8,h.businesses(null===(o=L.business)||void 0===o?void 0:o.id).categories(p).products(d).parameters(u).get({cancelToken:i});case 8:s=e.sent,c=s.content.result,l=Array.isArray(c)?null:c,H(oi(oi({},V),{},{product:l,loading:!1})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),H(oi(oi({},V),{},{loading:!1,error:[e.t0]}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){y&&ce()}),[JSON.stringify(null===(t=L.business)||void 0===t?void 0:t.id),y]);var le=function(){var e=ui(a.a.mark((function e(){var t,n,r,o,i,u,s,c,l,p,d,y,m,g,O,w,j,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(oi(oi({},L),{},{loading:!0})),y={},q.business=y,$(oi({},q)),m={type:(null===(t=b.options)||void 0===t?void 0:t.type)||1,location:null!==(n=b.options)&&void 0!==n&&null!==(r=n.address)&&void 0!==r&&r.location?"".concat(null===(o=b.options)||void 0===o||null===(i=o.address)||void 0===i||null===(u=i.location)||void 0===u?void 0:u.lat,",").concat(null===(s=b.options)||void 0===s||null===(c=s.address)||void 0===c||null===(l=c.location)||void 0===l?void 0:l.lng):null},null!==(p=b.options)&&void 0!==p&&p.moment&&(a=null===(d=b.options)||void 0===d?void 0:d.moment,P="YYYY-MM-DD HH:mm:ss",Yn()(a,P).format(P)===a)&&(O=Yn.a.utc(null===(g=b.options)||void 0===g?void 0:g.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),m.timestamp=O),k&&(m.menu_id=k),e.next=10,h.businesses(f).select(v).parameters(m).get({cancelToken:y});case 10:return w=e.sent,j=w.content.result,e.next=14,h.businesses(j.id).menus().get();case 14:S=e.sent,E=S.content.result,B(oi(oi({},L),{},{business:j,loading:!1,menus:E})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),B(oi(oi({},L),{},{loading:!1,error:[e.t0.message]}));case 22:case"end":return e.stop()}var a,P}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){L.loading||se(!0)}),[L]),Object(i.useEffect)((function(){se(!!C)}),[C]),Object(i.useEffect)((function(){se(!!C)}),[S.id]),Object(i.useEffect)((function(){se(!!C)}),[A]),Object(i.useEffect)((function(){se()}),[f]),Object(i.useEffect)((function(){b.loading||!z||O.loading||le()}),[z,O.loading,f,k]),Object(i.useEffect)((function(){var e,t,n,r;b.loading||G({type:null==b||null===(e=b.options)||void 0===e?void 0:e.type,moment:null==b||null===(t=b.options)||void 0===t?void 0:t.moment,location:null==b||null===(n=b.options)||void 0===n||null===(r=n.address)||void 0===r?void 0:r.location})}),[null==b||null===(n=b.options)||void 0===n?void 0:n.type,null==b||null===(r=b.options)||void 0===r?void 0:r.moment,JSON.stringify(null==b||null===(o=b.options)||void 0===o||null===(s=o.address)||void 0===s?void 0:s.location)]),Object(i.useEffect)((function(){var e=q.business;return function(){e&&e.cancel()}}),[q.business]),Object(i.useEffect)((function(){var e=q.products;return function(){e&&e.cancel()}}),[q.products]),u.a.createElement(u.a.Fragment,null,m&&u.a.createElement(m,ti({},e,{errors:re,categorySelected:S,searchValue:C,sortByValue:A,filterByMenus:k,categoryState:ee,businessState:L,productModal:V,featuredProducts:K,handleChangeCategory:function(e){(null==e?void 0:e.id)!==(null==S?void 0:S.id)&&E(e)},handleChangeSearch:function(e){I(e)},handleChangeSortBy:function(e){T(e)},handleChangeFilterByMenus:function(e){D(e)},getNextProducts:se,updateProductModal:function(e){return H(oi(oi({},V),{},{product:e}))}})))};function pi(){return pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pi.apply(this,arguments)}function di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?di(Object(n),!0).forEach((function(t){hi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vi(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mi(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){vi(a,r,o,i,u,"next",e)}function u(e){vi(a,r,o,i,u,"throw",e)}i(void 0)}))}}function bi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fi.propTypes={UIComponent:c.a.elementType},fi.defaultProps={};var Oi=function(e){var t=e.UIComponent,n=bi(yn(),1)[0],r=n.token,o=n.loading,s=bi(rn(),1)[0],c=bi(Object(i.useState)({lapse:"today",businessIds:null,app_id:"all",franchises_id:null}),2),l=c[0],f=c[1],p=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),d=p[0],y=p[1],h=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),v=h[0],m=h[1],b=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),g=b[0],O=b[1],w=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),j=w[0],S=w[1],E=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),P=E[0],C=E[1],I=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),x=I[0],A=I[1],T=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),_=T[0],k=T[1],D=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),U=D[0],L=D[1],B=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),F=B[0],R=B[1],M=bi(Object(i.useState)({loading:!1,data:[],error:null}),2),N=M[0],z=M[1],G=function(e){var t,n="".concat(s.root,"/reports/").concat(e),r="lapse=".concat(null==l?void 0:l.lapse);return null!=l&&l.businessIds&&(null==l?void 0:l.businessIds.length)>0&&(r="".concat(r,"&businesses=").concat(null==l||null===(t=l.businessIds)||void 0===t?void 0:t.toString())),null!=l&&l.app_id&&"all"!==l.app_id&&(r="".concat(r,"&app_id=").concat(null==l?void 0:l.app_id)),null!=l&&l.franchises_id&&(null==l?void 0:l.franchises_id.length)>0&&(r="".concat(r,"&franchises_id=").concat(JSON.stringify(null==l?void 0:l.franchises_id))),"".concat(n,"?").concat(r)},Y=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(yi(yi({},d),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("orders"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,y(yi(yi({},d),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),y(yi(yi({},d),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,m(yi(yi({},v),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("sales"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,m(yi(yi({},v),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),m(yi(yi({},v),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(yi(yi({},g),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("top_selling"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,O(yi(yi({},g),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),O(yi(yi({},g),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,S(yi(yi({},j),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("top_categories"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,S(yi(yi({},j),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),S(yi(yi({},j),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,C(yi(yi({},P),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("orders_status"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,C(yi(yi({},P),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),C(yi(yi({},P),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,A(yi(yi({},x),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("users"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,A(yi(yi({},x),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),A(yi(yi({},x),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,k(yi(yi({},_),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("customer_satisfaction"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,k(yi(yi({},_),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),k(yi(yi({},_),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,L(yi(yi({},U),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("orders_accept_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,L(yi(yi({},U),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),L(yi(yi({},U),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,R(yi(yi({},F),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("arrived_pickup_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,R(yi(yi({},F),{},s?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),R(yi(yi({},F),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=mi(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,z(yi(yi({},N),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=G("order_location"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,z(yi(yi({},N),{},s?{loading:!1,error:c}:{loading:!1,locations:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),z(yi(yi({},N),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){Y(),q(),$(),J(),V(),H(),W(),K(),X(),Z()}),[l]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,pi({},e,{filterList:l,ordersList:d,salesList:v,topProductList:g,topCategoryList:j,orderStatusList:P,registerUsersList:x,customerSatisfactionList:_,ordersAcceptSpendList:U,arrivedPickUpSpendList:F,orderLocationList:N,handleChangeFilterList:f})))};function wi(){return wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wi.apply(this,arguments)}function ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ji(Object(n),!0).forEach((function(t){Ei(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pi(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ci(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Pi(a,r,o,i,u,"next",e)}function u(e){Pi(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ii(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Oi.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Oi.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ai=function(e){var t=e.UIComponent,n=e.business,r=e.businessId,o=e.businessParams,s=Ii(rn(),1)[0],c=Ii(Object(i.useState)({business:{},loading:!1,error:null}),2),l=c[0],f=c[1],p={},d=function(){var e=Ci(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},p.business=n,e.next=4,s.businesses(t).select(o).parameters({location:"40.7539143,-73.9810162",type:1}).get({cancelToken:n});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Ci(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Si(Si({},l),{},{loading:!0})),e.next=4,d(r);case 4:t=e.sent,n=t.content.result,f(Si(Si({},l),{},{loading:!1,business:n})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),f(Si(Si({},l),{},{loading:!1,error:[e.t0]}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return n?f(Si(Si({},l),{},{business:n})):y(),function(){p.business&&p.business.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,wi({},e,{businessState:l})))};function Ti(){return Ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ti.apply(this,arguments)}function _i(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ki(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_i(a,r,o,i,u,"next",e)}function u(e){_i(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){Li(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Li(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ai.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessParams:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ai.defaultProps={businessParams:["header","logo","name","today","delivery_price","minimum","description","distance","delivery_time","pickup_time","reviews"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ri=function(e){var t=e.UIComponent,n=e.propsToFetch,r=e.isSearchByName,o=Bi(rn(),1)[0],s=Bi(Object(i.useState)(null),2),c=s[0],l=s[1],f=Bi(Br(),2)[1].showToast,p=Bi(Bn(),2)[1],d=Bi(Object(i.useState)({loading:!1,businesses:[],result:{error:null}}),2),y=d[0],h=d[1],v=new RegExp(/^[A-Za-z0-9\s]+$/g),m=function(){var e=ki(a.a.mark((function e(){var t,i,u,s,l,f,p,d,m,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Ui(Ui({},y),{},{loading:!0})),t=null,i=[],c&&(u=[],s=v.test(c),r&&u.push({attribute:"name",value:{condition:"ilike",value:s?encodeURI("%".concat(c,"%")):"%".concat(c,"%")}}),i.push({conector:"OR",conditions:u})),i.length&&(t={conditions:i,conector:"AND"}),l=t?o.businesses().asDashboard().select(n).where(t):o.businesses().asDashboard().select(n),e.next=9,l.get();case 9:f=e.sent,p=f.content,d=p.error,m=p.result,b=p.pagination,h(Ui(Ui({},y),{},d?{loading:!1,error:m}:{loading:!1,businesses:m,pagination:b})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),h(Ui(Ui({},y),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=ki(a.a.mark((function e(t,n){var r,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),e.next=4,o.businesses(parseInt(t)).save(n);case 4:r=e.sent,i=r.content,u=i.error,s=i.result,u||(c=null==y?void 0:y.businesses.map((function(e){return e.id===t?Ui(Ui({},e),{},{franchise_id:s.franchise_id}):e})),h((function(e){return Ui(Ui({},e),{},{businesses:c})})),f(Dr.Success,p("BUSINESS_UPDATED","Business updated"))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[c]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ti({},e,{searchValue:c,onSearch:l,businessList:y,handleChangeCheckBox:function(e,t,n){var r={franchise_id:n};e.target.checked||(r={franchise_id:null}),b(t,r)},handleSelectAllBusinesses:function(e,t){var n,r=[];e?(n={franchise_id:t},y.businesses.forEach((function(e){e.franchise_id!==t&&(b(e.id,n),e.franchise_id=t),r.push(e)}))):(n={franchise_id:null},y.businesses.forEach((function(e){null!==e.franchise_id&&(b(e.id,n),e.franchise_id=null),r.push(e)}))),h(Ui(Ui({},y),{},{businesses:r}))}})))};function Mi(){return Mi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mi.apply(this,arguments)}function Ni(e){return function(e){if(Array.isArray(e))return Wi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zi(e){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(e)}function Gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(n),!0).forEach((function(t){qi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $i(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ji(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$i(a,r,o,i,u,"next",e)}function u(e){$i(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Vi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Hi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hi(e,t){if(e){if("string"==typeof e)return Wi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wi(e,t):void 0}}function Wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ri.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ri.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var Ki=function(e){var t=e.UIComponent,n=e.brand,r=e.handleUpdateBrandList,o=e.brandListState,s=e.onSelectedBrand,c=Vi(rn(),1)[0],l=Vi(Bn(),2)[1],f=Vi(Br(),2)[1].showToast,p=Vi(yn(),1)[0].token,d=Vi(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),y=d[0],h=d[1],v=function(){var e=Ji(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?g():m();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Ji(a.a.mark((function e(){var t,n,i,u,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,h(Yi(Yi({},y),{},{loading:!0})),f(Dr.Info,l("LOADING","Loading")),void 0===(null==(n=Yi({},null==y?void 0:y.changes))?void 0:n.ribbon)||null!=n&&null!==(t=n.ribbon)&&void 0!==t&&t.enabled||delete n.ribbon,n)("object"===zi(n[i])&&null!==n[i]||Array.isArray(n[i]))&&(n[i]=JSON.stringify(n[i]));return u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(n)},e.next=9,fetch("".concat(c.root,"/franchises"),u);case 9:return d=e.sent,e.next=12,d.json();case 12:null!=(v=e.sent)&&v.error?h(Yi(Yi({},y),{},{changes:y.changes,result:v,loading:!1})):(h(Yi(Yi({},y),{},{changes:{},result:v,loading:!1})),r&&r([].concat(Ni(null==o?void 0:o.brands),[v.result])),s&&s(v.result),f(Dr.Success,l("BRAND_ADDED","Brand added"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),h(Yi(Yi({},y),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),b=function(e){if(h(Yi(Yi({},y),{},{changes:{},result:e,loading:!1})),r){var t=null==o?void 0:o.brands.map((function(t){return t.id===e.result.id?Yi(Yi({},t),e.result):t}));r(t)}},g=function(){var e=Ji(a.a.mark((function e(){var t,r,o,i,u,s,d,v,m,g,O,w,j,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in e.prev=0,h(Yi(Yi({},y),{},{loading:!0})),f(Dr.Info,l("LOADING","Loading")),t=Yi({},null==y?void 0:y.changes))("object"===zi(t[r])&&null!==t[r]||Array.isArray(t[r]))&&(t[r]=JSON.stringify(t[r]));return o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(t)},e.next=8,fetch("".concat(c.root,"/franchises/").concat(null==n?void 0:n.id),o);case 8:return i=e.sent,e.next=11,i.json();case 11:if(null!=(u=e.sent)&&u.error){e.next=29;break}if(void 0===(null===(s=y.changes)||void 0===s||null===(d=s.ribbon)||void 0===d?void 0:d.enabled)||null!==(v=y.changes)&&void 0!==v&&null!==(m=v.ribbon)&&void 0!==m&&m.enabled||null==u||null===(g=u.result)||void 0===g||null===(O=g.ribbon)||void 0===O||!O.enabled){e.next=25;break}return w={ribbon:JSON.stringify({enabled:!1})},j={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(w)},e.next=18,fetch("".concat(c.root,"/franchises/").concat(null==n?void 0:n.id),j);case 18:return S=e.sent,e.next=21,S.json();case 21:E=e.sent,b(E),e.next=26;break;case 25:b(u);case 26:f(Dr.Success,l("BRAND_UPDATED","Brand updated")),e.next=30;break;case 29:h(Yi(Yi({},y),{},{changes:y.changes,result:u,loading:!1}));case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(0),h(Yi(Yi({},y),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 35:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h(Yi(Yi({},y),{},{changes:{}}))}),[null==n?void 0:n.id]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Mi({},e,{brandFormState:y,handleUpdateClick:v,handleChangeInput:function(e){var t=qi({},e.target.name,e.target.value);h(Yi(Yi({},y),{},{changes:Yi(Yi({},y.changes),t)}))},handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){h(Yi(Yi({},y),{},{changes:Yi(Yi({},y.changes),{},qi({},t,n.result))}))},n.onerror=function(e){return console.log(e)}},handleChangeItem:function(e){var t=Yi(Yi({},null==y?void 0:y.changes),e);h(Yi(Yi({},y),{},{changes:t}))},handleChangeRibbon:function(e){var t,n,r=null!=y&&null!==(t=y.changes)&&void 0!==t&&t.ribbon?Yi(Yi({},null==y||null===(n=y.changes)||void 0===n?void 0:n.ribbon),e):Yi({},e),o=Yi(Yi({},null==y?void 0:y.changes),{},{ribbon:r});h(Yi(Yi({},y),{},{changes:o}))}})))};function Xi(){return Xi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xi.apply(this,arguments)}function Zi(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Qi(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Zi(a,r,o,i,u,"next",e)}function u(e){Zi(a,r,o,i,u,"throw",e)}i(void 0)}))}}function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(n),!0).forEach((function(t){nu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ru(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ou(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ou(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ou(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ki.propTypes={UIComponent:c.a.elementType,brand:c.a.object,brandListState:c.a.object,handleUpdateBrandList:c.a.func,onSelectedBrand:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ki.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var au=function(e){var t=e.UIComponent,n=ru(Bn(),2)[1],r=ru(Br(),2)[1].showToast,o=ru(Object(i.useState)(null),2),s=o[0],c=o[1],l=ru(yn(),1)[0],f=l.token,p=l.loading,d=ru(rn(),1)[0],y=ru(Object(i.useState)({loading:!1,brands:[],error:null}),2),h=y[0],v=y[1],m=ru(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),b=m[0],g=m[1],O=ru(Object(i.useState)(!1),2),w=O[0],j=O[1],S=function(e){v(tu(tu({},h),{},{brands:e}))},E=function(){var e=Qi(a.a.mark((function e(t){var o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(tu(tu({},b),{},{loading:!0})),r(Dr.Info,n("LOADING","Loading")),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(d.root,"/franchises/").concat(t),o);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(u=e.sent)&&u.error?g(tu(tu({},b),{},{result:u,loading:!1})):(g(tu(tu({},b),{},{changes:{},result:u,loading:!1})),S&&(s=null==h?void 0:h.brands.filter((function(e){return e.id!==t})),S(s)),r(Dr.Success,n("BRAND_DELETED","Brand deleted")),j(!1)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g(tu(tu({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Qi(a.a.mark((function e(t,o){var i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(tu(tu({},b),{},{loading:!0})),r(Dr.Info,n("LOADING","Loading")),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(o)},e.next=6,fetch("".concat(d.root,"/franchises/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:null!=(s=e.sent)&&s.error?g(tu(tu({},b),{},{result:s,loading:!1})):(g(tu(tu({},b),{},{changes:{},result:s,loading:!1})),S&&(c=null==h?void 0:h.brands.map((function(e){return e.id===s.result.id?tu(tu({},e),{},{name:s.result.name,logo:s.result.logo,enabled:s.result.enabled}):e})),S(c)),r(Dr.Success,n("BRAND_UPDATED","Brand updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g(tu(tu({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Qi(a.a.mark((function e(){var t,n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(tu(tu({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},n="".concat(d.root,"/franchises"),e.next=8,fetch(n,t);case 8:return r=e.sent,e.next=11,r.json();case 11:o=e.sent,i=o.error,u=o.result,v(tu(tu({},h),{},i?{loading:!1,error:u}:{loading:!1,brands:u})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),v(tu(tu({},h),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){C()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Xi({},e,{searchValue:s,onSearch:c,handleUpdateBrandList:S,brandListState:h,handleChangeState:function(e,t,n){var r=nu({},t,n);P(e,r)},brandFormState:b,handleDeleteBrand:E,openDetail:w,setOpenDetail:j})))};function iu(){return iu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iu.apply(this,arguments)}function uu(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function su(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}au.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},au.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var lu=function(e){var t,n,r=e.business,o=e.businessId,s=e.businessAttributes,c=e.onBusinessClick,l=e.handleCustomClick,f=e.UIComponent,p=su(rn(),1)[0],d=su(Object(i.useState)(r),2),y=d[0],h=d[1],v=su(Object(i.useState)(null),2),m=v[0],b=v[1],g=su(Object(i.useState)(!1),2),O=g[0],w=g[1],j=su(vr(),1)[0],S=su(Pr(),1)[0].parsePrice,E=function(){var e,t=(e=a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.businesses(o).select(s).get();case 2:t=e.sent,n=t.content.result,h(n);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){uu(a,r,o,i,u,"next",e)}function u(e){uu(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),P=function(e){var t=(null==e?void 0:e.hour)<10?"0".concat(null==e?void 0:e.hour):null==e?void 0:e.hour,n=(null==e?void 0:e.minute)<10?"0".concat(null==e?void 0:e.minute):null==e?void 0:e.minute;return e?"".concat(t,":").concat(n):"none"},C=P((null==y||null===(t=y.today)||void 0===t||null===(n=t.lapses[0])||void 0===n?void 0:n.close)||null);return Object(i.useEffect)((function(){var e=null==m?void 0:m.split(":")[0],t=null==m?void 0:m.split(":")[1],n=null==C?void 0:C.split(":")[0],r=null==C?void 0:C.split(":")[1];C&&w(e>n||e===n&&t>=r)}),[m]),Object(i.useEffect)((function(){var e=setInterval((function(){var e=(new Date).getHours(),t=(new Date).getMinutes();b("".concat(e,":").concat(t))}),1e3);return function(){return clearInterval(e)}}),[]),Object(i.useEffect)((function(){r?h(r):E()}),[]),u.a.createElement(u.a.Fragment,null,f&&u.a.createElement(f,iu({},e,{orderState:j,isBusinessClose:O,business:y,formatDate:P,formatNumber:function(e){return Math.round(100*e)/100},getBusinessOffer:function(e){if(!e||!e.length)return null;var t=null==e?void 0:e.reduce((function(e,t){return e.rate>t.rate?e:t}));return 1===(null==t?void 0:t.rate_type)?"".concat(null==t?void 0:t.rate,"%"):S(null==t?void 0:t.rate)},handleClick:l||c})))};function fu(){return fu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fu.apply(this,arguments)}function pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function du(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pu(Object(n),!0).forEach((function(t){yu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hu(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function vu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hu(a,r,o,i,u,"next",e)}function u(e){hu(a,r,o,i,u,"throw",e)}i(void 0)}))}}function mu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}lu.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessId:c.a.number,businessAttributes:c.a.arrayOf(c.a.string),onBusinessClick:c.a.func,handleCustomClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gu=function(e){var t=e.business,n=e.UIComponent,r=e.handleUpdateBusinessState,o=mu(rn(),1)[0],s=mu(yn(),1)[0],c=mu(Br(),2)[1].showToast,l=mu(Bn(),2)[1],f=mu(Object(i.useState)({loading:!1,error:null}),2),p=f[0],d=f[1],y=mu(Object(i.useState)({changes:{}}),2),h=y[0],v=y[1],m=mu(Object(i.useState)({changes:{},isCheckAll:!1,isDirty:!1}),2),b=m[0],g=m[1],O=function(){var e=vu(a.a.mark((function e(){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.businesses(t.id).save(h.changes,{accessToken:s.token});case 3:if(n=e.sent,r=n.content,i=r.error,u=r.result,i){e.next=11;break}return e.abrupt("return",u);case 11:throw{message:i};case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=vu(a.a.mark((function e(n,r){var i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s.token)},body:JSON.stringify({enabled:r})},e.next=4,fetch("".concat(o.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones/").concat(n),i);case 4:return u=e.sent,e.next=7,u.json();case 7:if((c=e.sent).error){e.next=12;break}return e.abrupt("return",c.result);case 12:throw{message:c.result};case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=vu(a.a.mark((function e(){var n,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c(Dr.Info,l("LOADING","Loading")),d({loading:!0,error:null}),!Object.keys(b.changes).length){e.next=15;break}n=a.a.mark((function e(n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=parseInt(n),(null==(i=null==t||null===(r=t.zones)||void 0===r?void 0:r.find((function(e){return e.id===o})))?void 0:i.enabled)===b.changes[n]){e.next=5;break}return e.next=5,w(o,b.changes[n]);case 5:case"end":return e.stop()}}),e)})),e.t0=a.a.keys(b.changes);case 6:if((e.t1=e.t0()).done){e.next=11;break}return o=e.t1.value,e.delegateYield(n(o),"t2",9);case 9:e.next=6;break;case 11:g(du(du({},b),{},{isDirty:!1})),i=t.zones.filter((function(e){return void 0!==b.changes[e.id]&&(e.enabled=b.changes[e.id]),!0})),u=du(du({},t),{},{zones:i}),r(u);case 15:if(!Object.keys(h.changes).length){e.next=21;break}return e.next=18,O();case 18:s=e.sent,v({changes:{}}),r(s);case 21:d({loading:!1,error:null}),c(Dr.Success,l("BUSINESS_UPDATED","Business updated")),e.next=28;break;case 25:e.prev=25,e.t3=e.catch(0),d({loading:!1,error:[e.t3.message]});case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=0;for(var t in b.changes)b.changes[t]&&(e+=1);g(du(du({},b),{},{isCheckAll:Object.keys(b.changes).length===e}))}),[b.changes]),Object(i.useEffect)((function(){var e,n=(null==t||null===(e=t.zones)||void 0===e?void 0:e.filter((function(e){return 3!==(null==e?void 0:e.type)})))||[],r={};n.forEach((function(e){r[e.id]=e.enabled})),g(du(du({},b),{},{changes:r}))}),[null==t?void 0:t.zones]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,fu({},e,{actionState:p,formState:h,zoneListState:b,handleChangeForm:function(e){v({changes:du(du({},h.changes),e)})},onDeliveryStateSave:j,handleChangeAllZoneState:function(e){var t=du({},b.changes);for(var n in t)t[n]=e;g(du(du({},b),{},{changes:t,isCheckAll:e,isDirty:!0}))},handleChangeZoneState:function(e,t){g(du(du({},b),{},{changes:du(du({},b.changes),{},yu({},e,t)),isDirty:!0}))}})))};function Ou(){return Ou=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ou.apply(this,arguments)}function wu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Au(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function ju(e){return function(e){if(Array.isArray(e))return Tu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Au(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Su(Object(n),!0).forEach((function(t){Pu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cu(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Iu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Cu(a,r,o,i,u,"next",e)}function u(e){Cu(a,r,o,i,u,"throw",e)}i(void 0)}))}}function xu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Au(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Au(e,t){if(e){if("string"==typeof e)return Tu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tu(e,t):void 0}}function Tu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gu.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var _u=function(e){var t=e.business,n=e.zone,r=e.UIComponent,o=e.handleSuccessUpdate,s=xu(rn(),1)[0],c=xu(yn(),1)[0].token,l=xu(Br(),2)[1].showToast,f=xu(Bn(),2)[1],p=xu(Object(i.useState)({zone:n}),2),d=p[0],y=p[1],h=xu(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=h[0],m=h[1],b=xu(Object(i.useState)(null),2),g=b[0],O=b[1],w=function(){var e=Iu(a.a.mark((function e(){var r,i,u,p,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Eu({},v.changes),r=Eu(Eu({},r),{},{data:JSON.stringify(v.changes.data)}),l(Dr.Info,f("LOADING","Loading")),m(Eu(Eu({},v),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(r)},e.next=8,fetch("".concat(s.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones/").concat(n.id),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(p=e.sent).error?m(Eu(Eu({},v),{},{loading:!1,error:p.result})):(m(Eu(Eu({},v),{},{loading:!1,changes:{}})),d=t.zones.filter((function(e){return(null==e?void 0:e.id)===n.id&&Object.assign(n,p.result),!0})),y=Eu(Eu({},t),{},{zones:d}),o&&o(y),l(Dr.Success,f("DELIVERYZONE_SAVED","Delivery zone saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m(Eu(Eu({},v),{},{loading:!1,error:[e.t0.message]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var n=Iu(a.a.mark((function n(){var r,i,u,p,d,y,h;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=Eu({},v.changes),i=Eu(Eu({},i),{},{data:JSON.stringify(v.changes.data),type:(null===(r=v.changes)||void 0===r?void 0:r.type)||2,enabled:!0,schedule:JSON.stringify([{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]}])}),l(Dr.Info,f("LOADING","Loading")),m(Eu(Eu({},v),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(i)},n.next=8,fetch("".concat(s.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones"),u);case 8:return p=n.sent,n.next=11,p.json();case 11:(d=n.sent).error?m(Eu(Eu({},v),{},{loading:!1,error:d.result})):(m(Eu(Eu({},v),{},{changes:{},loading:!1})),y=[].concat(ju(t.zones),[d.result]),h=Eu(Eu({},t),{},{zones:y}),o&&o(h),l(Dr.Success,f("DELIVERYZONE_ADDED","Delivery zone added")),e.onClose&&e.onClose()),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),m(Eu(Eu({},v),{},{error:n.t0.message,loading:!1}));case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(){return n.apply(this,arguments)}}(),S=function(){var r=Iu(a.a.mark((function r(){var i,u,p,d,y;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,l(Dr.Info,f("LOADING","Loading")),m(Eu(Eu({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},r.next=6,fetch("".concat(s.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones/").concat(n.id),i);case 6:return u=r.sent,r.next=9,u.json();case 9:(p=r.sent).error?m(Eu(Eu({},v),{},{loading:!1,error:p.result})):(d=t.zones.filter((function(e){return(null==e?void 0:e.id)!==n.id})),m(Eu(Eu({},v),{},{loading:!1})),y=Eu(Eu({},t),{},{zones:d}),o&&o(y),l(Dr.Success,f("DELIVERYZONE_DELETED","Business delivery zone deleted")),e.onClose&&e.onClose()),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),m(Eu(Eu({},v),{},{loading:!1,error:[r.t0.message]}));case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(){return r.apply(this,arguments)}}(),E=function(e){var t=(new DOMParser).parseFromString(e,"text/xml"),n=[],r="";if("kml"===t.documentElement.nodeName){var o,a=wu(t.getElementsByTagName("Placemark"));try{for(a.s();!(o=a.n()).done;){var i=o.value;r=i.getElementsByTagName("name")[0].childNodes[0].nodeValue.trim();var u,s=wu(i.getElementsByTagName("Polygon"));try{for(s.s();!(u=s.n()).done;){var c,l=u.value.getElementsByTagName("coordinates")[0].childNodes[0].nodeValue.trim(),p=(l=l.replace(/\n/g," ").replace(/\s+/g," ")).split(" "),d=[],y=wu(p);try{for(y.s();!(c=y.n()).done;){var h=c.value.split(",");d.push({lat:+h[1],lng:+h[0]})}}catch(e){y.e(e)}finally{y.f()}n.push(d)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){a.e(e)}finally{a.f()}}else m(Eu(Eu({},v),{},{error:f("INVALID_KML_FILE","Invalid KML file")}));1===n.length?(m(Eu(Eu({},v),{},{changes:Eu(Eu({},v.changes),{},{type:2,name:r,data:n[0]})})),O(n[0])):m(Eu(Eu({},v),{},{error:f("INVALID_KML_FILE","Invalid KML file")}))};return Object(i.useEffect)((function(){m({loading:!1,changes:{},error:null}),y({zone:n})}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Ou({},e,{zoneState:d,formState:v,kmlData:g,handleChangeInput:function(e){m(Eu(Eu({},v),{},{changes:Eu(Eu({},v.changes),{},Pu({},e.target.name,e.target.value))}))},handleChangeFormState:function(e){m(Eu(Eu({},v),{},{changes:Eu(Eu({},v.changes),e)}))},handleDeleteBusinessDeliveryZone:S,handleUpdateBusinessDeliveryZone:w,handleAddBusinessDeliveryZone:j,handleUploadKmlFiles:function(e){if(1===e.length){var t=new window.FileReader;t.readAsText(e[0]),t.onload=function(){E(t.result)},t.onerror=function(e){return console.log(e)}}}})))};function ku(){return ku=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ku.apply(this,arguments)}function Du(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=zu(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Uu(e){return function(e){if(Array.isArray(e))return Gu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lu(Object(n),!0).forEach((function(t){Fu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ru(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Mu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ru(a,r,o,i,u,"next",e)}function u(e){Ru(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Nu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||zu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zu(e,t){if(e){if("string"==typeof e)return Gu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gu(e,t):void 0}}function Gu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}_u.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_u.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Yu=function(e){var t=e.UIComponent,n=e.business,r=e.zone,o=e.businesses,s=e.busienssesPropsToFetch,c=e.handleUpdateBusinessDeliveryZone,l=Nu(rn(),1)[0],f=Nu(yn(),1)[0].token,p=Nu(Bn(),2)[1],d=Nu(Br(),2)[1].showToast,y=Nu(Object(i.useState)({businesses:[],loading:!1,error:null}),2),h=y[0],v=y[1],m=Nu(Object(i.useState)({loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=Nu(Object(i.useState)([]),2),w=O[0],j=O[1],S=function(){var e=Mu(a.a.mark((function e(){var t,r,o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Bu(Bu({},h),{},{loading:!0})),t=l.setAccessToken(f).businesses().select(s).asDashboard(),e.next=5,t.get();case 5:r=e.sent,o=r.content,i=o.error,u=o.result,i||(c=u.filter((function(e){return e.id!==n.id})),v(Bu(Bu({},h),{},{businesses:c,loading:!1}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v(Bu(Bu({},h),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Mu(a.a.mark((function e(){var t,o,i,u,s,y,v,m,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Bu(Bu({},b),{},{loading:!0})),t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/deliveryzones/").concat(r.id,"?jbusinesses=").concat(w),t);case 6:return o=e.sent,e.next=9,o.json();case 9:if(!e.sent.error){i=[],u=Du(w);try{for(y=function(){var e,t=s.value;i.push({id:t,name:null===(e=h.businesses.find((function(e){return e.id===t})))||void 0===e?void 0:e.name,pivot:{business_id:t,zone_id:r.id}})},u.s();!(s=u.n()).done;)y()}catch(e){u.e(e)}finally{u.f()}v=Bu(Bu({},r),{},{businesses:i}),m=n.zones.filter((function(e){return e.id===v.id&&Object.assign(e,v),!0})),O=Bu(Bu({},n),{},{zones:m}),c&&c(O),g({loading:!1,result:{error:!1}}),d(Dr.Success,p("BUSINESS_SAVED","Business saved"))}e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g({loading:!1,result:{error:!1}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?v(Bu(Bu({},h),{},{businesses:o,loading:!1})):S()}),[o]),Object(i.useEffect)((function(){if(null!=r&&r.businesses){var e,t=null===(e=r.businesses)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Uu(e),[t.id])}),[]);j(t)}}),[r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,ku({},e,{businessesState:h,actionState:b,selectedBusinessIds:w,handleSelectBusiness:function(e,t){if(t)j([].concat(Uu(w),[e]));else{var n=w.filter((function(t){return t!==e}));j(n)}},handleSelectAllBusiness:function(e){if(e){var t,n=null===(t=h.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(Uu(e),[t.id])}),[]);j(n)}else j([])},handleShareBusinesses:E})))};function qu(){return qu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qu.apply(this,arguments)}function $u(e){return function(e){if(Array.isArray(e))return Qu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Zu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ju(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Vu(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ju(a,r,o,i,u,"next",e)}function u(e){Ju(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Hu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hu(Object(n),!0).forEach((function(t){Ku(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ku(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Zu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zu(e,t){if(e){if("string"==typeof e)return Qu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qu(e,t):void 0}}function Qu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yu.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Yu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var es=function(e){var t=e.asDashboard,n=e.business,r=e.businessId,o=e.propsToFetch,s=e.UIComponent,c=e.handleSucessUpdateBusiness,l=e.handleSucessRemoveBusiness,f=e.handleSucessAddBusiness,p=Xu(rn(),1)[0],d=Xu(yn(),1)[0],y=Xu(Br(),2)[1].showToast,h=Xu(Bn(),2)[1],v=Xu(Object(i.useState)({business:null,loading:!0,error:null}),2),m=v[0],b=v[1],g=Xu(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=Xu(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),S=j[0],E=j[1],P=function(){var e=Vu(a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Wu(Wu({},m),{},{loading:!0})),n=t?p.setAccessToken(d.token).businesses(r).asDashboard():p.setAccessToken(d.token).businesses(r).select(o),e.next=5,n.get();case 5:i=e.sent,u=i.content.result,s=Array.isArray(u)?null:u,b(Wu(Wu({},m),{},{loading:!1,business:s})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),b(Wu(Wu({},m),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Vu(a.a.mark((function e(t){var n,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(Wu(Wu({},O),{},{loading:!0})),e.next=5,p.setAccessToken(d.token).businesses(r).save({enabled:t});case 5:n=e.sent,o=n.content,i=o.error,u=o.result,w(Wu(Wu({},O),{},{loading:!1,error:i?u:null})),i||(b(Wu(Wu({},m),{},{business:Wu(Wu({},m.business),u)})),y(Dr.Success,h("BUSINESS_UPDATED","Business updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Wu(Wu({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var t=Vu(a.a.mark((function t(){var n,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,h("LOADING","Loading")),w(Wu(Wu({},O),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},t.next=6,fetch("".concat(p.root,"/business/").concat(r),n);case 6:return o=t.sent,t.next=9,o.json();case 9:i=t.sent,w(Wu(Wu({},O),{},{loading:!1,error:i.error?i.result:null})),i.error||(y(Dr.Success,h("BUSINESS_DELETED","Business deleted")),l&&l(r),e.onClose&&e.onClose()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),w(Wu(Wu({},O),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var e=Vu(a.a.mark((function e(){var t,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(Wu(Wu({},O),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},e.next=6,fetch("".concat(p.root,"/business/").concat(r,"/duplicate"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:o=e.sent,w(Wu(Wu({},O),{},{loading:!1,error:o.error?o.result:null})),o.error||(f&&f(null==o?void 0:o.result),y(Dr.Success,h("BUSINESS_DUPLICATED","Business duplicated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),w(Wu(Wu({},O),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Vu(a.a.mark((function e(t){var n,o,i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(Wu(Wu({},O),{},{loading:!0})),e.next=5,p.setAccessToken(d.token).businesses(r).save({owners:t});case 5:n=e.sent,o=n.content,i=o.error,u=o.result,w(Wu(Wu({},O),{},{loading:!1,error:i?u:null})),i||(c=null==m||null===(s=m.business)||void 0===s?void 0:s.owners.filter((function(e){return t.includes(e.id)})),l=Wu(Wu({},null==m?void 0:m.business),{},{owners:c}),b(Wu(Wu({},m),{},{business:l})),y(Dr.Success,h("BUSINESS_OWNER_DELETED","Business owner deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Wu(Wu({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Vu(a.a.mark((function e(t,n){var o,i,u,s,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(Wu(Wu({},O),{},{loading:!0})),e.next=5,p.setAccessToken(d.token).businesses(r).save({owners:t});case 5:o=e.sent,i=o.content,u=i.error,s=i.result,w(Wu(Wu({},O),{},{loading:!1,error:u?s:null})),u||(l=[].concat($u(null==m||null===(c=m.business)||void 0===c?void 0:c.owners),[n]),f=Wu(Wu({},null==m?void 0:m.business),{},{owners:l}),b(Wu(Wu({},m),{},{business:f})),y(Dr.Success,h("BUSINESS_OWNER_ADDED","Business owner added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Wu(Wu({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Vu(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(Wu(Wu({},S),{},{loading:!0})),y(Dr.Info,h("LOADING","Loading")),e.next=5,p.businesses(r).save(S.changes,{accessToken:d.token});case 5:t=e.sent,E(Wu(Wu({},S),{},{changes:t.content.error?S.changes:{},result:t.content,loading:!1})),t.content.error||(b(Wu(Wu({},m),{},{business:Wu(Wu({},m.business),t.content.result)})),y(Dr.Success,h("BUSINESS_UPDATED","Business updated"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),E(Wu(Wu({},S),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){null!=m&&m.business&&c&&c(null==m?void 0:m.business)}),[null==m?void 0:m.business]),Object(i.useEffect)((function(){n?b(Wu(Wu({},m),{},{loading:!1,business:n})):P()}),[r,n]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,qu({},e,{businessState:m,formState:S,setFormState:E,cleanFormState:function(e){return E(Wu(Wu({},S),e))},handleChangeActiveBusiness:C,handleDuplicateBusiness:x,handleDeleteBusiness:I,handleDeleteBusinessOwner:A,handleAddBusinessOwner:T,handleUpdateBusinessClick:_,handleUpdateBusinessState:function(e){var t=Wu({},null==m?void 0:m.business);Object.assign(t,e),b(Wu(Wu({},m),{},{business:t}))},handleSuccessAddBusinessItem:function(e,t){var n=[].concat($u(null==m?void 0:m.business[e]),[t]);b(Wu(Wu({},m),{},{business:Wu(Wu({},null==m?void 0:m.business),{},Ku({},e,n))}))},handleSuccessDeleteBusinessItem:function(e,t){var n=null==m?void 0:m.business[e].filter((function(e){return e.id!==t}));b(Wu(Wu({},m),{},{business:Wu(Wu({},null==m?void 0:m.business),{},Ku({},e,n))}))}})))};function ts(){return ts=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ts.apply(this,arguments)}function ns(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function rs(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ns(a,r,o,i,u,"next",e)}function u(e){ns(a,r,o,i,u,"throw",e)}i(void 0)}))}}function os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?os(Object(n),!0).forEach((function(t){is(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):os(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function is(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function us(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ss(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ss(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}es.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),businessId:c.a.oneOfType([c.a.number,c.a.string]),business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},es.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","address","alcohol","city","city_id","description","ribbon","delivery_price","distance","delivery_time","enabled","featured","food","gallery","groceries","header","laundry","logo","location","metafields","name","offers","open","owners","pickup_time","reviews","schedule","slug","types"]};var cs=function(e){var t,n,r=e.UIComponent,o=e.business,s=e.handleSuccessUpdate,c=e.handleSucessAddBusiness,l=e.handleUpdateBusinessState,f=us(rn(),1)[0],p=us(yn(),1)[0],d=us(tr(),1)[0].configs,y=us(Br(),2)[1].showToast,h=us(Bn(),2)[1],v=us(Object(i.useState)({loading:!1,business:null,error:null}),2),m=v[0],b=v[1],g=us(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),O=g[0],w=g[1],j=us(Object(i.useState)(null),2),S=j[0],E=j[1],P=null,C=null==d||null===(t=d.google_maps_api_key)||void 0===t?void 0:t.value,I={minimum:0,delivery_price:0,tax:0,tax_type:1,service_fee:0,enabled:!0,owner_id:null==p||null===(n=p.user)||void 0===n?void 0:n.id,schedule:[{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]}]},x=function(e){b(as(as({},m),{},{business:as(as({},m.business),e.content.result)})),s&&s(e.content.result),l&&l(e.content.result)},A=function(){var e=rs(a.a.mark((function e(){var t,n,r,i,u,s,c,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(as(as({},O),{},{loading:!0})),t=as({},O.changes),e.next=6,f.businesses(null==o?void 0:o.id).save(t,{accessToken:p.token});case 6:if(n=e.sent,r=as({},O.changes),w(as(as({},O),{},{changes:n.content.error?O.changes:{},result:n.content,loading:!1})),n.content.error){e.next=20;break}if(void 0===(null==r||null===(i=r.ribbon)||void 0===i?void 0:i.enabled)||null!=r&&null!==(u=r.ribbon)&&void 0!==u&&u.enabled||null===(s=n.content)||void 0===s||null===(c=s.result)||void 0===c||null===(l=c.ribbon)||void 0===l||!l.enabled){e.next=18;break}return d={ribbon:{enabled:!1}},e.next=14,f.businesses(null==o?void 0:o.id).save(d,{accessToken:p.token});case 14:v=e.sent,x(v),e.next=19;break;case 18:x(n);case 19:y(Dr.Success,h("BUSINESS_UPDATED","Business updated"));case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),w(as(as({},O),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=rs(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(as(as({},O),{},{loading:!0})),t=as(as({},O.changes),I),e.next=5,f.businesses().save(t,{accessToken:p.token});case 5:n=e.sent,w(as(as({},O),{},{changes:n.content.error?O.changes:{},result:n.content,loading:!1})),n.content.error||(b(as(as({},m),{},{business:as(as({},m.business),n.content.result)})),c&&c(n.content.result)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),w(as(as({},O),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=rs(a.a.mark((function e(t,n){var r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Date,o=Math.floor(r.getTime()/1e3),i="https://maps.googleapis.com/maps/api/timezone/json?location=".concat(t,",").concat(n,"&timestamp=").concat(o,"&key=").concat(C),e.next=5,fetch(i,{method:"GET"});case 5:return u=e.sent,e.next=8,u.json();case 8:return s=e.sent,e.abrupt("return",null==s?void 0:s.timeZoneId);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=rs(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(null==t||null===(n=t.location)||void 0===n?void 0:n.lat,null==t||null===(r=t.location)||void 0===r?void 0:r.lng);case 2:o=e.sent,E({address:null==t?void 0:t.address,location:as(as({},null==t?void 0:t.location),{},{zipcode:null!=t&&t.zipcode?t.zipcode:-1,zoom:15}),timezone:o});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){S&&w(as(as({},O),{},{changes:as(as({},null==O?void 0:O.changes),S)}))}),[S]),Object(i.useEffect)((function(){o&&b(as(as({},m),{},{business:o}))}),[o]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,ts({},e,{cleanFormState:function(e){return w(as(as({},O),e))},formState:O,businessState:m,setFormState:w,handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=as(as({},n),{},is({},e.name,e.value))})):n=is({},e.target.name,e.target.value),w(as(as({},O),{},{changes:as(as({},O.changes),n)}))},handleButtonUpdateClick:A,handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){w(as(as({},O),{},{changes:as(as({},O.changes),{},is({},t,n.result))}))},n.onerror=function(e){return console.log(e)}},handleAddBusiness:T,handleChangeAddress:k,handleChangeCenter:function(e){var t;clearTimeout(P),P=setTimeout(rs(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_(null==e?void 0:e.lat(),null==e?void 0:e.lng());case 2:t=n.sent,E({location:{lat:null==e?void 0:e.lat(),lng:null==e?void 0:e.lng(),zoom:15,zipcode:-1},timezone:t});case 4:case"end":return n.stop()}}),n)}))),200)},handleChangeSwtich:function(e,t){var n=as(as({},O.changes),{},is({},e,t));w(as(as({},O),{},{changes:n}))},handleChangeRibbon:function(e){var t,n,r=null!=O&&null!==(t=O.changes)&&void 0!==t&&t.ribbon?as(as({},null==O||null===(n=O.changes)||void 0===n?void 0:n.ribbon),e):as({},e),o=as(as({},null==O?void 0:O.changes),{},{ribbon:r});w(as(as({},O),{},{changes:o}))}})))};function ls(){return ls=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ls.apply(this,arguments)}function fs(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ps(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){fs(a,r,o,i,u,"next",e)}function u(e){fs(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(n),!0).forEach((function(t){hs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ms(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ms(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cs.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cs.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bs=function(e){var t=e.business,n=e.isVideoGallery,r=e.isImageGallery,o=e.UIComponent,s=e.handleSucessAddBusinessGallery,c=e.handleSucessDeleteBusinessGallery,l=vs(rn(),1)[0],f=vs(yn(),1)[0].token,p=vs(Br(),2)[1].showToast,d=vs(Bn(),2)[1],y=vs(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),h=y[0],v=y[1],m=vs(Object(i.useState)([]),2),b=m[0],g=m[1],O=vs(Object(i.useState)([]),2),w=O[0],j=O[1],S=function(){var e=ps(a.a.mark((function e(){var o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),v(ys(ys({},h),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(h.changes)},e.next=6,fetch("".concat(l.root,"/business/").concat(t.id,"/gallery"),o);case 6:return i=e.sent,e.next=9,i.json();case 9:u=e.sent,v(ys(ys({},h),{},{changes:u.error?h.changes:{},result:u,loading:!1})),u.error||(n&&p(Dr.Success,d("GALLERY_VIDEO_ADDED")),r&&p(Dr.Success,d("GALLERY_IMAGE_ADDED")),s&&s(u.result)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v(ys(ys({},h),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=ps(a.a.mark((function e(n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),v(ys(ys({},h),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(t.id,"/gallery/").concat(n,"?business_id=").concat(t.id),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,v(ys(ys({},h),{},{loading:!1})),i.error||(p(Dr.Success,d("GALLERY_ITEM_DELETED")),c&&c(n)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v(ys(ys({},h),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,n,r=null==t||null===(e=t.gallery)||void 0===e?void 0:e.filter((function(e){return e.file})),o=null==t||null===(n=t.gallery)||void 0===n?void 0:n.filter((function(e){return e.video}));g(r),j(o)}),[t]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,ls({},e,{businessSchedule:(null==t?void 0:t.schedule)||[],businessPhotos:b||[],businessVideos:w||[],formState:h,handlechangeImage:function(e){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){v(ys(ys({},h),{},{changes:ys(ys({},h.changes),{},{business_id:t.id,file:n.result,type:1})}))},n.onerror=function(e){return console.log(e)}},cleanFormState:function(e){return v(ys(ys({},h),e))},handleChangeBusinessVideo:function(e){v(ys(ys({},h),{},{changes:ys(ys({},h.changes),{},{business_id:null==t?void 0:t.id,type:2,video:e.target.value})}))},handleUpdateBusinessGallery:S,handleDeleteBusinessGallery:E})))};function gs(){return gs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gs.apply(this,arguments)}function Os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ws(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(n),!0).forEach((function(t){js(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Os(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function js(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ss(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Es(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ps(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ps(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bs.propTypes={UIComponent:c.a.elementType,business:c.a.object,optionToShow:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bs.defaultProps={business:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Cs=function(e){var t=e.UIComponent,n=Es(yn(),1)[0],r=n.token,o=n.loading,s=Es(rn(),1)[0],c=Es(Object(i.useState)({loading:!1,printers:[],error:null}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,n,i,u,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(ws(ws({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n="".concat(s.root,"/printers"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,c=u.error,p=u.result,f(ws(ws({},l),{},c?{loading:!1,error:p}:{loading:!1,printers:p})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),f(ws(ws({},l),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ss(a,r,o,i,u,"next",e)}function u(e){Ss(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,gs({},e,{printersListState:l})))};function Is(){return Is=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Is.apply(this,arguments)}function xs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return As(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return As(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function As(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Cs.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Cs.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ts=function(e){var t=e.googleMapsControls,n=e.business,r=e.optionToShow,o=e.UIComponent,a=xs(Object(i.useState)(r),2),s=a[0],c=a[1],l=xs(Object(i.useState)([]),2),f=l[0],p=l[1],d=xs(Object(i.useState)([]),2),y=d[0],h=d[1],v=xs(Object(i.useState)({}),2),m=v[0],b=v[1];return Object(i.useEffect)((function(){var e,r,o=null==n||null===(e=n.gallery)||void 0===e?void 0:e.filter((function(e){return e.file})),a=null==n||null===(r=n.gallery)||void 0===r?void 0:r.filter((function(e){return e.video})),i={location:null==n?void 0:n.location,address:null==n?void 0:n.address,address_notes:null==n?void 0:n.address_notes,googleMapsControls:t};p(o),h(a),b(i)}),[n]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Is({},e,{businessSchedule:(null==n?void 0:n.schedule)||[],businessPhotos:f||[],businessVideos:y||[],businessLocation:m||{},optionToShow:s,onChangeOption:function(e){c(e)}})))};function _s(){return _s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_s.apply(this,arguments)}function ks(e){return function(e){if(Array.isArray(e))return Ms(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Rs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Us(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ds(Object(n),!0).forEach((function(t){Ls(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ls(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bs(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Fs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Rs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rs(e,t){if(e){if("string"==typeof e)return Ms(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ms(e,t):void 0}}function Ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ts.propTypes={UIComponent:c.a.elementType,business:c.a.object,optionToShow:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ts.defaultProps={business:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},Yn.a.extend($n.a);var Ns=function(e){var t=e.UIComponent,n=e.initialOrderType,r=e.initialFilterKey,o=e.initialFilterValue,s=e.isSortByReview,c=e.isSearchByName,l=e.isSearchByDescription,f=e.propsToFetch,p=e.onBusinessClick,d=Fs(Object(i.useState)({businesses:[],loading:!0,error:null}),2),y=d[0],h=d[1],v=Fs(Object(i.useState)({currentPage:0,pageSize:10,totalItems:null,totalPages:null}),2),m=v[0],b=v[1],g=Fs(Object(i.useState)(null),2),O=g[0],w=g[1],j=Fs(Object(i.useState)(""),2),S=j[0],E=j[1],P=Fs(Object(i.useState)(null),2),C=P[0],I=P[1],x=Fs(vr(),1)[0],A=Fs(rn(),1)[0],T=Fs(Object(i.useState)({}),2),_=T[0],k=T[1],D=new RegExp(/^[A-Za-z0-9\s]+$/g),U=function(){var e,t=(e=a.a.mark((function e(t){var r,o,i,u,p,d,v,g,w,j,E,P,I,T,U,L,B,F,R,M,N,z,G,Y,q,$,J,V;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Us(Us({},y),{},{loading:!0})),j={location:"".concat(null===(r=x.options)||void 0===r||null===(o=r.address)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.lat,",").concat(null===(u=x.options)||void 0===u||null===(p=u.address)||void 0===p||null===(d=p.location)||void 0===d?void 0:d.lng),type:n||(null===(v=x.options)||void 0===v?void 0:v.type)||1},s||(E={page:t?1:m.currentPage+1,page_size:m.pageSize},j=Us(Us({},j),E)),null!==(g=x.options)&&void 0!==g&&g.moment&&(a=null===(w=x.options)||void 0===w?void 0:w.moment,H="YYYY-MM-DD HH:mm:ss",Yn()(a,H).format(H)===a)&&(I=Yn.a.utc(null===(P=x.options)||void 0===P?void 0:P.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),j.timestamp=I),T=null,U=[],O&&U.push({attribute:O,value:!0}),C&&(1===(null===(L=x.options)||void 0===L?void 0:L.type)&&U.push({attribute:"delivery_time",value:{condition:"<=",value:C}}),2===(null===(B=x.options)||void 0===B?void 0:B.type)&&U.push({attribute:"pickup_time",value:{condition:"<=",value:C}})),S&&(F=[],R=D.test(S),c&&F.push({attribute:"name",value:{condition:"ilike",value:R?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),l&&F.push({attribute:"description",value:{condition:"ilike",value:R?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),U.push({conector:"OR",conditions:F})),U.length&&(T={conditions:U,conector:"AND"}),M={},_.businesses=M,k(Us({},_)),N=T?A.businesses().select(f).parameters(j).where(T):A.businesses().select(f).parameters(j),e.next=17,N.get({cancelToken:M});case 17:z=e.sent,G=z.content,Y=G.result,q=G.pagination,s?($=Y.sort((function(e,t){return t.reviews.total-e.reviews.total})),y.businesses=$):y.businesses=t?Y:[].concat(ks(y.businesses),ks(Y)),h(Us(Us({},y),{},{loading:!1})),J=0,q.current_page!==q.total_pages&&(V=q.total-y.businesses.length,J=V<q.page_size?V:q.page_size),b(Us(Us({},m),{},{currentPage:q.current_page,totalPages:q.total_pages,totalItems:q.total,nextPageItems:J})),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&h(Us(Us({},y),{},{loading:!1,error:[e.t0.message]}));case 31:case"end":return e.stop()}var a,H}),e,null,[[0,28]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Bs(a,r,o,i,u,"next",e)}function u(e){Bs(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=_.businesses;return function(){e&&e.cancel()}}),[_.businesses]),Object(i.useEffect)((function(){var e,t;!x.loading&&null!==(e=x.options)&&void 0!==e&&null!==(t=e.address)&&void 0!==t&&t.location&&U(!0)}),[JSON.stringify(x.options),O,S,C]),Object(i.useEffect)((function(){if(r||o)switch(r){case"category":L(o);break;case"timeLimit":F(o);break;case"search":B(o)}}),[r,o]);var L=function(e){e!==O&&(h(Us(Us({},y),{},{businesses:[],loading:!0})),w(e))},B=function(e){h(Us(Us({},y),{},!!e!=!!S?{businesses:[],loading:!0}:{loading:!1})),E(e)},F=function(e){h(Us(Us({},y),{},!!e!=!!C?{businesses:[],loading:!0}:{loading:!1})),I(e)};return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_s({},e,{businessesList:y,paginationProps:m,searchValue:S,timeLimitValue:C,businessTypeSelected:O,getBusinesses:U,handleChangeSearch:B,handleChangeTimeLimit:F,handleBusinessClick:function(e){p&&p(e)},handleChangeBusinessType:L})))};function zs(){return zs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zs.apply(this,arguments)}function Gs(e){return function(e){if(Array.isArray(e))return Ks(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ws(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ys(Object(n),!0).forEach((function(t){$s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Js(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Vs(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Js(a,r,o,i,u,"next",e)}function u(e){Js(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Hs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ws(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ws(e,t){if(e){if("string"==typeof e)return Ks(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ks(e,t):void 0}}function Ks(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ns.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),onBusinessClick:c.a.func},Ns.defaultProps={propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var Xs=function(e){var t=e.UIComponent,n=e.userId,r=e.busienssesPropsToFetch,o=Hs(rn(),1)[0],s=Hs(yn(),1)[0].token,c=Hs(Bn(),2)[1],l=Hs(Br(),2)[1].showToast,f=Hs(Object(i.useState)({businesses:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=Hs(Object(i.useState)([]),2),h=y[0],v=y[1],m=Hs(Object(i.useState)({loading:!1,error:null}),2),b=m[0],g=m[1],O=function(){var e=Vs(a.a.mark((function e(){var t,r,i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(qs(qs({},b),{},{loading:!0})),t=o.setAccessToken(s).users(n).select(["businesses"]),e.next=5,t.get();case 5:r=e.sent,i=r.content,u=i.error,c=i.result,u?g({loading:!1,error:c}):(g({loading:!1,error:null}),f=null===(l=c.businesses)||void 0===l?void 0:l.reduce((function(e,t){return[].concat(Gs(e),[t.id])}),[]),v(f)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Vs(a.a.mark((function e(){var t,n,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(qs(qs({},p),{},{loading:!0})),t=o.setAccessToken(s).businesses().select(r).asDashboard(),e.next=5,t.get();case 5:n=e.sent,i=n.content,u=i.error,c=i.result,u||d(qs(qs({},p),{},{businesses:c,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(qs(qs({},p),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Vs(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),g({loading:!0,error:null}),e.next=5,o.setAccessToken(s).users(n).save({businesses:h});case 5:t=e.sent,r=t.content,i=r.error,u=r.result,i?g({loading:!1,error:u}):(g({loading:!1,error:null}),l(Dr.Success,c("BUSINESS_SAVED","Business saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){e.businesses?d(qs(qs({},p),{},{businesses:e.businesses,loading:!1})):w()}),[e.businesses]),Object(i.useEffect)((function(){O()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,zs({},e,{actionState:b,businessesState:p,selectedBusinessIds:h,handleSelectBusiness:function(e,t){if(t)v([].concat(Gs(h),[e]));else{var n=h.filter((function(t){return t!==e}));v(n)}},handleSelectAllBusiness:function(e){if(e){var t,n=null===(t=p.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(Gs(e),[t.id])}),[]);v(n)}else v([])},handleUpdateBusinesses:j})))};function Zs(){return Zs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zs.apply(this,arguments)}function Qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ec(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qs(Object(n),!0).forEach((function(t){tc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nc(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function rc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){nc(a,r,o,i,u,"next",e)}function u(e){nc(a,r,o,i,u,"throw",e)}i(void 0)}))}}function oc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ac(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ac(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ac(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Xs.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xs.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var ic=function(e){var t=e.business,n=e.UIComponent,r=e.handleSuccessBusinessMenu,o=oc(rn(),1)[0],s=oc(yn(),1)[0].token,c=oc(Bn(),2)[1],l=oc(Br(),2)[1].showToast,f=oc(Object(i.useState)({menus:[],menusShared:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=oc(Object(i.useState)(!1),2),h=y[0],v=y[1],m=oc(Object(i.useState)({sites:[],loading:!0,error:null}),2),b=m[0],g=m[1],O=function(){var e=rc(a.a.mark((function e(){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(ec(ec({},p),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/business/").concat(t.id,"/menus"),n);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?d(ec(ec({},p),{},{loading:!1,error:i.result})):d(ec(ec({},p),{},{loading:!1,menus:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(ec(ec({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=rc(a.a.mark((function e(n,i){var u,f,y,v,m,b,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(ec(ec({},p),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({enabled:i})},f=h?"".concat(o.root,"/business/").concat(t.id,"/menus_shared/").concat(n):"".concat(o.root,"/business/").concat(t.id,"/menus/").concat(n),e.next=7,fetch(f,u);case 7:return y=e.sent,e.next=10,y.json();case 10:(v=e.sent).error?d(ec(ec({},p),{},{loading:!1,error:v.result})):(m={},h?(g=p.menusShared.filter((function(e){var t;e.id===n&&(e=ec(ec(ec({},e),v.result),{},{id:null===(t=e)||void 0===t?void 0:t.id}));return!0})),d(ec(ec({},p),{},{loading:!1,menusShared:g})),m=ec(ec({},t),{},{menus_shared:g})):(b=p.menus.filter((function(e){return e.id===n&&Object.assign(e,v.result),!0})),d(ec(ec({},p),{},{loading:!1,menus:b})),m=ec(ec({},t),{},{menus:b})),r&&r(m),l(Dr.Success,c("MENU_SAVED","Products catalog saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(ec(ec({},p),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=rc(a.a.mark((function e(n){var i,u,f,y,v,m,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(ec(ec({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},u=h?"".concat(o.root,"/business/").concat(t.id,"/menus_shared/").concat(n):"".concat(o.root,"/business/").concat(t.id,"/menus/").concat(n),e.next=7,fetch(u,i);case 7:return f=e.sent,e.next=10,f.json();case 10:(y=e.sent).error?d(ec(ec({},p),{},{loading:!1,error:y.result})):(v={},h?(b=p.menusShared.filter((function(e){return e.id!==n})),d(ec(ec({},p),{},{loading:!1,menusShared:b})),v=ec(ec({},t),{},{menus_shared:b})):(m=p.menus.filter((function(e){return e.id!==n})),d(ec(ec({},p),{},{loading:!1,menus:m})),v=ec(ec({},t),{},{menus:m})),r&&r(v),l(Dr.Success,c("MENU_DELETED","Products catalog deleted"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(ec(ec({},p),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=rc(a.a.mark((function e(){var n,r,i,u,c,l,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=4,fetch("".concat(o.root,"/business/").concat(t.id,"/menus?params=sites"),n);case 4:return r=e.sent,e.next=7,r.json();case 7:if(i=e.sent,u=i.result,i.error){e.next=29;break}return c={},u.forEach((function(e){c=ec(ec({},c),{},tc({},e.id,{id:e.id,sites:e.sites}))})),e.prev=13,e.next=16,fetch("".concat(o.root,"/sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s),"x-app-x":null==o?void 0:o.appId}});case 16:return l=e.sent,e.next=19,l.json();case 19:f=e.sent,y=f.result,g(ec(ec({},b),{},{loading:!1,sites:y})),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(13),d(ec(ec({},p),{},{loading:!1,error:[e.t0.message]}));case 27:e.next=30;break;case 29:d(ec(ec({},p),{},{loading:!1,error:u}));case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),d(ec(ec({},p),{},{loading:!1,error:[e.t1.message]}));case 35:case"end":return e.stop()}}),e,null,[[0,32],[13,24]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){null!=t&&t.menus?d(ec(ec({},p),{},{menus:null==t?void 0:t.menus,menusShared:null==t?void 0:t.menus_shared})):O()}),[t]),Object(i.useEffect)((function(){S()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Zs({},e,{businessMenusState:p,isSelectedSharedMenus:h,sitesState:b,handleChangeBusinessMenuActiveState:w,handleDeleteBusinessMenu:j,setIsSelectedSharedMenus:v})))};function uc(){return uc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uc.apply(this,arguments)}function sc(e){return function(e){if(Array.isArray(e))return vc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||hc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cc(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function lc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){cc(a,r,o,i,u,"next",e)}function u(e){cc(a,r,o,i,u,"throw",e)}i(void 0)}))}}function fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fc(Object(n),!0).forEach((function(t){dc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||hc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hc(e,t){if(e){if("string"==typeof e)return vc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vc(e,t):void 0}}function vc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ic.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ic.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mc=function(e){var t,n=e.isSearchByName,r=e.isSearchByDescription,o=e.slug,s=e.categoryId,c=e.productId,l=e.isAllCategoryProducts,f=e.isInitialRender,p=e.ordering,d=e.UIComponent,y=yc(yn(),1)[0].token,h=yc(zn(),1)[0],v=yc(Object(i.useState)(null),2),m=v[0],b=v[1],g=yc(Object(i.useState)(null),2),O=g[0],w=g[1],j=yc(Object(i.useState)({business:{},menus:null,loading:!0,error:null}),2),S=j[0],E=j[1],P=yc(Object(i.useState)({}),2),C=P[0],I=P[1],x=yc(Object(i.useState)({}),2),A=x[0],T=x[1],_=yc(Object(i.useState)({product:null,loading:!1,error:null}),2),k=_[0],D=_[1],U=yc(Object(i.useState)({values:[]}),2),L=U[0],B=U[1],F=yc(Object(i.useState)(o),2),R=F[0],M=F[1],N=yc(Object(i.useState)(!1),2),z=N[0],G=N[1],Y=yc(Object(i.useState)({}),2),q=Y[0],$=Y[1],J=yc(Object(i.useState)({}),2),V=J[0],H=J[1],W=yc(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),K=W[0],X=W[1],Z=yc(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),Q=Z[0],ee=Z[1],te={loading:!0,pagination:{currentPage:0,pageSize:10,totalItems:null,totalPages:0,nextPageItems:10},products:[]},ne=yc(Object(i.useState)(te),2),re=ne[0],oe=ne[1],ae=yc(Object(i.useState)(null),2),ie=ae[0],ue=ae[1],se=yc(Object(i.useState)(!1),2),ce=se[0],le=se[1],fe=function(e,t){return!O||(e&&e.toLowerCase().includes(O.toLowerCase())&&n||t&&t.toLowerCase().includes(O.toLowerCase())&&r)},pe=function(){var e=lc(a.a.mark((function e(t,o,i){var u,s,c,l,f,d,y,h,v,b,g,w,j,E,P,x,_,k,D,U,L,B,F,R,M,N,G,Y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=S&&null!==(u=S.business)&&void 0!==u&&u.lazy_load_products_recommended){e.next=5;break}return s=pc(pc({},te),{},{loading:!1}),m?(sc(null==S||null===(c=S.business)||void 0===c?void 0:c.categories).forEach((function e(t){(null==t?void 0:t.id)===(null==m?void 0:m.id)&&(d=t),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),(y=null===(l=d)||void 0===l||null===(f=l.products)||void 0===f?void 0:f.filter((function(e){return fe(e.name,e.description)})))||(y=null==m||null===(h=m.products)||void 0===h?void 0:h.filter((function(e){return fe(e.name,e.description)}))),s.products=y||[]):(g=null==S||null===(v=S.business)||void 0===v||null===(b=v.categories)||void 0===b?void 0:b.reduce((function(e,t){return t.products?[].concat(sc(e),sc(t.products)):sc(e)}),[]).filter((function(e){return fe(e.name,e.description)})),s.products=g||[]),oe(pc({},s)),e.abrupt("return");case 5:return w=O?"search":"featured"===(null==m?void 0:m.id)?"featured":null!=m&&m.id?"categoryId:".concat(null==m?void 0:m.id):"all",j=C[w]||te,E=j.pagination,z||oe(pc(pc({},j),{},{loading:!0})),P={page:o||(t?1:E.currentPage+1),page_size:i||E.pageSize},null,_=[],O&&(n&&_.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}),r&&_.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}})),x={conditions:_,conector:"OR"},e.prev=14,U=null!=m&&m.id&&"featured"!==(null==m?void 0:m.id)?p.businesses(null===(k=S.business)||void 0===k?void 0:k.id).categories(null==m?void 0:m.id).products():p.businesses(null===(D=S.business)||void 0===D?void 0:D.id).products(),L={},A.products=L,T(pc({},A)),B=x.conditions.length>0?U.parameters(P).where(x):U.parameters(P),e.next=22,B.get({cancelToken:L});case 22:F=e.sent,R=F.content,M=R.error,N=R.result,G=R.pagination,M?ue(N):(Y={pagination:pc(pc({},j.pagination),{},{pageSize:0===G.page_size?j.pagination.pageSize:G.page_size,currentPage:G.current_page,totalItems:G.total,totalPages:G.total_pages}),loading:!1,products:t?sc(N):[].concat(sc(j.products),sc(N))},C[w]=Y,oe(pc({},Y)),I(pc({},C))),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(14),ue([e.t0.message]);case 33:case"end":return e.stop()}}),e,null,[[14,30]])})));return function(t,n,r){return e.apply(this,arguments)}}(),de=function(){var e=lc(a.a.mark((function e(){var t,n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s&&c&&null!==(t=S.business)&&void 0!==t&&t.id)){e.next=16;break}return e.prev=1,D(pc(pc({},k),{},{loading:!0})),r={},A.product=r,e.next=7,p.businesses(null===(n=S.business)||void 0===n?void 0:n.id).categories(s).products(c).get({cancelToken:r});case 7:o=e.sent,i=o.content.result,u=Array.isArray(i)?null:i,D(pc(pc({},k),{},{product:u,loading:!1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),D(pc(pc({},k),{},{loading:!1,error:[e.t0]}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=lc(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},X(pc(pc({},K),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/taxes"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(r=e.sent,o=r.error,i=r.result,o){e.next=14;break}return i.forEach((function(e){return t["id:".concat(null==e?void 0:e.id)]=e})),$(t),e.abrupt("return");case 14:X(pc(pc({},K),{},{result:{error:!0,result:t},loading:!1}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=lc(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},ee(pc(pc({},Q),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/fees"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(r=e.sent,o=r.error,i=r.result,o){e.next=14;break}return i.forEach((function(e){return t["id:".concat(null==e?void 0:e.id)]=e})),H(t),e.abrupt("return");case 14:ee(pc(pc({},Q),{},{result:{error:!0,result:t},loading:!1}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){f&&de()}),[JSON.stringify(null===(t=S.business)||void 0===t?void 0:t.id),f]),Object(i.useEffect)((function(){M(o)}),[o]);var ve=function(){var e=lc(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(pc(pc({},S),{},{loading:!0})),n={},A.business=n,T(pc({},A)),e.next=7,p.businesses(R).asDashboard().get();case 7:r=e.sent,null!=(o=r.content.result)&&o.categories&&0!==(null==o||null===(t=o.categories)||void 0===t?void 0:t.length)||le(!0),E(pc(pc({},S),{},{business:o,loading:!1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),E(pc(pc({},S),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),me=function(e){var t,n=e.tax,r=e.isRemove,o=(e.id,sc(null==S||null===(t=S.business)||void 0===t?void 0:t.categories));E(pc(pc({},S),{},{business:pc(pc({},S.business),{},{categories:function e(t,n){for(var o=0;o<(null==t?void 0:t.length);o++){for(var a,i=t[o],u=0;u<i.products.length;u++){var s,c,l=i.products[u];r&&(null===(s=l.tax)||void 0===s?void 0:s.id)===(null==n?void 0:n.id)?(l.tax=null,l.tax_id=null):l.tax&&(null===(c=l.tax)||void 0===c?void 0:c.id)===(null==n?void 0:n.id)&&(Object.assign(l.tax,n),l.tax_id=null==n?void 0:n.id)}(null===(a=i.subcategories)||void 0===a?void 0:a.length)>0&&(t.subcategories=e(t.subcategories,n))}return t}(o,n)})}))},be=function(e){var t,n=e.fee,r=e.isRemove,o=sc(null==S||null===(t=S.business)||void 0===t?void 0:t.categories);E(pc(pc({},S),{},{business:pc(pc({},S.business),{},{categories:function e(t,n){for(var o=0;o<(null==t?void 0:t.length);o++){for(var a,i=t[o],u=0;u<i.products.length;u++){var s,c,l=i.products[u];r&&(null===(s=l.fee)||void 0===s?void 0:s.id)===(null==n?void 0:n.id)?(l.fee=null,l.fee_id=null):l.fee&&(null===(c=l.fee)||void 0===c?void 0:c.id)===(null==n?void 0:n.id)&&(Object.assign(l.fee,n),l.fee_id=null==n?void 0:n.id)}(null===(a=i.subcategories)||void 0===a?void 0:a.length)>0&&(t.subcategories=e(t.subcategories,n))}return t}(o,n)})}))};return Object(i.useEffect)((function(){var e;if(!S.loading)if(S.loading||!m&&!l){if(null!=S&&null!==(e=S.business)&&void 0!==e&&e.categories){var t;b(null==S||null===(t=S.business)||void 0===t?void 0:t.categories[0])}}else pe(!0)}),[S]),Object(i.useEffect)((function(){null!==O&&pe(!!O)}),[O]),Object(i.useEffect)((function(){pe(!!O,1)}),[null==m?void 0:m.id]),Object(i.useEffect)((function(){R?ve():(E(pc(pc({},S),{},{loading:!1,business:{}})),I({}),oe(pc(pc({},te),{},{loading:!1})),b(null))}),[R]),Object(i.useEffect)((function(){var e;if(null!=S&&S.business)return(null===(e=Object.keys(null==S?void 0:S.business))||void 0===e?void 0:e.length)>0?(h.on("tax_changed",me),h.on("fee_changed",be),h.on("tax_deleted",me),h.on("fee_deleted",be),function(){h.off("tax_changed",me),h.off("fee_changed",be),h.off("tax_deleted",be),h.off("fee_deleted",be)}):void 0}),[null==S?void 0:S.business]),Object(i.useEffect)((function(){var e=A.business;return function(){e&&e.cancel&&e.cancel()}}),[A.business]),Object(i.useEffect)((function(){var e=A.products;return function(){e&&e.cancel&&e.cancel()}}),[A.products]),Object(i.useEffect)((function(){ye(),he()}),[]),u.a.createElement(u.a.Fragment,null,d&&u.a.createElement(d,uc({},e,{errors:ie,categorySelected:m,searchValue:O,categoryState:re,businessState:S,productModal:k,errorQuantityProducts:ce,handleChangeCategory:function(e,t){var n,r,o;null===e&&null===t&&b(null),(null==e||null===(n=e.target)||void 0===n?void 0:n.closest)&&((null==e||null===(r=e.target)||void 0===r?void 0:r.closest(".business_enable_control"))||e.target.closest(".business_actions"))||(null==t?void 0:t.id)===(null==m?void 0:m.id)||(G(!1),null!=t&&null!==(o=t.subcategories)&&void 0!==o&&o.length&&(null!=t&&t.parent_category_id||(L.values=[]),L.values.includes(null==t?void 0:t.id)?L.values=L.values.filter((function(e){return e!==(null==t?void 0:t.id)})):L.values.push(null==t?void 0:t.id),B(pc(pc({},L),{},{values:L.values}))),null===(null==t?void 0:t.id)&&B(pc(pc({},L),{},{values:[]})),b(t))},handleChangeSearch:function(e){w(e)},getPageProducts:pe,setCategorySelected:b,setBusinessState:E,handleUpdateBusinessState:function(e){G(!0);var t=pc({},null==S?void 0:S.business);Object.assign(t,e),m&&t.categories.forEach((function e(t){(null==t?void 0:t.id)===(null==m?void 0:m.id)&&b(t),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),E(pc(pc({},S),{},{business:t}))},updateProductModal:function(e){return D(pc(pc({},k),{},{product:e}))},openCategories:L.values,setOpenCategories:B,setBusinessSlug:M,handleUpdateCategoryState:function(e){oe(e)},setFormTaxState:X,formTaxState:K,taxes:q,setTaxes:$,fees:V,setFees:H})))};function bc(){return bc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bc.apply(this,arguments)}function gc(e){return function(e){if(Array.isArray(e))return Ic(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(n),!0).forEach((function(t){jc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sc(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ec(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Sc(a,r,o,i,u,"next",e)}function u(e){Sc(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Pc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Cc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cc(e,t){if(e){if("string"==typeof e)return Ic(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ic(e,t):void 0}}function Ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mc.propTypes={UIComponent:c.a.elementType,isSearchByName:c.a.bool,isSearchByDescription:c.a.bool,slug:c.a.string,isInitialRender:c.a.bool},mc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xc=function(e){var t=e.businessId,n=e.menuId,r=e.metafields,o=e.UIComponent,s=Pc(rn(),1)[0],c=Pc(yn(),1)[0],l=Pc(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=Pc(Object(i.useState)({loading:!1,result:{error:!1}}),2),y=d[0],h=d[1],v=function(){var e=Ec(a.a.mark((function e(){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(wc(wc({},f),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=5,fetch("".concat(s.root,"/business/").concat(t,"/menus/").concat(n,"/metafields"),r);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=i.result,p(wc(wc({},f),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),p(wc(wc({},f),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Ec(a.a.mark((function e(r){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(wc(wc({},y),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=5,fetch("".concat(s.root,"/business/").concat(t,"/menus/").concat(n,"/metafields/").concat(r),o);case 5:e.sent.ok&&(i=f.metaFields.filter((function(e){return e.id!==r})),p(wc(wc({},f),{},{metaFields:i})),h({loading:!1,result:{error:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),h({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Ec(a.a.mark((function e(r){var o,i,u,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(wc(wc({},y),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)},body:JSON.stringify(r)},e.next=5,fetch("".concat(s.root,"/business/").concat(t,"/menus/").concat(n,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,l=u.error,d=u.result,l?h({loading:!1,result:{error:!0,result:d}}):([],v=[].concat(gc(f.metaFields),[d]),p(wc(wc({},f),{},{metaFields:v})),h({loading:!1,result:{error:!1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),h({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?p(wc(wc({},f),{},{metaFields:r})):v()}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,bc({},e,{metaFieldsList:f,actionState:y,handleDeleteMetaField:m,handeAddMetaField:b})))};function Ac(){return Ac=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ac.apply(this,arguments)}function Tc(e){return function(e){if(Array.isArray(e))return Mc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Rc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _c(e){return _c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_c(e)}function kc(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Dc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){kc(a,r,o,i,u,"next",e)}function u(e){kc(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Uc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uc(Object(n),!0).forEach((function(t){Bc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Rc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rc(e,t){if(e){if("string"==typeof e)return Mc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mc(e,t):void 0}}function Mc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xc.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Nc=function(e){var t=e.business,n=e.menu,r=e.UIComponent,o=e.handleUpdateBusinessState,s=e.isSelectedSharedMenus,c=e.sitesState,l=Fc(rn(),1)[0],f=Fc(yn(),1)[0].token,p=Fc(Bn(),2)[1],d=Fc(Br(),2)[1].showToast,y=Fc(Object(i.useState)({loading:!1,error:null,menu:n||{}}),2),h=y[0],v=y[1],m=Fc(Object(i.useState)({loading:!1,changes:{},error:null}),2),b=m[0],g=m[1],O=Fc(Object(i.useState)({}),2),w=O[0],j=O[1],S=Fc(Object(i.useState)([]),2),E=S[0],P=S[1],C=Fc(Object(i.useState)([]),2),I=C[0],x=C[1],A=Fc(Object(i.useState)([]),2),T=A[0],_=A[1],k=function(){var e=Dc(a.a.mark((function e(){var r,i,u,s,c,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Lc(Lc({},b),{},{loading:!0,result:{error:!1}})),r=Lc({},b.changes))("object"===_c(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(r)},e.next=8,fetch("".concat(l.root,"/business/").concat(t.id,"/menus/").concat(null==n?void 0:n.id),u);case 8:return s=e.sent,e.next=11,s.json();case 11:c=e.sent,g(Lc(Lc({},b),{},{changes:c.error?b.changes:{},result:{error:c.error,result:c.result},loading:!1})),c.error||((y=Lc({},t)).menus.filter((function(e){e.id===c.result.id&&(Object.assign(e,c.result),void 0!==(null==r?void 0:r.products)&&(e.products=Tc(I)));return!0})),o&&o(y),d(Dr.Success,p("MENU_SAVED","Products catalog saved"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),g(Lc(Lc({},b),{},{loading:!1,result:{error:!0,result:e.t0.message}}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var n=Dc(a.a.mark((function n(){var r,i,u,s,c,y,h,v,m,O;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Lc(Lc({},b),{},{loading:!0,result:{error:!1}})),null!=(r=Lc({},null==b?void 0:b.changes))&&r.products&&(r.products=JSON.stringify(null==r?void 0:r.products)),null!=r&&r.schedule)r.schedule=JSON.stringify(null==r?void 0:r.schedule);else{for(i=[],u=0;u<7;u++)i.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});r.schedule=JSON.stringify(i)}return s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(r)},n.next=9,fetch("".concat(l.root,"/business/").concat(t.id,"/menus"),s);case 9:return c=n.sent,n.next=12,c.json();case 12:y=n.sent,g(Lc(Lc({},b),{},{changes:y.error?b.changes:{},result:{error:y.error,result:y.result},loading:!1})),y.error||(h=Lc({},t),v=Lc(Lc({},y.result),{},{enabled:!0}),m=[],t.categories.forEach((function e(t){m=[].concat(Tc(m),Tc(t.products)),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),O=[],O=null!=r&&r.all_products?Tc(m):m.filter((function(e){return v.products.includes(e.id)})),v=Lc(Lc({},v),{},{products:O}),h.menus.push(v),o&&o(h),d(Dr.Success,p("MENU_ADDED","Products catalog added")),e.onClose()&&e.onClose()),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(0),g(Lc(Lc({},b),{},{loading:!1,result:{error:!0,result:n.t0.message}}));case 20:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(){return n.apply(this,arguments)}}(),U=function(){var r=Dc(a.a.mark((function r(){var i,u,c,y,h,v,m;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,d(Dr.Info,p("LOADING","Loading")),g(Lc(Lc({},b),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},u=s?"".concat(l.root,"/business/").concat(t.id,"/menus_shared/").concat(n.id):"".concat(l.root,"/business/").concat(t.id,"/menus/").concat(n.id),r.next=7,fetch(u,i);case 7:return c=r.sent,r.next=10,c.json();case 10:(y=r.sent).error?g(Lc(Lc({},b),{},{loading:!1,error:y.result})):(g(Lc(Lc({},b),{},{loading:!1,error:null})),h=null,s?(v=t.menus_shared.filter((function(e){return e.id!==n.id})),h=Lc(Lc({},t),{},{menus_shared:v})):(m=t.menus.filter((function(e){return e.id!==n.id})),h=Lc(Lc({},t),{},{menus:m})),o&&o(h),d(Dr.Success,p("MENU_DELETED","Products catalog deleted")),e.onClose&&e.onClose()),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(0),g(Lc(Lc({},b),{},{loading:!1,error:r.t0}));case 17:case"end":return r.stop()}}),r,null,[[0,14]])})));return function(){return r.apply(this,arguments)}}();Object(i.useEffect)((function(){g(Lc(Lc({},b),{},{changes:Lc(Lc({},b.changes),{},{products:E})}))}),[E]),Object(i.useEffect)((function(){g(Lc(Lc({},b),{},{changes:{}})),v(Lc(Lc({},h),{},{menu:n||{}})),j({delivery:null==n?void 0:n.delivery,pickup:null==n?void 0:n.pickup,eatin:null==n?void 0:n.eatin,curbside:null==n?void 0:n.curbside,driver_thru:null==n?void 0:n.driver_thru});var e,t=[];Object.keys(n).length?(t=null===(e=n.products)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Tc(e),[t.id])}),[]),P(t),x(n.products)):(P([]),x([]),j({delivery:!0,pickup:!0,eatin:!1,curbside:!1,driver_thru:!1}),g(Lc(Lc({},b),{},{changes:{delivery:!0,pickup:!0}})));L(t)}),[n]);var L=function(e){if(null!=t&&t.categories.length){var n=[];_(n),function t(r){return(null==r?void 0:r.length)>0&&(null==r?void 0:r.forEach((function(r){var o,a,i=[],u=null===(o=r.products)||void 0===o?void 0:o.reduce((function(e,t){return[].concat(Tc(e),[t.id])}),[]);i=[].concat(Tc(i),Tc(u)),null!=r&&null!==(a=r.subcategories)&&void 0!==a&&a.length&&r.subcategories.forEach((function e(t){var n,r=null===(n=t.products)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(Tc(e),[t.id])}),[]);i=[].concat(Tc(i),Tc(r)),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),n.push({id:r.id,name:r.name,productIds:i,isChecked:0!==i.length&&i.every((function(t){return e.includes(t)}))}),t(r.subcategories)})))}(null==t?void 0:t.categories)}};return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Ac({},e,{businessMenuState:h,formState:b,selectedProductsIds:E,setSelectedProductsIds:P,selectedProducts:I,setSelectedProducts:x,handleChangeInput:function(e){var t=Bc({},e.target.name,e.target.value);g(Lc(Lc({},b),{},{changes:Lc(Lc({},b.changes),t)}))},handleCheckOrderType:function(e){g(Lc(Lc({},b),{},{changes:Lc(Lc({},b.changes),{},Bc({},e,!w[e]))})),j(Lc(Lc({},w),{},Bc({},e,!w[e])))},handleUpdateBusinessMenuOption:k,handleAddBusinessMenuOption:D,handleChangeScheduleState:function(e){g(Lc(Lc({},b),{},{changes:Lc(Lc({},b.changes),{},{schedule:e})}))},handleDeleteMenu:U,handleChangeMenuSite:function(e){var t,r=[].concat(Tc(null==n||null===(t=n.sites)||void 0===t?void 0:t.map((function(e){return e.id})).filter((function(e){var t;return!b.changes.sites||(null===(t=b.changes.sites)||void 0===t?void 0:t.includes(e))}))),Tc(b.changes.sites||[])),o=r.includes(e);g(Lc(Lc({},b),{},{changes:Lc(Lc({},b.changes),{},{sites:o?r.filter((function(t){return t!==e})):[].concat(Tc(r),[e])})}))},handleSelectAllChannels:function(){g(Lc(Lc({},b),{},{changes:Lc(Lc({},b.changes),{},{sites:null==c?void 0:c.sites.map((function(e){return e.id}))})}))},handleSelectNoneChannels:function(){g(Lc(Lc({},b),{},{changes:Lc(Lc({},b.changes),{},{sites:[]})}))},subCategoriesList:T})))};function zc(){return zc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zc.apply(this,arguments)}function Gc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Kc(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Yc(e){return function(e){if(Array.isArray(e))return Xc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qc(Object(n),!0).forEach((function(t){Jc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vc(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Hc(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Vc(a,r,o,i,u,"next",e)}function u(e){Vc(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Wc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Kc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kc(e,t){if(e){if("string"==typeof e)return Xc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xc(e,t):void 0}}function Xc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Nc.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Nc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Zc=function(e){var t=e.UIComponent,n=e.business,r=e.menu,o=e.businesses,s=e.busienssesPropsToFetch,c=e.handleUpdateBusinessState,l=Wc(rn(),1)[0],f=Wc(yn(),1)[0].token,p=Wc(Bn(),2)[1],d=Wc(Br(),2)[1].showToast,y=Wc(Object(i.useState)({businesses:[],loading:!1,error:null}),2),h=y[0],v=y[1],m=Wc(Object(i.useState)({loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=Wc(Object(i.useState)([]),2),w=O[0],j=O[1],S=function(){var e=Hc(a.a.mark((function e(){var t,r,o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v($c($c({},h),{},{loading:!0})),t=l.setAccessToken(f).businesses().select(s).asDashboard(),e.next=5,t.get();case 5:r=e.sent,o=r.content,i=o.error,u=o.result,i||(c=u.filter((function(e){return e.id!==n.id})),v($c($c({},h),{},{businesses:c,loading:!1}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v($c($c({},h),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Hc(a.a.mark((function e(){var t,o,i,u,s,f,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,p("LOADING","Loading")),g($c($c({},b),{},{loading:!0})),t={business_id:n.id,shared:w},e.next=6,l.businesses(n.id).menus(r.id).save(t);case 6:if(!e.sent.error){o=[],i=Gc(w);try{for(s=function(){var e,t=u.value;o.push({id:t,name:null===(e=h.businesses.find((function(e){return e.id===t})))||void 0===e?void 0:e.name,pivot:{business_id:t,menu_id:r.id}})},i.s();!(u=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}f=$c($c({},r),{},{businesses:o}),y=n.menus.filter((function(e){return e.id===f.id&&Object.assign(e,f),!0})),v=$c($c({},n),{},{menus:y}),c&&c(v),g({loading:!1,result:{error:!1}}),d(Dr.Success,p("BUSINESS_SAVED","Business saved"))}e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g({loading:!1,result:{error:!1}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?v($c($c({},h),{},{businesses:o,loading:!1})):S()}),[o]),Object(i.useEffect)((function(){if(null!=r&&r.businesses){var e,t=null===(e=r.businesses)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Yc(e),[t.id])}),[]);j(t)}}),[r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,zc({},e,{businessesState:h,actionState:b,selectedBusinessIds:w,handleSelectBusiness:function(e,t){if(t)j([].concat(Yc(w),[e]));else{var n=w.filter((function(t){return t!==e}));j(n)}},handleSelectAllBusiness:function(e){if(e){var t,n=null===(t=h.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(Yc(e),[t.id])}),[]);j(n)}else j([])},handleShareBusinesses:E})))};function Qc(){return Qc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qc.apply(this,arguments)}function el(e){return function(e){if(Array.isArray(e))return sl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ul(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach((function(t){rl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ol(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function al(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ol(a,r,o,i,u,"next",e)}function u(e){ol(a,r,o,i,u,"throw",e)}i(void 0)}))}}function il(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ul(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ul(e,t){if(e){if("string"==typeof e)return sl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sl(e,t):void 0}}function sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Zc.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var cl=function(e){var t=e.businessId,n=e.metafields,r=e.UIComponent,o=e.handleSuccessAddMetaFields,s=e.handleSuccessDeleteBusinessMetaFields,c=il(rn(),1)[0],l=il(yn(),1)[0],f=il(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=il(Object(i.useState)({loading:!1,result:{error:!1}}),2),h=y[0],v=y[1],m=function(){var e=al(a.a.mark((function e(){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(nl(nl({},p),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},e.next=5,fetch("".concat(c.root,"/business/").concat(t,"/metafields"),n);case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,i=o.result,d(nl(nl({},p),{},{loading:!1,metaFields:i})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(nl(nl({},p),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=al(a.a.mark((function e(n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(nl(nl({},h),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},e.next=5,fetch("".concat(c.root,"/business/").concat(t,"/metafields/").concat(n),r);case 5:e.sent.ok&&(o=p.metaFields.filter((function(e){return e.id!==n})),d(nl(nl({},p),{},{metaFields:o})),v({loading:!1,result:{error:!1}}),s&&s(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),v({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=al(a.a.mark((function e(n){var r,i,u,s,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(nl(nl({},h),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)},body:JSON.stringify(n)},e.next=5,fetch("".concat(c.root,"/business/").concat(t,"/metafields"),r);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.error,f=u.result,s?v({loading:!1,result:{error:!0,result:f}}):([],y=[].concat(el(p.metaFields),[f]),d(nl(nl({},p),{},{metaFields:y})),v({loading:!1,result:{error:!1}}),o&&o(f)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){n?d(nl(nl({},p),{},{metaFields:n})):m()}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Qc({},e,{metaFieldsList:p,actionState:h,handleDeleteMetaField:b,handeAddMetaField:g})))};function ll(){return ll=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ll.apply(this,arguments)}function fl(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=gl(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function pl(e){return function(e){if(Array.isArray(e))return Ol(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function yl(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){dl(a,r,o,i,u,"next",e)}function u(e){dl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function hl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hl(Object(n),!0).forEach((function(t){ml(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ml(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||gl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gl(e,t){if(e){if("string"==typeof e)return Ol(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ol(e,t):void 0}}function Ol(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cl.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var wl=["paypal_express","authorize"],jl=function(e){var t,n,r,o,s,c,l=e.business,f=e.UIComponent,p=e.defaultSandboxRequiredGateways,d=e.handleSuccessUpdate,y=bl(rn(),1)[0],h=bl(yn(),1)[0].token,v=bl(tr(),1)[0],m=bl(Br(),2)[1].showToast,b=bl(Bn(),2)[1],g=bl(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),O=g[0],w=g[1],j=bl(Object(i.useState)({sites:[],loading:!0,error:null}),2),S=j[0],E=j[1],P=bl(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),C=P[0],I=P[1],x=p||["paypal","stripe_direct","paypal_express","stripe_connect","stripe_redirect","carlos_payment","ivr"],A=bl(Object(i.useState)({loading:!1,result:{error:!1}}),2),T=A[0],_=A[1],k=bl(Object(i.useState)({}),2),D=k[0],U=k[1],L=bl(Object(i.useState)({}),2),B=L[0],F=L[1],R=bl(Object(i.useState)(!1),2),M=R[0],N=R[1],z="1"===(null==v||null===(t=v.configs)||void 0===t||null===(n=t.stripe_connect_sandbox)||void 0===n?void 0:n.value)?null==v||null===(r=v.configs)||void 0===r||null===(o=r.stripe_connect_client_id_sandbox)||void 0===o?void 0:o.value:null==v||null===(s=v.configs)||void 0===s||null===(c=s.stripe_connect_client_id)||void 0===c?void 0:c.value,G=function(){var e=yl(a.a.mark((function e(){var t,n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(y.root,"/business/").concat(l.id,"/paymethods?params=sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId}});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,r=n.result,e.prev=8,e.next=11,fetch("".concat(y.root,"/sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId}});case 11:return o=e.sent,e.next=14,o.json();case 14:i=e.sent,u=i.result,E(vl(vl({},S),{},{loading:!1,sites:u})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),E(vl(vl({},S),{},{loading:!1,sites:e.t0.message}));case 22:w(vl(vl({},C),{},{loading:!1,paymethods:r})),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(0),w(vl(vl({},C),{},{loading:!1,error:e.t1.message}));case 28:case"end":return e.stop()}}),e,null,[[0,25],[8,19]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=yl(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(y.root,"/paymethods?where=[{%22attribute%22:%22enabled%22,%22value%22:true}]"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r=n.result,I(vl(vl({},C),{},{loading:!1,paymethods:(o=r,o&&o.filter((function(e){return!wl.includes(null==e?void 0:e.gateway)})))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),I(vl(vl({},C),{},{loading:!1,error:e.t0.message}));case 14:case"end":return e.stop()}var o}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=yl(a.a.mark((function e(t){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.paymethods.find((function(e){return e.id===t})),r={enabled:!0,paymethod_id:t,sandbox:x.includes(n.gateway)},e.prev=2,m(Dr.Info,b("LOADING","Loading")),_(vl(vl({},T),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId},body:JSON.stringify(r)},e.next=8,fetch("".concat(y.root,"/business/").concat(l.id,"/paymethods"),o);case 8:return i=e.sent,e.next=11,i.json();case 11:(u=e.sent).error||(w((function(e){return vl(vl({},e),{},{paymethods:[].concat(pl(e.paymethods),[vl(vl({},u.result),{},{paymethod:n})])})})),_({loading:!1,result:{error:!1}}),m(Dr.Success,b("PAYMETHOD_SAVED","Payment method saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),_({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=yl(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dr.Info,b("LOADING","Loading")),_(vl(vl({},T),{},{loading:!0})),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId},body:JSON.stringify(n)},e.next=6,fetch("".concat(y.root,"/business/").concat(l.id,"/paymethods/").concat(t),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,U(i.error?D:{}),i.error||(_(vl(vl({},T),{},{loading:!1})),w((function(e){return vl(vl({},e),{},{paymethods:e.paymethods.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0}))})})),m(Dr.Success,b("PAYMETHOD_SAVED","Payment method saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),_({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=yl(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dr.Info,b("LOADING","Loading")),_(vl(vl({},T),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId},body:JSON.stringify(D)},e.next=6,fetch("".concat(y.root,"/business/").concat(l.id),t);case 6:return n=e.sent,e.next=9,n.json();case 9:r=e.sent,U(r.error?D:{}),r.error||(_(vl(vl({},T),{},{loading:!1})),d&&d(r.result)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),_({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=yl(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.paymethods.find((function(e){return e.paymethod_id===t})).id,e.prev=1,m(Dr.Info,b("LOADING","Loading")),_(vl(vl({},T),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h),"x-app-x":null==y?void 0:y.appId}},e.next=7,fetch("".concat(y.root,"/business/").concat(l.id,"/paymethods/").concat(n),r);case 7:return o=e.sent,e.next=10,o.json();case 10:e.sent.error||(_(vl(vl({},T),{},{loading:!1})),i=O.paymethods.filter((function(e){return e.paymethod_id!==t})),w(vl(vl({},O),{},{paymethods:i})),m(Dr.Success,b("PAYMETHOD_DELETED","Payment method deleted")),N(!0)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),_({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){Y(),G()}),[]),u.a.createElement(u.a.Fragment,null,f&&u.a.createElement(f,ll({},e,{businessPaymethodsState:O,paymethodsList:C,handleClickPayment:function(e){var t=O.paymethods.find((function(t){return t.paymethod_id===e}));t?$(t.id,{enabled:!t.enabled}):q(e)},actionState:T,sitesState:S,handleDeleteBusinessPaymethodOption:V,changesState:D,handleChangeBusinessPaymentState:function(e){U(vl(vl({},D),e))},stripeConnectData:B,handleChangeStripeConnectData:function(e){F(vl(vl({},B),e))},cleanChangesState:function(e){return U(vl({},e))},handleChangeSandbox:function(){U(vl(vl({},D),{},{sandbox:!(null!=D&&D.sandbox)}))},handleChangeInput:function(e,t){U(vl(vl({},D),{},t?{data_sandbox:vl(vl({},null==D?void 0:D.data_sandbox),{},ml({},e.target.name,e.target.value))}:{data:vl(vl({},null==D?void 0:D.data),{},ml({},e.target.name,e.target.value))}))},handleSaveClick:function(e){var t,n,r,o,a=vl({},D);null!==(t=a)&&void 0!==t&&t.data&&(a=vl(vl({},a),{},{data:JSON.stringify(a.data)})),null!==(n=a)&&void 0!==n&&n.data_sandbox&&(a=vl(vl({},a),{},{data_sandbox:JSON.stringify(a.data_sandbox)})),null!==(r=a)&&void 0!==r&&r.allowed_order_types&&(a=vl(vl({},a),{},{allowed_order_types:a.allowed_order_types.length>0?JSON.stringify(a.allowed_order_types):null})),null!==(o=a)&&void 0!==o&&o.sites&&(a=vl(vl({},a),{},{sites:JSON.stringify(a.sites)})),$(e,a),J()},handleStripeConnect:function(){var e=window.open("https://connect.stripe.com/oauth/authorize?response_type=code&client_id=".concat(z,"&scope=read_write&state=").concat(h),"_blank","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,clearcache=yes"),t=setInterval((function(){e.closed?clearInterval(t):e.postMessage("data",y.url)}),200),n=null;window.addEventListener("message",(function(r){-1!==r.origin.indexOf(".ordering.co")&&(clearInterval(t),n&&clearTimeout(n),n=setTimeout((function(){if(e.postMessage("close",y.url),!r.data.error&&r.data.result){var t=r.data.result,n={sandbox:t.livemode,data:{token:t.access_token,publishable:t.stripe_publishable_key,user:t.stripe_user_id,refresh_token:t.refresh_token}};F(n)}else r.data.error&&_(vl(vl({},T),{},{loading:!1,error:r.data.error}))}),1e3))}))},handleChangeStripeInput:function(e){U(vl(vl({},D),{},ml({},e.target.name,e.target.value)))},handleStripeSave:function(e){var t,n,r={sandbox:null==B?void 0:B.sandbox,data:JSON.stringify(null==B?void 0:B.data),data_sandbox:JSON.stringify(null==B?void 0:B.data)};null!==(t=r)&&void 0!==t&&t.allowed_order_types&&(r=vl(vl({},r),{},{allowed_order_types:r.allowed_order_types.length>0?JSON.stringify(r.allowed_order_types):null})),null!==(n=r)&&void 0!==n&&n.sites&&(r=vl(vl({},r),{},{sites:JSON.stringify(r.sites)})),Object.keys(B).length&&$(e,r),J()},isSuccessDeleted:M,setIsSuccessDeleted:N,handleSelectAllPaymethods:function(){var e,t=fl(C.paymethods);try{var n=function(){var t=e.value,n=O.paymethods.find((function(e){return e.paymethod_id===t.id}));n?null!=n&&n.enabled||$(n.id,{enabled:!0}):q(t.id)};for(t.s();!(e=t.n()).done;)n()}catch(e){t.e(e)}finally{t.f()}},handleSelectNonePaymethods:function(){var e,t=fl(O.paymethods);try{for(t.s();!(e=t.n()).done;){var n=e.value;null!=n&&n.enabled&&$(n.id,{enabled:!1})}}catch(e){t.e(e)}finally{t.f()}},handleSuccessPaymethodUpdate:function(e){w(vl(vl({},O),{},{paymethods:e}))}})))};function Sl(){return Sl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sl.apply(this,arguments)}function El(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Pl(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){El(a,r,o,i,u,"next",e)}function u(e){El(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Il(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cl(Object(n),!0).forEach((function(t){xl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Al(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}jl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var _l=function(e){var t=e.UIComponent,n=e.place,r=e.placeGroup,o=e.businessId,s=e.handleSuccessAddPlace,c=e.handleSuccessUpdatePlace,l=e.handleSuccessDeletePlace,f=e.handleUpdateSelectedPlace,p=Al(Bn(),2)[1],d=Al(rn(),1)[0],y=Al(yn(),1)[0].token,h=Al(Br(),2)[1].showToast,v=Al(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var t=Pl(a.a.mark((function t(){var n,i,u,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,p("LOADING","Loading")),b(Il(Il({},m),{},{loading:!0,error:null})),n=Il(Il({},null==m?void 0:m.changes),{},{place_group_id:null==r?void 0:r.id}),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(n)},t.next=7,fetch("".concat(d.root,"/business/").concat(o,"/places"),i);case 7:return u=t.sent,t.next=10,u.json();case 10:(c=t.sent).error?b(Il(Il({},m),{},{loading:!1,error:c.result})):(b(Il(Il({},m),{},{loading:!1,error:null})),s&&s(Il(Il({},c.result),{},{enabled:!0})),h(Dr.Success,p("OPTION_ADDED","Option added")),e.onClose&&e.onClose()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),b(Il(Il({},m),{},{loading:!1,error:t.t0.message}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var e=Pl(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,p("LOADING","Loading")),b(Il(Il({},m),{},{loading:!0,error:null})),t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=6,fetch("".concat(d.root,"/business/").concat(o,"/places/").concat(null==n?void 0:n.id),t);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?b(Il(Il({},m),{},{loading:!1,error:i.result})):(b(Il(Il({},m),{},{loading:!1,error:null,changes:{}})),f&&f(i.result),c&&c(i.result),h(Dr.Success,p("OPTION_SAVED","Option saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Il(Il({},m),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var t=Pl(a.a.mark((function t(){var r,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,p("LOADING","Loading")),b(Il(Il({},m),{},{loading:!0,error:null})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}},t.next=6,fetch("".concat(d.root,"/business/").concat(o,"/places/").concat(null==n?void 0:n.id),r);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?b(Il(Il({},m),{},{loading:!1,error:u.result})):(l&&l(null==n?void 0:n.id),h(Dr.Success,p("OPTION_DELETED","Option deleted")),b(Il(Il({},m),{},{loading:!1,error:null})),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(Il(Il({},m),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){b(Il(Il({},m),{},{changes:{}}))}),[null==n?void 0:n.id]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Sl({},e,{formState:m,handleChangeInput:function(e){var t=Il(Il({},null==m?void 0:m.changes),{},xl({},e.target.name,e.target.value));b(Il(Il({},m),{},{changes:t}))},handleAddPlace:g,handleUpdatePlace:O,handleDeletePlace:w})))};function kl(){return kl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kl.apply(this,arguments)}function Dl(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ul(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Dl(a,r,o,i,u,"next",e)}function u(e){Dl(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(n),!0).forEach((function(t){Fl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rl(e){return function(e){if(Array.isArray(e))return zl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ml(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Nl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nl(e,t){if(e){if("string"==typeof e)return zl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zl(e,t):void 0}}function zl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}_l.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_l.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Gl=function(e){var t=e.UIComponent,n=e.business,r=Ml(Bn(),2)[1],o=Ml(rn(),1)[0],s=Ml(yn(),1)[0].token,c=Ml(Br(),2)[1].showToast,l=Ml(Object(i.useState)({loading:!1,placeGroups:[],error:null}),2),f=l[0],p=l[1],d=Ml(Object(i.useState)({loading:!1,error:null}),2),y=d[0],h=d[1],v=function(){var e=Ul(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null==f||null===(n=f.placeGroups)||void 0===n?void 0:n.map((function(e){return(null==t?void 0:t.id)===(null==e?void 0:e.id)?Bl(Bl({},e),t):e})),p(Bl(Bl({},f),{},{placeGroups:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Ul(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Bl(Bl({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/place_groups"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?p(Bl(Bl({},f),{},{loading:!1,error:i.result})):p(Bl(Bl({},f),{},{loading:!1,placeGroups:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(Bl(Bl({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Ul(a.a.mark((function e(t,i,u){var l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,r("LOADING","Loading")),h(Bl(Bl({},y),{},{loading:!0})),l={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(i)},e.next=6,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/place_groups/").concat(t),l);case 6:return f=e.sent,e.next=9,f.json();case 9:(p=e.sent).error?h(Bl(Bl({},y),{},{loading:!1,error:p.result})):(h(Bl(Bl({},y),{},{loading:!1,error:null})),!u&&v(p.result),c(Dr.Success,r("PLACE_UPDATED","Place updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(Bl(Bl({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=!0;return f.placeGroups.forEach((function(t){t.enabled||(e=!1)})),e},O=function(){var e=Ul(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=g(),f.placeGroups.forEach((function(e){n.push(new Promise((function(t,n){t(b(e.id,{enabled:!r},!0))})))})),e.next=5,Promise.all(n);case 5:o=null==f||null===(t=f.placeGroups)||void 0===t?void 0:t.map((function(e){return Bl(Bl({},e),{},{enabled:!r})})),p(Bl(Bl({},f),{},{placeGroups:o}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){n&&m()}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,kl({},e,{placeGroupList:f,handleSuccessAddPlaceGroup:function(e){var t=[].concat(Rl(f.placeGroups),[e]);p(Bl(Bl({},f),{},{placeGroups:t}))},handleSuccessUpdatePlaceGroup:v,handleSuccessDeletePlaceGroup:function(e){var t,n=null==f||null===(t=f.placeGroups)||void 0===t?void 0:t.filter((function(t){return t.id!==e}));p(Bl(Bl({},f),{},{placeGroups:n}))},handleChangeEnabled:b,handleMultiChangeEnabled:O,getMultiCheckStatus:g})))};function Yl(){return Yl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yl.apply(this,arguments)}function ql(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function $l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ql(a,r,o,i,u,"next",e)}function u(e){ql(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Jl(e){return function(e){if(Array.isArray(e))return Zl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vl(Object(n),!0).forEach((function(t){Wl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Xl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xl(e,t){if(e){if("string"==typeof e)return Zl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zl(e,t):void 0}}function Zl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Gl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Gl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ql=function(e){var t=e.UIComponent,n=e.placeGroup,r=e.businessId,o=e.handleSuccessAddPlaceGroup,s=e.handleSuccessUpdatePlaceGroup,c=e.handleSuccessDeletePlaceGroup,l=e.handleUpdateSelectedPlaceGroup,f=Kl(Bn(),2)[1],p=Kl(rn(),1)[0],d=Kl(yn(),1)[0].token,y=Kl(Br(),2)[1].showToast,h=Kl(Object(i.useState)({loading:!1,places:[],error:null}),2),v=h[0],m=h[1],b=Kl(Object(i.useState)({loading:!1,changes:{},error:null}),2),g=b[0],O=b[1],w=Kl(Object(i.useState)({loading:!1,error:null}),2),j=w[0],S=w[1],E=function(){var e=$l(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null==v||null===(n=v.places)||void 0===n?void 0:n.map((function(e){return(null==t?void 0:t.id)===(null==e?void 0:e.id)?Hl(Hl({},e),t):e})),m(Hl(Hl({},v),{},{places:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=!0;return v.places.forEach((function(t){t.enabled||(e=!1)})),e},C=function(){var t=$l(a.a.mark((function t(){var n,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Hl(Hl({},g),{},{loading:!0,error:null})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(null==g?void 0:g.changes)},t.next=6,fetch("".concat(p.root,"/business/").concat(r,"/place_groups"),n);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?O(Hl(Hl({},g),{},{loading:!1,error:u.result})):(O(Hl(Hl({},g),{},{loading:!1,error:null})),o&&o(Hl(Hl({},u.result),{},{enabled:!0})),y(Dr.Success,f("PLACE_ADDED","Place added")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),O(Hl(Hl({},g),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),I=function(){var e=$l(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Hl(Hl({},g),{},{loading:!0,error:null})),t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(null==g?void 0:g.changes)},e.next=6,fetch("".concat(p.root,"/business/").concat(r,"/place_groups/").concat(null==n?void 0:n.id),t);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?O(Hl(Hl({},g),{},{loading:!1,error:i.result})):(O(Hl(Hl({},g),{},{loading:!1,error:null,changes:{}})),l&&l(i.result),s&&s(i.result),y(Dr.Success,f("PLACE_SAVED","Place saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O(Hl(Hl({},g),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var t=$l(a.a.mark((function t(){var o,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Hl(Hl({},g),{},{loading:!0,error:null})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},t.next=6,fetch("".concat(p.root,"/business/").concat(r,"/place_groups/").concat(null==n?void 0:n.id),o);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?O(Hl(Hl({},g),{},{loading:!1,error:u.result})):(c&&c(null==n?void 0:n.id),y(Dr.Success,f("PLACE_DELETED","Place deleted")),O(Hl(Hl({},g),{},{loading:!1,error:null})),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),O(Hl(Hl({},g),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var e=$l(a.a.mark((function e(){var t,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Hl(Hl({},v),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},e.next=5,fetch("".concat(p.root,"/business/").concat(r,"/places"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=null==i?void 0:i.result.filter((function(e){return e.place_group_id===(null==n?void 0:n.id)})),i.error?m(Hl(Hl({},v),{},{loading:!1,error:i.result})):m(Hl(Hl({},v),{},{loading:!1,places:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(Hl(Hl({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=$l(a.a.mark((function e(t,n,o){var i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,f("LOADING","Loading")),S(Hl(Hl({},j),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(n)},e.next=6,fetch("".concat(p.root,"/business/").concat(r,"/places/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error?S(Hl(Hl({},j),{},{loading:!1,error:s.result})):(S(Hl(Hl({},j),{},{loading:!1,error:null})),!o&&E(s.result),y(Dr.Success,f("OPTION_UPDATED","Option updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),S(Hl(Hl({},j),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),_=function(){var e=$l(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=P(),v.places.forEach((function(e){n.push(new Promise((function(t,n){t(T(e.id,{enabled:!r},!0))})))})),e.next=5,Promise.all(n);case 5:o=null==v||null===(t=v.places)||void 0===t?void 0:t.map((function(e){return Hl(Hl({},e),{},{enabled:!r})})),m(Hl(Hl({},v),{},{places:o}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){O(Hl(Hl({},g),{},{changes:{}})),n&&A()}),[null==n?void 0:n.id]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Yl({},e,{formState:g,placeList:v,handleChangeInput:function(e){var t=Hl(Hl({},null==g?void 0:g.changes),{},Wl({},e.target.name,e.target.value));O(Hl(Hl({},g),{},{changes:t}))},handleAddPlaceGroup:C,handleUpdatePlaceGroup:I,handleDeletePlaceGroup:x,handleSuccessAddPlace:function(e){var t=[].concat(Jl(v.places),[e]);m(Hl(Hl({},v),{},{places:t}))},handleSuccessUpdatePlace:E,handleSuccessDeletePlace:function(e){var t,n=null==v||null===(t=v.places)||void 0===t?void 0:t.filter((function(t){return t.id!==e}));m(Hl(Hl({},v),{},{places:n}))},handleChangePlaceEnabled:T,getMultiPlaceCheckStatus:P,handleMultiPlaceChangeEnabled:_})))};function ef(){return ef=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ef.apply(this,arguments)}function tf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tf(Object(n),!0).forEach((function(t){rf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function of(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function af(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ql.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ql.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var sf=function(e){var t=e.business,n=e.UIComponent,r=e.handleUpdateBusinessState,o=af(rn(),1)[0],s=af(yn(),1)[0],c=af(Br(),2)[1].showToast,l=af(Bn(),2)[1],f=af(Object(i.useState)({loading:!1,changes:{},error:null}),2),p=f[0],d=f[1],y=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(nf(nf({},p),{},{loading:!0})),c(Dr.Info,l("LOADING","Loading")),e.next=5,o.businesses(t.id).save(p.changes,{accessToken:s.token});case 5:n=e.sent,i=n.content,u=i.error,f=i.result,u?d(nf(nf({},p),{},{loading:!1,error:u})):(d(nf(nf({},p),{},{loading:!1,changes:{},error:null})),r(f),c(Dr.Success,l("BUSINESS_UPDATED","Business updated"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(nf(nf({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){of(a,r,o,i,u,"next",e)}function u(e){of(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,ef({},e,{formState:p,handleChangeForm:function(e){d(nf(nf({},p),{},{changes:nf(nf({},p.changes),e)}))},handlePickupStateSave:y})))};function cf(){return cf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cf.apply(this,arguments)}function lf(e){return lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(e)}function ff(e){return function(e){if(Array.isArray(e))return gf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pf(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function df(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){pf(a,r,o,i,u,"next",e)}function u(e){pf(a,r,o,i,u,"throw",e)}i(void 0)}))}}function yf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yf(Object(n),!0).forEach((function(t){vf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||bf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bf(e,t){if(e){if("string"==typeof e)return gf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gf(e,t):void 0}}function gf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}sf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Of=function(e){var t=e.UIComponent,n=e.businessState,r=e.handleUpdateBusinessState,o=e.category,s=e.categoryId,c=e.onClose,l=e.categorySelected,f=e.setCategorySelected,p=mf(yn(),1)[0].loading,d=mf(rn(),1)[0],y=mf(Bn(),2)[1],h=mf(Br(),2)[1].showToast,v=mf(Object(i.useState)({loading:!1,changes:{enabled:!0,enabledParent:!1},result:{error:!1}}),2),m=v[0],b=v[1],g=mf(Object(i.useState)([]),2),O=g[0],w=g[1];Object(i.useEffect)((function(){b(hf(hf({},m),{},{changes:o||{}}))}),[o]);var j=function(){var e=df(a.a.mark((function e(t){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ff(n.business.categories)).forEach((function e(n,r,o){var a,i;(null==n?void 0:n.id)===(null==t?void 0:t.result.parent_category_id)&&(Array.isArray(null==n?void 0:n.subcategories)&&(n.subcategories.find((function(e){var n;return(null==e?void 0:e.id)===(null==t||null===(n=t.result)||void 0===n?void 0:n.id)}))||n.subcategories.push(null==t?void 0:t.result)));var u=["name","enabled","header","description","ribbon","image","slug","seo_image","seo_title","seo_description"];(null==n?void 0:n.id)===(null==t||null===(a=t.result)||void 0===a?void 0:a.id)&&n.parent_category_id===(null==t?void 0:t.result.parent_category_id)&&Object.keys(n).forEach((function(e){u.includes(e)&&void 0!==t.result[e]&&(n[e]=null==t?void 0:t.result[e])})),(null==n?void 0:n.id)===(null==t||null===(i=t.result)||void 0===i?void 0:i.id)&&n.parent_category_id!==(null==t?void 0:t.result.parent_category_id)&&o.splice(r,1),Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),o=hf(hf({},n.business),{},{categories:r}),e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=df(a.a.mark((function e(){var t,i,u,c,l,v,g,O,w,S,P,C,I,x,A,T,_,k;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=47;break}if(t=(null==o?void 0:o.id)||s,!p){e.next=4;break}return e.abrupt("return");case 4:for(c in e.prev=4,h(Dr.Info,y("LOADING","Loading")),b(hf(hf({},m),{},{loading:!0})),u=hf({},m.changes))null===u[c]&&delete u[c];return e.next=11,d.businesses(null==n||null===(i=n.business)||void 0===i?void 0:i.id).categories(parseInt(t)).save(u);case 11:if(l=e.sent,(v=l.content).error){e.next=39;break}if(void 0===(null===(g=m.changes)||void 0===g||null===(O=g.ribbon)||void 0===O?void 0:O.enabled)||null!==(w=m.changes)&&void 0!==w&&null!==(S=w.ribbon)&&void 0!==S&&S.enabled||null==v||null===(P=v.result)||void 0===P||null===(C=P.ribbon)||void 0===C||!C.enabled){e.next=29;break}return x={ribbon:{enabled:!1}},e.next=18,d.businesses(null==n||null===(I=n.business)||void 0===I?void 0:I.id).categories(parseInt(t)).save(x);case 18:if(A=e.sent,T=A.content,b(hf(hf({},m),{},{changes:T.result,result:{error:!1,result:T.result},loading:!1})),f(T.result),!r){e.next=27;break}return e.next=25,j(T);case 25:_=e.sent,r(_);case 27:e.next=36;break;case 29:if(b(hf(hf({},m),{},{changes:v.result,result:{error:!1,result:v.result},loading:!1})),f(v.result),!r){e.next=36;break}return e.next=34,j(v);case 34:k=e.sent,r(k);case 36:h(Dr.Success,y("CATEOGORY_UPDATED","Category updated")),e.next=40;break;case 39:b(hf(hf({},m),{},{changes:m.changes,result:v,loading:!1}));case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(4),b(hf(hf({},m),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 45:e.next=48;break;case 47:E();case 48:case"end":return e.stop()}}),e,null,[[4,42]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=df(a.a.mark((function e(){var t,o,i,u,s,l,f,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(Dr.Info,y("LOADING","Loading")),b(hf(hf({},m),{},{loading:!0})),void 0===(null==(i=hf({},null==m?void 0:m.changes))?void 0:i.ribbon)||null!=i&&null!==(t=i.ribbon)&&void 0!==t&&t.enabled||delete i.ribbon,e.next=9,d.businesses(parseInt(null==n||null===(o=n.business)||void 0===o?void 0:o.id)).categories().save(i);case 9:u=e.sent,(s=u.content).error?b(hf(hf({},m),{},{changes:m.changes,result:s,loading:!1})):((f=hf({},s.result)).parent_category_id=(null===(l=s.result)||void 0===l?void 0:l.parent_category_id)||null,b(hf(hf({},m),{},{category:{},result:{error:!1,result:f},loading:!1})),r&&(g=(null===(v=n.business)||void 0===v?void 0:v.categories)||[],null!=s&&s.result.parent_category_id?g.forEach((function e(t){(null==t?void 0:t.id)===(null==s?void 0:s.result.parent_category_id)&&t.subcategories.push(hf(hf({},f),{},{products:[],subcategories:[]})),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})):g.push(hf(hf({},f),{},{products:[],subcategories:[]})),r(hf(hf({},n.business),{},{categories:g}))),h(Dr.Success,y("CATEOGORY_CREATED","Category created")),c&&c()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),b(hf(hf({},m),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var t=df(a.a.mark((function t(){var i,u,s,c,v,g;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,h(Dr.Info,y("LOADING","Loading")),b(hf(hf({},m),{},{loading:!0})),t.next=7,d.businesses(parseInt(null===(i=n.business)||void 0===i?void 0:i.id)).categories(parseInt(null==o?void 0:o.id)).delete();case 7:u=t.sent,s=u.content,c=s.error,v=s.result,c?b(hf(hf({},m),{},{loading:!1,result:{error:!0,result:v}})):(b(hf(hf({},m),{},{loading:!1,result:{error:!1,result:v}})),r&&((g=ff(n.business.categories)).forEach((function e(t,n,r){(null==t?void 0:t.id)===(null==o?void 0:o.id)&&r.splice(n,1),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),r(hf(hf({},n.business),{},{categories:g})),(null==o?void 0:o.id)===(null==l?void 0:l.id)&&f(g[0])),h(Dr.Success,y("CATEOGORY_DELETED","Category deleted")),e.onClose&&e.onClose(null==o?void 0:o.id)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),b(hf(hf({},m),{},{loading:!1,result:{error:!0,result:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(!n.loading&&l){var e=function e(t,n){var r,o={id:null==t?void 0:t.id,name:t.name};if(t&&"object"===lf(t))return(null==t?void 0:t.id)===n?[]:(((null==t?void 0:t.subcategories)||[]).some((function(t){return r=e(t,n)})),r&&[o].concat(ff(r)))};n.business.categories.forEach((function(t){var n=e(t,null==l?void 0:l.id);n&&w(n)}))}}),[null==n?void 0:n.loading,l]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,cf({},e,{isAddMode:!o,formState:m,setFormState:b,parentCategories:O,handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){b(hf(hf({},m),{},{changes:hf(hf({},m.changes),{},vf({},t,n.result))}))},n.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){var t=vf({},e.target.name,e.target.value);b(hf(hf({},m),{},{changes:hf(hf({},m.changes),t)}))},handleChangeCheckBox:function(e){var t=null;void 0!==e.enabled&&(t={enabled:e.enabled}),t=e.enabledParent?hf(hf({},t),{},{parent_category_id:null==l?void 0:l.id}):hf(hf({},t),{},{parent_category_id:null}),b(hf(hf({},m),{},{changes:hf(hf({},m.changes),t)}))},handleChangeItem:function(e){b(hf(hf({},m),{},{changes:hf(hf({},m.changes),e)}))},handleUpdateClick:S,handleDeleteCategory:P,handleChangeRibbon:function(e){var t,n,r=null!=m&&null!==(t=m.changes)&&void 0!==t&&t.ribbon?hf(hf({},null==m||null===(n=m.changes)||void 0===n?void 0:n.ribbon),e):hf({},e),o=hf(hf({},null==m?void 0:m.changes),{},{ribbon:r});b(hf(hf({},m),{},{changes:o}))}})))};function wf(){return wf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wf.apply(this,arguments)}Of.propTypes={UIComponent:c.a.elementType,businessState:c.a.object,handleUpdateBusinessState:c.a.func,setIsAddProduct:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Of.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jf=function(e){var t=e.categories,n=e.onClickCategory,r=e.UIComponent;return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,wf({},e,{categories:t,handlerClickCategory:n})))};function Sf(){return Sf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sf.apply(this,arguments)}jf.propTypes={UIComponent:c.a.elementType,categories:c.a.arrayOf(c.a.object),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ef=function(e){var t=e.onChangeSearch,n=e.UIComponent;return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Sf({},e,{handleChangeSearch:t})))};function Pf(){return Pf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pf.apply(this,arguments)}function Cf(e){return function(e){if(Array.isArray(e))return Uf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Df(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function If(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xf(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){If(a,r,o,i,u,"next",e)}function u(e){If(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Af(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Af(Object(n),!0).forEach((function(t){_f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Af(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Df(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Df(e,t){if(e){if("string"==typeof e)return Uf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uf(e,t):void 0}}function Uf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ef.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ef.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Lf=function(e){var t,n=e.promotion,r=e.UIComponent,o=e.business,s=e.handleCloseAddForm,c=e.handleSuccessUpdate,l=kf(Bn(),2)[1],f=kf(rn(),1)[0],p=kf(yn(),1)[0].token,d=kf(Br(),2)[1].showToast,y=kf(tr(),1)[0].configs,h=null==y||null===(t=y.advanced_offers_module)||void 0===t?void 0:t.value,v=kf(Object(i.useState)({promotion:n,loading:!1,error:null}),2),m=v[0],b=v[1],g=kf(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),O=g[0],w=g[1],j=kf(Object(i.useState)(!1),2),S=j[0],E=j[1],P=function(){var e=xf(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,l("LOADING","Loading")),w(Tf(Tf({},O),{},{result:{},loading:!0})),t={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(null==O?void 0:O.changes)},e.next=6,fetch("".concat(f.root,"/business/").concat(o.id,"/offers/").concat(n.id),t);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?w(Tf(Tf({},O),{},{result:{error:!0,result:i.result},loading:!1})):(b(Tf(Tf({},m),{},{promotion:i.result})),w(Tf(Tf({},O),{},{loading:!1,changes:{}})),d(Dr.Success,l("PROMOTION_SAVED","Promotion saved")),c&&(u=o.offers.filter((function(e){return e.id===n.id&&Object.assign(e,i.result),!0})),c(Tf(Tf({},o),{},{offers:u})))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Tf(Tf({},O),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=xf(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,l("LOADING","Loading")),w(Tf(Tf({},O),{},{result:{},loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(null==O?void 0:O.changes)},e.next=6,fetch("".concat(f.root,"/business/").concat(o.id,"/offers"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:(r=e.sent).error?w(Tf(Tf({},O),{},{result:{error:!0,result:r.result},loading:!1})):(d(Dr.Success,l("PROMOTION_ADDED","Promotion added")),s&&s(),c&&c(Tf(Tf({},o),{},{offers:[].concat(Cf(o.offers),[r.result])}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Tf(Tf({},O),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0===Object.keys(n).length?(E(!0),w(Tf(Tf({},O),{},h?{changes:{type:2,rate_type:2,rate:0,auto:!1,public:!0,condition_type:1,target:1,stackable:!1}}:{changes:{type:2,rate_type:2,rate:0}}))):(w(Tf(Tf({},O),{},{changes:{}})),E(!1)),b(Tf(Tf({},m),{},{promotion:n}))}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,Pf({},e,{promotionState:m,formState:O,isAddMode:S,handleChangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){w(Tf(Tf({},O),{},{changes:Tf(Tf({},O.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){var t,n,r;"coupon"!==e.target.name||2!==(null==O||null===(t=O.changes)||void 0===t?void 0:t.type)&&(null!=O&&null!==(n=O.changes)&&void 0!==n&&n.type||2!==(null==m||null===(r=m.promotion)||void 0===r?void 0:r.type))?w(Tf(Tf({},O),{},{changes:Tf(Tf({},O.changes),{},_f({},e.target.name,e.target.value))})):w(Tf(Tf({},O),{},{changes:Tf(Tf({},O.changes),{},{coupon:e.target.value.replace(/\s/g,"")})}))},handleChangeItem:function(e){w(Tf(Tf({},O),{},{changes:Tf(Tf({},O.changes),e)}))},handleUpdateClick:P,handleAddClick:C})))};function Bf(){return Bf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bf.apply(this,arguments)}function Ff(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ff(Object(n),!0).forEach((function(t){Mf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ff(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nf(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zf(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Nf(a,r,o,i,u,"next",e)}function u(e){Nf(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Gf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Lf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Lf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qf=function(e){var t=e.business,n=e.businessId,r=e.promotions,o=e.UIComponent,s=e.handleSuccessUpdate,c=Gf(Bn(),2)[1],l=Gf(rn(),1)[0],f=Gf(yn(),1)[0].token,p=Gf(Br(),2)[1].showToast,d=Gf(Object(i.useState)({promotions:[],loading:!1,error:null}),2),y=d[0],h=d[1],v=Gf(Object(i.useState)({loading:!1,error:null}),2),m=v[0],b=v[1],g=Gf(Object(i.useState)(!1),2),O=g[0],w=g[1],j=function(){var e=zf(a.a.mark((function e(){var t,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Rf(Rf({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(l.root,"/business/").concat(n,"/offers"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(o=e.sent).error||h({promotions:o.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(Rf(Rf({},y),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=zf(a.a.mark((function e(r,o){var i,u,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,c("LOADING","Loading")),b(Rf(Rf({},m),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({enabled:r})},e.next=6,fetch("".concat(l.root,"/business/").concat(n,"/offers/").concat(o),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(d=e.sent).error||(v=y.promotions.filter((function(e){return e.id===o&&Object.assign(e,d.result),!0})),h(Rf(Rf({},y),{},{promotions:v})),p(Dr.Success,c("PROMOTION_SAVED","Promotion saved")),s&&s(Rf(Rf({},t),{},{offers:v}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=zf(a.a.mark((function e(r){var o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,c("LOADING","Loading")),b(Rf(Rf({},m),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(n,"/offers/").concat(r),o);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(u=y.promotions.filter((function(e){return e.id!==r})),h(Rf(Rf({},y),{},{promotions:u})),s&&s(Rf(Rf({},t),{},{offers:u})),p(Dr.Success,c("PROMOTION_DELETED","Promotion deleted")),w(!0)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?h(Rf(Rf({},y),{},{loading:!1,promotions:r})):j()}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Bf({},e,{promotionListState:y,handleChangePromotionActiveState:S,handleDeletePromotion:E,isSuccessDeleted:O,setIsSuccessDeleted:w})))};function $f(){return $f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$f.apply(this,arguments)}function Jf(e){return function(e){if(Array.isArray(e))return ep(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vf(Object(n),!0).forEach((function(t){Wf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kf(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Xf(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Kf(a,r,o,i,u,"next",e)}function u(e){Kf(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Zf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Qf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qf(e,t){if(e){if("string"==typeof e)return ep(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ep(e,t):void 0}}function ep(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}qf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var tp=function(e){var t=e.businessId,n=e.offerId,r=e.metafields,o=e.UIComponent,s=e.handleSuccessAddPromotionMetaFields,c=e.handleSuccessDeletePromotionMetaFields,l=Zf(rn(),1)[0],f=Zf(yn(),1)[0],p=Zf(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),d=p[0],y=p[1],h=Zf(Object(i.useState)({loading:!1,result:{error:!1}}),2),v=h[0],m=h[1],b=function(){var e=Xf(a.a.mark((function e(){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Hf(Hf({},d),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/offers/").concat(n,"/metafields"),r);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=i.result,y(Hf(Hf({},d),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(Hf(Hf({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Xf(a.a.mark((function e(r){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Hf(Hf({},v),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/offers/").concat(n,"/metafields/").concat(r),o);case 5:e.sent.ok&&(i=d.metaFields.filter((function(e){return e.id!==r})),y(Hf(Hf({},d),{},{metaFields:i})),m({loading:!1,result:{error:!1}}),c&&c(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Xf(a.a.mark((function e(r){var o,i,u,c,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Hf(Hf({},v),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(r)},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/offers/").concat(n,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,c=u.error,p=u.result,c?m({loading:!1,result:{error:!0,result:p}}):([],h=[].concat(Jf(d.metaFields),[p]),y(Hf(Hf({},d),{},{metaFields:h})),m({loading:!1,result:{error:!1}}),s&&s(p)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),m({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?y(Hf(Hf({},d),{},{metaFields:r})):b()}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,$f({},e,{metaFieldsList:d,actionState:v,handleDeleteMetaField:g,handeAddMetaField:O})))};function np(){return np=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},np.apply(this,arguments)}function rp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function op(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rp(a,r,o,i,u,"next",e)}function u(e){rp(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ap(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ip(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ap(Object(n),!0).forEach((function(t){up(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ap(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function up(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}tp.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},tp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var lp=function(e){var t=e.businessId,n=e.reviews,r=e.UIComponent,o=sp(rn(),1)[0],s=sp(yn(),1)[0].token,c=sp(Br(),2)[1].showToast,l=sp(Bn(),2)[1],f={},p=sp(Object(i.useState)({reviews:[],loading:!0,error:null}),2),d=p[0],y=p[1],h=sp(Object(i.useState)(n),2),v=h[0],m=h[1],b=sp(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(){var e=op(a.a.mark((function e(){var n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={},f.reviews=r,e.next=5,o.businesses(t).select(["reviews"]).get({cancelToken:r});case 5:i=e.sent,u=i.content.result,(s=null==u||null===(n=u.reviews)||void 0===n?void 0:n.reviews).sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),m(s),y(ip(ip({},d),{},{loading:!1,reviews:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&y(ip(ip({},d),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=op(a.a.mark((function e(n,r){var i,u,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),O(ip(ip({},g),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({enabled:r})},e.next=6,fetch("".concat(o.root,"/business/").concat(t,"/reviews/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(f=e.sent).error||(p=d.reviews.filter((function(e){return e.id===n&&Object.assign(e,f.result),!0})),y(ip(ip({},d),{},{reviews:p})),c(Dr.Success,l("REVIEW_UPDATED","Review updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return n?(n.length&&n.sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),y(ip(ip({},d),{},{loading:!1,reviews:n}))):w(),function(){f.reviews&&f.reviews.cancel()}}),[t]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,np({},e,{reviewsList:d,actionState:g,handleClickOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="all"!==e?v.filter((function(t){return t.total>=e&&t.total<e+1})):v;y(ip(ip({},d),{},{loading:!1,reviews:t}))},handleChangeReviewEnabled:j})))};function fp(){return fp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fp.apply(this,arguments)}function pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pp(Object(n),!0).forEach((function(t){yp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function vp(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hp(a,r,o,i,u,"next",e)}function u(e){hp(a,r,o,i,u,"throw",e)}i(void 0)}))}}function mp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}lp.propTypes={UIComponent:c.a.elementType,reviews:c.a.arrayOf(c.a.object),businessId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lp.defaultProps={reviews:[],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gp=function(e){var t=e.UIComponent,n=e.propsToFetch,r=mp(rn(),1)[0],o=mp(yn(),1)[0].token,s=mp(Br(),2)[1].showToast,c=mp(Bn(),2)[1],l=mp(Object(i.useState)({reviews:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=mp(Object(i.useState)({loading:!1,error:null}),2),y=d[0],h=d[1],v=function(){var e=vp(a.a.mark((function e(){var t,i,u,s,c,l,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(dp(dp({},f),{},{loading:!0})),e.next=4,r.setAccessToken(o).businesses().select(n).asDashboard().get();case 4:if(t=e.sent,i=t.content,u=i.error,s=i.result,!u){for(c=[],l=0;l<s.length;l++)for(d=0;d<s[l].reviews.reviews.length;d++)s[l].reviews.reviews[d].business_id=s[l].id,s[l].reviews.reviews[d].business_name=s[l].name,s[l].reviews.reviews[d].business_logo=s[l].logo,s[l].reviews.reviews[d].city_name=null===(y=s[l].city)||void 0===y?void 0:y.name,c.push(s[l].reviews.reviews[d]);c.length>0&&c.sort((function(e,t){return t.id-e.id})),p(dp(dp({},f),{},{loading:!1,reviews:c}))}e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p(dp(dp({},f),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=vp(a.a.mark((function e(t,n,i){var u,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),h(dp(dp({},y),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(i)},e.next=6,fetch("".concat(r.root,"/business/").concat(t,"/reviews/").concat(n),u);case 6:return l=e.sent,e.next=9,l.json();case 9:(d=e.sent).error||(v=f.reviews.filter((function(e){return e.id===n&&Object.assign(e,d.result),!0})),p(dp(dp({},f),{},{reviews:v})),s(Dr.Success,c("REVIEW_UPDATED","Review updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(){var e=vp(a.a.mark((function e(t,n){var i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),h(dp(dp({},y),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/business/").concat(t,"/reviews/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:e.sent.error||(l=f.reviews.filter((function(e){return e.id!==n})),p(dp(dp({},f),{},{reviews:l})),s(Dr.Success,c("REVIEW_REMOVED","Review removed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){v()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,fp({},e,{reviewsListState:f,actionState:y,handleUpdateReview:m,handleDeleteReview:b})))};function Op(){return Op=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Op.apply(this,arguments)}function wp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wp(Object(n),!0).forEach((function(t){Sp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ep(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Pp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gp.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gp.defaultProps={propsToFetch:["reviews","name","logo","city"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ip=function(e){var t=e.business,n=e.UIComponent,r=e.handleSuccessUpdate,o=Pp(rn(),1)[0],s=Pp(yn(),1)[0],c=Pp(Br(),2)[1].showToast,l=Pp(Bn(),2)[1],f=Pp(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),p=f[0],d=f[1],y=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),d(jp(jp({},p),{},{loading:!0})),null!=(n=jp({},p.changes))&&n.schedule&&(n.schedule=JSON.stringify(null==n?void 0:n.schedule)),e.next=7,o.businesses(t.id).save(n,{accessToken:s.token});case 7:i=e.sent,u=i.content,f=u.error,y=u.result,f?d({changes:p.changes,result:{error:!1,result:y},loading:!1}):(d({loading:!1,changes:{},result:{error:!1}}),r&&r(y),c(Dr.Success,l("SCHEDULE_UPDATED","Schedule updated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(jp(jp({},p),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ep(a,r,o,i,u,"next",e)}function u(e){Ep(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Op({},e,{formState:p,handleChangeScheduleState:function(e){d(jp(jp({},p),{},{changes:{schedule:e}}))},handleUpdateSchedule:y})))};function xp(){return xp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xp.apply(this,arguments)}function Ap(e){return function(e){if(Array.isArray(e))return Fp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tp(Object(n),!0).forEach((function(t){kp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Up(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Dp(a,r,o,i,u,"next",e)}function u(e){Dp(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Lp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Bp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bp(e,t){if(e){if("string"==typeof e)return Fp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fp(e,t):void 0}}function Fp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ip.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ip.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Rp=function(e){var t=e.menu,n=e.product,r=e.UIComponent,o=e.business,s=e.handleUpdateBusinessState,c=Lp(rn(),1)[0],l=Lp(yn(),1)[0].token,f=Lp(Bn(),2)[1],p=Lp(Br(),2)[1].showToast,d=Lp(Object(i.useState)({loading:!1,error:null,product:n||{}}),2),y=d[0],h=d[1],v=Lp(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=Lp(Object(i.useState)(null),2),O=g[0],w=g[1],j=function(){var e=Up(a.a.mark((function e(r){var i,u,d,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,f("LOADING","Loading")),b((function(e){return _p(_p({},e),{},{loading:!1})})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(r)},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/products/").concat(n.id),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(d=e.sent).error?b(_p(_p({},m),{},{loading:!1,error:d.resulut})):(h(_p(_p({},y),{},{product:_p(_p({},y.product),r)})),v=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n.id?Object.assign(e,r):e}));return e.products=Ap(t),!0})),g=_p(_p({},o),{},{menus_shared:v}),s&&s(g),p(Dr.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(_p(_p({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Up(a.a.mark((function e(r,i){var u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,f("LOADING","Loading")),b(_p(_p({},m),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:i})},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/extras/").concat(r),u);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(_p(_p({},m),{},{loading:!1,error:v.resulut})):(g=y.product.extras.filter((function(e){return e.id===r&&(e.enabled=i),!0})),O=_p(_p({},y.product),{},{extras:g}),h(_p(_p({},y),{},{product:_p(_p({},y.product),O)})),w=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n.id?Object.assign(e,O):e}));return e.products=Ap(t),!0})),j=_p(_p({},o),{},{menus_shared:w}),s&&s(j),p(Dr.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(_p(_p({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Up(a.a.mark((function e(r,i){var u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,f("LOADING","Loading")),b(_p(_p({},m),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:i})},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/options/").concat(r),u);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(_p(_p({},m),{},{loading:!1,error:v.resulut})):(g=y.product.extras.filter((function(e){var t=e.options.map((function(e){return e.id===r?_p(_p({},e),{},{enabled:i}):e}));return e.options=Ap(t),!0})),O=_p(_p({},y.product),{},{extras:g}),h(_p(_p({},y),{},{product:_p(_p({},y.product),O)})),w=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n.id?Object.assign(e,O):e}));return e.products=Ap(t),!0})),j=_p(_p({},o),{},{menus_shared:w}),s&&s(j),p(Dr.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(_p(_p({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Up(a.a.mark((function e(r,i){var u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,f("LOADING","Loading")),b((function(e){return _p(_p({},e),{},{loading:!1})})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:i})},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/suboptions/").concat(r),u);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(_p(_p({},m),{},{loading:!1,error:v.resulut})):(g=y.product.extras.filter((function(e){var t=e.options.filter((function(e){var t=e.suboptions.map((function(e){return e.id===r?_p(_p({},e),{},{enabled:i}):e}));return e.suboptions=Ap(t),!0}));return e.options=Ap(t),!0})),O=_p(_p({},y.product),{},{extras:g}),h(_p(_p({},y),{},{product:_p(_p({},y.product),O)})),w=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n.id?Object.assign(e,O):e}));return e.products=Ap(t),!0})),j=_p(_p({},o),{},{menus_shared:w}),s&&s(j),p(Dr.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(_p(_p({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){b(_p(_p({},m),{},{changes:{},error:null})),h(_p(_p({},y),{},{product:n||{}}))}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,xp({},e,{productState:y,formState:m,handleUpdateBusinessSharedMenuProduct:j,handleChangeInput:function(e){e.persist(),b((function(t){return _p(_p({},t),{},{changes:_p(_p({},m.changes),{},kp({},e.target.name,e.target.value))})})),clearTimeout(O),w(setTimeout((function(){j(kp({},e.target.name,e.target.value))}),750))},handleChangeItem:function(e){b((function(t){return _p(_p({},t),{},{changes:_p(_p({},m.changes),e)})})),j(e)},handleUpdateExtra:S,handleUpdateOption:E,handleUpdateSuboption:P})))};function Mp(){return Mp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mp.apply(this,arguments)}function Np(e){return function(e){if(Array.isArray(e))return Vp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Jp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zp(Object(n),!0).forEach((function(t){Yp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qp(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function $p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Jp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jp(e,t){if(e){if("string"==typeof e)return Vp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vp(e,t):void 0}}function Vp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Rp.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Rp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Hp=function(e){var t=e.menu,n=e.UIComponent,r=e.business,o=e.handleUpdateBusinessState,s=$p(rn(),1)[0],c=$p(yn(),1)[0].token,l=$p(Bn(),2)[1],f=$p(Br(),2)[1].showToast,p=$p(Object(i.useState)({loading:!1,error:null,menu:t||{}}),2),d=p[0],y=p[1],h=$p(Object(i.useState)({loading:!1,error:null}),2),v=h[0],m=h[1],b=function(){var e,n=(e=a.a.mark((function e(n,i){var u,p,d,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,l("LOADING","Loading")),m(Gp(Gp({},v),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(i)},e.next=6,fetch("".concat(s.root,"/business/").concat(r.id,"/menus_shared/").concat(t.id,"/products/").concat(n),u);case 6:return p=e.sent,e.next=9,p.json();case 9:(d=e.sent).error?m({loading:!1,error:d.resulut}):(y=r.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===n?Gp(Gp({},e),i):e}));return e.products=Np(t),!0})),h=Gp(Gp({},r),{},{menus_shared:y}),o&&o(h),f(Dr.Success,l("PRODUCT_SAVED","Product saved")),m({loading:!1,error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){qp(a,r,o,i,u,"next",e)}function u(e){qp(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){y(Gp(Gp({},d),{},{menu:t||{}}))}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Mp({},e,{menuState:d,actionState:v,handleUpdateBusinessSharedMenuProduct:b})))};function Wp(){return Wp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wp.apply(this,arguments)}function Kp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Hp.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Hp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Zp=function(e){var t=e.orderType,n=e.sortOptions,r=e.defaultSortOption,o=e.onChangeSortOption,a=e.UIComponent,s=Kp(Object(i.useState)(r),2),c=s[0],l=s[1],f=Kp(Object(i.useState)(n),2),p=f[0],d=f[1];return Object(i.useEffect)((function(){var e="delivery_time"===t?"Pickup time":"Delivery time";d(n.filter((function(t){return t!==e})))}),[t]),u.a.createElement(u.a.Fragment,null,a&&u.a.createElement(a,Wp({},e,{orderType:t,sortOptions:p,currentOptionSelected:c,onChangeSortOption:function(e){l(e),o&&o(e)}})))};function Qp(){return Qp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qp.apply(this,arguments)}function ed(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function td(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ed(a,r,o,i,u,"next",e)}function u(e){ed(a,r,o,i,u,"throw",e)}i(void 0)}))}}function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nd(Object(n),!0).forEach((function(t){od(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function od(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ad(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ud(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function id(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ud(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ud(e,t){if(e){if("string"==typeof e)return sd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sd(e,t):void 0}}function sd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Zp.propTypes={UIComponent:c.a.elementType,sortOptions:c.a.arrayOf(c.a.string),defaultSortOption:c.a.string,orderType:c.a.number,onChangeSortOption:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cd=function(e){var t=e.UIComponent,n=e.categoryState,r=e.business,o=e.handleUpdateBusinessState,s=e.categoryId,c=e.categorySelected,l=id(Bn(),2)[1],f=id(rn(),1)[0],p=id(Br(),2)[1].showToast,d=id(yn(),1)[0],y=d.token,h=d.loading,v=id(Pr(),1)[0].parsePrice,m=id(Object(i.useState)({products:null,loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=id(Object(i.useState)(!1),2),w=O[0],j=O[1],S=id(Object(i.useState)(!1),2),E=S[0],P=S[1],C=id(Object(i.useState)({row:-1,col:-1}),2),I=C[0],x=C[1],A="".concat(r.tax,"% ").concat(1===r.tax_type?l("INCLUDED_ON_PRICE","Included on price"):l("NOT_INCLUDED_ON_PRICE","Not included on price")),T="".concat(v(0)," + ").concat(r.service_fee,"%"),_=function(){var e=td(a.a.mark((function e(t,n,r){var o,i,u,s,c,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Dr.Info,l("LOADING","Loading")),g(rd(rd({},b),{},{loading:!0})),o={method:n?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify({products:JSON.stringify(t)})},i="".concat(f.root,"/bulks/products"),e.next=9,fetch(i,o);case 9:return u=e.sent,e.next=12,u.json();case 12:s=e.sent,c=s.error,d=s.result,c?g(rd(rd({},b),{},{loading:!1,result:{error:!0,result:d}})):(g(rd(rd({},b),{},{loading:!1,result:{error:!1,result:n?l("PRODUCT_CREATED","Product created"):l("PRODUCT_UPDATE","Product updated")}})),p(Dr.Success,n?l("PRODUCT_CREATED","Product created"):l("PRODUCT_UPDATE","Product updated")),k()),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),g(rd(rd({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,n,r){return e.apply(this,arguments)}}(),k=function(){var e=td(a.a.mark((function e(){var t,n,i,u,p,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=s||c.id,n={business_id:null==r?void 0:r.id,category_id:parseInt(t)},e.next=7,f.businesses(null==r?void 0:r.id).categories(parseInt(t)).products().parameters(n).get();case 7:i=e.sent,u=i.content,p=u.error,d=u.result,p?g(rd(rd({},b),{},{loading:!1,result:{error:!0,result:d}})):(o&&(y=null==r?void 0:r.categories.map((function(e){return parseInt(e.id)===parseInt(t)?rd(rd({},e),{},{products:d}):e})),o(rd(rd({},r),{},{categories:y}))),g(rd(rd({},b),{},{products:d.map((function(e){var t,n,o,a;return rd(rd({},e),{},{taxShow:null!=e&&e.tax?"".concat(null===(t=e.tax)||void 0===t?void 0:t.rate,"% ").concat(1===(null===(n=r.tax)||void 0===n?void 0:n.type)?l("INCLUDED_ON_PRICE","Included on price"):l("NOT_INCLUDED_ON_PRICE","Not included on price")):A,feeShow:null!=e&&e.fee?"".concat(v(null===(o=e.fee)||void 0===o?void 0:o.fixed)," + ").concat(null===(a=e.fee)||void 0===a?void 0:a.percentage,"%"):T})})),loading:!1,result:{error:!1,result:l("PRODUCT_SAVED","Product saved")}}))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),g(rd(rd({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=td(a.a.mark((function e(t){var n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Dr.Info,l("LOADING","Loading")),g(rd(rd({},b),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify({products:JSON.stringify(t)})},r="".concat(f.root,"/bulks/products"),e.next=9,fetch(r,n);case 9:return o=e.sent,e.next=12,o.json();case 12:i=e.sent,u=i.error,s=i.result,u?g(rd(rd({},b),{},{loading:!1,result:{error:!0,result:s}})):(g(rd(rd({},b),{},{loading:!1,result:{error:!1,result:l("PRODUCT_DELETED","Product deleted")}})),p(Dr.Success,l("PRODUCT_DELETED","Product deleted")),k()),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),g(rd(rd({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t=[],o=ad(n.products);try{for(o.s();!(e=o.n()).done;){var a,i,u,s,c=e.value,f=null!=c&&c.tax?"".concat(null===(a=c.tax)||void 0===a?void 0:a.rate,"% ").concat(1===(null===(i=r.tax)||void 0===i?void 0:i.type)?l("INCLUDED_ON_PRICE","Included on price"):l("NOT_INCLUDED_ON_PRICE","Not included on price")):A,p=c.fee?"".concat(v(null===(u=c.fee)||void 0===u?void 0:u.fixed)," + ").concat(null===(s=c.fee)||void 0===s?void 0:s.percentage,"%"):T,d=rd(rd({},c),{},{taxShow:f,feeShow:p});t.push(d)}}catch(e){o.e(e)}finally{o.f()}g(rd(rd({},b),{},{products:t}))}),[null==n?void 0:n.products]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Qp({},e,{handleItemChange:function(e,t,n){if(E)P(!1);else if("loadData"!==t){e=e||[];var o=[],a=[],i=[],u=[],f=s||(null==c?void 0:c.id);e.forEach((function(e){var t={name:!1,price:!1};if(e[2]!==e[3]){for(var s=!0,c=0;c<o.length;c++)if(o[c]===e[0]){s=!1;break}if(s){o.push(e[0]);var p=n.getSourceDataAtRow(e[0]);if(n.validateRows(o,(function(e){})),!p.name&&(p.price||p.quantity||p.description)&&(t.name=!0,g(rd(rd({},b),{},{result:{error:!0,result:[l("NAME_REQUIRED","Name Required")]}}))),p.price&&"number"!=typeof p.price){var d=parseFloat(p.price);d?p.price=d:(t.price=!0,g(rd(rd({},b),{},{result:{error:!0,result:[l("PRODUCT_PRICE_NUMBER")]}})))}if(p.quantity&&"number"!=typeof p.quantity&&"NA"!==p.quantity){var y=parseFloat(p.quantity);y?p.quantity=y:t.quantity=!0}if(p.id)if(p.name||p.price||p.description){if(!(t.price||t.name||t.quantity)){p.description||(p.description=null);var h={id:p.id,name:p.name,description:p.description?p.description:"",price:p.price?p.price:0,inventoried:(null==p?void 0:p.inventoried)||!1,category_id:f,business_id:null==r?void 0:r.id};void 0!==(null==p?void 0:p.offer_price)&&(h.offer_price=p.offer_price),void 0!==(null==p?void 0:p.cost_price)&&(h.cost_price=p.cost_price),(p.quantity&&"NA"!==p.quantity||0===p.quantity)&&(h.quantity=p.quantity),i.push(h)}}else p.row=e[0],a.push(p);else if(!(t.price||t.name||t.quantity)){var v={name:p.name,description:p.description?p.description:"",price:p.price?p.price:0,cost_price:(null==p?void 0:p.cost_price)||0,category_id:f,business_id:null==r?void 0:r.id};(p.quantity&&"NA"!==p.quantity||0===p.quantity)&&(v.quantity=p.quantity,v.inventoried=!0),u.push(v)}}}})),u.length>0&&_(u,!0,n),i.length>0&&_(i,!1,n),a.length>0&&(n.alter("remove_row",a[0].row,a.length),j(!0))}},spreadSheetState:b,handleRowRemove:function(e,t,n,r){if(r){var o,a=[],i=ad(n);try{for(i.s();!(o=i.n()).done;){var u=o.value;a.push(null==r?void 0:r.getSourceDataAtRow(u).id)}}catch(e){i.e(e)}finally{i.f()}w&&j(!1),setTimeout((function(){D(a)}),1)}},handleAfterSectionEnd:function(e,t,n,r,o){I.row===e&&I.col===t||e!==n||t!==r||(I.row=e,I.col=t,x({row:e,col:t}),o.deselectCell(),o.selectCell(e,t))},handleoutsideClickDeselects:function(){return x({row:-1,col:-1}),!1}})))};function ld(){return ld=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ld.apply(this,arguments)}function fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fd(Object(n),!0).forEach((function(t){dd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yd(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function hd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cd.propTypes={UIComponent:c.a.elementType,businessState:c.a.object,setBusinessState:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cd.defaultProps={};var md=function(e){var t=e.businessTypes,n=e.onChangeBusinessType,r=e.defaultBusinessType,o=e.UIComponent,s=hd(rn(),1)[0],c=hd(Object(i.useState)(r),2),l=c[0],f=c[1],p=hd(Object(i.useState)({loading:!0,error:null,types:[],pagination:null}),2),d=p[0],y=p[1],h=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s.root,'/business_types?where=[{"attribute":"enabled","value":true}]'),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(n=e.sent,r=n.error,o=n.result,i=n.pagination,r){e.next=14;break}return o.length>0&&o.unshift({id:null,enabled:!0,image:null,name:"All"}),y(pd(pd({},d),{},{loading:!1,types:o,pagination:i})),e.abrupt("return");case 14:y(pd(pd({},d),{},{loading:!1,error:o})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),y(pd(pd({},d),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){yd(a,r,o,i,u,"next",e)}function u(e){yd(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){t?y(pd(pd({},d),{},{loading:!1,types:t})):h()}),[t]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,ld({},e,{typesState:d,businessTypes:t,currentTypeSelected:l,handleChangeBusinessType:function(e){f(e),n(e)}})))};function bd(){return bd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bd.apply(this,arguments)}function gd(e){return function(e){if(Array.isArray(e))return Id(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Od(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function wd(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Od(a,r,o,i,u,"next",e)}function u(e){Od(a,r,o,i,u,"throw",e)}i(void 0)}))}}function jd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jd(Object(n),!0).forEach((function(t){Ed(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ed(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Cd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cd(e,t){if(e){if("string"==typeof e)return Id(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Id(e,t):void 0}}function Id(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}md.propTypes={UIComponent:c.a.elementType,businessTypes:c.a.arrayOf(c.a.object),defaultBusinessType:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},md.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xd=function(e){var t,n=e.UIComponent,r=e.setBusinessTypes,o=e.businessTypes,s=Pd(rn(),1)[0],c=Pd(yn(),1)[0].token,l=Pd(Br(),2)[1].showToast,f=Pd(Bn(),2)[1],p=Pd(Object(i.useState)({businessType:null!==(t=e.businessType)&&void 0!==t?t:null}),2),d=p[0],y=p[1],h=Pd(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=h[0],m=h[1],b=function(){var e=wd(a.a.mark((function e(){var t,n,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),m(Sd(Sd({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(v.changes)},e.next=6,fetch("".concat(s.root,"/business_types/").concat(null==d||null===(t=d.businessType)||void 0===t?void 0:t.id),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?m(Sd(Sd({},v),{},{loading:!1,error:u.result})):(y({businessType:Sd(Sd({},d.businessType),u.result)}),m({loading:!1,changes:{},error:null}),r&&(p=o.map((function(e){var t;return e.id===(null==u||null===(t=u.result)||void 0===t?void 0:t.id)?Sd(Sd({},e),null==u?void 0:u.result):e})),r(p)),l(Dr.Success,f("CATEGORY_UPDATED","Category updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(Sd(Sd({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var t=wd(a.a.mark((function t(){var n,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dr.Info,f("LOADING","Loading")),m(Sd(Sd({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(v.changes)},t.next=6,fetch("".concat(s.root,"/business_types"),n);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?m(Sd(Sd({},v),{},{loading:!1,error:u.result})):(m({loading:!1,changes:{},error:null}),r&&r([].concat(gd(o),[u.result])),l(Dr.Success,f("CATEGORY_ADDED","Category added")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(Sd(Sd({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=wd(a.a.mark((function t(){var n,i,u,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dr.Info,f("LOADING","Loading")),m(Sd(Sd({},v),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(s.root,"/business_types/").concat(d.businessType.id),n);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?m(Sd(Sd({},v),{},{loading:!1,error:u.result})):(m({loading:!1,changes:{},error:null}),r&&(p=o.filter((function(e){return e.id!==d.businessType.id})),r(p)),l(Dr.Success,f("CATEGORY_DELETED","Category deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(Sd(Sd({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var t;m({loading:!1,changes:{},error:null}),y({businessType:null!==(t=e.businessType)&&void 0!==t?t:null})}),[null==e?void 0:e.businessType]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,bd({},e,{businessTypeState:d,typeFormState:v,handleChangeInput:function(e){m(Sd(Sd({},v),{},{changes:Sd(Sd({},v.changes),{},Ed({},e.target.name,e.target.value))}))},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){m(Sd(Sd({},v),{},{changes:Sd(Sd({},v.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleUpdateProductType:b,handleAddProductType:g,handleDeleteProductType:O,handleChangeItem:function(e,t){var n=Sd(Sd({},null==v?void 0:v.changes),{},Ed({},e,t));m(Sd(Sd({},v),{},{changes:n}))}})))};function Ad(){return Ad=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ad.apply(this,arguments)}function Td(e){return function(e){if(Array.isArray(e))return Rd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_d(Object(n),!0).forEach((function(t){Dd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ud(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ld(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ud(a,r,o,i,u,"next",e)}function u(e){Ud(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Bd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Fd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fd(e,t){if(e){if("string"==typeof e)return Rd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rd(e,t):void 0}}function Rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xd.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Md=function(e){var t=e.UIComponent,n=e.business,r=e.handleSuccessUpdate,o=Bd(rn(),1)[0],s=Bd(yn(),1)[0].token,c=Bd(Bn(),2)[1],l=Bd(Br(),2)[1].showToast,f=Bd(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),p=f[0],d=f[1],y=function(){var e=Ld(a.a.mark((function e(){var t,i,u,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(kd(kd({},p),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(p.changes)},e.next=6,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/webhooks"),t);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(u=e.sent)&&u.error?d(kd(kd({},p),{},{changes:p.changes,result:u,loading:!1})):(d(kd(kd({},p),{},{changes:{},result:u,loading:!1})),(f=Td(n.webhooks)).push(null==u?void 0:u.result),r&&r(kd(kd({},n),{},{webhooks:Td(f)})),l(Dr.Success,c("WEBHOOK_ADDED","Webhook added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(kd(kd({},p),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Ld(a.a.mark((function e(t,i){var u,f,y,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(kd(kd({},p),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(t)},e.next=6,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/webhooks/").concat(i),u);case 6:return f=e.sent,e.next=9,f.json();case 9:null!=(y=e.sent)&&y.error?d(kd(kd({},p),{},{result:y,loading:!1})):(d(kd(kd({},p),{},{result:y,loading:!1})),v=null==n||null===(h=n.webhooks)||void 0===h?void 0:h.map((function(e){var t,n;return e.id===(null==y||null===(t=y.result)||void 0===t?void 0:t.id)?kd(kd({},e),{},{delay:null==y||null===(n=y.result)||void 0===n?void 0:n.delay}):e})),r&&r(kd(kd({},n),{},{webhooks:Td(v)})),l(Dr.Success,c("WEBHOOK_UPDATED","Webhook updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(kd(kd({},p),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Ld(a.a.mark((function e(t){var i,u,f,y,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,c("LOADING","Loading")),d(kd(kd({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=6,fetch("".concat(o.root,"/business/").concat(null==n?void 0:n.id,"/webhooks/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:null!=(f=e.sent)&&f.error?d(kd(kd({},p),{},{result:f,loading:!1})):(d(kd(kd({},p),{},{loading:!1})),h=null==n||null===(y=n.webhooks)||void 0===y?void 0:y.filter((function(e){return e.id!==t})),v=kd(kd({},n),{},{webhooks:Td(h)}),r&&r(v),l(Dr.Success,c("WEBHOOK_DELETED","Webhook deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(kd(kd({},p),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ad({},e,{businessTypeFormState:p,handleChangeInput:function(e){var t=Dd({},e.target.name,e.target.value);d(kd(kd({},p),{},{changes:kd(kd({},p.changes),t)}))},handleChangeSelect:function(e,t){d(kd(kd({},p),{},{changes:kd(kd({},p.changes),{},Dd({},t,e))}))},hookFormState:p,handleUpdateAddClick:y,handleDeleteWebhook:v,handleChangeDelay:function(e,t){var n=kd(kd({},t),{},{delay:e});h(n,null==t?void 0:t.id)}})))};function Nd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=$d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zd(Object(n),!0).forEach((function(t){Yd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||$d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $d(e,t){if(e){if("string"==typeof e)return Jd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jd(e,t):void 0}}function Jd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Md.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleSuccessUpdate:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Md.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Vd=function(e){var t=e.apiKey,n=e.mapControls,r=e.clearState,o=e.location,a=e.type,s=e.data,c=e.fillStyle,l=e.infoContentString,f=e.handleData,p=e.setClearState,d=e.isAddMode,y=e.greenFillStyle,h=e.businessZones,v=e.kmlData;t||console.warn("Prop `apiKey` is required to use Google Maps components.");var m=Object(i.useRef)(),b=qd(Object(i.useState)(null),2),g=b[0],O=b[1],w=qd(Object(i.useState)(null),2),j=w[0],S=w[1],E=qd(Object(i.useState)(null),2),P=E[0],C=E[1],I=qd(Object(i.useState)(null),2),x=I[0],A=I[1],T=qd(Object(i.useState)(null),2),_=T[0],k=T[1],D=qd(Object(i.useState)(null),2),U=D[0],L=D[1],B=o?{lat:null==o?void 0:o.lat,lng:null==o?void 0:o.lng}:null==n?void 0:n.defaultPosition,F=qd(Object(i.useState)(!1),2),R=F[0],M=F[1],N=function(){f({center:{lat:P.getCenter().lat(),lng:P.getCenter().lng()},radio:P.getRadius()/1e3})},z=function(){f(Gd(Gd({},s),{},{radio:P.getRadius()/1e3}))},G=function(){var e,t=[],n=Nd(x.getPath().getArray());try{for(n.s();!(e=n.n()).done;){var r=e.value,o={lat:r.lat(),lng:r.lng()};t.push(o)}}catch(e){n.e(e)}finally{n.f()}f(t)},Y=function(e){p(!1),U.setMap(null),1===a?(C(e.overlay),_&&_.open(g)):A(e.overlay)};return Object(i.useEffect)((function(){R&&_&&(_.setContent(l),null!=s&&s.center&&_.setPosition(s.center))}),[_,l,s,R]),Object(i.useEffect)((function(){P&&(f({center:{lat:P.getCenter().lat(),lng:P.getCenter().lng()},radio:P.getRadius()/1e3}),window.google.maps.event.addListener(P,"center_changed",N),window.google.maps.event.addListener(P,"radius_changed",z))}),[P]),Object(i.useEffect)((function(){if(x){var e,t=[],n=Nd(x.getPath().getArray());try{for(n.s();!(e=n.n()).done;){var r=e.value,o={lat:r.lat(),lng:r.lng()};t.push(o)}}catch(e){n.e(e)}finally{n.f()}f(t),window.google.maps.event.addListener(x,"mouseup",G)}}),[x]),Object(i.useEffect)((function(){U&&U.addListener("overlaycomplete",Y)}),[U]),Object(i.useEffect)((function(){var e,t,n;if(null!==(e=window.google)&&void 0!==e&&e.maps&&(r&&(P&&(P.setMap(null),C(null),_&&_.close()),x&&(x.setMap(null),A(null)),U&&U.setMap(null),null!==(t=window.google.maps)&&void 0!==t&&null!==(n=t.drawing)&&void 0!==n&&n.DrawingManager))){var o=new window.google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:window.google.maps.ControlPosition.TOP_CENTER,drawingModes:1===a?[window.google.maps.drawing.OverlayType.CIRCLE]:[window.google.maps.drawing.OverlayType.POLYGON]},circleOptions:Gd(Gd({},c),{},{clickable:!1,draggable:!0}),polygonOptions:Gd(Gd({},c),{},{clickable:!1,draggable:!1})});L(o),o.setMap(g)}}),[r,a]),Object(i.useEffect)((function(){if(R&&g){var e=new window.google.maps.LatLngBounds;if(P&&(e.union(P.getBounds()),g.fitBounds(e)),x&&Array.isArray(s)){var t,n=Nd(s);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.extend(r)}}catch(e){n.e(e)}finally{n.f()}g.fitBounds(e)}}}),[R,s,a,g,P,x]),Object(i.useEffect)((function(){R&&(B.lat=null==o?void 0:o.lat,B.lng=null==o?void 0:o.lng,B.lat&&B.lng&&(j&&j.setPosition(new window.google.maps.LatLng(null==B?void 0:B.lat,null==B?void 0:B.lng)),g&&g.panTo(new window.google.maps.LatLng(null==B?void 0:B.lat,null==B?void 0:B.lng))))}),[o]),Object(i.useEffect)((function(){if(g&&Array.isArray(v)&&d){var e=new window.google.maps.Polygon(Gd(Gd({},c),{},{draggable:!1,map:g,paths:v}));e.setMap(g);var t,n=new window.google.maps.LatLngBounds,r=Nd(v);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.extend(o)}}catch(e){r.e(e)}finally{r.f()}g.fitBounds(n),A(e)}}),[d,v,g]),Object(i.useEffect)((function(){if(R){var e,t,r,i,u=new window.google.maps.Map(m.current,{zoom:null!==(e=null==o?void 0:o.zoom)&&void 0!==e?e:n.defaultZoom,center:B,zoomControl:null==n?void 0:n.zoomControl,streetViewControl:null==n?void 0:n.streetViewControl,fullscreenControl:null==n?void 0:n.fullscreenControl,mapTypeControl:null==n?void 0:n.mapTypeControl,mapTypeId:null==n?void 0:n.mapTypeId,mapTypeControlOptions:Gd({style:window.google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:window.google.maps.ControlPosition.TOP_LEFT},null==n?void 0:n.mapTypeControlOptions)});if(O(u),i=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==B?void 0:B.lat,null==B?void 0:B.lng),map:u,draggable:!(null==n||!n.isMarkerDraggable)}),S(i),s){var f=new window.google.maps.InfoWindow({content:l,position:s.center});if(k(f),1===a&&null!=s&&s.center){var p=new window.google.maps.Circle(Gd(Gd({},c),{},{draggable:!0,map:u,center:s.center,radius:1e3*s.radio}));C(p),f.open(u)}if(2===a&&Array.isArray(s)){var v=new window.google.maps.Polygon(Gd(Gd({},c),{},{draggable:!1,map:u,paths:s}));A(v)}}if(null!==(t=window.google.maps)&&void 0!==t&&null!==(r=t.drawing)&&void 0!==r&&r.DrawingManager){var b=new window.google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:window.google.maps.ControlPosition.TOP_CENTER,drawingModes:1===a?[window.google.maps.drawing.OverlayType.CIRCLE]:[window.google.maps.drawing.OverlayType.POLYGON]},circleOptions:Gd(Gd({},c),{},{clickable:!1,draggable:!0}),polygonOptions:Gd(Gd({},c),{},{clickable:!1,draggable:!1})});L(b),b.setMap(u)}if(d){var g,w=new window.google.maps.LatLngBounds,j=Nd(h);try{for(j.s();!(g=j.n()).done;){var E=g.value;if(1===E.type){var P=new window.google.maps.Circle(Gd(Gd({},y),{},{editable:!1,center:null==E?void 0:E.data.center,radius:1e3*(null==E?void 0:E.data.radio)}));P.setMap(u),w.union(P.getBounds()),u.fitBounds(w)}if(2===(null==E?void 0:E.type)&&Array.isArray(null==E?void 0:E.data))if(new window.google.maps.Polygon(Gd(Gd({},y),{},{editable:!1,paths:null==E?void 0:E.data})).setMap(u),Array.isArray(null==E?void 0:E.data)){var I,x=Nd(null==E?void 0:E.data);try{for(x.s();!(I=x.n()).done;){var T=I.value;w.extend(T)}}catch(e){x.e(e)}finally{x.f()}u.fitBounds(w)}}}catch(e){j.e(e)}finally{j.f()}}}}),[R]),Object(i.useEffect)((function(){if(t){var e=null;if(!window.document.getElementById("__googleMapsScriptId")){window.googleAsyncInit=function(){M(!0)};var n=window.document.createElement("script");return n.id="__googleMapsScriptId",n.async=!0,n.defer=!0,n.src="https://maps.googleapis.com/maps/api/js?key=".concat(t,"&libraries=places,geometry,visualization,drawing&callback=googleAsyncInit"),window.document.body.appendChild(n),function(){e&&clearInterval(e)}}"undefined"!=typeof google?M(!0):e=setInterval((function(){"undefined"!=typeof google&&(M(!0),clearInterval(e))}),100)}}),[t]),R&&u.a.createElement("div",{id:"map",ref:m,style:{width:"70%",height:"50%",position:"absolute"}})};function Hd(){return Hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hd.apply(this,arguments)}function Wd(e){return function(e){if(Array.isArray(e))return ny(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ty(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kd(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xd(Object(n),!0).forEach((function(t){Qd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ey(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ty(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ty(e,t){if(e){if("string"==typeof e)return ny(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ny(e,t):void 0}}function ny(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Vd.propTypes={UIComponent:c.a.elementType,maxLimitLocation:c.a.number,handleChangeAddressMap:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Vd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},Vd.propTypes={apiKey:c.a.string.isRequired};var ry=function(e){var t=e.UIComponent,n=e.business,r=e.handleUpdateBusinessState,o=e.setIsAddProduct,s=e.categorySelected,c=e.handleParentProductAdd,l=ey(yn(),1)[0].loading,f=ey(rn(),1)[0],p=ey(Br(),2)[1].showToast,d=ey(Bn(),2)[1],y=ey(Object(i.useState)({loading:!1,changes:{enabled:!0},result:{error:!1}}),2),h=y[0],v=y[1],m=function(){var e,t=(e=a.a.mark((function e(){var t,i,u,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Dr.Info,d("LOADING","Loading")),t=null===(null==s?void 0:s.id)&&"featured"===(null==s?void 0:s.id)?parseInt(null==n?void 0:n.categories[0]):parseInt(null==s?void 0:s.id),v(Zd(Zd({},h),{},{loading:!0})),e.next=8,f.businesses(parseInt(null==n?void 0:n.id)).categories(t).products().save(h.changes);case 8:i=e.sent,(u=i.content).error?v(Zd(Zd({},h),{},{changes:h.changes,result:u,loading:!1})):(v(Zd(Zd({},h),{},{changes:{},result:{error:!1,result:u.result},loading:!1})),r&&((y=Wd(null==n?void 0:n.categories)).forEach((function e(n){(null==n?void 0:n.id)===t&&n.products.push(u.result),Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),r(Zd(Zd({},n),{},{categories:y}))),o(!1),c&&c(!1),p(Dr.Success,d("PRODUCT_ADD","Product added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),v(Zd(Zd({},h),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Kd(a,r,o,i,u,"next",e)}function u(e){Kd(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Hd({},e,{formState:h,setFormState:v,handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){v(Zd(Zd({},h),{},{changes:Zd(Zd({},h.changes),{},{images:t.result})}))},t.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){var t=Qd({},e.target.name,e.target.value);v(Zd(Zd({},h),{},{changes:Zd(Zd({},h.changes),t)}))},handleUpdateClick:m,handleChangeCheckBox:function(e){var t={enabled:e};v(Zd(Zd({},h),{},{changes:Zd(Zd({},h.changes),t)}))},handleChangeItem:function(e){var t=Zd(Zd({},h.changes),e);v(Zd(Zd({},h),{},{changes:t}))}})))};function oy(){return oy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oy.apply(this,arguments)}function ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ay(Object(n),!0).forEach((function(t){uy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ay(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sy(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cy(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sy(a,r,o,i,u,"next",e)}function u(e){sy(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ly(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ry.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,setIsAddProduct:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ry.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var py=function(e){var t=e.UIComponent,n=e.business,r=e.handleSuccessUpdate,o=ly(rn(),1)[0],s=ly(yn(),1)[0].token,c=ly(Bn(),2)[1],l=ly(Br(),2)[1].showToast,f=ly(Object(i.useState)({wallets:(null==n?void 0:n.configs)||[],loading:!1,error:null}),2),p=f[0],d=f[1],y=ly(Object(i.useState)({loading:!0,created:!1,error:null}),2),h=y[0],v=y[1],m=ly(Object(i.useState)({loading:!1,error:null}),2),b=m[0],g=m[1],O=function(){var e=cy(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(iy(iy({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/business/").concat(n.id,"/configs"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?d(iy(iy({},p),{},{loading:!1,error:i.result})):d(iy(iy({},p),{},{loading:!1,wallets:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(iy(iy({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=cy(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(iy(iy({},h),{},{loading:!0})),e.next=4,fetch("".concat(o.root,"/loyalty_plans"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});case 4:return t=e.sent,e.next=7,t.json();case 7:(r=e.sent).error?v(iy(iy({},h),{},{loading:!1,error:r.result})):(i=r.result.find((function(e){return"credit_point"===e.type})))&&(u=i.businesses.find((function(e){return e.business_id===n.id})),v(iy(iy({},h),{},{loading:!1,created:!!u}))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),v(iy(iy({},h),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=cy(a.a.mark((function e(t,i){var u,f,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(iy(iy({},b),{},{loading:!0})),l(Dr.Info,c("LOADING","Loading")),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(i)},e.next=6,fetch("".concat(o.root,"/business/").concat(n.id,"/configs/").concat(t),u);case 6:return f=e.sent,e.next=9,f.json();case 9:(y=e.sent).error?g({loading:!1,error:y.result}):(g({loading:!1,error:null}),h=p.wallets.map((function(e){var t;return e.id===(null===(t=y.result)||void 0===t?void 0:t.id)?y.result:e})),d(iy(iy({},p),{},{wallets:h})),r&&r(iy(iy({},n),{},{configs:h})),l(Dr.Success,c("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w(),null!=n&&n.configs||O()}),[null==n?void 0:n.configs]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,oy({},e,{loyaltyPlanState:h,walletsListState:p,actionState:b,handleUpdateWallet:j})))};function dy(){return dy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dy.apply(this,arguments)}function yy(e){return function(e){if(Array.isArray(e))return jy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hy(Object(n),!0).forEach((function(t){my(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function my(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function by(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function gy(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){by(a,r,o,i,u,"next",e)}function u(e){by(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Oy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||wy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wy(e,t){if(e){if("string"==typeof e)return jy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jy(e,t):void 0}}function jy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}py.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},py.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Sy=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.isSearchByName,s=e.isSearchByContactType,c=Oy(rn(),1)[0],l=Oy(yn(),1)[0].token,f=Oy(Br(),2)[1].showToast,p=Oy(Bn(),2)[1],d=Oy(Object(i.useState)(null),2),y=d[0],h=d[1],v=Oy(Object(i.useState)({campaigns:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=Oy(Object(i.useState)({clear:!1,changes:{}}),2),O=g[0],w=g[1],j=Oy(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),S=j[0],E=j[1],P=function(){var e=gy(a.a.mark((function e(t,n){var r,i,u,f,p,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(vy(vy({},m),{},{loading:!0})),r=null,i=[],y&&(u=[],o&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(y,"%"))}}),s&&u.push({attribute:"contact_type",value:{condition:"ilike",value:encodeURI("%".concat(y,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(r={conditions:i,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},p=r?"".concat(c.root,"/marketing_campaigns?page=").concat(t,"&page_size=").concat(n,"&where=").concat(JSON.stringify(r)):"".concat(c.root,"/marketing_campaigns?page=").concat(t,"&page_size=").concat(n),e.next=10,fetch(p,f);case 10:return d=e.sent,e.next=13,d.json();case 13:(h=e.sent).error?b(vy(vy({},m),{},{loading:!1,error:h.result})):(b({loading:!1,campaigns:h.result,error:null}),E(vy(vy({},S),{},{currentPage:h.pagination.current_page,totalPages:h.pagination.total_pages,totalItems:h.pagination.total,from:h.pagination.from,to:h.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),b(vy(vy({},m),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=gy(a.a.mark((function e(t,n){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=5,fetch("".concat(c.root,"/marketing_campaigns/").concat(t),r);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||(I&&(u=null==m?void 0:m.campaigns.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0})),I(u)),f(Dr.Success,p("CAMPAIGN_SAVED","Campaign saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){b(vy(vy({},m),{},{campaigns:e}))};return Object(i.useEffect)((function(){m.loading||P(1,S.pageSize)}),[y]),Object(i.useEffect)((function(){(Object.keys(null==O?void 0:O.changes).length>0||O.clear)&&!m.loading&&P(1,S.pageSize)}),[O]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,dy({},e,{searchValue:y,paginationProps:S,campaignList:m,getCampaignList:P,setFilterValues:w,setPaginationProps:E,handleChangeSearch:function(e){h(e)},handleUpdateCampaign:C,handleSuccessAddCampaign:function(e){var t=[].concat(yy(m.campaigns),[e]);E(vy(vy({},S),{},{to:(null==S?void 0:S.to)+1,total:(null==S?void 0:S.total)+1})),b(vy(vy({},m),{},{campaigns:t}))},handleSuccessUpdateCampaign:I,handleSuccessDeleteCampaign:function(e){var t=m.campaigns.filter((function(t){return t.id!==e}));E(vy(vy({},S),{},{total:(null==S?void 0:S.total)-1})),b(vy(vy({},m),{},{campaigns:t}))}})))};function Ey(){return Ey=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ey.apply(this,arguments)}function Py(e){return function(e){if(Array.isArray(e))return Uy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Dy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cy(e){return Cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(e)}function Iy(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xy(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Iy(a,r,o,i,u,"next",e)}function u(e){Iy(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ty(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ay(Object(n),!0).forEach((function(t){_y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ay(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ky(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Dy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dy(e,t){if(e){if("string"==typeof e)return Uy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uy(e,t):void 0}}function Uy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Sy.propTypes={UIComponent:c.a.elementType,isSearchByName:c.a.bool,isSearchByContactType:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Sy.defaultProps={isSearchByName:!0,isSearchByContactType:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var Ly=function(e){var t,n=e.campaign,r=e.campaignList,o=e.UIComponent,s=e.handleSuccessUpdateCampaign,c=e.handleSuccessAddCampaign,l=e.handleSuccessDeleteCampaign,f=ky(Bn(),2)[1],p=ky(rn(),1)[0],d=ky(yn(),1)[0].token,y=ky(Br(),2)[1].showToast,h=ky(Object(i.useState)({campaign:n,loading:!1,error:null}),2),v=h[0],m=h[1],b=ky(Object(i.useState)({loading:!1,changes:{},error:null}),2),g=b[0],O=b[1],w=ky(Object(i.useState)(!1),2),j=w[0],S=w[1],E=ky(Object(i.useState)({loading:!1,audience:0,error:null}),2),P=E[0],C=E[1],I=function(){return O({loading:!1,changes:{}})},x=function(){var e=xy(a.a.mark((function e(){var t,o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in e.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Ty(Ty({},g),{},{loading:!0,error:null})),t=Ty({},null==g?void 0:g.changes))("object"===Cy(t[o])&&null!==t[o]||Array.isArray(t[o]))&&(t[o]=JSON.stringify(t[o]));return null!=t&&t.conditions&&delete t.conditions,i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(t)},e.next=9,fetch("".concat(p.root,"/marketing_campaigns/").concat(n.id),i);case 9:return u=e.sent,e.next=12,u.json();case 12:(c=e.sent).error?O(Ty(Ty({},g),{},{loading:!1,error:c.result})):(m(Ty(Ty({},v),{},{campaign:c.result})),O(Ty(Ty({},g),{},{loading:!1,error:null,changes:{}})),s&&(l=null==r?void 0:r.campaigns.filter((function(e){return e.id===n.id&&Object.assign(e,c.result),!0})),s(l)),I(),y(Dr.Success,f("CAMPAIGN_SAVED","Campaign saved"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),O(Ty(Ty({},g),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var t=xy(a.a.mark((function t(){var n,r,o,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r in t.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Ty(Ty({},g),{},{loading:!0,error:null})),n=Ty({},null==g?void 0:g.changes))("object"===Cy(n[r])&&null!==n[r]||Array.isArray(n[r]))&&(n[r]=JSON.stringify(n[r]));return o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(n)},t.next=8,fetch("".concat(p.root,"/marketing_campaigns"),o);case 8:return i=t.sent,t.next=11,i.json();case 11:(u=t.sent).error?O(Ty(Ty({},g),{},{loading:!1,error:u.result})):(O(Ty(Ty({},g),{},{loading:!1,error:null})),c&&c(u.result),y(Dr.Success,f("CAMPAIGN_ADDED","Campaign added")),e.onClose&&e.onClose()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),O(Ty(Ty({},g),{},{loading:!1,error:t.t0.message}));case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=xy(a.a.mark((function t(){var r,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Ty(Ty({},g),{},{loading:!0,error:null})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},t.next=6,fetch("".concat(p.root,"/marketing_campaigns/").concat(n.id),r);case 6:return o=t.sent,t.next=9,o.json();case 9:(i=t.sent).error?O(Ty(Ty({},g),{},{loading:!1,error:i.result})):(l&&l(n.id),y(Dr.Success,f("CAMPAIGN_DELETED","Campaign deleted")),O(Ty(Ty({},g),{},{loading:!1,error:null})),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),O(Ty(Ty({},g),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var e=xy(a.a.mark((function e(t){var o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,f("LOADING","Loading")),O(Ty(Ty({},g),{},{loading:!0,error:null})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},e.next=6,fetch("".concat(p.root,"/marketing_campaigns/").concat(n.id,"/conditions/").concat(t),o);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?O(Ty(Ty({},g),{},{loading:!1,error:u.result})):(y(Dr.Success,f("CONDITION_DELETED","Condition deleted")),O(Ty(Ty({},g),{},{loading:!1,error:null})),s&&(c=null==r?void 0:r.campaigns.map((function(e){if(e.id===n.id){var t=e.conditions.filter((function(e){return e.id!==u.result}));return Ty(Ty({},e),{},{conditions:t})}return e})),s(c))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O(Ty(Ty({},g),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=xy(a.a.mark((function e(t){var n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(Ty(Ty({},P),{},{loading:!0})),(n=Py(t)).forEach((function(e){Object.keys(e).forEach((function(t){null===e[t]&&delete e[t]}))})),r={conditions:JSON.stringify(n)},o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(r)},e.next=8,fetch("".concat(p.root,"/marketing_campaigns/audience"),o);case 8:return i=e.sent,e.next=11,i.json();case 11:(u=e.sent).error?C(Ty(Ty({},P),{},{loading:!1,error:u.result})):C(Ty(Ty({},P),{},{loading:!1,error:null,audience:null==u||null===(s=u.result)||void 0===s?void 0:s.audience})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),C(Ty(Ty({},P),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0===Object.keys(n).length?(S(!0),O(Ty(Ty({},g),{},{changes:{enabled:!0,conditions:[],status:"pending"}})),k(null==n?void 0:n.conditions)):(S(!1),I()),m(Ty(Ty({},v),{},{campaign:n}))}),[n]),Object(i.useEffect)((function(){var e,t,n;if(j){var r,o=function(){var e=!1;return g.changes.conditions.forEach((function(t){var n=!0;Object.keys(t).forEach((function(e){"condition"!==e&&"date_condition"!==e||(n=!1)})),n&&(e=!0)})),e}();if(null!=g&&null!==(e=g.changes)&&void 0!==e&&e.conditions&&(null==g||null===(t=g.changes)||void 0===t||null===(n=t.conditions)||void 0===n?void 0:n.length)>0&&!o)k(null==g||null===(r=g.changes)||void 0===r?void 0:r.conditions)}}),[JSON.stringify(null==g||null===(t=g.changes)||void 0===t?void 0:t.conditions)]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Ey({},e,{isAddMode:j,audienceState:P,campaignState:v,formState:g,handleChangeItem:function(e,t){var n=Ty(Ty({},g.changes),{},_y({},e,t));"scheduled_at"===e&&(n.status=t?"scheduled":"pending"),O(Ty(Ty({},g),{},{changes:n}))},handleChangeInput:function(e){O(Ty(Ty({},g),{},{changes:Ty(Ty({},g.changes),{},_y({},e.target.name,e.target.value))}))},handleAddCampaign:A,handleDeleteCampaign:T,handleUpdateClick:x,handleRemoveKey:function(e){var t=Ty({},null==g?void 0:g.changes);delete t[e],O(Ty(Ty({},g),{},{changes:t}))},handleChangeContactData:function(e){var t,n,r=null!==(t=g.changes)&&void 0!==t&&t.contact_data?Ty(Ty({},null===(n=g.changes)||void 0===n?void 0:n.contact_data),{},_y({},e.target.name,e.target.value)):_y({},e.target.name,e.target.value);O(Ty(Ty({},g),{},{changes:Ty(Ty({},g.changes),{},{contact_data:r})}))},setCampaignState:m,handleDeleteCondition:_})))};function By(){return By=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},By.apply(this,arguments)}function Fy(e){return Fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fy(e)}function Ry(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function My(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ny(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?My(Object(n),!0).forEach((function(t){zy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):My(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ly.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ly.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qy=function(e){var t=e.UIComponent,n=e.campaignState,r=e.isAddMode,o=e.formState,s=e.handleChangeItem,c=e.handleChangeContactData,l=e.handleSuccessUpdateCampaign,f=e.campaignList,p=Gy(rn(),1)[0],d=Gy(yn(),1)[0].token,y=Gy(Br(),2)[1].showToast,h=Gy(Bn(),2)[1],v=Gy(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e,t=(e=a.a.mark((function e(){var t,r,o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in e.prev=0,y(Dr.Info,h("LOADING","Loading")),b(Ny(Ny({},m),{},{loading:!0,error:null})),r=Ny({},null==m?void 0:m.changes))("object"===Fy(r[o])&&null!==r[o]||Array.isArray(r[o]))&&(r[o]=JSON.stringify(r[o]));return i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(r)},e.next=8,fetch("".concat(p.root,"/marketing_campaigns/").concat(null==n||null===(t=n.campaign)||void 0===t?void 0:t.id),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(s=e.sent).error?b(Ny(Ny({},m),{},{loading:!1,error:s.result})):(b(Ny(Ny({},m),{},{loading:!1,error:null})),l&&(c=null==f?void 0:f.campaigns.filter((function(e){var t;return e.id===(null==n||null===(t=n.campaign)||void 0===t?void 0:t.id)&&Object.assign(e,s.result),!0})),l(c)),y(Dr.Success,h("CAMPAIGN_SAVED","Campaign saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(Ny(Ny({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ry(a,r,o,i,u,"next",e)}function u(e){Ry(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t;r||null!=n&&n.campaign&&Object.keys(null==n?void 0:n.campaign).length>0&&b(Ny(Ny({},m),{},{changes:{contact_type:(null==n||null===(e=n.campaign)||void 0===e?void 0:e.contact_type)||"",contact_data:(null==n||null===(t=n.campaign)||void 0===t?void 0:t.contact_data)||{}}}))}),[null==n?void 0:n.campaign]),Object(i.useEffect)((function(){var e,t;r||null!=n&&n.campaign&&Object.keys(null==n?void 0:n.campaign).length>0&&b(Ny(Ny({},m),{},{changes:{contact_type:(null==n||null===(e=n.campaign)||void 0===e?void 0:e.contact_type)||"",contact_data:(null==n||null===(t=n.campaign)||void 0===t?void 0:t.contact_data)||{}}}))}),[null==n?void 0:n.campaign]),Object(i.useEffect)((function(){var e,t;r&&(null!=o&&o.changes&&Object.keys(null==o?void 0:o.changes).length>0&&b(Ny(Ny({},m),{},{changes:{contact_type:(null==o||null===(e=o.changes)||void 0===e?void 0:e.contact_type)||"",contact_data:(null==o||null===(t=o.changes)||void 0===t?void 0:t.contact_data)||{}}})))}),[null==o?void 0:o.changes]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,By({},e,{contactState:m,handleChangeType:function(e,t){var n=Ny(Ny({},null==m?void 0:m.changes),{},zy({},e,t));b(Ny(Ny({},m),{},{changes:n})),r&&s&&s(e,t)},handleChangeData:function(e){var t,n=Ny(Ny({},null===(t=m.changes)||void 0===t?void 0:t.contact_data),{},zy({},e.target.name,e.target.value));b(Ny(Ny({},m),{},{changes:Ny(Ny({},m.changes),{},{contact_data:n})})),r&&c&&c(e)},handleUpdateContact:g})))};function $y(){return $y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$y.apply(this,arguments)}function Jy(e){return function(e){if(Array.isArray(e))return th(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vy(e){return Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vy(e)}function Hy(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Wy(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Hy(a,r,o,i,u,"next",e)}function u(e){Hy(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ky(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ky(Object(n),!0).forEach((function(t){Zy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ky(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||eh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eh(e,t){if(e){if("string"==typeof e)return th(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?th(e,t):void 0}}function th(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}qy.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qy.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nh=function(e){var t=e.campaignState,n=e.campaignList,r=e.UIComponent,o=e.handleSuccessUpdateCampaign,s=e.type,c=e.isAddMode,l=e.setCampaignState,f=e.formState,p=Qy(Bn(),2)[1],d=Qy(rn(),1)[0],y=Qy(yn(),1)[0].token,h=Qy(Br(),2)[1].showToast,v=Qy(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e=Wy(a.a.mark((function e(){var r,i,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,h(Dr.Info,p("LOADING","Loading")),b(Xy(Xy({},m),{},{loading:!0,error:null})),r=Xy({},null==m?void 0:m.changes))("object"===Vy(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/").concat(null==t?void 0:t.campaign.id,"/conditions/").concat(m.changes.id),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?b(Xy(Xy({},m),{},{loading:!1,error:c.result})):(b(Xy(Xy({},m),{},{loading:!1,error:null,changes:{}})),o&&(f=null==n?void 0:n.campaigns.map((function(e){if(e.id===(null==t?void 0:t.campaign.id)){var n=[];return e.conditions.find((function(e){return e.id===c.result.id}))&&(n=e.conditions.filter((function(e){return e.id!==c.result.id}))),n.push(c.result),l(Xy(Xy({},t),{},{campaign:Xy(Xy({},e),{},{conditions:n})})),Xy(Xy({},e),{},{conditions:n})}return e})),o(f)),h(Dr.Success,p("CONDITION_SAVED","Condition saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(Xy(Xy({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Wy(a.a.mark((function e(){var r,i,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,h(Dr.Info,p("LOADING","Loading")),b(Xy(Xy({},m),{},{loading:!0,error:null})),r=Xy({},null==m?void 0:m.changes))("object"===Vy(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/").concat(null==t?void 0:t.campaign.id,"/conditions"),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?b(Xy(Xy({},m),{},{loading:!1,error:c.result})):(b(Xy(Xy({},m),{},{loading:!1,error:null,changes:{}})),o&&(f=null==n?void 0:n.campaigns.map((function(e){if(e.id===(null==t?void 0:t.campaign.id)){var n=Jy(e.conditions);return n.push(c.result),l(Xy(Xy({},t),{},{campaign:Xy(Xy({},e),{},{conditions:n})})),Xy(Xy({},e),{},{conditions:n})}return e})),o(f)),h(Dr.Success,p("CONDITION_SAVED","Condition saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(Xy(Xy({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(c){var e,n=null==f||null===(e=f.changes)||void 0===e?void 0:e.conditions.find((function(e){return e.type===s}));b(Xy(Xy({},m),{},{changes:Xy({},n)}))}else{var r,o=null==t||null===(r=t.campaign)||void 0===r?void 0:r.conditions.find((function(e){return e.type===s}));b(Xy(Xy({},m),{},{changes:Xy(Xy(Xy(Xy(Xy({},(null==o?void 0:o.id)&&{id:null==o?void 0:o.id}),(null==o?void 0:o.date_condition)&&{date_condition:null==o?void 0:o.date_condition}),(null==o?void 0:o.date)&&{date:null==o?void 0:o.date}),(null==o?void 0:o.max_date)&&{max_date:null==o?void 0:o.max_date}),{},{type:s})}))}}),[null==t?void 0:t.campaign]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,$y({},e,{ruleFormState:m,handleChangeValue:function(e,t){if("condition"!==e){var n=Xy(Xy({},m.changes),{},Zy({},e,parseInt(t)));b(Xy(Xy({},m),{},{changes:n}))}else{var r,o=Xy(Xy({},m.changes),{},(Zy(r={},e,t),Zy(r,"value",null),r));b(Xy(Xy({},m),{},{changes:o}))}},handleUpdateRule:g,handleAddRule:O,handleChangeDate:function(e,t){var n=Xy(Xy({},m.changes),{},{date:"".concat(e," 00:00:00"),max_date:"".concat(t," 00:00:00")});b(Xy(Xy({},m),{},{changes:n}))},handleChangeOption:function(e){var t=Xy(Xy({},m.changes),{},{date_condition:e,date:null});b(Xy(Xy({},m),{},{changes:t}))},handleChangeDateTime:function(e){var t=Xy(Xy({},m.changes),{},{date:e});null==t||delete t.max_date,b(Xy(Xy({},m),{},{changes:t}))}})))};function rh(){return rh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rh.apply(this,arguments)}function oh(e){return function(e){if(Array.isArray(e))return dh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ph(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ah(e){return ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ah(e)}function ih(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function uh(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ih(a,r,o,i,u,"next",e)}function u(e){ih(a,r,o,i,u,"throw",e)}i(void 0)}))}}function sh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ch(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sh(Object(n),!0).forEach((function(t){lh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ph(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ph(e,t){if(e){if("string"==typeof e)return dh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dh(e,t):void 0}}function dh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nh.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var yh=function(e){var t=e.campaignState,n=e.campaignList,r=e.UIComponent,o=e.handleSuccessUpdateCampaign,s=e.type,c=e.isAddMode,l=e.setCampaignState,f=e.formState,p=fh(Bn(),2)[1],d=fh(rn(),1)[0],y=fh(yn(),1)[0].token,h=fh(Br(),2)[1].showToast,v=fh(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e=uh(a.a.mark((function e(){var r,i,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,h(Dr.Info,p("LOADING","Loading")),b(ch(ch({},m),{},{loading:!0,error:null})),r=ch({},null==m?void 0:m.changes))("object"===ah(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/").concat(null==t?void 0:t.campaign.id,"/conditions/").concat(m.changes.id),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?b(ch(ch({},m),{},{loading:!1,error:c.result})):(b(ch(ch({},m),{},{loading:!1,error:null,changes:{}})),o&&(f=null==n?void 0:n.campaigns.map((function(e){if(e.id===(null==t?void 0:t.campaign.id)){var n=[];return e.conditions.find((function(e){return e.id===c.result.id}))&&(n=e.conditions.filter((function(e){return e.id!==c.result.id}))),n.push(c.result),l(ch(ch({},t),{},{campaign:ch(ch({},e),{},{conditions:n})})),ch(ch({},e),{},{conditions:n})}return e})),o(f)),h(Dr.Success,p("CONDITION_SAVED","Condition saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(ch(ch({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=uh(a.a.mark((function e(){var r,i,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,h(Dr.Info,p("LOADING","Loading")),b(ch(ch({},m),{},{loading:!0,error:null})),r=ch({},null==m?void 0:m.changes))("object"===ah(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(r)},e.next=8,fetch("".concat(d.root,"/marketing_campaigns/").concat(null==t?void 0:t.campaign.id,"/conditions"),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?b(ch(ch({},m),{},{loading:!1,error:c.result})):(b(ch(ch({},m),{},{loading:!1,error:null,changes:{}})),o&&(f=null==n?void 0:n.campaigns.map((function(e){if(e.id===(null==t?void 0:t.campaign.id)){var n=oh(e.conditions);return n.push(c.result),l(ch(ch({},t),{},{campaign:ch(ch({},e),{},{conditions:n})})),ch(ch({},e),{},{conditions:n})}return e})),o(f)),h(Dr.Success,p("CONDITION_SAVED","Condition saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),b(ch(ch({},m),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(c){var e,n=null==f||null===(e=f.changes)||void 0===e?void 0:e.conditions.find((function(e){return e.type===s}));b(ch(ch({},m),{},{changes:ch({},n)}))}else{var r,o=null==t||null===(r=t.campaign)||void 0===r?void 0:r.conditions.find((function(e){return e.type===s}));b(ch(ch({},m),{},{changes:ch(ch(ch(ch({},(null==o?void 0:o.id)&&{id:null==o?void 0:o.id}),(null==o?void 0:o.condition)&&{condition:null==o?void 0:o.condition}),(null==o?void 0:o.value)&&{value:null==o?void 0:o.value}),{},{type:s})}))}}),[null==t?void 0:t.campaign]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,rh({},e,{ruleFormState:m,handleChangeValue:function(e,t){if("condition"!==e){var n=ch(ch({},m.changes),{},lh({},e,parseInt(t)));b(ch(ch({},m),{},{changes:n}))}else{var r,o=ch(ch({},m.changes),{},(lh(r={},e,t),lh(r,"value",null),r));b(ch(ch({},m),{},{changes:o}))}},handleUpdateRule:g,handleAddRule:O})))};function hh(){return hh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hh.apply(this,arguments)}function vh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}yh.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},yh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bh=function(e){var t,n=e.UIComponent,r=e.handleEditProduct,o=vh(vr(),2),a=o[0],i=o[1],s=i.updateProduct,c=i.removeProduct,l=i.clearCart,f=vh(tr(),1)[0],p=(null===(t=f.order)||void 0===t?void 0:t.quantity)||0,d=(f.configs.max_product_amount?parseInt(f.configs.max_product_amount):100)-p;return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,hh({},e,{carts:a.carts,orderState:a,clearCart:l,removeProduct:c,changeQuantity:function(e,t){0===t?c(e):s({id:e.id,business_id:e.business_id,code:e.code,quantity:t})},getProductMax:function(e){var t=e.inventoried?e.stock:d,n=e.quantity+t-e.balance;return n<e.quantity?e.quantity:n},offsetDisabled:function(e){return(e.inventoried?e.stock:d)-(e.balance-e.quantity)},handleEditProduct:r})))};function gh(){return gh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gh.apply(this,arguments)}function Oh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oh(Object(n),!0).forEach((function(t){jh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sh(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Eh(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Sh(a,r,o,i,u,"next",e)}function u(e){Sh(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ph(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ch(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ch(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ch(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bh.propTypes={UIComponent:c.a.elementType,handleEditProduct:c.a.func,validationFieldsType:c.a.string};var Ih=function(e){var t=e.businessId,n=e.actionsBeforePlace,r=e.handleCustomClick,o=e.onPlaceOrderClick,s=e.UIComponent,c=Ph(rn(),1)[0],l=Ph(Object(i.useState)(!1),2),f=l[0],p=l[1],d=Ph(Object(i.useState)(null),2),y=d[0],h=d[1],v=Ph(vr(),2),m=v[0],b=v[1].placeCart,g=Ph(Object(i.useState)({business:null,loading:!0,error:null}),2),O=g[0],w=g[1],j=Ph(Object(i.useState)(null),2),S=j[0],E=j[1],P=m.carts["businessId:".concat(t)],C=function(){var e=Eh(a.a.mark((function e(){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=["id","name","email","cellphone","address","paymethods","logo","location"],e.next=4,c.businesses(t).select(n).get();case 4:r=e.sent,o=r.content.result,w(wh(wh({},O),{},{loading:!1,business:o})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),w(wh(wh({},O),{},{loading:!1,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Eh(a.a.mark((function e(){var t,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=S.data,["stripe","stripe_connect","stripe_direct"].includes(S.paymethod.gateway)&&(i={source_id:S.data.id}),u={paymethod_id:S.paymethodId,paymethod_data:S.data,offer_id:P.offer_id,amount:P.total},1===m.options.type&&(u=wh(wh({},u),{},{delivery_zone_id:P.delivery_zone_id})),!r){e.next=7;break}return r(u,S,P),e.abrupt("return");case 7:return u=wh(wh({},u),{},{paymethod_data:i}),p(!0),e.next=11,b(P.uuid,u);case 11:if(null==(s=e.sent)||!s.error){e.next=15;break}return h(null==s?void 0:s.result),e.abrupt("return");case 15:if(2!==(null==(c=null==s?void 0:s.result)||null===(t=c.paymethod_data)||void 0===t?void 0:t.status)||!n){e.next=19;break}return e.next=19,n(S,s.result);case 19:p(!1),o&&o(u,S,c);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){C()}),[t]),Object(i.useEffect)((function(){if(P&&1===P.status){var e={paymethod_id:S.paymethodId,paymethod_data:S.data,delivery_zone_id:P.delivery_zone_id,offer_id:P.offer_id,amount:P.total};o&&o(e,S,P)}}),[P]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,gh({},e,{cart:P,placing:f,errors:y,orderOptions:m.options,paymethodSelected:S,businessDetails:O,handlePaymethodChange:function(e){E(e)},handlerClickPlaceOrder:I})))};function xh(){return xh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xh.apply(this,arguments)}function Ah(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Th(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ah(Object(n),!0).forEach((function(t){_h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ah(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kh(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Dh(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){kh(a,r,o,i,u,"next",e)}function u(e){kh(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Uh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ih.propTypes={UIComponent:c.a.elementType,handleCustomClick:c.a.func,onPlaceOrderClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ih.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Bh=function(e){var t=e.UIComponent,n=Uh(rn(),1)[0],r=Uh(yn(),1)[0].token,o=Uh(Br(),2)[1].showToast,s=Uh(Bn(),2)[1],c=Uh(Jr(),2)[1].loadValidationFields,l=["city_dropdown_option","address","zipcode","address_notes"],f=Uh(Object(i.useState)({fields:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=Uh(Object(i.useState)({loading:!1,error:null}),2),h=y[0],v=y[1],m=function(){var e=Dh(a.a.mark((function e(){var t,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Th(Th({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/checkoutfields"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||(u=i.result.filter((function(e){return!l.includes(e.code)})),s=[],["name","middle_name","lastname","second_lastname","email","mobile_phone","city_dropdown_option","address","zipcode","address_notes","coupon","driver_tip"].forEach((function(e){var t=u.findIndex((function(t){return t.code===e}));if(-1!==t){var n=u[t];u.splice(t,1),s.push(n)}})),d({fields:s,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(Th(Th({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Dh(a.a.mark((function e(t,i){var u,l,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),v(Th(Th({},h),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(i)},e.next=6,fetch("".concat(n.root,"/checkoutfields/").concat(t),u);case 6:return l=e.sent,e.next=9,l.json();case 9:(f=e.sent).error?v({loading:!1,error:f.result}):(v({loading:!1,error:null}),o(Dr.Success,s("FIELD_SAVED","Field saved")),y=p.fields.filter((function(e){return e.id===t&&Object.assign(e,f.result),!0})),d(Th(Th({},p),{},{fields:y})),c&&c()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,xh({},e,{checkoutFieldsState:p,handleChangeCheckoutFieldSetting:b})))};function Fh(){return Fh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fh.apply(this,arguments)}function Rh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rh(Object(n),!0).forEach((function(t){Nh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zh(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Gh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Bh.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Bh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qh=function(e){var t=e.UIComponent,n=Gh(rn(),1)[0],r=Gh(yn(),1)[0].token,o=Gh(Object(i.useState)(null),2),s=o[0],c=o[1],l=Gh(Object(i.useState)({result:null,loading:!1,error:null}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Mh(Mh({},f),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({password:s})},e.next=5,fetch("".concat(n.root,"/users/check_password"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error?p(Mh(Mh({},f),{},{loading:!1,error:i.result})):p(Mh(Mh({},f),{},{loading:!1,result:i.result,error:null})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(Mh(Mh({},f),{},{loading:!1,error:e.t0}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){zh(a,r,o,i,u,"next",e)}function u(e){zh(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Fh({},e,{checkPasswordStatus:f,handleChangePassword:function(e){c(e)},getCheckPassword:d})))};function $h(){return $h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$h.apply(this,arguments)}function Jh(e){return function(e){if(Array.isArray(e))return ev(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vh(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Qh(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Hh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hh(Object(n),!0).forEach((function(t){Kh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xh(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Zh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Qh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qh(e,t){if(e){if("string"==typeof e)return ev(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ev(e,t):void 0}}function ev(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}qh.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var tv=function(e){var t=e.cities,n=e.propsToFetch,r=e.UIComponent,o=Zh(rn(),1)[0],s=Zh(Object(i.useState)({cities:[],loading:!0,error:null}),2),c=s[0],l=s[1],f=function(){var e,t=(e=a.a.mark((function e(){var t,r,i,u,s,f,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Wh(Wh({},c),{},{loading:!0})),e.next=4,o.countries().select(n).get();case 4:if(t=e.sent,r=t.content,i=r.error,u=r.result,s=[],!i){f=Vh(u);try{for(f.s();!(p=f.n()).done;)null!=(d=p.value)&&d.enabled&&(s=[].concat(Jh(s),Jh(null==d?void 0:d.cities)))}catch(e){f.e(e)}finally{f.f()}l(Wh(Wh({},c),{},{loading:!1,cities:s}))}e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l(Wh(Wh({},c),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Xh(a,r,o,i,u,"next",e)}function u(e){Xh(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){t?l(Wh(Wh({},c),{},{loading:!1,cities:t})):f()}),[]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,$h({},e,{citiesList:c})))};function nv(){return nv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nv.apply(this,arguments)}function rv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ov(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rv(Object(n),!0).forEach((function(t){av(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function av(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}tv.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},tv.defaultProps={propsToFetch:["id","name","enabled","cities"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var sv=function(e){var t,n=e.businessId,r=e.price,o=e.UIComponent,a=iv(vr(),2),s=a[0],c=a[1].applyCoupon,l=iv(Object(i.useState)({open:!1,content:null,error:!1}),2),f=l[0],p=l[1],d=iv(Bn(),2)[1],y=(null==s?void 0:s.carts)&&n&&(null==s||null===(t=s.carts["businessId:".concat(n)])||void 0===t?void 0:t.coupon)||null,h=iv(Object(i.useState)(null),2),v=h[0],m=h[1],b=function(){c({business_id:n,coupon:null})};return Object(i.useEffect)((function(){r<1&&(b(),p(ov(ov({},f),{},{open:!0,content:d("COUPON_TOTAL_ERROR","The total value of the cart with discount must be at least 1$"),error:!0})))}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,nv({},e,{couponDefault:y,couponInput:v,onChangeInputCoupon:function(e){return m(e)},handleButtonApplyClick:function(){c({business_id:n,coupon:v})},handleRemoveCouponClick:b,confirm:f,setConfirm:p})))};function cv(){return cv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cv.apply(this,arguments)}function lv(e){return function(e){if(Array.isArray(e))return bv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fv(Object(n),!0).forEach((function(t){dv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yv(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function hv(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){yv(a,r,o,i,u,"next",e)}function u(e){yv(a,r,o,i,u,"throw",e)}i(void 0)}))}}function vv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||mv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mv(e,t){if(e){if("string"==typeof e)return bv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bv(e,t):void 0}}function bv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}sv.propTypes={UIComponent:c.a.elementType,isDisabled:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gv=function(e){var t,n=e.asDashboard,r=e.UIComponent,o=e.paginationSettings,s=e.propsToFetch,c=e.initialPageSize,l=e.loadMorePageSize,f=e.isSearchByBusinessId,p=e.isSearchByBusinessName,d=e.isSearchByBusinessEmail,y=e.isSearchByBusinessPhone,h=e.noActiveStatusCondition,v=vv(rn(),1)[0],m=vv(yn(),1)[0],b=vv(Object(i.useState)({loading:!1,error:null,businesses:[]}),2),g=b[0],O=b[1],w=vv(Object(i.useState)({currentPage:"pages"===o.controlType&&o.initialPage&&o.initialPage>=1?o.initialPage-1:0,pageSize:null!==(t=o.pageSize)&&void 0!==t?t:10}),2),j=w[0],S=w[1],E=vv(Object(i.useState)(null),2),P=E[0],C=E[1],I=vv(Object(i.useState)(!0),2),x=I[0],A=I[1],T=vv(Object(i.useState)(null),2),_=T[0],k=T[1],D=function(){var e=hv(a.a.mark((function e(t,r){var o,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],i=[],u={query:{page:r,page_size:t}},h||i.push({attribute:"enabled",value:x}),_&&i.push({attribute:"types",conditions:[{attribute:"id",value:_}]}),P&&(c=[],f&&c.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),p&&c.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),d&&c.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),y&&c.push({attribute:"phone",value:{condition:"ilike",value:encodeURI("%".concat(P,"%"))}}),i.push({conector:"OR",conditions:c})),i.length&&(o={conditions:i,conector:"AND"}),l=n?v.setAccessToken(m.token).businesses().select(s).asDashboard().where(o):v.setAccessToken(m.token).businesses().select(s).where(o),e.next=10,l.get(u);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=hv(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(pv(pv({},g),{},{loading:!0})),e.next=6,D(c||j.pageSize,1);case 6:t=e.sent,O({loading:!1,businesses:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||S({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?j.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),"Cancel"!==(null===e.t0||void 0===e.t0||null===(n=e.t0.constructor)||void 0===n?void 0:n.name)&&O(pv(pv({},g),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=hv(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(pv(pv({},g),{},{loading:!0})),e.prev=1,e.next=4,D(l,Math.ceil((null==j?void 0:j.to)/l)+1);case 4:t=e.sent,O({loading:!1,businesses:t.content.error?g.businesses:g.businesses.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||S({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?j.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&O(pv(pv({},g),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=hv(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(pv(pv({},g),{},{loading:!0})),e.prev=1,e.next=4,D(t,n);case 4:r=e.sent,O({loading:!1,businesses:r.content.error?g.businesses:r.content.result,error:r.content.error?r.content.result:null}),r.content.error||S({currentPage:r.content.pagination.current_page,pageSize:0===r.content.pagination.page_size?j.pageSize:r.content.pagination.page_size,totalPages:r.content.pagination.total_pages,total:r.content.pagination.total,from:r.content.pagination.from,to:r.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&O(pv(pv({},g),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),F=function(e){var t=g.businesses.filter((function(t){return t.id!==e}));S(pv(pv({},j),{},{to:(null==j?void 0:j.to)-1,total:(null==j?void 0:j.total)-1})),O(pv(pv({},g),{},{businesses:t}))},R=function(e){var t=[].concat(lv(g.businesses),[e]);S(pv(pv({},j),{},{to:(null==j?void 0:j.to)+1,total:(null==j?void 0:j.total)+1})),O(pv(pv({},g),{},{businesses:t}))};return Object(i.useEffect)((function(){g.loading||g.businesses.length>0||0!==(null==j?void 0:j.currentPage)&&0!==(null==j?void 0:j.total)&&(Math.ceil((null==j?void 0:j.total)/j.pageSize)>=(null==j?void 0:j.currentPage)?B(j.pageSize,j.currentPage):B(j.pageSize,j.currentPage-1))}),[g.businesses]),Object(i.useEffect)((function(){e.businesses?O(pv(pv({},g),{},{businesses:e.businesses})):U()}),[m,P,x,_]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,cv({},e,{businessList:g,pagination:j,searchValue:P,onSearch:C,selectedBusinessActiveState:x,loadMoreBusinesses:L,getPageBusinesses:B,handleChangeBusinessActiveState:function(){A(!x)},handleChangeBusinessType:function(e){e!==_&&(O(pv(pv({},g),{},{businesses:[],loading:!0})),k(e))},handleSucessRemoveBusiness:F,handleSucessAddBusiness:R,handleSucessUpdateBusiness:function(e){if(g.businesses.find((function(t){return t.id===e.id})))if(x===(null==e?void 0:e.enabled)){var t=g.businesses.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));O(pv(pv({},g),{},{businesses:t}))}else F(e.id);else x===(null==e?void 0:e.enabled)?R(e):F(e.id)}})))};function Ov(){return Ov=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ov.apply(this,arguments)}function wv(e){return function(e){if(Array.isArray(e))return Av(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jv(Object(n),!0).forEach((function(t){Ev(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ev(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pv(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Cv(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Pv(a,r,o,i,u,"next",e)}function u(e){Pv(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Iv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||xv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xv(e,t){if(e){if("string"==typeof e)return Av(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Av(e,t):void 0}}function Av(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gv.propTypes={UIComponent:c.a.elementType,isSearchByBusinessId:c.a.bool,isSearchByBusinessEmail:c.a.bool,isSearchByBusinessPhone:c.a.bool,propsToFetch:c.a.arrayOf(s.string)},gv.defaultProps={loadMorePageSize:10,propsToFetch:["id","alcohol","city","delivery_price","distance","delivery_time","ribbon","enabled","featured","food","groceries","header","laundry","logo","minimum","name","pickup_time","slug","reviews"],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var Tv=function(e){var t,n=e.UIComponent,r=e.propsToFetch,o=e.orders,s=e.isOnlyDelivery,c=e.driverId,l=e.customerId,f=e.businessId,p=e.orderIds,d=e.deletedOrderId,y=e.orderStatus,h=e.orderBy,v=e.orderDirection,m=e.useDefualtSessionManager,b=e.paginationSettings,g=e.filterValues,O=e.searchValue,w=e.isSearchByOrderId,j=e.isSearchByCustomerEmail,S=e.isSearchByCustomerPhone,E=e.isSearchByBusinessName,P=e.orderIdForUnreadCountUpdate,C=e.timeStatus,I=Iv(rn(),1)[0],x=Iv(zn(),1)[0],A=Iv(Object(i.useState)({loading:!o,error:null,orders:[]}),2),T=A[0],_=A[1],k=Iv(Object(i.useState)({currentPage:"pages"===b.controlType&&b.initialPage&&b.initialPage>=1?b.initialPage-1:0,pageSize:null!==(t=b.pageSize)&&void 0!==t?t:10}),2),D=k[0],U=k[1],L=Iv(yn(),1)[0],B=Cn(),F=m?L.token:e.accessToken,R={},M=Iv(Object(i.useState)({loading:!1,error:null}),2),N=M[0],z=M[1],G=function(e,t){if("id"===e){if("desc"===v)return t.sort((function(e,t){return t.id-e.id}));if("asc"===v)return t.sort((function(e,t){return e.id-t.id}))}return"last_direct_message_at"===e?t.sort((function(e,t){return new Date(t.last_direct_message_at)-new Date(e.last_direct_message_at)})):t},Y=function(){var e=Cv(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,z(Sv(Sv({},N),{},{loading:!0})),n={},R.updateOrders=n,e.next=6,I.setAccessToken(F).orders(null==t?void 0:t.id).save({status:t.newStatus},{cancelToken:n});case 6:r=e.sent,o=r.content,z({loading:!1,error:o.error?o.result:null}),o.error||(i=T.orders.filter((function(e){return(null==e?void 0:e.id)!==(null==t?void 0:t.id)})),_(Sv(Sv({},T),{},{orders:i}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),z({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Cv(a.a.mark((function e(t,n){var o,i,u,d,m,b,P,x,A;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],i=[],u={query:{orderBy:("desc"===v?"-":"")+h,page:n,page_size:t}},p&&i.push({attribute:"id",value:p}),0===Object.keys(g).length?y&&i.push({attribute:"status",value:y}):g.statuses.length>0?(d=g.statuses.every((function(e){return-1!==y.indexOf(e)})),m=y.every((function(e){return-1!==g.statuses.indexOf(e)})),d&&i.push({attribute:"status",value:g.statuses}),m&&y&&i.push({attribute:"status",value:y})):y&&i.push({attribute:"status",value:y}),s&&i.push({attribute:"delivery_type",value:1}),c&&i.push({attribute:"driver_id",value:c}),l&&i.push({attribute:"customer_id",value:l}),f&&i.push({attribute:"business_id",value:f}),C&&i.push({attribute:"time_status",value:C}),O&&(b=[],w&&b.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}),j&&b.push({attribute:"customer",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}]}),S&&b.push({attribute:"customer",conditions:[{attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}]}),E&&b.push({attribute:"business",conditions:[{attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}]}),i.push({conector:"OR",conditions:b})),Object.keys(g).length&&(P=[],null!=g&&g.orderId&&P.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(null==g?void 0:g.orderId,"%"))}}),null!==g.deliveryFromDatetime&&P.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(g.deliveryFromDatetime)}}),null!==g.deliveryEndDatetime&&P.push({attribute:"delivery_datetime",value:{condition:"<=",value:g.deliveryEndDatetime}}),0!==g.businessIds.length&&P.push({attribute:"business_id",value:g.businessIds}),0!==g.driverIds.length&&P.push({attribute:"driver_id",value:g.driverIds}),0!==g.deliveryTypes.length&&P.push({attribute:"delivery_type",value:g.deliveryTypes}),0!==g.driverGroupIds.length&&P.push({attribute:"driver_id",value:g.driverGroupIds}),0!==g.paymethodIds.length&&P.push({attribute:"paymethod_id",value:g.paymethodIds}),P.length&&i.push({conector:"AND",conditions:P})),i.length&&(o={conditions:i,conector:"AND"}),x={},R.orders=x,u.cancelToken=x,A=r?I.setAccessToken(F).orders().asDashboard().select(r).where(o):I.setAccessToken(F).orders().asDashboard().where(o),e.next=19,A.get(u);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(e){var t=!0;return void 0!==g.businessIds&&g.businessIds.length>0&&(g.businessIds.includes(e.business_id)||(t=!1)),void 0!==g.driverIds&&g.driverIds.length>0&&(g.driverIds.includes(e.driver_id)||(t=!1)),void 0!==g.deliveryTypes&&g.deliveryTypes.length>0&&(g.deliveryTypes.includes(e.delivery_type)||(t=!1)),void 0!==g.paymethodIds&&g.paymethodIds.length>0&&(g.paymethodIds.includes(e.paymethod_id)||(t=!1)),void 0!==g.statuses&&g.statuses.length>0&&(g.statuses.includes(parseInt(e.status))||(t=!1)),t},J=function(){var e=Cv(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,_(Sv(Sv({},T),{},{loading:!0})),e.next=6,q(D.pageSize,1);case 6:t=e.sent,_({loading:!1,orders:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||U({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?D.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),"Cancel"!==e.t0.constructor.name&&_(Sv(Sv({},T),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Cv(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(Sv(Sv({},T),{},{loading:!0})),e.prev=1,e.next=4,q(D.pageSize,D.currentPage+1);case 4:t=e.sent,_({loading:!1,orders:t.content.error?T.orders:T.orders.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||U({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?D.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&_(Sv(Sv({},T),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Cv(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(Sv(Sv({},T),{},{loading:!0})),e.prev=1,e.next=4,q(t,n);case 4:r=e.sent,_({loading:!1,orders:r.content.error?T.orders:r.content.result,error:r.content.error?r.content.result:null}),r.content.error||U({currentPage:r.content.pagination.current_page,pageSize:0===r.content.pagination.page_size?D.pageSize:r.content.pagination.page_size,totalPages:r.content.pagination.total_pages,total:r.content.pagination.total,from:r.content.pagination.from,to:r.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&_(Sv(Sv({},T),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(null!==P&&0!==T.orders.length){var e=T.orders.filter((function(e){return(null==e?void 0:e.id)===P&&(e.unread_count=0,e.unread_general_count=0,e.unread_direct_count=0),!0}));_(Sv(Sv({},T),{},{orders:e}))}}),[P]),Object(i.useEffect)((function(){if(d){var e=T.orders.filter((function(e){return(null==e?void 0:e.id)!==d}));J(),_(Sv(Sv({},T),{},{orders:e}))}}),[d]),Object(i.useEffect)((function(){if(null==L||!L.loading){if(o)_(Sv(Sv({},T),{},{orders:o}));else{var e=!1,t=!1;if(Object.keys(g).length>0&&(e=g.statuses.every((function(e){return-1!==y.indexOf(e)})),t=y.every((function(e){return-1!==g.statuses.indexOf(e)})),!e&&!t))return void _({loading:!1,orders:[],error:null});J()}return function(){R.orders&&R.orders.cancel()}}}),[L,O,h,g,s,c,l,f,o,y,C]),Object(i.useEffect)((function(){if(!T.loading){var e=function(e){if(!s||1===(null==e?void 0:e.delivery_type)){var t=[];if(T.orders.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)}))){t=T.orders.filter((function(t){var n=!0;return(null==t?void 0:t.id)===(null==e?void 0:e.id)&&(delete e.total,delete e.subtotal,Object.assign(t,e),(n=(0===y.length||y.includes(parseInt(t.status)))&&$(e))||(D.total--,U(Sv({},D)))),n}));var n=G(h,t);_(Sv(Sv({},T),{},{orders:n}))}else{if($(e))if(y.includes(parseInt(e.status))){t=[].concat(wv(T.orders),[e]);var r=G(h,t);D.total++,U(Sv({},D)),_(Sv(Sv({},T),{},{orders:r.slice(0,D.pageSize)}))}}}},t=function(e){if((!s||1===(null==e?void 0:e.delivery_type))&&!T.orders.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)}))){var t=[];if($(e)&&(y.includes(0)&&0===e.status||y.includes(13)&&13===e.status)){t=[e].concat(wv(T.orders));var n=G(h,t);D.total++,U(Sv({},D)),_(Sv(Sv({},T),{},{orders:n.slice(0,D.pageSize)}))}}},n=function(e){if(0!==T.orders.length&&T.orders.find((function(t){var n;return(null==t?void 0:t.id)===(null===(n=e.order)||void 0===n?void 0:n.id)}))){var t=T.orders.filter((function(t){var n;return(null==t?void 0:t.id)===(null===(n=e.order)||void 0===n?void 0:n.id)&&t.last_message_at!==e.created_at&&(1===e.type?(t.last_general_message_at=e.created_at,0!==e.author.level&&(t.unread_general_count=t.unread_general_count+1)):(t.last_direct_message_at=e.created_at,0!==e.author.level&&(t.unread_direct_count=t.unread_direct_count+1)),t.last_message_at=e.created_at,0!==e.author.level&&(t.unread_count=t.unread_count+1)),!0})),n=G(h,t);_(Sv(Sv({},T),{},{orders:n}))}};return T.loading||0!==T.orders.length||0!==(null==D?void 0:D.currentPage)&&0!==(null==D?void 0:D.total)&&(Math.ceil((null==D?void 0:D.total)/D.pageSize)>=(null==D?void 0:D.currentPage)?H(D.pageSize,D.currentPage):H(D.pageSize,D.currentPage-1)),B.on("update_order",e),B.on("orders_register",t),B.on("message",n),function(){B.off("update_order",e),B.off("orders_register",t),B.off("message",n)}}}),[T.orders,D,h,B]),Object(i.useEffect)((function(){var e=function(e){var t=T.orders.filter((function(t){return(null==t?void 0:t.id)===e.order_id&&(t.user_review=e),!0})),n=G(h,t);_(Sv(Sv({},T),{},{orders:n}))};return x.on("customer_reviewed",e),function(){x.off("customer_reviewed",e)}}),[T,h]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Ov({},e,{orderList:T,pagination:D,loadMoreOrders:V,getPageOrders:H,handleUpdateOrderStatus:Y})))};function _v(){return _v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_v.apply(this,arguments)}function kv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kv(Object(n),!0).forEach((function(t){Uv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lv(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Bv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Tv.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),onOrderClick:c.a.func,useDefualtSessionManager:c.a.bool,orders:c.a.arrayOf(s.object),orderIds:c.a.arrayOf(s.number),orderIdForUnreadCountUpdate:c.a.number,orderStatus:c.a.arrayOf(s.number),orderBy:c.a.string,orderDirection:c.a.oneOf(["asc","desc"]),paginationSettings:c.a.exact({initialPage:c.a.number,pageSize:c.a.number,controlType:c.a.oneOf(["infinity","pages"])}),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Tv.defaultProps={orderBy:"id",orderDirection:"desc",paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Rv=function(e){var t,n=e.UIComponent,r=e.propsToFetch,o=e.businessIds,s=e.paginationSettings,c=Bv(rn(),1)[0],l=Bv(yn(),1)[0].token,f=Bv(Object(i.useState)({zones:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=Bv(Object(i.useState)({currentPage:"pages"===s.controlType&&s.initialPage&&s.initialPage>=1?s.initialPage-1:0,pageSize:null!==(t=s.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),h=y[0],v=y[1],m=function(){var e,t=(e=a.a.mark((function e(t,n){var i,u,s,f,y,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dv(Dv({},p),{},{loading:!0})),i=null,u=[],o&&u.push({attribute:"business_id",value:o}),u.length&&(i={conditions:u,conector:"AND"}),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},f=i?"".concat(c.root,"/delivery_zones?page=").concat(t,"&page_size=").concat(n,"8&params=").concat(r.toString(),"&&where=").concat(JSON.stringify(i)):"".concat(c.root,"/delivery_zones?page=").concat(t,"&page_size=").concat(n,"8&params=").concat(r.toString()),e.next=10,fetch(f,s);case 10:return y=e.sent,e.next=13,y.json();case 13:(m=e.sent).error||(d({loading:!1,zones:m.result,error:null}),v(Dv(Dv({},h),{},{currentPage:m.pagination.current_page,totalPages:m.pagination.total_pages,totalItems:m.pagination.total,from:m.pagination.from,to:m.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),d(Dv(Dv({},p),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Lv(a,r,o,i,u,"next",e)}function u(e){Lv(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m(1,h.pageSize)}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,_v({},e,{deliveryzoneList:p,paginationProps:h,setPaginationProps:v,getDeliveryzones:m})))};function Mv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Rv.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Rv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},propsToFetch:["name","minimum","price","type","data","enabled","business_id"]};var zv=function(e){var t=e.onDrop,n=e.children,r=e.className,o=e.style,a=Mv(Object(i.useState)(),2),s=a[0],c=a[1];return u.a.createElement("div",{onDrop:function(e){e.preventDefault(),e.stopPropagation(),t(e.dataTransfer)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),c("dragover")},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),c()},style:o,className:r+" "+s},n)};function Gv(){return Gv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gv.apply(this,arguments)}function Yv(e){return function(e){if(Array.isArray(e))return Xv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qv(Object(n),!0).forEach((function(t){Jv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vv(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Hv(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Vv(a,r,o,i,u,"next",e)}function u(e){Vv(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Wv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Kv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kv(e,t){if(e){if("string"==typeof e)return Xv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xv(e,t):void 0}}function Xv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zv=function(e){var t=e.UIComponent,n=e.driversCompaniesState,r=e.setDriversCompaniesState,o=e.driversCompany,s=Wv(rn(),1)[0],c=Wv(yn(),1)[0].token,l=Wv(Br(),2)[1].showToast,f=Wv(Bn(),2)[1],p=Wv(Object(i.useState)({}),2),d=p[0],y=p[1],h=Wv(Object(i.useState)({loading:!1,error:null}),2),v=h[0],m=h[1],b=function(){var e=Hv(a.a.mark((function e(){var t,i,u,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),m($v($v({},v),{},{loading:!0})),null!=(t=$v({},d))&&t.schedule&&(t.schedule=JSON.stringify(null==t?void 0:t.schedule)),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(t)},e.next=8,fetch("".concat(s.root,"/driver_companies/").concat(null==o?void 0:o.id),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(p=e.sent).error?m($v($v({},v),{},{loading:!1,error:p.result})):(m($v($v({},v),{},{loading:!1})),h=n.companies.filter((function(e){return e.id===(null==o?void 0:o.id)&&Object.assign(e,p.result),!0})),r($v($v({},n),{},{companies:h})),l(Dr.Success,f("CHANGES_SAVED","Changes saved")),y({})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var t=Hv(a.a.mark((function t(){var o,i,u,p,h,b,g,O;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,l(Dr.Info,f("LOADING","Loading")),m($v($v({},v),{},{loading:!0})),o=[],i=0;i<7;i++)o.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});return u={enabled:!0,priority:"0",fixed_cost_per_km:0,fixed_cost_delivery:0,percentage_cost_per_order_subtotal:0},p=$v($v($v({},d),u),{},{schedule:null!=d&&d.schedule?JSON.stringify(null==d?void 0:d.schedule):JSON.stringify(o)}),h={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(p)},t.next=10,fetch("".concat(s.root,"/driver_companies"),h);case 10:return b=t.sent,t.next=13,b.json();case 13:(g=t.sent).error?m({loading:!1,error:g.result}):(m($v($v({},v),{},{loading:!1})),O=[].concat(Yv(n.companies),[g.result]),r($v($v({},n),{},{companies:O})),l(Dr.Success,f("DRIVER_COMPANY_ADDED","Driver company added")),y({}),e.onClose&&e.onClose()),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),m({loading:!1,error:[t.t0.message]});case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Hv(a.a.mark((function t(){var i,u,p,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dr.Info,f("LOADING","Loading")),m($v($v({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(s.root,"/driver_companies/").concat(o.id),i);case 6:return u=t.sent,t.next=9,u.json();case 9:(p=t.sent).error?m($v($v({},v),{},{loading:!1,error:p.result})):(m($v($v({},v),{},{loading:!1})),d=n.companies.filter((function(e){return e.id!==o.id})),r($v($v({},n),{},{companies:d})),l(Dr.Success,f("DRIVER_COMPANY_DELETED","Driver company deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Gv({},e,{cleanChagesState:function(){return y({})},changesState:d,actionState:v,cleanActionState:function(){return m($v($v({},v),{},{error:null}))},handleChangesState:function(e,t){y($v($v({},d),{},Jv({},e,t)))},handleUpdateDriversCompany:b,handleAddDriversCompany:g,handleChangeScheduleState:function(e){y($v($v({},d),{},{schedule:e}))},handleDeleteDriversCompany:O})))};function Qv(){return Qv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qv.apply(this,arguments)}function em(e){return function(e){if(Array.isArray(e))return sm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||um(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tm(Object(n),!0).forEach((function(t){rm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function om(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function am(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){om(a,r,o,i,u,"next",e)}function u(e){om(a,r,o,i,u,"throw",e)}i(void 0)}))}}function im(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||um(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function um(e,t){if(e){if("string"==typeof e)return sm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sm(e,t):void 0}}function sm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Zv.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cm=function(e){var t=e.userId,n=e.UIComponent,r=im(rn(),1)[0],o=im(yn(),1)[0].token,s=im(Br(),2)[1].showToast,c=im(Bn(),2)[1],l=im(Object(i.useState)({groups:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=im(Object(i.useState)({loading:!1,error:null}),2),y=d[0],h=d[1],v=im(Object(i.useState)([]),2),m=v[0],b=v[1],g=function(){var e=am(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(nm(nm({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/drivergroups?params=name,drivers"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||p(nm(nm({},f),{},{groups:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(nm(nm({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=am(a.a.mark((function e(t,n){var i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),h(nm(nm({},y),{},{loading:!0,error:null})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)},e.next=6,fetch("".concat(r.root,"/drivergroups/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?h(nm(nm({},y),{},{loading:!1,error:l.result})):(h({error:null,loading:!1}),d=f.groups.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),p(nm(nm({},f),{},{groups:d})),s(Dr.Success,c("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;if(!f.loading){var n=null===(e=f.groups)||void 0===e?void 0:e.reduce((function(e,n){return n.drivers.find((function(e){return e.id===t}))?[].concat(em(e),[n.id]):em(e)}),[]);b(n)}}),[t,f]),Object(i.useEffect)((function(){g()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Qv({},e,{driversGroupsState:f,includedGroupIds:m,actionState:y,handleCheckboxClick:function(e){var n,r=null===(n=f.groups.find((function(t){return t.id===e})).drivers)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(em(e),[t.id])}),[]),o=[];r.includes(t)?(console.log(t,r),o=r.filter((function(e){return e!==t}))):(console.log("else"),o=[].concat(em(r),[t])),console.log(o);var a={drivers:JSON.stringify(o)};O(e,a)}})))};function lm(){return lm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lm.apply(this,arguments)}function fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fm(Object(n),!0).forEach((function(t){dm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ym(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function hm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mm=function(e){var t=e.userId,n=e.UIComponent,r=hm(rn(),1)[0],o=hm(yn(),1)[0].token,s=hm(Object(i.useState)({reviews:[],loading:!1,error:null}),2),c=s[0],l=s[1],f=function(){var e,n=(e=a.a.mark((function e(){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(pm(pm({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/users/").concat(t,"/user_reviews"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:(u=e.sent).error||l({reviews:u.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l(pm(pm({},c),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ym(a,r,o,i,u,"next",e)}function u(e){ym(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){t&&f()}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,lm({},e,{userReviewState:c})))};function bm(){return bm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bm.apply(this,arguments)}function gm(e){return function(e){if(Array.isArray(e))return Im(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Om(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Om(Object(n),!0).forEach((function(t){jm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Om(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sm(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Em(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Sm(a,r,o,i,u,"next",e)}function u(e){Sm(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Pm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Cm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cm(e,t){if(e){if("string"==typeof e)return Im(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Im(e,t):void 0}}function Im(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xm=function(e){var t=e.UIComponent,n=Pm(rn(),1)[0],r=Pm(yn(),1)[0].token,o=Pm(Br(),2)[1].showToast,s=Pm(Bn(),2)[1],c=Pm(Object(i.useState)({companies:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=Pm(Object(i.useState)({loading:!1,error:null}),2),d=p[0],y=p[1],h=Pm(Object(i.useState)(!1),2),v=h[0],m=h[1],b=Pm(Object(i.useState)([]),2),g=b[0],O=b[1],w=Pm(Object(i.useState)(!1),2),j=w[0],S=w[1],E=function(){var e=Em(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(wm(wm({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/driver_companies"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||f(wm(wm({},l),{},{companies:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(wm(wm({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Em(a.a.mark((function e(t,i){var u,c,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),y(wm(wm({},d),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(i)},e.next=6,fetch("".concat(n.root,"/driver_companies/").concat(t),u);case 6:return c=e.sent,e.next=9,c.json();case 9:(p=e.sent).error?y(wm(wm({},d),{},{loading:!1,error:p.result})):(y(wm(wm({},d),{},{loading:!1})),h=l.companies.filter((function(e){return e.id===t&&Object.assign(e,p.result),!0})),f(wm(wm({},l),{},{companies:h})),o(Dr.Success,s("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Em(a.a.mark((function e(t){var i,u,c,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),y(wm(wm({},d),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=6,fetch("".concat(n.root,"/driver_companies/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(c=e.sent).error?(y(wm(wm({},d),{},{loading:!1,error:c.result})),S(!1)):(y(wm(wm({},d),{},{loading:!1})),p=l.companies.filter((function(e){return e.id!==t})),f(wm(wm({},l),{},{companies:p})),o(Dr.Success,s("DRIVER_COMPANY_DELETED","Driver company deleted")),j&&((h=gm(g)).shift(),0===h.length&&S(!1),O(h))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j&&0!==g.length&&C(g[0])}),[g,j]),Object(i.useEffect)((function(){E()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,bm({},e,{driversCompaniesState:l,setDriversCompaniesState:f,actionState:d,openDetails:v,setOpenDetails:m,handleUpdateDriversCompany:P,handleDeleteDriversCompany:C,handleSelectCompany:function(e){var t=[];t=g.includes(e)?g.filter((function(t){return t!==e})):[].concat(gm(g),[e]),O(t)},selectedCompanyList:g,handleAllSelectCompany:function(){var e,t=null===(e=l.companies)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(gm(e),[t.id])}),[]);g.length===t.length?O([]):O(t)},handleDeleteSelectedCompanies:function(){return S(!0)}})))};function Am(){return Am=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Am.apply(this,arguments)}function Tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function km(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Um=function(e){var t=e.UIComponent,n=e.curDriversGroup,r=e.handleChangesState,o=km(Object(i.useState)(0),2),a=o[0],s=o[1],c=km(Object(i.useState)({}),2),l=c[0],f=c[1],p=function(e){return Math.floor((e-3600*Math.floor(e/3600))/60)},d=function(e){var t=e-3600*Math.floor(e/3600);return Math.floor(t-60*Math.floor(t/60))};return Object(i.useEffect)((function(){var e;if(n){e=1*n.autoassign_initial_radius==500&&1*n.autoassign_amount_drivers==1?1:1*n.autoassign_initial_radius==15e3&&1*n.autoassign_amount_drivers==1e3?2:1*n.autoassign_initial_radius==100&&1*n.autoassign_amount_drivers==1?3:1*n.autoassign_initial_radius==1e3&&1*n.autoassign_amount_drivers==2?4:1*n.autoassign_initial_radius==15e3&&1*n.autoassign_amount_drivers==1?5:6,s(e);var t,r={hour:(t=n.autoassign_autoreject_time,1*t/3600>1?Math.floor(1*t/3600):0),minute:p(n.autoassign_autoreject_time),second:d(n.autoassign_autoreject_time)};f(r)}}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Am({},e,{autoAssign:a,autoRejectOrderGroup:l,onSelectAssign:function(e){s(e);var t={};1===e?(t.autoassign_initial_radius=500,t.autoassign_increment_radius=100,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=1):2===e?(t.autoassign_initial_radius=15e3,t.autoassign_increment_radius=15e3,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=1e3):3===e?(t.autoassign_initial_radius=100,t.autoassign_increment_radius=100,t.autoassign_max_radius=1500,t.autoassign_amount_drivers=1):4===e?(t.autoassign_initial_radius=1e3,t.autoassign_increment_radius=500,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=2):5===e?(t.autoassign_initial_radius=15e3,t.autoassign_increment_radius=15e3,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=1):6===e&&(t.autoassign_initial_radius="",t.autoassign_increment_radius="",t.autoassign_max_radius="",t.autoassign_amount_drivers=""),r({autoassign_initial_radius:t.autoassign_initial_radius,autoassign_increment_radius:t.autoassign_increment_radius,autoassign_max_radius:t.autoassign_max_radius,autoassign_amount_drivers:t.autoassign_amount_drivers})},onChangeSave:r,handleChangeInput:function(e){var t=e.target.value,n=""===t?0:parseInt(t);(""===n||/^[0-9\b]+$/.test(n))&&r(_m({},e.target.name,n))},onChangeAutoRejectOrderGroup:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tm(Object(n),!0).forEach((function(t){_m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l);if(""===e||/^[0-9\b]+$/.test(e)){var o=""===e?0:parseInt(e);n[t]=o,f(n);var a=3600*(null==n?void 0:n.hour)+60*(null==n?void 0:n.minute)+(null==n?void 0:n.second);r({autoassign_autoreject_time:a})}}})))};function Lm(){return Lm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lm.apply(this,arguments)}function Bm(e){return function(e){if(Array.isArray(e))return qm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ym(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fm(Object(n),!0).forEach((function(t){Mm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nm(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zm(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Nm(a,r,o,i,u,"next",e)}function u(e){Nm(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Gm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ym(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ym(e,t){if(e){if("string"==typeof e)return qm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qm(e,t):void 0}}function qm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Um.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Um.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $m=function(e){var t=e.UIComponent,n=e.driversGroupsState,r=e.setDriversGroupsState,o=e.curDriversGroup,s=e.driversManagers,c=e.businesses,l=e.paymethods,f=e.drivers,p=e.companies,d=Gm(rn(),1)[0],y=Gm(yn(),1)[0].token,h=Gm(Br(),2)[1].showToast,v=Gm(Bn(),2)[1],m=Gm(Object(i.useState)({driversGroup:e.curDriversGroup,loading:!1}),2),b=m[0],g=m[1],O=Gm(Object(i.useState)({loading:!1,error:null}),2),w=O[0],j=O[1],S=Gm(Object(i.useState)({}),2),E=S[0],P=S[1],C=Gm(Object(i.useState)([]),2),I=C[0],x=C[1],A=Gm(Object(i.useState)([]),2),T=A[0],_=A[1],k=Gm(Object(i.useState)([]),2),D=k[0],U=k[1],L=Gm(Object(i.useState)([]),2),B=L[0],F=L[1],R=function(){var e=zm(a.a.mark((function e(t){var i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dr.Info,v("LOADING","Loading")),j(Rm(Rm({},w),{},{loading:!0,error:null})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(t)},e.next=6,fetch("".concat(d.root,"/drivergroups/").concat(o.id),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error?j(Rm(Rm({},w),{},{loading:!1,error:s.result})):(j({error:null,loading:!1}),c=n.groups.filter((function(e){return e.id===o.id&&Object.assign(e,s.result),!0})),r(Rm(Rm({},n),{},{groups:c})),h(Dr.Success,v("CHANGES_SAVED","Changes saved")),g(Rm(Rm({},b),{},{driversGroup:s.result})),P({})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),j({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var t=zm(a.a.mark((function t(){var i,u,s,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,v("LOADING","Loading")),j(Rm(Rm({},w),{},{loading:!0,error:null})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}},t.next=6,fetch("".concat(d.root,"/drivergroups/").concat(o.id),i);case 6:return u=t.sent,t.next=9,u.json();case 9:(s=t.sent).error?j(Rm(Rm({},w),{},{loading:!1,error:s.result})):(j(Rm(Rm({},w),{},{loading:!1})),c=n.groups.filter((function(e){return e.id!==o.id})),r(Rm(Rm({},n),{},{groups:c})),h(Dr.Success,v("DRIVER_GROUP_DELETED","Driver group deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),j({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=zm(a.a.mark((function t(){var o,i,u,c,l,f,p,m,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,v("LOADING","Loading")),j({loading:!0,error:null}),o={enabled:!0,autoassign_amount_drivers:1,autoassign_autoaccept_by_driver:!1,autoassign_autoreject_time:30,autoassign_increment_radius:100,autoassign_initial_radius:500,autoassign_max_in_accepted_by_business:5,autoassign_max_in_accepted_by_driver:5,autoassign_max_in_driver_in_business:5,autoassign_max_in_pending:5,autoassign_max_in_pickup_completed:5,autoassign_max_in_ready_for_pickup:5,autoassign_max_orders:5,autoassign_max_radius:1e3,orders_group_max_distance_between_delivery:200,orders_group_max_distance_between_pickup:200,orders_group_max_orders:1,orders_group_max_time_between:5,orders_group_max_time_between_delivery:600,orders_group_max_time_between_pickup:600,orders_group_start_in_status:"7",orders_group_use_maps_api:!1},i=Rm(Rm({},E),o),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(i)},t.next=8,fetch("".concat(d.root,"/drivergroups"),u);case 8:return c=t.sent,t.next=11,c.json();case 11:(l=t.sent).error?j({loading:!1,error:l.result}):(j({loading:!1,error:null}),p=Rm({},l.result),(null===(f=l.result)||void 0===f||!f.administrator)&&s.length>0&&(m=s.find((function(e){var t;return e.id===(null===(t=l.result)||void 0===t?void 0:t.administrator_id)})),p=Rm(Rm({},p),{},{administrator:m})),b=[].concat(Bm(n.groups),[p]),r(Rm(Rm({},n),{},{groups:b})),h(Dr.Success,v("DRIVER_GROUP_ADDED","Driver group added")),P({}),e.onClose&&e.onClose()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),j({loading:!1,error:[t.t0.message]});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(g(Rm(Rm({},b),{},{driversGroup:o})),o){var e,t,n,r=null==o||null===(e=o.business)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Bm(e),[t.id])}),[]);x(r),_((null==o?void 0:o.allowed_paymethods)||[]);var a=null==o||null===(t=o.drivers)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(Bm(e),[t.id])}),[]);U(a);var i=null==o||null===(n=o.driver_companies)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(Bm(e),[t.id])}),[]);F(i)}else P({type:0}),x([]),_([]),U([]),F([])}),[o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Lm({},e,{driversGroupState:b,changesState:E,actionState:w,cleanChagesState:function(){return P({})},selectedBusinessIds:I,selectedPaymethodIds:T,selectedDriverIds:D,selectedDriversCompanyIds:B,handleChangesState:function(e){P(Rm(Rm({},E),e))},handleSelectBusiness:function(e,t){var n=Bm(I),r=[];r=t?[].concat(Bm(n),[e]):n.filter((function(t){return t!==e})),x(r),P(Rm(Rm({},E),{},{business:JSON.stringify(r)}))},handleSelectAllBusiness:function(e){var t=null==c?void 0:c.reduce((function(e,t){return[].concat(Bm(e),[t.id])}),[]),n=[];n=e?Bm(t):[],x(n),P(Rm(Rm({},E),{},{business:JSON.stringify(n)}))},handleSelectPaymethod:function(e,t){var n=Bm(T),r=[];r=t?[].concat(Bm(n),[e]):n.filter((function(t){return t!==e})),_(r),P(Rm(Rm({},E),{},{allowed_paymethods:JSON.stringify(r)}))},handleSelectDriver:function(e,t){var n=Bm(D),r=[];r=t?[].concat(Bm(n),[e]):n.filter((function(t){return t!==e})),U(r),P(Rm(Rm({},E),{},{drivers:JSON.stringify(r)}))},handleSelectDriversCompany:function(e,t){var n=Bm(B),r=[];r=t?[].concat(Bm(n),[e]):n.filter((function(t){return t!==e})),F(r),P(Rm(Rm({},E),{},{driver_companies:JSON.stringify(r)}))},handleSelectAllPaymethod:function(e){var t=null==l?void 0:l.reduce((function(e,t){return[].concat(Bm(e),[t.id])}),[]),n=[];n=e?Bm(t):[],_(n),P(Rm(Rm({},E),{},{allowed_paymethods:JSON.stringify(n)}))},handleSelectAllDriver:function(e){var t=null==f?void 0:f.reduce((function(e,t){return[].concat(Bm(e),[t.id])}),[]),n=[];n=e?Bm(t):[],U(n),P(Rm(Rm({},E),{},{drivers:JSON.stringify(n)}))},handleSelectAllDriversCompany:function(e){var t=null==p?void 0:p.reduce((function(e,t){return[].concat(Bm(e),[t.id])}),[]),n=[];n=e?Bm(t):[],F(n),P(Rm(Rm({},E),{},{driver_companies:JSON.stringify(n)}))},handleUpdateDriversGroup:R,handleDeleteDriversGroup:M,handleAddDriversGroup:N})))};function Jm(){return Jm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jm.apply(this,arguments)}function Vm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vm(Object(n),!0).forEach((function(t){Wm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Km(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}$m.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$m.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Zm=function(e){var t=e.UIComponent,n=e.curDriversGroup,r=e.handleChangesState,o=Km(Object(i.useState)({}),2),a=o[0],s=o[1],c=Km(Object(i.useState)({}),2),l=c[0],f=c[1],p=Km(Object(i.useState)({}),2),d=p[0],y=p[1],h=function(e){return 1*e/3600>1?Math.floor(1*e/3600):0},v=function(e){return Math.floor((e-3600*Math.floor(e/3600))/60)},m=function(e){var t=e-3600*Math.floor(e/3600);return Math.floor(t-60*Math.floor(t/60))};return Object(i.useEffect)((function(){if(n){var e={hour:h(null==n?void 0:n.orders_group_max_time_between),minute:v(null==n?void 0:n.orders_group_max_time_between),second:m(null==n?void 0:n.orders_group_max_time_between)};s(e);var t={hour:h(null==n?void 0:n.orders_group_max_time_between_pickup),minute:v(null==n?void 0:n.orders_group_max_time_between_pickup),second:m(null==n?void 0:n.orders_group_max_time_between_pickup)};f(t);var r={hour:h(null==n?void 0:n.orders_group_max_time_between_delivery),minute:v(null==n?void 0:n.orders_group_max_time_between_delivery),second:m(null==n?void 0:n.orders_group_max_time_between_delivery)};y(r)}}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Jm({},e,{maxTimeBetweenOrder:a,maxTimeBetweenBusiness:l,maxTimeBetweenDelivery:d,handleChangeMaxTimeBetweenOrder:function(e,t){if(""===e||/^[0-9\b]+$/.test(e)){var n=""===e?0:parseInt(e),o=Hm({},a);o[t]=n,s(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);r({orders_group_max_time_between:i})}},handleChangeMaxTimeBetweenBusiness:function(e,t){if(""===e||/^[0-9\b]+$/.test(e)){var n=""===e?0:parseInt(e),o=Hm({},a);o[t]=n,f(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);r({orders_group_max_time_between_pickup:i})}},handleChangeMaxTimeBetweenDelivery:function(e,t){if(""===e||/^[0-9\b]+$/.test(e)){var n=""===e?0:parseInt(e),o=Hm({},a);o[t]=n,y(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);r({orders_group_max_time_between_delivery:i})}},onChangeNumberInput:function(e,t){(""===t||/^[0-9\b]+$/.test(t))&&r(Wm({},e,t))}})))};function Qm(){return Qm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qm.apply(this,arguments)}function eb(e){return function(e){if(Array.isArray(e))return sb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ub(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tb(Object(n),!0).forEach((function(t){rb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ob(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ab(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ob(a,r,o,i,u,"next",e)}function u(e){ob(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ib(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ub(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ub(e,t){if(e){if("string"==typeof e)return sb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sb(e,t):void 0}}function sb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Zm.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cb=function(e){var t=e.UIComponent,n=e.isDriversMangersRequired,r=ib(rn(),1)[0],o=ib(yn(),1)[0].token,s=ib(Br(),2)[1].showToast,c=ib(Bn(),2)[1],l=ib(Object(i.useState)({groups:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=ib(Object(i.useState)({managers:[],loading:!1,error:null}),2),y=d[0],h=d[1],v=ib(Object(i.useState)({businesses:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=ib(Object(i.useState)({paymethods:[],loading:!1,error:null}),2),O=g[0],w=g[1],j=ib(Object(i.useState)({drivers:[],loading:!1,error:null}),2),S=j[0],E=j[1],P=ib(Object(i.useState)({companies:[],loading:!1,error:null}),2),C=P[0],I=P[1],x=ib(Object(i.useState)(!1),2),A=x[0],T=x[1],_=ib(Object(i.useState)({loading:!1,error:null}),2),k=_[0],D=_[1],U=ib(Object(i.useState)([]),2),L=U[0],B=U[1],F=function(){var e=ab(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(nb(nb({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/drivergroups"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||p(nb(nb({},f),{},{groups:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(nb(nb({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=ab(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(nb(nb({},y),{},{loading:!1})),e.next=4,r.setAccessToken(o).users().where([{attribute:"level",value:5}]).select(["name","email","photo"]).get();case 4:t=e.sent,n=t.content,i=n.error,u=n.result,i||h(nb(nb({},y),{},{loading:!1,managers:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),h(nb(nb({},y),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=ab(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(nb(nb({},m),{},{loading:!1})),e.next=4,r.setAccessToken(o).businesses().select(["name","logo"]).asDashboard().get();case 4:t=e.sent,n=t.content,i=n.error,u=n.result,i||b(nb(nb({},m),{},{loading:!1,businesses:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),b(nb(nb({},m),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=ab(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(nb(nb({},S),{},{loading:!1})),e.next=4,r.setAccessToken(o).users().where([{attribute:"level",value:4}]).select(["name","lastname","email","photo"]).get();case 4:t=e.sent,n=t.content,i=n.error,u=n.result,i||E(nb(nb({},S),{},{loading:!1,drivers:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),E(nb(nb({},S),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=ab(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(nb(nb({},O),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/paymethods?params=name&where={%22enabled%22:true}"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||w(nb(nb({},O),{},{paymethods:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w(nb(nb({},O),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=ab(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(nb(nb({},C),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/driver_companies?params=name"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||I(nb(nb({},C),{},{companies:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),I(nb(nb({},C),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=ab(a.a.mark((function e(t,n){var i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),D(nb(nb({},k),{},{loading:!0,error:null})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)},e.next=6,fetch("".concat(r.root,"/drivergroups/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?D(nb(nb({},k),{},{loading:!1,error:l.result})):(D({error:null,loading:!1}),d=f.groups.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),p(nb(nb({},f),{},{groups:d})),s(Dr.Success,c("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),D({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=ab(a.a.mark((function e(t){var n,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),D(nb(nb({},k),{},{loading:!0,error:null})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/drivergroups/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?(D(nb(nb({},k),{},{loading:!1,error:u.result})),T(!1)):(D(nb(nb({},k),{},{loading:!1})),l=f.groups.filter((function(e){return e.id!==t})),p(nb(nb({},f),{},{groups:l})),s(Dr.Success,c("DRIVER_GROUP_DELETED","Driver group deleted")),A&&((d=eb(L)).shift(),0===d.length&&T(!1),B(d))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),D({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){A&&0!==L.length&&q(L[0])}),[L,A]),Object(i.useEffect)((function(){F(),n&&R(),N(),M(),z(),G()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Qm({},e,{driversGroupsState:f,setDriversGroupsState:p,driversManagersList:y,businessesList:m,paymethodsList:O,driversList:S,driversCompanyList:C,actionState:k,handleUpdateDriversGroup:Y,handleDeleteDriversGroup:q,handleDeleteSelectedGroups:function(){return T(!0)},selectedGroupList:L,handleSelectGroup:function(e){var t=[];t=L.includes(e)?L.filter((function(t){return t!==e})):[].concat(eb(L),[e]),B(t)},handleAllSelectGroup:function(){var e,t=null===(e=f.groups)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(eb(e),[t.id])}),[]);L.length===t.length?B([]):B(t)}})))};function lb(){return lb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lb.apply(this,arguments)}function fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fb(Object(n),!0).forEach((function(t){db(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function db(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yb(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function hb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mb=function(e){var t,n=e.driversGroupId,r=e.UIComponent,o=e.paginationSettings,s=hb(rn(),1)[0],c=hb(yn(),1)[0],l=hb(Object(i.useState)({logs:[],loading:!0,error:null}),2),f=l[0],p=l[1],d=hb(Object(i.useState)({currentPage:"pages"===o.controlType&&o.initialPage&&o.initialPage>=1?o.initialPage-1:0,pageSize:null!==(t=o.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),y=d[0],h=d[1],v=function(){var e,t=(e=a.a.mark((function e(t,r){var o,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(pb(pb({},f),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=5,fetch("".concat(s.root,"/drivergroups/").concat(n,"/logs?orderBy=-id&page=").concat(t,"&page_size=").concat(r),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,l=u.pagination,d=u.result,p(pb(pb({},f),{},{loading:!1,logs:d})),h(pb(pb({},y),{},{currentPage:l.current_page,totalPages:l.total_pages,totalItems:l.total,from:l.from,to:l.to})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),p(pb(pb({},f),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){yb(a,r,o,i,u,"next",e)}function u(e){yb(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){v(1,null)}),[n]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,lb({},e,{logsList:f,paginationProps:y,getDriversGroupLogs:v})))};function bb(){return bb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bb.apply(this,arguments)}function gb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ob(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ob(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ob(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var wb=function(e){var t=e.UIComponent,n=e.businessId,r=e.useOrderContext;if(r&&!n)throw new Error("`businessId` is required when `useOrderContext` is true.");var o=gb(vr(),2),a=o[0],s=o[1].changeDriverTip,c=gb(Object(i.useState)(0),2),l=c[0],f=c[1],p=gb(Object(i.useState)(0),2),d=p[0],y=p[1];return Object(i.useEffect)((function(){var e,t,r=(null===(e=a.carts["businessId:".concat(n)])||void 0===e?void 0:e.driver_tip_rate)||0,o=(null===(t=a.carts["businessId:".concat(n)])||void 0===t?void 0:t.driver_tip)||0;f(r),y(o)}),[a]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,bb({},e,{driverTipAmount:d,optionSelected:l,handlerChangeOption:function(t){t=parseInt(t),r?s(n,t):f(t),e.handlerChangeDriverOption&&e.handlerChangeDriverOption(t)}})))};function jb(){return jb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jb.apply(this,arguments)}function Sb(e){return function(e){if(Array.isArray(e))return _b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Tb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eb(Object(n),!0).forEach((function(t){Cb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ib(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xb(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ib(a,r,o,i,u,"next",e)}function u(e){Ib(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ab(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Tb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tb(e,t){if(e){if("string"==typeof e)return _b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_b(e,t):void 0}}function _b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}wb.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,useOrderContext:c.a.bool,driverTipsOptions:c.a.arrayOf(c.a.number),handlerChangeDriverOption:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wb.defaultProps={useOrderContext:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var kb=function(e){var t=e.drivers,n=e.UIComponent,r=e.propsToFetch,o=e.isSearchByName,s=e.isSearchByCellphone,c=e.asDashboard,l=Ab(rn(),1)[0],f=Ab(Br(),2)[1].showToast,p=Ab(Bn(),2)[1],d={},y=Ab(Object(i.useState)({loading:!0,error:null}),2),h=y[0],v=y[1],m=Cn(),b=Ab(yn(),1)[0],g=Ab(Object(i.useState)({drivers:[],loading:!0,error:null}),2),O=g[0],w=g[1],j=Ab(Object(i.useState)([]),2),S=j[0],E=j[1],P=Ab(Object(i.useState)([]),2),C=P[0],I=P[1],x=Ab(Object(i.useState)(!0),2),A=x[0],T=x[1],_=Ab(Object(i.useState)({busy:!0,notBusy:!0}),2),k=_[0],D=_[1],U=Ab(Object(i.useState)(null),2),L=U[0],B=U[1],F=function(){var e=xb(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),v(Pb(Pb({},h),{},{loading:!0})),n={},d.assignDriver=n,e.next=7,l.setAccessToken(b.token).orders(t.orderId).save({driver_id:t.driverId},{cancelToken:n});case 7:r=e.sent,o=r.content,v({loading:!1,error:o.error?o.result:null}),o.error||(t.driverId?f(Dr.Success,p("ORDER_DRIVER_ASSIGNED","Driver assigned to order")):f(Dr.Success,p("ORDER_DRIVER_REMOVED","Driver removed from the order"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(Pb(Pb({},h),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),R=function(e){var t,n;k.busy&&k.notBusy?(t=e.filter((function(e){return e.enabled&&e.available})),n=e.filter((function(e){return e.enabled&&!e.available}))):k.busy&&!k.notBusy?(t=e.filter((function(e){return e.enabled&&e.available&&e.busy})),n=e.filter((function(e){return e.enabled&&!e.available&&e.busy}))):!k.busy&&k.notBusy?(t=e.filter((function(e){return e.enabled&&e.available&&!e.busy})),n=e.filter((function(e){return e.enabled&&!e.available&&!e.busy}))):(t=[],n=[]),E(t),I(n)},M=function(){var e=xb(a.a.mark((function e(){var t,n,i,u,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(Pb(Pb({},O),{},{loading:!0})),t={},d.drivers=t,n=null,(i=[]).push({attribute:"level",value:[4]}),L&&(u=[],o&&(u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(L,"%"))}}),u.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(L,"%"))}})),s&&u.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(L,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(n={conditions:i,conector:"AND"}),e.next=11,l.setAccessToken(b.token).users().select(r).where(n).get({cancelToken:t});case 11:c=e.sent,f=c.content.result,w(Pb(Pb({},O),{},{loading:!1,drivers:f})),R(f),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),w(Pb(Pb({},O),{},{loading:!1,error:e.t0.message}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){R(O.drivers)}),[k]),Object(i.useEffect)((function(){return t?(w(Pb(Pb({},O),{},{drivers:t,loading:!1})),R(t)):M(),function(){d.drivers&&d.drivers.cancel()}}),[t,L]),Object(i.useEffect)((function(){if(null==b||!b.loading){var e=function(e){var t=[];t=O.drivers.find((function(t){return t.id===e.id}))?O.drivers.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})):[].concat(Sb(O.drivers),[e]),w(Pb(Pb({},O),{},{drivers:t}))},t=function(e){var t;t=O.drivers.filter((function(t){if(t.id===e.driver_id)if("string"==typeof e.location){var n=e.location.replaceAll("\\",""),r=JSON.parse(n);t.location=r}else t.location=e.location;return!0})),w(Pb(Pb({},O),{},{drivers:t}))};return m.on("drivers_update",e),m.on("tracking_driver",t),function(){m.off("drivers_update",e),m.off("tracking_driver",t)}}}),[m,null==b?void 0:b.loading,O.drivers]),Object(i.useEffect)((function(){null!=b&&b.user&&!t&&m.join("drivers")}),[m,null==b?void 0:b.user,c]),Object(i.useEffect)((function(){R(O.drivers)}),[O.drivers]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,jb({},e,{driversList:O,onlineDrivers:S,offlineDrivers:C,driverActionStatus:h,driversIsOnline:A,driversSubfilter:k,searchValue:L,handleChangeSearch:function(e){e!==L&&B(e)},handleChangeDriverIsOnline:function(e){T(e)},handleChangeDriversSubFilter:function(e){D(e)},handleAssignDriver:F})))};function Db(){return Db=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Db.apply(this,arguments)}function Ub(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ub(Object(n),!0).forEach((function(t){Bb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ub(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fb(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Rb(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Fb(a,r,o,i,u,"next",e)}function u(e){Fb(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Mb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}kb.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},kb.defaultProps={propsToFetch:["id","name","lastname","assigned_orders_count","available","phone","cellphone","location","photo","qualification","last_order_assigned_at"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var zb=function(e){var t=e.UIComponent,n=Mb(yn(),1)[0],r=n.token,o=n.loading,s=Mb(rn(),1)[0],c=Mb(Object(i.useState)({lapse:"today",userIds:null,app_id:"all",driver_groups_ids:null,franchises_id:null,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),2),l=c[0],f=c[1],p=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),d=p[0],y=p[1],h=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),v=h[0],m=h[1],b=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),g=b[0],O=b[1],w=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),j=w[0],S=w[1],E=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),P=E[0],C=E[1],I=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),x=I[0],A=I[1],T=Mb(Object(i.useState)({loading:!1,data:{},error:null}),2),_=T[0],k=T[1],D=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),U=D[0],L=D[1],B=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),F=B[0],R=B[1],M=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),N=M[0],z=M[1],G=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),Y=G[0],q=G[1],$=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),J=$[0],V=$[1],H=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),W=H[0],K=H[1],X=Mb(Object(i.useState)({loading:!1,data:[],error:null}),2),Z=X[0],Q=X[1],ee=function(e){var t,n="".concat(s.root,"/reports/").concat(e),r="lapse=".concat(null==l?void 0:l.lapse,"&timezone=").concat(null==l?void 0:l.timeZone);return null!=l&&l.userIds&&(r="".concat(r,"&drivers=").concat(null==l||null===(t=l.userIds)||void 0===t?void 0:t.toString())),null!=l&&l.app_id&&"all"!==l.app_id&&(r="".concat(r,"&app_id=").concat(null==l?void 0:l.app_id)),null!=l&&l.driver_groups_ids&&(r="".concat(r,"&driver_groups_ids=").concat(JSON.stringify(null==l?void 0:l.driver_groups_ids))),null!=l&&l.franchises_id&&(r="".concat(r,"&franchises_id=").concat(JSON.stringify(null==l?void 0:l.franchises_id))),"".concat(n,"?").concat(r)},te=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Lb(Lb({},d),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("driver_orders_v2"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,y(Lb(Lb({},d),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),y(Lb(Lb({},d),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,m(Lb(Lb({},v),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("driver_sales_v2"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,m(Lb(Lb({},v),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),m(Lb(Lb({},v),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(Lb(Lb({},g),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_orders_status"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,O(Lb(Lb({},g),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),O(Lb(Lb({},g),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,S(Lb(Lb({},j),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_top_orders"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,S(Lb(Lb({},j),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),S(Lb(Lb({},j),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,L(Lb(Lb({},U),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("customer_satisfaction"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,L(Lb(Lb({},U),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),L(Lb(Lb({},U),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,V(Lb(Lb({},J),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_complete_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,V(Lb(Lb({},J),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),V(Lb(Lb({},J),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,C(Lb(Lb({},P),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_spend_times"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,C(Lb(Lb({},P),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),C(Lb(Lb({},P),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,A(Lb(Lb({},x),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_available_times"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,A(Lb(Lb({},x),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),A(Lb(Lb({},x),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,k(Lb(Lb({},_),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_busy_times"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,k(Lb(Lb({},_),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),k(Lb(Lb({},_),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,R(Lb(Lb({},F),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_accept_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,R(Lb(Lb({},F),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),R(Lb(Lb({},F),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,z(Lb(Lb({},N),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_arrived_pickup_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,z(Lb(Lb({},N),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),z(Lb(Lb({},N),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,q(Lb(Lb({},Y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_order_location"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,q(Lb(Lb({},Y),{},s?{loading:!0,error:c}:{loading:!1,locations:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),q(Lb(Lb({},Y),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,K(Lb(Lb({},W),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_pickup_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,K(Lb(Lb({},W),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),K(Lb(Lb({},W),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Rb(a.a.mark((function e(){var t,n,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Q(Lb(Lb({},Z),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=ee("drivers_delivery_spend"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,s=u.error,c=u.result,Q(Lb(Lb({},Z),{},s?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),Q(Lb(Lb({},Z),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){te(),ne(),re(),oe(),ue(),se(),ce(),ae(),le(),ie(),fe(),de(),pe(),ye()}),[l]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Db({},e,{filterList:l,ordersList:d,salesList:v,orderStatusList:g,topOrdersList:j,customerSatisfactionList:U,ordersAcceptSpendList:F,arrivedPickUpSpendList:N,orderLocationList:Y,spendTimesList:P,availableTimesList:x,busyTimesList:_,completeSpendList:J,pickUpSpendList:W,deliverySpendList:Z,handleChangeFilterList:f})))};function Gb(){return Gb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gb.apply(this,arguments)}function Yb(e){return function(e){if(Array.isArray(e))return Xb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qb(Object(n),!0).forEach((function(t){Jb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vb(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Hb(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Vb(a,r,o,i,u,"next",e)}function u(e){Vb(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Wb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Kb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kb(e,t){if(e){if("string"==typeof e)return Xb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xb(e,t):void 0}}function Xb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}zb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},zb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Zb=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.propsToFetch,s=e.isSearchByPromotionName,c=e.isSearchByPromotionDescription,l=Wb(rn(),1)[0],f=Wb(yn(),1)[0].token,p=Wb(Bn(),2)[1],d=Wb(Br(),2)[1].showToast,y=Wb(Object(i.useState)({promotions:[],loading:!1,error:null}),2),h=y[0],v=y[1],m=Wb(Object(i.useState)({loading:!1,error:null}),2),b=m[0],g=m[1],O=Wb(Object(i.useState)(null),2),w=O[0],j=O[1],S=Wb(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),E=S[0],P=S[1],C=Wb(Object(i.useState)(null),2),I=C[0],x=C[1],A=Wb(Object(i.useState)({loading:!1,sites:[],error:null}),2),T=A[0],_=A[1],k=Wb(Object(i.useState)({loading:!1,paymethods:[],error:null}),2),D=k[0],U=k[1],L=Wb(Object(i.useState)({businesses:[],loading:!1,error:null}),2),B=L[0],F=L[1],R=function(){var e=Hb(a.a.mark((function e(t,n){var r,i,u,p,d,y,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v($b($b({},h),{},{loading:!0})),r=null,i=[],w&&(u=[],s&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}),c&&u.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(r={conditions:i,conector:"AND"}),p={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},d=r?"".concat(l.root,"/offers?page=").concat(t,"&page_size=").concat(n,"&params=").concat(o.toString(),"&&where=").concat(JSON.stringify(r)):"".concat(l.root,"/offers?page=").concat(t,"&page_size=").concat(n,"&params=").concat(o.toString()),e.next=10,fetch(d,p);case 10:return y=e.sent,e.next=13,y.json();case 13:(m=e.sent).error?v($b($b({},h),{},{loading:!1,error:m.result})):(v({promotions:m.result,loading:!1,error:null}),P($b($b({},E),{},{currentPage:m.pagination.current_page,pageSize:0===m.pagination.page_size?E.pageSize:m.pagination.page_size,totalPages:m.pagination.total_pages,totalItems:m.pagination.total,from:m.pagination.from,to:m.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),v($b($b({},h),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Hb(a.a.mark((function e(t,n){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,p("LOADING","Loading")),g($b($b({},b),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({enabled:n})},e.next=6,fetch("".concat(l.root,"/offers/").concat(t),r);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error||(u=h.promotions.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0})),v($b($b({},h),{},{promotions:u})),d(Dr.Success,p("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Hb(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_($b($b({},T),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(l.root,"/sites"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error||_({sites:r.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),_($b($b({},T),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Hb(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U($b($b({},D),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(l.root,"/paymethods?where=").concat(JSON.stringify({enabled:!0})),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error||U({paymethods:r.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),U($b($b({},D),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Hb(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F($b($b({},B),{},{loading:!1})),e.next=4,l.setAccessToken(f).businesses().select(["name","logo","slug"]).asDashboard().get();case 4:t=e.sent,n=t.content,r=n.error,o=n.result,r||F($b($b({},B),{},{loading:!1,businesses:o})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),F($b($b({},B),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h.loading||R(1,E.pageSize)}),[w]),Object(i.useEffect)((function(){N(),G(),z()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Gb({},e,{sitesState:T,businessesList:B,paymethodsState:D,promotionListState:h,paginationProps:E,setPaginationProps:P,searchValue:w,onSearch:j,getPromotions:R,dataSelected:I,handleDragStart:function(e,t){e.dataTransfer.setData("transferPromotionId",t.id);var n=document.createElement("div");n.classList.add("ghostDragging"),n.innerHTML=null==t?void 0:t.name,document.body.appendChild(n),e.dataTransfer.setDragImage(n,0,0)},handleAllowDrop:function(e,t){e.preventDefault(),x(t)},handleDrop:function(e,t){e.preventDefault();var n=parseInt(e.dataTransfer.getData("transferPromotionId")),r=h.promotions.find((function(e){return e.id===n})),o=null==r?void 0:r.rank,a=null==t?void 0:t.rank;null===o&&null===a&&(a=1)},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);x("")},handleEnablePromotion:M,handleSuccessUpdatePromotions:function(e){v($b($b({},h),{},{promotions:e}))},handleSuccessAddPromotion:function(e){var t=[].concat(Yb(h.promotions),[e]);P($b($b({},E),{},{to:(null==E?void 0:E.to)+1,total:(null==E?void 0:E.total)+1})),v($b($b({},h),{},{promotions:t}))},handleSuccessDeletePromotion:function(e){var t=h.promotions.filter((function(t){return t.id!==e}));P($b($b({},E),{},{total:(null==E?void 0:E.total)-1})),v($b($b({},h),{},{promotions:t}))}})))};function Qb(){return Qb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qb.apply(this,arguments)}function eg(e){return eg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(e)}function tg(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ng(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){tg(a,r,o,i,u,"next",e)}function u(e){tg(a,r,o,i,u,"throw",e)}i(void 0)}))}}function rg(e){return function(e){if(Array.isArray(e))return cg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||sg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function og(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ag(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?og(Object(n),!0).forEach((function(t){ig(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):og(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ig(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ug(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||sg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sg(e,t){if(e){if("string"==typeof e)return cg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cg(e,t):void 0}}function cg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Zb.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},propsToFetch:["name","auto","enabled","end","description","image","label","order_priority","sites","stackable","start","target","type","limit_per_user","user_order_count","user_order_count_condition","valid_from_after_user_last_order_minutes","valid_until_after_user_last_order_minutes","users","delivery_zones","paymethods","order_types_allowed","max_discount","rank","rate_type","rate","public","coupon","businesses","condition_type","minimum","products","categories","schedule","limit","include_options"]};var lg=function(e){var t=e.promotion,n=e.promotionsList,r=e.businessesList,o=e.sitesState,s=e.UIComponent,c=e.handleSuccessUpdatePromotions,l=e.handleSuccessAddPromotion,f=e.handleSuccessDeletePromotion,p=ug(Bn(),2)[1],d=ug(rn(),1)[0],y=ug(yn(),1)[0].token,h=ug(Br(),2)[1].showToast,v=ug(Object(i.useState)({promotion:t,loading:!1,error:null}),2),m=v[0],b=v[1],g=ug(Object(i.useState)({loading:!1,changes:{}}),2),O=g[0],w=g[1],j=ug(Object(i.useState)({loading:!1,error:null}),2),S=j[0],E=j[1],P=ug(Object(i.useState)(!1),2),C=P[0],I=P[1],x=ug(Object(i.useState)([]),2),A=x[0],T=x[1],_=ug(Object(i.useState)([]),2),k=_[0],D=_[1],U=ug(Object(i.useState)({}),2),L=U[0],B=U[1],F=ug(Object(i.useState)({}),2),R=F[0],M=F[1],N=function(){return w({loading:!1,changes:{}})},z=function(){var e=ng(a.a.mark((function e(){var r,o,i,u,s,l,f,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u in e.prev=0,h(Dr.Info,p("LOADING","Loading")),E({loading:!0,error:null}),i=ag({},null==O?void 0:O.changes))("object"===eg(i[u])&&null!==i[u]||Array.isArray(i[u]))&&(i[u]=JSON.stringify(i[u]));return s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(i)},e.next=8,fetch("".concat(d.root,"/offers/").concat(null!==(r=t.id)&&void 0!==r?r:null===(o=m.promotion)||void 0===o?void 0:o.id),s);case 8:return l=e.sent,e.next=11,l.json();case 11:(f=e.sent).error?E({loading:!1,error:f.result}):(b(ag(ag({},m),{},{promotion:f.result})),E({loading:!1,error:null}),c&&(v=n.filter((function(e){return e.id===t.id&&Object.assign(e,f.result),!0})),c(v)),N(),h(Dr.Success,p("PROMOTION_SAVED","Promotion saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),E({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var t=ng(a.a.mark((function t(n){var r,o,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dr.Info,p("LOADING","Loading")),E({loading:!0,error:null}),null!=(r=ag({},null==O?void 0:O.changes))&&r.schedule&&(r.schedule=JSON.stringify(r.schedule)),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify(r)},t.next=8,fetch("".concat(d.root,"/offers"),o);case 8:return i=t.sent,t.next=11,i.json();case 11:(u=t.sent).error?E({loading:!1,error:u.result}):(E({error:null,loading:!1}),b(ag(ag({},m),{},{promotion:u.result})),l&&l(u.result),h(Dr.Success,p("PROMOTION_ADDED","Promotion added")),I(!1),!n&&e.onClose&&e.onClose()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),E({loading:!1,error:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),Y=function(){var n=ng(a.a.mark((function n(){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(Dr.Info,p("LOADING","Loading")),E(ag(ag({},S),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}},n.next=6,fetch("".concat(d.root,"/offers/").concat(t.id),r);case 6:return o=n.sent,n.next=9,o.json();case 9:n.sent.error||(f&&f(t.id),h(Dr.Success,p("OFFER_DELETED","Offer deleted")),e.onClose&&e.onClose()),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),E({loading:!1,error:[n.t0.message]});case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(0===Object.keys(t).length)I(!0),w(ag(ag({},O),{},{changes:{enabled:!0,auto:!1,public:!0,condition_type:1,type:1,target:1,rate_type:1,stackable:!1,rate:5}})),T([]),D([]),B({}),M({});else{var e,n,r,o;I(!1),N();var a=null==t||null===(e=t.businesses)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(rg(e),[t.id])}),[]);T(a||[]);var i=null==t||null===(n=t.sites)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(rg(e),[t.id])}),[]);D(i||[]);var u=null==t||null===(r=t.products)||void 0===r?void 0:r.reduce((function(e,t){return[].concat(rg(e),[t.id])}),[]);B(u);var s=null==t||null===(o=t.categories)||void 0===o?void 0:o.reduce((function(e,t){return[].concat(rg(e),[t.id])}),[]);M(s)}b(ag(ag({},m),{},{promotion:t}))}),[t]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,Qb({},e,{isAddMode:C,promotionState:m,formState:O,actionState:S,selectedBusinessIds:A,selectedSitesIds:k,selectedProductsIds:L,setSelectedProductsIds:B,selectedCategoryIds:R,setSelectedCategoryIds:M,handleChangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){w(ag(ag({},O),{},{changes:ag(ag({},O.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){w(ag(ag({},O),{},{changes:ag(ag({},O.changes),{},ig({},e.target.name,e.target.value))}))},handleUpdateClick:z,handleAddPromotion:G,handleDeletePromotion:Y,handleChangeItem:function(e){w(ag(ag({},O),{},{changes:ag(ag({},O.changes),e)}))},handleRemoveKey:function(e){var t=ag({},null==O?void 0:O.changes);delete t[e],w(ag(ag({},O),{},{changes:t}))},handleSelectSite:function(e,n){var r,o,a,i=[];null!==(r=O.changes)&&void 0!==r&&r.sites?i=rg(null===(o=O.changes)||void 0===o?void 0:o.sites):null!=t&&t.sites&&(i=null==t||null===(a=t.sites)||void 0===a?void 0:a.reduce((function(e,t){return[].concat(rg(e),[t.id])}),[]));e?i.push(n):i=i.filter((function(e){return e!==n})),D(i),w(ag(ag({},O),{},{changes:ag(ag({},O.changes),{},{sites:i})}))},handleSelectAllBusiness:function(e){var t,n=null==r||null===(t=r.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(rg(e),[t.id])}),[]),o=[];o=e?rg(n):[],T(o),w(ag(ag({},O),{},{changes:ag(ag({},O.changes),{},{businesses:o})}))},handleSelectBusiness:function(e,t){var n=rg(A),r=[];r=t?[].concat(rg(n),[e]):n.filter((function(t){return t!==e})),T(r),w(ag(ag({},O),{},{changes:ag(ag({},O.changes),{},{businesses:r})}))},handleSelectAllSites:function(e){var t,n=null===(t=o.sites)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(rg(e),[t.id])}),[]),r=[];r=e?rg(n):[],D(r),w(ag(ag({},O),{},{changes:ag(ag({},O.changes),{},{sites:r})}))}})))};lg.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fg=function(e){var t=e.onFiles,n=e.childRef,r=e.childId,o=e.children,a=e.className,s=e.style,c=e.accept,l=e.disabled,f=Object(i.useRef)(null);return u.a.createElement("div",{draggable:!0,onClick:function(e){n||r||f.current.click()},style:s,className:a},u.a.createElement("input",{type:"file",id:r,style:{display:"none"},onChange:function(e){e.preventDefault(),e.stopPropagation(),t(e.target.files)},onClick:function(e){return e.stopPropagation()},ref:function(e){f.current=e,n&&n(e)},accept:c,disabled:l}),o)};function pg(){return pg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pg.apply(this,arguments)}function dg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dg(Object(n),!0).forEach((function(t){hg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vg(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gg=function(e){var t=e.UIComponent,n=e.filterValues,r=mg(rn(),1)[0],o=mg(yn(),1)[0],s=o.token,c=o.loading,l=mg(Object(i.useState)({loading:!1,error:null,result:null}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(t){var o,i,u,l,d,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(yg(yg({},f),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},i=[],t&&Object.keys(n).length&&(void 0!==n.statuses&&(n.statuses.length>0?i.push({attribute:"status",value:n.statuses}):i.push({attribute:"status",value:[0,1,2,3,4,5,6,7,8,9,10,11,12]})),void 0!==n.deliveryFromDatetime&&null!==n.deliveryFromDatetime&&i.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(n.deliveryFromDatetime)}}),void 0!==n.deliveryEndDatetime&&null!==n.deliveryEndDatetime&&i.push({attribute:"delivery_datetime",value:{condition:"<=",value:n.deliveryEndDatetime}}),void 0!==n.businessIds&&0!==n.businessIds.length&&i.push({attribute:"business_id",value:n.businessIds}),void 0!==n.driverIds&&0!==n.driverIds.length&&i.push({attribute:"driver_id",value:n.driverIds}),void 0!==n.deliveryTypes&&0!==n.deliveryTypes.length&&i.push({attribute:"delivery_type",value:n.deliveryTypes}),void 0!==n.paymethodIds&&0!==n.paymethodIds.length&&i.push({attribute:"paymethod_id",value:n.paymethodIds})),u=t?"".concat(r.root,"/orders.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(i)):"".concat(r.root,"/orders.csv?mode=dashboard&orderBy=id"),e.next=10,fetch(u,o);case 10:return l=e.sent,e.next=13,l.json();case 13:d=e.sent,y=d.error,h=d.result,p(yg(yg({},f),{},y?{loading:!0,error:h}:{loading:!1,result:h})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p(yg(yg({},f),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){vg(a,r,o,i,u,"next",e)}function u(e){vg(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,pg({},e,{actionStatus:f,getCSV:d})))};function Og(){return Og=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Og.apply(this,arguments)}function wg(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function jg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jg(Object(n),!0).forEach((function(t){Eg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Eg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gg.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ig=function(e){var t=e.UIComponent,n=e.appId,r=e.debug,o=e.version,s=e.language,c=e.domain,l=e.handleButtonFacebookLoginClick,f=e.handleSuccessFacebookLogin,p=e.handleSuccessFacebookLogout,d=Pg(rn(),1)[0],y=Pg(Object(i.useState)({loading:!1,result:{error:!1}}),2),h=y[0],v=y[1],m=Pg(Object(i.useState)({ready:!1,logged:!1}),2),b=m[0],g=m[1],O=!1;Object(i.useEffect)((function(){if(!window.document.getElementById("facebook-jssdk")){window.fbAsyncInit=function(){window.FB.init({appId:n,cookie:!0,xfbml:!1,version:o,status:!0}),!O&&g(Sg(Sg({},b),{},{ready:!0})),window.FB.getLoginStatus((function(e){"connected"===e.status&&!O&&g(Sg(Sg({},b),{},{logged:!0}))}))};var e=window.document.createElement("script"),t=window.document.getElementsByTagName("script")[0];e.id="facebook-jssdk",e.async=!0,e.defer=!0,e.src="https://".concat(c,"/").concat(s,"/sdk").concat(r?"/debug":"",".js"),t.parentNode.insertBefore(e,t)}}),[]),Object(i.useEffect)((function(){return function(){O=!0}}),[]);var w=function(){var e,t=(e=a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=3;break}return l(t),e.abrupt("return");case 3:return e.prev=3,v(Sg(Sg({},h),{},{loading:!0})),e.next=7,d.users().authFacebook({access_token:null===(n=t.authResponse)||void 0===n?void 0:n.accessToken});case 7:r=e.sent,v({result:r.content,loading:!1}),r.content.error?j():f&&f(r.content.result),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),v({result:{error:!0,result:e.t0.message},loading:!1});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){wg(a,r,o,i,u,"next",e)}function u(e){wg(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),j=function(e){window.FB&&(v(Sg(Sg({},h),{},{loading:!0})),window.FB.logout((function(e){v({loading:!1,result:{error:!1}}),g(Sg(Sg({},b),{},{logged:!1})),p&&p(e)})))};return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Og({},e,{formState:h,facebookStatus:b,handleFacebookLogout:j,handleFacebookLogin:function(e){window.FB&&(v(Sg(Sg({},h),{},{loading:!0})),window.FB.login((function(e){"connected"===e.status?(v({loading:!1,result:{error:!1}}),g(Sg(Sg({},b),{},{logged:!0})),w(e)):v({loading:!1,result:{error:!0,result:"Error login with Facebook"}})})))}})))};function xg(){return xg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xg.apply(this,arguments)}function Ag(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ag(Object(n),!0).forEach((function(t){_g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ag(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kg(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Dg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ug(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ug(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ug(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ig.propTypes={UIComponent:c.a.elementType,handleButtonForgotPassowrdClick:c.a.func,handleSuccessForgotPassoword:c.a.func,appId:c.a.string.isRequired,debug:c.a.bool,version:c.a.string,language:c.a.string,domain:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ig.defaultProps={version:"v7.0",language:"en_US",domain:"connect.facebook.net",beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Lg=function(e){var t=e.UIComponent,n=e.defaultEmail,r=e.handleButtonForgotPasswordClick,o=e.handleSuccessForgotPassword,s=Dg(rn(),1)[0],c=Dg(Bn(),2)[1],l=Dg(tr(),1)[0].configs,f=Dg(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],y=Dg(Object(i.useState)({email:n||""}),2),h=y[0],v=y[1],m=Dg(Object(i.useState)(null),2),b=m[0],g=m[1],O=Dg(Object(i.useState)(!1),2),w=O[0],j=O[1],S=function(){var e,t=(e=a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=4;break}if(null!==b){e.next=4;break}return d({result:{error:!0,result:c("RECAPTCHA_VALIDATION_IS_REQUIRED","The captcha validation is required")},loading:!1}),e.abrupt("return");case 4:return e.prev=4,d(Tg(Tg({},p),{},{loading:!0})),n=t||h,e.next=9,s.users().forgotPassword(n);case 9:r=e.sent,d({result:r.content,loading:!1}),w&&(window.grecaptcha.reset(),g(null)),r.content.error||o&&o(h.email),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),d({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[4,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){kg(a,r,o,i,u,"next",e)}function u(e){kg(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;j((null==s?void 0:s.project)&&l&&Object.keys(l).length>0&&"1"===(null==l||null===(e=l.security_recaptcha_auth)||void 0===e?void 0:e.value))}),[l,null==s?void 0:s.project]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,xg({},e,{formState:p,formData:h,hanldeChangeInput:function(e){v(Tg(Tg({},h),{},_g({},e.target.name,e.target.value)))},handleButtonForgotPasswordClick:r||S,isReCaptchaEnable:w,handleReCaptcha:g})))};function Bg(){return Bg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bg.apply(this,arguments)}function Fg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Lg.propTypes={UIComponent:c.a.elementType,handleButtonForgotPasswordClick:c.a.func,handleSuccessForgotPassword:c.a.func,defaultEmail:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToSignup:c.a.string,linkToLogin:c.a.string,elementLinkToSignup:c.a.element,elementLinkToLogin:c.a.element},Lg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Mg=function(e){return function(t){var n=t.apiKey;n||console.warn("Prop `apiKey` is required to use Google Maps components.");var r=Fg(Object(i.useState)(!1),2),o=r[0],a=r[1];return Object(i.useEffect)((function(){if(n){var e=null;if(!window.document.getElementById("google-maps-cluster")){var t=window.document.createElement("script");t.id="google-maps-cluster",t.async=!0,t.defer=!0,t.src="https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js",window.document.body.appendChild(t)}if(!window.document.getElementById("__googleMapsScriptId")||!window.document.getElementById("google-maps-cluster")){window.googleAsyncInit=function(){a(!0)};var r=window.document.createElement("script");return r.id="__googleMapsScriptId",r.async=!0,r.defer=!0,r.src="https://maps.googleapis.com/maps/api/js?key=".concat(n,"&libraries=places,geometry,visualization,drawing&callback=googleAsyncInit"),window.document.body.appendChild(r),function(){e&&clearInterval(e)}}"undefined"!=typeof google?a(!0):e=setInterval((function(){"undefined"!=typeof google&&(a(!0),clearInterval(e))}),100)}}),[n]),u.a.createElement(e,Bg({},t,{googleReady:o}))}};function Ng(){return Ng=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ng.apply(this,arguments)}function zg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Gg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gg(e,t){if(e){if("string"==typeof e)return Yg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yg(e,t):void 0}}function Yg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Mg.propTypes={apiKey:c.a.string.isRequired},Mg.defaultProps={};var qg=function(e){var t=e.googleReady,n=e.onChangeAddress,r=e.types,o=e.fields,a=e.countryCode,s=e.childRef,c=Object(i.useRef)(),l={};Object.entries(e).forEach((function(e){var t=zg(e,2),n=t[0],r=t[1];-1===["googleReady","apiKey","onChangeAddress","setValue","childRef","countryCode","types","fields"].indexOf(n)&&(l[n]=r)}));var f={types:r,fields:o};return"*"!==a&&(f.componentRestrictions={country:a}),Object(i.useEffect)((function(){var e,r,o;if(t&&n&&null!==(e=window.google)&&void 0!==e&&null!==(r=e.maps)&&void 0!==r&&null!==(o=r.places)&&void 0!==o&&o.Autocomplete){var a=new window.google.maps.places.Autocomplete(c.current,f);a.addListener("place_changed",(function(){var e,t=a.getPlace(),r=null,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Gg(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(t.address_components);try{for(o.s();!(e=o.n()).done;){var i=e.value;if("postal_code"===i.types[0]){r=i.short_name;break}}}catch(e){o.e(e)}finally{o.f()}var u={address:t.formatted_address,location:{lat:t.geometry.location.lat(),lng:t.geometry.location.lng()},utc_offset:t.utc_offset_minutes,map_data:{library:"google",place_id:t.place_id}};r&&(u.zipcode=r),n(u)}))}}),[t]),Object(i.useEffect)((function(){var e=setInterval((function(){c.current.attributes.autocomplete&&"new-field"===c.current.attributes.autocomplete.value&&clearInterval(e),c.current.setAttribute("autocomplete","new-field")}),100);return function(){return clearInterval(e)}})),u.a.createElement("input",Ng({},l,{autoComplete:"new-field",disabled:!e.googleReady,ref:function(e){c.current=e,s&&s(e)}}))};qg.propTypes={apiKey:c.a.string.isRequired,fields:c.a.arrayOf(s.string),types:c.a.arrayOf(s.string),countryCode:c.a.string,onChangeAddress:c.a.func},qg.defaultProps={types:[],fields:["place_id","formatted_address","geometry","utc_offset_minutes","address_components"],countryCode:"*"};var $g=Mg(qg);function Jg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jg(Object(n),!0).forEach((function(t){Hg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wg(e){return function(e){if(Array.isArray(e))return Zg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Xg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xg(e,t){if(e){if("string"==typeof e)return Zg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zg(e,t):void 0}}function Zg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qg=function(e){var t=e.googleReady,n=e.locations,r=e.mapControls,o=e.setErrors,a=e.isSetInputs,s=e.fixedLocation,c=e.handleChangeAddressMap,l=e.maxLimitLocation,f=e.businessMap,p=e.onBusinessClick,d=e.isHeatMap,y=e.isHeat,h=e.markerIcon,v=e.isFitCenter,m=e.handleChangeCenter,b=e.data,g=e.fillStyle,O=Kg(Pr(),1)[0].optimizeImage,w=Kg(zn(),1)[0],j=Object(i.useRef)(),S=Kg(Object(i.useState)(null),2),E=S[0],P=S[1],C=Kg(Object(i.useState)(null),2),I=C[0],x=C[1],A=Kg(Object(i.useState)([]),2),T=A[0],_=A[1],k=Kg(Object(i.useState)(null),2),D=k[0],U=k[1],L=Kg(Object(i.useState)(null),2),B=L[0],F=L[1],R=Kg(Object(i.useState)(null),2),M=R[0],N=R[1],z=s||e.location,G={lat:null==z?void 0:z.lat,lng:null==z?void 0:z.lng},Y=function(e){for(var t=new window.google.maps.LatLngBounds,r=0,a=function(o){var a,i,u,s,c,l=null;(1===o||f)&&(l=O(null===(c=n[o])||void 0===c?void 0:c.icon,"r_max"));d&&h&&(l=h);var y=new window.google.maps.Marker({position:new window.google.maps.LatLng(null===(a=n[o])||void 0===a?void 0:a.lat,null===(i=n[o])||void 0===i?void 0:i.lng),map:e,title:null===(u=n[o])||void 0===u?void 0:u.slug,icon:null!==(s=n[o])&&void 0!==s&&s.icon?{url:l||n[o].icon,scaledSize:new window.google.maps.Size(45,45)}:d?{url:l,scaledSize:new window.google.maps.Size(40,40)}:null});f?$(E,y,y.getPosition())?(y.addListener("click",(function(){var e;return p(null===(e=n[o])||void 0===e?void 0:e.slug)})),t.extend(y.position),_((function(e){return[].concat(Wg(e),[y])})),r+=1):y.setMap(null):(t.extend(y.position),_((function(e){return[].concat(Wg(e),[y])})))},i=0;i<n.length;i++)a(i);0===r&&o&&o("ERROR_NOT_FOUND_BUSINESSES"),(null==e?void 0:e.fitBounds)&&e.fitBounds(t),U(t)},q=function(e){if(a){(new window.google.maps.Geocoder).geocode({latLng:e},(function(t){var n=null;if(t&&t.length>0){var r,a,i,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Xg(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(t[0].address_components);try{for(u.s();!(i=u.n()).done;){var s=i.value;if("postal_code"===s.types[0]){n=s.short_name;break}}}catch(e){u.e(e)}finally{u.f()}var l={address:t[0].formatted_address,location:{lat:null==e?void 0:e.lat(),lng:null==e?void 0:e.lng()},zipcode:n};c&&c(l),G.lat=null===(r=l.location)||void 0===r?void 0:r.lat,G.lng=null===(a=l.location)||void 0===a?void 0:a.lng}else I&&I.setPosition(G),o&&o("ERROR_NOT_FOUND_ADDRESS");null!=G&&G.lat&&null!=G&&G.lng&&E&&E.panTo(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng))}))}else{var t={lat:null==e?void 0:e.lat(),lng:null==e?void 0:e.lng()};c&&c({location:t}),G.lat=null==t?void 0:t.lat,G.lng=null==t?void 0:t.lng,t.lat&&t.lng&&E&&E.panTo(new window.google.maps.LatLng(null==t?void 0:t.lat,null==t?void 0:t.lng))}},$=function(e,t,n){var r=new window.google.maps.LatLng(null==n?void 0:n.lat(),null==n?void 0:n.lng()),a=new window.google.maps.LatLng(null==z?void 0:z.lat,null==z?void 0:z.lng),i=window.google.maps.geometry.spherical.computeDistanceBetween(r,a);if(f){return i<=2e4}l?i<=l?q(n):null!=G&&G.lat&&null!=G&&G.lng&&(t.setPosition(G),e.panTo(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng)),o&&o("ERROR_MAX_LIMIT_LOCATION")):q(n)};return Object(i.useEffect)((function(){t&&E&&I&&d&&M&&(B.setMap(B.getMap()?null:E),B.getMap()?M.clearMarkers():M.addMarkers(T))}),[y]),Object(i.useEffect)((function(){t&&E&&I&&v&&E.addListener("center_changed",(function(){var e=setTimeout((function(){I.setPosition(E.getCenter()),m&&m(E.getCenter())}),200);return function(){return clearTimeout(e)}}))}),[I]),Object(i.useEffect)((function(){if(t){var e,o=new window.google.maps.Map(j.current,{zoom:null!==(e=z.zoom)&&void 0!==e?e:r.defaultZoom,center:G,zoomControl:null==r?void 0:r.zoomControl,streetViewControl:null==r?void 0:r.streetViewControl,fullscreenControl:null==r?void 0:r.fullscreenControl,mapTypeControl:null==r?void 0:r.mapTypeControl,mapTypeId:null==r?void 0:r.mapTypeId,mapTypeControlOptions:Vg({style:window.google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:window.google.maps.ControlPosition.TOP_LEFT},null==r?void 0:r.mapTypeControlOptions)}),a=null;P(o),n?(f&&(a=new window.google.maps.Marker({position:new window.google.maps.LatLng(G.lat,G.lng),map:o}),x(a)),Y(o),a=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng),map:o,opacity:d?0:1}),x(a)):(a=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng),map:o,draggable:!(null==r||!r.isMarkerDraggable)}),x(a)),b&&b.forEach((function(e){var t;if(1===e.type&&null!=e&&null!==(t=e.data)&&void 0!==t&&t.center){var n=new window.google.maps.Circle(Vg(Vg({},g),{},{draggable:!1,map:o,center:e.data.center,radius:e.data.radio}));console.log(n)}if(2===e.type&&Array.isArray(e.data)){var r=new window.google.maps.Polygon(Vg(Vg({},g),{},{draggable:!1,map:o,paths:e.data}));console.log(r)}}))}}),[t]),Object(i.useEffect)((function(){if(!f&&t&&E&&I){if(window.google.maps.event.addListener(I,"dragend",(function(){$(E,I,I.getPosition())})),window.google.maps.event.addListener(I,"drag",(function(){w.emit("map_is_dragging",!0)})),null!=r&&r.isMarkerDraggable&&(window.google.maps.event.addListener(E,"drag",(function(){I.setPosition(E.getCenter()),w.emit("map_is_dragging",!0)})),window.google.maps.event.addListener(E,"dragend",(function(){I.setPosition(E.getCenter()),$(E,I,E.getCenter())}))),d&&!M&&window.google.maps.visualization){var e=new window.google.maps.visualization.HeatmapLayer({data:null==n?void 0:n.map((function(e){return new window.google.maps.LatLng(e.lat,e.lng)})),map:null,radius:17});if(F(e),window.MarkerClusterer){var o=new window.MarkerClusterer(E,T,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"});N(o)}}return function(){window.google.maps.event.clearListeners(I,"dragend"),window.google.maps.event.clearListeners(E,"drag"),window.google.maps.event.clearListeners(E,"dragend")}}}),[I,E,z]),Object(i.useEffect)((function(){t&&(f&&E&&Y(E),d&&(null==n?void 0:n.length)>0||(G.lat=null==z?void 0:z.lat,G.lng=null==z?void 0:z.lng,G.lat&&G.lng&&(I&&I.setPosition(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng)),E&&E.panTo(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng)))))}),[z]),Object(i.useEffect)((function(){if(!f){var e=setInterval((function(){if(t&&E){var e=n[0],r=new window.google.maps.LatLng(null==e?void 0:e.lat,null==e?void 0:e.lng);T[0]&&T[0].setPosition(r),T.forEach((function(e){return D.extend(e.position)})),E.fitBounds(D)}}),1e3);return function(){return clearInterval(e)}}}),[n]),t&&u.a.createElement("div",{id:"map",ref:j,style:{width:"70%",height:"50%",position:"absolute"}})};Qg.propTypes={UIComponent:c.a.elementType,maxLimitLocation:c.a.number,handleChangeAddressMap:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Qg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var eO=Mg(Qg);function tO(){return tO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tO.apply(this,arguments)}function nO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||rO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rO(e,t){if(e){if("string"==typeof e)return oO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oO(e,t):void 0}}function oO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eO.propTypes={apiKey:c.a.string.isRequired,onAddress:c.a.func,onError:c.a.func};var aO=function(e){var t=e.UIComponent,n=e.googleReady,r=e.onData,o=e.onError,a=e.onAddress,s=nO(Bn(),2)[1],c=nO(Object(i.useState)(!1),2),l=c[0],f=c[1],p=void 0!==n;return navigator.geolocation&&u.a.createElement(t,tO({},e,{handleGPS:function(){p&&!n||l||(f(!0),navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};p&&a?(new window.google.maps.Geocoder).geocode({location:t},(function(e,n){f(!1);var r,i=null,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=rO(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(e[0].address_components);try{for(u.s();!(r=u.n()).done;){var c=r.value;if("postal_code"===c.types[0]){i=c.short_name;break}}}catch(e){u.e(e)}finally{u.f()}"OK"===n?a({address:e[0].formatted_address,location:t,utc_offset:(new Date).getTimezoneOffset(),zipcode:i,map_data:{library:"google",place_id:e[0].place_id}}):o&&o(s("ERROR_GPS_BUTTON","Error to get result with gps button"))})):(f(!1),r&&r({location:t,utc_offset:(new Date).getTimezoneOffset()}))}),(function(e){f(!1),o&&o(s("ERROR_GPS_BUTTON",e.message))}),{timeout:5e3,enableHighAccuracy:!0}))},isGoogleButton:p,googleReady:n,isLoading:l}))};aO.propTypes={onData:c.a.func,onError:c.a.func};var iO=Mg(aO);iO.propTypes={apiKey:c.a.string.isRequired,onAddress:c.a.func,onError:c.a.func};var uO=function(e){var t=e.children,n=e.tagId;return Object(i.useEffect)((function(){if(n){!function(e,t,n,r,o){e[r]=e[r]||[],e[r].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),u="dataLayer"!==r?"&l="+r:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+u,a.parentNode.insertBefore(i,a),window.document.head.appendChild(i)}(window,document,"script","dataLayer",n)}}),[n]),u.a.createElement(u.a.Fragment,null,t)};function sO(){return sO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sO.apply(this,arguments)}function cO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=vO(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function lO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function fO(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){lO(a,r,o,i,u,"next",e)}function u(e){lO(a,r,o,i,u,"throw",e)}i(void 0)}))}}function pO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pO(Object(n),!0).forEach((function(t){yO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||vO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vO(e,t){if(e){if("string"==typeof e)return mO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mO(e,t):void 0}}function mO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}uO.propTypes={tagId:c.a.string.isRequired},uO.defaultProps={tagId:"GTM-MHNGWVF"};var bO=function(e){var t=e.UIComponent,n=hO(yn(),1)[0],r=n.token,o=n.loading,s=hO(rn(),1)[0],c=[{id:1,name:"Create a store",addText:!1,description:"Go inside your Stores and Click Add New Store, fill up all the fields required and also add your banner and logo, if you don’t have one right now, don’t worry, you can add those later.",completed:!1},{id:2,name:"Fill up your business information",addText:!1,description:"The business information will show on your front-end website, such as; business name, logo, banner, business email, slug = the word after your domain, orderinwebsite.co/store, and business description.",completed:!1},{id:3,name:"Add your first category",addText:!1,description:"After you’ve clicked on the Add New Store and Filled up your business information you’ll get a blank screen, click on the Add Category button and add the name of your category.",completed:!1},{id:4,name:"Add your first product",addText:!1,description:"Now, click in the category you’ve just added and create a product, the products cannot be created if you don’t have a category, add an image to that product, make it look good.",completed:!1},{id:5,name:"Create a business menu",addText:!1,description:"To create a menu click in the store, a sidebar setting bar will show, inside here you’ll find the tab Menu, click Add Menu now, add a name, the delivery types, schedule, and at the bottom you’ll find all the products you have available to put inside this menu.",completed:!1},{id:6,name:"Create a delivery zone",addText:!1,description:"Go back a little bit in your sidebar setting bar, click in Delivery Zones, name the delivery zones, put a minimum price of delivery, and the price is how much you are going to charge for delivery, click “+”, and add your delivery zone, by Polygon or Circle, create by clicking around the map your range of delivery.",completed:!1},{id:7,name:"Payment method",addText:!0,description:"Last but not least, add a Payment Method, you’ll have several payment gateways, the biggest ones, PayPal, Stripe, or any other payment you want. That’s it! Look for your store in your Front-end Website.",completed:!1}],l=hO(Object(i.useState)({loading:!1,orders:0,error:null}),2),f=l[0],p=l[1],d=hO(Object(i.useState)({loading:!1,sales:0,error:null}),2),y=d[0],h=d[1],v=hO(Object(i.useState)({loading:!1,sales:[],error:null}),2),m=v[0],b=v[1],g=hO(Object(i.useState)({loading:!1,data:[],error:null}),2),O=g[0],w=g[1],j=function(){var e=fO(a.a.mark((function e(){var t,n,i,u,c,l,d,y,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(dO(dO({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n="".concat(s.root,"/reports/orders?lapse=today"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:if(u=e.sent,c=u.error,l=u.result,c)p(dO(dO({},f),{},{loading:!0,error:l}));else{if(d=0,(null==l?void 0:l.length)>0){y=cO(l);try{for(y.s();!(h=y.n()).done;)v=h.value,d+=parseInt(v.orders)}catch(e){y.e(e)}finally{y.f()}}p(dO(dO({},f),{},{loading:!1,orders:d}))}e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),p(dO(dO({},f),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=fO(a.a.mark((function e(){var t,n,i,u,c,l,f,p,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(dO(dO({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n="".concat(s.root,"/reports/sales?lapse=today"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:if(u=e.sent,c=u.error,l=u.result,c)h(dO(dO({},y),{},{loading:!0,error:l}));else{if(f=0,(null==l?void 0:l.length)>0){p=cO(l);try{for(p.s();!(d=p.n()).done;)v=d.value,f+=v.sales}catch(e){p.e(e)}finally{p.f()}}h(dO(dO({},y),{},{loading:!1,sales:f}))}e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),h(dO(dO({},y),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=fO(a.a.mark((function e(){var t,n,i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,b(dO(dO({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},n=P(),i="".concat(s.root,"/reports/sales?lapse=").concat(n),e.next=9,fetch(i,t);case 9:return u=e.sent,e.next=12,u.json();case 12:c=e.sent,l=c.error,f=c.result,b(dO(dO({},m),{},l?{loading:!0,error:f}:{loading:!1,sales:f})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),b(dO(dO({},m),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=new Date,t=e.getDate(),n=t<10?"0".concat(t):t,r=e.getMonth()+1,o=r<10?"0".concat(r):r,a=e.getFullYear();return"".concat(a,"-").concat(o,"-01,").concat(a,"-").concat(o,"-").concat(n)};return Object(i.useEffect)((function(){j(),S(),E(),w(dO(dO({},O),{},{data:c}))}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,sO({},e,{ordersList:f,todaySalelsList:y,monthSalesList:m,taskList:O,getCurrentDateRange:P,handleUpdateTaskList:function(e){w(dO(dO({},O),{},{data:e}))}})))};function gO(){return gO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gO.apply(this,arguments)}function OO(e){return function(e){if(Array.isArray(e))return AO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function jO(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){wO(a,r,o,i,u,"next",e)}function u(e){wO(a,r,o,i,u,"throw",e)}i(void 0)}))}}function SO(e){return SO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SO(e)}function EO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EO(Object(n),!0).forEach((function(t){CO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||xO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xO(e,t){if(e){if("string"==typeof e)return AO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AO(e,t):void 0}}function AO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bO.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var TO=function(e){var t=e.UIComponent,n=e.handleSuccessAdd,r=e.handleSuccessUpdateImporter,o=e.selectedImporter,s=e.handleCustomEditImporter,c=e.handleCustomAddImporter,l=IO(rn(),1)[0],f=IO(yn(),1)[0],p=IO(Br(),2)[1].showToast,d=IO(Bn(),2)[1],y=IO(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),h=y[0],v=y[1],m=IO(Object(i.useState)({}),2),b=m[0],g=m[1],O=IO(Object(i.useState)({}),2),w=O[0],j=O[1],S=IO(Object(i.useState)({}),2),E=S[0],P=S[1],C=IO(Object(i.useState)(!1),2),I=C[0],x=C[1],A=IO(Object(i.useState)({}),2),T=A[0],_=A[1],k=function(){document.getElementById("importer-form")&&document.getElementById("importer-form").reset()},D=function(){document.getElementById("field-form")&&document.getElementById("field-form").reset()},U=function(){k(),D(),g({}),j({}),_({}),v(PO(PO({},h),{},{changes:{}}))},L=function(){var t=jO(a.a.mark((function t(r){var o,i,u,s,y,m;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=3;break}return c(h.changes),t.abrupt("return");case 3:return p(Dr.Info,d("LOADING","Loading")),o=PO({},r||h.changes),t.prev=5,v(PO(PO({},h),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(o)},t.next=10,fetch("".concat(l.root,"/importers"),i);case 10:return u=t.sent,t.next=13,u.json();case 13:s=t.sent,y=s.error,m=s.result,y?v(PO(PO({},h),{},{loading:!1,result:{error:!0,result:m}})):(p(Dr.Success,d("IMPORTER_SAVED","Importer saved")),U(),v({loading:!1,changes:{},result:{error:!1,result:m}}),n&&n(m),e.onClose&&e.onClose()),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(5),v(PO(PO({},h),{},{result:{error:!0,result:[t.t0.message]},loading:!1}));case 22:case"end":return t.stop()}}),t,null,[[5,19]])})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=jO(a.a.mark((function t(n){var i,u,c,y,m,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=3;break}return s(h.changes),t.abrupt("return");case 3:return p(Dr.Info,d("LOADING","Loading")),i=PO({},n||h.changes),t.prev=5,v(PO(PO({},h),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(i)},t.next=10,fetch("".concat(l.root,"/importers/").concat(null==o?void 0:o.id),u);case 10:return c=t.sent,t.next=13,c.json();case 13:y=t.sent,m=y.error,b=y.result,m?v(PO(PO({},h),{},{loading:!1,result:{error:!0,result:b}})):(p(Dr.Success,d("IMPORTER_SAVED","Importer saved")),U(),v({loading:!1,changes:{},result:{error:!1,result:b}}),r&&r(b),e.onClos&&e.onClos()),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(5),v(PO(PO({},h),{},{result:{error:!0,result:[t.t0.message]},loading:!1}));case 22:case"end":return t.stop()}}),t,null,[[5,19]])})));return function(e){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){0!==Object.keys(E).length&&g(PO(PO({},b),{},{metafields:E}))}),[E]),Object(i.useEffect)((function(){0!==Object.keys(w).length&&g(PO(PO({},b),{},{fields:w}))}),[w]),Object(i.useEffect)((function(){if(0!==Object.keys(b).length){var e=PO({},b);v(PO(PO({},h),{},{changes:PO(PO({},h.changes),{},{mapping:JSON.stringify(e)})}))}}),[b]);return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,gO({},e,{formState:h,mappingState:b,fieldList:w,metafieldList:E,editState:T,isEdit:I,handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=PO(PO({},n),{},CO({},e.name,e.value))})):n=CO({},e.target.name,e.target.value),v(PO(PO({},h),{},{changes:PO(PO({},h.changes),n)}))},handleChangeSelect:function(e,t){var n;n=CO({},e,t),v(PO(PO({},h),{},{changes:PO(PO({},h.changes),n)})),I||(g({}),k())},handleChangeMappingInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=PO(PO({},n),{},CO({},e.name,e.value))})):n=CO({},e.target.name,e.target.value),g(PO(PO({},b),n))},addNewField:function(e,t){var n=CO({},e,parseInt(t));j(PO(PO({},w),n)),D()},removeField:function(e){var t=PO({},w);delete t[e],j(t)},addNewMetaField:function(e,t){var n=CO({},e,parseInt(t));P(PO(PO({},E),n)),D()},removeMetaField:function(e){var t=PO({},E);delete t[e],P(t)},clearImorterForm:U,setIsEdit:x,handleCreateImporter:L,handleEditState:function(e){var t,n,r;"object"===SO(r=null==e||null===(t=e.mapping)||void 0===t?void 0:t.metafields)&&null!==r&&P(r);var o;"object"===SO(o=null==e||null===(n=e.mapping)||void 0===n?void 0:n.fields)&&null!==o&&j(o);var a;a=null==e?void 0:e.mapping,g(a),_(PO(PO({},T),{},{name:null==e?void 0:e.name,slug:null==e?void 0:e.slug,type:null==e?void 0:e.type,mapping:a,fields:o,metafields:r})),v(PO(PO({},h),{},{changes:PO(PO({},h.changes),{},{name:null==e?void 0:e.name,type:null==e?void 0:e.type})}))},editImporter:B,downloadCSV:function(){var e={business_id:10,external_business_id:120,name:"House mine",logo:'"https://res.cloudinary.com/ordering2/image/upload/f_auto,q_auto,h_100,c_limit/v1539095959/crya6ibldlsz4hjyo03e.jpg"',email:"test@ordering.co",slug:"test_slug",header:'"https://s3.amazonaws.com/ordering-images2/res/ordering/image/upload/bqvntsurh8opknu58z9f/1534196989.jpg"',about:"test about",address:'"5th Avenue, New York, NY, USA"',location:'"{""lat"":40.7552112,""lng"":-73.982322}"',timezone:"America/New_York",description:"test description",cellphone:"123123123123",phone:"123123",featured:1,enabled:1,front_layout:"food",seo_image:'"https://res.cloudinary.com/ordering2/image/upload/f_auto,q_auto,h_100,c_limit/v1539095959/crya6ibldlsz4hjyo03e.jpg"',seo_title:"seo title",seo_description:"seo description",category_id:10,external_category_id:120,external_parent_category_id:130,product_id:10,image:'"https://s3.amazonaws.com/ordering-images2/res/ordering/image/upload/wmpfkcedo4y2kwxcamve/1534167067.png"',rank:10,parent_category_id:20,external_product_id:100,price:10,images:'"https://s3.amazonaws.com/ordering-images2/res/ordering/image/upload/lx0zuprnuozhqmaa97jj/1534200630.jpg"',sku:"test_sku",inventoried:1,quantity:10,upselling:1,in_offer:1,offer_price:10,offer_rate:0,offer_rate_type:1,offer_include_options:1,tax_id:10,fee_id:10,estimated_person:'"test person"',barcode:'"0123456789"',barcode_alternative:'"0123"',seo_keywords:"test key",hide_special_instructions:1,maximum_per_order:2,minimum_per_order:1,extra_id:10,external_extra_id:100,extra_option_id:10,external_extra_option_id:100,extra_option_suboption_id:10,external_extra_option_suboption_id:100,min:1,max:1},t=["busines_id","external_business_id","category_id","external_category_id","external_parent_category_id","product_id","rank","external_product_id","extra_id","external_extra_id","extra_option_id","external_extra_option_id","extra_option_suboption_id","external_extra_option_suboption_id"],n=["slug","name","sku","seo_keywords"],r={};if("sync_multiple"===(null==o?void 0:o.type))o.mapping.forEach((function(e){var t=PO({},e),n=PO({},t.fields),o=t.type.replace("sync_","").replaceAll("_"," "),a={};for(var i in n)a[o+" "+i]=n[i];delete t.fields,delete t.type;var u=PO(PO({},t),a);r=PO(PO({},r),u)}));else{var a=PO({},b),i=PO({},a.fields);delete a.fields,r=PO(PO({},a),i)}var u=Object.values(r),s=Math.max.apply(Math,OO(u)),c=Array(s+1).fill(""),l=Array(s+1).fill(""),f=Array(s+1).fill("");for(var p in r){var d=p.replaceAll("_"," ");c[r[p]]=d.charAt(0).toUpperCase()+d.slice(1),"sync_multiple"!==(null==o?void 0:o.type)&&(l[r[p]]=e[p]||" ",t.includes(p)?f[r[p]]=e[p]+1:n.includes(p)?f[r[p]]=e[p]+"_2":f[r[p]]=e[p]||" ")}"sync_multiple"===(null==o?void 0:o.type)&&o.mapping.forEach((function(r){var o=PO({},r),a=PO({},o.fields);for(var i in delete o.fields,delete o.type,o)l[o[i]]=e[i]||" ",t.includes(i)?f[o[i]]=e[i]+1:n.includes(i)?f[o[i]]=e[i]+"_2":f[o[i]]=e[i]||" ";for(var u in a)l[a[u]]=e[u]||" ",t.includes(u)?f[a[u]]=e[u]+1:n.includes(u)?f[a[u]]=e[u]+"_2":f[a[u]]=e[u]||" "}));var y=[c,l,f].map((function(e){return e.join(",")})).join("\n"),h=document.createElement("a");h.download="example.csv";var v=new Blob(["\ufeff",y],{type:"text/csv"}),m=new FileReader;m.readAsDataURL(v),m.onload=function(){h.href=m.result,h.click()}},handleUpdateMultipleMapping:function(e){_(PO(PO({},T),{},{mapping:e})),v(PO(PO({},h),{},{changes:PO(PO({},h.changes),{},{mapping:JSON.stringify(e)})}))}})))};function _O(){return _O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_O.apply(this,arguments)}function kO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function DO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DO(Object(n),!0).forEach((function(t){LO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function LO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return FO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}TO.propTypes={handleSuccessUpdateImporter:c.a.func,UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},TO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var RO=function(e){var t=e.UIComponent,n=BO(rn(),1)[0],r=BO(yn(),1)[0],o=BO(Object(i.useState)({loading:!1,changes:{separator:",",enclosure:'"',escape:"/",start_line:2},result:{error:!1}}),2),s=o[0],c=o[1],l=BO(Object(i.useState)({fileName:null,fileType:null,csvFile:null,importOptions:{}}),2),f=l[0],p=l[1],d=BO(Br(),2)[1].showToast,y=BO(Bn(),2)[1],h=function(){var e,t=(e=a.a.mark((function e(t){var o,i,u,l,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(Dr.Info,y("LOADING","Loading")),(o=new FormData).append("file",null==f?void 0:f.csvFile),o.append("import_options",JSON.stringify(null==f?void 0:f.importOptions)),e.prev=4,c(UO(UO({},s),{},{loading:!0})),i={method:"POST",headers:{Authorization:"Bearer ".concat(r.token)},body:o},e.next=9,fetch("".concat(n.root,"/importers/").concat(t,"/jobs"),i);case 9:return u=e.sent,e.next=12,u.json();case 12:l=e.sent,p=l.error,h=l.result,p?c(UO(UO({},s),{},{loading:!1,result:{error:!0,result:h}})):(d(Dr.Success,y("IMPORTER_JOB_SAVED","Importer Job Created")),c({loading:!1,changes:{},result:{error:!1,result:h}})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),c(UO(UO({},s),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 21:case"end":return e.stop()}}),e,null,[[4,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){kO(a,r,o,i,u,"next",e)}function u(e){kO(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,_O({},e,{formState:s,fileState:f,setFileState:p,handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=UO(UO({},n),{},LO({},e.name,e.value))})):n=LO({},e.target.name,e.target.value),p(UO(UO({},f),{},{importOptions:UO(UO({},f.importOptions),n)}))},handleUploadCsv:function(e){e&&p(UO(UO({},f),{},{fileName:e.name,fileType:e.type,csvFile:e}))},handleCreateImporterJob:h})))};function MO(){return MO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MO.apply(this,arguments)}function NO(e){return function(e){if(Array.isArray(e))return HO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||VO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zO(Object(n),!0).forEach((function(t){YO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function $O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){qO(a,r,o,i,u,"next",e)}function u(e){qO(a,r,o,i,u,"throw",e)}i(void 0)}))}}function JO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||VO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VO(e,t){if(e){if("string"==typeof e)return HO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HO(e,t):void 0}}function HO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}RO.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},RO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var WO=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=JO(rn(),1)[0],s=JO(yn(),1)[0].token,c=JO(Object(i.useState)({loading:!1,error:null,importers:[]}),2),l=c[0],f=c[1],p=JO(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),d=p[0],y=p[1],h=JO(Object(i.useState)({}),2),v=h[0],m=h[1],b=JO(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(){var e=$O(a.a.mark((function e(t,n){var r,i,u,c,p,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f(GO(GO({},l),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},!t){e.next=9;break}return e.next=6,fetch("".concat(o.root,"/importers?page=").concat(t||d.currentPage,"&page_size=").concat(n||d.pageSize),r);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,fetch("".concat(o.root,"/importers"),r);case 11:e.t0=e.sent;case 12:return i=e.t0,e.next=15,i.json();case 15:u=e.sent,c=u.result,p=u.pagination,f(GO(GO({},l),{},{loading:!1,importers:c})),h=0,p.current_page!==p.total_pages&&(v=p.total-l.importers.length,h=v<p.page_size?v:p.page_size),y(GO(GO({},d),{},{currentPage:p.current_page,totalPages:p.total_pages,totalItems:p.total,from:p.from,to:p.to,nextPageItems:h})),m(GO({},p)),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(0),"Cancel"!==e.t1.constructor.name&&f(GO(GO({},l),{},{loading:!1,error:[e.t1.message]}));case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=$O(a.a.mark((function e(t){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(GO(GO({},g),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/importers/").concat(t),n);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error||(u=l.importers.filter((function(e){return e.id!==t})),m(GO(GO({},v),{},{totalPages:(null==v?void 0:v.totalPages)-1,totalItems:(null==v?void 0:v.totalItems)-1})),f(GO(GO({},l),{},{importers:u}))),O(GO(GO({},g),{},{loading:!1,error:i.error?i.result:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O(GO(GO({},g),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,MO({},e,{actionStatus:g,importerList:l,getImporters:w,paginationProps:d,paginationDetail:v,handleDeleteImporter:j,handleSuccessAddImporter:function(e){f(GO(GO({},l),{},{importers:[].concat(NO(l.importers),[e])})),m(GO(GO({},v),{},{total:null!=v&&v.total?(null==v?void 0:v.total)+1:1}))},handleSuccessUpdateImporter:function(e){var t=l.importers.map((function(t){return t.id===e.id?e:t}));f(GO(GO({},l),{},{importers:t}))}})))};function KO(){return KO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KO.apply(this,arguments)}function XO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ow(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function ZO(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function QO(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ZO(a,r,o,i,u,"next",e)}function u(e){ZO(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ew(Object(n),!0).forEach((function(t){nw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ew(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ow(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ow(e,t){if(e){if("string"==typeof e)return aw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aw(e,t):void 0}}function aw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}WO.propTypes={UIComponent:c.a.elementType,slug:c.a.string,isInitialRender:c.a.bool},WO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var iw=function(e){var t,n=e.UIComponent,r=e.propsToFetch,o=rw(rn(),1)[0],s=rw(yn(),1)[0],c=s.token,l=s.loading,f=rw(tr(),1)[0].configs,p=rw(Bn(),2)[1],d=rw(Object(i.useState)({loading:!1,businesses:[],error:null}),2),y=d[0],h=d[1],v=rw(Object(i.useState)({loading:!1,data:[],error:null}),2),m=v[0],b=v[1],g=(null==f||null===(t=f.order_types_allowed)||void 0===t?void 0:t.value.split("|").map((function(e){return Number(e)})))||[],O=[{value:1,name:p("DELIVERY","Delivery"),enabled:!0},{value:2,name:p("PICKUP","Pickup"),enabled:!0},{value:3,name:p("EAT_IN","Eat in"),enabled:!0},{value:4,name:p("CURBSIDE","Curbside"),enabled:!0},{value:5,name:p("DRIVE_THRU","Drive thru"),enabled:!0}],w=rw(Object(i.useState)(O.filter((function(e){return null==g?void 0:g.includes(e.value)}))),2),j=w[0],S=w[1],E=rw(Object(i.useState)({loading:!1,invoice:null,error:null}),2),P=E[0],C=E[1],I=rw(Object(i.useState)({type:"charge",from:"",to:"",business:"",cancelled:!1,discounts:!1,notes:"",percentage_fee:0,fixed_fee:0,tax:0,misc_amount:0,misc_description:""}),2),x=I[0],A=I[1],T=function(){var e=QO(a.a.mark((function e(){var t,n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(tw(tw({},y),{},{loading:!0})),e.next=4,o.businesses().asDashboard().select(r).get();case 4:t=e.sent,n=t.content,i=n.error,u=n.result,s=n.pagination,h(tw(tw({},y),{},i?{loading:!1,error:u}:{loading:!1,businesses:u,pagination:s})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(tw(tw({},y),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=QO(a.a.mark((function e(){var t,n,r,i,u,s,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,b(tw(tw({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},n="".concat(o.root,"/paymethods"),e.next=8,fetch(n,t);case 8:return r=e.sent,e.next=11,r.json();case 11:i=e.sent,u=i.error,s=i.result,u?b(tw(tw({},m),{},{loading:!1,error:s})):(f=s.filter((function(e){return e.enabled})),b(tw(tw({},m),{},{loading:!1,data:f}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),b(tw(tw({},m),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=QO(a.a.mark((function e(){var t,n,r,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(tw(tw({},P),{},{loading:!0})),t=[{attribute:"business_id",value:x.business}],x.from&&t.push({attribute:"delivery_datetime",value:{condition:">=",value:"".concat(x.from," 00:00:00")}}),x.to&&t.push({attribute:"delivery_datetime",value:{condition:"<=",value:"".concat(x.to," 23:59:59")}}),e.next=7,o.orders().asDashboard().where(t).get();case 7:n=e.sent,r=n.content,i=r.error,u=r.result,s=r.pagination,i?C(tw(tw({},P),{},{loading:!1,error:u})):(c=D(u),C(tw(tw({},P),{},{loading:!1,invoice:c,pagination:s}))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),C(tw(tw({},P),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t,n=[],r=XO(null==m?void 0:m.data);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.enabled&&n.push(o.id)}}catch(e){r.e(e)}finally{r.f()}var a=[];if(j){var i,u=XO(j);try{for(u.s();!(i=u.n()).done;){var s=i.value;s.enabled&&a.push(s.value)}}catch(e){u.e(e)}finally{u.f()}}var c=x.from.split("-");c=1===c.length?null:new Date(c[0],c[1]-1,c[2],0,0,0,0);var l=x.to.split("-");l=1===l.length?null:new Date(l[0],l[1]-1,l[2],0,0,0,0);var f=e.filter((function(e){var t=!0,r=e.delivery_datetime.split(" ");return r=new Date(r[0].split("-")[0],r[0].split("-")[1]-1,r[0].split("-")[2],0,0,0,0),(-1===n.indexOf(e.paymethod_id)||-1===a.indexOf(e.delivery_type)||-1===[0,1,7,8,9,11,15].indexOf(e.status)&&!x.cancelled)&&(t=!1),(c&&c>r||l&&l<r)&&(t=!1),t})),p={from:x.from,to:x.to,type:x.type,orders:f,percentage_fee:x.percentage_fee,fixed_fee:x.fixed_fee,tax:x.tax,misc_amount:("payout"!==x.type?1:-1)*x.misc_amount,misc_description:x.misc_description,inlcude_discounts:x.discounts,tax_products:"payout"!==x.type?0:null==f?void 0:f.reduce((function(e,t){return 1===t.tax_type?e:e+F(t)}),0),discounts:x.discounts?null==f?void 0:f.reduce((function(e,t){return e-R(t)}),0):0,orders_subtotal:null==f?void 0:f.reduce((function(e,t){return e+B(t)}),0),orders_total:null==f?void 0:f.reduce((function(e,t){return e+N(t)}),0),notes:x.notes.replace(/\n/g,"<br>")};p.percentage_fee_total=("payout"!==x.type?1:-1)*(p.orders_subtotal+p.discounts)*x.percentage_fee/100,p.fixed_fee_total=("payout"!==x.type?1:-1)*f.length*x.fixed_fee;var d=parseFloat(p.percentage_fee_total)+parseFloat(p.fixed_fee_total)+parseFloat(p.misc_amount)+parseFloat(p.discounts)+parseFloat(p.tax_products)+("payout"!==x.type?0:parseFloat(p.orders_subtotal));return p.subtotal=d,p.tax_total=("payout"!==x.type?1:-1)*d*parseFloat(x.tax)/100,p.total=d+p.tax_total,y.businesses.forEach((function(e){e.id===x.business&&(p.business=e)})),p},U=function(e,t){var n=1,r=t.price;return e.allow_suboptionQuantity&&t.quantity&&(n=t.quantity),e.with_half_option&&t.position&&"whole"!==t.position&&(r=t.half_price),r*n},L=function(e){var t=0;if(e.options)for(var n=0;n<e.options.length;n++){var r=e.options[n];if(r.suboptions)for(var o=0;o<r.suboptions.length;o++){var a=r.suboptions[o];t+=U(r,a)}}return(t+e.price)*e.quantity},B=function(e){if(e.summary){var t,n=!0;if(null!=f&&f.project_fix_order_summary)n="1"===(null==f||null===(t=f.project_fix_order_summary)||void 0===t?void 0:t.value);return 1!==e.tax_type||n?e.summary.subtotal:e.summary.subtotal+e.summary.tax}for(var r=0,o=0;o<e.products.length;o++)r+=L(e.products[o]);return M(r)},F=function(e){if(e.summary)return e.summary.tax;var t=2===e.tax_type?e.tax*(B(e)-e.discount)/100:0;return M(t)},R=function(e){return e.summary?e.summary.discount:M(e.discount)},M=function(e){var t,n=Math.pow(10,null==f||null===(t=f.format_number_decimal_length)||void 0===t?void 0:t.value);return Math.round(e*n)/n},N=function(e){if(e.summary)return e.summary.total;var t=B(e),n=F(e),r=z(e),o="2"===e.delivery_type?t+n+r-e.discount:t+n+e.delivery_zone_price+G(e)+r-e.discount;return M(o)},z=function(e){if(e.summary)return e.summary.service_fee;var t=(B(e)-e.discount)*e.service_fee/100;return M(t)},G=function(e){if(e.summary)return e.summary.driver_tip;var t=(B(e)-e.discount)*e.driver_tip/100;return M(t)};return Object(i.useEffect)((function(){T(),_()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,KO({},e,{businessList:y,invocing:x,payMethodsList:m,orderTypes:j,exportInvoiceList:P,handleChangeOrderTypes:S,handleChangeInvocing:A,handleChangePayMethods:function(e){b(tw(tw({},m),{},{data:e}))},getOrders:k,getSubtotal:B,getTotal:N})))};function uw(){return uw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uw.apply(this,arguments)}function sw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cw(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sw(a,r,o,i,u,"next",e)}function u(e){sw(a,r,o,i,u,"throw",e)}i(void 0)}))}}function lw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lw(Object(n),!0).forEach((function(t){pw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||yw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yw(e,t){if(e){if("string"==typeof e)return hw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hw(e,t):void 0}}function hw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}iw.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},iw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var vw=function(e){var t=e.UIComponent,n=e.propsToFetch,r=dw(rn(),1)[0],o=dw(yn(),1)[0],s=o.token,c=o.loading,l=dw(tr(),1)[0].configs,f=dw(Object(i.useState)({loading:!1,drivers:[],error:null}),2),p=f[0],d=f[1],y=dw(Object(i.useState)({loading:!1,data:[],error:null}),2),h=y[0],v=y[1],m=dw(Object(i.useState)({loading:!1,invoice:null,error:null}),2),b=m[0],g=m[1],O=dw(Object(i.useState)({from:"",to:"",driver:"",cancelled:!1,notes:"",percentage_fee:0,fixed_fee:0,percentage_delivery_price:0,percentage_driver_tip:0,tax:0,misc_amount:0,misc_description:""}),2),w=O[0],j=O[1],S=function(){var e=cw(a.a.mark((function e(){var t,o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(fw(fw({},p),{},{loading:!0})),t=[{attribute:"level",value:"4"}],e.next=5,r.users().asDashboard().select(n).where(t).get();case 5:o=e.sent,i=o.content,u=i.error,s=i.result,c=i.pagination,d(fw(fw({},p),{},u?{loading:!1,error:s}:{loading:!1,drivers:s,pagination:c})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(fw(fw({},p),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=cw(a.a.mark((function e(){var t,n,o,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(fw(fw({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},n="".concat(r.root,"/paymethods"),e.next=8,fetch(n,t);case 8:return o=e.sent,e.next=11,o.json();case 11:i=e.sent,u=i.error,l=i.result,u?v(fw(fw({},h),{},{loading:!1,error:l})):(f=l.filter((function(e){return e.enabled})),v(fw(fw({},h),{},{loading:!1,data:f}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),v(fw(fw({},h),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=cw(a.a.mark((function e(){var t,n,o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(fw(fw({},b),{},{loading:!0})),t=[{attribute:"driver_id",value:w.driver}],w.from&&t.push({attribute:"delivery_datetime",value:{condition:">=",value:"".concat(w.from," 00:00:00")}}),w.to&&t.push({attribute:"delivery_datetime",value:{condition:"<=",value:"".concat(w.to," 23:59:59")}}),e.next=7,r.orders().asDashboard().where(t).get();case 7:n=e.sent,o=n.content,i=o.error,u=o.result,s=o.pagination,i?g(fw(fw({},b),{},{loading:!1,error:u})):(c=C(u),g(fw(fw({},b),{},{loading:!1,invoice:c,pagination:s}))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),g(fw(fw({},b),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),C=function(e){var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=yw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(null==h?void 0:h.data);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.enabled&&n.push(o.id)}}catch(e){r.e(e)}finally{r.f()}var a=w.from.split("-");a=1===a.length?null:new Date(a[0],a[1]-1,a[2],0,0,0,0);var i=w.to.split("-");i=1===i.length?null:new Date(i[0],i[1]-1,i[2],0,0,0,0);var u=e.filter((function(e){var t=!0,r=e.delivery_datetime.split(" ");return r=new Date(r[0].split("-")[0],r[0].split("-")[1]-1,r[0].split("-")[2],0,0,0,0),(-1===n.indexOf(e.paymethod_id)||-1===[1,2,5,6,10,11,12].indexOf(e.status)||[2,5,6,10,12].indexOf(e.status)>-1&&!w.cancelled)&&(t=!1),(a&&a>r||i&&i<r)&&(t=!1),t})),s={from:w.from,to:w.to,orders:u,percentage_fee:w.percentage_fee,fixed_fee:w.fixed_fee,tax:w.tax,misc_amount:w.misc_amount,misc_description:w.misc_description,orders_subtotal:null==u?void 0:u.reduce((function(e,t){return e+A(t)}),0),orders_total:null==u?void 0:u.reduce((function(e,t){return e+k(t)}),0),discounts:null==u?void 0:u.reduce((function(e,t){return e-T(t)}),0),percentage_delivery_price:w.percentage_delivery_price,percentage_delivery_price_total:(null==u?void 0:u.reduce((function(e,t){return e+t.delivery_zone_price}),0))*w.percentage_delivery_price/100,percentage_driver_tip:w.percentage_driver_tip,percentage_driver_tip_total:(null==u?void 0:u.reduce((function(e,t){return e+U(t)}),0))*w.percentage_driver_tip/100,notes:w.notes.replace(/\n/g,"<br>")};s.percentage_fee_total=(s.orders_subtotal+s.discounts)*w.percentage_fee/100,s.fixed_fee_total=u.length*w.fixed_fee;var c=parseFloat(s.percentage_fee_total)+parseFloat(s.fixed_fee_total)+parseFloat(s.misc_amount)+parseFloat(s.percentage_delivery_price_total)+parseFloat(s.percentage_driver_tip_total);return s.subtotal=c,s.tax_total=c*parseFloat(w.tax)/100,s.total=c+s.tax_total,p.drivers.forEach((function(e){e.id===w.driver&&(s.driver=e)})),s},I=function(e,t){var n=1,r=t.price;return e.allow_suboptionQuantity&&t.quantity&&(n=t.quantity),e.with_half_option&&t.position&&"whole"!==t.position&&(r=t.half_price),r*n},x=function(e){var t=0;if(e.options)for(var n=0;n<e.options.length;n++){var r=e.options[n];if(r.suboptions)for(var o=0;o<r.suboptions.length;o++){var a=r.suboptions[o];t+=I(r,a)}}return(t+e.price)*e.quantity},A=function(e){if(e.summary){var t,n=!0;if(null!=l&&l.project_fix_order_summary)n="1"===(null==l||null===(t=l.project_fix_order_summary)||void 0===t?void 0:t.value);return 1!==e.tax_type||n?e.summary.subtotal:e.summary.subtotal+e.summary.tax}for(var r=0,o=0;o<e.products.length;o++)r+=x(e.products[o]);return _(r)},T=function(e){return e.summary?e.summary.discount:_(e.discount)},_=function(e){var t,n=Math.pow(10,null==l||null===(t=l.format_number_decimal_length)||void 0===t?void 0:t.value);return Math.round(e*n)/n},k=function(e){if(e.summary)return e.summary.total;var t=A(e),n=function(e){if(e.summary)return e.summary.tax;var t=2===e.tax_type?e.tax*(A(e)-e.discount)/100:0;return _(t)}(e),r=D(e),o="2"===e.delivery_type?t+n+r-e.discount:t+n+e.delivery_zone_price+U(e)+r-e.discount;return _(o)},D=function(e){if(e.summary)return e.summary.service_fee;var t=(A(e)-e.discount)*e.service_fee/100;return _(t)},U=function(e){if(e.summary)return e.summary.driver_tip;var t=(A(e)-e.discount)*e.driver_tip/100;return _(t)};return Object(i.useEffect)((function(){S(),E()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,uw({},e,{driverList:p,invocing:w,payMethodsList:h,exportInvoiceList:b,handleChangeInvocing:j,handleChangePayMethods:function(e){v(fw(fw({},h),{},{data:e}))},getOrders:P,getSubtotal:A,getTotal:k})))};function mw(){return mw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mw.apply(this,arguments)}function bw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function gw(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){bw(a,r,o,i,u,"next",e)}function u(e){bw(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ww(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ow(Object(n),!0).forEach((function(t){jw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ow(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ew(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ew(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ew(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vw.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var Pw=function(e){var t=e.UIComponent,n=Sw(rn(),1)[0],r=Sw(Bn(),2)[1],o=Sw(yn(),1)[0].loading,s=Sw(Br(),2)[1].showToast,c=Sw(Object(i.useState)({loading:!1,translations:[],result:{error:null}}),2),l=c[0],f=c[1],p=Sw(Object(i.useState)(null),2),d=p[0],y=p[1],h=Sw(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),v=h[0],m=h[1],b=function(e){f(ww(ww({},l),{},{translations:e}))},g=function(){var e=gw(a.a.mark((function e(){var t,o,i,u,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(ww(ww({},v),{},{loading:!0})),s(Dr.Info,r("LOADING","Loading")),u={key:null==v||null===(t=v.changes)||void 0===t?void 0:t.key,text:null==v||null===(o=v.changes)||void 0===o?void 0:o.text},e.next=6,n.translations(null==v||null===(i=v.changes)||void 0===i?void 0:i.id).save(u);case 6:c=e.sent,l=c.content,f=l.error,p=l.result,f?m(ww(ww({},v),{},{loading:!1,error:p})):(m(ww(ww({},v),{},{loading:!1,changes:{}})),s(Dr.Success,r("WEB_APP_LANG_SAVED","Language change saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(ww(ww({},v),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=gw(a.a.mark((function e(){var t,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(ww(ww({},l),{},{loading:!0})),e.next=6,n.translations().get();case 6:t=e.sent,r=t.content,i=r.error,u=r.result,f(ww(ww({},l),{},i?{loading:!1,error:u}:{loading:!1,translations:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),f(ww(ww({},l),{},{loading:!1,error:e.t0}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){O()}),[]),Object(i.useEffect)((function(){Object.keys(null==v?void 0:v.changes).length>0&&g()}),[null==v?void 0:v.changes]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,mw({},e,{translationList:l,handleUpdateTranslationList:b,textEditState:v.changes,searchValue:d,onSearch:y,handleChangeText:function(e,t,n){var r=null==l?void 0:l.translations.map((function(e){return e.key===t?ww(ww({},e),{},{text:n}):e}));d&&y(t),b&&b(r),m(ww(ww({},v),{},{changes:{id:e,key:t,text:n}}))},getTranslations:O})))};function Cw(){return Cw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cw.apply(this,arguments)}function Iw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iw(Object(n),!0).forEach((function(t){Aw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Aw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Pw.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Pw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var kw=function(e){var t,n=e.currentLanguage,r=e.languages,o=e.UIComponent,a=Tw(Object(i.useState)({loading:!r,languages:r,error:null}),2),s=a[0],c=a[1],l=Tw(Bn(),3),f=l[0],p=l[2].setLanguage,d=Tw(Object(i.useState)(null),2),y=d[0],h=d[1],v={};return Object(i.useEffect)((function(){if(!f.loading){if((null==r?void 0:r.length)>0)c(xw(xw({},s),{},{loading:!1,languages:r}));else{var e=f.languageList.filter((function(e){return e.enabled}));c(xw(xw({},s),{},{loading:!1,languages:e}))}return function(){v.languages&&v.languages.cancel()}}}),[f]),Object(i.useEffect)((function(){var e;if(n){var t=r.find((function(e){return e.code===n}));p(t),h(t)}else if(null==f||null===(e=f.language)||void 0===e||!e.code||null==y||!y.code){var o,a,i=null!=f&&null!==(o=f.language)&&void 0!==o&&o.code?null==f?void 0:f.language:null==s||null===(a=s.languages)||void 0===a?void 0:a.find((function(e){return e.default}));i&&(p(i),h(i))}}),[r,s]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,Cw({},e,{currentLanguage:e.handlerCustomChangeLanguage?null==y?void 0:y.code:null==f||null===(t=f.language)||void 0===t?void 0:t.code,languagesState:s,handleChangeLanguage:function(t){var n=s.languages.find((function(e){return e.code===t}));if(e.handlerCustomChangeLanguage)return e.handlerCustomChangeLanguage(n),void h(n);e.onChangeLanguage&&e.onChangeLanguage(n),p(n)}})))};function Dw(){return Dw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dw.apply(this,arguments)}function Uw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uw(Object(n),!0).forEach((function(t){Bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Rw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}kw.propTypes={UIComponent:c.a.elementType,currentLanguage:c.a.string,languages:c.a.arrayOf(c.a.object),onChangeLanguage:c.a.func,handlerCustomChangeLanguage:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},kw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Nw=function(e){var t=e.UIComponent,n=Rw(rn(),1)[0],r=Rw(Br(),2)[1].showToast,o=Rw(Bn(),3),s=o[0],c=o[1],l=o[2].updateLanguageListState,f=Rw(Object(i.useState)({fields:[],loading:!1,error:null}),2),p=f[0],d=f[1],y=Rw(Object(i.useState)({loading:!1,error:null}),2),h=y[0],v=y[1],m=function(){var e,t=(e=a.a.mark((function e(t,o){var i,u,s,f,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(Dr.Info,c("LOADING","Loading")),v(Lw(Lw({},h),{},{loading:!0})),e.next=5,n.languages(t).save(o);case 5:i=e.sent,u=i.content,s=u.error,f=u.result,s?v({loading:!1,error:f}):(v({loading:!1,error:null}),r(Dr.Success,c("WEB_APP_LANG_SAVED","Language change saved")),y=p.fields.filter((function(e){return e.id===t&&Object.assign(e,f),!0})),d(Lw(Lw({},p),{},{fields:y})),l(f)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Fw(a,r,o,i,u,"next",e)}function u(e){Fw(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){s.loading||d(Lw(Lw({},p),{},{loading:!1,fields:s.languageList}))}),[s.languageList]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Dw({},e,{languageFiledsState:p,handleChangeFieldSetting:m})))};function zw(){return zw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zw.apply(this,arguments)}function Gw(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Hw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function Yw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function qw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qw(Object(n),!0).forEach((function(t){Jw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Hw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hw(e,t){if(e){if("string"==typeof e)return Ww(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ww(e,t):void 0}}function Ww(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Nw.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Nw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Kw=function(e){var t=e.UIComponent,n=e.translationList,r=e.handleUpdateTranslationList,o=e.getTranslations,s=Vw(rn(),1)[0],c=Vw(yn(),1)[0],l=c.token,f=c.loading,p=Vw(Bn(),2)[1],d=Vw(Br(),2)[1].showToast,y=Vw(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),h=y[0],v=y[1],m=Vw(Object(i.useState)({row:-1,col:-1}),2),b=m[0],g=m[1],O=Vw(Object(i.useState)(!1),2),w=O[0],j=O[1],S=function(){var e,t=(e=a.a.mark((function e(t,i,u){var c,y,m,b,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v($w($w({},h),{},{loading:!0})),d(Dr.Info,p("LOADING","Loading")),c={method:i?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({translations:JSON.stringify(t)})},y="".concat(s.root,"/bulks/translations"),e.next=9,fetch(y,c);case 9:return m=e.sent,e.next=12,m.json();case 12:b=e.sent,g=b.error,O=b.result,g?v($w($w({},h),{},{loading:!1,result:{error:!0,result:O}})):(v($w($w({},h),{},{loading:!1,result:{error:!1,result:O}})),i?o():(w=null==n?void 0:n.translations.map((function(e){var n,r=Gw(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.id===e.id)return $w($w({},e),{},{key:o.key,text:o.text})}}catch(e){r.e(e)}finally{r.f()}return e})),r(w)),d(Dr.Success,i?p("WEB_APP_LANG_ADDED","Language item added"):p("WEB_APP_LANG_SAVED","Language change saved"))),e.next=22;break;case 18:if(e.prev=18,e.t0=e.catch(2),v($w($w({},h),{},{result:{error:!0,result:e.t0.message},loading:!1})),i)for(j=t.length-1;j>=0;j--)u.alter("remove_row",t[j].row);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Yw(a,r,o,i,u,"next",e)}function u(e){Yw(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,zw({},e,{creationFormState:h,handleItemChange:function(e,t,n){if(w)j(!1);else{e=e||[];for(var r=[],o=[],a=[],i=[],u=0;u<e.length;u++){var s={key:!1,text:!1};if(e[u][2]!==e[u][3]){for(var c=!0,l=0;l<r.length;l++)if(r[l]===e[u][0]){c=!1;break}if(c){r.push(e[u][0]);var f=n.getSourceDataAtRow(e[u][0]);if(n.validateRows(r,(function(e){})),f.key||(s.key=!0,-1===i.indexOf(p("KEY_REQUIRED"))&&i.push(p("KEY_REQUIRED"))),f.text||(s.text=!0,-1===i.indexOf(p("TEXT_REQUIRED"))&&i.push(p("TEXT_REQUIRED"))),f.id){if(s.text||s.text)continue;a.push(f)}else{if(s.key||s.text)continue;f.row=e[u][0],o.push(f)}}}}i.length>0&&v($w($w({},h),{},{result:{error:!0,result:i}})),a.length>0&&S(a,!1,n),o.length>0&&S(o,!0,n)}},handleAfterSectionEnd:function(e,t,n,r,o){b.row===e&&b.col===t||e!==n||t!==r||(g({row:e,col:t}),o.deselectCell(),o.selectCell(e,t))},handleoutsideClickDeselects:function(){return g({row:-1,col:-1}),!1}})))};function Xw(){return Xw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xw.apply(this,arguments)}function Zw(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Qw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ej(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qw(Object(n),!0).forEach((function(t){tj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Kw.propTypes={UIComponent:c.a.elementType,translationList:c.a.object,handleUpdateTranslationList:c.a.func,getTranslations:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Kw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var oj=function(e){var t=e.UIComponent,n=e.getTranslations,r=nj(rn(),1)[0],o=nj(Br(),2)[1].showToast,s=nj(Bn(),2)[1],c=nj(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(ej(ej({},l),{},{loading:!0})),o(Dr.Info,s("LOADING","Loading")),e.next=5,r.translations().save(null==l?void 0:l.changes);case 5:t=e.sent,i=t.content,u=i.error,c=i.result,u?f(ej(ej({},l),{},{loading:!1,result:{error:!0,result:c}})):(f(ej(ej({},l),{},{loading:!1,changes:{},result:{error:!1,result:c}})),n&&n(),o(Dr.Success,s("WEB_APP_LANG_ADDED","Language item added"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(ej(ej({},l),{},{loading:!1,result:{error:!0,result:e.t0}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Zw(a,r,o,i,u,"next",e)}function u(e){Zw(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Xw({},e,{creationFormState:l,handleChangeInput:function(e,t){f(ej(ej({},l),{},{changes:ej(ej({},null==l?void 0:l.changes),{},tj({},e,t.target.value))}))},handleUpdateClick:function(){p()}})))};function aj(){return aj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aj.apply(this,arguments)}function ij(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ij(Object(n),!0).forEach((function(t){sj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ij(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function lj(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){cj(a,r,o,i,u,"next",e)}function u(e){cj(a,r,o,i,u,"throw",e)}i(void 0)}))}}function fj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}oj.propTypes={UIComponent:c.a.elementType,getTranslations:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},oj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dj=function(e){var t=e.UIComponent,n=e.handleButtonLoginClick,r=e.handleSuccessLogin,o=e.useLoginByEmail,s=e.useLoginByCellphone,c=e.useDefualtSessionManager,l=e.urlToRedirect,f=e.allowedLevels,p=fj(rn(),1)[0],d=e.defaultLoginTab,y=fj(Object(i.useState)({loading:!1,result:{error:!1}}),2),h=y[0],v=y[1],m=fj(Object(i.useState)({email:"",cellphone:"",password:""}),2),b=m[0],g=m[1],O=fj(Object(i.useState)({loading:!1,result:{error:!1}}),2),w=O[0],j=O[1],S=fj(Object(i.useState)({loading:!1,result:{error:!1}}),2),E=S[0],P=S[1],C=fj(zn(),1)[0],I=fj(Bn(),2)[1],x=fj(tr(),1)[0].configs,A=fj(Object(i.useState)(null),2),T=A[0],_=A[1],k=fj(Object(i.useState)(!1),2),D=k[0],U=k[1];o||s?"email"===d&&!o&&s?d="cellphone":"cellphone"===d&&!s&&o&&(d="email"):d="none";var L=fj(Object(i.useState)(d||(s&&!o?"cellphone":"email")),2),B=L[0],F=L[1],R=fj(yn(),2)[1],M=R.login,N=R.logout,z=function(){var e=lj(a.a.mark((function e(t){var n,o,i,u,s,d,y,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,sj(n={},B,t&&t[B]||b[B]),sj(n,"password",t&&(null==t?void 0:t.password)||b.password),o=n,!D){e.next=9;break}if(null!==T){e.next=8;break}return v({result:{error:!0,result:I("RECAPTCHA_VALIDATION_IS_REQUIRED","The captcha validation is required")},loading:!1}),e.abrupt("return");case 8:o.verification_code=T;case 9:return v(uj(uj({},h),{},{loading:!0})),e.next=12,p.users().auth(o);case 12:if(i=e.sent,u=i.content,s=u.error,d=u.result,D&&(window.grecaptcha.reset(),_(null)),s){e.next=39;break}if(!c){e.next=36;break}if(!(f&&(null==f?void 0:f.length)>0)){e.next=35;break}if(y=d.level,m=d.session.access_token,f.includes(y)){e.next=35;break}return e.prev=22,e.next=25,p.setAccessToken(m).users().logout();case 25:g=e.sent,g.content.error||N(),v({result:{error:!0,result:["YOU_DO_NOT_HAVE_PERMISSION"]},loading:!1}),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(22),v({result:{error:!0,result:e.t0.message},loading:!1});case 34:return e.abrupt("return");case 35:M({user:d,token:d.session.access_token,project:null==p?void 0:p.project});case 36:C.emit("userLogin",d),r&&r(d),l&&(window.location.href="".concat(window.location.origin).concat(l));case 39:v({result:{error:s,result:d},loading:!1}),e.next=45;break;case 42:e.prev=42,e.t1=e.catch(0),v({result:{error:!0,result:e.t1.message},loading:!1});case 45:case"end":return e.stop()}}),e,null,[[0,42],[22,31]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=lj(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(uj(uj({},w),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/auth/sms/twilio/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cellphone:t.cellphone,country_phone_code:"+".concat(t.country_phone_code)})});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,j(uj(uj({},w),{},{loading:!1,result:r})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),j(uj(uj({},w),{},{loading:!1,result:{error:e.t0.message}}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=lj(a.a.mark((function e(t){var n,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(uj(uj({},E),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/auth/sms/twilio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return o=e.sent,e.next=7,o.json();case 7:null!=(i=e.sent)&&i.error||null==i||null===(n=i.result)||void 0===n||!n.id||(M({user:null==i?void 0:i.result,token:null==i||null===(u=i.result)||void 0===u||null===(s=u.session)||void 0===s?void 0:s.access_token,project:null==p?void 0:p.project}),r&&r(null==i?void 0:i.result)),P(uj(uj({},E),{},{loading:!1,result:i})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),P(uj(uj({},E),{},{loading:!1,result:{error:e.t0.message}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;U((null==p?void 0:p.project)&&x&&Object.keys(x).length>0&&"1"===(null==x||null===(e=x.security_recaptcha_auth)||void 0===e?void 0:e.value))}),[x,null==p?void 0:p.project]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,aj({},e,{formState:h,loginTab:B,credentials:b,verifyPhoneState:w,checkPhoneCodeState:E,setCheckPhoneCodeState:function(e){P(e||{loading:!1,result:{error:!1}})},handleChangeInput:function(e){g(uj(uj({},b),{},sj({},e.target.name,e.target.value)))},handleButtonLoginClick:n||z,handleChangeTab:function(e){F(e)},handleSendVerifyCode:G,handleCheckPhoneCode:Y,isReCaptchaEnable:D,handleReCaptcha:_})))};function yj(){return yj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yj.apply(this,arguments)}function hj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hj(Object(n),!0).forEach((function(t){mj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function gj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}dj.propTypes={UIComponent:c.a.elementType,handleButtonLoginClick:c.a.func,handleSuccessLogin:c.a.func,useDefualtSessionManager:c.a.bool,useLoginByEmail:c.a.bool,useLoginByCellphone:c.a.bool,defaultLoginTab:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToSignup:c.a.string,linkToForgetPassword:c.a.string,elementLinkToSignup:c.a.element,elementLinkToForgotPassword:c.a.element},dj.defaultProps={defaultLoginTab:"email",useLoginByEmail:!0,useDefualtSessionManager:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var wj=function(e){var t=e.orderId,n=e.UIComponent,r=gj(rn(),1)[0],o=gj(yn(),1)[0],s=gj(Object(i.useState)({data:[],loading:!0,error:null}),2),c=s[0],l=s[1],f=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(vj(vj({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/logistic/orders/").concat(t,"/information"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,i.ok?l({error:null,loading:!1,data:s}):l(vj(vj({},c),{},{loading:!1,error:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(vj(vj({},c),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){bj(a,r,o,i,u,"next",e)}function u(e){bj(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){f()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,yj({},e,{logisticInformation:c,getLogistics:f})))};function jj(){return jj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jj.apply(this,arguments)}function Sj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ej(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sj(Object(n),!0).forEach((function(t){Pj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Ij(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}wj.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Aj=function(e){var t=e.orderId,n=e.UIComponent,r=Ij(rn(),1)[0],o=Ij(yn(),1)[0],s=Ij(Bn(),2)[1],c=Ij(Pr(),1)[0],l=c.getOrderState,f=c.parseDistance,p=Ij(Object(i.useState)({logs:[],loading:!0,error:null}),2),d=p[0],y=p[1],h=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Ej(Ej({},d),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/orders/").concat(t,"/logs?order_id=").concat(t),n);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,y(Ej(Ej({},d),{},{loading:!1,logs:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(Ej(Ej({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Cj(a,r,o,i,u,"next",e)}function u(e){Cj(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){h()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,jj({},e,{logisticList:d,parseLog:function(e){var t=function(e,t){var n=s("LOG_"+e.toUpperCase());for(var r in t){var o=t[r];"distance"===r||"coverage"===r?o=f(t[r]):"with_orders"===r?(o=t[r].join(", "),r="orders"):"status"===r&&(o=l(t[r])),n=n.replace("_"+r+"_",o)}return n},n=e.data?e.data:{};return-1!==["logistic_driver_found","logistic_driver_found_group","logistic_driver_not_found","logistic_driver_not_found_group","logistic_driver_found_in_coverage","logistic_driver_found_in_coverage_group","logistic_driver_found_out_coverage","logistic_driver_found_out_coverage_group","logistic_driver_autoaccepted","logistic_driver_autoaccepted_group","logistic_request_autorejected","logistic_request_autorejected_group","logistic_assign_request_accepted","logistic_assign_request_accepted_group","logistic_assign_request_rejected","logistic_assign_request_rejected_group","logistic_manual_driver_assignment","logistic_manual_driver_unassignment","logistic_driver_autoassigned_group"].indexOf(e.event)||e.driver_id?(e.driver&&(n.driver=e.driver.name+(e.driver.lastname?e.driver.lastname:"")),t(e.event,n)):e.driver_company_id||e.external_driver_id?(e.driver_company&&(n.driver_company=e.driver_company.name),e.external_driver&&(n.external_driver=e.external_driver.name),t(e.event,n)):-1!==["logistic_started","logistic_finished","logistic_expired","logistic_resolved","logistic_reset","logistic_grouped","logistic_cancelled","logistic_not_grouped","logistic_order_queued","logistic_order_out_queued","logistic_driver_company_not_found"].indexOf(e.event)?t(e.event,n):s(e.event.toUpperCase())+"<br />"+JSON.stringify(e.data)}})))};function Tj(){return Tj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tj.apply(this,arguments)}function _j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_j(Object(n),!0).forEach((function(t){Dj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Lj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Aj.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Aj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Fj=function(e){var t,n=e.UIComponent,r=e.handleSuccessLogout,o=e.token,s=e.isNative,c=e.useDefualtSessionManager,l=Lj(rn(),1)[0],f=Lj(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],y=Lj(yn(),2),h=y[0],v=y[1].logout,m=Lj(tr(),1)[0].configs;Object(i.useEffect)((function(){var e;if(null!=m&&null!==(e=m.facebook_id)&&void 0!==e&&e.value&&!s){if(window.fbAsyncInit=function(){var e;window.FB.init({appId:null==m||null===(e=m.facebook_id)||void 0===e?void 0:e.value,cookie:!0,xfbml:!1,version:"v7.0",status:!0})},window.document.getElementById("facebook-jssdk"))return;var t=window.document.createElement("script"),n=window.document.getElementsByTagName("script")[0];t.id="facebook-jssdk",t.async=!0,t.defer=!0,t.src="https://connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(t,n)}}),[null==m||null===(t=m.facebook_id)||void 0===t?void 0:t.value]);var b=function(){var e,t=(e=a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(kj(kj({},p),{},{loading:!0})),t=o||h.token,e.next=5,l.setAccessToken(t).users().logout();case 5:n=e.sent,d({result:n.content,loading:!1}),n.content.error||(c&&v(),r&&r()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Uj(a,r,o,i,u,"next",e)}function u(e){Uj(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Tj({},e,{formState:p,handleLogoutClick:b})))};function Rj(){return Rj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rj.apply(this,arguments)}function Mj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Nj(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Mj(a,r,o,i,u,"next",e)}function u(e){Mj(a,r,o,i,u,"throw",e)}i(void 0)}))}}function zj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zj(Object(n),!0).forEach((function(t){Yj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Fj.propTypes={UIComponent:c.a.elementType,handleSuccessLogout:c.a.func,handleErrorLogout:c.a.func,token:c.a.string,useDefualtSessionManager:c.a.bool},Fj.defaultProps={useDefualtSessionManager:!0};var Jj=function(e){var t=e.UIComponent,n=e.walletData,r=e.handleUpdateWalletBusiness,o=e.handleUpdateBusinessList,s=e.handleUpdatePointsWallet,c=e.isBusiness,l=e.selectedBusinessList,f=qj(rn(),1)[0],p=qj(yn(),1)[0].token,d=qj(Br(),2)[1].showToast,y=qj(Bn(),2)[1],h=qj(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=h[0],m=h[1],b=function(){var e=Nj(a.a.mark((function e(t,i){var u,l,h,b,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),m(Gj(Gj({},v),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(i)},l=c?"".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.loyalty_plan_id,"/businesses/").concat(t):"".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.id),e.next=7,fetch(l,u);case 7:return h=e.sent,e.next=10,h.json();case 10:b=e.sent,g=b.error,O=b.result,g?m(Gj(Gj({},v),{},{loading:!1,error:O})):(d(Dr.Success,y("POINTS_WALLET_UPDATED","Points wallet updated")),m(Gj(Gj({},v),{},{loading:!1,error:null,changes:{}})),r&&r(O),o&&o(i),!c&&s&&s(O)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),m(Gj(Gj({},v),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Nj(a.a.mark((function e(t){var n,r,o,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),m(Gj(Gj({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(t)},r="".concat(f.root,"/loyalty_plans"),e.next=7,fetch(r,n);case 7:return o=e.sent,e.next=10,o.json();case 10:i=e.sent,u=i.error,l=i.result,u?m(Gj(Gj({},v),{},{loading:!1,error:l})):(d(Dr.Success,y("POINTS_WALLET_CREATED","Points wallet created")),m(Gj(Gj({},v),{},{loading:!1,error:null,changes:{}})),!c&&s&&s(l)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),m(Gj(Gj({},v),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m(Gj(Gj({},v),{},{changes:{}}))}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Rj({},e,{formState:v,setFormState:m,handleClickSubmit:function(){if(0!==Object.keys(null==v?void 0:v.changes).length)if(n)b(null==n?void 0:n.id,null==v?void 0:v.changes);else{var e=l.filter((function(e){return e.wallet_enabled})).map((function(e){return{id:e.id,redeems:(null==e?void 0:e.redeems)||!1,accumulates:(null==e?void 0:e.accumulates)||!1}})),t=Gj({name:"Loyalty Point Plan",type:"credit_point",redemption_rate:null,accumulation_rate:null,businesses:JSON.stringify(e)},null==v?void 0:v.changes);g(t)}},handleChangeInput:function(e){var t=e.target.value;m(Gj(Gj({},v),{},{changes:Gj(Gj({},v.changes),{},Yj({},e.target.name,t))}))},handleChangeItem:function(e){m(Gj(Gj({},v),{},{changes:Gj(Gj({},v.changes),e)}))}})))};function Vj(){return Vj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vj.apply(this,arguments)}function Hj(e){return function(e){if(Array.isArray(e))return nS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wj(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Kj(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Wj(a,r,o,i,u,"next",e)}function u(e){Wj(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Xj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xj(Object(n),!0).forEach((function(t){Qj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||tS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tS(e,t){if(e){if("string"==typeof e)return nS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nS(e,t):void 0}}function nS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Jj.propTypes={UIComponent:c.a.elementType,walletData:c.a.object,handleUpdateWalletBusiness:c.a.func,handleUpdateBusinessList:c.a.func,handleUpdatePointsWallet:c.a.func,isBusiness:c.a.bool,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Jj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rS=function(e){var t=e.UIComponent,n=e.pointWallet,r=e.propsToFetch,o=e.handleUpdateWalletBusiness,s=e.handleAddWalletBusiness,c=e.handleDeleteWalletBusiness,l=e.setSelectedBusinessList,f=eS(rn(),1)[0],p=eS(yn(),1)[0].token,d=eS(Br(),2)[1].showToast,y=eS(Bn(),2)[1],h=eS(Object(i.useState)({loading:!0,error:null,businesses:[],pagination:null}),2),v=h[0],m=h[1],b=eS(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(e,t){var n=v.businesses.map((function(n){return n.id===e?Zj(Zj({},n),t):n}));m(Zj(Zj({},v),{},{businesses:n}))},j=function(e,t){var n=v.businesses.map((function(n){return n.id===e.business_id?Zj(Zj(Zj(Zj(Zj(Zj(Zj(Zj(Zj({},n),{},{wallet_enabled:t},!t&&{redeems:!1}),!t&&{accumulates:!1}),!t&&{redemption_rate:null}),!t&&{accumulation_rate:null}),!t&&{expire_after_minutes:null}),!t&&{maximum_accumulation:null}),!t&&{maximum_redemption_rate:null}),!t&&{maximum_redemption_type:null}):n}));m(Zj(Zj({},v),{},{businesses:n}))},S=function(){var e=Kj(a.a.mark((function e(t,r){var i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),O(Zj(Zj({},g),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(r)},e.next=6,fetch("".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.id,"/businesses/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:s=e.sent,c=s.error,l=s.result,c?O({loading:!1,error:l}):(d(Dr.Success,y("WALLET_BUSINESS_UPDATED","Wallet business updated")),O({loading:!1,error:null}),o&&o(l),w(t,r)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Kj(a.a.mark((function e(t){var r,o,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),O(Zj(Zj({},g),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(t)},e.next=6,fetch("".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.id,"/businesses"),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,u=i.error,c=i.result,u?O({loading:!1,error:c}):(d(Dr.Success,y("WALLET_BUSINESS_ENABLED","Wallet business enabled")),O({loading:!1,error:null}),s&&s(c),j(c,!0)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Kj(a.a.mark((function e(t){var r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),O(Zj(Zj({},g),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=6,fetch("".concat(f.root,"/loyalty_plans/").concat(null==n?void 0:n.id,"/businesses/").concat(t),r);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,u=i.error,s=i.result,u?O({loading:!1,error:s}):(d(Dr.Success,y("WALLET_BUSINESS_DISABLED","Wallet business disabled")),O({loading:!1,error:null}),c&&c(s),j(s,!1)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Kj(a.a.mark((function e(){var t,o,i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Zj(Zj({},v),{},{loading:!0})),t=f.businesses().asDashboard().select(r),e.next=5,t.get();case 5:o=e.sent,i=o.content,u=i.error,s=i.result,c=i.pagination,u?m(Zj(Zj({},v),{},{loading:!1,error:s})):([],l=s.map((function(e){var t=null==n?void 0:n.businesses.find((function(t){return t.business_id===e.id}));return t?Zj(Zj(Zj({},t),e),{},{wallet_enabled:!0}):Zj(Zj({},e),{},{redeems:!1,accumulates:!1,wallet_enabled:!1,loyalty_plan_id:null==n?void 0:n.id,redemption_rate:null,accumulation_rate:null,expire_after_minutes:null,maximum_accumulation:null,maximum_redemption_rate:null,maximum_redemption_type:null})})),m(Zj(Zj({},v),{},{loading:!1,businesses:l,pagination:c}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(Zj(Zj({},v),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return C(),e.abort()}),[]),Object(i.useEffect)((function(){l(Hj(null==v?void 0:v.businesses))}),[null==v?void 0:v.businesses]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Vj({},e,{businessList:v,handleCheckBox:function(e,t,r){var o=Qj({},t,r);n?S(e,o):w(e,o)},handleUpdateBusinessList:w,handleChangeSwitch:function(e,t){if(n)if(t){var r,o=null==v||null===(r=v.businesses)||void 0===r?void 0:r.find((function(t){return t.id===e}));if(o){var a={business_id:e,redeems:null==o?void 0:o.redeems,accumulates:null==o?void 0:o.accumulates,loyalty_plan_id:null==n?void 0:n.id};E(a)}}else P(e);else{var i=null==v?void 0:v.businesses.map((function(n){return e===n.id?Zj(Zj({},n),{},{wallet_enabled:t}):n}));m(Zj(Zj({},v),{},{businesses:i}))}}})))};function oS(){return oS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oS.apply(this,arguments)}function aS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aS(Object(n),!0).forEach((function(t){uS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sS(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}rS.propTypes={UIComponent:c.a.elementType,pointWallet:c.a.object,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var fS=function(e){var t,n=e.searchByAddress,r=e.handlerFindBusiness,o=e.UIComponent,s=cS(rn(),1)[0],c=cS(vr(),1)[0],l=cS(Object(i.useState)({countries:[],cities:[],citiesOptions:[]}),2),f=l[0],p=l[1],d=cS(Object(i.useState)({cityId:null,dropdownOptionId:null,orderType:(null===(t=c.options)||void 0===t?void 0:t.type)||1}),2),y=d[0],h=d[1],v=cS(Object(i.useState)(!1),2),m=v[0],b=v[1],g=function(){var e,t=(e=a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.countries().get();case 3:n=e.sent,r=n.response,p(iS(iS({},f),{},{countries:null==r||null===(t=r.data)||void 0===t?void 0:t.result})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sS(a,r,o,i,u,"next",e)}function u(e){sS(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){n||g()}),[]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,oS({},e,{orderState:c,allListValues:f,currentValues:y,isFormErrors:m,handleChangeValue:function(e){var t=e.name,n=e.value;switch(t){case"country":var r=null==f?void 0:f.countries.find((function(e){return Number(e.id)===Number(n)})),o=null==r?void 0:r.cities.filter((function(e){return e.options.length}));p(iS(iS({},f),{},{cities:o})),h(iS(iS({},y),{},{cityId:null}));break;case"cityId":var a=f.cities.find((function(e){return Number(e.id)===Number(n)}));p(iS(iS({},f),{},{citiesOptions:null==a?void 0:a.options})),h(iS(iS({},y),{},{cityId:n,dropdownOptionId:null}));break;case"dropdownOptionId":h(iS(iS({},y),{},{dropdownOptionId:n}))}},handleFindBusiness:function(){var e=!(f.citiesOptions.length>0)||!!y.dropdownOptionId,t=y.cityId&&e;t&&r(y),b(!t)}})))};function pS(){return pS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pS.apply(this,arguments)}function dS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dS(Object(n),!0).forEach((function(t){hS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fS.propTypes={UIComponent:c.a.elementType,searchByAddress:c.a.bool,handlerFindBusiness:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bS=function(e){var t,n=e.maxPreoderDays,r=e.UIComponent,o=vS(Object(i.useState)(null),2),a=o[0],s=o[1],c=vS(Object(i.useState)(null),2),l=c[0],f=c[1],p=vS(Object(i.useState)(null),2),d=p[0],y=p[1],h=vS(Object(i.useState)(null),2),v=h[0],m=h[1],b=vS(Object(i.useState)([]),2)[1],g=(null==l||null===(t=l.schedule)||void 0===t?void 0:t.map((function(e,t){return!e.enabled&&t})))||[],O=function(){var e=n,t=Yn()().toDate(),r=[],o=g.every((function(e){return!1===e}));if(g.length&&!o)for(;e>0;){var a=t,i=Yn()(t).day();!1===g[i]&&(r.push(Yn()(a).toDate()),e--),t=Yn()(Yn()(t).add(1,"d")).toDate()}if(g.length&&o)for(var u=1;u<=n;u++)r.push(Yn()(Yn()(t).add(u,"d")).toDate());return r.unshift(Yn()().toDate()),r};return Object(i.useEffect)((function(){O()}),[g]),Object(i.useEffect)((function(){!function(){for(var e=[],t=Yn()().format("YYYY-MM-DD"),n=Yn()().day(30).format("YYYY-MM-DD"),r=Yn()(n,"YYYY-MM-DD HH:mm").diff(Yn()(t,"YYYY-MM-DD HH:mm"),"days"),o=0;o<=r;o++)e.push({key:"".concat(o),date:Yn()(t).add(o,"d").format("YYYY-MM-DD")});b(e)}()}),[]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,pS({},e,{futureDaysToShow:O,menuLapsesList:function(){for(var e=[],t=(null==a?void 0:a.lapses)||[],n=0;n<t.length;n++)for(var r,o,i,u,s,c,l,f,p="".concat(null===(r=t[n])||void 0===r||null===(o=r.open)||void 0===o?void 0:o.hour,":").concat(null===(i=t[n])||void 0===i||null===(u=i.open)||void 0===u?void 0:u.minute),d="".concat(null===(s=t[n])||void 0===s||null===(c=s.close)||void 0===c?void 0:c.hour,":").concat(null===(l=t[n])||void 0===l||null===(f=l.close)||void 0===f?void 0:f.minute),y=Yn()(d,"HH:mm").diff(Yn()(p,"HH:mm"),"hour",!0);y>0;){var h=p;e.push(Yn()(h,"HH:mm").toDate()),p=Yn()(h,"HH:mm").add(15,"minutes"),y-=.25}return e},disableDays:g,startDate:v,isDisabledDay:function(e){var t=Yn()(e,"YYYY-MM-DD").day();return g.every((function(e){return e!==t}))},scheduleSelected:a,menuSelected:null==l?void 0:l.id,handleMenuSelected:function(e){return s(function(e){var t;f(e);var n=Yn()().day();return{lapses:null==e||null===(t=e.schedule[n])||void 0===t?void 0:t.lapses,menuId:e.id}}(e))},handleDate:function(t){var n,r=Yn()(t,"YYYY-MM-DD").day(),o=null==l||null===(n=l.schedule[r])||void 0===n?void 0:n.lapses;s(yS(yS({},a),{},{lapses:o})),m(t),y(Yn()(t).format("YYYY-MM-DD HH:mm")),e.handlerSelectDate(Yn()(t).format("YYYY-MM-DD HH:mm"))},onSendMenuInfo:function(){(null==a?void 0:a.menuId)&&d&&e.handleMenuInfo({menuId:null==a?void 0:a.menuId,date:new Date(d)})},dateSelected:d})))};function gS(){return gS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gS.apply(this,arguments)}function OS(e){return function(e){if(Array.isArray(e))return xS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||IS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wS(Object(n),!0).forEach((function(t){SS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function SS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ES(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function PS(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ES(a,r,o,i,u,"next",e)}function u(e){ES(a,r,o,i,u,"throw",e)}i(void 0)}))}}function CS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||IS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IS(e,t){if(e){if("string"==typeof e)return xS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xS(e,t):void 0}}function xS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bS.propTypes={UIComponent:c.a.elementType,maxPreoderDays:c.a.number,business:c.a.object,handleMenuInfo:c.a.func,handlerSelectDate:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var AS=function(e){var t=e.UIComponent,n=e.orderId,r=e.customHandleSend,o=e.messages,s=e.setMessages,c=e.asDashboard,l=e.order,f=e.handleUpdateOrderForUnreadCount,p=CS(rn(),1)[0],d=CS(yn(),1)[0],y=d.user,h=d.token,v=e.accessToken||h,m=CS(Object(i.useState)({business:!0,administrator:!0,driver:!0,customer:!0}),2),b=m[0],g=m[1],O=CS(Object(i.useState)(""),2),w=O[0],j=O[1],S=CS(Object(i.useState)({loading:!0,error:null,messages:[]}),2),E=S[0],P=S[1],C=CS(Object(i.useState)({loading:!1,error:null}),2),I=C[0],x=C[1],A=CS(Object(i.useState)({loading:!0,error:null,messages:[]}),2),T=A[0],_=A[1],k=CS(Object(i.useState)(null),2),D=k[0],U=k[1],L=Cn(),B=function(){var e=PS(a.a.mark((function e(){var t,i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return",r(w));case 2:return e.prev=2,x({loading:!0,error:null}),t=[],b.customer&&t.push(3),b.administrator&&t.push(0),b.business&&t.push(2),b.driver&&t.push(4),i={comment:w,type:2,can_see:t.join(",")},D&&(i.type=3,i.file=D),e.next=13,fetch("".concat(p.root,"/orders/").concat(n,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)},body:JSON.stringify(i)});case 13:return u=e.sent,e.next=16,u.json();case 16:c=e.sent,l=c.error,f=c.result,l||(s&&o?s(jS(jS({},o),{},{messages:[].concat(OS(o.messages),[f])})):P(jS(jS({},E),{},{messages:[].concat(OS(E.messages),[f])}))),x({loading:!1,error:l?f:null}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),x({loading:!1,error:[e.t0.Messages]});case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=PS(a.a.mark((function e(){var t,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(jS(jS({},E),{},{loading:!0})),t=c?"".concat(p.root,"/orders/").concat(n,"/messages?mode=dashboard"):"".concat(p.root,"/orders/").concat(n,"/messages"),e.next=5,fetch(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}});case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,i=o.error,u=o.result,P(i?jS(jS({},E),{},{loading:!1,error:u}):{messages:u,loading:!1,error:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),P(jS(jS({},E),{},{loading:!1,error:[e.t0.Messages]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=PS(a.a.mark((function e(t){var r,i,u,c,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,_(jS(jS({},T),{},{loading:!0})),r="".concat(p.root,"/orders/").concat(n,"/messages/").concat(t,"/read?order_id=").concat(n,"&order_message_id=").concat(t),e.next=7,fetch(r,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}});case 7:return i=e.sent,e.next=10,i.json();case 10:u=e.sent,c=u.error,l=u.result,c?_(jS(jS({},T),{},{loading:!1,error:l})):(_({messages:l,loading:!1,error:null}),E.messages.length>0&&(d=E.messages.filter((function(e){return e.id===t&&(e.read=!0),!0})),P(jS(jS({},E),{},{messages:d}))),f&&f(null),f&&f(n)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),_(jS(jS({},T),{},{loading:!1,error:[e.t0.Messages]}));case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&s||F()}),[n]),Object(i.useEffect)((function(){if(!(E.loading||o&&s)){var e=function(e){var t;(null===(t=e.order)||void 0===t?void 0:t.id)===n&&(E.messages.find((function(t){return t.id===e.id}))||P(jS(jS({},E),{},{messages:[].concat(OS(E.messages),[e])})))};return L.on("message",e),function(){L.off("message",e)}}}),[E,L,null==l?void 0:l.status]),Object(i.useEffect)((function(){return c?L.join("messages_orders_".concat(n,"_").concat(null==y?void 0:y.level)):L.join("messages_orders_".concat(null==y?void 0:y.id)),function(){c?L.leave("messages_orders_".concat(n,"_").concat(null==y?void 0:y.level)):L.leave("messages_orders_".concat(null==y?void 0:y.id))}}),[L,n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,gS({},e,{messages:E,image:D,canRead:b,handleSend:B,message:w,handleReadMessages:R,setMessage:j,setCanRead:g,sendMessage:I,setImage:U})))};function TS(){return TS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TS.apply(this,arguments)}function _S(e){return function(e){if(Array.isArray(e))return MS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||RS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kS(Object(n),!0).forEach((function(t){US(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function US(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LS(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function BS(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){LS(a,r,o,i,u,"next",e)}function u(e){LS(a,r,o,i,u,"throw",e)}i(void 0)}))}}function FS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||RS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RS(e,t){if(e){if("string"==typeof e)return MS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?MS(e,t):void 0}}function MS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}AS.propTypes={UIComponent:c.a.elementType,handleClickSetDefault:c.a.func,customHandleSend:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},AS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var NS=function(e){var t=e.orderId,n=e.UIComponent,r=FS(rn(),1)[0],o=FS(yn(),1)[0],s=FS(Object(i.useState)({metaFields:[],loading:!0,error:null}),2),c=s[0],l=s[1],f=FS(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],y=function(){var e=BS(a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(DS(DS({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/orders/").concat(t,"/metafields"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,l(DS(DS({},c),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(DS(DS({},c),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=BS(a.a.mark((function e(n){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(DS(DS({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/orders/").concat(t,"/metafields/").concat(n),i);case 5:e.sent.ok&&(u=c.metaFields.filter((function(e){return e.id!==n})),l(DS(DS({},c),{},{metaFields:u})),d({loading:!1,result:{error:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=BS(a.a.mark((function e(n){var i,u,s,f,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(DS(DS({},p),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)},body:JSON.stringify(n)},e.next=5,fetch("".concat(r.root,"/orders/").concat(t,"/metafields"),i);case 5:return u=e.sent,e.next=8,u.json();case 8:s=e.sent,f=s.error,y=s.result,f?d({loading:!1,result:{error:!0,result:y}}):([],h=[].concat(_S(c.metaFields),[y]),l(DS(DS({},c),{},{metaFields:h})),d({loading:!1,result:{error:!1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y()}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,TS({},e,{metaFieldsList:c,actionState:p,handleDeleteMetaField:h,handeAddMetaField:v})))};NS.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},NS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var zS=n(35),GS=n.n(zS);function YS(){return YS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YS.apply(this,arguments)}function qS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yn.a.extend(GS.a),Yn.a.extend($n.a);var JS=function(e){var t,n,r=e.minDate,o=e.maxDate,a=e.currentDate,s=e.useOrderContext,c=e.onChangeMoment,l=e.UIComponent,f=qS(vr(),2),p=f[0],d=f[1].changeMoment,y=function(e){if(e)return Yn()(e,"YYYY-MM-DD HH:mm").isSameOrAfter(Yn()(),"day")?Yn()(e).format("YYYY-MM-DD HH:mm"):Yn()().format("YYYY-MM-DD HH:mm")},h=s?null===(t=p.options)||void 0===t?void 0:t.moment:a,v=qS(Object(i.useState)(h?Yn()(y(h)).format("YYYY-MM-DD HH:mm"):null),2),m=v[0],b=v[1],g=qS(Object(i.useState)(!m),2),O=g[0],w=g[1],j=qS(Object(i.useState)([]),2),S=j[0],E=j[1],P=qS(Object(i.useState)([]),2),C=P[0],I=P[1],x=qS(Object(i.useState)(Yn()(y(h)).format("YYYY-MM-DD")),2),A=x[0],T=x[1],_=qS(Object(i.useState)(null),2),k=_[0],D=_[1],U=function(){O||(w(!0),s&&d(null),c&&c(null))};Object(i.useEffect)((function(){var e;if(s)if(null!==(e=p.options)&&void 0!==e&&e.moment){var t,n=Yn.a.utc(y(null===(t=p.options)||void 0===t?void 0:t.moment)).local();b(n.format("YYYY-MM-DD HH:mm")),T(n.format("YYYY-MM-DD")),D(n.format("HH:mm")),O&&w(!1)}else A!==Yn()().format("YYYY-MM-DD")&&T(Yn()().format("YYYY-MM-DD")),null!==k&&D(null),null!==m&&b(null),!O&&w(!0);else null!==m&&b(null),!O&&w(!0)}),[null===(n=p.options)||void 0===n?void 0:n.moment]),Object(i.useEffect)((function(){if(m){var e=Yn()(m,"YYYY-MM-DD HH:mm"),t=Yn()(),n=e.diff(t,"seconds");if(!(n<=0)){var r=setTimeout((function(){U()}),1e3*n);return function(){clearTimeout(r)}}U()}}),[m]),Object(i.useEffect)((function(){O&&C[0]&&(T(C[0]),D(null))}),[O,C]);var L=function(){for(var e=[],t=A===Yn()().format("YYYY-MM-DD"),n=A===Yn()(o).format("YYYY-MM-DD"),r=new Date,a=0;a<24;a++)if(!(t&&a<(null==r?void 0:r.getHours())||n&&a>(null==o?void 0:o.getHours())))for(var i=0;i<59;i+=15)if(!(t&&a===(null==r?void 0:r.getHours())&&i<=r.getMinutes()||n&&a===(null==o?void 0:o.getHours())&&i>o.getMinutes())){var u=a<10?"0".concat(a):a,s=i<10?"0".concat(i):i,c=i+14<10?"0".concat(i+14):i+14,l="".concat(u,":").concat(s),f="".concat(u,":").concat(c);e.push({startTime:l,endTime:f})}E(e)},B=function(){for(var e,t,n,a=[],i=parseInt((e=y(o),n=null!=t?t:Yn()(),Yn()(e).diff(Yn()(n),"day")),y(r)),u=0;u<i+1;u++)a.push(Yn()(y(r)).add(u,"d").format("YYYY-MM-DD"));I(a)};return Object(i.useEffect)((function(){A&&L()}),[A]),Object(i.useEffect)((function(){var e=setInterval((function(){0===Yn()(A).diff(Yn()(a),"day")&&L()}),1e3);return function(){return clearInterval(e)}}),[A]),Object(i.useEffect)((function(){B()}),[o,r]),u.a.createElement(u.a.Fragment,null,l&&u.a.createElement(l,YS({},e,{isAsap:O,minDate:y(r),maxDate:y(o),dateSelected:A,timeSelected:k,handleChangeDate:function(e){e&&e!==A&&(T(e),D(null),w(!1))},handleChangeTime:function(e){if(e&&e!==k){var t=Yn()("".concat(A," ").concat(e),"YYYY-MM-DD HH:mm").toDate();D(e),w(!1),s&&d(t),c&&c(t)}},datesList:C,hoursList:S,handleAsap:U})))};function VS(){return VS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VS.apply(this,arguments)}function HS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HS(Object(n),!0).forEach((function(t){KS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XS(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ZS(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){XS(a,r,o,i,u,"next",e)}function u(e){XS(a,r,o,i,u,"throw",e)}i(void 0)}))}}function QS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return eE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}JS.propTypes={UIComponent:c.a.elementType,minDate:c.a.instanceOf(Date),maxDate:c.a.instanceOf(Date).isRequired,currentDate:c.a.instanceOf(Date),useOrderContext:c.a.bool,onChangeMoment:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},JS.defaultProps={useOrderContext:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var tE=function(e){var t=e.UIComponent,n=QS(rn(),1)[0],r={},o=QS(yn(),1)[0].token,s=QS(Object(i.useState)({loading:!0,orders:[],error:null}),2),c=s[0],l=s[1],f=QS(Object(i.useState)({loading:!0,orders:[],error:null}),2),p=f[0],d=f[1],y=function(){var e=ZS(a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},r.activeOrders=t,e.next=5,n.setAccessToken(o).orders().where([{attribute:"status",value:[0,3,4,7,8,9]}]).get({cancelToken:t});case 5:i=e.sent,u=i.content.result,l(WS(WS({},c),{},{loading:!1,orders:u})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),l(WS(WS({},c),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=ZS(a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},r.previousOrders=t,e.next=5,n.setAccessToken(o).orders().where([{attribute:"status",value:[1,2,5,6,10,11,12]}]).get({cancelToken:t});case 5:i=e.sent,u=i.content.result,d(WS(WS({},p),{},{loading:!1,orders:u})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d(WS(WS({},p),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return h(),y(),function(){r.previousOrders&&r.previousOrders.cancel(),r.activeOrders&&r.activeOrders.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,VS({},e,{activeOrders:c,previousOrders:p})))};function nE(){return nE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nE.apply(this,arguments)}function rE(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function oE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return aE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}tE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},tE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var iE=function(e){var t=e.status,n=e.UIComponent,r=oE(rn(),1)[0],o=oE(yn(),1)[0].token,s=oE(Object(i.useState)([]),2),c=s[0],l=s[1],f={},p=function(){var e,n=(e=a.a.mark((function e(){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},f.orders=n,e.next=5,r.setAccessToken(o).orders().where([{attribute:"status",value:t}]).get({cancelToken:n});case 5:i=e.sent,u=i.content.result,l(u),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){rE(a,r,o,i,u,"next",e)}function u(e){rE(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){return p(),function(){f.orders&&f.orders.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,nE({},e,{orders:c})))};function uE(){return uE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uE.apply(this,arguments)}function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sE(Object(n),!0).forEach((function(t){lE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fE(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pE(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){fE(a,r,o,i,u,"next",e)}function u(e){fE(a,r,o,i,u,"throw",e)}i(void 0)}))}}function dE(e){return function(e){if(Array.isArray(e))return vE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||hE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||hE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hE(e,t){if(e){if("string"==typeof e)return vE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vE(e,t):void 0}}function vE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}iE.propTypes={UIComponent:c.a.elementType,orderType:c.a.oneOf(["active","previous"]).isRequired,status:c.a.arrayOf(c.a.number).isRequired,orders:c.a.arrayOf(c.a.object),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},iE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mE=function(e){var t,n=e.UIComponent,r=e.isSearchByCartId,o=e.isSearchByCityName,s=e.paginationSettings,c=yE(rn(),1)[0],l=yE(yn(),1)[0],f=l.user,p=l.token,d=l.loading,y={},h=yE(Object(i.useState)(null),2),v=h[0],m=h[1],b=yE(Object(i.useState)({}),2),g=b[0],O=b[1],w=yE(Object(i.useState)(!1),2),j=w[0],S=w[1],E=yE(Object(i.useState)({loading:!1,error:null}),2),P=E[0],C=E[1],I=yE(Object(i.useState)(null),2),x=I[0],A=I[1],T=yE(Object(i.useState)({loading:!1,carts:[],error:null}),2),_=T[0],k=T[1],D=yE(Object(i.useState)({currentPage:"pages"===s.controlType&&s.initialPage&&s.initialPage>=1?s.initialPage-1:0,pageSize:null!==(t=s.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),U=D[0],L=D[1],B=yE(Object(i.useState)({businesses:[],loading:!0,error:null}),2),F=B[0],R=B[1],M=yE(Object(i.useState)([]),2),N=M[0],z=M[1],G=yE(Object(i.useState)([]),2),Y=G[0],q=G[1],$=function(){var e=pE(a.a.mark((function e(t){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(cE(cE({},P),{},{loading:!0})),n={},y.deleteOrder=n,r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=7,fetch("".concat(c.root,"/carts/dashboard/").concat(t),r);case 7:return o=e.sent,e.next=10,o.json();case 10:(i=e.sent).error||(A(t),(u=dE(q)).shift(),0===u.length&&S(!1),q(u)),C({loading:!1,error:i.error?i.result:null}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),C({loading:!1,error:[e.t0.message]}),S(!1);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=pE(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(cE(cE({},P),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=5,fetch("".concat(c.root,"/controls/orders"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?C({loading:!1,error:null==r?void 0:r.result}):(z(r.result.cities),R(cE(cE({},F),{},{loading:!1,businesses:r.result.businesses}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),C({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=pE(a.a.mark((function e(t,n){var i,u,s,l,f,d,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(cE(cE({},_),{},{loading:!0})),i=null,u=[],v&&(s=[],r&&s.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(v,"%"))}}),o&&s.push({attribute:"city",conditions:[{attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(v,"%"))}}]}),u.push({conector:"OR",conditions:s})),Object.keys(g).length&&(l=[],null!=g&&g.cartId&&l.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(null==g?void 0:g.cartId,"%"))}}),null!==g.deliveryFromDatetime&&l.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(g.deliveryFromDatetime)}}),null!==g.deliveryEndDatetime&&l.push({attribute:"delivery_datetime",value:{condition:"<=",value:g.deliveryEndDatetime}}),0!==g.businessIds.length&&l.push({attribute:"business_id",value:g.businessIds}),0!==g.customerIds.length&&l.push({attribute:"user_id",value:g.customerIds}),0!==g.cityIds.length&&l.push({attribute:"city_id",value:g.cityIds}),l.length&&u.push({conector:"AND",conditions:l})),u.length&&(i={conditions:u,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},d=i?"".concat(c.root,"/carts/dashboard?orderBy=-id&page=").concat(n,"&page_size=").concat(t,"&where=").concat(JSON.stringify(i)):"".concat(c.root,"/carts/dashboard?orderBy=-id&page=").concat(n,"&page_size=").concat(t),e.next=11,fetch(d,f);case 11:return y=e.sent,e.next=14,y.json();case 14:(h=e.sent).error?k(cE(cE({},_),{},{loading:!1,error:h.result})):(k({loading:!1,carts:h.result,error:null}),L(cE(cE({},U),{},{currentPage:h.pagination.current_page,pageSize:0===h.pagination.page_size?U.pageSize:h.pagination.page_size,totalPages:h.pagination.total_pages,totalItems:h.pagination.total,from:h.pagination.from,to:h.pagination.to}))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),k(cE(cE({},_),{},{loading:!1,error:[e.t0.message]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j&&0!==q.length&&$(q[0])}),[q,j]),Object(i.useEffect)((function(){if(!d)return J(),function(){y.drivers&&y.drivers.cancel()}}),[f,d]),Object(i.useEffect)((function(){_.loading||V(U.pageSize,1)}),[v]),Object(i.useEffect)((function(){Object.keys(g).length>0&&!_.loading&&V(U.pageSize,1)}),[g]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,uE({},e,{searchValue:v,businessesList:F,citiesList:N,filterValues:g,selectedCartIds:Y,deletedCartId:x,startMulitOrderDelete:j,handleSelectedCartIds:function(e){var t=dE(Y);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),q(t)},handleRemoveSelectedCartId:function(e){var t=dE(Y);t=t.filter((function(t){return t!==e})),q(t)},handleChangeSearch:function(e){m(e)},handleChangeFilterValues:function(e){O(e)},handleDeleteMultiCarts:function(){S(!0)},setSelectedCartIds:q,getCartList:V,pagination:U,cartList:_})))};function bE(){return bE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bE.apply(this,arguments)}function gE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gE(Object(n),!0).forEach((function(t){wE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jE(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function SE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return EE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var PE=function(e){var t=e.cart,n=e.UIComponent,r=SE(yn(),1)[0].token,o=SE(rn(),1)[0],s=SE(Object(i.useState)({cart:null,loading:!1,error:null}),2),c=s[0],l=s[1],f=function(){var e,n=(e=a.a.mark((function e(){var n,i,u,s,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(OE(OE({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},i="".concat(o.root,"/carts/").concat(null==t?void 0:t.uuid,"?user_id=").concat(null==t?void 0:t.user_id),e.next=6,fetch(i,n);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error?l(OE(OE({},c),{},{loading:!1,error:s.result})):(p=OE(OE({},s.result),{},{id:null==t?void 0:t.id,business:OE(OE({},s.result.business),null==t?void 0:t.business),user:OE(OE({},null==t?void 0:t.user),(null==t||null===(f=t.address)||void 0===f?void 0:f.address)&&{address:t.address.address}),updated_at:null==t?void 0:t.updated_at}),l({loading:!1,cart:p,error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(OE(OE({},c),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jE(a,r,o,i,u,"next",e)}function u(e){jE(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){t&&f()}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,bE({},e,{cartState:c})))};function CE(){return CE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CE.apply(this,arguments)}function IE(e){return function(e){if(Array.isArray(e))return DE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||kE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xE(Object(n),!0).forEach((function(t){TE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function TE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||kE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kE(e,t){if(e){if("string"==typeof e)return DE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?DE(e,t):void 0}}function DE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}PE.propTypes={UIComponent:c.a.elementType,cartId:c.a.oneOfType([c.a.number,c.a.string]),order:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},PE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var UE=function(e){var t=e.UIComponent,n=_E(Object(i.useState)({cartId:null,dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],cityIds:[],customerIds:[]}),2),r=n[0],o=n[1];return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,CE({},e,{filterValues:r,handleChangeCartId:function(e){var t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");o(AE(AE({},r),{},{cartId:t}))},handleChangeDateType:function(e){var t=Yn()();switch(e){case"default":o(AE(AE({},r),{},{dateType:"default",deliveryFromDatetime:null,deliveryEndDatetime:null}));break;case"today":var n=t.format("YYYY-MM-DD"),a=Yn()(n).format("YYYY-MM-DD HH:mm:ss");o(AE(AE({},r),{},{dateType:"today",deliveryFromDatetime:a}));break;case"yesterday":var i=t.subtract("1","day").format("YYYY-MM-DD"),u=Yn()(i).format("YYYY-MM-DD HH:mm:ss");o(AE(AE({},r),{},{dateType:"yesterday",deliveryFromDatetime:u}));break;case"last7":var s=t.subtract("7","day").format("YYYY-MM-DD"),c=Yn()(s).format("YYYY-MM-DD HH:mm:ss");o(AE(AE({},r),{},{dateType:"last7",deliveryFromDatetime:c}));break;case"last30":var l=t.subtract("30","day").format("YYYY-MM-DD"),f=Yn()(l).format("YYYY-MM-DD HH:mm:ss");o(AE(AE({},r),{},{dateType:"last30",deliveryFromDatetime:f}));break;case"term":o(AE(AE({},r),{},{dateType:"term",deliveryFromDatetime:null,deliveryEndDatetime:null}))}},handleChangeFromDate:function(e){var t;t=null!==e?Yn()(e).format("YYYY-MM-DD HH:mm:ss"):null,o(AE(AE({},r),{},{deliveryFromDatetime:t}))},handleChangeEndDate:function(e){var t;null!==e?t=Yn()(e).format("YYYY-MM-DD HH:mm:ss"):e=null,o(AE(AE({},r),{},{deliveryEndDatetime:t}))},handleChangeBusinesses:function(e){var t=IE(r.businessIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),o(AE(AE({},r),{},{businessIds:t}))},handleChangeCity:function(e){var t=IE(r.cityIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),o(AE(AE({},r),{},{cityIds:t}))},handleChangeCustomers:function(e){var t=IE(r.customerIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),o(AE(AE({},r),{},{customerIds:t}))},handleResetFilterValues:function(){o({cartId:null,dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],cityIds:[],customerIds:[]})},handleChangeDateRange:function(e,t,n){o(AE(AE({},r),{},{dateType:e,deliveryFromDatetime:t,deliveryEndDatetime:n}))}})))};function LE(){return LE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LE.apply(this,arguments)}function BE(e){return function(e){if(Array.isArray(e))return qE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||YE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FE(Object(n),!0).forEach((function(t){ME(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ME(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NE(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zE(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){NE(a,r,o,i,u,"next",e)}function u(e){NE(a,r,o,i,u,"throw",e)}i(void 0)}))}}function GE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||YE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YE(e,t){if(e){if("string"==typeof e)return qE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qE(e,t):void 0}}function qE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}UE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},UE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $E=function(e){var t,n=e.UIComponent,r=e.propsToFetch,o=e.orders,s=e.orderIds,c=e.deletedOrderId,l=e.orderStatus,f=e.orderBy,p=e.orderDirection,d=e.useDefualtSessionManager,y=e.paginationSettings,h=e.asDashboard,v=e.filterValues,m=e.searchValue,b=e.isSearchByOrderId,g=e.isSearchByCustomerEmail,O=e.isSearchByCustomerPhone,w=e.orderIdForUnreadCountUpdate,j=GE(rn(),1)[0],S=GE(Object(i.useState)({loading:!o,error:null,orders:[]}),2),E=S[0],P=S[1],C=GE(Object(i.useState)({currentPage:"pages"===y.controlType&&y.initialPage&&y.initialPage>=1?y.initialPage-1:0,pageSize:null!==(t=y.pageSize)&&void 0!==t?t:10}),2),I=C[0],x=C[1],A=GE(yn(),1)[0],T=Cn(),_=d?A.token:e.accessToken,k={},D=GE(Object(i.useState)({loading:!1,error:null}),2),U=D[0],L=D[1],B=GE(Object(i.useState)(null),2),F=B[0],R=B[1],M=function(e,t){if("id"===e){if("desc"===p)return t.sort((function(e,t){return t.id-e.id}));if("asc"===p)return t.sort((function(e,t){return e.id-t.id}))}return"last_direct_message_at"===e?t.sort((function(e,t){return new Date(t.last_direct_message_at)-new Date(e.last_direct_message_at)})):t},N=function(){var e=zE(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(RE(RE({},U),{},{loading:!0})),n={},k.updateOrders=n,e.next=6,j.setAccessToken(_).orders(null==t?void 0:t.id).save({status:t.newStatus},{cancelToken:n});case 6:r=e.sent,o=r.content,L({loading:!1,error:o.error?o.result:null}),o.error||(i=E.orders.filter((function(e){return(null==e?void 0:e.id)!==(null==t?void 0:t.id)})),P(RE(RE({},E),{},{orders:i}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),L({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=zE(a.a.mark((function e(t){var n,o,i,u,c,d,w,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,o=[],i=[],n=h?{query:{orderBy:("desc"===p?"-":"")+f}}:{query:{orderBy:("desc"===p?"-":"")+f,page:t,page_size:y.pageSize}},s&&i.push({attribute:"id",value:s}),0===Object.keys(v).length?l&&i.push({attribute:"status",value:l}):v.statuses.length>0?(u=v.statuses.every((function(e){return-1!==l.indexOf(e)})),c=l.every((function(e){return-1!==v.statuses.indexOf(e)})),u&&i.push({attribute:"status",value:v.statuses}),c&&l&&i.push({attribute:"status",value:l})):l&&i.push({attribute:"status",value:l}),m&&(d=[],b&&d.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}),g&&d.push({attribute:"customer",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}]}),O&&d.push({attribute:"customer",conditions:[{attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}]}),i.push({conector:"OR",conditions:d})),Object.keys(v).length&&(w=[],null!==v.deliveryFromDatetime&&w.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(v.deliveryFromDatetime)}}),null!==v.deliveryEndDatetime&&w.push({attribute:"delivery_datetime",value:{condition:"<=",value:v.deliveryEndDatetime}}),0!==v.businessIds.length&&w.push({attribute:"business_id",value:v.businessIds}),0!==v.driverIds.length&&w.push({attribute:"driver_id",value:v.driverIds}),0!==v.deliveryTypes.length&&w.push({attribute:"delivery_type",value:v.deliveryTypes}),0!==v.paymethodIds.length&&w.push({attribute:"paymethod_id",value:v.paymethodIds}),w.length&&i.push({conector:"AND",conditions:w})),i.length&&(o={conditions:i,conector:"AND"}),S={},k.orders=S,n.cancelToken=S,E=r?h?j.setAccessToken(_).orders().asDashboard().select(r).where(o):j.setAccessToken(_).orders().select(r).where(o):h?j.setAccessToken(_).orders().asDashboard().where(o):j.setAccessToken(_).orders().where(o),e.next=15,E.get(n);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){var t=!0;return void 0!==v.businessIds&&v.businessIds.length>0&&(v.businessIds.includes(e.business_id)||(t=!1)),void 0!==v.driverIds&&v.driverIds.length>0&&(v.driverIds.includes(e.driver_id)||(t=!1)),void 0!==v.deliveryTypes&&v.deliveryTypes.length>0&&(v.deliveryTypes.includes(e.delivery_type)||(t=!1)),void 0!==v.paymethodIds&&v.paymethodIds.length>0&&(v.paymethodIds.includes(e.paymethod_id)||(t=!1)),void 0!==v.statuses&&v.statuses.length>0&&(v.statuses.includes(parseInt(e.status))||(t=!1)),t},Y=function(){var e=zE(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,P(RE(RE({},E),{},{loading:!0})),e.next=6,z(I.currentPage+1);case 6:t=e.sent,P({loading:!1,orders:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||x({currentPage:t.content.pagination.current_page,pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),"Cancel"!==e.t0.constructor.name&&P(RE(RE({},E),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){if(null!==w&&0!==E.orders.length){var e=E.orders.filter((function(e){return(null==e?void 0:e.id)===w&&(e.unread_count=0,e.unread_general_count=0,e.unread_direct_count=0),!0}));P(RE(RE({},E),{},{orders:e}))}}),[w]),Object(i.useEffect)((function(){if(!E.loading){var e=M(f,E.orders);P(RE(RE({},E),{},{orders:e}))}}),[f,E.orders]),Object(i.useEffect)((function(){if(null!==c){var e=E.orders.filter((function(e){return(null==e?void 0:e.id)!==c}));P(RE(RE({},E),{},{orders:e}))}}),[c]),Object(i.useEffect)((function(){null!==m&&Y()}),[m]),Object(i.useEffect)((function(){if(o)P(RE(RE({},E),{},{orders:o}));else{var e=!1,t=!1;if(Object.keys(v).length>0&&(e=v.statuses.every((function(e){return-1!==l.indexOf(e)})),t=l.every((function(e){return-1!==v.statuses.indexOf(e)})),!e&&!t))return void P({loading:!1,orders:[],error:null});Y()}return function(){k.orders&&k.orders.cancel()}}),[A,v,o]),Object(i.useEffect)((function(){if(!E.loading){var e=function(e){var t=[];if(E.orders.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)}))){t=E.orders.filter((function(t){var n=!0;return(null==t?void 0:t.id)===(null==e?void 0:e.id)&&(delete e.total,delete e.subtotal,Object.assign(t,e),(n=(0===l.length||l.includes(parseInt(t.status)))&&G(e))||(I.total--,x(RE({},I)))),n}));var n=M(f,t);P(RE(RE({},E),{},{orders:n}))}else{if(G(e))if(l.includes(parseInt(e.status))){t=[].concat(BE(E.orders),[e]);var r=M(f,t);I.total++,x(RE({},I)),P(RE(RE({},E),{},{orders:r}))}}},t=function(e){R(null==e?void 0:e.id);var t=RE(RE({},e),{},{status:0}),n=[];if(l.includes(0)&&G(e)){n=[t].concat(BE(E.orders));var r=M(f,n);I.total++,x(RE({},I)),P(RE(RE({},E),{},{orders:r}))}},n=function(e){if(0!==E.orders.length&&E.orders.find((function(t){var n;return(null==t?void 0:t.id)===(null===(n=e.order)||void 0===n?void 0:n.id)}))){var t=E.orders.filter((function(t){var n;return(null==t?void 0:t.id)===(null===(n=e.order)||void 0===n?void 0:n.id)&&t.last_message_at!==e.created_at&&(1===e.type?(t.last_general_message_at=e.created_at,0!==e.author.level&&(t.unread_general_count=t.unread_general_count+1)):(t.last_direct_message_at=e.created_at,0!==e.author.level&&(t.unread_direct_count=t.unread_direct_count+1)),t.last_message_at=e.created_at,0!==e.author.level&&(t.unread_count=t.unread_count+1)),!0})),n=M(f,t);P(RE(RE({},E),{},{orders:n}))}};return T.on("update_order",e),T.on("orders_register",t),T.on("message",n),function(){T.off("update_order",e),T.off("orders_register",t),T.off("message",n)}}}),[E.orders,I,f,T]),Object(i.useEffect)((function(){if(A.user){var e;if(h)T.join("messages_orders"),T.join("orders");else T.join("orders_".concat(null==A||null===(e=A.user)||void 0===e?void 0:e.id));return function(){var e;h?(T.leave("messages_orders"),T.leave("orders")):T.leave("orders_".concat(null==A||null===(e=A.user)||void 0===e?void 0:e.id))}}}),[T,A]);var q=function(){var e=zE(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(RE(RE({},E),{},{loading:!0})),e.prev=1,e.next=4,z(I.currentPage+1);case 4:t=e.sent,P({loading:!1,orders:t.content.error?E.orders:E.orders.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||x({currentPage:t.content.pagination.current_page,pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&P(RE(RE({},E),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=zE(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(RE(RE({},E),{},{loading:!0})),e.prev=1,e.next=4,z(t);case 4:n=e.sent,P({loading:!1,orders:n.content.error?[]:n.content.result,error:n.content.error?n.content.result:null}),n.content.error||x({currentPage:n.content.pagination.current_page,pageSize:n.content.pagination.page_size,totalPages:n.content.pagination.total_pages,total:n.content.pagination.total,from:n.content.pagination.from,to:n.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&P(RE(RE({},E),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,LE({},e,{orderList:E,pagination:I,registerOrderId:F,loadMoreOrders:q,goToPage:$,handleUpdateOrderStatus:N,handleResetNotification:function(){R(null)}})))};function JE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return VE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}$E.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),onOrderClick:c.a.func,useDefualtSessionManager:c.a.bool,orders:c.a.arrayOf(s.object),orderIds:c.a.arrayOf(s.number),orderIdForUnreadCountUpdate:c.a.number,orderStatus:c.a.arrayOf(s.number),orderBy:c.a.string,orderDirection:c.a.oneOf(["asc","desc"]),paginationSettings:c.a.exact({initialPage:c.a.number,pageSize:c.a.number,controlType:c.a.oneOf(["infinity","pages"])}),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$E.defaultProps={orderBy:"id",orderDirection:"desc",paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var HE=function(e){var t=e.UIComponent,n=Cn(),r=JE(yn(),1)[0],o=r.user,a=r.loading,s=JE(zn(),1)[0];return Object(i.useEffect)((function(){if(o){var e=function(e){s.emit("order_added",e)};return 0===o.level?n.join("orders"):n.join("orders_".concat(null==o?void 0:o.id)),n.on("orders_register",e),function(){n.off("orders_register",e)}}}),[n,a,o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function WE(){return WE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WE.apply(this,arguments)}function KE(e){return function(e){if(Array.isArray(e))return nP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XE(Object(n),!0).forEach((function(t){QE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function QE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||tP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tP(e,t){if(e){if("string"==typeof e)return nP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nP(e,t):void 0}}function nP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}HE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},HE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rP=function(e){var t=e.UIComponent,n=e.driverGroupList,r=eP(Object(i.useState)({orderId:null,groupTypes:[],dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],driverIds:[],driverGroupIds:[],cityIds:[],statuses:[],deliveryTypes:[],paymethodIds:[]}),2),o=r[0],a=r[1];return Object(i.useEffect)((function(){var e=[];if(o.groupTypes.length>0){var t,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=tP(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(o.groupTypes);try{var i=function(){var r=t.value,o=n.groups.find((function(e){return e.id===r}));o&&(e=[].concat(KE(e),KE(null==o?void 0:o.drivers)))};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}var u=e.filter((function(e,t,n){return n.indexOf(e)===t}));a(ZE(ZE({},o),{},{driverGroupIds:u}))}),[o.groupTypes]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,WE({},e,{filterValues:o,handleChangeOrderId:function(e){var t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");a(ZE(ZE({},o),{},{orderId:t}))},handleChangeGroup:function(e){var t=KE(o.groupTypes);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(ZE(ZE({},o),{},{groupTypes:t}))},handleChangeDateType:function(e){var t=Yn()();switch(e){case"default":a(ZE(ZE({},o),{},{dateType:"default",deliveryFromDatetime:null,deliveryEndDatetime:null}));break;case"today":var n=t.format("YYYY-MM-DD"),r=Yn()(n).format("YYYY-MM-DD HH:mm:ss");a(ZE(ZE({},o),{},{dateType:"today",deliveryFromDatetime:r}));break;case"yesterday":var i=t.subtract("1","day").format("YYYY-MM-DD"),u=Yn()(i).format("YYYY-MM-DD HH:mm:ss");a(ZE(ZE({},o),{},{dateType:"yesterday",deliveryFromDatetime:u}));break;case"last7":var s=t.subtract("7","day").format("YYYY-MM-DD"),c=Yn()(s).format("YYYY-MM-DD HH:mm:ss");a(ZE(ZE({},o),{},{dateType:"last7",deliveryFromDatetime:c}));break;case"last30":var l=t.subtract("30","day").format("YYYY-MM-DD"),f=Yn()(l).format("YYYY-MM-DD HH:mm:ss");a(ZE(ZE({},o),{},{dateType:"last30",deliveryFromDatetime:f}));break;case"term":a(ZE(ZE({},o),{},{dateType:"term",deliveryFromDatetime:null,deliveryEndDatetime:null}))}},handleChangeFromDate:function(e){var t;t=null!==e?Yn()(e).format("YYYY-MM-DD HH:mm:ss"):null,a(ZE(ZE({},o),{},{deliveryFromDatetime:t}))},handleChangeEndDate:function(e){var t;null!==e?t=Yn()(e).format("YYYY-MM-DD HH:mm:ss"):e=null,a(ZE(ZE({},o),{},{deliveryEndDatetime:t}))},handleChangeBusinesses:function(e){var t=KE(o.businessIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(ZE(ZE({},o),{},{businessIds:t}))},handleChangeDriver:function(e){var t=KE(o.driverIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(ZE(ZE({},o),{},{driverIds:t}))},handleChangeCity:function(e){var t=KE(o.cityIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(ZE(ZE({},o),{},{cityIds:t}))},handleChangeOrderStatus:function(e){var t=KE(o.statuses);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(ZE(ZE({},o),{},{statuses:t}))},handleChangeDeliveryType:function(e){var t=KE(o.deliveryTypes);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(ZE(ZE({},o),{},{deliveryTypes:t}))},handleChangePaymethodType:function(e){var t=KE(o.paymethodIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(ZE(ZE({},o),{},{paymethodIds:t}))},handleResetFilterValues:function(){a({orderId:null,groupTypes:[],deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],driverIds:[],cityIds:[],statuses:[],deliveryTypes:[],paymethodIds:[]})}})))};function oP(){return oP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oP.apply(this,arguments)}function aP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aP(Object(n),!0).forEach((function(t){uP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cP(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sP(a,r,o,i,u,"next",e)}function u(e){sP(a,r,o,i,u,"throw",e)}i(void 0)}))}}function lP(e){return function(e){if(Array.isArray(e))return dP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||pP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pP(e,t){if(e){if("string"==typeof e)return dP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dP(e,t):void 0}}function dP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}rP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var yP=function(e){var t=e.UIComponent,n=e.statusGroup,r=e.driversPropsToFetch,o=fP(rn(),1)[0],s=Cn(),c=fP(yn(),1)[0],l=c.user,f=c.token,p=c.loading,d={},y={pending:[0,13],inProgress:[7,8,4,9,3,14,18,19,20,21,22,23],completed:[1,11,15],cancelled:[2,5,6,10,12,16,17]},h=fP(Object(i.useState)(null),2),v=h[0],m=h[1],b=fP(Object(i.useState)(n||"pending"),2),g=b[0],O=b[1],w=fP(Object(i.useState)({}),2),j=w[0],S=w[1],E=fP(Object(i.useState)(null),2),P=E[0],C=E[1],I=fP(Object(i.useState)(!1),2),x=I[0],A=I[1],T=fP(Object(i.useState)(!1),2),_=T[0],k=T[1],D=fP(Object(i.useState)({loading:!1,error:null}),2),U=D[0],L=D[1],B=fP(Object(i.useState)(null),2),F=B[0],R=B[1],M=fP(Object(i.useState)({}),2),N=M[0],z=M[1],G=fP(Object(i.useState)({}),2),Y=G[0],q=G[1],$=fP(Object(i.useState)({groups:[],loading:!1,error:null}),2),J=$[0],V=$[1],H=fP(Object(i.useState)({drivers:[],loading:!0,error:null}),2),W=H[0],K=H[1],X=fP(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),Z=X[0],Q=X[1],ee=fP(Object(i.useState)({businesses:[],loading:!0,error:null}),2),te=ee[0],ne=ee[1],re=fP(Object(i.useState)([]),2),oe=re[0],ae=re[1],ie=fP(Object(i.useState)([]),2),ue=ie[0],se=ie[1],ce=fP(Object(i.useState)({pending:y.pending,inProgress:y.inProgress,completed:y.completed,cancelled:y.cancelled,all:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]}),2),le=ce[0],fe=ce[1],pe=function(){var e=cP(a.a.mark((function e(t){var n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(iP(iP({},U),{},{loading:!0})),n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({status:P})},e.next=5,fetch("".concat(o.root,"/orders/").concat(t),n);case 5:return r=e.sent,e.next=8,r.json();case 8:i=e.sent,u=i.result,parseInt(u.status)===P&&((s=lP(ue)).shift(),0===s.length&&A(!1),se(s),me(),be()),L(iP(iP({},U),{},{loading:!1})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),L({loading:!1,error:[e.t0.message]}),A(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=cP(a.a.mark((function e(t){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(iP(iP({},U),{},{loading:!0})),n={},d.deleteOrder=n,e.next=6,o.setAccessToken(f).orders(t).delete({cancelToken:n});case 6:r=e.sent,(i=r.content).error||(R(t),(u=lP(ue)).shift(),0===u.length&&k(!1),se(u)),L({loading:!1,error:i.error?i.result:null}),me(),be(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),L({loading:!1,error:[e.t0.message]}),k(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=cP(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},d.drivers=t,e.next=5,o.setAccessToken(f).users().select(r).where([{attribute:"level",value:[4]}]).get({cancelToken:t});case 5:n=e.sent,i=n.content.result,K(iP(iP({},W),{},{loading:!1,drivers:i})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),K(iP(iP({},W),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=cP(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(iP(iP({},U),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(o.root,"/controls/orders"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?L({loading:!1,error:null==r?void 0:r.result}):(ae(r.result.cities),V(iP(iP({},J),{},{loading:!1,groups:r.result.driver_groups})),Q(iP(iP({},Z),{},{loading:!1,paymethods:r.result.paymethods})),ne(iP(iP({},te),{},{loading:!1,businesses:r.result.businesses}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),L({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){if(!p){var e=function(e){var t=[];t=W.drivers.find((function(t){return t.id===e.id}))?W.drivers.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})):[].concat(lP(W.drivers),[e]),K(iP(iP({},W),{},{drivers:t}))},t=function(e){var t;t=W.drivers.filter((function(t){if(t.id===e.driver_id)if("string"==typeof e.location){var n=e.location.replaceAll("\\",""),r=JSON.parse(n);t.location=r}else t.location=e.location;return!0})),K(iP(iP({},W),{},{drivers:t}))};return s.on("drivers_update",e),s.on("tracking_driver",t),function(){s.off("drivers_update",e),s.off("tracking_driver",t)}}}),[s,p,W.drivers]);var ve=function(){var e=cP(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return n={query:{page:1,page_size:1}},r={conditions:[{attribute:"status",value:t}],conector:"AND"},e.next=7,o.setAccessToken(f).orders().asDashboard().select(["id"]).where(r).get(n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=cP(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},n=Object.keys(y).map((function(e){return new Promise((function(t,n){t([e,ve(y[e])])}))})),e.next=4,Promise.all(n);case 4:e.sent.forEach(function(){var e=cP(a.a.mark((function e(n,r){var o,i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n[1];case 2:s=e.sent,c=null!==(o=null==s||null===(i=s.content)||void 0===i||null===(u=i.pagination)||void 0===u?void 0:u.total)&&void 0!==o?o:0,l=uP({},n[0],c),t=iP(iP({},t),l),z(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=cP(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y[g].map((function(e){return new Promise((function(t,n){t([e,ve([e])])}))})),n={},e.next=4,Promise.all(t);case 4:e.sent.forEach(function(){var e=cP(a.a.mark((function e(t,r){var o,i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[1];case 2:s=e.sent,c=null!==(o=null==s||null===(i=s.content)||void 0===i||null===(u=i.pagination)||void 0===u?void 0:u.total)&&void 0!==o?o:0,l=uP({},t[0],c),n=iP(iP({},n),l),q(n);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){me(),be()};return Object(i.useEffect)((function(){return s.on("update_order",ge),s.on("orders_register",ge),function(){s.off("update_order",ge),s.off("orders_register",ge)}}),[s]),Object(i.useEffect)((function(){l&&(s.join("drivers"),0===l.level?(s.join("orders"),s.join("messages_orders")):(s.join("orders_".concat(null==l?void 0:l.id)),s.join("messages_orders_".concat(null==l?void 0:l.id))))}),[s,p,l]),Object(i.useEffect)((function(){x&&0!==ue.length&&pe(ue[0])}),[ue,x]),Object(i.useEffect)((function(){_&&0!==ue.length&&de(ue[0])}),[ue,_]),Object(i.useEffect)((function(){if(!p)return 0!==(null==l?void 0:l.level)&&2!==(null==l?void 0:l.level)&&5!==(null==l?void 0:l.level)||ye(),he(),function(){d.drivers&&d.drivers.cancel()}}),[l,p]),Object(i.useEffect)((function(){me()}),[]),Object(i.useEffect)((function(){be()}),[g]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,oP({},e,{searchValue:v,driverGroupList:J,driversList:W,paymethodsList:Z,businessesList:te,citiesList:oe,ordersStatusGroup:g,filterValues:j,multiOrderUpdateStatus:P,selectedOrderIds:ue,deletedOrderId:F,startMulitOrderStatusChange:x,startMulitOrderDelete:_,selectedSubOrderStatus:le,handleSelectedSubOrderStatus:fe,handleSelectedOrderIds:function(e){var t=lP(ue);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),se(t)},handleRemoveSelectedOrderId:function(e){var t=lP(ue);t=t.filter((function(t){return t!==e})),se(t)},handleChangeSearch:function(e){m(e)},handleChangeFilterValues:function(e){S(e)},handleOrdersStatusGroupFilter:function(e){e!==g&&(O(e),se([]))},handleChangeMultiOrdersStatus:function(e){C(e),A(!0)},handleDeleteMultiOrders:function(){k(!0)},setSelectedOrderIds:se,numberOfOrdersByStatus:N,numberOfOrdersBySubstatus:Y})))};function hP(){return hP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hP.apply(this,arguments)}function vP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vP(Object(n),!0).forEach((function(t){bP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function OP(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=jP(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function wP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||jP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jP(e,t){if(e){if("string"==typeof e)return SP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SP(e,t):void 0}}function SP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}yP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},yP.defaultProps={driversPropsToFetch:["id","name","lastname","assigned_orders_count","available","phone","cellphone","location","photo","qualification","last_order_assigned_at"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var EP=function(e){var t=e.UIComponent,n=wP(rn(),1)[0],r={},o=Cn(),s=wP(yn(),1)[0],c=s.token,l=s.loading,f=wP(Object(i.useState)({loading:!0,overview:{},error:null}),2),p=f[0],d=f[1],y=function(e){var t,n=0,r=0,o=0,a=0,i=0,u=OP(e);try{for(u.s();!(t=u.n()).done;){var s=t.value;n+=s.quantity,0===s.status&&(r+=s.quantity),3!==s.status&&4!==s.status&&7!==s.status&&8!==s.status&&9!==s.status||(o+=s.quantity),1!==s.status&&11!==s.status||(a+=s.quantity),2!==s.status&&5!==s.status&&6!==s.status&&10!==s.status&&12!==s.status||(i+=s.quantity)}}catch(e){u.e(e)}finally{u.f()}return{total:n,pending:r,inProgress:o,completed:a,cancelled:i}},h=function(){var e,t=(e=a.a.mark((function e(){var t,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(mP(mP({},p),{},{loading:!0})),t={},r.ordersOverview=t,e.next=6,n.setAccessToken(c).orders().summary({cancelToken:t});case 6:o=e.sent,i=o.content.result,u=y(i),d(mP(mP({},p),{},{overview:u,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(mP(mP({},p),{},{loading:!1,error:e.t0}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){gP(a,r,o,i,u,"next",e)}function u(e){gP(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),v=function(e){if(Array.isArray(e)){var t,n=OP(e);try{for(n.s();!(t=n.n()).done;){if("status"===t.value.attribute)return!0}}catch(e){n.e(e)}finally{n.f()}}else{if(null===e)return!1;if("status"===e.attribute)return!0}return!1};return Object(i.useEffect)((function(){if(!p.loading&&!l){var e=function(e){var t=e.history.filter((function(e){return v(e.data)}));if(0!==t.length){var n,r,o,a,i,u,s=t[t.length-1].data.filter((function(e){return v(e)}));n=s[0],r=[0],o=[3,4,7,8,9],a=[1,11],i=[2,5,6,10,12],u=mP({},p.overview),r.includes(n.old)?u.pending=u.pending-1:o.includes(n.old)?u.inProgress=u.inProgress-1:a.includes(n.old)?u.completed=u.completed-1:i.includes(n.old)&&(u.cancelled=u.cancelled-1),r.includes(n.new)?u.pending=u.pending+1:o.includes(n.new)?u.inProgress=u.inProgress+1:a.includes(n.new)?u.completed=u.completed+1:i.includes(n.new)&&(u.cancelled=u.cancelled+1),d(mP(mP({},p),{},{overview:u}))}},t=function(e){var t=mP({},p.overview);t.total+=1,t.pending+=1,d(mP(mP({},p),{},{overview:t}))};return o.join("orders"),o.on("update_order",e),o.on("orders_register",t),function(){o.leave("orders"),o.off("update_order",e),o.off("orders_register",t)}}}),[p.overview,o,l]),Object(i.useEffect)((function(){return h(),function(){r.ordersOverview&&r.ordersOverview.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,hP({},e,{ordersOverviewList:p})))};function PP(){return PP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PP.apply(this,arguments)}function CP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return IP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}EP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},EP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xP=function(e){var t=e.UIComponent,n=CP(vr(),2),r=n[0],o=n[1].changeType,a=CP(Object(i.useState)(null),2),s=a[0],c=a[1];return Object(i.useEffect)((function(){c(r.options.type)}),[r.options.type]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,PP({},e,{typeSelected:s||r.options.type,handleChangeOrderType:e.handleChangeOrderType||function(e){c(e),o(e)}})))};function AP(){return AP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AP.apply(this,arguments)}function TP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function _P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_P(Object(n),!0).forEach((function(t){DP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xP.propTypes={UIComponent:c.a.elementType,orderTypes:c.a.arrayOf(s.object),handleChangeOrderType:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xP.defaultProps={orderTypes:[1,2,3,4,5],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var BP=function(e){var t,n=e.isLoading,r=e.paymethods,o=e.businessId,s=e.onPaymentChange,c=e.UIComponent,l=UP(rn(),1)[0],f=(null===(t=UP(vr(),1)[0].carts["businessId:".concat(o)])||void 0===t?void 0:t.total)||0,p=UP(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),d=p[0],y=p[1],h=UP(Object(i.useState)(null),2),v=h[0],m=h[1],b=UP(Object(i.useState)({}),2),g=b[0],O=b[1],w=function(e){return e&&e.filter((function(e){var t;return!["paypal_express","authorize"].includes(null==e||null===(t=e.paymethod)||void 0===t?void 0:t.gateway)})).map((function(e){return kP(kP({},null==e?void 0:e.paymethod),{},{sandbox:null==e?void 0:e.sandbox,credentials:null==e?void 0:e.data})}))},j=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.businesses(o).get();case 3:t=e.sent,n=t.content,r=n.error,i=n.result,r||(d.paymethods=w(i.paymethods)),y(kP(kP({},d),{},{error:r?i:null,loading:!1,paymethods:r?[]:w(i.paymethods)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),y(kP(kP({},d),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){TP(a,r,o,i,u,"next",e)}function u(e){TP(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),S=function(e){O(e),v?s&&s({paymethodId:v.id,gateway:v.gateway,paymethod:v,data:e}):s&&s(null)};return Object(i.useEffect)((function(){["card_delivery","cash","stripe_redirect"].includes(null==v?void 0:v.gateway)?s&&s({paymethodId:v.id,gateway:v.gateway,paymethod:v,data:{}}):null===v&&s&&s(null)}),[v]),Object(i.useEffect)((function(){n||(r?y(kP(kP({},d),{},{loading:!1,paymethods:w(r)})):o?j():y(kP(kP({},d),{},{loading:!1})))}),[n]),u.a.createElement(u.a.Fragment,null,c&&u.a.createElement(c,AP({},e,{orderTotal:f,paymethodsList:d,paymethodSelected:v,paymethodData:g,handlePaymethodClick:function(e){m(e),S({})},handlePaymethodDataChange:S})))};function FP(){return FP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FP.apply(this,arguments)}function RP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RP(Object(n),!0).forEach((function(t){NP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function GP(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){zP(a,r,o,i,u,"next",e)}function u(e){zP(a,r,o,i,u,"throw",e)}i(void 0)}))}}function YP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}BP.propTypes={UIComponent:c.a.elementType,paymethods:c.a.array,businessId:c.a.number,onPaymentChange:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},BP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $P=function(e){var t=e.businessPaymethod,n=e.UIComponent,r=e.business,o=e.businessPaymethods,s=e.handleSuccessPaymethodUpdate,c=YP(Br(),2)[1].showToast,l=YP(Bn(),2)[1],f=YP(rn(),1)[0],p=YP(yn(),1)[0],d=p.user,y=p.token,h=YP(Object(i.useState)({url:null,loading:!0,error:null}),2),v=h[0],m=h[1],b=YP(Object(i.useState)({sandbox:null==t?void 0:t.sandbox,data:null==t?void 0:t.data,data_sandbox:null==t?void 0:t.data_sandbox}),2),g=b[0],O=b[1],w=YP(Object(i.useState)({loading:!1,error:null}),2),j=w[0],S=w[1],E=function(){var e=GP(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(MP(MP({},j),{},{loading:!1})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)}},e.next=5,fetch("".concat(f.root,"/users/").concat(null==d?void 0:d.id,"/keys"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?S(MP(MP({},j),{},{loading:!1,error:r.result})):(i=null===(o=r.result[0])||void 0===o?void 0:o.key)?(P(i),S(MP(MP({},j),{},{loading:!1,error:null}))):S(MP(MP({},j),{},{loading:!1,error:l("NO_API_KEY_SQUARE","There is no Api Key for Square connection")})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),S(MP(MP({},j),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=GP(a.a.mark((function e(t){var n,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(MP(MP({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({business_id:null==r?void 0:r.id,project_name:null==f?void 0:f.project,api_key:t})},"https://plugins-live.ordering.co/square/oauth/oauth",e.next=6,fetch("https://plugins-live.ordering.co/square/oauth/oauth",n);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,u=i.status,s=i.result,"ok"===u?(m(MP(MP({},v),{},{loading:!1,url:null==s?void 0:s.data.url})),C(null==s?void 0:s.data.url)):m(MP(MP({},v),{},{loading:!1,error:s})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m(MP(MP({},v),{},{loading:!1,error:[e.t0.message]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=window.open(e,"_blank","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,clearcache=yes"),n=setInterval((function(){t.closed?clearInterval(n):t.postMessage("data",f.url)}),200),r=null;window.addEventListener("message",(function(e){-1!==e.origin.indexOf(".ordering.co")&&(clearInterval(n),r&&clearTimeout(r),r=setTimeout((function(){t.postMessage("close",f.url),e.data&&(O(e.data.paymethod_credentials),t.close())}),1e3))}))},I=function(){var e=GP(a.a.mark((function e(t){var n,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),S(MP(MP({},j),{},{loading:!0})),n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y)},body:JSON.stringify({sandbox:null==g?void 0:g.sandbox,data:JSON.stringify(null==g?void 0:g.data),data_sandbox:JSON.stringify(null==g?void 0:g.data_sandbox)})},e.next=6,fetch("".concat(f.root,"/business/").concat(r.id,"/paymethods/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error||(p=o.map((function(e){return e.id===t&&Object.assign(e,u.result),e})),s&&s(p),c(Dr.Success,l("PAYMETHOD_SAVED","Payment method saved"))),S({loading:!1,error:u.error?u.result:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),S({error:[e.t0.message],loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,FP({},e,{squareUrlState:v,squareData:g,actionState:j,handleConnectSquare:E,handleSavePaymethod:I,handleChangeDataInput:function(e){O(MP(MP({},g),{},{data:MP(MP({},null==g?void 0:g.data),{},NP({},e.target.name,e.target.value))}))},handleChangeSanboxDataInput:function(e){O(MP(MP({},g),{},{data_sandbox:MP(MP({},null==g?void 0:g.data_sandbox),{},NP({},e.target.name,e.target.value))}))},handleChangeSandbox:function(e){O(MP(MP({},g),{},{sandbox:e}))}})))};function JP(){return JP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JP.apply(this,arguments)}function VP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VP(Object(n),!0).forEach((function(t){WP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KP(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function XP(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){KP(a,r,o,i,u,"next",e)}function u(e){KP(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ZP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return QP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}$P.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$P.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var eC=function(e){var t=e.UIComponent,n=e.propsToFetch,r=ZP(rn(),1)[0],o=ZP(yn(),1)[0].token,s=ZP(Br(),2)[1].showToast,c=ZP(Bn(),2)[1],l=ZP(Object(i.useState)({pages:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=ZP(Object(i.useState)(null),2),y=d[0],h=d[1],v=ZP(Object(i.useState)({changes:{},loading:!1,error:null}),2),m=v[0],b=v[1],g=ZP(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=function(){var e=XP(a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(HP(HP({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/pages?params=").concat(n.toString()),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(u=e.sent).error||p({pages:u.result,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(HP(HP({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=XP(a.a.mark((function e(){var t,n,i,u,l,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,t=HP({},m.changes),n={},t)""!==t[i]&&(n=HP(HP({},n),{},WP({},i,t[i])));if(0!==Object.keys(n).length){e.next=6;break}return e.abrupt("return");case 6:return s(Dr.Info,c("LOADING","Loading")),b(HP(HP({},m),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=11,fetch("".concat(r.root,"/pages/").concat(y),u);case 11:return l=e.sent,e.next=14,l.json();case 14:(p=e.sent).error?b(HP(HP({},m),{},{result:{error:!0,result:p.result},loading:!1})):(d=f.pages.filter((function(e){var t,n,r,o;e.id===y&&(e.name=null!==(t=m.changes)&&void 0!==t&&t.name?null===(n=m.changes)||void 0===n?void 0:n.name:null==e?void 0:e.name,e.enabled=null!==(r=null===(o=m.changes)||void 0===o?void 0:o.enabled)&&void 0!==r?r:null==e?void 0:e.enabled);return e})),C(d),b(HP(HP({},m),{},{loading:!1,changes:{}})),s(Dr.Success,c("PAGE_SAVED","Page saved"))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),b(HP(HP({},m),{},{loading:!1,error:[e.t0.message]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=XP(a.a.mark((function e(t){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(HP(HP({},O),{},{loading:!0})),s(Dr.Info,c("LOADING","Loading")),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/pages/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(w(HP(HP({},O),{},{loading:!1})),u=f.pages.filter((function(e){return e.id!==t})),C(u),s(Dr.Success,c("PAGE_DELETED","Page Deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),P=null,C=function(e){p(HP(HP({},f),{},{pages:e}))};return Object(i.useEffect)((function(){m.loading||0===Object.keys(null==m?void 0:m.changes).length||S()}),[m]),Object(i.useEffect)((function(){j()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,JP({},e,{pagesListState:f,handleChangeState:function(e,t,n){h(e),"name"===t?(clearTimeout(P),P=setTimeout((function(){b(HP(HP({},m),{},{changes:WP({},t,n)}))}),1e3)):b(HP(HP({},m),{},{changes:WP({},t,n)}))},handleUpdatePageList:C,handleDeletePage:E})))};function tC(){return tC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tC.apply(this,arguments)}function nC(e){return function(e){if(Array.isArray(e))return lC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rC(Object(n),!0).forEach((function(t){aC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function uC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){iC(a,r,o,i,u,"next",e)}function u(e){iC(a,r,o,i,u,"throw",e)}i(void 0)}))}}function sC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||cC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cC(e,t){if(e){if("string"==typeof e)return lC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lC(e,t):void 0}}function lC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eC.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eC.defaultProps={propsToFetch:["name","enabled"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fC=function(e){var t=e.UIComponent,n=e.pageId,r=e.pageList,o=e.handleSuccessUpdate,s=e.handleCancel,c=sC(rn(),1)[0],l=sC(yn(),1)[0].token,f=sC(Br(),2)[1].showToast,p=sC(Bn(),2)[1],d=sC(Object(i.useState)({page:{},loading:!1,error:null}),2),y=d[0],h=d[1],v=sC(Object(i.useState)({images:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=sC(Object(i.useState)({loading:!1,change:{},error:null}),2),O=g[0],w=g[1],j=sC(Object(i.useState)({loading:!1,error:null}),2),S=j[0],E=j[1],P=sC(Object(i.useState)({loading:!1,changes:{},error:null}),2),C=P[0],I=P[1],x=sC(Object(i.useState)(null),2),A=x[0],T=x[1],_=sC(Object(i.useState)(null),2),k=_[0],D=_[1],U=function(){var e=uC(a.a.mark((function e(){var t,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(oC(oC({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/pages/").concat(n),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(o=e.sent).error||h({page:o.result,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(oC(oC({},y),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=uC(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(oC(oC({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/files?where={%22type%22:1}"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error||b({images:r.result,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),b(oC(oC({},m),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=uC(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),w(oC(oC({},O),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(O.change)},e.next=6,fetch("".concat(c.root,"/files"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:(r=e.sent).error?w(oC(oC({},O),{},{loading:!1,error:r.result})):(w({loading:!1,change:{},error:null}),i=[].concat(nC(m.images),[r.result]),b(oC(oC({},m),{},{images:i})),f(Dr.Success,p("GALLERY_IMAGE_ADDED","Business gallery image added")),T(null==r||null===(o=r.result)||void 0===o?void 0:o.source)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(oC(oC({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=uC(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),E(oC(oC({},S),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=6,fetch("".concat(c.root,"/files/").concat(t),n);case 6:return r=e.sent,e.next=9,r.json();case 9:(o=e.sent).error?E({loading:!1,error:o.result}):(E({loading:!1,error:null}),i=m.images.filter((function(e){return e.id!==t})),b(oC(oC({},m),{},{images:i})),f(Dr.Success,p("FILE_DELETED","File deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),E({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=uC(a.a.mark((function e(){var t,i,u,s,d,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u in e.prev=0,t=oC({},C.changes),i={},t)""!==t[u]&&(i=oC(oC({},i),{},aC({},u,t[u])));if(0!==Object.keys(i).length){e.next=6;break}return e.abrupt("return");case 6:return f(Dr.Info,p("LOADING","Loading")),I(oC(oC({},C),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=11,fetch("".concat(c.root,"/pages/").concat(n),s);case 11:return d=e.sent,e.next=14,d.json();case 14:(y=e.sent).error?I({loading:!1,error:y.result}):(o&&(h=r.filter((function(e){var t,r,o,a;e.id===n&&(e.name=null!==(t=C.changes)&&void 0!==t&&t.name?null===(r=C.changes)||void 0===r?void 0:r.name:null==e?void 0:e.name,e.enabled=null!==(o=null===(a=C.changes)||void 0===a?void 0:a.enabled)&&void 0!==o?o:null==e?void 0:e.enabled);return e})),o(h)),I(oC(oC({},C),{},{changes:{},loading:!1,error:null})),f(Dr.Success,p("PAGE_SAVED","Page Saved"))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),I(oC(oC({},C),{},{loading:!1,error:[e.t0.message]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=uC(a.a.mark((function e(){var t,n,i,u,d,y,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u in e.prev=0,n=oC({},C.changes),i={},n)""!==n[u]&&(i=oC(oC({},i),{},aC({},u,n[u])));if(0!==Object.keys(i).length){e.next=6;break}return e.abrupt("return");case 6:return i.enabled=!0,null!==(t=i)&&void 0!==t&&t.body||(i.body="<p><br></p>"),f(Dr.Info,p("LOADING","Loading")),I(oC(oC({},C),{},{loading:!0})),d={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=13,fetch("".concat(c.root,"/pages"),d);case 13:return y=e.sent,e.next=16,y.json();case 16:(h=e.sent).error?I(oC(oC({},C),{},{loading:!1,error:h.result})):(o&&(v=[].concat(nC(r),[h.result]),o(v)),s&&s(),I(oC(oC({},C),{},{changes:{},loading:!1,error:null})),f(Dr.Success,p("PAGE_ADDED","Page Added"))),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),I(oC(oC({},C),{},{loading:!1,error:[e.t0.message]}));case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0!==Object.keys(O.change).length&&B()}),[O.change]),Object(i.useEffect)((function(){L(),n?(U(),D(!1)):D(!0)}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,tC({},e,{isAddMode:k,pageState:y,imageListState:m,insertImageState:O,formState:C,selectedImageUrl:A,setSelectedImageUrl:T,handleInsertImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){w(oC(oC({},O),{},{change:{source:t.result,type:1}}))},t.onerror=function(e){return console.log(e)}},handleDeleteImage:F,handleChangeFormState:function(e,t){I(oC(oC({},C),{},{changes:oC(oC({},C.changes),{},aC({},e,t))}))},handleSavePage:R,handleAddPage:M})))};function pC(){return pC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pC.apply(this,arguments)}function dC(e){return function(e){if(Array.isArray(e))return wC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||OC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yC(Object(n),!0).forEach((function(t){vC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){mC(a,r,o,i,u,"next",e)}function u(e){mC(a,r,o,i,u,"throw",e)}i(void 0)}))}}function gC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||OC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OC(e,t){if(e){if("string"==typeof e)return wC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wC(e,t):void 0}}function wC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}fC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fC.defaultProps={propsToFetch:["name","enabled"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jC=function(e){var t=e.UIComponent,n=e.cityMangersPropsToFetch,r=gC(rn(),1)[0],o=gC(yn(),1)[0].token,s=gC(Br(),2)[1].showToast,c=gC(Bn(),2)[1],l=gC(Object(i.useState)({countries:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=gC(Object(i.useState)({options:[],loading:!1,error:null}),2),y=d[0],h=d[1],v=gC(Object(i.useState)({users:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=gC(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=gC(Object(i.useState)(null),2),S=j[0],E=j[1],P=gC(Object(i.useState)({}),2),C=P[0],I=P[1],x=gC(Object(i.useState)(!1),2),A=x[0],T=x[1],_=gC(Object(i.useState)([]),2),k=_[0],D=_[1],U=gC(Object(i.useState)(!1),2),L=U[0],B=U[1],F=gC(Object(i.useState)(null),2),R=F[0],M=F[1],N=gC(Object(i.useState)([]),2),z=N[0],G=N[1],Y=gC(Object(i.useState)(!1),2),q=Y[0],$=Y[1],J=function(){var e=bC(a.a.mark((function e(){var t,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(hC(hC({},f),{},{loading:!0})),e.next=4,r.countries().get();case 4:t=e.sent,n=t.content,o=n.error,i=n.result,p(hC(hC({},f),{},o?{loading:!1,error:i}:{loading:!1,countries:i})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p(hC(hC({},f),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=bC(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(hC(hC({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(r.root,"/dropdownoptions"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error?h(hC(hC({},y),{},{loading:!1,error:i.result})):h(hC(hC({},y),{},{loading:!1,options:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(hC(hC({},y),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=bC(a.a.mark((function e(t,n){var o,i,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(hC(hC({},O),{},{loading:!0})),e.next=5,r.countries(t).save(n);case 5:o=e.sent,i=o.content,u=i.error,l=i.result,u||(d=f.countries.filter((function(e){return e.id===t&&Object.assign(e,l),!0})),p(hC(hC({},f),{},{countries:d})),s(Dr.Success,c("COUNTRY_SAVED","Country saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=bC(a.a.mark((function e(t,n,o){var i,u,l,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(hC(hC({},O),{},{loading:!0})),e.next=5,r.countries(t).cities(n).save(o);case 5:i=e.sent,u=i.content,l=u.error,d=u.result,l?w(hC(hC({},O),{},{loading:!1,error:d})):(y=f.countries.map((function(e){if(e.id===t){var r=e.cities.filter((function(e){return e.id===n&&Object.assign(e,d),!0}));e.cities=r}return e})),p(hC(hC({},f),{},{countries:y})),s(Dr.Success,c("CITY_SAVED","City saved")),I({})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,r){return e.apply(this,arguments)}}(),K=function(){var e=bC(a.a.mark((function e(t,n){var o,i,u,l,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(hC(hC({},O),{},{loading:!0})),e.next=5,r.countries(t).cities(n).delete();case 5:o=e.sent,i=o.content,u=i.error,l=i.result,u?(w(hC(hC({},O),{},{loading:!1,error:l})),$(!1)):(d=f.countries.map((function(e){if(parseInt(e.id)===parseInt(t)){var r=e.cities.filter((function(e){return e.id!==n}));e.cities=r}return e})),p(hC(hC({},f),{},{countries:d})),s(Dr.Success,c("CITY_REMOVED","City removed")),q&&((y=dC(k)).shift(),0===y.length&&$(!1),D(y))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]}),$(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=bC(a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(hC(hC({},m),{},{loading:!0})),t={},e.next=5,r.setAccessToken(o).users().select(n).where([{attribute:"level",value:[1]}]).get({cancelToken:t});case 5:i=e.sent,u=i.content.result,b(hC(hC({},m),{},{loading:!1,users:u})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),b(hC(hC({},m),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=bC(a.a.mark((function e(){var t,n,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=C&&C.country_id){e.next=3;break}return w(hC(hC({},O),{},{error:c("SELECT_COUNTRY","Select a country")})),e.abrupt("return");case 3:return e.prev=3,s(Dr.Info,c("LOADING","Loading")),w(hC(hC({},O),{},{loading:!0})),C.enabled=!0,e.next=9,r.countries(null==C?void 0:C.country_id).cities().save(C);case 9:t=e.sent,n=t.content,o=n.error,i=n.result,o?w(hC(hC({},O),{},{loading:!1,error:i})):(u=f.countries.map((function(e){if(e.id===(null==C?void 0:C.country_id)){var t=[].concat(dC(e.cities),[i]);e.cities=t}return e})),p(hC(hC({},f),{},{countries:u})),s(Dr.Success,c("CITY_ADDED","City added")),I({}),T(!1)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),w({loading:!1,error:[e.t0.message]});case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=bC(a.a.mark((function e(t,n){var i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(hC(hC({},O),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(n)},e.next=6,fetch("".concat(r.root,"/dropdownoptions/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?w(hC(hC({},O),{},{loading:!1,error:l.result})):(w(hC(hC({},O),{},{loading:!1})),f=y.options.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),h(hC(hC({},y),{},{options:f})),s(Dr.Success,c("ZONE_SAVED","Zone saved")),I({})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),ee=function(){var e=bC(a.a.mark((function e(){var t,n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=C&&C.name){e.next=3;break}return w(hC(hC({},O),{},{error:c("NAME_REQUIRED","The name is required.")})),e.abrupt("return");case 3:return e.prev=3,s(Dr.Info,c("LOADING","Loading")),w(hC(hC({},O),{},{loading:!0})),C.enabled=!0,t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(C)},e.next=10,fetch("".concat(r.root,"/dropdownoptions"),t);case 10:return n=e.sent,e.next=13,n.json();case 13:(i=e.sent).error?w(hC(hC({},O),{},{loading:!1,error:i.result})):(u=[].concat(dC(y.options),[i.result]),h(hC(hC({},y),{},{options:u})),s(Dr.Success,c("ZONE_ADDED","Zone added")),I({}),B(!1),w(hC(hC({},O),{},{loading:!1}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),w({loading:!1,error:[e.t0.message]});case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=bC(a.a.mark((function e(t){var n,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,c("LOADING","Loading")),w(hC(hC({},O),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(r.root,"/dropdownoptions/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?(w(hC(hC({},O),{},{loading:!1,error:u.result})),$(!1)):(l=y.options.filter((function(e){return e.id!==t})),h(hC(hC({},y),{},{options:l})),s(Dr.Success,c("ZONE_REMOVED","Zone removed")),q&&((f=dC(z)).shift(),0===f.length&&$(!1),G(f))),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]}),$(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;q&&0!==z.length&&te(null===(e=z[0])||void 0===e?void 0:e.id)}),[z,q]),Object(i.useEffect)((function(){var e,t;q&&0!==k.length&&K(null===(e=k[0])||void 0===e?void 0:e.country_id,null===(t=k[0])||void 0===t?void 0:t.id)}),[k,q]),Object(i.useEffect)((function(){I({})}),[S]),Object(i.useEffect)((function(){X(),J(),V()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,pC({},e,{countriesState:f,dropdownOptionsState:y,cityManagerList:m,actionState:O,handleChangeCountryName:H,handleUpdateCity:W,handleDeleteCity:K,selectedCity:S,setSelectedCity:E,openCity:A,setOpenCity:T,changesState:C,handleChangesState:function(e,t){I(hC(hC({},C),{},vC({},e,t)))},cleanChagesState:function(){return I({})},handleSaveCity:function(){W(null==S?void 0:S.country_id,null==S?void 0:S.id,C)},handleAddCity:Z,selectedCityList:k,handleCheckboxClick:function(e){if(k.find((function(t){return(null==t?void 0:t.id)===e.id}))){var t=k.filter((function(t){return t.id!==e.id}));D(t)}else D([].concat(dC(k),[e]))},handleAllCheckboxClick:function(){var e,t=null===(e=f.countries)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(dC(e),dC(null==t?void 0:t.cities))}),[]);t.length===k.length?D([]):D(t)},handleSeveralDeleteCities:function(){$(!0)},handleUpdateDropdown:Q,openZoneDropdown:L,setOpenZonedropdown:B,selectedZoneDropdown:R,setSelectedZoneDropdown:M,handleSaveZone:function(){Q(null==R?void 0:R.id,C)},handleAddZone:ee,handleDeleteZone:te,selectedZoneList:z,handleCheckboxZoneClick:function(e){if(z.find((function(t){return(null==t?void 0:t.id)===e.id}))){var t=z.filter((function(t){return t.id!==e.id}));G(t)}else G([].concat(dC(z),[e]))},handleAllCheckboxZoneClick:function(){var e=dC(y.options);e.length===z.length?G([]):G(e)},handleSeveralDeleteZones:function(){$(!0)}})))};function SC(){return SC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SC.apply(this,arguments)}function EC(e){return function(e){if(Array.isArray(e))return kC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PC(Object(n),!0).forEach((function(t){IC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function IC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function AC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){xC(a,r,o,i,u,"next",e)}function u(e){xC(a,r,o,i,u,"throw",e)}i(void 0)}))}}function TC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||_C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _C(e,t){if(e){if("string"==typeof e)return kC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kC(e,t):void 0}}function kC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}jC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jC.defaultProps={cityMangersPropsToFetch:["id","name","lastname"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var DC=function(e){var t=e.UIComponent,n=TC(rn(),1)[0],r=TC(yn(),1)[0].token,o=TC(Br(),2)[1].showToast,s=TC(Bn(),2)[1],c=TC(Object(i.useState)({plugins:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=TC(Object(i.useState)(!1),2),d=p[0],y=p[1],h=TC(Object(i.useState)(null),2),v=h[0],m=h[1],b=TC(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(){var e=AC(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(CC(CC({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/plugins"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||f(CC(CC({},l),{},{plugins:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(CC(CC({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=AC(a.a.mark((function e(){var t,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),O(CC(CC({},g),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({url:v})},e.next=6,fetch("".concat(n.root,"/plugins"),t);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?O({loading:!1,error:u.result}):(O(CC(CC({},g),{},{loading:!1})),c=[].concat(EC(l.plugins),[u.result]),f(CC(CC({},l),{},{plugins:c})),o(Dr.Success,s("PLUGIN_SAVED","Plugin saved")),y(!1),m(null)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=AC(a.a.mark((function e(t){var i,u,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),O(CC(CC({},g),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=6,fetch("".concat(n.root,"/plugins/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(c=e.sent).error?O({loading:!1,error:c.result}):(O(CC(CC({},g),{},{loading:!1})),p=l.plugins.filter((function(e){return e.id!==t})),f(CC(CC({},l),{},{plugins:p})),o(Dr.Success,s("PLUGIN_REMOVED","Plugin removed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=AC(a.a.mark((function e(t,i){var u,c,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),O(CC(CC({},g),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(i)},e.next=6,fetch("".concat(n.root,"/plugins/").concat(t),u);case 6:return c=e.sent,e.next=9,c.json();case 9:(p=e.sent).error?O({loading:!1,error:p.result}):(O(CC(CC({},g),{},{loading:!1})),d=l.plugins.filter((function(e){return e.id===t&&Object.assign(e,p.result),!0})),f(CC(CC({},l),{},{plugins:d})),o(Dr.Success,s("PLUGIN_SAVED","Plugin saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,SC({},e,{pluginListState:l,isAddMode:d,setIsAddMode:y,setNewUrl:m,actionState:g,handleAddNewPlugin:j,handleDeletePlugin:S,handleUpdatePlugin:E})))};DC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},DC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var UC=n(11),LC=n.n(UC);function BC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return FC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var RC=function(e){var t=e.UIComponent,n=e.open,r=e.backdropClassName,o=e.closeOnBackdrop,a=e.onClose,s=Object(i.useRef)(null),c=BC(Object(i.useState)(),2),l=c[0],f=c[1],p=BC(Object(i.useState)(),2),d=p[0],y=p[1],h=BC(Object(i.useState)(!1),2),v=h[0],m=h[1],b=function(){var e=document.querySelectorAll(".popup-component");if(!n&&e.length>1&&e.length>1&&e[e.length-1].focus(),v){var t=window.document.getElementById("app-modals");t&&t.remove(),window.document.body.style.overflow=d}};Object(i.useEffect)((function(){if(n){var e=window.document.getElementById("app-modals");e?f(e):((e=window.document.createElement("div")).id="app-modals",e.className="popup-component-backdrop popup-backdrop"+(r?" ".concat(r):""),document.body.append(e),f(e),m(!0),y(window.document.body.style.overflow)),s.current&&s.current.focus()}return b}),[n,v,d]);return u.a.createElement(u.a.Fragment,null,n&&l&&LC.a.createPortal(u.a.createElement("div",{className:"popup-component",style:{position:"fixed",top:0,left:0,bottom:0,right:0,zIndex:2001,outline:"none"},onClick:function(e){o&&e.target.classList.contains("popup-component")&&a&&a()},onKeyDown:function(e){27===e.keyCode&&e.target.classList.contains("popup-component")&&a&&a()},tabIndex:-1,autoFocus:!0,ref:s},t&&u.a.createElement(t,e)),l))};function MC(){return MC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MC.apply(this,arguments)}function NC(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function zC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){NC(a,r,o,i,u,"next",e)}function u(e){NC(a,r,o,i,u,"throw",e)}i(void 0)}))}}function GC(e){return function(e){if(Array.isArray(e))return HC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||VC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YC(Object(n),!0).forEach((function(t){$C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||VC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VC(e,t){if(e){if("string"==typeof e)return HC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HC(e,t):void 0}}function HC(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}RC.propTypes={UIComponent:c.a.elementType,open:c.a.bool,closeOnBackdrop:c.a.bool,closeWithKeyboard:c.a.bool,title:c.a.string,content:c.a.oneOfType([c.a.string,c.a.arrayOf(s.string),c.a.elementType,c.a.element]),onAccept:c.a.func,onCancel:c.a.func,onClose:c.a.func},RC.defaultProps={open:!1,closeOnBackdrop:!0,closeWithKeyboard:!0};var WC=function(e){var t=e.UIComponent,n=JC(rn(),1)[0],r=JC(yn(),1)[0].token,o=JC(Br(),2)[1].showToast,s=JC(Bn(),2)[1],c=JC(Object(i.useState)({loading:!1,levels:[],error:null}),2),l=c[0],f=c[1],p=JC(Object(i.useState)({loading:!1,changes:{},error:null}),2),d=p[0],y=p[1],h=function(){var e=zC(a.a.mark((function e(){var t,i,u,c,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),y(qC(qC({},d),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(d.changes)},i="".concat(n.root,"/loyalty_levels"),e.next=7,fetch(i,t);case 7:return u=e.sent,e.next=10,u.json();case 10:c=e.sent,p=c.error,h=c.result,p?y(qC(qC({},d),{},{loading:!1,error:h})):(o(Dr.Success,s("LEVEL_ADDED","Level added")),y(qC(qC({},d),{},{loading:!1,error:null,changes:{}})),a=h,v=void 0,(v=GC(l.levels)).push(a),f(qC(qC({},l),{},{levels:v}))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),y(qC(qC({},d),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}var a,v}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=zC(a.a.mark((function e(){var t,o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(qC(qC({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},o="".concat(n.root,"/loyalty_levels"),e.next=6,fetch(o,t);case 6:return i=e.sent,e.next=9,i.json();case 9:u=e.sent,s=u.error,c=u.result,f(qC(qC({},l),{},s?{loading:!1,error:c}:{loading:!1,error:null,levels:c})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),f(qC(qC({},l),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){v()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,MC({},e,{levelList:l,formState:d,handleChangeItem:function(e){var t=qC(qC({},null==d?void 0:d.changes),e);y(qC(qC({},d),{},{changes:t}))},handleChangeInput:function(e){var t=qC(qC({},null==d?void 0:d.changes),{},$C({},e.target.name,e.target.value));y(qC(qC({},d),{},{changes:t}))},handleUpdateAddClick:h,handleUpdateLevelList:function(e){var t=null==l?void 0:l.levels.map((function(t){return t.id===e.id?e:t}));f(qC(qC({},l),{},{levels:t}))},handleDeleteLevelList:function(e){var t,n=null==l||null===(t=l.levels)||void 0===t?void 0:t.filter((function(t){return t.id!==e.id}));f(qC(qC({},l),{},{levels:n}))}})))};WC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},WC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var KC="change_ingredients",XC="change_options",ZC=Object(i.createContext)(),QC=function(){return Object(i.useContext)(ZC)||[{},function(){}]};function eI(){return eI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eI.apply(this,arguments)}function tI(e){return function(e){if(Array.isArray(e))return oI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||rI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rI(e,t){if(e){if("string"==typeof e)return oI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oI(e,t):void 0}}function oI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var aI=function(e){var t=e.product,n=e.UIComponent,r=nI(QC(),2),o=r[0].ingredients,a=r[1],s=nI(QC(),2),c=s[0].options,l=s[1],f=nI(Object(i.useState)(1),2),p=f[0],d=f[1],y=nI(Object(i.useState)(t.price),2),h=y[0],v=y[1],m=nI(Object(i.useState)(""),2),b=m[0],g=m[1],O=function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n].suboptions,o=0;o<r.length;o++)if(r[o].id==t)return r[o].isChecked;return!1};Object(i.useEffect)((function(){!function(){for(var e=t.ingredients,n=0;n<e.length;n++)e[n].isChecked=!0;a({type:KC,ingredients:e})}(),function(){for(var e=[],n=t.extras,r=0;r<n.length;r++)e.push.apply(e,tI(n[r].options));for(var o=0;o<e.length;o++){var a=e[o];if(a.isDisplay=!0,a.conditioned){var i=a.respect_to;void 0!==i&&""!==i&&"null"!=i||(a.isDisplay=!1),O(e,i)||(a.isDisplay=!1)}for(var u=a.suboptions,s=0;s<u.length;s++)u[s].isChecked=!1}l({type:XC,options:e})}()}),[]);var w=function(e,n){for(var r=0,o=0;o<n.length;o++)if(0!=n[o].isDisplay)for(var a=n[o].suboptions,i=0;i<a.length;i++)a[i].isChecked&&(r+=parseFloat(a[i].price));var u=(parseFloat(t.price)+r)*e;v(u)};return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,eI({},e,{onShare:function(){e.onShare&&e.onShare(t)},onClose:function(){e.onClose&&e.onClose()},productName:t.name,productLogo:t.images,productCount:p,productPrice:h,ingredients:o,options:c,note:b,onChangedIngredient:function(e){o[e].isChecked=!o[e].isChecked,a({type:KC,ingredients:o})},onChangedOption:function(e,t,n){if(n){for(var r=0;r<c[e].suboptions.length;r++)c[e].suboptions[r].isChecked=!1;c[e].suboptions[t].isChecked=!0}else c[e].suboptions[t].isChecked=!c[e].suboptions[t].isChecked;for(var o=0;o<c.length;o++){var a=c[o];if(a.isDisplay=!0,a.conditioned){var i=a.respect_to;void 0!==i&&""!==i&&"null"!=i||(a.isDisplay=!1),O(c,i)||(a.isDisplay=!1)}}w(p,c),l({type:XC,options:c})},onChangedNote:function(e){g(e.target.value)},onClickedButtonPlus:function(){d(p+1),w(p+1,c)},onClickedButtonMinus:function(){p>1&&(d(p-1),w(p-1,c))},onClickedButtonAdd:function(){e.onClickedButtonAdd&&(t.ingredients=o,t.options=c,t.note=b,t.quantity=p,e.onAdd(t))}})))};function iI(){return iI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iI.apply(this,arguments)}function uI(e){return function(e){if(Array.isArray(e))return hI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function cI(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sI(a,r,o,i,u,"next",e)}function u(e){sI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function lI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lI(Object(n),!0).forEach((function(t){pI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||yI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yI(e,t){if(e){if("string"==typeof e)return hI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hI(e,t):void 0}}function hI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}aI.propTypes={UIComponent:c.a.elementType,onShare:c.a.func,onClose:c.a.func,productName:c.a.string,productLogo:c.a.string,productCount:c.a.number,productPrice:c.a.number,ingredients:c.a.array,options:c.a.array,note:c.a.array,onChangedIngredient:c.a.func,onChangedOption:c.a.func,onChangedNote:c.a.func,onClickedButtonPlus:c.a.func,onClickedButtonMinues:c.a.func,onClickedButtonAdd:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},aI.defaultProps={productName:""};var vI=function(e){var t=e.business,n=e.UIComponent,r=e.productId,o=e.categoryId,s=e.handleUpdateBusinessState,c=dI(rn(),1)[0],l=dI(yn(),1)[0],f=dI(Br(),2)[1].showToast,p=dI(Bn(),2)[1],d=dI(Object(i.useState)({loading:!1,product:null,error:null}),2),y=d[0],h=d[1],v=dI(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),m=v[0],b=v[1],g=dI(Object(i.useState)({ingredients:{},options:{}}),2),O=g[0],w=g[1],j=function(){var e=cI(a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(fI(fI({},y),{},{loading:!0})),e.next=4,c.businesses(t.id).categories(o).products(r).get();case 4:n=e.sent,i=n.content,u=i.error,s=i.result,h(u?fI(fI({},y),{},{loading:!1,error:s}):{loading:!1,product:s,error:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),h(fI(fI({},y),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=cI(a.a.mark((function e(n){var r,o,i,u,s,d,h,v,g,O,w,j,S,E,P,I;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),b(fI(fI({},m),{},{loading:!0})),i=fI({},n||m.changes),u=fI({},n||m.changes),e.next=7,c.businesses(null==t?void 0:t.id).categories(null==y||null===(r=y.product)||void 0===r?void 0:r.category_id).products(null==y||null===(o=y.product)||void 0===o?void 0:o.id).save(i,{accessToken:l.token});case 7:if(s=e.sent,d=s.content,h=d.error,v=d.result,b(fI(fI({},m),{},{changes:h?m.changes:{},result:{error:h,result:v},loading:!1})),h){e.next=24;break}if(void 0===(null==u||null===(g=u.ribbon)||void 0===g?void 0:g.enabled)||null!=u&&null!==(O=u.ribbon)&&void 0!==O&&O.enabled||null==v||null===(w=v.ribbon)||void 0===w||!w.enabled){e.next=22;break}return E={ribbon:{enabled:!1}},e.next=17,c.businesses(null==t?void 0:t.id).categories(null==y||null===(j=y.product)||void 0===j?void 0:j.category_id).products(null==y||null===(S=y.product)||void 0===S?void 0:S.id).save(E,{accessToken:l.token});case 17:P=e.sent,I=P.content,C(null==I?void 0:I.result),e.next=23;break;case 22:C(v);case 23:f(Dr.Success,p("PRODUCT_SAVED","Product saved"));case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),b(fI(fI({},m),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var n=cI(a.a.mark((function n(){var r,o,i,u,l,d,h;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(Dr.Info,p("LOADING","Loading")),b(fI(fI({},m),{},{loading:!0})),n.next=5,c.businesses(parseInt(null==t?void 0:t.id)).categories(parseInt(null===(r=y.product)||void 0===r?void 0:r.category_id)).products(null===(o=y.product)||void 0===o?void 0:o.id).delete();case 5:i=n.sent,u=i.content,l=u.error,d=u.result,l?b(fI(fI({},m),{},{loading:!1,result:{error:!0,result:d}})):(b(fI(fI({},m),{},{loading:!1,result:{error:!1,result:d}})),s&&((h=uI(null==t?void 0:t.categories)).forEach((function e(t){var n;if(t.id===(null===(n=y.product)||void 0===n?void 0:n.category_id)){var r=t.products.filter((function(e){return e.id!==y.product.id}));t.products=uI(r)}Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),s(fI(fI({},t),{},{categories:h}))),f(Dr.Success,p("PRODUCT_DELETED","Product deleted")),e.onClose&&e.onClose()),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),b(fI(fI({},m),{},{loading:!1,result:{error:!0,result:n.t0}}));case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(){return n.apply(this,arguments)}}(),P=function(t){for(var n,r=0,o=0;o<(null===(a=e.product)||void 0===a||null===(i=a.extras)||void 0===i?void 0:i.length);o++)for(var a,i,u,s=null===(u=e.product)||void 0===u?void 0:u.extras[o],c=0;c<(null===(l=s.options)||void 0===l?void 0:l.length);c++)for(var l,f=s.options[c],p=0;p<(null===(d=f.suboptions)||void 0===d?void 0:d.length);p++){var d,y,h,v=f.suboptions[p];if(null!==(y=t.options["id:".concat(f.id)])&&void 0!==y&&null!==(h=y.suboptions["id:".concat(v.id)])&&void 0!==h&&h.selected){var m=t.options["id:".concat(f.id)].suboptions["id:".concat(v.id)],b=f.allow_suboption_quantity?m.quantity:1;r+=(f.with_half_option&&v.half_price&&"whole"!==m.position?v.half_price:v.price)*b}}return(null===(n=e.product)||void 0===n?void 0:n.price)+r},C=function(e){if(h(fI(fI({},y),{},{product:fI(fI({},y.product),e)})),s){var n=uI(null==t?void 0:t.categories);n.forEach((function t(n){var r;if(n.id===(null===(r=y.product)||void 0===r?void 0:r.category_id)){var o=n.products.map((function(t){return t.id===y.product.id?fI(fI({},t),e):t}));n.products=uI(o)}Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(t)}));var r=fI(fI({},t),{},{categories:n});s(r)}};return Object(i.useEffect)((function(){e.product?(h(fI(fI({},y),{},{product:e.product})),function(t){var n,r,o,a,i={};for(var u in t.ingredients){var s=t.ingredients[u];i["id:".concat(s.id)]={selected:!0}}var c=fI(fI({},e.productCart),{},{id:t.id,price:t.price,name:t.name,businessId:e.businessId,categoryId:t.category_id,inventoried:t.inventoried,stock:t.quantity,ingredients:(null===(n=e.productCart)||void 0===n?void 0:n.ingredients)||i,options:(null===(r=e.productCart)||void 0===r?void 0:r.options)||{},comment:(null===(o=e.productCart)||void 0===o?void 0:o.comment)||null,quantity:(null===(a=e.productCart)||void 0===a?void 0:a.quantity)||1});c.unitTotal=P(c),c.total=c.unitTotal*c.quantity,w(c)}(e.product)):r&&o&&j()}),[e.product]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,iI({},e,{productState:y,productCart:O,formState:m,cleanFormState:function(e){return b(fI(fI({},m),e))},handleChangeRibbon:function(e){var t,n,r=null!=m&&null!==(t=m.changes)&&void 0!==t&&t.ribbon?fI(fI({},null==m||null===(n=m.changes)||void 0===n?void 0:n.ribbon),e):fI({},e),o=fI(fI({},null==m?void 0:m.changes),{},{ribbon:r});b(fI(fI({},m),{},{changes:o}))},handleChangeProductActiveState:function(){var e,t={enabled:!(null!=y&&null!==(e=y.product)&&void 0!==e&&e.enabled)};S(t)},handleChangeInput:function(e){b(fI(fI({},m),{},{changes:fI(fI({},m.changes),{},pI({},e.target.name,e.target.value))}))},handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){b(fI(fI({},m),{},{changes:fI(fI({},m.changes),{},pI({},t?"seo_image":"images",n.result))}))},n.onerror=function(e){return console.log(e)}},handleUpdateClick:S,handleDeleteProduct:E,showProductOption:function(e){var t=!0;if(e.respect_to&&(t=!1,O.options)){var n=O.options;for(var r in n){var o;if(null!==(o=n[r].suboptions["id:".concat(e.respect_to)])&&void 0!==o&&o.selected){t=!0;break}}}return t},handleChangeFormState:function(e){b(fI(fI({},m),{},{changes:fI(fI({},m.changes),e)}))},handleSuccessUpdate:C})))};function mI(){return mI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mI.apply(this,arguments)}function bI(e){return function(e){if(Array.isArray(e))return CI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||PI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gI(Object(n),!0).forEach((function(t){wI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function SI(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){jI(a,r,o,i,u,"next",e)}function u(e){jI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function EI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||PI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PI(e,t){if(e){if("string"==typeof e)return CI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CI(e,t):void 0}}function CI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var II=function(e){var t=e.businessId,n=e.extraId,r=e.metafields,o=e.UIComponent,s=e.handleSuccessAddMetaFields,c=e.handleSuccessDeleteBusinessMetaFields,l=EI(rn(),1)[0],f=EI(yn(),1)[0],p=EI(Br(),2)[1].showToast,d=EI(Bn(),2)[1],y=EI(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),h=y[0],v=y[1],m=EI(Object(i.useState)({loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=function(){var e=SI(a.a.mark((function e(){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(OI(OI({},h),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/extras/").concat(n,"/metafields"),r);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,u=i.result,v(OI(OI({},h),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(OI(OI({},h),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=SI(a.a.mark((function e(r){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),g(OI(OI({},b),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=6,fetch("".concat(l.root,"/business/").concat(t,"/extras/").concat(n,"/metafields/").concat(r),o);case 6:e.sent.ok&&(i=h.metaFields.filter((function(e){return e.id!==r})),v(OI(OI({},h),{},{metaFields:i})),g({loading:!1,result:{error:!1}}),c&&c(r),p(Dr.Success,d("METAFIELD_DELETED","Metafield deleted"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=SI(a.a.mark((function e(r){var o,i,u,c,y,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),g(OI(OI({},b),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(r)},e.next=6,fetch("".concat(l.root,"/business/").concat(t,"/extras/").concat(n,"/metafields"),o);case 6:return i=e.sent,e.next=9,i.json();case 9:u=e.sent,c=u.error,y=u.result,c?g({loading:!1,result:{error:!0,result:y}}):([],m=[].concat(bI(h.metaFields),[y]),v(OI(OI({},h),{},{metaFields:m})),g({loading:!1,result:{error:!1}}),s&&s(y),p(Dr.Success,d("METAFIELD_ADDED","Metafield added"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),g({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?v(OI(OI({},h),{},{metaFields:r})):O()}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,mI({},e,{metaFieldsList:h,actionState:b,handleDeleteMetaField:w,handeAddMetaField:j})))};function xI(){return xI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xI.apply(this,arguments)}function AI(e){return function(e){if(Array.isArray(e))return RI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||FI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function _I(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){TI(a,r,o,i,u,"next",e)}function u(e){TI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function kI(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=FI(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}function DI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DI(Object(n),!0).forEach((function(t){LI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function LI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||FI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FI(e,t){if(e){if("string"==typeof e)return RI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RI(e,t):void 0}}function RI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}II.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},II.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var MI=function(e){var t=e.UIComponent,n=e.business,r=e.extra,o=e.option,s=e.handleUpdateBusinessState,c=e.handleSucccessDeleteOption,l=BI(rn(),1)[0],f=BI(yn(),1)[0].token,p=BI(Br(),2)[1].showToast,d=BI(Bn(),2)[1],y=BI(Object(i.useState)({option:o,loading:!1,error:null}),2),h=y[0],v=y[1],m=BI(Object(i.useState)({changes:{},result:{}}),2),b=m[0],g=m[1],O=BI(Object(i.useState)(null),2),w=O[0],j=O[1],S=BI(Object(i.useState)({changes:{},loading:!1,error:null}),2),E=S[0],P=S[1],C=BI(Object(i.useState)([]),2),I=C[0],x=C[1],A=BI(Object(i.useState)([]),2),T=A[0],_=A[1],k=BI(Object(i.useState)(null),2),D=k[0],U=k[1],L=BI(Object(i.useState)(r),2),B=L[0],F=L[1],R=BI(Object(i.useState)(null),2),M=R[0],N=R[1],z=function(e){if(s){var t=n.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})),r=UI(UI({},n),{},{extras:t}),o=r.categories.map((function(t){var n=t.products.map((function(t){var n=t.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));return UI(UI({},t),{},{extras:n})}));return UI(UI({},t),{},{products:n})})),a=UI(UI({},r),{},{categories:o});s(a)}},G=function(e){var t,n=[],r=kI(e.options.filter((function(e){return e.id!==o.id})));try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push({value:a.id,content:a.name})}}catch(e){r.e(e)}finally{r.f()}x(n)},Y=function(e,t){var n,r=[],o=kI(e.options.find((function(e){return e.id===t})).suboptions);try{for(o.s();!(n=o.n()).done;){var a=n.value;r.push({value:a.id,content:a.name})}}catch(e){o.e(e)}finally{o.f()}_(r)},q=function(e){var t,n=kI(null==B?void 0:B.options);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(null!=r&&r.suboptions){var o,a=kI(r.suboptions);try{for(a.s();!(o=a.n()).done;){var i=o.value;i.id===e&&(U(r.id),N(i.id))}}catch(e){a.e(e)}finally{a.f()}}}}catch(e){n.e(e)}finally{n.f()}},$=function(){var e=_I(a.a.mark((function e(t){var i,u,s,c,y,m,O,j,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in e.prev=0,i=t||UI({},b.changes),u={},i)""!==i[s]&&(u=UI(UI({},u),{},LI({},s,i[s])));if(0!==Object.keys(u).length){e.next=6;break}return e.abrupt("return");case 6:return p(Dr.Info,d("LOADING","Loading")),v(UI(UI({},h),{},{loading:!0})),c={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(u)},e.next=11,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id,"/suboptions/").concat((null==t?void 0:t.id)||w),c);case 11:return y=e.sent,e.next=14,y.json();case 14:if(m=e.sent,g({changes:m.error?b:{},result:null==m?void 0:m.result}),m.error){e.next=26;break}return O=h.option.suboptions.filter((function(e){return e.id===m.result.id&&Object.assign(e,m.result),!0})),j=UI(UI({},h.option),{},{suboptions:O}),v(UI(UI({},h),{},{option:j,loading:!1})),S=r.options.filter((function(e){return e.id===j.id&&Object.assign(e,j),!0})),E=UI(UI({},r),{},{options:S}),F(E),z(E),p(Dr.Success,d("CHOICE_SAVED","Choice saved")),e.abrupt("return",!0);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),v(UI(UI({},h),{},{loading:!1,error:e.t0.message}));case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=_I(a.a.mark((function e(){var t,i,u,s,c,y,m,O,w,j,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in e.prev=0,i=UI({},b.changes),u={},i)""!==i[s]&&(u=UI(UI({},u),{},LI({},s,i[s])));if(null!==(t=u)&&void 0!==t&&t.price||(u.price=0),0!==Object.keys(u).length){e.next=7;break}return e.abrupt("return");case 7:return p(Dr.Info,d("LOADING","Loading")),u.enabled=!0,v(UI(UI({},h),{},{loading:!0})),c={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(u)},e.next=13,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id,"/suboptions"),c);case 13:return y=e.sent,e.next=16,y.json();case 16:m=e.sent,g({changes:m.error?b:{},result:null==m?void 0:m.result}),m.error||((O=AI(h.option.suboptions)).push(UI(UI({},m.result),{},{preselected:!1})),w=UI(UI({},h.option),{},{suboptions:O}),v(UI(UI({},h),{},{option:w,loading:!1})),j=r.options.filter((function(e){return e.id===w.id&&Object.assign(e,w),!0})),S=UI(UI({},r),{},{options:j}),F(S),z(S),p(Dr.Success,d("CHOICE_ADDED","Choice added"))),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),v(UI(UI({},h),{},{loading:!1,error:e.t0.message}));case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=_I(a.a.mark((function e(t){var i,u,s,c,y,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),v(UI(UI({},h),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id,"/suboptions/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:e.sent.error||(s=h.option.suboptions.filter((function(e){return e.id!==t})),c=UI(UI({},h.option),{},{suboptions:s}),v(UI(UI({},h),{},{option:c,loading:!1})),y=r.options.filter((function(e){return e.id===c.id&&Object.assign(e,c),!0})),m=UI(UI({},r),{},{options:y}),F(m),z(m),p(Dr.Success,d("CHOICE_DELETED","Choice deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(UI(UI({},h),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=_I(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=LI({},t,n),P(UI(UI({},E),{},{changes:r})),W(r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=_I(a.a.mark((function e(t){var i,u,s,c,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dr.Info,d("LOADING","Loading")),P(UI(UI({},E),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(t)},e.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error||(P({changes:s.error?E.changes:{},loading:!1}),v(UI(UI({},h),{},{option:UI(UI({},h.option),s.result)})),c=r.options.filter((function(e){return e.id===s.result.id&&Object.assign(e,s.result),!0})),y=UI(UI({},r),{},{options:c}),F(y),z(y),p(Dr.Success,d("OPTION_SAVED","Option saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),P(UI(UI({},E),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var t=_I(a.a.mark((function t(){var i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(Dr.Info,d("LOADING","Loading")),v(UI(UI({},h),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},t.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(o.id),i);case 6:return u=t.sent,t.next=9,u.json();case 9:t.sent.error||(c&&c(o.id),p(Dr.Success,d("OPTION_DELETED","Option deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v(UI(UI({},h),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(D){G(B),Y(B,D);var e=B.options.find((function(e){return e.id===o.id}));q(null==e?void 0:e.respect_to)}}),[B,D]),Object(i.useEffect)((function(){v(UI(UI({},h),{},{option:o})),G(r),q(null==o?void 0:o.respect_to)}),[o,r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,xI({},e,{optionState:h,changesState:b,editSubOptionId:w,settingChangeState:E,handleChangeInput:function(e,t){t===w?g({result:{},changes:UI(UI({},b.changes),{},LI({},e.target.name,e.target.value))}):(j(t),g({result:{},changes:LI({},e.target.name,e.target.value)}))},handleChangeSubOptionImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),t===w?n.onload=function(){g({result:{},changes:UI(UI({},b.changes),{},{image:n.result})})}:(j(t),n.onload=function(){g({result:{},changes:{image:n.result}})}),n.onerror=function(e){return console.log(e)}},handleChangeSubOptionEnable:function(e,t){t===w?g({result:{},changes:UI(UI({},b.changes),{},{enabled:e})}):(j(t),g({result:{},changes:{enabled:e}}))},handleDeteteSubOption:V,handleOptionSetting:H,conditionalOptions:I,conditionalSubOptions:T,conditionalOptionId:D,conditionalSubOptionId:M,handleChangeConditionalOption:function(e){U(e),Y(B,e)},handleChangeConditionalSubOption:function(e){W({respect_to:e})},handleAddOption:J,handleDeteteOption:K,handleChangeDefaultSuboption:function(e){var t,n,r,o,a,i,u,s=null==h||null===(t=h.option)||void 0===t||null===(n=t.suboptions)||void 0===n||null===(r=n.find((function(t){return t.id===e})))||void 0===r?void 0:r.preselected,c=null==h||null===(o=h.option)||void 0===o||null===(a=o.suboptions)||void 0===a||null===(i=a.filter((function(e){return null==e?void 0:e.preselected})))||void 0===i?void 0:i.length;s?$({id:e,preselected:!1}):(null==h||null===(u=h.option)||void 0===u?void 0:u.max)>c?$({id:e,preselected:!0}):p(Dr.Error,d("MAX_PRESELECTED_OPTIONS_ERROR","Maximum number of options exceeded"),4e3)},handleUpdateSubOption:$,handleChangeItem:function(e,t){void 0!==t&&w===t&&j(t),g({result:{},changes:UI(UI({},b.changes),e)})},handleUpdateOption:W})))};function NI(){return NI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NI.apply(this,arguments)}function zI(e){return function(e){if(Array.isArray(e))return WI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||HI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GI(Object(n),!0).forEach((function(t){qI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $I(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function JI(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){$I(a,r,o,i,u,"next",e)}function u(e){$I(a,r,o,i,u,"throw",e)}i(void 0)}))}}function VI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||HI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HI(e,t){if(e){if("string"==typeof e)return WI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WI(e,t):void 0}}function WI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}MI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},MI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var KI=function(e){var t=e.businessId,n=e.extraId,r=e.optionId,o=e.metafields,s=e.UIComponent,c=e.handleSuccessAddMetaFields,l=e.handleSuccessDeleteBusinessMetaFields,f=VI(rn(),1)[0],p=VI(yn(),1)[0],d=VI(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),y=d[0],h=d[1],v=VI(Object(i.useState)({loading:!1,result:{error:!1}}),2),m=v[0],b=v[1],g=function(){var e=JI(a.a.mark((function e(){var o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(YI(YI({},y),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,h(YI(YI({},y),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(YI(YI({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=JI(a.a.mark((function e(o){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(YI(YI({},m),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/metafields/").concat(o),i);case 5:e.sent.ok&&(u=y.metaFields.filter((function(e){return e.id!==o})),h(YI(YI({},y),{},{metaFields:u})),b({loading:!1,result:{error:!1}}),l&&l(o)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),b({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=JI(a.a.mark((function e(o){var i,u,s,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(YI(YI({},m),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)},body:JSON.stringify(o)},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/metafields"),i);case 5:return u=e.sent,e.next=8,u.json();case 8:s=e.sent,l=s.error,d=s.result,l?b({loading:!1,result:{error:!0,result:d}}):([],v=[].concat(zI(y.metaFields),[d]),h(YI(YI({},y),{},{metaFields:v})),b({loading:!1,result:{error:!1}}),c&&c(d)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),b({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?h(YI(YI({},y),{},{metaFields:o})):g()}),[o]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,NI({},e,{metaFieldsList:y,actionState:m,handleDeleteMetaField:O,handeAddMetaField:w})))};function XI(){return XI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XI.apply(this,arguments)}function ZI(e){return function(e){if(Array.isArray(e))return ix(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ax(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QI(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ex(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){QI(a,r,o,i,u,"next",e)}function u(e){QI(a,r,o,i,u,"throw",e)}i(void 0)}))}}function tx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tx(Object(n),!0).forEach((function(t){rx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ox(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ax(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ax(e,t){if(e){if("string"==typeof e)return ix(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ix(e,t):void 0}}function ix(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}KI.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},KI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ux=function(e){var t=e.UIComponent,n=e.business,r=e.extra,o=e.handleUpdateBusinessState,s=ox(rn(),1)[0],c=ox(yn(),1)[0].token,l=ox(Br(),2)[1].showToast,f=ox(Bn(),2)[1],p=ox(Object(i.useState)({extra:r,loading:!1,error:null}),2),d=p[0],y=p[1],h=ox(Object(i.useState)({changes:{},result:{}}),2),v=h[0],m=h[1],b=ox(Object(i.useState)(null),2),g=b[0],O=b[1],w=ox(Object(i.useState)({conditioned:!1,enabled:!0,name:"",min:1,max:1}),2),j=w[0],S=w[1],E=ox(Object(i.useState)(null),2),P=E[0],C=E[1],I=ox(Object(i.useState)({}),2),x=I[0],A=I[1],T=function(e){return m(nx({},e))},_=function(e,t){T(nx(nx({},v),{},{changes:{}})),C(e),A(nx(nx({},x),{},rx({},t,!0)))},k=function(e){if(o){var t=n.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})),r=nx(nx({},n),{},{extras:t}),a=r.categories.map((function(t){var n=t.products.map((function(t){var n=t.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));return nx(nx({},t),{},{extras:n})}));return nx(nx({},t),{},{products:n})})),i=nx(nx({},r),{},{categories:a});o(i)}},D=function(){var e=ex(a.a.mark((function e(){var t,o,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),y(nx(nx({},d),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(null==v?void 0:v.changes)},e.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(g),t);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error||(m({changes:i.error?v.changes:{},result:i.result}),u=d.extra.options.filter((function(e){return e.id===i.result.id&&Object.assign(e,i.result),!0})),p=nx(nx({},d.extra),{},{options:u}),y(nx(nx({},d),{},{loading:!1,extra:p})),k(p),l(Dr.Success,f("OPTION_SAVED","Option saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(nx(nx({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=ex(a.a.mark((function e(){var t,o,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),y(nx(nx({},d),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(j)},e.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options"),t);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error||(S({conditioned:!1,enabled:!0,name:"",min:1,max:1}),u=d.extra.options?[].concat(ZI(d.extra.options),[nx(nx({},i.result),{},{suboptions:[]})]):[nx(nx({},i.result),{},{suboptions:[]})],p=nx(nx({},d.extra),{},{options:u}),y(nx(nx({},d),{},{loading:!1,extra:p})),k(p),l(Dr.Success,f("OPTION_ADDED","Option added")),_(nx(nx({},i.result),{},{suboptions:[]}),"edit")),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(nx(nx({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=ex(a.a.mark((function e(t){var o,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dr.Info,f("LOADING","Loading")),y(nx(nx({},d),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},e.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id,"/options/").concat(t),o);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(u=d.extra.options.filter((function(e){return e.id!==t})),p=nx(nx({},d.extra),{},{options:u}),y(nx(nx({},d),{},{loading:!1,extra:p})),k(p),l(Dr.Success,f("OPTION_DELETED","Option deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(nx(nx({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var t=ex(a.a.mark((function t(){var i,u,p,h,v,m;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dr.Info,f("LOADING","Loading")),y(nx(nx({},d),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(s.root,"/business/").concat(n.id,"/extras/").concat(r.id),i);case 6:return u=t.sent,t.next=9,u.json();case 9:t.sent.error||(p=n.extras.filter((function(e){return e.id!==r.id})),o&&(h=nx(nx({},n),{},{extras:p}),v=h.categories.map((function(e){var t=e.products.map((function(e){var t=e.extras.filter((function(e){return e.id!==r.id}));return nx(nx({},e),{},{extras:t})}));return nx(nx({},e),{},{products:t})})),m=nx(nx({},h),{},{categories:v}),o(m)),l(Dr.Success,f("EXTRA_DELETED","Extra deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),y(nx(nx({},d),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m({changes:{},result:{}}),y(nx(nx({},d),{},{extra:r}))}),[r]),Object(i.useEffect)((function(){S({conditioned:!1,enabled:!0,name:"",min:1,max:1})}),[null==r?void 0:r.id]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,XI({},e,{changesState:v,cleanChangesState:T,handleChangeItem:function(e,t){void 0!==t&&O(t),m({result:{},changes:nx(nx({},v.changes),e)})},extraState:d,editOptionId:g,addChangesState:j,handleChangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),t===g?n.onload=function(){m({result:{},changes:nx(nx({},v.changes),{},{image:n.result})})}:(O(t),n.onload=function(){m({result:{},changes:{image:n.result}})}),n.onerror=function(e){return console.log(e)}},handleChangeInput:function(e,t){t===g?m({result:{},changes:nx(nx({},v.changes),{},rx({},e.target.name,e.target.value))}):(O(t),m({result:{},changes:rx({},e.target.name,e.target.value)}))},handleChangeOptionEnable:function(e,t){t===g?m({result:{},changes:nx(nx({},v.changes),{},{enabled:e})}):(O(t),m({result:{},changes:{enabled:e}}))},handleAddOption:U,handleChangeAddOption:function(e){S(nx(nx({},j),{},rx({},e.target.name,e.target.value)))},handleChangeAddOptionEnable:function(e){S(nx(nx({},j),{},{enabled:e}))},handleDeteteOption:L,handleDeleteExtra:B,handleSucccessDeleteOption:function(e){var t=d.extra.options.filter((function(t){return t.id!==e})),n=nx(nx({},d.extra),{},{options:t});y(nx(nx({},d),{},{loading:!1,extra:n})),k(n)},handleUpdateOption:D,curOption:P,openModal:x,setCurOption:C,setOpenModal:A,handleOpenModal:_})))};function sx(){return sx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sx.apply(this,arguments)}function cx(e){return function(e){if(Array.isArray(e))return mx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lx(Object(n),!0).forEach((function(t){px(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function px(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dx(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function yx(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){dx(a,r,o,i,u,"next",e)}function u(e){dx(a,r,o,i,u,"throw",e)}i(void 0)}))}}function hx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||vx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vx(e,t){if(e){if("string"==typeof e)return mx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mx(e,t):void 0}}function mx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ux.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ux.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bx=function(e){var t=e.businessId,n=e.extraId,r=e.optionId,o=e.subOptionId,s=e.metafields,c=e.UIComponent,l=e.handleSuccessAddMetaFields,f=e.handleSuccessDeleteBusinessMetaFields,p=hx(rn(),1)[0],d=hx(yn(),1)[0],y=hx(Br(),2)[1].showToast,h=hx(Bn(),2)[1],v=hx(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=hx(Object(i.useState)({loading:!1,result:{error:!1}}),2),O=g[0],w=g[1],j=function(){var e=yx(a.a.mark((function e(){var i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(fx(fx({},m),{},{loading:!0})),i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},e.next=5,fetch("".concat(p.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/suboptions/").concat(o,"/metafields"),i);case 5:return u=e.sent,e.next=8,u.json();case 8:s=e.sent,c=s.result,b(fx(fx({},m),{},{loading:!1,metaFields:c})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(fx(fx({},m),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=yx(a.a.mark((function e(i){var u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(fx(fx({},O),{},{loading:!0})),u={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},e.next=6,fetch("".concat(p.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/suboptions/").concat(o,"/metafields/").concat(i),u);case 6:e.sent.ok&&(y(Dr.Success,h("METAFIELD_DELETED","Metafield deleted")),s=m.metaFields.filter((function(e){return e.id!==i})),b(fx(fx({},m),{},{metaFields:s})),w({loading:!1,result:{error:!1}}),f&&f(i)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),w({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=yx(a.a.mark((function e(i){var u,s,c,f,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dr.Info,h("LOADING","Loading")),w(fx(fx({},O),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)},body:JSON.stringify(i)},e.next=6,fetch("".concat(p.root,"/business/").concat(t,"/extras/").concat(n,"/options/").concat(r,"/suboptions/").concat(o,"/metafields"),u);case 6:return s=e.sent,e.next=9,s.json();case 9:c=e.sent,f=c.error,v=c.result,f?w({loading:!1,result:{error:!0,result:v}}):(y(Dr.Success,h("METAFIELD_ADDED","Metafield added")),[],g=[].concat(cx(m.metaFields),[v]),b(fx(fx({},m),{},{metaFields:g})),w({loading:!1,result:{error:!1}}),l&&l(v)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),w({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){s?b(fx(fx({},m),{},{metaFields:s})):j()}),[s]),u.a.createElement(u.a.Fragment,null,c&&u.a.createElement(c,sx({},e,{metaFieldsList:m,actionState:O,handleDeleteMetaField:S,handeAddMetaField:E})))};function gx(){return gx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gx.apply(this,arguments)}function Ox(e){return function(e){if(Array.isArray(e))return xx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ix(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wx(Object(n),!0).forEach((function(t){Sx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ex(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Px(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ex(a,r,o,i,u,"next",e)}function u(e){Ex(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Cx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ix(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ix(e,t){if(e){if("string"==typeof e)return xx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xx(e,t):void 0}}function xx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bx.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bx.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ax=function(e){var t=e.business,n=e.UIComponent,r=e.product,o=e.handleSuccessUpdate,s=e.handleUpdateBusinessState,c=Cx(rn(),1)[0],l=Cx(yn(),1)[0].token,f=Cx(Br(),2)[1].showToast,p=Cx(Bn(),2)[1],d=Cx(Object(i.useState)({product:r,loading:!1,error:null}),2),y=d[0],h=d[1],v=Cx(Object(i.useState)({extras:null==t?void 0:t.extras,loading:!1,error:null}),2),m=v[0],b=v[1],g=Cx(Object(i.useState)({}),2),O=g[0],w=g[1],j=Cx(Object(i.useState)(!1),2),S=j[0],E=j[1],P=Cx(Object(i.useState)(null),2),C=P[0],I=P[1],x=Cx(Object(i.useState)(!1),2),A=x[0],T=x[1],_=function(){var e=Px(a.a.mark((function e(n){var i,u,s,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={business_id:null==t?void 0:t.id,category_id:null==r?void 0:r.category_id,product_id:null==r?void 0:r.id,extras:JSON.stringify(n)},f(Dr.Info,p("LOADING","Loading")),h(jx(jx({},y),{},{loading:!0})),u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=7,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==r?void 0:r.category_id,"/products/").concat(r.id),u);case 7:return s=e.sent,e.next=10,s.json();case 10:e.sent.error||(d=null==m?void 0:m.extras.filter((function(e){return n.includes(e.id)})),v=jx(jx({},y.product),{},{extras:d}),h(jx(jx({},y),{},{loading:!1,product:v})),o&&o(v),f(Dr.Success,p("EXTRA_SAVED","Extra saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),h(jx(jx({},y),{},{loading:!1,error:e.t0.message}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Px(a.a.mark((function e(n,i){var u,s,d,v,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),b(jx(jx({},m),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/extras/").concat(n),u);case 6:return s=e.sent,e.next=9,s.json();case 9:(d=e.sent).error||(v=m.extras.filter((function(e){return e.id===d.result.id&&Object.assign(e,d.result),!0})),b(jx(jx({},m),{},{loading:!1,extras:v})),g=y.product.extras.filter((function(e){return e.id===d.result.id&&Object.assign(e,d.result),!0})),O=jx(jx({},r),{},{extras:g}),h(jx(jx({},y),{},{product:O})),o&&o(O),f(Dr.Success,p("EXTRA_SAVED","Extra saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(jx(jx({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Px(a.a.mark((function e(n){var i,u,s,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),b(jx(jx({},m),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/extras/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:e.sent.error||(s=m.extras.filter((function(e){return e.id!==n})),b(jx(jx({},m),{},{loading:!1,extras:s})),d=y.product.extras.filter((function(e){return e.id!==n})),v=jx(jx({},r),{},{extras:d}),h(jx(jx({},y),{},{product:v})),o&&o(v),f(Dr.Success,p("EXTRA_DELETED","Extra deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(jx(jx({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Px(a.a.mark((function e(){var n,r,o,i,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(O).length){e.next=3;break}return E(!1),e.abrupt("return");case 3:return e.prev=3,n=jx({business_id:null==t?void 0:t.id},O),f(Dr.Info,p("LOADING","Loading")),b(jx(jx({},m),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=10,fetch("".concat(c.root,"/business/").concat(t.id,"/extras"),r);case 10:return o=e.sent,e.next=13,o.json();case 13:(i=e.sent).error||(w({}),E(!1),u=[].concat(Ox(m.extras),[i.result]),b(jx(jx({},m),{},{loading:!1,extras:u})),s&&(d=jx(jx({},t),{},{extras:u}),s(d)),f(Dr.Success,p("EXTRA_ADDED","Extra added"))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),b(jx(jx({},m),{},{loading:!1,error:e.t0.message}));case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Px(a.a.mark((function e(n,i){var u,s,d,v,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(jx(jx({},m),{},{loading:!0})),f(Dr.Info,p("LOADING","Loading")),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/extras/").concat(n),u);case 6:return s=e.sent,e.next=9,s.json();case 9:(d=e.sent).error||(v=m.extras.filter((function(e){return e.id===d.result.id&&Object.assign(e,d.result),!0})),b(jx(jx({},m),{},{loading:!1,extras:v})),g=y.product.extras.filter((function(e){return e.id===d.result.id&&Object.assign(e,d.result),!0})),O=jx(jx({},r),{},{extras:g}),h(jx(jx({},y),{},{product:O})),o&&o(O),f(Dr.Success,p("EXTRA_SAVED","Extra saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(jx(jx({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h(jx(jx({},y),{},{product:r}))}),[r]),Object(i.useEffect)((function(){b(jx(jx({},m),{},{extras:null==t?void 0:t.extras}))}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,gx({},e,{changesState:O,isAddMode:S,productState:y,extrasState:m,handleChangeExtraInput:function(e,t){var n={name:e.target.value};k(t,n)},handleDeteteExtra:D,handleOpenAddForm:function(){return E(!0)},handleAddExtra:U,handleChangeAddExtraInput:function(e){w({name:e.target.value})},handleProductExtraState:_,dragoverExtaId:C,isExtrasBottom:A,handleDragStart:function(e,t){e.dataTransfer.setData("transferExtraId",t.id);var n=document.createElement("div");n.classList.add("ghostDragging"),n.innerHTML=t.name,document.body.appendChild(n),e.dataTransfer.setDragImage(n,0,0),T(!1)},hanldeDragOver:function(e,t,n){if(e.preventDefault(),e.target.closest(".draggable-extra"))if(n){var r=window.scrollY+e.target.getBoundingClientRect().top+e.target.offsetHeight/2;e.clientY>r?(T(!0),I(null)):(T(!1),I(t.id))}else I(t.id)},handleDrop:function(e,t){e.preventDefault();var n,r=parseInt(e.dataTransfer.getData("transferExtraId"));t.id!==r&&(n=A?(null==t?void 0:t.rank)+1:null==t?void 0:t.rank,T(!1),L(r,{rank:n}))},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);I(null)}})))};function Tx(){return Tx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tx.apply(this,arguments)}function _x(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function kx(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_x(a,r,o,i,u,"next",e)}function u(e){_x(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Dx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ux(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dx(Object(n),!0).forEach((function(t){Lx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ax.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ax.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Rx=function(e){var t,n,r,o,s,c,l,f=e.UIComponent,p=e.useOrderContext,d=e.onSave,y={},h=Bx(rn(),1)[0],v=Bx(Object(i.useState)({product:e.product,loading:!1,error:null}),2),m=v[0],b=v[1],g=Bx(Object(i.useState)({ingredients:{},options:{}}),2),O=g[0],w=g[1],j=Bx(Object(i.useState)({}),2),S=j[0],E=j[1],P=Bx(Object(i.useState)(null),2),C=P[0],I=P[1],x=void 0!==(null===(t=e.productCart)||void 0===t?void 0:t.code),A=Bx(vr(),2),T=A[0],_=A[1],k=_.addProduct,D=_.updateProduct,U=x?e.productCart.quantity:0,L=T.carts["businessId:".concat(e.businessId)],B=m.product&&(null==L||null===(n=L.products)||void 0===n?void 0:n.find((function(e){return e.id===m.product.id}))),F=((null==B?void 0:B.quantity)||0)-U,R=((null==L||null===(r=L.products)||void 0===r?void 0:r.reduce((function(e,t){return e+(m.product&&t.id===m.product.id?t.quantity:0)}),0))||0)-U,M=Bx(tr(),1)[0],N=(M.configs.max_product_amount?parseInt(M.configs.max_product_amount):100)-F,z=(null!==(o=m.product)&&void 0!==o&&o.inventoried?null===(s=m.product)||void 0===s?void 0:s.quantity:void 0)-R,G=(null===(c=m.product)||void 0===c?void 0:c.inventoried)&&0===(null===(l=m.product)||void 0===l?void 0:l.quantity);z=isNaN(z)?N:z;var Y=Math.min(N,z),q=function(e){for(var t,n=0,r=0;r<(null===(o=m.product)||void 0===o?void 0:o.extras.length);r++)for(var o,a,i=null===(a=m.product)||void 0===a?void 0:a.extras[r],u=0;u<i.options.length;u++)for(var s=i.options[u],c=0;c<s.suboptions.length;c++){var l,f,p=s.suboptions[c];if(null!==(l=e.options["id:".concat(s.id)])&&void 0!==l&&null!==(f=l.suboptions["id:".concat(p.id)])&&void 0!==f&&f.selected){var d=e.options["id:".concat(s.id)].suboptions["id:".concat(p.id)],y=s.allow_suboption_quantity?d.quantity:1;n+=(s.with_half_option&&p.half_price&&"whole"!==d.position?p.half_price:p.price)*y}}return(null===(t=m.product)||void 0===t?void 0:t.price)+n},$=function(){var t=kx(a.a.mark((function t(){var n,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,b(Ux(Ux({},m),{},{loading:!0})),n={},y.product=n,t.next=6,h.businesses(e.businessId).categories(e.categoryId).products(e.productId).get({cancelToken:n});case 6:r=t.sent,o=r.content.result,b(Ux(Ux({},m),{},{loading:!1,product:o})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),b(Ux(Ux({},m),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),J=function e(t,n){m.product.extras.forEach((function(r){r.options.forEach((function(r){if(r.respect_to===n){var o,a=null===(o=t.options["id:".concat(r.id)])||void 0===o?void 0:o.suboptions;a&&Object.keys(a).map((function(n){return e(t,parseInt(n.split(":")[1]))})),t.options["id:".concat(r.id)]&&(t.options["id:".concat(r.id)].suboptions={})}}))}))},V=function(e,t,n){var r=JSON.parse(JSON.stringify(O));if(r.options||(r.options={}),r.options["id:".concat(n.id)]||(r.options["id:".concat(n.id)]={id:n.id,name:n.name,suboptions:{}}),e.selected){if(n.min===n.max&&1===n.min){var o=r.options["id:".concat(n.id)].suboptions;o&&Object.keys(o).map((function(e){return J(r,parseInt(e.split(":")[1]))})),r.options["id:".concat(n.id)]&&(r.options["id:".concat(n.id)].suboptions={})}r.options["id:".concat(n.id)].suboptions["id:".concat(t.id)]=e}else delete r.options["id:".concat(n.id)].suboptions["id:".concat(t.id)],J(r,t.id);var a,i=Object.keys(r.options["id:".concat(n.id)].suboptions).length;n.limit_suboptions_by_max&&(i=null===(a=Object.values(r.options["id:".concat(n.id)].suboptions))||void 0===a?void 0:a.reduce((function(e,t){return e+t.quantity}),0));i<=n.max&&(r.options["id:".concat(n.id)].balance=i,r.unitTotal=q(r),r.total=r.unitTotal*r.quantity,w(r))},H=function(){var e={};return m.product?(m.product.extras.forEach((function(t){t.options.map((function(t){var n,r=null===(n=O.options["id:".concat(t.id)])||void 0===n?void 0:n.suboptions,o=r?Object.keys(r).length:0,a=!1;if(t.respect_to&&O.options){var i=O.options;for(var u in i){var s;if(null!==(s=i[u].suboptions["id:".concat(t.respect_to)])&&void 0!==s&&s.selected){a=!0;break}}}(!t.respect_to||a)&&(t.min>o||t.max<o)&&(e["id:".concat(t.id)]=!0)}))})),E(e),e):e},W=function(){var t=kx(a.a.mark((function t(){var n,r,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=H(),0!==Object.keys(n).length){t.next=15;break}if(r=!0,!p){t.next=14;break}if(r=!1,null!==(o=e.productCart)&&void 0!==o&&o.code){t.next=11;break}return t.next=8,k(O);case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,D(O);case 13:r=t.sent;case 14:r&&d(O,!(null!==(i=e.productCart)&&void 0!==i&&i.code));case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m.product&&function(t){var n,r,o,a,i={};for(var u in t.ingredients){var s=t.ingredients[u];i["id:".concat(s.id)]={selected:!0}}var c=Ux(Ux({},e.productCart),{},{id:t.id,price:t.price,name:t.name,businessId:e.businessId,categoryId:t.category_id,inventoried:t.inventoried,stock:t.quantity,ingredients:(null===(n=e.productCart)||void 0===n?void 0:n.ingredients)||i,options:(null===(r=e.productCart)||void 0===r?void 0:r.options)||{},comment:(null===(o=e.productCart)||void 0===o?void 0:o.comment)||null,quantity:(null===(a=e.productCart)||void 0===a?void 0:a.quantity)||1});c.unitTotal=q(c),c.total=c.unitTotal*c.quantity,w(c)}(m.product)}),[m.product,e.productCart]),Object(i.useEffect)((function(){H()}),[O]),Object(i.useEffect)((function(){if(null!=m&&m.product&&Object.keys(null==m?void 0:m.product).length){var e=m.product.extras.map((function(e){return e.options.find((function(e){return 1===e.min&&1===e.max&&1===e.suboptions.length}))}))[0];if(!e)return;var t=e.suboptions[0],n=e.with_half_option&&t.half_price&&"whole"!==(null==t?void 0:t.position)?t.half_price:t.price,r={id:t.id,name:t.name,position:t.position||"whole",price:n,quantity:1,selected:!0,total:n};I({state:r,suboption:t,option:e})}}),[m.product]),Object(i.useEffect)((function(){if(C){var e=C.state,t=C.suboption,n=C.option;V(e,t,n)}}),[C]),Object(i.useEffect)((function(){if(!(e.product||e.businessId&&e.categoryId&&e.productId))throw new Error("`businessId` && `categoryId` && `productId` are required if `product` was not provided.");return!e.product&&e.businessId&&e.categoryId&&e.productId&&$(),function(){y.product&&y.product.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,f&&u.a.createElement(f,Tx({},e,{productObject:m,productCart:O,errors:S,editMode:x,isSoldOut:G,maxProductQuantity:Y,increment:function(){Y<=0||O.quantity>=Y||(O.quantity++,O.unitTotal=q(O),O.total=O.unitTotal*O.quantity,w(Ux({},O)))},decrement:function(){0!==O.quantity&&(O.quantity--,O.unitTotal=q(O),O.total=O.unitTotal*O.quantity,w(Ux({},O)))},handleSave:W,showOption:function(e){var t=!0;if(e.respect_to&&(t=!1,O.options)){var n=O.options;for(var r in n){var o;if(null!==(o=n[r].suboptions["id:".concat(e.respect_to)])&&void 0!==o&&o.selected){t=!0;break}}}return t},handleChangeIngredientState:function(e,t){O.ingredients["id:".concat(t.id)]=e,w(Ux(Ux({},O),{},{ingredients:O.ingredients}))},handleChangeSuboptionState:V,handleChangeCommentState:function(e){var t=e.target.value;O.comment=t,w(Ux(Ux({},O),{},{comment:O.comment}))}})))};function Mx(){return Mx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mx.apply(this,arguments)}function Nx(e){return function(e){if(Array.isArray(e))return Hx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Vx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zx(Object(n),!0).forEach((function(t){Yx(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qx(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function $x(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){qx(a,r,o,i,u,"next",e)}function u(e){qx(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Jx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Vx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vx(e,t){if(e){if("string"==typeof e)return Hx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hx(e,t):void 0}}function Hx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Rx.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,categoryId:c.a.number,productId:c.a.number,product:c.a.object,productCart:c.a.object,useOrderContext:c.a.bool,onSave:c.a.func},Rx.defaultProps={productCart:{},useOrderContext:!0,balance:0};var Wx=function(e){var t=e.UIComponent,n=e.business,r=e.categoryId,o=e.product,s=e.handleSuccessUpdate,c=Jx(rn(),1)[0],l=Jx(yn(),1)[0].token,f=Jx(Br(),2)[1].showToast,p=Jx(Bn(),2)[1],d=Jx(Object(i.useState)({loading:!1,gallery:[],photos:[],videos:[],error:null}),2),y=d[0],h=d[1],v=Jx(Object(i.useState)({changes:{},itemId:null,loading:!1,error:null}),2),m=v[0],b=v[1],g=function(){var e=$x(a.a.mark((function e(){var t,i,u,s,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Gx(Gx({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/business/").concat(n.id,"/categories/").concat(r,"/products/").concat(o.id,"/gallery"),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(u=e.sent).error?h(Gx(Gx({},y),{},{loading:!1,error:u.result})):(s=u.result.filter((function(e){return 1===e.type})),f=u.result.filter((function(e){return 2===e.type})),h(Gx(Gx({},y),{},{loading:!1,gallery:u.result,photos:s,videos:f}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(Gx(Gx({},y),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=$x(a.a.mark((function e(t){var i,u,d,v,g,O,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Gx(Gx({},m),{},{loading:!0})),f(Dr.Info,p("LOADING","Loading")),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(t)},e.next=6,fetch("".concat(c.root,"/business/").concat(n.id,"/categories/").concat(r,"/products/").concat(o.id,"/gallery"),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(d=e.sent).error?b(Gx(Gx({},m),{},{loading:!1,error:d.result})):(b(Gx(Gx({},m),{},{loading:!1,changes:{}})),f(Dr.Success,p("PRODUCT_GALLERY_ITEM_ADDED","Product gallery item added")),O=[].concat(Nx(y.gallery),[d.result]),1===(null===(v=d.result)||void 0===v?void 0:v.type)&&h(Gx(Gx({},y),{},{gallery:O,photos:[].concat(Nx(y.photos),[d.result])})),2===(null===(g=d.result)||void 0===g?void 0:g.type)&&h(Gx(Gx({},y),{},{gallery:O,videos:[].concat(Nx(y.videos),[d.result])})),w=Gx(Gx({},o),{},{gallery:O}),s&&s(w)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Gx(Gx({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=$x(a.a.mark((function e(){var t,i,u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Gx(Gx({},m),{},{loading:!0})),f(Dr.Info,p("LOADING","Loading")),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=6,fetch("".concat(c.root,"/business/").concat(n.id,"/categories/").concat(r,"/products/").concat(o.id,"/gallery/").concat(null==m?void 0:m.itemId),t);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?b(Gx(Gx({},m),{},{loading:!1,error:u.result})):(b(Gx(Gx({},m),{},{loading:!1,changes:{}})),g=y.gallery.filter((function(e){return e.id===u.result.id&&Object.assign(e,u.result),!0})),1===(null===(d=u.result)||void 0===d?void 0:d.type)&&(O=y.photos.filter((function(e){return e.id===u.result.id&&Object.assign(e,u.result),!0})),h(Gx(Gx({},h),{},{gallery:g,photos:O}))),2===(null===(v=u.result)||void 0===v?void 0:v.type)&&(w=y.videos.filter((function(e){return e.id===u.result.id&&Object.assign(e,u.result),!0})),h(Gx(Gx({},h),{},{gallery:g,videos:w}))),j=Gx(Gx({},o),{},{gallery:g}),s&&s(j),f(Dr.Success,p("PRODUCT_GALLERY_ITEM_SAVED","Product gallery item saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Gx(Gx({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=$x(a.a.mark((function e(t,i){var u,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Gx(Gx({},m),{},{loading:!0})),f(Dr.Info,p("LOADING","Loading")),u={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=6,fetch("".concat(c.root,"/business/").concat(n.id,"/categories/").concat(r,"/products/").concat(o.id,"/gallery/").concat(t),u);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(Gx(Gx({},m),{},{loading:!1,error:v.result})):(b(Gx(Gx({},m),{},{loading:!1,changes:{}})),g=null==y?void 0:y.gallery.filter((function(e){return e.id!==t})),1===i&&(O=null==y?void 0:y.photos.filter((function(e){return e.id!==t})),h(Gx(Gx({},y),{},{gallery:g,photos:O}))),2===i&&(w=null==y?void 0:y.videos.filter((function(e){return e.id!==t})),h(Gx(Gx({},y),{},{gallery:g,videos:w}))),j=Gx(Gx({},o),{},{gallery:g}),s&&s(j),f(Dr.Success,p("PRODUCT_GALLERY_ITEM_DELETED","Product gallery item deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(Gx(Gx({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),S=null,E=function(e,t){b(Gx(Gx({},m),{},{changes:Gx(Gx({},m.changes),{},Yx({},e.target.name,e.target.value)),itemId:t}))};return Object(i.useEffect)((function(){0!==Object.keys(null==m?void 0:m.changes).length&&null!=m&&m.itemId&&w()}),[null==m?void 0:m.changes]),Object(i.useEffect)((function(){if(null!=o&&o.gallery){var e=null==o?void 0:o.gallery.filter((function(e){return 1===e.type})),t=null==o?void 0:o.gallery.filter((function(e){return 2===e.type}));h(Gx(Gx({},y),{},{loading:!1,gallery:o.gallery,photos:e,videos:t}))}else g()}),[o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Mx({},e,{productGalleryState:y,changesState:m,handleChangeItem:function(e,t){b(Gx(Gx({},m),{},{changes:Gx(Gx({},null==m?void 0:m.changes),e)},t&&{itemId:t}))},handleChangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){b(Gx(Gx({},m),{},{changes:Gx(Gx({},null==m?void 0:m.changes),{},{file:n.result}),itemId:t}))},n.onerror=function(e){return console.log(e)}},handleChangeInput:function(e,t){t?(e.persist(),clearTimeout(S),S=setTimeout((function(){E(e,t)}),1e3)):E(e,t)},handleAddGalleryProduct:function(e){var t=Gx(Gx({},m.changes),{},{type:e});O(t)},handleDeteteProductGalleryItem:j})))};function Kx(){return Kx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kx.apply(this,arguments)}function Xx(e){return function(e){if(Array.isArray(e))return aA(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oA(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zx(Object(n),!0).forEach((function(t){eA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function nA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){tA(a,r,o,i,u,"next",e)}function u(e){tA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function rA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||oA(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oA(e,t){if(e){if("string"==typeof e)return aA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aA(e,t):void 0}}function aA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Wx.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Wx.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var iA=function(e){var t=e.businessId,n=e.categoryId,r=e.productId,o=e.metafields,s=e.UIComponent,c=e.handleSuccessAddMetaFields,l=e.handleSuccessDeleteBusinessMetaFields,f=rA(rn(),1)[0],p=rA(yn(),1)[0],d=rA(Br(),2)[1].showToast,y=rA(Bn(),2)[1],h=rA(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),v=h[0],m=h[1],b=rA(Object(i.useState)({loading:!1,result:{error:!1}}),2),g=b[0],O=b[1],w=function(){var e=nA(a.a.mark((function e(){var o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Qx(Qx({},v),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/categories/").concat(n,"/products/").concat(r,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,m(Qx(Qx({},v),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(Qx(Qx({},v),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=nA(a.a.mark((function e(o){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),O(Qx(Qx({},g),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=6,fetch("".concat(f.root,"/business/").concat(t,"/categories/").concat(n,"/products/").concat(r,"/metafields/").concat(o),i);case 6:e.sent.ok&&(u=v.metaFields.filter((function(e){return e.id!==o})),m(Qx(Qx({},v),{},{metaFields:u})),O({loading:!1,result:{error:!1}}),l&&l(o),d(Dr.Success,y("METAFIELD_DELETED","Metafield deleted"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),O({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=nA(a.a.mark((function e(o){var i,u,s,l,h,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dr.Info,y("LOADING","Loading")),O(Qx(Qx({},g),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)},body:JSON.stringify(o)},e.next=6,fetch("".concat(f.root,"/business/").concat(t,"/categories/").concat(n,"/products/").concat(r,"/metafields"),i);case 6:return u=e.sent,e.next=9,u.json();case 9:s=e.sent,l=s.error,h=s.result,l?O({loading:!1,result:{error:!0,result:h}}):([],b=[].concat(Xx(v.metaFields),[h]),m(Qx(Qx({},v),{},{metaFields:b})),O({loading:!1,result:{error:!1}}),c&&c(h),d(Dr.Success,y("METAFIELD_ADDED","Metafield added"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?m(Qx(Qx({},v),{},{metaFields:o})):w()}),[o]),u.a.createElement(u.a.Fragment,null,s&&u.a.createElement(s,Kx({},e,{metaFieldsList:v,actionState:g,handleDeleteMetaField:j,handeAddMetaField:S})))};function uA(){return uA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uA.apply(this,arguments)}function sA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sA(Object(n),!0).forEach((function(t){lA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function pA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){fA(a,r,o,i,u,"next",e)}function u(e){fA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function dA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}iA.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},iA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var hA=function(e){var t=e.business,n=e.UIComponent,r=e.product,o=e.handleSuccessUpdate,s=e.setFormTaxState,c=e.formTaxState,l=e.taxes,f=e.setTaxes,p=e.fees,d=e.setFees,y=dA(rn(),1)[0],h=dA(yn(),1)[0],v=dA(zn(),1)[0],m=dA(Br(),2)[1].showToast,b=dA(Bn(),2)[1],g=dA(Object(i.useState)(r),2),O=g[0],w=g[1],j=dA(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),S=j[0],E=j[1],P=dA(Object(i.useState)({}),2),C=P[0],I=P[1],x=dA(Object(i.useState)({action:null,payload:null}),2),A=x[0],T=x[1],_=dA(Object(i.useState)({open:!1,content:[]}),2),k=_[0],D=_[1],U=function(){var e=pA(a.a.mark((function e(n){var r,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dr.Info,b("LOADING","Loading")),E(cA(cA({},S),{},{loading:!0})),r=cA({},n||S.changes),e.next=6,y.businesses(null==t?void 0:t.id).categories(null==O?void 0:O.category_id).products(null==O?void 0:O.id).save(r,{accessToken:h.token});case 6:i=e.sent,u=i.content,s=u.error,c=u.result,s?E(cA(cA({},S),{},{result:{error:!0,result:c},loading:!1})):(w(cA(cA({},O),c)),E(cA(cA({},S),{},{loading:!1,changes:{}})),o&&o(c),m(Dr.Success,b("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),E(cA(cA({},S),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=pA(a.a.mark((function e(t,n){var r,o,i,u,s,c,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(Dr.Info,b("LOADING","Loading")),!t){e.next=13;break}return e.next=4,fetch("".concat(y.root,"/").concat(n,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h.auth)},body:JSON.stringify(cA({},C))});case 4:return i=e.sent,e.next=7,i.json();case 7:u=e.sent,s=u.result,o=s,"taxes"===n?(f(cA(cA({},l),{},lA({},"id:".concat(s.id),{name:s.name,description:s.description,id:s.id,rate:s.rate,type:s.type}))),v.emit("tax_changed",{tax:{name:s.name,description:s.description,id:s.id,rate:s.rate,type:s.type}}),m(Dr.Success,b("PRODUCT_TAX_SAVED","Product tax saved"))):(d(cA(cA({},p),{},lA({},"id:".concat(s.id),{name:s.name,description:s.description,id:s.id,fixed:s.fixed,percentage:s.percentage}))),v.emit("fee_changed",{fee:{name:s.name,description:s.description,id:s.id,fixed:s.fixed,percentage:s.percentage}}),m(Dr.Success,b("PRODUCT_FEE_SAVED","Product fee saved"))),e.next=21;break;case 13:return e.next=15,fetch("".concat(y.root,"/").concat(n),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h.auth)},body:JSON.stringify(C)});case 15:return c=e.sent,e.next=18,c.json();case 18:g=e.sent,O=g.result,"taxes"===n?(f(cA(cA({},l),{},lA({},"id:".concat(O.id),{name:O.name,description:O.description,id:O.id,rate:O.rate,type:O.type}))),m(Dr.Success,b("PRODUCT_TAX_SAVED","Product tax saved"))):(d(cA(cA({},p),{},lA({},"id:".concat(O.id),{name:O.name,description:O.description,id:O.id,fixed:O.fixed,percentage:O.percentage}))),m(Dr.Success,b("PRODUCT_FEE_SAVED","Product fee saved")));case 21:if(null===(r=o)||void 0===r||!r.error){e.next=23;break}return e.abrupt("return");case 23:T({action:null,payload:null});case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=pA(a.a.mark((function e(t,n){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(cA(cA({},c),{},{loading:!0})),m(Dr.Info,b("LOADING","Loading")),!t){e.next=11;break}return e.next=5,fetch("".concat(y.root,"/").concat(n,"/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h.auth)}});case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,o.error||("taxes"===n?(i=l,v.emit("tax_deleted",{tax:i["id:".concat(t)],isRemove:!0}),delete i["id:".concat(t)],f(i),m(Dr.Success,b("PRODUCT_TAX_DELETED","Product tax deleted"))):(u=p,v.emit("fee_deleted",{tax:u["id:".concat(t)],isRemove:!0}),delete u["id:".concat(t)],d(u),m(Dr.Success,b("PRODUCT_FEE_DELETED","Product fee deleted"))));case 11:s(cA(cA({},c),{},{loading:!1}));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w(r)}),[r]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,uA({},e,{productState:O,taxes:l,fees:p,formTaxState:c,taxToEdit:A,alertState:k,setAlertState:D,formState:S,handleClickProperty:function(e,t){E(cA(cA({},S),{},{changes:cA(cA({},S.changes),{},lA({},e,t))}))},handleChangeTax:function(e,t){I(cA(cA({},C),{},lA({},e,t)))},setTaxToEdit:T,handleSaveTax:L,handleDeleteTax:B,handleUpdateClick:U})))};function vA(){return vA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vA.apply(this,arguments)}function mA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mA(Object(n),!0).forEach((function(t){gA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function wA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}hA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var SA=function(e){var t=e.UIComponent,n=e.businessId,r=e.productId,o=wA(rn(),1)[0],s=wA(yn(),1)[0].token,c=wA(Object(i.useState)({reviews:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(bA(bA({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},e.next=5,fetch("".concat(o.root,"/business/").concat(n,"/product_reviews/").concat(r,"/reviews"),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(u=e.sent).error?f(bA(bA({},l),{},{loading:!1,error:u.error})):f(bA(bA({},l),{},{loading:!1,reviews:u.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(bA(bA({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){OA(a,r,o,i,u,"next",e)}function u(e){OA(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,vA({},e,{productReviewList:l})))};function EA(){return EA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EA.apply(this,arguments)}function PA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return CA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}SA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},SA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var IA=function(e){var t=e.UIComponent,n=e.slug,r=e.categoryId,o=e.productId,a=e.defaultUrl,s=PA(Object(i.useState)(!1),2),c=s[0],l=s[1],f=a||"".concat(window.location.origin,"/store/").concat(n,"?category=").concat(r,"&product=").concat(o);Object(i.useEffect)((function(){var e;window.document.getElementById("addthis_widget")||((e=document.createElement("script")).type="text/javascript",e.src="https://static.addtoany.com/menu/page.js",e.async=!0,e.defer=!0,e.id="addthis_widget",document.body.appendChild(e))}),[]);return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,EA({},e,{updateShowValue:function(e){l(e),e&&window.a2a&&window.a2a.init()},showShareButton:c,urlToShare:f})))};function xA(){return xA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xA.apply(this,arguments)}function AA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function TA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){AA(a,r,o,i,u,"next",e)}function u(e){AA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function _A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_A(Object(n),!0).forEach((function(t){DA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}IA.propTypes={UIComponent:c.a.elementType,slug:c.a.string,categoryId:c.a.number,productId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element)},IA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var BA=function(e){var t,n=e.UIComponent,r=e.handleSuccessUpdate,o=e.handleSuccessDelete,s=e.handleSuccessAdd,c=UA(rn(),1)[0],l=UA(yn(),1)[0].token,f=UA(Br(),2)[1].showToast,p=UA(Bn(),2)[1],d=UA(Object(i.useState)({tag:null!==(t=e.tag)&&void 0!==t?t:null}),2),y=d[0],h=d[1],v=UA(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e=TA(a.a.mark((function e(){var t,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),b(kA(kA({},m),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(m.changes)},e.next=6,fetch("".concat(c.root,"/tags/").concat(y.tag.id),t);case 6:return n=e.sent,e.next=9,n.json();case 9:(o=e.sent).error?b(kA(kA({},m),{},{loading:!1,error:o.result})):(h({tag:kA(kA({},y.tag),o.result)}),b({loading:!1,changes:{},error:null}),r&&r(o.result),f(Dr.Success,p("PRODUCT_TAG_SAVED","Product tag saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(kA(kA({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var t=TA(a.a.mark((function t(){var n,r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Dr.Info,p("LOADING","Loading")),b(kA(kA({},m),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(m.changes)},t.next=6,fetch("".concat(c.root,"/tags"),n);case 6:return r=t.sent,t.next=9,r.json();case 9:(o=t.sent).error?b(kA(kA({},m),{},{loading:!1,error:o.result})):(b({loading:!1,changes:{},error:null}),s&&s(o.result),f(Dr.Success,p("PRODUCT_TAG_ADDED","Product tag added")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(kA(kA({},m),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=TA(a.a.mark((function t(){var n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Dr.Info,p("LOADING","Loading")),b(kA(kA({},m),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},t.next=6,fetch("".concat(c.root,"/tags/").concat(y.tag.id),n);case 6:return r=t.sent,t.next=9,r.json();case 9:(i=t.sent).error?b(kA(kA({},m),{},{loading:!1,error:i.result})):(b({loading:!1,changes:{},error:null}),o&&o(y.tag.id),f(Dr.Success,p("PRODUCT_TAG_DELETED","Product tag deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(kA(kA({},m),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var t;b({loading:!1,changes:{},error:null}),h({tag:null!==(t=e.tag)&&void 0!==t?t:null})}),[e.tag]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,xA({},e,{tagState:y,formState:m,handleChangeInput:function(e){b(kA(kA({},m),{},{changes:kA(kA({},m.changes),{},DA({},e.target.name,e.target.value))}))},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){b(kA(kA({},m),{},{changes:kA(kA({},m.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleUpdateProductTag:g,handleAddProductTag:O,handleDeleteProductTag:w,handleChangeItem:function(e){var t=kA(kA({},null==m?void 0:m.changes),e);b(kA(kA({},m),{},{changes:t}))}})))};function FA(){return FA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FA.apply(this,arguments)}function RA(e){return function(e){if(Array.isArray(e))return JA(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MA(Object(n),!0).forEach((function(t){zA(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MA(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function YA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){GA(a,r,o,i,u,"next",e)}function u(e){GA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function qA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||$A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $A(e,t){if(e){if("string"==typeof e)return JA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?JA(e,t):void 0}}function JA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}BA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},BA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var VA=function(e){var t=e.tags,n=e.businessId,r=e.product,o=e.UIComponent,s=e.handleSuccessProductUpdate,c=qA(rn(),1)[0],l=qA(yn(),1)[0].token,f=qA(Br(),2)[1].showToast,p=qA(Bn(),2)[1],d=qA(Object(i.useState)({loading:!1,tags:[],error:null}),2),y=d[0],h=d[1],v=qA(Object(i.useState)([]),2),m=v[0],b=v[1],g=qA(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=qA(Object(i.useState)(null),2),S=j[0],E=j[1],P=function(){var e=YA(a.a.mark((function e(){var t,n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(NA(NA({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},n=null,r=[],S&&r.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(S,"%"))}}),r.length&&(n={conditions:r,conector:"AND"}),o=n?"".concat(c.root,"/tags?where=").concat(JSON.stringify(n)):"".concat(c.root,"/tags"),e.next=10,fetch(o,t);case 10:return i=e.sent,e.next=13,i.json();case 13:(u=e.sent).error?h(NA(NA({},y),{},{loading:!1,error:u.result})):h(NA(NA({},y),{},{loading:!1,tags:u.result})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),h(NA(NA({},y),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=YA(a.a.mark((function e(t){var o,i,u,d,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),w({loading:!0,error:null}),o={tags:JSON.stringify(t)},e.next=6,c.businesses(n).categories(r.category_id).products(r.id).save(o,{accessToken:l});case 6:i=e.sent,u=i.content,d=u.error,y=u.result,d?w({loading:!1,error:y}):(w({loading:!1,error:null}),s&&s(y),f(Dr.Success,p("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=null==t?void 0:t.reduce((function(e,t){return[].concat(RA(e),[t.id])}),[]);b(e)}),[t]),Object(i.useEffect)((function(){P()}),[S]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,FA({},e,{tagsState:y,searchValue:S,onSearch:E,selectedTagIds:m,actionState:O,handleSuccessUpdate:function(e){var t=y.tags.map((function(t){return t.id===e.id?NA(NA({},t),e):t}));h(NA(NA({},y),{},{tags:t}))},handleSuccessDelete:function(e){var t=y.tags.filter((function(t){return t.id!==e}));h(NA(NA({},y),{},{tags:t}))},handleSuccessAdd:function(e){h(NA(NA({},y),{},{tags:[].concat(RA(y.tags),[e])}))},handleChangeProductTag:function(e,t){var n=[];n=e?[].concat(RA(m),[t]):m.filter((function(e){return e!==parseInt(t)})),b(n),C(n)},handleSelectNoneTags:function(){b([]),C([])},handleSelectAllTags:function(){var e,t=null===(e=y.tags)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(RA(e),[t.id])}),[]);b(t),C(t)}})))};function HA(){return HA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HA.apply(this,arguments)}VA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},VA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var WA=function(e){var t=e.hero,n=e.gallery,r=e.UIComponent;return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,HA({},e,{hero:t,gallery:n})))};function KA(){return KA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KA.apply(this,arguments)}function XA(e){return function(e){if(Array.isArray(e))return aT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZA(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function QA(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ZA(a,r,o,i,u,"next",e)}function u(e){ZA(a,r,o,i,u,"throw",e)}i(void 0)}))}}function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eT(Object(n),!0).forEach((function(t){nT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||oT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oT(e,t){if(e){if("string"==typeof e)return aT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aT(e,t):void 0}}function aT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}WA.propTypes={UIComponent:c.a.elementType,hero:c.a.string,gallery:c.a.arrayOf(c.a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},WA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var iT=function(e){var t=e.business,n=e.product,r=e.ingredient,o=e.UIComponent,s=e.handleSuccessUpdate,c=rT(rn(),1)[0],l=rT(yn(),1)[0].token,f=rT(Br(),2)[1].showToast,p=rT(Bn(),2)[1],d=rT(Object(i.useState)({ingredient:r,loading:!1,error:null}),2),y=d[0],h=d[1],v=rT(Object(i.useState)({}),2),m=v[0],b=v[1],g=rT(Object(i.useState)(!1),2),O=g[0],w=g[1],j=function(){var r=QA(a.a.mark((function r(){var o,i,u,d,v,g;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=tT(tT({},o={business_id:null==t?void 0:t.id,category_id:null==n?void 0:n.category_id,product_id:null==n?void 0:n.id}),m),f(Dr.Info,p("LOADING","Loading")),h(tT(tT({},y),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(o)},r.next=8,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==n?void 0:n.category_id,"/products/").concat(n.id,"/ingredients"),i);case 8:return u=r.sent,r.next=11,u.json();case 11:(d=r.sent).error||(b({}),h(tT(tT({},y),{},{loading:!1,ingredient:d.result})),v=n.ingredients?[].concat(XA(n.ingredients),[d.result]):[d.result],g=tT(tT({},n),{},{ingredients:v}),s&&s(g),f(Dr.Success,p("INGREDIENT_SAVED","Ingredient saved")),e.onClose&&e.onClose()),r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),h(tT(tT({},y),{},{loading:!1,error:r.t0.message}));case 18:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(){return r.apply(this,arguments)}}(),S=function(){var e=QA(a.a.mark((function e(){var o,i,u,d,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=tT(tT({},o={business_id:null==t?void 0:t.id,category_id:null==n?void 0:n.category_id,product_id:null==n?void 0:n.id}),m),f(Dr.Info,p("LOADING","Loading")),h(tT(tT({},y),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(o)},e.next=8,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==n?void 0:n.category_id,"/products/").concat(n.id,"/ingredients/").concat(r.id),i);case 8:return u=e.sent,e.next=11,u.json();case 11:(d=e.sent).error||(b({}),h(tT(tT({},y),{},{loading:!1,ingredient:d.result})),v=n.ingredients.filter((function(e){return e.id===r.id&&Object.assign(e,d.result),!0})),g=tT(tT({},n),{},{ingredients:v}),s&&s(g),f(Dr.Success,p("INGREDIENT_SAVED","Ingredient saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),h(tT(tT({},y),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var o=QA(a.a.mark((function o(){var i,u,d,v,m;return a.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,f(Dr.Info,p("LOADING","Loading")),h(tT(tT({},y),{},{loading:!1})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},o.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==n?void 0:n.category_id,"/products/").concat(n.id,"/ingredients/").concat(r.id),i);case 6:return u=o.sent,o.next=9,u.json();case 9:(d=o.sent).error||(h(tT(tT({},y),{},{loading:!1,ingredient:d.result})),v=n.ingredients.filter((function(e){return e.id!==r.id})),m=tT(tT({},n),{},{ingredients:v}),s&&s(m),f(Dr.Success,p("INGREDIENT_DELETED","Ingredient deleted")),e.onClose&&e.onClose()),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0),h(tT(tT({},y),{},{loading:!1,error:o.t0.message}));case 16:case"end":return o.stop()}}),o,null,[[0,13]])})));return function(){return o.apply(this,arguments)}}();return Object(i.useEffect)((function(){b({}),h(tT(tT({},y),{},{ingredient:r})),w(!r)}),[r]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,KA({},e,{ingredientState:y,changesState:m,isAddMode:O,handleChangeInput:function(e){b(tT(tT({},m),{},nT({},e.target.name,e.target.value)))},handleDeleteIngredient:E,handleAddIngredient:j,handleUpdateIngredient:S})))};iT.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},iT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var uT=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function sT(){return sT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sT.apply(this,arguments)}function cT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cT(Object(n),!0).forEach((function(t){fT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}uT.propTypes={UIComponent:c.a.elementType,option:c.a.object.isRequired,error:c.a.bool},uT.defaultProps={error:!1};var pT=function(e){var t=e.UIComponent,n=e.balance,r=e.option,o=e.suboption,a=e.onChange,i=e.state.selected||e.state.quantity>0,s=0;i&&e.state.quantity&&e.state.quantity>0?s=e.state.quantity:i&&(s=1);var c=e.state.position||"whole",l=r.with_half_option&&o.half_price&&"whole"!==c?o.half_price:o.price,f={id:o.id,name:o.name,price:l,selected:i,quantity:s,position:c,total:l*s},p=function(e){a&&a(e,o,r)};return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,sT({},e,{state:f,increment:function(){r.limit_suboptions_by_max&&n===r.max||(r.limit_suboptions_by_max||f.quantity!==o.max)&&p(lT(lT({},f),{},{selected:0===f.quantity||f.selected,quantity:f.quantity+1,total:f.price*(f.quantity+1)}))},decrement:function(){0!==f.quantity&&p(lT(lT({},f),{},{selected:1!==f.quantity&&f.selected,quantity:f.quantity-1,total:f.price*(f.quantity-1)}))},changePosition:function(e){var t=r.with_half_option&&o.half_price&&"whole"!==e?o.half_price:o.price;p(lT(lT({},f),{},{position:e,price:t,total:t*f.quantity}))},toggleSelect:function(){!f.selected&&r.limit_suboptions_by_max&&n===r.max||p(lT(lT({},f),{},{quantity:f.selected?0:1,selected:!f.selected}))}})))};function dT(){return dT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dT.apply(this,arguments)}function yT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}pT.propTypes={UIComponent:c.a.elementType,balance:c.a.number.isRequired,option:c.a.object.isRequired,suboption:c.a.object.isRequired,state:c.a.shape({selected:c.a.bool,quantity:c.a.number,position:c.a.string}).isRequired,onChange:c.a.func},pT.defaultProps={state:{},balance:0};var vT=function(e){var t=e.categories,n=e.UIComponent,r=yT(Object(i.useState)(t),2),o=r[0],a=r[1];return Object(i.useEffect)((function(){a(t.filter((function(e){return e.id})))}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,dT({},e,{categories:o})))};function mT(){return mT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mT.apply(this,arguments)}function bT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bT(Object(n),!0).forEach((function(t){OT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wT(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function jT(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){wT(a,r,o,i,u,"next",e)}function u(e){wT(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ST(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ET(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ET(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ET(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}vT.propTypes={UIComponent:c.a.elementType,productsList:c.a.object,categories:c.a.arrayOf(c.a.object),isAllCategory:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var PT=function(e){var t=e.isSearchByName,n=e.isSearchByDescription,r=e.businessId,o=e.UIComponent,s=ST(rn(),1)[0],c=ST(vr(),1)[0],l=ST(Object(i.useState)(null),2),f=l[0],p=l[1],d=ST(Object(i.useState)(null),2),y=d[0],h=d[1],v=ST(Object(i.useState)({products:[],loading:!0,error:!1}),2),m=v[0],b=v[1],g=ST(Object(i.useState)([]),2),O=g[0],w=g[1],j=function(){var e=jT(a.a.mark((function e(){var o,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(gT(gT({},m),{},{loading:!0})),e.next=4,s.businesses(r).products().parameters({type:(null===(o=c.options)||void 0===o?void 0:o.type)||1}).get();case 4:i=e.sent,u=i.content.result,l=f||y?u.filter((function(e){return o=e.name,a=e.description,(!f||o.toLowerCase().includes(f.toLowerCase())&&t||a.toLowerCase().includes(f.toLowerCase())&&n)&&(r=e.category_id,!y||Number(r)===Number(y));var r,o,a})):u,b(gT(gT({},m),{},{loading:!1,products:l})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),b(gT(gT({},m),{},{loading:!1,error:e.t0}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=jT(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.businesses(r).categories().get();case 2:t=e.sent,n=t.content.result,w(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j()}),[f,y]),Object(i.useEffect)((function(){S()}),[]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,mT({},e,{categoryValue:!!y,categories:O,productsList:m,handlerClickCategory:function(e){return h(e)},handlerChangeSearch:function(e){return p(e)}})))};function CT(){return CT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CT.apply(this,arguments)}function IT(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xT(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){IT(a,r,o,i,u,"next",e)}function u(e){IT(a,r,o,i,u,"throw",e)}i(void 0)}))}}function AT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AT(Object(n),!0).forEach((function(t){_T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kT(e){return function(e){if(Array.isArray(e))return LT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||UT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||UT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UT(e,t){if(e){if("string"==typeof e)return LT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LT(e,t):void 0}}function LT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}PT.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,isSearchByName:c.a.bool,isSearchByDescription:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},PT.defaultProps={isSearchByName:!0,isSearchByDescription:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var BT=function(e){var t=e.UIComponent,n=e.propsToFetch,r=e.isSearchByName,o=e.user,s=DT(rn(),1)[0],c=DT(yn(),1)[0].token,l=DT(Object(i.useState)(null),2),f=l[0],p=l[1],d=DT(Object(i.useState)({loading:!1,businesses:[],result:{error:null}}),2),y=d[0],h=d[1],v=DT(Object(i.useState)({loading:!1,services:[],result:{error:null}}),2),m=v[0],b=v[1],g=DT(Object(i.useState)(),2),O=g[0],w=g[1],j=new RegExp(/^[A-Za-z0-9\s]+$/g),S=function(){var e=xT(a.a.mark((function e(){var t,o,i,u,c,l,p,d,v,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(TT(TT({},y),{},{loading:!0})),t=null,o=[],f&&(i=[],u=j.test(f),r&&i.push({attribute:"name",value:{condition:"ilike",value:u?encodeURI("%".concat(f,"%")):"%".concat(f,"%")}}),o.push({conector:"OR",conditions:i})),o.length&&(t={conditions:o,conector:"AND"}),c=t?s.businesses().asDashboard().select(n).where(t):s.businesses().asDashboard().select(n),e.next=9,c.get();case 9:l=e.sent,p=l.content,d=p.error,v=p.result,m=p.pagination,h(TT(TT({},y),{},d?{loading:!1,error:v}:{loading:!1,businesses:v,pagination:m})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),h(TT(TT({},y),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=xT(a.a.mark((function e(){var t,n,r,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(TT(TT({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},n="".concat(s.root,"/users/").concat(null==o?void 0:o.id,"/products"),e.next=6,fetch(n,t);case 6:return r=e.sent,e.next=9,r.json();case 9:i=e.sent,u=i.error,l=i.result,f=i.pagination,b(TT(TT({},m),{},u?{loading:!1,error:l}:{loading:!1,services:l,pagination:f})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),b(TT(TT({},m),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){E()}),[null==o?void 0:o.id]),Object(i.useEffect)((function(){S()}),[f]),Object(i.useEffect)((function(){var e,t;if(void 0===O&&(null==y||null===(e=y.businesses)||void 0===e?void 0:e.length)>0&&(null==m||null===(t=m.services)||void 0===t?void 0:t.length)>0){var n=[];y.businesses.forEach((function(e){null!=m&&m.services.reduce((function(e,t){return[].concat(kT(e),[t.business_id])}),[]).includes(e.id)&&n.push(e.id)})),w(n)}}),[null==y?void 0:y.businesses,null==m?void 0:m.services,O]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,CT({},e,{searchValue:f,businessIds:O,onSearch:p,businessList:y,userServiceList:m,handleChangeCheckBox:function(e){var t=[];t=null!=O&&O.includes(e)?O.filter((function(t){return t!==e})):O?[].concat(kT(O),[e]):[e],w(t)},handleUpdateBusinessIds:function(e){w(e)},handleUpdateServices:function(e){b(TT(TT({},m),{},{services:e}))}})))};function FT(){return FT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FT.apply(this,arguments)}function RT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RT(Object(n),!0).forEach((function(t){NT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zT(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function GT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return YT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}BT.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},BT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var qT=function(e){var t=e.UIComponent,n=e.user,r=e.handleSuccessUpdate,o=GT(rn(),1)[0],s=GT(Br(),2)[1].showToast,c=GT(Bn(),2)[1],l=GT(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(t){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(MT(MT({},f),{},{loading:!0})),s(Dr.Info,c("LOADING","Loading")),t&&(f.changes=MT(MT({},f.changes),t)),e.next=6,o.users(null==n?void 0:n.id).save(f.changes);case 6:i=e.sent,p(MT(MT({},f),{},{changes:i.content.error?f.changes:{},result:i.content,loading:!1})),i.content.error||(s(Dr.Success,c("SCHEDULE_UPDATED","Schedule updated")),r&&r(i.content.result)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p(MT(MT({},f),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){zT(a,r,o,i,u,"next",e)}function u(e){zT(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,FT({},e,{formState:f,handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=MT(MT({},n),{},NT({},e.name,e.value))})):n=NT({},e.target.name,e.target.value),p(MT(MT({},f),{},{changes:MT(MT({},f.changes),n)}))},handleChangeItem:function(e){var t=MT(MT({},f.changes),e);p(MT(MT({},f),{},{changes:t}))},handleRemoveKey:function(e){var t=MT({},null==f?void 0:f.changes);delete t[e],p(MT(MT({},f),{},{changes:t}))},handleUpdateClick:d})))};function $T(){return $T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$T.apply(this,arguments)}function JT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JT(Object(n),!0).forEach((function(t){HT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HT(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WT(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function KT(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){WT(a,r,o,i,u,"next",e)}function u(e){WT(a,r,o,i,u,"throw",e)}i(void 0)}))}}function XT(e){return function(e){if(Array.isArray(e))return e_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||QT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||QT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QT(e,t){if(e){if("string"==typeof e)return e_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e_(e,t):void 0}}function e_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}qT.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var t_=function(e){var t=e.UIComponent,n=e.businessId,r=e.services,o=e.userId,s=e.handleUpdateServices,c=e.propsToFetch,l=ZT(rn(),1)[0],f=ZT(Bn(),2)[1],p=ZT(Br(),2)[1].showToast,d=ZT(yn(),1)[0].token,y=ZT(Object(i.useState)([]),2),h=y[0],v=y[1],m=ZT(Object(i.useState)([]),2),b=m[0],g=m[1],O=ZT(Object(i.useState)([]),2),w=O[0],j=O[1],S=ZT(Object(i.useState)({loading:!1,result:{error:!1}}),2),E=S[0],P=S[1],C=ZT(Object(i.useState)({loading:!0,business:{},error:null}),2),I=C[0],x=C[1],A=function(){var e=KT(a.a.mark((function e(){var t,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(VT(VT({},I),{},{loading:!0})),e.next=4,l.businesses(n).asDashboard().select(c).get();case 4:t=e.sent,r=t.content,o=r.result,i=r.error,x(VT(VT({},I),{},i?{error:o,loading:!1}:{business:o,loading:!1,error:null})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),x(VT(VT({},I),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=KT(a.a.mark((function e(t){var n,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(VT(VT({},E),{},{loading:!0})),p(Dr.Info,f("LOADING","Loading")),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)},body:JSON.stringify(t)},e.next=6,fetch("".concat(l.root,"/users/").concat(o,"/products"),n);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(u=e.sent)&&u.error?P(VT(VT({},E),{},{result:u,loading:!1})):(P(VT(VT({},E),{},{result:{error:!1},loading:!1})),s&&s([].concat(XT(r),[u.result])),p(Dr.Success,f("SERVICE_ADDED","Service added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),P(VT(VT({},E),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=KT(a.a.mark((function e(t){var n,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(VT(VT({},E),{},{loading:!0})),p(Dr.Info,f("LOADING","Loading")),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d)}},e.next=6,fetch("".concat(l.root,"/users/").concat(o,"/products/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(u=e.sent)&&u.error?P(VT(VT({},E),{},{result:u,loading:!1})):(P(VT(VT({},E),{},{result:{error:!1},loading:!1})),s&&(c=r.filter((function(e){return e.id!==t})),s(c)),p(Dr.Success,f("SERVICE_DELETED","Service deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),P(VT(VT({},E),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=[];if((null==r?void 0:r.length)>0){e=r.reduce((function(e,t){return[].concat(XT(e),[t.product_id])}),[]),g(e);var t=r.reduce((function(e,t){return[].concat(XT(e),[t.product])}),[]);j(t)}else g([]),j([]);!function(e){var t,n;if(null!=I&&null!==(t=I.business)&&void 0!==t&&null!==(n=t.categories)&&void 0!==n&&n.length){var r,o=[];v(o),function t(n){return(null==n?void 0:n.length)>0&&(null==n?void 0:n.forEach((function(n){var r,a,i=[],u=null===(r=n.products)||void 0===r?void 0:r.reduce((function(e,t){return[].concat(XT(e),[t.id])}),[]);i=[].concat(XT(i),XT(u)),null!=n&&null!==(a=n.subcategories)&&void 0!==a&&a.length&&n.subcategories.forEach((function e(t){var n,r=null===(n=t.products)||void 0===n?void 0:n.reduce((function(e,t){return[].concat(XT(e),[t.id])}),[]);i=[].concat(XT(i),XT(r)),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),o.push({id:n.id,name:n.name,productIds:i,isChecked:0!==i.length&&i.every((function(t){return e.includes(t)}))}),t(n.subcategories)})))}(null==I||null===(r=I.business)||void 0===r?void 0:r.categories)}}(e)}),[r,null==I?void 0:I.business]),Object(i.useEffect)((function(){A()}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,$T({},e,{selectedProducts:w,subCategoriesList:h,selectedProductsIds:b,setSelectedProducts:j,setSelectedProductsIds:g,handleCreateService:function(e){T({product_id:e,business_id:n,user_id:o})},handleDeleteService:function(e){var t=r.find((function(t){return t.product_id===e}));_(t.id)},businessState:I,actionState:E})))};function n_(){return n_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n_.apply(this,arguments)}function r_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r_(Object(n),!0).forEach((function(t){a_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i_(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function u_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},t_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var c_=function(e){var t=e.UIComponent,n=e.token,r=e.allowedLevels,o=u_(rn(),1)[0],s=u_(yn(),2)[1].login,c=u_(zn(),1)[0],l=u_(Object(i.useState)({loading:!0,user:{},error:null}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(){var t,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(o_(o_({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},e.next=5,fetch("".concat(o.root,"/users/me"),t);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,c=u.error,l=u.result,c?(p(o_(o_({},f),{},{loading:!1,error:l})),y()):r.includes(l.level)?s({user:l,token:n,project:null==o?void 0:o.project}):y(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),p(o_(o_({},f),{},{loading:!1,error:[e.t0.message]})),y();case 18:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){i_(a,r,o,i,u,"next",e)}function u(e){i_(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),y=function(){c.emit("go_to_page",{page:"login"})};return Object(i.useEffect)((function(){null!=o&&o.project&&d()}),[null==o?void 0:o.project]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,n_({},e,{userState:f})))};function l_(){return l_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l_.apply(this,arguments)}function f_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}c_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},c_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var p_=function(e){var t,n;function r(){var t;return(t=e.call(this)||this).handleExpired=t.handleExpired.bind(f_(t)),t.handleErrored=t.handleErrored.bind(f_(t)),t.handleChange=t.handleChange.bind(f_(t)),t.handleRecaptchaRef=t.handleRecaptchaRef.bind(f_(t)),t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getValue=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this.props.grecaptcha.getResponse(this._widgetId):null},o.getWidgetId=function(){return this.props.grecaptcha&&void 0!==this._widgetId?this._widgetId:null},o.execute=function(){var e=this.props.grecaptcha;if(e&&void 0!==this._widgetId)return e.execute(this._widgetId);this._executeRequested=!0},o.executeAsync=function(){var e=this;return new Promise((function(t,n){e.executionResolve=t,e.executionReject=n,e.execute()}))},o.reset=function(){this.props.grecaptcha&&void 0!==this._widgetId&&this.props.grecaptcha.reset(this._widgetId)},o.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},o.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},o.handleChange=function(e){this.props.onChange&&this.props.onChange(e),this.executionResolve&&(this.executionResolve(e),delete this.executionReject,delete this.executionResolve)},o.explicitRender=function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&void 0===this._widgetId){var e=document.createElement("div");this._widgetId=this.props.grecaptcha.render(e,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(e)}this._executeRequested&&this.props.grecaptcha&&void 0!==this._widgetId&&(this._executeRequested=!1,this.execute())},o.componentDidMount=function(){this.explicitRender()},o.componentDidUpdate=function(){this.explicitRender()},o.componentWillUnmount=function(){void 0!==this._widgetId&&(this.delayOfCaptchaIframeRemoving(),this.reset())},o.delayOfCaptchaIframeRemoving=function(){var e=document.createElement("div");for(document.body.appendChild(e),e.style.display="none";this.captcha.firstChild;)e.appendChild(this.captcha.firstChild);setTimeout((function(){document.body.removeChild(e)}),5e3)},o.handleRecaptchaRef=function(e){this.captcha=e},o.render=function(){var e=this.props,t=(e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl,function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"]));return u.a.createElement("div",l_({},t,{ref:this.handleRecaptchaRef}))},r}(u.a.Component);p_.displayName="ReCAPTCHA",p_.propTypes={sitekey:c.a.string.isRequired,onChange:c.a.func,grecaptcha:c.a.object,theme:c.a.oneOf(["dark","light"]),type:c.a.oneOf(["image","audio"]),tabindex:c.a.number,onExpired:c.a.func,onErrored:c.a.func,size:c.a.oneOf(["compact","normal","invisible"]),stoken:c.a.string,hl:c.a.string,badge:c.a.oneOf(["bottomright","bottomleft","inline"])},p_.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var d_=n(36),y_=n.n(d_);function h_(){return h_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h_.apply(this,arguments)}var v_={},m_=0;var b_="onloadcallback";var g_,O_,w_=(g_=function(){return"https://"+(("undefined"!=typeof window&&window.recaptchaOptions||{}).useRecaptchaNet?"recaptcha.net":"www.google.com")+"/recaptcha/api.js?onload="+b_+"&render=explicit"},O_=(O_={callbackName:b_,globalName:"grecaptcha"})||{},function(e){var t=e.displayName||e.name||"Component",n=function(t){var n,r;function o(e,n){var r;return(r=t.call(this,e,n)||this).state={},r.__scriptURL="",r}r=t,(n=o).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var a=o.prototype;return a.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+m_++),this.__scriptLoaderID},a.setupScriptURL=function(){return this.__scriptURL="function"==typeof g_?g_():g_,this.__scriptURL},a.asyncScriptLoaderHandleLoad=function(e){var t=this;this.setState(e,(function(){return t.props.asyncScriptOnLoad&&t.props.asyncScriptOnLoad(t.state)}))},a.asyncScriptLoaderTriggerOnScriptLoaded=function(){var e=v_[this.__scriptURL];if(!e||!e.loaded)throw new Error("Script is not loaded.");for(var t in e.observers)e.observers[t](e);delete window[O_.callbackName]},a.componentDidMount=function(){var e=this,t=this.setupScriptURL(),n=this.asyncScriptLoaderGetScriptLoaderID(),r=O_,o=r.globalName,a=r.callbackName,i=r.scriptId;if(o&&void 0!==window[o]&&(v_[t]={loaded:!0,observers:{}}),v_[t]){var u=v_[t];return u&&(u.loaded||u.errored)?void this.asyncScriptLoaderHandleLoad(u):void(u.observers[n]=function(t){return e.asyncScriptLoaderHandleLoad(t)})}var s={};s[n]=function(t){return e.asyncScriptLoaderHandleLoad(t)},v_[t]={loaded:!1,observers:s};var c=document.createElement("script");for(var l in c.src=t,c.async=!0,O_.attributes)c.setAttribute(l,O_.attributes[l]);i&&(c.id=i);var f=function(e){if(v_[t]){var n=v_[t].observers;for(var r in n)e(n[r])&&delete n[r]}};a&&"undefined"!=typeof window&&(window[a]=function(){return e.asyncScriptLoaderTriggerOnScriptLoaded()}),c.onload=function(){var e=v_[t];e&&(e.loaded=!0,f((function(t){return!a&&(t(e),!0)})))},c.onerror=function(){var e=v_[t];e&&(e.errored=!0,f((function(t){return t(e),!0})))},document.body.appendChild(c)},a.componentWillUnmount=function(){var e=this.__scriptURL;if(!0===O_.removeOnUnmount)for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n+=1)t[n].src.indexOf(e)>-1&&t[n].parentNode&&t[n].parentNode.removeChild(t[n]);var r=v_[e];r&&(delete r.observers[this.asyncScriptLoaderGetScriptLoaderID()],!0===O_.removeOnUnmount&&delete v_[e])},a.render=function(){var t=O_.globalName,n=this.props,r=(n.asyncScriptOnLoad,n.forwardedRef),o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(n,["asyncScriptOnLoad","forwardedRef"]);return t&&"undefined"!=typeof window&&(o[t]=void 0!==window[t]?window[t]:void 0),o.ref=r,Object(i.createElement)(e,o)},o}(i.Component),r=Object(i.forwardRef)((function(e,t){return Object(i.createElement)(n,h_({},e,{forwardedRef:t}))}));return r.displayName="AsyncScriptLoader("+t+")",r.propTypes={asyncScriptOnLoad:c.a.func},y_()(r,e)})(p_),j_=w_;function S_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P_=function(e){var t=e.handleReCaptcha,n=S_(tr(),1)[0].configs,r=S_(Object(i.useState)(null),2),o=r[0],a=r[1];return Object(i.useEffect)((function(){var e;n&&Object.keys(n).length>0&&null!=n&&null!==(e=n.security_recaptcha_site_key)&&void 0!==e&&e.value?a(null==n?void 0:n.security_recaptcha_site_key.value):(a(null),console.log("ReCaptcha component: the config doesn't have recaptcha site key"))}),[n]),u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(j_,{key:o,sitekey:o,onChange:function(e){t(e)},onErrored:function(e){return console.log(e)}}))};function C_(){return C_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C_.apply(this,arguments)}function I_(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function x_(e){return function(e){if(Array.isArray(e))return U_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A_(Object(n),!0).forEach((function(t){__(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function __(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||D_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D_(e,t){if(e){if("string"==typeof e)return U_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U_(e,t):void 0}}function U_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}P_.propTypes={handleReCaptcha:c.a.func};var L_=function(e){var t=e.UIComponent,n=k_(rn(),1)[0],r=k_(yn(),1)[0],o=r.token,s=r.loading,c=k_(Object(i.useState)({loading:!0,error:null,loyaltyPlans:[],pagination:null}),2),l=c[0],f=c[1],p=k_(Object(i.useState)(null),2),d=p[0],y=p[1],h=function(){var e,t=(e=a.a.mark((function e(){var t,r,i,u,c,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(T_(T_({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},r="".concat(n.root,"/loyalty_plans"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:u=e.sent,c=u.error,p=u.result,d=u.pagination,f(T_(T_({},l),{},c?{loading:!1,error:p}:{loading:!1,loyaltyPlans:p,pagination:d})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),f(T_(T_({},l),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){I_(a,r,o,i,u,"next",e)}function u(e){I_(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){h()}),[]),Object(i.useEffect)((function(){var e;if(0!==(null==l||null===(e=l.loyaltyPlans)||void 0===e?void 0:e.length)){var t=null==l?void 0:l.loyaltyPlans.find((function(e){return"credit_point"===e.type}));t&&y(T_({},t))}}),[null==l?void 0:l.loyaltyPlans]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,C_({},e,{loyaltyPlanList:l,pointWallet:d,handleUpdateWalletBusiness:function(e){var t=null==d?void 0:d.businesses.map((function(t){return t.id===e.id?T_(T_({},t),e):t}));y(T_(T_({},d),{},{businesses:t}))},handleUpdatePointsWallet:function(e){y(T_({},e))},handleAddWalletBusiness:function(e){var t=[].concat(x_(null==d?void 0:d.businesses),[e]);y(T_(T_({},d),{},{businesses:t}))},handleDeleteWalletBusiness:function(e){var t,n=null==d||null===(t=d.businesses)||void 0===t?void 0:t.filter((function(t){return t.id!==e.id}));y(T_(T_({},d),{},{businesses:n}))}})))};function B_(){return B_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B_.apply(this,arguments)}function F_(e){return function(e){if(Array.isArray(e))return $_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R_(Object(n),!0).forEach((function(t){N_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z_(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function G_(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){z_(a,r,o,i,u,"next",e)}function u(e){z_(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Y_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||q_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q_(e,t){if(e){if("string"==typeof e)return $_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$_(e,t):void 0}}function $_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}L_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},L_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var J_=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.isSearchByName,s=e.isSearchByDescription,c=Y_(rn(),1)[0],l=Y_(yn(),1)[0].token,f=Y_(Br(),2)[1].showToast,p=Y_(Bn(),2)[1],d=Y_(Object(i.useState)(null),2),y=d[0],h=d[1],v=Y_(Object(i.useState)({actions:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=Y_(Object(i.useState)({clear:!1,changes:{}}),2),O=g[0],w=g[1],j=Y_(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),S=j[0],E=j[1],P=function(){var e=G_(a.a.mark((function e(t,n){var r,i,u,f,p,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(M_(M_({},m),{},{loading:!0})),r=null,i=[],y&&(u=[],o&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(y,"%"))}}),s&&u.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(y,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(r={conditions:i,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},p=r?"".concat(c.root,"/event_rules?page=").concat(t,"&page_size=").concat(n,"&where=").concat(JSON.stringify(r)):"".concat(c.root,"/event_rules?page=").concat(t,"&page_size=").concat(n),e.next=10,fetch(p,f);case 10:return d=e.sent,e.next=13,d.json();case 13:(h=e.sent).error?b(M_(M_({},m),{},{loading:!1,error:h.result})):(b({loading:!1,actions:h.result,error:null}),E(M_(M_({},S),{},{currentPage:h.pagination.current_page,totalPages:h.pagination.total_pages,totalItems:h.pagination.total,from:h.pagination.from,to:h.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),b(M_(M_({},m),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=G_(a.a.mark((function e(t,n){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,p("LOADING","Loading")),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=5,fetch("".concat(c.root,"/event_rules/").concat(t),r);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error?b(M_(M_({},m),{},{error:i.result})):(I&&(u=null==m?void 0:m.actions.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0})),I(u)),f(Dr.Success,p("RECOVERY_ACTION_SAVED","Recovery action saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),b(M_(M_({},m),{},{error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){b(M_(M_({},m),{},{actions:e}))};return Object(i.useEffect)((function(){m.loading||P(1,S.pageSize)}),[y]),Object(i.useEffect)((function(){(Object.keys(null==O?void 0:O.changes).length>0||O.clear)&&!m.loading&&P(1,S.pageSize)}),[O]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,B_({},e,{searchValue:y,paginationProps:S,recoveryActionList:m,getRecoveryList:P,setFilterValues:w,setPaginationProps:E,handleChangeSearch:function(e){h(e)},handleUpdateAction:C,handleSuccessAddRecoveryAction:function(e){var t=[].concat(F_(m.actions),[e]);E(M_(M_({},S),{},{to:(null==S?void 0:S.to)+1,total:(null==S?void 0:S.total)+1})),b(M_(M_({},m),{},{actions:t}))},handleSuccessUpdateRecoveryAction:I,handleSuccessDeleteRecoveryAction:function(e){var t=m.actions.filter((function(t){return t.id!==e}));E(M_(M_({},S),{},{total:(null==S?void 0:S.total)-1})),b(M_(M_({},m),{},{actions:t}))}})))};function V_(){return V_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V_.apply(this,arguments)}function H_(e){return H_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H_(e)}function W_(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function K_(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){W_(a,r,o,i,u,"next",e)}function u(e){W_(a,r,o,i,u,"throw",e)}i(void 0)}))}}function X_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X_(Object(n),!0).forEach((function(t){Q_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ek(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}J_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},J_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var nk=function(e){var t=e.action,n=e.recoveryActionList,r=e.UIComponent,o=e.handleSuccessUpdateRecoveryAction,s=e.handleSuccessAddRecoveryAction,c=e.handleSuccessDeleteRecoveryAction,l=ek(Bn(),2)[1],f=ek(rn(),1)[0],p=ek(yn(),1)[0].token,d=ek(Br(),2)[1].showToast,y=ek(Object(i.useState)({action:t,loading:!1,error:null}),2),h=y[0],v=y[1],m=ek(Object(i.useState)({loading:!1,changes:{}}),2),b=m[0],g=m[1],O=ek(Object(i.useState)({loading:!1,error:null}),2),w=O[0],j=O[1],S=ek(Object(i.useState)(!1),2),E=S[0],P=S[1],C=function(){return g({loading:!1,changes:{}})},I=function(){var e=K_(a.a.mark((function e(){var r,i,u,s,c,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,d(Dr.Info,l("LOADING","Loading")),j({loading:!0,error:null}),r=Z_({},null==b?void 0:b.changes))("object"===H_(r[i])&&null!==r[i]||Array.isArray(r[i]))&&(r[i]=JSON.stringify(r[i]));return u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(r)},e.next=8,fetch("".concat(f.root,"/event_rules/").concat(t.id),u);case 8:return s=e.sent,e.next=11,s.json();case 11:(c=e.sent).error?j({loading:!1,error:c.result}):(v(Z_(Z_({},h),{},{action:c.result})),j({loading:!1,error:null}),o&&(y=null==n?void 0:n.actions.filter((function(e){return e.id===t.id&&Object.assign(e,c.result),!0})),o(y)),C(),d(Dr.Success,l("RECOVERY_ACTION_SAVED","Recovery action saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),j({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var t=K_(a.a.mark((function t(){var n,r,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d(Dr.Info,l("LOADING","Loading")),j({loading:!0,error:null}),n=Z_({},null==b?void 0:b.changes),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(n)},t.next=7,fetch("".concat(f.root,"/event_rules"),r);case 7:return o=t.sent,t.next=10,o.json();case 10:(i=t.sent).error?j({loading:!1,error:i.result}):(j({error:null,loading:!1}),s&&s(i.result),d(Dr.Success,l("RECOVERY_ACTION_ADDED","Recovery action added")),e.onClose&&e.onClose()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),j({loading:!1,error:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var n=K_(a.a.mark((function n(){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d(Dr.Info,l("LOADING","Loading")),j(Z_(Z_({},w),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},n.next=6,fetch("".concat(f.root,"/event_rules/").concat(t.id),r);case 6:return o=n.sent,n.next=9,o.json();case 9:n.sent.error||(c&&c(t.id),d(Dr.Success,l("RECOVERY_ACTION_DELETED","Recovery action deleted")),e.onClose&&e.onClose()),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),j({loading:!1,error:[n.t0.message]});case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}();return Object(i.useEffect)((function(){0===Object.keys(t).length?(P(!0),g(Z_(Z_({},b),{},{changes:{enabled:!0,launch_type:"times",name:"",type:"abandoned_cart"}}))):(P(!1),C()),v(Z_(Z_({},h),{},{action:t}))}),[t]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,V_({},e,{isAddMode:E,recoveryActionState:h,formState:b,actionState:w,handleChangeItem:function(e){g(Z_(Z_({},b),{},{changes:Z_(Z_({},b.changes),e)}))},handleChangeInput:function(e){g(Z_(Z_({},b),{},{changes:Z_(Z_({},b.changes),{},Q_({},e.target.name,e.target.value))}))},handleAddRecoveryAction:x,handleDeleteRecoveryAction:A,handleUpdateClick:I,handleRemoveKey:function(e){var t=Z_({},null==b?void 0:b.changes);delete t[e],g(Z_(Z_({},b),{},{changes:t}))}})))};function rk(){return rk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rk.apply(this,arguments)}function ok(e){return function(e){if(Array.isArray(e))return pk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ak(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ik(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ak(Object(n),!0).forEach((function(t){uk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ak(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sk(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function ck(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){sk(a,r,o,i,u,"next",e)}function u(e){sk(a,r,o,i,u,"throw",e)}i(void 0)}))}}function lk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||fk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fk(e,t){if(e){if("string"==typeof e)return pk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pk(e,t):void 0}}function pk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nk.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dk=function(e){var t=e.action,n=e.UIComponent,r=lk(rn(),1)[0],o=lk(Bn(),2)[1],s=lk(Br(),2)[1].showToast,c=lk(yn(),1)[0].token,l=lk(Object(i.useState)({loading:!1,notifications:[],error:null}),2),f=l[0],p=l[1],d=lk(Object(i.useState)({loading:!1,error:null}),2),y=d[0],h=d[1],v=function(){var e=ck(a.a.mark((function e(){var n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(ik(ik({},f),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},e.next=5,fetch("".concat(r.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels"),n);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error?p(ik(ik({},f),{},{loading:!1,error:i.result})):p({loading:!1,notifications:i.result,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(ik(ik({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),m=function(e){var t=f.notifications.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));p(ik(ik({},f),{},{notifications:t}))},b=function(){var e=ck(a.a.mark((function e(n,i){var u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,o("LOADING","Loading")),h(ik(ik({},y),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(i)},e.next=6,fetch("".concat(r.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels/").concat(n),u);case 6:return l=e.sent,e.next=9,l.json();case 9:(f=e.sent).error?h({loading:!1,error:f.result}):(h({loading:!1,error:null}),m&&m(f.result),s(Dr.Success,o("NOTIFICATION_SAVED","Notification saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h({loading:!1,error:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){v()}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,rk({},e,{actionState:y,notificationListState:f,handleAddNotifications:function(e){var t=[].concat(ok(f.notifications),[e]);p(ik(ik({},f),{},{notifications:t}))},handleUpdateNotifications:m,handleDeleteNotifications:function(e){var t=f.notifications.filter((function(t){return t.id!==e.id}));p(ik(ik({},f),{},{notifications:t}))},handleUpdateClick:b})))};function yk(){return yk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yk.apply(this,arguments)}function hk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}dk.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},dk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mk=function(e){var t=e.UIComponent,n=hk(Object(i.useState)(null),2),r=n[0],o=n[1],a=hk(vr(null),1)[0];return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,yk({},e,{orderState:a,optionSelected:r,handleClickOption:function(e){o(e===r?null:e)}})))};function bk(){return bk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bk.apply(this,arguments)}function gk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ok(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gk(Object(n),!0).forEach((function(t){wk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jk(e){return function(e){if(Array.isArray(e))return Pk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ek(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||Ek(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ek(e,t){if(e){if("string"==typeof e)return Pk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pk(e,t):void 0}}function Pk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mk.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ck=function(e){var t=e.UIComponent,n=e.scheduleList,r=e.handleChangeScheduleState,o=Sk(Object(i.useState)([]),2),a=o[0],s=o[1],c=Sk(Object(i.useState)(!1),2),l=c[0],f=c[1],p=Sk(Object(i.useState)(!1),2),d=p[0],y=p[1],h=Sk(Object(i.useState)({open:{hour:0,minute:0},close:{hour:23,minute:59}}),2),v=h[0],m=h[1],b=Sk(Object(i.useState)({}),2),g=b[0],O=b[1],w=Sk(Object(i.useState)([]),2),j=w[0],S=w[1],E=function(e){return 60*e.hour+e.minute},P=function(e,t,n){for(var r=60*t.open.hour+t.open.minute,o=60*t.close.hour+t.close.minute,a=0;a<e.length;a++)if(a!==n){var i=60*e[a].open.hour+15*parseInt(e[a].open.minute/15),u=60*e[a].close.hour+15*parseInt(e[a].close.minute/15);if(r<i&&o>u)return!0;if(r<i&&o>i)return!0;if(r>i&&o<u)return!0;if(r<u&&o>u)return!0;if(o===u||r===i)return!0}return!1};return Object(i.useEffect)((function(){0!==a.length&&r(jk(a))}),[a]),Object(i.useEffect)((function(){if(n)s(jk(n));else{for(var e=[],t=0;t<7;t++)e.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});s(e)}}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,bk({},e,{scheduleState:a,isConflict:l,setIsConflict:f,isTimeChangeError:d,addScheduleTime:v,openAddSchedule:g,setIsTimeChangeError:y,handleEnabledSchedule:function(e,t){var n=jk(a);n[e].enabled=t,s(n)},handleChangeScheduleTime:function(e,t,n,r){var o,i=jk(a),u=jk(i[t].lapses),c=parseInt(e.split(":")[0]),l=parseInt(e.split(":")[1]),p=!1;(r?(p=E({hour:c,minute:l})>=E(u[n].close))?y(!0):o={open:{hour:c,minute:l},close:u[n].close}:(p=E(u[n].open)>=E({hour:c,minute:l}))?y(!0):o={open:u[n].open,close:{hour:c,minute:l}},p)||(P(u,o,n)?f(!0):(i[t].lapses[n]=o,i[t].lapses.sort((function(e,t){return E(e.open)-E(t.open)})),s(i)))},handleDeleteSchedule:function(e,t){var n=jk(a);n[e].lapses.splice(t,1),s(n)},handleOpenAddSchedule:function(e){m({open:{hour:0,minute:0},close:{hour:23,minute:59}}),O(wk({},e,!0))},handleChangeAddScheduleTime:function(e,t){var n=parseInt(e.split(":")[0]),r=parseInt(e.split(":")[1]);t?E({hour:n,minute:r})>=E(v.close)?y(!0):m(Ok(Ok({},v),{},{open:{hour:n,minute:r}})):E(v.open)>=E({hour:n,minute:r})?y(!0):m(Ok(Ok({},v),{},{close:{hour:n,minute:r}}))},handleAddSchedule:function(e){var t=jk(a),n=jk(t[e].lapses);P(n,v,null)?f(!0):(t[e].lapses.push(v),t[e].lapses.sort((function(e,t){return E(e.open)-E(t.open)})),s(t),O(wk({},e,!1)))},selectedCopyDays:j,cleanSelectedCopyDays:function(){return S([])},handleSelectCopyTimes:function(e){var t=j.includes(e)?j.filter((function(t){return t!==e})):[].concat(jk(j),[e]);S(t)},handleApplyScheduleCopyTimes:function(e){var t=a.map((function(t,n){if(j.includes(n)){var r=jk(a[e].lapses);return{enabled:a[e].enabled,lapses:r}}return t}));s(t)}})))};function Ik(){return Ik=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ik.apply(this,arguments)}function xk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ak(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xk(Object(n),!0).forEach((function(t){Tk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _k(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function kk(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_k(a,r,o,i,u,"next",e)}function u(e){_k(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Dk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Uk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ck.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ck.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Lk=function(e){var t=e.UIComponent,n=e.useChekoutFileds,r=e.handleButtonSignupClick,o=e.handleSuccessSignup,s=e.externalPhoneNumber,c={},l=Dk(rn(),1)[0],f=Dk(yn(),2)[1].login,p=Dk(Jr(),1)[0],d=Dk(Object(i.useState)({loading:!1,result:{error:!1}}),2),y=d[0],h=d[1],v=Dk(Object(i.useState)({email:"",cellphone:s||"",password:""}),2),m=v[0],b=v[1],g=Dk(Object(i.useState)({loading:!1,result:{error:!1}}),2),O=g[0],w=g[1],j=Dk(Object(i.useState)({loading:!1,result:{error:!1}}),2),S=j[0],E=j[1],P=function(){var e=kk(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Ak(Ak({},y),{},{loading:!0})),n={},c.signup=n,r=t||m,e.next=7,l.users().save(r,{cancelToken:n});case 7:i=e.sent,h({result:i.content,loading:!1}),i.content.error||o&&o(i.content.result),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&h({result:{error:!0,result:e.t0.message},loading:!1});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=kk(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(Ak(Ak({},O),{},{loading:!0})),e.next=4,fetch("".concat(l.root,"/auth/sms/twilio/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ak(Ak({},t),{},{cellphone:t.cellphone,country_phone_code:"+".concat(t.country_phone_code)}))});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,w(Ak(Ak({},O),{},{loading:!1,result:r})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),w(Ak(Ak({},O),{},{loading:!1,result:{error:e.t0.message}}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=kk(a.a.mark((function e(t){var n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(Ak(Ak({},S),{},{loading:!0})),e.next=4,fetch("".concat(l.root,"/auth/sms/twilio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return r=e.sent,e.next=7,r.json();case 7:null!=(i=e.sent)&&i.error||null==i||null===(n=i.result)||void 0===n||!n.id||(f({user:null==i?void 0:i.result,token:null==i||null===(u=i.result)||void 0===u||null===(s=u.session)||void 0===s?void 0:s.access_token}),o&&o(null==i?void 0:i.result)),E(Ak(Ak({},S),{},{loading:!1,result:i})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),E(Ak(Ak({},S),{},{loading:!1,result:{error:e.t0.message}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){c.signup&&c.signup.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Ik({},e,{formState:y,validationFields:p,signupData:m,showField:function(e){var t,r,o;return!n||!p.loading&&!(null!==(t=p.fields)&&void 0!==t&&t.checkout[e])||!p.loading&&(null===(r=p.fields)||void 0===r?void 0:r.checkout[e])&&(null===(o=p.fields)||void 0===o?void 0:o.checkout[e].enabled)},isRequiredField:function(e){var t,r,o;return"password"===e||n&&!p.loading&&(null===(t=p.fields)||void 0===t?void 0:t.checkout[e])&&(null===(r=p.fields)||void 0===r?void 0:r.checkout[e].enabled)&&(null===(o=p.fields)||void 0===o?void 0:o.checkout[e].required)},verifyPhoneState:O,checkPhoneCodeState:S,setCheckPhoneCodeState:function(e){E(e||{loading:!1,result:{error:!1}})},handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=Ak(Ak({},n),{},Tk({},e.name,e.value))})):n=Tk({},e.target.name,e.target.value),b(Ak(Ak({},m),n))},handleButtonSignupClick:r||P,handleSendVerifyCode:C,handleCheckPhoneCode:I})))};Lk.propTypes={UIComponent:c.a.elementType,handleButtonSignupClick:c.a.func,handleSuccessSignup:c.a.func,handleContinueAsGuest:c.a.func,useChekoutFileds:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToLogin:c.a.string,elementLinkToLogin:c.a.element},Lk.defaultProps={useChekoutFileds:!1,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Bk=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function Fk(){return Fk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fk.apply(this,arguments)}function Rk(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Mk(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Rk(a,r,o,i,u,"next",e)}function u(e){Rk(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Nk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nk(Object(n),!0).forEach((function(t){Gk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Bk.propTypes={UIComponent:c.a.elementType,name:c.a.string,minimun:c.a.number,delivery_price:c.a.number,description:c.a.string,distance:c.a.number,delivery_time:c.a.string,pickup_time:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Bk.defaultProps={id:0,name:"",minimun:0,delivery_price:0,description:"",distance:0,delivery_time:""};var $k=function(e){var t=e.UIComponent,n=e.handleDeleteLevelList,r=e.handleUpdateLevelList,o=Yk(rn(),1)[0],s=Yk(yn(),1)[0].token,c=Yk(Br(),2)[1].showToast,l=Yk(Bn(),2)[1],f=Yk(Object(i.useState)({loading:!1,error:null,changes:{}}),2),p=f[0],d=f[1],y=function(){var e=Mk(a.a.mark((function e(t){var r,i,u,f,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),d(zk(zk({},p),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},i="".concat(o.root,"/loyalty_levels/").concat(t),e.next=7,fetch(i,r);case 7:return u=e.sent,e.next=10,u.json();case 10:f=e.sent,y=f.error,h=f.result,y?d(zk(zk({},p),{},{loading:!1,error:h})):(c(Dr.Success,l("LEVEL_DELETED","Level deleted")),d(zk(zk({},p),{},{loading:!1,error:null,changes:{}})),n(h)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),d(zk(zk({},p),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Mk(a.a.mark((function e(t,n){var i,u,f,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dr.Info,l("LOADING","Loading")),d(zk(zk({},p),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(t)},e.next=6,fetch("".concat(o.root,"/loyalty_levels/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:f=e.sent,y=f.error,h=f.result,y?d(zk(zk({},p),{},{loading:!1,error:h})):(d({changes:{},loading:!1,error:null}),r(h),c(Dr.Success,l("LEVEL_UPDATED","Level updated"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),d(zk(zk({},p),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,Fk({},e,{formState:p,handleUpdateDeleteClick:y,handleUpdateLevel:function(e,t){var n,r,o=t===(null==p||null===(n=p.changes)||void 0===n?void 0:n.id)?zk(zk({},null==p?void 0:p.changes),{},Gk({},e.target.name,e.target.value)):(Gk(r={},e.target.name,e.target.value),Gk(r,"id",t),r);d(zk(zk({},p),{},{changes:o}))},handleUpdateBtnClick:function(){var e;h(null==p?void 0:p.changes,null==p||null===(e=p.changes)||void 0===e?void 0:e.id)},handleChangeLevel:function(e,t){var n,r=t===(null==p||null===(n=p.changes)||void 0===n?void 0:n.id)?zk(zk({},null==p?void 0:p.changes),e):zk(zk({},e),{},{id:t});d(zk(zk({},p),{},{changes:r}))}})))};$k.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$k.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Jk=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};Jk.propTypes={UIComponent:c.a.elementType,order:c.a.object.isRequired,orderType:c.a.string.isRequired,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Jk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Vk=function(e){var t=e.UIComponent;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,e))};function Hk(){return Hk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hk.apply(this,arguments)}function Wk(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function Kk(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Wk(a,r,o,i,u,"next",e)}function u(e){Wk(a,r,o,i,u,"throw",e)}i(void 0)}))}}function Xk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xk(Object(n),!0).forEach((function(t){Qk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Vk.propTypes={UIComponent:c.a.elementType,isSoldOut:c.a.bool,images:c.a.string,name:c.a.string,description:c.a.string,price:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Vk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nD=function(e){var t=e.action,n=e.UIComponent,r=e.handleAddNotifications,o=e.handleUpdateNotifications,s=e.handleDeleteNotifications,c=e.onClose,l=eD(Bn(),2)[1],f=eD(rn(),1)[0],p=eD(yn(),1)[0].token,d=eD(Object(i.useState)({loading:!1,changes:{},error:null}),2),y=d[0],h=d[1],v=eD(Br(),2)[1].showToast,m=function(){h(Zk(Zk({},y),{},{changes:{}}))},b=function(){var e=Kk(a.a.mark((function e(){var n,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Dr.Info,l("LOADING","Loading")),h(Zk(Zk({},y),{},{loading:!0})),n=Zk(Zk({},null==y?void 0:y.changes),{},{enabled:!0}),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(n)},e.next=7,fetch("".concat(f.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels"),o);case 7:return i=e.sent,e.next=10,i.json();case 10:(u=e.sent).error?h(Zk(Zk({},y),{},{loading:!1,error:u.result})):(h(Zk(Zk({},y),{},{changes:{},loading:!1,error:null})),r(u.result),v(Dr.Success,l("NOTIFICATION_ADDED","Notification added")),c&&c()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),h(Zk(Zk({},y),{},{loading:!1,error:e.t0.message}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Kk(a.a.mark((function e(n,r){var i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Dr.Info,l("LOADING","Loading")),h(Zk(Zk({},y),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(r)},e.next=6,fetch("".concat(f.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels/").concat(n),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(s=e.sent).error?h(Zk(Zk({},y),{},{loading:!1,error:s.result})):(h(Zk(Zk({},y),{},{changes:{},loading:!1,error:null})),o&&o(s.result),m(),v(Dr.Success,l("NOTIFICATION_SAVED","Notification saved")),c&&c()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(Zk(Zk({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Kk(a.a.mark((function e(n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Dr.Info,l("LOADING","Loading")),h(Zk(Zk({},y),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)}},e.next=6,fetch("".concat(f.root,"/event_rules/").concat(null==t?void 0:t.id,"/channels/").concat(n),r);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?h(Zk(Zk({},y),{},{loading:!1,error:i.result})):(h(Zk(Zk({},y),{},{changes:{},loading:!1,error:null})),s&&s(i.result),m(),v(Dr.Success,l("NOTIFICATION_DELETED","Notification deleted")),c&&c()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(Zk(Zk({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,Hk({},e,{formState:y,cleanFormState:m,handleChangeInput:function(e){h(Zk(Zk({},y),{},{changes:Zk(Zk({},y.changes),{},Qk({},e.target.name,e.target.value))}))},handleChangeSelect:function(e,t){h(Zk(Zk({},y),{},{changes:Zk(Zk({},y.changes),{},Qk({},e,t))}))},handleUpdateClick:g,handleDeleteClick:O,handleClickAddBtn:b})))};function rD(){return rD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rD.apply(this,arguments)}function oD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oD(Object(n),!0).forEach((function(t){iD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function sD(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){uD(a,r,o,i,u,"next",e)}function u(e){uD(a,r,o,i,u,"throw",e)}i(void 0)}))}}function cD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nD.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fD=function(e){var t=e.UIComponent,n=cD(rn(),1)[0],r=cD(yn(),1)[0].token,o=cD(Bn(),2)[1],s=cD(Br(),2)[1].showToast,c=cD(Object(i.useState)({loading:!0,sites:[],error:null}),2),l=c[0],f=c[1],p=cD(Object(i.useState)({loading:!1,configs:[],error:null}),2),d=p[0],y=p[1],h=cD(Object(i.useState)({loading:!1,error:null}),2),v=h[0],m=h[1],b=function(){var e=sD(a.a.mark((function e(){var t,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=4,fetch("".concat(n.root,"/sites"),t);case 4:return o=e.sent,e.next=7,o.json();case 7:i=e.sent,u=i.error,s=i.result,f(u?aD(aD({},l),{},{loading:!1,error:s}):{loading:!1,sites:s,error:null}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),f(aD(aD({},l),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=sD(a.a.mark((function e(t){var o,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(aD(aD({},d),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/sites/").concat(t,"/configs"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.error,c=u.result,y(s?aD(aD({},d),{},{error:c}):{loading:!1,configs:c,error:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),y(aD(aD({},d),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=sD(a.a.mark((function e(t,i,u){var c,l,f,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(Dr.Info,o("LOADING","Loading")),m(aD(aD({},v),{},{loading:!0})),c={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({value:t})},e.next=6,fetch("".concat(n.root,"/sites/").concat(i,"/configs/").concat(u),c);case 6:return l=e.sent,e.next=9,l.json();case 9:f=e.sent,p=f.error,d=f.result,p?m({loading:!1,error:d}):(m({loading:!1,error:null}),s(Dr.Success,o("SETTINGS_UPDATE","Settings updated"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){b()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,rD({},e,{sitesState:l,siteConfigsState:d,actionState:v,handleGetSiteConfigs:g,handleChangeConfig:O})))};fD.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var pD=["photo"];function dD(e){return dD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dD(e)}function yD(){return yD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yD.apply(this,arguments)}function hD(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function vD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function mD(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){vD(a,r,o,i,u,"next",e)}function u(e){vD(a,r,o,i,u,"throw",e)}i(void 0)}))}}function bD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bD(Object(n),!0).forEach((function(t){OD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function OD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var SD=function(e){var t=e.UIComponent,n=e.useSessionUser,r=e.refreshSessionUser,o=e.useDefualtSessionManager,s=e.userId,c=e.user,l=e.useValidationFields,f=e.handleButtonUpdateClick,p=e.handleSuccessUpdate,d=e.handleSuccessAdd,y=e.isProfessional,h=wD(rn(),1)[0],v=wD(yn(),2),m=v[0],b=v[1].changeUser,g=wD(Jr(),1)[0],O=wD(Object(i.useState)(!1),2),w=O[0],j=O[1],S=wD(Object(i.useState)({loading:!1,result:{error:!1}}),2),E=S[0],P=S[1],C=wD(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),I=C[0],x=C[1],A={},T=o?m.token:e.accessToken;Object(i.useEffect)((function(){if(c){if(!(s||n&&r)||m.loading||e.userData)P({loading:!1,result:{error:!1,result:n&&!r?m.user:c}});else{P(gD(gD({},E),{},{loading:!0}));var t={};A.user=t,h.setAccessToken(T).users(n&&r?m.user.id:s).get({cancelToken:t}).then((function(e){P({loading:!1,result:e.content}),e.content.result&&b(gD(gD({},m.user),e.content.result))})).catch((function(e){"Cancel"!==e.constructor.name&&P({loading:!1,result:{error:!0,result:e.message}})}))}return function(){A.user&&A.user.cancel()}}}),[m.loading,c]);var _=function(){var e=mD(a.a.mark((function e(t,r,o){var i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return",f(E.result.result,I.changes));case 2:if(e.prev=2,x(gD(gD({},I),{},{loading:!0})),t&&(I.changes=gD(gD({},I.changes),t)),!r){e.next=13;break}return e.next=8,h.users((null==c?void 0:c.id)||E.result.result.id).save({photo:o||I.changes.photo},{accessToken:T});case 8:i=e.sent,u=I.changes,u.photo,s=hD(u,pD),x(gD(gD({},I),{},{changes:i.content.error?I.changes:s,result:i.content,loading:!1})),e.next=17;break;case 13:return e.next=15,h.users((null==c?void 0:c.id)||E.result.result.id).save(I.changes,{accessToken:T});case 15:i=e.sent,x(gD(gD({},I),{},{changes:i.content.error?I.changes:{},result:i.content,loading:!1}));case 17:i.content.error||(P(gD(gD({},E),{},{result:gD(gD({},E.result),i.content)})),n&&b(gD(gD({},m.user),i.content.result)),p&&p(i.content.result)),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),x(gD(gD({},I),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t,n,r){return e.apply(this,arguments)}}(),k=function(){var t=mD(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,x(gD(gD({},I),{},{loading:!0})),n=gD({},null==I?void 0:I.changes),y&&Object.assign(n,{level:8}),t.next=6,h.users().save(n,{accessToken:T});case 6:r=t.sent,x(gD(gD({},I),{},{changes:r.content.error?I.changes:{},result:r.content,loading:!1})),r.content.error||(P(gD(gD({},E),{},{result:gD(gD({},E.result),r.content)})),d&&d(r.content.result),e.onClose&&e.onClose()),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),x(gD(gD({},I),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,yD({},e,{isEdit:w,cleanFormState:function(e){return x(gD(gD({},I),e))},formState:I,userState:E,validationFields:g,showField:function(e){var t,n,r;return!l||!g.loading&&!(null!==(t=g.fields)&&void 0!==t&&t.checkout[e])||!g.loading&&(null===(n=g.fields)||void 0===n?void 0:n.checkout[e])&&(null===(r=g.fields)||void 0===r?void 0:r.checkout[e].enabled)},setFormState:x,handleChangeSwtich:function(e,t){var n=OD({},e,t);x(gD(gD({},I),{},{changes:gD(gD({},I.changes),n)}))},isRequiredField:function(e){var t,n,r;return l&&!g.loading&&(null===(t=g.fields)||void 0===t?void 0:t.checkout[e])&&(null===(n=g.fields)||void 0===n?void 0:n.checkout[e].enabled)&&(null===(r=g.fields)||void 0===r?void 0:r.checkout[e].required)},handleChangeInput:function(e,t){var n={};t?Object.values(e).map((function(e){n=gD(gD({},n),{},OD({},e.name,e.value))})):n=OD({},e.target.name,e.target.value),x(gD(gD({},I),{},{changes:gD(gD({},I.changes),n)}))},handleButtonUpdateClick:_,handleButtonAddClick:k,handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){x(gD(gD({},I),{},{changes:gD(gD({},I.changes),{},{photo:t.result})}))},t.onerror=function(e){return console.log(e)}},toggleIsEdit:function(){return j(!w)},handleChangeUserType:function(e){var t={level:e};x(gD(gD({},I),{},{changes:gD(gD({},I.changes),t)}))},handleChangeOccupation:function(e){x(gD(gD({},I),{},{changes:gD(gD({},I.changes),{},{occupation_id:e})}))}})))};function ED(){return ED=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ED.apply(this,arguments)}function PD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PD(Object(n),!0).forEach((function(t){ID(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ID(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function AD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return TD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}SD.propTypes={UIComponent:c.a.elementType,refreshSessionUser:c.a.bool,handleButtonUpdateClick:c.a.func,handleSuccessUpdate:c.a.func,useValidationFields:c.a.bool,validationFieldsType:c.a.string,useDefualtSessionManager:c.a.bool,accessToken:function(e,t){return void 0!==e[t]&&"string"!=typeof e[t]?new Error("Invalid prop `".concat(t,"` of type `").concat(dD(e[t]),"` supplied to `UserFormDetails`, expected `object`.")):void 0!==e[t]||e.useDefualtSessionManager?void 0:new Error("Invalid prop `".concat(t,"` is required when `useDefualtSessionManager` is false."))},beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToLogin:c.a.string,elementLinkToLogin:c.a.element},SD.defaultProps={useValidationFields:!1,validationFieldsType:"checkout",useDefualtSessionManager:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var _D=function(e){var t=e.defaultUserTypesSelected,n=e.disabledActiveStateCondition,r=e.UIComponent,o=e.userTypesSelected,s=e.selectedUserActiveState,c=e.searchValue,l=e.isSearchByUserId,f=e.isSearchByUserEmail,p=e.isSearchByUserPhone,d=e.isSearchByUserName,y=AD(rn(),1)[0],h=AD(yn(),1)[0],v=h.token,m=h.loading,b=AD(Object(i.useState)({loading:!1,error:null,result:null}),2),g=b[0],O=b[1],w=function(){var e,r=(e=a.a.mark((function e(r){var i,u,h,b,w,j,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(CD(CD({},g),{},{loading:!0})),i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}},u=[],Array.isArray(t)&&u.push({attribute:"level",value:t}),h=[],r&&(o.length>0&&h.push({attribute:"level",value:o}),n||h.push({attribute:"enabled",value:s}),c&&(b=[],l&&b.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),f&&b.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),p&&b.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),d&&(b.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),b.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}})),h.push({conector:"OR",conditions:b}))),w=r?"".concat(y.root,"/users.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(h)):u.length>0?"".concat(y.root,"/users.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(u)):"".concat(y.root,"/users.csv?mode=dashboard&orderBy=id"),e.next=12,fetch(w,i);case 12:return j=e.sent,S=(new Date).getTime(),e.next=16,j.blob().then((function(e){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="users_".concat(S,".csv"),n.click()}));case 16:O(CD(CD({},g),{},{loading:!1})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),O(CD(CD({},g),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){xD(a,r,o,i,u,"next",e)}function u(e){xD(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,ED({},e,{actionStatus:g,getCSV:w})))};function kD(){return kD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kD.apply(this,arguments)}function DD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function UD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UD(Object(n),!0).forEach((function(t){BD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return RD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}_D.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_D.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var MD=function(e){var t=e.UIComponent,n=e.businessId,r=e.products,o=e.cartProducts,s=e.onSave,c=FD(Object(i.useState)({products:[],loading:!0,error:!1}),2),l=c[0],f=c[1],p=FD(Object(i.useState)([]),2),d=p[0],y=p[1],h=FD(rn(),1)[0],v=FD(vr(),1)[0];Object(i.useEffect)((function(){null!=r&&r.length||n?null!=r&&r.length?b(r):m():f(LD(LD({},l),{},{error:!0,message:"BusinessId is required when products is not defined"}))}),[]),Object(i.useEffect)((function(){l.loading||b(d)}),[v.loading]);var m=function(){var e,t=(e=a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.businesses(n).products().where([{attribute:"upselling",value:!0}]).parameters({type:1}).get();case 3:t=e.sent,r=t.content.result,y(r),b(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),f(LD(LD({},l),{},{loading:!1,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){DD(a,r,o,i,u,"next",e)}function u(e){DD(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),b=function(e){var t=e.filter((function(e){return e.upselling})),n=o.filter((function(e){return t.find((function(t){return t.id===e.id}))}));n.length?f(LD(LD({},l),{},{loading:!1,products:t.filter((function(e){return!e.inventoried&&!n.find((function(t){return t.id===e.id}))}))})):f(LD(LD({},l),{},{loading:!1,products:t}))};return u.a.createElement(t,kD({},e,{upsellingProducts:l,handleFormProduct:function(e){s(e)}}))};function ND(){return ND=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ND.apply(this,arguments)}function zD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zD(Object(n),!0).forEach((function(t){YD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function $D(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){qD(a,r,o,i,u,"next",e)}function u(e){qD(a,r,o,i,u,"throw",e)}i(void 0)}))}}function JD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return VD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}MD.propTypes={UIComponent:c.a.elementType,upsellingProducts:c.a.array,businessId:c.a.number};var HD=function(e){var t=e.orderId,n=e.propsToFetch,r=e.asDashboard,o=e.hashKey,s=e.userCustomerId,c=e.UIComponent,l=JD(yn(),1)[0],f=l.user,p=l.token,d=l.loading,y=JD(rn(),1)[0],h=JD(zn(),1)[0],v=JD(Bn(),2)[1],m=JD(Br(),2)[1].showToast,b=JD(Object(i.useState)({order:null,loading:!e.order,error:null}),2),g=b[0],O=b[1],w=JD(Object(i.useState)({status:null,loading:!1,error:null}),2),j=w[0],S=w[1],E=JD(Object(i.useState)({loading:!1,error:null}),2),P=E[0],C=E[1],I=JD(Object(i.useState)({loading:!0,error:null,messages:[]}),2),x=I[0],A=I[1],T=JD(Object(i.useState)(!1),2),_=T[0],k=T[1],D=Cn(),U=e.accessToken||p,L=function(){var e=$D(a.a.mark((function e(){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A(GD(GD({},x),{},{loading:!0})),n="".concat(y.root,"/orders/").concat(t,"/messages?mode=dashboard"),e.next=5,fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(U)}});case 5:return r=e.sent,e.next=8,r.json();case 8:o=e.sent,i=o.error,u=o.result,A(i?GD(GD({},x),{},{loading:!1,error:u}):{messages:u,loading:!1,error:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),A(GD(GD({},x),{},{loading:!1,error:[e.t0.Messages]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=$D(a.a.mark((function e(n){var r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(GD(GD({},j),{},{loading:!0})),e.next=4,fetch("".concat(y.root,"/orders/").concat(t,"/messages"),{method:"post",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({can_see:"0,2,3",comment:"I am on the parking number: ".concat(n),order_id:t,type:2})});case 4:r=e.sent,o=r.status,S(GD(GD({},j),{},{loading:!1,status:o})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),S(GD(GD({},j),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=$D(a.a.mark((function e(){var i,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},o&&(i.headers={"X-uuid-access-X":o}),s&&(i.query={mode:"dashboard"}),e.prev=3,O(GD(GD({},g),{},{loading:!0})),u=n?r?y.setAccessToken(p).orders(t).asDashboard().select(n):y.setAccessToken(p).orders(t).select(n):r?y.setAccessToken(p).orders(t).asDashboard():y.setAccessToken(p).orders(t),e.next=8,u.get();case 8:c=e.sent,l=c.content.result,f=Array.isArray(l)?null:l,O(GD(GD({},g),{},{loading:!1,order:f})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),O(GD(GD({},g),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=$D(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(GD(GD({},P),{},{loading:!0})),e.next=4,fetch("".concat(y.root,"/orders/").concat(null==t?void 0:t.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({status:t.newStatus})});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,C({loading:!1,error:r.error?r.result:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),C(GD(GD({},P),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=$D(a.a.mark((function e(){var n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null==x||null===(n=x.messages[(null==x||null===(r=x.messages)||void 0===r?void 0:r.length)-1])||void 0===n?void 0:n.id,e.prev=1,e.next=4,fetch("".concat(y.root,"/orders/").concat(t,"/messages/").concat(o,"/read"),{method:"GET",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"}});case 4:return i=e.sent,e.next=7,i.json();case 7:u=e.sent,s=u.result,k(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=$D(a.a.mark((function e(){var t,n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dr.Info,v("LOADING","Loading")),C(GD(GD({},P),{},{loading:!0})),i={method:"POST",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({order_id:null===(t=g.order)||void 0===t?void 0:t.id,business_id:null===(n=g.order)||void 0===n?void 0:n.business_id,gateway:null===(r=g.order)||void 0===r||null===(o=r.paymethod)||void 0===o?void 0:o.gateway})},e.next=6,fetch("".concat(y.root,"/payments/stripe/refund"),i);case 6:return u=e.sent,e.next=9,u.json();case 9:s=e.sent,C({loading:!1,error:s.error?s.result:null}),s.error||(O(GD(GD({},g),{},{order:GD(GD({},g.order),{},{refund_data:s.result})})),m(Dr.Success,v("ORDER_REFUNDED","Order refunded"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),C(GD(GD({},P),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){e.order?O(GD(GD({},g),{},{order:e.order})):F()}),[t]),Object(i.useEffect)((function(){if(!g.loading&&!d){var e=function(e){var t;(null==e?void 0:e.id)===(null==g||null===(t=g.order)||void 0===t?void 0:t.id)&&(delete e.total,delete e.subtotal,O(GD(GD({},g),{},{order:Object.assign(g.order,e)})))};return r||D.join("orders_".concat(f.id)),D.on("update_order",e),function(){r||D.leave("orders_".concat(f.id)),D.off("update_order",e)}}}),[g.order,D,d]),Object(i.useEffect)((function(){var e=function(e){O(GD(GD({},g),{},{order:GD(GD({},g.order),{},{user_review:e})}))};return h.on("customer_reviewed",e),function(){h.off("customer_reviewed",e)}}),[g]),Object(i.useEffect)((function(){L()}),[t]),u.a.createElement(u.a.Fragment,null,c&&u.a.createElement(c,ND({},e,{order:g,messageErrors:j,actionStatus:P,formatPrice:function(e){return e&&"$ ".concat(e.toFixed(2))},handlerSubmit:function(e){var t=e.spot;B(t)},handleUpdateOrderStatus:R,messages:x,setMessages:A,messagesReadList:_,readMessages:M,handleRefundOrder:N})))};function WD(){return WD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WD.apply(this,arguments)}function KD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KD(Object(n),!0).forEach((function(t){ZD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QD(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function eU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}HD.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),orderId:c.a.oneOfType([c.a.number,c.a.string]),order:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},HD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nU=function(e){var t=e.UIComponent,n=e.order,r=e.onSaveReview,o=eU(rn(),1)[0],s=eU(yn(),1)[0],c=eU(Object(i.useState)({quality:0,punctiality:0,service:0,packaging:0,comments:""}),2),l=c[0],f=c[1],p=eU(Object(i.useState)({loading:!1,result:{error:!1}}),2),d=p[0],y=p[1],h=function(){var e,t=(e=a.a.mark((function e(){var t,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(XD(XD({},d),{},{loading:!0})),e.prev=1,i={order_id:null==n?void 0:n.id,quality:l.quality,delivery:l.punctiality,service:l.service,package:l.packaging,comment:l.comments,user_id:null==s||null===(t=s.user)||void 0===t?void 0:t.id,business_id:n.business_id},e.next=5,fetch("".concat(o.root,"/business/").concat(n.business_id,"/reviews"),{method:"POST",headers:{Authorization:"Bearer ".concat(s.token),"Content-Type":"application/json"},body:JSON.stringify(i)});case 5:u=e.sent,r&&r(u.content),y({loading:!1,result:u.content}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),y({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){QD(a,r,o,i,u,"next",e)}function u(e){QD(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,WD({},e,{stars:l,order:n,formState:d,handleSendReview:h,handleChangeInput:function(e){f(XD(XD({},l),{},{comments:e.target.value}))},handleChangeRating:function(e){f(XD(XD({},l),{},ZD({},e.target.name,parseInt(e.target.value))))}})))};function rU(){return rU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rU.apply(this,arguments)}function oU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oU(Object(n),!0).forEach((function(t){iU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function sU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nU.propTypes={UIComponent:c.a.elementType,order:c.a.object,onSaveReview:c.a.func,handleSendReview:c.a.func},nU.defaultProps={order:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var lU=function(e){var t=e.UIComponent,n=e.pageSlug,r=e.onNotFound,o=sU(Object(i.useState)({body:null,loading:!1,error:null}),2),s=o[0],c=o[1],l=sU(rn(),1)[0],f={},p=function(){var e,t=(e=a.a.mark((function e(t){var o,i,u,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(aU(aU({},s),{},{loading:!0})),e.prev=1,o={},f.page=o,e.next=6,l.pages(t).get({cancelToken:o});case 6:i=e.sent,u=i.content,p=u.error,d=u.result,c(aU(aU({},s),{},{loading:!1})),p?(c(aU(aU({},s),{},{error:d})),r&&r(n)):c(aU(aU({},s),{},{body:d.body})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&c(aU(aU({},s),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){uU(a,r,o,i,u,"next",e)}function u(e){uU(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){return p(n),function(){f.page&&f.page.cancel()}}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,rU({},e,{cmsState:s})))};function fU(){return fU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fU.apply(this,arguments)}function pU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pU(Object(n),!0).forEach((function(t){yU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function vU(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hU(a,r,o,i,u,"next",e)}function u(e){hU(a,r,o,i,u,"throw",e)}i(void 0)}))}}function mU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}lU.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gU=function(e){var t=e.UIComponent,n=mU(Bn(),2)[1],r=mU(rn(),1)[0],o=mU(yn(),1)[0].token,s=mU(Object(i.useState)(""),2),c=s[0],l=s[1],f=mU(Object(i.useState)({customer:!1,signup:!1}),2),p=f[0],d=f[1],y=mU(Object(i.useState)({loading:!1,result:{error:!1}}),2),h=y[0],v=y[1],m=mU(Object(i.useState)({users:[],loading:!0,error:null}),2),b=m[0],g=m[1],O=function(){var e=vU(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.filter((function(e){return(null==e?void 0:e.cellphone)===n})))[0]?(v({loading:!1,result:r[0]}),d(dU(dU({},p),{},{customer:!0}))):v({loading:!1,result:{error:!1}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=vU(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(dU(dU({},b),{},{loading:!0})),e.prev=1,e.next=4,r.setAccessToken(o).users().get();case 4:t=e.sent,n=t.content.result,g(dU(dU({},b),{},{users:n,loading:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),g(dU(dU({},b),{},{loading:!1,error:e.t0.message}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){!function(e,t){var r;function o(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),r>=e.length&&(r=0),r<0&&(r=e.length-1),e[r].classList.add("autocomplete-active")}function a(t){for(var n=document.getElementsByClassName("autocomplete-items"),r=0;r<n.length;r++)t!==n[r]&&t!==e&&n[r].parentNode.removeChild(n[r])}e.addEventListener("input",(function(o){var i,u,s=this.value;if(a(),!s)return!1;r=-1;var c=document.createElement("DIV");for((c=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),c.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(c),u=0;u<(null==t?void 0:t.length);u++){var f,y,h;if((null===(f=t[u])||void 0===f||null===(y=f.cellphone)||void 0===y||null===(h=y.substr(0,null==s?void 0:s.length))||void 0===h?void 0:h.toUpperCase())===(null==s?void 0:s.toUpperCase())){var v,m,w=null===(v=t[u])||void 0===v?void 0:v.cellphone;(i=document.createElement("DIV")).innerHTML="<strong>"+(null==w?void 0:w.substr(0,null==s?void 0:s.length))+"</strong>",i.innerHTML+=null==w?void 0:w.substr(null==s?void 0:s.length),i.innerHTML+=" ("+(null===(m=t[u])||void 0===m?void 0:m.name)+")",i.innerHTML+="<input type='hidden' value='"+w+"'>",i.addEventListener("click",(function(n){e.value=this.getElementsByTagName("input")[0].value,l(this.getElementsByTagName("input")[0].value),O(t,this.getElementsByTagName("input")[0].value),a()})),c.appendChild(i)}}(i=document.createElement("DIV")).innerHTML="<strong>"+n("CREATE_CUSTOMER","Create new customer")+"</strong>",i.innerHTML+="<input type='hidden' value='"+n("CREATE_CUSTOMER","Create new customer")+"'>",i.addEventListener("click",(function(e){10===o.target.value.length?d(dU(dU({},p),{},{signup:!0})):g(dU(dU({},b),{},{error:n("ERROR_MIN_CHARACTERS_PHONE","The Phone / Mobile must be 10 characters")})),a()})),c.appendChild(i)})),e.addEventListener("keydown",(function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40===e.keyCode?(r++,o(t)):38===e.keyCode?(r--,o(t)):13===e.keyCode&&(e.preventDefault(),r>-1&&t&&t[r].click())})),document.addEventListener("click",(function(e){a(e.target)}))}(document.getElementById("phone-input"),b.users)}),[b.users]),Object(i.useEffect)((function(){w()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,fU({},e,{phone:c,customerState:h,customersPhones:b,setCustomersPhones:g,onChangeNumber:function(e){var t,n,r;l(null!==(t=e.target)&&void 0!==t&&null!==(n=t.validity)&&void 0!==n&&n.valid?null===(r=e.target)||void 0===r?void 0:r.value:c)},openModal:p,setOpenModal:d,setCustomerState:v})))};function OU(){return OU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OU.apply(this,arguments)}function wU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gU.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var SU=function(e){var t=e.UIComponent,n=e.businessList,r=e.userLocation,o=e.setErrors,a=wU(zn(),1)[0],s=wU(Object(i.useState)([]),2),c=s[0],l=s[1];return Object(i.useEffect)((function(){l(n.map((function(e){return{lat:e.location.lat,lng:e.location.lng,icon:e.logo,slug:e.slug}})))}),[n]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,OU({},e,{businessLocations:c,userLocation:r,onBusinessClick:function(e){a.emit("go_to_page",{page:"business",params:{store:e}})},setErrors:o})))};function EU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EU(Object(n),!0).forEach((function(t){CU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function CU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function xU(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return AU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}SU.propTypes={UIComponent:c.a.elementType,businessList:c.a.array.isRequired,userLocation:c.a.object,setErrors:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},SU.defaultProps={businessList:[],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var TU=Object(i.createContext)(),_U=function(e){var t=e.children,n=xU(Object(i.useState)({business:{}}),2),r=n[0],o=n[1],s=function(){var e,t=(e=a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(PU(PU({},r),{},{business:t}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){IU(a,r,o,i,u,"next",e)}function u(e){IU(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),c=JSON.parse(JSON.stringify(r)),l={setBusiness:s};return u.a.createElement(TU.Provider,{value:[c,l]},t)},kU=function(){return Object(i.useContext)(TU)||[{},function(){}]};function DU(e){return DU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DU(e)}function UU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function LU(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){UU(a,r,o,i,u,"next",e)}function u(e){UU(a,r,o,i,u,"throw",e)}i(void 0)}))}}function BU(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var FU=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,i,u;return t=e,n=[{key:"getItem",value:(u=LU(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.getItem(t);case 2:if(r=e.sent,!n||"object"===DU(r)){e.next=5;break}return e.abrupt("return",JSON.parse(r));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})},{key:"setItem",value:(i=LU(a.a.mark((function e(t,n,r){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r?JSON.stringify(n):n,e.next=3,window.localStorage.setItem(t,o);case 3:case"end":return e.stop()}}),e)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"removeItem",value:(o=LU(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.removeItem(t);case 2:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})}],n&&BU(t.prototype,n),r&&BU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),RU=Object(i.createContext)(),MU=function(e){var t=e.Alert,n=e.settings,r=e.children,o=new FU;return u.a.createElement(RU.Provider,null,u.a.createElement(Nn,null,u.a.createElement(nn,{settings:n},u.a.createElement(Ln,{strategy:o},u.a.createElement(dn,{strategy:o},u.a.createElement(er,null,u.a.createElement(Er,null,u.a.createElement(Lr,null,u.a.createElement($r,null,u.a.createElement(Pn,{settings:Object.assign(n.socket,{project:n.project})},u.a.createElement(hr,{strategy:o,Alert:t},u.a.createElement(_U,null,r))))))))))))};function NU(){return NU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NU.apply(this,arguments)}var zU=function(e){var t=e.UIComponent,n=e.orderTotal;return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,NU({},e,{total:n})))};function GU(){return GU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GU.apply(this,arguments)}function YU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function qU(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){YU(a,r,o,i,u,"next",e)}function u(e){YU(a,r,o,i,u,"throw",e)}i(void 0)}))}}function $U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return JU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JU(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}zU.propTypes={UIComponent:c.a.elementType,useOrderContext:c.a.bool,businessId:c.a.number,orderTotal:c.a.number,handlerSubmit:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},zU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var VU=function(e){var t,n,r,o=e.body,s=e.clientId,c=e.btnStyle,l=e.UIComponent,f=e.handlerChangePaypal,p=$U(vr(),2)[1],d=p.confirmCart,y=p.placeCart,h=$U(Object(i.useState)(!1),2),v=h[0],m=h[1];Object(i.useEffect)((function(){var e;if(s){if(null===(e=window)||void 0===e||!e.paypal){var t=document.createElement("script");return t.type="text/javascript",t.src="https://www.paypal.com/sdk/js?client-id=".concat(s),t.async=!0,t.onload=function(){m(!0)},t.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(t),function(){t.onload=null}}m(!0)}}),[s]);var b=function(){var e=qU(a.a.mark((function e(t,n){var r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={paymethod_id:o.paymethod_id,amount:o.amount,delivery_zone_id:o.delivery_zone_id},e.next=3,y(o.cartUuid,r);case 3:if(i=e.sent,u=i.error,s=i.result,!u){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",s.pay_reference);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=qU(a.a.mark((function e(t,n){var r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(o.cartUuid);case 2:if(r=e.sent,i=r.error,u=r.result,!i){e.next=7;break}return e.abrupt("return",null);case 7:return f&&f(u.order.uuid),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=qU(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(o.cartUuid);case 2:return n=e.sent,r=n.result,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=null===(t=window)||void 0===t||null===(n=t.paypal)||void 0===n||null===(r=n.Buttons)||void 0===r?void 0:r.driver("react",{React:u.a,ReactDOM:LC.a});return l&&u.a.createElement(l,GU({},e,{isSdkReady:v,PaypalButton:w,paypalButtonProps:{createOrder:b,onApprove:g,onError:O,onCancel:O,style:c}}))};function HU(){return HU=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HU.apply(this,arguments)}function WU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WU(Object(n),!0).forEach((function(t){XU(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function XU(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZU(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function QU(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ZU(a,r,o,i,u,"next",e)}function u(e){ZU(a,r,o,i,u,"throw",e)}i(void 0)}))}}function eL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}VU.propTypes={UIComponent:c.a.elementType,body:c.a.object.isRequired,clientId:c.a.string.isRequired,handlerChangePaypal:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},VU.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nL=function(e){var t=e.businessId,n=e.UIComponent,r=eL(yn(),1)[0],o=r.token,s=r.user,c=eL(rn(),1)[0],l=eL(Object(i.useState)({cards:[],loading:!0,error:null}),2),f=l[0],p=l[1],d=eL(Object(i.useState)(e.publicKey),2),y=d[0],h=d[1],v=eL(Object(i.useState)(null),2),m=v[0],b=v[1],g=eL(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j={},S=function(){var e=QU(a.a.mark((function e(){var n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(KU(KU({},f),{},{loading:!0})),e.prev=1,n={},j.paymentCards=n,e.next=6,c.setAccessToken(o).paymentCards(t,s.id).get({cancelToken:n});case 6:r=e.sent,i=r.content.result,(u=null==i?void 0:i.find((function(e){return e.default})))&&b({id:u.id,type:"card",card:{brand:u.brand,last4:u.last4}}),p(KU(KU({},f),{},{loading:!1,cards:i})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),p(KU(KU({},f),{},{loading:!1,error:e.t0}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=QU(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.paymentCards(-1,s.id,t.id).delete();case 3:n=e.sent,n.content.error||(f.cards=f.cards.filter((function(e){return e.id!==t.id})),p(KU({},f))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=QU(a.a.mark((function e(n){var r,i,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(KU(KU({},O),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({business_id:t,user_id:s.id,card_id:n.id})},i="".concat(c.root,"/payments/stripe/cards/default"),e.next=6,fetch(i,r);case 6:return u=e.sent,e.next=9,u.json();case 9:(l=e.sent).error?w({loading:!1,error:l.result}):(b({id:n.id,type:"card",card:{brand:n.brand,last4:n.last4}}),w({loading:!1,error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=QU(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.setAccessToken(o).paymentCards().getCredentials();case 3:t=e.sent,n=t.content.result,h(n.publishable),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),I=function(e){b({id:e.id,type:"card",card:{brand:e.brand,last4:e.last4}})};return Object(i.useEffect)((function(){return o&&(S(),e.publicKey||C()),function(){j.paymentCards&&j.paymentCards.cancel()}}),[o]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,HU({},e,{cardSelected:m,cardsList:f,handleCardClick:I,publicKey:y,handleNewCard:function(e){f.cards.push(e),p(KU({},f)),I(e)},deleteCard:E,setDefaultCard:P,defaultCardSetActionStatus:O})))};function rL(){return rL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rL.apply(this,arguments)}function oL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function aL(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){oL(a,r,o,i,u,"next",e)}function u(e){oL(a,r,o,i,u,"throw",e)}i(void 0)}))}}function iL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nL.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,userId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var sL=function(e){var t=e.UIComponent,n=iL(rn(),1)[0],r=iL(yn(),1)[0].token,o=iL(Object(i.useState)(null),2),s=o[0],c=o[1],l=iL(Object(i.useState)(null),2),f=l[0],p=l[1],d=function(){var e=aL(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.root,"/payments/stripe/credentials"),{headers:{Authorization:"Bearer ".concat(r)}});case 2:return t=e.sent,e.next=5,t.json();case 5:o=e.sent,i=o.result.publishable,c(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=aL(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.root,"/payments/stripe/requirements?type=add_card"),{headers:{Authorization:"Bearer ".concat(r)}});case 2:return t=e.sent,e.next=5,t.json();case 5:o=e.sent,i=o.result,p(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r&&(d(),y())}),[r]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,rL({},e,{stripeKey:s,clientSecret:f})))};function cL(){return cL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cL.apply(this,arguments)}function lL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function fL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}sL.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dL=function(e){var t,n=e.paymentMethods,r=e.UIComponent,o=fL(yn(),1)[0].token,s=fL(rn(),1)[0],c=fL(Object(i.useState)(null),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s.root,"/payments/stripe/credentials"),{headers:{Authorization:"Bearer ".concat(o)}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,r=n.result.publishable,f(r);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){lL(a,r,o,i,u,"next",e)}function u(e){lL(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[]),u.a.createElement(u.a.Fragment,null,r&&l&&u.a.createElement(r,cL({},e,{stripePK:l,modalName:(t="",n.map((function(e,r){r===n.length-1?t+="".concat(e.name):t+="".concat(e.name,", ")})),t)})))};function yL(){return yL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yL.apply(this,arguments)}function hL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function vL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vL(Object(n),!0).forEach((function(t){bL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gL(e){return function(e){if(Array.isArray(e))return jL(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wL(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||wL(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wL(e,t){if(e){if("string"==typeof e)return jL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jL(e,t):void 0}}function jL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}dL.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,currency:c.a.string.isRequired,paymentMethods:c.a.arrayOf(c.a.object).isRequired,handlerStripeSource:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},dL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var SL=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=e.isSearchByName,l=e.isSearchByLastName,f=e.availableDriverIds,p=OL(rn(),1)[0],d=OL(Object(i.useState)({loading:!0,error:null,drivers:[],pagination:null}),2),y=d[0],h=d[1],v=OL(Object(i.useState)(null),2),m=v[0],b=v[1],g=OL(Object(i.useState)(!1),2),O=g[0],w=g[1],j=OL(Object(i.useState)(null),2),S=j[0],E=j[1],P=new RegExp(/^[A-Za-z0-9\s]+$/g),C=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s,d,v,m,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(mL(mL({},y),{},{loading:!0})),t=null,n=[{attribute:"level",value:"4"}],(null==f?void 0:f.length)>0&&n.push({attribute:"id",value:f}),S&&(r=[],i=P.test(S),c&&r.push({attribute:"name",value:{condition:"ilike",value:i?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),l&&r.push({attribute:"lastname",value:{condition:"ilike",value:i?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),n.push({conector:"OR",conditions:r})),n.length&&(t={conditions:n,conector:"AND"}),u=t?p.users().asDashboard().select(o).where(t):p.users().asDashboard().select(o),e.next=10,u.get();case 10:s=e.sent,d=s.content,v=d.error,m=d.result,b=d.pagination,h(mL(mL({},y),{},v?{loading:!1,error:m}:{loading:!1,drivers:m,pagination:b})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),h(mL(mL({},y),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){hL(a,r,o,i,u,"next",e)}function u(e){hL(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return C(),e.abort()}),[S]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==y||null===(e=y.drivers)||void 0===e?void 0:e.length)){var o=null==y||null===(t=y.drivers)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(gL(e),[t.id])}),[]),a=(null==n||null===(r=n.drivers_ids)||void 0===r?void 0:r.length)>0?null==n?void 0:n.drivers_ids.filter((function(e){return o.includes(e)})):o;b(gL(a)),null!=n&&n.drivers_ids&&(null==a?void 0:a.length)!==(null==y?void 0:y.drivers.length)||w(!0)}}),[null==y?void 0:y.drivers]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,yL({},e,{driverList:y,driverIds:m,searchValue:S,onSearch:E,handleChangeDriverId:function(e){if(null==m?void 0:m.find((function(t){return t===e}))){var t=null==m?void 0:m.filter((function(t){return t!==e}));b(t),w(!1)}else{var n=m?gL(m):[];n.push(e),n.length===(null==y?void 0:y.drivers.length)&&w(!0),b(n)}},handleClickFilterButton:function(){var e=m?gL(m):null;r(mL(mL({},n),{},{drivers_ids:e})),s&&s()},isAllCheck:O,handleChangeAllCheck:function(){if(O)b(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=wL(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(y.drivers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}b(t)}w(!O)}})))};function EL(){return EL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EL.apply(this,arguments)}function PL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PL(Object(n),!0).forEach((function(t){IL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function IL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function AL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return TL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}SL.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},SL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname","birthdate","drivergroups"]};var _L=function(e){var t=e.UIComponent,n=e.order,r=AL(rn(),1)[0],o=AL(yn(),1)[0],s=AL(Bn(),2)[1],c=AL(Br(),2)[1].showToast,l=AL(zn(),1)[0],f=AL(Object(i.useState)({qualification:0,comment:"",order_id:null==n?void 0:n.id,user_id:null==n?void 0:n.customer_id}),2),p=f[0],d=f[1],y=AL(Object(i.useState)({loading:!1,error:null}),2),h=y[0],v=y[1],m=function(){var t,i=(t=a.a.mark((function t(){var i,u,f;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v({loading:!0,error:null}),t.prev=1,t.next=4,fetch("".concat(r.root,"/users/").concat(null==n?void 0:n.customer_id,"/user_reviews"),{method:"POST",headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"},body:JSON.stringify(p)});case 4:return i=t.sent,t.next=7,i.json();case 7:u=t.sent,f=u.result,u.error?v({loading:!1,error:f}):(v(CL(CL({},p),{},{loading:!1})),c(Dr.Success,s("CUSTOMER_REVIEW_SUCCESS_CONTENT","Thank you, Customer review successfully submitted!")),l.emit("customer_reviewed",f),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),v({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[1,13]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){xL(a,r,o,i,u,"next",e)}function u(e){xL(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return i.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,EL({},e,{reviewState:p,setReviewState:d,actionState:h,handleChangeQualification:function(e){e&&d(CL(CL({},p),{},{qualification:e}))},handleSendCustomerReview:m})))};function kL(){return kL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kL.apply(this,arguments)}function DL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function UL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}_L.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_L.defaultProps={order:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var BL=function(e){var t=e.UIComponent,n=e.toSave,r=UL(rn(),1)[0],o=UL(yn(),1)[0].token,s=UL(Object(i.useState)(),2),c=s[0],l=s[1],f=function(){var e,t=(e=a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r.root,"/payments/stripe/requirements?type=add_card"),{headers:{Authorization:"Bearer ".concat(o)}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,i=n.result,l(i);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){DL(a,r,o,i,u,"next",e)}function u(e){DL(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&n&&f()}),[o]),u.a.createElement(t,kL({},e,{requirements:c}))};function FL(){return FL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FL.apply(this,arguments)}function RL(e){return function(e){if(Array.isArray(e))return JL(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ML(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function NL(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ML(a,r,o,i,u,"next",e)}function u(e){ML(a,r,o,i,u,"throw",e)}i(void 0)}))}}function zL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zL(Object(n),!0).forEach((function(t){YL(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||$L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $L(e,t){if(e){if("string"==typeof e)return JL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?JL(e,t):void 0}}function JL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}BL.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,toSave:c.a.bool,publicKey:c.a.string,clientSecret:c.a.string,handleSource:c.a.func};var VL=function(e){var t=e.UIComponent,n=e.business,r=e.category,o=e.product,s=e.handleUpdateBusinessState,c=e.businessState,l=e.setDataSelected,f=qL(yn(),1)[0].loading,p=qL(rn(),1)[0],d=qL(Bn(),2)[1],y=qL(Br(),2)[1].showToast,h=qL(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),v=h[0],m=h[1],b=qL(Object(i.useState)(!1),2),g=b[0],O=b[1],w=qL(Object(i.useState)(!1),2),j=w[0],S=w[1],E=function(){var e=NL(a.a.mark((function e(t){var r,i,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dr.Info,d("LOADING","Loading")),m(GL(GL({},v),{},{loading:!0})),e.next=7,p.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(null==o?void 0:o.category_id)).products(null==o?void 0:o.id).save(t);case 7:r=e.sent,i=r.content,u=i.error,c=i.result,u?m(GL(GL({},v),{},{loading:!1,result:{error:!0,result:c}})):(m(GL(GL({},v),{},{loading:!1,result:{error:!1,result:c}})),s&&((l=RL(null==n?void 0:n.categories)).forEach((function e(n){if(n.id===(null==o?void 0:o.category_id)){var r=n.products.map((function(e){return e.id===o.id?GL(GL({},e),t):e}));n.products=RL(r)}Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),s(GL(GL({},n),{},{categories:l}))),y(Dr.Success,d("PRODUCT_UPDATED","Product updated")),O(!1)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),m(GL(GL({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=NL(a.a.mark((function e(){var t,r,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dr.Info,d("LOADING","Loading")),m(GL(GL({},v),{},{loading:!0})),e.next=7,p.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(null==o?void 0:o.category_id)).products(null==o?void 0:o.id).delete();case 7:t=e.sent,r=t.content,i=r.error,u=r.result,i?m(GL(GL({},v),{},{loading:!1,result:{error:!0,result:u}})):(m(GL(GL({},v),{},{loading:!1,result:{error:!1,result:u}})),s&&((c=RL(null==n?void 0:n.categories)).forEach((function e(t){if(t.id===(null==o?void 0:o.category_id)){var n=t.products.filter((function(e){return e.id!==o.id}));t.products=RL(n)}Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),s(GL(GL({},n),{},{categories:c}))),y(Dr.Success,d("PRODUCT_DELETED","Product deleted"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),m(GL(GL({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=NL(a.a.mark((function e(t,r){var i,u,c,l,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dr.Info,d("LOADING","Loading")),e.next=6,p.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(null==o?void 0:o.category_id)).products(t).save(r);case 6:i=e.sent,u=i.content,c=u.error,l=u.result,c?m(GL(GL({},v),{},{loading:!1,result:{error:!0,result:l}})):(s&&((h=RL(null==n?void 0:n.categories)).forEach((function e(n){if(n.id===(null==o?void 0:o.category_id)){var r=n.products.map((function(e){return e.id===t?GL(GL({},e),{},{rank:null==l?void 0:l.rank}):e}));n.products=RL(r)}Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),s(GL(GL({},n),{},{categories:h}))),y(Dr.Success,d("PRODUCT_UPDATED","Product updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),m(GL(GL({},v),{},{loading:!1,result:{error:!0,result:[e.t0.message]}}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&m(GL(GL({},v),{},{changes:GL({},o)}))}),[o,c]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,FL({},e,{handleChangeProductActive:function(e){E({enabled:e})},handleUpdateClick:function(){var e,t,n,r,o,a,i={images:null==v||null===(e=v.changes)||void 0===e?void 0:e.images,name:null==v||null===(t=v.changes)||void 0===t?void 0:t.name,description:null==v||null===(n=v.changes)||void 0===n?void 0:n.description,price:null==v||null===(r=v.changes)||void 0===r?void 0:r.price,fee_fixed:null==v||null===(o=v.changes)||void 0===o?void 0:o.fee_fixed,fee_percentage:null==v||null===(a=v.changes)||void 0===a?void 0:a.fee_percentage};for(var u in i)null===i[u]&&delete i[u];E(i)},deleteProduct:P,productFormState:v,handleChangeInput:function(e){m(GL(GL({},v),{},{changes:GL(GL({},v.changes),{},YL({},e.target.name,e.target.value))})),O(!0)},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){m(GL(GL({},v),{},{changes:GL(GL({},v.changes),{},{images:t.result})}))},t.onerror=function(e){return console.log(e)},O(!0)},isEditMode:g,handleDragStart:function(e,t){e.dataTransfer.setData("transferProductId",t);var n=document.createElement("div");n.classList.add("ghostDragging"),n.innerHTML=null==o?void 0:o.name,document.body.appendChild(n),e.dataTransfer.setDragImage(n,0,0),S(!1)},handleDragOver:function(e,t){e.preventDefault();var n=e.target.closest(".draggable-product");if(n)if(t){var r=window.scrollY+e.target.getBoundingClientRect().top+e.target.offsetHeight/2;e.clientY>r?(S(!0),l("")):(S(!1),l(n.dataset.index))}else l(n.dataset.index)},handleDrop:function(e){e.preventDefault();var t,n=parseInt(e.dataTransfer.getData("transferProductId"));if(j){var a=r.products.sort((function(e,t){return e.rank-t.rank})),i=a.length,u=a.findIndex((function(e){return e.id===o.id}));t=u===i-1?a[u].rank+1:a[u+1].rank}else t=null==o?void 0:o.rank;S(!1),C(n,{rank:t})},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);l("")},isProductsBottom:j})))};function HL(){return HL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HL.apply(this,arguments)}function WL(e){return function(e){if(Array.isArray(e))return rB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nB(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KL(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function XL(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){KL(a,r,o,i,u,"next",e)}function u(e){KL(a,r,o,i,u,"throw",e)}i(void 0)}))}}function ZL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QL(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZL(Object(n),!0).forEach((function(t){eB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZL(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||nB(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nB(e,t){if(e){if("string"==typeof e)return rB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rB(e,t):void 0}}function rB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}VL.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,product:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},VL.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var oB=function(e){var t=e.UIComponent,n=e.handleUpdateBusinessState,r=e.business,o=e.category,s=e.categorySelected,c=e.setCategorySelected,l=e.setDataSelected,f=tB(yn(),1)[0].loading,p=tB(rn(),1)[0],d=tB(Bn(),2)[1],y=tB(Br(),2)[1].showToast,h=tB(Object(i.useState)({changes:{},loading:!1,result:{error:!1}}),2),v=h[0],m=h[1],b=tB(Object(i.useState)(!1),2),g=b[0],O=b[1],w=tB(Object(i.useState)(!1),2),j=w[0],S=w[1],E=function(){var e=XL(a.a.mark((function e(t,o){var i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dr.Info,d("LOADING","Loading")),e.next=6,p.businesses(parseInt(null==r?void 0:r.id)).categories(t).save(o);case 6:i=e.sent,(u=i.content).error||((s=WL(null==r?void 0:r.categories)).forEach((function e(n){n.id===t&&(n.rank=u.result.rank),Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),n(QL(QL({},r),{},{categories:s})),y(Dr.Success,d("CATEOGORY_UPDATED","Category updated"))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),m(QL(QL({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=XL(a.a.mark((function e(t){var i,u,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dr.Info,d("LOADING","Loading")),m(QL(QL({},v),{},{loading:!0})),e.next=7,p.businesses(parseInt(null==r?void 0:r.id)).categories(parseInt(o.id)).save(t);case 7:i=e.sent,u=i.content,s=u.error,c=u.result,s?m(QL(QL({},v),{},{loading:!1,result:{error:!0,result:c}})):(m(QL(QL({},v),{},{loading:!1,result:{error:!1,result:c}})),O(!1),n&&((l=WL(r.categories)).forEach((function e(t){t.id===c.id&&(t.name=null==c?void 0:c.name,t.enabled=null==c?void 0:c.enabled,t.image=null==c?void 0:c.image),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),n(QL(QL({},r),{},{categories:l}))),y(Dr.Success,d("CATEOGORY_UPDATED","Category updated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),m(QL(QL({},v),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var t=XL(a.a.mark((function t(){var i,u,l,h,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,y(Dr.Info,d("LOADING","Loading")),m(QL(QL({},v),{},{loading:!0})),t.next=7,p.businesses(parseInt(null==r?void 0:r.id)).categories(parseInt(o.id)).delete();case 7:i=t.sent,u=i.content,l=u.error,h=u.result,l?m(QL(QL({},v),{},{loading:!1,result:{error:!0,result:h}})):(m(QL(QL({},v),{},{loading:!1,result:{error:!1,result:h}})),n&&((b=WL(r.categories)).forEach((function e(t,n,r){t.id===o.id&&r.splice(n,1),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),n(QL(QL({},r),{},{categories:b})),o.id===s.id&&c(b[0])),y(Dr.Success,d("CATEOGORY_DELETED","Category deleted")),e.onClose&&e.onClose(o.id)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),m(QL(QL({},v),{},{loading:!1,result:{error:!0,result:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m(QL(QL({},v),{},o?{changes:QL({},o)}:{changes:{}}))}),[o]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,HL({},e,{handelChangeCategoryActive:function(e){P({enabled:e})},categoryFormState:v,isCategoriesBottom:j,handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){m(QL(QL({},v),{},{changes:QL(QL({},v.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)},O(!0)},handleUpdateClick:function(){var e,t,n={name:null==v||null===(e=v.changes)||void 0===e?void 0:e.name,image:null==v||null===(t=v.changes)||void 0===t?void 0:t.image};for(var r in n)null===n[r]&&delete n[r];P(n)},deleteCategory:C,handleInputChange:function(e){m(QL(QL({},v),{},{changes:QL(QL({},v.changes),{},eB({},e.target.name,e.target.value))})),O(!0)},isEditMode:g,handleDragStart:function(e){e.dataTransfer.setData("transferCategoryId",null==o?void 0:o.id);var t=document.createElement("div");t.classList.add("ghostDragging"),t.innerHTML=o.name,document.body.appendChild(t),e.dataTransfer.setDragImage(t,0,0),S(!1)},handleDragOver:function(e,t){e.preventDefault();var n=e.target.closest(".draggable-category");if(n)if(t){var r=window.scrollY+e.target.getBoundingClientRect().top+e.target.offsetHeight/2;e.clientY>r?(S(!0),l("")):(S(!1),l(n.dataset.index))}else l(n.dataset.index)},handleDrop:function(e){e.preventDefault();var t,n=parseInt(e.dataTransfer.getData("transferCategoryId"));t=j?(null==o?void 0:o.rank)+1:null==o?void 0:o.rank,S(!1),E(n,{rank:t})},handleDragEnd:function(){l("");for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0])}})))};function aB(){return aB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aB.apply(this,arguments)}function iB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function uB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uB(Object(n),!0).forEach((function(t){cB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lB(e){return function(e){if(Array.isArray(e))return dB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pB(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||pB(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pB(e,t){if(e){if("string"==typeof e)return dB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dB(e,t):void 0}}function dB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}oB.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,category:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},oB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var yB=function(e){var t=e.UIComponent,n=e.category,r=e.handleUpdateCategoryList,o=e.categoryList,s=e.staticConfigs,c=e.handleChangeStaic,l=fB(Object(i.useState)(null),2),f=l[0],p=l[1],d=fB(yn(),1)[0].loading,y=fB(rn(),1)[0],h=fB(Br(),2)[1].showToast,v=fB(Bn(),2)[1],m=fB(tr(),2)[1].refreshConfigs,b=fB(Object(i.useState)({changes:null,loading:!1,result:{error:null},API:!1,finalResult:[]}),2),g=b[0],O=b[1],w=function(e,t){var n,r=f.find((function(e){return e.id===t}));switch(null==r?void 0:r.key){case"platform_fee_fixed":case"platform_fee_percentage":if(isNaN(Number(e)&&""!==e))return}var o=[],a=null==g||null===(n=g.changes)||void 0===n?void 0:n.find((function(e){return e.id===t}));a?o=null==g?void 0:g.changes.map((function(n){return n.id===t?sB(sB({},n),{},{value:e}):n})):(null!=g&&g.changes&&(o=lB(null==g?void 0:g.changes)),o.push(sB(sB({},r),{},{value:e})));var i=f.map((function(n){return n.id===t?sB(sB({},n),{},{value:e}):n}));O(sB(sB({},g),{},{changes:o})),p(i)},j=function(e){return"["+e+"]"},S=function(){var e,t=(e=a.a.mark((function e(t,i){var u,s,l,f,p,b,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(Dr.Info,v("LOADING","Loading")),O(sB(sB({},g),{},{loading:!0,API:!1})),e.next=7,y.configs(t).save(i);case 7:u=e.sent,s=u.content,l=s.error,f=s.result,l?O(sB(sB({},g),{},{loading:!1,result:{error:!0,result:f},API:!1})):(p=null!=g&&g.changes?null==g?void 0:g.changes.filter((function(e){return e.id!==f.id})):[],b=null==g?void 0:g.finalResult.map((function(e){return e.id===f.id?sB(sB({},e),{},{value:null==f?void 0:f.value}):e})),p.length>0?O({loading:!1,changes:p,result:{error:!1,result:f},API:!0,finalResult:b}):(O({loading:!1,changes:null,result:{error:!1,result:"ok"},API:!1,finalResult:b}),h(Dr.Success,v("SETTINGS_UPDATE","Settings updated")),r&&(w=null==o?void 0:o.categories.map((function(e){return e.id===n.id?sB(sB({},e),{},{configs:b}):e})),r(w)),c&&c(lB(b)),m&&m())),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),O(sB(sB({},g),{},{loading:!1,result:{error:!0,result:e.t0},API:!1}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){iB(a,r,o,i,u,"next",e)}function u(e){iB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if((null==n?void 0:n.configs.length)>0){var e=lB(null==n?void 0:n.configs);p(e),O(sB(sB({},g),{},{finalResult:e}))}}),[null==n?void 0:n.configs]),Object(i.useEffect)((function(){s&&(p(lB(s)),O(sB(sB({},g),{},{finalResult:lB(s)})))}),[s]),Object(i.useEffect)((function(){var e;if(null!=g&&g.API&&(null==g||null===(e=g.changes)||void 0===e?void 0:e.length)>0){var t={key:null==g?void 0:g.changes[0].key,value:null==g?void 0:g.changes[0].value};S(null==g?void 0:g.changes[0].id,t)}}),[null==g?void 0:g.API]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,aB({},e,{settingsState:g,configs:f,handleInputChange:w,handleCheckBoxChange:function(e,t,n){var r,o=parseInt(e.target.getAttribute("data-id"));if(t){var a=""===n?[]:n.split("|"),i=a.indexOf(e.target.name);-1===i&&e.target.checked&&a.push(e.target.name),!e.target.checked&&i>=0&&a.splice(i,1),r=a.join("|")}else{var u=lB(JSON.parse(n)),s=u.indexOf(parseInt(e.target.name));-1===s&&e.target.checked&&u.push(parseInt(e.target.name)),!e.target.checked&&s>=0&&u.splice(s,1),r=JSON.stringify(u)}w(r,o)},handleClickUpdate:function(){var e;if(null!=g&&g.changes&&0!==(null==g||null===(e=g.changes)||void 0===e?void 0:e.length)){var t=null==g?void 0:g.changes.map((function(e){return"driver_tip_options"===e.key?sB(sB({},e),{},{value:j(null==e?void 0:e.value)}):e}));O(sB(sB({},g),{},{changes:lB(t),API:!0}))}},formState:g,handleChangeFormState:O,saveConfig:S})))};yB.propTypes={UIComponent:c.a.elementType,category:c.a.object,staticConfigs:c.a.arrayOf(s.object),categoryList:c.a.object,handleUpdateCategoryList:c.a.func,handleChangeStaic:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},yB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var hB=n(12);function vB(){return vB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vB.apply(this,arguments)}function mB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function bB(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){mB(a,r,o,i,u,"next",e)}function u(e){mB(a,r,o,i,u,"throw",e)}i(void 0)}))}}function gB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return OB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OB(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wB=function(e){var t=e.UIComponent,n=e.requirements,r=e.toSave,o=e.handleSource,s=e.onNewCard,c=gB(yn(),1)[0].user,l=gB(rn(),1)[0],f=Object(hB.useStripe)(),p=Object(hB.useElements)(),d=gB(Object(i.useState)(null),2),y=d[0],h=d[1],v=gB(Object(i.useState)(!1),2),m=v[0],b=v[1],g=function(){var e=bB(a.a.mark((function e(t,n,r){var o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(l.root,"/payments/stripe/cards"),{method:"POST",headers:{Authorization:"Bearer ".concat(null==n||null===(o=n.session)||void 0===o?void 0:o.access_token),"Content-Type":"application/json"},body:JSON.stringify({business_id:r,gateway:"stripe",token_id:t,user_id:null==n?void 0:n.id})});case 2:return i=e.sent,e.next=5,i.json();case 5:u=e.sent,s&&s(u.result);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),O=function(){var t=bB(a.a.mark((function t(i){var u,s,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b(!0),i.preventDefault(),u=null==p?void 0:p.getElement(hB.CardElement),n){t.next=10;break}return t.next=6,f.createPaymentMethod({type:"card",card:u,billing_details:{name:"".concat(c.name," ").concat(c.lastname),email:c.email,address:c.address}});case 6:(s=t.sent).error?(b(!1),h(s.error.message)):(b(!1),h(null),o&&o({id:null==s?void 0:s.paymentMethod.id,type:"card",card:{brand:null==s?void 0:s.paymentMethod.card.brand,last4:null==s?void 0:s.paymentMethod.card.last4}})),t.next=14;break;case 10:return t.next=12,f.confirmCardSetup(n,{payment_method:{card:u,billing_details:{name:"".concat(c.name," ").concat(c.lastname),email:c.email,address:c.address}}});case 12:(l=t.sent).error?(b(!1),h(l.error.message)):(b(!1),h(null),r&&g(l.setupIntent.payment_method,c,e.businessId));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return u.a.createElement(t,vB({},e,{handleSubmit:O,error:y,loading:m,handleChange:function(e){e.error?h(e.error.message):h(null)}}))};function jB(){return jB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jB.apply(this,arguments)}function SB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}wB.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,clientSecret:c.a.string,autosave:c.a.bool,handlerToken:c.a.func},wB.defaultProps={autosave:!0};var EB=function(e){var t=e.UIComponent,n=e.handleStripeRedirect,r=function(){var e,t=(e=a.a.mark((function e(t){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.type,o=t.name,i=t.email,n&&n({type:r,owner:{name:o,email:i}});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){SB(a,r,o,i,u,"next",e)}function u(e){SB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,jB({},e,{handleSubmitPaymentMethod:r})))};function PB(){return PB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PB.apply(this,arguments)}EB.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},EB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var CB=function(e){var t=e.handleClick,n=e.btnText,r=e.btnValue,o=e.UIComponent;return u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,PB({},e,{handleButtonClick:t,btnText:n,btnValue:r})))};function IB(){return IB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IB.apply(this,arguments)}function xB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xB(Object(n),!0).forEach((function(t){TB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function TB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _B(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function kB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return DB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DB(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}CB.propTypes={UIComponent:c.a.elementType,btnText:c.a.string.isRequired,btnValue:c.a.number,handleClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},CB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var UB=function(e){var t=e.UIComponent,n=e.code,r=e.random,o=e.handleSuccessResetPassword,s=kB(Object(i.useState)({loading:!1,result:{error:!1}}),2),c=s[0],l=s[1],f=kB(Object(i.useState)({code:n,random:r,password:""}),2),p=f[0],d=f[1],y=kB(rn(),1)[0],h=function(){var e,t=(e=a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(AB(AB({},c),{},{loading:!0})),e.next=4,y.users().resetPassword(p);case 4:t=e.sent,n=t.response,r=n.data,l({result:r,loading:!1}),r.error||o&&o(r.result),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&l({result:{error:!0,result:e.t0.message},loading:!1});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_B(a,r,o,i,u,"next",e)}function u(e){_B(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,IB({},e,{handleResetPassword:h,handleChangeInput:function(e){d(AB(AB({},p),{},TB({},e.target.name,e.target.value)))},resetPasswordData:p,formState:c})))};function LB(){return LB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LB.apply(this,arguments)}function BB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function FB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FB(Object(n),!0).forEach((function(t){MB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function MB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NB(e){return function(e){if(Array.isArray(e))return YB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||GB(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||GB(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GB(e,t){if(e){if("string"==typeof e)return YB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YB(e,t):void 0}}function YB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}UB.propTypes={UIComponent:c.a.elementType,code:c.a.string,random:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},UB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qB=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=zB(rn(),1)[0],l=zB(Object(i.useState)({loading:!0,error:null,brands:[],pagination:null}),2),f=l[0],p=l[1],d=zB(Object(i.useState)(null),2),y=d[0],h=d[1],v=zB(Object(i.useState)(!1),2),m=v[0],b=v[1],g=zB(yn(),1)[0],O=g.token,w=g.loading,j=g.user,S=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s,l,d,y,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,p(RB(RB({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O)}},n=[],0===(null==j?void 0:j.level)){e.next=11;break}return e.next=9,c.setAccessToken(O).businesses().select(["franchise_id"]).asDashboard().get();case 9:(r=e.sent).content.error||(n=null===(i=r.content.result)||void 0===i?void 0:i.reduce((function(e,t){return[].concat(NB(e),[t.franchise_id])}),[]).filter((function(e){return e})));case 11:return u="".concat(c.root,"/franchises?params=").concat(o),e.next=14,fetch(u,t);case 14:return s=e.sent,e.next=17,s.json();case 17:l=e.sent,d=l.error,y=l.result,h=l.pagination,d?p(RB(RB({},f),{},{loading:!1,error:y})):(v=0===(null==j?void 0:j.level)?null==y?void 0:y.filter((function(e){return e.enabled})):null==y?void 0:y.filter((function(e){return e.enabled&&n.includes(e.id)})),p(RB(RB({},f),{},{loading:!1,brands:v,pagination:h}))),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),p(RB(RB({},f),{},{loading:!1,error:e.t0}));case 27:case"end":return e.stop()}}),e,null,[[2,24]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){BB(a,r,o,i,u,"next",e)}function u(e){BB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return S(),e.abort()}),[]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==f||null===(e=f.brands)||void 0===e?void 0:e.length)){var o=null===(t=f.brands)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(NB(e),[t.id])}),[]);h(NB((null==n?void 0:n.franchises_id)||o)),null!=n&&n.franchises_id&&(null==n||null===(r=n.franchises_id)||void 0===r?void 0:r.length)!==(null==f?void 0:f.brands.length)||b(!0)}}),[null==f?void 0:f.brands]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,LB({},e,{brandList:f,brandIds:y,handleChangeBrandId:function(e){if(null==y?void 0:y.find((function(t){return t===e}))){var t=null==y?void 0:y.filter((function(t){return t!==e}));h(t),b(!1)}else{var n=y?NB(y):[];n.push(e),n.length===(null==f?void 0:f.brands.length)&&b(!0),h(n)}},handleClickFilterButton:function(){var e=y?NB(y):null;r(RB(RB({},n),{},{franchises_id:e})),s&&s()},isAllCheck:m,handleChangeAllCheck:function(){if(m)h(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=GB(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(f.brands);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}h(t)}b(!m)}})))};function $B(){return $B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$B.apply(this,arguments)}function JB(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function VB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VB(Object(n),!0).forEach((function(t){WB(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VB(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KB(e){return function(e){if(Array.isArray(e))return QB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ZB(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ZB(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZB(e,t){if(e){if("string"==typeof e)return QB(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QB(e,t):void 0}}function QB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}qB.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qB.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","logo","description","header","enabled","created_at","updated_at"]};var eF=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=XB(rn(),1)[0],l=XB(Object(i.useState)({loading:!0,error:null,appIds:[],pagination:null}),2),f=l[0],p=l[1],d=XB(Object(i.useState)(null),2),y=d[0],h=d[1],v=XB(Object(i.useState)(!1),2),m=v[0],b=v[1],g=XB(yn(),1)[0],O=g.token,w=g.loading,j=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(HB(HB({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O)}},n="".concat(c.root,"/sites?params=").concat(o),e.next=8,fetch(n,t);case 8:return r=e.sent,e.next=11,r.json();case 11:i=e.sent,u=i.error,s=i.result,l=i.pagination,p(HB(HB({},f),{},u?{loading:!1,error:s}:{loading:!1,appIds:s,pagination:l})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),p(HB(HB({},f),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){JB(a,r,o,i,u,"next",e)}function u(e){JB(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return j(),e.abort()}),[]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==f||null===(e=f.appIds)||void 0===e?void 0:e.length)){var o=null===(t=f.appIds)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(KB(e),[t.id])}),[]);h(KB((null==n?void 0:n.app_ids)||o)),null!=n&&n.app_ids&&(null==n||null===(r=n.app_ids)||void 0===r?void 0:r.length)!==(null==f?void 0:f.appIds.length)||b(!0)}}),[null==f?void 0:f.appIds]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,$B({},e,{appIdList:f,appIds:y,handleChangeAppId:function(e){if(null==y?void 0:y.find((function(t){return t===e}))){var t=null==y?void 0:y.filter((function(t){return t!==e}));h(t),b(!1)}else{var n=y?KB(y):[];n.push(e),n.length===(null==f?void 0:f.appIds.length)&&b(!0),h(n)}},handleClickFilterButton:function(){var e=y?KB(y):null;r(HB(HB({},n),{},{app_ids:e})),s&&s()},isAllCheck:m,handleChangeAllCheck:function(){if(m)h(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ZB(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(f.appIds);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}h(t)}b(!m)}})))};function tF(){return tF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tF.apply(this,arguments)}function nF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function rF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rF(Object(n),!0).forEach((function(t){aF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iF(e){return function(e){if(Array.isArray(e))return cF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||sF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||sF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sF(e,t){if(e){if("string"==typeof e)return cF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cF(e,t):void 0}}function cF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eF.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","logo","description","header","enabled","created_at","updated_at"]};var lF=function(e){var t=e.UIComponent,n=e.filterList,r=e.handleChangeFilterList,o=e.propsToFetch,s=e.onClose,c=e.setAvailableDriverIds,l=uF(rn(),1)[0],f=uF(Object(i.useState)({loading:!0,error:null,driverGroups:[],pagination:null}),2),p=f[0],d=f[1],y=uF(Object(i.useState)(null),2),h=y[0],v=y[1],m=uF(Object(i.useState)(!1),2),b=m[0],g=m[1],O=uF(yn(),1)[0],w=O.token,j=O.loading,S=uF(Object(i.useState)(null),2),E=S[0],P=S[1],C=new RegExp(/^[A-Za-z0-9\s]+$/g),I=function(e){if(e){var t=[];p.driverGroups.forEach((function(n){e.includes(n.id)&&n.drivers.forEach((function(e){t.push(e.id)}))}));var n=t.filter((function(e,t,n){return n.indexOf(e)===t}));c(n)}else c(null)},x=function(){var e,t=(e=a.a.mark((function e(){var t,n,r,i,u,s,c,f,y,h,v,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(oF(oF({},p),{},{loading:!0})),t=null,n=[],E&&(r=[],i=C.test(E),r.push({attribute:"name",value:{condition:"ilike",value:i?encodeURI("%".concat(E,"%")):"%".concat(E,"%")}}),n.push({conector:"AND",conditions:r})),n.length&&(t={conditions:n,conector:"AND"}),u={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}},s=t?"".concat(l.root,"/drivergroups?params=").concat(o,"&where=").concat(JSON.stringify(n[0])):"".concat(l.root,"/drivergroups?params=").concat(o),e.next=12,fetch(s,u);case 12:return c=e.sent,e.next=15,c.json();case 15:f=e.sent,y=f.error,h=f.result,v=f.pagination,y?d(oF(oF({},p),{},{loading:!1,error:h})):(m=null==h?void 0:h.filter((function(e){return e.enabled})),d(oF(oF({},p),{},{loading:!1,driverGroups:m,pagination:v}))),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),d(oF(oF({},p),{},{loading:!1,error:e.t0}));case 25:case"end":return e.stop()}}),e,null,[[2,22]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){nF(a,r,o,i,u,"next",e)}function u(e){nF(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return x(),e.abort()}),[]),Object(i.useEffect)((function(){var e,t,r;if(0!==(null==p||null===(e=p.driverGroups)||void 0===e?void 0:e.length)){var o=null==p||null===(t=p.driverGroups)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(iF(e),[t.id])}),[]);v(iF((null==n?void 0:n.driver_groups_ids)||o)),null!=n&&n.driver_groups_ids&&(null==n||null===(r=n.driver_groups_ids)||void 0===r?void 0:r.length)!==(null==p?void 0:p.driverGroups.length)||g(!0)}}),[null==p?void 0:p.driverGroups]),Object(i.useEffect)((function(){var e=new AbortController;return x(),e.abort()}),[E]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,tF({},e,{driverGroupList:p,driverGroupIds:h,handleChangeDriverGroupId:function(e){if(null==h?void 0:h.find((function(t){return t===e}))){var t=null==h?void 0:h.filter((function(t){return t!==e}));v(t),g(!1)}else{var n=h?iF(h):[];n.push(e),n.length===(null==p?void 0:p.driverGroups.length)&&g(!0),v(n)}},handleClickFilterButton:function(){var e=h?iF(h):null;r(oF(oF({},n),{},{driver_groups_ids:e})),s&&s(),c&&I(e)},isAllCheck:b,handleChangeAllCheck:function(){if(b)v(null);else{var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=sF(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw a}}}}(p.driverGroups);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.id)}}catch(e){n.e(e)}finally{n.f()}v(t)}g(!b)},searchValue:E,onSearch:P})))};function fF(){return fF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fF.apply(this,arguments)}function pF(e){return function(e){if(Array.isArray(e))return OF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function yF(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){dF(a,r,o,i,u,"next",e)}function u(e){dF(a,r,o,i,u,"throw",e)}i(void 0)}))}}function hF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hF(Object(n),!0).forEach((function(t){mF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||gF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gF(e,t){if(e){if("string"==typeof e)return OF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OF(e,t):void 0}}function OF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}lF.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","enabled","drivers"]};var wF=function(e){var t=e.site,n=e.sitesList,r=e.UIComponent,o=e.handleSuccessUpdateSites,s=bF(Bn(),2)[1],c=bF(rn(),1)[0],l=bF(yn(),1)[0].token,f=bF(Br(),2)[1].showToast,p=bF(Object(i.useState)({site:t||{},loading:!1,error:null}),2),d=p[0],y=p[1],h=bF(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=h[0],m=h[1],b=bF(Object(i.useState)(!1),2),g=b[0],O=b[1],w=function(){return m({loading:!1,changes:{},error:null})},j=function(){var e=yF(a.a.mark((function e(){var r,i,u,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dr.Info,s("LOADING","Loading")),m(vF(vF({},v),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(v.changes)},e.next=6,fetch("".concat(c.root,"/sites/").concat(t.id),r);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?m(vF(vF({},v),{},{loading:!1,error:u.result})):(y(vF(vF({},d),{},{site:u.result})),w(),o&&(p=n.filter((function(e){return e.id===t.id&&Object.assign(e,u.result),!0})),o(p)),f(Dr.Success,s("SITE_SAVED","Site saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(vF(vF({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var r=yF(a.a.mark((function r(){var i,u,p,d;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,f(Dr.Info,s("LOADING","Loading")),m(vF(vF({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},r.next=6,fetch("".concat(c.root,"/sites/").concat(t.id),i);case 6:return u=r.sent,r.next=9,u.json();case 9:(p=r.sent).error?m(vF(vF({},v),{},{loading:!1,error:p.result})):(o&&(d=n.filter((function(e){return e.id!==t.id})),o(d)),f(Dr.Success,s("SITE_DELETED","Site deleted")),e.onClose&&e.onClose()),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),m(vF(vF({},v),{},{loading:!1,error:[r.t0.message]}));case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(){return r.apply(this,arguments)}}(),E=function(){var t=yF(a.a.mark((function t(){var r,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Dr.Info,s("LOADING","Loading")),m(vF(vF({},v),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(v.changes)},t.next=6,fetch("".concat(c.root,"/sites"),r);case 6:return i=t.sent,t.next=9,i.json();case 9:(u=t.sent).error?m(vF(vF({},v),{},{loading:!1,error:u.result})):(w(),f(Dr.Success,s("SITE_ADDED","Site added")),o&&o([].concat(pF(n),[u.result])),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(vF(vF({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){t?(O(!1),w(),y(vF(vF({},d),{},{site:t}))):(O(!0),y(vF(vF({},d),{},{site:{}})))}),[t]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,fF({},e,{siteState:d,formState:v,isAddMode:g,handleChangeInput:function(e){m(vF(vF({},v),{},{changes:vF(vF({},v.changes),{},mF({},e.target.name,e.target.value))}))},handlechangeImage:function(e,t){var n=new window.FileReader;n.readAsDataURL(e),n.onload=function(){m(vF(vF({},v),{},{changes:vF(vF({},v.changes),{},mF({},t,n.result))}))},n.onerror=function(e){return console.log(e)}},handleUpdateSite:j,handleDeleteSite:S,handleAddSite:E})))};function jF(){return jF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jF.apply(this,arguments)}function SF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SF(Object(n),!0).forEach((function(t){PF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function IF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xF(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}wF.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var AF=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.isSearchByName,s=e.isSearchByDescription,c=IF(rn(),1)[0],l=IF(yn(),1)[0].token,f=IF(Object(i.useState)({loading:!1,sites:[],error:null}),2),p=f[0],d=f[1],y=IF(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),h=y[0],v=y[1],m=IF(Object(i.useState)(null),2),b=m[0],g=m[1],O=function(){var e,t=(e=a.a.mark((function e(t,n){var r,i,u,f,y,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(EF(EF({},p),{},{loading:!0})),r=null,i=[],b&&(u=[],o&&u.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}),s&&u.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}),i.push({conector:"OR",conditions:u})),i.length&&(r={conditions:i,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},y=r?"".concat(c.root,"/sites?page=").concat(t,"&page_size=").concat(n,"&&where=").concat(JSON.stringify(r)):"".concat(c.root,"/sites?page=").concat(t,"&page_size=").concat(n),e.next=10,fetch(y,f);case 10:return m=e.sent,e.next=13,m.json();case 13:(g=e.sent).error?d(EF(EF({},p),{},{loading:!1,error:g.result})):(d({loading:!1,sites:g.result,error:null}),v(EF(EF({},h),{},{currentPage:g.pagination.current_page,totalPages:g.pagination.total_pages,totalItems:g.pagination.total,from:g.pagination.from,to:g.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),d(EF(EF({},p),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){CF(a,r,o,i,u,"next",e)}function u(e){CF(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p.loading||O(1,h.pageSize)}),[b]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,jF({},e,{paginationProps:h,setPaginationProps:v,sitesListState:p,searchValue:b,onSearch:g,getSites:O,handleSuccessUpdateSites:function(e){d(EF(EF({},p),{},{sites:e}))}})))};function TF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}AF.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},AF.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var kF=function(e){var t=e.trackId,n=e.children,r=TF(zn(),1)[0],o=TF(Object(i.useState)(!1),2),a=o[0],s=o[1];Object(i.useEffect)((function(){if(t){if(!window.document.getElementById("google-analytics-sdk")){var e=window.document.createElement("script");return e.id="google-analytics-sdk",e.async=!0,e.defer=!0,e.src="https://www.google-analytics.com/analytics.js",e.onload=function(){s(!0),window.ga("create",t),window.ga("require","ec"),window.ga("set","page",window.location.pathname),window.ga("send","pageview")},window.document.body.appendChild(e),function(){e.onload=null}}"undefined"!=typeof ga&&s(!0)}}),[t]);var c=function(e){window.ga("set","page",null==e?void 0:e.page),window.ga("send","pageview")},l=function(e){window.ga("ec:addProduct",{id:e.id,name:e.name,category:e.category_id,price:e.price}),window.ga("ec:setAction","click"),window.ga("send","event","UI","click","add to cart")},f=function(e){window.ga("ec:addProduct",{id:e.id,name:e.name,category:e.category_id,price:e.price,quantity:e.quantity}),window.ga("ec:setAction","add"),window.ga("send","event","UI","click","add to cart")},p=function(e){window.ga("set","userId",e.id)},d=function(e){var t;window.ga("ec:setAction","purchase",{id:null==e?void 0:e.id,affiliation:null===(t=e.business)||void 0===t?void 0:t.name,revenue:e.total,tax:e.tax_total,shipping:e.delivery_zone_price})};return Object(i.useEffect)((function(){return console.log("Analytic Ready"),a&&window.ga&&(r.on("change_view",c),r.on("userLogin",p),r.on("product_clicked",l),r.on("product_added",f),r.on("order_placed",d)),function(){a&&window.ga&&(r.off("change_view",c),r.off("userLogin",p),r.off("product_clicked",l),r.off("product_added",f),r.off("order_placed",d))}}),[a]),u.a.createElement(u.a.Fragment,null,n)};function DF(){return DF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DF.apply(this,arguments)}function UF(e){return function(e){if(Array.isArray(e))return GF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LF(Object(n),!0).forEach((function(t){FF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function FF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function MF(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){RF(a,r,o,i,u,"next",e)}function u(e){RF(a,r,o,i,u,"throw",e)}i(void 0)}))}}function NF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||zF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zF(e,t){if(e){if("string"==typeof e)return GF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?GF(e,t):void 0}}function GF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}kF.propTypes={trackId:c.a.string.isRequired},kF.defaultProps={};var YF=function(e){var t,n=e.UIComponent,r=e.paginationSettings,o=e.propsToFetch,s=e.isSearchByUserId,c=e.isSearchByUserEmail,l=e.isSearchByUserPhone,f=e.isSearchByUserName,p=e.isBusinessOwners,d=e.defaultUserTypesSelected,y=e.disabledActiveStateCondition,h=e.isDriver,v=e.isProfessional,m=NF(rn(),1)[0],b=NF(yn(),1)[0],g=NF(Br(),2)[1].showToast,O=NF(Bn(),2)[1],w=NF(Object(i.useState)({users:[],loading:!1,error:null}),2),j=w[0],S=w[1],E=NF(Object(i.useState)({clear:!1,changes:{}}),2),P=E[0],C=E[1],I=NF(Object(i.useState)(null),2),x=I[0],A=I[1],T=NF(Object(i.useState)(!1),2),_=T[0],k=T[1],D=NF(Object(i.useState)(d),2),U=D[0],L=D[1],B=NF(Object(i.useState)({currentPage:"pages"===r.controlType&&r.initialPage&&r.initialPage>=1?r.initialPage-1:0,pageSize:null!==(t=r.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),F=B[0],R=B[1],M=NF(Object(i.useState)({}),2),N=M[0],z=M[1],G=NF(Object(i.useState)(!0),2),Y=G[0],q=G[1],$=NF(Object(i.useState)({loading:!1,error:null}),2),J=$[0],V=$[1],H=NF(Object(i.useState)([]),2),W=H[0],K=H[1],X=NF(Object(i.useState)({loading:!1,error:null}),2),Z=X[0],Q=X[1],ee=NF(Object(i.useState)({occupations:[],loading:!1,error:null}),2),te=ee[0],ne=ee[1],re=NF(Object(i.useState)(null),2),oe=re[0],ae=re[1],ie=function(){var e=MF(a.a.mark((function e(t,n){var r,i,u,d,h,v,g,O,w,E,C,I,A,T,k,D,L;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(BF(BF({},j),{},{loading:!0})),r={},i={page:t,page_size:n||F.pageSize},p||(r=BF({},i)),u=null,d=[],y||d.push({attribute:"enabled",value:Y}),_&&((h=[]).push({attribute:"email_verified",value:!0}),h.push({attribute:"phone_verified",value:!0}),d.push({conector:"OR",conditions:h})),U.length>0&&d.push({attribute:"level",value:U}),oe&&d.push({attribute:"occupation_id",value:oe}),x&&(v=[],s&&v.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}),c&&v.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}),l&&v.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}),f&&(v.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}}),v.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(x,"%"))}})),d.push({conector:"OR",conditions:v})),Object.keys(P.changes).length&&(w=[],null!=P&&null!==(g=P.changes)&&void 0!==g&&g.name&&null!==(null==P||null===(O=P.changes)||void 0===O?void 0:O.name)&&w.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(null==P||null===(E=P.changes)||void 0===E?void 0:E.name,"%"))}}),P.changes.lastname&&null!==P.changes.lastname&&w.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(P.changes.lastname,"%"))}}),P.changes.email&&null!==P.changes.email&&w.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(P.changes.email,"%"))}}),void 0!==P.changes.email_verified&&w.push({attribute:"email_verified",value:P.changes.email_verified}),P.changes.phone&&null!==P.changes.phone&&w.push({attribute:"phone",value:{condition:"ilike",value:encodeURI("%".concat(P.changes.phone,"%"))}}),void 0!==P.changes.phone_verified&&w.push({attribute:"phone_verified",value:P.changes.phone_verified}),P.changes.id&&parseInt(P.changes.id)>0&&w.push({attribute:"id",value:parseInt(P.changes.id)}),w.length&&d.push({conector:"AND",conditions:w})),d.length&&(u={conditions:d,conector:"AND"}),C=u?m.setAccessToken(b.token).users().select(o).parameters(r).where(u):m.setAccessToken(b.token).users().select(o).parameters(r),e.next=17,C.get();case 17:I=e.sent,A=I.content,T=A.result,k=A.pagination,j.users=T,S(BF(BF({},j),{},{loading:!1})),D=0,k.current_page!==k.total_pages&&(L=k.total-j.users.length,D=L<k.page_size?L:k.page_size),R(BF(BF({},F),{},{currentPage:k.current_page,pageSize:0===k.page_size?F.pageSize:k.page_size,totalPages:k.total_pages,totalItems:k.total,from:k.from,to:k.to,nextPageItems:D})),z(BF({},k)),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&S(BF(BF({},j),{},{loading:!1,error:[e.t0.message]}));case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=MF(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ne(BF(BF({},te),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==b?void 0:b.token)}},e.next=5,fetch("".concat(m.root,"/occupations"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?ne(BF(BF({},te),{},{loading:!1,error:r.result})):ne({loading:!1,occupations:r.result,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),ne(BF(BF({},te),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=MF(a.a.mark((function e(t){var n,r,o,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Dr.Info,O("LOADING","Loading")),V(BF(BF({},J),{},{loading:!0})),{}.updateOrder=n={},e.next=8,m.setAccessToken(b.token).users(t.id).save({level:t.level},{cancelToken:n});case 8:r=e.sent,o=r.content,i=o.error,u=o.result,V(BF(BF({},J),{},{loading:!1,error:i?u:null})),i||(s=[],s=U.includes(t.level)?j.users.filter((function(e){return e.id===t.id&&(e.level=t.level),!0})):j.users.filter((function(e){return e.id!==u.id})),S(BF(BF({},j),{},{users:s})),g(Dr.Success,O("UPDATED","Updated"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),V(BF(BF({},J),{},{loading:!1,error:[e.t0.message]}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=MF(a.a.mark((function e(t){var n,r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Dr.Info,O("LOADING","Loading")),V(BF(BF({},J),{},{loading:!0})),e.next=5,m.setAccessToken(b.token).users(t.id).save({enabled:t.enabled});case 5:n=e.sent,r=n.content,o=r.error,i=r.result,V(BF(BF({},J),{},{loading:!1,error:o?i:null})),o||(h?fe(i):y||(u=j.users.filter((function(e){var n=!0;return e.id===t.id&&t.enabled===!Y&&(n=!1),n})),S(BF(BF({},j),{},{users:u}))),g(Dr.Success,O("UPDATED","Updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),V(BF(BF({},J),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=MF(a.a.mark((function e(t){var n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,V(BF(BF({},J),{},{loading:!0})),e.next=4,m.setAccessToken(b.token).users(t).delete();case 4:n=e.sent,(r=n.content).error||(o=j.users.filter((function(e){return e.id!==t})),S(BF(BF({},j),{},{users:o})),Z.loading&&((i=UF(W)).shift(),0===i.length&&Q(BF(BF({},Z),{},{loading:!1})),K(i)),z(BF(BF({},N),{},{total:(null==N?void 0:N.total)-1}))),V(BF(BF({},J),{},{loading:!1,error:r.error?r.result:null})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),V(BF(BF({},J),{},{loading:!1,error:[e.t0.message]})),Z.loading&&Q(BF(BF({},Z),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){var t=j.users.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));S(BF(BF({},j),{},{users:t}))};return Object(i.useEffect)((function(){Z.loading&&0!==W.length&&le(W[0])}),[W,Z]),Object(i.useEffect)((function(){j.loading||ie(1,null)}),[U,Y,x,_,oe]),Object(i.useEffect)((function(){(Object.keys(null==P?void 0:P.changes).length>0||P.clear)&&!j.loading&&ie(1,null)}),[P]),Object(i.useEffect)((function(){v&&ue()}),[v]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,DF({},e,{actionStatus:J,usersList:j,filterValues:P,setFilterValues:C,userTypesSelected:U,handleSelectedUserTypes:function(e){L(e)},paginationProps:F,getUsers:ie,searchValue:x,onSearch:A,paginationDetail:N,selectedUserActiveState:Y,isVerified:_,setIsVerified:k,handleChangeUserActiveState:function(){q(!Y)},handleChangeUserType:se,handleChangeActiveUser:ce,handleDeleteUser:le,selectedUsers:W,handleSelectedUsers:function(e){var t;t=W.includes(e)?W.filter((function(t){return t!==e})):[].concat(UF(W),[e]),K(t)},deleteUsersActionState:Z,handleDeleteSeveralUsers:function(){Q(BF(BF({},Z),{},{loading:!0}))},handleSuccessUpdate:fe,handleSuccessAddUser:function(e){U.includes(null==e?void 0:e.level)&&(S(BF(BF({},j),{},{users:[].concat(UF(j.users),[e])})),z(BF(BF({},N),{},{total:null!=N&&N.total?(null==N?void 0:N.total)+1:1})))},handleSuccessDeleteUser:function(e){U.includes(null==e?void 0:e.level)&&(S(BF(BF({},j),{},{users:j.users.filter((function(t){return t.id!==e.id}))})),z(BF(BF({},N),{},{total:(null==N?void 0:N.total)-1})))},handleSuccessAddressesUpdate:function(e,t){var n=j.users.filter((function(n){return n.id===e&&(n.addresses=UF(t)),!0}));S(BF(BF({},j),{},{users:n}))},occupationsState:te,selectedOccupation:oe,handleSelectOccupation:ae})))};function qF(){return qF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qF.apply(this,arguments)}function $F(e){return function(e){if(Array.isArray(e))return QF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ZF(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JF(Object(n),!0).forEach((function(t){HF(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function HF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WF(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function KF(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){WF(a,r,o,i,u,"next",e)}function u(e){WF(a,r,o,i,u,"throw",e)}i(void 0)}))}}function XF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||ZF(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZF(e,t){if(e){if("string"==typeof e)return QF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?QF(e,t):void 0}}function QF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}YF.propTypes={UIComponent:c.a.elementType,isSearchByUserId:c.a.bool,isSearchByUserEmail:c.a.bool,isSearchByUserPhone:c.a.bool,propsToFetch:c.a.arrayOf(s.string)},YF.defaultProps={propsToFetch:["name","lastname","email","phone","photo","cellphone","schedule","country_phone_code","city_id","city","address","addresses","max_days_in_future","address_notes","driver_zone_restriction","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname","birthdate","drivergroups"],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},defaultUserTypesSelected:[0,1,2,3]};var eR=function(e){var t=e.userId,n=e.UIComponent,r=XF(rn(),1)[0],o=XF(yn(),1)[0],s=XF(Object(i.useState)({metaFields:[],loading:!0,error:null}),2),c=s[0],l=s[1],f=XF(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],y=function(){var e=KF(a.a.mark((function e(){var n,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(VF(VF({},c),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/users/").concat(t,"/metafields"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:u=e.sent,s=u.result,l(VF(VF({},c),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(VF(VF({},c),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=KF(a.a.mark((function e(n){var i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(VF(VF({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(r.root,"/users/").concat(t,"/metafields/").concat(n),i);case 5:e.sent.ok&&(u=c.metaFields.filter((function(e){return e.id!==n})),l(VF(VF({},c),{},{metaFields:u})),d({loading:!1,result:{error:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=KF(a.a.mark((function e(n){var i,u,s,f,y,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(VF(VF({},p),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)},body:JSON.stringify(n)},e.next=5,fetch("".concat(r.root,"/users/").concat(t,"/metafields"),i);case 5:return u=e.sent,e.next=8,u.json();case 8:s=e.sent,f=s.error,y=s.result,f?d({loading:!1,result:{error:!0,result:y}}):([],h=[].concat($F(c.metaFields),[y]),l(VF(VF({},c),{},{metaFields:h})),d({loading:!1,result:{error:!1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y()}),[t]),u.a.createElement(u.a.Fragment,null,n&&u.a.createElement(n,qF({},e,{metaFieldsList:c,actionState:p,handleDeleteMetaField:h,handeAddMetaField:v})))};function tR(){return tR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tR.apply(this,arguments)}function nR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eR.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eR.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var oR=function(e){var t=e.userTypes,n=e.onChangeUserType,r=e.defaultUserTypes,o=e.UIComponent,a=nR(Object(i.useState)(r),2),s=a[0],c=a[1];return u.a.createElement(u.a.Fragment,null,o&&u.a.createElement(o,tR({},e,{userTypes:t,currentTypesSelected:s,handleChangeUserType:function(e){c(e),n(e)}})))};function aR(){return aR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aR.apply(this,arguments)}function iR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iR(Object(n),!0).forEach((function(t){sR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cR(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function lR(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){cR(a,r,o,i,u,"next",e)}function u(e){cR(a,r,o,i,u,"throw",e)}i(void 0)}))}}function fR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}oR.propTypes={UIComponent:c.a.elementType,userTypes:c.a.arrayOf(c.a.object),defaultUserTypes:c.a.arrayOf(c.a.number),onChangeUserType:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},oR.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dR=function(e){var t=e.userId,n=e.propsToFetch,r=e.UIComponent,o=e.handleSuccessUpdate,s=e.handleSuccessDeleteUser,c=fR(rn(),1)[0],l=fR(yn(),1)[0],f=fR(Br(),2)[1].showToast,p=fR(Bn(),2)[1],d=fR(Object(i.useState)({user:null,loading:!1,error:null}),2),y=d[0],h=d[1],v=fR(Object(i.useState)({loading:!1,error:null}),2),m=v[0],b=v[1],g=function(){var e=lR(a.a.mark((function e(){var r,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(uR(uR({},y),{},{loading:!0})),r=c.setAccessToken(l.token).users(t).select(n),e.next=5,r.get();case 5:o=e.sent,i=o.content.result,u=Array.isArray(i)?null:i,h(uR(uR({},y),{},{loading:!1,user:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),h(uR(uR({},y),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var n=lR(a.a.mark((function n(){var r,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(Dr.Info,p("LOADING","Loading")),b({loading:!0,error:null}),n.next=5,c.setAccessToken(l.token).users(t).delete();case 5:r=n.sent,o=r.content,b({loading:!1,error:o.error?o.result:null}),o.error||(f(Dr.Success,p("USER_DELETED","User deleted")),s&&s(y.user),e.onClose&&e.onClose()),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),b({loading:!1,error:[n.t0.message]});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(){return n.apply(this,arguments)}}();Object(i.useEffect)((function(){e.user?h(uR(uR({},y),{},{user:e.user})):g()}),[t]);return u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,aR({},e,{userState:y,actionStatus:m,handleDeleteUser:O,handleSuccessUserUpdate:function(e){h(uR(uR({},y),{},{user:Object.assign(y.user,e)})),o&&o(e)}})))};function yR(){return yR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yR.apply(this,arguments)}function hR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hR(Object(n),!0).forEach((function(t){mR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bR(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function gR(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){bR(a,r,o,i,u,"next",e)}function u(e){bR(a,r,o,i,u,"throw",e)}i(void 0)}))}}function OR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}dR.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(s.string),userId:c.a.oneOfType([c.a.number,c.a.string]),user:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},dR.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","driver_zone_restriction","dropdown_option_id","dropdown_option","location","loyalty_level","zipcode","level","enabled","middle_name","second_lastname","phone_verified","email_verified","schedule","max_days_in_future"]};var jR=function(e){var t,n,r=e.UIComponent,o=e.userId,s=e.walletType,c=OR(rn(),1)[0],l=OR(yn(),1)[0].token,f=OR(Br(),2)[1].showToast,p=OR(Bn(),2)[1],d=OR(Object(i.useState)({loading:!1,wallet:{},error:null}),2),y=d[0],h=d[1],v=OR(Object(i.useState)({loading:!1,events:[],error:null}),2),m=v[0],b=v[1],g=OR(Object(i.useState)({loading:!1,users:[],error:null}),2),O=g[0],w=g[1],j=OR(Object(i.useState)({}),2),S=j[0],E=j[1],P=OR(Object(i.useState)({}),2),C=P[0],I=P[1],x=OR(Object(i.useState)({loading:!1,error:null}),2),A=x[0],T=x[1],_=function(){var e=gR(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(vR(vR({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/users/").concat(o,"/wallets"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(r=e.sent).error?h(vR(vR({},y),{},{loading:!1,error:r.result})):h({loading:!1,wallet:r.result.find((function(e){return e.type===s}))||{},error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(vR(vR({},y),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=gR(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(vR(vR({},m),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/users/").concat(o,"/wallets/").concat(t,"/events?orderBy=-id"),n);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?b(vR(vR({},m),{},{loading:!1,error:i.result})):b({loading:!1,events:i.result,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),b(vR(vR({},m),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=gR(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(vR({loading:!0},O)),e.next=4,c.setAccessToken(l).users().select(["name","lastname"]).get();case 4:t=e.sent,n=t.content,r=n.result,o=n.error,w(o?vR(vR({},O),{},{loading:!1,error:r}):{loading:!1,users:r,error:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),w(vR(vR({},O),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=gR(a.a.mark((function e(){var t,n,r,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T({loading:!0,error:null}),f(Dr.Info,p("LOADING","Loading")),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(S)},e.next=6,fetch("".concat(c.root,"/users/").concat(o,"/wallets/").concat(null===(t=y.wallet)||void 0===t?void 0:t.id,"/events"),n);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?T({loading:!1,error:i.result}):(h(vR(vR({},y),{},{wallet:vR(vR({},y.wallet),{},{balance:(null===(u=y.wallet)||void 0===u?void 0:u.balance)+i.result.amount})})),E({}),T({loading:!1,error:null}),f(Dr.Success,p("WALLET_MONEY_ADDED","Wallet money added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),T({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=gR(a.a.mark((function e(){var t,n,r,i,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,T({loading:!0,error:null}),f(Dr.Info,p("LOADING","Loading")),(n=vR({},C)).amount="-"+C.amount,r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=8,fetch("".concat(c.root,"/users/").concat(o,"/wallets/").concat(null===(t=y.wallet)||void 0===t?void 0:t.id,"/events"),r);case 8:return i=e.sent,e.next=11,i.json();case 11:(u=e.sent).error?T({loading:!1,error:u.result}):(h(vR(vR({},y),{},{wallet:vR(vR({},y.wallet),{},{balance:(null===(s=y.wallet)||void 0===s?void 0:s.balance)+u.result.amount})})),T({loading:!1,error:null}),I({}),f(Dr.Success,p("WALLET_MONEY_REDUCED","Wallet money reduced"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),T({loading:!1,error:[e.t0.message]});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;null!==(e=y.wallet)&&void 0!==e&&e.id&&k(y.wallet.id)}),[null===(t=y.wallet)||void 0===t?void 0:t.id,null===(n=y.wallet)||void 0===n?void 0:n.balance]),Object(i.useEffect)((function(){_()}),[o]),Object(i.useEffect)((function(){D()}),[]),u.a.createElement(u.a.Fragment,null,r&&u.a.createElement(r,yR({},e,{walletState:y,walletEventsState:m,addWalletState:S,reduceWalletState:C,actionState:A,handleChangeInput:function(e,t){t?E(vR(vR({},S),{},mR({},e.target.name,e.target.value))):I(vR(vR({},C),{},mR({},e.target.name,e.target.value)))},handleAddWalletMoney:U,handleReduceWalletMoney:L,parseEvent:function(e){var t="",n="",r=O.users.find((function(t){return t.id===e.author_id}));if(n=r?"".concat(null==r?void 0:r.name," ").concat(null==r?void 0:r.lastname):"".concat(e.author_id),"manual"===e.event_type)switch(e.event){case"movement":t=-1===Math.sign(e.amount)?p("TRANSACTION_REDUCE_MONEY","<strong>_user_</strong> reduce money").replace("_user_","".concat(n)):p("TRANSACTION_ADD_MONEY","<strong>_user_</strong> add money").replace("_user_","".concat(n));break;case"locked":t=p("TRANSACTION_LOCKED","<strong>_user_</strong> locked").replace("_user_","".concat(n));break;case"unlocked":t=p("TRANSACTION_UNLOCKED","<strong>_user_</strong> unlocked").replace("_user_","".concat(n));break;default:t=e.event}return"refund"===e.event_type&&(t=p("REFUND_MONEY","Refund money")),"payment"===e.event_type&&(t=p("PAID_MONEY","Paid money")),t}})))};function SR(){return SR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SR.apply(this,arguments)}function ER(e){return function(e){if(Array.isArray(e))return kR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PR(Object(n),!0).forEach((function(t){IR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function IR(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xR(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function AR(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){xR(a,r,o,i,u,"next",e)}function u(e){xR(a,r,o,i,u,"throw",e)}i(void 0)}))}}function TR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}(e,t)||_R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _R(e,t){if(e){if("string"==typeof e)return kR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kR(e,t):void 0}}function kR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}jR.propTypes={UIComponent:c.a.elementType,userId:c.a.oneOfType([c.a.number,c.a.string]),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jR.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var DR=function(e){var t=e.UIComponent,n=TR(rn(),1)[0],r=TR(yn(),1)[0].token,o=TR(Br(),2)[1].showToast,s=TR(Bn(),2)[1],c=TR(Object(i.useState)({webhooks:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=TR(Object(i.useState)(!1),2),d=p[0],y=p[1],h=TR(Object(i.useState)({loading:!1,error:null}),2),v=h[0],m=h[1],b=TR(Object(i.useState)({delay:"0"}),2),g=b[0],O=b[1],w=function(){var e=AR(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(CR(CR({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=5,fetch("".concat(n.root,"/webhooks"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||f(CR(CR({},l),{},{webhooks:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(CR(CR({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=AR(a.a.mark((function e(){var t,i,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),m(CR(CR({},v),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(g)},e.next=6,fetch("".concat(n.root,"/webhooks"),t);case 6:return i=e.sent,e.next=9,i.json();case 9:(u=e.sent).error?m({loading:!1,error:u.result}):(m(CR(CR({},v),{},{loading:!1})),c=[].concat(ER(l.webhooks),[u.result]),f(CR(CR({},l),{},{webhooks:c})),o(Dr.Success,s("WEBHOOK_ADDED","Webhook added")),y(!1),O({delay:"0"})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=AR(a.a.mark((function e(t){var i,u,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dr.Info,s("LOADING","Loading")),m(CR(CR({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}},e.next=6,fetch("".concat(n.root,"/webhooks/").concat(t),i);case 6:return u=e.sent,e.next=9,u.json();case 9:(c=e.sent).error?m({loading:!1,error:c.result}):(m(CR(CR({},v),{},{loading:!1})),p=l.webhooks.filter((function(e){return e.id!==t})),f(CR(CR({},l),{},{webhooks:p})),o(Dr.Success,s("WEBHOOK_REMOVED","Webhook removed")),y(!1),O({delay:"0"})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w()}),[]),u.a.createElement(u.a.Fragment,null,t&&u.a.createElement(t,SR({},e,{webhookListState:l,isAddMode:d,setIsAddMode:y,handleAddNewWebhook:j,changesState:g,actionState:v,handleChangeAddState:function(e,t){O(CR(CR({},g),{},IR({},e,t)))},handleDeleteWebhook:S})))};DR.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},DR.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]}}])}));