/*! For license information please see ordering-component-admin.f468c2ebaa9c71169220.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("OrderingComponentsAdmin",["React","ReactDOM"],t):"object"==typeof exports?exports.OrderingComponentsAdmin=t(require("react"),require("react-dom")):e.OrderingComponentsAdmin=t(e.React,e.ReactDOM)}(window,(function(e,t){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/_bundles/",r(r.s=65)}([function(e,t,r){e.exports=r(63)()},function(t,r){t.exports=e},function(e,t,r){e.exports=r(36)},function(e,t,r){e.exports=function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",o="second",a="minute",i="hour",s="day",u="week",c="month",l="quarter",f="year",p="date",d="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},b={s:m,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),o=r%60;return(t<=0?"+":"-")+m(n,2,"0")+":"+m(o,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),o=t.clone().add(n,c),a=r-o<0,i=t.clone().add(n+(a?-1:1),c);return+(-(n+(r-o)/(a?o-i:i-o))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:f,w:u,d:s,D:p,h:i,m:a,s:o,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",O={};O[g]=v;var w=function(e){return e instanceof P},j=function(e,t,r){var n;if(!e)return g;if("string"==typeof e)O[e]&&(n=e),t&&(O[e]=t,n=e);else{var o=e.name;O[o]=e,n=o}return!r&&n&&(g=n),n||!r&&g},S=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new P(r)},E=b;E.l=j,E.i=w,E.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var P=function(){function v(e){this.$L=j(e.locale,null,!0),this.parse(e)}var m=v.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var o=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return E},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(e,t){var r=S(e);return this.startOf(t)<=r&&r<=this.endOf(t)},m.isAfter=function(e,t){return S(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<S(e)},m.$g=function(e,t,r){return E.u(e)?this[t]:this.set(r,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var r=this,n=!!E.u(t)||t,l=E.p(e),d=function(e,t){var o=E.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?o:o.endOf(s)},h=function(e,t){return E.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},y=this.$W,v=this.$M,m=this.$D,b="set"+(this.$u?"UTC":"");switch(l){case f:return n?d(1,0):d(31,11);case c:return n?d(1,v):d(0,v+1);case u:var g=this.$locale().weekStart||0,O=(y<g?y+7:y)-g;return d(n?m-O:m+(6-O),v);case s:case p:return h(b+"Hours",0);case i:return h(b+"Minutes",1);case a:return h(b+"Seconds",2);case o:return h(b+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var r,u=E.p(e),l="set"+(this.$u?"UTC":""),d=(r={},r[s]=l+"Date",r[p]=l+"Date",r[c]=l+"Month",r[f]=l+"FullYear",r[i]=l+"Hours",r[a]=l+"Minutes",r[o]=l+"Seconds",r[n]=l+"Milliseconds",r)[u],h=u===s?this.$D+(t-this.$W):t;if(u===c||u===f){var y=this.clone().set(p,1);y.$d[d](h),y.init(),this.$d=y.set(p,Math.min(this.$D,y.daysInMonth())).$d}else d&&this.$d[d](h);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[E.p(e)]()},m.add=function(n,l){var p,d=this;n=Number(n);var h=E.p(l),y=function(e){var t=S(d);return E.w(t.date(t.date()+Math.round(e*n)),d)};if(h===c)return this.set(c,this.$M+n);if(h===f)return this.set(f,this.$y+n);if(h===s)return y(1);if(h===u)return y(7);var v=(p={},p[a]=t,p[i]=r,p[o]=e,p)[h]||1,m=this.$d.getTime()+n*v;return E.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||d;var n=e||"YYYY-MM-DDTHH:mm:ssZ",o=E.z(this),a=this.$H,i=this.$m,s=this.$M,u=r.weekdays,c=r.months,l=function(e,r,o,a){return e&&(e[r]||e(t,n))||o[r].substr(0,a)},f=function(e){return E.s(a%12||12,e,"0")},p=r.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:E.s(s+1,2,"0"),MMM:l(r.monthsShort,s,c,3),MMMM:l(c,s),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,u,2),ddd:l(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(a),HH:E.s(a,2,"0"),h:f(1),hh:f(2),a:p(a,i,!0),A:p(a,i,!1),m:String(i),mm:E.s(i,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:o};return n.replace(y,(function(e,t){return t||h[e]||o.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,p,d){var h,y=E.p(p),v=S(n),m=(v.utcOffset()-this.utcOffset())*t,b=this-v,g=E.m(this,v);return g=(h={},h[f]=g/12,h[c]=g,h[l]=g/3,h[u]=(b-m)/6048e5,h[s]=(b-m)/864e5,h[i]=b/r,h[a]=b/t,h[o]=b/e,h)[y]||b,d?g:E.a(g)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return O[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=j(e,t,!0);return n&&(r.$L=n),r},m.clone=function(){return E.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),C=P.prototype;return S.prototype=C,[["$ms",n],["$s",o],["$m",a],["$H",i],["$W",s],["$M",c],["$y",f],["$D",p]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,P,S),e.$i=!0),S},S.locale=j,S.isDayjs=w,S.unix=function(e){return S(1e3*e)},S.en=O[g],S.Ls=O,S.p={},S}()},function(e,t,r){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,o,a){var i=o.prototype;a.utc=function(e){return new o({date:e,utc:!0,args:arguments})},i.utc=function(t){var r=a(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},i.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var u=i.init;i.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else u.call(this)};var c=i.utcOffset;i.utcOffset=function(n,o){var a=this.$utils().u;if(a(n))return this.$u?0:a(this.$offset)?c.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var o=(""+n[0]).match(r)||["-",0,0],a=o[0],i=60*+o[1]+ +o[2];return 0===i?0:"+"===a?i:-i}(n)))return this;var i=Math.abs(n)<=16?60*n:n,s=this;if(o)return s.$offset=i,s.$u=0===n,s;if(0!==n){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(i+u,e)).$offset=i,s.$x.$localOffset=u}else s=this.utc();return s};var l=i.format;i.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},i.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*e},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var f=i.toDate;i.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var p=i.diff;i.diff=function(e,t,r){if(e&&this.$u===e.$u)return p.call(this,e,t,r);var n=this.local(),o=a(e).local();return p.call(n,o,t,r)}}}()},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){var n,o=r(50),a=r(26),i=r(52),s=r(53),u=r(54);"undefined"!=typeof ArrayBuffer&&(n=r(55));var c="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=c||l;t.protocol=3;var p=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=o(p),h={type:"error",data:"parser error"},y=r(56);function v(e,t,r){for(var n=new Array(e.length),o=s(e.length,r),a=function(e,r,o){t(r,(function(t,r){n[e]=r,o(t,n)}))},i=0;i<e.length;i++)a(i,e[i],o)}t.encodePacket=function(e,r,n,o){"function"==typeof r&&(o=r,r=!1),"function"==typeof n&&(o=n,n=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var o=e.data,a=new Uint8Array(o),i=new Uint8Array(1+o.byteLength);i[0]=p[e.type];for(var s=0;s<a.length;s++)i[s+1]=a[s];return n(i.buffer)}(e,r,o);if(void 0!==y&&a instanceof y)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);if(f)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var o=new FileReader;return o.onload=function(){t.encodePacket({type:e.type,data:o.result},r,!0,n)},o.readAsArrayBuffer(e.data)}(e,r,n);var o=new Uint8Array(1);o[0]=p[e.type];var a=new y([o.buffer,e.data]);return n(a)}(e,r,o);if(a&&a.base64)return function(e,r){var n="b"+t.packets[e.type]+e.data.data;return r(n)}(e,o);var i=p[e.type];return void 0!==e.data&&(i+=n?u.encode(String(e.data),{strict:!1}):String(e.data)),o(""+i)},t.encodeBase64Packet=function(e,r){var n,o="b"+t.packets[e.type];if(void 0!==y&&e.data instanceof y){var a=new FileReader;return a.onload=function(){var e=a.result.split(",")[1];r(o+e)},a.readAsDataURL(e.data)}try{n=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var i=new Uint8Array(e.data),s=new Array(i.length),u=0;u<i.length;u++)s[u]=i[u];n=String.fromCharCode.apply(null,s)}return o+=btoa(n),r(o)},t.decodePacket=function(e,r,n){if(void 0===e)return h;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),r);if(n&&!1===(e=function(e){try{e=u.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return h;var o=e.charAt(0);return Number(o)==o&&d[o]?e.length>1?{type:d[o],data:e.substring(1)}:{type:d[o]}:h}o=new Uint8Array(e)[0];var a=i(e,1);return y&&"blob"===r&&(a=new y([a])),{type:d[o],data:a}},t.decodeBase64Packet=function(e,t){var r=d[e.charAt(0)];if(!n)return{type:r,data:{base64:!0,data:e.substr(1)}};var o=n.decode(e.substr(1));return"blob"===t&&y&&(o=new y([o])),{type:r,data:o}},t.encodePayload=function(e,r,n){"function"==typeof r&&(n=r,r=null);var o=a(e);if(r&&o)return y&&!f?t.encodePayloadAsBlob(e,n):t.encodePayloadAsArrayBuffer(e,n);if(!e.length)return n("0:");v(e,(function(e,n){t.encodePacket(e,!!o&&r,!1,(function(e){n(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return n(t.join(""))}))},t.decodePayload=function(e,r,n){if("string"!=typeof e)return t.decodePayloadAsBinary(e,r,n);var o;if("function"==typeof r&&(n=r,r=null),""===e)return n(h,0,1);for(var a,i,s="",u=0,c=e.length;u<c;u++){var l=e.charAt(u);if(":"===l){if(""===s||s!=(a=Number(s)))return n(h,0,1);if(s!=(i=e.substr(u+1,a)).length)return n(h,0,1);if(i.length){if(o=t.decodePacket(i,r,!1),h.type===o.type&&h.data===o.data)return n(h,0,1);if(!1===n(o,u+a,c))return}u+=a,s=""}else s+=l}return""!==s?n(h,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,r){if(!e.length)return r(new ArrayBuffer(0));v(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){return r(null,e)}))}),(function(e,t){var n=t.reduce((function(e,t){var r;return e+(r="string"==typeof t?t.length:t.byteLength).toString().length+r+2}),0),o=new Uint8Array(n),a=0;return t.forEach((function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);r=n.buffer}o[a++]=t?0:1;var s=r.byteLength.toString();for(i=0;i<s.length;i++)o[a++]=parseInt(s[i]);o[a++]=255;for(n=new Uint8Array(r),i=0;i<n.length;i++)o[a++]=n[i]})),r(o.buffer)}))},t.encodePayloadAsBlob=function(e,r){v(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=n.buffer,t[0]=0}var a=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),i=new Uint8Array(a.length+1);for(o=0;o<a.length;o++)i[o]=parseInt(a[o]);if(i[a.length]=255,y){var s=new y([t.buffer,i.buffer,e]);r(null,s)}}))}),(function(e,t){return r(new y(t))}))},t.decodePayloadAsBinary=function(e,r,n){"function"==typeof r&&(n=r,r=null);for(var o=e,a=[];o.byteLength>0;){for(var s=new Uint8Array(o),u=0===s[0],c="",l=1;255!==s[l];l++){if(c.length>310)return n(h,0,1);c+=s[l]}o=i(o,2+c.length),c=parseInt(c);var f=i(o,0,c);if(u)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(e){var p=new Uint8Array(f);f="";for(l=0;l<p.length;l++)f+=String.fromCharCode(p[l])}a.push(f),o=i(o,c)}var d=a.length;a.forEach((function(e,o){n(t.decodePacket(e,r,!0),o,d)}))}},function(e,t,r){(function(n){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(38)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,r(13))},function(e,t){t.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},t.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;n<o;n++){var a=r[n].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},function(e,t){e.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){(function(n){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(57)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,r(13))},function(e,r){e.exports=t},function(e,t,r){!function(e,t){"use strict";function r(e,t){return e(t={exports:{}},t.exports),t.exports}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function o(){}function a(){}a.resetWarningCache=o;var i=function(){function e(e,t,r,o,a,i){if(i!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return r.PropTypes=r,r},s=r((function(e){e.exports=i()}));function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){return d(e)||h(e,t)||y(e,t)||m()}function d(e){if(Array.isArray(e))return e}function h(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var b=function(e){var r=t.useRef(e);return t.useEffect((function(){r.current=e}),[e]),r.current},g=function(e){return null!==e&&"object"===u(e)},O=function(e){return g(e)&&"function"==typeof e.then},w=function(e){return g(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment},j="[object Object]",S=function e(t,r){if(!g(t)||!g(r))return t===r;var n=Array.isArray(t);if(n!==Array.isArray(r))return!1;var o=Object.prototype.toString.call(t)===j;if(o!==(Object.prototype.toString.call(r)===j))return!1;if(!o&&!n)return t===r;var a=Object.keys(t),i=Object.keys(r);if(a.length!==i.length)return!1;for(var s={},u=0;u<a.length;u+=1)s[a[u]]=!0;for(var c=0;c<i.length;c+=1)s[i[c]]=!0;var l=Object.keys(s);if(l.length!==a.length)return!1;var f=t,p=r,d=function(t){return e(f[t],p[t])};return l.every(d)},E=function(e,t,r){return g(e)?Object.keys(e).reduce((function(n,o){var a=!g(t)||!S(e[o],t[o]);return r.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),n):a?f(f({},n||{}),{},c({},o,e[o])):n}),null):null},P="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",C=function(e){if(null===e||w(e))return e;throw new Error(P)},I=function(e){if(O(e))return{tag:"async",stripePromise:Promise.resolve(e).then(C)};var t=C(e);return null===t?{tag:"empty"}:{tag:"sync",stripe:t}},x=t.createContext(null);x.displayName="ElementsContext";var A=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},T=function(e){var r=e.stripe,n=e.options,o=e.children,a=t.useRef(!1),i=t.useRef(!0),s=t.useMemo((function(){return I(r)}),[r]),u=p(t.useState((function(){return{stripe:null,elements:null}})),2),c=u[0],l=u[1],f=b(r);null!==f&&f!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it."),a.current||("sync"===s.tag&&(a.current=!0,l({stripe:s.stripe,elements:s.stripe.elements(n)})),"async"===s.tag&&(a.current=!0,s.stripePromise.then((function(e){e&&i.current&&l({stripe:e,elements:e.elements(n)})}))));var d=b(n);return t.useEffect((function(){if(c.elements){var e=E(n,d,["clientSecret","fonts"]);e&&c.elements.update(e)}}),[n,d,c.elements]),t.useEffect((function(){return function(){i.current=!1}}),[]),t.useEffect((function(){var e=c.stripe;e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"1.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"1.7.0",url:"https://stripe.com/docs/stripe-js/react"}))}),[c.stripe]),t.createElement(x.Provider,{value:c},o)};T.propTypes={stripe:s.any,options:s.object};var _=function(e){var r=t.useContext(x);return A(r,e)},k=function(){return _("calls useElements()").elements},D=function(){return _("calls useStripe()").stripe},U=function(e){return(0,e.children)(_("mounts <ElementsConsumer>"))};U.propTypes={children:s.func.isRequired};var L=function(e){var r=t.useRef(e);return t.useEffect((function(){r.current=e}),[e]),function(){r.current&&r.current.apply(r,arguments)}},F=function(){},B=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},M=function(e,r){var n="".concat(B(e),"Element"),o=r?function(e){_("mounts <".concat(n,">"));var r=e.id,o=e.className;return t.createElement("div",{id:r,className:o})}:function(r){var o=r.id,a=r.className,i=r.options,s=void 0===i?{}:i,u=r.onBlur,c=void 0===u?F:u,l=r.onFocus,f=void 0===l?F:l,p=r.onReady,d=void 0===p?F:p,h=r.onChange,y=void 0===h?F:h,v=r.onEscape,m=void 0===v?F:v,g=r.onClick,O=void 0===g?F:g,w=_("mounts <".concat(n,">")).elements,j=t.useRef(null),S=t.useRef(null),P=L(d),C=L(c),I=L(f),x=L(O),A=L(y),T=L(m);t.useLayoutEffect((function(){if(null==j.current&&w&&null!=S.current){var t=w.create(e,s);j.current=t,t.mount(S.current),t.on("ready",(function(){return P(t)})),t.on("change",A),t.on("blur",C),t.on("focus",I),t.on("escape",T),t.on("click",x)}}));var k=b(s);return t.useEffect((function(){if(j.current){var e=E(s,k,["paymentRequest"]);e&&j.current.update(e)}}),[s,k]),t.useLayoutEffect((function(){return function(){j.current&&j.current.destroy()}}),[]),t.createElement("div",{id:o,className:a,ref:S})};return o.propTypes={id:s.string,className:s.string,onChange:s.func,onBlur:s.func,onFocus:s.func,onReady:s.func,onClick:s.func,options:s.object},o.displayName=n,o.__elementType=e,o},R="undefined"==typeof window,N=M("auBankAccount",R),z=M("card",R),G=M("cardNumber",R),q=M("cardExpiry",R),Y=M("cardCvc",R),$=M("fpxBank",R),J=M("iban",R),V=M("idealBank",R),H=M("p24Bank",R),W=M("epsBank",R),K=M("payment",R),X=M("paymentRequestButton",R),Z=M("linkAuthentication",R),Q=M("shippingAddress",R),ee=M("affirmMessage",R),te=M("afterpayClearpayMessage",R);e.AffirmMessageElement=ee,e.AfterpayClearpayMessageElement=te,e.AuBankAccountElement=N,e.CardCvcElement=Y,e.CardElement=z,e.CardExpiryElement=q,e.CardNumberElement=G,e.Elements=T,e.ElementsConsumer=U,e.EpsBankElement=W,e.FpxBankElement=$,e.IbanElement=J,e.IdealBankElement=V,e.LinkAuthenticationElement=Z,e.P24BankElement=H,e.PaymentElement=K,e.PaymentRequestButtonElement=X,e.ShippingAddressElement=Q,e.useElements=k,e.useStripe=D,Object.defineProperty(e,"__esModule",{value:!0})}(t,r(1))},function(e,t){var r,n,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var u,c=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=s(p);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||l||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var r=1e3,n=60*r,o=60*n,a=24*o,i=365.25*a;function s(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var u,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*i;case"days":case"day":case"d":return s*a;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?s(u=e,a,"day")||s(u,o,"hour")||s(u,n,"minute")||s(u,r,"second")||u+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){var n=r(39)("socket.io-parser"),o=r(5),a=r(41),i=r(21),s=r(22);function u(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=u,t.Decoder=f;var c=t.ERROR+'"encode error"';function l(e){var r=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(r+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(r+=e.nsp+","),null!=e.id&&(r+=e.id),null!=e.data){var o=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===o)return c;r+=o}return n("encoded %j as %s",e,r),r}function f(){this.reconstructor=null}function p(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:t.ERROR,data:"parser error: "+e}}u.prototype.encode=function(e,r){(n("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){function r(e){var r=a.deconstructPacket(e),n=l(r.packet),o=r.buffers;o.unshift(n),t(o)}a.removeBlobs(e,r)}(e,r):r([l(e)])},o(f.prototype),f.prototype.add=function(e){var r;if("string"==typeof e)r=function(e){var r=0,o={type:Number(e.charAt(0))};if(null==t.types[o.type])return d("unknown packet type "+o.type);if(t.BINARY_EVENT===o.type||t.BINARY_ACK===o.type){for(var a=r+1;"-"!==e.charAt(++r)&&r!=e.length;);var s=e.substring(a,r);if(s!=Number(s)||"-"!==e.charAt(r))throw new Error("Illegal attachments");o.attachments=Number(s)}if("/"===e.charAt(r+1)){for(a=r+1;++r;){if(","===(c=e.charAt(r)))break;if(r===e.length)break}o.nsp=e.substring(a,r)}else o.nsp="/";var u=e.charAt(r+1);if(""!==u&&Number(u)==u){for(a=r+1;++r;){var c;if(null==(c=e.charAt(r))||Number(c)!=c){--r;break}if(r===e.length)break}o.id=Number(e.substring(a,r+1))}if(e.charAt(++r)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(r));if(!(!1!==l&&(o.type===t.ERROR||i(l))))return d("invalid payload");o.data=l}return n("decoded %s as %j",e,o),o}(e),t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type?(this.reconstructor=new p(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(r=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",r))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,r){"use strict";(function(e){var n=r(43),o=r(44),a=r(45);function i(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=p(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|h(t,r),o=(e=s(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|d(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):p(e,t);if("Buffer"===t.type&&a(t.data))return p(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=s(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function p(e,t){var r=t.length<0?0:0|d(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function h(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(n)return z(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return x(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return P(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,o);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,o){var a,i=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;i=2,s/=2,u/=2,r/=2}function c(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var l=-1;for(a=r;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*i}else-1!==l&&(a-=a-l),l=-1}else for(r+u>s&&(r=s-u),a=r;a>=0;a--){for(var f=!0,p=0;p<u;p++)if(c(e,a+p)!==c(t,p)){f=!1;break}if(f)return a}return-1}function g(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var i=0;i<n;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[r+i]=s}return i}function O(e,t,r,n){return q(z(t,e.length-r),e,r,n)}function w(e,t,r,n){return q(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function j(e,t,r,n){return w(e,t,r,n)}function S(e,t,r,n){return q(G(t),e,r,n)}function E(e,t,r,n){return q(function(e,t){for(var r,n,o,a=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o=r%256,a.push(o),a.push(n);return a}(t,e.length-r),e,r,n)}function P(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function C(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var a,i,s,u,c=e[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[o+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=e[o+1],i=e[o+2],128==(192&a)&&128==(192&i)&&(u=(15&c)<<12|(63&a)<<6|63&i)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[o+1],i=e[o+2],s=e[o+3],128==(192&a)&&128==(192&i)&&128==(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&i)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=f}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,a=Math.min(r,n);o<a;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(!u.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):y.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,o){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(n>>>=0),i=(r>>>=0)-(t>>>=0),s=Math.min(a,i),c=this.slice(n,o),l=e.slice(t,r),f=0;f<s;++f)if(c[f]!==l[f]){a=c[f],i=l[f];break}return a<i?-1:i<a?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return O(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return j(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function x(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function T(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",a=t;a<r;++a)o+=N(e[a]);return o}function _(e,t,r){for(var n=e.slice(t,r),o="",a=0;a<n.length;a+=2)o+=String.fromCharCode(n[a]+256*n[a+1]);return o}function k(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,o,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function U(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-r,2);o<a;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function L(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-r,4);o<a;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function F(e,t,r,n,o,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,a){return a||F(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,a){return a||F(e,0,r,8),o.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var o=t-e;r=new u(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||k(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||k(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},u.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||k(e,t,this.length);for(var n=this[e],o=1,a=0;++a<t&&(o*=256);)n+=this[e+a]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||k(e,t,this.length);for(var n=t,o=1,a=this[e+--n];n>0&&(o*=256);)a+=this[e+--n]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||D(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,a=0;for(this[t]=255&e;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||D(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);D(this,e,t,r,o-1,-o)}var a=0,i=1,s=0;for(this[t]=255&e;++a<r&&(i*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);D(this,e,t,r,o-1,-o)}var a=r-1,i=1,s=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,a=n-r;if(this===e&&r<t&&t<n)for(o=a-1;o>=0;--o)e[o+t]=this[o+r];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var i=u.isBuffer(e)?e:z(new u(e,n).toString()),s=i.length;for(a=0;a<r-t;++a)this[a+t]=i[a%s]}return this};var R=/[^+\/0-9A-Za-z-_]/g;function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var r;t=t||1/0;for(var n=e.length,o=null,a=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&a.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function G(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(42))},function(e,t,r){var n=r(48),o=r(18);e.exports=function(e){var t=e.xdomain,r=e.xscheme,a=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!r&&a)return new XDomainRequest}catch(e){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,r){var n=r(6),o=r(5);function a(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=a,o(a.prototype),a.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},a.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},a.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(e){var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)},a.prototype.onPacket=function(e){this.emit("packet",e)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),a=e.indexOf("]");-1!=o&&-1!=a&&(e=e.substring(0,o)+e.substring(o,a).replace(/:/g,";")+e.substring(a,e.length));for(var i,s,u=r.exec(e||""),c={},l=14;l--;)c[n[l]]=u[l]||"";return-1!=o&&-1!=a&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=function(e,t){var r=/\/{2,9}/g,n=t.replace(r,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1);"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1);return n}(0,c.path),c.queryKey=(i=c.query,s={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(s[t]=r)})),s),c}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(t){e.exports=function(e){return r&&t.isBuffer(e)||n&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var r="function"==typeof t&&"function"==typeof t.isBuffer,n="function"==typeof ArrayBuffer}).call(this,r(16).Buffer)},function(e,t,r){var n=r(46),o=r(29),a=r(5),i=r(15),s=r(30),u=r(31),c=r(7)("socket.io-client:manager"),l=r(28),f=r(62),p=Object.prototype.hasOwnProperty;function d(e,t){if(!(this instanceof d))return new d(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=t.parser||i;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=d,d.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},d.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},d.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},a(d.prototype),d.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},d.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},d.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(e,t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=n(this.uri,this.opts);var r=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var a=s(r,"open",(function(){o.onopen(),e&&e()})),i=s(r,"error",(function(t){if(c("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else o.maybeReconnectOnOpen()}));if(!1!==this._timeout){var u=this._timeout;c("connect attempt will timeout after %d",u),0===u&&a.destroy();var l=setTimeout((function(){c("connect attempt timed out after %d",u),a.destroy(),r.close(),r.emit("error","timeout"),o.emitAll("connect_timeout",u)}),u);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(a),this.subs.push(i),this},d.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",u(this,"ondata"))),this.subs.push(s(e,"ping",u(this,"onping"))),this.subs.push(s(e,"pong",u(this,"onpong"))),this.subs.push(s(e,"error",u(this,"onerror"))),this.subs.push(s(e,"close",u(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",u(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(e){this.decoder.add(e)},d.prototype.ondecoded=function(e){this.emit("packet",e)},d.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},d.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new o(this,e,t),this.nsps[e]=r;var n=this;r.on("connecting",a),r.on("connect",(function(){r.id=n.generateId(e)})),this.autoConnect&&a()}function a(){~l(n.connecting,r)||n.connecting.push(r)}return r},d.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},d.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},d.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout((function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(r)}})}},d.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,r){var n=r(17),o=r(49),a=r(58),i=r(59);t.polling=function(e){var t=!1,r=!1,i=!1!==e.jsonp;if("undefined"!=typeof location){var s="https:"===location.protocol,u=location.port;u||(u=s?443:80),t=e.hostname!==location.hostname||u!==e.port,r=e.secure!==s}if(e.xdomain=t,e.xscheme=r,"open"in new n(e)&&!e.forceJSONP)return new o(e);if(!i)throw new Error("JSONP disabled");return new a(e)},t.websocket=i},function(e,t,r){var n=r(19),o=r(8),a=r(6),i=r(9),s=r(27),u=r(10)("engine.io-client:polling");e.exports=l;var c=null!=new(r(17))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),n.call(this,e)}i(l,n),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t=this;function r(){u("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(u("we are currently polling - waiting to pause"),n++,this.once("pollComplete",(function(){u("pre-pause polling complete"),--n||r()}))),this.writable||(u("we are currently writing - waiting to pause"),n++,this.once("drain",(function(){u("pre-pause writing complete"),--n||r()})))}else r()},l.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var t=this;u("polling got data %s",e);a.decodePayload(e,this.socket.binaryType,(function(e,r,n){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){u("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,r)}))},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e}},function(e,t,r){(function(t){var n=r(51),o=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),i="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);e.exports=function e(r){if(!r||"object"!=typeof r)return!1;if(n(r)){for(var o=0,s=r.length;o<s;o++)if(e(r[o]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(r)||"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||a&&r instanceof Blob||i&&r instanceof File)return!0;if(r.toJSON&&"function"==typeof r.toJSON&&1===arguments.length)return e(r.toJSON(),!0);for(var u in r)if(Object.prototype.hasOwnProperty.call(r,u)&&e(r[u]))return!0;return!1}}).call(this,r(16).Buffer)},function(e,t,r){"use strict";var n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a={},i=0,s=0;function u(e){var t="";do{t=o[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function c(){var e=u(+new Date);return e!==n?(i=0,n=e):e+"."+u(i++)}for(;s<64;s++)a[o[s]]=s;c.encode=u,c.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=64*t+a[e.charAt(s)];return t},e.exports=c},function(e,t){var r=[].indexOf;e.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t,r){var n=r(15),o=r(5),a=r(61),i=r(30),s=r(31),u=r(7)("socket.io-client:socket"),c=r(8),l=r(26);e.exports=d;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=o.prototype.emit;function d(e,t,r){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}o(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[i(e,"open",s(this,"onopen")),i(e,"packet",s(this,"onpacket")),i(e,"close",s(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},d.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(f.hasOwnProperty(e))return p.apply(this,arguments),this;var t=a(arguments),r={type:(void 0!==this.flags.binary?this.flags.binary:l(t))?n.BINARY_EVENT:n.EVENT,data:t,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?c.encode(this.query):this.query;u("sending connect packet with query %s",e),this.packet({type:n.CONNECT,query:e})}else this.packet({type:n.CONNECT})},d.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){var t=e.nsp===this.nsp,r=e.type===n.ERROR&&"/"===e.nsp;if(t||r)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var o=a(arguments);u("sending ack %j",o),t.packet({type:l(o)?n.BINARY_ACK:n.ACK,id:e,data:o})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags.compress=e,this},d.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}},function(e,t){var r=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},function(e,t,r){var n=r(37),o=r(15),a=r(23),i=r(7)("socket.io-client");e.exports=t=u;var s=t.managers={};function u(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,o=n(e),u=o.source,c=o.id,l=o.path,f=s[c]&&l in s[c].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||f?(i("ignoring socket cache for %s",u),r=a(u,t)):(s[c]||(i("new io instance for %s",u),s[c]=a(u,t)),r=s[c]),o.query&&!t.query&&(t.query=o.query),r.socket(o.path,t)}t.protocol=o.protocol,t.connect=u,t.Manager=r(23),t.Socket=r(29)},function(e,t,r){e.exports=function(){"use strict";return function(e,t,r){e=e||{};var n=t.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(e,t,r,o){return n.fromToBase(e,t,r,o)}r.en.relativeTime=o,n.fromToBase=function(t,n,a,i,s){for(var u,c,l,f=a.$locale().relativeTime||o,p=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],d=p.length,h=0;h<d;h+=1){var y=p[h];y.d&&(u=i?r(t).diff(a,y.d,!0):a.diff(t,y.d,!0));var v=(e.rounding||Math.round)(Math.abs(u));if(l=u>0,v<=y.r||!y.r){v<=1&&h>0&&(y=p[h-1]);var m=f[y.l];s&&(v=s(""+v)),c="string"==typeof m?m.replace("%d",v):m(v,n,y.l,l);break}}if(n)return c;var b=l?f.future:f.past;return"function"==typeof b?b(c):b.replace("%s",c)},n.to=function(e,t){return a(e,t,this,!0)},n.from=function(e,t){return a(e,t,this)};var i=function(e){return e.$u?r.utc():r()};n.toNow=function(e){return this.to(i(this),e)},n.fromNow=function(e){return this.from(i(this),e)}}}()},function(e,t,r){e.exports=function(){"use strict";return function(e,t,r){r.updateLocale=function(e,t){var n=r.Ls[e];if(n)return(t?Object.keys(t):[]).forEach((function(e){n[e]=t[e]})),n}}}()},function(e,t,r){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}()},function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),i=new x(n||[]);return a._invoke=function(e,t,r){var n=f;return function(o,a){if(n===d)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw a;return T()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=P(i,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=l(e,t,r);if("normal"===u.type){if(n=r.done?h:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=h,r.method="throw",r.arg=u.arg)}}}(e,r,i),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",h="completed",y={};function v(){}function m(){}function b(){}var g={};u(g,a,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(A([])));w&&w!==r&&n.call(w,a)&&(g=w);var j=b.prototype=v.prototype=Object.create(g);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,a,i,s){var u=l(e[o],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,s)}))}s(u.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function P(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:T}}function T(){return{value:t,done:!0}}return m.prototype=b,u(j,"constructor",b),u(b,"constructor",m),m.displayName=u(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(j),e},e.awrap=function(e){return{__await:e}},S(E.prototype),u(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new E(c(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(j),u(j,s,"Generator"),u(j,a,(function(){return this})),u(j,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){var n=r(20),o=r(7)("socket.io-client:url");e.exports=function(e,t){var r=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),r=n(e));r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443"));r.path=r.path||"/";var a=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port,r.href=r.protocol+"://"+a+(t&&t.port===r.port?"":":"+r.port),r}},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,o=+new Date,a=o-(r||o);e.diff=a,e.prev=r,e.curr=o,r=o;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;u++;var o=t.formatters[n];if("function"==typeof o){var a=i[u];r=o.call(e,a),i.splice(u,1),u--}return r})),t.formatArgs.call(e,i);var c=n.log||t.log||console.log.bind(console);c.apply(e,i)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=o,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var a=t.instances[r];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(14),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,r){(function(n){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(40)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,r(13))},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,o=+new Date,a=o-(r||o);e.diff=a,e.prev=r,e.curr=o,r=o;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;u++;var o=t.formatters[n];if("function"==typeof o){var a=i[u];r=o.call(e,a),i.splice(u,1),u--}return r})),t.formatArgs.call(e,i);var c=n.log||t.log||console.log.bind(console);c.apply(e,i)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=o,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var a=t.instances[r];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(14),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,r){var n=r(21),o=r(22),a=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===a.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===a.call(File);function u(e,t){if(!e)return e;if(o(e)){var r={_placeholder:!0,num:t.length};return t.push(e),r}if(n(e)){for(var a=new Array(e.length),i=0;i<e.length;i++)a[i]=u(e[i],t);return a}if("object"==typeof e&&!(e instanceof Date)){a={};for(var s in e)a[s]=u(e[s],t);return a}return e}function c(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(n(e))for(var r=0;r<e.length;r++)e[r]=c(e[r],t);else if("object"==typeof e)for(var o in e)e[o]=c(e[o],t);return e}t.deconstructPacket=function(e){var t=[],r=e.data,n=e;return n.data=u(r,t),n.attachments=t.length,{packet:n,buffers:t}},t.reconstructPacket=function(e,t){return e.data=c(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var r=0,a=e;!function e(u,c,l){if(!u)return u;if(i&&u instanceof Blob||s&&u instanceof File){r++;var f=new FileReader;f.onload=function(){l?l[c]=this.result:a=this.result,--r||t(a)},f.readAsArrayBuffer(u)}else if(n(u))for(var p=0;p<u.length;p++)e(u[p],p,u);else if("object"==typeof u&&!o(u))for(var d in u)e(u[d],d,u)}(a),r||t(a)}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=c(e),i=n[0],s=n[1],u=new a(function(e,t,r){return 3*(t+r)/4-r}(0,i,s)),l=0,f=s>0?i-4:i;for(r=0;r<f;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===s&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===s&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,a=[],i=16383,s=0,u=r-o;s<u;s+=i)a.push(l(e,s,s+i>u?u:s+i));1===o?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=i.length;s<u;++s)n[s]=i[s],o[i.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var o,a,i=[],s=t;s<r;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(n[(a=o)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,o){var a,i,s=8*o-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?o-1:0,p=r?-1:1,d=e[t+f];for(f+=p,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=p,l-=8);for(i=a&(1<<-l)-1,a>>=-l,l+=n;l>0;i=256*i+e[t+f],f+=p,l-=8);if(0===a)a=1-c;else{if(a===u)return i?NaN:1/0*(d?-1:1);i+=Math.pow(2,n),a-=c}return(d?-1:1)*i*Math.pow(2,a-n)},t.write=function(e,t,r,n,o,a){var i,s,u,c=8*a-o-1,l=(1<<c)-1,f=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,h=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=l):(i=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-i))<1&&(i--,u*=2),(t+=i+f>=1?p/u:p*Math.pow(2,1-f))*u>=2&&(i++,u/=2),i+f>=l?(s=0,i=l):i+f>=1?(s=(t*u-1)*Math.pow(2,o),i+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),i=0));o>=8;e[r+d]=255&s,d+=h,s/=256,o-=8);for(i=i<<o|s,c+=o;c>0;e[r+d]=255&i,d+=h,i/=256,c-=8);e[r+d-h]|=128*y}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){e.exports=r(47),e.exports.parser=r(6)},function(e,t,r){var n=r(24),o=r(5),a=r(10)("engine.io-client:socket"),i=r(28),s=r(6),u=r(20),c=r(8);function l(e,t){if(!(this instanceof l))return new l(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=u(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=u(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=l,l.priorWebsocketSuccess=!1,o(l.prototype),l.protocol=s.protocol,l.Socket=l,l.Transport=r(19),l.transports=r(24),l.parser=r(6),l.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}(this.query);t.EIO=s.protocol,t.transport=e;var r=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new n[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var e;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},l.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},l.prototype.probe=function(e){a('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),r=!1,n=this;function o(){if(n.onlyBinaryUpgrades){var o=!this.supportsBinary&&n.transport.supportsBinary;r=r||o}r||(a('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){if(!r)if("pong"===o.type&&"probe"===o.data){if(a('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,a('pausing current transport "%s"',n.transport.name),n.transport.pause((function(){r||"closed"!==n.readyState&&(a("changing transport and sending upgrade packet"),p(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())}))}else{a('probe transport "%s" failed',e);var i=new Error("probe error");i.transport=t.name,n.emit("upgradeError",i)}})))}function i(){r||(r=!0,p(),t.close(),t=null)}function s(r){var o=new Error("probe error: "+r);o.transport=t.name,i(),a('probe transport "%s" failed because of error: %s',e,r),n.emit("upgradeError",o)}function u(){s("transport closed")}function c(){s("socket closed")}function f(e){t&&e.name!==t.name&&(a('"%s" works - aborting "%s"',e.name,t.name),i())}function p(){t.removeListener("open",o),t.removeListener("error",s),t.removeListener("close",u),n.removeListener("close",c),n.removeListener("upgrading",f)}l.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",s),t.once("close",u),this.once("close",c),this.once("upgrading",f),t.open()},l.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},l.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},l.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},l.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},l.prototype.sendPacket=function(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var o={type:e,data:t,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?n():t()})):this.upgrading?n():t()}function t(){e.onClose("forced close"),a("socket closing - telling transport to close"),e.transport.close()}function r(){e.removeListener("upgrade",r),e.removeListener("upgradeError",r),t()}function n(){e.once("upgrade",r),e.once("upgradeError",r)}return this},l.prototype.onError=function(e){a("socket error %j",e),l.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},l.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~i(this.transports,e[r])&&t.push(e[r]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,r){var n=r(17),o=r(25),a=r(5),i=r(9),s=r(10)("engine.io-client:polling-xhr"),u=r(18);function c(){}function l(e){if(o.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,r=location.port;r||(r=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}}function f(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=l,e.exports.Request=f,i(l,o),l.prototype.supportsBinary=!0,l.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new f(e)},l.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),o=this;n.on("success",t),n.on("error",(function(e){o.onError("xhr post error",e)})),this.sendXhr=n},l.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},a(f.prototype),f.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new n(e),r=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(r.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?r.onLoad():setTimeout((function(){r.onError("number"==typeof t.status?t.status:0)}),0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){r.onError(e)}),0)}"undefined"!=typeof document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},f.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},f.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},f.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},f.requestsCount=0,f.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",p);else if("function"==typeof addEventListener){addEventListener("onpagehide"in u?"pagehide":"unload",p,!1)}function p(){for(var e in f.requests)f.requests.hasOwnProperty(e)&&f.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){e.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(e),a=new Uint8Array(r-t),i=t,s=0;i<r;i++,s++)a[s]=o[i];return a.buffer}},function(e,t){function r(){}e.exports=function(e,t,n){var o=!1;return n=n||r,a.count=e,0===e?t():a;function a(e,r){if(a.count<=0)throw new Error("after called too many times");--a.count,e?(o=!0,t(e),t=n):0!==a.count||o||t(null,r)}}},function(e,t){var r,n,o,a=String.fromCharCode;function i(e){for(var t,r,n=[],o=0,a=e.length;o<a;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<a?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function s(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function u(e,t){return a(e>>t&63|128)}function c(e,t){if(0==(4294967168&e))return a(e);var r="";return 0==(4294965248&e)?r=a(e>>6&31|192):0==(4294901760&e)?(s(e,t)||(e=65533),r=a(e>>12&15|224),r+=u(e,6)):0==(4292870144&e)&&(r=a(e>>18&7|240),r+=u(e,12),r+=u(e,6)),r+=a(63&e|128)}function l(){if(o>=n)throw Error("Invalid byte index");var e=255&r[o];if(o++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(e){var t,a;if(o>n)throw Error("Invalid byte index");if(o==n)return!1;if(t=255&r[o],o++,0==(128&t))return t;if(192==(224&t)){if((a=(31&t)<<6|l())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&t)){if((a=(15&t)<<12|l()<<6|l())>=2048)return s(a,e)?a:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(a=(7&t)<<18|l()<<12|l()<<6|l())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var r=!1!==(t=t||{}).strict,n=i(e),o=n.length,a=-1,s="";++a<o;)s+=c(n[a],r);return s},decode:function(e,t){var s=!1!==(t=t||{}).strict;r=i(e),n=r.length,o=0;for(var u,c=[];!1!==(u=f(s));)c.push(u);return function(e){for(var t,r=e.length,n=-1,o="";++n<r;)(t=e[n])>65535&&(o+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=a(t);return o}(c)}}},function(e,t){!function(e){"use strict";t.encode=function(t){var r,n=new Uint8Array(t),o=n.length,a="";for(r=0;r<o;r+=3)a+=e[n[r]>>2],a+=e[(3&n[r])<<4|n[r+1]>>4],a+=e[(15&n[r+1])<<2|n[r+2]>>6],a+=e[63&n[r+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a},t.decode=function(t){var r,n,o,a,i,s=.75*t.length,u=t.length,c=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var l=new ArrayBuffer(s),f=new Uint8Array(l);for(r=0;r<u;r+=4)n=e.indexOf(t[r]),o=e.indexOf(t[r+1]),a=e.indexOf(t[r+2]),i=e.indexOf(t[r+3]),f[c++]=n<<2|o>>4,f[c++]=(15&o)<<4|a>>2,f[c++]=(3&a)<<6|63&i;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){var r=void 0!==r?r:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=r&&r.prototype.append&&r.prototype.getBlob;function i(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=r.buffer}return t}return e}))}function s(e,t){t=t||{};var n=new r;return i(e).forEach((function(e){n.append(e)})),t.type?n.getBlob(t.type):n.getBlob()}function u(e,t){return new Blob(i(e),t||{})}"undefined"!=typeof Blob&&(s.prototype=Blob.prototype,u.prototype=Blob.prototype),e.exports=n?o?Blob:u:a?s:void 0},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,o=+new Date,a=o-(r||o);e.diff=a,e.prev=r,e.curr=o,r=o;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;u++;var o=t.formatters[n];if("function"==typeof o){var a=i[u];r=o.call(e,a),i.splice(u,1),u--}return r})),t.formatArgs.call(e,i);var c=n.log||t.log||console.log.bind(console);c.apply(e,i)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=o,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var a=t.instances[r];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(14),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,r){var n=r(25),o=r(9),a=r(18);e.exports=l;var i,s=/\n/g,u=/\\n/g;function c(){}function l(e){n.call(this,e),this.query=this.query||{},i||(i=a.___eio=a.___eio||[]),this.index=i.length;var t=this;i.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=c)}),!1)}o(l,n),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},l.prototype.doWrite=function(e,t){var r=this;if(!this.form){var n,o=document.createElement("form"),a=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=i,o.method="POST",o.setAttribute("accept-charset","utf-8"),a.name="d",o.appendChild(a),document.body.appendChild(o),this.form=o,this.area=a}function c(){l(),t()}function l(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=r.iframeId,n.src="javascript:0"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n}this.form.action=this.uri(),l(),e=e.replace(u,"\\\n"),this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&c()}:this.iframe.onload=c}},function(e,t,r){(function(t){var n,o,a=r(19),i=r(6),s=r(8),u=r(9),c=r(27),l=r(10)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof self&&(n=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{o=r(60)}catch(e){}var f=n||o;function p(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=n&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(f=o),a.call(this,e)}e.exports=p,u(p,a),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,r={};this.isReactNative||(r.agent=this.agent,r.perMessageDeflate=this.perMessageDeflate,r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new f(e,t):new f(e):new f(e,t,r)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},p.prototype.write=function(e){var r=this;this.writable=!1;for(var n=e.length,o=0,a=n;o<a;o++)!function(e){i.encodePacket(e,r.supportsBinary,(function(o){if(!r.usingBrowserWebSocket){var a={};if(e.options&&(a.compress=e.options.compress),r.perMessageDeflate)("string"==typeof o?t.byteLength(o):o.length)<r.perMessageDeflate.threshold&&(a.compress=!1)}try{r.usingBrowserWebSocket?r.ws.send(o):r.ws.send(o,a)}catch(e){l("websocket closed before onclose event")}--n||s()}))}(e[o]);function s(){r.emit("flush"),setTimeout((function(){r.writable=!0,r.emit("drain")}),0)}},p.prototype.onClose=function(){a.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),(e=s.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e},p.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===p.prototype.name)}}).call(this,r(16).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var r=[],n=(t=t||0)||0;n<e.length;n++)r[n-t]=e[n];return r}},function(e,t){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},function(e,t,r){"use strict";var n=r(64);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,a,i){if(i!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";r.r(t),r.d(t,"AddressDetails",(function(){return Tn})),r.d(t,"AddressFieldsSetting",(function(){return to})),r.d(t,"AddressForm",(function(){return wo})),r.d(t,"AddressList",(function(){return To})),r.d(t,"AdvancedReports",(function(){return Ro})),r.d(t,"AnalyticsBusinessFilter",(function(){return Wo})),r.d(t,"AnalyticsDriversFilter",(function(){return ia})),r.d(t,"AnalyticsStatusSubFilter",(function(){return ha})),r.d(t,"ApiKeysList",(function(){return Ca})),r.d(t,"BaseComponent",(function(){return Ia})),r.d(t,"Settings",(function(){return Na})),r.d(t,"BatchImageForm",(function(){return Xa})),r.d(t,"BusinessAndProductList",(function(){return ui})),r.d(t,"BusinessAnalytics",(function(){return mi})),r.d(t,"BusinessBasicInformation",(function(){return Ci})),r.d(t,"BusinessBrandBUSIDetail",(function(){return Li})),r.d(t,"BusinessBrandGENDetail",(function(){return Ji})),r.d(t,"BusinessBrandListing",(function(){return ts})),r.d(t,"BusinessController",(function(){return is})),r.d(t,"BusinessDeliveryZone",(function(){return ms})),r.d(t,"BusinessDetails",(function(){return xs})),r.d(t,"BusinessFormDetails",(function(){return Bs})),r.d(t,"BusinessGallery",(function(){return Js})),r.d(t,"BusinessGprsPrinters",(function(){return eu})),r.d(t,"BusinessInformation",(function(){return ou})),r.d(t,"BusinessManagerBusinesses",(function(){return Pu})),r.d(t,"BusinessList",(function(){return hu})),r.d(t,"BusinessMenu",(function(){return Uu})),r.d(t,"BusinessMenuMetaFields",(function(){return rc})),r.d(t,"BusinessMetaFields",(function(){return Bc})),r.d(t,"BusinessProductsListing",(function(){return $u})),r.d(t,"BusinessPromotionForm",(function(){return jl})),r.d(t,"BusinessPromotionList",(function(){return _l})),r.d(t,"BusinessPromotionMetaFields",(function(){return Gl})),r.d(t,"BusinessMenuOptions",(function(){return hc})),r.d(t,"BusinessMenuShare",(function(){return Cc})),r.d(t,"BusinessPaymethods",(function(){return Wc})),r.d(t,"BusinessProductsCategoyDetails",(function(){return sl})),r.d(t,"BusinessProductsCategories",(function(){return cl})),r.d(t,"BusinessProductsSearch",(function(){return fl})),r.d(t,"BusinessReviews",(function(){return Xl})),r.d(t,"BusinessReviewsList",(function(){return sf})),r.d(t,"BusinessSchedule",(function(){return yf})),r.d(t,"BusinessSharedMenuProductDetails",(function(){return Cf})),r.d(t,"BusinessSharedMenuProducts",(function(){return Ff})),r.d(t,"BusinessSortControl",(function(){return Nf})),r.d(t,"BusinessSpreadSheet",(function(){return Xf})),r.d(t,"BusinessTypeFilter",(function(){return ap})),r.d(t,"BusinessTypeDetail",(function(){return vp})),r.d(t,"BusinessWebhooks",(function(){return Ip})),r.d(t,"BusinessZoneGoogleMaps",(function(){return Lp})),r.d(t,"BusinessProductCreator",(function(){return $p})),r.d(t,"Cart",(function(){return Wp})),r.d(t,"Checkout",(function(){return od})),r.d(t,"CheckoutFieldsSetting",(function(){return dd})),r.d(t,"CheckPassword",(function(){return wd})),r.d(t,"CityList",(function(){return kd})),r.d(t,"CouponControl",(function(){return Rd})),r.d(t,"CustomerPointsWallet",(function(){return Vd})),r.d(t,"DashboardBusinessList",(function(){return oh})),r.d(t,"DashboardOrdersList",(function(){return yh})),r.d(t,"DeliveryzoneList",(function(){return Sh})),r.d(t,"DragAndDrop",(function(){return Ch})),r.d(t,"DriversCompanyDetails",(function(){return Bh})),r.d(t,"DriverGroupSetting",(function(){return Hh})),r.d(t,"UserReviewDetails",(function(){return ry})),r.d(t,"DriverTips",(function(){return iv})),r.d(t,"DriversList",(function(){return mv})),r.d(t,"DriverAnalytics",(function(){return Cv})),r.d(t,"DriversCompaniesList",(function(){return dy})),r.d(t,"DriversGroupAutoassign",(function(){return gy})),r.d(t,"DriversGroupDetails",(function(){return Ty})),r.d(t,"DriversGroupOrders",(function(){return By})),r.d(t,"DriversGroupsList",(function(){return Hy})),r.d(t,"DriversGroupLogs",(function(){return rv})),r.d(t,"EnterprisePromotionList",(function(){return Bv})),r.d(t,"EnterprisePromotionDetails",(function(){return Wv})),r.d(t,"ExamineClick",(function(){return Kv})),r.d(t,"ExportCSV",(function(){return om})),r.d(t,"FacebookLoginButton",(function(){return pm})),r.d(t,"ForgotPasswordForm",(function(){return Om})),r.d(t,"GoogleAutocompleteInput",(function(){return Tm})),r.d(t,"GoogleMaps",(function(){return Mm})),r.d(t,"GoogleMapsMap",(function(){return Rm})),r.d(t,"GpsButton",(function(){return Ym})),r.d(t,"GoogleGpsButton",(function(){return $m})),r.d(t,"Home",(function(){return rb})),r.d(t,"ImporterForm",(function(){return pb})),r.d(t,"ImporterJobForm",(function(){return Ob})),r.d(t,"ImporterListing",(function(){return _b})),r.d(t,"InvoiceBusinessManager",(function(){return Gb})),r.d(t,"InvoiceDriverManager",(function(){return Zb})),r.d(t,"LanguageManager",(function(){return sg})),r.d(t,"LanguageSelector",(function(){return hg})),r.d(t,"LanguageSetting",(function(){return jg})),r.d(t,"LanguageTransSpread",(function(){return kg})),r.d(t,"LanguageTransTable",(function(){return Ng})),r.d(t,"LoginForm",(function(){return Wg})),r.d(t,"LogisticInformation",(function(){return nO})),r.d(t,"Logistics",(function(){return fO})),r.d(t,"LogoutAction",(function(){return gO})),r.d(t,"PointsWalletBusinessDetail",(function(){return IO})),r.d(t,"MainSearch",(function(){return YO})),r.d(t,"MenuControl",(function(){return XO})),r.d(t,"MetaFields",(function(){return gw})),r.d(t,"MomentOption",(function(){return Pw})),r.d(t,"MyOrders",(function(){return Uw})),r.d(t,"MyOrdersList",(function(){return Rw})),r.d(t,"OrderList",(function(){return Kw})),r.d(t,"OrderNotification",(function(){return Qw})),r.d(t,"OrdersFilter",(function(){return uj})),r.d(t,"OrdersManage",(function(){return gj})),r.d(t,"OrdersOverview",(function(){return Aj})),r.d(t,"OrderTypeControl",(function(){return Dj})),r.d(t,"Messages",(function(){return uw})),r.d(t,"PaymentOptions",(function(){return zj})),r.d(t,"PagesList",(function(){return Kj})),r.d(t,"PageForm",(function(){return sS})),r.d(t,"PlaceList",(function(){return bS})),r.d(t,"PluginList",(function(){return AS})),r.d(t,"Popup",(function(){return US})),r.d(t,"PointsWalletLevels",(function(){return $S})),r.d(t,"PointsWalletBusinessList",(function(){return FO})),r.d(t,"ProductComponent",(function(){return tE})),r.d(t,"ProductDetatils",(function(){return pE})),r.d(t,"ProductDetailsAdvanced",(function(){return fC})),r.d(t,"ProductExtraMetaFields",(function(){return SE})),r.d(t,"ProductExtraOptions",(function(){return nP})),r.d(t,"ProductExtraOptionDetails",(function(){return LE})),r.d(t,"ProductExtraOptionMetaFields",(function(){return JE})),r.d(t,"ProductExtraSubOptionMetaFields",(function(){return hP})),r.d(t,"ProductExtras",(function(){return PP})),r.d(t,"ProductForm",(function(){return UP})),r.d(t,"ProductGallery",(function(){return $P})),r.d(t,"ProductMetaFields",(function(){return rC})),r.d(t,"ProductShare",(function(){return SC})),r.d(t,"ProductTagDetails",(function(){return kC})),r.d(t,"ProductTagsList",(function(){return qC})),r.d(t,"ProductImages",(function(){return $C})),r.d(t,"ProductIngredient",(function(){return rI})),r.d(t,"ProductOption",(function(){return nI})),r.d(t,"ProductOptionSuboption",(function(){return uI})),r.d(t,"ProductReviews",(function(){return gC})),r.d(t,"ProductsList",(function(){return pI})),r.d(t,"ProductsListing",(function(){return wI})),r.d(t,"ReportsDriverFilter",(function(){return pT})),r.d(t,"RewardsPrograms",(function(){return AI})),r.d(t,"SearchOptions",(function(){return DI})),r.d(t,"Schedule",(function(){return GI})),r.d(t,"SignupForm",(function(){return XI})),r.d(t,"SingleBusinessCard",(function(){return ZI})),r.d(t,"SingleOrderCard",(function(){return QI})),r.d(t,"SingleProductCard",(function(){return ex})),r.d(t,"SingleBusinessProduct",(function(){return FT})),r.d(t,"SingleBusinessCategory",(function(){return VT})),r.d(t,"UserFormDetails",(function(){return px})),r.d(t,"UsersExportCSV",(function(){return Ox})),r.d(t,"UpsellingPage",(function(){return xx})),r.d(t,"WrapperGoogleMaps",(function(){return Em})),r.d(t,"OrderDetails",(function(){return Bx})),r.d(t,"OrderReview",(function(){return $x})),r.d(t,"PaymentOptionCash",(function(){return TA})),r.d(t,"PaymentOptionPaypal",(function(){return FA})),r.d(t,"PaymentOptionStripe",(function(){return $A})),r.d(t,"PaymentOptionStripeDirect",(function(){return XA})),r.d(t,"PaymentOptionStripeRedirect",(function(){return rT})),r.d(t,"PhoneAutocomplete",(function(){return uA})),r.d(t,"BusinessesMap",(function(){return pA})),r.d(t,"StripeElementsForm",(function(){return PT})),r.d(t,"CardForm",(function(){return l_})),r.d(t,"StripeRedirectForm",(function(){return d_})),r.d(t,"SettingsList",(function(){return n_})),r.d(t,"CmsContent",(function(){return Qx})),r.d(t,"FloatingButton",(function(){return y_})),r.d(t,"ResetPassword",(function(){return S_})),r.d(t,"ReportsBrandFilter",(function(){return D_})),r.d(t,"ReportsAppIdFilter",(function(){return q_})),r.d(t,"ReportsDriverGroupFilter",(function(){return Q_})),r.d(t,"ReviewCustomer",(function(){return OT})),r.d(t,"SiteDetails",(function(){return lk})),r.d(t,"SitesList",(function(){return bk})),r.d(t,"Analytics",(function(){return wk})),r.d(t,"UserCashWallet",(function(){return Tk})),r.d(t,"UsersList",(function(){return zk})),r.d(t,"UserTypeFilter",(function(){return rD})),r.d(t,"UserDetails",(function(){return fD})),r.d(t,"UserMetaFields",(function(){return Zk})),r.d(t,"WebhookList",(function(){return jD})),r.d(t,"ConfigContext",(function(){return Zr})),r.d(t,"ConfigProvider",(function(){return Qr})),r.d(t,"useConfig",(function(){return en})),r.d(t,"LanguageContext",(function(){return Dr})),r.d(t,"LanguageProvider",(function(){return Ur})),r.d(t,"useLanguage",(function(){return Lr})),r.d(t,"OrderContext",(function(){return hn})),r.d(t,"OrderProvider",(function(){return yn})),r.d(t,"useOrder",(function(){return vn})),r.d(t,"BusinessContext",(function(){return gA})),r.d(t,"BusinessProvider",(function(){return OA})),r.d(t,"useBusiness",(function(){return wA})),r.d(t,"SessionContext",(function(){return fr})),r.d(t,"SessionProvider",(function(){return pr})),r.d(t,"useSession",(function(){return dr})),r.d(t,"WebsocketContext",(function(){return Sr})),r.d(t,"WebsocketProvider",(function(){return Er})),r.d(t,"useWebsocket",(function(){return Pr})),r.d(t,"ApiContext",(function(){return tr})),r.d(t,"ApiProvider",(function(){return rr})),r.d(t,"useApi",(function(){return nr})),r.d(t,"OrderingContext",(function(){return IA})),r.d(t,"OrderingProvider",(function(){return xA})),r.d(t,"EventContext",(function(){return Mr})),r.d(t,"EventProvider",(function(){return Rr})),r.d(t,"useEvent",(function(){return Nr})),r.d(t,"UtilsContext",(function(){return Sn})),r.d(t,"UtilsProviders",(function(){return En})),r.d(t,"useUtils",(function(){return Pn})),r.d(t,"ValidationFieldsContext",(function(){return Yn})),r.d(t,"ValidationFieldsProvider",(function(){return $n})),r.d(t,"useValidationFields",(function(){return Jn})),r.d(t,"CustomerContext",(function(){return co})),r.d(t,"CustomerProvider",(function(){return lo})),r.d(t,"useCustomer",(function(){return fo})),r.d(t,"ToastContext",(function(){return Un})),r.d(t,"ToastProvider",(function(){return Ln})),r.d(t,"useToast",(function(){return Fn})),r.d(t,"ToastType",(function(){return Dn}));var n,o=r(2),a=r.n(o),i=r(1),s=r.n(i),u=r(0),c=r.n(u),l=function(e){this.back_page=e.back_page,this.current_page=e.current_page,this.fisrt_page=e.fisrt_page,this.from=e.from,this.last_page=e.last_page,this.next_page=e.next_page,this.page_size=e.page_size,this.to=e.to,this.total=e.total,this.total_pages=e.total_pages},f=function(){function e(e,t,r){void 0===t&&(t={}),void 0===r&&(r=void 0),this.response=e,this.options=t,this.api=r}return Object.defineProperty(e.prototype,"content",{get:function(){var e=this;if(this.options.json){var t=this.response.data;if(200===this.response.status&&(t.pagination&&(t.pagination=new l(t.pagination)),this.options.CastClass))if(null===t.result)t.result=null;else if(Array.isArray(t.result))t.result=t.result.map((function(t){return new e.options.CastClass(t,e.api)}));else if("object"==typeof t)if("dictionary"===this.options.mode)for(var r in t.result)"object"==typeof t.result[r]&&(t.result[r]=new this.options.CastClass(t.result[r],this.api));else t.result=new this.options.CastClass(t.result,this.api);return t}return this.response.data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),e}(),p=function(){return p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)},d=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},h=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},y=function(){function e(e,t,r){void 0===r&&(r=[]),this.hidden=["original","api","hidden"],this.original=p({},e),this.api=t,this.hidden=this.hidden.concat(r)}return e.prototype.setApi=function(e){this.api=e},e.prototype.getId=function(){},e.prototype.save=function(){return d(this,void 0,void 0,(function(){var e,t,r,n=this;return h(this,(function(o){switch(o.label){case 0:if(this.api.setModelId(this.getId()),!this.api)throw new Error("You must provide the `api` to use `save` function. Example: const newModel = new Model(model, api) or newModel.setApi(api)");return e={},Object.entries(this).forEach((function(t){var r=t[0],o=t[1];n.hidden.includes(r)||o===n.original[r]||(e[r]=o)})),Object.values(e).length>0?[4,this.api.save(e)]:[3,2];case 1:return(t=o.sent().content).error||(r={},Object.entries(t.result).forEach((function(e){var t=e[0],o=e[1];n.hidden.includes(t)||(r[t]=o)})),Object.assign(this,r),this.original=p({},this)),[2,t];case 2:return[2,{error:!1,result:this}]}}))}))},e}(),v=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),m=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r)||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return v(t,e),t.prototype.getId=function(){return this.id},t}(y),b=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},g=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},O=function(){function e(e){this.attributes=[],this.query={},this.ordering=e}return e.prototype.select=function(e){return this.attributes=e,this},e.prototype.where=function(e){return this.conditions=e,this},e.prototype.setMode=function(e){return this.mode=e,this},e.prototype.asDashboard=function(){return this.setMode("dashboard"),this},e.prototype.asDictionary=function(){return this.setMode("dictionary"),this},e.prototype.parameters=function(e){return this.query=Object.assign(this.query,e),this},e.prototype.makeRequest=function(e,t,r,n,o){return b(this,void 0,void 0,(function(){var a,i;return g(this,(function(s){switch(s.label){case 0:if(a=Object.assign({CastClass:n,json:!0,api:this},o),"GET"===e&&(a.attributes=this.attributes,a.conditions=this.conditions,a.mode=this.mode,a.query||(a.query={}),Object.assign(a.query,this.query),r))for(i in r)a.query[i]=r[i];switch(e){case"GET":return[3,1];case"POST":return[3,3];case"PUT":return[3,5];case"DELETE":return[3,7]}return[3,9];case 1:return[4,this.ordering.get(t,a)];case 2:case 4:case 6:case 8:return[2,s.sent()];case 3:return[4,this.ordering.post(t,r,a)];case 5:return[4,this.ordering.put(t,r,a)];case 7:return[4,this.ordering.delete(t,a)];case 9:throw Error("The `"+e+"` methos is not supported.")}}))}))},e}(),w=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),j=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},S=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},E=function(e){function t(t,r){var n=e.call(this,t)||this;return n.languageId=r,n}return w(t,e),t.prototype.setModelId=function(e){this.languageId=e},t.prototype.get=function(e){return void 0===e&&(e={}),j(this,void 0,void 0,(function(){var t;return S(this,(function(r){switch(r.label){case 0:if(this.languageId&&this.conditions)throw new Error("The `where` function is not compatible with languages(languageId). Example ordering.languages().where(contitions).get()");return t="/languages"+(this.languageId?"/"+this.languageId:""),[4,this.makeRequest("GET",t,void 0,m,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),j(this,void 0,void 0,(function(){var r,n,o,a,i;return S(this,(function(s){switch(s.label){case 0:return r="/languages"+(this.languageId?"/"+this.languageId:""),[4,this.makeRequest(this.languageId?"PUT":"POST",r,e,m,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.languageId||(this.languageId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),j(this,void 0,void 0,(function(){var t;return S(this,(function(r){switch(r.label){case 0:if(!this.languageId)throw new Error("`languageId` is require to delete. Example: ordering.languages(languageId).delete()");return t="/languages/"+this.languageId,[4,this.makeRequest("DELETE",t,void 0,m,e)];case 1:return[2,r.sent()]}}))}))},t}(O),P=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},C=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},I=function(){function e(e){this.ordering=e}return e.prototype.auth=function(e,t){return void 0===t&&(t={json:!0,system:!0}),P(this,void 0,void 0,(function(){return C(this,(function(r){switch(r.label){case 0:return[4,this.ordering.post("/system/auth",e,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.getCode=function(e,t){return void 0===t&&(t={json:!0,system:!0}),P(this,void 0,void 0,(function(){return C(this,(function(r){switch(r.label){case 0:return[4,this.ordering.post("/system/code",e,t)];case 1:return[2,r.sent()]}}))}))},e}(),x=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),A=function(e){void 0===e&&(e={}),this.access_token=e.access_token,this.expires_in=e.expires_in,this.token_type=e.token_type},T=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r,["session","addresses"])||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),t.session&&(n.session=new A(t.session)),n}return x(t,e),t.prototype.isAdministrator=function(){return 0===this.level},t.prototype.isDriver=function(){return 4===this.level},t.prototype.isBusinessOwner=function(){return 2===this.level},t.prototype.isCustomer=function(){return 3===this.level},t.prototype.getAccessToken=function(){var e;return null===(e=this.session)||void 0===e?void 0:e.access_token},t.prototype.getId=function(){return this.id},t}(y),_=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),k=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r,[])||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return _(t,e),t.prototype.getId=function(){return this.id},t}(y),D=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),U=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},L=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},F=function(e){function t(t,r,n){void 0===n&&(n=null);var o=e.call(this,t)||this;return o.ordering=t,o.userId=r,o.addressId=n,o}return D(t,e),t.prototype.setModelId=function(e){this.addressId=e},t.prototype.get=function(e){return void 0===e&&(e={}),U(this,void 0,void 0,(function(){var t;return L(this,(function(r){switch(r.label){case 0:if(!this.userId)throw new Error("You must provide the `userId` param. Example ordering.users(userId).addresses(addressId?).get()");if(this.addressId&&this.conditions)throw new Error("The `where` function is not compatible with users(userId).addresses(addressId). Example ordering.users(userId).addresses().where(contitions).get()");return t="/users/"+this.userId+"/addresses"+(this.addressId?"/"+this.addressId:""),[4,this.makeRequest("GET",t,void 0,k,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),U(this,void 0,void 0,(function(){var r,n,o,a,i;return L(this,(function(s){switch(s.label){case 0:if(!this.userId)throw new Error("You must provide the `userId` param. Example ordering.users(userId).addresses(addressId?).save(changes)");return r="/users/"+this.userId+"/addresses"+(this.addressId?"/"+this.addressId:""),[4,this.makeRequest(this.addressId?"PUT":"POST",r,e,k,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.addressId||(this.addressId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),U(this,void 0,void 0,(function(){var t;return L(this,(function(r){switch(r.label){case 0:if(!this.userId)throw new Error("`userId` is require to delete. Example: ordering.users(userId).addresses(addressId).delete()");if(!this.addressId)throw new Error("`addressId` is require to delete. Example: ordering.users(userId).addresses(addressId).delete()");return t="/users/"+this.userId+"/addresses/"+this.addressId,[4,this.makeRequest("DELETE",t,void 0,k,e)];case 1:return[2,r.sent()]}}))}))},t}(O),B=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),M=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r,["driver"])||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return B(t,e),t}(y),R=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),N=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},z=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},G=function(e){function t(t,r){var n=e.call(this,t)||this;return n.ordering=t,n.driver_id=r,n}return R(t,e),t.prototype.setModelId=function(e){this.driver_id=e},t.prototype.get=function(e){return void 0===e&&(e={}),N(this,void 0,void 0,(function(){var t;return z(this,(function(r){switch(r.label){case 0:if(!this.driver_id)throw new Error("You must provide the `dfriver_id` param. Example ordering.users(driver_id).driverLocations().get()");if(this.driver_id&&this.conditions)throw new Error("The `where` function is not compatible with users(driver_id). Example ordering.users(driver_id).where(contitions).driverLocations().get()");return t="/users"+(this.driver_id?"/"+this.driver_id:"/locations"),[4,this.makeRequest("GET",t,void 0,M,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return N(this,void 0,void 0,(function(){var r;return z(this,(function(n){switch(n.label){case 0:if(!this.driver_id)throw new Error("You must provide the `dfriver_id` param. Example ordering.users(driver_id).driverLocations().save(changes)");if(!e.location.lat||!e.location.lng)throw new Error("You must provide the `location` param. Example ordering.users(driver_id).driverLocations().save({ lat: 10, lng: 10})");return r="/users"+(this.driver_id?"/"+this.driver_id+"/locations":""),[4,this.makeRequest("POST",r,e,M,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.delete=function(e){throw new Error("Method not implemented.")},t}(O),q=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},$=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},J=function(e){function t(t,r){void 0===r&&(r=null);var n=e.call(this,t)||this;return n.userId=r,n}return q(t,e),t.prototype.setModelId=function(e){this.userId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Y(this,void 0,void 0,(function(){var t;return $(this,(function(r){switch(r.label){case 0:if(this.userId&&this.conditions)throw new Error("The `where` function is not compatible with users(userId). Example ordering.users().where(contitions).get()");return t="/users"+(this.userId?"/"+this.userId:""),[4,this.makeRequest("GET",t,void 0,T,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Y(this,void 0,void 0,(function(){var r,n,o,a,i;return $(this,(function(s){switch(s.label){case 0:return r="/users"+(this.userId?"/"+this.userId:""),[4,this.makeRequest("POST",r,e,T,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.userId||(this.userId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Y(this,void 0,void 0,(function(){var t;return $(this,(function(r){switch(r.label){case 0:if(!this.userId)throw new Error("`userId` is require to delete. Example: ordering.users(userId).delete()");return t="/users/"+this.userId,[4,this.makeRequest("DELETE",t,void 0,T,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.auth=function(e,t){return void 0===t&&(t={}),Y(this,void 0,void 0,(function(){var r,n,o,a;return $(this,(function(i){switch(i.label){case 0:return"/auth",[4,this.makeRequest("POST","/auth",e,T,t)];case 1:return r=i.sent(),n=r.content,o=n.error,a=n.result,o||(this.userId=a.id),[2,r]}}))}))},t.prototype.logout=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Y(this,void 0,void 0,(function(){return $(this,(function(r){switch(r.label){case 0:return"/auth/logout",[4,this.makeRequest("POST","/auth/logout",e,T,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.forgotPassword=function(e,t){return void 0===t&&(t={}),Y(this,void 0,void 0,(function(){return $(this,(function(r){switch(r.label){case 0:return"/users/forgot",[4,this.makeRequest("POST","/users/forgot",e,T,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.resetPassword=function(e,t){return void 0===t&&(t={}),Y(this,void 0,void 0,(function(){return $(this,(function(r){switch(r.label){case 0:return"/users/reset",[4,this.makeRequest("POST","/users/reset",e,T,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.authFacebook=function(e,t){return void 0===t&&(t={}),Y(this,void 0,void 0,(function(){var r,n,o,a;return $(this,(function(i){switch(i.label){case 0:return"/auth/facebook",[4,this.makeRequest("POST","/auth/facebook",e,T,t)];case 1:return r=i.sent(),n=r.content,o=n.error,a=n.result,o||(this.userId=a.id),[2,r]}}))}))},t.prototype.authGoogle=function(e,t){return void 0===t&&(t={}),Y(this,void 0,void 0,(function(){var r,n,o,a;return $(this,(function(i){switch(i.label){case 0:return"/auth/google",[4,this.makeRequest("POST","/auth/google",e,T,t)];case 1:return r=i.sent(),n=r.content,o=n.error,a=n.result,o||(this.userId=a.id),[2,r]}}))}))},t.prototype.alerts=function(){var e=this;if(!this.userId)throw new Error("`userId` is require get alerts. Example: ordering.users(userId).alerts().get()");return{get:function(t){return void 0===t&&(t={}),Y(e,void 0,void 0,(function(){var e;return $(this,(function(r){switch(r.label){case 0:return e="/users/"+this.userId+"/alerts",[4,this.makeRequest("GET",e,void 0,void 0,t)];case 1:return[2,r.sent()]}}))}))}}},t.prototype.addresses=function(e){if(!this.userId)throw new Error("`userId` is require to use API addresses. Example: ordering.users(userId).addresses().get()");return new F(this.ordering,this.userId,e)},t.prototype.driverLocations=function(){if(!this.userId)throw new Error("`userId` is require to use API addresses. Example: ordering.users(userId).driverLocations().get()");return new G(this.ordering,this.userId)},t}(O),V=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),H=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r)||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return V(t,e),t.prototype.getId=function(){return this.id},t}(y),W=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),K=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},X=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Z=function(e){function t(t,r){var n=e.call(this,t)||this;return n.fieldId=r,n}return W(t,e),t.prototype.setModelId=function(e){this.fieldId=e},t.prototype.get=function(e){return void 0===e&&(e={}),K(this,void 0,void 0,(function(){var t;return X(this,(function(r){switch(r.label){case 0:if(this.fieldId&&this.conditions)throw new Error("The `where` function is not compatible with validationFields(fieldId). Example ordering.validationFields().where(contitions).get()");return t="/validationfields"+(this.fieldId?"/"+this.fieldId:""),[4,this.makeRequest("GET",t,void 0,H,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),K(this,void 0,void 0,(function(){var r,n,o,a,i;return X(this,(function(s){switch(s.label){case 0:return r="/validationfields"+(this.fieldId?"/"+this.fieldId:""),[4,this.makeRequest(this.fieldId?"PUT":"POST",r,e,H,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.fieldId||(this.fieldId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),K(this,void 0,void 0,(function(){var t;return X(this,(function(r){switch(r.label){case 0:if(!this.fieldId)throw new Error("`fieldId` is require to delete. Example: ordering.validationFields(fieldId).delete()");return t="/validationfields/"+this.fieldId,[4,this.makeRequest("DELETE",t,void 0,H,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.toType=function(e){return this.conditions=[{attribute:"validate",value:e}],this},t.prototype.toCheckout=function(){return this.toType("checkout")},t.prototype.toAddress=function(){return this.toType("address")},t}(O),Q=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ee=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r,["customer","business"])||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return Q(t,e),t.prototype.getId=function(){return this.id},Object.defineProperty(t.prototype,"subtotal",{get:function(){return this.products?this.products.reduce((function(e,t){var r=t.options.reduce((function(e,t){return e+t.suboptions.reduce((function(e,r){return e+(r.position&&"whole"!==r.position?r.half_price:r.price)*(t.allow_suboption_quantity&&r.quantity>1?r.quantity:1)}),0)}),0);return e+(t.price+r)*t.quantity}),0):0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deliveryFee",{get:function(){return this.delivery_type&&1!==this.delivery_type?0:this.delivery_zone_price},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serviceFee",{get:function(){return(this.subtotal-this.discount)*(this.service_fee/100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalTax",{get:function(){return this.subtotal*this.tax/(this.tax+100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDriverTip",{get:function(){return(this.subtotal-this.totalTax)*(this.driver_tip/100)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this.subtotal+this.serviceFee+this.deliveryFee+this.totalDriverTip+(2===this.tax_type?this.totalTax:0)-this.discount},enumerable:!1,configurable:!0}),t}(y),te=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),re=function(e){function t(t,r){void 0===t&&(t={}),void 0===r&&(r=null);var n=e.call(this,t,r)||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return te(t,e),t.prototype.getId=function(){return this.id},t}(y),ne=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oe=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},ae=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ie=function(e){function t(t,r,n){void 0===n&&(n=null);var o=e.call(this,t)||this;return o.ordering=t,o.orderId=r,o.messageId=n,o}return ne(t,e),t.prototype.setModelId=function(e){this.messageId=e},t.prototype.get=function(e){return void 0===e&&(e={}),oe(this,void 0,void 0,(function(){var t;return ae(this,(function(r){switch(r.label){case 0:if(!this.orderId)throw new Error("You must provide the `orderId` param. Example ordering.orders(orderId).messages(messageId?).get()");if(this.messageId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(orderId).messages(messageId). Example ordering.orders(orderId).messages().where(contitions).get()");return t="/orders/"+this.orderId+"/messages"+(this.messageId?"/"+this.messageId:""),[4,this.makeRequest("GET",t,void 0,re,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),oe(this,void 0,void 0,(function(){var r,n,o,a,i;return ae(this,(function(s){switch(s.label){case 0:if(!this.orderId)throw new Error("You must provide the `orderId` param. Example ordering.orders(orderId).messages(messageId?).save(changes)");if(!this.messageId)throw new Error("ordering.orders(orderId).messages(messageId).save(changes) is not implemented.");return r="/orders/"+this.orderId+"/messages"+(this.messageId?"/"+this.messageId:""),[4,this.makeRequest("POST",r,e,re,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.messageId||(this.messageId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),oe(this,void 0,void 0,(function(){var t;return ae(this,(function(r){switch(r.label){case 0:if(!this.orderId)throw new Error("ordering.orders(orderId).messages(messageId).delete() is not implemented.");if(!this.messageId)throw new Error("ordering.orders(orderId).messages(messageId).delete() is not implemented.");return t="/orders/"+this.orderId+"/messages/"+this.messageId,[4,this.makeRequest("DELETE",t,void 0,re,e)];case 1:return[2,r.sent()]}}))}))},t}(O),se=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ue=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},ce=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},le=function(e){function t(t,r){var n=e.call(this,t)||this;return n.orderId=r,n}return se(t,e),t.prototype.setModelId=function(e){this.orderId=e},t.prototype.get=function(e){return void 0===e&&(e={}),ue(this,void 0,void 0,(function(){var t;return ce(this,(function(r){switch(r.label){case 0:if(this.orderId&&this.conditions)throw new Error("The `where` function is not compatible with orders(orderId). Example ordering.orders().where(contitions).get()");return t="/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest("GET",t,void 0,ee,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),ue(this,void 0,void 0,(function(){var r,n,o,a,i;return ce(this,(function(s){switch(s.label){case 0:return r="/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest(this.orderId?"PUT":"POST",r,e,ee,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.orderId||(this.orderId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),ue(this,void 0,void 0,(function(){var t;return ce(this,(function(r){switch(r.label){case 0:if(!this.orderId)throw new Error("`orderId` is require to delete. Example: ordering.orders(orderId).delete()");return t="/orders/"+this.orderId,[4,this.makeRequest("DELETE",t,void 0,ee,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.summary=function(e){return void 0===e&&(e={}),ue(this,void 0,void 0,(function(){return ce(this,(function(t){switch(t.label){case 0:if(this.orderId)throw new Error("`orderId` is NOT require to summary API. Example: ordering.orders().summary()");return"/orders/dashboard",[4,this.makeRequest("GET","/orders/dashboard",void 0,void 0,e)];case 1:return[2,t.sent()]}}))}))},t.prototype.messages=function(e){if(!this.orderId)throw new Error("`orderId` is require to use API messages. Example: ordering.orders(orderId).messages().get()");if("number"!=typeof this.orderId)throw new Error("`orderId` must be a number to use API messages. Example: ordering.orders(orderId).messages().get()");return new ie(this.ordering,this.orderId,e)},t.prototype.reorder=function(e){return void 0===e&&(e={}),ue(this,void 0,void 0,(function(){var t;return ce(this,(function(r){switch(r.label){case 0:if(!this.orderId)throw new Error("`orderId` is require to delete. Example: ordering.orders(orderId).reorder()");return t="/orders/"+this.orderId+"/reorder",[4,this.makeRequest("POST",t,void 0,void 0,e)];case 1:return[2,r.sent()]}}))}))},t}(O),fe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pe=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r,["business"])||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return fe(t,e),t}(y),de=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),he=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},ye=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ve=function(e){function t(t,r){var n=e.call(this,t)||this;return n.orderId=r,n}return de(t,e),t.prototype.setModelId=function(e){this.orderId=e},t.prototype.get=function(e){return void 0===e&&(e={}),he(this,void 0,void 0,(function(){var t;return ye(this,(function(r){switch(r.label){case 0:if(this.orderId&&this.conditions)throw new Error("The `where` function is not compatible with controls(orderId). Example ordering.orders().where(contitions).get()");return t="/controls/orders"+(this.orderId?"/"+this.orderId:""),[4,this.makeRequest("GET",t,void 0,pe,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){throw new Error("Method not implemented.")},t.prototype.delete=function(e){throw new Error("Method not implemented.")},t}(O),me=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),be=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r,[])||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return me(t,e),t.prototype.getId=function(){return this.id},t}(y),ge=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oe=function(e){function t(t,r){void 0===t&&(t={}),void 0===r&&(r=null);var n=e.call(this,t,r)||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return ge(t,e),t.prototype.getId=function(){return this.id},t}(y),we=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),je=function(e){function t(t,r){var n;void 0===t&&(t={}),void 0===r&&(r=null);var o=e.call(this,t,r)||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];o[t]=r})),o.products=null===(n=o.products)||void 0===n?void 0:n.map((function(e){return new Oe(e)})),o}return we(t,e),t.prototype.getId=function(){return this.id},t}(y),Se=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ee=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},Pe=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ce=function(e){function t(t,r,n,o){void 0===o&&(o=null);var a=e.call(this,t)||this;return a.ordering=t,a.businessId=r,a.categoryId=n,a.productId=o,a}return Se(t,e),t.prototype.setModelId=function(e){this.productId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ee(this,void 0,void 0,(function(){var t;return Pe(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId).products(productId?).get()");if(this.productId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).categories(categoryId).products(productId). Example ordering.businesses(businessId).categories(categoryId).products().where(contitions).get()");return t="/business/"+this.businessId+"/categories/"+this.categoryId+"/products"+(this.productId?"/"+this.productId:""),[4,this.makeRequest("GET",t,void 0,Oe,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ee(this,void 0,void 0,(function(){var r,n,o,a,i;return Pe(this,(function(s){switch(s.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId).products(productId?).save(changes)");return r="/business/"+this.businessId+"/categories/"+this.categoryId+"/products"+(this.productId?"/"+this.productId:""),[4,this.makeRequest("POST",r,e,Oe,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.productId||(this.productId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ee(this,void 0,void 0,(function(){var t;return Pe(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");if(!this.categoryId)throw new Error("`categoryId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");if(!this.productId)throw new Error("`productId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).products(productId).delete()");return t="/business/"+this.businessId+"/categories/"+this.categoryId+"/products/"+this.productId,[4,this.makeRequest("DELETE",t,void 0,Oe,e)];case 1:return[2,r.sent()]}}))}))},t}(O),Ie=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xe=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},Ae=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Te=function(e){function t(t,r,n){void 0===n&&(n=null);var o=e.call(this,t)||this;return o.ordering=t,o.businessId=r,o.categoryId=n,o}return Ie(t,e),t.prototype.setModelId=function(e){this.categoryId=e},t.prototype.get=function(e){return void 0===e&&(e={}),xe(this,void 0,void 0,(function(){var t;return Ae(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId?).get()");if(this.categoryId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).categories(categoryId). Example ordering.businesses(businessId).categories().where(contitions).get()");return t="/business/"+this.businessId+"/categories"+(this.categoryId?"/"+this.categoryId:""),[4,this.makeRequest("GET",t,void 0,je,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),xe(this,void 0,void 0,(function(){var r,n,o,a,i;return Ae(this,(function(s){switch(s.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).categories(categoryId?).save(changes)");return r="/business/"+this.businessId+"/categories"+(this.categoryId?"/"+this.categoryId:""),[4,this.makeRequest("POST",r,e,je,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.categoryId||(this.categoryId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),xe(this,void 0,void 0,(function(){var t;return Ae(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).delete()");if(!this.categoryId)throw new Error("`categoryId` is require to delete. Example: ordering.businesses(businessId).categories(categoryId).delete()");return t="/business/"+this.businessId+"/categories/"+this.categoryId,[4,this.makeRequest("DELETE",t,void 0,je,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.products=function(e){if(!this.categoryId)throw new Error("`categoryId` is require to use API products. Example: ordering.businesses(businessId).categories(categoryId).products().get()");return new Ce(this.ordering,this.businessId,this.categoryId,e)},t}(O),_e=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ke=function(e){function t(t,r){var n;void 0===t&&(t={}),void 0===r&&(r=null);var o=e.call(this,t,r,["products"])||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];o[t]=r})),o.products=null===(n=o.products)||void 0===n?void 0:n.map((function(e){return new Oe(e)})),o}return _e(t,e),t.prototype.getId=function(){return this.id},t}(y),De=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ue=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},Le=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Fe=function(e){function t(t,r,n){void 0===n&&(n=null);var o=e.call(this,t)||this;return o.ordering=t,o.businessId=r,o.menuId=n,o}return De(t,e),t.prototype.setModelId=function(e){this.menuId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ue(this,void 0,void 0,(function(){var t;return Le(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).menus(menuId?).get()");if(this.menuId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId).menus(menuId). Example ordering.businesses(businessId).menus().where(contitions).get()");return t="/business/"+this.businessId+"/menus"+(this.menuId?"/"+this.menuId:""),[4,this.makeRequest("GET",t,void 0,ke,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ue(this,void 0,void 0,(function(){var r,n,o,a,i;return Le(this,(function(s){switch(s.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).menus(menuId?).save(changes)");return r="/business/"+this.businessId+"/menus"+(this.menuId?"/"+this.menuId:""),[4,this.makeRequest(this.menuId?"PUT":"POST",r,e,ke,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.menuId||(this.menuId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ue(this,void 0,void 0,(function(){var t;return Le(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).menus(menuId).delete()");if(!this.menuId)throw new Error("`menuId` is require to delete. Example: ordering.businesses(businessId).menus(menuId).delete()");return t="/business/"+this.businessId+"/menus/"+this.menuId,[4,this.makeRequest("DELETE",t,void 0,ke,e)];case 1:return[2,r.sent()]}}))}))},t}(O),Be=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Me=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},Re=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ne=function(e){function t(t,r,n){void 0===n&&(n=null);var o=e.call(this,t)||this;return o.ordering=t,o.businessId=r,o.productId=n,o}return Be(t,e),t.prototype.setModelId=function(e){this.productId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Me(this,void 0,void 0,(function(){var t;return Re(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("You must provide the `businessId` param. Example ordering.businesses(businessId).products().get()");return t="/business/"+this.businessId+"/products",[4,this.makeRequest("GET",t,void 0,Oe,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){throw void 0===t&&(t={}),new Error("Method not implemented.")},t.prototype.delete=function(e){throw void 0===e&&(e={}),new Error("Method not implemented.")},t}(O),ze=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ge=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},qe=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ye=function(e){function t(t,r){var n=e.call(this,t)||this;return n.businessId=r,n}return ze(t,e),t.prototype.setModelId=function(e){this.businessId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ge(this,void 0,void 0,(function(){var t,r,n,o,a;return qe(this,(function(i){switch(i.label){case 0:if(this.businessId&&this.conditions)throw new Error("The `where` function is not compatible with businesses(businessId). Example ordering.businesses().where(contitions).get()");return t="/business"+(this.businessId?"/"+this.businessId:""),[4,this.makeRequest("GET",t,void 0,be,e)];case 1:return r=i.sent(),n=r.content,o=n.error,a=n.result,o||this.businessId||(this.businessId=a.id),[2,r]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ge(this,void 0,void 0,(function(){var r,n,o,a,i;return qe(this,(function(s){switch(s.label){case 0:return r="/business"+(this.businessId?"/"+this.businessId:""),[4,this.makeRequest("POST",r,e,be,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.businessId||(this.businessId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ge(this,void 0,void 0,(function(){var t;return qe(this,(function(r){switch(r.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to delete. Example: ordering.businesses(businessId).delete()");return t="/business/"+this.businessId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.validateCart=function(e,t){return void 0===t&&(t={}),Ge(this,void 0,void 0,(function(){var r;return qe(this,(function(n){switch(n.label){case 0:if(!this.businessId)throw new Error("`businessId` is require to validateCart. Example: ordering.businesses(businessId).validateCart(cart)");return r="/business/"+this.businessId+"/validate_cart",[4,this.makeRequest("GET",r,e,void 0,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.products=function(){if(!this.businessId)throw new Error("`businessId` is require to products. Example: ordering.businesses(businessId).products().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API menus. Example: ordering.businesses(businessId).products().get()");return new Ne(this.ordering,this.businessId)},t.prototype.categories=function(e){if(!this.businessId)throw new Error("`businessId` is require to use API categories. Example: ordering.businesses(businessId).categories().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API categories. Example: ordering.businesses(businessId).categories().get()");return new Te(this.ordering,this.businessId,e)},t.prototype.menus=function(e){if(!this.businessId)throw new Error("`businessId` is require to use API menus. Example: ordering.businesses(businessId).menus().get()");if("number"!=typeof this.businessId)throw new Error("`businessId` must be a number to use API menus. Example: ordering.businesses(businessId).menus().get()");return new Fe(this.ordering,this.businessId,e)},t}(O),$e=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Je=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r,["business"])||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return $e(t,e),t}(y),Ve=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),He=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},We=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ke=function(e){function t(t){return e.call(this,t)||this}return Ve(t,e),t.prototype.setModelId=function(e){this.driversGroupsId=e},t.prototype.get=function(e){return void 0===e&&(e={}),He(this,void 0,void 0,(function(){var t;return We(this,(function(r){switch(r.label){case 0:if(this.driversGroupsId&&this.conditions)throw new Error("The `where` function is not compatible with orders(driversGroupsId). Example ordering.orders().where(contitions).get()");return t="/drivergroups"+(this.driversGroupsId?"/"+this.driversGroupsId:""),[4,this.makeRequest("GET",t,void 0,Je,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){throw new Error("Method not implemented.")},t.prototype.delete=function(e){throw new Error("Method not implemented.")},t}(O),Xe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ze=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r)||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return Xe(t,e),t.prototype.getId=function(){return this.id},t}(y),Qe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),et=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},tt=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},rt=function(e){function t(t,r){var n=e.call(this,t)||this;return n.configId=r,n}return Qe(t,e),t.prototype.setModelId=function(e){this.configId=e},t.prototype.get=function(e){return void 0===e&&(e={}),et(this,void 0,void 0,(function(){var t;return tt(this,(function(r){switch(r.label){case 0:if(this.configId&&this.conditions)throw new Error("The `where` function is not compatible with configs(configId). Example ordering.configs().where(contitions).get()");return t="/configs"+(this.configId?"/"+this.configId:""),[4,this.makeRequest("GET",t,void 0,Ze,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),et(this,void 0,void 0,(function(){var r,n,o,a,i;return tt(this,(function(s){switch(s.label){case 0:return r="/configs"+(this.configId?"/"+this.configId:""),[4,this.makeRequest(this.configId?"PUT":"POST",r,e,Ze,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.configId||(this.configId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),et(this,void 0,void 0,(function(){var t;return tt(this,(function(r){switch(r.label){case 0:if(!this.configId)throw new Error("`configId` is require to delete. Example: ordering.configs(configId).delete()");return t="/configs/"+this.configId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,r.sent()]}}))}))},t}(O),nt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ot=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r)||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return nt(t,e),t.prototype.getId=function(){return this.id},t}(y),at=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),it=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},st=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ut=function(e){function t(t,r){var n=e.call(this,t)||this;return n.translationId=r,n}return at(t,e),t.prototype.setModelId=function(e){this.translationId=e},t.prototype.get=function(e){return void 0===e&&(e={}),it(this,void 0,void 0,(function(){var t;return st(this,(function(r){switch(r.label){case 0:if(this.translationId&&this.conditions)throw new Error("The `where` function is not compatible with translations(translationId). Example ordering.translations().where(contitions).get()");return t="/translations"+(this.translationId?"/"+this.translationId:""),[4,this.makeRequest("GET",t,void 0,ot,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),it(this,void 0,void 0,(function(){var r,n,o,a,i;return st(this,(function(s){switch(s.label){case 0:return r="/translations"+(this.translationId?"/"+this.translationId:""),[4,this.makeRequest(this.translationId?"PUT":"POST",r,e,ot,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.translationId||(this.translationId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),it(this,void 0,void 0,(function(){var t;return st(this,(function(r){switch(r.label){case 0:if(!this.translationId)throw new Error("`translationId` is require to delete. Example: ordering.translations(translationId).delete()");return t="/translations/"+this.translationId,[4,this.makeRequest("DELETE",t,void 0,ot,e)];case 1:return[2,r.sent()]}}))}))},t}(O),ct=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lt=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r,["created_at","updated_at"])||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r,["updated_at","created_at"].includes(t)&&(n[t]=new Date(r))})),n}return ct(t,e),t.prototype.getId=function(){return this.id},t}(y),ft=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pt=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},dt=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},ht=function(e){function t(t,r){var n=e.call(this,t)||this;return n.pageId=r,n}return ft(t,e),t.prototype.setModelId=function(e){this.pageId=e},t.prototype.get=function(e){return void 0===e&&(e={}),pt(this,void 0,void 0,(function(){var t;return dt(this,(function(r){switch(r.label){case 0:if(this.pageId&&this.conditions)throw new Error("The `where` function is not compatible with pages(pageId). Example ordering.pages().where(contitions).get()");return t="/pages"+(this.pageId?"/"+this.pageId:""),[4,this.makeRequest("GET",t,void 0,lt,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),pt(this,void 0,void 0,(function(){var r,n,o,a,i;return dt(this,(function(s){switch(s.label){case 0:return r="/pages"+(this.pageId?"/"+this.pageId:""),[4,this.makeRequest(this.pageId?"PUT":"POST",r,e,lt,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.pageId||(this.pageId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),pt(this,void 0,void 0,(function(){var t;return dt(this,(function(r){switch(r.label){case 0:if(!this.pageId)throw new Error("`pageId` is require to delete. Example: ordering.pages(pageId).delete()");return t="/pages/"+this.pageId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,r.sent()]}}))}))},t}(O),yt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),vt=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r)||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return yt(t,e),t.prototype.getId=function(){return this.id},t}(y),mt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bt=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r)||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return mt(t,e),t.prototype.getId=function(){return this.id},t}(y),gt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ot=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},wt=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},jt=function(e){function t(t,r,n){void 0===n&&(n=null);var o=e.call(this,t)||this;return o.ordering=t,o.countryId=r,o.cityId=n,o}return gt(t,e),t.prototype.setModelId=function(e){this.cityId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ot(this,void 0,void 0,(function(){var t;return wt(this,(function(r){switch(r.label){case 0:if(!this.countryId)throw new Error("You must provide the `countryId` param. Example ordering.countries(countryId).cities(cityId?).get()");if(this.cityId&&this.conditions)throw new Error("The `where` function is not compatible with countries(countryId).cities(cityId). Example ordering.countries(countryId).cities().where(contitions).get()");return t="/countries/"+this.countryId+"/cities"+(this.cityId?"/"+this.cityId:""),[4,this.makeRequest("GET",t,void 0,bt,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ot(this,void 0,void 0,(function(){var r,n,o,a,i;return wt(this,(function(s){switch(s.label){case 0:if(!this.countryId)throw new Error("You must provide the `countryId` param. Example ordering.countries(countryId).cities(cityId?).save(changes)");return r="/countries/"+this.countryId+"/cities"+(this.cityId?"/"+this.cityId:""),[4,this.makeRequest(this.cityId?"PUT":"POST",r,e,bt,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.cityId||(this.cityId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ot(this,void 0,void 0,(function(){var t;return wt(this,(function(r){switch(r.label){case 0:if(!this.countryId)throw new Error("`countryId` is require to delete. Example: ordering.countries(countryId).cities(cityId).delete()");if(!this.cityId)throw new Error("`cityId` is require to delete. Example: ordering.countries(countryId).cities(cityId).delete()");return t="/countries/"+this.countryId+"/cities/"+this.cityId,[4,this.makeRequest("DELETE",t,void 0,void 0,e)];case 1:return[2,r.sent()]}}))}))},t}(O),St=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Et=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},Pt=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ct=function(e){function t(t,r){var n=e.call(this,t)||this;return n.countryId=r,n}return St(t,e),t.prototype.setModelId=function(e){this.countryId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Et(this,void 0,void 0,(function(){var t;return Pt(this,(function(r){switch(r.label){case 0:if(this.countryId&&this.conditions)throw new Error("The `where` function is not compatible with countries(countryId). Example ordering.countries().where(contitions).get()");return t="/countries"+(this.countryId?"/"+this.countryId:""),[4,this.makeRequest("GET",t,void 0,vt,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Et(this,void 0,void 0,(function(){var r,n,o,a,i;return Pt(this,(function(s){switch(s.label){case 0:return r="/countries"+(this.countryId?"/"+this.countryId:""),[4,this.makeRequest(this.countryId?"PUT":"POST",r,e,vt,t)];case 1:return n=s.sent(),o=n.content,a=o.error,i=o.result,a||this.countryId||(this.countryId=i.id),[2,n]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Et(this,void 0,void 0,(function(){var t;return Pt(this,(function(r){switch(r.label){case 0:if(!this.countryId)throw new Error("`countryId` is require to delete. Example: ordering.countries(countryId).delete()");return t="/countries/"+this.countryId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.cities=function(e){if(!this.countryId)throw new Error("`countryId` is require to use API cities. Example: ordering.countries(countryId).cities().get()");return new jt(this.ordering,this.countryId,e)},t}(O),It=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xt=function(e){function t(t,r){void 0===t&&(t={}),void 0===r&&(r=null);var n=e.call(this,t,r)||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return It(t,e),t.prototype.getId=function(){return this.id},t}(y),At=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tt=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},_t=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},kt=function(e){function t(t,r){var n=e.call(this,t)||this;return n.orderOptionId=r,n}return At(t,e),t.prototype.setModelId=function(e){this.orderOptionId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Tt(this,void 0,void 0,(function(){return _t(this,(function(t){switch(t.label){case 0:if(this.orderOptionId)throw new Error("ordering.orderOptions(orderOptionId).get() is not implemented");if(this.orderOptionId&&this.conditions)throw new Error("The `where` function is not compatible with countries(orderOptionId). Example ordering.orderOptions().where(contitions).get()");return"/order_options",[4,this.makeRequest("GET","/order_options",void 0,xt,e)];case 1:return[2,t.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Tt(this,void 0,void 0,(function(){var r,n,o,a;return _t(this,(function(i){switch(i.label){case 0:return"/order_options",[4,this.makeRequest("PUT","/order_options",e,xt,t)];case 1:return r=i.sent(),n=r.content,o=n.error,a=n.result,o||this.orderOptionId||(this.orderOptionId=a.id),[2,r]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Tt(this,void 0,void 0,(function(){var t;return _t(this,(function(r){switch(r.label){case 0:if(this.orderOptionId||!this.orderOptionId)throw new Error("ordering.orderOptions(orderOptionId).delete() is not implemented.");return t="/order_options/"+this.orderOptionId,[4,this.makeRequest("DELETE",t,void 0,null,e)];case 1:return[2,r.sent()]}}))}))},t}(O),Dt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ut=function(e){function t(t,r){void 0===t&&(t={}),void 0===r&&(r=null);var n=e.call(this,t,r)||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return Dt(t,e),t.prototype.getId=function(){return this.id},t}(y),Lt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ft=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},Bt=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Mt=function(e){function t(t,r){var n=e.call(this,t)||this;return n.cartId=r,n}return Lt(t,e),t.prototype.setModelId=function(e){this.cartId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Ft(this,void 0,void 0,(function(){var t;return Bt(this,(function(r){switch(r.label){case 0:if(this.cartId&&this.conditions)throw new Error("The `where` function is not compatible with carts(cartId). Example ordering.carts().where(contitions).get()");return t="/carts"+(this.cartId?"/"+this.cartId:""),[4,this.makeRequest("GET",t,void 0,Ut,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.getBusinesses=function(e){return void 0===e&&(e={}),Ft(this,void 0,void 0,(function(){var t;return Bt(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).getBusinesses(options).");return t="/carts/"+this.cartId+"/businesses",[4,this.makeRequest("GET",t,void 0,Ut,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.set=function(e,t){return void 0===t&&(t={}),Ft(this,void 0,void 0,(function(){var r;return Bt(this,(function(n){switch(n.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirm(options).");return r="/carts/"+this.cartId,[4,this.makeRequest("PUT",r,e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Ft(this,void 0,void 0,(function(){var e,t,r,n;return Bt(this,(function(o){switch(o.label){case 0:throw new Error("ordering.carts(cartId?).save() is not implemented.");case 1:return e=o.sent(),t=e.content,r=t.error,n=t.result,r||this.cartId||(this.cartId=n.id),[2,e]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Ft(this,void 0,void 0,(function(){return Bt(this,(function(e){switch(e.label){case 0:throw new Error("ordering.carts(cartId).delete() is not implemented.");case 1:return[2,e.sent()]}}))}))},t.prototype.addProduct=function(e,t){return void 0===t&&(t={}),Ft(this,void 0,void 0,(function(){return Bt(this,(function(r){switch(r.label){case 0:return"/carts/add_product",[4,this.makeRequest("POST","/carts/add_product",e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.removeProduct=function(e,t){return void 0===t&&(t={}),Ft(this,void 0,void 0,(function(){return Bt(this,(function(r){switch(r.label){case 0:return"/carts/remove_product",[4,this.makeRequest("POST","/carts/remove_product",e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.updateProduct=function(e,t){return void 0===t&&(t={}),Ft(this,void 0,void 0,(function(){return Bt(this,(function(r){switch(r.label){case 0:return"/carts/update_product",[4,this.makeRequest("POST","/carts/update_product",e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.applyCoupon=function(e,t){return void 0===t&&(t={}),Ft(this,void 0,void 0,(function(){return Bt(this,(function(r){switch(r.label){case 0:return"/carts/apply_coupon",[4,this.makeRequest("POST","/carts/apply_coupon",e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.changeDriverTip=function(e,t){return void 0===t&&(t={}),Ft(this,void 0,void 0,(function(){return Bt(this,(function(r){switch(r.label){case 0:return"/carts/change_driver_tip",[4,this.makeRequest("POST","/carts/change_driver_tip",e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.changePaymethod=function(e,t){return void 0===t&&(t={}),Ft(this,void 0,void 0,(function(){return Bt(this,(function(r){switch(r.label){case 0:return"/carts/change_paymethod",[4,this.makeRequest("POST","/carts/change_paymethod",e,Ut,t)];case 1:return[2,r.sent()]}}))}))},t.prototype.place=function(e,t){return void 0===t&&(t={}),Ft(this,void 0,void 0,(function(){var r;return Bt(this,(function(n){switch(n.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).place(data, options).");return r="/carts/"+this.cartId+"/place",[4,this.makeRequest("POST",r,e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.confirm=function(e){return void 0===e&&(e={}),Ft(this,void 0,void 0,(function(){var t;return Bt(this,(function(r){switch(r.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirm(options).");return t="/carts/"+this.cartId+"/confirm",[4,this.makeRequest("POST",t,{},Ut,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.confirmWithData=function(e,t){return void 0===t&&(t={}),Ft(this,void 0,void 0,(function(){var r;return Bt(this,(function(n){switch(n.label){case 0:if(!this.cartId)throw new Error("The `cartId` is required to use ordering.carts(cartId).confirmWithData(data, options).");return r="/carts/"+this.cartId+"/confirm",[4,this.makeRequest("POST",r,e,Ut,t)];case 1:return[2,n.sent()]}}))}))},t}(O),Rt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nt=function(e){function t(t,r){void 0===t&&(t={});var n=e.call(this,t,r,[])||this;return Object.entries(t).map((function(e){var t=e[0],r=e[1];n[t]=r})),n}return Rt(t,e),t}(y),zt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gt=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},qt=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Yt=function(e){function t(t,r,n,o){void 0===o&&(o=null);var a=e.call(this,t)||this;return a.ordering=t,a.businessId=r,a.userId=n,a.card_id=o,a}return zt(t,e),t.prototype.setModelId=function(e){this.businessId=e},t.prototype.get=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){var t;return qt(this,(function(r){switch(r.label){case 0:if(!this.businessId||!this.userId)throw new Error("You must provide the `businessId` and `userId` param. Example ordering.paymentCards(businessId,userId).get()");return t="/payments/stripe/cards?business_id="+this.businessId+"&user_id="+this.userId,[4,this.makeRequest("GET",t,void 0,Nt,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.save=function(e,t){return void 0===t&&(t={}),Gt(this,void 0,void 0,(function(){return qt(this,(function(e){switch(e.label){case 0:throw new Error("ordering.paymentCards(businessId,userId).save(card) is not implemented.");case 1:return[2,e.sent()]}}))}))},t.prototype.delete=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){var t;return qt(this,(function(r){switch(r.label){case 0:if(!this.card_id||!this.businessId||!this.userId)throw new Error("You must provide the `businessId`, `userId`, `cardId` param. Example ordering.paymentCards(businessId,userId,cardId).delete()");return t="/payments/stripe/cards?business_id="+this.businessId+"&user_id="+this.userId+"&card_id="+this.card_id,[4,this.makeRequest("DELETE",t,void 0,Nt,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.getCredentials=function(e){return void 0===e&&(e={}),Gt(this,void 0,void 0,(function(){return qt(this,(function(t){switch(t.label){case 0:return"/payments/stripe/credentials",[4,this.makeRequest("GET","/payments/stripe/credentials",void 0,Nt,e)];case 1:return[2,t.sent()]}}))}))},t}(O),$t=function(){return $t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$t.apply(this,arguments)},Jt=function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}u((n=n.apply(e,t||[])).next())}))},Vt=function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Ht=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},Wt=function(){function e(e){var t=void 0===e?{}:e,r=t.url,n=void 0===r?"https://apiv4.ordering.co":r,o=t.version,a=void 0===o?"v400":o,i=t.project,s=void 0===i?"demo":i,u=t.language,c=void 0===u?"en":u,l=t.accessToken,f=void 0===l?null:l,p=t.apiKey,d=void 0===p?null:p,h=t.appId,y=void 0===h?null:h;this.url=n,this.version=a,this.project=s,this.language=c,this.accessToken=f,this.apiKey=d,this.appId=y}return Object.defineProperty(e.prototype,"root",{get:function(){return this.url+"/"+this.version+"/"+this.language+"/"+this.project},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"systemRoot",{get:function(){return this.url+"/"+this.version},enumerable:!1,configurable:!0}),e.prototype.setAccessToken=function(e){return this.accessToken=e,this},e.prototype.setApiKey=function(e){return this.apiKey=e,this},e.prototype.setAppId=function(e){return this.appId=e,this},e.prototype.setUrl=function(e){return this.url=e,this},e.prototype.setProject=function(e){return this.project=e,this},e.prototype.setVersion=function(e){return this.version=e,this},e.prototype.setLanguage=function(e){return this.language=e,this},e.prototype.users=function(e){return void 0===e&&(e=null),new J(this,e)},e.prototype.orders=function(e){return void 0===e&&(e=null),new le(this,e)},e.prototype.controls=function(e){return void 0===e&&(e=null),new ve(this,e)},e.prototype.driversgroups=function(){return new Ke(this)},e.prototype.configs=function(e){return void 0===e&&(e=null),new rt(this,e)},e.prototype.businesses=function(e){return new Ye(this,e)},e.prototype.validationFields=function(e){return new Z(this,e)},e.prototype.languages=function(e){return new E(this,e)},e.prototype.translations=function(e){return new ut(this,e)},e.prototype.pages=function(e){return new ht(this,e)},e.prototype.countries=function(e){return new Ct(this,e)},e.prototype.orderOptions=function(e){return new kt(this,e)},e.prototype.carts=function(e){return new Mt(this,e)},e.prototype.paymentCards=function(e,t,r){return new Yt(this,e,t,r)},e.prototype.system=function(){return new I(this)},e.prototype.getRequestProps=function(e){var t,r=e.system?this.systemRoot:this.root,n=e.query,o=e.mode,a=e.conditions,i=e.headers,s=Ht(e,["query","mode","conditions","headers"]),u=n||{};if(u&&Object.keys(u).length>0)for(var c in u)u[c]="object"==typeof u[c]?JSON.stringify(u[c]):u[c];var l=(null===(t=null==u?void 0:u.params)||void 0===t?void 0:t.split(","))||[];(l=l.concat(e.attributes||[])).length>0&&(u.params=l.join(",")),a&&(u.where="object"==typeof a?JSON.stringify(a):a),o&&(u.mode=e.mode);var f={};return this.accessToken&&!this.apiKey&&(f.Authorization="Bearer "+this.accessToken),this.apiKey&&(f["X-Api-Key"]=this.apiKey),this.appId&&(f["X-APP-X"]=this.appId),[r,$t($t({},s),{params:u||{},headers:Object.assign(f,i||{})})]},e.prototype.makeRequest=function(e,t,r,n){return new Promise((function(o,a){var i=new window.XMLHttpRequest,s=Object.entries(n.params||{}).map((function(e){return e[0]+"="+e[1]})).join("&");i.open(e,t+(s?"?"+s:"")),Object.entries(n.headers||{}).forEach((function(e){i.setRequestHeader(e[0],e[1])})),n.cancelToken&&"object"==typeof n.cancelToken&&(n.cancelToken.cancel=function(){i.abort()}),i.onload=function(){if(this.status<500){var e=n.json?JSON.parse(this.response):this.response;o({request:this,data:e,status:this.status,statusText:this.statusText})}else a(new Error("Internal error"))},i.onerror=function(e){a(e)},n.json?(i.setRequestHeader("Content-Type","application/json"),i.send(r?JSON.stringify(r):null)):i.send()}))},e.prototype.get=function(e,t){return void 0===t&&(t={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var r,n,o,a;return Vt(this,(function(i){switch(i.label){case 0:return r=this.getRequestProps(t),n=r[0],o=r[1],[4,this.makeRequest("GET",n+e,null,o)];case 1:return a=i.sent(),[2,new f(a,t,t.api)]}}))}))},e.prototype.post=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var n,o,a,i,s;return Vt(this,(function(u){switch(u.label){case 0:if(n=this.getRequestProps(r),o=n[0],a=n[1],r.json)for(i in t)null!==t[i]&&"object"==typeof t[i]&&(t[i]=JSON.stringify(t[i]));return[4,this.makeRequest("POST",o+e,t,a)];case 1:return s=u.sent(),[2,new f(s,r,r.api)]}}))}))},e.prototype.put=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var n,o,a,i,s;return Vt(this,(function(u){switch(u.label){case 0:if(n=this.getRequestProps(r),o=n[0],a=n[1],r.json)for(i in t)null!==t[i]&&"object"==typeof t[i]&&(t[i]=JSON.stringify(t[i]));return[4,this.makeRequest("PUT",o+e,t,a)];case 1:return s=u.sent(),[2,new f(s,r,r.api)]}}))}))},e.prototype.delete=function(e,t){return void 0===t&&(t={CastClass:null,json:!0,system:!1}),Jt(this,void 0,void 0,(function(){var r,n,o,a;return Vt(this,(function(i){switch(i.label){case 0:return r=this.getRequestProps(t),n=r[0],o=r[1],[4,this.makeRequest("DELETE",n+e,null,o)];case 1:return a=i.sent(),[2,new f(a,t,t.api)]}}))}))},e}();function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(r),!0).forEach((function(t){Zt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tr=Object(i.createContext)(),rr=function(e){var t=e.settings,r=e.children,n=Qt(Object(i.useState)(Object.assign(t.api,{project:t.project,appId:t.app_id})),2),o=n[0],a=n[1],u=Qt(Object(i.useState)(new Wt(o)),2),c=u[0],l=u[1],f=Qt(Object(i.useState)(t.api.language),2),p=f[0],d=f[1];Object(i.useEffect)((function(){a(Object.assign(t.api,{project:t.project,appId:t.app_id})),l(new Wt(Object.assign(t.api,{project:t.project,appId:t.app_id})))}),[t]),Object(i.useEffect)((function(){if(c.language!==p){var e=new Wt(Xt(Xt({},o),{},{language:p}));l(e)}}),[p]);var h={setLanguage:function(e){e!==p&&d(e)}};return s.a.createElement(tr.Provider,{value:[c,h]},r)},nr=function(){return Object(i.useContext)(tr)||[{}]};function or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?or(Object(r),!0).forEach((function(t){ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sr(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ur(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){sr(a,n,o,i,s,"next",e)}function s(e){sr(a,n,o,i,s,"throw",e)}i(void 0)}))}}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fr=Object(i.createContext)(),pr=function(e){var t=e.children,r=e.strategy,n=cr(nr(),1)[0],o=cr(Object(i.useState)({auth:null,token:null,user:null,loading:!0}),2),u=o[0],c=o[1],l=function(){var e=ur(a.a.mark((function e(){var t,r,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:if(t=e.sent,r=t.auth,o=t.token,i=t.user,!o){e.next=12;break}return s={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=10,fetch("".concat(n.root,"/order_options"),s);case 10:e.sent.ok||d();case 12:c(ar(ar({},u),{},{auth:r,token:o,user:i,loading:!1}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=ur(a.a.mark((function e(){var t,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getItem("token");case 2:return t=e.sent,e.next=5,r.getItem("token");case 5:return n=e.sent,e.next=8,r.getItem("user",!0);case 8:return o=e.sent,e.abrupt("return",{auth:t,token:n,user:o});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=ur(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setItem("token",t.token);case 2:return e.next=4,r.setItem("user",t.user,!0);case 4:c(ar(ar({},u),{},{auth:!0,user:t.user,token:t.token,loading:!1}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=ur(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.removeItem("token");case 2:return e.next=4,r.removeItem("user");case 4:return e.next=6,r.removeItem("project");case 6:c(ar(ar({},u),{},{auth:!1,user:null,token:null,loading:!1}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=ur(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setItem("user",t,!0);case 2:c(ar(ar({},u),{},{user:t,loading:!1}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=ur(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:t=e.sent,r=t.token,n=t.user,r&&!u.token&&p({user:n,token:r}),!r&&u.token&&d();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=setInterval((function(){y()}),1e3);return function(){return clearInterval(e)}}),[u]),Object(i.useEffect)((function(){l()}),[]);var v={login:p,logout:d,changeUser:h};return s.a.createElement(fr.Provider,{value:[u,v]},t)},dr=function(){return Object(i.useContext)(fr)||[{},function(){}]},hr=r(32),yr=r.n(hr);function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var mr=function(){function e(t){var r=t.url,n=t.project,o=t.accessToken;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=r,this.project=n,this.accessToken=o,this.queue=[]}var t,r,n;return t=e,r=[{key:"connect",value:function(){var e=this;this.socket=yr()(this.url,{extraHeaders:{Authorization:"Bearer ".concat(this.accessToken)},query:"token=".concat(this.accessToken,"&project=").concat(this.project),transports:["websocket"]}),this.socket.on("connect",(function(){for(var t;void 0!==(t=e.queue.shift());)"on"===t.action?e.on(t.event,t.func):"join"===t.action?e.join(t.room):"leave"===t.action?e.leave(t.room):"off"===t.action&&e.off(t.room)}))}},{key:"getId",value:function(){var e;return null===(e=this.socket)||void 0===e?void 0:e.id}},{key:"close",value:function(){var e;null!==(e=this.socket)&&void 0!==e&&e.connected&&this.socket.close()}},{key:"join",value:function(e){var t;return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.emit("join","".concat(this.project,"_").concat(e)):this.queue.push({action:"join",room:e}),this}},{key:"leave",value:function(e){var t;return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.emit("leave","".concat(this.project,"_").concat(e)):this.queue.push({action:"leave",room:e}),this}},{key:"on",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.on(e,r):this.queue.push({action:"on",event:e,func:r}),this}},{key:"off",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return null!==(t=this.socket)&&void 0!==t&&t.connected?this.socket.off(e,r):this.queue.push({action:"off",event:e,func:r}),this}}],r&&vr(t.prototype,r),n&&vr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?br(Object(r),!0).forEach((function(t){Or(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):br(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Sr=Object(i.createContext)(),Er=function(e){var t=e.settings,r=e.children,n=wr(dr(),1)[0],o=wr(Object(i.useState)(),2),a=o[0],u=o[1];return Object(i.useEffect)((function(){if(!n.loading){if(n.auth&&t.url&&t.project){var e=new mr(gr(gr({},t),{},{accessToken:n.token}));u(e)}n.auth||a&&a.close()}}),[n]),Object(i.useEffect)((function(){return a&&a.connect(),function(){a&&a.close()}}),[a]),s.a.createElement(Sr.Provider,{value:a},r)},Pr=function(){return Object(i.useContext)(Sr)||new mr({})};function Cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ir(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(r),!0).forEach((function(t){xr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ar(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Tr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ar(a,n,o,i,s,"next",e)}function s(e){Ar(a,n,o,i,s,"throw",e)}i(void 0)}))}}function _r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dr=Object(i.createContext)(),Ur=function(e){var t,r=e.children,n=e.strategy,o=_r(Object(i.useState)({loading:!0,dictionary:{},languageList:[]}),2),u=o[0],c=o[1],l=function(){var e=Tr(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getItem("language",!0);case 2:(t=e.sent)&&(c((function(e){return Ir(Ir({},e),{},{language:t})})),d.setLanguage(null==t?void 0:t.code));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=_r(nr(),2),p=f[0],d=f[1],h=function(){var e=Tr(a.a.mark((function e(){var t,r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,!u.loading&&c(Ir(Ir({},u),{},{loading:!0})),e.next=4,p.translations().asDictionary().get();case 4:t=e.sent,r=t.content,n=r.error,o=r.result,c((function(e){return Ir(Ir({},e),{},{loading:!1,dictionary:n?{}:o})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c((function(e){return Ir(Ir({},e),{},{loading:!1})}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Tr(a.a.mark((function e(t){var r,o,i,s,l,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.id!==(null===(r=u.language)||void 0===r?void 0:r.id)){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,p.languages(t.id).save({default:!0});case 5:if(o=e.sent,i=o.content,s=i.error,l=i.result,s){e.next=16;break}return f={id:l.id,code:l.code,rtl:l.rtl},e.next=13,n.setItem("language",f,!0);case 13:h=u.languageList.filter((function(e){return e.id===t.id&&Object.assign(e,t),!0})),c(Ir(Ir({},u),{},{language:f,languageList:h})),d.setLanguage(null==t?void 0:t.code);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),c(Ir(Ir({},u),{},{loading:!1}));case 21:location.reload();case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Tr(a.a.mark((function e(){var t,r,o,i,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Ir(Ir({},u),{},{loading:!0})),e.next=4,p.languages().get();case 4:if(t=e.sent,r=t.content,o=r.error,i=r.result,o){e.next=15;break}return s=i.find((function(e){return e.default})),l={id:s.id,code:s.code,rtl:s.rtl},e.next=13,n.setItem("language",l,!0);case 13:d.setLanguage(null==l?void 0:l.code),c((function(e){return Ir(Ir({},e),{},{loading:!1,language:l,languageList:i})}));case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),c(Ir(Ir({},u),{},{loading:!1}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e,t;null!==(null==p?void 0:p.project)&&null!==(e=u.language)&&void 0!==e&&e.code&&(null===(t=u.language)||void 0===t?void 0:t.code)===p.language&&h()}),[null===(t=u.language)||void 0===t?void 0:t.code,null==p?void 0:p.project,p.language]),Object(i.useEffect)((function(){l(),null!==(null==p?void 0:p.project)&&v()}),[null==p?void 0:p.language,null==p?void 0:p.project]);var m={setLanguage:y,updateLanguageListState:function(e){var t=u.languageList.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));c(Ir(Ir({},u),{},{languageList:t}))},refreshTranslations:h};return s.a.createElement(Dr.Provider,{value:[u,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(null==u?void 0:u.dictionary)&&Object.keys(null==u?void 0:u.dictionary).length>0&&u.dictionary[e]||t||e},m]},r)},Lr=function(){return Object(i.useContext)(Dr)||[{},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t||e},Tr(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),Tr(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))]};function Fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Br=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._events={}}var t,r,n;return t=e,r=[{key:"on",value:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)}},{key:"off",value:function(e,t){this._events[e]&&(this._events[e]=this._events[e].filter((function(e){return e!==t})))}},{key:"emit",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(this._events[e]){var o=function(e){e.apply(void 0,r)};this._events[e].forEach(o)}}}],r&&Fr(t.prototype,r),n&&Fr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Mr=Object(i.createContext)(),Rr=function(e){var t=e.children,r=new Br;return s.a.createElement(Mr.Provider,{value:[r]},t)},Nr=function(){return Object(i.useContext)(Mr)||[new Br]},zr=r(3),Gr=r.n(zr),qr=r(4),Yr=r.n(qr);function $r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(r),!0).forEach((function(t){Vr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hr(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Wr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Hr(a,n,o,i,s,"next",e)}function s(e){Hr(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Gr.a.extend(Yr.a);var Zr=Object(i.createContext)(),Qr=function(e){var t=e.children,r=Kr(Object(i.useState)({loading:!0,configs:{}}),2),n=r[0],o=r[1],u=Kr(Lr(),1)[0],c=Kr(nr(),1)[0],l=Kr(dr(),1)[0].token,f={max_days_preorder:{key:"max_days_preorder",value:6},meters_to_change_address:{key:"meters_to_change_address",value:500},default_order_type:{key:"default_order_type",value:"delivery"},order_types_allowed:{key:"order_types_allowed",value:"1|2|3|4|5"},google_autocomplete_selection_required:{key:"google_autocomplete_selection_required",value:"true"},google_maps_api_key:{key:"google_maps_api_key",value:"AIzaSyDX5giPfK-mtbLR72qxzevCYSUrbi832Sk"},country_autocomplete:{key:"country_autocomplete",value:"*"},track_id_google_analytics:{key:"track_id_google_analytics",value:"UA-51635411-4"}},p=function(){var e=Wr(a.a.mark((function e(){var t,r,i,s,u,p,d,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,!n.loading&&o(Jr(Jr({},n),{},{loading:!0})),e.next=4,c.setAccessToken(l).configs().asDictionary().get();case 4:return i=e.sent,s=i.content,u=s.error,p=s.result,d=null,e.prev=9,e.next=12,fetch("https://ipapi.co/json/");case 12:return h=e.sent,e.next=15,h.json();case 15:d=e.sent,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),d=null;case 21:y=Jr(Jr({},f),{},{default_country_code:{value:d&&(null===(t=d)||void 0===t?void 0:t.country_code)||"US",calling_number:d&&(null===(r=d)||void 0===r?void 0:r.country_calling_code)||"+1"}},p),o(Jr(Jr({},n),{},{loading:!1,configs:u?{}:y})),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(0),o(Jr(Jr({},n),{},{loading:!1}));case 28:case"end":return e.stop()}}),e,null,[[0,25],[9,18]])})));return function(){return e.apply(this,arguments)}}(),d={refreshConfigs:p};return Object(i.useEffect)((function(){null!==(null==c?void 0:c.project)&&!u.loading&&l&&p()}),[u.loading,c,l]),s.a.createElement(Zr.Provider,{value:[n,d]},t)},en=function(){return Object(i.useContext)(Zr)||[{},Wr(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))]},tn=["carts"],rn=["carts"],nn=["carts"];function on(e){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(e)}function an(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function un(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(r),!0).forEach((function(t){cn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ln(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function fn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ln(a,n,o,i,s,"next",e)}function s(e){ln(a,n,o,i,s,"throw",e)}i(void 0)}))}}function pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Gr.a.extend(Yr.a);var hn=Object(i.createContext)(),yn=function(e){var t,r,n=e.Alert,o=e.children,u=e.strategy,c=pn(Object(i.useState)({show:!1}),2),l=c[0],f=c[1],p=pn(Object(i.useState)({show:!1}),2),d=p[0],h=p[1],y=pn(nr(),1)[0],v=pn(Lr(),2),m=v[0],b=v[1],g=Pr(),O=pn(Nr(),1)[0],w=pn(en(),1)[0],j=pn(dr(),1)[0],S={delivery:1,pickup:2,eatin:3,curbside:4,drivethru:5},E=pn(Object(i.useState)({loading:!0,options:{type:S[null==w||null===(t=w.configs)||void 0===t||null===(r=t.default_order_type)||void 0===r?void 0:r.value],moment:null},carts:{},confirmAlert:l,alert:d}),2),P=E[0],C=E[1],I=function(){var e=fn(a.a.mark((function e(){var t,r,n,o,i,s,c,l,f,p,d,v,m,b,g,O,w,S,E,I,x,A;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P.loading||C(un(un({},P),{},{loading:!0})),e.next=4,u.getItem("user-customer",!0);case 4:return t=e.sent,r=null==t?void 0:t.id,n={},r&&(n.query={user_id:r}),e.next=10,y.setAccessToken(j.token).orderOptions().get(n);case 10:return o=e.sent,i=o.content,s=i.error,c=i.result,s||(l=c.carts,f=an(c,tn),P.carts={},l.forEach((function(e){P.carts["businessId:".concat(e.business_id)]=e})),P.options=un(un({},P.options),f)),s&&h({show:!0,content:c}),e.next=18,u.getItem("options",!0);case 18:if(!(p=e.sent)){e.next=50;break}if(d={},!(Object.keys(p.address).length>0)){e.next=42;break}return m=[{attribute:"address",value:null==p||null===(v=p.address)||void 0===v?void 0:v.address}],b=r||j.user.id,e.next=26,y.setAccessToken(j.token).users(b).addresses().where(m).get();case 26:if(g=e.sent,O=g.content.result.find((function(e){var t,r,n;return p.address.internal_number=(null===(t=p.address)||void 0===t?void 0:t.internal_number)||null,p.address.zipcode=(null===(r=p.address)||void 0===r?void 0:r.zipcode)||null,p.address.address_notes=(null===(n=p.address)||void 0===n?void 0:n.address_notes)||null,e.location.lat===p.address.location.lat&&e.location.lng===p.address.location.lng&&e.internal_number===p.address.internal_number&&e.zipcode===p.address.zipcode&&e.address_notes===p.address.address_notes}))){e.next=39;break}return Object.keys(p.address).forEach((function(e){return null===p.address[e]&&delete p.address[e]})),e.next=32,y.setAccessToken(j.token).users(b).addresses().save(p.address);case 32:w=e.sent,S=w.content,E=S.error,I=S.result,E||(O=I),e.next=41;break;case 39:return e.next=41,y.setAccessToken(j.token).users(b).addresses(O.id).save({default:!0});case 41:O&&(d.address_id=O.id);case 42:return p.type&&(d.type=p.type),p.moment&&(d.moment=Gr.a.utc(p.moment,"YYYY-MM-DD HH:mm:ss").unix()),null!=p&&p.address_id&&(d.address_id=null==p?void 0:p.address_id),d&&Object.keys(d).length>0?k(d):C(un(un({},P),{},{loading:!1})),e.next=48,u.removeItem("options");case 48:e.next=51;break;case 50:C(un(un({},P),{},{loading:!1}));case 51:e.next=58;break;case 53:e.prev=53,e.t0=e.catch(0),A=null!==e.t0&&void 0!==e.t0&&null!==(x=e.t0.message)&&void 0!==x&&x.includes("Internal error")?"INTERNAL_ERROR":e.t0.message,h({show:!0,content:[A]}),C(un(un({},P),{},{loading:!1}));case 58:case"end":return e.stop()}}),e,null,[[0,53]])})));return function(){return e.apply(this,arguments)}}(),x=function(e){var t=[];return["address","address_notes","zipcode","location","internal_number"].forEach((function(r){var n,o,a,i,s;null!==(n=P.options)&&void 0!==n&&n.address&&null!==(o=P.options)&&void 0!==o&&o.address[r]?"location"===r?t.push(e[r].lat===(null===(a=P.options)||void 0===a?void 0:a.address[r].lat)&&e[r].lng===(null===(i=P.options)||void 0===i?void 0:i.address[r].lng)):t.push(e[r]===(null===(s=P.options)||void 0===s?void 0:s.address[r])):t.push(!e[r])})),t.every((function(e){return e}))},A=function(){var e=fn(a.a.mark((function e(t,r){var n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"!==on(t)){e.next=9;break}return e.next=3,u.getItem("options",!0);case 3:return n=e.sent,o=un(un(un({},P.options),n),{},{address:un(un({},null==n?void 0:n.address),t)}),e.next=7,u.setItem("options",o,!0);case 7:return C(un(un({},P),{},{options:o})),e.abrupt("return");case 9:if(!r||null==r||!r.address||x(null==r?void 0:r.address)){e.next=12;break}return k({address_id:null==r||null===(i=r.address)||void 0===i?void 0:i.id}),e.abrupt("return");case 12:if(!r||null==r||!r.isEdit){e.next=17;break}if(t===P.options.address_id){e.next=15;break}return e.abrupt("return");case 15:return k({address_id:t}),e.abrupt("return");case 17:k({address_id:t});case 18:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),T=function(){var e=fn(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=un(un({},P.options),{},{type:t}),P.options.type!==t){e.next=3;break}return e.abrupt("return");case 3:if(j.auth){e.next=7;break}return e.next=6,u.setItem("options",r,!0);case 6:C(un(un({},P),{},{options:r}));case 7:k({type:t});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=fn(a.a.mark((function e(t){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t?t.getTime()/1e3:null,n=r?Gr.a.unix(r).utc().format("YYYY-MM-DD HH:mm:ss"):null,o=un(un({},P.options),{},{moment:n}),P.options.moment!==n){e.next=5;break}return e.abrupt("return");case 5:if(j.auth){e.next=9;break}return e.next=8,u.setItem("options",o,!0);case 8:C(un(un({},P),{},{options:o}));case 9:k({moment:r});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=fn(a.a.mark((function e(t){var r,n,o,i,s,c,l,f,p,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j.auth){e.next=25;break}return e.next=3,u.getItem("user-customer",!0);case 3:return r=e.sent,n=null==r?void 0:r.id,o=un(un({},t),{},{user_id:n||j.user.id}),e.prev=6,C(un(un({},P),{},{loading:!0})),e.next=10,y.setAccessToken(j.token).orderOptions().save(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 10:return i=e.sent,s=i.content,c=s.error,l=s.result,c?h({show:!0,content:l}):(f=l.carts,p=an(l,rn),P.carts={},f.forEach((function(e){P.carts["businessId:".concat(e.business_id)]=e})),P.options=un(un({},P.options),p)),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!c);case 19:return e.prev=19,e.t0=e.catch(6),v=null!==e.t0&&void 0!==e.t0&&null!==(d=e.t0.message)&&void 0!==d&&d.includes("Internal error")?"INTERNAL_ERROR":e.t0.message,h({show:!0,content:[v]}),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=fn(a.a.mark((function e(t){var r,n,o,i,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(un(un({},P),{},{loading:!0})),e.next=4,u.getItem("user-customer",!0);case 4:return r=e.sent,n=null==r?void 0:r.id,o={product:t,user_id:n||j.user.id},e.next=9,y.setAccessToken(j.token).carts().addProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=e.sent,s=i.content,c=s.error,l=s.result,c?h({show:!0,content:l}):(P.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_product_added",t,l),O.emit("cart_updated",l),O.emit("product_added",t)),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!c);case 18:return e.prev=18,e.t0=e.catch(0),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=fn(a.a.mark((function e(t){var r,n,o,i,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(un(un({},P),{},{loading:!0})),e.next=4,u.getItem("user-customer",!0);case 4:return r=e.sent,n=null==r?void 0:r.id,o={product:{id:t.id,code:t.code,business_id:t.business_id},user_id:n||j.user.id},e.next=9,y.setAccessToken(j.token).carts().removeProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=e.sent,s=i.content,c=s.error,l=s.result,c?h({show:!0,content:l}):(P.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_product_removed",t,l),O.emit("cart_updated",l)),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!c);case 18:return e.prev=18,e.t0=e.catch(0),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=fn(a.a.mark((function e(t){var r,n,o,i,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(un(un({},P),{},{loading:!0})),e.next=4,u.getItem("user-customer",!0);case 4:return r=e.sent,n=null==r?void 0:r.id,o=JSON.stringify({uuid:t,user_id:n||j.user.id}),e.next=9,fetch("".concat(y.root,"/carts/clear"),{method:"POST",headers:{"Content-Type":"application/json","X-Socket-Id-X":null==g?void 0:g.getId(),Authorization:"Bearer ".concat(j.token)},body:o});case 9:return i=e.sent,e.next=12,i.json();case 12:return s=e.sent,c=s.error,l=s.result,c?h({show:!0,content:l}):P.carts["businessId:".concat(l.business_id)]=l,C(un(un({},P),{},{loading:!1})),e.abrupt("return",!c);case 20:return e.prev=20,e.t0=e.catch(0),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=fn(a.a.mark((function e(t){var r,n,o,i,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(un(un({},P),{},{loading:!0})),e.next=4,u.getItem("user-customer",!0);case 4:return r=e.sent,n=null==r?void 0:r.id,o={product:t,user_id:n||j.user.id},e.next=9,y.setAccessToken(j.token).carts().updateProduct(o,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return i=e.sent,s=i.content,c=s.error,l=s.result,c?h({show:!0,content:l}):(P.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_product_updated",t,l),O.emit("cart_updated",l)),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!c);case 18:return e.prev=18,e.t0=e.catch(0),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=fn(a.a.mark((function e(t){var r,n,o,i,s,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.business_id){e.next=2;break}throw new Error("`business_id` is required.");case 2:if(void 0!==t.coupon){e.next=4;break}throw new Error("`coupon` is required.");case 4:if((null===(r=P.carts["businessId:".concat(t.business_id)])||void 0===r?void 0:r.coupon)!==t.coupon){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,C(un(un({},P),{},{loading:!0})),e.next=10,u.getItem("user-customer",!0);case 10:return n=e.sent,o=null==n?void 0:n.id,i={business_id:t.business_id,coupon:t.coupon,user_id:o||j.user.id},e.next=15,y.setAccessToken(j.token).carts().applyCoupon(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 15:return s=e.sent,c=s.content,l=c.error,f=c.result,l?h({show:!0,content:f}):(P.carts["businessId:".concat(f.business_id)]=f,O.emit("cart_updated",f)),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!l);case 24:return e.prev=24,e.t0=e.catch(6),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,null,[[6,24]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=fn(a.a.mark((function e(t,r){var n,o,i,s,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("`businessId` is required.");case 2:if(r||0===r){e.next=4;break}throw new Error("`driverTipRate` is required.");case 4:if(P.carts["businessId:".concat(t)]&&(null===(n=P.carts["businessId:".concat(t)])||void 0===n?void 0:n.driver_tip_rate)!==r){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,C(un(un({},P),{},{loading:!0})),e.next=10,u.getItem("user-customer",!0);case 10:return o=e.sent,i=null==o?void 0:o.id,s={business_id:t,driver_tip_rate:r,user_id:i||j.user.id},e.next=15,y.setAccessToken(j.token).carts().changeDriverTip(s,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 15:return c=e.sent,l=c.content,f=l.error,p=l.result,f?h({show:!0,content:p}):(P.carts["businessId:".concat(p.business_id)]=p,O.emit("cart_updated",p)),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!f);case 24:return e.prev=24,e.t0=e.catch(6),C(un(un({},P),{},{loading:!1})),e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,null,[[6,24]])})));return function(t,r){return e.apply(this,arguments)}}(),R=function(){var e=fn(a.a.mark((function e(t,r){var n,o,i,s,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(un(un({},P),{},{loading:!0})),e.next=4,u.getItem("user-customer",!0);case 4:return n=e.sent,o=null==n?void 0:n.id,i=un(un({},r),{},{user_id:o||j.user.id}),e.next=9,y.setAccessToken(j.token).carts(t).place(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:if(s=e.sent,c=s.content,l=c.error,f=c.result,l){e.next=17;break}1!==f.status?(P.carts["businessId:".concat(f.business_id)]=f,O.emit("cart_updated",f)):(delete P.carts["businessId:".concat(f.business_id)],p={id:f.order.uuid,business:{name:f.business.name},total:f.total,tax_total:f.tax,delivery_zone_price:f.delivery_price},O.emit("order_placed",p)),e.next=20;break;case 17:return h({show:!0,content:f}),C(un(un({},P),{},{loading:!1})),e.abrupt("return");case 20:return C(un(un({},P),{},{loading:!1})),e.abrupt("return",{error:l,result:f});case 24:return e.prev=24,e.t0=e.catch(0),C(un(un({},P),{},{loading:!1})),e.abrupt("return",{error:!0,result:[e.t0.message]});case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(t,r){return e.apply(this,arguments)}}(),N=function(){var e=fn(a.a.mark((function e(t,r){var n,o,i,s,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(un(un({},P),{},{loading:!0})),e.next=4,u.getItem("user-customer",!0);case 4:return n=e.sent,o=null==n?void 0:n.id,i=un(un({},r),{},{user_id:o||j.user.id}),e.next=9,y.setAccessToken(j.token).carts(t).confirm(i,{headers:{"X-Socket-Id-X":null==g?void 0:g.getId()}});case 9:return s=e.sent,c=s.content,l=c.error,f=c.result,p=c.cart,l?p&&(P.carts["businessId:".concat(p.business_id)]=p,O.emit("cart_updated",p)):1!==f.status?(P.carts["businessId:".concat(f.business_id)]=f,O.emit("cart_updated",f)):delete P.carts["businessId:".concat(f.business_id)],C(un(un({},P),{},{loading:!1})),e.abrupt("return",{error:l,result:f});case 19:return e.prev=19,e.t0=e.catch(0),C(un(un({},P),{},{loading:!1})),e.abrupt("return",{error:!0,result:[e.t0.message]});case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,r){return e.apply(this,arguments)}}(),z=function(){var e=fn(a.a.mark((function e(t){var r,n,o,i,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(un(un({},P),{},{loading:!0})),e.next=4,u.getItem("user-customer",!0);case 4:return r=e.sent,n=null==r?void 0:r.id,o={headers:{"X-Socket-Id-X":null==g?void 0:g.getId()},query:{user_id:n||j.user.id}},e.next=9,y.setAccessToken(j.token).orders(t).reorder(o);case 9:return i=e.sent,s=i.content,c=s.error,l=s.result,c?h({show:!0,content:l}):(P.carts["businessId:".concat(l.business_id)]=l,O.emit("cart_added",l)),C(un(un({},P),{},{loading:!1})),e.abrupt("return",{error:c,result:l});case 18:return e.prev=18,e.t0=e.catch(0),C(un(un({},P),{},{loading:!1})),e.abrupt("return",{error:!0,result:[e.t0.message]});case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),G=pn(Object(i.useState)(null),2),q=G[0],Y=G[1],$=function(){var e=fn(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getItem("options",!0);case 2:t=e.sent,Y(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){j.loading||m.loading||j.auth&&I()}),[j.auth,j.loading,m.loading]),Object(i.useEffect)((function(){var e,t;j.loading||w.loading||(j.auth||($(),C(un(un({},P),{},{loading:!1,options:{type:(null==q?void 0:q.type)||S[null==w||null===(e=w.configs)||void 0===e||null===(t=e.default_order_type)||void 0===t?void 0:t.value],moment:(null==q?void 0:q.moment)||null,address:(null==q?void 0:q.address)||{}}}))))}),[j.auth,j.loading,w]),Object(i.useEffect)((function(){var e=function(e){1===e.status?P.carts["businessId:".concat(e.business_id)]&&delete P.carts["businessId:".concat(e.business_id)]:P.carts["businessId:".concat(e.business_id)]=un(un({},P.carts["businessId:".concat(e.business_id)]),e),C(un({},P))},t=function(e){var t=e.carts,r=an(e,nn),n={};t.forEach((function(e){n["businessId:".concat(e.business_id)]=e}));var o=un(un({},P),{},{options:un(un({},P.options),r),carts:un(un({},P.carts),n)});C(un({},o))};return g.on("carts_update",e),g.on("order_options_update",t),function(){g.off("carts_update",e),g.off("order_options_update",t)}}),[P,g]),Object(i.useEffect)((function(){var e,t;if(j.auth&&!j.loading)return g.join("carts_".concat(null==j||null===(e=j.user)||void 0===e?void 0:e.id)),g.join("orderoptions_".concat(null==j||null===(t=j.user)||void 0===t?void 0:t.id)),function(){var e,t;g.leave("carts_".concat(null==j||null===(e=j.user)||void 0===e?void 0:e.id)),g.leave("orderoptions_".concat(null==j||null===(t=j.user)||void 0===t?void 0:t.id))}}),[g,j]);var J={refreshOrderOptions:I,changeAddress:A,changeType:T,changeMoment:_,addProduct:D,removeProduct:U,updateProduct:F,clearCart:L,applyCoupon:B,changeDriverTip:M,placeCart:R,confirmCart:N,reorder:z,setAlert:h,setConfirm:f},V=JSON.parse(JSON.stringify(P));return s.a.createElement(hn.Provider,{value:[V,J]},n&&s.a.createElement(n,{open:d.show,title:b("ERROR","Error"),onAccept:function(){return h({show:!1})},onClose:function(){return h({show:!1})},content:d.content}),o)},vn=function(){var e=function(){console.warn("Must use OrderProvider to wrappe the app.")};return Object(i.useContext)(hn)||[{},{refreshOrderOptions:e,changeAddress:e,changeType:e,changeMoment:e,addProduct:e,removeProduct:e,updateProduct:e,clearCart:e,applyCoupon:e,placeCart:e,confirmCart:e,setAlert:e,setConfirm:e,changeDriverTip:e,reorder:e}]},mn=r(33),bn=r.n(mn),gn=r(34),On=r.n(gn);function wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Gr.a.extend(Yr.a),Gr.a.extend(bn.a),Gr.a.extend(On.a);var Sn=Object(i.createContext)(),En=function(e){var t=e.children,r=wn(Lr(),2),n=r[0],o=r[1],a=wn(en(),1)[0],u=function(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=parseFloat(e)||0;var i={decimal:(null==o?void 0:o.decimal)||(null===(t=a.configs.format_number_decimal_length)||void 0===t?void 0:t.value)||2,separator:(null==o?void 0:o.separator)||(null===(r=a.configs.format_number_decimal_separator)||void 0===r?void 0:r.value)||",",thousand:(null==o?void 0:o.thousand)||(null===(n=a.configs.format_number_thousand_separator)||void 0===n?void 0:n.value)||"."},s=e.toFixed(i.decimal);(s=s.toString()).indexOf(".")?s=s.replace(".",i.separator):s.indexOf(",")&&(s=s.replace(",",i.separator));var u=s.split(i.separator);return"space"===i.thousand&&(i.thousand=" "),u[0]=u[0].replace(/(.)(?=(\d{3})+$)/g,"$1"+i.thousand),s=u.join(i.separator)},c=function(e){return e>=1e9?"".concat((e/1e9).toFixed(1).replace(/\.0$/,"")).concat(o("G","G")):e>=1e6?"".concat((e/1e6).toFixed(1).replace(/\.0$/,"")).concat(o("M","M")):e>=1e3?"".concat((e/1e3).toFixed(1).replace(/\.0$/,"")).concat(o("K","K")):void 0},l={parsePrice:function(e){var t,r,n,o,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c={decimal:(null==s?void 0:s.decimal)||(null===(t=a.configs.format_number_decimal_length)||void 0===t?void 0:t.value)||2,separator:(null==s?void 0:s.separator)||(null===(r=a.configs.format_number_decimal_separator)||void 0===r?void 0:r.value)||",",thousand:(null==s?void 0:s.thousand)||(null===(n=a.configs.format_number_thousand_separator)||void 0===n?void 0:n.value)||".",currency:(null==s?void 0:s.currency)||(null===(o=a.configs.format_number_currency)||void 0===o?void 0:o.value)||"$",currencyPosition:(null==s?void 0:s.currencyPosition)||(null===(i=a.configs.currency_position)||void 0===i?void 0:i.value)||"left"},l=u(e,c);return l="left"===c.currencyPosition?c.currency+" "+l:l+" "+c.currency},parseNumber:u,parseDate:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(null==r?void 0:r.formatTime)||(null===(t=a.configs.format_time)||void 0===t?void 0:t.value)||"24",i={inputFormat:(null==r?void 0:r.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],outputFormat:(null==r?void 0:r.outputFormat)||("24"===n?"YYYY-MM-DD HH:mm":"YYYY-MM-DD hh:mm A"),utc:"boolean"!=typeof(null==r?void 0:r.utc)||(null==r?void 0:r.utc)};if(!Gr()(e,i.inputFormat).isValid())return o("INVALID_FORMAT","invalid format");var s=i.utc?Gr.a.utc(e,i.inputFormat).local():Gr()(e,i.inputFormat);return s.format(i.outputFormat)},parseTime:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"00:00";var n=(null==r?void 0:r.formatTime)||(null===(t=a.configs.format_time)||void 0===t?void 0:t.value)||"24",i={inputFormat:(null==r?void 0:r.inputFormat)||["HH:mm","hh:mm A","hh:mm"],outputFormat:(null==r?void 0:r.outputFormat)||("24"===n?"HH:mm":"hh:mm A"),utc:"boolean"!=typeof(null==r?void 0:r.utc)||(null==r?void 0:r.utc)};if(!Gr()(e,i.inputFormat).isValid())return o("INVALID_FORMAT","invalid format");var s=i.utc?Gr.a.utc(e,i.inputFormat).local():Gr()(e,i.inputFormat);return s.format(i.outputFormat)},parseDistance:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=parseFloat(e)||0;var i,s=(null==n?void 0:n.unit)||"KM";("1"===(null===(t=a.configs.distance_unit_km)||void 0===t?void 0:t.value)&&(s="KM"),null!==(r=a.configs.distance_unit)&&void 0!==r&&r.value)&&(s=null===(i=a.configs.distance_unit)||void 0===i?void 0:i.value);if("MI"===s.toUpperCase()){var l=1.621371*e;return l>=1e3?"".concat(c(l)," ").concat(o("MI","mi")):"".concat(u(l,n)," ").concat(o("MI","mi"))}return e>=1e3?"".concat(c(e)," ").concat(o("KM","km")):"".concat(u(e,n)," ").concat(o("KM","km"))},parseShortenDistance:c,getTimeAgo:function(e,t){if(!e)return"NN";var r={inputFormat:(null==t?void 0:t.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],utc:"boolean"!=typeof(null==t?void 0:t.utc)||(null==t?void 0:t.utc)};return Gr()(e,r.inputFormat).isValid()?(r.utc?Gr.a.utc(e,r.inputFormat).local():Gr()(e,r.inputFormat)).fromNow():o("INVALID_FORMAT","invalid format")},getTimeTo:function(e,t){if(!e)return"NN";var r={inputFormat:(null==t?void 0:t.inputFormat)||["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD hh:mm:ss A","YYYY-MM-DD hh:mm:ss"],utc:"boolean"!=typeof(null==t?void 0:t.utc)||(null==t?void 0:t.utc)};return Gr()(e,r.inputFormat).isValid()?(r.utc?Gr.a.utc(e,r.inputFormat).local():Gr()(e,r.inputFormat)).toNow():o("INVALID_FORMAT","invalid format")},optimizeImage:function(e,t,r){if(!e&&r)return r;if(t=t&&t.length>0?",".concat(t):"",null!=e&&-1!==e.indexOf("res.cloudinary.com")){var n=e.split("upload");e="".concat(n[0],"upload/f_auto,q_auto").concat(t).concat(n[1])}return e},getOrderState:function(e){switch(e){case 0:return o("PENDING","Pending");case 1:return o("COMPLETED_BY_ADMIN","Completed by admin");case 2:return o("REJECTED_BY_ADMIN","Rejected by admin");case 3:return o("ORDER_STATUS_IN_BUSINESS","Driver arrived to business");case 4:return o("PREPARATION_COMPLETED","Preparation Completed");case 5:return o("REJECTED_BY_BUSINESS","Rejected by business");case 6:return o("REJECTED_BY_DRIVER","Rejected by driver");case 7:return o("ACCEPTED_BY_BUSINESS","Accepted by business");case 8:return o("ACCEPTED_BY_DRIVER","Accepted by driver");case 9:return o("PICK_UP_COMPLETED_BY_DRIVER","Pick up completed by driver");case 10:return o("PICK_UP_FAILED_BY_DRIVER","Pick up Failed by driver");case 11:return o("DELIVERY_COMPLETED_BY_DRIVER","Delivery completed by driver");case 12:return o("DELIVERY_FAILED_BY_DRIVER","Delivery Failed by driver");case 13:return o("PREORDER","Preorder");case 14:return o("ORDER_NOT_READY","Order not ready");case 15:return o("ORDER_PICKEDUP_COMPLETED_BY_CUSTOMER","Pickup completed by customer");case 16:return o("ORDER_STATUS_CANCELLED_BY_CUSTOMER","Cancelled by customer");case 17:return o("ORDER_NOT_PICKEDUP_BY_CUSTOMER","Not picked by customer");case 18:return o("ORDER_DRIVER_ALMOST_ARRIVED_BUSINESS","Driver almost arrived to business");case 19:return o("ORDER_DRIVER_ALMOST_ARRIVED_CUSTOMER","Driver almost arrived to customer");case 20:return o("ORDER_CUSTOMER_ALMOST_ARRIVED_BUSINESS","Customer almost arrived to business");case 21:return o("ORDER_CUSTOMER_ARRIVED_BUSINESS","Customer arrived to business");default:return"N/A"}}};return Object(i.useEffect)((function(){var e;n.loading||(e={name:"auto",weekdays:[o("DAY7","Sunday"),o("DAY1","Monday"),o("DAY2","Tuesday"),o("DAY3","Wednesday"),o("DAY4","Thursday"),o("DAY5","Friday"),o("DAY6","Saturday")],months:[o("MONTH1","January"),o("MONTH2","February"),o("MONTH3","March"),o("MONTH4","April"),o("MONTH5","May"),o("MONTH6","June"),o("MONTH7","July"),o("MONTH8","August"),o("MONTH9","September"),o("MONTH10","October"),o("MONTH11","November"),o("MONTH12","December")],ordinal:function(e){return"".concat(e,"º")},relativeTime:{future:o("RELATIVE_TIME_IN","in %s"),past:o("RELATIVE_TIME_AGO","%s ago"),s:o("RELATIVE_TIME_FEW_SECONDS ","a few seconds"),m:o("RELATIVE_TIME_MINUTES","a minute"),mm:o("RELATIVE_TIME_MINUTES","%d minutes"),h:o("RELATIVE_TIME_HOUR","an hour"),hh:o("RELATIVE_TIME_HOURS","%d hours"),d:o("RELATIVE_TIME_DAY","a day"),dd:o("RELATIVE_TIME_DAYS","%d days"),M:o("RELATIVE_TIME_MONTH","a month"),MM:o("RELATIVE_TIME_MONTHS","%d months"),y:o("RELATIVE_TIME_YEAR","a year"),yy:o("RELATIVE_TIME_YEARS","%d years")},meridiem:function(e,t,r){return e>12?o("PM","PM"):o("AM","AM")}},Gr.a.locale("auto",e),Gr.a.updateLocale("auto",e))}),[n]),s.a.createElement(Sn.Provider,{value:[l]},t)},Pn=function(){return Object(i.useContext)(Sn)||[{},function(){}]};function Cn(){return Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cn.apply(this,arguments)}function In(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return An(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return An(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Tn=function(e){var t,r=e.apiKey,n=e.UIComponent,o=e.mapConfigs,u=xn(vn(),1)[0],c=xn(Pn(),1)[0].optimizeImage,l=xn(en(),1)[0].configs,f=r||(null==l||null===(t=l.google_maps_api_key)||void 0===t?void 0:t.value),p={},d=xn(Object(i.useState)(null),2),h=d[0],y=d[1],v=xn(Object(i.useState)(null),2),m=v[0],b=v[1],g=xn(nr(),1)[0],O=function(){var t,r=(t=a.a.mark((function t(){var r,n,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={},p.business=r,t.next=5,g.businesses(e.businessId).select(["location","logo"]).get({cancelToken:r});case 5:n=t.sent,o=n.content.result,b(o.logo),y(o.location),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){In(a,n,o,i,s,"next",e)}function s(e){In(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(i.useEffect)((function(){return e.location&&e.businessLogo?(y(e.location),b(e.businessLogo)):O(),function(){p.business&&p.business.cancel()}}),[]),s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,Cn({},e,{googleMapsUrl:function(t){var r,n,a,i,s,l,p=e.orderLocation||(null==u||null===(r=u.options)||void 0===r||null===(n=r.address)||void 0===n?void 0:n.location);return 1===u.options.type?"https://maps.googleapis.com/maps/api/staticmap?size=".concat((null==o||null===(a=o.mapSize)||void 0===a?void 0:a.width)||500,"x").concat((null==o||null===(i=o.mapSize)||void 0===i?void 0:i.height)||190,"&center=").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&zoom=").concat((null==o?void 0:o.mapZoom)||15,"&scale=2&maptype=roadmap&markers=icon:%7Ccolor:red%7C").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&key=").concat(f):"https://maps.googleapis.com/maps/api/staticmap?size=".concat((null==o||null===(s=o.mapSize)||void 0===s?void 0:s.width)||500,"x").concat((null==o||null===(l=o.mapSize)||void 0===l?void 0:l.height)||190,"&scale=2&maptype=roadmap&markers=icon:%7Ccolor:red%7C").concat(null==p?void 0:p.lat,",").concat(null==p?void 0:p.lng,"&markers=icon:").concat(c(m,"w_60,h_60,r_max"),"%7Ccolor:white%7C").concat(null==t?void 0:t.lat,",").concat(null==t?void 0:t.lng,"&key=").concat(f)}(h)})))};function _n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Tn.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Tn.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Dn={Info:"INFO",Error:"ERROR",Success:"SUCCESS"},Un=i.createContext(null),Ln=function(e){var t=e.children,r=_n(i.useState(null),2),n=r[0],o=r[1];return i.createElement(Un.Provider,{value:[n,{showToast:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;o({type:e,message:t,duration:r})},hideToast:function(){o(null)}}]},t)};function Fn(){return i.useContext(Un)||[{},function(){}]}function Bn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(r),!0).forEach((function(t){Rn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nn(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function zn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Nn(a,n,o,i,s,"next",e)}function s(e){Nn(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Yn=Object(i.createContext)(),$n=function(e){var t=e.children,r=Gn(nr(),1)[0],n=Gn(Object(i.useState)({loading:!0,fields:{}}),2),o=n[0],u=n[1],c=function(e,t){e.forEach((function(e){t["mobile_phone"===e.code?"cellphone":e.code]=e}))},l=function(){var e=zn(a.a.mark((function e(){var t,n,i,s,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.validationFields().get();case 3:t=e.sent,n=t.content,i=n.result,s=n.error,l={},f={},s||(c(i.filter((function(e){return"checkout"===e.validate})),l),c(i.filter((function(e){return"address"===e.validate})),f)),u({loading:!1,fields:{checkout:l,address:f}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),u(Mn(Mn({},o),{},{loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),f={loadValidationFields:l};return Object(i.useEffect)((function(){null!=r&&r.project&&l()}),[null==r?void 0:r.project]),s.a.createElement(Yn.Provider,{value:[o,f]},t)},Jn=function(){return Object(i.useContext)(Yn)||[{},zn(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))]};function Vn(){return Vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vn.apply(this,arguments)}function Hn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(r),!0).forEach((function(t){Kn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xn(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Zn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Xn(a,n,o,i,s,"next",e)}function s(e){Xn(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Qn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return eo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var to=function(e){var t=e.UIComponent,r=Qn(nr(),1)[0],n=Qn(Fn(),2)[1].showToast,o=Qn(Lr(),2)[1],u=Qn(Jn(),2)[1].loadValidationFields,c=Qn(Object(i.useState)({fields:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=Qn(Object(i.useState)({loading:!1,error:null}),2),d=p[0],h=p[1],y=function(){var e=Zn(a.a.mark((function e(){var t,n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Wn(Wn({},l),{},{loading:!0})),t=[{attribute:"validate",value:"address"}],e.next=5,r.validationFields().where(t).get();case 5:n=e.sent,o=n.content,i=o.result,o.error||(s=i.filter((function(e){return"city_dropdown_option"!==e.code&&"name"!==e.code&&"lastname"!==e.code&&"mobile_phone"!==e.code&&"email"!==e.code&&"middle_name"!==e.code&&"second_lastname"!==e.code})),f({fields:s,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(Wn(Wn({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Zn(a.a.mark((function e(t,i){var s,c,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(Dn.Info,o("LOADING","Loading")),h(Wn(Wn({},d),{},{loading:!0})),e.next=5,r.validationFields(t).save(i);case 5:s=e.sent,c=s.content,p=c.result,c.error?h({loading:!1,error:p}):(h({loading:!1,error:null}),n(Dn.Success,o("FIELD_SAVED","Field saved")),y=l.fields.filter((function(e){return e.id===t&&Object.assign(e,p),!0})),f(Wn(Wn({},l),{},{fields:y})),u&&u()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Vn({},e,{addressFieldsState:l,handleChangeFieldSetting:v})))};function ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function no(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(r),!0).forEach((function(t){oo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ao(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function io(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ao(a,n,o,i,s,"next",e)}function s(e){ao(a,n,o,i,s,"throw",e)}i(void 0)}))}}function so(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}to.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},to.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var co=Object(i.createContext)(),lo=function(e){var t=e.children,r=e.strategy,n=so(Object(i.useState)({loading:!1,user:null}),2),o=n[0],u=n[1],c=function(){var e=io(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getItem("user-customer",!0);case 2:(t=e.sent)&&u(no(no({},o),{},{user:t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=io(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!t){e.next=3;break}return e.next=3,r.setItem("user-customer",t,!0);case 3:u(no(no({},o),{},{user:t}));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),f=function(){var e=io(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,r.removeItem("user-customer");case 3:u(no(no({},o),{},{user:null}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p={setUserCustomer:l,deleteUserCustomer:f};return Object(i.useEffect)((function(){c()}),[]),s.a.createElement(co.Provider,{value:[o,p]},t)},fo=function(){return Object(i.useContext)(co)||[{},function(){}]};function po(){return po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},po.apply(this,arguments)}function ho(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(r),!0).forEach((function(t){vo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ho(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mo(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function bo(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){mo(a,n,o,i,s,"next",e)}function s(e){mo(a,n,o,i,s,"throw",e)}i(void 0)}))}}function go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wo=function(e){var t=e.UIComponent,r=e.addressId,n=e.address,o=e.useValidationFileds,u=e.onSaveAddress,c=go(nr(),1)[0],l=go(Jn(),1)[0],f=go(Object(i.useState)({loading:!1,error:null,address:n||{}}),2),p=f[0],d=f[1],h=go(Object(i.useState)({loading:!1,changes:{},error:null}),2),y=h[0],v=h[1],m=go(dr(),1)[0],b=m.user,g=m.token,O={},w=e.userId||(null==b?void 0:b.id),j=e.accessToken||g,S=go(fo(),2)[1].setUserCustomer,E=go(Object(i.useState)(!1),2),P=(E[0],E[1]),C=function(){var e=bo(a.a.mark((function e(t,r){var n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(yo(yo({},p),{},{loading:!0})),n={},O.address=n,e.next=6,c.users(t).addresses(r).get({accessToken:j,cancelToken:n});case 6:o=e.sent,i=o.content,d({loading:!1,error:i.error?i.result:null,address:i.error?{}:i.result}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&d({loading:!1,error:[e.t0.message],address:{}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}(),I=function(e){v(yo(yo({},y),{},{changes:yo(yo({},y.changes),e)}))},x=function(){var e=bo(a.a.mark((function e(t,r){var n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r&&S(r,!0),v(yo(yo({},y),{},{loading:!0})),e.prev=2,e.next=5,c.users(w).addresses(null===(n=p.address)||void 0===n?void 0:n.id).save(yo(yo({},t),y.changes),{accessToken:j});case 5:o=e.sent,i=o.content,v(yo(yo({},y),{},{loading:!1,error:i.error?i.result:null,changes:i.error?y.changes:{}})),i.error||(d(yo(yo({},p),{},{address:i.result})),u&&u(i.result)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),v(yo(yo({},y),{},{loading:!1,error:[e.t0.message],address:{}}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){d(yo(yo({},p),{},{address:n||{}}))}),[n]),Object(i.useEffect)((function(){r&&!n&&C(w,r)}),[]),Object(i.useEffect)((function(){return function(){O.address&&O.address.cancel()}}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,po({},e,{formState:y,showField:function(e){var t,r,n;return!o||!l.loading&&!(null!==(t=l.fields)&&void 0!==t&&t.address[e])||!l.loading&&(null===(r=l.fields)||void 0===r?void 0:r.address[e])&&(null===(n=l.fields)||void 0===n?void 0:n.address[e].enabled)},updateChanges:I,handleChangeInput:function(e){I(vo({},e.target.name,e.target.value))},isRequiredField:function(e){var t,r,n;return o&&!l.loading&&(null===(t=l.fields)||void 0===t?void 0:t.address[e])&&(null===(r=l.fields)||void 0===r?void 0:r.address[e].enabled)&&(null===(n=l.fields)||void 0===n?void 0:n.address[e].required)},saveAddress:x,addressState:p,setIsEdit:function(e){return P(e)}})))};function jo(){return jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jo.apply(this,arguments)}function So(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Eo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?So(Object(r),!0).forEach((function(t){Po(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):So(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Po(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Co(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Io(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Co(a,n,o,i,s,"next",e)}function s(e){Co(a,n,o,i,s,"throw",e)}i(void 0)}))}}function xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ao(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ao(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ao(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}wo.propTypes={UIComponent:c.a.elementType,isSelectedAfterAdd:c.a.bool,useValidationFileds:c.a.bool,address:c.a.object,userId:c.a.number,addressId:c.a.number,onSaveAddress:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wo.defaultProps={useValidationFileds:!1,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var To=function(e){var t=e.UIComponent,r=e.changeOrderAddressWithDefault,n=e.handleClickSetDefault,o=e.handleClickDelete,u=e.handleSuccessUpdate,c=e.userState,l=xo(nr(),1)[0],f=xo(dr(),1)[0],p=f.user,d=f.token,h=xo(fo(),2)[1].setUserCustomer,y=e.userId||(null==p?void 0:p.id),v=e.accessToken||d;if(!y)throw new Error("`userId` must provide from props or use SessionProviver to wrappe the app.");if(!v)throw new Error("`accessToken` must provide from props or use SessionProviver to wrappe the app.");var m=xo(Object(i.useState)({loading:!1,error:null,addresses:[]}),2),b=m[0],g=m[1],O=xo(Object(i.useState)({loading:!1,error:null}),2),w=O[0],j=O[1],S=xo(vn(),2)[1].changeAddress,E={},P=function(){var e=Io(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Eo(Eo({},b),{},{loading:!0})),t={},E.list=t,e.next=6,l.setAccessToken(v).users(y).addresses().get({cancelToken:t});case 6:r=e.sent,n=r.content,g({loading:!1,error:n.error?n.result:null,addresses:n.error?[]:n.result}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&g(Eo(Eo({},b),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){if(null==e||!e.addresses)return P(),function(){E.list&&E.list.cancel()};g(Eo(Eo({},b),{},{addresses:e.addresses}))}),[e.addresses]);var C=function(){var e=Io(a.a.mark((function e(t,o){var i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&h(o,!0),!n){e.next=3;break}return e.abrupt("return",n(t));case 3:return e.prev=3,j(Eo(Eo({},w),{},{loading:!0})),e.next=7,l.setAccessToken(v).users(y).addresses(t.id).save({default:!0});case 7:i=e.sent,s=i.content,j({loading:!1,error:s.error?s.result:null}),!s.error&&s.result.default&&(b.addresses.map((function(e){return e.default=e.id===t.id,e})),r&&S(s.result.id),g(Eo({},b))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),j(Eo(Eo({},w),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,r){return e.apply(this,arguments)}}(),I=function(){var e=Io(a.a.mark((function e(t){var r,n,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return",o(t));case 2:return e.prev=2,j(Eo(Eo({},w),{},{loading:!0})),e.next=6,l.users(y).addresses(t.id).delete({accessToken:v});case 6:r=e.sent,n=r.content,j({loading:!1,error:n.error?n.result:null}),n.error||(i=b.addresses.filter((function(e){return e.id!==t.id})),g(Eo(Eo({},b),{},{addresses:i})),u&&(s=Eo(Eo({},c.user),{},{addresses:i}),u(s))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),j(Eo(Eo({},w),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,jo({},e,{addressList:b,setAddressList:g,actionStatus:w,handleSetDefault:C,handleDelete:I})))};function _o(){return _o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_o.apply(this,arguments)}function ko(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Do(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(r),!0).forEach((function(t){Uo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ko(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Uo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lo(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Fo(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Lo(a,n,o,i,s,"next",e)}function s(e){Lo(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Bo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}To.propTypes={UIComponent:c.a.elementType,handleClickAddress:c.a.func,handleClickSetDefault:c.a.func,handleClickDelete:c.a.func,userId:c.a.number,accessToken:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},To.defaultProps={changeOrderAddressWithDefault:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ro=function(e){var t=e.UIComponent,r=e.endpoint,n=e.endpoint1,o=Bo(nr(),1)[0],u=Bo(dr(),1)[0],c=u.token,l=u.loading,f=Bo(Object(i.useState)({content:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=Bo(Object(i.useState)({content:[],loading:!1,error:null}),2),y=h[0],v=h[1],m=Bo(Object(i.useState)({from:"",to:"",businessIds:null,drivers_ids:null,franchises_id:null,driver_companies_ids:null,driver_groups_ids:null,delivery_types_ids:null,app_ids:null}),2),b=m[0],g=m[1],O=function(){var e=Fo(a.a.mark((function e(){var t,n,i,s,u,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(Do(Do({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},n="",""!==(null==b?void 0:b.from)&&""!==(null==b?void 0:b.to)&&(n="from=".concat(Gr()(null==b?void 0:b.from).format("YYYY-MM-DD")," 00:00:00&to=").concat(Gr()(null==b?void 0:b.to).format("YYYY-MM-DD")," 23:59:59")),null!=b&&b.businessIds&&(null==b?void 0:b.businessIds.length)>0&&(n="".concat(n,"&businesses_ids=").concat(JSON.stringify(null==b?void 0:b.businessIds))),null!=b&&b.drivers_ids&&(null==b?void 0:b.drivers_ids.length)>0&&(n="".concat(n,"&drivers_ids=").concat(JSON.stringify(null==b?void 0:b.drivers_ids))),null!=b&&b.franchises_id&&(null==b?void 0:b.franchises_id.length)>0&&(n="".concat(n,"&franchises_id=").concat(JSON.stringify(null==b?void 0:b.franchises_id))),null!=b&&b.driver_companies_ids&&(null==b?void 0:b.driver_companies_ids.length)>0&&(n="".concat(n,"&driver_companies_ids=").concat(JSON.stringify(null==b?void 0:b.driver_companies_ids))),null!=b&&b.driver_groups_ids&&(null==b?void 0:b.driver_groups_ids.length)>0&&(n="".concat(n,"&driver_groups_ids=").concat(JSON.stringify(null==b?void 0:b.driver_groups_ids))),null!=b&&b.delivery_types_ids&&(null==b?void 0:b.delivery_types_ids.length)>0&&(n="".concat(n,"&delivery_types_ids=").concat(JSON.stringify(null==b?void 0:b.delivery_types_ids))),null!=b&&b.app_ids&&(null==b?void 0:b.app_ids.length)>0&&(n="".concat(n,"&app_ids=").concat(JSON.stringify(null==b?void 0:b.app_ids))),i="".concat(o.root,"/reports/").concat(r,"?").concat(n),e.next=17,fetch(i,t);case 17:return s=e.sent,e.next=20,s.json();case 20:u=e.sent,f=u.error,h=u.result,d(Do(Do({},p),{},f?{loading:!1,error:h}:{loading:!1,content:h})),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(2),d(Do(Do({},p),{},{loading:!1,error:e.t0}));case 29:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Fo(a.a.mark((function e(){var t,r,i,s,u,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(Do(Do({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},r="",""!==(null==b?void 0:b.from)&&""!==(null==b?void 0:b.to)&&(r="from=".concat(Gr()(null==b?void 0:b.from).format("YYYY-MM-DD")," 00:00:00&to=").concat(Gr()(null==b?void 0:b.to).format("YYYY-MM-DD")," 23:59:59")),null!=b&&b.businessIds&&(null==b?void 0:b.businessIds.length)>0&&(r="".concat(r,"&businesses_ids=").concat(JSON.stringify(null==b?void 0:b.businessIds))),null!=b&&b.drivers_ids&&(null==b?void 0:b.drivers_ids.length)>0&&(r="".concat(r,"&drivers_ids=").concat(JSON.stringify(null==b?void 0:b.drivers_ids))),null!=b&&b.franchises_id&&(null==b?void 0:b.franchises_id.length)>0&&(r="".concat(r,"&franchises_id=").concat(JSON.stringify(null==b?void 0:b.franchises_id))),null!=b&&b.driver_companies_ids&&(null==b?void 0:b.driver_companies_ids.length)>0&&(r="".concat(r,"&driver_companies_ids=").concat(JSON.stringify(null==b?void 0:b.driver_companies_ids))),null!=b&&b.driver_groups_ids&&(null==b?void 0:b.driver_groups_ids.length)>0&&(r="".concat(r,"&driver_groups_ids=").concat(JSON.stringify(null==b?void 0:b.driver_groups_ids))),null!=b&&b.delivery_types_ids&&(null==b?void 0:b.delivery_types_ids.length)>0&&(r="".concat(r,"&delivery_types_ids=").concat(JSON.stringify(null==b?void 0:b.delivery_types_ids))),null!=b&&b.app_ids&&(null==b?void 0:b.app_ids.length)>0&&(r="".concat(r,"&app_ids=").concat(JSON.stringify(null==b?void 0:b.app_ids))),i="".concat(o.root,"/reports/").concat(n,"?").concat(r),e.next=17,fetch(i,t);case 17:return s=e.sent,e.next=20,s.json();case 20:u=e.sent,f=u.error,p=u.result,v(Do(Do({},y),{},f?{loading:!1,error:p}:{loading:!1,content:p})),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(2),v(Do(Do({},y),{},{loading:!1,error:e.t0}));case 29:case"end":return e.stop()}}),e,null,[[2,26]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){O(),n&&w()}),[b]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,_o({},e,{filterList:b,handleChangeFilterList:g,reportData:p,reportData1:y})))};function No(){return No=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},No.apply(this,arguments)}function zo(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Go(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(r),!0).forEach((function(t){Yo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Go(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $o(e){return function(e){if(Array.isArray(e))return Ho(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Vo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Vo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vo(e,t){if(e){if("string"==typeof e)return Ho(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ho(e,t):void 0}}function Ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ro.propTypes={UIComponent:c.a.elementType,endpoint:c.a.string,endpoint1:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ro.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Wo=function(e){var t=e.UIComponent,r=e.filterList,n=e.handleChangeFilterList,o=e.propsToFetch,u=e.onClose,c=e.isFranchise,l=e.isSearchByName,f=Jo(nr(),1)[0],p=Jo(Object(i.useState)({loading:!0,error:null,businesses:[],pagination:null}),2),d=p[0],h=p[1],y=Jo(Object(i.useState)(null),2),v=y[0],m=y[1],b=Jo(Object(i.useState)(!1),2),g=b[0],O=b[1],w=Jo(Object(i.useState)(null),2),j=w[0],S=w[1],E=new RegExp(/^[A-Za-z0-9\s]+$/g),P=function(){var e,t=(e=a.a.mark((function e(){var t,n,i,s,u,p,y,v,m,b,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(qo(qo({},d),{},{loading:!0})),t=null,n=[],j&&(i=[],s=E.test(j),l&&i.push({attribute:"name",value:{condition:"ilike",value:s?encodeURI("%".concat(j,"%")):"%".concat(j,"%")}}),n.push({conector:"OR",conditions:i})),n.length&&(t={conditions:n,conector:"AND"}),u=t?f.businesses().asDashboard().select(o).where(t):f.businesses().asDashboard().select(o),e.next=9,u.get();case 9:p=e.sent,y=p.content,v=y.error,m=y.result,b=y.pagination,v?h(qo(qo({},d),{},{loading:!1,error:m})):(O=[],O=c&&(null==r||null===(g=r.franchises_id)||void 0===g?void 0:g.length)>0?m.filter((function(e){return null==r?void 0:r.franchises_id.includes(e.franchise_id)})):$o(m),h(qo(qo({},d),{},{loading:!1,businesses:O,pagination:b}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),h(qo(qo({},d),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){zo(a,n,o,i,s,"next",e)}function s(e){zo(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return P(),e.abort()}),[j]),Object(i.useEffect)((function(){var e,t;if(0!==(null==d||null===(e=d.businesses)||void 0===e?void 0:e.length)){var n=d.businesses.reduce((function(e,t){return[].concat($o(e),[t.id])}),[]),o=(null==r||null===(t=r.businessIds)||void 0===t?void 0:t.length)>0?null==r?void 0:r.businessIds.filter((function(e){return n.includes(e)})):n;m($o(o)),null!=r&&r.businessIds&&(null==o?void 0:o.length)!==(null==d?void 0:d.businesses.length)||O(!0)}}),[null==d?void 0:d.businesses]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,No({},e,{businessList:d,businessIds:v,handleChangeBusinessId:function(e){if(null==v?void 0:v.find((function(t){return t===e}))){var t=null==v?void 0:v.filter((function(t){return t!==e}));m(t),O(!1)}else{var r=v?$o(v):[];r.push(e),r.length===(null==d?void 0:d.businesses.length)&&O(!0),m(r)}},handleClickFilterButton:function(){var e=v?$o(v):null;n(qo(qo({},r),{},{businessIds:e})),u&&u()},isAllCheck:g,handleChangeAllCheck:function(){if(g)m(null);else{var e,t=[],r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Vo(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(d.businesses);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n.id)}}catch(e){r.e(e)}finally{r.f()}m(t)}O(!g)},searchValue:j,onSearch:S})))};function Ko(){return Ko=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ko.apply(this,arguments)}function Xo(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Zo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zo(Object(r),!0).forEach((function(t){ea(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ea(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ta(e){return function(e){if(Array.isArray(e))return aa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ra(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=oa(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||oa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oa(e,t){if(e){if("string"==typeof e)return aa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aa(e,t):void 0}}function aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Wo.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Wo.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var ia=function(e){var t=e.UIComponent,r=e.filterList,n=e.handleChangeFilterList,o=e.propsToFetch,u=e.onClose,c=na(nr(),1)[0],l=na(Object(i.useState)({loading:!0,error:null,users:[],pagination:null}),2),f=l[0],p=l[1],d=na(Object(i.useState)(null),2),h=d[0],y=d[1],v=na(Object(i.useState)(null),2),m=v[0],b=v[1],g=na(Object(i.useState)("all"),2),O=g[0],w=g[1],j=function(e){var t,r=!1,n=!1,o=ra(h);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.id===e){var i,s=ra(a.children);try{var u=function(){var e=i.value;(null==m?void 0:m.find((function(t){return t===e.id})))?r=!0:n=!0};for(s.s();!(i=s.n()).done;)u()}catch(e){s.e(e)}finally{s.f()}}}}catch(e){o.e(e)}finally{o.f()}var c="all";return r&&n?c="some":!r&&n&&(c="none"),c},S=function(e,t){var r,n=!1,o=ra(null==f?void 0:f.users);try{for(o.s();!(r=o.n()).done;){var a,i=r.value,s=ra(i.drivergroups);try{for(s.s();!(a=s.n()).done;){var u=a.value;i.id===e&&u.id===t&&(n=!0)}}catch(e){s.e(e)}finally{s.f()}}}catch(e){o.e(e)}finally{o.f()}return n},E=function(){var e,t=(e=a.a.mark((function e(){var t,r,n,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Qo(Qo({},f),{},{loading:!0})),t=[{attribute:"level",value:"4"}],e.next=5,c.users().asDashboard().select(o).where(t).get();case 5:r=e.sent,n=r.content,i=n.error,s=n.result,u=n.pagination,p(Qo(Qo({},f),{},i?{loading:!1,error:s}:{loading:!1,users:s,pagination:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),p(Qo(Qo({},f),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Xo(a,n,o,i,s,"next",e)}function s(e){Xo(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return E(),e.abort()}),[]),Object(i.useEffect)((function(){(null==f?void 0:f.users.length)>0&&function(){var e,t=[],r=[],n=ra(null==f?void 0:f.users);try{for(n.s();!(e=n.n()).done;){var o,a=e.value,i=ra(null==a?void 0:a.drivergroups);try{var s=function(){var e=o.value;t.find((function(t){return t.id===e.id}))||t.push({id:e.id,name:e.name,isCollapse:!1,children:[]})};for(i.s();!(o=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}r.push(a.id)}}catch(e){n.e(e)}finally{n.f()}var u=t.map((function(e){var t,r=ta(e.children),n=ra(null==f?void 0:f.users);try{for(n.s();!(t=n.n()).done;){var o=t.value;S(o.id,e.id)&&r.push(o)}}catch(e){n.e(e)}finally{n.f()}return Qo(Qo({},e),{},{children:r})}));b(r),y(u)}()}),[f]),Object(i.useEffect)((function(){m&&null!=f&&f.users&&(m.length>0&&m.length===f.users.length&&w("all"),m.length>0&&m.length!==f.users.length&&w("some"),0===m.length&&w("none"))}),[m]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Ko({},e,{usersList:f,groupList:h,userIds:m,isAllCheck:O,handleChangeCollapse:function(e){var t=null==h?void 0:h.map((function(t){return t.id===e?Qo(Qo({},t),{},{isCollapse:!t.isCollapse}):t}));y(t)},handleChangeUserId:function(e){if(null==m?void 0:m.find((function(t){return t===e}))){var t=null==m?void 0:m.filter((function(t){return t!==e}));b(t),w(!1)}else{var r=m?ta(m):[];r.push(e),r.length===(null==f?void 0:f.users.length)&&w(!0),b(r)}},isParentCheck:j,parentClick:function(e){var t,r=j(e),n=null==h?void 0:h.find((function(t){return t.id===e})),o=ta(m),a=ra(null==n?void 0:n.children);try{var i=function(){var e=t.value,n=m.find((function(t){return t===e.id}));if(n&&"none"!==r){var a,i=null===(a=o)||void 0===a?void 0:a.filter((function(t){return t!==e.id}));o=ta(i)}n||"none"!==r||o.push(e.id)};for(a.s();!(t=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}b(o)},isIncluded:S,changeAllCheckStatus:function(e){if(e!==O)if(w(e),"all"===e){var t,r=[],n=ra(null==f?void 0:f.users);try{for(n.s();!(t=n.n()).done;){var o=t.value;r.push(o.id)}}catch(e){n.e(e)}finally{n.f()}b(r)}else b([])},handleClickFilterButton:function(){var e=m&&m.length>0?ta(m):null;n&&n(Qo(Qo({},r),{},{userIds:e})),u&&u()}})))};function sa(){return sa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sa.apply(this,arguments)}function ua(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ca(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(r),!0).forEach((function(t){la(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ua(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function la(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fa(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function pa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return da(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return da(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}ia.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ia.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var ha=function(e){var t=e.UIComponent,r=pa(dr(),1)[0],n=r.token,o=r.loading,u=pa(nr(),1)[0],c=pa(Object(i.useState)({loading:!1,ids:[],error:null}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,r,i,s,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(ca(ca({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r="".concat(u.root,"/reports/app_ids"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,c=s.error,p=s.result,f(ca(ca({},l),{},c?{loading:!0,error:p}:{loading:!1,ids:p})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),f(ca(ca({},l),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){fa(a,n,o,i,s,"next",e)}function s(e){fa(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,sa({},e,{appIdList:l})))};function ya(){return ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ya.apply(this,arguments)}function va(e){return function(e){if(Array.isArray(e))return Pa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ea(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ba(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(r),!0).forEach((function(t){Oa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ma(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wa(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ja(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){wa(a,n,o,i,s,"next",e)}function s(e){wa(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Sa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Ea(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ea(e,t){if(e){if("string"==typeof e)return Pa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pa(e,t):void 0}}function Pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}ha.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ha.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ca=function(e){var t=e.UIComponent,r=Sa(nr(),1)[0],n=Sa(dr(),1)[0],o=n.user,u=n.token,c=Sa(Fn(),2)[1].showToast,l=Sa(Lr(),2)[1],f=Sa(Object(i.useState)({keys:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=Sa(Object(i.useState)({loading:!1,error:null}),2),y=h[0],v=h[1],m=function(){var e=ja(a.a.mark((function e(){var t,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(ba(ba({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=5,fetch("".concat(r.root,"/users/").concat(null==o?void 0:o.id,"/keys"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||d(ba(ba({},p),{},{keys:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(ba(ba({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=ja(a.a.mark((function e(t){var n,i,s,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dn.Info,l("LOADING","Loading")),v(ba(ba({},y),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=6,fetch("".concat(r.root,"/users/").concat(null==o?void 0:o.id,"/keys/").concat(t),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(s=e.sent).error?v({loading:!1,error:s.result}):(v(ba(ba({},y),{},{loading:!1})),f=p.keys.filter((function(e){return e.id!==t})),d(ba(ba({},p),{},{keys:f})),c(Dn.Success,l("APIKEY_REMOVED","API key removed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=ja(a.a.mark((function e(){var t,n,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dn.Info,l("LOADING","Loading")),v(ba(ba({},y),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=6,fetch("".concat(r.root,"/users/").concat(null==o?void 0:o.id,"/keys"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:(i=e.sent).error?v({loading:!1,error:i.result}):(v(ba(ba({},y),{},{loading:!1})),s=[].concat(va(p.keys),[i.result]),d(ba(ba({},p),{},{keys:s})),c(Dn.Success,l("APIKEY_ADDED","API key added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0!==(null==o?void 0:o.level)&&2!==(null==o?void 0:o.level)||m()}),[o]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,ya({},e,{apiKeysList:p,actionState:y,handleDeleteApiKey:b,handleAddApiKey:g})))};Ca.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ca.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ia=function(e){var t=e.UIComponent;return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,e))};function xa(){return xa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xa.apply(this,arguments)}function Aa(e){return function(e){if(Array.isArray(e))return Ba(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ta(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function _a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ta(a,n,o,i,s,"next",e)}function s(e){Ta(a,n,o,i,s,"throw",e)}i(void 0)}))}}function ka(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Da(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(r),!0).forEach((function(t){Ua(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ka(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ua(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function La(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Fa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fa(e,t){if(e){if("string"==typeof e)return Ba(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ba(e,t):void 0}}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ia.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ia.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ma=["cloudinary","tookan","apple_login","order_messages","others","location"],Ra=["search_by_address","distance_unit_km","pickup","orders_metafields_strategy","order_validate","time_format","driver_close_distance","lazy_load_products_when_necessary"],Na=function(e){var t=e.UIComponent,r=e.settingsType,n=La(dr(),1)[0],o=n.token,u=n.loading,c=La(nr(),1)[0],l=La(Object(i.useState)({categories:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=La(Object(i.useState)(!1),2),h=d[0],y=d[1],v=La(Object(i.useState)(null),2),m=v[0],b=v[1],g=function(){var e=_a(a.a.mark((function e(){var t,n,i,s,l,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Da(Da({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},(n=[]).push({attribute:"key",value:r}),i="".concat(c.root,"/config_categories?where=").concat(JSON.stringify(n)),e.next=10,fetch(i,t);case 10:return s=e.sent,e.next=13,s.json();case 13:l=e.sent,d=l.error,h=l.result,!d&&h.length>0?b(h[0].id):p(Da(Da({},f),{},{loading:!1,error:h})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p(Da(Da({},f),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=_a(a.a.mark((function e(){var t,r,n,i,s,l,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Da(Da({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},(r=[]).push({attribute:"parent_category_id",value:parseInt(m)}),n="".concat(c.root,"/config_categories?orderBy=id&where=").concat(JSON.stringify(r)),e.next=10,fetch(n,t);case 10:return i=e.sent,e.next=13,i.json();case 13:s=e.sent,l=s.error,d=s.result,l?p(Da(Da({},f),{},{loading:!0,error:d})):(h=d.filter((function(e){return!Ma.includes(e.key)})).map((function(e){var t,r=null===(t=e.configs)||void 0===t?void 0:t.filter((function(e){return!Ra.includes(e.key)})).sort((function(e,t){return 1*e.rank>1*t.rank?1:-1}));return Da(Da({},e),{},{configs:Aa(r)})})),p(Da(Da({},f),{},{loading:!1,categories:h}))),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p(Da(Da({},f),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){g()}),[]),Object(i.useEffect)((function(){m&&O(m)}),[m]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,xa({},e,{isUpdateConfig:h,handChangeConfig:y,categoryList:f,handleUpdateCategoryList:function(e){p(Da(Da({},f),{},{categories:e})),y(!0)}})))};function za(){return za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},za.apply(this,arguments)}function Ga(e){return function(e){if(Array.isArray(e))return Ka(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ya(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(r),!0).forEach((function(t){$a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ja(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Va(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ja(a,n,o,i,s,"next",e)}function s(e){Ja(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Wa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wa(e,t){if(e){if("string"==typeof e)return Ka(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ka(e,t):void 0}}function Ka(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Na.propTypes={UIComponent:c.a.elementType,settingsType:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Na.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Xa=function(e){var t=e.categorySelected,r=e.businessState,n=e.handleUpdateBusinessState,o=e.UIComponent,u=Ha(Lr(),2)[1],c=Ha(nr(),1)[0],l=Ha(dr(),1)[0].loading,f=Ha(Fn(),2)[1].showToast,p=Ha(Object(i.useState)([]),2),d=p[0],h=p[1],y=r.business,v=Ha(Object(i.useState)({photos:[],loading:!1,result:{error:null},API:!1,endPoint:!1}),2),m=v[0],b=v[1],g=Ha(Object(i.useState)([]),2),O=g[0],w=g[1],j=function(){return b({photos:[],loading:!1,result:{error:null},API:!1})},S=function(){var e=Va(a.a.mark((function e(t,r){var o,i,s,p,d,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(Dn.Info,u("LOADING","Loading")),b(Ya(Ya({},m),{},{loading:!0,API:!1})),e.next=7,c.businesses(parseInt(null==y?void 0:y.id)).categories(parseInt(null==t?void 0:t.category_id)).products(null==t?void 0:t.id).save(r);case 7:o=e.sent,i=o.content,s=i.error,p=i.result,s?b(Ya(Ya({},m),{},{loading:!1,result:{error:!0,result:p}})):(n&&((h=Ga(null==y?void 0:y.categories)).forEach((function e(n){if(n.id===(null==t?void 0:t.category_id)){var o=n.products.map((function(e){return e.id===t.id?Ya(Ya({},e),r):e}));n.products=Ga(o)}Array.isArray(null==n?void 0:n.subcategories)&&n.subcategories.forEach(e)})),n(Ya(Ya({},y),{},{categories:h}))),(v=null==m||null===(d=m.photos)||void 0===d?void 0:d.filter((function(e){return(null==e?void 0:e.name)!==(null==p?void 0:p.id)}))).length>0?b(Ya(Ya({},m),{},{photos:v,API:!0})):b({loading:!1,photos:[],result:{error:!1,result:"all product updated"},API:!1,endPoint:!0}),f(Dn.Success,u("PRODUCT_UPDATE","Products updated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),b(Ya(Ya({},m),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,r){return e.apply(this,arguments)}}(),E=function(e){return new Promise((function(t){var r=new FileReader,n=e.type,o=e.name,a=e.size;r.addEventListener("load",(function(){t({base64:r.result,name:parseInt(o.split(".")[0]),type:n,size:a})})),r.readAsDataURL(e)}))},P=function(){var e=Va(a.a.mark((function e(t){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],n=0;n<t.length;n++)r.push(E(t[n]));return e.next=4,Promise.all(r);case 4:o=e.sent,w([].concat(Ga(O),Ga(o)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){b(Ya(Ya({},m),{},{photos:O}))}),[O]);return Object(i.useEffect)((function(){t&&null!=t&&t.products&&(null==t?void 0:t.products.length)>0&&h(null==t?void 0:t.products)}),[t]),Object(i.useEffect)((function(){var e;if(null!=m&&m.API&&(null==m||null===(e=m.photos)||void 0===e?void 0:e.length)>0){var t=null==m?void 0:m.photos[0],r={images:null==t?void 0:t.base64},n=d.find((function(e){return(null==t?void 0:t.name)===(null==e?void 0:e.id)}));S(n,r)}null!=m&&m.API&&0===(null==m?void 0:m.photos.length)&&j()}),[null==m?void 0:m.API]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,za({},e,{handleUploadImages:P,cleanFormState:j,updateProduct:function(){b(Ya(Ya({},m),{},{API:!0,loading:!0}))},formState:m,products:d})))};function Za(){return Za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Za.apply(this,arguments)}function Qa(e){return function(e){if(Array.isArray(e))return si(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ii(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ti(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(r),!0).forEach((function(t){ri(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ei(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ri(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ni(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function oi(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ni(a,n,o,i,s,"next",e)}function s(e){ni(a,n,o,i,s,"throw",e)}i(void 0)}))}}function ai(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||ii(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(e,t){if(e){if("string"==typeof e)return si(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?si(e,t):void 0}}function si(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Xa.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xa.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},Gr.a.extend(Yr.a);var ui=function(e){var t,r,n,o,u,c=e.isSearchByName,l=e.isSearchByDescription,f=e.slug,p=e.categoryId,d=e.productId,h=e.isInitialRender,y=e.ordering,v=e.businessProps,m=e.UIComponent,b=ai(vn(),1)[0],g=ai(Lr(),2),O=g[0],w=g[1],j=ai(Object(i.useState)({id:null,name:w("ALL","All")}),2),S=j[0],E=j[1],P=ai(Object(i.useState)(null),2),C=P[0],I=P[1],x=ai(Object(i.useState)(null),2),A=x[0],T=x[1],_=ai(Object(i.useState)(null),2),k=_[0],D=_[1],U=ai(Object(i.useState)({business:{},menus:null,loading:!0,error:null}),2),L=U[0],F=U[1],B=ai(Object(i.useState)({}),2),M=B[0],R=B[1],N=ai(Object(i.useState)(),2),z=N[0],G=N[1],q=ai(Object(i.useState)({}),2),Y=q[0],$=q[1],J=ai(Object(i.useState)({product:null,loading:!1,error:null}),2),V=J[0],H=J[1],W=ai(Object(i.useState)(!1),2),K=W[0],X=W[1],Z={loading:!0,pagination:{currentPage:0,pageSize:20,totalItems:null,totalPages:0,nextPageItems:10},products:[]},Q=ai(Object(i.useState)(Z),2),ee=Q[0],te=Q[1],re=ai(Object(i.useState)(null),2),ne=re[0],oe=re[1],ae=function(e,t){return!C||(e&&e.toLowerCase().includes(C.toLowerCase())&&c||t&&t.toLowerCase().includes(C.toLowerCase())&&l)},ie=function(e){return!!e.featured&&(!C||(e.name&&e.name.toLowerCase().includes(C.toLowerCase())&&c||e.description&&e.description.toLowerCase().includes(C.toLowerCase())&&l))},se=function(e,t){return"rank"===e?t.sort((function(e,t){return t.rank-e.rank})):"a-z"===e?t.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})):t},ue=function(){var e=oi(a.a.mark((function e(t){var r,n,o,i,s,u,f,p,d,h,v,m,g,O,w,j,E,P,I,x,T,_,k,D,U,F,B,N,z,G,q,J,V,H;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=L&&null!==(r=L.business)&&void 0!==r&&r.lazy_load_products_recommended){e.next=8;break}return u=!(null==L||null===(o=L.business)||void 0===o||null===(i=o.categories)||void 0===i||null===(s=i.find((function(e){return e})))||void 0===s||!s.products.filter((function(e){return e.featured})).length),X(u),f=ti(ti({},Z),{},{loading:!1}),"featured"!==(null==S?void 0:S.id)&&null!==(null==S?void 0:S.id)?(v=null==L||null===(p=L.business)||void 0===p||null===(d=p.categories)||void 0===d||null===(h=d.find((function(e){return(null==e?void 0:e.id)===(null==S?void 0:S.id)})))||void 0===h?void 0:h.products.filter((function(e){return ae(e.name,e.description)})),f.products=v||[]):"featured"===(null==S?void 0:S.id)?(O=null==L||null===(m=L.business)||void 0===m||null===(g=m.categories)||void 0===g?void 0:g.reduce((function(e,t){return[].concat(Qa(e),Qa(t.products))}),[]).filter((function(e){return ie(e)})),f.products=O||[]):(E=null==L||null===(w=L.business)||void 0===w||null===(j=w.categories)||void 0===j?void 0:j.reduce((function(e,t){return[].concat(Qa(e),Qa(t.products))}),[]).filter((function(e){return ae(e.name,e.description)})),f.products=E||[]),f.products=se(A,f.products),te(ti({},f)),e.abrupt("return");case 8:if(P=C?"search":"featured"===(null==S?void 0:S.id)?"featured":null!=S&&S.id?"categoryId:".concat(null==S?void 0:S.id):"all",(I=M[P]||Z).products=se(A,I.products),x=I.pagination,t||!(x.currentPage>0)||x.currentPage!==x.totalPages){e.next=15;break}return te(ti(ti({},I),{},{loading:!1})),e.abrupt("return");case 15:return te(ti(ti({},I),{},{loading:!0})),T={type:(null===(n=b.options)||void 0===n?void 0:n.type)||1,page:t?1:x.currentPage+1,page_size:x.pageSize},A&&(T.orderBy="a-z"===A?"name":A),_=null,k=[],C&&(c&&k.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}}),l&&k.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}})),_={conditions:k,conector:"OR"},"featured"===(null==S?void 0:S.id)&&(_={conditions:[{attribute:"featured",value:!0}]}),"featured"===(null==S?void 0:S.id)&&C&&(_={conditions:[{attribute:"featured",value:!0},{conditions:k,conector:"OR"}],conector:"AND"}),e.prev=24,F=null!=S&&S.id&&"featured"!==(null==S?void 0:S.id)?y.businesses(null===(D=L.business)||void 0===D?void 0:D.id).categories(null==S?void 0:S.id).products():y.businesses(null===(U=L.business)||void 0===U?void 0:U.id).products(),B={},Y.products=B,$(ti({},Y)),N=_.conditions.length>0?F.parameters(T).where(_):F.parameters(T),e.next=32,N.get({cancelToken:B});case 32:z=e.sent,G=z.content,q=G.error,J=G.result,V=G.pagination,q?oe(J):(H={pagination:ti(ti({},I.pagination),{},{currentPage:V.current_page,totalItems:V.total,totalPages:V.total_pages}),loading:!1,products:t?Qa(J):[].concat(Qa(I.products),Qa(J))},M[P]=H,te(ti({},H)),R(ti({},M)),X(!!M.all.products.find((function(e){return e.featured})))),e.next=43;break;case 40:e.prev=40,e.t0=e.catch(24),oe([e.t0.message]);case 43:case"end":return e.stop()}}),e,null,[[24,40]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=oi(a.a.mark((function e(){var t,r,n,o,i,s,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p&&d&&null!==(t=L.business)&&void 0!==t&&t.id)){e.next=17;break}return e.prev=1,H(ti(ti({},V),{},{loading:!0})),i={},Y.product=i,s={type:(null===(r=b.options)||void 0===r?void 0:r.type)||1,moment:(null===(n=b.options)||void 0===n?void 0:n.moment)||null},e.next=8,y.businesses(null===(o=L.business)||void 0===o?void 0:o.id).categories(p).products(d).parameters(s).get({cancelToken:i});case 8:u=e.sent,c=u.content.result,l=Array.isArray(c)?null:c,H(ti(ti({},V),{},{product:l,loading:!1})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),H(ti(ti({},V),{},{loading:!1,error:[e.t0]}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){h&&ce()}),[JSON.stringify(null===(t=L.business)||void 0===t?void 0:t.id),h]);var le=function(){var e=oi(a.a.mark((function e(){var t,r,n,o,i,s,u,c,l,p,d,h,m,g,O,w,j,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(ti(ti({},L),{},{loading:!0})),h={},Y.business=h,$(ti({},Y)),m={type:(null===(t=b.options)||void 0===t?void 0:t.type)||1,location:null!==(r=b.options)&&void 0!==r&&null!==(n=r.address)&&void 0!==n&&n.location?"".concat(null===(o=b.options)||void 0===o||null===(i=o.address)||void 0===i||null===(s=i.location)||void 0===s?void 0:s.lat,",").concat(null===(u=b.options)||void 0===u||null===(c=u.address)||void 0===c||null===(l=c.location)||void 0===l?void 0:l.lng):null},null!==(p=b.options)&&void 0!==p&&p.moment&&(a=null===(d=b.options)||void 0===d?void 0:d.moment,P="YYYY-MM-DD HH:mm:ss",Gr()(a,P).format(P)===a)&&(O=Gr.a.utc(null===(g=b.options)||void 0===g?void 0:g.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),m.timestamp=O),k&&(m.menu_id=k),e.next=10,y.businesses(f).select(v).parameters(m).get({cancelToken:h});case 10:return w=e.sent,j=w.content.result,e.next=14,y.businesses(j.id).menus().get();case 14:S=e.sent,E=S.content.result,F(ti(ti({},L),{},{business:j,loading:!1,menus:E})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),F(ti(ti({},L),{},{loading:!1,error:[e.t0.message]}));case 22:case"end":return e.stop()}var a,P}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){L.loading||ue(!0)}),[L]),Object(i.useEffect)((function(){ue(!!C)}),[C]),Object(i.useEffect)((function(){ue(!!C)}),[S.id]),Object(i.useEffect)((function(){ue(!!C)}),[A]),Object(i.useEffect)((function(){ue()}),[f]),Object(i.useEffect)((function(){b.loading||!z||O.loading||le()}),[z,O.loading,f,k]),Object(i.useEffect)((function(){var e,t,r,n;b.loading||G({type:null==b||null===(e=b.options)||void 0===e?void 0:e.type,moment:null==b||null===(t=b.options)||void 0===t?void 0:t.moment,location:null==b||null===(r=b.options)||void 0===r||null===(n=r.address)||void 0===n?void 0:n.location})}),[null==b||null===(r=b.options)||void 0===r?void 0:r.type,null==b||null===(n=b.options)||void 0===n?void 0:n.moment,JSON.stringify(null==b||null===(o=b.options)||void 0===o||null===(u=o.address)||void 0===u?void 0:u.location)]),Object(i.useEffect)((function(){var e=Y.business;return function(){e&&e.cancel()}}),[Y.business]),Object(i.useEffect)((function(){var e=Y.products;return function(){e&&e.cancel()}}),[Y.products]),s.a.createElement(s.a.Fragment,null,m&&s.a.createElement(m,Za({},e,{errors:ne,categorySelected:S,searchValue:C,sortByValue:A,filterByMenus:k,categoryState:ee,businessState:L,productModal:V,featuredProducts:K,handleChangeCategory:function(e){(null==e?void 0:e.id)!==(null==S?void 0:S.id)&&E(e)},handleChangeSearch:function(e){I(e)},handleChangeSortBy:function(e){T(e)},handleChangeFilterByMenus:function(e){D(e)},getNextProducts:ue,updateProductModal:function(e){return H(ti(ti({},V),{},{product:e}))}})))};function ci(){return ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ci.apply(this,arguments)}function li(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?li(Object(r),!0).forEach((function(t){pi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):li(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function di(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function hi(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){di(a,n,o,i,s,"next",e)}function s(e){di(a,n,o,i,s,"throw",e)}i(void 0)}))}}function yi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}ui.propTypes={UIComponent:c.a.elementType},ui.defaultProps={};var mi=function(e){var t=e.UIComponent,r=yi(dr(),1)[0],n=r.token,o=r.loading,u=yi(nr(),1)[0],c=yi(Object(i.useState)({lapse:"today",businessIds:null,app_id:"all",franchises_id:null}),2),l=c[0],f=c[1],p=yi(Object(i.useState)({loading:!1,data:[],error:null}),2),d=p[0],h=p[1],y=yi(Object(i.useState)({loading:!1,data:[],error:null}),2),v=y[0],m=y[1],b=yi(Object(i.useState)({loading:!1,data:[],error:null}),2),g=b[0],O=b[1],w=yi(Object(i.useState)({loading:!1,data:[],error:null}),2),j=w[0],S=w[1],E=yi(Object(i.useState)({loading:!1,data:[],error:null}),2),P=E[0],C=E[1],I=yi(Object(i.useState)({loading:!1,data:[],error:null}),2),x=I[0],A=I[1],T=yi(Object(i.useState)({loading:!1,data:[],error:null}),2),_=T[0],k=T[1],D=yi(Object(i.useState)({loading:!1,data:[],error:null}),2),U=D[0],L=D[1],F=yi(Object(i.useState)({loading:!1,data:[],error:null}),2),B=F[0],M=F[1],R=yi(Object(i.useState)({loading:!1,data:[],error:null}),2),N=R[0],z=R[1],G=function(e){var t,r="".concat(u.root,"/reports/").concat(e),n="lapse=".concat(null==l?void 0:l.lapse);return null!=l&&l.businessIds&&(null==l?void 0:l.businessIds.length)>0&&(n="".concat(n,"&businesses=").concat(null==l||null===(t=l.businessIds)||void 0===t?void 0:t.toString())),null!=l&&l.app_id&&"all"!==l.app_id&&(n="".concat(n,"&app_id=").concat(null==l?void 0:l.app_id)),null!=l&&l.franchises_id&&(null==l?void 0:l.franchises_id.length)>0&&(n="".concat(n,"&franchises_id=").concat(JSON.stringify(null==l?void 0:l.franchises_id))),"".concat(r,"?").concat(n)},q=function(){var e=hi(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(fi(fi({},d),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=G("orders"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,h(fi(fi({},d),{},u?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),h(fi(fi({},d),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=hi(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,m(fi(fi({},v),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=G("sales"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,m(fi(fi({},v),{},u?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),m(fi(fi({},v),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=hi(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(fi(fi({},g),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=G("top_selling"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,O(fi(fi({},g),{},u?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),O(fi(fi({},g),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=hi(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,S(fi(fi({},j),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=G("top_categories"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,S(fi(fi({},j),{},u?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),S(fi(fi({},j),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=hi(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,C(fi(fi({},P),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=G("orders_status"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,C(fi(fi({},P),{},u?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),C(fi(fi({},P),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=hi(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,A(fi(fi({},x),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=G("users"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,A(fi(fi({},x),{},u?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),A(fi(fi({},x),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=hi(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,k(fi(fi({},_),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=G("customer_satisfaction"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,k(fi(fi({},_),{},u?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),k(fi(fi({},_),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=hi(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,L(fi(fi({},U),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=G("orders_accept_spend"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,L(fi(fi({},U),{},u?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),L(fi(fi({},U),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=hi(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,M(fi(fi({},B),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=G("arrived_pickup_spend"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,M(fi(fi({},B),{},u?{loading:!1,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),M(fi(fi({},B),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=hi(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,z(fi(fi({},N),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=G("order_location"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,z(fi(fi({},N),{},u?{loading:!1,error:c}:{loading:!1,locations:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),z(fi(fi({},N),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){q(),Y(),$(),J(),V(),H(),W(),K(),X(),Z()}),[l]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,ci({},e,{filterList:l,ordersList:d,salesList:v,topProductList:g,topCategoryList:j,orderStatusList:P,registerUsersList:x,customerSatisfactionList:_,ordersAcceptSpendList:U,arrivedPickUpSpendList:B,orderLocationList:N,handleChangeFilterList:f})))};function bi(){return bi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bi.apply(this,arguments)}function gi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(r),!0).forEach((function(t){wi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ji(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Si(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ji(a,n,o,i,s,"next",e)}function s(e){ji(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}mi.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mi.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ci=function(e){var t=e.UIComponent,r=e.business,n=e.businessId,o=e.businessParams,u=Ei(nr(),1)[0],c=Ei(Object(i.useState)({business:{},loading:!1,error:null}),2),l=c[0],f=c[1],p={},d=function(){var e=Si(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},p.business=r,e.next=4,u.businesses(t).select(o).parameters({location:"40.7539143,-73.9810162",type:1}).get({cancelToken:r});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Si(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Oi(Oi({},l),{},{loading:!0})),e.next=4,d(n);case 4:t=e.sent,r=t.content.result,f(Oi(Oi({},l),{},{loading:!1,business:r})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),f(Oi(Oi({},l),{},{loading:!1,error:[e.t0]}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return r?f(Oi(Oi({},l),{},{business:r})):h(),function(){p.business&&p.business.cancel()}}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,bi({},e,{businessState:l})))};function Ii(){return Ii=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ii.apply(this,arguments)}function xi(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Ai(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){xi(a,n,o,i,s,"next",e)}function s(e){xi(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Ti(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(r),!0).forEach((function(t){ki(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ti(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ki(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Di(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ui(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ui(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ci.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessParams:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ci.defaultProps={businessParams:["header","logo","name","today","delivery_price","minimum","description","distance","delivery_time","pickup_time","reviews"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Li=function(e){var t=e.UIComponent,r=e.propsToFetch,n=e.isSearchByName,o=Di(nr(),1)[0],u=Di(Object(i.useState)(null),2),c=u[0],l=u[1],f=Di(Fn(),2)[1].showToast,p=Di(Lr(),2)[1],d=Di(Object(i.useState)({loading:!1,businesses:[],result:{error:null}}),2),h=d[0],y=d[1],v=new RegExp(/^[A-Za-z0-9\s]+$/g),m=function(){var e=Ai(a.a.mark((function e(){var t,i,s,u,l,f,p,d,m,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(_i(_i({},h),{},{loading:!0})),t=null,i=[],c&&(s=[],u=v.test(c),n&&s.push({attribute:"name",value:{condition:"ilike",value:u?encodeURI("%".concat(c,"%")):"%".concat(c,"%")}}),i.push({conector:"OR",conditions:s})),i.length&&(t={conditions:i,conector:"AND"}),l=t?o.businesses().asDashboard().select(r).where(t):o.businesses().asDashboard().select(r),e.next=9,l.get();case 9:f=e.sent,p=f.content,d=p.error,m=p.result,b=p.pagination,y(_i(_i({},h),{},d?{loading:!1,error:m}:{loading:!1,businesses:m,pagination:b})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),y(_i(_i({},h),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Ai(a.a.mark((function e(t,r){var n,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dn.Info,p("LOADING","Loading")),e.next=4,o.businesses(parseInt(t)).save(r);case 4:n=e.sent,i=n.content,s=i.error,u=i.result,s||(c=null==h?void 0:h.businesses.map((function(e){return e.id===t?_i(_i({},e),{},{franchise_id:u.franchise_id}):e})),y((function(e){return _i(_i({},e),{},{businesses:c})})),f(Dn.Success,p("BUSINESS_UPDATED","Business updated"))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[c]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Ii({},e,{searchValue:c,onSearch:l,businessList:h,handleChangeCheckBox:function(e,t,r){var n={franchise_id:r};e.target.checked||(n={franchise_id:null}),b(t,n)},handleSelectAllBusinesses:function(e,t){var r,n=[];e?(r={franchise_id:t},h.businesses.forEach((function(e){e.franchise_id!==t&&(b(e.id,r),e.franchise_id=t),n.push(e)}))):(r={franchise_id:null},h.businesses.forEach((function(e){null!==e.franchise_id&&(b(e.id,r),e.franchise_id=null),n.push(e)}))),y(_i(_i({},h),{},{businesses:n}))}})))};function Fi(){return Fi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fi.apply(this,arguments)}function Bi(e){return function(e){if(Array.isArray(e))return $i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Yi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ri(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(r),!0).forEach((function(t){Ni(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ni(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zi(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Gi(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){zi(a,n,o,i,s,"next",e)}function s(e){zi(a,n,o,i,s,"throw",e)}i(void 0)}))}}function qi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Yi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yi(e,t){if(e){if("string"==typeof e)return $i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$i(e,t):void 0}}function $i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Li.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Li.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var Ji=function(e){var t=e.UIComponent,r=e.brand,n=e.handleUpdateBrandList,o=e.brandListState,u=e.onSelectedBrand,c=qi(nr(),1)[0],l=qi(Lr(),2)[1],f=qi(Fn(),2)[1].showToast,p=qi(dr(),1)[0].token,d=qi(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),h=d[0],y=d[1],v=function(){var e=Gi(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r?b():m();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Gi(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Ri(Ri({},h),{},{loading:!0})),f(Dn.Info,l("LOADING","Loading")),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(h.changes)},e.next=6,fetch("".concat(c.root,"/franchises"),t);case 6:return r=e.sent,e.next=9,r.json();case 9:null!=(i=e.sent)&&i.error?y(Ri(Ri({},h),{},{changes:h.changes,result:i,loading:!1})):(y(Ri(Ri({},h),{},{changes:{},result:i,loading:!1})),n&&n([].concat(Bi(null==o?void 0:o.brands),[i.result])),u&&u(i.result),f(Dn.Success,l("BRAND_ADDED","Brand added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(Ri(Ri({},h),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Gi(a.a.mark((function e(){var t,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Ri(Ri({},h),{},{loading:!0})),f(Dn.Info,l("LOADING","Loading")),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify(h.changes)},e.next=6,fetch("".concat(c.root,"/franchises/").concat(null==r?void 0:r.id),t);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(s=e.sent)&&s.error?y(Ri(Ri({},h),{},{changes:h.changes,result:s,loading:!1})):(y(Ri(Ri({},h),{},{changes:{},result:s,loading:!1})),n&&(u=null==o?void 0:o.brands.map((function(e){return e.id===s.result.id?Ri(Ri({},e),{},{name:s.result.name,logo:s.result.logo}):e})),n(u)),f(Dn.Success,l("BRAND_UPDATED","Brand updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(Ri(Ri({},h),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Fi({},e,{brandFormState:h,handleUpdateClick:v,handleChangeInput:function(e){var t=Ni({},e.target.name,e.target.value);y(Ri(Ri({},h),{},{changes:Ri(Ri({},h.changes),t)}))},handlechangeImage:function(e,t){var r=new window.FileReader;r.readAsDataURL(e),r.onload=function(){y(Ri(Ri({},h),{},{changes:Ri(Ri({},h.changes),{},Ni({},t,r.result))}))},r.onerror=function(e){return console.log(e)}}})))};function Vi(){return Vi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vi.apply(this,arguments)}function Hi(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Wi(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Hi(a,n,o,i,s,"next",e)}function s(e){Hi(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Ki(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(r),!0).forEach((function(t){Zi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ki(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return es(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return es(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ji.propTypes={UIComponent:c.a.elementType,brand:c.a.object,brandListState:c.a.object,handleUpdateBrandList:c.a.func,onSelectedBrand:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ji.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ts=function(e){var t=e.UIComponent,r=Qi(Lr(),2)[1],n=Qi(Fn(),2)[1].showToast,o=Qi(Object(i.useState)(null),2),u=o[0],c=o[1],l=Qi(dr(),1)[0],f=l.token,p=l.loading,d=Qi(nr(),1)[0],h=Qi(Object(i.useState)({loading:!1,brands:[],error:null}),2),y=h[0],v=h[1],m=Qi(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),b=m[0],g=m[1],O=Qi(Object(i.useState)(!1),2),w=O[0],j=O[1],S=function(e){v(Xi(Xi({},y),{},{brands:e}))},E=function(){var e=Wi(a.a.mark((function e(t){var o,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Xi(Xi({},b),{},{loading:!0})),n(Dn.Info,r("LOADING","Loading")),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(d.root,"/franchises/").concat(t),o);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(s=e.sent)&&s.error?g(Xi(Xi({},b),{},{result:s,loading:!1})):(g(Xi(Xi({},b),{},{changes:{},result:s,loading:!1})),S&&(u=null==y?void 0:y.brands.filter((function(e){return e.id!==t})),S(u)),n(Dn.Success,r("BRAND_DELETED","Brand deleted")),j(!1)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g(Xi(Xi({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Wi(a.a.mark((function e(t,o){var i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Xi(Xi({},b),{},{loading:!0})),n(Dn.Info,r("LOADING","Loading")),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(o)},e.next=6,fetch("".concat(d.root,"/franchises/").concat(t),i);case 6:return s=e.sent,e.next=9,s.json();case 9:null!=(u=e.sent)&&u.error?g(Xi(Xi({},b),{},{result:u,loading:!1})):(g(Xi(Xi({},b),{},{changes:{},result:u,loading:!1})),S&&(c=null==y?void 0:y.brands.map((function(e){return e.id===u.result.id?Xi(Xi({},e),{},{name:u.result.name,logo:u.result.logo,enabled:u.result.enabled}):e})),S(c)),n(Dn.Success,r("BRAND_UPDATED","Brand updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g(Xi(Xi({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),C=function(){var e=Wi(a.a.mark((function e(){var t,r,n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(Xi(Xi({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},r="".concat(d.root,"/franchises"),e.next=8,fetch(r,t);case 8:return n=e.sent,e.next=11,n.json();case 11:o=e.sent,i=o.error,s=o.result,v(Xi(Xi({},y),{},i?{loading:!1,error:s}:{loading:!1,brands:s})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),v(Xi(Xi({},y),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){C()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Vi({},e,{searchValue:u,onSearch:c,handleUpdateBrandList:S,brandListState:y,handleChangeState:function(e,t,r){var n=Zi({},t,r);P(e,n)},brandFormState:b,handleDeleteBrand:E,openDetail:w,setOpenDetail:j})))};function rs(){return rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rs.apply(this,arguments)}function ns(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function os(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return as(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return as(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function as(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}ts.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ts.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var is=function(e){var t,r,n=e.business,o=e.businessId,u=e.businessAttributes,c=e.onBusinessClick,l=e.handleCustomClick,f=e.UIComponent,p=os(nr(),1)[0],d=os(Object(i.useState)(n),2),h=d[0],y=d[1],v=os(Object(i.useState)(null),2),m=v[0],b=v[1],g=os(Object(i.useState)(!1),2),O=g[0],w=g[1],j=os(vn(),1)[0],S=os(Pn(),1)[0].parsePrice,E=function(){var e,t=(e=a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.businesses(o).select(u).get();case 2:t=e.sent,r=t.content.result,y(r);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ns(a,n,o,i,s,"next",e)}function s(e){ns(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),P=function(e){var t=(null==e?void 0:e.hour)<10?"0".concat(null==e?void 0:e.hour):null==e?void 0:e.hour,r=(null==e?void 0:e.minute)<10?"0".concat(null==e?void 0:e.minute):null==e?void 0:e.minute;return e?"".concat(t,":").concat(r):"none"},C=P((null==h||null===(t=h.today)||void 0===t||null===(r=t.lapses[0])||void 0===r?void 0:r.close)||null);return Object(i.useEffect)((function(){var e=null==m?void 0:m.split(":")[0],t=null==m?void 0:m.split(":")[1],r=null==C?void 0:C.split(":")[0],n=null==C?void 0:C.split(":")[1];C&&w(e>r||e===r&&t>=n)}),[m]),Object(i.useEffect)((function(){var e=setInterval((function(){var e=(new Date).getHours(),t=(new Date).getMinutes();b("".concat(e,":").concat(t))}),1e3);return function(){return clearInterval(e)}}),[]),Object(i.useEffect)((function(){n?y(n):E()}),[]),s.a.createElement(s.a.Fragment,null,f&&s.a.createElement(f,rs({},e,{orderState:j,isBusinessClose:O,business:h,formatDate:P,formatNumber:function(e){return Math.round(100*e)/100},getBusinessOffer:function(e){if(!e||!e.length)return null;var t=e.reduce((function(e,t){return e.rate>t.rate?e:t}));return 1===(null==t?void 0:t.rate_type)?"".concat(null==t?void 0:t.rate,"%"):S(null==t?void 0:t.rate)},handleClick:l||c})))};function ss(){return ss=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ss.apply(this,arguments)}function us(e){return function(e){if(Array.isArray(e))return vs(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ys(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cs(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ls(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){cs(a,n,o,i,s,"next",e)}function s(e){cs(a,n,o,i,s,"throw",e)}i(void 0)}))}}function fs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ps(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fs(Object(r),!0).forEach((function(t){ds(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ds(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||ys(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ys(e,t){if(e){if("string"==typeof e)return vs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vs(e,t):void 0}}function vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}is.propTypes={UIComponent:c.a.elementType,business:c.a.object,businessId:c.a.number,businessAttributes:c.a.arrayOf(c.a.string),onBusinessClick:c.a.func,handleCustomClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},is.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ms=function(e){var t=e.business,r=e.UIComponent,n=e.handleSuccessUpdate,o=hs(nr(),1)[0],u=hs(dr(),1)[0].token,c=hs(Fn(),2)[1].showToast,l=hs(Lr(),2)[1],f=hs(Object(i.useState)({zones:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=hs(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),y=h[0],v=h[1],m=hs(Object(i.useState)(null),2),b=m[0],g=m[1],O=hs(Object(i.useState)({}),2),w=O[0],j=O[1],S=hs(Object(i.useState)(!1),2),E=S[0],P=S[1],C=hs(Object(i.useState)(!1),2),I=C[0],x=C[1],A=hs(Object(i.useState)(!1),2),T=A[0],_=A[1],k=function(){var e=ls(a.a.mark((function e(){var r,i,s,f,h,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=ps({},y.changes),r=ps(ps({},r),{},{data:JSON.stringify(y.changes.data)}),c(Dn.Info,l("LOADING","Loading")),v(ps(ps({},y),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(r)},e.next=8,fetch("".concat(o.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones/").concat(b),i);case 8:return s=e.sent,e.next=11,s.json();case 11:f=e.sent,v(ps(ps({},y),{},{changes:f.error?y.changes:{},result:f.result,loading:!1})),f.error?d(ps(ps({},d),{},{loading:!1,error:f.result})):(h=p.zones.filter((function(e){return(null==e?void 0:e.id)===b&&Object.assign(e,f.result),!0})),d(ps(ps({},p),{},{loading:!1,zones:h})),m=ps(ps({},t),{},{zones:h}),n&&n(m),c(Dn.Success,l("DELIVERYZONE_SAVED","Delivery zone saved"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),v(ps(ps({},y),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var r=ls(a.a.mark((function r(){var i,s,f,h,m,b,g;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=ps({},y.changes),s=ps(ps({},s),{},{data:JSON.stringify(y.changes.data),type:(null===(i=y.changes)||void 0===i?void 0:i.type)||2,enabled:!0,schedule:JSON.stringify([{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]}])}),c(Dn.Info,l("LOADING","Loading")),v(ps(ps({},y),{},{loading:!0})),f={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(s)},r.next=8,fetch("".concat(o.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones"),f);case 8:return h=r.sent,r.next=11,h.json();case 11:m=r.sent,v(ps(ps({},y),{},{changes:m.error?y.changes:{},result:m.result,loading:!1})),m.error?d(ps(ps({},d),{},{loading:!1,error:m.result})):(e.onClose&&e.onClose(),x(!1),_(!1),b=[].concat(us(p.zones),[m.result]),d(ps(ps({},p),{},{loading:!1,zones:b})),g=ps(ps({},t),{},{zones:b}),n&&n(g),c(Dn.Success,l("DELIVERYZONE_ADDED","Delivery zone added"))),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(0),v(ps(ps({},y),{},{result:{error:!0,result:r.t0.message},loading:!1}));case 19:case"end":return r.stop()}}),r,null,[[0,16]])})));return function(){return r.apply(this,arguments)}}(),U=function(){var e=ls(a.a.mark((function e(r){var i,s,f,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dn.Info,l("LOADING","Loading")),d(ps(ps({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=6,fetch("".concat(o.root,"/business/").concat(null==t?void 0:t.id,"/deliveryzones/").concat(r),i);case 6:return s=e.sent,e.next=9,s.json();case 9:(f=e.sent).error?d(ps(ps({},d),{},{loading:!1,error:f.result})):(h=p.zones.filter((function(e){return(null==e?void 0:e.id)!==r})),d(ps(ps({},p),{},{loading:!1,zones:h})),y=ps(ps({},t),{},{zones:h}),n&&n(y),c(Dn.Success,l("DELIVERYZONE_DELETED","Business delivery zone deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(ps(ps({},d),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t,r,n,o,a;Object.keys(y.changes).length&&(""===(null===(e=y.changes)||void 0===e?void 0:e.name)||""===(null===(t=y.changes)||void 0===t?void 0:t.minimum)||""===(null===(r=y.changes)||void 0===r?void 0:r.price)?j({name:""===(null===(n=y.changes)||void 0===n?void 0:n.name),minimum:""===(null===(o=y.changes)||void 0===o?void 0:o.minimum),price:""===(null===(a=y.changes)||void 0===a?void 0:a.price)}):I||E||k())}),[y.changes,I,E]),Object(i.useEffect)((function(){null!=t&&t.zones&&d(ps(ps({},p),{},{zones:null==t?void 0:t.zones}))}),[t]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,ss({},e,{formState:y,businessDeliveryZonesState:p,handleChangeInput:function(e,t){g(t),v(ps(ps({},y),{},{changes:ps(ps({},y.changes),{},ds({},e.target.name,e.target.value))}))},handleChangeActiveState:function(e){g(e);var t=p.zones.find((function(t){return(null==t?void 0:t.id)===e}));v(ps(ps({},y),{},{changes:ps(ps({},y.changes),{},{enabled:!t.enabled})}))},handleDeleteBusinessDeliveryZone:U,errors:w,setErrors:j,cleanErrors:function(){return j({})},handleZoneType:function(e,t){g(t),v(ps(ps({},y),{},{changes:ps(ps({},y.changes),{},{type:e})}))},handleChangeZoneData:function(e,t){g(t),v(ps(ps({},y),{},{changes:ps(ps({},y.changes),{},{data:e})}))},isEdit:E,setIsEdit:P,isAddMode:I,setIsAddMode:x,isAddValid:T,setIsAddValid:_,handleUpdateBusinessDeliveryZone:k,handleAddBusinessDeliveryZone:D,cleanFormState:function(){return v(ps(ps({},y),{},{changes:{}}))}})))};function bs(){return bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bs.apply(this,arguments)}function gs(e){return function(e){if(Array.isArray(e))return Is(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Os(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ws(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Os(a,n,o,i,s,"next",e)}function s(e){Os(a,n,o,i,s,"throw",e)}i(void 0)}))}}function js(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ss(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?js(Object(r),!0).forEach((function(t){Es(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):js(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Es(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ps(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Cs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cs(e,t){if(e){if("string"==typeof e)return Is(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Is(e,t):void 0}}function Is(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}ms.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ms.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xs=function(e){var t=e.asDashboard,r=e.business,n=e.businessId,o=e.propsToFetch,u=e.UIComponent,c=e.handleSucessUpdateBusiness,l=e.handleSucessRemoveBusiness,f=e.handleSucessAddBusiness,p=Ps(nr(),1)[0],d=Ps(dr(),1)[0],h=Ps(Fn(),2)[1].showToast,y=Ps(Lr(),2)[1],v=Ps(Object(i.useState)({business:null,loading:!0,error:null}),2),m=v[0],b=v[1],g=Ps(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=Ps(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),S=j[0],E=j[1],P=function(){var e=ws(a.a.mark((function e(){var r,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Ss(Ss({},m),{},{loading:!0})),r=t?p.setAccessToken(d.token).businesses(n).asDashboard():p.setAccessToken(d.token).businesses(n).select(o),e.next=5,r.get();case 5:i=e.sent,s=i.content.result,u=Array.isArray(s)?null:s,b(Ss(Ss({},m),{},{loading:!1,business:u})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),b(Ss(Ss({},m),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=ws(a.a.mark((function e(t){var r,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dn.Info,y("LOADING","Loading")),w(Ss(Ss({},O),{},{loading:!0})),e.next=5,p.setAccessToken(d.token).businesses(n).save({enabled:t});case 5:r=e.sent,o=r.content,i=o.error,s=o.result,w(Ss(Ss({},O),{},{loading:!1,error:i?s:null})),i||(b(Ss(Ss({},m),{},{business:s})),h(Dn.Success,y("BUSINESS_UPDATED","Business updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Ss(Ss({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var t=ws(a.a.mark((function t(){var r,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(Dn.Info,y("LOADING","Loading")),w(Ss(Ss({},O),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},t.next=6,fetch("".concat(p.root,"/business/").concat(n),r);case 6:return o=t.sent,t.next=9,o.json();case 9:i=t.sent,w(Ss(Ss({},O),{},{loading:!1,error:i.error?i.result:null})),i.error||(h(Dn.Success,y("BUSINESS_DELETED","Business deleted")),l&&l(n),e.onClose&&e.onClose()),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),w(Ss(Ss({},O),{},{loading:!1,error:[t.t0.message]}));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}(),x=function(){var e=ws(a.a.mark((function e(){var t,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dn.Info,y("LOADING","Loading")),w(Ss(Ss({},O),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},e.next=6,fetch("".concat(p.root,"/business/").concat(n,"/duplicate"),t);case 6:return r=e.sent,e.next=9,r.json();case 9:o=e.sent,w(Ss(Ss({},O),{},{loading:!1,error:o.error?o.result:null})),o.error||(f&&f(null==o?void 0:o.result),h(Dn.Success,y("BUSINESS_DUPLICATED","Business duplicated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),w(Ss(Ss({},O),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=ws(a.a.mark((function e(t){var r,o,i,s,u,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dn.Info,y("LOADING","Loading")),w(Ss(Ss({},O),{},{loading:!0})),e.next=5,p.setAccessToken(d.token).businesses(n).save({owners:t});case 5:r=e.sent,o=r.content,i=o.error,s=o.result,w(Ss(Ss({},O),{},{loading:!1,error:i?s:null})),i||(c=null==m||null===(u=m.business)||void 0===u?void 0:u.owners.filter((function(e){return t.includes(e.id)})),l=Ss(Ss({},null==m?void 0:m.business),{},{owners:c}),b(Ss(Ss({},m),{},{business:l})),h(Dn.Success,y("BUSINESS_OWNER_DELETED","Business owner deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Ss(Ss({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=ws(a.a.mark((function e(t,r){var o,i,s,u,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dn.Info,y("LOADING","Loading")),w(Ss(Ss({},O),{},{loading:!0})),e.next=5,p.setAccessToken(d.token).businesses(n).save({owners:t});case 5:o=e.sent,i=o.content,s=i.error,u=i.result,w(Ss(Ss({},O),{},{loading:!1,error:s?u:null})),s||(l=[].concat(gs(null==m||null===(c=m.business)||void 0===c?void 0:c.owners),[r]),f=Ss(Ss({},null==m?void 0:m.business),{},{owners:l}),b(Ss(Ss({},m),{},{business:f})),h(Dn.Success,y("BUSINESS_OWNER_ADDED","Business owner added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(Ss(Ss({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),_=function(){var e=ws(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(Ss(Ss({},S),{},{loading:!0})),h(Dn.Info,y("LOADING","Loading")),e.next=5,p.businesses(n).save(S.changes,{accessToken:d.token});case 5:t=e.sent,E(Ss(Ss({},S),{},{changes:t.content.error?S.changes:{},result:t.content,loading:!1})),t.content.error||(b(Ss(Ss({},m),{},{business:Ss(Ss({},m.business),t.content.result)})),h(Dn.Success,y("BUSINESS_UPDATED","Business updated"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),E(Ss(Ss({},S),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){null!=m&&m.business&&c&&c(null==m?void 0:m.business)}),[null==m?void 0:m.business]),Object(i.useEffect)((function(){r?b(Ss(Ss({},m),{},{loading:!1,business:r})):P()}),[n,r]),s.a.createElement(s.a.Fragment,null,u&&s.a.createElement(u,bs({},e,{businessState:m,formState:S,setFormState:E,cleanFormState:function(e){return E(Ss(Ss({},S),e))},handleChangeActiveBusiness:C,handleDuplicateBusiness:x,handleDeleteBusiness:I,handleDeleteBusinessOwner:A,handleAddBusinessOwner:T,handleUpdateBusinessClick:_,handleUpdateBusinessState:function(e){var t=Ss({},null==m?void 0:m.business);Object.assign(t,e),b(Ss(Ss({},m),{},{business:t}))},handleSuccessAddBusinessItem:function(e,t){var r=[].concat(gs(null==m?void 0:m.business[e]),[t]);b(Ss(Ss({},m),{},{business:Ss(Ss({},null==m?void 0:m.business),{},Es({},e,r))}))},handleSuccessDeleteBusinessItem:function(e,t){var r=null==m?void 0:m.business[e].filter((function(e){return e.id!==t}));b(Ss(Ss({},m),{},{business:Ss(Ss({},null==m?void 0:m.business),{},Es({},e,r))}))}})))};function As(){return As=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},As.apply(this,arguments)}function Ts(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function _s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ts(a,n,o,i,s,"next",e)}function s(e){Ts(a,n,o,i,s,"throw",e)}i(void 0)}))}}function ks(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ds(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ks(Object(r),!0).forEach((function(t){Us(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ks(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Us(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ls(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}xs.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),businessId:c.a.oneOfType([c.a.number,c.a.string]),business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},xs.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","address","alcohol","city","city_id","description","delivery_price","distance","delivery_time","enabled","featured","food","gallery","groceries","header","laundry","logo","location","metafields","name","offers","open","owners","pickup_time","reviews","schedule","slug","types"]};var Bs=function(e){var t,r,n=e.UIComponent,o=e.business,u=e.handleSuccessUpdate,c=e.handleSucessAddBusiness,l=Ls(nr(),1)[0],f=Ls(dr(),1)[0],p=Ls(en(),1)[0].configs,d=Ls(Object(i.useState)({loading:!1,business:null,error:null}),2),h=d[0],y=d[1],v=Ls(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),m=v[0],b=v[1],g=Ls(Object(i.useState)(null),2),O=g[0],w=g[1],j=null,S=null==p||null===(t=p.google_maps_api_key)||void 0===t?void 0:t.value,E={minimum:0,delivery_price:0,tax:0,tax_type:1,service_fee:0,enabled:!0,owner_id:null==f||null===(r=f.user)||void 0===r?void 0:r.id,schedule:[{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]},{enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:59}}]}]},P=function(){var e=_s(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Ds(Ds({},m),{},{loading:!0})),e.next=4,l.businesses(null==o?void 0:o.id).save(m.changes,{accessToken:f.token});case 4:t=e.sent,b(Ds(Ds({},m),{},{changes:t.content.error?m.changes:{},result:t.content,loading:!1})),t.content.error||(y(Ds(Ds({},h),{},{businesses:Ds(Ds({},h.business),t.content)})),u&&u(t.content.result)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),b(Ds(Ds({},m),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=_s(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(Ds(Ds({},m),{},{loading:!0})),t=Ds(Ds({},m.changes),E),e.next=5,l.businesses().save(t,{accessToken:f.token});case 5:r=e.sent,b(Ds(Ds({},m),{},{changes:r.content.error?m.changes:{},result:r.content,loading:!1})),r.content.error||(y(Ds(Ds({},h),{},{businesses:Ds(Ds({},h.business),r.content)})),c&&c(r.content.result)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),b(Ds(Ds({},m),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=_s(a.a.mark((function e(t,r){var n,o,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,o=Math.floor(n.getTime()/1e3),i="https://maps.googleapis.com/maps/api/timezone/json?location=".concat(t,",").concat(r,"&timestamp=").concat(o,"&key=").concat(S),e.next=5,fetch(i,{method:"GET"});case 5:return s=e.sent,e.next=8,s.json();case 8:return u=e.sent,e.abrupt("return",null==u?void 0:u.timeZoneId);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),x=function(){var e=_s(a.a.mark((function e(t){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(null==t||null===(r=t.location)||void 0===r?void 0:r.lat,null==t||null===(n=t.location)||void 0===n?void 0:n.lng);case 2:o=e.sent,w({address:null==t?void 0:t.address,location:Ds(Ds({},null==t?void 0:t.location),{},{zipcode:null!=t&&t.zipcode?t.zipcode:-1,zoom:15}),timezone:o});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){O&&b(Ds(Ds({},m),{},{changes:Ds(Ds({},null==m?void 0:m.changes),O)}))}),[O]),Object(i.useEffect)((function(){o&&y(Ds(Ds({},h),{},{business:o}))}),[o]),s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,As({},e,{cleanFormState:function(e){return b(Ds(Ds({},m),e))},formState:m,businessState:h,setFormState:b,handleChangeInput:function(e,t){var r={};t?Object.values(e).map((function(e){r=Ds(Ds({},r),{},Us({},e.name,e.value))})):r=Us({},e.target.name,e.target.value),b(Ds(Ds({},m),{},{changes:Ds(Ds({},m.changes),r)}))},handleButtonUpdateClick:P,handlechangeImage:function(e,t){var r=new window.FileReader;r.readAsDataURL(e),r.onload=function(){b(Ds(Ds({},m),{},{changes:Ds(Ds({},m.changes),{},Us({},t,r.result))}))},r.onerror=function(e){return console.log(e)}},handleAddBusiness:C,handleChangeAddress:x,handleChangeCenter:function(e){var t;clearTimeout(j),j=setTimeout(_s(a.a.mark((function r(){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,I(null==e?void 0:e.lat(),null==e?void 0:e.lng());case 2:t=r.sent,w({location:{lat:null==e?void 0:e.lat(),lng:null==e?void 0:e.lng(),zoom:15,zipcode:-1},timezone:t});case 4:case"end":return r.stop()}}),r)}))),200)},handleChangeSwtich:function(e,t){var r=Ds(Ds({},m.changes),{},Us({},e,t));b(Ds(Ds({},m),{},{changes:r}))}})))};function Ms(){return Ms=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ms.apply(this,arguments)}function Rs(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Ns(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Rs(a,n,o,i,s,"next",e)}function s(e){Rs(a,n,o,i,s,"throw",e)}i(void 0)}))}}function zs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(r),!0).forEach((function(t){qs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ys(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Bs.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Bs.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Js=function(e){var t=e.business,r=e.isVideoGallery,n=e.isImageGallery,o=e.UIComponent,u=e.handleSucessAddBusinessGallery,c=e.handleSucessDeleteBusinessGallery,l=Ys(nr(),1)[0],f=Ys(dr(),1)[0].token,p=Ys(Fn(),2)[1].showToast,d=Ys(Lr(),2)[1],h=Ys(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),y=h[0],v=h[1],m=Ys(Object(i.useState)([]),2),b=m[0],g=m[1],O=Ys(Object(i.useState)([]),2),w=O[0],j=O[1],S=function(){var e=Ns(a.a.mark((function e(){var o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,d("LOADING","Loading")),v(Gs(Gs({},y),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(y.changes)},e.next=6,fetch("".concat(l.root,"/business/").concat(t.id,"/gallery"),o);case 6:return i=e.sent,e.next=9,i.json();case 9:s=e.sent,v(Gs(Gs({},y),{},{changes:s.error?y.changes:{},result:s,loading:!1})),s.error||(r&&p(Dn.Success,d("GALLERY_VIDEO_ADDED")),n&&p(Dn.Success,d("GALLERY_IMAGE_ADDED")),u&&u(s.result)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v(Gs(Gs({},y),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Ns(a.a.mark((function e(r){var n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,d("LOADING","Loading")),v(Gs(Gs({},y),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(t.id,"/gallery/").concat(r,"?business_id=").concat(t.id),n);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,v(Gs(Gs({},y),{},{loading:!1})),i.error||(p(Dn.Success,d("GALLERY_ITEM_DELETED")),c&&c(r)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v(Gs(Gs({},y),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,r,n=null==t||null===(e=t.gallery)||void 0===e?void 0:e.filter((function(e){return e.file})),o=null==t||null===(r=t.gallery)||void 0===r?void 0:r.filter((function(e){return e.video}));g(n),j(o)}),[t]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,Ms({},e,{businessSchedule:(null==t?void 0:t.schedule)||[],businessPhotos:b||[],businessVideos:w||[],formState:y,handlechangeImage:function(e){var r=new window.FileReader;r.readAsDataURL(e),r.onload=function(){v(Gs(Gs({},y),{},{changes:Gs(Gs({},y.changes),{},{business_id:t.id,file:r.result,type:1})}))},r.onerror=function(e){return console.log(e)}},cleanFormState:function(e){return v(Gs(Gs({},y),e))},handleChangeBusinessVideo:function(e){v(Gs(Gs({},y),{},{changes:Gs(Gs({},y.changes),{},{business_id:null==t?void 0:t.id,type:2,video:e.target.value})}))},handleUpdateBusinessGallery:S,handleDeleteBusinessGallery:E})))};function Vs(){return Vs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vs.apply(this,arguments)}function Hs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ws(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hs(Object(r),!0).forEach((function(t){Ks(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ks(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xs(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Zs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Js.propTypes={UIComponent:c.a.elementType,business:c.a.object,optionToShow:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Js.defaultProps={business:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var eu=function(e){var t=e.UIComponent,r=Zs(dr(),1)[0],n=r.token,o=r.loading,u=Zs(nr(),1)[0],c=Zs(Object(i.useState)({loading:!1,printers:[],error:null}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,r,i,s,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(Ws(Ws({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r="".concat(u.root,"/printers"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,c=s.error,p=s.result,f(Ws(Ws({},l),{},c?{loading:!1,error:p}:{loading:!1,printers:p})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),f(Ws(Ws({},l),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Xs(a,n,o,i,s,"next",e)}function s(e){Xs(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Vs({},e,{printersListState:l})))};function tu(){return tu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tu.apply(this,arguments)}function ru(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}eu.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},eu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ou=function(e){var t=e.googleMapsControls,r=e.business,n=e.optionToShow,o=e.UIComponent,a=ru(Object(i.useState)(n),2),u=a[0],c=a[1],l=ru(Object(i.useState)([]),2),f=l[0],p=l[1],d=ru(Object(i.useState)([]),2),h=d[0],y=d[1],v=ru(Object(i.useState)({}),2),m=v[0],b=v[1];return Object(i.useEffect)((function(){var e,n,o=null==r||null===(e=r.gallery)||void 0===e?void 0:e.filter((function(e){return e.file})),a=null==r||null===(n=r.gallery)||void 0===n?void 0:n.filter((function(e){return e.video})),i={location:null==r?void 0:r.location,address:null==r?void 0:r.address,address_notes:null==r?void 0:r.address_notes,googleMapsControls:t};p(o),y(a),b(i)}),[r]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,tu({},e,{businessSchedule:(null==r?void 0:r.schedule)||[],businessPhotos:f||[],businessVideos:h||[],businessLocation:m||{},optionToShow:u,onChangeOption:function(e){c(e)}})))};function au(){return au=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},au.apply(this,arguments)}function iu(e){return function(e){if(Array.isArray(e))return du(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function su(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?su(Object(r),!0).forEach((function(t){cu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):su(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lu(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function fu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||pu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pu(e,t){if(e){if("string"==typeof e)return du(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?du(e,t):void 0}}function du(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}ou.propTypes={UIComponent:c.a.elementType,business:c.a.object,optionToShow:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ou.defaultProps={business:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},Gr.a.extend(Yr.a);var hu=function(e){var t=e.UIComponent,r=e.initialOrderType,n=e.initialFilterKey,o=e.initialFilterValue,u=e.isSortByReview,c=e.isSearchByName,l=e.isSearchByDescription,f=e.propsToFetch,p=e.onBusinessClick,d=fu(Object(i.useState)({businesses:[],loading:!0,error:null}),2),h=d[0],y=d[1],v=fu(Object(i.useState)({currentPage:0,pageSize:10,totalItems:null,totalPages:null}),2),m=v[0],b=v[1],g=fu(Object(i.useState)(null),2),O=g[0],w=g[1],j=fu(Object(i.useState)(""),2),S=j[0],E=j[1],P=fu(Object(i.useState)(null),2),C=P[0],I=P[1],x=fu(vn(),1)[0],A=fu(nr(),1)[0],T=fu(Object(i.useState)({}),2),_=T[0],k=T[1],D=new RegExp(/^[A-Za-z0-9\s]+$/g),U=function(){var e,t=(e=a.a.mark((function e(t){var n,o,i,s,p,d,v,g,w,j,E,P,I,T,U,L,F,B,M,R,N,z,G,q,Y,$,J,V;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(uu(uu({},h),{},{loading:!0})),j={location:"".concat(null===(n=x.options)||void 0===n||null===(o=n.address)||void 0===o||null===(i=o.location)||void 0===i?void 0:i.lat,",").concat(null===(s=x.options)||void 0===s||null===(p=s.address)||void 0===p||null===(d=p.location)||void 0===d?void 0:d.lng),type:r||(null===(v=x.options)||void 0===v?void 0:v.type)||1},u||(E={page:t?1:m.currentPage+1,page_size:m.pageSize},j=uu(uu({},j),E)),null!==(g=x.options)&&void 0!==g&&g.moment&&(a=null===(w=x.options)||void 0===w?void 0:w.moment,H="YYYY-MM-DD HH:mm:ss",Gr()(a,H).format(H)===a)&&(I=Gr.a.utc(null===(P=x.options)||void 0===P?void 0:P.moment,"YYYY-MM-DD HH:mm:ss").local().unix(),j.timestamp=I),T=null,U=[],O&&U.push({attribute:O,value:!0}),C&&(1===(null===(L=x.options)||void 0===L?void 0:L.type)&&U.push({attribute:"delivery_time",value:{condition:"<=",value:C}}),2===(null===(F=x.options)||void 0===F?void 0:F.type)&&U.push({attribute:"pickup_time",value:{condition:"<=",value:C}})),S&&(B=[],M=D.test(S),c&&B.push({attribute:"name",value:{condition:"ilike",value:M?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),l&&B.push({attribute:"description",value:{condition:"ilike",value:M?encodeURI("%".concat(S,"%")):"%".concat(S,"%")}}),U.push({conector:"OR",conditions:B})),U.length&&(T={conditions:U,conector:"AND"}),R={},_.businesses=R,k(uu({},_)),N=T?A.businesses().select(f).parameters(j).where(T):A.businesses().select(f).parameters(j),e.next=17,N.get({cancelToken:R});case 17:z=e.sent,G=z.content,q=G.result,Y=G.pagination,u?($=q.sort((function(e,t){return t.reviews.total-e.reviews.total})),h.businesses=$):h.businesses=t?q:[].concat(iu(h.businesses),iu(q)),y(uu(uu({},h),{},{loading:!1})),J=0,Y.current_page!==Y.total_pages&&(V=Y.total-h.businesses.length,J=V<Y.page_size?V:Y.page_size),b(uu(uu({},m),{},{currentPage:Y.current_page,totalPages:Y.total_pages,totalItems:Y.total,nextPageItems:J})),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&y(uu(uu({},h),{},{loading:!1,error:[e.t0.message]}));case 31:case"end":return e.stop()}var a,H}),e,null,[[0,28]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){lu(a,n,o,i,s,"next",e)}function s(e){lu(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=_.businesses;return function(){e&&e.cancel()}}),[_.businesses]),Object(i.useEffect)((function(){var e,t;!x.loading&&null!==(e=x.options)&&void 0!==e&&null!==(t=e.address)&&void 0!==t&&t.location&&U(!0)}),[JSON.stringify(x.options),O,S,C]),Object(i.useEffect)((function(){if(n||o)switch(n){case"category":L(o);break;case"timeLimit":B(o);break;case"search":F(o)}}),[n,o]);var L=function(e){e!==O&&(y(uu(uu({},h),{},{businesses:[],loading:!0})),w(e))},F=function(e){y(uu(uu({},h),{},!!e!=!!S?{businesses:[],loading:!0}:{loading:!1})),E(e)},B=function(e){y(uu(uu({},h),{},!!e!=!!C?{businesses:[],loading:!0}:{loading:!1})),I(e)};return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,au({},e,{businessesList:h,paginationProps:m,searchValue:S,timeLimitValue:C,businessTypeSelected:O,getBusinesses:U,handleChangeSearch:F,handleChangeTimeLimit:B,handleBusinessClick:function(e){p&&p(e)},handleChangeBusinessType:L})))};function yu(){return yu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yu.apply(this,arguments)}function vu(e){return function(e){if(Array.isArray(e))return Eu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Su(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mu(Object(r),!0).forEach((function(t){gu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ou(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function wu(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ou(a,n,o,i,s,"next",e)}function s(e){Ou(a,n,o,i,s,"throw",e)}i(void 0)}))}}function ju(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Su(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Su(e,t){if(e){if("string"==typeof e)return Eu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Eu(e,t):void 0}}function Eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}hu.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),onBusinessClick:c.a.func},hu.defaultProps={propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var Pu=function(e){var t=e.UIComponent,r=e.userId,n=e.busienssesPropsToFetch,o=ju(nr(),1)[0],u=ju(dr(),1)[0].token,c=ju(Lr(),2)[1],l=ju(Fn(),2)[1].showToast,f=ju(Object(i.useState)({businesses:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=ju(Object(i.useState)([]),2),y=h[0],v=h[1],m=ju(Object(i.useState)({loading:!1,error:null}),2),b=m[0],g=m[1],O=function(){var e=wu(a.a.mark((function e(){var t,n,i,s,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(bu(bu({},b),{},{loading:!0})),t=o.setAccessToken(u).users(r).select(["businesses"]),e.next=5,t.get();case 5:n=e.sent,i=n.content,s=i.error,c=i.result,s?g({loading:!1,error:c}):(g({loading:!1,error:null}),f=null===(l=c.businesses)||void 0===l?void 0:l.reduce((function(e,t){return[].concat(vu(e),[t.id])}),[]),v(f)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=wu(a.a.mark((function e(){var t,r,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(bu(bu({},p),{},{loading:!0})),t=o.setAccessToken(u).businesses().select(n).asDashboard(),e.next=5,t.get();case 5:r=e.sent,i=r.content,s=i.error,c=i.result,s||d(bu(bu({},p),{},{businesses:c,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(bu(bu({},p),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=wu(a.a.mark((function e(){var t,n,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,c("LOADING","Loading")),g({loading:!0,error:null}),e.next=5,o.setAccessToken(u).users(r).save({businesses:y});case 5:t=e.sent,n=t.content,i=n.error,s=n.result,i?g({loading:!1,error:s}):(g({loading:!1,error:null}),l(Dn.Success,c("BUSINESS_SAVED","Business saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){e.businesses?d(bu(bu({},p),{},{businesses:e.businesses,loading:!1})):w()}),[e.businesses]),Object(i.useEffect)((function(){O()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,yu({},e,{actionState:b,businessesState:p,selectedBusinessIds:y,handleSelectBusiness:function(e,t){if(t)v([].concat(vu(y),[e]));else{var r=y.filter((function(t){return t!==e}));v(r)}},handleSelectAllBusiness:function(e){if(e){var t,r=null===(t=p.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(vu(e),[t.id])}),[]);v(r)}else v([])},handleUpdateBusinesses:j})))};function Cu(){return Cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cu.apply(this,arguments)}function Iu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Iu(Object(r),!0).forEach((function(t){Au(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Au(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tu(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function _u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Tu(a,n,o,i,s,"next",e)}function s(e){Tu(a,n,o,i,s,"throw",e)}i(void 0)}))}}function ku(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Du(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Du(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Du(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Pu.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Pu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var Uu=function(e){var t=e.business,r=e.UIComponent,n=e.handleSuccessBusinessMenu,o=ku(nr(),1)[0],u=ku(dr(),1)[0].token,c=ku(Lr(),2)[1],l=ku(Fn(),2)[1].showToast,f=ku(Object(i.useState)({menus:[],menusShared:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=ku(Object(i.useState)(!1),2),y=h[0],v=h[1],m=ku(Object(i.useState)({sites:[],loading:!0,error:null}),2),b=m[0],g=m[1],O=function(){var e=_u(a.a.mark((function e(){var r,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(xu(xu({},p),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=5,fetch("".concat(o.root,"/business/").concat(t.id,"/menus"),r);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error?d(xu(xu({},p),{},{loading:!1,error:i.result})):d(xu(xu({},p),{},{loading:!1,menus:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(xu(xu({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=_u(a.a.mark((function e(r,i){var s,f,h,v,m,b,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,c("LOADING","Loading")),d(xu(xu({},p),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify({enabled:i})},f=y?"".concat(o.root,"/business/").concat(t.id,"/menus_shared/").concat(r):"".concat(o.root,"/business/").concat(t.id,"/menus/").concat(r),e.next=7,fetch(f,s);case 7:return h=e.sent,e.next=10,h.json();case 10:(v=e.sent).error?d(xu(xu({},p),{},{loading:!1,error:v.result})):(m={},y?(g=p.menusShared.filter((function(e){var t;e.id===r&&(e=xu(xu(xu({},e),v.result),{},{id:null===(t=e)||void 0===t?void 0:t.id}));return!0})),d(xu(xu({},p),{},{loading:!1,menusShared:g})),m=xu(xu({},t),{},{menus_shared:g})):(b=p.menus.filter((function(e){return e.id===r&&Object.assign(e,v.result),!0})),d(xu(xu({},p),{},{loading:!1,menus:b})),m=xu(xu({},t),{},{menus:b})),n&&n(m),l(Dn.Success,c("MENU_SAVED","Products catalog saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(xu(xu({},p),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}(),j=function(){var e=_u(a.a.mark((function e(r){var i,s,f,h,v,m,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,c("LOADING","Loading")),d(xu(xu({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},s=y?"".concat(o.root,"/business/").concat(t.id,"/menus_shared/").concat(r):"".concat(o.root,"/business/").concat(t.id,"/menus/").concat(r),e.next=7,fetch(s,i);case 7:return f=e.sent,e.next=10,f.json();case 10:(h=e.sent).error?d(xu(xu({},p),{},{loading:!1,error:h.result})):(v={},y?(b=p.menusShared.filter((function(e){return e.id!==r})),d(xu(xu({},p),{},{loading:!1,menusShared:b})),v=xu(xu({},t),{},{menus_shared:b})):(m=p.menus.filter((function(e){return e.id!==r})),d(xu(xu({},p),{},{loading:!1,menus:m})),v=xu(xu({},t),{},{menus:m})),n&&n(v),l(Dn.Success,c("MENU_DELETED","Products catalog deleted"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(xu(xu({},p),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=_u(a.a.mark((function e(){var r,n,i,s,c,l,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=4,fetch("".concat(o.root,"/business/").concat(t.id,"/menus?params=sites"),r);case 4:return n=e.sent,e.next=7,n.json();case 7:if(i=e.sent,s=i.result,i.error){e.next=29;break}return c={},s.forEach((function(e){c=xu(xu({},c),{},Au({},e.id,{id:e.id,sites:e.sites}))})),e.prev=13,e.next=16,fetch("".concat(o.root,"/sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u),"x-app-x":null==o?void 0:o.appId}});case 16:return l=e.sent,e.next=19,l.json();case 19:f=e.sent,h=f.result,g(xu(xu({},b),{},{loading:!1,sites:h})),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(13),d(xu(xu({},p),{},{loading:!1,error:[e.t0.message]}));case 27:e.next=30;break;case 29:d(xu(xu({},p),{},{loading:!1,error:s}));case 30:e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),d(xu(xu({},p),{},{loading:!1,error:[e.t1.message]}));case 35:case"end":return e.stop()}}),e,null,[[0,32],[13,24]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){null!=t&&t.menus?d(xu(xu({},p),{},{menus:null==t?void 0:t.menus,menusShared:null==t?void 0:t.menus_shared})):O()}),[t]),Object(i.useEffect)((function(){S()}),[]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,Cu({},e,{businessMenusState:p,isSelectedSharedMenus:y,sitesState:b,handleChangeBusinessMenuActiveState:w,handleDeleteBusinessMenu:j,setIsSelectedSharedMenus:v})))};function Lu(){return Lu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lu.apply(this,arguments)}function Fu(e){return function(e){if(Array.isArray(e))return Yu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bu(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Mu(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Bu(a,n,o,i,s,"next",e)}function s(e){Bu(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Ru(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ru(Object(r),!0).forEach((function(t){zu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ru(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||qu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qu(e,t){if(e){if("string"==typeof e)return Yu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yu(e,t):void 0}}function Yu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Uu.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Uu.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $u=function(e){var t,r=e.isSearchByName,n=e.isSearchByDescription,o=e.slug,u=e.categoryId,c=e.productId,l=e.isAllCategoryProducts,f=e.isInitialRender,p=e.ordering,d=e.UIComponent,h=Gu(dr(),1)[0].token,y=Gu(Nr(),1)[0],v=Gu(Object(i.useState)(null),2),m=v[0],b=v[1],g=Gu(Object(i.useState)(null),2),O=g[0],w=g[1],j=Gu(Object(i.useState)({business:{},menus:null,loading:!0,error:null}),2),S=j[0],E=j[1],P=Gu(Object(i.useState)({}),2),C=P[0],I=P[1],x=Gu(Object(i.useState)({}),2),A=x[0],T=x[1],_=Gu(Object(i.useState)({product:null,loading:!1,error:null}),2),k=_[0],D=_[1],U=Gu(Object(i.useState)({values:[]}),2),L=U[0],F=U[1],B=Gu(Object(i.useState)(o),2),M=B[0],R=B[1],N=Gu(Object(i.useState)(!1),2),z=N[0],G=N[1],q=Gu(Object(i.useState)({}),2),Y=q[0],$=q[1],J=Gu(Object(i.useState)({}),2),V=J[0],H=J[1],W=Gu(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),K=W[0],X=W[1],Z=Gu(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),Q=Z[0],ee=Z[1],te={loading:!0,pagination:{currentPage:0,pageSize:20,totalItems:null,totalPages:0,nextPageItems:10},products:[]},re=Gu(Object(i.useState)(te),2),ne=re[0],oe=re[1],ae=Gu(Object(i.useState)(null),2),ie=ae[0],se=ae[1],ue=Gu(Object(i.useState)(!1),2),ce=ue[0],le=ue[1],fe=function(e,t){return!O||(e&&e.toLowerCase().includes(O.toLowerCase())&&r||t&&t.toLowerCase().includes(O.toLowerCase())&&n)},pe=function(){var e=Mu(a.a.mark((function e(t){var o,i,s,u,c,l,f,d,h,y,v,b,g,w,j,E,P,x,_,k,D,U,L,F,B,M,R,N;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=S&&null!==(o=S.business)&&void 0!==o&&o.lazy_load_products_recommended){e.next=5;break}return i=Nu(Nu({},te),{},{loading:!1}),m?(Fu(null==S||null===(s=S.business)||void 0===s?void 0:s.categories).forEach((function e(t){(null==t?void 0:t.id)===(null==m?void 0:m.id)&&(l=t),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),(f=null===(u=l)||void 0===u||null===(c=u.products)||void 0===c?void 0:c.filter((function(e){return fe(e.name,e.description)})))||(f=null==m||null===(d=m.products)||void 0===d?void 0:d.filter((function(e){return fe(e.name,e.description)}))),i.products=f||[]):(v=null==S||null===(h=S.business)||void 0===h||null===(y=h.categories)||void 0===y?void 0:y.reduce((function(e,t){return t.products?[].concat(Fu(e),Fu(t.products)):Fu(e)}),[]).filter((function(e){return fe(e.name,e.description)})),i.products=v||[]),oe(Nu({},i)),e.abrupt("return");case 5:if(b=O?"search":"featured"===(null==m?void 0:m.id)?"featured":null!=m&&m.id?"categoryId:".concat(null==m?void 0:m.id):"all",g=C[b]||te,w=g.pagination,t||!(w.currentPage>0)||w.currentPage!==w.totalPages){e.next=11;break}return oe(Nu(Nu({},g),{},{loading:!1})),e.abrupt("return");case 11:return z||oe(Nu(Nu({},g),{},{loading:!0})),j={page:t?1:w.currentPage+1,page_size:w.pageSize},null,P=[],O&&(r&&P.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}),n&&P.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}})),E={conditions:P,conector:"OR"},e.prev=17,k=null!=m&&m.id&&"featured"!==(null==m?void 0:m.id)?p.businesses(null===(x=S.business)||void 0===x?void 0:x.id).categories(null==m?void 0:m.id).products():p.businesses(null===(_=S.business)||void 0===_?void 0:_.id).products(),D={},A.products=D,T(Nu({},A)),U=E.conditions.length>0?k.parameters(j).where(E):k.parameters(j),e.next=25,U.get({cancelToken:D});case 25:L=e.sent,F=L.content,B=F.error,M=F.result,R=F.pagination,B?se(M):(N={pagination:Nu(Nu({},g.pagination),{},{currentPage:R.current_page,totalItems:R.total,totalPages:R.total_pages}),loading:!1,products:t?Fu(M):[].concat(Fu(g.products),Fu(M))},C[b]=N,oe(Nu({},N)),I(Nu({},C))),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(17),se([e.t0.message]);case 36:case"end":return e.stop()}}),e,null,[[17,33]])})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Mu(a.a.mark((function e(){var t,r,n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u&&c&&null!==(t=S.business)&&void 0!==t&&t.id)){e.next=16;break}return e.prev=1,D(Nu(Nu({},k),{},{loading:!0})),n={},A.product=n,e.next=7,p.businesses(null===(r=S.business)||void 0===r?void 0:r.id).categories(u).products(c).get({cancelToken:n});case 7:o=e.sent,i=o.content.result,s=Array.isArray(i)?null:i,D(Nu(Nu({},k),{},{product:s,loading:!1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),D(Nu(Nu({},k),{},{loading:!1,error:[e.t0]}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Mu(a.a.mark((function e(){var t,r,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},X(Nu(Nu({},K),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/taxes"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}});case 4:return r=e.sent,e.next=7,r.json();case 7:if(n=e.sent,o=n.error,i=n.result,o){e.next=14;break}return i.forEach((function(e){return t["id:".concat(null==e?void 0:e.id)]=e})),$(t),e.abrupt("return");case 14:X(Nu(Nu({},K),{},{result:{error:!0,result:t},loading:!1}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Mu(a.a.mark((function e(){var t,r,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},ee(Nu(Nu({},Q),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/fees"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}});case 4:return r=e.sent,e.next=7,r.json();case 7:if(n=e.sent,o=n.error,i=n.result,o){e.next=14;break}return i.forEach((function(e){return t["id:".concat(null==e?void 0:e.id)]=e})),H(t),e.abrupt("return");case 14:ee(Nu(Nu({},Q),{},{result:{error:!0,result:t},loading:!1}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){f&&de()}),[JSON.stringify(null===(t=S.business)||void 0===t?void 0:t.id),f]),Object(i.useEffect)((function(){R(o)}),[o]);var ve=function(){var e=Mu(a.a.mark((function e(){var t,r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(Nu(Nu({},S),{},{loading:!0})),r={},A.business=r,T(Nu({},A)),e.next=7,p.businesses(M).asDashboard().get();case 7:n=e.sent,null!=(o=n.content.result)&&o.categories&&0!==(null==o||null===(t=o.categories)||void 0===t?void 0:t.length)||le(!0),E(Nu(Nu({},S),{},{business:o,loading:!1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),E(Nu(Nu({},S),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),me=function(e){var t,r=e.tax,n=e.isRemove,o=(e.id,Fu(null==S||null===(t=S.business)||void 0===t?void 0:t.categories));E(Nu(Nu({},S),{},{business:Nu(Nu({},S.business),{},{categories:function e(t,r){for(var o=0;o<(null==t?void 0:t.length);o++){for(var a,i=t[o],s=0;s<i.products.length;s++){var u,c,l=i.products[s];n&&(null===(u=l.tax)||void 0===u?void 0:u.id)===(null==r?void 0:r.id)?(l.tax=null,l.tax_id=null):l.tax&&(null===(c=l.tax)||void 0===c?void 0:c.id)===(null==r?void 0:r.id)&&(Object.assign(l.tax,r),l.tax_id=null==r?void 0:r.id)}(null===(a=i.subcategories)||void 0===a?void 0:a.length)>0&&(t.subcategories=e(t.subcategories,r))}return t}(o,r)})}))},be=function(e){var t,r=e.fee,n=e.isRemove,o=Fu(null==S||null===(t=S.business)||void 0===t?void 0:t.categories);E(Nu(Nu({},S),{},{business:Nu(Nu({},S.business),{},{categories:function e(t,r){for(var o=0;o<(null==t?void 0:t.length);o++){for(var a,i=t[o],s=0;s<i.products.length;s++){var u,c,l=i.products[s];n&&(null===(u=l.fee)||void 0===u?void 0:u.id)===(null==r?void 0:r.id)?(l.fee=null,l.fee_id=null):l.fee&&(null===(c=l.fee)||void 0===c?void 0:c.id)===(null==r?void 0:r.id)&&(Object.assign(l.fee,r),l.fee_id=null==r?void 0:r.id)}(null===(a=i.subcategories)||void 0===a?void 0:a.length)>0&&(t.subcategories=e(t.subcategories,r))}return t}(o,r)})}))};return Object(i.useEffect)((function(){var e;if(!S.loading)if(S.loading||!m&&!l){if(null!=S&&null!==(e=S.business)&&void 0!==e&&e.categories){var t;b(null==S||null===(t=S.business)||void 0===t?void 0:t.categories[0])}}else pe(!0)}),[S]),Object(i.useEffect)((function(){null!==O&&pe(!!O)}),[O]),Object(i.useEffect)((function(){pe(!!O)}),[null==m?void 0:m.id]),Object(i.useEffect)((function(){M&&ve()}),[M]),Object(i.useEffect)((function(){var e;if(null!=S&&S.business)return(null===(e=Object.keys(null==S?void 0:S.business))||void 0===e?void 0:e.length)>0?(y.on("tax_changed",me),y.on("fee_changed",be),y.on("tax_deleted",me),y.on("fee_deleted",be),function(){y.off("tax_changed",me),y.off("fee_changed",be),y.off("tax_deleted",be),y.off("fee_deleted",be)}):void 0}),[null==S?void 0:S.business]),Object(i.useEffect)((function(){var e=A.business;return function(){e&&e.cancel&&e.cancel()}}),[A.business]),Object(i.useEffect)((function(){var e=A.products;return function(){e&&e.cancel&&e.cancel()}}),[A.products]),Object(i.useEffect)((function(){he(),ye()}),[]),s.a.createElement(s.a.Fragment,null,d&&s.a.createElement(d,Lu({},e,{errors:ie,categorySelected:m,searchValue:O,categoryState:ne,businessState:S,productModal:k,errorQuantityProducts:ce,handleChangeCategory:function(e,t){var r,n,o;null===e&&null===t&&b(null),(null==e||null===(r=e.target)||void 0===r?void 0:r.closest)&&((null==e||null===(n=e.target)||void 0===n?void 0:n.closest(".business_enable_control"))||e.target.closest(".business_actions"))||(null==t?void 0:t.id)===(null==m?void 0:m.id)||(G(!1),null!=t&&null!==(o=t.subcategories)&&void 0!==o&&o.length&&(null!=t&&t.parent_category_id||(L.values=[]),L.values.includes(null==t?void 0:t.id)?L.values=L.values.filter((function(e){return e!==(null==t?void 0:t.id)})):L.values.push(null==t?void 0:t.id),F(Nu(Nu({},L),{},{values:L.values}))),null===(null==t?void 0:t.id)&&F(Nu(Nu({},L),{},{values:[]})),b(t))},handleChangeSearch:function(e){w(e)},getNextProducts:pe,setCategorySelected:b,setBusinessState:E,handleUpdateBusinessState:function(e){G(!0);var t=Nu({},null==S?void 0:S.business);Object.assign(t,e),m&&t.categories.forEach((function e(t){(null==t?void 0:t.id)===(null==m?void 0:m.id)&&b(t),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),E(Nu(Nu({},S),{},{business:t}))},updateProductModal:function(e){return D(Nu(Nu({},k),{},{product:e}))},openCategories:L.values,setOpenCategories:F,setBusinessSlug:R,handleUpdateCategoryState:function(e){oe(e)},setFormTaxState:X,formTaxState:K,taxes:Y,setTaxes:$,fees:V,setFees:H})))};function Ju(){return Ju=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ju.apply(this,arguments)}function Vu(e){return function(e){if(Array.isArray(e))return tc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ec(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hu(Object(r),!0).forEach((function(t){Ku(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ku(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xu(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Zu(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Xu(a,n,o,i,s,"next",e)}function s(e){Xu(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Qu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||ec(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ec(e,t){if(e){if("string"==typeof e)return tc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tc(e,t):void 0}}function tc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}$u.propTypes={UIComponent:c.a.elementType,isSearchByName:c.a.bool,isSearchByDescription:c.a.bool,slug:c.a.string,isInitialRender:c.a.bool},$u.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rc=function(e){var t=e.businessId,r=e.menuId,n=e.metafields,o=e.UIComponent,u=Qu(nr(),1)[0],c=Qu(dr(),1)[0],l=Qu(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=Qu(Object(i.useState)({loading:!1,result:{error:!1}}),2),h=d[0],y=d[1],v=function(){var e=Zu(a.a.mark((function e(){var n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Wu(Wu({},f),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=5,fetch("".concat(u.root,"/business/").concat(t,"/menus/").concat(r,"/metafields"),n);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,s=i.result,p(Wu(Wu({},f),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),p(Wu(Wu({},f),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Zu(a.a.mark((function e(n){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Wu(Wu({},h),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=5,fetch("".concat(u.root,"/business/").concat(t,"/menus/").concat(r,"/metafields/").concat(n),o);case 5:e.sent.ok&&(i=f.metaFields.filter((function(e){return e.id!==n})),p(Wu(Wu({},f),{},{metaFields:i})),y({loading:!1,result:{error:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),y({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Zu(a.a.mark((function e(n){var o,i,s,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Wu(Wu({},h),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)},body:JSON.stringify(n)},e.next=5,fetch("".concat(u.root,"/business/").concat(t,"/menus/").concat(r,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:s=e.sent,l=s.error,d=s.result,l?y({loading:!1,result:{error:!0,result:d}}):([],v=[].concat(Vu(f.metaFields),[d]),p(Wu(Wu({},f),{},{metaFields:v})),y({loading:!1,result:{error:!1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),y({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){n?p(Wu(Wu({},f),{},{metaFields:n})):v()}),[n]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,Ju({},e,{metaFieldsList:f,actionState:h,handleDeleteMetaField:m,handeAddMetaField:b})))};function nc(){return nc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nc.apply(this,arguments)}function oc(e){return function(e){if(Array.isArray(e))return dc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ac(e){return ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ac(e)}function ic(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function sc(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ic(a,n,o,i,s,"next",e)}function s(e){ic(a,n,o,i,s,"throw",e)}i(void 0)}))}}function uc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uc(Object(r),!0).forEach((function(t){lc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||pc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pc(e,t){if(e){if("string"==typeof e)return dc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dc(e,t):void 0}}function dc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}rc.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var hc=function(e){var t=e.business,r=e.menu,n=e.UIComponent,o=e.handleUpdateBusinessState,u=e.isSelectedSharedMenus,c=e.sitesState,l=fc(nr(),1)[0],f=fc(dr(),1)[0].token,p=fc(Lr(),2)[1],d=fc(Fn(),2)[1].showToast,h=fc(Object(i.useState)({loading:!1,error:null,menu:r||{}}),2),y=h[0],v=h[1],m=fc(Object(i.useState)({loading:!1,changes:{},error:null}),2),b=m[0],g=m[1],O=fc(Object(i.useState)({}),2),w=O[0],j=O[1],S=fc(Object(i.useState)([]),2),E=S[0],P=S[1],C=fc(Object(i.useState)([]),2),I=C[0],x=C[1],A=fc(Object(i.useState)([]),2),T=A[0],_=A[1],k=function(){var e=sc(a.a.mark((function e(){var n,i,s,u,c,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,d(Dn.Info,p("LOADING","Loading")),g(cc(cc({},b),{},{loading:!0,result:{error:!1}})),n=cc({},b.changes))("object"===ac(n[i])&&null!==n[i]||Array.isArray(n[i]))&&(n[i]=JSON.stringify(n[i]));return s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(n)},e.next=8,fetch("".concat(l.root,"/business/").concat(t.id,"/menus/").concat(null==r?void 0:r.id),s);case 8:return u=e.sent,e.next=11,u.json();case 11:c=e.sent,g(cc(cc({},b),{},{changes:c.error?b.changes:{},result:{error:c.error,result:c.result},loading:!1})),c.error||((h=cc({},t)).menus.filter((function(e){e.id===c.result.id&&(Object.assign(e,c.result),void 0!==(null==n?void 0:n.products)&&(e.products=oc(I)));return!0})),o&&o(h),d(Dn.Success,p("MENU_SAVED","Products catalog saved"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),g(cc(cc({},b),{},{loading:!1,result:{error:!0,result:e.t0.message}}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var r=sc(a.a.mark((function r(){var n,i,s,u,c,h,y,v,m,O;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,d(Dn.Info,p("LOADING","Loading")),g(cc(cc({},b),{},{loading:!0,result:{error:!1}})),null!=(n=cc({},null==b?void 0:b.changes))&&n.products&&(n.products=JSON.stringify(null==n?void 0:n.products)),null!=n&&n.schedule)n.schedule=JSON.stringify(null==n?void 0:n.schedule);else{for(i=[],s=0;s<7;s++)i.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});n.schedule=JSON.stringify(i)}return u={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(n)},r.next=9,fetch("".concat(l.root,"/business/").concat(t.id,"/menus"),u);case 9:return c=r.sent,r.next=12,c.json();case 12:h=r.sent,g(cc(cc({},b),{},{changes:h.error?b.changes:{},result:{error:h.error,result:h.result},loading:!1})),h.error||(y=cc({},t),v=cc(cc({},h.result),{},{enabled:!0}),m=[],t.categories.forEach((function e(t){m=[].concat(oc(m),oc(t.products)),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),O=[],O=null!=n&&n.all_products?oc(m):m.filter((function(e){return v.products.includes(e.id)})),v=cc(cc({},v),{},{products:O}),y.menus.push(v),o&&o(y),d(Dn.Success,p("MENU_ADDED","Products catalog added")),e.onClose()&&e.onClose()),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(0),g(cc(cc({},b),{},{loading:!1,result:{error:!0,result:r.t0.message}}));case 20:case"end":return r.stop()}}),r,null,[[0,17]])})));return function(){return r.apply(this,arguments)}}(),U=function(){var n=sc(a.a.mark((function n(){var i,s,c,h,y,v,m;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d(Dn.Info,p("LOADING","Loading")),g(cc(cc({},b),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},s=u?"".concat(l.root,"/business/").concat(t.id,"/menus_shared/").concat(r.id):"".concat(l.root,"/business/").concat(t.id,"/menus/").concat(r.id),n.next=7,fetch(s,i);case 7:return c=n.sent,n.next=10,c.json();case 10:(h=n.sent).error?g(cc(cc({},b),{},{loading:!1,error:h.result})):(g(cc(cc({},b),{},{loading:!1,error:null})),y=null,u?(v=t.menus_shared.filter((function(e){return e.id!==r.id})),y=cc(cc({},t),{},{menus_shared:v})):(m=t.menus.filter((function(e){return e.id!==r.id})),y=cc(cc({},t),{},{menus:m})),o&&o(y),d(Dn.Success,p("MENU_DELETED","Products catalog deleted")),e.onClose&&e.onClose()),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),g(cc(cc({},b),{},{loading:!1,error:n.t0}));case 17:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(){return n.apply(this,arguments)}}();Object(i.useEffect)((function(){g(cc(cc({},b),{},{changes:cc(cc({},b.changes),{},{products:E})}))}),[E]),Object(i.useEffect)((function(){g(cc(cc({},b),{},{changes:{}})),v(cc(cc({},y),{},{menu:r||{}})),j({delivery:null==r?void 0:r.delivery,pickup:null==r?void 0:r.pickup,eatin:null==r?void 0:r.eatin,curbside:null==r?void 0:r.curbside,driver_thru:null==r?void 0:r.driver_thru});var e=[];Object.keys(r).length?(e=r.products.reduce((function(e,t){return[].concat(oc(e),[t.id])}),[]),P(e),x(r.products)):(P([]),x([]),j({delivery:!0,pickup:!0,eatin:!1,curbside:!1,driver_thru:!1}),g(cc(cc({},b),{},{changes:{delivery:!0,pickup:!0}}))),L(e)}),[r]);var L=function(e){if(null!=t&&t.categories.length){var r=[];_(r),function t(n){return(null==n?void 0:n.length)>0&&(null==n?void 0:n.forEach((function(n){var o,a=[],i=n.products.reduce((function(e,t){return[].concat(oc(e),[t.id])}),[]);a=[].concat(oc(a),oc(i)),null!=n&&null!==(o=n.subcategories)&&void 0!==o&&o.length&&n.subcategories.forEach((function e(t){var r=t.products.reduce((function(e,t){return[].concat(oc(e),[t.id])}),[]);a=[].concat(oc(a),oc(r)),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),r.push({id:n.id,name:n.name,productIds:a,isChecked:0!==a.length&&a.every((function(t){return e.includes(t)}))}),t(n.subcategories)})))}(null==t?void 0:t.categories)}};return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,nc({},e,{businessMenuState:y,formState:b,selectedProductsIds:E,setSelectedProductsIds:P,selectedProducts:I,setSelectedProducts:x,handleChangeInput:function(e){var t=lc({},e.target.name,e.target.value);g(cc(cc({},b),{},{changes:cc(cc({},b.changes),t)}))},handleCheckOrderType:function(e){g(cc(cc({},b),{},{changes:cc(cc({},b.changes),{},lc({},e,!w[e]))})),j(cc(cc({},w),{},lc({},e,!w[e])))},handleUpdateBusinessMenuOption:k,handleAddBusinessMenuOption:D,handleChangeScheduleState:function(e){g(cc(cc({},b),{},{changes:cc(cc({},b.changes),{},{schedule:e})}))},handleDeleteMenu:U,handleChangeMenuSite:function(e){var t,n=[].concat(oc(null==r||null===(t=r.sites)||void 0===t?void 0:t.map((function(e){return e.id})).filter((function(e){var t;return!b.changes.sites||(null===(t=b.changes.sites)||void 0===t?void 0:t.includes(e))}))),oc(b.changes.sites||[])),o=n.includes(e);g(cc(cc({},b),{},{changes:cc(cc({},b.changes),{},{sites:o?n.filter((function(t){return t!==e})):[].concat(oc(n),[e])})}))},handleSelectAllChannels:function(){g(cc(cc({},b),{},{changes:cc(cc({},b.changes),{},{sites:null==c?void 0:c.sites.map((function(e){return e.id}))})}))},handleSelectNoneChannels:function(){g(cc(cc({},b),{},{changes:cc(cc({},b.changes),{},{sites:[]})}))},subCategoriesList:T})))};function yc(){return yc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yc.apply(this,arguments)}function vc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ec(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function mc(e){return function(e){if(Array.isArray(e))return Pc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ec(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bc(Object(r),!0).forEach((function(t){Oc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wc(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function jc(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){wc(a,n,o,i,s,"next",e)}function s(e){wc(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Sc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Ec(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ec(e,t){if(e){if("string"==typeof e)return Pc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pc(e,t):void 0}}function Pc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}hc.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Cc=function(e){var t=e.UIComponent,r=e.business,n=e.menu,o=e.businesses,u=e.busienssesPropsToFetch,c=e.handleUpdateBusinessState,l=Sc(nr(),1)[0],f=Sc(dr(),1)[0].token,p=Sc(Lr(),2)[1],d=Sc(Fn(),2)[1].showToast,h=Sc(Object(i.useState)({businesses:[],loading:!1,error:null}),2),y=h[0],v=h[1],m=Sc(Object(i.useState)({loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=Sc(Object(i.useState)([]),2),w=O[0],j=O[1],S=function(){var e=jc(a.a.mark((function e(){var t,n,o,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(gc(gc({},y),{},{loading:!0})),t=l.setAccessToken(f).businesses().select(u).asDashboard(),e.next=5,t.get();case 5:n=e.sent,o=n.content,i=o.error,s=o.result,i||(c=s.filter((function(e){return e.id!==r.id})),v(gc(gc({},y),{},{businesses:c,loading:!1}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v(gc(gc({},y),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=jc(a.a.mark((function e(){var t,o,i,s,u,f,h,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dn.Info,p("LOADING","Loading")),g(gc(gc({},b),{},{loading:!0})),t={business_id:r.id,shared:w},e.next=6,l.businesses(r.id).menus(n.id).save(t);case 6:if(!e.sent.error){o=[],i=vc(w);try{for(u=function(){var e,t=s.value;o.push({id:t,name:null===(e=y.businesses.find((function(e){return e.id===t})))||void 0===e?void 0:e.name,pivot:{business_id:t,menu_id:n.id}})},i.s();!(s=i.n()).done;)u()}catch(e){i.e(e)}finally{i.f()}f=gc(gc({},n),{},{businesses:o}),h=r.menus.filter((function(e){return e.id===f.id&&Object.assign(e,f),!0})),v=gc(gc({},r),{},{menus:h}),c&&c(v),g({loading:!1,result:{error:!1}}),d(Dn.Success,p("BUSINESS_SAVED","Business saved"))}e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g({loading:!1,result:{error:!1}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?v(gc(gc({},y),{},{businesses:o,loading:!1})):S()}),[o]),Object(i.useEffect)((function(){if(null!=n&&n.businesses){var e,t=null===(e=n.businesses)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(mc(e),[t.id])}),[]);j(t)}}),[n]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,yc({},e,{businessesState:y,actionState:b,selectedBusinessIds:w,handleSelectBusiness:function(e,t){if(t)j([].concat(mc(w),[e]));else{var r=w.filter((function(t){return t!==e}));j(r)}},handleSelectAllBusiness:function(e){if(e){var t,r=null===(t=y.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(mc(e),[t.id])}),[]);j(r)}else j([])},handleShareBusinesses:E})))};function Ic(){return Ic=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ic.apply(this,arguments)}function xc(e){return function(e){if(Array.isArray(e))return Fc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ac(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ac(Object(r),!0).forEach((function(t){_c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ac(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kc(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Dc(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){kc(a,n,o,i,s,"next",e)}function s(e){kc(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Uc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Lc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lc(e,t){if(e){if("string"==typeof e)return Fc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fc(e,t):void 0}}function Fc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Cc.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Cc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],busienssesPropsToFetch:["id","name","logo"]};var Bc=function(e){var t=e.businessId,r=e.metafields,n=e.UIComponent,o=e.handleSuccessAddMetaFields,u=e.handleSuccessDeleteBusinessMetaFields,c=Uc(nr(),1)[0],l=Uc(dr(),1)[0],f=Uc(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=Uc(Object(i.useState)({loading:!1,result:{error:!1}}),2),y=h[0],v=h[1],m=function(){var e=Dc(a.a.mark((function e(){var r,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Tc(Tc({},p),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},e.next=5,fetch("".concat(c.root,"/business/").concat(t,"/metafields"),r);case 5:return n=e.sent,e.next=8,n.json();case 8:o=e.sent,i=o.result,d(Tc(Tc({},p),{},{loading:!1,metaFields:i})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(Tc(Tc({},p),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Dc(a.a.mark((function e(r){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Tc(Tc({},y),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)}},e.next=5,fetch("".concat(c.root,"/business/").concat(t,"/metafields/").concat(r),n);case 5:e.sent.ok&&(o=p.metaFields.filter((function(e){return e.id!==r})),d(Tc(Tc({},p),{},{metaFields:o})),v({loading:!1,result:{error:!1}}),u&&u(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),v({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Dc(a.a.mark((function e(r){var n,i,s,u,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Tc(Tc({},y),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l.token)},body:JSON.stringify(r)},e.next=5,fetch("".concat(c.root,"/business/").concat(t,"/metafields"),n);case 5:return i=e.sent,e.next=8,i.json();case 8:s=e.sent,u=s.error,f=s.result,u?v({loading:!1,result:{error:!0,result:f}}):([],h=[].concat(xc(p.metaFields),[f]),d(Tc(Tc({},p),{},{metaFields:h})),v({loading:!1,result:{error:!1}}),o&&o(f)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),v({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){r?d(Tc(Tc({},p),{},{metaFields:r})):m()}),[r]),s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,Ic({},e,{metaFieldsList:p,actionState:y,handleDeleteMetaField:b,handeAddMetaField:g})))};function Mc(){return Mc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mc.apply(this,arguments)}function Rc(e){return function(e){if(Array.isArray(e))return Vc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Jc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nc(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function zc(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Nc(a,n,o,i,s,"next",e)}function s(e){Nc(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Gc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gc(Object(r),!0).forEach((function(t){Yc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Jc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jc(e,t){if(e){if("string"==typeof e)return Vc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vc(e,t):void 0}}function Vc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Bc.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Bc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Hc=["paypal_express","authorize"],Wc=function(e){var t,r,n,o,u,c,l=e.business,f=e.UIComponent,p=e.defaultSandboxRequiredGateways,d=e.handleSuccessUpdate,h=$c(nr(),1)[0],y=$c(dr(),1)[0].token,v=$c(en(),1)[0],m=$c(Fn(),2)[1].showToast,b=$c(Lr(),2)[1],g=$c(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),O=g[0],w=g[1],j=$c(Object(i.useState)({sites:[],loading:!0,error:null}),2),S=j[0],E=j[1],P=$c(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),C=P[0],I=P[1],x=p||["paypal","stripe_direct","paypal_express","stripe_connect","stripe_redirect","carlos_payment","ivr"],A=$c(Object(i.useState)({loading:!1,result:{error:!1}}),2),T=A[0],_=A[1],k=$c(Object(i.useState)({}),2),D=k[0],U=k[1],L=$c(Object(i.useState)({}),2),F=L[0],B=L[1],M="1"===(null==v||null===(t=v.configs)||void 0===t||null===(r=t.stripe_connect_sandbox)||void 0===r?void 0:r.value)?null==v||null===(n=v.configs)||void 0===n||null===(o=n.stripe_connect_client_id_sandbox)||void 0===o?void 0:o.value:null==v||null===(u=v.configs)||void 0===u||null===(c=u.stripe_connect_client_id)||void 0===c?void 0:c.value,R=function(){var e=zc(a.a.mark((function e(){var t,r,n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h.root,"/business/").concat(l.id,"/paymethods?params=sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId}});case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,n=r.result,e.prev=8,e.next=11,fetch("".concat(h.root,"/sites"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId}});case 11:return o=e.sent,e.next=14,o.json();case 14:i=e.sent,s=i.result,E(qc(qc({},S),{},{loading:!1,sites:s})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),E(qc(qc({},S),{},{loading:!1,sites:e.t0.message}));case 22:w(qc(qc({},C),{},{loading:!1,paymethods:n})),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(0),w(qc(qc({},C),{},{loading:!1,error:e.t1.message}));case 28:case"end":return e.stop()}}),e,null,[[0,25],[8,19]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=zc(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(h.root,"/paymethods?where=[{%22attribute%22:%22enabled%22,%22value%22:true}]"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId}});case 3:return t=e.sent,e.next=6,t.json();case 6:r=e.sent,n=r.result,I(qc(qc({},C),{},{loading:!1,paymethods:(o=n,o&&o.filter((function(e){return!Hc.includes(null==e?void 0:e.gateway)})))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),I(qc(qc({},C),{},{loading:!1,error:e.t0.message}));case 14:case"end":return e.stop()}var o}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=zc(a.a.mark((function e(t){var r,n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=C.paymethods.find((function(e){return e.id===t})),n={enabled:!0,paymethod_id:t,sandbox:x.includes(r.gateway)},e.prev=2,m(Dn.Info,b("LOADING","Loading")),_(qc(qc({},T),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId},body:JSON.stringify(n)},e.next=8,fetch("".concat(h.root,"/business/").concat(l.id,"/paymethods"),o);case 8:return i=e.sent,e.next=11,i.json();case 11:(s=e.sent).error||(w(qc(qc({},O),{},{paymethods:[].concat(Rc(O.paymethods),[qc(qc({},s.result),{},{paymethod:r})])})),_({loading:!1,result:{error:!1}}),m(Dn.Success,b("PAYMETHOD_SAVED","Payment method saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),_({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=zc(a.a.mark((function e(t,r){var n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dn.Info,b("LOADING","Loading")),_(qc(qc({},T),{},{loading:!0})),n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId},body:JSON.stringify(r)},e.next=6,fetch("".concat(h.root,"/business/").concat(l.id,"/paymethods/").concat(t),n);case 6:return o=e.sent,e.next=9,o.json();case 9:i=e.sent,U(i.error?D:{}),i.error||(_(qc(qc({},T),{},{loading:!1})),s=O.paymethods.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0})),w(qc(qc({},O),{},{paymethods:s})),m(Dn.Success,b("PAYMETHOD_SAVED","Payment method saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),_({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,r){return e.apply(this,arguments)}}(),q=function(){var e=zc(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dn.Info,b("LOADING","Loading")),_(qc(qc({},T),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId},body:JSON.stringify(D)},e.next=6,fetch("".concat(h.root,"/business/").concat(l.id),t);case 6:return r=e.sent,e.next=9,r.json();case 9:n=e.sent,U(n.error?D:{}),n.error||(_(qc(qc({},T),{},{loading:!1})),d&&d(n.result)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),_({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=zc(a.a.mark((function e(t){var r,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.paymethods.find((function(e){return e.paymethod_id===t})).id,e.prev=1,m(Dn.Info,b("LOADING","Loading")),_(qc(qc({},T),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y),"x-app-x":null==h?void 0:h.appId}},e.next=7,fetch("".concat(h.root,"/business/").concat(l.id,"/paymethods/").concat(r),n);case 7:return o=e.sent,e.next=10,o.json();case 10:e.sent.error||(_(qc(qc({},T),{},{loading:!1})),i=O.paymethods.filter((function(e){return e.paymethod_id!==t})),w(qc(qc({},O),{},{paymethods:i})),m(Dn.Success,b("PAYMETHOD_DELETED","Payment method deleted"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),_({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){N(),R()}),[]),s.a.createElement(s.a.Fragment,null,f&&s.a.createElement(f,Mc({},e,{businessPaymethodsState:O,paymethodsList:C,handleClickPayment:function(e){var t=O.paymethods.find((function(t){return t.paymethod_id===e}));t?G(t.id,{enabled:!t.enabled}):z(e)},actionState:T,sitesState:S,handleDeleteBusinessPaymethodOption:Y,changesState:D,handleChangeBusinessPaymentState:function(e){U(qc(qc({},D),e))},stripeConnectData:F,handleChangeStripeConnectData:function(e){B(qc(qc({},F),e))},cleanChangesState:function(e){return U(qc({},e))},handleChangeSandbox:function(){U(qc(qc({},D),{},{sandbox:!(null!=D&&D.sandbox)}))},handleChangeInput:function(e,t){U(qc(qc({},D),{},t?{data_sandbox:qc(qc({},null==D?void 0:D.data_sandbox),{},Yc({},e.target.name,e.target.value))}:{data:qc(qc({},null==D?void 0:D.data),{},Yc({},e.target.name,e.target.value))}))},handleSaveClick:function(e){var t,r,n,o,a=qc({},D);null!==(t=a)&&void 0!==t&&t.data&&(a=qc(qc({},a),{},{data:JSON.stringify(a.data)})),null!==(r=a)&&void 0!==r&&r.data_sandbox&&(a=qc(qc({},a),{},{data_sandbox:JSON.stringify(a.data_sandbox)})),null!==(n=a)&&void 0!==n&&n.allowed_order_types&&(a=qc(qc({},a),{},{allowed_order_types:a.allowed_order_types.length>0?JSON.stringify(a.allowed_order_types):null})),null!==(o=a)&&void 0!==o&&o.sites&&(a=qc(qc({},a),{},{sites:JSON.stringify(a.sites)})),G(e,a),q()},handleStripeConnect:function(){var e=window.open("https://connect.stripe.com/oauth/authorize?response_type=code&client_id=".concat(M,"&scope=read_write&state=").concat(y),"_blank","directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,clearcache=yes"),t=setInterval((function(){e.closed?clearInterval(t):e.postMessage("data",h.url)}),200),r=null;window.addEventListener("message",(function(n){-1!==n.origin.indexOf(".ordering.co")&&(clearInterval(t),r&&clearTimeout(r),r=setTimeout((function(){if(e.postMessage("close",h.url),!n.data.error&&n.data.result){var t=n.data.result,r={sandbox:t.livemode,data:{token:t.access_token,publishable:t.stripe_publishable_key,user:t.stripe_user_id,refresh_token:t.refresh_token}};B(r)}else n.data.error&&_(qc(qc({},T),{},{loading:!1,error:n.data.error}))}),1e3))}))},handleChangeStripeInput:function(e){U(qc(qc({},D),{},Yc({},e.target.name,e.target.value)))},handleStripeSave:function(e){var t,r,n=qc(qc({},F),{},{sandbox:!0,data_sandbox:JSON.stringify(null==F?void 0:F.data)});null!==(t=n)&&void 0!==t&&t.allowed_order_types&&(n=qc(qc({},n),{},{allowed_order_types:n.allowed_order_types.length>0?JSON.stringify(n.allowed_order_types):null})),null!==(r=n)&&void 0!==r&&r.sites&&(n=qc(qc({},n),{},{sites:JSON.stringify(n.sites)})),Object.keys(F).length&&G(e,n),q()}})))};function Kc(){return Kc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kc.apply(this,arguments)}function Xc(e){return Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(e)}function Zc(e){return function(e){if(Array.isArray(e))return il(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||al(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qc(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function el(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Qc(a,n,o,i,s,"next",e)}function s(e){Qc(a,n,o,i,s,"throw",e)}i(void 0)}))}}function tl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(r),!0).forEach((function(t){nl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ol(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||al(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function al(e,t){if(e){if("string"==typeof e)return il(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?il(e,t):void 0}}function il(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Wc.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Wc.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var sl=function(e){var t=e.UIComponent,r=e.businessState,n=e.handleUpdateBusinessState,o=e.category,u=e.categoryId,c=e.onClose,l=e.categorySelected,f=e.setCategorySelected,p=ol(dr(),1)[0].loading,d=ol(nr(),1)[0],h=ol(Lr(),2)[1],y=ol(Fn(),2)[1].showToast,v=ol(Object(i.useState)({loading:!1,changes:{enabled:!0,enabledParent:!1},result:{error:!1}}),2),m=v[0],b=v[1],g=ol(Object(i.useState)([]),2),O=g[0],w=g[1];Object(i.useEffect)((function(){o&&b(rl(rl({},m),{},{changes:o}))}),[o]),Object(i.useEffect)((function(){var e;if(null!=r&&null!==(e=r.business)&&void 0!==e&&e.id&&!o&&u){var t=r.business.categories.filter((function(e){return parseInt(null==e?void 0:e.id)===parseInt(u)}))[0];t&&b(rl(rl({},m),{},{changes:t}))}}),[r]);var j=function(){var e=el(a.a.mark((function e(){var t,i,s,c,l,v,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=21;break}if(t=(null==o?void 0:o.id)||u,!p){e.next=4;break}return e.abrupt("return");case 4:for(c in e.prev=4,y(Dn.Info,h("LOADING","Loading")),b(rl(rl({},m),{},{loading:!0})),s=rl({},m.changes))null===s[c]&&delete s[c];return e.next=11,d.businesses(null==r||null===(i=r.business)||void 0===i?void 0:i.id).categories(parseInt(t)).save(s);case 11:l=e.sent,(v=l.content).error?b(rl(rl({},m),{},{changes:m.changes,result:v,loading:!1})):(b(rl(rl({},m),{},{changes:v.result,result:{error:!1,result:v.result},loading:!1})),f(v.result),n&&((g=Zc(r.business.categories)).forEach((function e(t,r,n){var o,a;(null==t?void 0:t.id)===(null==v?void 0:v.result.parent_category_id)&&(Array.isArray(null==t?void 0:t.subcategories)&&(t.subcategories.find((function(e){var t;return(null==e?void 0:e.id)===(null==v||null===(t=v.result)||void 0===t?void 0:t.id)}))||t.subcategories.push(null==v?void 0:v.result)));var i=["name","enabled","image","slug","seo_image","seo_title","seo_description"];(null==t?void 0:t.id)===(null==v||null===(o=v.result)||void 0===o?void 0:o.id)&&t.parent_category_id===(null==v?void 0:v.result.parent_category_id)&&Object.keys(t).forEach((function(e){i.includes(e)&&v.result[e]&&(t[e]=null==v?void 0:v.result[e])})),(null==t?void 0:t.id)===(null==v||null===(a=v.result)||void 0===a?void 0:a.id)&&t.parent_category_id!==(null==v?void 0:v.result.parent_category_id)&&n.splice(r,1),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),O=rl(rl({},r.business),{},{categories:g}),n(O)),y(Dn.Success,h("CATEOGORY_UPDATED","Category updated"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),b(rl(rl({},m),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 19:e.next=22;break;case 21:S();case 22:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=el(a.a.mark((function e(){var t,o,i,s,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dn.Info,h("LOADING","Loading")),b(rl(rl({},m),{},{loading:!0})),e.next=7,d.businesses(parseInt(null==r||null===(t=r.business)||void 0===t?void 0:t.id)).categories().save(m.changes);case 7:o=e.sent,(i=o.content).error?b(rl(rl({},m),{},{changes:m.changes,result:i,loading:!1})):((u=rl({},i.result)).parent_category_id=(null===(s=i.result)||void 0===s?void 0:s.parent_category_id)||null,b(rl(rl({},m),{},{category:{},result:{error:!1,result:u},loading:!1})),n&&(f=(null===(l=r.business)||void 0===l?void 0:l.categories)||[],null!=i&&i.result.parent_category_id?f.forEach((function e(t){(null==t?void 0:t.id)===(null==i?void 0:i.result.parent_category_id)&&t.subcategories.push(rl(rl({},u),{},{products:[],subcategories:[]})),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})):f.push(rl(rl({},u),{},{products:[],subcategories:[]})),n(rl(rl({},r.business),{},{categories:f}))),y(Dn.Success,h("CATEOGORY_CREATED","Category created")),c&&c()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),b(rl(rl({},m),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var t=el(a.a.mark((function t(){var i,s,u,c,v,g;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,y(Dn.Info,h("LOADING","Loading")),b(rl(rl({},m),{},{loading:!0})),t.next=7,d.businesses(parseInt(null===(i=r.business)||void 0===i?void 0:i.id)).categories(parseInt(null==o?void 0:o.id)).delete();case 7:s=t.sent,u=s.content,c=u.error,v=u.result,c?b(rl(rl({},m),{},{loading:!1,result:{error:!0,result:v}})):(b(rl(rl({},m),{},{loading:!1,result:{error:!1,result:v}})),n&&((g=Zc(r.business.categories)).forEach((function e(t,r,n){(null==t?void 0:t.id)===(null==o?void 0:o.id)&&n.splice(r,1),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),n(rl(rl({},r.business),{},{categories:g})),(null==o?void 0:o.id)===(null==l?void 0:l.id)&&f(g[0])),y(Dn.Success,h("CATEOGORY_DELETED","Category deleted")),e.onClose&&e.onClose(null==o?void 0:o.id)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),b(rl(rl({},m),{},{loading:!1,result:{error:!0,result:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(!r.loading&&l){var e=function e(t,r){var n,o={id:null==t?void 0:t.id,name:t.name};if(t&&"object"===Xc(t))return(null==t?void 0:t.id)===r?[]:(((null==t?void 0:t.subcategories)||[]).some((function(t){return n=e(t,r)})),n&&[o].concat(Zc(n)))};r.business.categories.forEach((function(t){var r=e(t,null==l?void 0:l.id);r&&w(r)}))}}),[null==r?void 0:r.loading,l]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Kc({},e,{isAddMode:!o,formState:m,setFormState:b,parentCategories:O,handlechangeImage:function(e,t){var r=new window.FileReader;r.readAsDataURL(e),r.onload=function(){b(rl(rl({},m),{},{changes:rl(rl({},m.changes),{},nl({},t?"seo_image":"image",r.result))}))},r.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){var t=nl({},e.target.name,e.target.value);b(rl(rl({},m),{},{changes:rl(rl({},m.changes),t)}))},handleChangeCheckBox:function(e){var t=null;void 0!==e.enabled&&(t={enabled:e.enabled}),t=e.enabledParent?rl(rl({},t),{},{parent_category_id:null==l?void 0:l.id}):rl(rl({},t),{},{parent_category_id:null}),b(rl(rl({},m),{},{changes:rl(rl({},m.changes),t)}))},handleChangeItem:function(e){b(rl(rl({},m),{},{changes:rl(rl({},m.changes),e)}))},handleUpdateClick:j,handleDeleteCategory:E})))};function ul(){return ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ul.apply(this,arguments)}sl.propTypes={UIComponent:c.a.elementType,businessState:c.a.object,handleUpdateBusinessState:c.a.func,setIsAddProduct:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var cl=function(e){var t=e.categories,r=e.onClickCategory,n=e.UIComponent;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,ul({},e,{categories:t,handlerClickCategory:r})))};function ll(){return ll=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ll.apply(this,arguments)}cl.propTypes={UIComponent:c.a.elementType,categories:c.a.arrayOf(c.a.object),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},cl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fl=function(e){var t=e.onChangeSearch,r=e.UIComponent;return s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,ll({},e,{handleChangeSearch:t})))};function pl(){return pl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pl.apply(this,arguments)}function dl(e){return function(e){if(Array.isArray(e))return wl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ol(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hl(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function yl(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){hl(a,n,o,i,s,"next",e)}function s(e){hl(a,n,o,i,s,"throw",e)}i(void 0)}))}}function vl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ml(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vl(Object(r),!0).forEach((function(t){bl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Ol(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ol(e,t){if(e){if("string"==typeof e)return wl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wl(e,t):void 0}}function wl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}fl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jl=function(e){var t=e.promotion,r=e.UIComponent,n=e.business,o=e.handleCloseAddForm,u=e.handleSuccessUpdate,c=gl(Lr(),2)[1],l=gl(nr(),1)[0],f=gl(dr(),1)[0].token,p=gl(Fn(),2)[1].showToast,d=gl(Object(i.useState)({promotion:t,loading:!1,error:null}),2),h=d[0],y=d[1],v=gl(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),m=v[0],b=v[1],g=gl(Object(i.useState)(!1),2),O=g[0],w=g[1],j=function(){var e=yl(a.a.mark((function e(){var r,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,c("LOADING","Loading")),b(ml(ml({},m),{},{result:{},loading:!0})),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/offers/").concat(t.id),r);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error?b(ml(ml({},m),{},{result:{error:!0,result:i.result},loading:!1})):(y(ml(ml({},h),{},{promotion:i.result})),b(ml(ml({},m),{},{loading:!1,changes:{}})),p(Dn.Success,c("PROMOTION_SAVED","Promotion saved")),u&&(s=n.offers.filter((function(e){return e.id===t.id&&Object.assign(e,i.result),!0})),u(ml(ml({},n),{},{offers:s})))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(ml(ml({},m),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=yl(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,c("LOADING","Loading")),b(ml(ml({},m),{},{result:{},loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=6,fetch("".concat(l.root,"/business/").concat(n.id,"/offers"),t);case 6:return r=e.sent,e.next=9,r.json();case 9:(i=e.sent).error?b(ml(ml({},m),{},{result:{error:!0,result:i.result},loading:!1})):(p(Dn.Success,c("PROMOTION_ADDED","Promotion added")),o&&o(),u&&u(ml(ml({},n),{},{offers:[].concat(dl(n.offers),[i.result])}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(ml(ml({},m),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0===Object.keys(t).length?(w(!0),b(ml(ml({},m),{},{changes:{type:2,rate_type:2,rate:0}}))):(b(ml(ml({},m),{},{changes:{}})),w(!1)),y(ml(ml({},h),{},{promotion:t}))}),[t]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,pl({},e,{promotionState:h,formState:m,isAddMode:O,handleChangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){b(ml(ml({},m),{},{changes:ml(ml({},m.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){var t,r,n;"coupon"!==e.target.name||2!==(null==m||null===(t=m.changes)||void 0===t?void 0:t.type)&&(null!=m&&null!==(r=m.changes)&&void 0!==r&&r.type||2!==(null==h||null===(n=h.promotion)||void 0===n?void 0:n.type))?b(ml(ml({},m),{},{changes:ml(ml({},m.changes),{},bl({},e.target.name,e.target.value))})):b(ml(ml({},m),{},{changes:ml(ml({},m.changes),{},{coupon:e.target.value.replace(/\s/g,"")})}))},handleChangeItem:function(e){b(ml(ml({},m),{},{changes:ml(ml({},m.changes),e)}))},handleUpdateClick:j,handleAddClick:S})))};function Sl(){return Sl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sl.apply(this,arguments)}function El(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?El(Object(r),!0).forEach((function(t){Cl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):El(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Cl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Il(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function xl(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Il(a,n,o,i,s,"next",e)}function s(e){Il(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Al(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}jl.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var _l=function(e){var t=e.business,r=e.businessId,n=e.promotions,o=e.UIComponent,u=e.handleSuccessUpdate,c=Al(nr(),1)[0],l=Al(dr(),1)[0].token,f=Al(Object(i.useState)({promotions:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=Al(Object(i.useState)({loading:!1,error:null}),2),y=h[0],v=h[1],m=function(){var e=xl(a.a.mark((function e(){var t,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Pl(Pl({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/business/").concat(r,"/offers"),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(o=e.sent).error||d({promotions:o.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(Pl(Pl({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=xl(a.a.mark((function e(n,o){var i,s,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Pl(Pl({},y),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:n})},e.next=5,fetch("".concat(c.root,"/business/").concat(r,"/offers/").concat(o),i);case 5:return s=e.sent,e.next=8,s.json();case 8:(f=e.sent).error||(h=p.promotions.filter((function(e){return e.id===o&&Object.assign(e,f.result),!0})),d(Pl(Pl({},p),{},{promotions:h})),u&&u(Pl(Pl({},t),{},{offers:h}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=xl(a.a.mark((function e(n){var o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Pl(Pl({},y),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/business/").concat(r,"/offers/").concat(n),o);case 5:return i=e.sent,e.next=8,i.json();case 8:e.sent.error||(s=p.promotions.filter((function(e){return e.id!==n})),d(Pl(Pl({},p),{},{promotions:s})),u&&u(Pl(Pl({},t),{},{offers:s}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){n?d(Pl(Pl({},p),{},{loading:!1,promotions:n})):m()}),[n]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,Sl({},e,{promotionListState:p,handleChangePromotionActiveState:b,handleDeletePromotion:g})))};function kl(){return kl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kl.apply(this,arguments)}function Dl(e){return function(e){if(Array.isArray(e))return zl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ul(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ll(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ul(Object(r),!0).forEach((function(t){Fl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ul(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bl(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Ml(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Bl(a,n,o,i,s,"next",e)}function s(e){Bl(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Rl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Nl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nl(e,t){if(e){if("string"==typeof e)return zl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zl(e,t):void 0}}function zl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}_l.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},_l.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Gl=function(e){var t=e.businessId,r=e.offerId,n=e.metafields,o=e.UIComponent,u=e.handleSuccessAddPromotionMetaFields,c=e.handleSuccessDeletePromotionMetaFields,l=Rl(nr(),1)[0],f=Rl(dr(),1)[0],p=Rl(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),d=p[0],h=p[1],y=Rl(Object(i.useState)({loading:!1,result:{error:!1}}),2),v=y[0],m=y[1],b=function(){var e=Ml(a.a.mark((function e(){var n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Ll(Ll({},d),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/offers/").concat(r,"/metafields"),n);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,s=i.result,h(Ll(Ll({},d),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(Ll(Ll({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Ml(a.a.mark((function e(n){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Ll(Ll({},v),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/offers/").concat(r,"/metafields/").concat(n),o);case 5:e.sent.ok&&(i=d.metaFields.filter((function(e){return e.id!==n})),h(Ll(Ll({},d),{},{metaFields:i})),m({loading:!1,result:{error:!1}}),c&&c(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Ml(a.a.mark((function e(n){var o,i,s,c,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Ll(Ll({},v),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(n)},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/offers/").concat(r,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:s=e.sent,c=s.error,p=s.result,c?m({loading:!1,result:{error:!0,result:p}}):([],y=[].concat(Dl(d.metaFields),[p]),h(Ll(Ll({},d),{},{metaFields:y})),m({loading:!1,result:{error:!1}}),u&&u(p)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),m({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){n?h(Ll(Ll({},d),{},{metaFields:n})):b()}),[n]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,kl({},e,{metaFieldsList:d,actionState:v,handleDeleteMetaField:g,handeAddMetaField:O})))};function ql(){return ql=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ql.apply(this,arguments)}function Yl(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function $l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Yl(a,n,o,i,s,"next",e)}function s(e){Yl(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Jl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jl(Object(r),!0).forEach((function(t){Hl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Gl.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Gl.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Xl=function(e){var t=e.businessId,r=e.reviews,n=e.UIComponent,o=Wl(nr(),1)[0],u=Wl(dr(),1)[0].token,c=Wl(Fn(),2)[1].showToast,l=Wl(Lr(),2)[1],f={},p=Wl(Object(i.useState)({reviews:[],loading:!0,error:null}),2),d=p[0],h=p[1],y=Wl(Object(i.useState)(r),2),v=y[0],m=y[1],b=Wl(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(){var e=$l(a.a.mark((function e(){var r,n,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={},f.reviews=n,e.next=5,o.businesses(t).select(["reviews"]).get({cancelToken:n});case 5:i=e.sent,s=i.content.result,(u=null==s||null===(r=s.reviews)||void 0===r?void 0:r.reviews).sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),m(u),h(Vl(Vl({},d),{},{loading:!1,reviews:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&h(Vl(Vl({},d),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=$l(a.a.mark((function e(r,n){var i,s,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dn.Info,l("LOADING","Loading")),O(Vl(Vl({},g),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify({enabled:n})},e.next=6,fetch("".concat(o.root,"/business/").concat(t,"/reviews/").concat(r),i);case 6:return s=e.sent,e.next=9,s.json();case 9:(f=e.sent).error||(p=d.reviews.filter((function(e){return e.id===r&&Object.assign(e,f.result),!0})),h(Vl(Vl({},d),{},{reviews:p})),c(Dn.Success,l("REVIEW_UPDATED","Review updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return r?(r.length&&r.sort((function(e,t){return new Date(t.created_at)-new Date(e.created_at)})),h(Vl(Vl({},d),{},{loading:!1,reviews:r}))):w(),function(){f.reviews&&f.reviews.cancel()}}),[t]),s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,ql({},e,{reviewsList:d,actionState:g,handleClickOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="all"!==e?v.filter((function(t){return t.total>=e&&t.total<e+1})):v;h(Vl(Vl({},d),{},{loading:!1,reviews:t}))},handleChangeReviewEnabled:j})))};function Zl(){return Zl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zl.apply(this,arguments)}function Ql(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ef(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ql(Object(r),!0).forEach((function(t){tf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ql(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rf(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function nf(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){rf(a,n,o,i,s,"next",e)}function s(e){rf(a,n,o,i,s,"throw",e)}i(void 0)}))}}function of(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return af(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return af(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function af(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Xl.propTypes={UIComponent:c.a.elementType,reviews:c.a.arrayOf(c.a.object),businessId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xl.defaultProps={reviews:[],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var sf=function(e){var t=e.UIComponent,r=e.propsToFetch,n=of(nr(),1)[0],o=of(dr(),1)[0].token,u=of(Fn(),2)[1].showToast,c=of(Lr(),2)[1],l=of(Object(i.useState)({reviews:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=of(Object(i.useState)({loading:!1,error:null}),2),h=d[0],y=d[1],v=function(){var e=nf(a.a.mark((function e(){var t,i,s,u,c,l,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(ef(ef({},f),{},{loading:!0})),e.next=4,n.setAccessToken(o).businesses().select(r).asDashboard().get();case 4:if(t=e.sent,i=t.content,s=i.error,u=i.result,!s){for(c=[],l=0;l<u.length;l++)for(d=0;d<u[l].reviews.reviews.length;d++)u[l].reviews.reviews[d].business_id=u[l].id,u[l].reviews.reviews[d].business_name=u[l].name,u[l].reviews.reviews[d].business_logo=u[l].logo,u[l].reviews.reviews[d].city_name=null===(h=u[l].city)||void 0===h?void 0:h.name,c.push(u[l].reviews.reviews[d]);c.length>0&&c.sort((function(e,t){return t.id-e.id})),p(ef(ef({},f),{},{loading:!1,reviews:c}))}e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p(ef(ef({},f),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=nf(a.a.mark((function e(t,r,i){var s,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Dn.Info,c("LOADING","Loading")),y(ef(ef({},h),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(i)},e.next=6,fetch("".concat(n.root,"/business/").concat(t,"/reviews/").concat(r),s);case 6:return l=e.sent,e.next=9,l.json();case 9:(d=e.sent).error||(v=f.reviews.filter((function(e){return e.id===r&&Object.assign(e,d.result),!0})),p(ef(ef({},f),{},{reviews:v})),u(Dn.Success,c("REVIEW_UPDATED","Review updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r,n){return e.apply(this,arguments)}}(),b=function(){var e=nf(a.a.mark((function e(t,r){var i,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Dn.Info,c("LOADING","Loading")),y(ef(ef({},h),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(n.root,"/business/").concat(t,"/reviews/").concat(r),i);case 6:return s=e.sent,e.next=9,s.json();case 9:e.sent.error||(l=f.reviews.filter((function(e){return e.id!==r})),p(ef(ef({},f),{},{reviews:l})),u(Dn.Success,c("REVIEW_REMOVED","Review removed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){v()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Zl({},e,{reviewsListState:f,actionState:h,handleUpdateReview:m,handleDeleteReview:b})))};function uf(){return uf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uf.apply(this,arguments)}function cf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cf(Object(r),!0).forEach((function(t){ff(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ff(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pf(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function df(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}sf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sf.defaultProps={propsToFetch:["reviews","name","logo","city"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var yf=function(e){var t=e.business,r=e.UIComponent,n=e.handleSuccessUpdate,o=df(nr(),1)[0],u=df(dr(),1)[0],c=df(Fn(),2)[1].showToast,l=df(Lr(),2)[1],f=df(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),p=f[0],d=f[1],h=function(){var e,r=(e=a.a.mark((function e(){var r,i,s,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(Dn.Info,l("LOADING","Loading")),d(lf(lf({},p),{},{loading:!0})),null!=(r=lf({},p.changes))&&r.schedule&&(r.schedule=JSON.stringify(null==r?void 0:r.schedule)),e.next=7,o.businesses(t.id).save(r,{accessToken:u.token});case 7:i=e.sent,s=i.content,f=s.error,h=s.result,f?d({changes:p.changes,result:{error:!1,result:h},loading:!1}):(d({loading:!1,changes:{},result:{error:!1}}),n&&n(h),c(Dn.Success,l("SCHEDULE_UPDATED","Schedule updated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d(lf(lf({},p),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){pf(a,n,o,i,s,"next",e)}function s(e){pf(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,uf({},e,{formState:p,handleChangeScheduleState:function(e){d(lf(lf({},p),{},{changes:{schedule:e}}))},handleUpdateSchedule:h})))};function vf(){return vf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vf.apply(this,arguments)}function mf(e){return function(e){if(Array.isArray(e))return Pf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ef(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bf(Object(r),!0).forEach((function(t){Of(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Of(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wf(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function jf(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){wf(a,n,o,i,s,"next",e)}function s(e){wf(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Sf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Ef(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ef(e,t){if(e){if("string"==typeof e)return Pf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pf(e,t):void 0}}function Pf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}yf.propTypes={UIComponent:c.a.elementType,business:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},yf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Cf=function(e){var t=e.menu,r=e.product,n=e.UIComponent,o=e.business,u=e.handleUpdateBusinessState,c=Sf(nr(),1)[0],l=Sf(dr(),1)[0].token,f=Sf(Lr(),2)[1],p=Sf(Fn(),2)[1].showToast,d=Sf(Object(i.useState)({loading:!1,error:null,product:r||{}}),2),h=d[0],y=d[1],v=Sf(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=Sf(Object(i.useState)(null),2),O=g[0],w=g[1],j=function(){var e=jf(a.a.mark((function e(n){var i,s,d,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,f("LOADING","Loading")),b((function(e){return gf(gf({},e),{},{loading:!1})})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(n)},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/products/").concat(r.id),i);case 6:return s=e.sent,e.next=9,s.json();case 9:(d=e.sent).error?b(gf(gf({},m),{},{loading:!1,error:d.resulut})):(y(gf(gf({},h),{},{product:gf(gf({},h.product),n)})),v=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===r.id?Object.assign(e,n):e}));return e.products=mf(t),!0})),g=gf(gf({},o),{},{menus_shared:v}),u&&u(g),p(Dn.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(gf(gf({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=jf(a.a.mark((function e(n,i){var s,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,f("LOADING","Loading")),b(gf(gf({},m),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:i})},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/extras/").concat(n),s);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(gf(gf({},m),{},{loading:!1,error:v.resulut})):(g=h.product.extras.filter((function(e){return e.id===n&&(e.enabled=i),!0})),O=gf(gf({},h.product),{},{extras:g}),y(gf(gf({},h),{},{product:gf(gf({},h.product),O)})),w=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===r.id?Object.assign(e,O):e}));return e.products=mf(t),!0})),j=gf(gf({},o),{},{menus_shared:w}),u&&u(j),p(Dn.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(gf(gf({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),E=function(){var e=jf(a.a.mark((function e(n,i){var s,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,f("LOADING","Loading")),b(gf(gf({},m),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:i})},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/options/").concat(n),s);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(gf(gf({},m),{},{loading:!1,error:v.resulut})):(g=h.product.extras.filter((function(e){var t=e.options.map((function(e){return e.id===n?gf(gf({},e),{},{enabled:i}):e}));return e.options=mf(t),!0})),O=gf(gf({},h.product),{},{extras:g}),y(gf(gf({},h),{},{product:gf(gf({},h.product),O)})),w=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===r.id?Object.assign(e,O):e}));return e.products=mf(t),!0})),j=gf(gf({},o),{},{menus_shared:w}),u&&u(j),p(Dn.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(gf(gf({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),P=function(){var e=jf(a.a.mark((function e(n,i){var s,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,f("LOADING","Loading")),b((function(e){return gf(gf({},e),{},{loading:!1})})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({enabled:i})},e.next=6,fetch("".concat(c.root,"/business/").concat(o.id,"/menus_shared/").concat(t.id,"/suboptions/").concat(n),s);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(gf(gf({},m),{},{loading:!1,error:v.resulut})):(g=h.product.extras.filter((function(e){var t=e.options.filter((function(e){var t=e.suboptions.map((function(e){return e.id===n?gf(gf({},e),{},{enabled:i}):e}));return e.suboptions=mf(t),!0}));return e.options=mf(t),!0})),O=gf(gf({},h.product),{},{extras:g}),y(gf(gf({},h),{},{product:gf(gf({},h.product),O)})),w=o.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===r.id?Object.assign(e,O):e}));return e.products=mf(t),!0})),j=gf(gf({},o),{},{menus_shared:w}),u&&u(j),p(Dn.Success,f("PRODUCT_SAVED","Product saved")),b({loading:!1,changes:{},error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(gf(gf({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){b(gf(gf({},m),{},{changes:{},error:null})),y(gf(gf({},h),{},{product:r||{}}))}),[r]),s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,vf({},e,{productState:h,formState:m,handleUpdateBusinessSharedMenuProduct:j,handleChangeInput:function(e){e.persist(),b((function(t){return gf(gf({},t),{},{changes:gf(gf({},m.changes),{},Of({},e.target.name,e.target.value))})})),clearTimeout(O),w(setTimeout((function(){j(Of({},e.target.name,e.target.value))}),750))},handleChangeItem:function(e){b((function(t){return gf(gf({},t),{},{changes:gf(gf({},m.changes),e)})})),j(e)},handleUpdateExtra:S,handleUpdateOption:E,handleUpdateSuboption:P})))};function If(){return If=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},If.apply(this,arguments)}function xf(e){return function(e){if(Array.isArray(e))return Lf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Uf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Af(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Af(Object(r),!0).forEach((function(t){_f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Af(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kf(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Df(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Uf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uf(e,t){if(e){if("string"==typeof e)return Lf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lf(e,t):void 0}}function Lf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Cf.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Cf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ff=function(e){var t=e.menu,r=e.UIComponent,n=e.business,o=e.handleUpdateBusinessState,u=Df(nr(),1)[0],c=Df(dr(),1)[0].token,l=Df(Lr(),2)[1],f=Df(Fn(),2)[1].showToast,p=Df(Object(i.useState)({loading:!1,error:null,menu:t||{}}),2),d=p[0],h=p[1],y=Df(Object(i.useState)({loading:!1,error:null}),2),v=y[0],m=y[1],b=function(){var e,r=(e=a.a.mark((function e(r,i){var s,p,d,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dn.Info,l("LOADING","Loading")),m(Tf(Tf({},v),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(i)},e.next=6,fetch("".concat(u.root,"/business/").concat(n.id,"/menus_shared/").concat(t.id,"/products/").concat(r),s);case 6:return p=e.sent,e.next=9,p.json();case 9:(d=e.sent).error?m({loading:!1,error:d.resulut}):(h=n.menus_shared.filter((function(e){var t=e.products.map((function(e){return e.id===r?Tf(Tf({},e),i):e}));return e.products=xf(t),!0})),y=Tf(Tf({},n),{},{menus_shared:h}),o&&o(y),f(Dn.Success,l("PRODUCT_SAVED","Product saved")),m({loading:!1,error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){kf(a,n,o,i,s,"next",e)}function s(e){kf(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}();return Object(i.useEffect)((function(){h(Tf(Tf({},d),{},{menu:t||{}}))}),[t]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,If({},e,{menuState:d,actionState:v,handleUpdateBusinessSharedMenuProduct:b})))};function Bf(){return Bf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bf.apply(this,arguments)}function Mf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ff.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ff.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Nf=function(e){var t=e.orderType,r=e.sortOptions,n=e.defaultSortOption,o=e.onChangeSortOption,a=e.UIComponent,u=Mf(Object(i.useState)(n),2),c=u[0],l=u[1],f=Mf(Object(i.useState)(r),2),p=f[0],d=f[1];return Object(i.useEffect)((function(){var e="delivery_time"===t?"Pickup time":"Delivery time";d(r.filter((function(t){return t!==e})))}),[t]),s.a.createElement(s.a.Fragment,null,a&&s.a.createElement(a,Bf({},e,{orderType:t,sortOptions:p,currentOptionSelected:c,onChangeSortOption:function(e){l(e),o&&o(e)}})))};function zf(){return zf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zf.apply(this,arguments)}function Gf(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function qf(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Gf(a,n,o,i,s,"next",e)}function s(e){Gf(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Yf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yf(Object(r),!0).forEach((function(t){Jf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vf(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Wf(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function Hf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Wf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wf(e,t){if(e){if("string"==typeof e)return Kf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kf(e,t):void 0}}function Kf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Nf.propTypes={UIComponent:c.a.elementType,sortOptions:c.a.arrayOf(c.a.string),defaultSortOption:c.a.string,orderType:c.a.number,onChangeSortOption:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Nf.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Xf=function(e){var t=e.UIComponent,r=e.categoryState,n=e.business,o=e.handleUpdateBusinessState,u=e.categoryId,c=e.categorySelected,l=Hf(Lr(),2)[1],f=Hf(nr(),1)[0],p=Hf(Fn(),2)[1].showToast,d=Hf(dr(),1)[0],h=d.token,y=d.loading,v=Hf(Pn(),1)[0].parsePrice,m=Hf(Object(i.useState)({products:null,loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=Hf(Object(i.useState)(!1),2),w=O[0],j=O[1],S=Hf(Object(i.useState)(!1),2),E=S[0],P=S[1],C=Hf(Object(i.useState)({row:-1,col:-1}),2),I=C[0],x=C[1],A="".concat(n.tax,"% ").concat(1===n.tax_type?l("INCLUDED_ON_PRICE","Included on price"):l("NOT_INCLUDED_ON_PRICE","Not included on price")),T="".concat(v(0)," + ").concat(n.service_fee,"%"),_=function(){var e=qf(a.a.mark((function e(t,r,n){var o,i,s,u,c,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Dn.Info,l("LOADING","Loading")),g($f($f({},b),{},{loading:!0})),o={method:r?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify({products:JSON.stringify(t)})},i="".concat(f.root,"/bulks/products"),e.next=9,fetch(i,o);case 9:return s=e.sent,e.next=12,s.json();case 12:u=e.sent,c=u.error,d=u.result,c?g($f($f({},b),{},{loading:!1,result:{error:!0,result:d}})):(g($f($f({},b),{},{loading:!1,result:{error:!1,result:r?l("PRODUCT_CREATED","Product created"):l("PRODUCT_UPDATE","Product updated")}})),p(Dn.Success,r?l("PRODUCT_CREATED","Product created"):l("PRODUCT_UPDATE","Product updated")),k()),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),g($f($f({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,r,n){return e.apply(this,arguments)}}(),k=function(){var e=qf(a.a.mark((function e(){var t,r,i,s,p,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t=u||c.id,r={business_id:null==n?void 0:n.id,category_id:parseInt(t)},e.next=7,f.businesses(null==n?void 0:n.id).categories(parseInt(t)).products().parameters(r).get();case 7:i=e.sent,s=i.content,p=s.error,d=s.result,p?g($f($f({},b),{},{loading:!1,result:{error:!0,result:d}})):(o&&(h=null==n?void 0:n.categories.map((function(e){return parseInt(e.id)===parseInt(t)?$f($f({},e),{},{products:d}):e})),o($f($f({},n),{},{categories:h}))),g($f($f({},b),{},{products:d.map((function(e){var t,r,o,a;return $f($f({},e),{},{taxShow:null!=e&&e.tax?"".concat(null===(t=e.tax)||void 0===t?void 0:t.rate,"% ").concat(1===(null===(r=n.tax)||void 0===r?void 0:r.type)?l("INCLUDED_ON_PRICE","Included on price"):l("NOT_INCLUDED_ON_PRICE","Not included on price")):A,feeShow:null!=e&&e.fee?"".concat(v(null===(o=e.fee)||void 0===o?void 0:o.fixed)," + ").concat(null===(a=e.fee)||void 0===a?void 0:a.percentage,"%"):T})})),loading:!1,result:{error:!1,result:l("PRODUCT_SAVED","Product saved")}}))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),g($f($f({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=qf(a.a.mark((function e(t){var r,n,o,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Dn.Info,l("LOADING","Loading")),g($f($f({},b),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify({products:JSON.stringify(t)})},n="".concat(f.root,"/bulks/products"),e.next=9,fetch(n,r);case 9:return o=e.sent,e.next=12,o.json();case 12:i=e.sent,s=i.error,u=i.result,s?g($f($f({},b),{},{loading:!1,result:{error:!0,result:u}})):(g($f($f({},b),{},{loading:!1,result:{error:!1,result:l("PRODUCT_DELETED","Product deleted")}})),p(Dn.Success,l("PRODUCT_DELETED","Product deleted")),k()),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),g($f($f({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t=[],o=Vf(r.products);try{for(o.s();!(e=o.n()).done;){var a,i,s,u,c=e.value,f=null!=c&&c.tax?"".concat(null===(a=c.tax)||void 0===a?void 0:a.rate,"% ").concat(1===(null===(i=n.tax)||void 0===i?void 0:i.type)?l("INCLUDED_ON_PRICE","Included on price"):l("NOT_INCLUDED_ON_PRICE","Not included on price")):A,p=c.fee?"".concat(v(null===(s=c.fee)||void 0===s?void 0:s.fixed)," + ").concat(null===(u=c.fee)||void 0===u?void 0:u.percentage,"%"):T,d=$f($f({},c),{},{taxShow:f,feeShow:p});t.push(d)}}catch(e){o.e(e)}finally{o.f()}g($f($f({},b),{},{products:t}))}),[null==r?void 0:r.products]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,zf({},e,{handleItemChange:function(e,t,r){if(E)P(!1);else if("loadData"!==t){e=e||[];var o=[],a=[],i=[],s=[],f=u||c.id;e.forEach((function(e){var t={name:!1,price:!1};if(e[2]!==e[3]){for(var u=!0,c=0;c<o.length;c++)if(o[c]===e[0]){u=!1;break}if(u){o.push(e[0]);var p=r.getSourceDataAtRow(e[0]);if(r.validateRows(o,(function(e){})),p.name||(t.name=!0,g($f($f({},b),{},{result:{error:!0,result:[l("NAME_REQUIRED","Name Required")]}}))),p.price&&"number"!=typeof p.price){var d=parseFloat(p.price);d?p.price=d:(t.price=!0,g($f($f({},b),{},{result:{error:!0,result:[l("PRODUCT_PRICE_NUMBER")]}})))}if(p.quantity&&"number"!=typeof p.quantity&&"NA"!==p.quantity){var h=parseFloat(p.quantity);h?p.quantity=h:t.quantity=!0}if(p.id)if(p.name||p.price||p.description){if(!(t.price||t.name||t.quantity)){p.description||(p.description=null);var y={id:p.id,name:p.name,description:p.description?p.description:" ",price:p.price?p.price:0,offer_price:(null==p?void 0:p.offer_price)||0,category_id:f,business_id:null==n?void 0:n.id};(p.quantity&&"NA"!==p.quantity||0===p.quantity)&&(y.quantity=p.quantity,y.inventoried=!0),i.push(y)}}else p.row=e[0],a.push(p);else if(!(t.price||t.name||t.quantity)){var v={name:p.name,description:p.description?p.description:" ",price:p.price?p.price:0,offer_price:(null==p?void 0:p.offer_price)||0,category_id:f,business_id:null==n?void 0:n.id};(p.quantity&&"NA"!==p.quantity||0===p.quantity)&&(v.quantity=p.quantity,v.inventoried=!0),s.push(v)}}}})),s.length>0&&_(s,!0,r),i.length>0&&_(i,!1,r),a.length>0&&(r.alter("remove_row",a[0].row,a.length),j(!0))}},spreadSheetState:b,handleRowRemove:function(e,t,r,n){if(n){var o,a=[],i=Vf(r);try{for(i.s();!(o=i.n()).done;){var s=o.value;a.push(null==n?void 0:n.getSourceDataAtRow(s).id)}}catch(e){i.e(e)}finally{i.f()}w&&j(!1),setTimeout((function(){D(a)}),1)}},handleAfterSectionEnd:function(e,t,r,n,o){I.row===e&&I.col===t||e!==r||t!==n||(I.row=e,I.col=t,x({row:e,col:t}),o.deselectCell(),o.selectCell(e,t))},handleoutsideClickDeselects:function(){return x({row:-1,col:-1}),!1}})))};function Zf(){return Zf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zf.apply(this,arguments)}function Qf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ep(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qf(Object(r),!0).forEach((function(t){tp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rp(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function np(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return op(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return op(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function op(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Xf.propTypes={UIComponent:c.a.elementType,businessState:c.a.object,setBusinessState:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Xf.defaultProps={};var ap=function(e){var t=e.businessTypes,r=e.onChangeBusinessType,n=e.defaultBusinessType,o=e.UIComponent,u=np(nr(),1)[0],c=np(Object(i.useState)(n),2),l=c[0],f=c[1],p=np(Object(i.useState)({loading:!0,error:null,types:[],pagination:null}),2),d=p[0],h=p[1],y=function(){var e,t=(e=a.a.mark((function e(){var t,r,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(u.root,'/business_types?where=[{"attribute":"enabled","value":true}]'),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:if(r=e.sent,n=r.error,o=r.result,i=r.pagination,n){e.next=14;break}return o.length>0&&o.unshift({id:null,enabled:!0,image:null,name:"All"}),h(ep(ep({},d),{},{loading:!1,types:o,pagination:i})),e.abrupt("return");case 14:h(ep(ep({},d),{},{loading:!1,error:o})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),h(ep(ep({},d),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){rp(a,n,o,i,s,"next",e)}function s(e){rp(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){t?h(ep(ep({},d),{},{loading:!1,types:t})):y()}),[t]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,Zf({},e,{typesState:d,businessTypes:t,currentTypeSelected:l,handleChangeBusinessType:function(e){f(e),r(e)}})))};function ip(){return ip=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ip.apply(this,arguments)}function sp(e){return function(e){if(Array.isArray(e))return yp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||hp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function up(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function cp(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){up(a,n,o,i,s,"next",e)}function s(e){up(a,n,o,i,s,"throw",e)}i(void 0)}))}}function lp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lp(Object(r),!0).forEach((function(t){pp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||hp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hp(e,t){if(e){if("string"==typeof e)return yp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yp(e,t):void 0}}function yp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}ap.propTypes={UIComponent:c.a.elementType,businessTypes:c.a.arrayOf(c.a.object),defaultBusinessType:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ap.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var vp=function(e){var t,r=e.UIComponent,n=e.setBusinessTypes,o=e.businessTypes,u=dp(nr(),1)[0],c=dp(dr(),1)[0].token,l=dp(Fn(),2)[1].showToast,f=dp(Lr(),2)[1],p=dp(Object(i.useState)({businessType:null!==(t=e.businessType)&&void 0!==t?t:null}),2),d=p[0],h=p[1],y=dp(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=y[0],m=y[1],b=function(){var e=cp(a.a.mark((function e(){var t,r,i,s,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,f("LOADING","Loading")),m(fp(fp({},v),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(v.changes)},e.next=6,fetch("".concat(u.root,"/business_types/").concat(null==d||null===(t=d.businessType)||void 0===t?void 0:t.id),r);case 6:return i=e.sent,e.next=9,i.json();case 9:(s=e.sent).error?m(fp(fp({},v),{},{loading:!1,error:s.result})):(h({businessType:fp(fp({},d.businessType),s.result)}),m({loading:!1,changes:{},error:null}),n&&(p=o.map((function(e){var t;return e.id===(null==s||null===(t=s.result)||void 0===t?void 0:t.id)?fp(fp({},e),null==s?void 0:s.result):e})),n(p)),l(Dn.Success,f("CATEGORY_UPDATED","Category updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(fp(fp({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var t=cp(a.a.mark((function t(){var r,i,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dn.Info,f("LOADING","Loading")),m(fp(fp({},v),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(v.changes)},t.next=6,fetch("".concat(u.root,"/business_types"),r);case 6:return i=t.sent,t.next=9,i.json();case 9:(s=t.sent).error?m(fp(fp({},v),{},{loading:!1,error:s.result})):(m({loading:!1,changes:{},error:null}),n&&n([].concat(sp(o),[s.result])),l(Dn.Success,f("CATEGORY_ADDED","Category added")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(fp(fp({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=cp(a.a.mark((function t(){var r,i,s,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dn.Info,f("LOADING","Loading")),m(fp(fp({},v),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(u.root,"/business_types/").concat(d.businessType.id),r);case 6:return i=t.sent,t.next=9,i.json();case 9:(s=t.sent).error?m(fp(fp({},v),{},{loading:!1,error:s.result})):(m({loading:!1,changes:{},error:null}),n&&(p=o.filter((function(e){return e.id!==d.businessType.id})),n(p)),l(Dn.Success,f("CATEGORY_DELETED","Category deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(fp(fp({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var t;m({loading:!1,changes:{},error:null}),h({businessType:null!==(t=e.businessType)&&void 0!==t?t:null})}),[null==e?void 0:e.businessType]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,ip({},e,{businessTypeState:d,typeFormState:v,handleChangeInput:function(e){m(fp(fp({},v),{},{changes:fp(fp({},v.changes),{},pp({},e.target.name,e.target.value))}))},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){m(fp(fp({},v),{},{changes:fp(fp({},v.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleUpdateProductType:b,handleAddProductType:g,handleDeleteProductType:O})))};function mp(){return mp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mp.apply(this,arguments)}function bp(e){return function(e){if(Array.isArray(e))return Cp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Op(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gp(Object(r),!0).forEach((function(t){wp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jp(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Sp(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){jp(a,n,o,i,s,"next",e)}function s(e){jp(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Ep(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Pp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pp(e,t){if(e){if("string"==typeof e)return Cp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Cp(e,t):void 0}}function Cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}vp.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},vp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ip=function(e){var t=e.UIComponent,r=e.business,n=e.handleSuccessUpdate,o=Ep(nr(),1)[0],u=Ep(dr(),1)[0].token,c=Ep(Lr(),2)[1],l=Ep(Fn(),2)[1].showToast,f=Ep(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),p=f[0],d=f[1],h=function(){var e=Sp(a.a.mark((function e(){var t,i,s,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,c("LOADING","Loading")),d(Op(Op({},p),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(p.changes)},e.next=6,fetch("".concat(o.root,"/business/").concat(null==r?void 0:r.id,"/webhooks"),t);case 6:return i=e.sent,e.next=9,i.json();case 9:null!=(s=e.sent)&&s.error?d(Op(Op({},p),{},{changes:p.changes,result:s,loading:!1})):(d(Op(Op({},p),{},{changes:{},result:s,loading:!1})),(f=bp(r.webhooks)).push(null==s?void 0:s.result),n&&n(Op(Op({},r),{},{webhooks:bp(f)})),l(Dn.Success,c("WEBHOOK_ADDED","Webhook added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(Op(Op({},p),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Sp(a.a.mark((function e(t,i){var s,f,h,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,c("LOADING","Loading")),d(Op(Op({},p),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)},body:JSON.stringify(t)},e.next=6,fetch("".concat(o.root,"/business/").concat(null==r?void 0:r.id,"/webhooks/").concat(i),s);case 6:return f=e.sent,e.next=9,f.json();case 9:null!=(h=e.sent)&&h.error?d(Op(Op({},p),{},{result:h,loading:!1})):(d(Op(Op({},p),{},{result:h,loading:!1})),v=null==r||null===(y=r.webhooks)||void 0===y?void 0:y.map((function(e){var t,r;return e.id===(null==h||null===(t=h.result)||void 0===t?void 0:t.id)?Op(Op({},e),{},{delay:null==h||null===(r=h.result)||void 0===r?void 0:r.delay}):e})),n&&n(Op(Op({},r),{},{webhooks:bp(v)})),l(Dn.Success,c("WEBHOOK_UPDATED","Webhook updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(Op(Op({},p),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),v=function(){var e=Sp(a.a.mark((function e(t){var i,s,f,h,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,c("LOADING","Loading")),d(Op(Op({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=6,fetch("".concat(o.root,"/business/").concat(null==r?void 0:r.id,"/webhooks/").concat(t),i);case 6:return s=e.sent,e.next=9,s.json();case 9:null!=(f=e.sent)&&f.error?d(Op(Op({},p),{},{result:f,loading:!1})):(d(Op(Op({},p),{},{loading:!1})),y=null==r||null===(h=r.webhooks)||void 0===h?void 0:h.filter((function(e){return e.id!==t})),v=Op(Op({},r),{},{webhooks:bp(y)}),n&&n(v),l(Dn.Success,c("WEBHOOK_DELETED","Webhook deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(Op(Op({},p),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,mp({},e,{businessTypeFormState:p,handleChangeInput:function(e){var t=wp({},e.target.name,e.target.value);d(Op(Op({},p),{},{changes:Op(Op({},p.changes),t)}))},handleChangeSelect:function(e,t){d(Op(Op({},p),{},{changes:Op(Op({},p.changes),{},wp({},t,e))}))},hookFormState:p,handleUpdateAddClick:h,handleDeleteWebhook:v,handleChangeDelay:function(e,t){var r=Op(Op({},t),{},{delay:e});y(r,null==t?void 0:t.id)}})))};function xp(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Dp(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function Ap(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ap(Object(r),!0).forEach((function(t){_p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ap(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Dp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dp(e,t){if(e){if("string"==typeof e)return Up(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Up(e,t):void 0}}function Up(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ip.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleSuccessUpdate:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ip.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Lp=function(e){var t=e.apiKey,r=e.mapControls,n=e.clearState,o=e.location,a=e.type,u=e.data,c=e.fillStyle,l=e.infoContentString,f=e.handleData,p=e.setClearState;t||console.warn("Prop `apiKey` is required to use Google Maps components.");var d=Object(i.useRef)(),h=kp(Object(i.useState)(null),2),y=h[0],v=h[1],m=kp(Object(i.useState)(null),2),b=m[0],g=m[1],O=kp(Object(i.useState)(null),2),w=O[0],j=O[1],S=kp(Object(i.useState)(null),2),E=S[0],P=S[1],C=kp(Object(i.useState)(null),2),I=C[0],x=C[1],A=kp(Object(i.useState)(null),2),T=A[0],_=A[1],k=o?{lat:null==o?void 0:o.lat,lng:null==o?void 0:o.lng}:null==r?void 0:r.defaultPosition,D=kp(Object(i.useState)(!1),2),U=D[0],L=D[1],F=function(){f({center:{lat:w.getCenter().lat(),lng:w.getCenter().lng()},radio:w.getRadius()/1e3})},B=function(){f(Tp(Tp({},u),{},{radio:w.getRadius()/1e3}))},M=function(){var e,t=[],r=xp(E.getPath().getArray());try{for(r.s();!(e=r.n()).done;){var n=e.value,o={lat:n.lat(),lng:n.lng()};t.push(o)}}catch(e){r.e(e)}finally{r.f()}f(t)},R=function(e){p(!1),T.setMap(null),1===a?(j(e.overlay),I&&I.open(y)):P(e.overlay)};return Object(i.useEffect)((function(){U&&I&&(I.setContent(l),null!=u&&u.center&&I.setPosition(u.center))}),[I,l,u,U]),Object(i.useEffect)((function(){w&&(f({center:{lat:w.getCenter().lat(),lng:w.getCenter().lng()},radio:w.getRadius()/1e3}),window.google.maps.event.addListener(w,"center_changed",F),window.google.maps.event.addListener(w,"radius_changed",B))}),[w]),Object(i.useEffect)((function(){if(E){var e,t=[],r=xp(E.getPath().getArray());try{for(r.s();!(e=r.n()).done;){var n=e.value,o={lat:n.lat(),lng:n.lng()};t.push(o)}}catch(e){r.e(e)}finally{r.f()}f(t),window.google.maps.event.addListener(E,"mouseup",M)}}),[E]),Object(i.useEffect)((function(){T&&T.addListener("overlaycomplete",R)}),[T]),Object(i.useEffect)((function(){var e,t,r;if(null!==(e=window.google)&&void 0!==e&&e.maps&&(n&&(w&&(w.setMap(null),j(null),I&&I.close()),E&&(E.setMap(null),P(null)),T&&T.setMap(null),null!==(t=window.google.maps)&&void 0!==t&&null!==(r=t.drawing)&&void 0!==r&&r.DrawingManager))){var o=new window.google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:window.google.maps.ControlPosition.TOP_CENTER,drawingModes:1===a?[window.google.maps.drawing.OverlayType.CIRCLE]:[window.google.maps.drawing.OverlayType.POLYGON]},circleOptions:Tp(Tp({},c),{},{clickable:!1,draggable:!0}),polygonOptions:Tp(Tp({},c),{},{clickable:!1,draggable:!1})});_(o),o.setMap(y)}}),[n,a]),Object(i.useEffect)((function(){if(U&&y){var e=new window.google.maps.LatLngBounds;if(w&&(e.union(w.getBounds()),y.fitBounds(e)),E&&Array.isArray(u)){var t,r=xp(u);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.extend(n)}}catch(e){r.e(e)}finally{r.f()}y.fitBounds(e)}}}),[U,u,a,y,w,E]),Object(i.useEffect)((function(){U&&(k.lat=null==o?void 0:o.lat,k.lng=null==o?void 0:o.lng,b&&b.setPosition(new window.google.maps.LatLng(null==k?void 0:k.lat,null==k?void 0:k.lng)),y&&y.panTo(new window.google.maps.LatLng(null==k?void 0:k.lat,null==k?void 0:k.lng)))}),[o]),Object(i.useEffect)((function(){if(U){var e,t,n,i,s=new window.google.maps.Map(d.current,{zoom:null!==(e=null==o?void 0:o.zoom)&&void 0!==e?e:r.defaultZoom,center:k,zoomControl:null==r?void 0:r.zoomControl,streetViewControl:null==r?void 0:r.streetViewControl,fullscreenControl:null==r?void 0:r.fullscreenControl,mapTypeControl:null==r?void 0:r.mapTypeControl,mapTypeId:null==r?void 0:r.mapTypeId,mapTypeControlOptions:Tp({style:window.google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:window.google.maps.ControlPosition.TOP_LEFT},null==r?void 0:r.mapTypeControlOptions)});if(v(s),i=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==k?void 0:k.lat,null==k?void 0:k.lng),map:s,draggable:!(null==r||!r.isMarkerDraggable)}),g(i),u){var f=new window.google.maps.InfoWindow({content:l,position:u.center});if(x(f),1===a&&null!=u&&u.center){var p=new window.google.maps.Circle(Tp(Tp({},c),{},{draggable:!0,map:s,center:u.center,radius:1e3*u.radio}));j(p),f.open(s)}if(2===a&&Array.isArray(u)){var h=new window.google.maps.Polygon(Tp(Tp({},c),{},{draggable:!1,map:s,paths:u}));P(h)}}if(null!==(t=window.google.maps)&&void 0!==t&&null!==(n=t.drawing)&&void 0!==n&&n.DrawingManager){var y=new window.google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:window.google.maps.ControlPosition.TOP_CENTER,drawingModes:1===a?[window.google.maps.drawing.OverlayType.CIRCLE]:[window.google.maps.drawing.OverlayType.POLYGON]},circleOptions:Tp(Tp({},c),{},{clickable:!1,draggable:!0}),polygonOptions:Tp(Tp({},c),{},{clickable:!1,draggable:!1})});_(y),y.setMap(s)}}}),[U]),Object(i.useEffect)((function(){if(t){var e=null;if(!window.document.getElementById("google-maps-sdk-shap")){window.googleAsyncInit=function(){L(!0)};var r=window.document.createElement("script");return r.id="google-maps-sdk-shap",r.async=!0,r.defer=!0,r.src="https://maps.googleapis.com/maps/api/js?key=".concat(t,"&libraries=drawing&callback=googleAsyncInit"),window.document.body.appendChild(r),function(){e&&clearInterval(e)}}"undefined"!=typeof google?L(!0):e=setInterval((function(){"undefined"!=typeof google&&(L(!0),clearInterval(e))}),100)}}),[t]),U&&s.a.createElement("div",{id:"map",ref:d,style:{width:"70%",height:"50%",position:"absolute"}})};function Fp(){return Fp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fp.apply(this,arguments)}function Bp(e){return function(e){if(Array.isArray(e))return Yp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mp(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Rp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Np(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rp(Object(r),!0).forEach((function(t){zp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||qp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qp(e,t){if(e){if("string"==typeof e)return Yp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yp(e,t):void 0}}function Yp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Lp.propTypes={UIComponent:c.a.elementType,maxLimitLocation:c.a.number,handleChangeAddressMap:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Lp.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]},Lp.propTypes={apiKey:c.a.string.isRequired};var $p=function(e){var t=e.UIComponent,r=e.business,n=e.handleUpdateBusinessState,o=e.setIsAddProduct,u=e.categorySelected,c=e.handleParentProductAdd,l=Gp(dr(),1)[0].loading,f=Gp(nr(),1)[0],p=Gp(Fn(),2)[1].showToast,d=Gp(Lr(),2)[1],h=Gp(Object(i.useState)({loading:!1,changes:{enabled:!0},result:{error:!1}}),2),y=h[0],v=h[1],m=function(){var e,t=(e=a.a.mark((function e(){var t,i,s,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Dn.Info,d("LOADING","Loading")),t=null===(null==u?void 0:u.id)&&"featured"===(null==u?void 0:u.id)?parseInt(null==r?void 0:r.categories[0]):parseInt(null==u?void 0:u.id),v(Np(Np({},y),{},{loading:!0})),e.next=8,f.businesses(parseInt(null==r?void 0:r.id)).categories(t).products().save(y.changes);case 8:i=e.sent,(s=i.content).error?v(Np(Np({},y),{},{changes:y.changes,result:s,loading:!1})):(v(Np(Np({},y),{},{changes:{},result:{error:!1,result:s.result},loading:!1})),n&&((h=Bp(null==r?void 0:r.categories)).forEach((function e(r){(null==r?void 0:r.id)===t&&r.products.push(s.result),Array.isArray(null==r?void 0:r.subcategories)&&r.subcategories.forEach(e)})),n(Np(Np({},r),{},{categories:h}))),o(!1),c&&c(!1),p(Dn.Success,d("PRODUCT_ADD","Product added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),v(Np(Np({},y),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Mp(a,n,o,i,s,"next",e)}function s(e){Mp(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Fp({},e,{formState:y,setFormState:v,handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){v(Np(Np({},y),{},{changes:Np(Np({},y.changes),{},{images:t.result})}))},t.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){var t=zp({},e.target.name,e.target.value);v(Np(Np({},y),{},{changes:Np(Np({},y.changes),t)}))},handleUpdateClick:m,handleChangeCheckBox:function(e){var t={enabled:e};v(Np(Np({},y),{},{changes:Np(Np({},y.changes),t)}))}})))};function Jp(){return Jp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jp.apply(this,arguments)}function Vp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}$p.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,setIsAddProduct:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$p.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Wp=function(e){var t,r=e.UIComponent,n=e.handleEditProduct,o=Vp(vn(),2),a=o[0],i=o[1],u=i.updateProduct,c=i.removeProduct,l=i.clearCart,f=Vp(en(),1)[0],p=(null===(t=f.order)||void 0===t?void 0:t.quantity)||0,d=(f.configs.max_product_amount?parseInt(f.configs.max_product_amount):100)-p;return s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,Jp({},e,{carts:a.carts,orderState:a,clearCart:l,removeProduct:c,changeQuantity:function(e,t){0===t?c(e):u({id:e.id,business_id:e.business_id,code:e.code,quantity:t})},getProductMax:function(e){var t=e.inventoried?e.stock:d,r=e.quantity+t-e.balance;return r<e.quantity?e.quantity:r},offsetDisabled:function(e){return(e.inventoried?e.stock:d)-(e.balance-e.quantity)},handleEditProduct:n})))};function Kp(){return Kp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kp.apply(this,arguments)}function Xp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xp(Object(r),!0).forEach((function(t){Qp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ed(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function td(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ed(a,n,o,i,s,"next",e)}function s(e){ed(a,n,o,i,s,"throw",e)}i(void 0)}))}}function rd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Wp.propTypes={UIComponent:c.a.elementType,handleEditProduct:c.a.func,validationFieldsType:c.a.string};var od=function(e){var t=e.businessId,r=e.actionsBeforePlace,n=e.handleCustomClick,o=e.onPlaceOrderClick,u=e.UIComponent,c=rd(nr(),1)[0],l=rd(Object(i.useState)(!1),2),f=l[0],p=l[1],d=rd(Object(i.useState)(null),2),h=d[0],y=d[1],v=rd(vn(),2),m=v[0],b=v[1].placeCart,g=rd(Object(i.useState)({business:null,loading:!0,error:null}),2),O=g[0],w=g[1],j=rd(Object(i.useState)(null),2),S=j[0],E=j[1],P=m.carts["businessId:".concat(t)],C=function(){var e=td(a.a.mark((function e(){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=["id","name","email","cellphone","address","paymethods","logo","location"],e.next=4,c.businesses(t).select(r).get();case 4:n=e.sent,o=n.content.result,w(Zp(Zp({},O),{},{loading:!1,business:o})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),w(Zp(Zp({},O),{},{loading:!1,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=td(a.a.mark((function e(){var t,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=S.data,["stripe","stripe_connect","stripe_direct"].includes(S.paymethod.gateway)&&(i={source_id:S.data.id}),s={paymethod_id:S.paymethodId,paymethod_data:S.data,offer_id:P.offer_id,amount:P.total},1===m.options.type&&(s=Zp(Zp({},s),{},{delivery_zone_id:P.delivery_zone_id})),!n){e.next=7;break}return n(s,S,P),e.abrupt("return");case 7:return s=Zp(Zp({},s),{},{paymethod_data:i}),p(!0),e.next=11,b(P.uuid,s);case 11:if(null==(u=e.sent)||!u.error){e.next=15;break}return y(null==u?void 0:u.result),e.abrupt("return");case 15:if(2!==(null==(c=null==u?void 0:u.result)||null===(t=c.paymethod_data)||void 0===t?void 0:t.status)||!r){e.next=19;break}return e.next=19,r(S,u.result);case 19:p(!1),o&&o(s,S,c);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){C()}),[t]),Object(i.useEffect)((function(){if(P&&1===P.status){var e={paymethod_id:S.paymethodId,paymethod_data:S.data,delivery_zone_id:P.delivery_zone_id,offer_id:P.offer_id,amount:P.total};o&&o(e,S,P)}}),[P]),s.a.createElement(s.a.Fragment,null,u&&s.a.createElement(u,Kp({},e,{cart:P,placing:f,errors:h,orderOptions:m.options,paymethodSelected:S,businessDetails:O,handlePaymethodChange:function(e){E(e)},handlerClickPlaceOrder:I})))};function ad(){return ad=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ad.apply(this,arguments)}function id(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?id(Object(r),!0).forEach((function(t){ud(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):id(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ud(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cd(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ld(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){cd(a,n,o,i,s,"next",e)}function s(e){cd(a,n,o,i,s,"throw",e)}i(void 0)}))}}function fd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}od.propTypes={UIComponent:c.a.elementType,handleCustomClick:c.a.func,onPlaceOrderClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},od.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dd=function(e){var t=e.UIComponent,r=fd(nr(),1)[0],n=fd(dr(),1)[0].token,o=fd(Fn(),2)[1].showToast,u=fd(Lr(),2)[1],c=fd(Jn(),2)[1].loadValidationFields,l=["city_dropdown_option","address","zipcode","address_notes"],f=fd(Object(i.useState)({fields:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=fd(Object(i.useState)({loading:!1,error:null}),2),y=h[0],v=h[1],m=function(){var e=ld(a.a.mark((function e(){var t,o,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(sd(sd({},p),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},e.next=5,fetch("".concat(r.root,"/checkoutfields"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||(s=i.result.filter((function(e){return!l.includes(e.code)})),u=[],["name","middle_name","lastname","second_lastname","email","mobile_phone","city_dropdown_option","address","zipcode","address_notes","coupon","driver_tip"].forEach((function(e){var t=s.findIndex((function(t){return t.code===e}));if(-1!==t){var r=s[t];s.splice(t,1),u.push(r)}})),d({fields:u,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(sd(sd({},p),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=ld(a.a.mark((function e(t,i){var s,l,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dn.Info,u("LOADING","Loading")),v(sd(sd({},y),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(i)},e.next=6,fetch("".concat(r.root,"/checkoutfields/").concat(t),s);case 6:return l=e.sent,e.next=9,l.json();case 9:(f=e.sent).error?v({loading:!1,error:f.result}):(v({loading:!1,error:null}),o(Dn.Success,u("FIELD_SAVED","Field saved")),h=p.fields.filter((function(e){return e.id===t&&Object.assign(e,f.result),!0})),d(sd(sd({},p),{},{fields:h})),c&&c()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){m()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,ad({},e,{checkoutFieldsState:p,handleChangeCheckoutFieldSetting:b})))};function hd(){return hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hd.apply(this,arguments)}function yd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yd(Object(r),!0).forEach((function(t){md(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function md(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bd(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function gd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Od(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Od(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Od(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}dd.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},dd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var wd=function(e){var t=e.UIComponent,r=gd(nr(),1)[0],n=gd(dr(),1)[0].token,o=gd(Object(i.useState)(null),2),u=o[0],c=o[1],l=gd(Object(i.useState)({result:null,loading:!1,error:null}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(vd(vd({},f),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({password:u})},e.next=5,fetch("".concat(r.root,"/users/check_password"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error?p(vd(vd({},f),{},{loading:!1,error:i.result})):p(vd(vd({},f),{},{loading:!1,result:i.result,error:null})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(vd(vd({},f),{},{loading:!1,error:e.t0}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){bd(a,n,o,i,s,"next",e)}function s(e){bd(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,hd({},e,{checkPasswordStatus:f,handleChangePassword:function(e){c(e)},getCheckPassword:d})))};function jd(){return jd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jd.apply(this,arguments)}function Sd(e){return function(e){if(Array.isArray(e))return _d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Td(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ed(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Td(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function Pd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pd(Object(r),!0).forEach((function(t){Id(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Id(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xd(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Ad(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Td(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Td(e,t){if(e){if("string"==typeof e)return _d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_d(e,t):void 0}}function _d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}wd.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var kd=function(e){var t=e.cities,r=e.propsToFetch,n=e.UIComponent,o=Ad(nr(),1)[0],u=Ad(Object(i.useState)({cities:[],loading:!0,error:null}),2),c=u[0],l=u[1],f=function(){var e,t=(e=a.a.mark((function e(){var t,n,i,s,u,f,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Cd(Cd({},c),{},{loading:!0})),e.next=4,o.countries().select(r).get();case 4:if(t=e.sent,n=t.content,i=n.error,s=n.result,u=[],!i){f=Ed(s);try{for(f.s();!(p=f.n()).done;)null!=(d=p.value)&&d.enabled&&(u=[].concat(Sd(u),Sd(null==d?void 0:d.cities)))}catch(e){f.e(e)}finally{f.f()}l(Cd(Cd({},c),{},{loading:!1,cities:u}))}e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l(Cd(Cd({},c),{},{loading:!1,error:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){xd(a,n,o,i,s,"next",e)}function s(e){xd(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){t?l(Cd(Cd({},c),{},{loading:!1,cities:t})):f()}),[]),s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,jd({},e,{citiesList:c})))};function Dd(){return Dd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dd.apply(this,arguments)}function Ud(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ld(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ud(Object(r),!0).forEach((function(t){Fd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ud(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Md(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Md(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Md(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}kd.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},kd.defaultProps={propsToFetch:["id","name","enabled","cities"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Rd=function(e){var t,r=e.businessId,n=e.price,o=e.UIComponent,a=Bd(vn(),2),u=a[0],c=a[1].applyCoupon,l=Bd(Object(i.useState)({open:!1,content:null,error:!1}),2),f=l[0],p=l[1],d=Bd(Lr(),2)[1],h=(null==u?void 0:u.carts)&&r&&(null==u||null===(t=u.carts["businessId:".concat(r)])||void 0===t?void 0:t.coupon)||null,y=Bd(Object(i.useState)(null),2),v=y[0],m=y[1],b=function(){c({business_id:r,coupon:null})};return Object(i.useEffect)((function(){n<1&&(b(),p(Ld(Ld({},f),{},{open:!0,content:d("COUPON_TOTAL_ERROR","The total value of the cart with discount must be at least 1$"),error:!0})))}),[n]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,Dd({},e,{couponDefault:h,couponInput:v,onChangeInputCoupon:function(e){return m(e)},handleButtonApplyClick:function(){c({business_id:r,coupon:v})},handleRemoveCouponClick:b,confirm:f,setConfirm:p})))};function Nd(){return Nd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nd.apply(this,arguments)}function zd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zd(Object(r),!0).forEach((function(t){qd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yd(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function $d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Rd.propTypes={UIComponent:c.a.elementType,isDisabled:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Rd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Vd=function(e){var t=e.UIComponent,r=e.userId,n=$d(nr(),1)[0],o=$d(dr(),1)[0].token,u=$d(Object(i.useState)({loading:!1,wallets:[],error:null}),2),c=u[0],l=u[1],f=function(){var e,t=(e=a.a.mark((function e(){var t,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Gd(Gd({},c),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(n.root,"/users/").concat(r,"/wallets"),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(s=e.sent).error?l(Gd(Gd({},c),{},{loading:!1,error:s.result})):l({loading:!1,wallets:s.result,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l(Gd(Gd({},c),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Yd(a,n,o,i,s,"next",e)}function s(e){Yd(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){f()}),[r]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Nd({},e,{WalletState:c})))};function Hd(){return Hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hd.apply(this,arguments)}function Wd(e){return function(e){if(Array.isArray(e))return nh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kd(Object(r),!0).forEach((function(t){Zd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qd(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function eh(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Qd(a,n,o,i,s,"next",e)}function s(e){Qd(a,n,o,i,s,"throw",e)}i(void 0)}))}}function th(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||rh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rh(e,t){if(e){if("string"==typeof e)return nh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nh(e,t):void 0}}function nh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Vd.propTypes={UIComponent:c.a.elementType,userId:c.a.oneOfType([c.a.number,c.a.string]),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Vd.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var oh=function(e){var t,r=e.asDashboard,n=e.UIComponent,o=e.paginationSettings,u=e.propsToFetch,c=e.initialPageSize,l=e.loadMorePageSize,f=e.isSearchByBusinessId,p=e.isSearchByBusinessName,d=e.isSearchByBusinessEmail,h=e.isSearchByBusinessPhone,y=th(nr(),1)[0],v=th(dr(),1)[0],m=th(Object(i.useState)({loading:!1,error:null,businesses:[]}),2),b=m[0],g=m[1],O=th(Object(i.useState)({currentPage:"pages"===o.controlType&&o.initialPage&&o.initialPage>=1?o.initialPage-1:0,pageSize:null!==(t=o.pageSize)&&void 0!==t?t:10}),2),w=O[0],j=O[1],S=th(Object(i.useState)(null),2),E=S[0],P=S[1],C=th(Object(i.useState)(!0),2),I=C[0],x=C[1],A=th(Object(i.useState)(null),2),T=A[0],_=A[1],k=function(){var e=eh(a.a.mark((function e(t,n){var o,i,s,c,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],s={query:{page:n,page_size:t}},(i=[]).push({attribute:"enabled",value:I}),T&&i.push({attribute:"types",conditions:[{attribute:"id",value:T}]}),E&&(c=[],f&&c.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(E,"%"))}}),p&&c.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(E,"%"))}}),d&&c.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(E,"%"))}}),h&&c.push({attribute:"phone",value:{condition:"ilike",value:encodeURI("%".concat(E,"%"))}}),i.push({conector:"OR",conditions:c})),i.length&&(o={conditions:i,conector:"AND"}),l=r?y.setAccessToken(v.token).businesses().select(u).asDashboard().where(o):y.setAccessToken(v.token).businesses().select(u).where(o),e.next=10,l.get(s);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),D=function(){var e=eh(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,g(Xd(Xd({},b),{},{loading:!0})),e.next=6,k(c||w.pageSize,1);case 6:t=e.sent,g({loading:!1,businesses:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||j({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?w.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),"Cancel"!==(null===e.t0||void 0===e.t0||null===(r=e.t0.constructor)||void 0===r?void 0:r.name)&&g(Xd(Xd({},b),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=eh(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(Xd(Xd({},b),{},{loading:!0})),e.prev=1,e.next=4,k(l,Math.ceil((null==w?void 0:w.to)/l)+1);case 4:t=e.sent,g({loading:!1,businesses:t.content.error?b.businesses:b.businesses.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||j({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?w.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&g(Xd(Xd({},b),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=eh(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(Xd(Xd({},b),{},{loading:!0})),e.prev=1,e.next=4,k(t,r);case 4:n=e.sent,g({loading:!1,businesses:n.content.error?b.businesses:n.content.result,error:n.content.error?n.content.result:null}),n.content.error||j({currentPage:n.content.pagination.current_page,pageSize:0===n.content.pagination.page_size?w.pageSize:n.content.pagination.page_size,totalPages:n.content.pagination.total_pages,total:n.content.pagination.total,from:n.content.pagination.from,to:n.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&g(Xd(Xd({},b),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}(),F=function(e){var t=b.businesses.filter((function(t){return t.id!==e}));j(Xd(Xd({},w),{},{to:(null==w?void 0:w.to)-1,total:(null==w?void 0:w.total)-1})),g(Xd(Xd({},b),{},{businesses:t}))},B=function(e){var t=[].concat(Wd(b.businesses),[e]);j(Xd(Xd({},w),{},{to:(null==w?void 0:w.to)+1,total:(null==w?void 0:w.total)+1})),g(Xd(Xd({},b),{},{businesses:t}))};return Object(i.useEffect)((function(){e.businesses?g(Xd(Xd({},b),{},{businesses:e.businesses})):D()}),[v,E,I,T]),s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,Hd({},e,{businessList:b,pagination:w,searchValue:E,onSearch:P,selectedBusinessActiveState:I,loadMoreBusinesses:U,getPageBusinesses:L,handleChangeBusinessActiveState:function(){x(!I)},handleChangeBusinessType:function(e){e!==T&&(g(Xd(Xd({},b),{},{businesses:[],loading:!0})),_(e))},handleSucessRemoveBusiness:F,handleSucessAddBusiness:B,handleSucessUpdateBusiness:function(e){if(b.businesses.find((function(t){return t.id===e.id})))if(I===(null==e?void 0:e.enabled)){var t=b.businesses.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));g(Xd(Xd({},b),{},{businesses:t}))}else F(e.id);else I===(null==e?void 0:e.enabled)?B(e):F(e.id)}})))};function ah(){return ah=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ah.apply(this,arguments)}function ih(e){return function(e){if(Array.isArray(e))return hh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sh(Object(r),!0).forEach((function(t){ch(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ch(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lh(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function fh(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){lh(a,n,o,i,s,"next",e)}function s(e){lh(a,n,o,i,s,"throw",e)}i(void 0)}))}}function ph(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||dh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dh(e,t){if(e){if("string"==typeof e)return hh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hh(e,t):void 0}}function hh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}oh.propTypes={UIComponent:c.a.elementType,isSearchByBusinessId:c.a.bool,isSearchByBusinessEmail:c.a.bool,isSearchByBusinessPhone:c.a.bool,propsToFetch:c.a.arrayOf(u.string)},oh.defaultProps={loadMorePageSize:10,propsToFetch:["id","alcohol","city","delivery_price","distance","delivery_time","enabled","featured","food","groceries","header","laundry","logo","minimum","name","pickup_time","slug","reviews"],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var yh=function(e){var t,r=e.UIComponent,n=e.propsToFetch,o=e.orders,u=e.isOnlyDelivery,c=e.driverId,l=e.customerId,f=e.businessId,p=e.orderIds,d=e.deletedOrderId,h=e.orderStatus,y=e.orderBy,v=e.orderDirection,m=e.useDefualtSessionManager,b=e.paginationSettings,g=e.filterValues,O=e.searchValue,w=e.isSearchByOrderId,j=e.isSearchByCustomerEmail,S=e.isSearchByCustomerPhone,E=e.isSearchByBusinessName,P=e.orderIdForUnreadCountUpdate,C=ph(nr(),1)[0],I=ph(Nr(),1)[0],x=ph(Object(i.useState)({loading:!o,error:null,orders:[]}),2),A=x[0],T=x[1],_=ph(Object(i.useState)({currentPage:"pages"===b.controlType&&b.initialPage&&b.initialPage>=1?b.initialPage-1:0,pageSize:null!==(t=b.pageSize)&&void 0!==t?t:10}),2),k=_[0],D=_[1],U=ph(dr(),1)[0],L=Pr(),F=m?U.token:e.accessToken,B={},M=ph(Object(i.useState)({loading:!1,error:null}),2),R=M[0],N=M[1],z=function(e,t){if("id"===e){if("desc"===v)return t.sort((function(e,t){return t.id-e.id}));if("asc"===v)return t.sort((function(e,t){return e.id-t.id}))}return"last_direct_message_at"===e?t.sort((function(e,t){return new Date(t.last_direct_message_at)-new Date(e.last_direct_message_at)})):t},G=function(){var e=fh(a.a.mark((function e(t){var r,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(uh(uh({},R),{},{loading:!0})),r={},B.updateOrders=r,e.next=6,C.setAccessToken(F).orders(t.id).save({status:t.newStatus},{cancelToken:r});case 6:n=e.sent,o=n.content,N({loading:!1,error:o.error?o.result:null}),o.error||(i=A.orders.filter((function(e){return e.id!==t.id})),T(uh(uh({},A),{},{orders:i}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),N({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=fh(a.a.mark((function e(t,r){var o,i,s,d,m,b,P,I,x;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],i=[],s={query:{orderBy:("desc"===v?"-":"")+y,page:r,page_size:t}},p&&i.push({attribute:"id",value:p}),0===Object.keys(g).length?h&&i.push({attribute:"status",value:h}):g.statuses.length>0?(d=g.statuses.every((function(e){return-1!==h.indexOf(e)})),m=h.every((function(e){return-1!==g.statuses.indexOf(e)})),d&&i.push({attribute:"status",value:g.statuses}),m&&h&&i.push({attribute:"status",value:h})):h&&i.push({attribute:"status",value:h}),u&&i.push({attribute:"delivery_type",value:1}),c&&i.push({attribute:"driver_id",value:c}),l&&i.push({attribute:"customer_id",value:l}),f&&i.push({attribute:"business_id",value:f}),O&&(b=[],w&&b.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}),j&&b.push({attribute:"customer",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}]}),S&&b.push({attribute:"customer",conditions:[{attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}]}),E&&b.push({attribute:"business",conditions:[{attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(O,"%"))}}]}),i.push({conector:"OR",conditions:b})),Object.keys(g).length&&(P=[],null!=g&&g.orderId&&P.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(null==g?void 0:g.orderId,"%"))}}),null!==g.deliveryFromDatetime&&P.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(g.deliveryFromDatetime)}}),null!==g.deliveryEndDatetime&&P.push({attribute:"delivery_datetime",value:{condition:"<=",value:g.deliveryEndDatetime}}),0!==g.businessIds.length&&P.push({attribute:"business_id",value:g.businessIds}),0!==g.driverIds.length&&P.push({attribute:"driver_id",value:g.driverIds}),0!==g.deliveryTypes.length&&P.push({attribute:"delivery_type",value:g.deliveryTypes}),0!==g.driverGroupIds.length&&P.push({attribute:"driver_id",value:g.driverGroupIds}),0!==g.paymethodIds.length&&P.push({attribute:"paymethod_id",value:g.paymethodIds}),P.length&&i.push({conector:"AND",conditions:P})),i.length&&(o={conditions:i,conector:"AND"}),I={},B.orders=I,s.cancelToken=I,x=n?C.setAccessToken(F).orders().asDashboard().select(n).where(o):C.setAccessToken(F).orders().asDashboard().where(o),e.next=18,x.get(s);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Y=function(e){var t=!0;return void 0!==g.businessIds&&g.businessIds.length>0&&(g.businessIds.includes(e.business_id)||(t=!1)),void 0!==g.driverIds&&g.driverIds.length>0&&(g.driverIds.includes(e.driver_id)||(t=!1)),void 0!==g.deliveryTypes&&g.deliveryTypes.length>0&&(g.deliveryTypes.includes(e.delivery_type)||(t=!1)),void 0!==g.paymethodIds&&g.paymethodIds.length>0&&(g.paymethodIds.includes(e.paymethod_id)||(t=!1)),void 0!==g.statuses&&g.statuses.length>0&&(g.statuses.includes(parseInt(e.status))||(t=!1)),t},$=function(){var e=fh(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,T(uh(uh({},A),{},{loading:!0})),e.next=6,q(k.pageSize,1);case 6:t=e.sent,T({loading:!1,orders:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||D({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?k.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),"Cancel"!==e.t0.constructor.name&&T(uh(uh({},A),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=fh(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(uh(uh({},A),{},{loading:!0})),e.prev=1,e.next=4,q(k.pageSize,k.currentPage+1);case 4:t=e.sent,T({loading:!1,orders:t.content.error?A.orders:A.orders.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||D({currentPage:t.content.pagination.current_page,pageSize:0===t.content.pagination.page_size?k.pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&T(uh(uh({},A),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=fh(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(uh(uh({},A),{},{loading:!0})),e.prev=1,e.next=4,q(t,r);case 4:n=e.sent,T({loading:!1,orders:n.content.error?A.orders:n.content.result,error:n.content.error?n.content.result:null}),n.content.error||D({currentPage:n.content.pagination.current_page,pageSize:0===n.content.pagination.page_size?k.pageSize:n.content.pagination.page_size,totalPages:n.content.pagination.total_pages,total:n.content.pagination.total,from:n.content.pagination.from,to:n.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&T(uh(uh({},A),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(null!==P&&0!==A.orders.length){var e=A.orders.filter((function(e){return e.id===P&&(e.unread_count=0,e.unread_general_count=0,e.unread_direct_count=0),!0}));T(uh(uh({},A),{},{orders:e}))}}),[P]),Object(i.useEffect)((function(){if(d){var e=A.orders.filter((function(e){return e.id!==d}));$(),T(uh(uh({},A),{},{orders:e}))}}),[d]),Object(i.useEffect)((function(){if(null==U||!U.loading){if(o)T(uh(uh({},A),{},{orders:o}));else{var e=!1,t=!1;if(Object.keys(g).length>0&&(e=g.statuses.every((function(e){return-1!==h.indexOf(e)})),t=h.every((function(e){return-1!==g.statuses.indexOf(e)})),!e&&!t))return void T({loading:!1,orders:[],error:null});$()}return function(){B.orders&&B.orders.cancel()}}}),[U,O,y,g,u,c,l,f,o,h]),Object(i.useEffect)((function(){if(!A.loading){var e=function(e){if(!u||1===(null==e?void 0:e.delivery_type)){var t=[];if(A.orders.find((function(t){return t.id===e.id}))){t=A.orders.filter((function(t){var r=!0;return t.id===e.id&&(delete e.total,delete e.subtotal,Object.assign(t,e),(r=(0===h.length||h.includes(parseInt(t.status)))&&Y(e))||(k.total--,D(uh({},k)))),r}));var r=z(y,t);T(uh(uh({},A),{},{orders:r}))}else{if(Y(e))if(h.includes(parseInt(e.status))){t=[].concat(ih(A.orders),[e]);var n=z(y,t);k.total++,D(uh({},k)),T(uh(uh({},A),{},{orders:n.slice(0,k.pageSize)}))}}}},t=function(e){if((!u||1===(null==e?void 0:e.delivery_type))&&!A.orders.find((function(t){return t.id===e.id}))){var t=[];if(Y(e)&&(h.includes(0)&&0===e.status||h.includes(13)&&13===e.status)){t=[e].concat(ih(A.orders));var r=z(y,t);k.total++,D(uh({},k)),T(uh(uh({},A),{},{orders:r.slice(0,k.pageSize)}))}}},r=function(e){if(0!==A.orders.length&&A.orders.find((function(t){return t.id===e.order.id}))){var t=A.orders.filter((function(t){return t.id===e.order.id&&t.last_message_at!==e.created_at&&(1===e.type?(t.last_general_message_at=e.created_at,0!==e.author.level&&(t.unread_general_count=t.unread_general_count+1)):(t.last_direct_message_at=e.created_at,0!==e.author.level&&(t.unread_direct_count=t.unread_direct_count+1)),t.last_message_at=e.created_at,0!==e.author.level&&(t.unread_count=t.unread_count+1)),!0})),r=z(y,t);T(uh(uh({},A),{},{orders:r}))}};return A.loading||0!==A.orders.length||0!==(null==k?void 0:k.currentPage)&&0!==(null==k?void 0:k.total)&&(Math.ceil((null==k?void 0:k.total)/k.pageSize)>=(null==k?void 0:k.currentPage)?V(k.pageSize,k.currentPage):V(k.pageSize,k.currentPage-1)),L.on("update_order",e),L.on("orders_register",t),L.on("message",r),function(){L.off("update_order",e),L.off("orders_register",t),L.off("message",r)}}}),[A.orders,k,y,L]),Object(i.useEffect)((function(){var e=function(e){var t=A.orders.filter((function(t){return t.id===e.order_id&&(t.user_review=e),!0})),r=z(y,t);T(uh(uh({},A),{},{orders:r}))};return I.on("customer_reviewed",e),function(){I.off("customer_reviewed",e)}}),[A,y]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,ah({},e,{orderList:A,pagination:k,loadMoreOrders:J,getPageOrders:V,handleUpdateOrderStatus:G})))};function vh(){return vh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vh.apply(this,arguments)}function mh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mh(Object(r),!0).forEach((function(t){gh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oh(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function wh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}yh.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),onOrderClick:c.a.func,useDefualtSessionManager:c.a.bool,orders:c.a.arrayOf(u.object),orderIds:c.a.arrayOf(u.number),orderIdForUnreadCountUpdate:c.a.number,orderStatus:c.a.arrayOf(u.number),orderBy:c.a.string,orderDirection:c.a.oneOf(["asc","desc"]),paginationSettings:c.a.exact({initialPage:c.a.number,pageSize:c.a.number,controlType:c.a.oneOf(["infinity","pages"])}),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},yh.defaultProps={orderBy:"id",orderDirection:"desc",paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Sh=function(e){var t,r=e.UIComponent,n=e.propsToFetch,o=e.businessIds,u=e.paginationSettings,c=wh(nr(),1)[0],l=wh(dr(),1)[0].token,f=wh(Object(i.useState)({zones:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=wh(Object(i.useState)({currentPage:"pages"===u.controlType&&u.initialPage&&u.initialPage>=1?u.initialPage-1:0,pageSize:null!==(t=u.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),y=h[0],v=h[1],m=function(){var e,t=(e=a.a.mark((function e(t,r){var i,s,u,f,h,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(bh(bh({},p),{},{loading:!0})),i=null,s=[],o&&s.push({attribute:"business_id",value:o}),s.length&&(i={conditions:s,conector:"AND"}),u={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},f=i?"".concat(c.root,"/delivery_zones?page=").concat(t,"&page_size=").concat(r,"8&params=").concat(n.toString(),"&&where=").concat(JSON.stringify(i)):"".concat(c.root,"/delivery_zones?page=").concat(t,"&page_size=").concat(r,"8&params=").concat(n.toString()),e.next=10,fetch(f,u);case 10:return h=e.sent,e.next=13,h.json();case 13:(m=e.sent).error||(d({loading:!1,zones:m.result,error:null}),v(bh(bh({},y),{},{currentPage:m.pagination.current_page,totalPages:m.pagination.total_pages,totalItems:m.pagination.total,from:m.pagination.from,to:m.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),d(bh(bh({},p),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Oh(a,n,o,i,s,"next",e)}function s(e){Oh(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m(1,y.pageSize)}),[]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,vh({},e,{deliveryzoneList:p,paginationProps:y,setPaginationProps:v,getDeliveryzones:m})))};function Eh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ph(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ph(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ph(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Sh.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Sh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},propsToFetch:["name","minimum","price","type","data","enabled","business_id"]};var Ch=function(e){var t=e.onDrop,r=e.children,n=e.className,o=e.style,a=Eh(Object(i.useState)(),2),u=a[0],c=a[1];return s.a.createElement("div",{onDrop:function(e){e.preventDefault(),e.stopPropagation(),t(e.dataTransfer)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),c("dragover")},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),c()},style:o,className:n+" "+u},r)};function Ih(){return Ih=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ih.apply(this,arguments)}function xh(e){return function(e){if(Array.isArray(e))return Fh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ah(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Th(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ah(Object(r),!0).forEach((function(t){_h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ah(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kh(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Dh(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){kh(a,n,o,i,s,"next",e)}function s(e){kh(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Uh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Lh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lh(e,t){if(e){if("string"==typeof e)return Fh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fh(e,t):void 0}}function Fh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Bh=function(e){var t=e.UIComponent,r=e.driversCompaniesState,n=e.setDriversCompaniesState,o=e.driversCompany,u=Uh(nr(),1)[0],c=Uh(dr(),1)[0].token,l=Uh(Fn(),2)[1].showToast,f=Uh(Lr(),2)[1],p=Uh(Object(i.useState)({}),2),d=p[0],h=p[1],y=Uh(Object(i.useState)({loading:!1,error:null}),2),v=y[0],m=y[1],b=function(){var e=Dh(a.a.mark((function e(){var t,i,s,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,f("LOADING","Loading")),m(Th(Th({},v),{},{loading:!0})),null!=(t=Th({},d))&&t.schedule&&(t.schedule=JSON.stringify(null==t?void 0:t.schedule)),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(t)},e.next=8,fetch("".concat(u.root,"/driver_companies/").concat(null==o?void 0:o.id),i);case 8:return s=e.sent,e.next=11,s.json();case 11:(p=e.sent).error?m(Th(Th({},v),{},{loading:!1,error:p.result})):(m(Th(Th({},v),{},{loading:!1})),y=r.companies.filter((function(e){return e.id===(null==o?void 0:o.id)&&Object.assign(e,p.result),!0})),n(Th(Th({},r),{},{companies:y})),l(Dn.Success,f("CHANGES_SAVED","Changes saved")),h({})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var t=Dh(a.a.mark((function t(){var o,i,s,p,y,b,g,O;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,l(Dn.Info,f("LOADING","Loading")),m(Th(Th({},v),{},{loading:!0})),o=[],i=0;i<7;i++)o.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});return s={enabled:!0,priority:"0",fixed_cost_per_km:0,fixed_cost_delivery:0,percentage_cost_per_order_subtotal:0},p=Th(Th(Th({},d),s),{},{schedule:null!=d&&d.schedule?JSON.stringify(null==d?void 0:d.schedule):JSON.stringify(o)}),y={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(p)},t.next=10,fetch("".concat(u.root,"/driver_companies"),y);case 10:return b=t.sent,t.next=13,b.json();case 13:(g=t.sent).error?m({loading:!1,error:g.result}):(m(Th(Th({},v),{},{loading:!1})),O=[].concat(xh(r.companies),[g.result]),n(Th(Th({},r),{},{companies:O})),l(Dn.Success,f("DRIVER_COMPANY_ADDED","Driver company added")),h({}),e.onClose&&e.onClose()),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),m({loading:!1,error:[t.t0.message]});case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Dh(a.a.mark((function t(){var i,s,p,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dn.Info,f("LOADING","Loading")),m(Th(Th({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(u.root,"/driver_companies/").concat(o.id),i);case 6:return s=t.sent,t.next=9,s.json();case 9:(p=t.sent).error?m(Th(Th({},v),{},{loading:!1,error:p.result})):(m(Th(Th({},v),{},{loading:!1})),d=r.companies.filter((function(e){return e.id!==o.id})),n(Th(Th({},r),{},{companies:d})),l(Dn.Success,f("DRIVER_COMPANY_DELETED","Driver company deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Ih({},e,{cleanChagesState:function(){return h({})},changesState:d,actionState:v,cleanActionState:function(){return m(Th(Th({},v),{},{error:null}))},handleChangesState:function(e,t){h(Th(Th({},d),{},_h({},e,t)))},handleUpdateDriversCompany:b,handleAddDriversCompany:g,handleChangeScheduleState:function(e){h(Th(Th({},d),{},{schedule:e}))},handleDeleteDriversCompany:O})))};function Mh(){return Mh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mh.apply(this,arguments)}function Rh(e){return function(e){if(Array.isArray(e))return Vh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Jh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nh(Object(r),!0).forEach((function(t){Gh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qh(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Yh(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){qh(a,n,o,i,s,"next",e)}function s(e){qh(a,n,o,i,s,"throw",e)}i(void 0)}))}}function $h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Jh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jh(e,t){if(e){if("string"==typeof e)return Vh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vh(e,t):void 0}}function Vh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Bh.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Bh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Hh=function(e){var t=e.userId,r=e.UIComponent,n=$h(nr(),1)[0],o=$h(dr(),1)[0].token,u=$h(Fn(),2)[1].showToast,c=$h(Lr(),2)[1],l=$h(Object(i.useState)({groups:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=$h(Object(i.useState)({loading:!1,error:null}),2),h=d[0],y=d[1],v=$h(Object(i.useState)([]),2),m=v[0],b=v[1],g=function(){var e=Yh(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(zh(zh({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(n.root,"/drivergroups?params=name,drivers"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error||p(zh(zh({},f),{},{groups:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(zh(zh({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Yh(a.a.mark((function e(t,r){var i,s,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Dn.Info,c("LOADING","Loading")),y(zh(zh({},h),{},{loading:!0,error:null})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(r)},e.next=6,fetch("".concat(n.root,"/drivergroups/").concat(t),i);case 6:return s=e.sent,e.next=9,s.json();case 9:(l=e.sent).error?y(zh(zh({},h),{},{loading:!1,error:l.result})):(y({error:null,loading:!1}),d=f.groups.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),p(zh(zh({},f),{},{groups:d})),u(Dn.Success,c("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(!f.loading){var e=f.groups.reduce((function(e,r){return r.drivers.find((function(e){return e.id===t}))?[].concat(Rh(e),[r.id]):Rh(e)}),[]);b(e)}}),[t,f]),Object(i.useEffect)((function(){g()}),[]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,Mh({},e,{driversGroupsState:f,includedGroupIds:m,actionState:h,handleCheckboxClick:function(e){var r=f.groups.find((function(t){return t.id===e})).drivers.reduce((function(e,t){return[].concat(Rh(e),[t.id])}),[]),n=[];r.includes(t)?(console.log(t,r),n=r.filter((function(e){return e!==t}))):(console.log("else"),n=[].concat(Rh(r),[t])),console.log(n);var o={drivers:JSON.stringify(n)};O(e,o)}})))};function Wh(){return Wh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wh.apply(this,arguments)}function Kh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kh(Object(r),!0).forEach((function(t){Zh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qh(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ey(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ty(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ty(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ty(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Hh.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Hh.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ry=function(e){var t=e.userId,r=e.UIComponent,n=ey(nr(),1)[0],o=ey(dr(),1)[0].token,u=ey(Object(i.useState)({reviews:[],loading:!1,error:null}),2),c=u[0],l=u[1],f=function(){var e,r=(e=a.a.mark((function e(){var r,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Xh(Xh({},c),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(n.root,"/users/").concat(t,"/user_reviews"),r);case 5:return i=e.sent,e.next=8,i.json();case 8:(s=e.sent).error||l({reviews:s.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l(Xh(Xh({},c),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Qh(a,n,o,i,s,"next",e)}function s(e){Qh(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(i.useEffect)((function(){t&&f()}),[t]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,Wh({},e,{userReviewState:c})))};function ny(){return ny=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ny.apply(this,arguments)}function oy(e){return function(e){if(Array.isArray(e))return py(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ay(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function iy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ay(Object(r),!0).forEach((function(t){sy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ay(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uy(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function cy(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){uy(a,n,o,i,s,"next",e)}function s(e){uy(a,n,o,i,s,"throw",e)}i(void 0)}))}}function ly(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||fy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fy(e,t){if(e){if("string"==typeof e)return py(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?py(e,t):void 0}}function py(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}ry.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ry.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var dy=function(e){var t=e.UIComponent,r=ly(nr(),1)[0],n=ly(dr(),1)[0].token,o=ly(Fn(),2)[1].showToast,u=ly(Lr(),2)[1],c=ly(Object(i.useState)({companies:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=ly(Object(i.useState)({loading:!1,error:null}),2),d=p[0],h=p[1],y=ly(Object(i.useState)(!1),2),v=y[0],m=y[1],b=ly(Object(i.useState)([]),2),g=b[0],O=b[1],w=ly(Object(i.useState)(!1),2),j=w[0],S=w[1],E=function(){var e=cy(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(iy(iy({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},e.next=5,fetch("".concat(r.root,"/driver_companies"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||f(iy(iy({},l),{},{companies:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(iy(iy({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=cy(a.a.mark((function e(t,i){var s,c,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dn.Info,u("LOADING","Loading")),h(iy(iy({},d),{},{loading:!0})),s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(i)},e.next=6,fetch("".concat(r.root,"/driver_companies/").concat(t),s);case 6:return c=e.sent,e.next=9,c.json();case 9:(p=e.sent).error?h(iy(iy({},d),{},{loading:!1,error:p.result})):(h(iy(iy({},d),{},{loading:!1})),y=l.companies.filter((function(e){return e.id===t&&Object.assign(e,p.result),!0})),f(iy(iy({},l),{},{companies:y})),o(Dn.Success,u("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),C=function(){var e=cy(a.a.mark((function e(t){var i,s,c,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dn.Info,u("LOADING","Loading")),h(iy(iy({},d),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},e.next=6,fetch("".concat(r.root,"/driver_companies/").concat(t),i);case 6:return s=e.sent,e.next=9,s.json();case 9:(c=e.sent).error?(h(iy(iy({},d),{},{loading:!1,error:c.result})),S(!1)):(h(iy(iy({},d),{},{loading:!1})),p=l.companies.filter((function(e){return e.id!==t})),f(iy(iy({},l),{},{companies:p})),o(Dn.Success,u("DRIVER_COMPANY_DELETED","Driver company deleted")),j&&((y=oy(g)).shift(),0===y.length&&S(!1),O(y))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j&&0!==g.length&&C(g[0])}),[g,j]),Object(i.useEffect)((function(){E()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,ny({},e,{driversCompaniesState:l,setDriversCompaniesState:f,actionState:d,openDetails:v,setOpenDetails:m,handleUpdateDriversCompany:P,handleDeleteDriversCompany:C,handleSelectCompany:function(e){var t=[];t=g.includes(e)?g.filter((function(t){return t!==e})):[].concat(oy(g),[e]),O(t)},selectedCompanyList:g,handleAllSelectCompany:function(){var e=l.companies.reduce((function(e,t){return[].concat(oy(e),[t.id])}),[]);g.length===e.length?O([]):O(e)},handleDeleteSelectedCompanies:function(){return S(!0)}})))};function hy(){return hy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hy.apply(this,arguments)}function yy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function my(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return by(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return by(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function by(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}dy.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},dy.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gy=function(e){var t=e.UIComponent,r=e.curDriversGroup,n=e.handleChangesState,o=my(Object(i.useState)(0),2),a=o[0],u=o[1],c=my(Object(i.useState)({}),2),l=c[0],f=c[1],p=function(e){return Math.floor((e-3600*Math.floor(e/3600))/60)},d=function(e){var t=e-3600*Math.floor(e/3600);return Math.floor(t-60*Math.floor(t/60))};return Object(i.useEffect)((function(){var e;if(r){e=1*r.autoassign_initial_radius==500&&1*r.autoassign_amount_drivers==1?1:1*r.autoassign_initial_radius==15e3&&1*r.autoassign_amount_drivers==1e3?2:1*r.autoassign_initial_radius==100&&1*r.autoassign_amount_drivers==1?3:1*r.autoassign_initial_radius==1e3&&1*r.autoassign_amount_drivers==2?4:1*r.autoassign_initial_radius==15e3&&1*r.autoassign_amount_drivers==1?5:6,u(e);var t,n={hour:(t=r.autoassign_autoreject_time,1*t/3600>1?Math.floor(1*t/3600):0),minute:p(r.autoassign_autoreject_time),second:d(r.autoassign_autoreject_time)};f(n)}}),[r]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,hy({},e,{autoAssign:a,autoRejectOrderGroup:l,onSelectAssign:function(e){u(e);var t={};1===e?(t.autoassign_initial_radius=500,t.autoassign_increment_radius=100,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=1):2===e?(t.autoassign_initial_radius=15e3,t.autoassign_increment_radius=15e3,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=1e3):3===e?(t.autoassign_initial_radius=100,t.autoassign_increment_radius=100,t.autoassign_max_radius=1500,t.autoassign_amount_drivers=1):4===e?(t.autoassign_initial_radius=1e3,t.autoassign_increment_radius=500,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=2):5===e?(t.autoassign_initial_radius=15e3,t.autoassign_increment_radius=15e3,t.autoassign_max_radius=15e3,t.autoassign_amount_drivers=1):6===e&&(t.autoassign_initial_radius="",t.autoassign_increment_radius="",t.autoassign_max_radius="",t.autoassign_amount_drivers=""),n({autoassign_initial_radius:t.autoassign_initial_radius,autoassign_increment_radius:t.autoassign_increment_radius,autoassign_max_radius:t.autoassign_max_radius,autoassign_amount_drivers:t.autoassign_amount_drivers})},onChangeSave:n,handleChangeInput:function(e){var t=e.target.value,r=""===t?0:parseInt(t);(""===r||/^[0-9\b]+$/.test(r))&&n(vy({},e.target.name,r))},onChangeAutoRejectOrderGroup:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yy(Object(r),!0).forEach((function(t){vy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},l);if(""===e||/^[0-9\b]+$/.test(e)){var o=""===e?0:parseInt(e);r[t]=o,f(r);var a=3600*(null==r?void 0:r.hour)+60*(null==r?void 0:r.minute)+(null==r?void 0:r.second);n({autoassign_autoreject_time:a})}}})))};function Oy(){return Oy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oy.apply(this,arguments)}function wy(e){return function(e){if(Array.isArray(e))return Ay(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jy(Object(r),!0).forEach((function(t){Ey(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ey(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Py(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Cy(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Py(a,n,o,i,s,"next",e)}function s(e){Py(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Iy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||xy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xy(e,t){if(e){if("string"==typeof e)return Ay(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ay(e,t):void 0}}function Ay(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}gy.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gy.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ty=function(e){var t=e.UIComponent,r=e.driversGroupsState,n=e.setDriversGroupsState,o=e.curDriversGroup,u=e.driversManagers,c=e.businesses,l=e.paymethods,f=e.drivers,p=e.companies,d=Iy(nr(),1)[0],h=Iy(dr(),1)[0].token,y=Iy(Fn(),2)[1].showToast,v=Iy(Lr(),2)[1],m=Iy(Object(i.useState)({driversGroup:e.curDriversGroup,loading:!1}),2),b=m[0],g=m[1],O=Iy(Object(i.useState)({loading:!1,error:null}),2),w=O[0],j=O[1],S=Iy(Object(i.useState)({}),2),E=S[0],P=S[1],C=Iy(Object(i.useState)([]),2),I=C[0],x=C[1],A=Iy(Object(i.useState)([]),2),T=A[0],_=A[1],k=Iy(Object(i.useState)([]),2),D=k[0],U=k[1],L=Iy(Object(i.useState)([]),2),F=L[0],B=L[1],M=function(){var e=Cy(a.a.mark((function e(t){var i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Dn.Info,v("LOADING","Loading")),j(Sy(Sy({},w),{},{loading:!0,error:null})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(t)},e.next=6,fetch("".concat(d.root,"/drivergroups/").concat(o.id),i);case 6:return s=e.sent,e.next=9,s.json();case 9:(u=e.sent).error?j(Sy(Sy({},w),{},{loading:!1,error:u.result})):(j({error:null,loading:!1}),c=r.groups.filter((function(e){return e.id===o.id&&Object.assign(e,u.result),!0})),n(Sy(Sy({},r),{},{groups:c})),y(Dn.Success,v("CHANGES_SAVED","Changes saved")),g(Sy(Sy({},b),{},{driversGroup:u.result})),P({})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),j({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var t=Cy(a.a.mark((function t(){var i,s,u,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dn.Info,v("LOADING","Loading")),j(Sy(Sy({},w),{},{loading:!0,error:null})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},t.next=6,fetch("".concat(d.root,"/drivergroups/").concat(o.id),i);case 6:return s=t.sent,t.next=9,s.json();case 9:(u=t.sent).error?j(Sy(Sy({},w),{},{loading:!1,error:u.result})):(j(Sy(Sy({},w),{},{loading:!1})),c=r.groups.filter((function(e){return e.id!==o.id})),n(Sy(Sy({},r),{},{groups:c})),y(Dn.Success,v("DRIVER_GROUP_DELETED","Driver group deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),j({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=Cy(a.a.mark((function t(){var o,i,s,c,l,f,p,m,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dn.Info,v("LOADING","Loading")),j({loading:!0,error:null}),o={enabled:!0,autoassign_amount_drivers:1,autoassign_autoaccept_by_driver:!1,autoassign_autoreject_time:30,autoassign_increment_radius:100,autoassign_initial_radius:500,autoassign_max_in_accepted_by_business:5,autoassign_max_in_accepted_by_driver:5,autoassign_max_in_driver_in_business:5,autoassign_max_in_pending:5,autoassign_max_in_pickup_completed:5,autoassign_max_in_ready_for_pickup:5,autoassign_max_orders:5,autoassign_max_radius:1e3,orders_group_max_distance_between_delivery:200,orders_group_max_distance_between_pickup:200,orders_group_max_orders:1,orders_group_max_time_between:5,orders_group_max_time_between_delivery:600,orders_group_max_time_between_pickup:600,orders_group_start_in_status:"7",orders_group_use_maps_api:!1},i=Sy(Sy({},E),o),s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(i)},t.next=8,fetch("".concat(d.root,"/drivergroups"),s);case 8:return c=t.sent,t.next=11,c.json();case 11:(l=t.sent).error?j({loading:!1,error:l.result}):(j({loading:!1,error:null}),p=Sy({},l.result),(null===(f=l.result)||void 0===f||!f.administrator)&&u.length>0&&(m=u.find((function(e){var t;return e.id===(null===(t=l.result)||void 0===t?void 0:t.administrator_id)})),p=Sy(Sy({},p),{},{administrator:m})),b=[].concat(wy(r.groups),[p]),n(Sy(Sy({},r),{},{groups:b})),y(Dn.Success,v("DRIVER_GROUP_ADDED","Driver group added")),P({}),e.onClose&&e.onClose()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),j({loading:!1,error:[t.t0.message]});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(g(Sy(Sy({},b),{},{driversGroup:o})),o){var e,t=null==o||null===(e=o.business)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(wy(e),[t.id])}),[]);x(t),_((null==o?void 0:o.allowed_paymethods)||[]);var r=null==o?void 0:o.drivers.reduce((function(e,t){return[].concat(wy(e),[t.id])}),[]);U(r);var n=null==o?void 0:o.driver_companies.reduce((function(e,t){return[].concat(wy(e),[t.id])}),[]);B(n)}else P({type:0}),x([]),_([]),U([]),B([])}),[o]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Oy({},e,{driversGroupState:b,changesState:E,actionState:w,cleanChagesState:function(){return P({})},selectedBusinessIds:I,selectedPaymethodIds:T,selectedDriverIds:D,selectedDriversCompanyIds:F,handleChangesState:function(e){P(Sy(Sy({},E),e))},handleSelectBusiness:function(e,t){var r=wy(I),n=[];n=t?[].concat(wy(r),[e]):r.filter((function(t){return t!==e})),x(n),P(Sy(Sy({},E),{},{business:JSON.stringify(n)}))},handleSelectAllBusiness:function(e){var t=c.reduce((function(e,t){return[].concat(wy(e),[t.id])}),[]),r=[];r=e?wy(t):[],x(r),P(Sy(Sy({},E),{},{business:JSON.stringify(r)}))},handleSelectPaymethod:function(e,t){var r=wy(T),n=[];n=t?[].concat(wy(r),[e]):r.filter((function(t){return t!==e})),_(n),P(Sy(Sy({},E),{},{allowed_paymethods:JSON.stringify(n)}))},handleSelectDriver:function(e,t){var r=wy(D),n=[];n=t?[].concat(wy(r),[e]):r.filter((function(t){return t!==e})),U(n),P(Sy(Sy({},E),{},{drivers:JSON.stringify(n)}))},handleSelectDriversCompany:function(e,t){var r=wy(F),n=[];n=t?[].concat(wy(r),[e]):r.filter((function(t){return t!==e})),B(n),P(Sy(Sy({},E),{},{driver_companies:JSON.stringify(n)}))},handleSelectAllPaymethod:function(e){var t=null==l?void 0:l.reduce((function(e,t){return[].concat(wy(e),[t.id])}),[]),r=[];r=e?wy(t):[],_(r),P(Sy(Sy({},E),{},{allowed_paymethods:JSON.stringify(r)}))},handleSelectAllDriver:function(e){var t=null==f?void 0:f.reduce((function(e,t){return[].concat(wy(e),[t.id])}),[]),r=[];r=e?wy(t):[],U(r),P(Sy(Sy({},E),{},{drivers:JSON.stringify(r)}))},handleSelectAllDriversCompany:function(e){var t=null==p?void 0:p.reduce((function(e,t){return[].concat(wy(e),[t.id])}),[]),r=[];r=e?wy(t):[],B(r),P(Sy(Sy({},E),{},{driver_companies:JSON.stringify(r)}))},handleUpdateDriversGroup:M,handleDeleteDriversGroup:R,handleAddDriversGroup:N})))};function _y(){return _y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_y.apply(this,arguments)}function ky(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ky(Object(r),!0).forEach((function(t){Uy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ky(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Uy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ly(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ty.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ty.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var By=function(e){var t=e.UIComponent,r=e.curDriversGroup,n=e.handleChangesState,o=Ly(Object(i.useState)({}),2),a=o[0],u=o[1],c=Ly(Object(i.useState)({}),2),l=c[0],f=c[1],p=Ly(Object(i.useState)({}),2),d=p[0],h=p[1],y=function(e){return 1*e/3600>1?Math.floor(1*e/3600):0},v=function(e){return Math.floor((e-3600*Math.floor(e/3600))/60)},m=function(e){var t=e-3600*Math.floor(e/3600);return Math.floor(t-60*Math.floor(t/60))};return Object(i.useEffect)((function(){if(r){var e={hour:y(null==r?void 0:r.orders_group_max_time_between),minute:v(null==r?void 0:r.orders_group_max_time_between),second:m(null==r?void 0:r.orders_group_max_time_between)};u(e);var t={hour:y(null==r?void 0:r.orders_group_max_time_between_pickup),minute:v(null==r?void 0:r.orders_group_max_time_between_pickup),second:m(null==r?void 0:r.orders_group_max_time_between_pickup)};f(t);var n={hour:y(null==r?void 0:r.orders_group_max_time_between_delivery),minute:v(null==r?void 0:r.orders_group_max_time_between_delivery),second:m(null==r?void 0:r.orders_group_max_time_between_delivery)};h(n)}}),[r]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,_y({},e,{maxTimeBetweenOrder:a,maxTimeBetweenBusiness:l,maxTimeBetweenDelivery:d,handleChangeMaxTimeBetweenOrder:function(e,t){if(""===e||/^[0-9\b]+$/.test(e)){var r=""===e?0:parseInt(e),o=Dy({},a);o[t]=r,u(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);n({orders_group_max_time_between:i})}},handleChangeMaxTimeBetweenBusiness:function(e,t){if(""===e||/^[0-9\b]+$/.test(e)){var r=""===e?0:parseInt(e),o=Dy({},a);o[t]=r,f(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);n({orders_group_max_time_between_pickup:i})}},handleChangeMaxTimeBetweenDelivery:function(e,t){if(""===e||/^[0-9\b]+$/.test(e)){var r=""===e?0:parseInt(e),o=Dy({},a);o[t]=r,h(o);var i=3600*(null==o?void 0:o.hour)+60*(null==o?void 0:o.minute)+(null==o?void 0:o.second);n({orders_group_max_time_between_delivery:i})}},onChangeNumberInput:function(e,t){(""===t||/^[0-9\b]+$/.test(t))&&n(Uy({},e,t))}})))};function My(){return My=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},My.apply(this,arguments)}function Ry(e){return function(e){if(Array.isArray(e))return Vy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Jy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ny(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ny(Object(r),!0).forEach((function(t){Gy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ny(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qy(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Yy(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){qy(a,n,o,i,s,"next",e)}function s(e){qy(a,n,o,i,s,"throw",e)}i(void 0)}))}}function $y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Jy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jy(e,t){if(e){if("string"==typeof e)return Vy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vy(e,t):void 0}}function Vy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}By.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},By.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Hy=function(e){var t=e.UIComponent,r=e.isDriversMangersRequired,n=$y(nr(),1)[0],o=$y(dr(),1)[0].token,u=$y(Fn(),2)[1].showToast,c=$y(Lr(),2)[1],l=$y(Object(i.useState)({groups:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=$y(Object(i.useState)({managers:[],loading:!1,error:null}),2),h=d[0],y=d[1],v=$y(Object(i.useState)({businesses:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=$y(Object(i.useState)({paymethods:[],loading:!1,error:null}),2),O=g[0],w=g[1],j=$y(Object(i.useState)({drivers:[],loading:!1,error:null}),2),S=j[0],E=j[1],P=$y(Object(i.useState)({companies:[],loading:!1,error:null}),2),C=P[0],I=P[1],x=$y(Object(i.useState)(!1),2),A=x[0],T=x[1],_=$y(Object(i.useState)({loading:!1,error:null}),2),k=_[0],D=_[1],U=$y(Object(i.useState)([]),2),L=U[0],F=U[1],B=function(){var e=Yy(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(zy(zy({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(n.root,"/drivergroups"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error||p(zy(zy({},f),{},{groups:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(zy(zy({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Yy(a.a.mark((function e(){var t,r,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(zy(zy({},h),{},{loading:!1})),e.next=4,n.setAccessToken(o).users().where([{attribute:"level",value:5}]).select(["name","email","photo"]).get();case 4:t=e.sent,r=t.content,i=r.error,s=r.result,i||y(zy(zy({},h),{},{loading:!1,managers:s})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),y(zy(zy({},h),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Yy(a.a.mark((function e(){var t,r,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(zy(zy({},m),{},{loading:!1})),e.next=4,n.setAccessToken(o).businesses().select(["name","logo"]).asDashboard().get();case 4:t=e.sent,r=t.content,i=r.error,s=r.result,i||b(zy(zy({},m),{},{loading:!1,businesses:s})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),b(zy(zy({},m),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Yy(a.a.mark((function e(){var t,r,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(zy(zy({},S),{},{loading:!1})),e.next=4,n.setAccessToken(o).users().where([{attribute:"level",value:4}]).select(["name","lastname","email","photo"]).get();case 4:t=e.sent,r=t.content,i=r.error,s=r.result,i||E(zy(zy({},S),{},{loading:!1,drivers:s})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),E(zy(zy({},S),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Yy(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(zy(zy({},O),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(n.root,"/paymethods?params=name&where={%22enabled%22:true}"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error||w(zy(zy({},O),{},{paymethods:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w(zy(zy({},O),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Yy(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(zy(zy({},C),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(n.root,"/driver_companies?params=name"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error||I(zy(zy({},C),{},{companies:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),I(zy(zy({},C),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Yy(a.a.mark((function e(t,r){var i,s,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Dn.Info,c("LOADING","Loading")),D(zy(zy({},k),{},{loading:!0,error:null})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(r)},e.next=6,fetch("".concat(n.root,"/drivergroups/").concat(t),i);case 6:return s=e.sent,e.next=9,s.json();case 9:(l=e.sent).error?D(zy(zy({},k),{},{loading:!1,error:l.result})):(D({error:null,loading:!1}),d=f.groups.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),p(zy(zy({},f),{},{groups:d})),u(Dn.Success,c("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),D({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),Y=function(){var e=Yy(a.a.mark((function e(t){var r,i,s,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Dn.Info,c("LOADING","Loading")),D(zy(zy({},k),{},{loading:!0,error:null})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(n.root,"/drivergroups/").concat(t),r);case 6:return i=e.sent,e.next=9,i.json();case 9:(s=e.sent).error?(D(zy(zy({},k),{},{loading:!1,error:s.result})),T(!1)):(D(zy(zy({},k),{},{loading:!1})),l=f.groups.filter((function(e){return e.id!==t})),p(zy(zy({},f),{},{groups:l})),u(Dn.Success,c("DRIVER_GROUP_DELETED","Driver group deleted")),A&&((d=Ry(L)).shift(),0===d.length&&T(!1),F(d))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),D({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){A&&0!==L.length&&Y(L[0])}),[L,A]),Object(i.useEffect)((function(){B(),r&&M(),N(),R(),z(),G()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,My({},e,{driversGroupsState:f,setDriversGroupsState:p,driversManagersList:h,businessesList:m,paymethodsList:O,driversList:S,driversCompanyList:C,actionState:k,handleUpdateDriversGroup:q,handleDeleteDriversGroup:Y,handleDeleteSelectedGroups:function(){return T(!0)},selectedGroupList:L,handleSelectGroup:function(e){var t=[];t=L.includes(e)?L.filter((function(t){return t!==e})):[].concat(Ry(L),[e]),F(t)},handleAllSelectGroup:function(){var e=f.groups.reduce((function(e,t){return[].concat(Ry(e),[t.id])}),[]);L.length===e.length?F([]):F(e)}})))};function Wy(){return Wy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wy.apply(this,arguments)}function Ky(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ky(Object(r),!0).forEach((function(t){Zy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ky(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qy(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ev(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Hy.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Hy.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rv=function(e){var t,r=e.driversGroupId,n=e.UIComponent,o=e.paginationSettings,u=ev(nr(),1)[0],c=ev(dr(),1)[0],l=ev(Object(i.useState)({logs:[],loading:!0,error:null}),2),f=l[0],p=l[1],d=ev(Object(i.useState)({currentPage:"pages"===o.controlType&&o.initialPage&&o.initialPage>=1?o.initialPage-1:0,pageSize:null!==(t=o.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),h=d[0],y=d[1],v=function(){var e,t=(e=a.a.mark((function e(t,n){var o,i,s,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Xy(Xy({},f),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=5,fetch("".concat(u.root,"/drivergroups/").concat(r,"/logs?orderBy=-id&page=").concat(t,"&page_size=").concat(n),o);case 5:return i=e.sent,e.next=8,i.json();case 8:s=e.sent,l=s.pagination,d=s.result,p(Xy(Xy({},f),{},{loading:!1,logs:d})),y(Xy(Xy({},h),{},{currentPage:l.current_page,totalPages:l.total_pages,totalItems:l.total,from:l.from,to:l.to})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),p(Xy(Xy({},f),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Qy(a,n,o,i,s,"next",e)}function s(e){Qy(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){v(1,null)}),[r]),s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,Wy({},e,{logsList:f,paginationProps:h,getDriversGroupLogs:v})))};function nv(){return nv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nv.apply(this,arguments)}function ov(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return av(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return av(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function av(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}rv.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var iv=function(e){var t=e.UIComponent,r=e.businessId,n=e.useOrderContext;if(n&&!r)throw new Error("`businessId` is required when `useOrderContext` is true.");var o=ov(vn(),2),a=o[0],u=o[1].changeDriverTip,c=ov(Object(i.useState)(0),2),l=c[0],f=c[1],p=ov(Object(i.useState)(0),2),d=p[0],h=p[1];return Object(i.useEffect)((function(){var e,t,n=(null===(e=a.carts["businessId:".concat(r)])||void 0===e?void 0:e.driver_tip_rate)||0,o=(null===(t=a.carts["businessId:".concat(r)])||void 0===t?void 0:t.driver_tip)||0;f(n),h(o)}),[a]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,nv({},e,{driverTipAmount:d,optionSelected:l,handlerChangeOption:function(t){t=parseInt(t),n?u(r,t):f(t),e.handlerChangeDriverOption&&e.handlerChangeDriverOption(t)}})))};function sv(){return sv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sv.apply(this,arguments)}function uv(e){return function(e){if(Array.isArray(e))return vv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cv(Object(r),!0).forEach((function(t){fv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pv(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function dv(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){pv(a,n,o,i,s,"next",e)}function s(e){pv(a,n,o,i,s,"throw",e)}i(void 0)}))}}function hv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||yv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yv(e,t){if(e){if("string"==typeof e)return vv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vv(e,t):void 0}}function vv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}iv.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,useOrderContext:c.a.bool,driverTipsOptions:c.a.arrayOf(c.a.number),handlerChangeDriverOption:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},iv.defaultProps={useOrderContext:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var mv=function(e){var t=e.drivers,r=e.UIComponent,n=e.propsToFetch,o=e.isSearchByName,u=e.isSearchByCellphone,c=e.asDashboard,l=hv(nr(),1)[0],f=hv(Fn(),2)[1].showToast,p=hv(Lr(),2)[1],d={},h=hv(Object(i.useState)({loading:!0,error:null}),2),y=h[0],v=h[1],m=Pr(),b=hv(dr(),1)[0],g=hv(Object(i.useState)({drivers:[],loading:!0,error:null}),2),O=g[0],w=g[1],j=hv(Object(i.useState)([]),2),S=j[0],E=j[1],P=hv(Object(i.useState)([]),2),C=P[0],I=P[1],x=hv(Object(i.useState)(!0),2),A=x[0],T=x[1],_=hv(Object(i.useState)({busy:!0,notBusy:!0}),2),k=_[0],D=_[1],U=hv(Object(i.useState)(null),2),L=U[0],F=U[1],B=function(){var e=dv(a.a.mark((function e(t){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dn.Info,p("LOADING","Loading")),v(lv(lv({},y),{},{loading:!0})),r={},d.assignDriver=r,e.next=7,l.setAccessToken(b.token).orders(t.orderId).save({driver_id:t.driverId},{cancelToken:r});case 7:n=e.sent,o=n.content,v({loading:!1,error:o.error?o.result:null}),o.error||(t.driverId?f(Dn.Success,p("ORDER_DRIVER_ASSIGNED","Driver assigned to order")):f(Dn.Success,p("ORDER_DRIVER_REMOVED","Driver removed from the order"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(lv(lv({},y),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),M=function(e){var t,r;k.busy&&k.notBusy?(t=e.filter((function(e){return e.enabled&&e.available})),r=e.filter((function(e){return e.enabled&&!e.available}))):k.busy&&!k.notBusy?(t=e.filter((function(e){return e.enabled&&e.available&&e.busy})),r=e.filter((function(e){return e.enabled&&!e.available&&e.busy}))):!k.busy&&k.notBusy?(t=e.filter((function(e){return e.enabled&&e.available&&!e.busy})),r=e.filter((function(e){return e.enabled&&!e.available&&!e.busy}))):(t=[],r=[]),E(t),I(r)},R=function(){var e=dv(a.a.mark((function e(){var t,r,i,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(lv(lv({},O),{},{loading:!0})),t={},d.drivers=t,r=null,(i=[]).push({attribute:"level",value:[4]}),L&&(s=[],o&&(s.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(L,"%"))}}),s.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(L,"%"))}})),u&&s.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(L,"%"))}}),i.push({conector:"OR",conditions:s})),i.length&&(r={conditions:i,conector:"AND"}),e.next=11,l.setAccessToken(b.token).users().select(n).where(r).get({cancelToken:t});case 11:c=e.sent,f=c.content.result,w(lv(lv({},O),{},{loading:!1,drivers:f})),M(f),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),w(lv(lv({},O),{},{loading:!1,error:e.t0.message}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){M(O.drivers)}),[k]),Object(i.useEffect)((function(){return t?(w(lv(lv({},O),{},{drivers:t,loading:!1})),M(t)):R(),function(){d.drivers&&d.drivers.cancel()}}),[t,L]),Object(i.useEffect)((function(){if(null==b||!b.loading){var e=function(e){var t=[];t=O.drivers.find((function(t){return t.id===e.id}))?O.drivers.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})):[].concat(uv(O.drivers),[e]),w(lv(lv({},O),{},{drivers:t}))},t=function(e){var t;t=O.drivers.filter((function(t){if(t.id===e.driver_id)if("string"==typeof e.location){var r=e.location.replaceAll("\\",""),n=JSON.parse(r);t.location=n}else t.location=e.location;return!0})),w(lv(lv({},O),{},{drivers:t}))};return m.on("drivers_update",e),m.on("tracking_driver",t),function(){m.off("drivers_update",e),m.off("tracking_driver",t)}}}),[m,null==b?void 0:b.loading,O.drivers]),Object(i.useEffect)((function(){null!=b&&b.user&&!t&&m.join("drivers")}),[m,null==b?void 0:b.user,c]),Object(i.useEffect)((function(){M(O.drivers)}),[O.drivers]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,sv({},e,{driversList:O,onlineDrivers:S,offlineDrivers:C,driverActionStatus:y,driversIsOnline:A,driversSubfilter:k,searchValue:L,handleChangeSearch:function(e){e!==L&&F(e)},handleChangeDriverIsOnline:function(e){T(e)},handleChangeDriversSubFilter:function(e){D(e)},handleAssignDriver:B})))};function bv(){return bv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bv.apply(this,arguments)}function gv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ov(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gv(Object(r),!0).forEach((function(t){wv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jv(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Sv(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){jv(a,n,o,i,s,"next",e)}function s(e){jv(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Ev(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}mv.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},mv.defaultProps={propsToFetch:["id","name","lastname","assigned_orders_count","available","phone","cellphone","location","photo","qualification","last_order_assigned_at"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Cv=function(e){var t=e.UIComponent,r=Ev(dr(),1)[0],n=r.token,o=r.loading,u=Ev(nr(),1)[0],c=Ev(Object(i.useState)({lapse:"today",userIds:null,app_id:"all",driver_groups_ids:null,franchises_id:null,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),2),l=c[0],f=c[1],p=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),d=p[0],h=p[1],y=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),v=y[0],m=y[1],b=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),g=b[0],O=b[1],w=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),j=w[0],S=w[1],E=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),P=E[0],C=E[1],I=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),x=I[0],A=I[1],T=Ev(Object(i.useState)({loading:!1,data:{},error:null}),2),_=T[0],k=T[1],D=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),U=D[0],L=D[1],F=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),B=F[0],M=F[1],R=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),N=R[0],z=R[1],G=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),q=G[0],Y=G[1],$=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),J=$[0],V=$[1],H=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),W=H[0],K=H[1],X=Ev(Object(i.useState)({loading:!1,data:[],error:null}),2),Z=X[0],Q=X[1],ee=function(e){var t,r="".concat(u.root,"/reports/").concat(e),n="lapse=".concat(null==l?void 0:l.lapse,"&timezone=").concat(null==l?void 0:l.timeZone);return null!=l&&l.userIds&&(n="".concat(n,"&drivers=").concat(null==l||null===(t=l.userIds)||void 0===t?void 0:t.toString())),null!=l&&l.app_id&&"all"!==l.app_id&&(n="".concat(n,"&app_id=").concat(null==l?void 0:l.app_id)),null!=l&&l.driver_groups_ids&&(n="".concat(n,"&driver_groups_ids=").concat(JSON.stringify(null==l?void 0:l.driver_groups_ids))),null!=l&&l.franchises_id&&(n="".concat(n,"&franchises_id=").concat(JSON.stringify(null==l?void 0:l.franchises_id))),"".concat(r,"?").concat(n)},te=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,h(Ov(Ov({},d),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("driver_orders_v2"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,h(Ov(Ov({},d),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),h(Ov(Ov({},d),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,m(Ov(Ov({},v),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("driver_sales_v2"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,m(Ov(Ov({},v),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),m(Ov(Ov({},v),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(Ov(Ov({},g),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("drivers_orders_status"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,O(Ov(Ov({},g),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),O(Ov(Ov({},g),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,S(Ov(Ov({},j),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("drivers_top_orders"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,S(Ov(Ov({},j),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),S(Ov(Ov({},j),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,L(Ov(Ov({},U),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("customer_satisfaction"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,L(Ov(Ov({},U),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),L(Ov(Ov({},U),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,V(Ov(Ov({},J),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("drivers_complete_spend"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,V(Ov(Ov({},J),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),V(Ov(Ov({},J),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,C(Ov(Ov({},P),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("drivers_spend_times"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,C(Ov(Ov({},P),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),C(Ov(Ov({},P),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,A(Ov(Ov({},x),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("drivers_available_times"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,A(Ov(Ov({},x),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),A(Ov(Ov({},x),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,k(Ov(Ov({},_),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("drivers_busy_times"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,k(Ov(Ov({},_),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),k(Ov(Ov({},_),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,M(Ov(Ov({},B),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("drivers_accept_spend"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,M(Ov(Ov({},B),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),M(Ov(Ov({},B),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,z(Ov(Ov({},N),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("drivers_arrived_pickup_spend"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,z(Ov(Ov({},N),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),z(Ov(Ov({},N),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Y(Ov(Ov({},q),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("drivers_order_location"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,Y(Ov(Ov({},q),{},u?{loading:!0,error:c}:{loading:!1,locations:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),Y(Ov(Ov({},q),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,K(Ov(Ov({},W),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("drivers_pickup_spend"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,K(Ov(Ov({},W),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),K(Ov(Ov({},W),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Sv(a.a.mark((function e(){var t,r,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,Q(Ov(Ov({},Z),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=ee("drivers_delivery_spend"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,u=s.error,c=s.result,Q(Ov(Ov({},Z),{},u?{loading:!0,error:c}:{loading:!1,data:c})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),Q(Ov(Ov({},Z),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){te(),re(),ne(),oe(),se(),ue(),ce(),ae(),le(),ie(),fe(),de(),pe(),he()}),[l]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,bv({},e,{filterList:l,ordersList:d,salesList:v,orderStatusList:g,topOrdersList:j,customerSatisfactionList:U,ordersAcceptSpendList:B,arrivedPickUpSpendList:N,orderLocationList:q,spendTimesList:P,availableTimesList:x,busyTimesList:_,completeSpendList:J,pickUpSpendList:W,deliverySpendList:Z,handleChangeFilterList:f})))};function Iv(){return Iv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iv.apply(this,arguments)}function xv(e){return function(e){if(Array.isArray(e))return Fv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Av(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Av(Object(r),!0).forEach((function(t){_v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Av(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kv(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Dv(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){kv(a,n,o,i,s,"next",e)}function s(e){kv(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Uv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Lv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lv(e,t){if(e){if("string"==typeof e)return Fv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fv(e,t):void 0}}function Fv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Cv.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Cv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Bv=function(e){var t,r=e.UIComponent,n=e.paginationSettings,o=e.propsToFetch,u=e.isSearchByPromotionName,c=e.isSearchByPromotionDescription,l=Uv(nr(),1)[0],f=Uv(dr(),1)[0].token,p=Uv(Lr(),2)[1],d=Uv(Fn(),2)[1].showToast,h=Uv(Object(i.useState)({promotions:[],loading:!1,error:null}),2),y=h[0],v=h[1],m=Uv(Object(i.useState)({loading:!1,error:null}),2),b=m[0],g=m[1],O=Uv(Object(i.useState)(null),2),w=O[0],j=O[1],S=Uv(Object(i.useState)({currentPage:"pages"===n.controlType&&n.initialPage&&n.initialPage>=1?n.initialPage-1:0,pageSize:null!==(t=n.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),E=S[0],P=S[1],C=Uv(Object(i.useState)(null),2),I=C[0],x=C[1],A=Uv(Object(i.useState)({loading:!1,sites:[],error:null}),2),T=A[0],_=A[1],k=Uv(Object(i.useState)({loading:!1,paymethods:[],error:null}),2),D=k[0],U=k[1],L=Uv(Object(i.useState)({businesses:[],loading:!1,error:null}),2),F=L[0],B=L[1],M=function(){var e=Dv(a.a.mark((function e(t,r){var n,i,s,p,d,h,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(Tv(Tv({},y),{},{loading:!0})),n=null,i=[],w&&(s=[],u&&s.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}),c&&s.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(w,"%"))}}),i.push({conector:"OR",conditions:s})),i.length&&(n={conditions:i,conector:"AND"}),p={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},d=n?"".concat(l.root,"/offers?page=").concat(t,"&page_size=").concat(r,"8&params=").concat(o.toString(),"&&where=").concat(JSON.stringify(n)):"".concat(l.root,"/offers?page=").concat(t,"&page_size=").concat(r,"8&params=").concat(o.toString()),e.next=10,fetch(d,p);case 10:return h=e.sent,e.next=13,h.json();case 13:(m=e.sent).error?v(Tv(Tv({},y),{},{loading:!1,error:m.result})):(v({promotions:m.result,loading:!1,error:null}),P(Tv(Tv({},E),{},{currentPage:m.pagination.current_page,totalPages:m.pagination.total_pages,totalItems:m.pagination.total,from:m.pagination.from,to:m.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),v(Tv(Tv({},y),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r){return e.apply(this,arguments)}}(),R=function(){var e=Dv(a.a.mark((function e(t,r){var n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dn.Info,p("LOADING","Loading")),g(Tv(Tv({},b),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({enabled:r})},e.next=6,fetch("".concat(l.root,"/offers/").concat(t),n);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error||(s=y.promotions.filter((function(e){return e.id===t&&Object.assign(e,i.result),!0})),v(Tv(Tv({},y),{},{promotions:s})),d(Dn.Success,p("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),g({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),N=function(){var e=Dv(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(Tv(Tv({},T),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(l.root,"/sites"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(n=e.sent).error||_({sites:n.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),_(Tv(Tv({},T),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Dv(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(Tv(Tv({},D),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(l.root,"/paymethods?where=").concat(JSON.stringify({enabled:!0})),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(n=e.sent).error||U({paymethods:n.result,loading:!1,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),U(Tv(Tv({},D),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Dv(a.a.mark((function e(){var t,r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B(Tv(Tv({},F),{},{loading:!1})),e.next=4,l.setAccessToken(f).businesses().select(["name","logo","slug"]).asDashboard().get();case 4:t=e.sent,r=t.content,n=r.error,o=r.result,n||B(Tv(Tv({},F),{},{loading:!1,businesses:o})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),B(Tv(Tv({},F),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){y.loading||M(1,E.pageSize)}),[w]),Object(i.useEffect)((function(){N(),G(),z()}),[]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,Iv({},e,{sitesState:T,businessesList:F,paymethodsState:D,promotionListState:y,paginationProps:E,setPaginationProps:P,searchValue:w,onSearch:j,getPromotions:M,dataSelected:I,handleDragStart:function(e,t){e.dataTransfer.setData("transferPromotionId",t.id);var r=document.createElement("div");r.classList.add("ghostDragging"),r.innerHTML=null==t?void 0:t.name,document.body.appendChild(r),e.dataTransfer.setDragImage(r,0,0)},handleAllowDrop:function(e,t){e.preventDefault(),x(t)},handleDrop:function(e,t){e.preventDefault();var r=parseInt(e.dataTransfer.getData("transferPromotionId")),n=y.promotions.find((function(e){return e.id===r})),o=null==n?void 0:n.rank,a=null==t?void 0:t.rank;null===o&&null===a&&(a=1)},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);x("")},handleEnablePromotion:R,handleSuccessUpdatePromotions:function(e){v(Tv(Tv({},y),{},{promotions:e}))},handleSuccessAddPromotion:function(e){var t=[].concat(xv(y.promotions),[e]);P(Tv(Tv({},E),{},{to:(null==E?void 0:E.to)+1,total:(null==E?void 0:E.total)+1})),v(Tv(Tv({},y),{},{promotions:t}))},handleSuccessDeletePromotion:function(e){var t=y.promotions.filter((function(t){return t.id!==e}));P(Tv(Tv({},E),{},{total:(null==E?void 0:E.total)-1})),v(Tv(Tv({},y),{},{promotions:t}))}})))};function Mv(){return Mv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mv.apply(this,arguments)}function Rv(e){return Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(e)}function Nv(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function zv(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Nv(a,n,o,i,s,"next",e)}function s(e){Nv(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Gv(e){return function(e){if(Array.isArray(e))return Hv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Vv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qv(Object(r),!0).forEach((function(t){$v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Vv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vv(e,t){if(e){if("string"==typeof e)return Hv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hv(e,t):void 0}}function Hv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Bv.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Bv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},propsToFetch:["name","auto","enabled","end","description","image","label","order_priority","sites","stackable","start","target","type","limit_per_user","user_order_count","user_order_count_condition","valid_from_after_user_last_order_minutes","valid_until_after_user_last_order_minutes","users","delivery_zones","paymethods","order_types_allowed","max_discount","rank","rate_type","rate","public","coupon","businesses","condition_type","minimum","products","categories","schedule","limit"]};var Wv=function(e){var t=e.promotion,r=e.promotionsList,n=e.businessesList,o=e.sitesState,u=e.UIComponent,c=e.handleSuccessUpdatePromotions,l=e.handleSuccessAddPromotion,f=e.handleSuccessDeletePromotion,p=Jv(Lr(),2)[1],d=Jv(nr(),1)[0],h=Jv(dr(),1)[0].token,y=Jv(Fn(),2)[1].showToast,v=Jv(Object(i.useState)({promotion:t,loading:!1,error:null}),2),m=v[0],b=v[1],g=Jv(Object(i.useState)({loading:!1,changes:{}}),2),O=g[0],w=g[1],j=Jv(Object(i.useState)({loading:!1,error:null}),2),S=j[0],E=j[1],P=Jv(Object(i.useState)(!1),2),C=P[0],I=P[1],x=Jv(Object(i.useState)([]),2),A=x[0],T=x[1],_=Jv(Object(i.useState)([]),2),k=_[0],D=_[1],U=Jv(Object(i.useState)({}),2),L=U[0],F=U[1],B=Jv(Object(i.useState)({}),2),M=B[0],R=B[1],N=function(){return w({loading:!1,changes:{}})},z=function(){var e=zv(a.a.mark((function e(){var n,o,i,s,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in e.prev=0,y(Dn.Info,p("LOADING","Loading")),E({loading:!0,error:null}),n=Yv({},null==O?void 0:O.changes))("object"===Rv(n[o])&&null!==n[o]||Array.isArray(n[o]))&&(n[o]=JSON.stringify(n[o]));return i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(n)},e.next=8,fetch("".concat(d.root,"/offers/").concat(t.id),i);case 8:return s=e.sent,e.next=11,s.json();case 11:(u=e.sent).error?E({loading:!1,error:u.result}):(b(Yv(Yv({},m),{},{promotion:u.result})),E({loading:!1,error:null}),c&&(l=r.filter((function(e){return e.id===t.id&&Object.assign(e,u.result),!0})),c(l)),N(),y(Dn.Success,p("PROMOTION_SAVED","Promotion saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),E({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var t=zv(a.a.mark((function t(){var r,n,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,y(Dn.Info,p("LOADING","Loading")),E({loading:!0,error:null}),null!=(r=Yv({},null==O?void 0:O.changes))&&r.schedule&&(r.schedule=JSON.stringify(r.schedule)),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)},body:JSON.stringify(r)},t.next=8,fetch("".concat(d.root,"/offers"),n);case 8:return o=t.sent,t.next=11,o.json();case 11:(i=t.sent).error?E({loading:!1,error:i.result}):(E({error:null,loading:!1}),l&&l(i.result),y(Dn.Success,p("PROMOTION_ADDED","Promotion added")),e.onClose&&e.onClose()),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),E({loading:!1,error:t.t0.message});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}(),q=function(){var r=zv(a.a.mark((function r(){var n,o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,y(Dn.Info,p("LOADING","Loading")),E(Yv(Yv({},S),{},{loading:!0})),n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h)}},r.next=6,fetch("".concat(d.root,"/offers/").concat(t.id),n);case 6:return o=r.sent,r.next=9,o.json();case 9:r.sent.error||(f&&f(t.id),y(Dn.Success,p("OFFER_DELETED","Offer deleted")),e.onClose&&e.onClose()),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(0),E({loading:!1,error:[r.t0.message]});case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(){return r.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(0===Object.keys(t).length)I(!0),w(Yv(Yv({},O),{},{changes:{enabled:!0,auto:!1,public:!0,condition_type:1,type:1,target:1,rate_type:1,stackable:!1,rate:5}}));else{var e,r;I(!1),N();var n=null==t||null===(e=t.businesses)||void 0===e?void 0:e.reduce((function(e,t){return[].concat(Gv(e),[t.id])}),[]);T(n||[]);var o=null==t||null===(r=t.sites)||void 0===r?void 0:r.reduce((function(e,t){return[].concat(Gv(e),[t.id])}),[]);D(o||[]);var a=null==t?void 0:t.products.reduce((function(e,t){return[].concat(Gv(e),[t.id])}),[]);F(a);var i=null==t?void 0:t.categories.reduce((function(e,t){return[].concat(Gv(e),[t.id])}),[]);R(i)}b(Yv(Yv({},m),{},{promotion:t}))}),[t]),s.a.createElement(s.a.Fragment,null,u&&s.a.createElement(u,Mv({},e,{isAddMode:C,promotionState:m,formState:O,actionState:S,selectedBusinessIds:A,selectedSitesIds:k,selectedProductsIds:L,setSelectedProductsIds:F,selectedCategoryIds:M,setSelectedCategoryIds:R,handleChangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){w(Yv(Yv({},O),{},{changes:Yv(Yv({},O.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleChangeInput:function(e){w(Yv(Yv({},O),{},{changes:Yv(Yv({},O.changes),{},$v({},e.target.name,e.target.value))}))},handleUpdateClick:z,handleAddPromotion:G,handleDeletePromotion:q,handleChangeItem:function(e){w(Yv(Yv({},O),{},{changes:Yv(Yv({},O.changes),e)}))},handleRemoveKey:function(e){var t=Yv({},null==O?void 0:O.changes);delete t[e],w(Yv(Yv({},O),{},{changes:t}))},handleSelectSite:function(e,r){var n,o,a=[];null!==(n=O.changes)&&void 0!==n&&n.sites?a=Gv(null===(o=O.changes)||void 0===o?void 0:o.sites):null!=t&&t.sites&&(a=null==t?void 0:t.sites.reduce((function(e,t){return[].concat(Gv(e),[t.id])}),[]));e?a.push(r):a=a.filter((function(e){return e!==r})),D(a),w(Yv(Yv({},O),{},{changes:Yv(Yv({},O.changes),{},{sites:a})}))},handleSelectAllBusiness:function(e){var t,r=null==n||null===(t=n.businesses)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(Gv(e),[t.id])}),[]),o=[];o=e?Gv(r):[],T(o),w(Yv(Yv({},O),{},{changes:Yv(Yv({},O.changes),{},{businesses:o})}))},handleSelectBusiness:function(e,t){var r=Gv(A),n=[];n=t?[].concat(Gv(r),[e]):r.filter((function(t){return t!==e})),T(n),w(Yv(Yv({},O),{},{changes:Yv(Yv({},O.changes),{},{businesses:n})}))},handleSelectAllSites:function(e){var t,r=null===(t=o.sites)||void 0===t?void 0:t.reduce((function(e,t){return[].concat(Gv(e),[t.id])}),[]),n=[];n=e?Gv(r):[],D(n),w(Yv(Yv({},O),{},{changes:Yv(Yv({},O.changes),{},{sites:n})}))}})))};Wv.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Wv.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Kv=function(e){var t=e.onFiles,r=e.childRef,n=e.childId,o=e.children,a=e.className,u=e.style,c=e.accept,l=e.disabled,f=Object(i.useRef)(null);return s.a.createElement("div",{draggable:!0,onClick:function(e){r||n||f.current.click()},style:u,className:a},s.a.createElement("input",{type:"file",id:n,style:{display:"none"},onChange:function(e){e.preventDefault(),e.stopPropagation(),t(e.target.files)},onClick:function(e){return e.stopPropagation()},ref:function(e){f.current=e,r&&r(e)},accept:c,disabled:l}),o)};function Xv(){return Xv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xv.apply(this,arguments)}function Zv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zv(Object(r),!0).forEach((function(t){em(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function em(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tm(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function rm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var om=function(e){var t=e.UIComponent,r=e.filterValues,n=rm(nr(),1)[0],o=rm(dr(),1)[0],u=o.token,c=o.loading,l=rm(Object(i.useState)({loading:!1,error:null,result:null}),2),f=l[0],p=l[1],d=function(){var e,t=(e=a.a.mark((function e(t){var o,i,s,l,d,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Qv(Qv({},f),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},i=[],t&&Object.keys(r).length&&(void 0!==r.statuses&&(r.statuses.length>0?i.push({attribute:"status",value:r.statuses}):i.push({attribute:"status",value:[0,1,2,3,4,5,6,7,8,9,10,11,12]})),void 0!==r.deliveryFromDatetime&&null!==r.deliveryFromDatetime&&i.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(r.deliveryFromDatetime)}}),void 0!==r.deliveryEndDatetime&&null!==r.deliveryEndDatetime&&i.push({attribute:"delivery_datetime",value:{condition:"<=",value:r.deliveryEndDatetime}}),void 0!==r.businessIds&&0!==r.businessIds.length&&i.push({attribute:"business_id",value:r.businessIds}),void 0!==r.driverIds&&0!==r.driverIds.length&&i.push({attribute:"driver_id",value:r.driverIds}),void 0!==r.deliveryTypes&&0!==r.deliveryTypes.length&&i.push({attribute:"delivery_type",value:r.deliveryTypes}),void 0!==r.paymethodIds&&0!==r.paymethodIds.length&&i.push({attribute:"paymethod_id",value:r.paymethodIds})),s=t?"".concat(n.root,"/orders.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(i)):"".concat(n.root,"/orders.csv?mode=dashboard&orderBy=id"),e.next=10,fetch(s,o);case 10:return l=e.sent,e.next=13,l.json();case 13:d=e.sent,h=d.error,y=d.result,p(Qv(Qv({},f),{},h?{loading:!0,error:y}:{loading:!1,result:y})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),p(Qv(Qv({},f),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){tm(a,n,o,i,s,"next",e)}function s(e){tm(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Xv({},e,{actionStatus:f,getCSV:d})))};function am(){return am=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},am.apply(this,arguments)}function im(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function sm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function um(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sm(Object(r),!0).forEach((function(t){cm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}om.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},om.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var pm=function(e){var t=e.UIComponent,r=e.appId,n=e.debug,o=e.version,u=e.language,c=e.domain,l=e.handleButtonFacebookLoginClick,f=e.handleSuccessFacebookLogin,p=e.handleSuccessFacebookLogout,d=lm(nr(),1)[0],h=lm(Object(i.useState)({loading:!1,result:{error:!1}}),2),y=h[0],v=h[1],m=lm(Object(i.useState)({ready:!1,logged:!1}),2),b=m[0],g=m[1],O=!1;Object(i.useEffect)((function(){if(!window.document.getElementById("facebook-jssdk")){window.fbAsyncInit=function(){window.FB.init({appId:r,cookie:!0,xfbml:!1,version:o,status:!0}),!O&&g(um(um({},b),{},{ready:!0})),window.FB.getLoginStatus((function(e){"connected"===e.status&&!O&&g(um(um({},b),{},{logged:!0}))}))};var e=window.document.createElement("script"),t=window.document.getElementsByTagName("script")[0];e.id="facebook-jssdk",e.async=!0,e.defer=!0,e.src="https://".concat(c,"/").concat(u,"/sdk").concat(n?"/debug":"",".js"),t.parentNode.insertBefore(e,t)}}),[]),Object(i.useEffect)((function(){return function(){O=!0}}),[]);var w=function(){var e,t=(e=a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=3;break}return l(t),e.abrupt("return");case 3:return e.prev=3,v(um(um({},y),{},{loading:!0})),e.next=7,d.users().authFacebook({access_token:null===(r=t.authResponse)||void 0===r?void 0:r.accessToken});case 7:n=e.sent,v({result:n.content,loading:!1}),n.content.error?j():f&&f(n.content.result),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),v({result:{error:!0,result:e.t0.message},loading:!1});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){im(a,n,o,i,s,"next",e)}function s(e){im(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),j=function(e){window.FB&&(v(um(um({},y),{},{loading:!0})),window.FB.logout((function(e){v({loading:!1,result:{error:!1}}),g(um(um({},b),{},{logged:!1})),p&&p(e)})))};return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,am({},e,{formState:y,facebookStatus:b,handleFacebookLogout:j,handleFacebookLogin:function(e){window.FB&&(v(um(um({},y),{},{loading:!0})),window.FB.login((function(e){"connected"===e.status?(v({loading:!1,result:{error:!1}}),g(um(um({},b),{},{logged:!0})),w(e)):v({loading:!1,result:{error:!0,result:"Error login with Facebook"}})})))}})))};function dm(){return dm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dm.apply(this,arguments)}function hm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ym(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hm(Object(r),!0).forEach((function(t){vm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mm(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function bm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}pm.propTypes={UIComponent:c.a.elementType,handleButtonForgotPassowrdClick:c.a.func,handleSuccessForgotPassoword:c.a.func,appId:c.a.string.isRequired,debug:c.a.bool,version:c.a.string,language:c.a.string,domain:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},pm.defaultProps={version:"v7.0",language:"en_US",domain:"connect.facebook.net",beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Om=function(e){var t=e.UIComponent,r=e.defaultEmail,n=e.handleButtonForgotPasswordClick,o=e.handleSuccessForgotPassword,u=bm(nr(),1)[0],c=bm(Object(i.useState)({loading:!1,result:{error:!1}}),2),l=c[0],f=c[1],p=bm(Object(i.useState)({email:r||""}),2),d=p[0],h=p[1],y=function(){var e,t=(e=a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(ym(ym({},l),{},{loading:!0})),r=t||d,e.next=5,u.users().forgotPassword(r);case 5:n=e.sent,f({result:n.content,loading:!1}),n.content.error||o&&o(d.email),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),f({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){mm(a,n,o,i,s,"next",e)}function s(e){mm(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,dm({},e,{formState:l,formData:d,hanldeChangeInput:function(e){h(ym(ym({},d),{},vm({},e.target.name,e.target.value)))},handleButtonForgotPasswordClick:n||y})))};function wm(){return wm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wm.apply(this,arguments)}function jm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Om.propTypes={UIComponent:c.a.elementType,handleButtonForgotPasswordClick:c.a.func,handleSuccessForgotPassword:c.a.func,defaultEmail:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToSignup:c.a.string,linkToLogin:c.a.string,elementLinkToSignup:c.a.element,elementLinkToLogin:c.a.element},Om.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Em=function(e){return function(t){var r=t.apiKey;r||console.warn("Prop `apiKey` is required to use Google Maps components.");var n=jm(Object(i.useState)(!1),2),o=n[0],a=n[1];return Object(i.useEffect)((function(){if(r){var e=null;if(!window.document.getElementById("google-maps-cluster")){var t=window.document.createElement("script");t.id="google-maps-cluster",t.async=!0,t.defer=!0,t.src="https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js",window.document.body.appendChild(t)}if(!window.document.getElementById("google-maps-sdk")||!window.document.getElementById("google-maps-cluster")){window.googleAsyncInit=function(){a(!0)};var n=window.document.createElement("script");return n.id="google-maps-sdk",n.async=!0,n.defer=!0,n.src="https://maps.googleapis.com/maps/api/js?key=".concat(r,"&libraries=places,geometry,visualization&callback=googleAsyncInit"),window.document.body.appendChild(n),function(){e&&clearInterval(e)}}"undefined"!=typeof google?a(!0):e=setInterval((function(){"undefined"!=typeof google&&(a(!0),clearInterval(e))}),100)}}),[r]),s.a.createElement(e,wm({},t,{googleReady:o}))}};function Pm(){return Pm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pm.apply(this,arguments)}function Cm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Im(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Im(e,t){if(e){if("string"==typeof e)return xm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xm(e,t):void 0}}function xm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Em.propTypes={apiKey:c.a.string.isRequired},Em.defaultProps={};var Am=function(e){var t=e.googleReady,r=e.onChangeAddress,n=e.types,o=e.fields,a=e.countryCode,u=e.childRef,c=Object(i.useRef)(),l={};Object.entries(e).forEach((function(e){var t=Cm(e,2),r=t[0],n=t[1];-1===["googleReady","apiKey","onChangeAddress","setValue","childRef","countryCode","types","fields"].indexOf(r)&&(l[r]=n)}));var f={types:n,fields:o};return"*"!==a&&(f.componentRestrictions={country:a}),Object(i.useEffect)((function(){if(t&&r){var e=new window.google.maps.places.Autocomplete(c.current,f);e.addListener("place_changed",(function(){var t,n=e.getPlace(),o=null,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Im(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(n.address_components);try{for(a.s();!(t=a.n()).done;){var i=t.value;if("postal_code"===i.types[0]){o=i.short_name;break}}}catch(e){a.e(e)}finally{a.f()}var s={address:n.formatted_address,location:{lat:n.geometry.location.lat(),lng:n.geometry.location.lng()},utc_offset:n.utc_offset_minutes,map_data:{library:"google",place_id:n.place_id}};o&&(s.zipcode=o),r(s)}))}}),[t]),Object(i.useEffect)((function(){var e=setInterval((function(){c.current.attributes.autocomplete&&"new-field"===c.current.attributes.autocomplete.value&&clearInterval(e),c.current.setAttribute("autocomplete","new-field")}),100);return function(){return clearInterval(e)}})),s.a.createElement("input",Pm({},l,{autoComplete:"new-field",disabled:!e.googleReady,ref:function(e){c.current=e,u&&u(e)}}))};Am.propTypes={apiKey:c.a.string.isRequired,fields:c.a.arrayOf(u.string),types:c.a.arrayOf(u.string),countryCode:c.a.string,onChangeAddress:c.a.func},Am.defaultProps={types:[],fields:["place_id","formatted_address","geometry","utc_offset_minutes","address_components"],countryCode:"*"};var Tm=Em(Am);function _m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function km(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_m(Object(r),!0).forEach((function(t){Dm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Um(e){return function(e){if(Array.isArray(e))return Bm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Fm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Fm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fm(e,t){if(e){if("string"==typeof e)return Bm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bm(e,t):void 0}}function Bm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Mm=function(e){var t=e.googleReady,r=e.locations,n=e.mapControls,o=e.setErrors,a=e.isSetInputs,u=e.fixedLocation,c=e.handleChangeAddressMap,l=e.maxLimitLocation,f=e.businessMap,p=e.onBusinessClick,d=e.isHeatMap,h=e.isHeat,y=e.markerIcon,v=e.isFitCenter,m=e.handleChangeCenter,b=e.data,g=e.fillStyle,O=Lm(Pn(),1)[0].optimizeImage,w=Lm(Nr(),1)[0],j=Object(i.useRef)(),S=Lm(Object(i.useState)(null),2),E=S[0],P=S[1],C=Lm(Object(i.useState)(null),2),I=C[0],x=C[1],A=Lm(Object(i.useState)([]),2),T=A[0],_=A[1],k=Lm(Object(i.useState)(null),2),D=k[0],U=k[1],L=Lm(Object(i.useState)(null),2),F=L[0],B=L[1],M=Lm(Object(i.useState)(null),2),R=M[0],N=M[1],z=u||e.location,G={lat:null==z?void 0:z.lat,lng:null==z?void 0:z.lng},q=function(e){for(var t=new window.google.maps.LatLngBounds,n=0,a=function(o){var a,i,s,u,c,l=null;(1===o||f)&&(l=O(null===(c=r[o])||void 0===c?void 0:c.icon,"r_max"));d&&y&&(l=y);var h=new window.google.maps.Marker({position:new window.google.maps.LatLng(null===(a=r[o])||void 0===a?void 0:a.lat,null===(i=r[o])||void 0===i?void 0:i.lng),map:e,title:null===(s=r[o])||void 0===s?void 0:s.slug,icon:null!==(u=r[o])&&void 0!==u&&u.icon?{url:l||r[o].icon,scaledSize:new window.google.maps.Size(45,45)}:d?{url:l,scaledSize:new window.google.maps.Size(40,40)}:null});f?$(E,h,h.getPosition())?(h.addListener("click",(function(){var e;return p(null===(e=r[o])||void 0===e?void 0:e.slug)})),t.extend(h.position),_((function(e){return[].concat(Um(e),[h])})),n+=1):h.setMap(null):(t.extend(h.position),_((function(e){return[].concat(Um(e),[h])})))},i=0;i<r.length;i++)a(i);0===n&&o&&o("ERROR_NOT_FOUND_BUSINESSES"),(null==e?void 0:e.fitBounds)&&e.fitBounds(t),U(t)},Y=function(e){if(a){(new window.google.maps.Geocoder).geocode({latLng:e},(function(t){var r=null;if(t&&t.length>0){var n,a,i,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Fm(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(t[0].address_components);try{for(s.s();!(i=s.n()).done;){var u=i.value;if("postal_code"===u.types[0]){r=u.short_name;break}}}catch(e){s.e(e)}finally{s.f()}var l={address:t[0].formatted_address,location:{lat:null==e?void 0:e.lat(),lng:null==e?void 0:e.lng()},zipcode:r};c&&c(l),G.lat=null===(n=l.location)||void 0===n?void 0:n.lat,G.lng=null===(a=l.location)||void 0===a?void 0:a.lng}else I&&I.setPosition(G),o&&o("ERROR_NOT_FOUND_ADDRESS");E&&E.panTo(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng))}))}else{var t={lat:null==e?void 0:e.lat(),lng:null==e?void 0:e.lng()};c&&c({location:t}),G.lat=null==t?void 0:t.lat,G.lng=null==t?void 0:t.lng,E&&E.panTo(new window.google.maps.LatLng(null==t?void 0:t.lat,null==t?void 0:t.lng))}},$=function(e,t,r){var n=new window.google.maps.LatLng(null==r?void 0:r.lat(),null==r?void 0:r.lng()),a=new window.google.maps.LatLng(null==z?void 0:z.lat,null==z?void 0:z.lng),i=window.google.maps.geometry.spherical.computeDistanceBetween(n,a);if(f){return i<=2e4}l?i<=l?Y(r):(t.setPosition(G),e.panTo(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng)),o&&o("ERROR_MAX_LIMIT_LOCATION")):Y(r)};return Object(i.useEffect)((function(){t&&E&&I&&d&&R&&(F.setMap(F.getMap()?null:E),F.getMap()?R.clearMarkers():R.addMarkers(T))}),[h]),Object(i.useEffect)((function(){t&&E&&I&&v&&E.addListener("center_changed",(function(){var e=setTimeout((function(){I.setPosition(E.getCenter()),m&&m(E.getCenter())}),200);return function(){return clearTimeout(e)}}))}),[I]),Object(i.useEffect)((function(){if(t){var e,o=new window.google.maps.Map(j.current,{zoom:null!==(e=z.zoom)&&void 0!==e?e:n.defaultZoom,center:G,zoomControl:null==n?void 0:n.zoomControl,streetViewControl:null==n?void 0:n.streetViewControl,fullscreenControl:null==n?void 0:n.fullscreenControl,mapTypeControl:null==n?void 0:n.mapTypeControl,mapTypeId:null==n?void 0:n.mapTypeId,mapTypeControlOptions:km({style:window.google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:window.google.maps.ControlPosition.TOP_LEFT},null==n?void 0:n.mapTypeControlOptions)}),a=null;P(o),r?(f&&(a=new window.google.maps.Marker({position:new window.google.maps.LatLng(G.lat,G.lng),map:o}),x(a)),q(o),a=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng),map:o,opacity:d?0:1}),x(a)):(a=new window.google.maps.Marker({position:new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng),map:o,draggable:!(null==n||!n.isMarkerDraggable)}),x(a)),b&&b.forEach((function(e){var t;if(1===e.type&&null!=e&&null!==(t=e.data)&&void 0!==t&&t.center){var r=new window.google.maps.Circle(km(km({},g),{},{draggable:!1,map:o,center:e.data.center,radius:e.data.radio}));console.log(r)}if(2===e.type&&Array.isArray(e.data)){var n=new window.google.maps.Polygon(km(km({},g),{},{draggable:!1,map:o,paths:e.data}));console.log(n)}}))}}),[t]),Object(i.useEffect)((function(){if(!f&&t&&E&&I){if(window.google.maps.event.addListener(I,"dragend",(function(){$(E,I,I.getPosition())})),window.google.maps.event.addListener(I,"drag",(function(){w.emit("map_is_dragging",!0)})),null!=n&&n.isMarkerDraggable&&(window.google.maps.event.addListener(E,"drag",(function(){I.setPosition(E.getCenter()),w.emit("map_is_dragging",!0)})),window.google.maps.event.addListener(E,"dragend",(function(){I.setPosition(E.getCenter()),$(E,I,E.getCenter())}))),d&&!R){var e=new window.google.maps.visualization.HeatmapLayer({data:r.map((function(e){return new window.google.maps.LatLng(e.lat,e.lng)})),map:null,radius:17});B(e);var o=new window.MarkerClusterer(E,T,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"});N(o)}return function(){window.google.maps.event.clearListeners(I,"dragend"),window.google.maps.event.clearListeners(E,"drag"),window.google.maps.event.clearListeners(E,"dragend")}}}),[I,E,z]),Object(i.useEffect)((function(){t&&(f&&E&&q(E),d&&(null==r?void 0:r.length)>0||(G.lat=null==z?void 0:z.lat,G.lng=null==z?void 0:z.lng,I&&I.setPosition(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng)),E&&E.panTo(new window.google.maps.LatLng(null==G?void 0:G.lat,null==G?void 0:G.lng))))}),[z]),Object(i.useEffect)((function(){if(!f){var e=setInterval((function(){if(t&&E){var e=r[0],n=new window.google.maps.LatLng(null==e?void 0:e.lat,null==e?void 0:e.lng);T[0]&&T[0].setPosition(n),T.forEach((function(e){return D.extend(e.position)})),E.fitBounds(D)}}),1e3);return function(){return clearInterval(e)}}}),[r]),t&&s.a.createElement("div",{id:"map",ref:j,style:{width:"70%",height:"50%",position:"absolute"}})};Mm.propTypes={UIComponent:c.a.elementType,maxLimitLocation:c.a.number,handleChangeAddressMap:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Mm.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Rm=Em(Mm);function Nm(){return Nm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nm.apply(this,arguments)}function zm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Gm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gm(e,t){if(e){if("string"==typeof e)return qm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qm(e,t):void 0}}function qm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Rm.propTypes={apiKey:c.a.string.isRequired,onAddress:c.a.func,onError:c.a.func};var Ym=function(e){var t=e.UIComponent,r=e.googleReady,n=e.onData,o=e.onError,a=e.onAddress,u=zm(Lr(),2)[1],c=zm(Object(i.useState)(!1),2),l=c[0],f=c[1],p=void 0!==r;return navigator.geolocation&&s.a.createElement(t,Nm({},e,{handleGPS:function(){p&&!r||l||(f(!0),navigator.geolocation.getCurrentPosition((function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};p&&a?(new window.google.maps.Geocoder).geocode({location:t},(function(e,r){f(!1);var n,i=null,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Gm(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(e[0].address_components);try{for(s.s();!(n=s.n()).done;){var c=n.value;if("postal_code"===c.types[0]){i=c.short_name;break}}}catch(e){s.e(e)}finally{s.f()}"OK"===r?a({address:e[0].formatted_address,location:t,utc_offset:(new Date).getTimezoneOffset(),zipcode:i,map_data:{library:"google",place_id:e[0].place_id}}):o&&o(u("ERROR_GPS_BUTTON","Error to get result with gps button"))})):(f(!1),n&&n({location:t,utc_offset:(new Date).getTimezoneOffset()}))}),(function(e){f(!1),o&&o(u("ERROR_GPS_BUTTON",e.message))}),{timeout:5e3,enableHighAccuracy:!0}))},isGoogleButton:p,googleReady:r,isLoading:l}))};Ym.propTypes={onData:c.a.func,onError:c.a.func};var $m=Em(Ym);function Jm(){return Jm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jm.apply(this,arguments)}function Vm(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=eb(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function Hm(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Wm(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Hm(a,n,o,i,s,"next",e)}function s(e){Hm(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Km(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Km(Object(r),!0).forEach((function(t){Zm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Km(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||eb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eb(e,t){if(e){if("string"==typeof e)return tb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tb(e,t):void 0}}function tb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}$m.propTypes={apiKey:c.a.string.isRequired,onAddress:c.a.func,onError:c.a.func};var rb=function(e){var t=e.UIComponent,r=Qm(dr(),1)[0],n=r.token,o=r.loading,u=Qm(nr(),1)[0],c=[{id:1,name:"Create a store",addText:!1,description:"Go inside your Stores and Click Add New Store, fill up all the fields required and also add your banner and logo, if you don’t have one right now, don’t worry, you can add those later.",completed:!1},{id:2,name:"Fill up your business information",addText:!1,description:"The business information will show on your front-end website, such as; business name, logo, banner, business email, slug = the word after your domain, orderinwebsite.co/store, and business description.",completed:!1},{id:3,name:"Add your first category",addText:!1,description:"After you’ve clicked on the Add New Store and Filled up your business information you’ll get a blank screen, click on the Add Category button and add the name of your category.",completed:!1},{id:4,name:"Add your first product",addText:!1,description:"Now, click in the category you’ve just added and create a product, the products cannot be created if you don’t have a category, add an image to that product, make it look good.",completed:!1},{id:5,name:"Create a business menu",addText:!1,description:"To create a menu click in the store, a sidebar setting bar will show, inside here you’ll find the tab Menu, click Add Menu now, add a name, the delivery types, schedule, and at the bottom you’ll find all the products you have available to put inside this menu.",completed:!1},{id:6,name:"Create a delivery zone",addText:!1,description:"Go back a little bit in your sidebar setting bar, click in Delivery Zones, name the delivery zones, put a minimum price of delivery, and the price is how much you are going to charge for delivery, click “+”, and add your delivery zone, by Polygon or Circle, create by clicking around the map your range of delivery.",completed:!1},{id:7,name:"Payment method",addText:!0,description:"Last but not least, add a Payment Method, you’ll have several payment gateways, the biggest ones, PayPal, Stripe, or any other payment you want. That’s it! Look for your store in your Front-end Website.",completed:!1}],l=Qm(Object(i.useState)({loading:!1,orders:0,error:null}),2),f=l[0],p=l[1],d=Qm(Object(i.useState)({loading:!1,sales:0,error:null}),2),h=d[0],y=d[1],v=Qm(Object(i.useState)({loading:!1,sales:[],error:null}),2),m=v[0],b=v[1],g=Qm(Object(i.useState)({loading:!1,data:[],error:null}),2),O=g[0],w=g[1],j=function(){var e=Wm(a.a.mark((function e(){var t,r,i,s,c,l,d,h,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(Xm(Xm({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r="".concat(u.root,"/reports/orders?lapse=today"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:if(s=e.sent,c=s.error,l=s.result,c)p(Xm(Xm({},f),{},{loading:!0,error:l}));else{if(d=0,(null==l?void 0:l.length)>0){h=Vm(l);try{for(h.s();!(y=h.n()).done;)v=y.value,d+=parseInt(v.orders)}catch(e){h.e(e)}finally{h.f()}}p(Xm(Xm({},f),{},{loading:!1,orders:d}))}e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),p(Xm(Xm({},f),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Wm(a.a.mark((function e(){var t,r,i,s,c,l,f,p,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Xm(Xm({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r="".concat(u.root,"/reports/sales?lapse=today"),e.next=8,fetch(r,t);case 8:return i=e.sent,e.next=11,i.json();case 11:if(s=e.sent,c=s.error,l=s.result,c)y(Xm(Xm({},h),{},{loading:!0,error:l}));else{if(f=0,(null==l?void 0:l.length)>0){p=Vm(l);try{for(p.s();!(d=p.n()).done;)v=d.value,f+=v.sales}catch(e){p.e(e)}finally{p.f()}}y(Xm(Xm({},h),{},{loading:!1,sales:f}))}e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),y(Xm(Xm({},h),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Wm(a.a.mark((function e(){var t,r,i,s,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,b(Xm(Xm({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},r=P(),i="".concat(u.root,"/reports/sales?lapse=").concat(r),e.next=9,fetch(i,t);case 9:return s=e.sent,e.next=12,s.json();case 12:c=e.sent,l=c.error,f=c.result,b(Xm(Xm({},m),{},l?{loading:!0,error:f}:{loading:!1,sales:f})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),b(Xm(Xm({},m),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=new Date,t=e.getDate(),r=t<10?"0".concat(t):t,n=e.getMonth()+1,o=n<10?"0".concat(n):n,a=e.getFullYear();return"".concat(a,"-").concat(o,"-01,").concat(a,"-").concat(o,"-").concat(r)};return Object(i.useEffect)((function(){j(),S(),E(),w(Xm(Xm({},O),{},{data:c}))}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Jm({},e,{ordersList:f,todaySalelsList:h,monthSalesList:m,taskList:O,getCurrentDateRange:P,handleUpdateTaskList:function(e){w(Xm(Xm({},O),{},{data:e}))}})))};function nb(){return nb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nb.apply(this,arguments)}function ob(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ab(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ob(a,n,o,i,s,"next",e)}function s(e){ob(a,n,o,i,s,"throw",e)}i(void 0)}))}}function ib(e){return ib="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ib(e)}function sb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ub(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sb(Object(r),!0).forEach((function(t){cb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}rb.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var pb=function(e){var t=e.UIComponent,r=e.handleSuccessAdd,n=e.handleSuccessUpdateImporter,o=e.selectedImporter,u=lb(nr(),1)[0],c=lb(dr(),1)[0],l=lb(Fn(),2)[1].showToast,f=lb(Lr(),2)[1],p=lb(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),d=p[0],h=p[1],y=lb(Object(i.useState)({}),2),v=y[0],m=y[1],b=lb(Object(i.useState)({}),2),g=b[0],O=b[1],w=lb(Object(i.useState)({}),2),j=w[0],S=w[1],E=lb(Object(i.useState)(!1),2),P=E[0],C=E[1],I=lb(Object(i.useState)({}),2),x=I[0],A=I[1],T=function(){document.getElementById("importer-form").reset()},_=function(){document.getElementById("field-form").reset()},k=function(){T(),_(),m({}),O({}),A({}),h(ub(ub({},d),{},{changes:{}}))},D=function(){var t=ab(a.a.mark((function t(){var n,o,i,s,p,y;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(Dn.Info,f("LOADING","Loading")),n=ub({},d.changes),t.prev=2,h(ub(ub({},d),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)},body:JSON.stringify(n)},t.next=7,fetch("".concat(u.root,"/importers"),o);case 7:return i=t.sent,t.next=10,i.json();case 10:s=t.sent,p=s.error,y=s.result,p?h(ub(ub({},d),{},{loading:!1,result:{error:!0,result:y}})):(l(Dn.Success,f("IMPORTER_SAVED","Importer saved")),k(),h({loading:!1,changes:{},result:{error:!1,result:y}}),r&&r(y),e.onClose&&e.onClose()),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),h(ub(ub({},d),{},{result:{error:!0,result:[t.t0.message]},loading:!1}));case 19:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=ab(a.a.mark((function t(){var r,i,s,p,y,v;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(Dn.Info,f("LOADING","Loading")),r=ub({},d.changes),t.prev=2,h(ub(ub({},d),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)},body:JSON.stringify(r)},t.next=7,fetch("".concat(u.root,"/importers/").concat(null==o?void 0:o.id),i);case 7:return s=t.sent,t.next=10,s.json();case 10:p=t.sent,y=p.error,v=p.result,y?h(ub(ub({},d),{},{loading:!1,result:{error:!0,result:v}})):(l(Dn.Success,f("IMPORTER_SAVED","Importer saved")),k(),h({loading:!1,changes:{},result:{error:!1,result:v}}),n&&n(v),e.onClos&&e.onClos()),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),h(ub(ub({},d),{},{result:{error:!0,result:[t.t0.message]},loading:!1}));case 19:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){0!==Object.keys(j).length&&m(ub(ub({},v),{},{metafields:j}))}),[j]),Object(i.useEffect)((function(){0!==Object.keys(g).length&&m(ub(ub({},v),{},{fields:g}))}),[g]),Object(i.useEffect)((function(){if(0!==Object.keys(v).length){var e=ub({},v);h(ub(ub({},d),{},{changes:ub(ub({},d.changes),{},{mapping:JSON.stringify(e)})}))}}),[v]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,nb({},e,{formState:d,mappingState:v,fieldList:g,metafieldList:j,editState:x,isEdit:P,handleChangeInput:function(e,t){var r={};t?Object.values(e).map((function(e){r=ub(ub({},r),{},cb({},e.name,e.value))})):r=cb({},e.target.name,e.target.value),h(ub(ub({},d),{},{changes:ub(ub({},d.changes),r)}))},handleChangeSelect:function(e,t){var r;r=cb({},e,t),h(ub(ub({},d),{},{changes:ub(ub({},d.changes),r)})),P||(m({}),T())},handleChangeMappingInput:function(e,t){var r={};t?Object.values(e).map((function(e){r=ub(ub({},r),{},cb({},e.name,e.value))})):r=cb({},e.target.name,e.target.value),m(ub(ub({},v),r))},addNewField:function(e,t){var r=cb({},e,parseInt(t));O(ub(ub({},g),r)),_()},removeField:function(e){var t=ub({},g);delete t[e],O(t)},addNewMetaField:function(e,t){var r=cb({},e,parseInt(t));S(ub(ub({},j),r)),_()},removeMetaField:function(e){var t=ub({},j);delete t[e],S(t)},clearImorterForm:k,setIsEdit:C,handleCreateImporter:D,handleEditState:function(e){var t,r,n;"object"===ib(n=null==e||null===(t=e.mapping)||void 0===t?void 0:t.metafields)&&null!==n&&S(n);var o;"object"===ib(o=null==e||null===(r=e.mapping)||void 0===r?void 0:r.fields)&&null!==o&&O(o);var a;a=null==e?void 0:e.mapping,m(a),A(ub(ub({},x),{},{name:null==e?void 0:e.name,slug:null==e?void 0:e.slug,type:null==e?void 0:e.type,mapping:a,fields:o,metafields:n})),h(ub(ub({},d),{},{changes:ub(ub({},d.changes),{},{name:null==e?void 0:e.name,type:null==e?void 0:e.type})}))},editImporter:U})))};function db(){return db=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},db.apply(this,arguments)}function hb(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function yb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yb(Object(r),!0).forEach((function(t){mb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}pb.propTypes={handleSuccessUpdateImporter:c.a.func,UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},pb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ob=function(e){var t=e.UIComponent,r=bb(nr(),1)[0],n=bb(dr(),1)[0],o=bb(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),u=o[0],c=o[1],l=bb(Object(i.useState)({fileName:null,fileType:null,csvFile:null,importOptions:{}}),2),f=l[0],p=l[1],d=bb(Fn(),2)[1].showToast,h=bb(Lr(),2)[1],y=function(){var e,t=(e=a.a.mark((function e(t){var o,i,s,l,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(Dn.Info,h("LOADING","Loading")),(o=new FormData).append("file",null==f?void 0:f.csvFile),o.append("import_options",JSON.stringify(null==f?void 0:f.importOptions)),e.prev=4,c(vb(vb({},u),{},{loading:!0})),i={method:"POST",headers:{Authorization:"Bearer ".concat(n.token)},body:o},e.next=9,fetch("".concat(r.root,"/importers/").concat(t,"/jobs"),i);case 9:return s=e.sent,e.next=12,s.json();case 12:l=e.sent,p=l.error,y=l.result,p?c(vb(vb({},u),{},{loading:!1,result:{error:!0,result:y}})):(d(Dn.Success,h("IMPORTER_JOB_SAVED","Importer Job Created")),c({loading:!1,changes:{},result:{error:!1,result:y}})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),c(vb(vb({},u),{},{result:{error:!0,result:[e.t0.message]},loading:!1}));case 21:case"end":return e.stop()}}),e,null,[[4,18]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){hb(a,n,o,i,s,"next",e)}function s(e){hb(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,db({},e,{formState:u,fileState:f,setFileState:p,handleChangeInput:function(e,t){var r={};t?Object.values(e).map((function(e){r=vb(vb({},r),{},mb({},e.name,e.value))})):r=mb({},e.target.name,e.target.value),p(vb(vb({},f),{},{importOptions:vb(vb({},f.importOptions),r)}))},handleUploadCsv:function(e){e&&p(vb(vb({},f),{},{fileName:e.name,fileType:e.type,csvFile:e}))},handleCreateImporterJob:y})))};function wb(){return wb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wb.apply(this,arguments)}function jb(e){return function(e){if(Array.isArray(e))return Tb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ab(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Eb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sb(Object(r),!0).forEach((function(t){Pb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cb(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Ib(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Cb(a,n,o,i,s,"next",e)}function s(e){Cb(a,n,o,i,s,"throw",e)}i(void 0)}))}}function xb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Ab(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ab(e,t){if(e){if("string"==typeof e)return Tb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tb(e,t):void 0}}function Tb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ob.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ob.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var _b=function(e){var t,r=e.UIComponent,n=e.paginationSettings,o=xb(nr(),1)[0],u=xb(dr(),1)[0].token,c=xb(Object(i.useState)({loading:!1,error:null,importers:[]}),2),l=c[0],f=c[1],p=xb(Object(i.useState)({currentPage:"pages"===n.controlType&&n.initialPage&&n.initialPage>=1?n.initialPage-1:0,pageSize:null!==(t=n.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),d=p[0],h=p[1],y=xb(Object(i.useState)({}),2),v=y[0],m=y[1],b=xb(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(){var e=Ib(a.a.mark((function e(t,r){var n,i,s,c,p,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Eb(Eb({},l),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=5,fetch("".concat(o.root,"/importers?page=").concat(t||d.currentPage,"&page_size=").concat(r||d.pageSize),n);case 5:return i=e.sent,e.next=8,i.json();case 8:s=e.sent,c=s.result,p=s.pagination,f(Eb(Eb({},l),{},{loading:!1,importers:c})),y=0,p.current_page!==p.total_pages&&(v=p.total-l.importers.length,y=v<p.page_size?v:p.page_size),h(Eb(Eb({},d),{},{currentPage:p.current_page,totalPages:p.total_pages,totalItems:p.total,from:p.from,to:p.to,nextPageItems:y})),m(Eb({},p)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&f(Eb(Eb({},l),{},{loading:!1,error:[e.t0.message]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,r){return e.apply(this,arguments)}}(),j=function(){var e=Ib(a.a.mark((function e(t){var r,n,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(Eb(Eb({},g),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=5,fetch("".concat(o.root,"/importers/").concat(t),r);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error||(s=l.importers.filter((function(e){return e.id!==t})),m(Eb(Eb({},v),{},{totalPages:(null==v?void 0:v.totalPages)-1,totalItems:(null==v?void 0:v.totalItems)-1})),f(Eb(Eb({},l),{},{importers:s}))),O(Eb(Eb({},g),{},{loading:!1,error:i.error?i.result:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O(Eb(Eb({},g),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w(1,null)}),[]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,wb({},e,{actionStatus:g,importerList:l,getImporters:w,paginationProps:d,paginationDetail:v,handleDeleteImporter:j,handleSuccessAddImporter:function(e){f(Eb(Eb({},l),{},{importers:[].concat(jb(l.importers),[e])})),m(Eb(Eb({},v),{},{total:null!=v&&v.total?(null==v?void 0:v.total)+1:1}))},handleSuccessUpdateImporter:function(e){var t=l.importers.map((function(t){return t.id===e.id?e:t}));f(Eb(Eb({},l),{},{importers:t}))}})))};function kb(){return kb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kb.apply(this,arguments)}function Db(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Nb(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function Ub(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Lb(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ub(a,n,o,i,s,"next",e)}function s(e){Ub(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Fb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fb(Object(r),!0).forEach((function(t){Mb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Nb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nb(e,t){if(e){if("string"==typeof e)return zb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zb(e,t):void 0}}function zb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}_b.propTypes={UIComponent:c.a.elementType,slug:c.a.string,isInitialRender:c.a.bool},_b.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var Gb=function(e){var t,r=e.UIComponent,n=e.propsToFetch,o=Rb(nr(),1)[0],u=Rb(dr(),1)[0],c=u.token,l=u.loading,f=Rb(en(),1)[0].configs,p=Rb(Lr(),2)[1],d=Rb(Object(i.useState)({loading:!1,businesses:[],error:null}),2),h=d[0],y=d[1],v=Rb(Object(i.useState)({loading:!1,data:[],error:null}),2),m=v[0],b=v[1],g=(null==f||null===(t=f.order_types_allowed)||void 0===t?void 0:t.value.split("|").map((function(e){return Number(e)})))||[],O=[{value:1,name:p("DELIVERY","Delivery"),enabled:!0},{value:2,name:p("PICKUP","Pickup"),enabled:!0},{value:3,name:p("EAT_IN","Eat in"),enabled:!0},{value:4,name:p("CURBSIDE","Curbside"),enabled:!0},{value:5,name:p("DRIVE_THRU","Drive thru"),enabled:!0}],w=Rb(Object(i.useState)(O.filter((function(e){return null==g?void 0:g.includes(e.value)}))),2),j=w[0],S=w[1],E=Rb(Object(i.useState)({loading:!1,invoice:null,error:null}),2),P=E[0],C=E[1],I=Rb(Object(i.useState)({type:"charge",from:"",to:"",business:"",cancelled:!1,discounts:!1,notes:"",percentage_fee:0,fixed_fee:0,tax:0,misc_amount:0,misc_description:""}),2),x=I[0],A=I[1],T=function(){var e=Lb(a.a.mark((function e(){var t,r,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(Bb(Bb({},h),{},{loading:!0})),e.next=4,o.businesses().asDashboard().select(n).get();case 4:t=e.sent,r=t.content,i=r.error,s=r.result,u=r.pagination,y(Bb(Bb({},h),{},i?{loading:!1,error:s}:{loading:!1,businesses:s,pagination:u})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),y(Bb(Bb({},h),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Lb(a.a.mark((function e(){var t,r,n,i,s,u,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,b(Bb(Bb({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},r="".concat(o.root,"/paymethods"),e.next=8,fetch(r,t);case 8:return n=e.sent,e.next=11,n.json();case 11:i=e.sent,s=i.error,u=i.result,s?b(Bb(Bb({},m),{},{loading:!1,error:u})):(f=u.filter((function(e){return e.enabled})),b(Bb(Bb({},m),{},{loading:!1,data:f}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),b(Bb(Bb({},m),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Lb(a.a.mark((function e(){var t,r,n,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(Bb(Bb({},P),{},{loading:!0})),t=[{attribute:"business_id",value:x.business}],x.from&&t.push({attribute:"delivery_datetime",value:{condition:">=",value:"".concat(x.from," 00:00:00")}}),x.to&&t.push({attribute:"delivery_datetime",value:{condition:"<=",value:"".concat(x.to," 23:59:59")}}),e.next=7,o.orders().asDashboard().where(t).get();case 7:r=e.sent,n=r.content,i=n.error,s=n.result,u=n.pagination,i?C(Bb(Bb({},P),{},{loading:!1,error:s})):(c=D(s),C(Bb(Bb({},P),{},{loading:!1,invoice:c,pagination:u}))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),C(Bb(Bb({},P),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t,r=[],n=Db(null==m?void 0:m.data);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.enabled&&r.push(o.id)}}catch(e){n.e(e)}finally{n.f()}var a=[];if(j){var i,s=Db(j);try{for(s.s();!(i=s.n()).done;){var u=i.value;u.enabled&&a.push(u.value)}}catch(e){s.e(e)}finally{s.f()}}var c=x.from.split("-");c=1===c.length?null:new Date(c[0],c[1]-1,c[2],0,0,0,0);var l=x.to.split("-");l=1===l.length?null:new Date(l[0],l[1]-1,l[2],0,0,0,0);var f=e.filter((function(e){var t=!0,n=e.delivery_datetime.split(" ");return n=new Date(n[0].split("-")[0],n[0].split("-")[1]-1,n[0].split("-")[2],0,0,0,0),(-1===r.indexOf(e.paymethod_id)||-1===a.indexOf(e.delivery_type)||-1===[0,1,7,8,9,11,15].indexOf(e.status)&&!x.cancelled)&&(t=!1),(c&&c>n||l&&l<n)&&(t=!1),t})),p={from:x.from,to:x.to,type:x.type,orders:f,percentage_fee:x.percentage_fee,fixed_fee:x.fixed_fee,tax:x.tax,misc_amount:("payout"!==x.type?1:-1)*x.misc_amount,misc_description:x.misc_description,inlcude_discounts:x.discounts,tax_products:"payout"!==x.type?0:f.reduce((function(e,t){return 1===t.tax_type?e:e+B(t)}),0),discounts:x.discounts?f.reduce((function(e,t){return e-M(t)}),0):0,orders_subtotal:f.reduce((function(e,t){return e+F(t)}),0),orders_total:f.reduce((function(e,t){return e+N(t)}),0),notes:x.notes.replace(/\n/g,"<br>")};p.percentage_fee_total=("payout"!==x.type?1:-1)*(p.orders_subtotal+p.discounts)*x.percentage_fee/100,p.fixed_fee_total=("payout"!==x.type?1:-1)*f.length*x.fixed_fee;var d=parseFloat(p.percentage_fee_total)+parseFloat(p.fixed_fee_total)+parseFloat(p.misc_amount)+parseFloat(p.discounts)+parseFloat(p.tax_products)+("payout"!==x.type?0:parseFloat(p.orders_subtotal));return p.subtotal=d,p.tax_total=("payout"!==x.type?1:-1)*d*parseFloat(x.tax)/100,p.total=d+p.tax_total,h.businesses.forEach((function(e){e.id===x.business&&(p.business=e)})),p},U=function(e,t){var r=1,n=t.price;return e.allow_suboptionQuantity&&t.quantity&&(r=t.quantity),e.with_half_option&&t.position&&"whole"!==t.position&&(n=t.half_price),n*r},L=function(e){var t=0;if(e.options)for(var r=0;r<e.options.length;r++){var n=e.options[r];if(n.suboptions)for(var o=0;o<n.suboptions.length;o++){var a=n.suboptions[o];t+=U(n,a)}}return(t+e.price)*e.quantity},F=function(e){if(e.summary){var t,r=!0;if(null!=f&&f.project_fix_order_summary)r="1"===(null==f||null===(t=f.project_fix_order_summary)||void 0===t?void 0:t.value);return 1!==e.tax_type||r?e.summary.subtotal:e.summary.subtotal+e.summary.tax}for(var n=0,o=0;o<e.products.length;o++)n+=L(e.products[o]);return R(n)},B=function(e){if(e.summary)return e.summary.tax;var t=2===e.tax_type?e.tax*(F(e)-e.discount)/100:0;return R(t)},M=function(e){return e.summary?e.summary.discount:R(e.discount)},R=function(e){var t,r=Math.pow(10,null==f||null===(t=f.format_number_decimal_length)||void 0===t?void 0:t.value);return Math.round(e*r)/r},N=function(e){if(e.summary)return e.summary.total;var t=F(e),r=B(e),n=z(e),o="2"===e.delivery_type?t+r+n-e.discount:t+r+e.delivery_zone_price+G(e)+n-e.discount;return R(o)},z=function(e){if(e.summary)return e.summary.service_fee;var t=(F(e)-e.discount)*e.service_fee/100;return R(t)},G=function(e){if(e.summary)return e.summary.driver_tip;var t=(F(e)-e.discount)*e.driver_tip/100;return R(t)};return Object(i.useEffect)((function(){T(),_()}),[]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,kb({},e,{businessList:h,invocing:x,payMethodsList:m,orderTypes:j,exportInvoiceList:P,handleChangeOrderTypes:S,handleChangeInvocing:A,handleChangePayMethods:function(e){b(Bb(Bb({},m),{},{data:e}))},getOrders:k,getSubtotal:F,getTotal:N})))};function qb(){return qb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qb.apply(this,arguments)}function Yb(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function $b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Yb(a,n,o,i,s,"next",e)}function s(e){Yb(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Jb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jb(Object(r),!0).forEach((function(t){Hb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Kb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kb(e,t){if(e){if("string"==typeof e)return Xb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xb(e,t):void 0}}function Xb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Gb.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Gb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var Zb=function(e){var t=e.UIComponent,r=e.propsToFetch,n=Wb(nr(),1)[0],o=Wb(dr(),1)[0],u=o.token,c=o.loading,l=Wb(en(),1)[0].configs,f=Wb(Object(i.useState)({loading:!1,drivers:[],error:null}),2),p=f[0],d=f[1],h=Wb(Object(i.useState)({loading:!1,data:[],error:null}),2),y=h[0],v=h[1],m=Wb(Object(i.useState)({loading:!1,invoice:null,error:null}),2),b=m[0],g=m[1],O=Wb(Object(i.useState)({from:"",to:"",driver:"",cancelled:!1,notes:"",percentage_fee:0,fixed_fee:0,percentage_delivery_price:0,percentage_driver_tip:0,tax:0,misc_amount:0,misc_description:""}),2),w=O[0],j=O[1],S=function(){var e=$b(a.a.mark((function e(){var t,o,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Vb(Vb({},p),{},{loading:!0})),t=[{attribute:"level",value:"4"}],e.next=5,n.users().asDashboard().select(r).where(t).get();case 5:o=e.sent,i=o.content,s=i.error,u=i.result,c=i.pagination,d(Vb(Vb({},p),{},s?{loading:!1,error:u}:{loading:!1,drivers:u,pagination:c})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),d(Vb(Vb({},p),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=$b(a.a.mark((function e(){var t,r,o,i,s,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(Vb(Vb({},y),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},r="".concat(n.root,"/paymethods"),e.next=8,fetch(r,t);case 8:return o=e.sent,e.next=11,o.json();case 11:i=e.sent,s=i.error,l=i.result,s?v(Vb(Vb({},y),{},{loading:!1,error:l})):(f=l.filter((function(e){return e.enabled})),v(Vb(Vb({},y),{},{loading:!1,data:f}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),v(Vb(Vb({},y),{},{loading:!1,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=$b(a.a.mark((function e(){var t,r,o,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(Vb(Vb({},b),{},{loading:!0})),t=[{attribute:"driver_id",value:w.driver}],w.from&&t.push({attribute:"delivery_datetime",value:{condition:">=",value:"".concat(w.from," 00:00:00")}}),w.to&&t.push({attribute:"delivery_datetime",value:{condition:"<=",value:"".concat(w.to," 23:59:59")}}),e.next=7,n.orders().asDashboard().where(t).get();case 7:r=e.sent,o=r.content,i=o.error,s=o.result,u=o.pagination,i?g(Vb(Vb({},b),{},{loading:!1,error:s})):(c=C(s),g(Vb(Vb({},b),{},{loading:!1,invoice:c,pagination:u}))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),g(Vb(Vb({},b),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),C=function(e){var t,r=[],n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Kb(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(null==y?void 0:y.data);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.enabled&&r.push(o.id)}}catch(e){n.e(e)}finally{n.f()}var a=w.from.split("-");a=1===a.length?null:new Date(a[0],a[1]-1,a[2],0,0,0,0);var i=w.to.split("-");i=1===i.length?null:new Date(i[0],i[1]-1,i[2],0,0,0,0);var s=e.filter((function(e){var t=!0,n=e.delivery_datetime.split(" ");return n=new Date(n[0].split("-")[0],n[0].split("-")[1]-1,n[0].split("-")[2],0,0,0,0),(-1===r.indexOf(e.paymethod_id)||-1===[1,2,5,6,10,11,12].indexOf(e.status)||[2,5,6,10,12].indexOf(e.status)>-1&&!w.cancelled)&&(t=!1),(a&&a>n||i&&i<n)&&(t=!1),t})),u={from:w.from,to:w.to,orders:s,percentage_fee:w.percentage_fee,fixed_fee:w.fixed_fee,tax:w.tax,misc_amount:w.misc_amount,misc_description:w.misc_description,orders_subtotal:s.reduce((function(e,t){return e+A(t)}),0),orders_total:s.reduce((function(e,t){return e+k(t)}),0),discounts:s.reduce((function(e,t){return e-T(t)}),0),percentage_delivery_price:w.percentage_delivery_price,percentage_delivery_price_total:s.reduce((function(e,t){return e+t.delivery_zone_price}),0)*w.percentage_delivery_price/100,percentage_driver_tip:w.percentage_driver_tip,percentage_driver_tip_total:s.reduce((function(e,t){return e+U(t)}),0)*w.percentage_driver_tip/100,notes:w.notes.replace(/\n/g,"<br>")};u.percentage_fee_total=(u.orders_subtotal+u.discounts)*w.percentage_fee/100,u.fixed_fee_total=s.length*w.fixed_fee;var c=parseFloat(u.percentage_fee_total)+parseFloat(u.fixed_fee_total)+parseFloat(u.misc_amount)+parseFloat(u.percentage_delivery_price_total)+parseFloat(u.percentage_driver_tip_total);return u.subtotal=c,u.tax_total=c*parseFloat(w.tax)/100,u.total=c+u.tax_total,p.drivers.forEach((function(e){e.id===w.driver&&(u.driver=e)})),u},I=function(e,t){var r=1,n=t.price;return e.allow_suboptionQuantity&&t.quantity&&(r=t.quantity),e.with_half_option&&t.position&&"whole"!==t.position&&(n=t.half_price),n*r},x=function(e){var t=0;if(e.options)for(var r=0;r<e.options.length;r++){var n=e.options[r];if(n.suboptions)for(var o=0;o<n.suboptions.length;o++){var a=n.suboptions[o];t+=I(n,a)}}return(t+e.price)*e.quantity},A=function(e){if(e.summary){var t,r=!0;if(null!=l&&l.project_fix_order_summary)r="1"===(null==l||null===(t=l.project_fix_order_summary)||void 0===t?void 0:t.value);return 1!==e.tax_type||r?e.summary.subtotal:e.summary.subtotal+e.summary.tax}for(var n=0,o=0;o<e.products.length;o++)n+=x(e.products[o]);return _(n)},T=function(e){return e.summary?e.summary.discount:_(e.discount)},_=function(e){var t,r=Math.pow(10,null==l||null===(t=l.format_number_decimal_length)||void 0===t?void 0:t.value);return Math.round(e*r)/r},k=function(e){if(e.summary)return e.summary.total;var t=A(e),r=function(e){if(e.summary)return e.summary.tax;var t=2===e.tax_type?e.tax*(A(e)-e.discount)/100:0;return _(t)}(e),n=D(e),o="2"===e.delivery_type?t+r+n-e.discount:t+r+e.delivery_zone_price+U(e)+n-e.discount;return _(o)},D=function(e){if(e.summary)return e.summary.service_fee;var t=(A(e)-e.discount)*e.service_fee/100;return _(t)},U=function(e){if(e.summary)return e.summary.driver_tip;var t=(A(e)-e.discount)*e.driver_tip/100;return _(t)};return Object(i.useEffect)((function(){S(),E()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,qb({},e,{driverList:p,invocing:w,payMethodsList:y,exportInvoiceList:b,handleChangeInvocing:j,handleChangePayMethods:function(e){v(Vb(Vb({},y),{},{data:e}))},getOrders:P,getSubtotal:A,getTotal:k})))};function Qb(){return Qb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qb.apply(this,arguments)}function eg(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function tg(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){eg(a,n,o,i,s,"next",e)}function s(e){eg(a,n,o,i,s,"throw",e)}i(void 0)}))}}function rg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ng(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rg(Object(r),!0).forEach((function(t){og(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function og(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ag(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ig(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ig(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ig(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Zb.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zb.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname"]};var sg=function(e){var t=e.UIComponent,r=ag(nr(),1)[0],n=ag(Lr(),2)[1],o=ag(dr(),1)[0].loading,u=ag(Fn(),2)[1].showToast,c=ag(Object(i.useState)({loading:!1,translations:[],result:{error:null}}),2),l=c[0],f=c[1],p=ag(Object(i.useState)(null),2),d=p[0],h=p[1],y=ag(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),v=y[0],m=y[1],b=function(e){f(ng(ng({},l),{},{translations:e}))},g=function(){var e=tg(a.a.mark((function e(){var t,o,i,s,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(ng(ng({},v),{},{loading:!0})),u(Dn.Info,n("LOADING","Loading")),s={key:null==v||null===(t=v.changes)||void 0===t?void 0:t.key,text:null==v||null===(o=v.changes)||void 0===o?void 0:o.text},e.next=6,r.translations(null==v||null===(i=v.changes)||void 0===i?void 0:i.id).save(s);case 6:c=e.sent,l=c.content,f=l.error,p=l.result,f?m(ng(ng({},v),{},{loading:!1,error:p})):(m(ng(ng({},v),{},{loading:!1,changes:{}})),u(Dn.Success,n("WEB_APP_LANG_SAVED","Language change saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(ng(ng({},v),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=tg(a.a.mark((function e(){var t,n,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(ng(ng({},l),{},{loading:!0})),e.next=6,r.translations().get();case 6:t=e.sent,n=t.content,i=n.error,s=n.result,f(ng(ng({},l),{},i?{loading:!1,error:s}:{loading:!1,translations:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),f(ng(ng({},l),{},{loading:!1,error:e.t0}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){O()}),[]),Object(i.useEffect)((function(){Object.keys(null==v?void 0:v.changes).length>0&&g()}),[null==v?void 0:v.changes]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Qb({},e,{translationList:l,handleUpdateTranslationList:b,textEditState:v.changes,searchValue:d,onSearch:h,handleChangeText:function(e,t,r){var n=null==l?void 0:l.translations.map((function(e){return e.key===t?ng(ng({},e),{},{text:r}):e}));d&&h(t),b&&b(n),m(ng(ng({},v),{},{changes:{id:e,key:t,text:r}}))},getTranslations:O})))};function ug(){return ug=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ug.apply(this,arguments)}function cg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cg(Object(r),!0).forEach((function(t){fg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}sg.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var hg=function(e){var t,r=e.currentLanguage,n=e.languages,o=e.UIComponent,a=pg(Object(i.useState)({loading:!n,languages:n,error:null}),2),u=a[0],c=a[1],l=pg(Lr(),3),f=l[0],p=l[2].setLanguage,d=pg(Object(i.useState)(null),2),h=d[0],y=d[1],v={};return Object(i.useEffect)((function(){if(!f.loading){if((null==n?void 0:n.length)>0)c(lg(lg({},u),{},{loading:!1,languages:n}));else{var e=f.languageList.filter((function(e){return e.enabled}));c(lg(lg({},u),{},{loading:!1,languages:e}))}return function(){v.languages&&v.languages.cancel()}}}),[f]),Object(i.useEffect)((function(){var e;if(r){var t=n.find((function(e){return e.code===r}));p(t),y(t)}else if(null==f||null===(e=f.language)||void 0===e||!e.code||null==h||!h.code){var o,a,i=null!=f&&null!==(o=f.language)&&void 0!==o&&o.code?null==f?void 0:f.language:null==u||null===(a=u.languages)||void 0===a?void 0:a.find((function(e){return e.default}));i&&(p(i),y(i))}}),[n,u]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,ug({},e,{currentLanguage:e.handlerCustomChangeLanguage?null==h?void 0:h.code:null==f||null===(t=f.language)||void 0===t?void 0:t.code,languagesState:u,handleChangeLanguage:function(t){var r=u.languages.find((function(e){return e.code===t}));if(e.handlerCustomChangeLanguage)return e.handlerCustomChangeLanguage(r),void y(r);e.onChangeLanguage&&e.onChangeLanguage(r),p(r)}})))};function yg(){return yg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yg.apply(this,arguments)}function vg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vg(Object(r),!0).forEach((function(t){bg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gg(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Og(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}hg.propTypes={UIComponent:c.a.elementType,currentLanguage:c.a.string,languages:c.a.arrayOf(c.a.object),onChangeLanguage:c.a.func,handlerCustomChangeLanguage:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var jg=function(e){var t=e.UIComponent,r=Og(nr(),1)[0],n=Og(Fn(),2)[1].showToast,o=Og(Lr(),3),u=o[0],c=o[1],l=o[2].updateLanguageListState,f=Og(Object(i.useState)({fields:[],loading:!1,error:null}),2),p=f[0],d=f[1],h=Og(Object(i.useState)({loading:!1,error:null}),2),y=h[0],v=h[1],m=function(){var e,t=(e=a.a.mark((function e(t,o){var i,s,u,f,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(Dn.Info,c("LOADING","Loading")),v(mg(mg({},y),{},{loading:!0})),e.next=5,r.languages(t).save(o);case 5:i=e.sent,s=i.content,u=s.error,f=s.result,u?v({loading:!1,error:f}):(v({loading:!1,error:null}),n(Dn.Success,c("WEB_APP_LANG_SAVED","Language change saved")),h=p.fields.filter((function(e){return e.id===t&&Object.assign(e,f),!0})),d(mg(mg({},p),{},{fields:h})),l(f)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),v({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){gg(a,n,o,i,s,"next",e)}function s(e){gg(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){u.loading||d(mg(mg({},p),{},{loading:!1,fields:u.languageList}))}),[u.languageList]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,yg({},e,{languageFiledsState:p,handleChangeFieldSetting:m})))};function Sg(){return Sg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sg.apply(this,arguments)}function Eg(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Tg(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function Pg(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Cg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ig(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cg(Object(r),!0).forEach((function(t){xg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ag(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Tg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tg(e,t){if(e){if("string"==typeof e)return _g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_g(e,t):void 0}}function _g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}jg.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var kg=function(e){var t=e.UIComponent,r=e.translationList,n=e.handleUpdateTranslationList,o=e.getTranslations,u=Ag(nr(),1)[0],c=Ag(dr(),1)[0],l=c.token,f=c.loading,p=Ag(Lr(),2)[1],d=Ag(Fn(),2)[1].showToast,h=Ag(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),y=h[0],v=h[1],m=Ag(Object(i.useState)({row:-1,col:-1}),2),b=m[0],g=m[1],O=Ag(Object(i.useState)(!1),2),w=O[0],j=O[1],S=function(){var e,t=(e=a.a.mark((function e(t,i,s){var c,h,m,b,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,v(Ig(Ig({},y),{},{loading:!0})),d(Dn.Info,p("LOADING","Loading")),c={method:i?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({translations:JSON.stringify(t)})},h="".concat(u.root,"/bulks/translations"),e.next=9,fetch(h,c);case 9:return m=e.sent,e.next=12,m.json();case 12:b=e.sent,g=b.error,O=b.result,g?v(Ig(Ig({},y),{},{loading:!1,result:{error:!0,result:O}})):(v(Ig(Ig({},y),{},{loading:!1,result:{error:!1,result:O}})),i?o():(w=null==r?void 0:r.translations.map((function(e){var r,n=Eg(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.id===e.id)return Ig(Ig({},e),{},{key:o.key,text:o.text})}}catch(e){n.e(e)}finally{n.f()}return e})),n(w)),d(Dn.Success,i?p("WEB_APP_LANG_ADDED","Language item added"):p("WEB_APP_LANG_SAVED","Language change saved"))),e.next=22;break;case 18:if(e.prev=18,e.t0=e.catch(2),v(Ig(Ig({},y),{},{result:{error:!0,result:e.t0.message},loading:!1})),i)for(j=t.length-1;j>=0;j--)s.alter("remove_row",t[j].row);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Pg(a,n,o,i,s,"next",e)}function s(e){Pg(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,r,n){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Sg({},e,{creationFormState:y,handleItemChange:function(t,r,n){if(w)j(!1);else{t=t||[];for(var o=[],a=[],i=[],s=[],u=0;u<t.length;u++){var c={key:!1,text:!1};if(t[u][2]!==t[u][3]){for(var l=!0,f=0;f<o.length;f++)if(o[f]===t[u][0]){l=!1;break}if(l){o.push(t[u][0]);var d=n.getSourceDataAtRow(t[u][0]);if(n.validateRows(o,(function(e){})),d.key||(c.key=!0,-1===s.indexOf(p("KEY_REQUIRED"))&&s.push(p("KEY_REQUIRED"))),d.text||(c.text=!0,-1===s.indexOf(p("TEXT_REQUIRED"))&&s.push(p("TEXT_REQUIRED"))),d.id){if(c.text||c.text)continue;i.push(d)}else{if(c.key||c.text)continue;d.row=t[u][0],a.push(d)}}}}if(s.length>0&&v(Ig(Ig({},y),{},{result:{error:!0,result:s}})),i.length>0){var h,m;if(null!==(h=i[0])&&void 0!==h&&h.key)e.onSearch&&e.onSearch(null===(m=i[0])||void 0===m?void 0:m.key);S(i,!1,n)}a.length>0&&S(a,!0,n)}},handleAfterSectionEnd:function(e,t,r,n,o){b.row===e&&b.col===t||e!==r||t!==n||(g({row:e,col:t}),o.deselectCell(),o.selectCell(e,t))},handleoutsideClickDeselects:function(){return g({row:-1,col:-1}),!1}})))};function Dg(){return Dg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dg.apply(this,arguments)}function Ug(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Lg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lg(Object(r),!0).forEach((function(t){Bg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}kg.propTypes={UIComponent:c.a.elementType,translationList:c.a.object,handleUpdateTranslationList:c.a.func,getTranslations:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},kg.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ng=function(e){var t=e.UIComponent,r=e.getTranslations,n=Mg(nr(),1)[0],o=Mg(Fn(),2)[1].showToast,u=Mg(Lr(),2)[1],c=Mg(Object(i.useState)({loading:!1,changes:{},result:{error:null}}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Fg(Fg({},l),{},{loading:!0})),o(Dn.Info,u("LOADING","Loading")),e.next=5,n.translations().save(null==l?void 0:l.changes);case 5:t=e.sent,i=t.content,s=i.error,c=i.result,s?f(Fg(Fg({},l),{},{loading:!1,result:{error:!0,result:c}})):(f(Fg(Fg({},l),{},{loading:!1,changes:{},result:{error:!1,result:c}})),r&&r(),o(Dn.Success,u("WEB_APP_LANG_ADDED","Language item added"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(Fg(Fg({},l),{},{loading:!1,result:{error:!0,result:e.t0}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ug(a,n,o,i,s,"next",e)}function s(e){Ug(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Dg({},e,{creationFormState:l,handleChangeInput:function(e,t){f(Fg(Fg({},l),{},{changes:Fg(Fg({},null==l?void 0:l.changes),{},Bg({},e,t.target.value))}))},handleUpdateClick:function(){p()}})))};function zg(){return zg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zg.apply(this,arguments)}function Gg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gg(Object(r),!0).forEach((function(t){Yg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $g(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Jg(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){$g(a,n,o,i,s,"next",e)}function s(e){$g(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Vg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ng.propTypes={UIComponent:c.a.elementType,getTranslations:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ng.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Wg=function(e){var t=e.UIComponent,r=e.handleButtonLoginClick,n=e.handleSuccessLogin,o=e.useLoginByEmail,u=e.useLoginByCellphone,c=e.useDefualtSessionManager,l=e.urlToRedirect,f=e.allowedLevels,p=Vg(nr(),1)[0],d=e.defaultLoginTab,h=Vg(Object(i.useState)({loading:!1,result:{error:!1}}),2),y=h[0],v=h[1],m=Vg(Object(i.useState)({email:"",cellphone:"",password:""}),2),b=m[0],g=m[1],O=Vg(Object(i.useState)({loading:!1,result:{error:!1}}),2),w=O[0],j=O[1],S=Vg(Object(i.useState)({loading:!1,result:{error:!1}}),2),E=S[0],P=S[1],C=Vg(Nr(),1)[0];o||u?"email"===d&&!o&&u?d="cellphone":"cellphone"===d&&!u&&o&&(d="email"):d="none";var I=Vg(Object(i.useState)(d||(u&&!o?"cellphone":"email")),2),x=I[0],A=I[1],T=Vg(dr(),2)[1],_=T.login,k=T.logout,D=function(){var e=Jg(a.a.mark((function e(t){var r,o,i,s,u,d,h,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Yg(r={},x,t&&t[x]||b[x]),Yg(r,"password",t&&(null==t?void 0:t.password)||b.password),o=r,v(qg(qg({},y),{},{loading:!0})),e.next=5,p.users().auth(o);case 5:if(i=e.sent,s=i.content,u=s.error,d=s.result,u){e.next=31;break}if(!c){e.next=28;break}if(!(f&&(null==f?void 0:f.length)>0)){e.next=27;break}if(h=d.level,m=d.session.access_token,f.includes(h)){e.next=27;break}return e.prev=14,e.next=17,p.setAccessToken(m).users().logout();case 17:g=e.sent,g.content.error||k(),v({result:{error:!0,result:["YOU_DO_NOT_HAVE_PERMISSION"]},loading:!1}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(14),v({result:{error:!0,result:e.t0.message},loading:!1});case 26:return e.abrupt("return");case 27:_({user:d,token:d.session.access_token});case 28:C.emit("userLogin",d),n&&n(d),l&&(window.location.href="".concat(window.location.origin).concat(l));case 31:v({result:{error:u,result:d},loading:!1}),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),v({result:{error:!0,result:e.t1.message},loading:!1});case 37:case"end":return e.stop()}}),e,null,[[0,34],[14,23]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Jg(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(qg(qg({},w),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/auth/sms/twilio/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cellphone:t.cellphone,country_phone_code:"+".concat(t.country_phone_code)})});case 4:return r=e.sent,e.next=7,r.json();case 7:n=e.sent,j(qg(qg({},w),{},{loading:!1,result:n})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),j(qg(qg({},w),{},{loading:!1,result:{error:e.t0.message}}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Jg(a.a.mark((function e(t){var r,o,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(qg(qg({},E),{},{loading:!0})),e.next=4,fetch("".concat(p.root,"/auth/sms/twilio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return o=e.sent,e.next=7,o.json();case 7:null!=(i=e.sent)&&i.error||null==i||null===(r=i.result)||void 0===r||!r.id||(_({user:null==i?void 0:i.result,token:null==i||null===(s=i.result)||void 0===s||null===(u=s.session)||void 0===u?void 0:u.access_token}),n&&n(null==i?void 0:i.result)),P(qg(qg({},E),{},{loading:!1,result:i})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),P(qg(qg({},E),{},{loading:!1,result:{error:e.t0.message}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,zg({},e,{formState:y,loginTab:x,credentials:b,verifyPhoneState:w,checkPhoneCodeState:E,setCheckPhoneCodeState:function(e){P(e||{loading:!1,result:{error:!1}})},handleChangeInput:function(e){g(qg(qg({},b),{},Yg({},e.target.name,e.target.value)))},handleButtonLoginClick:r||D,handleChangeTab:function(e){A(e)},handleSendVerifyCode:U,handleCheckPhoneCode:L})))};function Kg(){return Kg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kg.apply(this,arguments)}function Xg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xg(Object(r),!0).forEach((function(t){Qg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eO(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function tO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Wg.propTypes={UIComponent:c.a.elementType,handleButtonLoginClick:c.a.func,handleSuccessLogin:c.a.func,useDefualtSessionManager:c.a.bool,useLoginByEmail:c.a.bool,useLoginByCellphone:c.a.bool,defaultLoginTab:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToSignup:c.a.string,linkToForgetPassword:c.a.string,elementLinkToSignup:c.a.element,elementLinkToForgotPassword:c.a.element},Wg.defaultProps={defaultLoginTab:"email",useLoginByEmail:!0,useDefualtSessionManager:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nO=function(e){var t=e.orderId,r=e.UIComponent,n=tO(nr(),1)[0],o=tO(dr(),1)[0],u=tO(Object(i.useState)({data:[],loading:!0,error:null}),2),c=u[0],l=u[1],f=function(){var e,r=(e=a.a.mark((function e(){var r,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Zg(Zg({},c),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(n.root,"/logistic/orders/").concat(t,"/information"),r);case 5:return i=e.sent,e.next=8,i.json();case 8:s=e.sent,u=s.result,i.ok?l({error:null,loading:!1,data:u}):l(Zg(Zg({},c),{},{loading:!1,error:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(Zg(Zg({},c),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){eO(a,n,o,i,s,"next",e)}function s(e){eO(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(i.useEffect)((function(){f()}),[]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,Kg({},e,{logisticInformation:c,getLogistics:f})))};function oO(){return oO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oO.apply(this,arguments)}function aO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function iO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aO(Object(r),!0).forEach((function(t){sO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uO(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function cO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}nO.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fO=function(e){var t=e.orderId,r=e.UIComponent,n=cO(nr(),1)[0],o=cO(dr(),1)[0],u=cO(Lr(),2)[1],c=cO(Pn(),1)[0],l=c.getOrderState,f=c.parseDistance,p=cO(Object(i.useState)({logs:[],loading:!0,error:null}),2),d=p[0],h=p[1],y=function(){var e,r=(e=a.a.mark((function e(){var r,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(iO(iO({},d),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(n.root,"/orders/").concat(t,"/logs?order_id=").concat(t),r);case 5:return i=e.sent,e.next=8,i.json();case 8:s=e.sent,u=s.result,h(iO(iO({},d),{},{loading:!1,logs:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(iO(iO({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){uO(a,n,o,i,s,"next",e)}function s(e){uO(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(i.useEffect)((function(){y()}),[]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,oO({},e,{logisticList:d,parseLog:function(e){var t=function(e,t){var r=u("LOG_"+e.toUpperCase());for(var n in t){var o=t[n];"distance"===n||"coverage"===n?o=f(t[n]):"with_orders"===n?(o=t[n].join(", "),n="orders"):"status"===n&&(o=l(t[n])),r=r.replace("_"+n+"_",o)}return r},r=e.data?e.data:{};return-1!==["logistic_driver_found","logistic_driver_found_group","logistic_driver_not_found","logistic_driver_not_found_group","logistic_driver_found_in_coverage","logistic_driver_found_in_coverage_group","logistic_driver_found_out_coverage","logistic_driver_found_out_coverage_group","logistic_driver_autoaccepted","logistic_driver_autoaccepted_group","logistic_request_autorejected","logistic_request_autorejected_group","logistic_assign_request_accepted","logistic_assign_request_accepted_group","logistic_assign_request_rejected","logistic_assign_request_rejected_group","logistic_manual_driver_assignment","logistic_manual_driver_unassignment","logistic_driver_autoassigned_group"].indexOf(e.event)||e.driver_id?(e.driver&&(r.driver=e.driver.name+(e.driver.lastname?e.driver.lastname:"")),t(e.event,r)):e.driver_company_id||e.external_driver_id?(e.driver_company&&(r.driver_company=e.driver_company.name),e.external_driver&&(r.external_driver=e.external_driver.name),t(e.event,r)):-1!==["logistic_started","logistic_finished","logistic_expired","logistic_resolved","logistic_reset","logistic_grouped","logistic_cancelled","logistic_not_grouped","logistic_order_queued","logistic_order_out_queued","logistic_driver_company_not_found"].indexOf(e.event)?t(e.event,r):u(e.event.toUpperCase())+"<br />"+JSON.stringify(e.data)}})))};function pO(){return pO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pO.apply(this,arguments)}function dO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dO(Object(r),!0).forEach((function(t){yO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vO(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function mO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}fO.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gO=function(e){var t,r=e.UIComponent,n=e.handleSuccessLogout,o=e.token,u=e.isNative,c=e.useDefualtSessionManager,l=mO(nr(),1)[0],f=mO(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],h=mO(dr(),2),y=h[0],v=h[1].logout,m=mO(en(),1)[0].configs;Object(i.useEffect)((function(){var e;if(null!=m&&null!==(e=m.facebook_id)&&void 0!==e&&e.value&&!u){if(window.fbAsyncInit=function(){var e;window.FB.init({appId:null==m||null===(e=m.facebook_id)||void 0===e?void 0:e.value,cookie:!0,xfbml:!1,version:"v7.0",status:!0})},window.document.getElementById("facebook-jssdk"))return;var t=window.document.createElement("script"),r=window.document.getElementsByTagName("script")[0];t.id="facebook-jssdk",t.async=!0,t.defer=!0,t.src="https://connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(t,r)}}),[null==m||null===(t=m.facebook_id)||void 0===t?void 0:t.value]);var b=function(){var e,t=(e=a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(hO(hO({},p),{},{loading:!0})),t=o||y.token,e.next=5,l.setAccessToken(t).users().logout();case 5:r=e.sent,d({result:r.content,loading:!1}),r.content.error||(c&&v(),n&&n()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){vO(a,n,o,i,s,"next",e)}function s(e){vO(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,pO({},e,{formState:p,handleLogoutClick:b})))};function OO(){return OO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OO.apply(this,arguments)}function wO(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function jO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function SO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jO(Object(r),!0).forEach((function(t){EO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function EO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return CO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}gO.propTypes={UIComponent:c.a.elementType,handleSuccessLogout:c.a.func,handleErrorLogout:c.a.func,token:c.a.string,useDefualtSessionManager:c.a.bool},gO.defaultProps={useDefualtSessionManager:!0};var IO=function(e){var t=e.UIComponent,r=e.walletData,n=e.handleUpdateWalletBusiness,o=e.handleUpdateBusinessList,u=e.handleUpdatePointsWallet,c=e.isBusiness,l=PO(nr(),1)[0],f=PO(dr(),1)[0].token,p=PO(Fn(),2)[1].showToast,d=PO(Lr(),2)[1],h=PO(Object(i.useState)({loading:!1,changes:{},error:null}),2),y=h[0],v=h[1],m=function(){var e,t=(e=a.a.mark((function e(t,i){var s,h,m,b,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,d("LOADING","Loading")),v(SO(SO({},y),{},{loading:!0})),s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(i)},h=c?"".concat(l.root,"/loyalty_plans/").concat(null==r?void 0:r.loyalty_plan_id,"/businesses/").concat(t):"".concat(l.root,"/loyalty_plans/").concat(null==r?void 0:r.id),e.next=7,fetch(h,s);case 7:return m=e.sent,e.next=10,m.json();case 10:b=e.sent,g=b.error,O=b.result,g?v(SO(SO({},y),{},{loading:!1,error:O})):(p(Dn.Success,d("POINTS_WALLET_UPDATED","Points wallet updated")),v(SO(SO({},y),{},{loading:!1,error:null,changes:{}})),n&&n(O),o&&o(O),!c&&u&&u(O)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),v(SO(SO({},y),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){wO(a,n,o,i,s,"next",e)}function s(e){wO(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,OO({},e,{formState:y,setFormState:v,handleSubmit:function(){0!==Object.keys(null==y?void 0:y.changes).length&&m(null==r?void 0:r.business_id,null==y?void 0:y.changes)},handleChangeInput:function(e){var t=e.target.value||null;v(SO(SO({},y),{},{changes:SO(SO({},y.changes),{},EO({},e.target.name,t))}))}})))};function xO(){return xO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xO.apply(this,arguments)}function AO(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function TO(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){AO(a,n,o,i,s,"next",e)}function s(e){AO(a,n,o,i,s,"throw",e)}i(void 0)}))}}function _O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_O(Object(r),!0).forEach((function(t){DO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function DO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}IO.propTypes={UIComponent:c.a.elementType,walletData:c.a.object,handleUpdateWalletBusiness:c.a.func,handleUpdateBusinessList:c.a.func,handleUpdatePointsWallet:c.a.func,isBusiness:c.a.bool,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},IO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var FO=function(e){var t=e.UIComponent,r=e.pointWallet,n=e.propsToFetch,o=e.handleUpdateWalletBusiness,u=UO(nr(),1)[0],c=UO(dr(),1)[0].token,l=UO(Fn(),2)[1].showToast,f=UO(Lr(),2)[1],p=UO(Object(i.useState)({loading:!0,error:null,businesses:[],pagination:null}),2),d=p[0],h=p[1],y=UO(Object(i.useState)({loading:!1,error:null}),2),v=y[0],m=y[1],b=function(){var e=TO(a.a.mark((function e(t,n){var i,s,p,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,f("LOADING","Loading")),m(kO(kO({},v),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(n)},e.next=6,fetch("".concat(u.root,"/loyalty_plans/").concat(null==r?void 0:r.id,"/businesses/").concat(t),i);case 6:return s=e.sent,e.next=9,s.json();case 9:p=e.sent,d=p.error,h=p.result,d?m({loading:!1,error:h}):(l(Dn.Success,f("POINTS_WALLET_UPDATED","Points wallet updated")),m({loading:!1,error:null}),o&&o(h)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m({loading:!1,error:e.t0.message});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=TO(a.a.mark((function e(){var t,o,i,s,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(kO(kO({},d),{},{loading:!0})),t=u.businesses().asDashboard().select(n),e.next=5,t.get();case 5:o=e.sent,i=o.content,s=i.error,c=i.result,l=i.pagination,s?h(kO(kO({},d),{},{loading:!1,error:c})):(p=[],(null==r||null===(f=r.businesses)||void 0===f?void 0:f.length)>0&&(p=null==r?void 0:r.businesses.map((function(e){var t=c.find((function(t){return t.id===e.business_id}));return t?kO(kO({},e),{},{business_logo:null==t?void 0:t.logo,business_name:null==t?void 0:t.name}):e}))),h(kO(kO({},d),{},{loading:!1,businesses:p,pagination:l}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(kO(kO({},d),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return g(),e.abort()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,xO({},e,{businessList:d,handleCheckBox:function(e,t,r){var n=DO({},t,r);b(e,n)},updateLoayalty:b,handleUpdateBusinessList:function(e){var t=d.businesses.map((function(t){return t.id===e.id?kO(kO({},t),e):t}));h(kO(kO({},d),{},{businesses:t}))}})))};function BO(){return BO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BO.apply(this,arguments)}function MO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function RO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MO(Object(r),!0).forEach((function(t){NO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function NO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zO(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function GO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}FO.propTypes={UIComponent:c.a.elementType,pointWallet:c.a.object,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},FO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","header","logo","name","schedule","open","delivery_price","distance","delivery_time","pickup_time","reviews","featured","offers","food","laundry","alcohol","groceries","slug"]};var YO=function(e){var t,r=e.searchByAddress,n=e.handlerFindBusiness,o=e.UIComponent,u=GO(nr(),1)[0],c=GO(vn(),1)[0],l=GO(Object(i.useState)({countries:[],cities:[],citiesOptions:[]}),2),f=l[0],p=l[1],d=GO(Object(i.useState)({cityId:null,dropdownOptionId:null,orderType:(null===(t=c.options)||void 0===t?void 0:t.type)||1}),2),h=d[0],y=d[1],v=GO(Object(i.useState)(!1),2),m=v[0],b=v[1],g=function(){var e,t=(e=a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.countries().get();case 3:r=e.sent,n=r.response,p(RO(RO({},f),{},{countries:null==n||null===(t=n.data)||void 0===t?void 0:t.result})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){zO(a,n,o,i,s,"next",e)}function s(e){zO(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){r||g()}),[]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,BO({},e,{orderState:c,allListValues:f,currentValues:h,isFormErrors:m,handleChangeValue:function(e){var t=e.name,r=e.value;switch(t){case"country":var n=null==f?void 0:f.countries.find((function(e){return Number(e.id)===Number(r)})),o=null==n?void 0:n.cities.filter((function(e){return e.options.length}));p(RO(RO({},f),{},{cities:o})),y(RO(RO({},h),{},{cityId:null}));break;case"cityId":var a=f.cities.find((function(e){return Number(e.id)===Number(r)}));p(RO(RO({},f),{},{citiesOptions:null==a?void 0:a.options})),y(RO(RO({},h),{},{cityId:r,dropdownOptionId:null}));break;case"dropdownOptionId":y(RO(RO({},h),{},{dropdownOptionId:r}))}},handleFindBusiness:function(){var e=!(f.citiesOptions.length>0)||!!h.dropdownOptionId,t=h.cityId&&e;t&&n(h),b(!t)}})))};function $O(){return $O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$O.apply(this,arguments)}function JO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function VO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JO(Object(r),!0).forEach((function(t){HO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function HO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return KO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}YO.propTypes={UIComponent:c.a.elementType,searchByAddress:c.a.bool,handlerFindBusiness:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},YO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var XO=function(e){var t,r=e.maxPreoderDays,n=e.UIComponent,o=WO(Object(i.useState)(null),2),a=o[0],u=o[1],c=WO(Object(i.useState)(null),2),l=c[0],f=c[1],p=WO(Object(i.useState)(null),2),d=p[0],h=p[1],y=WO(Object(i.useState)(null),2),v=y[0],m=y[1],b=WO(Object(i.useState)([]),2)[1],g=(null==l||null===(t=l.schedule)||void 0===t?void 0:t.map((function(e,t){return!e.enabled&&t})))||[],O=function(){var e=r,t=Gr()().toDate(),n=[],o=g.every((function(e){return!1===e}));if(g.length&&!o)for(;e>0;){var a=t,i=Gr()(t).day();!1===g[i]&&(n.push(Gr()(a).toDate()),e--),t=Gr()(Gr()(t).add(1,"d")).toDate()}if(g.length&&o)for(var s=1;s<=r;s++)n.push(Gr()(Gr()(t).add(s,"d")).toDate());return n.unshift(Gr()().toDate()),n};return Object(i.useEffect)((function(){O()}),[g]),Object(i.useEffect)((function(){!function(){for(var e=[],t=Gr()().format("YYYY-MM-DD"),r=Gr()().day(30).format("YYYY-MM-DD"),n=Gr()(r,"YYYY-MM-DD HH:mm").diff(Gr()(t,"YYYY-MM-DD HH:mm"),"days"),o=0;o<=n;o++)e.push({key:"".concat(o),date:Gr()(t).add(o,"d").format("YYYY-MM-DD")});b(e)}()}),[]),s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,$O({},e,{futureDaysToShow:O,menuLapsesList:function(){for(var e=[],t=(null==a?void 0:a.lapses)||[],r=0;r<t.length;r++)for(var n,o,i,s,u,c,l,f,p="".concat(null===(n=t[r])||void 0===n||null===(o=n.open)||void 0===o?void 0:o.hour,":").concat(null===(i=t[r])||void 0===i||null===(s=i.open)||void 0===s?void 0:s.minute),d="".concat(null===(u=t[r])||void 0===u||null===(c=u.close)||void 0===c?void 0:c.hour,":").concat(null===(l=t[r])||void 0===l||null===(f=l.close)||void 0===f?void 0:f.minute),h=Gr()(d,"HH:mm").diff(Gr()(p,"HH:mm"),"hour",!0);h>0;){var y=p;e.push(Gr()(y,"HH:mm").toDate()),p=Gr()(y,"HH:mm").add(15,"minutes"),h-=.25}return e},disableDays:g,startDate:v,isDisabledDay:function(e){var t=Gr()(e,"YYYY-MM-DD").day();return g.every((function(e){return e!==t}))},scheduleSelected:a,menuSelected:null==l?void 0:l.id,handleMenuSelected:function(e){return u(function(e){var t;f(e);var r=Gr()().day();return{lapses:null==e||null===(t=e.schedule[r])||void 0===t?void 0:t.lapses,menuId:e.id}}(e))},handleDate:function(t){var r,n=Gr()(t,"YYYY-MM-DD").day(),o=null==l||null===(r=l.schedule[n])||void 0===r?void 0:r.lapses;u(VO(VO({},a),{},{lapses:o})),m(t),h(Gr()(t).format("YYYY-MM-DD HH:mm")),e.handlerSelectDate(Gr()(t).format("YYYY-MM-DD HH:mm"))},onSendMenuInfo:function(){(null==a?void 0:a.menuId)&&d&&e.handleMenuInfo({menuId:null==a?void 0:a.menuId,date:new Date(d)})},dateSelected:d})))};function ZO(){return ZO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZO.apply(this,arguments)}function QO(e){return function(e){if(Array.isArray(e))return sw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||iw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ew(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ew(Object(r),!0).forEach((function(t){rw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ew(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nw(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ow(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){nw(a,n,o,i,s,"next",e)}function s(e){nw(a,n,o,i,s,"throw",e)}i(void 0)}))}}function aw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||iw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iw(e,t){if(e){if("string"==typeof e)return sw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sw(e,t):void 0}}function sw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}XO.propTypes={UIComponent:c.a.elementType,maxPreoderDays:c.a.number,business:c.a.object,handleMenuInfo:c.a.func,handlerSelectDate:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},XO.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var uw=function(e){var t=e.UIComponent,r=e.orderId,n=e.customHandleSend,o=e.messages,u=e.setMessages,c=e.asDashboard,l=e.order,f=e.handleUpdateOrderForUnreadCount,p=aw(nr(),1)[0],d=aw(dr(),1)[0],h=d.user,y=d.token,v=e.accessToken||y,m=aw(Object(i.useState)({business:!0,administrator:!0,driver:!0,customer:!0}),2),b=m[0],g=m[1],O=aw(Object(i.useState)(""),2),w=O[0],j=O[1],S=aw(Object(i.useState)({loading:!0,error:null,messages:[]}),2),E=S[0],P=S[1],C=aw(Object(i.useState)({loading:!1,error:null}),2),I=C[0],x=C[1],A=aw(Object(i.useState)({loading:!0,error:null,messages:[]}),2),T=A[0],_=A[1],k=aw(Object(i.useState)(null),2),D=k[0],U=k[1],L=Pr(),F=function(){var e=ow(a.a.mark((function e(){var t,i,s,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return",n(w));case 2:return e.prev=2,x({loading:!0,error:null}),t=[],b.customer&&t.push(3),b.administrator&&t.push(0),b.business&&t.push(2),b.driver&&t.push(4),i={comment:w,type:2,can_see:t.join(",")},D&&(i.type=3,i.file=D),e.next=13,fetch("".concat(p.root,"/orders/").concat(r,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)},body:JSON.stringify(i)});case 13:return s=e.sent,e.next=16,s.json();case 16:c=e.sent,l=c.error,f=c.result,l||(u&&o?u(tw(tw({},o),{},{messages:[].concat(QO(o.messages),[f])})):P(tw(tw({},E),{},{messages:[].concat(QO(E.messages),[f])}))),x({loading:!1,error:l?f:null}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),x({loading:!1,error:[e.t0.Messages]});case 26:case"end":return e.stop()}}),e,null,[[2,23]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=ow(a.a.mark((function e(){var t,n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(tw(tw({},E),{},{loading:!0})),t=c?"".concat(p.root,"/orders/").concat(r,"/messages?mode=dashboard"):"".concat(p.root,"/orders/").concat(r,"/messages"),e.next=5,fetch(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}});case 5:return n=e.sent,e.next=8,n.json();case 8:o=e.sent,i=o.error,s=o.result,P(i?tw(tw({},E),{},{loading:!1,error:s}):{messages:s,loading:!1,error:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),P(tw(tw({},E),{},{loading:!1,error:[e.t0.Messages]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=ow(a.a.mark((function e(t){var n,i,s,c,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,_(tw(tw({},T),{},{loading:!0})),n="".concat(p.root,"/orders/").concat(r,"/messages/").concat(t,"/read?order_id=").concat(r,"&order_message_id=").concat(t),e.next=7,fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}});case 7:return i=e.sent,e.next=10,i.json();case 10:s=e.sent,c=s.error,l=s.result,c?_(tw(tw({},T),{},{loading:!1,error:l})):(_({messages:l,loading:!1,error:null}),E.messages.length>0&&(d=E.messages.filter((function(e){return e.id===t&&(e.read=!0),!0})),P(tw(tw({},E),{},{messages:d}))),f&&f(null),f&&f(r)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),_(tw(tw({},T),{},{loading:!1,error:[e.t0.Messages]}));case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&u||B()}),[r]),Object(i.useEffect)((function(){if(!(E.loading||o&&u)){var e=function(e){e.order.id===r&&(E.messages.find((function(t){return t.id===e.id}))||P(tw(tw({},E),{},{messages:[].concat(QO(E.messages),[e])})))};return L.on("message",e),function(){L.off("message",e)}}}),[E,L,null==l?void 0:l.status]),Object(i.useEffect)((function(){return c?L.join("messages_orders_".concat(r,"_").concat(null==h?void 0:h.level)):L.join("messages_orders_".concat(null==h?void 0:h.id)),function(){c?L.leave("messages_orders_".concat(r,"_").concat(null==h?void 0:h.level)):L.leave("messages_orders_".concat(null==h?void 0:h.id))}}),[L,r]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,ZO({},e,{messages:E,image:D,canRead:b,handleSend:F,message:w,handleReadMessages:M,setMessage:j,setCanRead:g,sendMessage:I,setImage:U})))};function cw(){return cw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cw.apply(this,arguments)}function lw(e){return function(e){if(Array.isArray(e))return bw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fw(Object(r),!0).forEach((function(t){dw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function dw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hw(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function yw(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){hw(a,n,o,i,s,"next",e)}function s(e){hw(a,n,o,i,s,"throw",e)}i(void 0)}))}}function vw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||mw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mw(e,t){if(e){if("string"==typeof e)return bw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bw(e,t):void 0}}function bw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}uw.propTypes={UIComponent:c.a.elementType,handleClickSetDefault:c.a.func,customHandleSend:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},uw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gw=function(e){var t=e.orderId,r=e.UIComponent,n=vw(nr(),1)[0],o=vw(dr(),1)[0],u=vw(Object(i.useState)({metaFields:[],loading:!0,error:null}),2),c=u[0],l=u[1],f=vw(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],h=function(){var e=yw(a.a.mark((function e(){var r,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(pw(pw({},c),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(n.root,"/orders/").concat(t,"/metafields"),r);case 5:return i=e.sent,e.next=8,i.json();case 8:s=e.sent,u=s.result,l(pw(pw({},c),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l(pw(pw({},c),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=yw(a.a.mark((function e(r){var i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(pw(pw({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(n.root,"/orders/").concat(t,"/metafields/").concat(r),i);case 5:e.sent.ok&&(s=c.metaFields.filter((function(e){return e.id!==r})),l(pw(pw({},c),{},{metaFields:s})),d({loading:!1,result:{error:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=yw(a.a.mark((function e(r){var i,s,u,f,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(pw(pw({},p),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)},body:JSON.stringify(r)},e.next=5,fetch("".concat(n.root,"/orders/").concat(t,"/metafields"),i);case 5:return s=e.sent,e.next=8,s.json();case 8:u=e.sent,f=u.error,h=u.result,f?d({loading:!1,result:{error:!0,result:h}}):([],y=[].concat(lw(c.metaFields),[h]),l(pw(pw({},c),{},{metaFields:y})),d({loading:!1,result:{error:!1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h()}),[]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,cw({},e,{metaFieldsList:c,actionState:p,handleDeleteMetaField:y,handeAddMetaField:v})))};gw.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ow=r(35),ww=r.n(Ow);function jw(){return jw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jw.apply(this,arguments)}function Sw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ew(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ew(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ew(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Gr.a.extend(ww.a),Gr.a.extend(Yr.a);var Pw=function(e){var t,r,n=e.minDate,o=e.maxDate,a=e.currentDate,u=e.useOrderContext,c=e.onChangeMoment,l=e.UIComponent,f=Sw(vn(),2),p=f[0],d=f[1].changeMoment,h=function(e){if(e)return Gr()(e,"YYYY-MM-DD HH:mm").isSameOrAfter(Gr()(),"day")?Gr()(e).format("YYYY-MM-DD HH:mm"):Gr()().format("YYYY-MM-DD HH:mm")},y=u?null===(t=p.options)||void 0===t?void 0:t.moment:a,v=Sw(Object(i.useState)(y?Gr()(h(y)).format("YYYY-MM-DD HH:mm"):null),2),m=v[0],b=v[1],g=Sw(Object(i.useState)(!m),2),O=g[0],w=g[1],j=Sw(Object(i.useState)([]),2),S=j[0],E=j[1],P=Sw(Object(i.useState)([]),2),C=P[0],I=P[1],x=Sw(Object(i.useState)(Gr()(h(y)).format("YYYY-MM-DD")),2),A=x[0],T=x[1],_=Sw(Object(i.useState)(null),2),k=_[0],D=_[1],U=function(){O||(w(!0),u&&d(null),c&&c(null))};Object(i.useEffect)((function(){var e;if(u)if(null!==(e=p.options)&&void 0!==e&&e.moment){var t,r=Gr.a.utc(h(null===(t=p.options)||void 0===t?void 0:t.moment)).local();b(r.format("YYYY-MM-DD HH:mm")),T(r.format("YYYY-MM-DD")),D(r.format("HH:mm")),O&&w(!1)}else A!==Gr()().format("YYYY-MM-DD")&&T(Gr()().format("YYYY-MM-DD")),null!==k&&D(null),null!==m&&b(null),!O&&w(!0);else null!==m&&b(null),!O&&w(!0)}),[null===(r=p.options)||void 0===r?void 0:r.moment]),Object(i.useEffect)((function(){if(m){var e=Gr()(m,"YYYY-MM-DD HH:mm"),t=Gr()(),r=e.diff(t,"seconds");if(!(r<=0)){var n=setTimeout((function(){U()}),1e3*r);return function(){clearTimeout(n)}}U()}}),[m]),Object(i.useEffect)((function(){O&&C[0]&&(T(C[0]),D(null))}),[O,C]);var L=function(){for(var e=[],t=A===Gr()().format("YYYY-MM-DD"),r=A===Gr()(o).format("YYYY-MM-DD"),n=new Date,a=0;a<24;a++)if(!(t&&a<(null==n?void 0:n.getHours())||r&&a>(null==o?void 0:o.getHours())))for(var i=0;i<59;i+=15)if(!(t&&a===(null==n?void 0:n.getHours())&&i<=n.getMinutes()||r&&a===(null==o?void 0:o.getHours())&&i>o.getMinutes())){var s=a<10?"0".concat(a):a,u=i<10?"0".concat(i):i,c=i+14<10?"0".concat(i+14):i+14,l="".concat(s,":").concat(u),f="".concat(s,":").concat(c);e.push({startTime:l,endTime:f})}E(e)},F=function(){for(var e,t,r,a=[],i=parseInt((e=h(o),r=null!=t?t:Gr()(),Gr()(e).diff(Gr()(r),"day")),h(n)),s=0;s<i+1;s++)a.push(Gr()(h(n)).add(s,"d").format("YYYY-MM-DD"));I(a)};return Object(i.useEffect)((function(){A&&L()}),[A]),Object(i.useEffect)((function(){var e=setInterval((function(){0===Gr()(A).diff(Gr()(a),"day")&&L()}),1e3);return function(){return clearInterval(e)}}),[A]),Object(i.useEffect)((function(){F()}),[o,n]),s.a.createElement(s.a.Fragment,null,l&&s.a.createElement(l,jw({},e,{isAsap:O,minDate:h(n),maxDate:h(o),dateSelected:A,timeSelected:k,handleChangeDate:function(e){e&&e!==A&&(T(e),D(null),w(!1))},handleChangeTime:function(e){if(e&&e!==k){var t=Gr()("".concat(A," ").concat(e),"YYYY-MM-DD HH:mm").toDate();D(e),w(!1),u&&d(t),c&&c(t)}},datesList:C,hoursList:S,handleAsap:U})))};function Cw(){return Cw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cw.apply(this,arguments)}function Iw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Iw(Object(r),!0).forEach((function(t){Aw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Aw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tw(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function _w(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Tw(a,n,o,i,s,"next",e)}function s(e){Tw(a,n,o,i,s,"throw",e)}i(void 0)}))}}function kw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Pw.propTypes={UIComponent:c.a.elementType,minDate:c.a.instanceOf(Date),maxDate:c.a.instanceOf(Date).isRequired,currentDate:c.a.instanceOf(Date),useOrderContext:c.a.bool,onChangeMoment:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Pw.defaultProps={useOrderContext:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Uw=function(e){var t=e.UIComponent,r=kw(nr(),1)[0],n={},o=kw(dr(),1)[0].token,u=kw(Object(i.useState)({loading:!0,orders:[],error:null}),2),c=u[0],l=u[1],f=kw(Object(i.useState)({loading:!0,orders:[],error:null}),2),p=f[0],d=f[1],h=function(){var e=_w(a.a.mark((function e(){var t,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},n.activeOrders=t,e.next=5,r.setAccessToken(o).orders().where([{attribute:"status",value:[0,3,4,7,8,9]}]).get({cancelToken:t});case 5:i=e.sent,s=i.content.result,l(xw(xw({},c),{},{loading:!1,orders:s})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),l(xw(xw({},c),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=_w(a.a.mark((function e(){var t,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},n.previousOrders=t,e.next=5,r.setAccessToken(o).orders().where([{attribute:"status",value:[1,2,5,6,10,11,12]}]).get({cancelToken:t});case 5:i=e.sent,s=i.content.result,d(xw(xw({},p),{},{loading:!1,orders:s})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),d(xw(xw({},p),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return y(),h(),function(){n.previousOrders&&n.previousOrders.cancel(),n.activeOrders&&n.activeOrders.cancel()}}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Cw({},e,{activeOrders:c,previousOrders:p})))};function Lw(){return Lw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lw.apply(this,arguments)}function Fw(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Bw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Uw.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Uw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Rw=function(e){var t=e.status,r=e.UIComponent,n=Bw(nr(),1)[0],o=Bw(dr(),1)[0].token,u=Bw(Object(i.useState)([]),2),c=u[0],l=u[1],f={},p=function(){var e,r=(e=a.a.mark((function e(){var r,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={},f.orders=r,e.next=5,n.setAccessToken(o).orders().where([{attribute:"status",value:t}]).get({cancelToken:r});case 5:i=e.sent,s=i.content.result,l(s),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Fw(a,n,o,i,s,"next",e)}function s(e){Fw(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(i.useEffect)((function(){return p(),function(){f.orders&&f.orders.cancel()}}),[]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,Lw({},e,{orders:c})))};function Nw(){return Nw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nw.apply(this,arguments)}function zw(e){return function(e){if(Array.isArray(e))return Ww(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Hw(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gw(Object(r),!0).forEach((function(t){Yw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $w(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Jw(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){$w(a,n,o,i,s,"next",e)}function s(e){$w(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Vw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Hw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hw(e,t){if(e){if("string"==typeof e)return Ww(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ww(e,t):void 0}}function Ww(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Rw.propTypes={UIComponent:c.a.elementType,orderType:c.a.oneOf(["active","previous"]).isRequired,status:c.a.arrayOf(c.a.number).isRequired,orders:c.a.arrayOf(c.a.object),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Rw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Kw=function(e){var t,r=e.UIComponent,n=e.propsToFetch,o=e.orders,u=e.orderIds,c=e.deletedOrderId,l=e.orderStatus,f=e.orderBy,p=e.orderDirection,d=e.useDefualtSessionManager,h=e.paginationSettings,y=e.asDashboard,v=e.filterValues,m=e.searchValue,b=e.isSearchByOrderId,g=e.isSearchByCustomerEmail,O=e.isSearchByCustomerPhone,w=e.orderIdForUnreadCountUpdate,j=Vw(nr(),1)[0],S=Vw(Object(i.useState)({loading:!o,error:null,orders:[]}),2),E=S[0],P=S[1],C=Vw(Object(i.useState)({currentPage:"pages"===h.controlType&&h.initialPage&&h.initialPage>=1?h.initialPage-1:0,pageSize:null!==(t=h.pageSize)&&void 0!==t?t:10}),2),I=C[0],x=C[1],A=Vw(dr(),1)[0],T=Pr(),_=d?A.token:e.accessToken,k={},D=Vw(Object(i.useState)({loading:!1,error:null}),2),U=D[0],L=D[1],F=Vw(Object(i.useState)(null),2),B=F[0],M=F[1],R=function(e,t){if("id"===e){if("desc"===p)return t.sort((function(e,t){return t.id-e.id}));if("asc"===p)return t.sort((function(e,t){return e.id-t.id}))}return"last_direct_message_at"===e?t.sort((function(e,t){return new Date(t.last_direct_message_at)-new Date(e.last_direct_message_at)})):t},N=function(){var e=Jw(a.a.mark((function e(t){var r,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(qw(qw({},U),{},{loading:!0})),r={},k.updateOrders=r,e.next=6,j.setAccessToken(_).orders(t.id).save({status:t.newStatus},{cancelToken:r});case 6:n=e.sent,o=n.content,L({loading:!1,error:o.error?o.result:null}),o.error||(i=E.orders.filter((function(e){return e.id!==t.id})),P(qw(qw({},E),{},{orders:i}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),L({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Jw(a.a.mark((function e(t){var r,o,i,s,c,d,w,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,o=[],i=[],r=y?{query:{orderBy:("desc"===p?"-":"")+f}}:{query:{orderBy:("desc"===p?"-":"")+f,page:t,page_size:h.pageSize}},u&&i.push({attribute:"id",value:u}),0===Object.keys(v).length?l&&i.push({attribute:"status",value:l}):v.statuses.length>0?(s=v.statuses.every((function(e){return-1!==l.indexOf(e)})),c=l.every((function(e){return-1!==v.statuses.indexOf(e)})),s&&i.push({attribute:"status",value:v.statuses}),c&&l&&i.push({attribute:"status",value:l})):l&&i.push({attribute:"status",value:l}),m&&(d=[],b&&d.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}),g&&d.push({attribute:"customer",conditions:[{attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}]}),O&&d.push({attribute:"customer",conditions:[{attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(m,"%"))}}]}),i.push({conector:"OR",conditions:d})),Object.keys(v).length&&(w=[],null!==v.deliveryFromDatetime&&w.push({attribute:"delivery_datetime",value:{condition:">=",value:encodeURI(v.deliveryFromDatetime)}}),null!==v.deliveryEndDatetime&&w.push({attribute:"delivery_datetime",value:{condition:"<=",value:v.deliveryEndDatetime}}),0!==v.businessIds.length&&w.push({attribute:"business_id",value:v.businessIds}),0!==v.driverIds.length&&w.push({attribute:"driver_id",value:v.driverIds}),0!==v.deliveryTypes.length&&w.push({attribute:"delivery_type",value:v.deliveryTypes}),0!==v.paymethodIds.length&&w.push({attribute:"paymethod_id",value:v.paymethodIds}),w.length&&i.push({conector:"AND",conditions:w})),i.length&&(o={conditions:i,conector:"AND"}),S={},k.orders=S,r.cancelToken=S,E=n?y?j.setAccessToken(_).orders().asDashboard().select(n).where(o):j.setAccessToken(_).orders().select(n).where(o):y?j.setAccessToken(_).orders().asDashboard().where(o):j.setAccessToken(_).orders().where(o),e.next=15,E.get(r);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){var t=!0;return void 0!==v.businessIds&&v.businessIds.length>0&&(v.businessIds.includes(e.business_id)||(t=!1)),void 0!==v.driverIds&&v.driverIds.length>0&&(v.driverIds.includes(e.driver_id)||(t=!1)),void 0!==v.deliveryTypes&&v.deliveryTypes.length>0&&(v.deliveryTypes.includes(e.delivery_type)||(t=!1)),void 0!==v.paymethodIds&&v.paymethodIds.length>0&&(v.paymethodIds.includes(e.paymethod_id)||(t=!1)),void 0!==v.statuses&&v.statuses.length>0&&(v.statuses.includes(parseInt(e.status))||(t=!1)),t},q=function(){var e=Jw(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,P(qw(qw({},E),{},{loading:!0})),e.next=6,z(I.currentPage+1);case 6:t=e.sent,P({loading:!1,orders:t.content.error?[]:t.content.result,error:t.content.error?t.content.result:null}),t.content.error||x({currentPage:t.content.pagination.current_page,pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),"Cancel"!==e.t0.constructor.name&&P(qw(qw({},E),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){if(null!==w&&0!==E.orders.length){var e=E.orders.filter((function(e){return e.id===w&&(e.unread_count=0,e.unread_general_count=0,e.unread_direct_count=0),!0}));P(qw(qw({},E),{},{orders:e}))}}),[w]),Object(i.useEffect)((function(){if(!E.loading){var e=R(f,E.orders);P(qw(qw({},E),{},{orders:e}))}}),[f,E.orders]),Object(i.useEffect)((function(){if(null!==c){var e=E.orders.filter((function(e){return e.id!==c}));P(qw(qw({},E),{},{orders:e}))}}),[c]),Object(i.useEffect)((function(){null!==m&&q()}),[m]),Object(i.useEffect)((function(){if(o)P(qw(qw({},E),{},{orders:o}));else{var e=!1,t=!1;if(Object.keys(v).length>0&&(e=v.statuses.every((function(e){return-1!==l.indexOf(e)})),t=l.every((function(e){return-1!==v.statuses.indexOf(e)})),!e&&!t))return void P({loading:!1,orders:[],error:null});q()}return function(){k.orders&&k.orders.cancel()}}),[A,v,o]),Object(i.useEffect)((function(){if(!E.loading){var e=function(e){var t=[];if(E.orders.find((function(t){return t.id===e.id}))){t=E.orders.filter((function(t){var r=!0;return t.id===e.id&&(delete e.total,delete e.subtotal,Object.assign(t,e),(r=(0===l.length||l.includes(parseInt(t.status)))&&G(e))||(I.total--,x(qw({},I)))),r}));var r=R(f,t);P(qw(qw({},E),{},{orders:r}))}else{if(G(e))if(l.includes(parseInt(e.status))){t=[].concat(zw(E.orders),[e]);var n=R(f,t);I.total++,x(qw({},I)),P(qw(qw({},E),{},{orders:n}))}}},t=function(e){M(e.id);var t=qw(qw({},e),{},{status:0}),r=[];if(l.includes(0)&&G(e)){r=[t].concat(zw(E.orders));var n=R(f,r);I.total++,x(qw({},I)),P(qw(qw({},E),{},{orders:n}))}},r=function(e){if(0!==E.orders.length&&E.orders.find((function(t){return t.id===e.order.id}))){var t=E.orders.filter((function(t){return t.id===e.order.id&&t.last_message_at!==e.created_at&&(1===e.type?(t.last_general_message_at=e.created_at,0!==e.author.level&&(t.unread_general_count=t.unread_general_count+1)):(t.last_direct_message_at=e.created_at,0!==e.author.level&&(t.unread_direct_count=t.unread_direct_count+1)),t.last_message_at=e.created_at,0!==e.author.level&&(t.unread_count=t.unread_count+1)),!0})),r=R(f,t);P(qw(qw({},E),{},{orders:r}))}};return T.on("update_order",e),T.on("orders_register",t),T.on("message",r),function(){T.off("update_order",e),T.off("orders_register",t),T.off("message",r)}}}),[E.orders,I,f,T]),Object(i.useEffect)((function(){if(A.user){var e;if(y)T.join("messages_orders"),T.join("orders");else T.join("orders_".concat(null==A||null===(e=A.user)||void 0===e?void 0:e.id));return function(){var e;y?(T.leave("messages_orders"),T.leave("orders")):T.leave("orders_".concat(null==A||null===(e=A.user)||void 0===e?void 0:e.id))}}}),[T,A]);var Y=function(){var e=Jw(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(qw(qw({},E),{},{loading:!0})),e.prev=1,e.next=4,z(I.currentPage+1);case 4:t=e.sent,P({loading:!1,orders:t.content.error?E.orders:E.orders.concat(t.content.result),error:t.content.error?t.content.result:null}),t.content.error||x({currentPage:t.content.pagination.current_page,pageSize:t.content.pagination.page_size,totalPages:t.content.pagination.total_pages,total:t.content.pagination.total,from:t.content.pagination.from,to:t.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&P(qw(qw({},E),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Jw(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(qw(qw({},E),{},{loading:!0})),e.prev=1,e.next=4,z(t);case 4:r=e.sent,P({loading:!1,orders:r.content.error?[]:r.content.result,error:r.content.error?r.content.result:null}),r.content.error||x({currentPage:r.content.pagination.current_page,pageSize:r.content.pagination.page_size,totalPages:r.content.pagination.total_pages,total:r.content.pagination.total,from:r.content.pagination.from,to:r.content.pagination.to}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&P(qw(qw({},E),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,Nw({},e,{orderList:E,pagination:I,registerOrderId:B,loadMoreOrders:Y,goToPage:$,handleUpdateOrderStatus:N,handleResetNotification:function(){M(null)}})))};function Xw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Kw.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),onOrderClick:c.a.func,useDefualtSessionManager:c.a.bool,orders:c.a.arrayOf(u.object),orderIds:c.a.arrayOf(u.number),orderIdForUnreadCountUpdate:c.a.number,orderStatus:c.a.arrayOf(u.number),orderBy:c.a.string,orderDirection:c.a.oneOf(["asc","desc"]),paginationSettings:c.a.exact({initialPage:c.a.number,pageSize:c.a.number,controlType:c.a.oneOf(["infinity","pages"])}),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Kw.defaultProps={orderBy:"id",orderDirection:"desc",paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Qw=function(e){var t=e.UIComponent,r=Pr(),n=Xw(dr(),1)[0],o=n.user,a=n.loading,u=Xw(Nr(),1)[0];return Object(i.useEffect)((function(){if(o){var e=function(e){u.emit("order_added",e)};return 0===o.level?r.join("orders"):r.join("orders_".concat(null==o?void 0:o.id)),r.on("orders_register",e),function(){r.off("orders_register",e)}}}),[r,a,o]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,e))};function ej(){return ej=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ej.apply(this,arguments)}function tj(e){return function(e){if(Array.isArray(e))return sj(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ij(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rj(Object(r),!0).forEach((function(t){oj(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||ij(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ij(e,t){if(e){if("string"==typeof e)return sj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sj(e,t):void 0}}function sj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Qw.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Qw.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var uj=function(e){var t=e.UIComponent,r=e.driverGroupList,n=aj(Object(i.useState)({orderId:null,groupTypes:[],dateType:null,deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],driverIds:[],driverGroupIds:[],cityIds:[],statuses:[],deliveryTypes:[],paymethodIds:[]}),2),o=n[0],a=n[1];return Object(i.useEffect)((function(){var e=[];if(o.groupTypes.length>0){var t,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ij(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(o.groupTypes);try{var i=function(){var n=t.value,o=r.groups.find((function(e){return e.id===n}));o&&(e=[].concat(tj(e),tj(null==o?void 0:o.drivers)))};for(n.s();!(t=n.n()).done;)i()}catch(e){n.e(e)}finally{n.f()}}var s=e.filter((function(e,t,r){return r.indexOf(e)===t}));a(nj(nj({},o),{},{driverGroupIds:s}))}),[o.groupTypes]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,ej({},e,{filterValues:o,handleChangeOrderId:function(e){var t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1");a(nj(nj({},o),{},{orderId:t}))},handleChangeGroup:function(e){var t=tj(o.groupTypes);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(nj(nj({},o),{},{groupTypes:t}))},handleChangeDateType:function(e){var t=Gr()();switch(e){case"default":a(nj(nj({},o),{},{dateType:"default",deliveryFromDatetime:null,deliveryEndDatetime:null}));break;case"today":var r=t.format("YYYY-MM-DD"),n=Gr()(r).format("YYYY-MM-DD HH:mm:ss");a(nj(nj({},o),{},{dateType:"today",deliveryFromDatetime:n}));break;case"yesterday":var i=t.subtract("1","day").format("YYYY-MM-DD"),s=Gr()(i).format("YYYY-MM-DD HH:mm:ss");a(nj(nj({},o),{},{dateType:"yesterday",deliveryFromDatetime:s}));break;case"last7":var u=t.subtract("7","day").format("YYYY-MM-DD"),c=Gr()(u).format("YYYY-MM-DD HH:mm:ss");a(nj(nj({},o),{},{dateType:"last7",deliveryFromDatetime:c}));break;case"last30":var l=t.subtract("30","day").format("YYYY-MM-DD"),f=Gr()(l).format("YYYY-MM-DD HH:mm:ss");a(nj(nj({},o),{},{dateType:"last30",deliveryFromDatetime:f}));break;case"term":a(nj(nj({},o),{},{dateType:"term",deliveryFromDatetime:null,deliveryEndDatetime:null}))}},handleChangeFromDate:function(e){var t;t=null!==e?Gr()(e).format("YYYY-MM-DD HH:mm:ss"):null,a(nj(nj({},o),{},{deliveryFromDatetime:t}))},handleChangeEndDate:function(e){var t;null!==e?t=Gr()(e).format("YYYY-MM-DD HH:mm:ss"):e=null,a(nj(nj({},o),{},{deliveryEndDatetime:t}))},handleChangeBusinesses:function(e){var t=tj(o.businessIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(nj(nj({},o),{},{businessIds:t}))},handleChangeDriver:function(e){var t=tj(o.driverIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(nj(nj({},o),{},{driverIds:t}))},handleChangeCity:function(e){var t=tj(o.cityIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(nj(nj({},o),{},{cityIds:t}))},handleChangeOrderStatus:function(e){var t=tj(o.statuses);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(nj(nj({},o),{},{statuses:t}))},handleChangeDeliveryType:function(e){var t=tj(o.deliveryTypes);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(nj(nj({},o),{},{deliveryTypes:t}))},handleChangePaymethodType:function(e){var t=tj(o.paymethodIds);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),a(nj(nj({},o),{},{paymethodIds:t}))},handleResetFilterValues:function(){a({orderId:null,groupTypes:[],deliveryFromDatetime:null,deliveryEndDatetime:null,businessIds:[],driverIds:[],cityIds:[],statuses:[],deliveryTypes:[],paymethodIds:[]})}})))};function cj(){return cj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cj.apply(this,arguments)}function lj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lj(Object(r),!0).forEach((function(t){pj(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dj(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function hj(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){dj(a,n,o,i,s,"next",e)}function s(e){dj(a,n,o,i,s,"throw",e)}i(void 0)}))}}function yj(e){return function(e){if(Array.isArray(e))return bj(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mj(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||mj(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mj(e,t){if(e){if("string"==typeof e)return bj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bj(e,t):void 0}}function bj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}uj.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},uj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gj=function(e){var t=e.UIComponent,r=e.statusGroup,n=e.driversPropsToFetch,o=vj(nr(),1)[0],u=Pr(),c=vj(dr(),1)[0],l=c.user,f=c.token,p=c.loading,d={},h=vj(Object(i.useState)(null),2),y=h[0],v=h[1],m=vj(Object(i.useState)(r||"pending"),2),b=m[0],g=m[1],O=vj(Object(i.useState)({}),2),w=O[0],j=O[1],S=vj(Object(i.useState)(null),2),E=S[0],P=S[1],C=vj(Object(i.useState)(!1),2),I=C[0],x=C[1],A=vj(Object(i.useState)(!1),2),T=A[0],_=A[1],k=vj(Object(i.useState)({loading:!1,error:null}),2),D=k[0],U=k[1],L=vj(Object(i.useState)(null),2),F=L[0],B=L[1],M=vj(Object(i.useState)({groups:[],loading:!1,error:null}),2),R=M[0],N=M[1],z=vj(Object(i.useState)({drivers:[],loading:!0,error:null}),2),G=z[0],q=z[1],Y=vj(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),$=Y[0],J=Y[1],V=vj(Object(i.useState)({businesses:[],loading:!0,error:null}),2),H=V[0],W=V[1],K=vj(Object(i.useState)([]),2),X=K[0],Z=K[1],Q=vj(Object(i.useState)([]),2),ee=Q[0],te=Q[1],re=vj(Object(i.useState)({pending:[0,13],inProgress:[7,8,4,9,3,14,18,19,20,21],completed:[1,11,15],cancelled:[2,5,6,10,12,16,17],all:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]}),2),ne=re[0],oe=re[1],ae=function(){var e=hj(a.a.mark((function e(t){var r,n,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(fj(fj({},D),{},{loading:!0})),r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({status:E})},e.next=5,fetch("".concat(o.root,"/orders/").concat(t),r);case 5:return n=e.sent,e.next=8,n.json();case 8:i=e.sent,s=i.result,parseInt(s.status)===E&&((u=yj(ee)).shift(),0===u.length&&x(!1),te(u)),U(fj(fj({},D),{},{loading:!1})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),U({loading:!1,error:[e.t0.message]}),x(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=hj(a.a.mark((function e(t){var r,n,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(fj(fj({},D),{},{loading:!0})),r={},d.deleteOrder=r,e.next=6,o.setAccessToken(f).orders(t).delete({cancelToken:r});case 6:n=e.sent,(i=n.content).error||(B(t),(s=yj(ee)).shift(),0===s.length&&_(!1),te(s)),U({loading:!1,error:i.error?i.result:null}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),U({loading:!1,error:[e.t0.message]}),_(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=hj(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},d.drivers=t,e.next=5,o.setAccessToken(f).users().select(n).where([{attribute:"level",value:[4]}]).get({cancelToken:t});case 5:r=e.sent,i=r.content.result,q(fj(fj({},G),{},{loading:!1,drivers:i})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),q(fj(fj({},G),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=hj(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(fj(fj({},D),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=5,fetch("".concat(o.root,"/controls/orders"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(n=e.sent).error?U({loading:!1,error:null==n?void 0:n.result}):(Z(n.result.cities),N(fj(fj({},R),{},{loading:!1,groups:n.result.driver_groups})),J(fj(fj({},$),{},{loading:!1,paymethods:n.result.paymethods})),W(fj(fj({},H),{},{loading:!1,businesses:n.result.businesses})),0!==(null==l?void 0:l.level)&&2!==(null==l?void 0:l.level)&&q(fj(fj({},G),{},{drivers:n.result.drivers}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),U({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(!p){var e=function(e){var t=[];t=G.drivers.find((function(t){return t.id===e.id}))?G.drivers.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})):[].concat(yj(G.drivers),[e]),q(fj(fj({},G),{},{drivers:t}))},t=function(e){var t;t=G.drivers.filter((function(t){if(t.id===e.driver_id)if("string"==typeof e.location){var r=e.location.replaceAll("\\",""),n=JSON.parse(r);t.location=n}else t.location=e.location;return!0})),q(fj(fj({},G),{},{drivers:t}))};return u.on("drivers_update",e),u.on("tracking_driver",t),function(){u.off("drivers_update",e),u.off("tracking_driver",t)}}}),[u,p,G.drivers]),Object(i.useEffect)((function(){l&&(u.join("drivers"),0===l.level?(u.join("orders"),u.join("messages_orders")):(u.join("orders_".concat(null==l?void 0:l.id)),u.join("messages_orders_".concat(null==l?void 0:l.id))))}),[u,p,l]),Object(i.useEffect)((function(){I&&0!==ee.length&&ae(ee[0])}),[ee,I]),Object(i.useEffect)((function(){T&&0!==ee.length&&ie(ee[0])}),[ee,T]),Object(i.useEffect)((function(){if(!p)return 0!==(null==l?void 0:l.level)&&2!==(null==l?void 0:l.level)||se(),ue(),function(){d.drivers&&d.drivers.cancel()}}),[l,p]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,cj({},e,{searchValue:y,driverGroupList:R,driversList:G,paymethodsList:$,businessesList:H,citiesList:X,ordersStatusGroup:b,filterValues:w,multiOrderUpdateStatus:E,selectedOrderIds:ee,deletedOrderId:F,startMulitOrderStatusChange:I,startMulitOrderDelete:T,selectedSubOrderStatus:ne,handleSelectedSubOrderStatus:oe,handleSelectedOrderIds:function(e){var t=yj(ee);t.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),te(t)},handleRemoveSelectedOrderId:function(e){var t=yj(ee);t=t.filter((function(t){return t!==e})),te(t)},handleChangeSearch:function(e){v(e)},handleChangeFilterValues:function(e){j(e)},handleOrdersStatusGroupFilter:function(e){e!==b&&(g(e),te([]))},handleChangeMultiOrdersStatus:function(e){P(e),x(!0)},handleDeleteMultiOrders:function(){_(!0)},setSelectedOrderIds:te})))};function Oj(){return Oj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oj.apply(this,arguments)}function wj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wj(Object(r),!0).forEach((function(t){Sj(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ej(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Pj(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ij(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function Cj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Ij(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ij(e,t){if(e){if("string"==typeof e)return xj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xj(e,t):void 0}}function xj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}gj.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gj.defaultProps={driversPropsToFetch:["id","name","lastname","assigned_orders_count","available","phone","cellphone","location","photo","qualification","last_order_assigned_at"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Aj=function(e){var t=e.UIComponent,r=Cj(nr(),1)[0],n={},o=Pr(),u=Cj(dr(),1)[0],c=u.token,l=u.loading,f=Cj(Object(i.useState)({loading:!0,overview:{},error:null}),2),p=f[0],d=f[1],h=function(e){var t,r=0,n=0,o=0,a=0,i=0,s=Pj(e);try{for(s.s();!(t=s.n()).done;){var u=t.value;r+=u.quantity,0===u.status&&(n+=u.quantity),3!==u.status&&4!==u.status&&7!==u.status&&8!==u.status&&9!==u.status||(o+=u.quantity),1!==u.status&&11!==u.status||(a+=u.quantity),2!==u.status&&5!==u.status&&6!==u.status&&10!==u.status&&12!==u.status||(i+=u.quantity)}}catch(e){s.e(e)}finally{s.f()}return{total:r,pending:n,inProgress:o,completed:a,cancelled:i}},y=function(){var e,t=(e=a.a.mark((function e(){var t,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(jj(jj({},p),{},{loading:!0})),t={},n.ordersOverview=t,e.next=6,r.setAccessToken(c).orders().summary({cancelToken:t});case 6:o=e.sent,i=o.content.result,s=h(i),d(jj(jj({},p),{},{overview:s,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d(jj(jj({},p),{},{loading:!1,error:e.t0}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ej(a,n,o,i,s,"next",e)}function s(e){Ej(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),v=function(e){if(Array.isArray(e)){var t,r=Pj(e);try{for(r.s();!(t=r.n()).done;){if("status"===t.value.attribute)return!0}}catch(e){r.e(e)}finally{r.f()}}else{if(null===e)return!1;if("status"===e.attribute)return!0}return!1};return Object(i.useEffect)((function(){if(!p.loading&&!l){var e=function(e){var t=e.history.filter((function(e){return v(e.data)}));if(0!==t.length){var r,n,o,a,i,s,u=t[t.length-1].data.filter((function(e){return v(e)}));r=u[0],n=[0],o=[3,4,7,8,9],a=[1,11],i=[2,5,6,10,12],s=jj({},p.overview),n.includes(r.old)?s.pending=s.pending-1:o.includes(r.old)?s.inProgress=s.inProgress-1:a.includes(r.old)?s.completed=s.completed-1:i.includes(r.old)&&(s.cancelled=s.cancelled-1),n.includes(r.new)?s.pending=s.pending+1:o.includes(r.new)?s.inProgress=s.inProgress+1:a.includes(r.new)?s.completed=s.completed+1:i.includes(r.new)&&(s.cancelled=s.cancelled+1),d(jj(jj({},p),{},{overview:s}))}},t=function(e){var t=jj({},p.overview);t.total+=1,t.pending+=1,d(jj(jj({},p),{},{overview:t}))};return o.join("orders"),o.on("update_order",e),o.on("orders_register",t),function(){o.leave("orders"),o.off("update_order",e),o.off("orders_register",t)}}}),[p.overview,o,l]),Object(i.useEffect)((function(){return y(),function(){n.ordersOverview&&n.ordersOverview.cancel()}}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Oj({},e,{ordersOverviewList:p})))};function Tj(){return Tj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tj.apply(this,arguments)}function _j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Aj.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Aj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Dj=function(e){var t=e.UIComponent,r=_j(vn(),2),n=r[0],o=r[1].changeType,a=_j(Object(i.useState)(null),2),u=a[0],c=a[1];return Object(i.useEffect)((function(){c(n.options.type)}),[n.options.type]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Tj({},e,{typeSelected:u||n.options.type,handleChangeOrderType:e.handleChangeOrderType||function(e){c(e),o(e)}})))};function Uj(){return Uj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uj.apply(this,arguments)}function Lj(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Fj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fj(Object(r),!0).forEach((function(t){Mj(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Dj.propTypes={UIComponent:c.a.elementType,orderTypes:c.a.arrayOf(u.object),handleChangeOrderType:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Dj.defaultProps={orderTypes:[1,2,3,4,5],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var zj=function(e){var t,r=e.isLoading,n=e.paymethods,o=e.businessId,u=e.onPaymentChange,c=e.UIComponent,l=Rj(nr(),1)[0],f=(null===(t=Rj(vn(),1)[0].carts["businessId:".concat(o)])||void 0===t?void 0:t.total)||0,p=Rj(Object(i.useState)({paymethods:[],loading:!0,error:null}),2),d=p[0],h=p[1],y=Rj(Object(i.useState)(null),2),v=y[0],m=y[1],b=Rj(Object(i.useState)({}),2),g=b[0],O=b[1],w=function(e){return e&&e.filter((function(e){var t;return!["paypal_express","authorize"].includes(null==e||null===(t=e.paymethod)||void 0===t?void 0:t.gateway)})).map((function(e){return Bj(Bj({},null==e?void 0:e.paymethod),{},{sandbox:null==e?void 0:e.sandbox,credentials:null==e?void 0:e.data})}))},j=function(){var e,t=(e=a.a.mark((function e(){var t,r,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.businesses(o).get();case 3:t=e.sent,r=t.content,n=r.error,i=r.result,n||(d.paymethods=w(i.paymethods)),h(Bj(Bj({},d),{},{error:n?i:null,loading:!1,paymethods:n?[]:w(i.paymethods)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),h(Bj(Bj({},d),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Lj(a,n,o,i,s,"next",e)}function s(e){Lj(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),S=function(e){O(e),v?u&&u({paymethodId:v.id,gateway:v.gateway,paymethod:v,data:e}):u&&u(null)};return Object(i.useEffect)((function(){["card_delivery","cash","stripe_redirect"].includes(null==v?void 0:v.gateway)?u&&u({paymethodId:v.id,gateway:v.gateway,paymethod:v,data:{}}):null===v&&u&&u(null)}),[v]),Object(i.useEffect)((function(){r||(n?h(Bj(Bj({},d),{},{loading:!1,paymethods:w(n)})):o?j():h(Bj(Bj({},d),{},{loading:!1})))}),[r]),s.a.createElement(s.a.Fragment,null,c&&s.a.createElement(c,Uj({},e,{orderTotal:f,paymethodsList:d,paymethodSelected:v,paymethodData:g,handlePaymethodClick:function(e){m(e),S({})},handlePaymethodDataChange:S})))};function Gj(){return Gj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gj.apply(this,arguments)}function qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qj(Object(r),!0).forEach((function(t){$j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jj(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Vj(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Jj(a,n,o,i,s,"next",e)}function s(e){Jj(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Hj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}zj.propTypes={UIComponent:c.a.elementType,paymethods:c.a.array,businessId:c.a.number,onPaymentChange:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},zj.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Kj=function(e){var t=e.UIComponent,r=e.propsToFetch,n=Hj(nr(),1)[0],o=Hj(dr(),1)[0].token,u=Hj(Fn(),2)[1].showToast,c=Hj(Lr(),2)[1],l=Hj(Object(i.useState)({pages:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=Hj(Object(i.useState)(null),2),h=d[0],y=d[1],v=Hj(Object(i.useState)({changes:{},loading:!1,error:null}),2),m=v[0],b=v[1],g=Hj(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=function(){var e=Vj(a.a.mark((function e(){var t,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Yj(Yj({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(n.root,"/pages?params=").concat(r.toString()),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(s=e.sent).error||p({pages:s.result,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(Yj(Yj({},f),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Vj(a.a.mark((function e(){var t,r,i,s,l,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in e.prev=0,t=Yj({},m.changes),r={},t)""!==t[i]&&(r=Yj(Yj({},r),{},$j({},i,t[i])));if(0!==Object.keys(r).length){e.next=6;break}return e.abrupt("return");case 6:return u(Dn.Info,c("LOADING","Loading")),b(Yj(Yj({},m),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=11,fetch("".concat(n.root,"/pages/").concat(h),s);case 11:return l=e.sent,e.next=14,l.json();case 14:(p=e.sent).error?b(Yj(Yj({},m),{},{result:{error:!0,result:p.result},loading:!1})):(d=f.pages.filter((function(e){var t,r,n,o;e.id===h&&(e.name=null!==(t=m.changes)&&void 0!==t&&t.name?null===(r=m.changes)||void 0===r?void 0:r.name:null==e?void 0:e.name,e.enabled=null!==(n=null===(o=m.changes)||void 0===o?void 0:o.enabled)&&void 0!==n?n:null==e?void 0:e.enabled);return e})),C(d),b(Yj(Yj({},m),{},{loading:!1,changes:{}})),u(Dn.Success,c("PAGE_SAVED","Page saved"))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),b(Yj(Yj({},m),{},{loading:!1,error:[e.t0.message]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Vj(a.a.mark((function e(t){var r,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(Yj(Yj({},O),{},{loading:!0})),u(Dn.Info,c("LOADING","Loading")),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(n.root,"/pages/").concat(t),r);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(w(Yj(Yj({},O),{},{loading:!1})),s=f.pages.filter((function(e){return e.id!==t})),C(s),u(Dn.Success,c("PAGE_DELETED","Page Deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),P=null,C=function(e){p(Yj(Yj({},f),{},{pages:e}))};return Object(i.useEffect)((function(){m.loading||0===Object.keys(null==m?void 0:m.changes).length||S()}),[m]),Object(i.useEffect)((function(){j()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Gj({},e,{pagesListState:f,handleChangeState:function(e,t,r){y(e),"name"===t?(clearTimeout(P),P=setTimeout((function(){b(Yj(Yj({},m),{},{changes:$j({},t,r)}))}),1e3)):b(Yj(Yj({},m),{},{changes:$j({},t,r)}))},handleUpdatePageList:C,handleDeletePage:E})))};function Xj(){return Xj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xj.apply(this,arguments)}function Zj(e){return function(e){if(Array.isArray(e))return iS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||aS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function eS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qj(Object(r),!0).forEach((function(t){tS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rS(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function nS(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){rS(a,n,o,i,s,"next",e)}function s(e){rS(a,n,o,i,s,"throw",e)}i(void 0)}))}}function oS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||aS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aS(e,t){if(e){if("string"==typeof e)return iS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?iS(e,t):void 0}}function iS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Kj.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Kj.defaultProps={propsToFetch:["name","enabled"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var sS=function(e){var t=e.UIComponent,r=e.pageId,n=e.pageList,o=e.handleSuccessUpdate,u=e.handleCancel,c=oS(nr(),1)[0],l=oS(dr(),1)[0].token,f=oS(Fn(),2)[1].showToast,p=oS(Lr(),2)[1],d=oS(Object(i.useState)({page:{},loading:!1,error:null}),2),h=d[0],y=d[1],v=oS(Object(i.useState)({images:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=oS(Object(i.useState)({loading:!1,change:{},error:null}),2),O=g[0],w=g[1],j=oS(Object(i.useState)({loading:!1,error:null}),2),S=j[0],E=j[1],P=oS(Object(i.useState)({loading:!1,changes:{},error:null}),2),C=P[0],I=P[1],x=oS(Object(i.useState)(null),2),A=x[0],T=x[1],_=oS(Object(i.useState)(null),2),k=_[0],D=_[1],U=function(){var e=nS(a.a.mark((function e(){var t,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(eS(eS({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/pages/").concat(r),t);case 5:return n=e.sent,e.next=8,n.json();case 8:(o=e.sent).error||y({page:o.result,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),y(eS(eS({},h),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=nS(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(eS(eS({},m),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/files?where={%22type%22:1}"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(n=e.sent).error||b({images:n.result,loading:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),b(eS(eS({},m),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=nS(a.a.mark((function e(){var t,r,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dn.Info,p("LOADING","Loading")),w(eS(eS({},O),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(O.change)},e.next=6,fetch("".concat(c.root,"/files"),t);case 6:return r=e.sent,e.next=9,r.json();case 9:(n=e.sent).error?w(eS(eS({},O),{},{loading:!1,error:n.result})):(w({loading:!1,change:{},error:null}),i=[].concat(Zj(m.images),[n.result]),b(eS(eS({},m),{},{images:i})),f(Dn.Success,p("GALLERY_IMAGE_ADDED","Business gallery image added")),T(null==n||null===(o=n.result)||void 0===o?void 0:o.source)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w(eS(eS({},O),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=nS(a.a.mark((function e(t){var r,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dn.Info,p("LOADING","Loading")),E(eS(eS({},S),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=6,fetch("".concat(c.root,"/files/").concat(t),r);case 6:return n=e.sent,e.next=9,n.json();case 9:(o=e.sent).error?E({loading:!1,error:o.result}):(E({loading:!1,error:null}),i=m.images.filter((function(e){return e.id!==t})),b(eS(eS({},m),{},{images:i})),f(Dn.Success,p("FILE_DELETED","File deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),E({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=nS(a.a.mark((function e(){var t,i,s,u,d,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in e.prev=0,t=eS({},C.changes),i={},t)""!==t[s]&&(i=eS(eS({},i),{},tS({},s,t[s])));if(0!==Object.keys(i).length){e.next=6;break}return e.abrupt("return");case 6:return f(Dn.Info,p("LOADING","Loading")),I(eS(eS({},C),{},{loading:!0})),u={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=11,fetch("".concat(c.root,"/pages/").concat(r),u);case 11:return d=e.sent,e.next=14,d.json();case 14:(h=e.sent).error?I({loading:!1,error:h.result}):(o&&(y=n.filter((function(e){var t,n,o,a;e.id===r&&(e.name=null!==(t=C.changes)&&void 0!==t&&t.name?null===(n=C.changes)||void 0===n?void 0:n.name:null==e?void 0:e.name,e.enabled=null!==(o=null===(a=C.changes)||void 0===a?void 0:a.enabled)&&void 0!==o?o:null==e?void 0:e.enabled);return e})),o(y)),I(eS(eS({},C),{},{changes:{},loading:!1,error:null})),f(Dn.Success,p("PAGE_SAVED","Page Saved"))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),I(eS(eS({},C),{},{loading:!1,error:[e.t0.message]}));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=nS(a.a.mark((function e(){var t,r,i,s,d,h,y,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in e.prev=0,r=eS({},C.changes),i={},r)""!==r[s]&&(i=eS(eS({},i),{},tS({},s,r[s])));if(0!==Object.keys(i).length){e.next=6;break}return e.abrupt("return");case 6:return i.enabled=!0,null!==(t=i)&&void 0!==t&&t.body||(i.body="<p><br></p>"),f(Dn.Info,p("LOADING","Loading")),I(eS(eS({},C),{},{loading:!0})),d={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(i)},e.next=13,fetch("".concat(c.root,"/pages"),d);case 13:return h=e.sent,e.next=16,h.json();case 16:(y=e.sent).error?I(eS(eS({},C),{},{loading:!1,error:y.result})):(o&&(v=[].concat(Zj(n),[y.result]),o(v)),u&&u(),I(eS(eS({},C),{},{changes:{},loading:!1,error:null})),f(Dn.Success,p("PAGE_ADDED","Page Added"))),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),I(eS(eS({},C),{},{loading:!1,error:[e.t0.message]}));case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){0!==Object.keys(O.change).length&&F()}),[O.change]),Object(i.useEffect)((function(){L(),r?(U(),D(!1)):D(!0)}),[r]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Xj({},e,{isAddMode:k,pageState:h,imageListState:m,insertImageState:O,formState:C,selectedImageUrl:A,setSelectedImageUrl:T,handleInsertImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){w(eS(eS({},O),{},{change:{source:t.result,type:1}}))},t.onerror=function(e){return console.log(e)}},handleDeleteImage:B,handleChangeFormState:function(e,t){I(eS(eS({},C),{},{changes:eS(eS({},C.changes),{},tS({},e,t))}))},handleSavePage:M,handleAddPage:R})))};function uS(){return uS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uS.apply(this,arguments)}function cS(e){return function(e){if(Array.isArray(e))return mS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lS(Object(r),!0).forEach((function(t){pS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lS(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dS(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function hS(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){dS(a,n,o,i,s,"next",e)}function s(e){dS(a,n,o,i,s,"throw",e)}i(void 0)}))}}function yS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||vS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vS(e,t){if(e){if("string"==typeof e)return mS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mS(e,t):void 0}}function mS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}sS.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},sS.defaultProps={propsToFetch:["name","enabled"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bS=function(e){var t=e.UIComponent,r=e.cityMangersPropsToFetch,n=yS(nr(),1)[0],o=yS(dr(),1)[0].token,u=yS(Fn(),2)[1].showToast,c=yS(Lr(),2)[1],l=yS(Object(i.useState)({countries:[],loading:!1,error:null}),2),f=l[0],p=l[1],d=yS(Object(i.useState)({options:[],loading:!1,error:null}),2),h=d[0],y=d[1],v=yS(Object(i.useState)({users:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=yS(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=yS(Object(i.useState)(null),2),S=j[0],E=j[1],P=yS(Object(i.useState)({}),2),C=P[0],I=P[1],x=yS(Object(i.useState)(!1),2),A=x[0],T=x[1],_=yS(Object(i.useState)([]),2),k=_[0],D=_[1],U=yS(Object(i.useState)(!1),2),L=U[0],F=U[1],B=yS(Object(i.useState)(null),2),M=B[0],R=B[1],N=yS(Object(i.useState)([]),2),z=N[0],G=N[1],q=yS(Object(i.useState)(!1),2),Y=q[0],$=q[1],J=function(){var e=hS(a.a.mark((function e(){var t,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(fS(fS({},f),{},{loading:!0})),e.next=4,n.countries().get();case 4:t=e.sent,r=t.content,o=r.error,i=r.result,p(fS(fS({},f),{},o?{loading:!1,error:i}:{loading:!1,countries:i})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),p(fS(fS({},f),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=hS(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(fS(fS({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=5,fetch("".concat(n.root,"/dropdownoptions"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(i=e.sent).error?y(fS(fS({},h),{},{loading:!1,error:i.result})):y(fS(fS({},h),{},{loading:!1,options:i.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),y(fS(fS({},h),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=hS(a.a.mark((function e(t,r){var o,i,s,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Dn.Info,c("LOADING","Loading")),w(fS(fS({},O),{},{loading:!0})),e.next=5,n.countries(t).save(r);case 5:o=e.sent,i=o.content,s=i.error,l=i.result,s||(d=f.countries.filter((function(e){return e.id===t&&Object.assign(e,l),!0})),p(fS(fS({},f),{},{countries:d})),u(Dn.Success,c("COUNTRY_SAVED","Country saved"))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}(),W=function(){var e=hS(a.a.mark((function e(t,r,o){var i,s,l,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Dn.Info,c("LOADING","Loading")),w(fS(fS({},O),{},{loading:!0})),e.next=5,n.countries(t).cities(r).save(o);case 5:i=e.sent,s=i.content,l=s.error,d=s.result,l?w(fS(fS({},O),{},{loading:!1,error:d})):(h=f.countries.map((function(e){if(e.id===t){var n=e.cities.filter((function(e){return e.id===r&&Object.assign(e,d),!0}));e.cities=n}return e})),p(fS(fS({},f),{},{countries:h})),u(Dn.Success,c("CITY_SAVED","City saved")),I({})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r,n){return e.apply(this,arguments)}}(),K=function(){var e=hS(a.a.mark((function e(t,r){var o,i,s,l,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Dn.Info,c("LOADING","Loading")),w(fS(fS({},O),{},{loading:!0})),e.next=5,n.countries(t).cities(r).delete();case 5:o=e.sent,i=o.content,s=i.error,l=i.result,s?(w(fS(fS({},O),{},{loading:!1,error:l})),$(!1)):(d=f.countries.map((function(e){if(parseInt(e.id)===parseInt(t)){var n=e.cities.filter((function(e){return e.id!==r}));e.cities=n}return e})),p(fS(fS({},f),{},{countries:d})),u(Dn.Success,c("CITY_REMOVED","City removed")),Y&&((h=cS(k)).shift(),0===h.length&&$(!1),D(h))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]}),$(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r){return e.apply(this,arguments)}}(),X=function(){var e=hS(a.a.mark((function e(){var t,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(fS(fS({},m),{},{loading:!0})),t={},e.next=5,n.setAccessToken(o).users().select(r).where([{attribute:"level",value:[1]}]).get({cancelToken:t});case 5:i=e.sent,s=i.content.result,b(fS(fS({},m),{},{loading:!1,users:s})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),b(fS(fS({},m),{},{loading:!1,error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=hS(a.a.mark((function e(){var t,r,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=C&&C.country_id){e.next=3;break}return w(fS(fS({},O),{},{error:c("SELECT_COUNTRY","Select a country")})),e.abrupt("return");case 3:return e.prev=3,u(Dn.Info,c("LOADING","Loading")),w(fS(fS({},O),{},{loading:!0})),C.enabled=!0,e.next=9,n.countries(null==C?void 0:C.country_id).cities().save(C);case 9:t=e.sent,r=t.content,o=r.error,i=r.result,o?w(fS(fS({},O),{},{loading:!1,error:i})):(s=f.countries.map((function(e){if(e.id===(null==C?void 0:C.country_id)){var t=[].concat(cS(e.cities),[i]);e.cities=t}return e})),p(fS(fS({},f),{},{countries:s})),u(Dn.Success,c("CITY_ADDED","City added")),I({}),T(!1)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),w({loading:!1,error:[e.t0.message]});case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=hS(a.a.mark((function e(t,r){var i,s,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Dn.Info,c("LOADING","Loading")),w(fS(fS({},O),{},{loading:!0})),i={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(r)},e.next=6,fetch("".concat(n.root,"/dropdownoptions/").concat(t),i);case 6:return s=e.sent,e.next=9,s.json();case 9:(l=e.sent).error?w(fS(fS({},O),{},{loading:!1,error:l.result})):(w(fS(fS({},O),{},{loading:!1})),f=h.options.filter((function(e){return e.id===t&&Object.assign(e,l.result),!0})),y(fS(fS({},h),{},{options:f})),u(Dn.Success,c("ZONE_SAVED","Zone saved")),I({})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),ee=function(){var e=hS(a.a.mark((function e(){var t,r,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=C&&C.name){e.next=3;break}return w(fS(fS({},O),{},{error:c("NAME_REQUIRED","The name is required.")})),e.abrupt("return");case 3:return e.prev=3,u(Dn.Info,c("LOADING","Loading")),w(fS(fS({},O),{},{loading:!0})),C.enabled=!0,t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(C)},e.next=10,fetch("".concat(n.root,"/dropdownoptions"),t);case 10:return r=e.sent,e.next=13,r.json();case 13:(i=e.sent).error?w(fS(fS({},O),{},{loading:!1,error:i.result})):(s=[].concat(cS(h.options),[i.result]),y(fS(fS({},h),{},{options:s})),u(Dn.Success,c("ZONE_ADDED","Zone added")),I({}),F(!1),w(fS(fS({},O),{},{loading:!1}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),w({loading:!1,error:[e.t0.message]});case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=hS(a.a.mark((function e(t){var r,i,s,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(Dn.Info,c("LOADING","Loading")),w(fS(fS({},O),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,fetch("".concat(n.root,"/dropdownoptions/").concat(t),r);case 6:return i=e.sent,e.next=9,i.json();case 9:(s=e.sent).error?(w(fS(fS({},O),{},{loading:!1,error:s.result})),$(!1)):(l=h.options.filter((function(e){return e.id!==t})),y(fS(fS({},h),{},{options:l})),u(Dn.Success,c("ZONE_REMOVED","Zone removed")),Y&&((f=cS(z)).shift(),0===f.length&&$(!1),G(f))),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]}),$(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;Y&&0!==z.length&&te(null===(e=z[0])||void 0===e?void 0:e.id)}),[z,Y]),Object(i.useEffect)((function(){var e,t;Y&&0!==k.length&&K(null===(e=k[0])||void 0===e?void 0:e.country_id,null===(t=k[0])||void 0===t?void 0:t.id)}),[k,Y]),Object(i.useEffect)((function(){I({})}),[S]),Object(i.useEffect)((function(){X(),J(),V()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,uS({},e,{countriesState:f,dropdownOptionsState:h,cityManagerList:m,actionState:O,handleChangeCountryName:H,handleUpdateCity:W,handleDeleteCity:K,selectedCity:S,setSelectedCity:E,openCity:A,setOpenCity:T,changesState:C,handleChangesState:function(e,t){I(fS(fS({},C),{},pS({},e,t)))},cleanChagesState:function(){return I({})},handleSaveCity:function(){W(null==S?void 0:S.country_id,null==S?void 0:S.id,C)},handleAddCity:Z,selectedCityList:k,handleCheckboxClick:function(e){if(k.find((function(t){return(null==t?void 0:t.id)===e.id}))){var t=k.filter((function(t){return t.id!==e.id}));D(t)}else D([].concat(cS(k),[e]))},handleAllCheckboxClick:function(){var e=f.countries.reduce((function(e,t){return[].concat(cS(e),cS(null==t?void 0:t.cities))}),[]);e.length===k.length?D([]):D(e)},handleSeveralDeleteCities:function(){$(!0)},handleUpdateDropdown:Q,openZoneDropdown:L,setOpenZonedropdown:F,selectedZoneDropdown:M,setSelectedZoneDropdown:R,handleSaveZone:function(){Q(null==M?void 0:M.id,C)},handleAddZone:ee,handleDeleteZone:te,selectedZoneList:z,handleCheckboxZoneClick:function(e){if(z.find((function(t){return(null==t?void 0:t.id)===e.id}))){var t=z.filter((function(t){return t.id!==e.id}));G(t)}else G([].concat(cS(z),[e]))},handleAllCheckboxZoneClick:function(){var e=cS(h.options);e.length===z.length?G([]):G(e)},handleSeveralDeleteZones:function(){$(!0)}})))};function gS(){return gS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gS.apply(this,arguments)}function OS(e){return function(e){if(Array.isArray(e))return xS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||IS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wS(Object(r),!0).forEach((function(t){SS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wS(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function SS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ES(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function PS(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ES(a,n,o,i,s,"next",e)}function s(e){ES(a,n,o,i,s,"throw",e)}i(void 0)}))}}function CS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||IS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IS(e,t){if(e){if("string"==typeof e)return xS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xS(e,t):void 0}}function xS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}bS.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bS.defaultProps={cityMangersPropsToFetch:["id","name","lastname"],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var AS=function(e){var t=e.UIComponent,r=CS(nr(),1)[0],n=CS(dr(),1)[0].token,o=CS(Fn(),2)[1].showToast,u=CS(Lr(),2)[1],c=CS(Object(i.useState)({plugins:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=CS(Object(i.useState)(!1),2),d=p[0],h=p[1],y=CS(Object(i.useState)(null),2),v=y[0],m=y[1],b=CS(Object(i.useState)({loading:!1,error:null}),2),g=b[0],O=b[1],w=function(){var e=PS(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(jS(jS({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},e.next=5,fetch("".concat(r.root,"/plugins"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||f(jS(jS({},l),{},{plugins:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(jS(jS({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=PS(a.a.mark((function e(){var t,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dn.Info,u("LOADING","Loading")),O(jS(jS({},g),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({url:v})},e.next=6,fetch("".concat(r.root,"/plugins"),t);case 6:return i=e.sent,e.next=9,i.json();case 9:(s=e.sent).error?O({loading:!1,error:s.result}):(O(jS(jS({},g),{},{loading:!1})),c=[].concat(OS(l.plugins),[s.result]),f(jS(jS({},l),{},{plugins:c})),o(Dn.Success,u("PLUGIN_SAVED","Plugin saved")),h(!1),m(null)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=PS(a.a.mark((function e(t){var i,s,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dn.Info,u("LOADING","Loading")),O(jS(jS({},g),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},e.next=6,fetch("".concat(r.root,"/plugins/").concat(t),i);case 6:return s=e.sent,e.next=9,s.json();case 9:(c=e.sent).error?O({loading:!1,error:c.result}):(O(jS(jS({},g),{},{loading:!1})),p=l.plugins.filter((function(e){return e.id!==t})),f(jS(jS({},l),{},{plugins:p})),o(Dn.Success,u("PLUGIN_REMOVED","Plugin removed"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=PS(a.a.mark((function e(t,i){var s,c,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dn.Info,u("LOADING","Loading")),O(jS(jS({},g),{},{loading:!0})),s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(i)},e.next=6,fetch("".concat(r.root,"/plugins/").concat(t),s);case 6:return c=e.sent,e.next=9,c.json();case 9:(p=e.sent).error?O({loading:!1,error:p.result}):(O(jS(jS({},g),{},{loading:!1})),d=l.plugins.filter((function(e){return e.id===t&&Object.assign(e,p.result),!0})),f(jS(jS({},l),{},{plugins:d})),o(Dn.Success,u("PLUGIN_SAVED","Plugin saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),O({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,gS({},e,{pluginListState:l,isAddMode:d,setIsAddMode:h,setNewUrl:m,actionState:g,handleAddNewPlugin:j,handleDeletePlugin:S,handleUpdatePlugin:E})))};AS.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},AS.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var TS=r(11),_S=r.n(TS);function kS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return DS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DS(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var US=function(e){var t=e.UIComponent,r=e.open,n=e.backdropClassName,o=e.closeOnBackdrop,a=e.onClose,u=Object(i.useRef)(null),c=kS(Object(i.useState)(),2),l=c[0],f=c[1],p=kS(Object(i.useState)(),2),d=p[0],h=p[1],y=kS(Object(i.useState)(!1),2),v=y[0],m=y[1],b=function(){var e=document.querySelectorAll(".popup-component");if(!r&&e.length>1&&e.length>1&&e[e.length-1].focus(),v){var t=window.document.getElementById("app-modals");t&&t.remove(),window.document.body.style.overflow=d}};Object(i.useEffect)((function(){if(r){var e=window.document.getElementById("app-modals");e?f(e):((e=window.document.createElement("div")).id="app-modals",e.className="popup-component-backdrop popup-backdrop"+(n?" ".concat(n):""),document.body.append(e),f(e),m(!0),h(window.document.body.style.overflow)),u.current&&u.current.focus()}return b}),[r,v,d]);return s.a.createElement(s.a.Fragment,null,r&&l&&_S.a.createPortal(s.a.createElement("div",{className:"popup-component",style:{position:"fixed",top:0,left:0,bottom:0,right:0,zIndex:2001,outline:"none"},onClick:function(e){o&&e.target.classList.contains("popup-component")&&a&&a()},onKeyDown:function(e){27===e.keyCode&&e.target.classList.contains("popup-component")&&a&&a()},tabIndex:-1,autoFocus:!0,ref:u},t&&s.a.createElement(t,e)),l))};function LS(){return LS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LS.apply(this,arguments)}function FS(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function BS(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){FS(a,n,o,i,s,"next",e)}function s(e){FS(a,n,o,i,s,"throw",e)}i(void 0)}))}}function MS(e){return function(e){if(Array.isArray(e))return YS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function NS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?RS(Object(r),!0).forEach((function(t){zS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RS(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||qS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qS(e,t){if(e){if("string"==typeof e)return YS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?YS(e,t):void 0}}function YS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}US.propTypes={UIComponent:c.a.elementType,open:c.a.bool,closeOnBackdrop:c.a.bool,closeWithKeyboard:c.a.bool,title:c.a.string,content:c.a.oneOfType([c.a.string,c.a.arrayOf(u.string),c.a.elementType,c.a.element]),onAccept:c.a.func,onCancel:c.a.func,onClose:c.a.func},US.defaultProps={open:!1,closeOnBackdrop:!0,closeWithKeyboard:!0};var $S=function(e){var t=e.UIComponent,r=GS(nr(),1)[0],n=GS(dr(),1)[0].token,o=GS(Fn(),2)[1].showToast,u=GS(Lr(),2)[1],c=GS(Object(i.useState)({loading:!1,levels:[],error:null}),2),l=c[0],f=c[1],p=GS(Object(i.useState)({loading:!1,changes:{},error:null}),2),d=p[0],h=p[1],y=GS(Object(i.useState)({loading:!1,error:null,changes:{}}),2),v=y[0],m=y[1],b=function(e){var t=null==l?void 0:l.levels.map((function(t){return t.id===e.id?e:t}));f(NS(NS({},l),{},{levels:t}))},g=function(e){var t,r=null==l||null===(t=l.levels)||void 0===t?void 0:t.filter((function(t){return t.id!==e.id}));f(NS(NS({},l),{},{levels:r}))},O=function(){var e=BS(a.a.mark((function e(){var t,i,s,c,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dn.Info,u("LOADING","Loading")),h(NS(NS({},d),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(d.changes)},i="".concat(r.root,"/loyalty_levels"),e.next=7,fetch(i,t);case 7:return s=e.sent,e.next=10,s.json();case 10:c=e.sent,p=c.error,y=c.result,p?h(NS(NS({},d),{},{loading:!1,error:y})):(o(Dn.Success,u("LEVEL_ADDED","Level added")),h(NS(NS({},d),{},{loading:!1,error:null,changes:{}})),a=y,v=void 0,(v=MS(l.levels)).push(a),f(NS(NS({},l),{},{levels:v}))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),h(NS(NS({},d),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}var a,v}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=BS(a.a.mark((function e(t){var i,s,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dn.Info,u("LOADING","Loading")),h(NS(NS({},d),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},s="".concat(r.root,"/loyalty_levels/").concat(t),e.next=7,fetch(s,i);case 7:return c=e.sent,e.next=10,c.json();case 10:l=e.sent,f=l.error,p=l.result,f?h(NS(NS({},d),{},{loading:!1,error:p})):(o(Dn.Success,u("LEVEL_DELETED","Level deleted")),h(NS(NS({},d),{},{loading:!1,error:null,changes:{}})),g(p)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),h(NS(NS({},d),{},{loading:!1,error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=BS(a.a.mark((function e(){var t,o,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(NS(NS({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},o="".concat(r.root,"/loyalty_levels"),e.next=6,fetch(o,t);case 6:return i=e.sent,e.next=9,i.json();case 9:s=e.sent,u=s.error,c=s.result,f(NS(NS({},l),{},u?{loading:!1,error:c}:{loading:!1,error:null,levels:c})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),f(NS(NS({},l),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=BS(a.a.mark((function e(t,i){var s,c,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dn.Info,u("LOADING","Loading")),m((function(e){return NS(NS({},e),{},{loading:!0})})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)},e.next=6,fetch("".concat(r.root,"/loyalty_levels/").concat(i),s);case 6:return c=e.sent,e.next=9,c.json();case 9:l=e.sent,f=l.error,p=l.result,f?m((function(e){return NS(NS({},e),{},{loading:!1,error:p})})):(m((function(e){return NS(NS({},e),{},{loading:!1,error:null})})),b(p),o(Dn.Success,u("LEVEL_UPDATED","Level updated"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m(NS(NS({},v),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,LS({},e,{levelList:l,formState:d,editFormState:v,handleChangeInput:function(e){var t=NS(NS({},null==d?void 0:d.changes),{},zS({},e.target.name,e.target.value));h(NS(NS({},d),{},{changes:t}))},handleUpdateAddClick:O,handleUpdateDeleteClick:w,handleUpdateLevel:function(e,t){var r,n,o=t===(null==v||null===(r=v.changes)||void 0===r?void 0:r.id)?NS(NS({},null==v?void 0:v.changes),{},zS({},e.target.name,e.target.value)):(zS(n={},e.target.name,e.target.value),zS(n,"id",t),n);m(NS(NS({},v),{},{changes:o})),S(zS({},e.target.name,e.target.value),t)}})))};$S.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$S.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var JS="change_ingredients",VS="change_options",HS=Object(i.createContext)(),WS=function(){return Object(i.useContext)(HS)||[{},function(){}]};function KS(){return KS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KS.apply(this,arguments)}function XS(e){return function(e){if(Array.isArray(e))return eE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||QS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZS(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||QS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QS(e,t){if(e){if("string"==typeof e)return eE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eE(e,t):void 0}}function eE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tE=function(e){var t=e.product,r=e.UIComponent,n=ZS(WS(),2),o=n[0].ingredients,a=n[1],u=ZS(WS(),2),c=u[0].options,l=u[1],f=ZS(Object(i.useState)(1),2),p=f[0],d=f[1],h=ZS(Object(i.useState)(t.price),2),y=h[0],v=h[1],m=ZS(Object(i.useState)(""),2),b=m[0],g=m[1],O=function(e,t){for(var r=0;r<e.length;r++)for(var n=e[r].suboptions,o=0;o<n.length;o++)if(n[o].id==t)return n[o].isChecked;return!1};Object(i.useEffect)((function(){!function(){for(var e=t.ingredients,r=0;r<e.length;r++)e[r].isChecked=!0;a({type:JS,ingredients:e})}(),function(){for(var e=[],r=t.extras,n=0;n<r.length;n++)e.push.apply(e,XS(r[n].options));for(var o=0;o<e.length;o++){var a=e[o];if(a.isDisplay=!0,a.conditioned){var i=a.respect_to;void 0!==i&&""!==i&&"null"!=i||(a.isDisplay=!1),O(e,i)||(a.isDisplay=!1)}for(var s=a.suboptions,u=0;u<s.length;u++)s[u].isChecked=!1}l({type:VS,options:e})}()}),[]);var w=function(e,r){for(var n=0,o=0;o<r.length;o++)if(0!=r[o].isDisplay)for(var a=r[o].suboptions,i=0;i<a.length;i++)a[i].isChecked&&(n+=parseFloat(a[i].price));var s=(parseFloat(t.price)+n)*e;v(s)};return s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,KS({},e,{onShare:function(){e.onShare&&e.onShare(t)},onClose:function(){e.onClose&&e.onClose()},productName:t.name,productLogo:t.images,productCount:p,productPrice:y,ingredients:o,options:c,note:b,onChangedIngredient:function(e){o[e].isChecked=!o[e].isChecked,a({type:JS,ingredients:o})},onChangedOption:function(e,t,r){if(r){for(var n=0;n<c[e].suboptions.length;n++)c[e].suboptions[n].isChecked=!1;c[e].suboptions[t].isChecked=!0}else c[e].suboptions[t].isChecked=!c[e].suboptions[t].isChecked;for(var o=0;o<c.length;o++){var a=c[o];if(a.isDisplay=!0,a.conditioned){var i=a.respect_to;void 0!==i&&""!==i&&"null"!=i||(a.isDisplay=!1),O(c,i)||(a.isDisplay=!1)}}w(p,c),l({type:VS,options:c})},onChangedNote:function(e){g(e.target.value)},onClickedButtonPlus:function(){d(p+1),w(p+1,c)},onClickedButtonMinus:function(){p>1&&(d(p-1),w(p-1,c))},onClickedButtonAdd:function(){e.onClickedButtonAdd&&(t.ingredients=o,t.options=c,t.note=b,t.quantity=p,e.onAdd(t))}})))};function rE(){return rE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rE.apply(this,arguments)}function nE(e){return function(e){if(Array.isArray(e))return fE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oE(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function aE(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){oE(a,n,o,i,s,"next",e)}function s(e){oE(a,n,o,i,s,"throw",e)}i(void 0)}))}}function iE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iE(Object(r),!0).forEach((function(t){uE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||lE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lE(e,t){if(e){if("string"==typeof e)return fE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fE(e,t):void 0}}function fE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}tE.propTypes={UIComponent:c.a.elementType,onShare:c.a.func,onClose:c.a.func,productName:c.a.string,productLogo:c.a.string,productCount:c.a.number,productPrice:c.a.number,ingredients:c.a.array,options:c.a.array,note:c.a.array,onChangedIngredient:c.a.func,onChangedOption:c.a.func,onChangedNote:c.a.func,onClickedButtonPlus:c.a.func,onClickedButtonMinues:c.a.func,onClickedButtonAdd:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},tE.defaultProps={productName:""};var pE=function(e){var t=e.business,r=e.UIComponent,n=e.product,o=e.productId,u=e.categoryId,c=e.handleUpdateBusinessState,l=cE(nr(),1)[0],f=cE(dr(),1)[0],p=cE(Fn(),2)[1].showToast,d=cE(Lr(),2)[1],h=cE(Object(i.useState)({loading:!1,product:null,error:null}),2),y=h[0],v=h[1],m=cE(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),b=m[0],g=m[1],O=cE(Object(i.useState)({ingredients:{},options:{}}),2),w=O[0],j=O[1],S=function(){var e=aE(a.a.mark((function e(){var r,n,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(sE(sE({},y),{},{loading:!0})),e.next=4,l.businesses(t.id).categories(u).products(o).get();case 4:r=e.sent,n=r.content,i=n.error,s=n.result,v(i?sE(sE({},y),{},{loading:!1,error:s}):{loading:!1,product:s,error:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),v(sE(sE({},y),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=aE(a.a.mark((function e(r){var o,i,s,u,h,m,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,d("LOADING","Loading")),g(sE(sE({},b),{},{loading:!0})),s=sE({},r||b.changes),e.next=6,l.businesses(null==t?void 0:t.id).categories(null==y||null===(o=y.product)||void 0===o?void 0:o.category_id).products(null==y||null===(i=y.product)||void 0===i?void 0:i.id).save(s,{accessToken:f.token});case 6:u=e.sent,h=u.content,m=h.error,O=h.result,g(sE(sE({},b),{},{changes:m?b.changes:{},result:O,loading:!1})),m||(v(sE(sE({},y),{},{product:sE(sE({},y.product),O)})),c&&((w=nE(null==t?void 0:t.categories)).forEach((function e(t){if(t.id===(null==n?void 0:n.category_id)){var r=t.products.map((function(e){return e.id===n.id?sE(sE({},e),O):e}));t.products=nE(r)}Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),j=sE(sE({},t),{},{categories:w}),c(j)),p(Dn.Success,d("PRODUCT_SAVED","Product saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),g(sE(sE({},b),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var r=aE(a.a.mark((function r(){var o,i,s,u,f;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,p(Dn.Info,d("LOADING","Loading")),g(sE(sE({},b),{},{loading:!0})),r.next=5,l.businesses(parseInt(null==t?void 0:t.id)).categories(parseInt(null==n?void 0:n.category_id)).products(null==n?void 0:n.id).delete();case 5:o=r.sent,i=o.content,s=i.error,u=i.result,s?g(sE(sE({},b),{},{loading:!1,result:{error:!0,result:u}})):(g(sE(sE({},b),{},{loading:!1,result:{error:!1,result:u}})),c&&((f=nE(null==t?void 0:t.categories)).forEach((function e(t){if(t.id===(null==n?void 0:n.category_id)){var r=t.products.filter((function(e){return e.id!==n.id}));t.products=nE(r)}Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),c(sE(sE({},t),{},{categories:f}))),p(Dn.Success,d("PRODUCT_DELETED","Product deleted")),e.onClose&&e.onClose()),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),g(sE(sE({},b),{},{loading:!1,result:{error:!0,result:r.t0}}));case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(){return r.apply(this,arguments)}}(),C=function(e){for(var t=0,r=0;r<(null==n||null===(o=n.extras)||void 0===o?void 0:o.length);r++)for(var o,a=null==n?void 0:n.extras[r],i=0;i<(null===(s=a.options)||void 0===s?void 0:s.length);i++)for(var s,u=a.options[i],c=0;c<(null===(l=u.suboptions)||void 0===l?void 0:l.length);c++){var l,f,p,d=u.suboptions[c];if(null!==(f=e.options["id:".concat(u.id)])&&void 0!==f&&null!==(p=f.suboptions["id:".concat(d.id)])&&void 0!==p&&p.selected){var h=e.options["id:".concat(u.id)].suboptions["id:".concat(d.id)],y=u.allow_suboption_quantity?h.quantity:1;t+=(u.with_half_option&&d.half_price&&"whole"!==h.position?d.half_price:d.price)*y}}return(null==n?void 0:n.price)+t};return Object(i.useEffect)((function(){n?(v(sE(sE({},y),{},{product:n})),function(t){var r,n,o,a,i={};for(var s in t.ingredients){var u=t.ingredients[s];i["id:".concat(u.id)]={selected:!0}}var c=sE(sE({},e.productCart),{},{id:t.id,price:t.price,name:t.name,businessId:e.businessId,categoryId:t.category_id,inventoried:t.inventoried,stock:t.quantity,ingredients:(null===(r=e.productCart)||void 0===r?void 0:r.ingredients)||i,options:(null===(n=e.productCart)||void 0===n?void 0:n.options)||{},comment:(null===(o=e.productCart)||void 0===o?void 0:o.comment)||null,quantity:(null===(a=e.productCart)||void 0===a?void 0:a.quantity)||1});c.unitTotal=C(c),c.total=c.unitTotal*c.quantity,j(c)}(n)):o&&u&&S()}),[n]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,rE({},e,{productState:y,productCart:w,formState:b,cleanFormState:function(e){return g(sE(sE({},b),e))},handleChangeProductActiveState:function(){var e,t={enabled:!(null!=y&&null!==(e=y.product)&&void 0!==e&&e.enabled)};E(t)},handleChangeInput:function(e){g(sE(sE({},b),{},{changes:sE(sE({},b.changes),{},uE({},e.target.name,e.target.value))}))},handlechangeImage:function(e,t){var r=new window.FileReader;r.readAsDataURL(e),r.onload=function(){g(sE(sE({},b),{},{changes:sE(sE({},b.changes),{},uE({},t?"seo_image":"images",r.result))}))},r.onerror=function(e){return console.log(e)}},handleUpdateClick:E,handleDeleteProduct:P,showProductOption:function(e){var t=!0;if(e.respect_to&&(t=!1,w.options)){var r=w.options;for(var n in r){var o;if(null!==(o=r[n].suboptions["id:".concat(e.respect_to)])&&void 0!==o&&o.selected){t=!0;break}}}return t},handleChangeFormState:function(e){g(sE(sE({},b),{},{changes:sE(sE({},b.changes),e)}))},handleSuccessUpdate:function(e){if(v(sE(sE({},y),{},{product:sE(sE({},y.product),e)})),c){var r=nE(null==t?void 0:t.categories);r.forEach((function t(r){if(r.id===(null==n?void 0:n.category_id)){var o=r.products.map((function(t){return t.id===n.id?sE(sE({},t),e):t}));r.products=nE(o)}Array.isArray(null==r?void 0:r.subcategories)&&r.subcategories.forEach(t)}));var o=sE(sE({},t),{},{categories:r});c(o)}}})))};function dE(){return dE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dE.apply(this,arguments)}function hE(e){return function(e){if(Array.isArray(e))return jE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yE(Object(r),!0).forEach((function(t){mE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bE(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function gE(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){bE(a,n,o,i,s,"next",e)}function s(e){bE(a,n,o,i,s,"throw",e)}i(void 0)}))}}function OE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||wE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wE(e,t){if(e){if("string"==typeof e)return jE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jE(e,t):void 0}}function jE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}pE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},pE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var SE=function(e){var t=e.businessId,r=e.extraId,n=e.metafields,o=e.UIComponent,u=e.handleSuccessAddMetaFields,c=e.handleSuccessDeleteBusinessMetaFields,l=OE(nr(),1)[0],f=OE(dr(),1)[0],p=OE(Fn(),2)[1].showToast,d=OE(Lr(),2)[1],h=OE(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),y=h[0],v=h[1],m=OE(Object(i.useState)({loading:!1,result:{error:!1}}),2),b=m[0],g=m[1],O=function(){var e=gE(a.a.mark((function e(){var n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(vE(vE({},y),{},{loading:!0})),n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=5,fetch("".concat(l.root,"/business/").concat(t,"/extras/").concat(r,"/metafields"),n);case 5:return o=e.sent,e.next=8,o.json();case 8:i=e.sent,s=i.result,v(vE(vE({},y),{},{loading:!1,metaFields:s})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(vE(vE({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=gE(a.a.mark((function e(n){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,d("LOADING","Loading")),g(vE(vE({},b),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)}},e.next=6,fetch("".concat(l.root,"/business/").concat(t,"/extras/").concat(r,"/metafields/").concat(n),o);case 6:e.sent.ok&&(i=y.metaFields.filter((function(e){return e.id!==n})),v(vE(vE({},y),{},{metaFields:i})),g({loading:!1,result:{error:!1}}),c&&c(n),p(Dn.Success,d("METAFIELD_DELETED","Metafield deleted"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),g({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=gE(a.a.mark((function e(n){var o,i,s,c,h,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,d("LOADING","Loading")),g(vE(vE({},b),{},{loading:!0})),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f.token)},body:JSON.stringify(n)},e.next=6,fetch("".concat(l.root,"/business/").concat(t,"/extras/").concat(r,"/metafields"),o);case 6:return i=e.sent,e.next=9,i.json();case 9:s=e.sent,c=s.error,h=s.result,c?g({loading:!1,result:{error:!0,result:h}}):([],m=[].concat(hE(y.metaFields),[h]),v(vE(vE({},y),{},{metaFields:m})),g({loading:!1,result:{error:!1}}),u&&u(h),p(Dn.Success,d("METAFIELD_ADDED","Metafield added"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),g({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){n?v(vE(vE({},y),{},{metaFields:n})):O()}),[n]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,dE({},e,{metaFieldsList:y,actionState:b,handleDeleteMetaField:w,handeAddMetaField:j})))};function EE(){return EE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EE.apply(this,arguments)}function PE(e){return function(e){if(Array.isArray(e))return UE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||DE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CE(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=DE(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function IE(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function xE(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){IE(a,n,o,i,s,"next",e)}function s(e){IE(a,n,o,i,s,"throw",e)}i(void 0)}))}}function AE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function TE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AE(Object(r),!0).forEach((function(t){_E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||DE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DE(e,t){if(e){if("string"==typeof e)return UE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?UE(e,t):void 0}}function UE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}SE.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},SE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var LE=function(e){var t=e.UIComponent,r=e.business,n=e.extra,o=e.option,u=e.handleUpdateBusinessState,c=e.handleSucccessDeleteOption,l=kE(nr(),1)[0],f=kE(dr(),1)[0].token,p=kE(Fn(),2)[1].showToast,d=kE(Lr(),2)[1],h=kE(Object(i.useState)({option:o,loading:!1,error:null}),2),y=h[0],v=h[1],m=kE(Object(i.useState)({changes:{},result:{}}),2),b=m[0],g=m[1],O=kE(Object(i.useState)(null),2),w=O[0],j=O[1],S=kE(Object(i.useState)({}),2),E=S[0],P=S[1],C=kE(Object(i.useState)({changes:{},loading:!1,error:null}),2),I=C[0],x=C[1],A=kE(Object(i.useState)([]),2),T=A[0],_=A[1],k=kE(Object(i.useState)([]),2),D=k[0],U=k[1],L=kE(Object(i.useState)(null),2),F=L[0],B=L[1],M=kE(Object(i.useState)(n),2),R=M[0],N=M[1],z=kE(Object(i.useState)(null),2),G=z[0],q=z[1],Y=kE(Object(i.useState)(!1),2),$=Y[0],J=Y[1],V=function(e){var t,r,n;J(null===e);var o=null==y||null===(t=y.option)||void 0===t||null===(r=t.suboptions)||void 0===r||null===(n=r.find((function(t){return t.id===e})))||void 0===n?void 0:n.preselected;j(e),g({result:{},changes:{preselected:!o}})},H=function(){var e=xE(a.a.mark((function e(t){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null==(o=null==y||null===(r=y.option)||void 0===r||null===(n=r.suboptions)||void 0===n?void 0:n.find((function(e){return e.preselected})))?void 0:o.id)!==t&&o){e.next=5;break}V(t),e.next=9;break;case 5:return e.next=7,Q({id:null==o?void 0:o.id,preselected:!1});case 7:e.sent&&V(t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(e){if(u){var t=r.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})),n=TE(TE({},r),{},{extras:t}),o=n.categories.map((function(t){var r=t.products.map((function(t){var r=t.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));return TE(TE({},t),{},{extras:r})}));return TE(TE({},t),{},{products:r})})),a=TE(TE({},n),{},{categories:o});u(a)}},K=function(e){var t,r=[],n=CE(e.options.filter((function(e){return e.id!==o.id})));try{for(n.s();!(t=n.n()).done;){var a=t.value;r.push({value:a.id,content:a.name})}}catch(e){n.e(e)}finally{n.f()}_(r)},X=function(e,t){var r,n=[],o=CE(e.options.find((function(e){return e.id===t})).suboptions);try{for(o.s();!(r=o.n()).done;){var a=r.value;n.push({value:a.id,content:a.name})}}catch(e){o.e(e)}finally{o.f()}U(n)},Z=function(e){var t,r=CE(null==R?void 0:R.options);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(null!=n&&n.suboptions){var o,a=CE(n.suboptions);try{for(a.s();!(o=a.n()).done;){var i=o.value;i.id===e&&(B(n.id),q(i.id))}}catch(e){a.e(e)}finally{a.f()}}}}catch(e){r.e(e)}finally{r.f()}},Q=function(){var e=xE(a.a.mark((function e(t){var i,s,u,c,h,m,O,j,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u in e.prev=0,i=t||TE({},b.changes),s={},i)""!==i[u]&&(s=TE(TE({},s),{},_E({},u,i[u])));if(0!==Object.keys(s).length){e.next=6;break}return e.abrupt("return");case 6:return p(Dn.Info,d("LOADING","Loading")),v(TE(TE({},y),{},{loading:!0})),c={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(s)},e.next=11,fetch("".concat(l.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(o.id,"/suboptions/").concat((null==t?void 0:t.id)||w),c);case 11:return h=e.sent,e.next=14,h.json();case 14:if(m=e.sent,g({changes:m.error?b:{},result:null==m?void 0:m.result}),m.error){e.next=26;break}return O=y.option.suboptions.filter((function(e){return e.id===m.result.id&&Object.assign(e,m.result),!0})),j=TE(TE({},y.option),{},{suboptions:O}),v(TE(TE({},y),{},{option:j,loading:!1})),S=n.options.filter((function(e){return e.id===j.id&&Object.assign(e,j),!0})),E=TE(TE({},n),{},{options:S}),N(E),W(E),p(Dn.Success,d("CHOICE_SAVED","Choice saved")),e.abrupt("return",!0);case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),v(TE(TE({},y),{},{loading:!1,error:e.t0.message}));case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=xE(a.a.mark((function e(){var t,i,s,u,c,h,m,O,w,j,S,E,C,I;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c in e.prev=0,s=TE({},b.changes),u={},s)""!==s[c]&&(u=TE(TE({},u),{},_E({},c,s[c])));if(null!==(t=u)&&void 0!==t&&t.name&&null!==(i=u)&&void 0!==i&&i.price){e.next=7;break}return P({name:!(null!==(h=u)&&void 0!==h&&h.name),price:!(null!==(m=u)&&void 0!==m&&m.price)}),e.abrupt("return");case 7:if(0!==Object.keys(u).length){e.next=9;break}return e.abrupt("return");case 9:return p(Dn.Info,d("LOADING","Loading")),u.enabled=!0,v(TE(TE({},y),{},{loading:!0})),O={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(u)},e.next=15,fetch("".concat(l.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(o.id,"/suboptions"),O);case 15:return w=e.sent,e.next=18,w.json();case 18:j=e.sent,g({changes:j.error?b:{},result:null==j?void 0:j.result}),j.error||((S=PE(y.option.suboptions)).push(TE(TE({},j.result),{},{preselected:!1})),E=TE(TE({},y.option),{},{suboptions:S}),v(TE(TE({},y),{},{option:E,loading:!1})),C=n.options.filter((function(e){return e.id===E.id&&Object.assign(e,E),!0})),I=TE(TE({},n),{},{options:C}),N(I),W(I),p(Dn.Success,d("CHOICE_ADDED","Choice added"))),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),v(TE(TE({},y),{},{loading:!1,error:e.t0.message}));case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=xE(a.a.mark((function e(t){var i,s,u,c,h,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,d("LOADING","Loading")),v(TE(TE({},y),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},e.next=6,fetch("".concat(l.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(o.id,"/suboptions/").concat(t),i);case 6:return s=e.sent,e.next=9,s.json();case 9:e.sent.error||(u=y.option.suboptions.filter((function(e){return e.id!==t})),c=TE(TE({},y.option),{},{suboptions:u}),v(TE(TE({},y),{},{option:c,loading:!1})),h=n.options.filter((function(e){return e.id===c.id&&Object.assign(e,c),!0})),m=TE(TE({},n),{},{options:h}),N(m),W(m),p(Dn.Success,d("CHOICE_DELETED","Choice deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),v(TE(TE({},y),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=xE(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=_E({},t,r),x(TE(TE({},I),{},{changes:n})),ne(n);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ne=function(){var e=xE(a.a.mark((function e(t){var i,s,u,c,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(Dn.Info,d("LOADING","Loading")),x(TE(TE({},I),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(t)},e.next=6,fetch("".concat(l.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(o.id),i);case 6:return s=e.sent,e.next=9,s.json();case 9:(u=e.sent).error||(x({changes:u.error?I.changes:{},loading:!1}),v(TE(TE({},y),{},{option:TE(TE({},y.option),u.result)})),c=n.options.filter((function(e){return e.id===u.result.id&&Object.assign(e,u.result),!0})),h=TE(TE({},n),{},{options:c}),N(h),W(h),p(Dn.Success,d("OPTION_SAVED","Option saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),x(TE(TE({},I),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var t=xE(a.a.mark((function t(){var i,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(Dn.Info,d("LOADING","Loading")),v(TE(TE({},y),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)}},t.next=6,fetch("".concat(l.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(o.id),i);case 6:return s=t.sent,t.next=9,s.json();case 9:t.sent.error||(c&&c(o.id),p(Dn.Success,d("OPTION_DELETED","Option deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v(TE(TE({},y),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if(F){K(R),X(R,F);var e=R.options.find((function(e){return e.id===o.id}));Z(null==e?void 0:e.respect_to)}}),[R,F]),Object(i.useEffect)((function(){var e,t,r,n;Object.keys(b.changes).length&&(""===(null==b||null===(e=b.changes)||void 0===e?void 0:e.name)||""===(null==b||null===(t=b.changes)||void 0===t?void 0:t.price)?P({name:""===(null==b||null===(r=b.changes)||void 0===r?void 0:r.name),price:""===(null==b||null===(n=b.changes)||void 0===n?void 0:n.price)}):$||Q())}),[b,$]),Object(i.useEffect)((function(){v(TE(TE({},y),{},{option:o})),K(n),Z(null==o?void 0:o.respect_to)}),[o]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,EE({},e,{optionState:y,changesState:b,editSubOptionId:w,editErrors:E,settingChangeState:I,handleChangeInput:function(e,t){J(null===t),t===w?g({result:{},changes:TE(TE({},b.changes),{},_E({},e.target.name,e.target.value))}):(j(t),g({result:{},changes:_E({},e.target.name,e.target.value)}))},handleChangeSubOptionImage:function(e,t){J(null===t);var r=new window.FileReader;r.readAsDataURL(e),t===w?r.onload=function(){g({result:{},changes:TE(TE({},b.changes),{},{image:r.result})})}:(j(t),r.onload=function(){g({result:{},changes:{image:r.result}})}),r.onerror=function(e){return console.log(e)}},handleChangeSubOptionEnable:function(e,t){J(null===t),t===w?g({result:{},changes:TE(TE({},b.changes),{},{enabled:e})}):(j(t),g({result:{},changes:{enabled:e}}))},handleDeteteSubOption:te,handleOptionSetting:re,conditionalOptions:T,conditionalSubOptions:D,conditionalOptionId:F,conditionalSubOptionId:G,handleChangeConditionalOption:function(e){B(e),X(R,e)},handleChangeConditionalSubOption:function(e){ne({respect_to:e})},handleAddOption:ee,handleDeteteOption:oe,handledisableDefaultSuboption:H})))};function FE(){return FE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FE.apply(this,arguments)}function BE(e){return function(e){if(Array.isArray(e))return $E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||YE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ME(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function RE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ME(Object(r),!0).forEach((function(t){NE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ME(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function NE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zE(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function GE(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){zE(a,n,o,i,s,"next",e)}function s(e){zE(a,n,o,i,s,"throw",e)}i(void 0)}))}}function qE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||YE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YE(e,t){if(e){if("string"==typeof e)return $E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$E(e,t):void 0}}function $E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}LE.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},LE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var JE=function(e){var t=e.businessId,r=e.extraId,n=e.optionId,o=e.metafields,u=e.UIComponent,c=e.handleSuccessAddMetaFields,l=e.handleSuccessDeleteBusinessMetaFields,f=qE(nr(),1)[0],p=qE(dr(),1)[0],d=qE(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),h=d[0],y=d[1],v=qE(Object(i.useState)({loading:!1,result:{error:!1}}),2),m=v[0],b=v[1],g=function(){var e=GE(a.a.mark((function e(){var o,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(RE(RE({},h),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/extras/").concat(r,"/options/").concat(n,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:s=e.sent,u=s.result,y(RE(RE({},h),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),y(RE(RE({},h),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=GE(a.a.mark((function e(o){var i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(RE(RE({},m),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/extras/").concat(r,"/options/").concat(n,"/metafields/").concat(o),i);case 5:e.sent.ok&&(s=h.metaFields.filter((function(e){return e.id!==o})),y(RE(RE({},h),{},{metaFields:s})),b({loading:!1,result:{error:!1}}),l&&l(o)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),b({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=GE(a.a.mark((function e(o){var i,s,u,l,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(RE(RE({},m),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)},body:JSON.stringify(o)},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/extras/").concat(r,"/options/").concat(n,"/metafields"),i);case 5:return s=e.sent,e.next=8,s.json();case 8:u=e.sent,l=u.error,d=u.result,l?b({loading:!1,result:{error:!0,result:d}}):([],v=[].concat(BE(h.metaFields),[d]),y(RE(RE({},h),{},{metaFields:v})),b({loading:!1,result:{error:!1}}),c&&c(d)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),b({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?y(RE(RE({},h),{},{metaFields:o})):g()}),[o]),s.a.createElement(s.a.Fragment,null,u&&s.a.createElement(u,FE({},e,{metaFieldsList:h,actionState:m,handleDeleteMetaField:O,handeAddMetaField:w})))};function VE(){return VE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VE.apply(this,arguments)}function HE(e){return function(e){if(Array.isArray(e))return rP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WE(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function KE(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){WE(a,n,o,i,s,"next",e)}function s(e){WE(a,n,o,i,s,"throw",e)}i(void 0)}))}}function XE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ZE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XE(Object(r),!0).forEach((function(t){QE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function QE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||tP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tP(e,t){if(e){if("string"==typeof e)return rP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rP(e,t):void 0}}function rP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}JE.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},JE.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nP=function(e){var t=e.UIComponent,r=e.business,n=e.extra,o=e.handleUpdateBusinessState,u=eP(nr(),1)[0],c=eP(dr(),1)[0].token,l=eP(Fn(),2)[1].showToast,f=eP(Lr(),2)[1],p=eP(Object(i.useState)({extra:n,loading:!1,error:null}),2),d=p[0],h=p[1],y=eP(Object(i.useState)({changes:{},result:{}}),2),v=y[0],m=y[1],b=eP(Object(i.useState)(null),2),g=b[0],O=b[1],w=eP(Object(i.useState)({}),2),j=w[0],S=w[1],E=eP(Object(i.useState)({conditioned:!1,enabled:!0,min:1,max:1}),2),P=E[0],C=E[1],I=eP(Object(i.useState)(null),2),x=I[0],A=I[1],T=eP(Object(i.useState)({}),2),_=T[0],k=T[1],D=function(e){return m(ZE({},e))},U=function(e,t){D(ZE(ZE({},v),{},{changes:{}})),A(e),k(ZE(ZE({},_),{},QE({},t,!0)))},L=function(e){if(o){var t=r.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0})),n=ZE(ZE({},r),{},{extras:t}),a=n.categories.map((function(t){var r=t.products.map((function(t){var r=t.extras.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));return ZE(ZE({},t),{},{extras:r})}));return ZE(ZE({},t),{},{products:r})})),i=ZE(ZE({},n),{},{categories:a});o(i)}},F=function(){var e=KE(a.a.mark((function e(){var t,o,i,s,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,f("LOADING","Loading")),h(ZE(ZE({},d),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(null==v?void 0:v.changes)},e.next=6,fetch("".concat(u.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(g),t);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error||(m({changes:i.error?v.changes:{},result:i.result}),s=d.extra.options.filter((function(e){return e.id===i.result.id&&Object.assign(e,i.result),!0})),p=ZE(ZE({},d.extra),{},{options:s}),h(ZE(ZE({},d),{},{loading:!1,extra:p})),L(p),l(Dn.Success,f("OPTION_SAVED","Option saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(ZE(ZE({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=KE(a.a.mark((function e(){var t,o,i,s,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,f("LOADING","Loading")),h(ZE(ZE({},d),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(P)},e.next=6,fetch("".concat(u.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options"),t);case 6:return o=e.sent,e.next=9,o.json();case 9:(i=e.sent).error||(C({conditioned:!1,enabled:!0,min:1,max:1}),s=d.extra.options?[].concat(HE(d.extra.options),[ZE(ZE({},i.result),{},{suboptions:[]})]):[ZE(ZE({},i.result),{},{suboptions:[]})],p=ZE(ZE({},d.extra),{},{options:s}),h(ZE(ZE({},d),{},{loading:!1,extra:p})),L(p),l(Dn.Success,f("OPTION_ADDED","Option added")),U(ZE(ZE({},i.result),{},{suboptions:[]}),"edit")),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(ZE(ZE({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=KE(a.a.mark((function e(t){var o,i,s,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,f("LOADING","Loading")),h(ZE(ZE({},d),{},{loading:!0})),o={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},e.next=6,fetch("".concat(u.root,"/business/").concat(r.id,"/extras/").concat(n.id,"/options/").concat(t),o);case 6:return i=e.sent,e.next=9,i.json();case 9:e.sent.error||(s=d.extra.options.filter((function(e){return e.id!==t})),p=ZE(ZE({},d.extra),{},{options:s}),h(ZE(ZE({},d),{},{loading:!1,extra:p})),L(p),l(Dn.Success,f("OPTION_DELETED","Option deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(ZE(ZE({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var t=KE(a.a.mark((function t(){var i,s,p,y,v,m;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(Dn.Info,f("LOADING","Loading")),h(ZE(ZE({},d),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},t.next=6,fetch("".concat(u.root,"/business/").concat(r.id,"/extras/").concat(n.id),i);case 6:return s=t.sent,t.next=9,s.json();case 9:t.sent.error||(p=r.extras.filter((function(e){return e.id!==n.id})),o&&(y=ZE(ZE({},r),{},{extras:p}),v=y.categories.map((function(e){var t=e.products.map((function(e){var t=e.extras.filter((function(e){return e.id!==n.id}));return ZE(ZE({},e),{},{extras:t})}));return ZE(ZE({},e),{},{products:t})})),m=ZE(ZE({},y),{},{categories:v}),o(m)),l(Dn.Success,f("EXTRA_DELETED","Extra deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),h(ZE(ZE({},d),{},{loading:!1,error:t.t0.message}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e,t,r,n,o;Object.keys(v.changes).length&&(""===(null==v||null===(e=v.changes)||void 0===e?void 0:e.name)||""===(null==v||null===(t=v.changes)||void 0===t?void 0:t.min)||""===(null==v||null===(r=v.changes)||void 0===r?void 0:r.max)?S({name:""===(null==v||null===(n=v.changes)||void 0===n?void 0:n.name),min:""===(null==v||null===(o=v.changes)||void 0===o?void 0:o.min),max:""===(null==v?void 0:v.changes.max)}):F())}),[v]),Object(i.useEffect)((function(){m({changes:{},result:{}}),h(ZE(ZE({},d),{},{extra:n}))}),[n]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,VE({},e,{editErrors:j,changesState:v,cleanChangesState:D,extraState:d,editOptionId:g,addChangesState:P,cleanEditErrors:function(){return S({})},handleChangeImage:function(e,t){var r=new window.FileReader;r.readAsDataURL(e),t===g?r.onload=function(){m({result:{},changes:ZE(ZE({},v.changes),{},{image:r.result})})}:(O(t),r.onload=function(){m({result:{},changes:{image:r.result}})}),r.onerror=function(e){return console.log(e)}},handleChangeInput:function(e,t){t===g?m({result:{},changes:ZE(ZE({},v.changes),{},QE({},e.target.name,e.target.value))}):(O(t),m({result:{},changes:QE({},e.target.name,e.target.value)}))},handleChangeOptionEnable:function(e,t){t===g?m({result:{},changes:ZE(ZE({},v.changes),{},{enabled:e})}):(O(t),m({result:{},changes:{enabled:e}}))},handleAddOption:B,handleChangeAddOption:function(e){C(ZE(ZE({},P),{},QE({},e.target.name,e.target.value)))},handleChangeAddOptionEnable:function(e){C(ZE(ZE({},P),{},{enabled:e}))},handleDeteteOption:M,handleDeleteExtra:R,handleSucccessDeleteOption:function(e){var t=d.extra.options.filter((function(t){return t.id!==e})),r=ZE(ZE({},d.extra),{},{options:t});h(ZE(ZE({},d),{},{loading:!1,extra:r})),L(r)},curOption:x,openModal:_,setOpenModal:k,handleOpenModal:U})))};function oP(){return oP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oP.apply(this,arguments)}function aP(e){return function(e){if(Array.isArray(e))return dP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iP(Object(r),!0).forEach((function(t){uP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function uP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cP(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function lP(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){cP(a,n,o,i,s,"next",e)}function s(e){cP(a,n,o,i,s,"throw",e)}i(void 0)}))}}function fP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||pP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pP(e,t){if(e){if("string"==typeof e)return dP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dP(e,t):void 0}}function dP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}nP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},nP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var hP=function(e){var t=e.businessId,r=e.extraId,n=e.optionId,o=e.subOptionId,u=e.metafields,c=e.UIComponent,l=e.handleSuccessAddMetaFields,f=e.handleSuccessDeleteBusinessMetaFields,p=fP(nr(),1)[0],d=fP(dr(),1)[0],h=fP(Fn(),2)[1].showToast,y=fP(Lr(),2)[1],v=fP(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),m=v[0],b=v[1],g=fP(Object(i.useState)({loading:!1,result:{error:!1}}),2),O=g[0],w=g[1],j=function(){var e=lP(a.a.mark((function e(){var i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(sP(sP({},m),{},{loading:!0})),i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},e.next=5,fetch("".concat(p.root,"/business/").concat(t,"/extras/").concat(r,"/options/").concat(n,"/suboptions/").concat(o,"/metafields"),i);case 5:return s=e.sent,e.next=8,s.json();case 8:u=e.sent,c=u.result,b(sP(sP({},m),{},{loading:!1,metaFields:c})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(sP(sP({},m),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=lP(a.a.mark((function e(i){var s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dn.Info,y("LOADING","Loading")),w(sP(sP({},O),{},{loading:!0})),s={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},e.next=6,fetch("".concat(p.root,"/business/").concat(t,"/extras/").concat(r,"/options/").concat(n,"/suboptions/").concat(o,"/metafields/").concat(i),s);case 6:e.sent.ok&&(h(Dn.Success,y("METAFIELD_DELETED","Metafield deleted")),u=m.metaFields.filter((function(e){return e.id!==i})),b(sP(sP({},m),{},{metaFields:u})),w({loading:!1,result:{error:!1}}),f&&f(i)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),w({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=lP(a.a.mark((function e(i){var s,u,c,f,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Dn.Info,y("LOADING","Loading")),w(sP(sP({},O),{},{loading:!0})),s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)},body:JSON.stringify(i)},e.next=6,fetch("".concat(p.root,"/business/").concat(t,"/extras/").concat(r,"/options/").concat(n,"/suboptions/").concat(o,"/metafields"),s);case 6:return u=e.sent,e.next=9,u.json();case 9:c=e.sent,f=c.error,v=c.result,f?w({loading:!1,result:{error:!0,result:v}}):(h(Dn.Success,y("METAFIELD_ADDED","Metafield added")),[],g=[].concat(aP(m.metaFields),[v]),b(sP(sP({},m),{},{metaFields:g})),w({loading:!1,result:{error:!1}}),l&&l(v)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),w({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){u?b(sP(sP({},m),{},{metaFields:u})):j()}),[u]),s.a.createElement(s.a.Fragment,null,c&&s.a.createElement(c,oP({},e,{metaFieldsList:m,actionState:O,handleDeleteMetaField:S,handeAddMetaField:E})))};function yP(){return yP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yP.apply(this,arguments)}function vP(e){return function(e){if(Array.isArray(e))return EP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||SP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mP(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function bP(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){mP(a,n,o,i,s,"next",e)}function s(e){mP(a,n,o,i,s,"throw",e)}i(void 0)}))}}function gP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function OP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gP(Object(r),!0).forEach((function(t){wP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||SP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SP(e,t){if(e){if("string"==typeof e)return EP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?EP(e,t):void 0}}function EP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}hP.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},hP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var PP=function(e){var t=e.business,r=e.UIComponent,n=e.product,o=e.handleUpdateBusinessState,u=jP(nr(),1)[0],c=jP(dr(),1)[0].token,l=jP(Fn(),2)[1].showToast,f=jP(Lr(),2)[1],p=jP(Object(i.useState)({product:n,loading:!1,error:null}),2),d=p[0],h=p[1],y=jP(Object(i.useState)({extras:null==t?void 0:t.extras,loading:!1,error:null}),2),v=y[0],m=y[1],b=jP(Object(i.useState)({}),2),g=b[0],O=b[1],w=jP(Object(i.useState)(!1),2),j=w[0],S=w[1],E=function(e,t){if(o){var r=t.categories.map((function(t){if(t.id===parseInt(null==n?void 0:n.category_id)){var r=t.products.map((function(t){return t.id===(null==n?void 0:n.id)&&Object.assign(t,e),t}));return OP(OP({},t),{},{products:r})}return t})),a=OP(OP({},t),{},{categories:r});o(a)}},P=function(){var e=bP(a.a.mark((function e(r){var o,i,s,p,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={business_id:null==t?void 0:t.id,category_id:null==n?void 0:n.category_id,product_id:null==n?void 0:n.id,extras:JSON.stringify(r)},l(Dn.Info,f("LOADING","Loading")),h(OP(OP({},d),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(o)},e.next=7,fetch("".concat(u.root,"/business/").concat(t.id,"/categories/").concat(null==n?void 0:n.category_id,"/products/").concat(n.id),i);case 7:return s=e.sent,e.next=10,s.json();case 10:e.sent.error||(p=null==v?void 0:v.extras.filter((function(e){return r.includes(e.id)})),y=OP(OP({},d.product),{},{extras:p}),h(OP(OP({},d),{},{loading:!1,product:y})),E(y,t),l(Dn.Success,f("EXTRA_SAVED","Extra saved"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),h(OP(OP({},d),{},{loading:!1,error:e.t0.message}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=bP(a.a.mark((function e(r,i){var s,p,y,b,g,O,w,j,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,f("LOADING","Loading")),m(OP(OP({},v),{},{loading:!0})),s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(i)},e.next=6,fetch("".concat(u.root,"/business/").concat(t.id,"/extras/").concat(r),s);case 6:return p=e.sent,e.next=9,p.json();case 9:(y=e.sent).error||(b=v.extras.filter((function(e){return e.id===y.result.id&&Object.assign(e,y.result),!0})),m(OP(OP({},v),{},{loading:!1,extras:b})),g=d.product.extras.filter((function(e){return e.id===y.result.id&&Object.assign(e,y.result),!0})),O=OP(OP({},n),{},{extras:g}),h(OP(OP({},d),{},{product:O})),o&&(w=OP(OP({},t),{},{extras:b}),j=w.categories.map((function(e){var t=e.products.map((function(e){var t=e.extras.filter((function(e){return e.id===y.result.id&&Object.assign(e,y.result),!0}));return OP(OP({},e),{},{extras:t})}));return OP(OP({},e),{},{products:t})})),S=OP(OP({},w),{},{categories:j}),o(S)),l(Dn.Success,f("EXTRA_SAVED","Extra saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(OP(OP({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),I=function(){var e=bP(a.a.mark((function e(r){var i,s,p,y,b,g,O,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(Dn.Info,f("LOADING","Loading")),m(OP(OP({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},e.next=6,fetch("".concat(u.root,"/business/").concat(t.id,"/extras/").concat(r),i);case 6:return s=e.sent,e.next=9,s.json();case 9:e.sent.error||(p=v.extras.filter((function(e){return e.id!==r})),m(OP(OP({},v),{},{loading:!1,extras:p})),y=d.product.extras.filter((function(e){return e.id!==r})),b=OP(OP({},n),{},{extras:y}),h(OP(OP({},d),{},{product:b})),o&&(g=OP(OP({},t),{},{extras:p}),O=g.categories.map((function(e){var t=e.products.map((function(e){var t=e.extras.filter((function(e){return e.id!==r}));return OP(OP({},e),{},{extras:t})}));return OP(OP({},e),{},{products:t})})),w=OP(OP({},g),{},{categories:O}),o(w)),l(Dn.Success,f("EXTRA_DELETED","Extra deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),h(OP(OP({},d),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=bP(a.a.mark((function e(){var r,n,i,s,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(g).length){e.next=3;break}return S(!1),e.abrupt("return");case 3:return e.prev=3,r=OP({business_id:null==t?void 0:t.id},g),l(Dn.Info,f("LOADING","Loading")),m(OP(OP({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(r)},e.next=10,fetch("".concat(u.root,"/business/").concat(t.id,"/extras"),n);case 10:return i=e.sent,e.next=13,i.json();case 13:(s=e.sent).error||(O({}),S(!1),p=[].concat(vP(v.extras),[s.result]),m(OP(OP({},v),{},{loading:!1,extras:p})),o&&(d=OP(OP({},t),{},{extras:p}),o(d)),l(Dn.Success,f("EXTRA_ADDED","Extra added"))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),m(OP(OP({},v),{},{loading:!1,error:e.t0.message}));case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h(OP(OP({},d),{},{product:n}))}),[n]),Object(i.useEffect)((function(){m(OP(OP({},v),{},{extras:null==t?void 0:t.extras}))}),[t]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,yP({},e,{changesState:g,isAddMode:j,productState:d,extrasState:v,handleClickExtra:function(e,t){var r;r=d.product.extras?d.product.extras.reduce((function(e,t){return[].concat(vP(e),[t.id])}),[]):[],t?r.push(e):r=r.filter((function(t){return t!==e})),P(r)},handleChangeExtraInput:function(e,t){var r={name:e.target.value};C(t,r)},handleDeteteExtra:I,handleOpenAddForm:function(){return S(!0)},handleAddExtra:x,handleChangeAddExtraInput:function(e){O({name:e.target.value})}})))};function CP(){return CP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CP.apply(this,arguments)}function IP(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function xP(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){IP(a,n,o,i,s,"next",e)}function s(e){IP(a,n,o,i,s,"throw",e)}i(void 0)}))}}function AP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function TP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AP(Object(r),!0).forEach((function(t){_P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return DP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DP(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}PP.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},PP.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var UP=function(e){var t,r,n,o,u,c,l,f=e.UIComponent,p=e.useOrderContext,d=e.onSave,h={},y=kP(nr(),1)[0],v=kP(Object(i.useState)({product:e.product,loading:!1,error:null}),2),m=v[0],b=v[1],g=kP(Object(i.useState)({ingredients:{},options:{}}),2),O=g[0],w=g[1],j=kP(Object(i.useState)({}),2),S=j[0],E=j[1],P=kP(Object(i.useState)(null),2),C=P[0],I=P[1],x=void 0!==(null===(t=e.productCart)||void 0===t?void 0:t.code),A=kP(vn(),2),T=A[0],_=A[1],k=_.addProduct,D=_.updateProduct,U=x?e.productCart.quantity:0,L=T.carts["businessId:".concat(e.businessId)],F=m.product&&(null==L||null===(r=L.products)||void 0===r?void 0:r.find((function(e){return e.id===m.product.id}))),B=((null==F?void 0:F.quantity)||0)-U,M=((null==L||null===(n=L.products)||void 0===n?void 0:n.reduce((function(e,t){return e+(m.product&&t.id===m.product.id?t.quantity:0)}),0))||0)-U,R=kP(en(),1)[0],N=(R.configs.max_product_amount?parseInt(R.configs.max_product_amount):100)-B,z=(null!==(o=m.product)&&void 0!==o&&o.inventoried?null===(u=m.product)||void 0===u?void 0:u.quantity:void 0)-M,G=(null===(c=m.product)||void 0===c?void 0:c.inventoried)&&0===(null===(l=m.product)||void 0===l?void 0:l.quantity);z=isNaN(z)?N:z;var q=Math.min(N,z),Y=function(e){for(var t,r=0,n=0;n<(null===(o=m.product)||void 0===o?void 0:o.extras.length);n++)for(var o,a,i=null===(a=m.product)||void 0===a?void 0:a.extras[n],s=0;s<i.options.length;s++)for(var u=i.options[s],c=0;c<u.suboptions.length;c++){var l,f,p=u.suboptions[c];if(null!==(l=e.options["id:".concat(u.id)])&&void 0!==l&&null!==(f=l.suboptions["id:".concat(p.id)])&&void 0!==f&&f.selected){var d=e.options["id:".concat(u.id)].suboptions["id:".concat(p.id)],h=u.allow_suboption_quantity?d.quantity:1;r+=(u.with_half_option&&p.half_price&&"whole"!==d.position?p.half_price:p.price)*h}}return(null===(t=m.product)||void 0===t?void 0:t.price)+r},$=function(){var t=xP(a.a.mark((function t(){var r,n,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,b(TP(TP({},m),{},{loading:!0})),r={},h.product=r,t.next=6,y.businesses(e.businessId).categories(e.categoryId).products(e.productId).get({cancelToken:r});case 6:n=t.sent,o=n.content.result,b(TP(TP({},m),{},{loading:!1,product:o})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),b(TP(TP({},m),{},{loading:!1,error:[t.t0.message]}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),J=function e(t,r){m.product.extras.forEach((function(n){n.options.forEach((function(n){if(n.respect_to===r){var o,a=null===(o=t.options["id:".concat(n.id)])||void 0===o?void 0:o.suboptions;a&&Object.keys(a).map((function(r){return e(t,parseInt(r.split(":")[1]))})),t.options["id:".concat(n.id)]&&(t.options["id:".concat(n.id)].suboptions={})}}))}))},V=function(e,t,r){var n=JSON.parse(JSON.stringify(O));if(n.options||(n.options={}),n.options["id:".concat(r.id)]||(n.options["id:".concat(r.id)]={id:r.id,name:r.name,suboptions:{}}),e.selected){if(r.min===r.max&&1===r.min){var o=n.options["id:".concat(r.id)].suboptions;o&&Object.keys(o).map((function(e){return J(n,parseInt(e.split(":")[1]))})),n.options["id:".concat(r.id)]&&(n.options["id:".concat(r.id)].suboptions={})}n.options["id:".concat(r.id)].suboptions["id:".concat(t.id)]=e}else delete n.options["id:".concat(r.id)].suboptions["id:".concat(t.id)],J(n,t.id);var a=Object.keys(n.options["id:".concat(r.id)].suboptions).length;r.limit_suboptions_by_max&&(a=Object.values(n.options["id:".concat(r.id)].suboptions).reduce((function(e,t){return e+t.quantity}),0)),a<=r.max&&(n.options["id:".concat(r.id)].balance=a,n.unitTotal=Y(n),n.total=n.unitTotal*n.quantity,w(n))},H=function(){var e={};return m.product?(m.product.extras.forEach((function(t){t.options.map((function(t){var r,n=null===(r=O.options["id:".concat(t.id)])||void 0===r?void 0:r.suboptions,o=n?Object.keys(n).length:0,a=!1;if(t.respect_to&&O.options){var i=O.options;for(var s in i){var u;if(null!==(u=i[s].suboptions["id:".concat(t.respect_to)])&&void 0!==u&&u.selected){a=!0;break}}}(!t.respect_to||a)&&(t.min>o||t.max<o)&&(e["id:".concat(t.id)]=!0)}))})),E(e),e):e},W=function(){var t=xP(a.a.mark((function t(){var r,n,o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=H(),0!==Object.keys(r).length){t.next=15;break}if(n=!0,!p){t.next=14;break}if(n=!1,null!==(o=e.productCart)&&void 0!==o&&o.code){t.next=11;break}return t.next=8,k(O);case 8:n=t.sent,t.next=14;break;case 11:return t.next=13,D(O);case 13:n=t.sent;case 14:n&&d(O,!(null!==(i=e.productCart)&&void 0!==i&&i.code));case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){m.product&&function(t){var r,n,o,a,i={};for(var s in t.ingredients){var u=t.ingredients[s];i["id:".concat(u.id)]={selected:!0}}var c=TP(TP({},e.productCart),{},{id:t.id,price:t.price,name:t.name,businessId:e.businessId,categoryId:t.category_id,inventoried:t.inventoried,stock:t.quantity,ingredients:(null===(r=e.productCart)||void 0===r?void 0:r.ingredients)||i,options:(null===(n=e.productCart)||void 0===n?void 0:n.options)||{},comment:(null===(o=e.productCart)||void 0===o?void 0:o.comment)||null,quantity:(null===(a=e.productCart)||void 0===a?void 0:a.quantity)||1});c.unitTotal=Y(c),c.total=c.unitTotal*c.quantity,w(c)}(m.product)}),[m.product,e.productCart]),Object(i.useEffect)((function(){H()}),[O]),Object(i.useEffect)((function(){if(null!=m&&m.product&&Object.keys(null==m?void 0:m.product).length){var e=m.product.extras.map((function(e){return e.options.find((function(e){return 1===e.min&&1===e.max&&1===e.suboptions.length}))}))[0];if(!e)return;var t=e.suboptions[0],r=e.with_half_option&&t.half_price&&"whole"!==(null==t?void 0:t.position)?t.half_price:t.price,n={id:t.id,name:t.name,position:t.position||"whole",price:r,quantity:1,selected:!0,total:r};I({state:n,suboption:t,option:e})}}),[m.product]),Object(i.useEffect)((function(){if(C){var e=C.state,t=C.suboption,r=C.option;V(e,t,r)}}),[C]),Object(i.useEffect)((function(){if(!(e.product||e.businessId&&e.categoryId&&e.productId))throw new Error("`businessId` && `categoryId` && `productId` are required if `product` was not provided.");return!e.product&&e.businessId&&e.categoryId&&e.productId&&$(),function(){h.product&&h.product.cancel()}}),[]),s.a.createElement(s.a.Fragment,null,f&&s.a.createElement(f,CP({},e,{productObject:m,productCart:O,errors:S,editMode:x,isSoldOut:G,maxProductQuantity:q,increment:function(){q<=0||O.quantity>=q||(O.quantity++,O.unitTotal=Y(O),O.total=O.unitTotal*O.quantity,w(TP({},O)))},decrement:function(){0!==O.quantity&&(O.quantity--,O.unitTotal=Y(O),O.total=O.unitTotal*O.quantity,w(TP({},O)))},handleSave:W,showOption:function(e){var t=!0;if(e.respect_to&&(t=!1,O.options)){var r=O.options;for(var n in r){var o;if(null!==(o=r[n].suboptions["id:".concat(e.respect_to)])&&void 0!==o&&o.selected){t=!0;break}}}return t},handleChangeIngredientState:function(e,t){O.ingredients["id:".concat(t.id)]=e,w(TP(TP({},O),{},{ingredients:O.ingredients}))},handleChangeSuboptionState:V,handleChangeCommentState:function(e){var t=e.target.value;O.comment=t,w(TP(TP({},O),{},{comment:O.comment}))}})))};function LP(){return LP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LP.apply(this,arguments)}function FP(e){return function(e){if(Array.isArray(e))return YP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?BP(Object(r),!0).forEach((function(t){RP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function RP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NP(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function zP(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){NP(a,n,o,i,s,"next",e)}function s(e){NP(a,n,o,i,s,"throw",e)}i(void 0)}))}}function GP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||qP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qP(e,t){if(e){if("string"==typeof e)return YP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?YP(e,t):void 0}}function YP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}UP.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,categoryId:c.a.number,productId:c.a.number,product:c.a.object,productCart:c.a.object,useOrderContext:c.a.bool,onSave:c.a.func},UP.defaultProps={productCart:{},useOrderContext:!0,balance:0};var $P=function(e){var t=e.UIComponent,r=e.business,n=e.categoryId,o=e.product,u=e.handleSuccessUpdate,c=GP(nr(),1)[0],l=GP(dr(),1)[0].token,f=GP(Fn(),2)[1].showToast,p=GP(Lr(),2)[1],d=GP(Object(i.useState)({loading:!1,gallery:[],photos:[],videos:[],error:null}),2),h=d[0],y=d[1],v=GP(Object(i.useState)({changes:{},itemId:null,loading:!1,error:null}),2),m=v[0],b=v[1],g=function(){var e=zP(a.a.mark((function e(){var t,i,s,u,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(MP(MP({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=5,fetch("".concat(c.root,"/business/").concat(r.id,"/categories/").concat(n,"/products/").concat(o.id,"/gallery"),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(s=e.sent).error?y(MP(MP({},h),{},{loading:!1,error:s.result})):(u=s.result.filter((function(e){return 1===e.type})),f=s.result.filter((function(e){return 2===e.type})),y(MP(MP({},h),{},{loading:!1,gallery:s.result,photos:u,videos:f}))),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),y(MP(MP({},h),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=zP(a.a.mark((function e(t){var i,s,d,v,g,O,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(MP(MP({},m),{},{loading:!0})),f(Dn.Info,p("LOADING","Loading")),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(t)},e.next=6,fetch("".concat(c.root,"/business/").concat(r.id,"/categories/").concat(n,"/products/").concat(o.id,"/gallery"),i);case 6:return s=e.sent,e.next=9,s.json();case 9:(d=e.sent).error?b(MP(MP({},m),{},{loading:!1,error:d.result})):(b(MP(MP({},m),{},{loading:!1,changes:{}})),f(Dn.Success,p("PRODUCT_GALLERY_ITEM_ADDED","Product gallery item added")),O=[].concat(FP(h.gallery),[d.result]),1===(null===(v=d.result)||void 0===v?void 0:v.type)&&y(MP(MP({},h),{},{gallery:O,photos:[].concat(FP(h.photos),[d.result])})),2===(null===(g=d.result)||void 0===g?void 0:g.type)&&y(MP(MP({},h),{},{gallery:O,videos:[].concat(FP(h.videos),[d.result])})),w=MP(MP({},o),{},{gallery:O}),u&&u(w)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(MP(MP({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=zP(a.a.mark((function e(){var t,i,s,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(MP(MP({},m),{},{loading:!0})),f(Dn.Info,p("LOADING","Loading")),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(null==m?void 0:m.changes)},e.next=6,fetch("".concat(c.root,"/business/").concat(r.id,"/categories/").concat(n,"/products/").concat(o.id,"/gallery/").concat(null==m?void 0:m.itemId),t);case 6:return i=e.sent,e.next=9,i.json();case 9:(s=e.sent).error?b(MP(MP({},m),{},{loading:!1,error:s.result})):(b(MP(MP({},m),{},{loading:!1,changes:{}})),g=h.gallery.filter((function(e){return e.id===s.result.id&&Object.assign(e,s.result),!0})),1===(null===(d=s.result)||void 0===d?void 0:d.type)&&(O=h.photos.filter((function(e){return e.id===s.result.id&&Object.assign(e,s.result),!0})),y(MP(MP({},y),{},{gallery:g,photos:O}))),2===(null===(v=s.result)||void 0===v?void 0:v.type)&&(w=h.videos.filter((function(e){return e.id===s.result.id&&Object.assign(e,s.result),!0})),y(MP(MP({},y),{},{gallery:g,videos:w}))),j=MP(MP({},o),{},{gallery:g}),u&&u(j),f(Dn.Success,p("PRODUCT_GALLERY_ITEM_SAVED","Product gallery item saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(MP(MP({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=zP(a.a.mark((function e(t,i){var s,d,v,g,O,w,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(MP(MP({},m),{},{loading:!0})),f(Dn.Info,p("LOADING","Loading")),s={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},e.next=6,fetch("".concat(c.root,"/business/").concat(r.id,"/categories/").concat(n,"/products/").concat(o.id,"/gallery/").concat(t),s);case 6:return d=e.sent,e.next=9,d.json();case 9:(v=e.sent).error?b(MP(MP({},m),{},{loading:!1,error:v.result})):(b(MP(MP({},m),{},{loading:!1,changes:{}})),g=null==h?void 0:h.gallery.filter((function(e){return e.id!==t})),1===i&&(O=null==h?void 0:h.photos.filter((function(e){return e.id!==t})),y(MP(MP({},h),{},{gallery:g,photos:O}))),2===i&&(w=null==h?void 0:h.videos.filter((function(e){return e.id!==t})),y(MP(MP({},h),{},{gallery:g,videos:w}))),j=MP(MP({},o),{},{gallery:g}),u&&u(j),f(Dn.Success,p("PRODUCT_GALLERY_ITEM_DELETED","Product gallery item deleted"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(MP(MP({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,r){return e.apply(this,arguments)}}(),S=null,E=function(e,t){b(MP(MP({},m),{},{changes:MP(MP({},m.changes),{},RP({},e.target.name,e.target.value)),itemId:t}))};return Object(i.useEffect)((function(){0!==Object.keys(null==m?void 0:m.changes).length&&null!=m&&m.itemId&&w()}),[null==m?void 0:m.changes]),Object(i.useEffect)((function(){if(null!=o&&o.gallery){var e=null==o?void 0:o.gallery.filter((function(e){return 1===e.type})),t=null==o?void 0:o.gallery.filter((function(e){return 2===e.type}));y(MP(MP({},h),{},{loading:!1,gallery:o.gallery,photos:e,videos:t}))}else g()}),[o]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,LP({},e,{productGalleryState:h,changesState:m,handleChangeImage:function(e,t){var r=new window.FileReader;r.readAsDataURL(e),r.onload=function(){b(MP(MP({},m),{},{changes:MP(MP({},null==m?void 0:m.changes),{},{file:r.result}),itemId:t}))},r.onerror=function(e){return console.log(e)}},handleChangeInput:function(e,t){t?(e.persist(),clearTimeout(S),S=setTimeout((function(){E(e,t)}),1e3)):E(e,t)},handleAddGalleryProduct:function(){var e=MP(MP({},m.changes),{},{type:1});O(e)},handleDeteteProductGalleryItem:j})))};function JP(){return JP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JP.apply(this,arguments)}function VP(e){return function(e){if(Array.isArray(e))return tC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function WP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?HP(Object(r),!0).forEach((function(t){KP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function KP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XP(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ZP(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){XP(a,n,o,i,s,"next",e)}function s(e){XP(a,n,o,i,s,"throw",e)}i(void 0)}))}}function QP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||eC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eC(e,t){if(e){if("string"==typeof e)return tC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tC(e,t):void 0}}function tC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}$P.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$P.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rC=function(e){var t=e.businessId,r=e.categoryId,n=e.productId,o=e.metafields,u=e.UIComponent,c=e.handleSuccessAddMetaFields,l=e.handleSuccessDeleteBusinessMetaFields,f=QP(nr(),1)[0],p=QP(dr(),1)[0],d=QP(Fn(),2)[1].showToast,h=QP(Lr(),2)[1],y=QP(Object(i.useState)({metaFields:[],loading:!1,error:null}),2),v=y[0],m=y[1],b=QP(Object(i.useState)({loading:!1,result:{error:!1}}),2),g=b[0],O=b[1],w=function(){var e=ZP(a.a.mark((function e(){var o,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(WP(WP({},v),{},{loading:!0})),o={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=5,fetch("".concat(f.root,"/business/").concat(t,"/categories/").concat(r,"/products/").concat(n,"/metafields"),o);case 5:return i=e.sent,e.next=8,i.json();case 8:s=e.sent,u=s.result,m(WP(WP({},v),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(WP(WP({},v),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=ZP(a.a.mark((function e(o){var i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dn.Info,h("LOADING","Loading")),O(WP(WP({},g),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)}},e.next=6,fetch("".concat(f.root,"/business/").concat(t,"/categories/").concat(r,"/products/").concat(n,"/metafields/").concat(o),i);case 6:e.sent.ok&&(s=v.metaFields.filter((function(e){return e.id!==o})),m(WP(WP({},v),{},{metaFields:s})),O({loading:!1,result:{error:!1}}),l&&l(o),d(Dn.Success,h("METAFIELD_DELETED","Metafield deleted"))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),O({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=ZP(a.a.mark((function e(o){var i,s,u,l,y,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(Dn.Info,h("LOADING","Loading")),O(WP(WP({},g),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p.token)},body:JSON.stringify(o)},e.next=6,fetch("".concat(f.root,"/business/").concat(t,"/categories/").concat(r,"/products/").concat(n,"/metafields"),i);case 6:return s=e.sent,e.next=9,s.json();case 9:u=e.sent,l=u.error,y=u.result,l?O({loading:!1,result:{error:!0,result:y}}):([],b=[].concat(VP(v.metaFields),[y]),m(WP(WP({},v),{},{metaFields:b})),O({loading:!1,result:{error:!1}}),c&&c(y),d(Dn.Success,h("METAFIELD_ADDED","Metafield added"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),O({result:{error:!0,result:e.t0.message},loading:!1});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o?m(WP(WP({},v),{},{metaFields:o})):w()}),[o]),s.a.createElement(s.a.Fragment,null,u&&s.a.createElement(u,JP({},e,{metaFieldsList:v,actionState:g,handleDeleteMetaField:j,handeAddMetaField:S})))};function nC(){return nC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nC.apply(this,arguments)}function oC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function aC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oC(Object(r),!0).forEach((function(t){iC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function iC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sC(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function uC(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){sC(a,n,o,i,s,"next",e)}function s(e){sC(a,n,o,i,s,"throw",e)}i(void 0)}))}}function cC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}rC.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fC=function(e){var t=e.business,r=e.UIComponent,n=e.product,o=e.handleSuccessUpdate,u=e.setFormTaxState,c=e.formTaxState,l=e.taxes,f=e.setTaxes,p=e.fees,d=e.setFees,h=cC(nr(),1)[0],y=cC(dr(),1)[0],v=cC(Nr(),1)[0],m=cC(Fn(),2)[1].showToast,b=cC(Lr(),2)[1],g=cC(Object(i.useState)(n),2),O=g[0],w=g[1],j=cC(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),S=j[0],E=j[1],P=cC(Object(i.useState)({}),2),C=P[0],I=P[1],x=cC(Object(i.useState)({action:null,payload:null}),2),A=x[0],T=x[1],_=cC(Object(i.useState)({open:!1,content:[]}),2),k=_[0],D=_[1],U=function(){var e=uC(a.a.mark((function e(r){var n,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dn.Info,b("LOADING","Loading")),E(aC(aC({},S),{},{loading:!0})),n=aC({},r||S.changes),e.next=6,h.businesses(null==t?void 0:t.id).categories(null==O?void 0:O.category_id).products(null==O?void 0:O.id).save(n,{accessToken:y.token});case 6:i=e.sent,s=i.content,u=s.error,c=s.result,u?E(aC(aC({},S),{},{loading:!1})):(w(aC(aC({},O),c)),E(aC(aC({},S),{},{loading:!1,changes:{}})),o&&o(c),m(Dn.Success,b("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),E(aC(aC({},S),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=uC(a.a.mark((function e(t,r){var n,o,i,s,u,c,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(Dn.Info,b("LOADING","Loading")),!t){e.next=13;break}return e.next=4,fetch("".concat(h.root,"/").concat(r,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y.auth)},body:JSON.stringify(aC({},C))});case 4:return i=e.sent,e.next=7,i.json();case 7:s=e.sent,u=s.result,o=u,"taxes"===r?(f(aC(aC({},l),{},iC({},"id:".concat(u.id),{name:u.name,description:u.description,id:u.id,rate:u.rate,type:u.type}))),v.emit("tax_changed",{tax:{name:u.name,description:u.description,id:u.id,rate:u.rate,type:u.type}}),m(Dn.Success,b("PRODUCT_TAX_SAVED","Product tax saved"))):(d(aC(aC({},p),{},iC({},"id:".concat(u.id),{name:u.name,description:u.description,id:u.id,fixed:u.fixed,percentage:u.percentage}))),v.emit("fee_changed",{fee:{name:u.name,description:u.description,id:u.id,fixed:u.fixed,percentage:u.percentage}}),m(Dn.Success,b("PRODUCT_FEE_SAVED","Product fee saved"))),e.next=21;break;case 13:return e.next=15,fetch("".concat(h.root,"/").concat(r),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y.auth)},body:JSON.stringify(C)});case 15:return c=e.sent,e.next=18,c.json();case 18:g=e.sent,O=g.result,"taxes"===r?(f(aC(aC({},l),{},iC({},"id:".concat(O.id),{name:O.name,description:O.description,id:O.id,rate:O.rate,type:O.type}))),m(Dn.Success,b("PRODUCT_TAX_SAVED","Product tax saved"))):(d(aC(aC({},p),{},iC({},"id:".concat(O.id),{name:O.name,description:O.description,id:O.id,fixed:O.fixed,percentage:O.percentage}))),m(Dn.Success,b("PRODUCT_FEE_SAVED","Product fee saved")));case 21:if(null===(n=o)||void 0===n||!n.error){e.next=23;break}return e.abrupt("return");case 23:T({action:null,payload:null});case 24:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),F=function(){var e=uC(a.a.mark((function e(t,r){var n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(aC(aC({},c),{},{loading:!0})),m(Dn.Info,b("LOADING","Loading")),!t){e.next=11;break}return e.next=5,fetch("".concat(h.root,"/").concat(r,"/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y.auth)}});case 5:return n=e.sent,e.next=8,n.json();case 8:o=e.sent,o.error||("taxes"===r?(i=l,v.emit("tax_deleted",{tax:i["id:".concat(t)],isRemove:!0}),delete i["id:".concat(t)],f(i),m(Dn.Success,b("PRODUCT_TAX_DELETED","Product tax deleted"))):(s=p,v.emit("fee_deleted",{tax:s["id:".concat(t)],isRemove:!0}),delete s["id:".concat(t)],d(s),m(Dn.Success,b("PRODUCT_FEE_DELETED","Product fee deleted"))));case 11:u(aC(aC({},c),{},{loading:!1}));case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w(n)}),[n]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,nC({},e,{productState:O,taxes:l,fees:p,formTaxState:c,taxToEdit:A,alertState:k,setAlertState:D,formState:S,handleClickProperty:function(e,t){E(aC(aC({},S),{},{changes:aC(aC({},S.changes),{},iC({},e,t))}))},handleChangeTax:function(e,t){I(aC(aC({},C),{},iC({},e,t)))},setTaxToEdit:T,handleSaveTax:L,handleDeleteTax:F,handleUpdateClick:U})))};function pC(){return pC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pC.apply(this,arguments)}function dC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dC(Object(r),!0).forEach((function(t){yC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vC(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function mC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}fC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gC=function(e){var t=e.UIComponent,r=e.businessId,n=e.productId,o=mC(nr(),1)[0],u=mC(dr(),1)[0].token,c=mC(Object(i.useState)({reviews:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(hC(hC({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(u)}},e.next=5,fetch("".concat(o.root,"/business/").concat(r,"/product_reviews/").concat(n,"/reviews"),t);case 5:return i=e.sent,e.next=8,i.json();case 8:(s=e.sent).error?f(hC(hC({},l),{},{loading:!1,error:s.error})):f(hC(hC({},l),{},{loading:!1,reviews:s.result})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(hC(hC({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){vC(a,n,o,i,s,"next",e)}function s(e){vC(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[n]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,pC({},e,{productReviewList:l})))};function OC(){return OC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OC.apply(this,arguments)}function wC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jC(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}gC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},gC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var SC=function(e){var t=e.UIComponent,r=e.slug,n=e.categoryId,o=e.productId,a=e.defaultUrl,u=wC(Object(i.useState)(!1),2),c=u[0],l=u[1],f=a||"".concat(window.location.origin,"/store/").concat(r,"?category=").concat(n,"&product=").concat(o);Object(i.useEffect)((function(){var e;window.document.getElementById("addthis_widget")||((e=document.createElement("script")).type="text/javascript",e.src="https://static.addtoany.com/menu/page.js",e.async=!0,e.defer=!0,e.id="addthis_widget",document.body.appendChild(e))}),[]);return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,OC({},e,{updateShowValue:function(e){l(e),e&&window.a2a&&window.a2a.init()},showShareButton:c,urlToShare:f})))};function EC(){return EC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},EC.apply(this,arguments)}function PC(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function CC(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){PC(a,n,o,i,s,"next",e)}function s(e){PC(a,n,o,i,s,"throw",e)}i(void 0)}))}}function IC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?IC(Object(r),!0).forEach((function(t){AC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function AC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}SC.propTypes={UIComponent:c.a.elementType,slug:c.a.string,categoryId:c.a.number,productId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element)},SC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var kC=function(e){var t,r=e.UIComponent,n=e.handleSuccessUpdate,o=e.handleSuccessDelete,u=e.handleSuccessAdd,c=TC(nr(),1)[0],l=TC(dr(),1)[0].token,f=TC(Fn(),2)[1].showToast,p=TC(Lr(),2)[1],d=TC(Object(i.useState)({tag:null!==(t=e.tag)&&void 0!==t?t:null}),2),h=d[0],y=d[1],v=TC(Object(i.useState)({loading:!1,changes:{},error:null}),2),m=v[0],b=v[1],g=function(){var e=CC(a.a.mark((function e(){var t,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dn.Info,p("LOADING","Loading")),b(xC(xC({},m),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(m.changes)},e.next=6,fetch("".concat(c.root,"/tags/").concat(h.tag.id),t);case 6:return r=e.sent,e.next=9,r.json();case 9:(o=e.sent).error?b(xC(xC({},m),{},{loading:!1,error:o.result})):(y({tag:xC(xC({},h.tag),o.result)}),b({loading:!1,changes:{},error:null}),n&&n(o.result),f(Dn.Success,p("PRODUCT_TAG_SAVED","Product tag saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b(xC(xC({},m),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var t=CC(a.a.mark((function t(){var r,n,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Dn.Info,p("LOADING","Loading")),b(xC(xC({},m),{},{loading:!0})),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(m.changes)},t.next=6,fetch("".concat(c.root,"/tags"),r);case 6:return n=t.sent,t.next=9,n.json();case 9:(o=t.sent).error?b(xC(xC({},m),{},{loading:!1,error:o.result})):(b({loading:!1,changes:{},error:null}),u&&u(o.result),f(Dn.Success,p("PRODUCT_TAG_ADDED","Product tag added")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(xC(xC({},m),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=CC(a.a.mark((function t(){var r,n,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Dn.Info,p("LOADING","Loading")),b(xC(xC({},m),{},{loading:!0})),r={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},t.next=6,fetch("".concat(c.root,"/tags/").concat(h.tag.id),r);case 6:return n=t.sent,t.next=9,n.json();case 9:(i=t.sent).error?b(xC(xC({},m),{},{loading:!1,error:i.result})):(b({loading:!1,changes:{},error:null}),o&&o(h.tag.id),f(Dn.Success,p("PRODUCT_TAG_DELETED","Product tag deleted")),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),b(xC(xC({},m),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var t;b({loading:!1,changes:{},error:null}),y({tag:null!==(t=e.tag)&&void 0!==t?t:null})}),[e.tag]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,EC({},e,{tagState:h,formState:m,handleChangeInput:function(e){b(xC(xC({},m),{},{changes:xC(xC({},m.changes),{},AC({},e.target.name,e.target.value))}))},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){b(xC(xC({},m),{},{changes:xC(xC({},m.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)}},handleUpdateProductTag:g,handleAddProductTag:O,handleDeleteProductTag:w})))};function DC(){return DC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DC.apply(this,arguments)}function UC(e){return function(e){if(Array.isArray(e))return GC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zC(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function FC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LC(Object(r),!0).forEach((function(t){BC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function BC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MC(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function RC(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){MC(a,n,o,i,s,"next",e)}function s(e){MC(a,n,o,i,s,"throw",e)}i(void 0)}))}}function NC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||zC(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zC(e,t){if(e){if("string"==typeof e)return GC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?GC(e,t):void 0}}function GC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}kC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},kC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var qC=function(e){var t=e.tags,r=e.businessId,n=e.product,o=e.UIComponent,u=e.handleSuccessProductUpdate,c=NC(nr(),1)[0],l=NC(dr(),1)[0].token,f=NC(Fn(),2)[1].showToast,p=NC(Lr(),2)[1],d=NC(Object(i.useState)({loading:!1,tags:[],error:null}),2),h=d[0],y=d[1],v=NC(Object(i.useState)([]),2),m=v[0],b=v[1],g=NC(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j=NC(Object(i.useState)(null),2),S=j[0],E=j[1],P=function(){var e=RC(a.a.mark((function e(){var t,r,n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(FC(FC({},h),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},r=null,n=[],S&&n.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(S,"%"))}}),n.length&&(r={conditions:n,conector:"AND"}),o=r?"".concat(c.root,"/tags?where=").concat(JSON.stringify(r)):"".concat(c.root,"/tags"),e.next=10,fetch(o,t);case 10:return i=e.sent,e.next=13,i.json();case 13:(s=e.sent).error?y(FC(FC({},h),{},{loading:!1,error:s.result})):y(FC(FC({},h),{},{loading:!1,tags:s.result})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),y(FC(FC({},h),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=RC(a.a.mark((function e(t){var o,i,s,d,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dn.Info,p("LOADING","Loading")),w({loading:!0,error:null}),o={tags:JSON.stringify(t)},e.next=6,c.businesses(r).categories(n.category_id).products(n.id).save(o,{accessToken:l});case 6:i=e.sent,s=i.content,d=s.error,h=s.result,d?w({loading:!1,error:h}):(w({loading:!1,error:null}),u&&u(h),f(Dn.Success,p("CHANGES_SAVED","Changes saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=t.reduce((function(e,t){return[].concat(UC(e),[t.id])}),[]);b(e)}),[t]),Object(i.useEffect)((function(){P()}),[S]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,DC({},e,{tagsState:h,searchValue:S,onSearch:E,selectedTagIds:m,actionState:O,handleSuccessUpdate:function(e){var t=h.tags.map((function(t){return t.id===e.id?FC(FC({},t),e):t}));y(FC(FC({},h),{},{tags:t}))},handleSuccessDelete:function(e){var t=h.tags.filter((function(t){return t.id!==e}));y(FC(FC({},h),{},{tags:t}))},handleSuccessAdd:function(e){y(FC(FC({},h),{},{tags:[].concat(UC(h.tags),[e])}))},handleChangeProductTag:function(e,t){var r=[];r=e?[].concat(UC(m),[t]):m.filter((function(e){return e!==parseInt(t)})),b(r),C(r)},handleSelectNoneTags:function(){b([]),C([])},handleSelectAllTags:function(){var e=h.tags.reduce((function(e,t){return[].concat(UC(e),[t.id])}),[]);b(e),C(e)}})))};function YC(){return YC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YC.apply(this,arguments)}qC.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},qC.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $C=function(e){var t=e.hero,r=e.gallery,n=e.UIComponent;return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,YC({},e,{hero:t,gallery:r})))};function JC(){return JC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JC.apply(this,arguments)}function VC(e){return function(e){if(Array.isArray(e))return tI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HC(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function WC(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){HC(a,n,o,i,s,"next",e)}function s(e){HC(a,n,o,i,s,"throw",e)}i(void 0)}))}}function KC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function XC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KC(Object(r),!0).forEach((function(t){ZC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ZC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||eI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eI(e,t){if(e){if("string"==typeof e)return tI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tI(e,t):void 0}}function tI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}$C.propTypes={UIComponent:c.a.elementType,hero:c.a.string,gallery:c.a.arrayOf(c.a.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$C.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rI=function(e){var t=e.business,r=e.product,n=e.ingredient,o=e.UIComponent,u=e.handleSuccessUpdate,c=QC(nr(),1)[0],l=QC(dr(),1)[0].token,f=QC(Fn(),2)[1].showToast,p=QC(Lr(),2)[1],d=QC(Object(i.useState)({ingredient:n,loading:!1,error:null}),2),h=d[0],y=d[1],v=QC(Object(i.useState)({}),2),m=v[0],b=v[1],g=QC(Object(i.useState)(!1),2),O=g[0],w=g[1],j=function(){var n=WC(a.a.mark((function n(){var o,i,s,d,v,g;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=XC(XC({},o={business_id:null==t?void 0:t.id,category_id:null==r?void 0:r.category_id,product_id:null==r?void 0:r.id}),m),f(Dn.Info,p("LOADING","Loading")),y(XC(XC({},h),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(o)},n.next=8,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==r?void 0:r.category_id,"/products/").concat(r.id,"/ingredients"),i);case 8:return s=n.sent,n.next=11,s.json();case 11:(d=n.sent).error||(b({}),y(XC(XC({},h),{},{loading:!1,ingredient:d.result})),v=r.ingredients?[].concat(VC(r.ingredients),[d.result]):[d.result],g=XC(XC({},r),{},{ingredients:v}),u&&u(g),f(Dn.Success,p("INGREDIENT_SAVED","Ingredient saved")),e.onClose&&e.onClose()),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),y(XC(XC({},h),{},{loading:!1,error:n.t0.message}));case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(){return n.apply(this,arguments)}}(),S=function(){var e=WC(a.a.mark((function e(){var o,i,s,d,v,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=XC(XC({},o={business_id:null==t?void 0:t.id,category_id:null==r?void 0:r.category_id,product_id:null==r?void 0:r.id}),m),f(Dn.Info,p("LOADING","Loading")),y(XC(XC({},h),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(o)},e.next=8,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==r?void 0:r.category_id,"/products/").concat(r.id,"/ingredients/").concat(n.id),i);case 8:return s=e.sent,e.next=11,s.json();case 11:(d=e.sent).error||(b({}),y(XC(XC({},h),{},{loading:!1,ingredient:d.result})),v=r.ingredients.filter((function(e){return e.id===n.id&&Object.assign(e,d.result),!0})),g=XC(XC({},r),{},{ingredients:v}),u&&u(g),f(Dn.Success,p("INGREDIENT_SAVED","Ingredient saved"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),y(XC(XC({},h),{},{loading:!1,error:e.t0.message}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var o=WC(a.a.mark((function o(){var i,s,d,v,m;return a.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,f(Dn.Info,p("LOADING","Loading")),y(XC(XC({},h),{},{loading:!1})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},o.next=6,fetch("".concat(c.root,"/business/").concat(t.id,"/categories/").concat(null==r?void 0:r.category_id,"/products/").concat(r.id,"/ingredients/").concat(n.id),i);case 6:return s=o.sent,o.next=9,s.json();case 9:(d=o.sent).error||(y(XC(XC({},h),{},{loading:!1,ingredient:d.result})),v=r.ingredients.filter((function(e){return e.id!==n.id})),m=XC(XC({},r),{},{ingredients:v}),u&&u(m),f(Dn.Success,p("INGREDIENT_DELETED","Ingredient deleted")),e.onClose&&e.onClose()),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0),y(XC(XC({},h),{},{loading:!1,error:o.t0.message}));case 16:case"end":return o.stop()}}),o,null,[[0,13]])})));return function(){return o.apply(this,arguments)}}();return Object(i.useEffect)((function(){b({}),y(XC(XC({},h),{},{ingredient:n})),w(!n)}),[n]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,JC({},e,{ingredientState:h,changesState:m,isAddMode:O,handleChangeInput:function(e){b(XC(XC({},m),{},ZC({},e.target.name,e.target.value)))},handleDeleteIngredient:E,handleAddIngredient:j,handleUpdateIngredient:S})))};rI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var nI=function(e){var t=e.UIComponent;return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,e))};function oI(){return oI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oI.apply(this,arguments)}function aI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function iI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aI(Object(r),!0).forEach((function(t){sI(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aI(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}nI.propTypes={UIComponent:c.a.elementType,option:c.a.object.isRequired,error:c.a.bool},nI.defaultProps={error:!1};var uI=function(e){var t=e.UIComponent,r=e.balance,n=e.option,o=e.suboption,a=e.onChange,i=e.state.selected||e.state.quantity>0,u=0;i&&e.state.quantity&&e.state.quantity>0?u=e.state.quantity:i&&(u=1);var c=e.state.position||"whole",l=n.with_half_option&&o.half_price&&"whole"!==c?o.half_price:o.price,f={id:o.id,name:o.name,price:l,selected:i,quantity:u,position:c,total:l*u},p=function(e){a&&a(e,o,n)};return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,oI({},e,{state:f,increment:function(){n.limit_suboptions_by_max&&r===n.max||(n.limit_suboptions_by_max||f.quantity!==o.max)&&p(iI(iI({},f),{},{selected:0===f.quantity||f.selected,quantity:f.quantity+1,total:f.price*(f.quantity+1)}))},decrement:function(){0!==f.quantity&&p(iI(iI({},f),{},{selected:1!==f.quantity&&f.selected,quantity:f.quantity-1,total:f.price*(f.quantity-1)}))},changePosition:function(e){var t=n.with_half_option&&o.half_price&&"whole"!==e?o.half_price:o.price;p(iI(iI({},f),{},{position:e,price:t,total:t*f.quantity}))},toggleSelect:function(){!f.selected&&n.limit_suboptions_by_max&&r===n.max||p(iI(iI({},f),{},{quantity:f.selected?0:1,selected:!f.selected}))}})))};function cI(){return cI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cI.apply(this,arguments)}function lI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fI(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}uI.propTypes={UIComponent:c.a.elementType,balance:c.a.number.isRequired,option:c.a.object.isRequired,suboption:c.a.object.isRequired,state:c.a.shape({selected:c.a.bool,quantity:c.a.number,position:c.a.string}).isRequired,onChange:c.a.func},uI.defaultProps={state:{},balance:0};var pI=function(e){var t=e.categories,r=e.UIComponent,n=lI(Object(i.useState)(t),2),o=n[0],a=n[1];return Object(i.useEffect)((function(){a(t.filter((function(e){return e.id})))}),[t]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,cI({},e,{categories:o})))};function dI(){return dI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dI.apply(this,arguments)}function hI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hI(Object(r),!0).forEach((function(t){vI(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hI(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mI(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function bI(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){mI(a,n,o,i,s,"next",e)}function s(e){mI(a,n,o,i,s,"throw",e)}i(void 0)}))}}function gI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return OI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OI(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}pI.propTypes={UIComponent:c.a.elementType,productsList:c.a.object,categories:c.a.arrayOf(c.a.object),isAllCategory:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},pI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var wI=function(e){var t=e.isSearchByName,r=e.isSearchByDescription,n=e.businessId,o=e.UIComponent,u=gI(nr(),1)[0],c=gI(vn(),1)[0],l=gI(Object(i.useState)(null),2),f=l[0],p=l[1],d=gI(Object(i.useState)(null),2),h=d[0],y=d[1],v=gI(Object(i.useState)({products:[],loading:!0,error:!1}),2),m=v[0],b=v[1],g=gI(Object(i.useState)([]),2),O=g[0],w=g[1],j=function(){var e=bI(a.a.mark((function e(){var o,i,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(yI(yI({},m),{},{loading:!0})),e.next=4,u.businesses(n).products().parameters({type:(null===(o=c.options)||void 0===o?void 0:o.type)||1}).get();case 4:i=e.sent,s=i.content.result,l=f||h?s.filter((function(e){return o=e.name,a=e.description,(!f||o.toLowerCase().includes(f.toLowerCase())&&t||a.toLowerCase().includes(f.toLowerCase())&&r)&&(n=e.category_id,!h||Number(n)===Number(h));var n,o,a})):s,b(yI(yI({},m),{},{loading:!1,products:l})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),b(yI(yI({},m),{},{loading:!1,error:e.t0}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=bI(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.businesses(n).categories().get();case 2:t=e.sent,r=t.content.result,w(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){j()}),[f,h]),Object(i.useEffect)((function(){S()}),[]),s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,dI({},e,{categoryValue:!!h,categories:O,productsList:m,handlerClickCategory:function(e){return y(e)},handlerChangeSearch:function(e){return p(e)}})))};function jI(){return jI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jI.apply(this,arguments)}function SI(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function EI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function PI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?EI(Object(r),!0).forEach((function(t){CI(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EI(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function CI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function II(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xI(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}wI.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,isSearchByName:c.a.bool,isSearchByDescription:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},wI.defaultProps={isSearchByName:!0,isSearchByDescription:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var AI=function(e){var t=e.UIComponent,r=II(nr(),1)[0],n=II(dr(),1)[0],o=n.token,u=n.loading,c=II(Object(i.useState)({loading:!0,error:null,loyaltyPlans:[],pagination:null}),2),l=c[0],f=c[1],p=II(Object(i.useState)(null),2),d=p[0],h=p[1],y=function(){var e,t=(e=a.a.mark((function e(){var t,n,i,s,c,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,f(PI(PI({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},n="".concat(r.root,"/loyalty_plans"),e.next=8,fetch(n,t);case 8:return i=e.sent,e.next=11,i.json();case 11:s=e.sent,c=s.error,p=s.result,d=s.pagination,f(PI(PI({},l),{},c?{loading:!1,error:p}:{loading:!1,loyaltyPlans:p,pagination:d})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),f(PI(PI({},l),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){SI(a,n,o,i,s,"next",e)}function s(e){SI(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){y()}),[]),Object(i.useEffect)((function(){var e;if(0!==(null==l||null===(e=l.loyaltyPlans)||void 0===e?void 0:e.length)){var t=null==l?void 0:l.loyaltyPlans.find((function(e){return"credit_point"===e.type}));t&&h(PI({},t))}}),[null==l?void 0:l.loyaltyPlans]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,jI({},e,{loyaltyPlanList:l,pointWallet:d,handleUpdateWalletBusiness:function(e){var t=null==d?void 0:d.businesses.map((function(t){return t.id===e.id?PI(PI({},t),e):t}));h(PI(PI({},d),{},{businesses:t}))},handleUpdatePointsWallet:function(e){h(PI({},e))}})))};function TI(){return TI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TI.apply(this,arguments)}function _I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kI(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}AI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},AI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var DI=function(e){var t=e.UIComponent,r=_I(Object(i.useState)(null),2),n=r[0],o=r[1],a=_I(vn(null),1)[0];return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,TI({},e,{orderState:a,optionSelected:n,handleClickOption:function(e){o(e===n?null:e)}})))};function UI(){return UI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UI.apply(this,arguments)}function LI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function FI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LI(Object(r),!0).forEach((function(t){BI(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LI(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function BI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MI(e){return function(e){if(Array.isArray(e))return zI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||NI(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||NI(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NI(e,t){if(e){if("string"==typeof e)return zI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zI(e,t):void 0}}function zI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}DI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},DI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var GI=function(e){var t=e.UIComponent,r=e.scheduleList,n=e.handleChangeScheduleState,o=RI(Object(i.useState)([]),2),a=o[0],u=o[1],c=RI(Object(i.useState)(!1),2),l=c[0],f=c[1],p=RI(Object(i.useState)(!1),2),d=p[0],h=p[1],y=RI(Object(i.useState)({open:{hour:0,minute:0},close:{hour:23,minute:59}}),2),v=y[0],m=y[1],b=RI(Object(i.useState)({}),2),g=b[0],O=b[1],w=RI(Object(i.useState)([]),2),j=w[0],S=w[1],E=function(e){return 60*e.hour+e.minute},P=function(e,t,r){for(var n=60*t.open.hour+t.open.minute,o=60*t.close.hour+t.close.minute,a=0;a<e.length;a++)if(a!==r){var i=60*e[a].open.hour+15*parseInt(e[a].open.minute/15),s=60*e[a].close.hour+15*parseInt(e[a].close.minute/15);if(n<i&&o>s)return!0;if(n<i&&o>i)return!0;if(n>i&&o<s)return!0;if(n<s&&o>s)return!0;if(o===s||n===i)return!0}return!1};return Object(i.useEffect)((function(){0!==a.length&&n(MI(a))}),[a]),Object(i.useEffect)((function(){if(r)u(MI(r));else{for(var e=[],t=0;t<7;t++)e.push({enabled:!0,lapses:[{open:{hour:0,minute:0},close:{hour:23,minute:45}}]});u(e)}}),[r]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,UI({},e,{scheduleState:a,isConflict:l,setIsConflict:f,isTimeChangeError:d,addScheduleTime:v,openAddSchedule:g,setIsTimeChangeError:h,handleEnabledSchedule:function(e,t){var r=MI(a);r[e].enabled=t,u(r)},handleChangeScheduleTime:function(e,t,r,n){var o,i=MI(a),s=MI(i[t].lapses),c=parseInt(e.split(":")[0]),l=parseInt(e.split(":")[1]),p=!1;(n?(p=E({hour:c,minute:l})>=E(s[r].close))?h(!0):o={open:{hour:c,minute:l},close:s[r].close}:(p=E(s[r].open)>=E({hour:c,minute:l}))?h(!0):o={open:s[r].open,close:{hour:c,minute:l}},p)||(P(s,o,r)?f(!0):(i[t].lapses[r]=o,i[t].lapses.sort((function(e,t){return E(e.open)-E(t.open)})),u(i)))},handleDeleteSchedule:function(e,t){var r=MI(a);r[e].lapses.splice(t,1),u(r)},handleOpenAddSchedule:function(e){m({open:{hour:0,minute:0},close:{hour:23,minute:59}}),O(BI({},e,!0))},handleChangeAddScheduleTime:function(e,t){var r=parseInt(e.split(":")[0]),n=parseInt(e.split(":")[1]);t?E({hour:r,minute:n})>=E(v.close)?h(!0):m(FI(FI({},v),{},{open:{hour:r,minute:n}})):E(v.open)>=E({hour:r,minute:n})?h(!0):m(FI(FI({},v),{},{close:{hour:r,minute:n}}))},handleAddSchedule:function(e){var t=MI(a),r=MI(t[e].lapses);P(r,v,null)?f(!0):(t[e].lapses.push(v),t[e].lapses.sort((function(e,t){return E(e.open)-E(t.open)})),u(t),O(BI({},e,!1)))},selectedCopyDays:j,cleanSelectedCopyDays:function(){return S([])},handleSelectCopyTimes:function(e){var t=j.includes(e)?j.filter((function(t){return t!==e})):[].concat(MI(j),[e]);S(t)},handleApplyScheduleCopyTimes:function(e){var t=a.map((function(t,r){if(j.includes(r)){var n=MI(a[e].lapses);return{enabled:a[e].enabled,lapses:n}}return t}));u(t)}})))};function qI(){return qI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qI.apply(this,arguments)}function YI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?YI(Object(r),!0).forEach((function(t){JI(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YI(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function JI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VI(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function HI(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){VI(a,n,o,i,s,"next",e)}function s(e){VI(a,n,o,i,s,"throw",e)}i(void 0)}))}}function WI(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return KI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KI(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}GI.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},GI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var XI=function(e){var t=e.UIComponent,r=e.useChekoutFileds,n=e.handleButtonSignupClick,o=e.handleSuccessSignup,u=e.externalPhoneNumber,c={},l=WI(nr(),1)[0],f=WI(dr(),2)[1].login,p=WI(Jn(),1)[0],d=WI(Object(i.useState)({loading:!1,result:{error:!1}}),2),h=d[0],y=d[1],v=WI(Object(i.useState)({email:"",cellphone:u||"",password:""}),2),m=v[0],b=v[1],g=WI(Object(i.useState)({loading:!1,result:{error:!1}}),2),O=g[0],w=g[1],j=WI(Object(i.useState)({loading:!1,result:{error:!1}}),2),S=j[0],E=j[1],P=function(){var e=HI(a.a.mark((function e(t){var r,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y($I($I({},h),{},{loading:!0})),r={},c.signup=r,n=t||m,e.next=7,l.users().save(n,{cancelToken:r});case 7:i=e.sent,y({result:i.content,loading:!1}),i.content.error||o&&o(i.content.result),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&y({result:{error:!0,result:e.t0.message},loading:!1});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=HI(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w($I($I({},O),{},{loading:!0})),e.next=4,fetch("".concat(l.root,"/auth/sms/twilio/verify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($I($I({},t),{},{cellphone:t.cellphone,country_phone_code:"+".concat(t.country_phone_code)}))});case 4:return r=e.sent,e.next=7,r.json();case 7:n=e.sent,w($I($I({},O),{},{loading:!1,result:n})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),w($I($I({},O),{},{loading:!1,result:{error:e.t0.message}}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=HI(a.a.mark((function e(t){var r,n,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E($I($I({},S),{},{loading:!0})),e.next=4,fetch("".concat(l.root,"/auth/sms/twilio"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return n=e.sent,e.next=7,n.json();case 7:null!=(i=e.sent)&&i.error||null==i||null===(r=i.result)||void 0===r||!r.id||(f({user:null==i?void 0:i.result,token:null==i||null===(s=i.result)||void 0===s||null===(u=s.session)||void 0===u?void 0:u.access_token}),o&&o(null==i?void 0:i.result)),E($I($I({},S),{},{loading:!1,result:i})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),E($I($I({},S),{},{loading:!1,result:{error:e.t0.message}}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(){c.signup&&c.signup.cancel()}}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,qI({},e,{formState:h,validationFields:p,signupData:m,showField:function(e){var t,n,o;return!r||!p.loading&&!(null!==(t=p.fields)&&void 0!==t&&t.checkout[e])||!p.loading&&(null===(n=p.fields)||void 0===n?void 0:n.checkout[e])&&(null===(o=p.fields)||void 0===o?void 0:o.checkout[e].enabled)},isRequiredField:function(e){var t,n,o;return"password"===e||r&&!p.loading&&(null===(t=p.fields)||void 0===t?void 0:t.checkout[e])&&(null===(n=p.fields)||void 0===n?void 0:n.checkout[e].enabled)&&(null===(o=p.fields)||void 0===o?void 0:o.checkout[e].required)},verifyPhoneState:O,checkPhoneCodeState:S,setCheckPhoneCodeState:function(e){E(e||{loading:!1,result:{error:!1}})},handleChangeInput:function(e,t){var r={};t?Object.values(e).map((function(e){r=$I($I({},r),{},JI({},e.name,e.value))})):r=JI({},e.target.name,e.target.value),b($I($I({},m),r))},handleButtonSignupClick:n||P,handleSendVerifyCode:C,handleCheckPhoneCode:I})))};XI.propTypes={UIComponent:c.a.elementType,handleButtonSignupClick:c.a.func,handleSuccessSignup:c.a.func,handleContinueAsGuest:c.a.func,useChekoutFileds:c.a.bool,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToLogin:c.a.string,elementLinkToLogin:c.a.element},XI.defaultProps={useChekoutFileds:!1,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ZI=function(e){var t=e.UIComponent;return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,e))};ZI.propTypes={UIComponent:c.a.elementType,name:c.a.string,minimun:c.a.number,delivery_price:c.a.number,description:c.a.string,distance:c.a.number,delivery_time:c.a.string,pickup_time:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ZI.defaultProps={id:0,name:"",minimun:0,delivery_price:0,description:"",distance:0,delivery_time:""};var QI=function(e){var t=e.UIComponent;return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,e))};QI.propTypes={UIComponent:c.a.elementType,order:c.a.object.isRequired,orderType:c.a.string.isRequired,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},QI.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var ex=function(e){var t=e.UIComponent;return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,e))};ex.propTypes={UIComponent:c.a.elementType,isSoldOut:c.a.bool,images:c.a.string,name:c.a.string,description:c.a.string,price:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},ex.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var tx=["photo"];function rx(e){return rx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rx(e)}function nx(){return nx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nx.apply(this,arguments)}function ox(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ax(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ix(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ax(a,n,o,i,s,"next",e)}function s(e){ax(a,n,o,i,s,"throw",e)}i(void 0)}))}}function sx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ux(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sx(Object(r),!0).forEach((function(t){cx(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var px=function(e){var t=e.UIComponent,r=e.useSessionUser,n=e.refreshSessionUser,o=e.useDefualtSessionManager,u=e.userId,c=e.user,l=e.useValidationFields,f=e.handleButtonUpdateClick,p=e.handleSuccessUpdate,d=e.handleSuccessAdd,h=lx(nr(),1)[0],y=lx(dr(),2),v=y[0],m=y[1].changeUser,b=lx(Jn(),1)[0],g=lx(Object(i.useState)(!1),2),O=g[0],w=g[1],j=lx(Object(i.useState)({loading:!1,result:{error:!1}}),2),S=j[0],E=j[1],P=lx(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),C=P[0],I=P[1],x={},A=o?v.token:e.accessToken;Object(i.useEffect)((function(){if(c){if(!(u||r&&n)||v.loading||e.userData)E({loading:!1,result:{error:!1,result:r&&!n?v.user:c}});else{E(ux(ux({},S),{},{loading:!0}));var t={};x.user=t,h.setAccessToken(A).users(r&&n?v.user.id:u).get({cancelToken:t}).then((function(e){E({loading:!1,result:e.content}),e.content.result&&m(ux(ux({},v.user),e.content.result))})).catch((function(e){"Cancel"!==e.constructor.name&&E({loading:!1,result:{error:!0,result:e.message}})}))}return function(){x.user&&x.user.cancel()}}}),[v.loading,c]);var T=function(){var e=ix(a.a.mark((function e(t,n,o){var i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=2;break}return e.abrupt("return",f(S.result.result,C.changes));case 2:if(e.prev=2,I(ux(ux({},C),{},{loading:!0})),t&&(C.changes=ux(ux({},C.changes),t)),!n){e.next=13;break}return e.next=8,h.users((null==c?void 0:c.id)||S.result.result.id).save({photo:o||C.changes.photo},{accessToken:A});case 8:i=e.sent,s=C.changes,s.photo,u=ox(s,tx),I(ux(ux({},C),{},{changes:i.content.error?C.changes:u,result:i.content,loading:!1})),e.next=17;break;case 13:return e.next=15,h.users((null==c?void 0:c.id)||S.result.result.id).save(C.changes,{accessToken:A});case 15:i=e.sent,I(ux(ux({},C),{},{changes:i.content.error?C.changes:{},result:i.content,loading:!1}));case 17:i.content.error||(E(ux(ux({},S),{},{result:ux(ux({},S.result),i.content)})),r&&m(ux(ux({},v.user),i.content.result)),p&&p(i.content.result)),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),I(ux(ux({},C),{},{result:{error:!0,result:e.t0.message},loading:!1}));case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t,r,n){return e.apply(this,arguments)}}(),_=function(){var t=ix(a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,I(ux(ux({},C),{},{loading:!0})),t.next=4,h.users().save(C.changes,{accessToken:A});case 4:r=t.sent,I(ux(ux({},C),{},{changes:r.content.error?C.changes:{},result:r.content,loading:!1})),r.content.error||(E(ux(ux({},S),{},{result:ux(ux({},S.result),r.content)})),d&&d(r.content.result),e.onClose&&e.onClose()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),I(ux(ux({},C),{},{result:{error:!0,result:t.t0.message},loading:!1}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,nx({},e,{isEdit:O,cleanFormState:function(e){return I(ux(ux({},C),e))},formState:C,userState:S,validationFields:b,showField:function(e){var t,r,n;return!l||!b.loading&&!(null!==(t=b.fields)&&void 0!==t&&t.checkout[e])||!b.loading&&(null===(r=b.fields)||void 0===r?void 0:r.checkout[e])&&(null===(n=b.fields)||void 0===n?void 0:n.checkout[e].enabled)},setFormState:I,handleChangeSwtich:function(e,t){var r=cx({},e,t);I(ux(ux({},C),{},{changes:ux(ux({},C.changes),r)}))},isRequiredField:function(e){var t,r,n;return l&&!b.loading&&(null===(t=b.fields)||void 0===t?void 0:t.checkout[e])&&(null===(r=b.fields)||void 0===r?void 0:r.checkout[e].enabled)&&(null===(n=b.fields)||void 0===n?void 0:n.checkout[e].required)},handleChangeInput:function(e,t){var r={};t?Object.values(e).map((function(e){r=ux(ux({},r),{},cx({},e.name,e.value))})):r=cx({},e.target.name,e.target.value),I(ux(ux({},C),{},{changes:ux(ux({},C.changes),r)}))},handleButtonUpdateClick:T,handleButtonAddClick:_,handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){I(ux(ux({},C),{},{changes:ux(ux({},C.changes),{},{photo:t.result})}))},t.onerror=function(e){return console.log(e)}},toggleIsEdit:function(){return w(!O)},handleChangeUserType:function(e){var t={level:e};I(ux(ux({},C),{},{changes:ux(ux({},C.changes),t)}))}})))};function dx(){return dx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dx.apply(this,arguments)}function hx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hx(Object(r),!0).forEach((function(t){vx(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mx(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function bx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}px.propTypes={UIComponent:c.a.elementType,refreshSessionUser:c.a.bool,handleButtonUpdateClick:c.a.func,handleSuccessUpdate:c.a.func,useValidationFields:c.a.bool,validationFieldsType:c.a.string,useDefualtSessionManager:c.a.bool,accessToken:function(e,t){return void 0!==e[t]&&"string"!=typeof e[t]?new Error("Invalid prop `".concat(t,"` of type `").concat(rx(e[t]),"` supplied to `UserFormDetails`, expected `object`.")):void 0!==e[t]||e.useDefualtSessionManager?void 0:new Error("Invalid prop `".concat(t,"` is required when `useDefualtSessionManager` is false."))},beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element),linkToLogin:c.a.string,elementLinkToLogin:c.a.element},px.defaultProps={useValidationFields:!1,validationFieldsType:"checkout",useDefualtSessionManager:!0,beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Ox=function(e){var t=e.deafultUserTypesSelected,r=e.disabledActiveStateCondition,n=e.UIComponent,o=e.userTypesSelected,u=e.selectedUserActiveState,c=e.searchValue,l=e.isSearchByUserId,f=e.isSearchByUserEmail,p=e.isSearchByUserPhone,d=e.isSearchByUserName,h=bx(nr(),1)[0],y=bx(dr(),1)[0],v=y.token,m=y.loading,b=bx(Object(i.useState)({loading:!1,error:null,result:null}),2),g=b[0],O=b[1],w=function(){var e,n=(e=a.a.mark((function e(n){var i,s,y,b,w,j,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,O(yx(yx({},g),{},{loading:!0})),i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(v)}},s=[],Array.isArray(t)&&s.push({attribute:"level",value:t}),y=[],n&&(o.length>0&&y.push({attribute:"level",value:o}),r||y.push({attribute:"enabled",value:u}),c&&(b=[],l&&b.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),f&&b.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),p&&b.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),d&&(b.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}}),b.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(c,"%"))}})),y.push({conector:"OR",conditions:b}))),w=n?"".concat(h.root,"/users.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(y)):s.length>0?"".concat(h.root,"/users.csv?mode=dashboard&orderBy=id&where=").concat(JSON.stringify(s)):"".concat(h.root,"/users.csv?mode=dashboard&orderBy=id"),e.next=12,fetch(w,i);case 12:return j=e.sent,S=(new Date).getTime(),e.next=16,j.blob().then((function(e){var t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="users_".concat(S,".csv"),r.click()}));case 16:O(yx(yx({},g),{},{loading:!1})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),O(yx(yx({},g),{},{loading:!1,error:e.t0}));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){mx(a,n,o,i,s,"next",e)}function s(e){mx(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,dx({},e,{actionStatus:g,getCSV:w})))};function wx(){return wx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wx.apply(this,arguments)}function jx(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Sx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ex(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sx(Object(r),!0).forEach((function(t){Px(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Px(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ix(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ix(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ix(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Ox.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Ox.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var xx=function(e){var t=e.UIComponent,r=e.businessId,n=e.products,o=e.cartProducts,u=e.onSave,c=Cx(Object(i.useState)({products:[],loading:!0,error:!1}),2),l=c[0],f=c[1],p=Cx(Object(i.useState)([]),2),d=p[0],h=p[1],y=Cx(nr(),1)[0],v=Cx(vn(),1)[0];Object(i.useEffect)((function(){null!=n&&n.length||r?null!=n&&n.length?b(n):m():f(Ex(Ex({},l),{},{error:!0,message:"BusinessId is required when products is not defined"}))}),[]),Object(i.useEffect)((function(){l.loading||b(d)}),[v.loading]);var m=function(){var e,t=(e=a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.businesses(r).products().where([{attribute:"upselling",value:!0}]).parameters({type:1}).get();case 3:t=e.sent,n=t.content.result,h(n),b(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),f(Ex(Ex({},l),{},{loading:!1,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){jx(a,n,o,i,s,"next",e)}function s(e){jx(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),b=function(e){var t=e.filter((function(e){return e.upselling})),r=o.filter((function(e){return t.find((function(t){return t.id===e.id}))}));r.length?f(Ex(Ex({},l),{},{loading:!1,products:t.filter((function(e){return!e.inventoried&&!r.find((function(t){return t.id===e.id}))}))})):f(Ex(Ex({},l),{},{loading:!1,products:t}))};return s.a.createElement(t,wx({},e,{upsellingProducts:l,handleFormProduct:function(e){u(e)}}))};function Ax(){return Ax=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ax.apply(this,arguments)}function Tx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tx(Object(r),!0).forEach((function(t){kx(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dx(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Ux(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Dx(a,n,o,i,s,"next",e)}function s(e){Dx(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Lx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}xx.propTypes={UIComponent:c.a.elementType,upsellingProducts:c.a.array,businessId:c.a.number};var Bx=function(e){var t=e.orderId,r=e.propsToFetch,n=e.asDashboard,o=e.hashKey,u=e.userCustomerId,c=e.UIComponent,l=Lx(dr(),1)[0],f=l.user,p=l.token,d=l.loading,h=Lx(nr(),1)[0],y=Lx(Nr(),1)[0],v=Lx(Object(i.useState)({order:null,loading:!e.order,error:null}),2),m=v[0],b=v[1],g=Lx(Object(i.useState)({status:null,loading:!1,error:null}),2),O=g[0],w=g[1],j=Lx(Object(i.useState)({loading:!1,error:null}),2),S=j[0],E=j[1],P=Lx(Object(i.useState)({loading:!0,error:null,messages:[]}),2),C=P[0],I=P[1],x=Lx(Object(i.useState)(!1),2),A=x[0],T=x[1],_=Pr(),k=e.accessToken||p,D=function(){var e=Ux(a.a.mark((function e(){var r,n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(_x(_x({},C),{},{loading:!0})),r="".concat(h.root,"/orders/").concat(t,"/messages?mode=dashboard"),e.next=5,fetch(r,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(k)}});case 5:return n=e.sent,e.next=8,n.json();case 8:o=e.sent,i=o.error,s=o.result,I(i?_x(_x({},C),{},{loading:!1,error:s}):{messages:s,loading:!1,error:null}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),I(_x(_x({},C),{},{loading:!1,error:[e.t0.Messages]}));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Ux(a.a.mark((function e(r){var n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(_x(_x({},O),{},{loading:!0})),e.next=4,fetch("".concat(h.root,"/orders/").concat(t,"/messages"),{method:"post",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"},body:JSON.stringify({can_see:"0,2,3",comment:"I am on the parking number: ".concat(r),order_id:t,type:2})});case 4:n=e.sent,o=n.status,w(_x(_x({},O),{},{loading:!1,status:o})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),w(_x(_x({},O),{},{loading:!1,error:[e.t0.message]}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Ux(a.a.mark((function e(){var i,s,c,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},o&&(i.headers={"X-uuid-access-X":o}),u&&(i.query={mode:"dashboard"}),e.prev=3,b(_x(_x({},m),{},{loading:!0})),s=r?n?h.setAccessToken(p).orders(t).asDashboard().select(r):h.setAccessToken(p).orders(t).select(r):n?h.setAccessToken(p).orders(t).asDashboard():h.setAccessToken(p).orders(t),e.next=8,s.get();case 8:c=e.sent,l=c.content.result,f=Array.isArray(l)?null:l,b(_x(_x({},m),{},{loading:!1,order:f})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),b(_x(_x({},m),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Ux(a.a.mark((function e(t){var r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(_x(_x({},S),{},{loading:!0})),{}.updateOrder=r={},e.next=7,h.setAccessToken(p).orders(t.id).save({status:t.newStatus},{cancelToken:r});case 7:n=e.sent,o=n.content,E({loading:!1,error:o.error?o.result:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),E(_x(_x({},S),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Ux(a.a.mark((function e(){var r,n,o,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=null==C||null===(r=C.messages[(null==C||null===(n=C.messages)||void 0===n?void 0:n.length)-1])||void 0===r?void 0:r.id,e.prev=1,e.next=4,fetch("".concat(h.root,"/orders/").concat(t,"/messages/").concat(o,"/read"),{method:"GET",headers:{Authorization:"Bearer ".concat(p),"Content-Type":"application/json"}});case 4:return i=e.sent,e.next=7,i.json();case 7:s=e.sent,u=s.result,T(u),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){e.order?b(_x(_x({},m),{},{order:e.order})):L()}),[t]),Object(i.useEffect)((function(){if(!m.loading&&!d){var e=function(e){e.id===m.order.id&&(delete e.total,delete e.subtotal,b(_x(_x({},m),{},{order:Object.assign(m.order,e)})))};return n||_.join("orders_".concat(f.id)),_.on("update_order",e),function(){n||_.leave("orders_".concat(f.id)),_.off("update_order",e)}}}),[m.order,_,d]),Object(i.useEffect)((function(){var e=function(e){b(_x(_x({},m),{},{order:_x(_x({},m.order),{},{user_review:e})}))};return y.on("customer_reviewed",e),function(){y.off("customer_reviewed",e)}}),[m]),Object(i.useEffect)((function(){D()}),[t]),s.a.createElement(s.a.Fragment,null,c&&s.a.createElement(c,Ax({},e,{order:m,messageErrors:O,actionStatus:S,formatPrice:function(e){return e&&"$ ".concat(e.toFixed(2))},handlerSubmit:function(e){var t=e.spot;U(t)},handleUpdateOrderStatus:F,messages:C,setMessages:I,messagesReadList:A,readMessages:B})))};function Mx(){return Mx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mx.apply(this,arguments)}function Rx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rx(Object(r),!0).forEach((function(t){zx(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gx(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function qx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Bx.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),orderId:c.a.oneOfType([c.a.number,c.a.string]),order:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Bx.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $x=function(e){var t=e.UIComponent,r=e.order,n=e.onSaveReview,o=qx(nr(),1)[0],u=qx(dr(),1)[0],c=qx(Object(i.useState)({quality:0,punctiality:0,service:0,packaging:0,comments:""}),2),l=c[0],f=c[1],p=qx(Object(i.useState)({loading:!1,result:{error:!1}}),2),d=p[0],h=p[1],y=function(){var e,t=(e=a.a.mark((function e(){var t,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(Nx(Nx({},d),{},{loading:!0})),e.prev=1,i={order_id:r.id,quality:l.quality,delivery:l.punctiality,service:l.service,package:l.packaging,comment:l.comments,user_id:null==u||null===(t=u.user)||void 0===t?void 0:t.id,business_id:r.business_id},e.next=5,fetch("".concat(o.root,"/business/").concat(r.business_id,"/reviews"),{method:"POST",headers:{Authorization:"Bearer ".concat(u.token),"Content-Type":"application/json"},body:JSON.stringify(i)});case 5:s=e.sent,n&&n(s.content),h({loading:!1,result:s.content}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),h({result:{error:!0,result:e.t0.message},loading:!1});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Gx(a,n,o,i,s,"next",e)}function s(e){Gx(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Mx({},e,{stars:l,order:r,formState:d,handleSendReview:y,handleChangeInput:function(e){f(Nx(Nx({},l),{},{comments:e.target.value}))},handleChangeRating:function(e){f(Nx(Nx({},l),{},zx({},e.target.name,parseInt(e.target.value))))}})))};function Jx(){return Jx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jx.apply(this,arguments)}function Vx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vx(Object(r),!0).forEach((function(t){Wx(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kx(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Xx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Zx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zx(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}$x.propTypes={UIComponent:c.a.elementType,order:c.a.object,onSaveReview:c.a.func,handleSendReview:c.a.func},$x.defaultProps={order:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var Qx=function(e){var t=e.UIComponent,r=e.pageSlug,n=e.onNotFound,o=Xx(Object(i.useState)({body:null,loading:!1,error:null}),2),u=o[0],c=o[1],l=Xx(nr(),1)[0],f={},p=function(){var e,t=(e=a.a.mark((function e(t){var o,i,s,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(Hx(Hx({},u),{},{loading:!0})),e.prev=1,o={},f.page=o,e.next=6,l.pages(t).get({cancelToken:o});case 6:i=e.sent,s=i.content,p=s.error,d=s.result,c(Hx(Hx({},u),{},{loading:!1})),p?(c(Hx(Hx({},u),{},{error:d})),n&&n(r)):c(Hx(Hx({},u),{},{body:d.body})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),"Cancel"!==e.t0.constructor.name&&c(Hx(Hx({},u),{},{loading:!1,error:[e.t0.message]}));case 17:case"end":return e.stop()}}),e,null,[[1,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Kx(a,n,o,i,s,"next",e)}function s(e){Kx(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){return p(r),function(){f.page&&f.page.cancel()}}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Jx({},e,{cmsState:u})))};function eA(){return eA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eA.apply(this,arguments)}function tA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tA(Object(r),!0).forEach((function(t){nA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oA(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function aA(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){oA(a,n,o,i,s,"next",e)}function s(e){oA(a,n,o,i,s,"throw",e)}i(void 0)}))}}function iA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Qx.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Qx.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var uA=function(e){var t=e.UIComponent,r=iA(Lr(),2)[1],n=iA(nr(),1)[0],o=iA(dr(),1)[0].token,u=iA(Object(i.useState)(""),2),c=u[0],l=u[1],f=iA(Object(i.useState)({customer:!1,signup:!1}),2),p=f[0],d=f[1],h=iA(Object(i.useState)({loading:!1,result:{error:!1}}),2),y=h[0],v=h[1],m=iA(Object(i.useState)({users:[],loading:!0,error:null}),2),b=m[0],g=m[1],O=function(){var e=aA(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.filter((function(e){return(null==e?void 0:e.cellphone)===r})))[0]?(v({loading:!1,result:n[0]}),d(rA(rA({},p),{},{customer:!0}))):v({loading:!1,result:{error:!1}});case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),w=function(){var e=aA(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(rA(rA({},b),{},{loading:!0})),e.prev=1,e.next=4,n.setAccessToken(o).users().get();case 4:t=e.sent,r=t.content.result,g(rA(rA({},b),{},{users:r,loading:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),g(rA(rA({},b),{},{loading:!1,error:e.t0.message}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){!function(e,t){var n;function o(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),n>=e.length&&(n=0),n<0&&(n=e.length-1),e[n].classList.add("autocomplete-active")}function a(t){for(var r=document.getElementsByClassName("autocomplete-items"),n=0;n<r.length;n++)t!==r[n]&&t!==e&&r[n].parentNode.removeChild(r[n])}e.addEventListener("input",(function(o){var i,s,u=this.value;if(a(),!u)return!1;n=-1;var c=document.createElement("DIV");for((c=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),c.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(c),s=0;s<(null==t?void 0:t.length);s++){var f,h,y;if((null===(f=t[s])||void 0===f||null===(h=f.cellphone)||void 0===h||null===(y=h.substr(0,null==u?void 0:u.length))||void 0===y?void 0:y.toUpperCase())===(null==u?void 0:u.toUpperCase())){var v,m,w=null===(v=t[s])||void 0===v?void 0:v.cellphone;(i=document.createElement("DIV")).innerHTML="<strong>"+(null==w?void 0:w.substr(0,null==u?void 0:u.length))+"</strong>",i.innerHTML+=null==w?void 0:w.substr(null==u?void 0:u.length),i.innerHTML+=" ("+(null===(m=t[s])||void 0===m?void 0:m.name)+")",i.innerHTML+="<input type='hidden' value='"+w+"'>",i.addEventListener("click",(function(r){e.value=this.getElementsByTagName("input")[0].value,l(this.getElementsByTagName("input")[0].value),O(t,this.getElementsByTagName("input")[0].value),a()})),c.appendChild(i)}}(i=document.createElement("DIV")).innerHTML="<strong>"+r("CREATE_CUSTOMER","Create new customer")+"</strong>",i.innerHTML+="<input type='hidden' value='"+r("CREATE_CUSTOMER","Create new customer")+"'>",i.addEventListener("click",(function(e){10===o.target.value.length?d(rA(rA({},p),{},{signup:!0})):g(rA(rA({},b),{},{error:r("ERROR_MIN_CHARACTERS_PHONE","The Phone / Mobile must be 10 characters")})),a()})),c.appendChild(i)})),e.addEventListener("keydown",(function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40===e.keyCode?(n++,o(t)):38===e.keyCode?(n--,o(t)):13===e.keyCode&&(e.preventDefault(),n>-1&&t&&t[n].click())})),document.addEventListener("click",(function(e){a(e.target)}))}(document.getElementById("phone-input"),b.users)}),[b.users]),Object(i.useEffect)((function(){w()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,eA({},e,{phone:c,customerState:y,customersPhones:b,setCustomersPhones:g,onChangeNumber:function(e){var t,r,n;l(null!==(t=e.target)&&void 0!==t&&null!==(r=t.validity)&&void 0!==r&&r.valid?null===(n=e.target)||void 0===n?void 0:n.value:c)},openModal:p,setOpenModal:d,setCustomerState:v})))};function cA(){return cA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cA.apply(this,arguments)}function lA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}uA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},uA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var pA=function(e){var t=e.UIComponent,r=e.businessList,n=e.userLocation,o=e.setErrors,a=lA(Nr(),1)[0],u=lA(Object(i.useState)([]),2),c=u[0],l=u[1];return Object(i.useEffect)((function(){l(r.map((function(e){return{lat:e.location.lat,lng:e.location.lng,icon:e.logo,slug:e.slug}})))}),[r]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,cA({},e,{businessLocations:c,userLocation:n,onBusinessClick:function(e){a.emit("go_to_page",{page:"business",params:{store:e}})},setErrors:o})))};function dA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dA(Object(r),!0).forEach((function(t){yA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vA(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function mA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}pA.propTypes={UIComponent:c.a.elementType,businessList:c.a.array.isRequired,userLocation:c.a.object,setErrors:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},pA.defaultProps={businessList:[],beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var gA=Object(i.createContext)(),OA=function(e){var t=e.children,r=mA(Object(i.useState)({business:{}}),2),n=r[0],o=r[1],u=function(){var e,t=(e=a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(hA(hA({},n),{},{business:t}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){vA(a,n,o,i,s,"next",e)}function s(e){vA(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),c=JSON.parse(JSON.stringify(n)),l={setBusiness:u};return s.a.createElement(gA.Provider,{value:[c,l]},t)},wA=function(){return Object(i.useContext)(gA)||[{},function(){}]};function jA(e){return jA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jA(e)}function SA(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function EA(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){SA(a,n,o,i,s,"next",e)}function s(e){SA(a,n,o,i,s,"throw",e)}i(void 0)}))}}function PA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var CA=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n,o,i,s;return t=e,r=[{key:"getItem",value:(s=EA(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.getItem(t);case 2:if(n=e.sent,!r||"object"===jA(n)){e.next=5;break}return e.abrupt("return",JSON.parse(n));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),function(e,t){return s.apply(this,arguments)})},{key:"setItem",value:(i=EA(a.a.mark((function e(t,r,n){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n?JSON.stringify(r):r,e.next=3,window.localStorage.setItem(t,o);case 3:case"end":return e.stop()}}),e)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"removeItem",value:(o=EA(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.removeItem(t);case 2:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})}],r&&PA(t.prototype,r),n&&PA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),IA=Object(i.createContext)(),xA=function(e){var t=e.Alert,r=e.settings,n=e.children,o=new CA;return s.a.createElement(IA.Provider,null,s.a.createElement(Rr,null,s.a.createElement(rr,{settings:r},s.a.createElement(Ur,{strategy:o},s.a.createElement(pr,{strategy:o},s.a.createElement(Qr,null,s.a.createElement(En,null,s.a.createElement(Ln,null,s.a.createElement($n,null,s.a.createElement(Er,{settings:Object.assign(r.socket,{project:r.project})},s.a.createElement(yn,{strategy:o,Alert:t},s.a.createElement(OA,null,n))))))))))))};function AA(){return AA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AA.apply(this,arguments)}var TA=function(e){var t=e.UIComponent,r=e.orderTotal;return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,AA({},e,{total:r})))};function _A(){return _A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_A.apply(this,arguments)}function kA(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function DA(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){kA(a,n,o,i,s,"next",e)}function s(e){kA(a,n,o,i,s,"throw",e)}i(void 0)}))}}function UA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}TA.propTypes={UIComponent:c.a.elementType,useOrderContext:c.a.bool,businessId:c.a.number,orderTotal:c.a.number,handlerSubmit:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},TA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var FA=function(e){var t,r,n,o=e.body,u=e.clientId,c=e.btnStyle,l=e.UIComponent,f=e.handlerChangePaypal,p=UA(vn(),2)[1],d=p.confirmCart,h=p.placeCart,y=UA(Object(i.useState)(!1),2),v=y[0],m=y[1];Object(i.useEffect)((function(){var e;if(u){if(null===(e=window)||void 0===e||!e.paypal){var t=document.createElement("script");return t.type="text/javascript",t.src="https://www.paypal.com/sdk/js?client-id=".concat(u),t.async=!0,t.onload=function(){m(!0)},t.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(t),function(){t.onload=null}}m(!0)}}),[u]);var b=function(){var e=DA(a.a.mark((function e(t,r){var n,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={paymethod_id:o.paymethod_id,amount:o.amount,delivery_zone_id:o.delivery_zone_id},e.next=3,h(o.cartUuid,n);case 3:if(i=e.sent,s=i.error,u=i.result,!s){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",u.pay_reference);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=DA(a.a.mark((function e(t,r){var n,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(o.cartUuid);case 2:if(n=e.sent,i=n.error,s=n.result,!i){e.next=7;break}return e.abrupt("return",null);case 7:return f&&f(s.order.uuid),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),O=function(){var e=DA(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(o.cartUuid);case 2:return r=e.sent,n=r.result,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=null===(t=window)||void 0===t||null===(r=t.paypal)||void 0===r||null===(n=r.Buttons)||void 0===n?void 0:n.driver("react",{React:s.a,ReactDOM:_S.a});return l&&s.a.createElement(l,_A({},e,{isSdkReady:v,PaypalButton:w,paypalButtonProps:{createOrder:b,onApprove:g,onError:O,onCancel:O,style:c}}))};function BA(){return BA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BA.apply(this,arguments)}function MA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function RA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MA(Object(r),!0).forEach((function(t){NA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function NA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zA(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function GA(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){zA(a,n,o,i,s,"next",e)}function s(e){zA(a,n,o,i,s,"throw",e)}i(void 0)}))}}function qA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return YA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}FA.propTypes={UIComponent:c.a.elementType,body:c.a.object.isRequired,clientId:c.a.string.isRequired,handlerChangePaypal:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},FA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var $A=function(e){var t=e.businessId,r=e.UIComponent,n=qA(dr(),1)[0],o=n.token,u=n.user,c=qA(nr(),1)[0],l=qA(Object(i.useState)({cards:[],loading:!0,error:null}),2),f=l[0],p=l[1],d=qA(Object(i.useState)(e.publicKey),2),h=d[0],y=d[1],v=qA(Object(i.useState)(null),2),m=v[0],b=v[1],g=qA(Object(i.useState)({loading:!1,error:null}),2),O=g[0],w=g[1],j={},S=function(){var e=GA(a.a.mark((function e(){var r,n,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(RA(RA({},f),{},{loading:!0})),e.prev=1,r={},j.paymentCards=r,e.next=6,c.setAccessToken(o).paymentCards(t,u.id).get({cancelToken:r});case 6:n=e.sent,i=n.content.result,(s=null==i?void 0:i.find((function(e){return e.default})))&&b({id:s.id,type:"card",card:{brand:s.brand,last4:s.last4}}),p(RA(RA({},f),{},{loading:!1,cards:i})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),p(RA(RA({},f),{},{loading:!1,error:e.t0}));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=GA(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.paymentCards(-1,u.id,t.id).delete();case 3:r=e.sent,r.content.error||(f.cards=f.cards.filter((function(e){return e.id!==t.id})),p(RA({},f))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=GA(a.a.mark((function e(r){var n,i,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(RA(RA({},O),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify({business_id:t,user_id:u.id,card_id:r.id})},i="".concat(c.root,"/payments/stripe/cards/default"),e.next=6,fetch(i,n);case 6:return s=e.sent,e.next=9,s.json();case 9:(l=e.sent).error?w({loading:!1,error:l.result}):(b({id:r.id,type:"card",card:{brand:r.brand,last4:r.last4}}),w({loading:!1,error:null})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),w({loading:!1,error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=GA(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.setAccessToken(o).paymentCards().getCredentials();case 3:t=e.sent,r=t.content.result,y(r.publishable),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),I=function(e){b({id:e.id,type:"card",card:{brand:e.brand,last4:e.last4}})};return Object(i.useEffect)((function(){return o&&(S(),e.publicKey||C()),function(){j.paymentCards&&j.paymentCards.cancel()}}),[o]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,BA({},e,{cardSelected:m,cardsList:f,handleCardClick:I,publicKey:h,handleNewCard:function(e){f.cards.push(e),p(RA({},f)),I(e)},deleteCard:E,setDefaultCard:P,defaultCardSetActionStatus:O})))};function JA(){return JA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JA.apply(this,arguments)}function VA(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function HA(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){VA(a,n,o,i,s,"next",e)}function s(e){VA(a,n,o,i,s,"throw",e)}i(void 0)}))}}function WA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return KA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}$A.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,userId:c.a.number,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},$A.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var XA=function(e){var t=e.UIComponent,r=WA(nr(),1)[0],n=WA(dr(),1)[0].token,o=WA(Object(i.useState)(null),2),u=o[0],c=o[1],l=WA(Object(i.useState)(null),2),f=l[0],p=l[1],d=function(){var e=HA(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r.root,"/payments/stripe/credentials"),{headers:{Authorization:"Bearer ".concat(n)}});case 2:return t=e.sent,e.next=5,t.json();case 5:o=e.sent,i=o.result.publishable,c(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=HA(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(r.root,"/payments/stripe/requirements?type=add_card"),{headers:{Authorization:"Bearer ".concat(n)}});case 2:return t=e.sent,e.next=5,t.json();case 5:o=e.sent,i=o.result,p(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){n&&(d(),h())}),[n]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,JA({},e,{stripeKey:u,clientSecret:f})))};function ZA(){return ZA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZA.apply(this,arguments)}function QA(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function eT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}XA.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},XA.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rT=function(e){var t,r=e.paymentMethods,n=e.UIComponent,o=eT(dr(),1)[0].token,u=eT(nr(),1)[0],c=eT(Object(i.useState)(null),2),l=c[0],f=c[1],p=function(){var e,t=(e=a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u.root,"/payments/stripe/credentials"),{headers:{Authorization:"Bearer ".concat(o)}});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,n=r.result.publishable,f(n);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){QA(a,n,o,i,s,"next",e)}function s(e){QA(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p()}),[]),s.a.createElement(s.a.Fragment,null,n&&l&&s.a.createElement(n,ZA({},e,{stripePK:l,modalName:(t="",r.map((function(e,n){n===r.length-1?t+="".concat(e.name):t+="".concat(e.name,", ")})),t)})))};function nT(){return nT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nT.apply(this,arguments)}function oT(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function aT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function iT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aT(Object(r),!0).forEach((function(t){sT(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uT(e){return function(e){if(Array.isArray(e))return fT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||lT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lT(e,t){if(e){if("string"==typeof e)return fT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fT(e,t):void 0}}function fT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}rT.propTypes={UIComponent:c.a.elementType,businessId:c.a.number.isRequired,currency:c.a.string.isRequired,paymentMethods:c.a.arrayOf(c.a.object).isRequired,handlerStripeSource:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var pT=function(e){var t,r=e.UIComponent,n=e.filterList,o=e.handleChangeFilterList,u=e.propsToFetch,c=e.onClose,l=e.isSearchByName,f=e.isSearchByLastName,p=e.availableDriverIds,d=e.paginationSettings,h=cT(nr(),1)[0],y=cT(Object(i.useState)({loading:!0,error:null,drivers:[],pagination:null}),2),v=y[0],m=y[1],b=cT(Object(i.useState)(null),2),g=b[0],O=b[1],w=cT(Object(i.useState)(!1),2),j=w[0],S=w[1],E=cT(Object(i.useState)(null),2),P=E[0],C=E[1],I=cT(Object(i.useState)({currentPage:"pages"===d.controlType&&d.initialPage&&d.initialPage>=1?d.initialPage-1:0,pageSize:null!==(t=d.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),x=I[0],A=I[1],T=new RegExp(/^[A-Za-z0-9\s]+$/g),_=function(){var e,t=(e=a.a.mark((function e(t,r){var n,o,i,s,c,d,y,b,g,O,w,j,S,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(iT(iT({},v),{},{loading:!0})),o={page:t,page_size:r||x.pageSize},n=iT({},o),i=null,s=[{attribute:"level",value:"4"}],(null==p?void 0:p.length)>0&&s.push({attribute:"id",value:p}),P&&(c=[],d=T.test(P),l&&c.push({attribute:"name",value:{condition:"ilike",value:d?encodeURI("%".concat(P,"%")):"%".concat(P,"%")}}),f&&c.push({attribute:"lastname",value:{condition:"ilike",value:d?encodeURI("%".concat(P,"%")):"%".concat(P,"%")}}),s.push({conector:"OR",conditions:c})),s.length&&(i={conditions:s,conector:"AND"}),y=i?h.users().asDashboard().select(u).parameters(n).where(i):h.users().asDashboard().select(u).parameters(n),e.next=13,y.get();case 13:b=e.sent,g=b.content,O=g.error,w=g.result,j=g.pagination,O?m(iT(iT({},v),{},{loading:!1,error:w})):(m(iT(iT({},v),{},{loading:!1,drivers:w,pagination:j})),S=0,j.current_page!==j.total_pages&&(E=j.total-v.drivers.length,S=E<j.page_size?E:j.page_size),A(iT(iT({},x),{},{currentPage:j.current_page,totalPages:j.total_pages,totalItems:j.total,from:j.from,to:j.to,nextPageItems:S}))),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),m(iT(iT({},v),{},{loading:!1,error:[e.t0||(null===e.t0||void 0===e.t0?void 0:e.t0.toString())||(null===e.t0||void 0===e.t0?void 0:e.t0.message)]}));case 24:case"end":return e.stop()}}),e,null,[[0,21]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){oT(a,n,o,i,s,"next",e)}function s(e){oT(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return _(1,null),e.abort()}),[P]),Object(i.useEffect)((function(){var e,t;if(0!==(null==v||null===(e=v.drivers)||void 0===e?void 0:e.length)){var r=null==v?void 0:v.drivers.reduce((function(e,t){return[].concat(uT(e),[t.id])}),[]),o=(null==n||null===(t=n.drivers_ids)||void 0===t?void 0:t.length)>0?null==n?void 0:n.drivers_ids.filter((function(e){return r.includes(e)})):r;O(uT(o)),null!=n&&n.drivers_ids&&(null==o?void 0:o.length)!==(null==v?void 0:v.drivers.length)||S(!0)}}),[null==v?void 0:v.drivers]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,nT({},e,{driverList:v,driverIds:g,paginationProps:x,getDrivers:_,searchValue:P,onSearch:C,handleChangeDriverId:function(e){if(null==g?void 0:g.find((function(t){return t===e}))){var t=null==g?void 0:g.filter((function(t){return t!==e}));O(t),S(!1)}else{var r=g?uT(g):[];r.push(e),r.length===(null==v?void 0:v.drivers.length)&&S(!0),O(r)}},handleClickFilterButton:function(){var e=g?uT(g):null;o(iT(iT({},n),{},{drivers_ids:e})),c&&c()},isAllCheck:j,handleChangeAllCheck:function(){if(j)O(null);else{var e,t=[],r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=lT(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(v.drivers);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n.id)}}catch(e){r.e(e)}finally{r.f()}O(t)}S(!j)}})))};function dT(){return dT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dT.apply(this,arguments)}function hT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hT(Object(r),!0).forEach((function(t){vT(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mT(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function bT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gT(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}pT.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},pT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname","birthdate","drivergroups"],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var OT=function(e){var t=e.UIComponent,r=e.order,n=bT(nr(),1)[0],o=bT(dr(),1)[0],u=bT(Lr(),2)[1],c=bT(Fn(),2)[1].showToast,l=bT(Nr(),1)[0],f=bT(Object(i.useState)({qualification:0,comment:"",order_id:null==r?void 0:r.id,user_id:null==r?void 0:r.customer_id}),2),p=f[0],d=f[1],h=bT(Object(i.useState)({loading:!1,error:null}),2),y=h[0],v=h[1],m=function(){var t,i=(t=a.a.mark((function t(){var i,s,f;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v({loading:!0,error:null}),t.prev=1,t.next=4,fetch("".concat(n.root,"/users/").concat(null==r?void 0:r.customer_id,"/user_reviews"),{method:"POST",headers:{Authorization:"Bearer ".concat(o.token),"Content-Type":"application/json"},body:JSON.stringify(p)});case 4:return i=t.sent,t.next=7,i.json();case 7:s=t.sent,f=s.result,s.error?v({loading:!1,error:f}):(v(yT(yT({},p),{},{loading:!1})),c(Dn.Success,u("CUSTOMER_REVIEW_SUCCESS_CONTENT","Thank you, Customer review successfully submitted!")),l.emit("customer_reviewed",f),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),v({loading:!1,error:[t.t0.message]});case 16:case"end":return t.stop()}}),t,null,[[1,13]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){mT(a,n,o,i,s,"next",e)}function s(e){mT(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return i.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,dT({},e,{reviewState:p,setReviewState:d,actionState:y,handleChangeQualification:function(e){e&&d(yT(yT({},p),{},{qualification:e}))},handleSendCustomerReview:m})))};function wT(){return wT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wT.apply(this,arguments)}function jT(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ST(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ET(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ET(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ET(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}OT.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},OT.defaultProps={order:{},beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var PT=function(e){var t=e.UIComponent,r=e.toSave,n=ST(nr(),1)[0],o=ST(dr(),1)[0].token,u=ST(Object(i.useState)(),2),c=u[0],l=u[1],f=function(){var e,t=(e=a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.root,"/payments/stripe/requirements?type=add_card"),{headers:{Authorization:"Bearer ".concat(o)}});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,i=r.result,l(i);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){jT(a,n,o,i,s,"next",e)}function s(e){jT(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&r&&f()}),[o]),s.a.createElement(t,wT({},e,{requirements:c}))};function CT(){return CT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CT.apply(this,arguments)}function IT(e){return function(e){if(Array.isArray(e))return LT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||UT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xT(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function AT(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){xT(a,n,o,i,s,"next",e)}function s(e){xT(a,n,o,i,s,"throw",e)}i(void 0)}))}}function TT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?TT(Object(r),!0).forEach((function(t){kT(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||UT(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UT(e,t){if(e){if("string"==typeof e)return LT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?LT(e,t):void 0}}function LT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}PT.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,toSave:c.a.bool,publicKey:c.a.string,clientSecret:c.a.string,handleSource:c.a.func};var FT=function(e){var t=e.UIComponent,r=e.business,n=e.handleUpdateBusinessState,o=e.product,u=e.businessState,c=e.setDataSelected,l=DT(dr(),1)[0].loading,f=DT(nr(),1)[0],p=DT(Lr(),2)[1],d=DT(Fn(),2)[1].showToast,h=DT(Object(i.useState)({loading:!1,changes:{},result:{error:!1}}),2),y=h[0],v=h[1],m=DT(Object(i.useState)(!1),2),b=m[0],g=m[1],O=function(){var e=AT(a.a.mark((function e(t){var i,s,u,c,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(Dn.Info,p("LOADING","Loading")),v(_T(_T({},y),{},{loading:!0})),e.next=7,f.businesses(parseInt(null==r?void 0:r.id)).categories(parseInt(null==o?void 0:o.category_id)).products(null==o?void 0:o.id).save(t);case 7:i=e.sent,s=i.content,u=s.error,c=s.result,u?v(_T(_T({},y),{},{loading:!1,result:{error:!0,result:c}})):(v(_T(_T({},y),{},{loading:!1,result:{error:!1,result:c}})),n&&((h=IT(null==r?void 0:r.categories)).forEach((function e(r){if(r.id===(null==o?void 0:o.category_id)){var n=r.products.map((function(e){return e.id===o.id?_T(_T({},e),t):e}));r.products=IT(n)}Array.isArray(null==r?void 0:r.subcategories)&&r.subcategories.forEach(e)})),n(_T(_T({},r),{},{categories:h}))),d(Dn.Success,p("PRODUCT_UPDATED","Product updated")),g(!1)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),v(_T(_T({},y),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=AT(a.a.mark((function e(){var t,i,s,u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(Dn.Info,p("LOADING","Loading")),v(_T(_T({},y),{},{loading:!0})),e.next=7,f.businesses(parseInt(null==r?void 0:r.id)).categories(parseInt(null==o?void 0:o.category_id)).products(null==o?void 0:o.id).delete();case 7:t=e.sent,i=t.content,s=i.error,u=i.result,s?v(_T(_T({},y),{},{loading:!1,result:{error:!0,result:u}})):(v(_T(_T({},y),{},{loading:!1,result:{error:!1,result:u}})),n&&((c=IT(null==r?void 0:r.categories)).forEach((function e(t){if(t.id===(null==o?void 0:o.category_id)){var r=t.products.filter((function(e){return e.id!==o.id}));t.products=IT(r)}Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),n(_T(_T({},r),{},{categories:c}))),d(Dn.Success,p("PRODUCT_DELETED","Product deleted"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),v(_T(_T({},y),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=AT(a.a.mark((function e(t,i){var s,u,c,h,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(Dn.Info,p("LOADING","Loading")),e.next=6,f.businesses(parseInt(null==r?void 0:r.id)).categories(parseInt(null==o?void 0:o.category_id)).products(t).save(i);case 6:s=e.sent,u=s.content,c=u.error,h=u.result,c?v(_T(_T({},y),{},{loading:!1,result:{error:!0,result:h}})):(n&&((m=IT(null==r?void 0:r.categories)).forEach((function e(r){if(r.id===(null==o?void 0:o.category_id)){var n=r.products.map((function(e){return e.id===t?_T(_T({},e),{},{rank:null==h?void 0:h.rank}):e}));r.products=IT(n)}Array.isArray(null==r?void 0:r.subcategories)&&r.subcategories.forEach(e)})),n(_T(_T({},r),{},{categories:m}))),d(Dn.Success,p("PRODUCT_UPDATED","Product updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),v(_T(_T({},y),{},{loading:!1,result:{error:!0,result:[e.t0.message]}}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,r){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&v(_T(_T({},y),{},{changes:_T({},o)}))}),[o,u]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,CT({},e,{handleChangeProductActive:function(e){O({enabled:e})},handleUpdateClick:function(){var e,t,r,n,o,a,i={images:null==y||null===(e=y.changes)||void 0===e?void 0:e.images,name:null==y||null===(t=y.changes)||void 0===t?void 0:t.name,description:null==y||null===(r=y.changes)||void 0===r?void 0:r.description,price:null==y||null===(n=y.changes)||void 0===n?void 0:n.price,fee_fixed:null==y||null===(o=y.changes)||void 0===o?void 0:o.fee_fixed,fee_percentage:null==y||null===(a=y.changes)||void 0===a?void 0:a.fee_percentage};for(var s in i)null===i[s]&&delete i[s];O(i)},deleteProduct:w,productFormState:y,handleChangeInput:function(e){v(_T(_T({},y),{},{changes:_T(_T({},y.changes),{},kT({},e.target.name,e.target.value))})),g(!0)},handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){v(_T(_T({},y),{},{changes:_T(_T({},y.changes),{},{images:t.result})}))},t.onerror=function(e){return console.log(e)},g(!0)},isEditMode:b,handleDragStart:function(e,t){e.dataTransfer.setData("transferProductId",t);var r=document.createElement("div");r.classList.add("ghostDragging"),r.innerHTML=null==o?void 0:o.name,document.body.appendChild(r),e.dataTransfer.setDragImage(r,0,0)},handleDragOver:function(e){e.preventDefault();var t=e.target.closest(".draggable-product");t&&c(t.dataset.index)},handleDrop:function(e){e.preventDefault();var t=parseInt(e.dataTransfer.getData("transferProductId")),r=null==o?void 0:o.rank;j(t,{rank:r})},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0]);c("")}})))};function BT(){return BT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BT.apply(this,arguments)}function MT(e){return function(e){if(Array.isArray(e))return JT(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RT(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function NT(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){RT(a,n,o,i,s,"next",e)}function s(e){RT(a,n,o,i,s,"throw",e)}i(void 0)}))}}function zT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function GT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zT(Object(r),!0).forEach((function(t){qT(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YT(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||$T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $T(e,t){if(e){if("string"==typeof e)return JT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?JT(e,t):void 0}}function JT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}FT.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,product:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},FT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var VT=function(e){var t=e.UIComponent,r=e.handleUpdateBusinessState,n=e.business,o=e.category,u=e.categorySelected,c=e.setCategorySelected,l=YT(dr(),1)[0].loading,f=YT(nr(),1)[0],p=YT(Lr(),2)[1],d=YT(Fn(),2)[1].showToast,h=YT(Object(i.useState)({changes:{},loading:!1,result:{error:!1}}),2),y=h[0],v=h[1],m=YT(Object(i.useState)(!1),2),b=m[0],g=m[1],O=function(){var e=NT(a.a.mark((function e(t,r){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(Dn.Info,p("LOADING","Loading")),e.next=6,f.businesses(parseInt(null==n?void 0:n.id)).categories(t).save(r);case 6:o=e.sent,o.content.error||d(Dn.Success,p("CATEOGORY_UPDATED","Category updated")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),v(GT(GT({},y),{},{loading:!1,result:{error:!0,result:e.t0}}));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,r){return e.apply(this,arguments)}}(),w=function(){var e=NT(a.a.mark((function e(t){var i,s,u,c,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(Dn.Info,p("LOADING","Loading")),v(GT(GT({},y),{},{loading:!0})),e.next=7,f.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(o.id)).save(t);case 7:i=e.sent,s=i.content,u=s.error,c=s.result,u?v(GT(GT({},y),{},{loading:!1,result:{error:!0,result:c}})):(v(GT(GT({},y),{},{loading:!1,result:{error:!1,result:c}})),g(!1),r&&((h=MT(n.categories)).forEach((function e(t){t.id===c.id&&(t.name=null==c?void 0:c.name,t.enabled=null==c?void 0:c.enabled,t.image=null==c?void 0:c.image),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),r(GT(GT({},n),{},{categories:h}))),d(Dn.Success,p("CATEOGORY_UPDATED","Category updated"))),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),v(GT(GT({},y),{},{loading:!1,result:{error:!0,result:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var t=NT(a.a.mark((function t(){var i,s,h,m,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,d(Dn.Info,p("LOADING","Loading")),v(GT(GT({},y),{},{loading:!0})),t.next=7,f.businesses(parseInt(null==n?void 0:n.id)).categories(parseInt(o.id)).delete();case 7:i=t.sent,s=i.content,h=s.error,m=s.result,h?v(GT(GT({},y),{},{loading:!1,result:{error:!0,result:m}})):(v(GT(GT({},y),{},{loading:!1,result:{error:!1,result:m}})),r&&((b=MT(n.categories)).forEach((function e(t,r,n){t.id===o.id&&n.splice(r,1),Array.isArray(null==t?void 0:t.subcategories)&&t.subcategories.forEach(e)})),r(GT(GT({},n),{},{categories:b})),o.id===u.id&&c(b[0])),d(Dn.Success,p("CATEOGORY_DELETED","Category deleted")),e.onClose&&e.onClose(o.id)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),v(GT(GT({},y),{},{loading:!1,result:{error:!0,result:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){o&&v(GT(GT({},y),{},{changes:GT({},o)}))}),[o]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,BT({},e,{handelChangeCategoryActive:function(e){w({enabled:e})},categoryFormState:y,handlechangeImage:function(e){var t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){v(GT(GT({},y),{},{changes:GT(GT({},y.changes),{},{image:t.result})}))},t.onerror=function(e){return console.log(e)},g(!0)},handleUpdateClick:function(){var e,t,r={name:null==y||null===(e=y.changes)||void 0===e?void 0:e.name,image:null==y||null===(t=y.changes)||void 0===t?void 0:t.image};for(var n in r)null===r[n]&&delete r[n];w(r)},deleteCategory:j,handleInputChange:function(e){v(GT(GT({},y),{},{changes:GT(GT({},y.changes),{},qT({},e.target.name,e.target.value))})),g(!0)},isEditMode:b,handleDragStart:function(e){e.dataTransfer.setData("transferCategoryId",null==o?void 0:o.id);var t=document.createElement("div");t.classList.add("ghostDragging"),t.innerHTML=o.name,document.body.appendChild(t),e.dataTransfer.setDragImage(t,0,0)},handleDragOver:function(e){e.preventDefault()},handleDrop:function(e){e.preventDefault();var t=parseInt(e.dataTransfer.getData("transferCategoryId")),a=null==n?void 0:n.categories.find((function(e){return e.id===t})),i=null==a?void 0:a.rank,s=null==o?void 0:o.rank,u=null==n?void 0:n.categories.filter((function(e){return e.id===t&&(e.rank=s),e.id===o.id&&(e.rank=i),!0}));r(GT(GT({},n),{},{categories:u})),O(t,{rank:s})},handleDragEnd:function(){for(var e=document.getElementsByClassName("ghostDragging");e.length>0;)e[0].parentNode.removeChild(e[0])}})))};function HT(){return HT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HT.apply(this,arguments)}function WT(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function KT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function XT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KT(Object(r),!0).forEach((function(t){ZT(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ZT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QT(e){return function(e){if(Array.isArray(e))return r_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||t_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t_(e,t){if(e){if("string"==typeof e)return r_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?r_(e,t):void 0}}function r_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}VT.propTypes={UIComponent:c.a.elementType,business:c.a.object,handleUpdateBusinessState:c.a.func,category:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},VT.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var n_=function(e){var t=e.UIComponent,r=e.category,n=e.handleUpdateCategoryList,o=e.categoryList,u=e.staticConfigs,c=e.handleChangeStaic,l=e_(Object(i.useState)(null),2),f=l[0],p=l[1],d=e_(dr(),1)[0].loading,h=e_(nr(),1)[0],y=e_(Fn(),2)[1].showToast,v=e_(Lr(),2)[1],m=e_(en(),2)[1].refreshConfigs,b=e_(Object(i.useState)({changes:null,loading:!1,result:{error:null},API:!1,finalResult:[]}),2),g=b[0],O=b[1],w=function(e,t){var r,n=[],o=null==g||null===(r=g.changes)||void 0===r?void 0:r.find((function(e){return e.id===t}));if(o)n=null==g?void 0:g.changes.map((function(r){return r.id===t?XT(XT({},r),{},{value:e}):r}));else{null!=g&&g.changes&&(n=QT(null==g?void 0:g.changes));var a=f.find((function(e){return e.id===t}));n.push(XT(XT({},a),{},{value:e}))}var i=f.map((function(r){return r.id===t?XT(XT({},r),{},{value:e}):r}));O(XT(XT({},g),{},{changes:n})),p(i)},j=function(e){return"["+e+"]"},S=function(){var e,t=(e=a.a.mark((function e(t,i){var s,u,l,f,p,b,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,y(Dn.Info,v("LOADING","Loading")),O(XT(XT({},g),{},{loading:!0,API:!1})),e.next=7,h.configs(t).save(i);case 7:s=e.sent,u=s.content,l=u.error,f=u.result,l?O(XT(XT({},g),{},{loading:!1,result:{error:!0,result:f},API:!1})):(p=null==g?void 0:g.changes.filter((function(e){return e.id!==f.id})),b=null==g?void 0:g.finalResult.map((function(e){return e.id===f.id?XT(XT({},e),{},{value:null==f?void 0:f.value}):e})),p.length>0?O({loading:!1,changes:p,result:{error:!1,result:f},API:!0,finalResult:b}):(O({loading:!1,changes:null,result:{error:!1,result:"ok"},API:!1,finalResult:b}),y(Dn.Success,v("SETTINGS_UPDATE","Settings updated")),n&&(w=null==o?void 0:o.categories.map((function(e){return e.id===r.id?XT(XT({},e),{},{configs:b}):e})),n(w)),c&&c(QT(b)),m&&m())),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),O(XT(XT({},g),{},{loading:!1,result:{error:!0,result:e.t0},API:!1}));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){WT(a,n,o,i,s,"next",e)}function s(e){WT(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){if((null==r?void 0:r.configs.length)>0){var e=QT(null==r?void 0:r.configs);p(e),O(XT(XT({},g),{},{finalResult:e}))}}),[null==r?void 0:r.configs]),Object(i.useEffect)((function(){u&&(p(QT(u)),O(XT(XT({},g),{},{finalResult:QT(u)})))}),[u]),Object(i.useEffect)((function(){var e;if(null!=g&&g.API&&(null==g||null===(e=g.changes)||void 0===e?void 0:e.length)>0){var t={key:null==g?void 0:g.changes[0].key,value:null==g?void 0:g.changes[0].value};S(null==g?void 0:g.changes[0].id,t)}}),[null==g?void 0:g.API]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,HT({},e,{settingsState:g,configs:f,handleInputChange:w,handleCheckBoxChange:function(e,t,r){var n,o=parseInt(e.target.getAttribute("data-id"));if(t){var a=""===r?[]:r.split("|"),i=a.indexOf(e.target.name);-1===i&&e.target.checked&&a.push(e.target.name),!e.target.checked&&i>=0&&a.splice(i,1),n=a.join("|")}else{var s=QT(JSON.parse(r)),u=s.indexOf(parseInt(e.target.name));-1===u&&e.target.checked&&s.push(parseInt(e.target.name)),!e.target.checked&&u>=0&&s.splice(u,1),n=JSON.stringify(s)}w(n,o)},handleClickUpdate:function(){var e;if(null!=g&&g.changes&&0!==(null==g||null===(e=g.changes)||void 0===e?void 0:e.length)){var t=null==g?void 0:g.changes.map((function(e){return"driver_tip_options"===e.key?XT(XT({},e),{},{value:j(null==e?void 0:e.value)}):e}));O(XT(XT({},g),{},{changes:QT(t),API:!0}))}},formState:g,handleChangeFormState:O})))};n_.propTypes={UIComponent:c.a.elementType,category:c.a.object,staticConfigs:c.a.arrayOf(u.object),categoryList:c.a.object,handleUpdateCategoryList:c.a.func,handleChangeStaic:c.a.func,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},n_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var o_=r(12);function a_(){return a_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a_.apply(this,arguments)}function i_(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function s_(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){i_(a,n,o,i,s,"next",e)}function s(e){i_(a,n,o,i,s,"throw",e)}i(void 0)}))}}function u_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l_=function(e){var t=e.UIComponent,r=e.requirements,n=e.toSave,o=e.handleSource,u=e.onNewCard,c=u_(dr(),1)[0].user,l=u_(nr(),1)[0],f=Object(o_.useStripe)(),p=Object(o_.useElements)(),d=u_(Object(i.useState)(null),2),h=d[0],y=d[1],v=u_(Object(i.useState)(!1),2),m=v[0],b=v[1],g=function(){var e=s_(a.a.mark((function e(t,r,n){var o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(l.root,"/payments/stripe/cards"),{method:"POST",headers:{Authorization:"Bearer ".concat(null==r||null===(o=r.session)||void 0===o?void 0:o.access_token),"Content-Type":"application/json"},body:JSON.stringify({business_id:n,gateway:"stripe",token_id:t,user_id:null==r?void 0:r.id})});case 2:return i=e.sent,e.next=5,i.json();case 5:s=e.sent,u&&u(s.result);case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),O=function(){var t=s_(a.a.mark((function t(i){var s,u,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b(!0),i.preventDefault(),s=null==p?void 0:p.getElement(o_.CardElement),r){t.next=10;break}return t.next=6,f.createPaymentMethod({type:"card",card:s,billing_details:{name:"".concat(c.name," ").concat(c.lastname),email:c.email,address:c.address}});case 6:(u=t.sent).error?(b(!1),y(u.error.message)):(b(!1),y(null),o&&o({id:null==u?void 0:u.paymentMethod.id,type:"card",card:{brand:null==u?void 0:u.paymentMethod.card.brand,last4:null==u?void 0:u.paymentMethod.card.last4}})),t.next=14;break;case 10:return t.next=12,f.confirmCardSetup(r,{payment_method:{card:s,billing_details:{name:"".concat(c.name," ").concat(c.lastname),email:c.email,address:c.address}}});case 12:(l=t.sent).error?(b(!1),y(l.error.message)):(b(!1),y(null),n&&g(l.setupIntent.payment_method,c,e.businessId));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return s.a.createElement(t,a_({},e,{handleSubmit:O,error:h,loading:m,handleChange:function(e){e.error?y(e.error.message):y(null)}}))};function f_(){return f_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f_.apply(this,arguments)}function p_(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}l_.propTypes={UIComponent:c.a.elementType,businessId:c.a.number,clientSecret:c.a.string,autosave:c.a.bool,handlerToken:c.a.func},l_.defaultProps={autosave:!0};var d_=function(e){var t=e.UIComponent,r=e.handleStripeRedirect,n=function(){var e,t=(e=a.a.mark((function e(t){var n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.type,o=t.name,i=t.email,r&&r({type:n,owner:{name:o,email:i}});case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){p_(a,n,o,i,s,"next",e)}function s(e){p_(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,f_({},e,{handleSubmitPaymentMethod:n})))};function h_(){return h_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h_.apply(this,arguments)}d_.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},d_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var y_=function(e){var t=e.handleClick,r=e.btnText,n=e.btnValue,o=e.UIComponent;return s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,h_({},e,{handleButtonClick:t,btnText:r,btnValue:n})))};function v_(){return v_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v_.apply(this,arguments)}function m_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m_(Object(r),!0).forEach((function(t){g_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O_(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function w_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}y_.propTypes={UIComponent:c.a.elementType,btnText:c.a.string.isRequired,btnValue:c.a.number,handleClick:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},y_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var S_=function(e){var t=e.UIComponent,r=e.code,n=e.random,o=e.handleSuccessResetPassword,u=w_(Object(i.useState)({loading:!1,result:{error:!1}}),2),c=u[0],l=u[1],f=w_(Object(i.useState)({code:r,random:n,password:""}),2),p=f[0],d=f[1],h=w_(nr(),1)[0],y=function(){var e,t=(e=a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(b_(b_({},c),{},{loading:!0})),e.next=4,h.users().resetPassword(p);case 4:t=e.sent,r=t.response,n=r.data,l({result:n,loading:!1}),n.error||o&&o(n.result),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&l({result:{error:!0,result:e.t0.message},loading:!1});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){O_(a,n,o,i,s,"next",e)}function s(e){O_(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,v_({},e,{handleResetPassword:y,handleChangeInput:function(e){d(b_(b_({},p),{},g_({},e.target.name,e.target.value)))},resetPasswordData:p,formState:c})))};function E_(){return E_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E_.apply(this,arguments)}function P_(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function C_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C_(Object(r),!0).forEach((function(t){x_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A_(e){return function(e){if(Array.isArray(e))return k_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||__(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||__(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function __(e,t){if(e){if("string"==typeof e)return k_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k_(e,t):void 0}}function k_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}S_.propTypes={UIComponent:c.a.elementType,code:c.a.string,random:c.a.string,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},S_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var D_=function(e){var t=e.UIComponent,r=e.filterList,n=e.handleChangeFilterList,o=e.propsToFetch,u=e.onClose,c=T_(nr(),1)[0],l=T_(Object(i.useState)({loading:!0,error:null,brands:[],pagination:null}),2),f=l[0],p=l[1],d=T_(Object(i.useState)(null),2),h=d[0],y=d[1],v=T_(Object(i.useState)(!1),2),m=v[0],b=v[1],g=T_(dr(),1)[0],O=g.token,w=g.loading,j=function(){var e,t=(e=a.a.mark((function e(){var t,r,n,i,s,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(I_(I_({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O)}},r="".concat(c.root,"/franchises?params=").concat(o),e.next=8,fetch(r,t);case 8:return n=e.sent,e.next=11,n.json();case 11:i=e.sent,s=i.error,u=i.result,l=i.pagination,s?p(I_(I_({},f),{},{loading:!1,error:u})):(d=null==u?void 0:u.filter((function(e){return e.enabled})),p(I_(I_({},f),{},{loading:!1,brands:d,pagination:l}))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),p(I_(I_({},f),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){P_(a,n,o,i,s,"next",e)}function s(e){P_(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return j(),e.abort()}),[]),Object(i.useEffect)((function(){var e,t;if(0!==(null==f||null===(e=f.brands)||void 0===e?void 0:e.length)){var n=f.brands.reduce((function(e,t){return[].concat(A_(e),[t.id])}),[]);y(A_((null==r?void 0:r.franchises_id)||n)),null!=r&&r.franchises_id&&(null==r||null===(t=r.franchises_id)||void 0===t?void 0:t.length)!==(null==f?void 0:f.brands.length)||b(!0)}}),[null==f?void 0:f.brands]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,E_({},e,{brandList:f,brandIds:h,handleChangeBrandId:function(e){if(null==h?void 0:h.find((function(t){return t===e}))){var t=null==h?void 0:h.filter((function(t){return t!==e}));y(t),b(!1)}else{var r=h?A_(h):[];r.push(e),r.length===(null==f?void 0:f.brands.length)&&b(!0),y(r)}},handleClickFilterButton:function(){var e=h?A_(h):null;n(I_(I_({},r),{},{franchises_id:e})),u&&u()},isAllCheck:m,handleChangeAllCheck:function(){if(m)y(null);else{var e,t=[],r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=__(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(f.brands);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n.id)}}catch(e){r.e(e)}finally{r.f()}y(t)}b(!m)}})))};function U_(){return U_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U_.apply(this,arguments)}function L_(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function F_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F_(Object(r),!0).forEach((function(t){M_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R_(e){return function(e){if(Array.isArray(e))return G_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||z_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z_(e,t){if(e){if("string"==typeof e)return G_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G_(e,t):void 0}}function G_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}D_.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},D_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","logo","description","header","enabled","created_at","updated_at"]};var q_=function(e){var t=e.UIComponent,r=e.filterList,n=e.handleChangeFilterList,o=e.propsToFetch,u=e.onClose,c=N_(nr(),1)[0],l=N_(Object(i.useState)({loading:!0,error:null,appIds:[],pagination:null}),2),f=l[0],p=l[1],d=N_(Object(i.useState)(null),2),h=d[0],y=d[1],v=N_(Object(i.useState)(!1),2),m=v[0],b=v[1],g=N_(dr(),1)[0],O=g.token,w=g.loading,j=function(){var e,t=(e=a.a.mark((function e(){var t,r,n,i,s,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,p(B_(B_({},f),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O)}},r="".concat(c.root,"/sites?params=").concat(o),e.next=8,fetch(r,t);case 8:return n=e.sent,e.next=11,n.json();case 11:i=e.sent,s=i.error,u=i.result,l=i.pagination,p(B_(B_({},f),{},s?{loading:!1,error:u}:{loading:!1,appIds:u,pagination:l})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),p(B_(B_({},f),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){L_(a,n,o,i,s,"next",e)}function s(e){L_(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return j(),e.abort()}),[]),Object(i.useEffect)((function(){var e,t;if(0!==(null==f||null===(e=f.appIds)||void 0===e?void 0:e.length)){var n=f.appIds.reduce((function(e,t){return[].concat(R_(e),[t.id])}),[]);y(R_((null==r?void 0:r.app_ids)||n)),null!=r&&r.app_ids&&(null==r||null===(t=r.app_ids)||void 0===t?void 0:t.length)!==(null==f?void 0:f.appIds.length)||b(!0)}}),[null==f?void 0:f.appIds]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,U_({},e,{appIdList:f,appIds:h,handleChangeAppId:function(e){if(null==h?void 0:h.find((function(t){return t===e}))){var t=null==h?void 0:h.filter((function(t){return t!==e}));y(t),b(!1)}else{var r=h?R_(h):[];r.push(e),r.length===(null==f?void 0:f.appIds.length)&&b(!0),y(r)}},handleClickFilterButton:function(){var e=h?R_(h):null;n(B_(B_({},r),{},{app_ids:e})),u&&u()},isAllCheck:m,handleChangeAllCheck:function(){if(m)y(null);else{var e,t=[],r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=z_(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(f.appIds);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n.id)}}catch(e){r.e(e)}finally{r.f()}y(t)}b(!m)}})))};function Y_(){return Y_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y_.apply(this,arguments)}function $_(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function J_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J_(Object(r),!0).forEach((function(t){H_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function H_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W_(e){return function(e){if(Array.isArray(e))return Z_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||X_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||X_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X_(e,t){if(e){if("string"==typeof e)return Z_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z_(e,t):void 0}}function Z_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}q_.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},q_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","logo","description","header","enabled","created_at","updated_at"]};var Q_=function(e){var t=e.UIComponent,r=e.filterList,n=e.handleChangeFilterList,o=e.propsToFetch,u=e.onClose,c=e.setAvailableDriverIds,l=K_(nr(),1)[0],f=K_(Object(i.useState)({loading:!0,error:null,driverGroups:[],pagination:null}),2),p=f[0],d=f[1],h=K_(Object(i.useState)(null),2),y=h[0],v=h[1],m=K_(Object(i.useState)(!1),2),b=m[0],g=m[1],O=K_(dr(),1)[0],w=O.token,j=O.loading,S=K_(Object(i.useState)(null),2),E=S[0],P=S[1],C=new RegExp(/^[A-Za-z0-9\s]+$/g),I=function(e){if(e){var t=[];p.driverGroups.forEach((function(r){e.includes(r.id)&&r.drivers.forEach((function(e){t.push(e.id)}))}));var r=t.filter((function(e,t,r){return r.indexOf(e)===t}));c(r)}else c(null)},x=function(){var e,t=(e=a.a.mark((function e(){var t,r,n,i,s,u,c,f,h,y,v,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,d(V_(V_({},p),{},{loading:!0})),t=null,r=[],E&&(n=[],i=C.test(E),n.push({attribute:"name",value:{condition:"ilike",value:i?encodeURI("%".concat(E,"%")):"%".concat(E,"%")}}),r.push({conector:"AND",conditions:n})),r.length&&(t={conditions:r,conector:"AND"}),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}},u=t?"".concat(l.root,"/drivergroups?params=").concat(o,"&where=").concat(JSON.stringify(r[0])):"".concat(l.root,"/drivergroups?params=").concat(o),e.next=12,fetch(u,s);case 12:return c=e.sent,e.next=15,c.json();case 15:f=e.sent,h=f.error,y=f.result,v=f.pagination,h?d(V_(V_({},p),{},{loading:!1,error:y})):(m=null==y?void 0:y.filter((function(e){return e.enabled})),d(V_(V_({},p),{},{loading:!1,driverGroups:m,pagination:v}))),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),d(V_(V_({},p),{},{loading:!1,error:e.t0}));case 25:case"end":return e.stop()}}),e,null,[[2,22]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){$_(a,n,o,i,s,"next",e)}function s(e){$_(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e=new AbortController;return x(),e.abort()}),[]),Object(i.useEffect)((function(){var e,t;if(0!==(null==p||null===(e=p.driverGroups)||void 0===e?void 0:e.length)){var n=null==p?void 0:p.driverGroups.reduce((function(e,t){return[].concat(W_(e),[t.id])}),[]);v(W_((null==r?void 0:r.driver_groups_ids)||n)),null!=r&&r.driver_groups_ids&&(null==r||null===(t=r.driver_groups_ids)||void 0===t?void 0:t.length)!==(null==p?void 0:p.driverGroups.length)||g(!0)}}),[null==p?void 0:p.driverGroups]),Object(i.useEffect)((function(){var e=new AbortController;return x(),e.abort()}),[E]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,Y_({},e,{driverGroupList:p,driverGroupIds:y,handleChangeDriverGroupId:function(e){if(null==y?void 0:y.find((function(t){return t===e}))){var t=null==y?void 0:y.filter((function(t){return t!==e}));v(t),g(!1)}else{var r=y?W_(y):[];r.push(e),r.length===(null==p?void 0:p.driverGroups.length)&&g(!0),v(r)}},handleClickFilterButton:function(){var e=y?W_(y):null;n(V_(V_({},r),{},{driver_groups_ids:e})),u&&u(),c&&I(e)},isAllCheck:b,handleChangeAllCheck:function(){if(b)v(null);else{var e,t=[],r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=X_(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}(p.driverGroups);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n.id)}}catch(e){r.e(e)}finally{r.f()}v(t)}g(!b)},searchValue:E,onSearch:P})))};function ek(){return ek=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ek.apply(this,arguments)}function tk(e){return function(e){if(Array.isArray(e))return ck(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||uk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rk(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function nk(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){rk(a,n,o,i,s,"next",e)}function s(e){rk(a,n,o,i,s,"throw",e)}i(void 0)}))}}function ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ak(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ok(Object(r),!0).forEach((function(t){ik(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ok(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ik(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||uk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uk(e,t){if(e){if("string"==typeof e)return ck(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ck(e,t):void 0}}function ck(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Q_.propTypes={UIComponent:c.a.elementType,filterList:c.a.object,handleChangeFilterList:c.a.func,onClose:c.a.func,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Q_.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["id","name","enabled","drivers"]};var lk=function(e){var t=e.site,r=e.sitesList,n=e.UIComponent,o=e.handleSuccessUpdateSites,u=sk(Lr(),2)[1],c=sk(nr(),1)[0],l=sk(dr(),1)[0].token,f=sk(Fn(),2)[1].showToast,p=sk(Object(i.useState)({site:t||{},loading:!1,error:null}),2),d=p[0],h=p[1],y=sk(Object(i.useState)({loading:!1,changes:{},error:null}),2),v=y[0],m=y[1],b=sk(Object(i.useState)(!1),2),g=b[0],O=b[1],w=function(){return m({loading:!1,changes:{},error:null})},j=function(){var e=nk(a.a.mark((function e(){var n,i,s,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(Dn.Info,u("LOADING","Loading")),m(ak(ak({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(v.changes)},e.next=6,fetch("".concat(c.root,"/sites/").concat(t.id),n);case 6:return i=e.sent,e.next=9,i.json();case 9:(s=e.sent).error?m(ak(ak({},v),{},{loading:!1,error:s.result})):(h(ak(ak({},d),{},{site:s.result})),w(),o&&(p=r.filter((function(e){return e.id===t.id&&Object.assign(e,s.result),!0})),o(p)),f(Dn.Success,u("SITE_SAVED","Site saved"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m(ak(ak({},v),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var n=nk(a.a.mark((function n(){var i,s,p,d;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(Dn.Info,u("LOADING","Loading")),m(ak(ak({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},n.next=6,fetch("".concat(c.root,"/sites/").concat(t.id),i);case 6:return s=n.sent,n.next=9,s.json();case 9:(p=n.sent).error?m(ak(ak({},v),{},{loading:!1,error:p.result})):(o&&(d=r.filter((function(e){return e.id!==t.id})),o(d)),f(Dn.Success,u("SITE_DELETED","Site deleted")),e.onClose&&e.onClose()),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),m(ak(ak({},v),{},{loading:!1,error:[n.t0.message]}));case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}(),E=function(){var t=nk(a.a.mark((function t(){var n,i,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f(Dn.Info,u("LOADING","Loading")),m(ak(ak({},v),{},{loading:!0})),n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify(v.changes)},t.next=6,fetch("".concat(c.root,"/sites"),n);case 6:return i=t.sent,t.next=9,i.json();case 9:(s=t.sent).error?m(ak(ak({},v),{},{loading:!1,error:s.result})):(w(),f(Dn.Success,u("SITE_ADDED","Site added")),o&&o([].concat(tk(r),[s.result])),e.onClose&&e.onClose()),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),m(ak(ak({},v),{},{loading:!1,error:[t.t0.message]}));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){t?(O(!1),w(),h(ak(ak({},d),{},{site:t}))):(O(!0),h(ak(ak({},d),{},{site:{}})))}),[t]),s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,ek({},e,{siteState:d,formState:v,isAddMode:g,handleChangeInput:function(e){m(ak(ak({},v),{},{changes:ak(ak({},v.changes),{},ik({},e.target.name,e.target.value))}))},handlechangeImage:function(e,t){var r=new window.FileReader;r.readAsDataURL(e),r.onload=function(){m(ak(ak({},v),{},{changes:ak(ak({},v.changes),{},ik({},t,r.result))}))},r.onerror=function(e){return console.log(e)}},handleUpdateSite:j,handleDeleteSite:S,handleAddSite:E})))};function fk(){return fk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fk.apply(this,arguments)}function pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pk(Object(r),!0).forEach((function(t){hk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yk(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function vk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mk(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}lk.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},lk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var bk=function(e){var t,r=e.UIComponent,n=e.paginationSettings,o=e.isSearchByName,u=e.isSearchByDescription,c=vk(nr(),1)[0],l=vk(dr(),1)[0].token,f=vk(Object(i.useState)({loading:!1,sites:[],error:null}),2),p=f[0],d=f[1],h=vk(Object(i.useState)({currentPage:"pages"===n.controlType&&n.initialPage&&n.initialPage>=1?n.initialPage-1:0,pageSize:null!==(t=n.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),y=h[0],v=h[1],m=vk(Object(i.useState)(null),2),b=m[0],g=m[1],O=function(){var e,t=(e=a.a.mark((function e(t,r){var n,i,s,f,h,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(dk(dk({},p),{},{loading:!0})),n=null,i=[],b&&(s=[],o&&s.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}),u&&s.push({attribute:"description",value:{condition:"ilike",value:encodeURI("%".concat(b,"%"))}}),i.push({conector:"OR",conditions:s})),i.length&&(n={conditions:i,conector:"AND"}),f={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}},h=n?"".concat(c.root,"/sites?page=").concat(t,"&page_size=").concat(r,"&&where=").concat(JSON.stringify(n)):"".concat(c.root,"/sites?page=").concat(t,"&page_size=").concat(r),e.next=10,fetch(h,f);case 10:return m=e.sent,e.next=13,m.json();case 13:(g=e.sent).error?d(dk(dk({},p),{},{loading:!1,error:g.result})):(d({loading:!1,sites:g.result,error:null}),v(dk(dk({},y),{},{currentPage:g.pagination.current_page,totalPages:g.pagination.total_pages,totalItems:g.pagination.total,from:g.pagination.from,to:g.pagination.to}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),d(dk(dk({},p),{},{loading:!1,error:[e.t0.message]}));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){yk(a,n,o,i,s,"next",e)}function s(e){yk(a,n,o,i,s,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){p.loading||O(1,y.pageSize)}),[b]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,fk({},e,{paginationProps:y,setPaginationProps:v,sitesListState:p,searchValue:b,onSearch:g,getSites:O,handleSuccessUpdateSites:function(e){d(dk(dk({},p),{},{sites:e}))}})))};function gk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ok(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ok(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ok(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}bk.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},bk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"}};var wk=function(e){var t=e.trackId,r=e.children,n=gk(Nr(),1)[0],o=gk(Object(i.useState)(!1),2),a=o[0],u=o[1];Object(i.useEffect)((function(){if(t){if(!window.document.getElementById("google-analytics-sdk")){var e=window.document.createElement("script");return e.id="google-analytics-sdk",e.async=!0,e.defer=!0,e.src="https://www.google-analytics.com/analytics.js",e.onload=function(){u(!0),window.ga("create",t),window.ga("require","ec"),window.ga("set","page",window.location.pathname),window.ga("send","pageview")},window.document.body.appendChild(e),function(){e.onload=null}}"undefined"!=typeof ga&&u(!0)}}),[t]);var c=function(e){window.ga("set","page",null==e?void 0:e.page),window.ga("send","pageview")},l=function(e){window.ga("ec:addProduct",{id:e.id,name:e.name,category:e.category_id,price:e.price}),window.ga("ec:setAction","click"),window.ga("send","event","UI","click","add to cart")},f=function(e){window.ga("ec:addProduct",{id:e.id,name:e.name,category:e.category_id,price:e.price,quantity:e.quantity}),window.ga("ec:setAction","add"),window.ga("send","event","UI","click","add to cart")},p=function(e){window.ga("set","userId",e.id)},d=function(e){var t;window.ga("ec:setAction","purchase",{id:e.id,affiliation:null===(t=e.business)||void 0===t?void 0:t.name,revenue:e.total,tax:e.tax_total,shipping:e.delivery_zone_price})};return Object(i.useEffect)((function(){return console.log("Analytic Ready"),a&&window.ga&&(n.on("change_view",c),n.on("userLogin",p),n.on("product_clicked",l),n.on("product_added",f),n.on("order_placed",d)),function(){a&&window.ga&&(n.off("change_view",c),n.off("userLogin",p),n.off("product_clicked",l),n.off("product_added",f),n.off("order_placed",d))}}),[a]),s.a.createElement(s.a.Fragment,null,r)};function jk(){return jk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jk.apply(this,arguments)}function Sk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ek(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sk(Object(r),!0).forEach((function(t){Pk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ck(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Ik(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ck(a,n,o,i,s,"next",e)}function s(e){Ck(a,n,o,i,s,"throw",e)}i(void 0)}))}}function xk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ak(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ak(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ak(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}wk.propTypes={trackId:c.a.string.isRequired},wk.defaultProps={};var Tk=function(e){var t,r,n=e.UIComponent,o=e.userId,u=xk(nr(),1)[0],c=xk(dr(),1)[0].token,l=xk(Fn(),2)[1].showToast,f=xk(Lr(),2)[1],p=xk(Object(i.useState)({loading:!1,wallet:{},error:null}),2),d=p[0],h=p[1],y=xk(Object(i.useState)({loading:!1,events:[],error:null}),2),v=y[0],m=y[1],b=xk(Object(i.useState)({loading:!1,users:[],error:null}),2),g=b[0],O=b[1],w=xk(Object(i.useState)({}),2),j=w[0],S=w[1],E=xk(Object(i.useState)({}),2),P=E[0],C=E[1],I=xk(Object(i.useState)({loading:!1,error:null}),2),x=I[0],A=I[1],T=function(){var e=Ik(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(Ek(Ek({},d),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},e.next=5,fetch("".concat(u.root,"/users/").concat(o,"/wallets"),t);case 5:return r=e.sent,e.next=8,r.json();case 8:(n=e.sent).error?h(Ek(Ek({},d),{},{loading:!1,error:n.result})):h({loading:!1,wallet:n.result.find((function(e){return"cash"===e.type}))||{},error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),h(Ek(Ek({},d),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Ik(a.a.mark((function e(t){var r,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Ek(Ek({},v),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}},e.next=5,fetch("".concat(u.root,"/users/").concat(o,"/wallets/").concat(t,"/events?orderBy=-id"),r);case 5:return n=e.sent,e.next=8,n.json();case 8:(i=e.sent).error?m(Ek(Ek({},v),{},{loading:!1,error:i.result})):m({loading:!1,events:i.result,error:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),m(Ek(Ek({},v),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Ik(a.a.mark((function e(){var t,r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(Ek({loading:!0},g)),e.next=4,u.setAccessToken(c).users().select(["name","lastname"]).get();case 4:t=e.sent,r=t.content,n=r.result,o=r.error,O(o?Ek(Ek({},g),{},{loading:!1,error:n}):{loading:!1,users:n,error:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),O(Ek(Ek({},g),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Ik(a.a.mark((function e(){var t,r,n,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A({loading:!0,error:null}),l(Dn.Info,f("LOADING","Loading")),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(j)},e.next=6,fetch("".concat(u.root,"/users/").concat(o,"/wallets/").concat(null===(t=d.wallet)||void 0===t?void 0:t.id,"/events"),r);case 6:return n=e.sent,e.next=9,n.json();case 9:(i=e.sent).error?A({loading:!1,error:i.result}):(h(Ek(Ek({},d),{},{wallet:Ek(Ek({},d.wallet),{},{balance:(null===(s=d.wallet)||void 0===s?void 0:s.balance)+i.result.amount})})),S({}),A({loading:!1,error:null}),l(Dn.Success,f("WALLET_MONEY_ADDED","Wallet money added"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),A({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Ik(a.a.mark((function e(){var t,r,n,i,s,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A({loading:!0,error:null}),l(Dn.Info,f("LOADING","Loading")),(r=Ek({},P)).amount="-"+P.amount,n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(r)},e.next=8,fetch("".concat(u.root,"/users/").concat(o,"/wallets/").concat(null===(t=d.wallet)||void 0===t?void 0:t.id,"/events"),n);case 8:return i=e.sent,e.next=11,i.json();case 11:(s=e.sent).error?A({loading:!1,error:s.result}):(h(Ek(Ek({},d),{},{wallet:Ek(Ek({},d.wallet),{},{balance:(null===(p=d.wallet)||void 0===p?void 0:p.balance)+s.result.amount})})),A({loading:!1,error:null}),C({}),l(Dn.Success,f("WALLET_MONEY_REDUCED","Wallet money reduced"))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),A({loading:!1,error:[e.t0.message]});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){var e;null!==(e=d.wallet)&&void 0!==e&&e.id&&_(d.wallet.id)}),[null===(t=d.wallet)||void 0===t?void 0:t.id,null===(r=d.wallet)||void 0===r?void 0:r.balance]),Object(i.useEffect)((function(){T()}),[o]),Object(i.useEffect)((function(){k()}),[]),s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,jk({},e,{cashWalletState:d,cashEventsState:v,addWalletState:j,reduceWalletState:P,actionState:x,handleChangeInput:function(e,t){t?S(Ek(Ek({},j),{},Pk({},e.target.name,e.target.value))):C(Ek(Ek({},P),{},Pk({},e.target.name,e.target.value)))},handleAddWalletMoney:D,handleReduceWalletMoney:U,parseEvent:function(e){var t="",r="",n=g.users.find((function(t){return t.id===e.author_id}));if(r=n?"".concat(null==n?void 0:n.name," ").concat(null==n?void 0:n.lastname):"".concat(e.author_id),"manual"===e.event_type)switch(e.event){case"movement":t=-1===Math.sign(e.amount)?f("TRANSACTION_REDUCE_MONEY","<strong>_user_</strong> reduce money").replace("_user_","".concat(r)):f("TRANSACTION_ADD_MONEY","<strong>_user_</strong> add money").replace("_user_","".concat(r));break;case"locked":t=f("TRANSACTION_LOCKED","<strong>_user_</strong> locked").replace("_user_","".concat(r));break;case"unlocked":t=f("TRANSACTION_UNLOCKED","<strong>_user_</strong> unlocked").replace("_user_","".concat(r));break;default:t=e.event}return"refund"===e.event_type&&(t=f("REFUND")),t}})))};function _k(){return _k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_k.apply(this,arguments)}function kk(e){return function(e){if(Array.isArray(e))return Nk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Rk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dk(Object(r),!0).forEach((function(t){Lk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fk(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Bk(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Fk(a,n,o,i,s,"next",e)}function s(e){Fk(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Mk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Rk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rk(e,t){if(e){if("string"==typeof e)return Nk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nk(e,t):void 0}}function Nk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Tk.propTypes={UIComponent:c.a.elementType,userId:c.a.oneOfType([c.a.number,c.a.string]),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Tk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var zk=function(e){var t,r=e.UIComponent,n=e.paginationSettings,o=e.propsToFetch,u=e.isSearchByUserId,c=e.isSearchByUserEmail,l=e.isSearchByUserPhone,f=e.isSearchByUserName,p=e.isBusinessOwners,d=e.deafultUserTypesSelected,h=e.disabledActiveStateCondition,y=Mk(nr(),1)[0],v=Mk(dr(),1)[0],m=Mk(Fn(),2)[1].showToast,b=Mk(Lr(),2)[1],g=Mk(Object(i.useState)({users:[],loading:!1,error:null}),2),O=g[0],w=g[1],j=Mk(Object(i.useState)({clear:!1,changes:{}}),2),S=j[0],E=j[1],P=Mk(Object(i.useState)(null),2),C=P[0],I=P[1],x=Mk(Object(i.useState)(!1),2),A=x[0],T=x[1],_=Mk(Object(i.useState)(d),2),k=_[0],D=_[1],U=Mk(Object(i.useState)({currentPage:"pages"===n.controlType&&n.initialPage&&n.initialPage>=1?n.initialPage-1:0,pageSize:null!==(t=n.pageSize)&&void 0!==t?t:10,totalItems:null,totalPages:null}),2),L=U[0],F=U[1],B=Mk(Object(i.useState)({}),2),M=B[0],R=B[1],N=Mk(Object(i.useState)(!0),2),z=N[0],G=N[1],q=Mk(Object(i.useState)({loading:!1,error:null}),2),Y=q[0],$=q[1],J=Mk(Object(i.useState)([]),2),V=J[0],H=J[1],W=Mk(Object(i.useState)({loading:!1,error:null}),2),K=W[0],X=W[1],Z=function(){var e=Bk(a.a.mark((function e(t,r){var n,i,s,d,m,b,g,j,E,P,I,x,T,_,D,U,B;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(Uk(Uk({},O),{},{loading:!0})),n={},i={page:t,page_size:r||L.pageSize},p||(n=Uk({},i)),s=null,d=[],h||d.push({attribute:"enabled",value:z}),A&&((m=[]).push({attribute:"email_verified",value:!0}),m.push({attribute:"phone_verified",value:!0}),d.push({conector:"OR",conditions:m})),k.length>0&&d.push({attribute:"level",value:k}),C&&(b=[],u&&b.push({attribute:"id",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}}),c&&b.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}}),l&&b.push({attribute:"cellphone",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}}),f&&(b.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}}),b.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(C,"%"))}})),d.push({conector:"OR",conditions:b})),Object.keys(S.changes).length&&(E=[],null!=S&&null!==(g=S.changes)&&void 0!==g&&g.name&&null!==(null==S||null===(j=S.changes)||void 0===j?void 0:j.name)&&E.push({attribute:"name",value:{condition:"ilike",value:encodeURI("%".concat(null==S||null===(P=S.changes)||void 0===P?void 0:P.name,"%"))}}),S.changes.lastname&&null!==S.changes.lastname&&E.push({attribute:"lastname",value:{condition:"ilike",value:encodeURI("%".concat(S.changes.lastname,"%"))}}),S.changes.email&&null!==S.changes.email&&E.push({attribute:"email",value:{condition:"ilike",value:encodeURI("%".concat(S.changes.email,"%"))}}),void 0!==S.changes.email_verified&&E.push({attribute:"email_verified",value:S.changes.email_verified}),S.changes.phone&&null!==S.changes.phone&&E.push({attribute:"phone",value:{condition:"ilike",value:encodeURI("%".concat(S.changes.phone,"%"))}}),void 0!==S.changes.phone_verified&&E.push({attribute:"phone_verified",value:S.changes.phone_verified}),S.changes.id&&parseInt(S.changes.id)>0&&E.push({attribute:"id",value:parseInt(S.changes.id)}),E.length&&d.push({conector:"AND",conditions:E})),d.length&&(s={conditions:d,conector:"AND"}),I=s?y.setAccessToken(v.token).users().select(o).parameters(n).where(s):y.setAccessToken(v.token).users().select(o).parameters(n),e.next=16,I.get();case 16:x=e.sent,T=x.content,_=T.result,D=T.pagination,O.users=_,w(Uk(Uk({},O),{},{loading:!1})),U=0,D.current_page!==D.total_pages&&(B=D.total-O.users.length,U=B<D.page_size?B:D.page_size),F(Uk(Uk({},L),{},{currentPage:D.current_page,pageSize:0===D.page_size?L.pageSize:D.page_size,totalPages:D.total_pages,totalItems:D.total,from:D.from,to:D.to,nextPageItems:U})),R(Uk({},D)),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),"Cancel"!==e.t0.constructor.name&&w(Uk(Uk({},O),{},{loading:!1,error:[e.t0.message]}));case 31:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(t,r){return e.apply(this,arguments)}}(),Q=function(){var e=Bk(a.a.mark((function e(t){var r,n,o,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dn.Info,b("LOADING","Loading")),$(Uk(Uk({},Y),{},{loading:!0})),{}.updateOrder=r={},e.next=8,y.setAccessToken(v.token).users(t.id).save({level:t.level},{cancelToken:r});case 8:n=e.sent,o=n.content,i=o.error,s=o.result,$(Uk(Uk({},Y),{},{loading:!1,error:i?s:null})),i||(u=[],u=k.includes(t.level)?O.users.filter((function(e){return e.id===t.id&&(e.level=t.level),!0})):O.users.filter((function(e){return e.id!==s.id})),w(Uk(Uk({},O),{},{users:u})),m(Dn.Success,b("UPDATED","Updated"))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),$(Uk(Uk({},Y),{},{loading:!1,error:[e.t0.message]}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Bk(a.a.mark((function e(t){var r,n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(Dn.Info,b("LOADING","Loading")),$(Uk(Uk({},Y),{},{loading:!0})),e.next=5,y.setAccessToken(v.token).users(t.id).save({enabled:t.enabled});case 5:r=e.sent,n=r.content,o=n.error,i=n.result,$(Uk(Uk({},Y),{},{loading:!1,error:o?i:null})),o||(h||(s=O.users.filter((function(e){var r=!0;return e.id===t.id&&t.enabled===!z&&(r=!1),r})),w(Uk(Uk({},O),{},{users:s}))),m(Dn.Success,b("UPDATED","Updated"))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),$(Uk(Uk({},Y),{},{loading:!1,error:[e.t0.message]}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Bk(a.a.mark((function e(t){var r,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$(Uk(Uk({},Y),{},{loading:!0})),e.next=4,y.setAccessToken(v.token).users(t).delete();case 4:r=e.sent,(n=r.content).error||(o=O.users.filter((function(e){return e.id!==t})),w(Uk(Uk({},O),{},{users:o})),K.loading&&((i=kk(V)).shift(),0===i.length&&X(Uk(Uk({},K),{},{loading:!1})),H(i)),R(Uk(Uk({},M),{},{total:(null==M?void 0:M.total)-1}))),$(Uk(Uk({},Y),{},{loading:!1,error:n.error?n.result:null})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),$(Uk(Uk({},Y),{},{loading:!1,error:[e.t0.message]})),K.loading&&X(Uk(Uk({},K),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){K.loading&&0!==V.length&&te(V[0])}),[V,K]),Object(i.useEffect)((function(){O.loading||Z(1,null)}),[k,z,C,A]),Object(i.useEffect)((function(){(Object.keys(null==S?void 0:S.changes).length>0||S.clear)&&!O.loading&&Z(1,null)}),[S]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,_k({},e,{actionStatus:Y,usersList:O,filterValues:S,setFilterValues:E,userTypesSelected:k,handleSelectedUserTypes:function(e){D(e)},paginationProps:L,getUsers:Z,searchValue:C,onSearch:I,paginationDetail:M,selectedUserActiveState:z,isVerified:A,setIsVerified:T,handleChangeUserActiveState:function(){G(!z)},handleChangeUserType:Q,handleChangeActiveUser:ee,handleDeleteUser:te,selectedUsers:V,handleSelectedUsers:function(e){var t;t=V.includes(e)?V.filter((function(t){return t!==e})):[].concat(kk(V),[e]),H(t)},deleteUsersActionState:K,handleDeleteSeveralUsers:function(){X(Uk(Uk({},K),{},{loading:!0}))},handleSuccessUpdate:function(e){var t=O.users.filter((function(t){return t.id===e.id&&Object.assign(t,e),!0}));w(Uk(Uk({},O),{},{users:t}))},handleSuccessAddUser:function(e){k.includes(null==e?void 0:e.level)&&(w(Uk(Uk({},O),{},{users:[].concat(kk(O.users),[e])})),R(Uk(Uk({},M),{},{total:null!=M&&M.total?(null==M?void 0:M.total)+1:1})))},handleSuccessDeleteUser:function(e){k.includes(null==e?void 0:e.level)&&(w(Uk(Uk({},O),{},{users:O.users.filter((function(t){return t.id!==e.id}))})),R(Uk(Uk({},M),{},{total:(null==M?void 0:M.total)-1})))},handleSuccessAddressesUpdate:function(e,t){var r=O.users.filter((function(r){return r.id===e&&(r.addresses=kk(t)),!0}));w(Uk(Uk({},O),{},{users:r}))}})))};function Gk(){return Gk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gk.apply(this,arguments)}function qk(e){return function(e){if(Array.isArray(e))return Xk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kk(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yk(Object(r),!0).forEach((function(t){Jk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vk(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Hk(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Vk(a,n,o,i,s,"next",e)}function s(e){Vk(a,n,o,i,s,"throw",e)}i(void 0)}))}}function Wk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||Kk(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kk(e,t){if(e){if("string"==typeof e)return Xk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xk(e,t):void 0}}function Xk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}zk.propTypes={UIComponent:c.a.elementType,isSearchByUserId:c.a.bool,isSearchByUserEmail:c.a.bool,isSearchByUserPhone:c.a.bool,propsToFetch:c.a.arrayOf(u.string)},zk.defaultProps={propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","driver_zone_restriction","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname","birthdate","drivergroups"],paginationSettings:{initialPage:1,pageSize:10,controlType:"infinity"},deafultUserTypesSelected:[0,1,2,3]};var Zk=function(e){var t=e.userId,r=e.UIComponent,n=Wk(nr(),1)[0],o=Wk(dr(),1)[0],u=Wk(Object(i.useState)({metaFields:[],loading:!0,error:null}),2),c=u[0],l=u[1],f=Wk(Object(i.useState)({loading:!1,result:{error:!1}}),2),p=f[0],d=f[1],h=function(){var e=Hk(a.a.mark((function e(){var r,i,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l($k($k({},c),{},{loading:!0})),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(n.root,"/users/").concat(t,"/metafields"),r);case 5:return i=e.sent,e.next=8,i.json();case 8:s=e.sent,u=s.result,l($k($k({},c),{},{loading:!1,metaFields:u})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),l($k($k({},c),{},{loading:!1,error:e.t0.message}));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Hk(a.a.mark((function e(r){var i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d($k($k({},p),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)}},e.next=5,fetch("".concat(n.root,"/users/").concat(t,"/metafields/").concat(r),i);case 5:e.sent.ok&&(s=c.metaFields.filter((function(e){return e.id!==r})),l($k($k({},c),{},{metaFields:s})),d({loading:!1,result:{error:!1}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Hk(a.a.mark((function e(r){var i,s,u,f,h,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d($k($k({},p),{},{loading:!0})),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o.token)},body:JSON.stringify(r)},e.next=5,fetch("".concat(n.root,"/users/").concat(t,"/metafields"),i);case 5:return s=e.sent,e.next=8,s.json();case 8:u=e.sent,f=u.error,h=u.result,f?d({loading:!1,result:{error:!0,result:h}}):([],y=[].concat(qk(c.metaFields),[h]),l($k($k({},c),{},{metaFields:y})),d({loading:!1,result:{error:!1}})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),d({result:{error:!0,result:e.t0.message},loading:!1});case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){h()}),[t]),s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(r,Gk({},e,{metaFieldsList:c,actionState:p,handleDeleteMetaField:y,handeAddMetaField:v})))};function Qk(){return Qk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qk.apply(this,arguments)}function eD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}Zk.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},Zk.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var rD=function(e){var t=e.userTypes,r=e.onChangeUserType,n=e.defaultUserTypes,o=e.UIComponent,a=eD(Object(i.useState)(n),2),u=a[0],c=a[1];return s.a.createElement(s.a.Fragment,null,o&&s.a.createElement(o,Qk({},e,{userTypes:t,currentTypesSelected:u,handleChangeUserType:function(e){c(e),r(e)}})))};function nD(){return nD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nD.apply(this,arguments)}function oD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function aD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oD(Object(r),!0).forEach((function(t){iD(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function iD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sD(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function uD(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){sD(a,n,o,i,s,"next",e)}function s(e){sD(a,n,o,i,s,"throw",e)}i(void 0)}))}}function cD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lD(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}rD.propTypes={UIComponent:c.a.elementType,userTypes:c.a.arrayOf(c.a.object),defaultUserTypes:c.a.arrayOf(c.a.number),onChangeUserType:c.a.func,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},rD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]};var fD=function(e){var t=e.userId,r=e.propsToFetch,n=e.UIComponent,o=e.handleSuccessUpdate,u=e.handleSuccessDeleteUser,c=cD(nr(),1)[0],l=cD(dr(),1)[0],f=cD(Fn(),2)[1].showToast,p=cD(Lr(),2)[1],d=cD(Object(i.useState)({user:null,loading:!1,error:null}),2),h=d[0],y=d[1],v=cD(Object(i.useState)({loading:!1,error:null}),2),m=v[0],b=v[1],g=function(){var e=uD(a.a.mark((function e(){var n,o,i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(aD(aD({},h),{},{loading:!0})),n=c.setAccessToken(l.token).users(t).select(r),e.next=5,n.get();case 5:o=e.sent,i=o.content.result,s=Array.isArray(i)?null:i,y(aD(aD({},h),{},{loading:!1,user:s})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),y(aD(aD({},h),{},{loading:!1,error:[e.t0.message]}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var r=uD(a.a.mark((function r(){var n,o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,f(Dn.Info,p("LOADING","Loading")),b({loading:!0,error:null}),r.next=5,c.setAccessToken(l.token).users(t).delete();case 5:n=r.sent,o=n.content,b({loading:!1,error:o.error?o.result:null}),o.error||(f(Dn.Success,p("USER_DELETED","User deleted")),u&&u(h.user),e.onClose&&e.onClose()),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),b({loading:!1,error:[r.t0.message]});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(){return r.apply(this,arguments)}}();Object(i.useEffect)((function(){e.user?y(aD(aD({},h),{},{user:e.user})):g()}),[t]);return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(n,nD({},e,{userState:h,actionStatus:m,handleDeleteUser:O,handleSuccessUserUpdate:function(e){y(aD(aD({},h),{},{user:Object.assign(h.user,e)})),o&&o(e)}})))};function pD(){return pD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pD.apply(this,arguments)}function dD(e){return function(e){if(Array.isArray(e))return wD(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||OD(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hD(Object(r),!0).forEach((function(t){vD(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mD(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function bD(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){mD(a,n,o,i,s,"next",e)}function s(e){mD(a,n,o,i,s,"throw",e)}i(void 0)}))}}function gD(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}(e,t)||OD(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OD(e,t){if(e){if("string"==typeof e)return wD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wD(e,t):void 0}}function wD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}fD.propTypes={UIComponent:c.a.elementType,propsToFetch:c.a.arrayOf(u.string),userId:c.a.oneOfType([c.a.number,c.a.string]),user:c.a.object,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},fD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[],propsToFetch:["name","lastname","email","phone","photo","cellphone","country_phone_code","city_id","city","address","addresses","address_notes","driver_zone_restriction","dropdown_option_id","dropdown_option","location","zipcode","level","enabled","middle_name","second_lastname","phone_verified","email_verified"]};var jD=function(e){var t=e.UIComponent,r=gD(nr(),1)[0],n=gD(dr(),1)[0].token,o=gD(Fn(),2)[1].showToast,u=gD(Lr(),2)[1],c=gD(Object(i.useState)({webhooks:[],loading:!1,error:null}),2),l=c[0],f=c[1],p=gD(Object(i.useState)(!1),2),d=p[0],h=p[1],y=gD(Object(i.useState)({loading:!1,error:null}),2),v=y[0],m=y[1],b=gD(Object(i.useState)({delay:"0"}),2),g=b[0],O=b[1],w=function(){var e=bD(a.a.mark((function e(){var t,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(yD(yD({},l),{},{loading:!0})),t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},e.next=5,fetch("".concat(r.root,"/webhooks"),t);case 5:return o=e.sent,e.next=8,o.json();case 8:(i=e.sent).error||f(yD(yD({},l),{},{webhooks:i.result,loading:!1})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),f(yD(yD({},l),{},{loading:!1,error:[e.t0.message]}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=bD(a.a.mark((function e(){var t,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dn.Info,u("LOADING","Loading")),m(yD(yD({},v),{},{loading:!0})),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(g)},e.next=6,fetch("".concat(r.root,"/webhooks"),t);case 6:return i=e.sent,e.next=9,i.json();case 9:(s=e.sent).error?m({loading:!1,error:s.result}):(m(yD(yD({},v),{},{loading:!1})),c=[].concat(dD(l.webhooks),[s.result]),f(yD(yD({},l),{},{webhooks:c})),o(Dn.Success,u("WEBHOOK_ADDED","Webhook added")),h(!1),O({delay:"0"})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=bD(a.a.mark((function e(t){var i,s,c,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(Dn.Info,u("LOADING","Loading")),m(yD(yD({},v),{},{loading:!0})),i={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}},e.next=6,fetch("".concat(r.root,"/webhooks/").concat(t),i);case 6:return s=e.sent,e.next=9,s.json();case 9:(c=e.sent).error?m({loading:!1,error:c.result}):(m(yD(yD({},v),{},{loading:!1})),p=l.webhooks.filter((function(e){return e.id!==t})),f(yD(yD({},l),{},{webhooks:p})),o(Dn.Success,u("WEBHOOK_REMOVED","Webhook removed")),h(!1),O({delay:"0"})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),m({loading:!1,error:[e.t0.message]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){w()}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement(t,pD({},e,{webhookListState:l,isAddMode:d,setIsAddMode:h,handleAddNewWebhook:j,changesState:g,actionState:v,handleChangeAddState:function(e,t){O(yD(yD({},g),{},vD({},e,t)))},handleDeleteWebhook:S})))};jD.propTypes={UIComponent:c.a.elementType,beforeComponents:c.a.arrayOf(c.a.elementType),afterComponents:c.a.arrayOf(c.a.elementType),beforeElements:c.a.arrayOf(c.a.element),afterElements:c.a.arrayOf(c.a.element)},jD.defaultProps={beforeComponents:[],afterComponents:[],beforeElements:[],afterElements:[]}}])}));